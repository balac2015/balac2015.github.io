function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var UX=Object.defineProperty;var WX=(n,e,t)=>e in n?UX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>(WX(n,typeof e!="symbol"?e+"":e,t),t);import{c as VX,D as Rv,T as ox,x as rt,b as dp,S as ki,a as Ya,j as KX,d as xt,n as Ei,A as Di,o as Aj,e as Yo,m as Tr,z as Td,B as Ss,f as YX,g as dv,h as Dv,I as Lj,i as $j,Y as $g,k as GX,l as XX,p as qX,E as jj,q as la,P as U9,F as Nv,_ as uv,r as JX,s as ix,t as jg,u as ss,v as ja,w as QX,y as eq,C as bm,G as tq,H as nq,J as sa,K as Rj,L as W9,M as V9,N as rq,O as y6,Q as K9,R as Dj,U as zv,V as oq,W as x6,X as y3,Z as iI,$ as iq,a0 as aq,a1 as sq,a2 as lq,a3 as Ui,a4 as x3,a5 as cq,a6 as dq,a7 as uq,a8 as Nj,a9 as zj,aa as Bj,ab as Hj,ac as Fj,ad as Zj,ae as Uj,af as Wj,ag as Vj,ah as Kj,ai as hq,aj as fq,ak as pq,al as w6,am as Yj,an as Gj,ao as ne,ap as gq,aq as mq,ar as K,as as up,at as je,au as Xj,av as aI,aw as vq,ax as bq,ay as yq,az as xq,aA as wq,aB as Cq,aC as qj,aD as ur,aE as Jj,aF as vo,aG as Sq,aH as kq,aI as sI,aJ as _q,aK as Eq,aL as lI,aM as Pq,aN as Mq,aO as Iq,aP as Tq,aQ as Oq,aR as Aq,aS as Lq}from"./index-DExyTzuO.js";const $q=VX("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),jq=typeof window<"u",Su=jq&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Rq=n=>{const e=new Map,t=document.querySelector("format-quick-bar");t&&(e.set(t,t.style.visibility),t.style.visibility="hidden");try{return n()}finally{e.forEach((r,o)=>{o.style.visibility=r})}};function Uf(n,e){if(Su){const o=document.caretPositionFromPoint(n,e),i=document.createRange();return i.setStart(o.offsetNode,o.offset),i}const t=document.caretRangeFromPoint(n,e);if(!t)return null;const r=t==null?void 0:t.getClientRects();return r&&r.length===2&&t.startOffset===t.endOffset&&e<r[0].y+r[0].height&&(r[0].x|0)-(r[1].x|0)>0&&(t.setStart(t.startContainer,t.startOffset-1),t.setEnd(t.endContainer,t.endOffset-1)),t.startContainer===document.body&&t.endContainer===document.body?Rq(()=>document.caretRangeFromPoint(n,e)):t}function f5(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w3=window,XS=w3.ShadowRoot&&(w3.ShadyCSS===void 0||w3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qS=Symbol(),cI=new WeakMap;let JS=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==qS)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(XS&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=cI.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&cI.set(t,e))}return e}toString(){return this.cssText}};const Dq=n=>new JS(typeof n=="string"?n:n+"",void 0,qS),vr=(n,...e)=>{const t=n.length===1?n[0]:e.reduce((r,o,i)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+n[i+1],n[0]);return new JS(t,n,qS)},Nq=(n,e)=>{XS?n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const r=document.createElement("style"),o=w3.litNonce;o!==void 0&&r.setAttribute("nonce",o),r.textContent=t.cssText,n.appendChild(r)})},dI=XS?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return Dq(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var k7;const C6=window,uI=C6.trustedTypes,zq=uI?uI.emptyScript:"",hI=C6.reactiveElementPolyfillSupport,Y9={toAttribute(n,e){switch(e){case Boolean:n=n?zq:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},Qj=(n,e)=>e!==n&&(e==e||n==n),_7={attribute:!0,type:String,converter:Y9,reflect:!1,hasChanged:Qj},G9="finalized";let ug=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,r)=>{const o=this._$Ep(r,t);o!==void 0&&(this._$Ev.set(o,r),e.push(o))}),e}static createProperty(e,t=_7){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,o=this.getPropertyDescriptor(e,r,t);o!==void 0&&Object.defineProperty(this.prototype,e,o)}}static getPropertyDescriptor(e,t,r){return{get(){return this[t]},set(o){const i=this[e];this[t]=o,this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||_7}static finalize(){if(this.hasOwnProperty(G9))return!1;this[G9]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,r=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const o of r)this.createProperty(o,t[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const o of r)t.unshift(dI(o))}else e!==void 0&&t.push(dI(e));return t}static _$Ep(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,r;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Nq(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var r;return(r=t.hostConnected)===null||r===void 0?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var r;return(r=t.hostDisconnected)===null||r===void 0?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EO(e,t,r=_7){var o;const i=this.constructor._$Ep(e,r);if(i!==void 0&&r.reflect===!0){const a=(((o=r.converter)===null||o===void 0?void 0:o.toAttribute)!==void 0?r.converter:Y9).toAttribute(t,r.type);this._$El=e,a==null?this.removeAttribute(i):this.setAttribute(i,a),this._$El=null}}_$AK(e,t){var r;const o=this.constructor,i=o._$Ev.get(e);if(i!==void 0&&this._$El!==i){const a=o.getPropertyOptions(i),s=typeof a.converter=="function"?{fromAttribute:a.converter}:((r=a.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?a.converter:Y9;this._$El=i,this[i]=s.fromAttribute(t,a.type),this._$El=null}}requestUpdate(e,t,r){let o=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||Qj)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((o,i)=>this[i]=o),this._$Ei=void 0);let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(o=>{var i;return(i=o.hostUpdate)===null||i===void 0?void 0:i.call(o)}),this.update(r)):this._$Ek()}catch(o){throw t=!1,this._$Ek(),o}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(r=>{var o;return(o=r.hostUpdated)===null||o===void 0?void 0:o.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,r)=>this._$EO(r,this[r],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};ug[G9]=!0,ug.elementProperties=new Map,ug.elementStyles=[],ug.shadowRootOptions={mode:"open"},hI==null||hI({ReactiveElement:ug}),((k7=C6.reactiveElementVersions)!==null&&k7!==void 0?k7:C6.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var E7,P7;let so=class extends ug{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const r=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=r.firstChild),r}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Rv(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ox}};so.finalized=!0,so._$litElement$=!0,(E7=globalThis.litElementHydrateSupport)===null||E7===void 0||E7.call(globalThis,{LitElement:so});const fI=globalThis.litElementPolyfillSupport;fI==null||fI({LitElement:so});((P7=globalThis.litElementVersions)!==null&&P7!==void 0?P7:globalThis.litElementVersions=[]).push("3.3.3");const Bq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11 3.75C6.99594 3.75 3.75 6.99594 3.75 11C3.75 15.0041 6.99594 18.25 11 18.25C13.0026 18.25 14.8156 17.4381 16.1276 16.1254L16.1287 16.1243C17.4393 14.8125 18.25 13.0008 18.25 11C18.25 6.99594 15.0041 3.75 11 3.75ZM17.6965 16.6324C18.9779 15.1104 19.75 13.1453 19.75 11C19.75 6.16751 15.8325 2.25 11 2.25C6.16751 2.25 2.25 6.16751 2.25 11C2.25 15.8325 6.16751 19.75 11 19.75C13.1471 19.75 15.1136 18.9767 16.6361 17.6933L20.4694 21.5301C20.7622 21.8231 21.2371 21.8233 21.5301 21.5306C21.8231 21.2378 21.8233 20.7629 21.5306 20.4699L17.6965 16.6324Z"
  />
</svg>`,Hq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M11.25 9C11.25 9.41421 11.5858 9.75 12 9.75H13.1893L7.46967 15.4697C7.17678 15.7626 7.17678 16.2374 7.46967 16.5303C7.76256 16.8232 8.23744 16.8232 8.53033 16.5303L14.25 10.8107V12C14.25 12.4142 14.5858 12.75 15 12.75C15.4142 12.75 15.75 12.4142 15.75 12V9.1C15.75 9.08264 15.7495 9.0654 15.7485 9.04829C15.7618 8.84059 15.6891 8.62841 15.5303 8.46967C15.3716 8.31093 15.1594 8.23823 14.9517 8.25155C14.9346 8.25052 14.9174 8.25 14.9 8.25H12C11.5858 8.25 11.25 8.58579 11.25 9Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.8304 3.25H11.1696C10.6354 3.24999 10.1896 3.24998 9.82533 3.27974C9.44545 3.31078 9.08879 3.37789 8.75153 3.54973C8.23408 3.81338 7.81339 4.23408 7.54973 4.75153C7.37789 5.08879 7.31078 5.44545 7.27974 5.82533C7.24998 6.18956 7.24999 6.63541 7.25 7.16956L7.25 7.25L7.16957 7.25C6.63542 7.24999 6.18956 7.24998 5.82533 7.27974C5.44545 7.31078 5.08879 7.37789 4.75153 7.54973C4.23408 7.81339 3.81338 8.23408 3.54973 8.75153C3.37789 9.08879 3.31078 9.44545 3.27974 9.82533C3.24998 10.1896 3.24999 10.6354 3.25 11.1696V16.8304C3.24999 17.3646 3.24998 17.8104 3.27974 18.1747C3.31078 18.5546 3.37789 18.9112 3.54973 19.2485C3.81338 19.7659 4.23408 20.1866 4.75153 20.4503C5.08879 20.6221 5.44545 20.6892 5.82533 20.7203C6.18956 20.75 6.6354 20.75 7.16955 20.75H12.8305C13.3646 20.75 13.8104 20.75 14.1747 20.7203C14.5546 20.6892 14.9112 20.6221 15.2485 20.4503C15.7659 20.1866 16.1866 19.7659 16.4503 19.2485C16.6221 18.9112 16.6892 18.5546 16.7203 18.1747C16.75 17.8105 16.75 17.3646 16.75 16.8305V16.75H16.8305C17.3646 16.75 17.8105 16.75 18.1747 16.7203C18.5546 16.6892 18.9112 16.6221 19.2485 16.4503C19.7659 16.1866 20.1866 15.7659 20.4503 15.2485C20.6221 14.9112 20.6892 14.5546 20.7203 14.1747C20.75 13.8104 20.75 13.3646 20.75 12.8305V7.16955C20.75 6.6354 20.75 6.18956 20.7203 5.82533C20.6892 5.44545 20.6221 5.08879 20.4503 4.75153C20.1866 4.23408 19.7659 3.81338 19.2485 3.54973C18.9112 3.37789 18.5546 3.31078 18.1747 3.27974C17.8104 3.24998 17.3646 3.24999 16.8304 3.25ZM7.25 11V8.75H7.2C6.62757 8.75 6.24336 8.75058 5.94748 8.77476C5.66036 8.79822 5.52307 8.8401 5.43251 8.88624C5.19731 9.00608 5.00608 9.19731 4.88624 9.43251C4.8401 9.52307 4.79822 9.66036 4.77476 9.94748C4.75058 10.2434 4.75 10.6276 4.75 11.2V16.8C4.75 17.3724 4.75058 17.7566 4.77476 18.0525C4.79822 18.3396 4.8401 18.4769 4.88624 18.5675C5.00608 18.8027 5.19731 18.9939 5.43251 19.1138C5.52307 19.1599 5.66036 19.2018 5.94748 19.2252C6.24336 19.2494 6.62757 19.25 7.2 19.25H12.8C13.3724 19.25 13.7566 19.2494 14.0525 19.2252C14.3396 19.2018 14.4769 19.1599 14.5675 19.1138C14.8027 18.9939 14.9939 18.8027 15.1138 18.5675C15.1599 18.4769 15.2018 18.3396 15.2252 18.0525C15.2494 17.7566 15.25 17.3724 15.25 16.8V16.75H13C12.5858 16.75 12.25 16.4142 12.25 16C12.25 15.5858 12.5858 15.25 13 15.25H16.8C17.3724 15.25 17.7566 15.2494 18.0525 15.2252C18.3396 15.2018 18.4769 15.1599 18.5675 15.1138C18.8027 14.9939 18.9939 14.8027 19.1138 14.5675C19.1599 14.4769 19.2018 14.3396 19.2252 14.0525C19.2494 13.7566 19.25 13.3724 19.25 12.8V7.2C19.25 6.62757 19.2494 6.24336 19.2252 5.94748C19.2018 5.66036 19.1599 5.52307 19.1138 5.43251C18.9939 5.19731 18.8027 5.00608 18.5675 4.88624C18.4769 4.8401 18.3396 4.79822 18.0525 4.77476C17.7566 4.75058 17.3724 4.75 16.8 4.75H11.2C10.6276 4.75 10.2434 4.75058 9.94748 4.77476C9.66036 4.79822 9.52307 4.8401 9.43251 4.88624C9.19731 5.00608 9.00608 5.19731 8.88624 5.43251C8.8401 5.52307 8.79822 5.66036 8.77476 5.94748C8.75058 6.24336 8.75 6.62757 8.75 7.2V11C8.75 11.4142 8.41422 11.75 8 11.75C7.58579 11.75 7.25 11.4142 7.25 11Z"
  />
</svg>`,Fq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12.25 6C12.25 4.48122 13.4812 3.25 15 3.25H18C19.5188 3.25 20.75 4.48122 20.75 6V18C20.75 19.5188 19.5188 20.75 18 20.75H15C13.4812 20.75 12.25 19.5188 12.25 18V6ZM15 4.75C14.3096 4.75 13.75 5.30964 13.75 6V18C13.75 18.6904 14.3096 19.25 15 19.25H18C18.6904 19.25 19.25 18.6904 19.25 18V6C19.25 5.30964 18.6904 4.75 18 4.75H15Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L10 11.25C10.4142 11.25 10.75 11.5858 10.75 12C10.75 12.4142 10.4142 12.75 10 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7 15.75C6.58579 15.75 6.25 15.4142 6.25 15L6.25 9C6.25 8.58579 6.58579 8.25 7 8.25C7.41421 8.25 7.75 8.58579 7.75 9L7.75 15C7.75 15.4142 7.41421 15.75 7 15.75Z"
  />
</svg>`,eR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11.75 6C11.75 4.48122 10.5188 3.25 9 3.25H6C4.48122 3.25 3.25 4.48122 3.25 6V18C3.25 19.5188 4.48122 20.75 6 20.75H9C10.5188 20.75 11.75 19.5188 11.75 18V6ZM9 4.75C9.69036 4.75 10.25 5.30964 10.25 6V18C10.25 18.6904 9.69036 19.25 9 19.25H6C5.30964 19.25 4.75 18.6904 4.75 18V6C4.75 5.30964 5.30964 4.75 6 4.75H9Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20.75 12C20.75 11.5858 20.4142 11.25 20 11.25L14 11.25C13.5858 11.25 13.25 11.5858 13.25 12C13.25 12.4142 13.5858 12.75 14 12.75L20 12.75C20.4142 12.75 20.75 12.4142 20.75 12Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M17 15.75C17.4142 15.75 17.75 15.4142 17.75 15V9C17.75 8.58579 17.4142 8.25 17 8.25C16.5858 8.25 16.25 8.58579 16.25 9V15C16.25 15.4142 16.5858 15.75 17 15.75Z"
  />
</svg>`,Zq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M4 4V20M8 12H20M8 12L12 8M8 12L12 16"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
    stroke-linejoin="round"
  />
</svg>`,Uq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M20 4V20M4 12H16M16 12L12 8M16 12L12 16"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
    stroke-linejoin="round"
  />
</svg>`,tR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M4 5L6.42929 7.42929C6.46834 7.46834 6.53166 7.46834 6.57071 7.42929L9 5"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M4 11L6.42929 13.4293C6.46834 13.4683 6.53166 13.4683 6.57071 13.4293L9 11"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M4 17L6.42929 19.4293C6.46834 19.4683 6.53166 19.4683 6.57071 19.4293L9 17"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M12 6L20 6"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M12 12L20 12"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M12 18L20 18"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
</svg>`,nR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M18.5 4L12.5 20"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M12 4L6 20"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M20 8.5H5.5"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
  <path
    d="M19 15L4 15"
    stroke="currentColor"
    stroke-width="1.5"
    stroke-linecap="round"
  />
</svg>`,rR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75ZM2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.46967 10.4697C7.76256 10.1768 8.23744 10.1768 8.53033 10.4697L12 13.9393L15.4697 10.4697C15.7626 10.1768 16.2374 10.1768 16.5303 10.4697C16.8232 10.7626 16.8232 11.2374 16.5303 11.5303L12.601 15.4596C12.2691 15.7916 11.7309 15.7916 11.399 15.4596L7.46967 11.5303C7.17678 11.2374 7.17678 10.7626 7.46967 10.4697Z"
  />
</svg>`,oR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M15 4.25C15.4142 4.25 15.75 4.58579 15.75 5V6.25H18C20.0711 6.25 21.75 7.92893 21.75 10V14C21.75 16.0711 20.0711 17.75 18 17.75H15.75V19C15.75 19.4142 15.4142 19.75 15 19.75C14.5858 19.75 14.25 19.4142 14.25 19V17.75H6C3.92893 17.75 2.25 16.0711 2.25 14V10C2.25 7.92893 3.92893 6.25 6 6.25H14.25V5C14.25 4.58579 14.5858 4.25 15 4.25ZM14.25 7.75H6C4.75736 7.75 3.75 8.75736 3.75 10V14C3.75 15.2426 4.75736 16.25 6 16.25H14.25V7.75ZM15.75 16.25H18C19.2426 16.25 20.25 15.2426 20.25 14V10C20.25 8.75736 19.2426 7.75 18 7.75H15.75V16.25ZM6 9.25C6.41421 9.25 6.75 9.58579 6.75 10V14C6.75 14.4142 6.41421 14.75 6 14.75C5.58579 14.75 5.25 14.4142 5.25 14L5.25 10C5.25 9.58579 5.58579 9.25 6 9.25ZM9 9.25C9.41421 9.25 9.75 9.58579 9.75 10L9.75 14C9.75 14.4142 9.41421 14.75 9 14.75C8.58579 14.75 8.25 14.4142 8.25 14L8.25 10C8.25 9.58579 8.58579 9.25 9 9.25ZM12 9.25C12.4142 9.25 12.75 9.58579 12.75 10V14C12.75 14.4142 12.4142 14.75 12 14.75C11.5858 14.75 11.25 14.4142 11.25 14V10C11.25 9.58579 11.5858 9.25 12 9.25Z"
  />
</svg>`,QS=rt`<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  xmlns="http://www.w3.org/2000/svg"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.22872 4.22878C4.42398 4.03352 4.74057 4.03352 4.93583 4.22878L7.99996 7.29291L11.0641 4.22878C11.2593 4.03352 11.5759 4.03352 11.7712 4.22878C11.9665 4.42405 11.9665 4.74063 11.7712 4.93589L8.70707 8.00002L11.7712 11.0641C11.9665 11.2594 11.9665 11.576 11.7712 11.7713C11.5759 11.9665 11.2593 11.9665 11.0641 11.7713L7.99996 8.70713L4.93583 11.7713C4.74057 11.9665 4.42398 11.9665 4.22872 11.7713C4.03346 11.576 4.03346 11.2594 4.22872 11.0641L7.29285 8.00002L4.22872 4.93589C4.03346 4.74063 4.03346 4.42405 4.22872 4.22878Z"
  />
</svg>`,S6=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20.5322 5.97152C20.824 6.26543 20.8224 6.7403 20.5285 7.03217L9.45156 18.0322C9.15909 18.3226 8.68706 18.3226 8.3946 18.0322L3.47152 13.1433C3.17761 12.8514 3.17595 12.3765 3.46783 12.0826C3.7597 11.7887 4.23457 11.7871 4.52848 12.0789L8.92308 16.443L19.4715 5.96783C19.7654 5.67595 20.2403 5.67761 20.5322 5.97152Z"
  />
</svg>`,Wq=`
  width: 12px;
  height: 12px;
  fill: var(--affine-text-primary-color);
`,pI=rt`<svg
  viewBox="0 0 16 16"
  style=${Wq}
>
  <path
    d="M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z"
  ></path>
</svg>`,Vq=rt`<svg
  width="10"
  height="14"
  viewBox="0 0 10 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <rect width="10" height="14" rx="2" />
  <rect width="10" height="14" rx="2" fill-opacity="0.08" />
  <g clip-path="url(#clip0_179_9218)">
    <circle cx="3" cy="3" r="1" fill="var(--affine-icon-color)" />
    <circle cx="3" cy="6.79163" r="1" fill="var(--affine-icon-color)" />
    <circle cx="3" cy="10.5833" r="1" fill="var(--affine-icon-color)" />
    <circle cx="7" cy="3" r="1" fill="var(--affine-icon-color)" />
    <circle cx="7" cy="6.79163" r="1" fill="var(--affine-icon-color)" />
    <circle cx="7" cy="10.5833" r="1" fill="var(--affine-icon-color)" />
  </g>
  <defs>
    <clipPath id="clip0_179_9218">
      <rect width="6" height="10" transform="translate(2 2)" />
    </clipPath>
  </defs>
</svg>`,Kq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M10.3383 3.88231L18.071 8.69778C19.0571 9.31182 19.8404 9.79964 20.4017 10.2216C20.9493 10.6333 21.4318 11.0842 21.62 11.6695C21.8868 12.4988 21.7381 13.4034 21.2188 14.1027C20.852 14.5967 20.2493 14.8668 19.599 15.0782C18.9323 15.2949 18.0344 15.5017 16.9044 15.7619L14.4307 16.3314C14.0188 16.4263 13.91 16.4546 13.8157 16.4966C13.7187 16.5398 13.6281 16.5952 13.546 16.6612C13.4669 16.7248 13.3935 16.807 13.1235 17.1285L11.9305 18.5487C11.162 19.4637 10.552 20.1898 10.0419 20.6983C9.54488 21.1937 9.0177 21.6165 8.39807 21.7155C7.52714 21.8546 6.63964 21.5686 6.0146 20.9464C5.56965 20.5035 5.39026 19.852 5.27806 19.16C5.1629 18.4498 5.09457 17.5048 5.00849 16.3143L4.36527 7.41939C4.2957 6.4575 4.23967 5.68281 4.25165 5.08075C4.26359 4.48099 4.34126 3.90703 4.65756 3.44031C5.11363 2.76734 5.84836 2.33594 6.65832 2.25865C7.21739 2.2053 7.76104 2.406 8.30191 2.67862C8.84485 2.95229 9.51023 3.36666 10.3383 3.88231ZM7.62675 4.01809C7.14246 3.77397 6.9194 3.74055 6.80081 3.75187C6.43097 3.78716 6.10155 3.98334 5.89928 4.28182C5.83742 4.37309 5.762 4.57571 5.75136 5.11059C5.74092 5.635 5.79114 6.34017 5.8642 7.35039L6.50172 16.1665C6.59131 17.4054 6.65553 18.2835 6.75873 18.92C6.86617 19.5826 6.99326 19.8041 7.07279 19.8833C7.35743 20.1666 7.76348 20.2978 8.16142 20.2342C8.27334 20.2164 8.507 20.1103 8.98299 19.6359C9.44028 19.1801 10.0077 18.5057 10.8074 17.5536L11.975 16.1637C11.9876 16.1487 12 16.1338 12.0123 16.1192C12.2275 15.8628 12.3982 15.6594 12.606 15.4923C12.7891 15.345 12.9907 15.222 13.2055 15.1264C13.4489 15.018 13.7084 14.9583 14.0374 14.8828C14.0561 14.8785 14.075 14.8741 14.0941 14.8697L16.5295 14.3089C17.7063 14.038 18.5392 13.8455 19.1353 13.6517C19.7553 13.4501 19.9497 13.2958 20.0146 13.2084C20.2446 12.8987 20.3109 12.4982 20.1921 12.1288C20.1582 12.0234 20.0225 11.8131 19.5003 11.4206C18.9982 11.0431 18.2715 10.5897 17.2448 9.95034L9.57801 5.17595C8.70973 4.63525 8.10185 4.25756 7.62675 4.01809Z"
  />
</svg>`,Yq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12 3.25C12.2691 3.25 12.5177 3.39421 12.6512 3.6279L16.2067 9.85012C16.3394 10.0822 16.3384 10.3674 16.2042 10.5987C16.07 10.8299 15.8229 10.9722 15.5556 10.9722H8.44444C8.17709 10.9722 7.92995 10.8299 7.79576 10.5987C7.66157 10.3674 7.66062 10.0822 7.79326 9.85012L11.3488 3.6279C11.4823 3.39421 11.7309 3.25 12 3.25ZM9.73683 9.47222H14.2632L12 5.51167L9.73683 9.47222ZM7.11111 14.5278C5.80711 14.5278 4.75 15.5849 4.75 16.8889C4.75 18.1929 5.80711 19.25 7.11111 19.25C8.41512 19.25 9.47222 18.1929 9.47222 16.8889C9.47222 15.5849 8.41512 14.5278 7.11111 14.5278ZM3.25 16.8889C3.25 14.7565 4.97868 13.0278 7.11111 13.0278C9.24354 13.0278 10.9722 14.7565 10.9722 16.8889C10.9722 19.0213 9.24354 20.75 7.11111 20.75C4.97868 20.75 3.25 19.0213 3.25 16.8889ZM13.0278 13.7778C13.0278 13.3636 13.3636 13.0278 13.7778 13.0278H20C20.4142 13.0278 20.75 13.3636 20.75 13.7778V20C20.75 20.4142 20.4142 20.75 20 20.75H13.7778C13.3636 20.75 13.0278 20.4142 13.0278 20V13.7778ZM14.5278 14.5278V19.25H19.25V14.5278H14.5278Z"
  />
</svg>`,iR=dp`<path
fill-rule="evenodd"
clip-rule="evenodd"
d="M15 6.25C13.4812 6.25 12.25 7.48122 12.25 9C12.25 10.5188 13.4812 11.75 15 11.75C16.5188 11.75 17.75 10.5188 17.75 9C17.75 7.48122 16.5188 6.25 15 6.25ZM13.75 9C13.75 8.30964 14.3096 7.75 15 7.75C15.6904 7.75 16.25 8.30964 16.25 9C16.25 9.69036 15.6904 10.25 15 10.25C14.3096 10.25 13.75 9.69036 13.75 9Z"
/>
<path
fill-rule="evenodd"
clip-rule="evenodd"
d="M5 4.25C3.48122 4.25 2.25 5.48122 2.25 7V17C2.25 18.5188 3.48122 19.75 5 19.75H16.9863C16.9956 19.7502 17.0049 19.7502 17.0142 19.75H19C20.5188 19.75 21.75 18.5188 21.75 17V7C21.75 5.48122 20.5188 4.25 19 4.25H5ZM17.3356 18.25H19C19.4585 18.25 19.8593 18.0031 20.0769 17.6351L18.6231 16.1718C18.2208 15.7541 17.9502 15.4738 17.7245 15.275C17.5054 15.0819 17.3784 15.0117 17.2815 14.9786C17.0293 14.8926 16.7562 14.8895 16.5021 14.9697C16.4045 15.0005 16.276 15.0678 16.0524 15.2558C15.8542 15.4224 15.6213 15.6486 15.2976 15.9689L17.3356 18.25ZM20.25 15.681V7C20.25 6.30964 19.6904 5.75 19 5.75H5C4.30964 5.75 3.75 6.30964 3.75 7V17C3.75 17.1543 3.77795 17.302 3.82907 17.4385L7.50733 13.8054L7.52247 13.7897C7.89807 13.4008 8.21139 13.0763 8.48886 12.8325C8.7781 12.5783 9.07737 12.3666 9.43913 12.2436C9.99371 12.0551 10.594 12.0486 11.1525 12.2251C11.5168 12.3402 11.8206 12.5454 12.1153 12.7932C12.398 13.031 12.7182 13.3486 13.1022 13.7293L14.2639 14.8814C14.5765 14.5722 14.8455 14.3108 15.087 14.1077C15.382 13.8597 15.6861 13.6542 16.0508 13.5392C16.6099 13.3628 17.2107 13.3697 17.7656 13.5589C18.1276 13.6823 18.4269 13.8947 18.7161 14.1495C18.9936 14.3939 19.3068 14.7192 19.6824 15.1091L19.6996 15.127L20.25 15.681ZM5.142 18.25H15.3241L13.7197 16.4542L12.0677 14.816C11.6564 14.4081 11.3797 14.1346 11.1498 13.9412C10.9266 13.7535 10.7982 13.6862 10.7006 13.6554C10.4468 13.5752 10.1739 13.5781 9.92184 13.6638C9.825 13.6967 9.6981 13.7667 9.47895 13.9593C9.25327 14.1576 8.98257 14.4371 8.58019 14.8537L8.56773 14.8663L5.142 18.25Z"
/>`,aR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  ${iR}
</svg>`,Gq=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  ${iR}
</svg>`,Xq=rt`
  <svg
    width="20"
    height="20"
    viewBox="0 0 20 20"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3334_82005)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M5.144 3.54166H14.856C15.3035 3.54166 15.6722 3.54165 15.9726 3.56312C16.2832 3.58533 16.5712 3.63292 16.8445 3.75478C17.2675 3.94339 17.6272 4.25139 17.8584 4.64842C18.0131 4.91401 18.0726 5.19494 18.0996 5.48406C18.125 5.75652 18.125 6.08757 18.125 6.47237V13.5276C18.125 13.9124 18.125 14.2435 18.0996 14.5159C18.0726 14.8051 18.0131 15.086 17.8584 15.3516C17.6272 15.7486 17.2675 16.0566 16.8445 16.2452C16.5712 16.3671 16.2832 16.4147 15.9726 16.4369C15.6722 16.4583 15.3034 16.4583 14.856 16.4583H5.144C4.69656 16.4583 4.32777 16.4583 4.02744 16.4369C3.71685 16.4147 3.42883 16.3671 3.15552 16.2452C2.73246 16.0566 2.37275 15.7486 2.14156 15.3516C1.9869 15.086 1.92741 14.8051 1.90042 14.5159C1.87497 14.2435 1.87499 13.9124 1.875 13.5276V6.4724C1.87499 6.08759 1.87497 5.75652 1.90042 5.48406C1.92741 5.19494 1.9869 4.91401 2.14156 4.64842C2.37275 4.25139 2.73247 3.94339 3.15552 3.75478C3.42883 3.63292 3.71685 3.58533 4.02744 3.56312C4.32777 3.54165 4.69655 3.54166 5.144 3.54166ZM3.125 8.4375V13.5C3.125 13.9201 3.12563 14.1923 3.145 14.3997C3.16342 14.597 3.19476 14.6762 3.22176 14.7226C3.31014 14.8743 3.46036 15.0125 3.66452 15.1035C3.74772 15.1406 3.87132 15.1725 4.11657 15.1901C4.36702 15.208 4.69092 15.2083 5.16667 15.2083H14.8333C15.3091 15.2083 15.633 15.208 15.8834 15.1901C16.1287 15.1725 16.2523 15.1406 16.3355 15.1035C16.5396 15.0125 16.6899 14.8743 16.7782 14.7226C16.8052 14.6762 16.8366 14.597 16.855 14.3997C16.8744 14.1923 16.875 13.9201 16.875 13.5V8.4375H3.125ZM16.875 7.1875H3.125V6.5C3.125 6.07986 3.12563 5.80768 3.145 5.60027C3.16342 5.40303 3.19476 5.3238 3.22176 5.27744C3.31014 5.12566 3.46036 4.98747 3.66452 4.89645C3.74772 4.85935 3.87132 4.82748 4.11657 4.80994C4.36702 4.79204 4.69092 4.79166 5.16667 4.79166H14.8333C15.3091 4.79166 15.633 4.79204 15.8834 4.80994C16.1287 4.82748 16.2523 4.85935 16.3355 4.89645C16.5396 4.98747 16.6899 5.12566 16.7782 5.27744C16.8052 5.3238 16.8366 5.40303 16.855 5.60027C16.8744 5.80768 16.875 6.07986 16.875 6.5V7.1875Z"
        fill="currentColor"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M8.86926 9.56896C9.10731 9.81892 9.09766 10.2145 8.8477 10.4526L7.57292 11.6667L8.8477 12.8807C9.09766 13.1188 9.10731 13.5144 8.86926 13.7644C8.6312 14.0143 8.23559 14.024 7.98563 13.7859L6.23563 12.1193C6.11177 12.0013 6.04167 11.8377 6.04167 11.6667C6.04167 11.4956 6.11177 11.332 6.23563 11.2141L7.98563 9.54741C8.23559 9.30936 8.6312 9.31901 8.86926 9.56896ZM11.1307 9.56896C11.3688 9.31901 11.7644 9.30936 12.0144 9.54741L13.7644 11.2141C13.8882 11.332 13.9583 11.4956 13.9583 11.6667C13.9583 11.8377 13.8882 12.0013 13.7644 12.1193L12.0144 13.7859C11.7644 14.024 11.3688 14.0143 11.1307 13.7644C10.8927 13.5144 10.9023 13.1188 11.1523 12.8807L12.4271 11.6667L11.1523 10.4526C10.9023 10.2145 10.8927 9.81892 11.1307 9.56896Z"
        fill="currentColor"
      />
      <path
        d="M5.08333 6.04166C5.08333 6.38684 4.80351 6.66666 4.45833 6.66666C4.11316 6.66666 3.83333 6.38684 3.83333 6.04166C3.83333 5.69649 4.11316 5.41666 4.45833 5.41666C4.80351 5.41666 5.08333 5.69649 5.08333 6.04166Z"
        fill="currentColor"
      />
      <path
        d="M6.75008 6.04166C6.75008 6.38684 6.47026 6.66666 6.12508 6.66666C5.77991 6.66666 5.50008 6.38684 5.50008 6.04166C5.50008 5.69649 5.77991 5.41666 6.12508 5.41666C6.47026 5.41666 6.75008 5.69649 6.75008 6.04166Z"
        fill="currentColor"
      />
      <path
        d="M8.41675 6.04166C8.41675 6.38684 8.13693 6.66666 7.79175 6.66666C7.44657 6.66666 7.16675 6.38684 7.16675 6.04166C7.16675 5.69649 7.44657 5.41666 7.79175 5.41666C8.13693 5.41666 8.41675 5.69649 8.41675 6.04166Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3334_82005">
        <rect width="20" height="20" fill="white" />
      </clipPath>
    </defs>
  </svg>
`,sR=rt`
  <svg
    width="20"
    height="20"
    viewBox="0 0 20 20"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3433_78963)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        fill="currentColor"
        d="M4.16667 4.79167C3.59137 4.79167 3.125 5.25804 3.125 5.83334V14.1667C3.125 14.742 3.59137 15.2083 4.16667 15.2083H15.8333C16.4086 15.2083 16.875 14.742 16.875 14.1667V10C16.875 9.65483 17.1548 9.375 17.5 9.375C17.8452 9.375 18.125 9.65483 18.125 10V14.1667C18.125 15.4323 17.099 16.4583 15.8333 16.4583H4.16667C2.90101 16.4583 1.875 15.4323 1.875 14.1667V5.83334C1.875 4.56768 2.90101 3.54167 4.16667 3.54167H10C10.3452 3.54167 10.625 3.82149 10.625 4.16667C10.625 4.51185 10.3452 4.79167 10 4.79167H4.16667Z"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        fill="currentColor"
        d="M13.6063 3.48363C14.64 2.44991 16.316 2.44991 17.3497 3.48363C18.3834 4.51735 18.3834 6.19334 17.3497 7.22706L16.2774 8.29939C16.0333 8.54347 15.6376 8.54347 15.3935 8.29939C15.3371 8.24297 15.2937 8.17845 15.2634 8.10958C15.2915 8.82166 15.0338 9.54296 14.4902 10.0866L13.0604 11.5164C12.0267 12.5501 10.3507 12.5501 9.31696 11.5164C8.28324 10.4827 8.28324 8.80667 9.31696 7.77295L10.3893 6.70062C10.6334 6.45654 11.0291 6.45654 11.2732 6.70062C11.3296 6.75703 11.373 6.82155 11.4033 6.89043C11.3751 6.17834 11.6329 5.45705 12.1765 4.9134L13.6063 3.48363ZM11.4445 7.26331C11.4215 7.38099 11.3643 7.49333 11.2732 7.5845L10.2008 8.65683C9.65528 9.2024 9.65528 10.0869 10.2008 10.6325C10.7464 11.1781 11.6309 11.1781 12.1765 10.6325L13.6063 9.20272C14.1518 8.65716 14.1518 7.77262 13.6063 7.22706C13.5203 7.1411 13.4267 7.06921 13.3279 7.01087C13.0307 6.83533 12.932 6.45209 13.1076 6.15488C13.2831 5.85767 13.6664 5.75903 13.9636 5.93457C14.1521 6.04591 14.3293 6.18228 14.4902 6.34317C14.8849 6.73788 15.1289 7.22622 15.2221 7.7367C15.2452 7.61901 15.3023 7.50668 15.3935 7.4155L16.4658 6.34317C17.0114 5.79761 17.0114 4.91307 16.4658 4.36751C15.9203 3.82194 15.0357 3.82194 14.4902 4.36751L13.0604 5.79728C12.5148 6.34285 12.5148 7.22738 13.0604 7.77295C13.1463 7.8589 13.24 7.9308 13.3388 7.98914C13.636 8.16467 13.7346 8.54791 13.5591 8.84512C13.3835 9.14234 13.0003 9.24097 12.7031 9.06544C12.5146 8.9541 12.3374 8.81773 12.1765 8.65683C11.7818 8.26213 11.5378 7.77378 11.4445 7.26331Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_3433_78963">
        <rect width="20" height="20" fill="white" />
      </clipPath>
    </defs>
  </svg>
`,qq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M17.5 4.75C16.5335 4.75 15.75 5.5335 15.75 6.5C15.75 7.4665 16.5335 8.25 17.5 8.25C18.4665 8.25 19.25 7.4665 19.25 6.5C19.25 5.5335 18.4665 4.75 17.5 4.75ZM14.25 6.5C14.25 4.70507 15.7051 3.25 17.5 3.25C19.2949 3.25 20.75 4.70507 20.75 6.5C20.75 8.29493 19.2949 9.75 17.5 9.75C16.8901 9.75 16.3194 9.58197 15.8317 9.28968L9.28968 15.8317C9.58197 16.3194 9.75 16.8901 9.75 17.5C9.75 19.2949 8.29493 20.75 6.5 20.75C4.70507 20.75 3.25 19.2949 3.25 17.5C3.25 15.7051 4.70507 14.25 6.5 14.25C7.1415 14.25 7.73958 14.4359 8.24335 14.7567L14.7567 8.24335C14.4359 7.73958 14.25 7.1415 14.25 6.5ZM6.5 15.75C5.5335 15.75 4.75 16.5335 4.75 17.5C4.75 18.4665 5.5335 19.25 6.5 19.25C7.4665 19.25 8.25 18.4665 8.25 17.5C8.25 16.5335 7.4665 15.75 6.5 15.75Z"
  />
</svg>`,Rg=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M15.894 5.32233L15.0516 6.19412L17.8059 8.94836L18.6776 8.106C19.4422 7.33698 19.4408 6.09381 18.6735 5.32652C17.9062 4.55923 16.663 4.55783 15.894 5.32233ZM16.727 9.99082L14.0092 7.27298L6.16599 15.3901L5.11859 18.8814L8.60991 17.834L16.727 9.99082ZM14.8291 4.26586C16.1836 2.91138 18.3797 2.91138 19.7341 4.26586C21.0886 5.62033 21.0886 7.81637 19.7341 9.17085L19.725 9.17995L9.52114 19.0394C9.43501 19.1226 9.33021 19.184 9.2155 19.2184L4.2155 20.7184C3.95122 20.7977 3.66476 20.7254 3.46966 20.5303C3.27456 20.3352 3.20234 20.0488 3.28162 19.7845L4.78162 14.7845C4.81603 14.6698 4.87742 14.565 4.96064 14.4788L14.8291 4.26586Z"
  />
</svg>`,Jq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M14.8114 20.999C13.2447 20.9679 11.7002 20.6209 10.2699 19.9787L4.67482 17.3458C4.12742 17.0853 3.70531 16.6178 3.501 16.0458C3.29668 15.4737 3.32684 14.8437 3.58486 14.2938C3.84271 13.7454 4.30714 13.3222 4.87604 13.1172C5.44494 12.9122 6.07173 12.9422 6.61858 13.2006L7.66312 13.6926C7.17264 12.0254 6.19168 9.26496 4.72024 7.65243L3.81194 6.9145C3.37099 6.55513 3.08591 6.03846 3.01648 5.47286C2.94705 4.90727 3.09867 4.33669 3.43953 3.88077C3.78344 3.42341 4.29072 3.11757 4.85476 3.02753C5.4188 2.93748 5.99569 3.07025 6.46417 3.39792C7.56208 4.18419 8.52532 5.14417 9.31623 6.24033C9.58326 5.83988 9.97184 5.53639 10.4244 5.37486C10.7041 5.27066 11.002 5.22422 11.3001 5.23831C11.5982 5.2524 11.8904 5.32672 12.1592 5.45685C12.4015 5.57016 12.6227 5.72422 12.8132 5.91236C13.058 5.63326 13.371 5.42289 13.7215 5.30197C13.9828 5.20656 14.2604 5.16466 14.5381 5.17874C14.8158 5.19282 15.0879 5.2626 15.3383 5.38396C15.6253 5.51414 15.8775 5.71086 16.074 5.95792C16.1756 5.89185 16.2856 5.83976 16.401 5.80304C16.7997 5.65961 17.2388 5.68073 17.622 5.86179C18.0052 6.04285 18.301 6.36905 18.4446 6.76873L20.6155 12.818C21.1282 14.2647 21.1282 15.8444 20.6155 17.2911C20.3444 18.0579 19.9061 18.7544 19.3326 19.3296C18.759 19.9049 18.0647 20.3445 17.3002 20.6164C16.4979 20.8833 15.6566 21.0127 14.8114 20.999ZM5.75747 14.4032C5.62583 14.3751 5.4278 14.3671 5.32879 14.4032C5.21385 14.4428 5.108 14.5051 5.01751 14.5865C4.92702 14.6678 4.85373 14.7666 4.80198 14.8769C4.74874 14.9866 4.71803 15.106 4.71166 15.2278C4.7053 15.3497 4.72341 15.4716 4.76492 15.5863C4.80643 15.7011 4.8705 15.8062 4.95332 15.8957C5.03614 15.9851 5.13602 16.0569 5.24704 16.1068L10.8058 18.7943C10.8058 18.7943 14.0939 20.3249 16.8006 19.3501C17.3787 19.1551 17.9049 18.8307 18.3392 18.4013C18.7736 17.9719 19.1048 17.449 19.3075 16.8721C19.7157 15.7262 19.7157 14.474 19.3075 13.3282L17.1276 7.27891C17.1185 7.2489 17.1033 7.22112 17.083 7.19728C17.0626 7.17344 17.0376 7.15407 17.0095 7.14038C16.9813 7.1267 16.9507 7.119 16.9194 7.11775C16.8882 7.11651 16.857 7.12174 16.8279 7.13314C16.7706 7.1556 16.7243 7.19958 16.6989 7.25572C16.6734 7.31186 16.6708 7.37574 16.6916 7.43378L17.0004 8.34481C17.0366 8.43122 17.0546 8.52416 17.0534 8.61785C17.0522 8.71153 17.0318 8.80397 16.9934 8.88941C16.9551 8.97485 16.8997 9.05147 16.8305 9.11451C16.7614 9.17755 16.6801 9.22565 16.5917 9.25584C16.5056 9.29207 16.4129 9.31014 16.3195 9.30893C16.2261 9.30772 16.1339 9.28726 16.0487 9.24881C15.9636 9.21036 15.8872 9.15474 15.8243 9.08543C15.7615 9.01611 15.7135 8.93458 15.6834 8.84588L15.0839 7.16959C15.0101 6.98388 14.8712 6.8316 14.6934 6.7414C14.6028 6.70307 14.5055 6.68331 14.4072 6.68331C14.309 6.68331 14.2117 6.70307 14.1211 6.7414C13.9396 6.80212 13.7882 6.93063 13.6986 7.10026C13.609 7.2699 13.5879 7.46763 13.6397 7.65243L13.8941 8.60902C13.9389 8.7793 13.9156 8.96042 13.829 9.11365C13.7424 9.26688 13.5995 9.38005 13.4308 9.42894C13.2645 9.4814 13.0845 9.46702 12.9285 9.38884C12.7726 9.31065 12.6531 9.17476 12.5952 9.00986L11.9957 7.35179C11.9119 7.12856 11.7441 6.94721 11.5284 6.84671C11.3127 6.7462 11.0663 6.73457 10.8422 6.81429C10.6196 6.89838 10.4388 7.06666 10.3386 7.283C10.2384 7.49933 10.2268 7.74646 10.3063 7.97129L10.7423 9.19208C10.7784 9.27848 10.7964 9.37141 10.7952 9.4651C10.794 9.55878 10.7736 9.65122 10.7352 9.73666C10.6969 9.8221 10.6415 9.89872 10.5724 9.96176C10.5033 10.0248 10.422 10.0729 10.3335 10.1031C10.2474 10.1393 10.1547 10.1574 10.0613 10.1562C9.96791 10.155 9.87575 10.1345 9.79056 10.0961C9.70538 10.0576 9.62899 10.002 9.56614 9.93269C9.50329 9.86338 9.45533 9.78183 9.42523 9.69313C8.68278 7.68202 7.3454 5.94647 5.5922 4.71891C5.41716 4.59322 5.19975 4.54185 4.98718 4.57597C4.7746 4.61008 4.58403 4.72692 4.45683 4.90112C4.32552 5.07405 4.33703 5.23645 4.36245 5.45231C4.38787 5.66818 4.49591 5.8657 4.66377 6.00319L5.57207 6.76845L5.63565 6.83222C8.11531 9.50154 9.26884 14.7126 9.31426 14.9313C9.34154 15.0568 9.33301 15.1875 9.28963 15.3083C9.24625 15.4292 9.1698 15.5353 9.06902 15.6146C8.96956 15.6916 8.85101 15.74 8.72616 15.7544C8.60131 15.7689 8.47489 15.7489 8.36055 15.6966L6.77594 14.8769C6.38102 14.6614 6.29788 14.5865 5.75747 14.4032Z"
  />
</svg>`,Qq=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <rect x="4" y="4" width="16" height="16" stroke-width="1.5" />
</svg>`,eJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <circle cx="12" cy="12" r="9" stroke-width="1.5" />
</svg>`,tJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path d="M3 12L12 3L21 12L12 21L3 12Z" stroke-width="1.5" />
</svg>`,nJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path d="M12 4L20.6603 19H3.33975L12 4Z" stroke-width="1.5" />
</svg>`,rJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <rect x="3" y="5" width="18" height="14" rx="2" stroke-width="1.5" />
</svg>`,oJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.25 12C5.25 11.5858 5.58579 11.25 6 11.25H18C18.4142 11.25 18.75 11.5858 18.75 12C18.75 12.4142 18.4142 12.75 18 12.75H6C5.58579 12.75 5.25 12.4142 5.25 12Z"
  />
</svg>`,$b=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12 5.25C12.4142 5.25 12.75 5.58579 12.75 6V11.25H18C18.4142 11.25 18.75 11.5858 18.75 12C18.75 12.4142 18.4142 12.75 18 12.75H12.75V18C12.75 18.4142 12.4142 18.75 12 18.75C11.5858 18.75 11.25 18.4142 11.25 18V12.75H6C5.58579 12.75 5.25 12.4142 5.25 12C5.25 11.5858 5.58579 11.25 6 11.25H11.25V6C11.25 5.58579 11.5858 5.25 12 5.25Z"
  />
</svg>`,iJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M3.25 20C2.83579 20 2.5 19.6642 2.5 19.25V4.75C2.5 4.33579 2.83579 4 3.25 4C3.66421 4 4 4.33579 4 4.75L4 19.25C4 19.6642 3.66421 20 3.25 20Z"
  />
  <path
    d="M9.16494 8.43945C9.47453 8.71464 9.50241 9.18869 9.22722 9.49828L7.67013 11.25H16.3299L14.7728 9.49828C14.4976 9.18869 14.5255 8.71464 14.8351 8.43945C15.1446 8.16426 15.6187 8.19215 15.8939 8.50174L18.5606 11.5017C18.8131 11.7859 18.8131 12.2141 18.5606 12.4983L15.8939 15.4983C15.6187 15.8079 15.1446 15.8358 14.8351 15.5606C14.5255 15.2854 14.4976 14.8113 14.7728 14.5017L16.3299 12.75H7.67013L9.22722 14.5017C9.50241 14.8113 9.47453 15.2854 9.16494 15.5606C8.85535 15.8358 8.3813 15.8079 8.10611 15.4983L5.43944 12.4983C5.18685 12.2141 5.18685 11.7859 5.43944 11.5017L8.10611 8.50174C8.3813 8.19215 8.85535 8.16426 9.16494 8.43945Z"
  />
  <path
    d="M21.5 4.75C21.5 4.33579 21.1642 4 20.75 4C20.3358 4 20 4.33579 20 4.75V19.25C20 19.6642 20.3358 20 20.75 20C21.1642 20 21.5 19.6642 21.5 19.25V4.75Z"
  />
</svg>`,aJ=rt`<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M-0.939238 4.14286C-0.979281 4.4228 -1 4.70898 -1 5V6.71429H1.57143V9.28571H-1V11C-1 11.291 -0.979281 11.5772 -0.939238 11.8571H1.57143V14.4286H0.0754482C0.481795 15.0111 0.988871 15.5182 1.57143 15.9246V14.4286L4.14286 14.4286V16.9392C4.4228 16.9793 4.70898 17 5 17H6.71429V14.4286H9.28571V17H11C11.291 17 11.5772 16.9793 11.8571 16.9392V14.4286H14.4286L14.4286 15.9246C15.0111 15.5182 15.5182 15.0111 15.9246 14.4286L14.4286 14.4286V11.8571H16.9392C16.9793 11.5772 17 11.291 17 11V9.28571H14.4286V6.71429H17V5C17 4.70898 16.9793 4.4228 16.9392 4.14286H14.4286V1.57143H15.9246C15.5182 0.988871 15.0111 0.481795 14.4286 0.075448L14.4286 1.57143H11.8571V-0.939238C11.5772 -0.979281 11.291 -1 11 -1H9.28571V1.57143H6.71429V-1H5C4.70898 -1 4.4228 -0.979281 4.14286 -0.939238V1.57143H1.57143V0.0754479C0.988871 0.481795 0.481795 0.988871 0.0754479 1.57143H1.57143V4.14286H-0.939238ZM4.14286 4.14286V1.57143H6.71429V4.14286H4.14286ZM4.14286 6.71429H1.57143V4.14286H4.14286V6.71429ZM6.71429 6.71429V4.14286H9.28571V6.71429H6.71429ZM6.71429 9.28571V6.71429H4.14286V9.28571H1.57143V11.8571H4.14286V14.4286H6.71429V11.8571H9.28571V14.4286H11.8571V11.8571H14.4286V9.28571H11.8571V6.71429H14.4286V4.14286H11.8571V1.57143H9.28571V4.14286H11.8571V6.71429H9.28571V9.28571H6.71429ZM6.71429 9.28571V11.8571H4.14286V9.28571H6.71429ZM9.28571 9.28571H11.8571V11.8571H9.28571V9.28571Z"
    fill="#D9D9D9"
  />
</svg>`,ek=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M10 5.00004C9.53978 5.00004 9.16669 4.62694 9.16669 4.16671C9.16669 3.70647 9.53978 3.33337 10 3.33337C10.4603 3.33337 10.8334 3.70647 10.8334 4.16671C10.8334 4.62694 10.4603 5.00004 10 5.00004Z"
  />
  <path
    d="M10 10.8334C9.53978 10.8334 9.16669 10.4603 9.16669 10C9.16669 9.5398 9.53978 9.16671 10 9.16671C10.4603 9.16671 10.8334 9.5398 10.8334 10C10.8334 10.4603 10.4603 10.8334 10 10.8334Z"
  />
  <path
    d="M10 16.6667C9.53978 16.6667 9.16669 16.2936 9.16669 15.8334C9.16669 15.3731 9.53978 15 10 15C10.4603 15 10.8334 15.3731 10.8334 15.8334C10.8334 16.2936 10.4603 16.6667 10 16.6667Z"
  />
  <path
    d="M10 5.00004C9.53978 5.00004 9.16669 4.62694 9.16669 4.16671C9.16669 3.70647 9.53978 3.33337 10 3.33337C10.4603 3.33337 10.8334 3.70647 10.8334 4.16671C10.8334 4.62694 10.4603 5.00004 10 5.00004Z"
  />
  <path
    d="M10 10.8334C9.53978 10.8334 9.16669 10.4603 9.16669 10C9.16669 9.5398 9.53978 9.16671 10 9.16671C10.4603 9.16671 10.8334 9.5398 10.8334 10C10.8334 10.4603 10.4603 10.8334 10 10.8334Z"
  />
  <path
    d="M10 16.6667C9.53978 16.6667 9.16669 16.2936 9.16669 15.8334C9.16669 15.3731 9.53978 15 10 15C10.4603 15 10.8334 15.3731 10.8334 15.8334C10.8334 16.2936 10.4603 16.6667 10 16.6667Z"
  />
</svg>`,lR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.70825 3.33325C2.70825 2.98807 2.98807 2.70825 3.33325 2.70825H5.83325C6.17843 2.70825 6.45825 2.98807 6.45825 3.33325C6.45825 3.67843 6.17843 3.95825 5.83325 3.95825H3.33325C2.98807 3.95825 2.70825 3.67843 2.70825 3.33325Z"
    fill="#77757D"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.12492 3.33325C8.12492 2.98807 8.40474 2.70825 8.74992 2.70825L11.2499 2.70825C11.5951 2.70825 11.8749 2.98807 11.8749 3.33325C11.8749 3.67843 11.5951 3.95825 11.2499 3.95825L8.74992 3.95825C8.40474 3.95825 8.12492 3.67843 8.12492 3.33325Z"
    fill="#77757D"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.6666 3.95825L14.1666 3.95825C13.8214 3.95825 13.5416 3.67843 13.5416 3.33325C13.5416 2.98807 13.8214 2.70825 14.1666 2.70825L16.6666 2.70825C17.0118 2.70825 17.2916 2.98807 17.2916 3.33325C17.2916 3.67843 17.0118 3.95825 16.6666 3.95825Z"
    fill="#77757D"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.70825 9.99992C2.70825 9.65474 2.98807 9.37492 3.33325 9.37492H16.6666C17.0118 9.37492 17.2916 9.65474 17.2916 9.99992C17.2916 10.3451 17.0118 10.6249 16.6666 10.6249H3.33325C2.98807 10.6249 2.70825 10.3451 2.70825 9.99992Z"
    fill="#77757D"
  />
  <path
    d="M2.70825 16.2499C2.70825 15.6746 3.17462 15.2083 3.74992 15.2083H16.2499C16.8252 15.2083 17.2916 15.6746 17.2916 16.2499C17.2916 16.8252 16.8252 17.2916 16.2499 17.2916H3.74992C3.17462 17.2916 2.70825 16.8252 2.70825 16.2499Z"
    fill="#77757D"
  />
</svg>`,cR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11.25 7C11.25 5.48122 12.4812 4.25 14 4.25H21C21.4142 4.25 21.75 4.58579 21.75 5C21.75 5.41421 21.4142 5.75 21 5.75H14C13.3096 5.75 12.75 6.30964 12.75 7V17C12.75 18.5188 11.5188 19.75 10 19.75H3C2.58579 19.75 2.25 19.4142 2.25 19C2.25 18.5858 2.58579 18.25 3 18.25H10C10.6904 18.25 11.25 17.6904 11.25 17V7Z"
  />
</svg>`,tk=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20.5303 3.53034C20.8232 3.82323 20.8232 4.29811 20.5303 4.591L4.591 20.5303C4.29811 20.8232 3.82323 20.8232 3.53034 20.5303C3.23745 20.2374 3.23745 19.7626 3.53034 19.4697L19.4697 3.53034C19.7626 3.23745 20.2374 3.23745 20.5303 3.53034Z"
  />
</svg>`,sJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20.5303 3.53034C20.8232 3.82323 20.8232 4.29811 20.5303 4.591L17.341 7.78034C17.0481 8.07323 16.5732 8.07323 16.2803 7.78034C15.9874 7.48745 15.9874 7.01257 16.2803 6.71968L19.4697 3.53034C19.7626 3.23745 20.2374 3.23745 20.5303 3.53034Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M14.1553 9.90534C14.4482 10.1982 14.4482 10.6731 14.1553 10.966L10.966 14.1553C10.6731 14.4482 10.1982 14.4482 9.90534 14.1553C9.61245 13.8624 9.61245 13.3876 9.90534 13.0947L13.0947 9.90534C13.3876 9.61245 13.8624 9.61245 14.1553 9.90534Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.78034 16.2803C8.07323 16.5732 8.07323 17.0481 7.78034 17.341L4.591 20.5303C4.29811 20.8232 3.82323 20.8232 3.53034 20.5303C3.23745 20.2374 3.23745 19.7626 3.53034 19.4697L6.71968 16.2803C7.01257 15.9874 7.48745 15.9874 7.78034 16.2803Z"
  />
</svg>`,lJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.72068 18.34L18.34 6.72068C19.5331 8.15171 20.25 9.99158 20.25 12C20.25 16.5563 16.5563 20.25 12 20.25C9.99158 20.25 8.15171 19.5331 6.72068 18.34ZM17.2793 5.66002L5.66002 17.2793C4.46691 15.8483 3.75 14.0084 3.75 12C3.75 7.44365 7.44365 3.75 12 3.75C14.0084 3.75 15.8483 4.46691 17.2793 5.66002ZM5.10571 18.8943C6.86929 20.6579 9.30782 21.75 12 21.75C17.3848 21.75 21.75 17.3848 21.75 12C21.75 9.30782 20.6579 6.86929 18.8943 5.10571C17.1307 3.34213 14.6922 2.25 12 2.25C6.61522 2.25 2.25 6.61522 2.25 12C2.25 14.6922 3.34213 17.1307 5.10571 18.8943Z"
  />
</svg>`,cJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 6C3.25 4.48122 4.48122 3.25 6 3.25H14C14.4142 3.25 14.75 3.58579 14.75 4C14.75 4.41421 14.4142 4.75 14 4.75H6C5.30964 4.75 4.75 5.30964 4.75 6V20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20V6Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20.75 18C20.75 19.5188 19.5188 20.75 18 20.75H10C9.58579 20.75 9.25 20.4142 9.25 20C9.25 19.5858 9.58579 19.25 10 19.25L18 19.25C18.6904 19.25 19.25 18.6904 19.25 18L19.25 4C19.25 3.58579 19.5858 3.25 20 3.25C20.4142 3.25 20.75 3.58579 20.75 4L20.75 18Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.25 9C8.25 8.0335 9.0335 7.25 10 7.25H14C14.9665 7.25 15.75 8.0335 15.75 9V11C15.75 11.9665 14.9665 12.75 14 12.75H10C9.0335 12.75 8.25 11.9665 8.25 11V9ZM10 8.75C9.86193 8.75 9.75 8.86193 9.75 9V11C9.75 11.1381 9.86193 11.25 10 11.25H14C14.1381 11.25 14.25 11.1381 14.25 11V9C14.25 8.86193 14.1381 8.75 14 8.75H10Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.25 16C8.25 15.5858 8.58579 15.25 9 15.25H15C15.4142 15.25 15.75 15.5858 15.75 16C15.75 16.4142 15.4142 16.75 15 16.75H9C8.58579 16.75 8.25 16.4142 8.25 16Z"
  />
</svg>`,dJ=rt`<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.00004 0.708313C8.34522 0.708313 8.62504 0.988135 8.62504 1.33331V8.71332L9.78032 7.55804C10.0244 7.31396 10.4201 7.31396 10.6642 7.55804C10.9083 7.80211 10.9083 8.19784 10.6642 8.44192L8.44198 10.6641C8.32477 10.7814 8.1658 10.8472 8.00004 10.8472C7.83428 10.8472 7.67531 10.7814 7.5581 10.6641L5.33588 8.44192C5.0918 8.19784 5.0918 7.80211 5.33588 7.55804C5.57996 7.31396 5.97568 7.31396 6.21976 7.55804L7.37504 8.71332V1.33331C7.37504 0.988135 7.65486 0.708313 8.00004 0.708313ZM3.67888 5.15276L4.29634 5.15276C4.64152 5.15276 4.92134 5.43258 4.92134 5.77776C4.92134 6.12294 4.64152 6.40276 4.29634 6.40276H3.70375C3.27858 6.40276 2.99729 6.40324 2.78161 6.42087C2.57322 6.43789 2.48168 6.46775 2.42602 6.49611C2.26486 6.57822 2.13384 6.70925 2.05173 6.8704C2.02337 6.92606 1.99351 7.0176 1.97648 7.22599C1.95886 7.44167 1.95837 7.72296 1.95837 8.14813V12.2963C1.95837 12.7214 1.95886 13.0027 1.97648 13.2184C1.99351 13.4268 2.02337 13.5183 2.05173 13.574C2.13384 13.7352 2.26486 13.8662 2.42602 13.9483C2.48168 13.9767 2.57322 14.0065 2.78161 14.0235C2.99729 14.0412 3.27858 14.0416 3.70375 14.0416H12.2963C12.7215 14.0416 13.0028 14.0412 13.2185 14.0235C13.4269 14.0065 13.5184 13.9767 13.5741 13.9483C13.7352 13.8662 13.8662 13.7352 13.9484 13.574C13.9767 13.5183 14.0066 13.4268 14.0236 13.2184C14.0412 13.0027 14.0417 12.7214 14.0417 12.2963V8.14813C14.0417 7.72296 14.0412 7.44167 14.0236 7.22599C14.0066 7.0176 13.9767 6.92607 13.9484 6.87041C13.8662 6.70925 13.7352 6.57822 13.5741 6.49611C13.5184 6.46775 13.4269 6.43789 13.2185 6.42087C13.0028 6.40324 12.7215 6.40276 12.2963 6.40276H11.7037C11.3586 6.40276 11.0787 6.12294 11.0787 5.77776C11.0787 5.43258 11.3586 5.15276 11.7037 5.15276L12.3212 5.15276C12.7149 5.15275 13.0476 5.15274 13.3203 5.17502C13.606 5.19836 13.8803 5.24924 14.1416 5.38235C14.5379 5.58431 14.8602 5.90656 15.0621 6.30292C15.1952 6.56416 15.2461 6.83851 15.2694 7.1242C15.2917 7.39687 15.2917 7.72958 15.2917 8.12324V12.3212C15.2917 12.7148 15.2917 13.0475 15.2694 13.3202C15.2461 13.6059 15.1952 13.8802 15.0621 14.1415C14.8602 14.5378 14.5379 14.8601 14.1416 15.0621C13.8803 15.1952 13.606 15.246 13.3203 15.2694C13.0476 15.2917 12.7149 15.2917 12.3212 15.2916H3.67886C3.2852 15.2917 2.95248 15.2917 2.67982 15.2694C2.39413 15.246 2.11978 15.1952 1.85853 15.0621C1.46217 14.8601 1.13992 14.5378 0.937968 14.1415C0.804856 13.8802 0.753976 13.6059 0.730635 13.3202C0.708356 13.0475 0.708365 12.7148 0.708374 12.3211V8.12326C0.708365 7.72959 0.708356 7.39687 0.730635 7.1242C0.753976 6.83851 0.804856 6.56416 0.937968 6.30292C1.13992 5.90656 1.46217 5.58431 1.85853 5.38235C2.11978 5.24924 2.39413 5.19836 2.67982 5.17502C2.95249 5.15274 3.28521 5.15275 3.67888 5.15276Z"
    fill="#77757D"
  />
</svg>`,dR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <g clip-path="url(#clip0_2131_19971)">
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M4.7085 6.16675C4.7085 5.82157 4.98832 5.54175 5.3335 5.54175H18.6668C19.012 5.54175 19.2918 5.82157 19.2918 6.16675C19.2918 6.51193 19.012 6.79175 18.6668 6.79175H5.3335C4.98832 6.79175 4.7085 6.51193 4.7085 6.16675Z"
      fill="#77757D"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M4.7085 12.0001C4.7085 11.6549 4.98832 11.3751 5.3335 11.3751H13.6668C14.012 11.3751 14.2918 11.6549 14.2918 12.0001C14.2918 12.3453 14.012 12.6251 13.6668 12.6251H5.3335C4.98832 12.6251 4.7085 12.3453 4.7085 12.0001Z"
      fill="#77757D"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M4.7085 17.8334C4.7085 17.4882 4.98832 17.2084 5.3335 17.2084H15.3335C15.6787 17.2084 15.9585 17.4882 15.9585 17.8334C15.9585 18.1786 15.6787 18.4584 15.3335 18.4584H5.3335C4.98832 18.4584 4.7085 18.1786 4.7085 17.8334Z"
      fill="#77757D"
    />
  </g>
  <defs>
    <clipPath id="clip0_2131_19971">
      <rect width="20" height="20" fill="white" transform="translate(2 2)" />
    </clipPath>
  </defs>
</svg>`,uR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <g clip-path="url(#clip0_2131_19972)">
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M4.7085 6.16675C4.7085 5.82157 4.98832 5.54175 5.3335 5.54175H18.6668C19.012 5.54175 19.2918 5.82157 19.2918 6.16675C19.2918 6.51193 19.012 6.79175 18.6668 6.79175H5.3335C4.98832 6.79175 4.7085 6.51193 4.7085 6.16675Z"
      fill="#77757D"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M7.2085 12.0001C7.2085 11.6549 7.48832 11.3751 7.8335 11.3751H16.1668C16.512 11.3751 16.7918 11.6549 16.7918 12.0001C16.7918 12.3453 16.512 12.6251 16.1668 12.6251H7.8335C7.48832 12.6251 7.2085 12.3453 7.2085 12.0001Z"
      fill="#77757D"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M6.37516 17.8334C6.37516 17.4882 6.65498 17.2084 7.00016 17.2084H17.0002C17.3453 17.2084 17.6252 17.4882 17.6252 17.8334C17.6252 18.1786 17.3453 18.4584 17.0002 18.4584H7.00016C6.65498 18.4584 6.37516 18.1786 6.37516 17.8334Z"
      fill="#77757D"
    />
  </g>
  <defs>
    <clipPath id="clip0_2131_19972">
      <rect width="20" height="20" fill="white" transform="translate(2 2)" />
    </clipPath>
  </defs>
</svg>`,hR=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <g clip-path="url(#clip0_2131_19973)">
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M4.7085 6.16675C4.7085 5.82157 4.98832 5.54175 5.3335 5.54175H18.6668C19.012 5.54175 19.2918 5.82157 19.2918 6.16675C19.2918 6.51193 19.012 6.79175 18.6668 6.79175H5.3335C4.98832 6.79175 4.7085 6.51193 4.7085 6.16675Z"
      fill="#77757D"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M9.7085 12.0001C9.7085 11.6549 9.98832 11.3751 10.3335 11.3751H18.6668C19.012 11.3751 19.2918 11.6549 19.2918 12.0001C19.2918 12.3453 19.012 12.6251 18.6668 12.6251H10.3335C9.98832 12.6251 9.7085 12.3453 9.7085 12.0001Z"
      fill="#77757D"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M8.04183 17.8334C8.04183 17.4882 8.32165 17.2084 8.66683 17.2084H18.6668C19.012 17.2084 19.2918 17.4882 19.2918 17.8334C19.2918 18.1786 19.012 18.4584 18.6668 18.4584H8.66683C8.32165 18.4584 8.04183 18.1786 8.04183 17.8334Z"
      fill="#77757D"
    />
  </g>
  <defs>
    <clipPath id="clip0_2131_19973">
      <rect width="20" height="20" fill="white" transform="translate(2 2)" />
    </clipPath>
  </defs>
</svg>`,uJ=rt`<svg
  width="12"
  height="12"
  viewBox="0 0 12 12"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M0.343205 0.343144C0.636098 0.0502508 1.11097 0.0502508 1.40387 0.343144L6.00006 4.93934L10.5963 0.343144C10.8891 0.0502508 11.364 0.0502508 11.6569 0.343144C11.9498 0.636037 11.9498 1.11091 11.6569 1.4038L7.06072 6L11.6569 10.5962C11.9498 10.8891 11.9498 11.364 11.6569 11.6569C11.364 11.9497 10.8891 11.9497 10.5963 11.6569L6.00006 7.06066L1.40387 11.6569C1.11097 11.9497 0.636098 11.9497 0.343205 11.6569C0.0503118 11.364 0.0503118 10.8891 0.343205 10.5962L4.9394 6L0.343205 1.4038C0.0503118 1.11091 0.0503118 0.636037 0.343205 0.343144Z"
    fill="#77757D"
  />
</svg>`,hJ=rt`<svg
  width="14"
  height="18"
  viewBox="0 0 14 18"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.80805 0.875L7.83342 0.875001C7.99918 0.875001 8.15815 0.940849 8.27536 1.05806L13.2754 6.05806C13.3926 6.17527 13.4584 6.33424 13.4584 6.5V13.8587C13.4584 14.3038 13.4584 14.6754 13.4336 14.9789C13.4078 15.2955 13.3518 15.5927 13.2086 15.8737C12.9889 16.3049 12.6383 16.6555 12.2071 16.8752C11.9261 17.0184 11.6289 17.0744 11.3123 17.1002C11.0088 17.125 10.6372 17.125 10.1921 17.125H3.80804C3.36292 17.125 2.99138 17.125 2.68786 17.1002C2.37129 17.0744 2.07407 17.0184 1.79302 16.8752C1.36182 16.6555 1.01124 16.3049 0.791525 15.8737C0.648322 15.5927 0.592396 15.2955 0.566531 14.9789C0.541732 14.6754 0.541739 14.3038 0.541748 13.8587V4.1413C0.541739 3.69618 0.541732 3.32464 0.566531 3.02111C0.592396 2.70454 0.648322 2.40732 0.791525 2.12627C1.01124 1.69507 1.36182 1.34449 1.79302 1.12478C2.07407 0.981574 2.37129 0.925648 2.68786 0.899783C2.99138 0.874984 3.36292 0.874991 3.80805 0.875ZM2.78965 2.14563C2.55038 2.16518 2.43598 2.20008 2.36051 2.23854C2.16451 2.3384 2.00515 2.49776 1.90528 2.69376C1.86683 2.76923 1.83193 2.88363 1.81238 3.1229C1.79223 3.36946 1.79175 3.68964 1.79175 4.16667V13.8333C1.79175 14.3104 1.79223 14.6305 1.81238 14.8771C1.83193 15.1164 1.86683 15.2308 1.90528 15.3062C2.00515 15.5022 2.16451 15.6616 2.36051 15.7615C2.43598 15.7999 2.55038 15.8348 2.78965 15.8544C3.03621 15.8745 3.35639 15.875 3.83342 15.875H10.1667C10.6438 15.875 10.964 15.8745 11.2105 15.8544C11.4498 15.8348 11.5642 15.7999 11.6397 15.7615C11.8357 15.6616 11.995 15.5022 12.0949 15.3062C12.1333 15.2308 12.1682 15.1164 12.1878 14.8771C12.2079 14.6305 12.2084 14.3104 12.2084 13.8333V7.125H8.66675C7.86133 7.125 7.20842 6.47208 7.20842 5.66667V2.125H3.83342C3.35639 2.125 3.03621 2.12549 2.78965 2.14563ZM8.45842 3.00888L11.3245 5.875H8.66675C8.55169 5.875 8.45842 5.78173 8.45842 5.66667V3.00888Z"
    fill="#77757D"
  />
  <path
    d="M8.37009 13.1207L8.39316 10.2307H8.37585L7.31446 13.1207H6.62225L5.5897 10.2307H5.57239L5.59547 13.1207H4.66675V9.03662H6.06848L6.9972 11.6555H7.02027L7.90861 9.03662H9.33342V13.1207H8.37009Z"
    fill="#77757D"
  />
</svg>`,fJ=rt`<svg
  width="16"
  height="18"
  viewBox="0 0 16 18"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.80797 0.875L8.83333 0.875001C8.99909 0.875001 9.15806 0.940849 9.27527 1.05806L14.2753 6.05806C14.3925 6.17527 14.4583 6.33424 14.4583 6.5V11.5C14.4583 11.8452 14.1785 12.125 13.8333 12.125C13.4882 12.125 13.2083 11.8452 13.2083 11.5V7.125H9.66667C8.86125 7.125 8.20833 6.47208 8.20833 5.66667V2.125H4.83333C4.35631 2.125 4.03613 2.12549 3.78956 2.14563C3.5503 2.16518 3.43589 2.20008 3.36043 2.23854C3.16442 2.3384 3.00507 2.49776 2.9052 2.69376C2.86675 2.76923 2.83185 2.88363 2.8123 3.1229C2.79215 3.36946 2.79167 3.68964 2.79167 4.16667V11.5C2.79167 11.8452 2.51184 12.125 2.16667 12.125C1.82149 12.125 1.54167 11.8452 1.54167 11.5L1.54167 4.1413C1.54166 3.69618 1.54165 3.32464 1.56645 3.02111C1.59231 2.70454 1.64824 2.40732 1.79144 2.12627C2.01115 1.69507 2.36173 1.34449 2.79294 1.12478C3.07399 0.981574 3.3712 0.925648 3.68777 0.899783C3.9913 0.874984 4.36284 0.874991 4.80797 0.875ZM9.45833 3.00888L12.3244 5.875H9.66667C9.55161 5.875 9.45833 5.78173 9.45833 5.66667V3.00888Z"
    fill="#77757D"
  />
  <path
    d="M3.2085 17.0607V15.4327H1.6905V17.0607H0.75V13.1667H1.6905V14.6407H3.2085V13.1667H4.149V17.0607H3.2085Z"
    fill="#77757D"
  />
  <path
    d="M6.6167 13.9697V17.0607H5.6762V13.9697H4.5762V13.1667H7.7167V13.9697H6.6167Z"
    fill="#77757D"
  />
  <path
    d="M11.677 17.0607L11.699 14.3052H11.6825L10.6705 17.0607H10.0105L9.026 14.3052H9.0095L9.0315 17.0607H8.146V13.1667H9.4825L10.368 15.6637H10.39L11.237 13.1667H12.5955V17.0607H11.677Z"
    fill="#77757D"
  />
  <path
    d="M13.3989 17.0607V13.1667H14.3449V16.2412H15.8519V17.0607H13.3989Z"
    fill="#77757D"
  />
</svg>`,pJ=rt`<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M3.22321 3.16561C3.69638 3.54965 3.87301 3.52049 4.76102 3.46134L13.1323 2.959C13.3106 2.959 13.1623 2.78075 13.1032 2.75158L11.7128 1.74689C11.4462 1.54028 11.0914 1.30289 10.4116 1.36203L2.30522 1.9535C2.01029 1.98267 1.95114 2.13094 2.06863 2.24924L3.22321 3.16561ZM3.72555 5.11664V13.9238C3.72555 14.3978 3.96214 14.5745 4.49527 14.5453L13.6946 14.013C14.2269 13.9838 14.2861 13.6581 14.2861 13.274V4.52517C14.2861 4.14112 14.1386 3.9337 13.8129 3.96368L4.19872 4.52517C3.84384 4.55434 3.72555 4.73178 3.72555 5.11664ZM12.8082 5.589C12.8666 5.85476 12.8082 6.12133 12.5409 6.1513L12.0977 6.23962V12.7417C11.7128 12.9491 11.3579 13.0674 11.0622 13.0674C10.589 13.0674 10.4707 12.9192 10.1158 12.476L7.21602 7.92409V12.3285L8.13401 12.5351C8.13401 12.5351 8.13401 13.0674 7.39346 13.0674L5.35249 13.1857C5.29334 13.0674 5.35249 12.7725 5.55991 12.7125L6.09223 12.5651V6.74196L5.35249 6.68282C5.29334 6.41625 5.44162 6.0322 5.85564 6.00222L8.04489 5.85557L11.0622 10.4658V6.38789L10.2925 6.29958C10.2341 5.97386 10.4707 5.73809 10.7664 5.70811L12.8082 5.58981V5.589ZM1.62462 1.15542L10.0559 0.534789C11.0905 0.445664 11.3571 0.505621 12.0085 0.977985L14.6993 2.86987C15.1433 3.19477 15.2916 3.28309 15.2916 3.63797V14.013C15.2916 14.6636 15.055 15.0476 14.2269 15.1068L4.43531 15.6982C3.81386 15.7274 3.51813 15.6391 3.19242 15.2251L1.21059 12.6534C0.855714 12.1802 0.708252 11.8262 0.708252 11.4113V2.19009C0.708252 1.65777 0.944029 1.21457 1.62462 1.15542Z"
    fill="black"
  />
</svg>`,gJ=rt`<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.1851 0.708313C13.5303 0.708313 13.8101 0.988135 13.8101 1.33331V2.18979H14.6666C15.0118 2.18979 15.2916 2.46962 15.2916 2.81479C15.2916 3.15997 15.0118 3.43979 14.6666 3.43979H13.8101V4.29628C13.8101 4.64145 13.5303 4.92128 13.1851 4.92128C12.8399 4.92128 12.5601 4.64145 12.5601 4.29628V3.43979H11.7036C11.3584 3.43979 11.0786 3.15997 11.0786 2.81479C11.0786 2.46962 11.3584 2.18979 11.7036 2.18979H12.5601V1.33331C12.5601 0.988135 12.8399 0.708313 13.1851 0.708313ZM6.51844 2.18979C6.77511 2.18979 7.00568 2.34672 7.09985 2.58549L8.18874 5.34639C8.3394 5.7284 8.37968 5.81859 8.43081 5.88998C8.48542 5.96623 8.55218 6.033 8.62844 6.08761C8.69983 6.13874 8.79002 6.17902 9.17203 6.32968L11.9329 7.41856C12.1717 7.51273 12.3286 7.74331 12.3286 7.99998C12.3286 8.25665 12.1717 8.48723 11.9329 8.58139L9.17203 9.67028C8.79002 9.82094 8.69983 9.86122 8.62844 9.91235C8.55218 9.96696 8.48542 10.0337 8.43081 10.11C8.37968 10.1814 8.3394 10.2716 8.18874 10.6536L7.09985 13.4145C7.00568 13.6532 6.77511 13.8102 6.51844 13.8102C6.26177 13.8102 6.03119 13.6532 5.93702 13.4145L4.84814 10.6536C4.69748 10.2716 4.6572 10.1814 4.60607 10.11C4.55146 10.0337 4.48469 9.96696 4.40844 9.91235C4.33705 9.86122 4.24685 9.82094 3.86484 9.67028L1.10395 8.58139C0.865175 8.48723 0.708252 8.25665 0.708252 7.99998C0.708252 7.74331 0.865175 7.51273 1.10395 7.41856L3.86484 6.32968C4.24685 6.17902 4.33705 6.13874 4.40844 6.08761C4.48469 6.033 4.55146 5.96623 4.60607 5.88998C4.6572 5.81859 4.69748 5.7284 4.84814 5.34639L5.93702 2.58549C6.03119 2.34672 6.26177 2.18979 6.51844 2.18979ZM6.51844 4.5183L6.01097 5.805C6.00357 5.82375 5.99627 5.8423 5.98905 5.86065C5.87158 6.15916 5.77495 6.40469 5.62232 6.61781C5.48801 6.80535 5.3238 6.96955 5.13626 7.10386C4.92315 7.25649 4.67762 7.35312 4.3791 7.4706C4.36076 7.47782 4.34221 7.48512 4.32346 7.49251L3.03676 7.99998L4.32346 8.50745C4.34221 8.51484 4.36075 8.52214 4.3791 8.52936C4.67762 8.64684 4.92315 8.74347 5.13626 8.8961C5.3238 9.03041 5.48801 9.19461 5.62232 9.38215C5.77495 9.59527 5.87157 9.84079 5.98905 10.1393C5.99627 10.1577 6.00357 10.1762 6.01097 10.195L6.51844 11.4817L7.0259 10.195C7.0333 10.1762 7.0406 10.1577 7.04782 10.1393C7.1653 9.8408 7.26193 9.59527 7.41455 9.38215C7.54887 9.19461 7.71307 9.03041 7.90061 8.8961C8.11373 8.74347 8.35926 8.64684 8.65777 8.52936C8.67612 8.52214 8.69467 8.51484 8.71342 8.50745L10.0001 7.99998L8.71342 7.49251C8.69467 7.48512 8.67612 7.47782 8.65777 7.4706C8.35926 7.35312 8.11373 7.25649 7.90061 7.10386C7.71307 6.96955 7.54887 6.80535 7.41455 6.61781C7.26193 6.40469 7.1653 6.15916 7.04782 5.86065C7.0406 5.8423 7.0333 5.82375 7.0259 5.805L6.51844 4.5183ZM13.1851 11.0787C13.5303 11.0787 13.8101 11.3585 13.8101 11.7037V12.5602H14.6666C15.0118 12.5602 15.2916 12.84 15.2916 13.1852C15.2916 13.5303 15.0118 13.8102 14.6666 13.8102H13.8101V14.6666C13.8101 15.0118 13.5303 15.2916 13.1851 15.2916C12.8399 15.2916 12.5601 15.0118 12.5601 14.6666V13.8102H11.7036C11.3584 13.8102 11.0786 13.5303 11.0786 13.1852C11.0786 12.84 11.3584 12.5602 11.7036 12.5602H12.5601V11.7037C12.5601 11.3585 12.8399 11.0787 13.1851 11.0787Z"
    fill="#A9A9AD"
  />
</svg>`,mJ=rt`<svg
  width="18"
  height="18"
  viewBox="0 0 18 18"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9 2.125C5.20304 2.125 2.125 5.20304 2.125 9C2.125 12.797 5.20304 15.875 9 15.875C12.797 15.875 15.875 12.797 15.875 9C15.875 5.20304 12.797 2.125 9 2.125ZM0.875 9C0.875 4.51269 4.51269 0.875 9 0.875C13.4873 0.875 17.125 4.51269 17.125 9C17.125 13.4873 13.4873 17.125 9 17.125C4.51269 17.125 0.875 13.4873 0.875 9ZM8.97249 6.5C8.48797 6.5 8.07928 6.83137 7.96361 7.28079C7.87757 7.61507 7.53683 7.81631 7.20255 7.73027C6.86826 7.64423 6.66702 7.3035 6.75306 6.96921C7.00742 5.98094 7.90381 5.25 8.97249 5.25C10.2381 5.25 11.2642 6.27601 11.2642 7.54167C11.2642 8.23885 10.928 8.70316 10.5524 9.06572C10.3978 9.21488 10.2216 9.36095 10.0565 9.49784C10.0321 9.51805 10.008 9.53806 9.98417 9.55785C9.79133 9.71827 9.60144 9.87995 9.41445 10.0669C9.17037 10.311 8.77464 10.311 8.53057 10.0669C8.28649 9.82286 8.28649 9.42714 8.53057 9.18306C8.76025 8.95338 8.98703 8.76138 9.1848 8.59686C9.21087 8.57517 9.23619 8.55416 9.26081 8.53373C9.43034 8.39303 9.5663 8.28019 9.6843 8.1663C9.93364 7.92565 10.0142 7.76496 10.0142 7.54167C10.0142 6.96637 9.54779 6.5 8.97249 6.5ZM8.98084 12.75H8.97251C8.62733 12.75 8.34751 12.4702 8.34751 12.125C8.34751 11.7798 8.62733 11.5 8.97251 11.5H8.98084C9.32602 11.5 9.60584 11.7798 9.60584 12.125C9.60584 12.4702 9.32602 12.75 8.98084 12.75Z"
    fill="#77757D"
  />
</svg>`;function nk(n,e=20){const t=e/16,r=`
    width: ${t}em;
    height: ${t}em;
    vertical-align: middle;
    font-size: inherit;
    margin-bottom: 0.1em;
  `;return rt`<svg
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
    style=${r}
  >
    ${n}
  </svg>`}function hp(n,e=24){return rt`<svg
    width="${e}"
    height="${e}"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
  >
    ${n}
  </svg>`}const fR=dp`<path
  fill-rule="evenodd"
  clip-rule="evenodd"
  d="M3.25 4C3.25 3.58579 3.58579 3.25 4 3.25H20C20.4142 3.25 20.75 3.58579 20.75 4V6.66667C20.75 7.08088 20.4142 7.41667 20 7.41667C19.5858 7.41667 19.25 7.08088 19.25 6.66667V4.75H12.75V19.25H16C16.4142 19.25 16.75 19.5858 16.75 20C16.75 20.4142 16.4142 20.75 16 20.75H8C7.58579 20.75 7.25 20.4142 7.25 20C7.25 19.5858 7.58579 19.25 8 19.25H11.25V4.75H4.75V6.66667C4.75 7.08088 4.41421 7.41667 4 7.41667C3.58579 7.41667 3.25 7.08088 3.25 6.66667V4Z"
/>`,ym=hp(fR,20),pR=hp(fR),gR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.7499 6.81081C16.7231 6.83762 16.6947 6.86599 16.6646 6.89602L14.5303 9.03033C14.2374 9.32322 13.7626 9.32322 13.4697 9.03033C13.1768 8.73744 13.1768 8.26256 13.4697 7.96967L15.604 5.83536C15.6113 5.82808 15.6185 5.82081 15.6258 5.81357C15.8211 5.61819 16.0018 5.43743 16.1578 5.30688C16.3005 5.18739 16.5575 4.98807 16.9019 4.96096C17.3008 4.92957 17.6906 5.09103 17.9505 5.3953C18.1749 5.65804 18.2157 5.98068 18.2321 6.16609C18.25 6.36867 18.25 6.62428 18.25 6.90057C18.25 6.91081 18.25 6.92108 18.25 6.93137V18.25H21C21.4142 18.25 21.75 18.5858 21.75 19C21.75 19.4142 21.4142 19.75 21 19.75H14C13.5858 19.75 13.25 19.4142 13.25 19C13.25 18.5858 13.5858 18.25 14 18.25H16.75V6.93137C16.75 6.88891 16.75 6.84878 16.7499 6.81081Z"
  />
</svg>`,mR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.9057 6.75035C16.3267 6.802 15.7718 7.01946 15.3049 7.3801C14.8318 7.74548 14.4682 8.24309 14.2591 8.81605C14.1172 9.20517 13.6866 9.40552 13.2975 9.26355C12.9084 9.12157 12.708 8.69103 12.85 8.30191C13.155 7.46589 13.6877 6.73376 14.388 6.19294C15.0884 5.65199 15.927 5.32534 16.8055 5.25346L16.8277 5.25164L16.8499 5.25115C17.8967 5.22771 18.9191 5.56392 19.7537 6.20306C20.5868 6.84102 21.1843 7.74329 21.4548 8.76409C21.7891 9.97619 21.5425 11.1146 21.1354 12.0147C20.7302 12.9106 20.1448 13.6215 19.7055 14.0279L19.6986 14.0343L19.6916 14.0405C18.9491 14.6937 18.1744 15.3076 17.3705 15.88C16.4743 16.5815 15.6527 17.3759 14.9186 18.25H21.2C21.6142 18.25 21.95 18.5858 21.95 19C21.95 19.4142 21.6142 19.75 21.2 19.75H13.5917C12.9084 19.75 12.4943 18.9759 12.9002 18.4076C13.9053 16.9999 15.1041 15.7469 16.4602 14.6877L16.4735 14.6773L16.4872 14.6675C17.2512 14.1242 17.9876 13.5412 18.6934 12.9208C19.0046 12.631 19.4584 12.0827 19.7687 11.3966C20.0787 10.7111 20.2239 9.93968 20.008 9.16007L20.0056 9.15134C19.8193 8.44582 19.4083 7.82782 18.8418 7.394C18.2815 6.965 17.6006 6.73982 16.9057 6.75035Z"
  />
</svg>`,vR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M17.3196 6.75154C16.8178 6.78189 16.3346 6.95347 15.926 7.24657C15.5153 7.54113 15.1968 7.94629 15.0075 8.41487C14.8523 8.79893 14.4152 8.98449 14.0312 8.82933C13.6471 8.67418 13.4616 8.23706 13.6167 7.853C13.9125 7.1209 14.4101 6.48789 15.0517 6.02769C15.6933 5.56749 16.4525 5.29903 17.2408 5.25359L17.2482 5.25316L17.2557 5.25288C18.2533 5.21525 19.2296 5.54803 19.9965 6.18714C20.7634 6.82626 21.2668 7.72652 21.4097 8.71457L21.4143 8.74618L21.4161 8.77807C21.4603 9.53257 21.2968 10.2847 20.9433 10.9528C20.6919 11.4279 20.3514 11.8475 19.9423 12.1898C20.4639 12.4619 20.9143 12.8568 21.2521 13.4177C21.8984 14.4739 21.8675 15.759 21.4573 16.838C21.0461 17.9197 20.2127 18.9107 19.0815 19.378L19.0786 19.3792C18.0333 19.8058 16.8745 19.8662 15.7905 19.5506C14.7065 19.2351 13.7612 18.5621 13.1082 17.6411C12.8686 17.3032 12.9483 16.8351 13.2862 16.5955C13.6241 16.3559 14.0923 16.4356 14.3318 16.7735C14.789 17.4183 15.4508 17.8895 16.2098 18.1104C16.9681 18.3312 17.7789 18.2891 18.5103 17.991C19.1943 17.7079 19.7645 17.0696 20.0552 16.305C20.3467 15.5381 20.3161 14.7606 19.9717 14.199L19.9682 14.1933C19.5426 13.4852 18.7016 13.1471 17.2275 13.1471C17.2201 13.1471 17.2121 13.1471 17.2038 13.1471C17.1523 13.1472 17.0876 13.1473 17.0508 13.1451C17.0439 13.1447 17.0076 13.1426 16.9647 13.1352L16.9637 13.135C16.9524 13.1332 16.865 13.1191 16.7673 13.0722L16.7655 13.0714C16.7295 13.0542 16.547 12.967 16.4309 12.7512C16.3831 12.6425 16.3413 12.3989 16.3519 12.2701C16.3793 12.1601 16.4656 11.9821 16.5164 11.914C16.6196 11.7908 16.7354 11.7347 16.7637 11.721C16.8085 11.6993 16.8465 11.6864 16.8651 11.6805C16.9035 11.6683 16.9346 11.662 16.9457 11.6597C16.9718 11.6545 16.993 11.6517 16.9996 11.6509C17.024 11.6477 17.0535 11.645 17.0677 11.6438L17.0706 11.6435C17.0761 11.643 17.082 11.6425 17.0882 11.6419C17.1709 11.6346 17.3161 11.6217 17.4965 11.597C17.9218 11.5387 18.3862 11.4336 18.6392 11.2811L18.6415 11.2798C19.0547 11.0326 19.3923 10.6769 19.6175 10.2513C19.8377 9.83509 19.9422 9.36767 19.9204 8.89772C19.8245 8.28862 19.5105 7.73468 19.0362 7.33947C18.5557 6.93905 17.9446 6.7298 17.3196 6.75154Z"
  />
</svg>`,bR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M18.1928 5.85878C18.6593 5.15904 19.75 5.48927 19.75 6.33028V14.25H21C21.4142 14.25 21.75 14.5858 21.75 15C21.75 15.4142 21.4142 15.75 21 15.75H19.75V19C19.75 19.4142 19.4142 19.75 19 19.75C18.5858 19.75 18.25 19.4142 18.25 19V15.75H13.1869C12.508 15.75 12.103 14.9934 12.4796 14.4285L18.1928 5.85878ZM18.25 14.25V8.47708L14.4014 14.25H18.25Z"
  />
</svg>`,yR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.9558 5.94948C14.0287 5.5446 14.381 5.25 14.7924 5.25H20.892C21.3062 5.25 21.642 5.58579 21.642 6C21.642 6.41421 21.3062 6.75 20.892 6.75H15.3359L14.677 10.4122C14.7083 10.3958 14.7397 10.3796 14.7713 10.3638C15.4506 10.0234 16.193 9.8296 16.9512 9.79502L16.9745 9.79396L16.9978 9.79435C18.0629 9.81203 19.0907 10.1881 19.9189 10.8615C20.743 11.5316 21.3224 12.4578 21.5681 13.4941C21.8521 14.5302 21.8025 15.6309 21.4262 16.6371C21.048 17.6482 20.3593 18.512 19.4591 19.1014L19.4463 19.1098L19.4332 19.1176C17.1285 20.4957 13.8824 19.5672 12.3514 16.9306C12.1434 16.5724 12.2652 16.1134 12.6234 15.9054C12.9816 15.6974 13.4406 15.8192 13.6486 16.1774C14.8123 18.1815 17.1546 18.7212 18.6504 17.838C19.2754 17.4248 19.756 16.8207 20.0213 16.1116C20.2883 15.3975 20.3225 14.6155 20.1186 13.8802L20.1145 13.8654L20.1111 13.8506C19.9425 13.1297 19.5413 12.4877 18.9726 12.0253C18.41 11.5679 17.7152 11.3117 16.996 11.2946C16.4565 11.3225 15.928 11.462 15.4433 11.7049C15.047 11.9035 14.6868 12.1677 14.3774 12.4863C14.075 12.7978 13.6591 12.7916 13.385 12.6587C13.1072 12.524 12.8336 12.1871 12.9141 11.7396L13.9558 5.94948Z"
  />
</svg>`,xR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3 4.25C3.41421 4.25 3.75 4.58579 3.75 5V11.25H10.25V5C10.25 4.58579 10.5858 4.25 11 4.25C11.4142 4.25 11.75 4.58579 11.75 5V19C11.75 19.4142 11.4142 19.75 11 19.75C10.5858 19.75 10.25 19.4142 10.25 19V12.75H3.75V19C3.75 19.4142 3.41421 19.75 3 19.75C2.58579 19.75 2.25 19.4142 2.25 19V5C2.25 4.58579 2.58579 4.25 3 4.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M15.8428 6.08001C16.5038 5.78482 17.221 5.63827 17.9443 5.65076L17.9528 5.65091L17.9612 5.65124C18.6652 5.67922 19.3558 5.85344 19.9894 6.16278C20.6596 6.48991 21.0427 6.86843 21.4674 7.36832C21.7355 7.68402 21.697 8.15733 21.3813 8.42549C21.0656 8.69365 20.5923 8.65511 20.3241 8.33942C19.9679 7.92001 19.7421 7.71121 19.3314 7.51075C18.8869 7.29373 18.4031 7.17116 17.91 7.1504C17.4093 7.14298 16.9127 7.245 16.4544 7.44965C15.9982 7.65337 15.5906 7.95407 15.2596 8.3315C14.8157 8.89075 14.4914 9.53705 14.3076 10.2297C14.1125 10.9831 13.997 11.753 13.9617 12.5269C14.7663 11.5406 15.9873 10.9103 17.3576 10.9103C19.7888 10.9103 21.75 12.8945 21.75 15.3302C21.75 17.7659 19.7888 19.75 17.3576 19.75C15.6443 19.75 14.1643 18.7645 13.4398 17.3301C13.0351 16.5834 12.7496 15.7772 12.5937 14.9411L12.5912 14.9278L12.5892 14.9144C12.3372 13.226 12.428 11.5036 12.856 9.85144L12.8571 9.84743C13.0954 8.94816 13.5178 8.10867 14.0975 7.38296L14.1072 7.37079L14.1174 7.35903C14.5931 6.81178 15.1818 6.37518 15.8428 6.08001ZM14.821 16.7346C15.3136 17.6393 16.2672 18.25 17.3576 18.25C18.9497 18.25 20.25 16.9481 20.25 15.3302C20.25 13.7122 18.9497 12.4103 17.3576 12.4103C15.7655 12.4103 14.4652 13.7122 14.4652 15.3302C14.4652 15.7995 14.5747 16.2423 14.7689 16.6344C14.7763 16.6478 14.7836 16.6612 14.791 16.6746C14.802 16.6943 14.812 16.7143 14.821 16.7346Z"
  />
</svg>`,vJ=dp`<path
  fill-rule="evenodd"
  clip-rule="evenodd"
  d="M3 6.5C3 5.83266 3.54099 5.29167 4.20833 5.29167C4.87568 5.29167 5.41667 5.83265 5.41667 6.5C5.41667 7.16734 4.87568 7.70833 4.20833 7.70833C3.54099 7.70833 3 7.16734 3 6.5ZM7.58333 6.50057C7.58336 6.08636 7.91916 5.75059 8.33337 5.75061L20.25 5.75127C20.6642 5.7513 21 6.0871 21 6.50131C21 6.91553 20.6641 7.2513 20.2499 7.25127L8.33329 7.25061C7.91908 7.25059 7.58331 6.91478 7.58333 6.50057ZM3 12C3 11.3327 3.54099 10.7917 4.20833 10.7917C4.87568 10.7917 5.41667 11.3327 5.41667 12C5.41667 12.6673 4.87568 13.2083 4.20833 13.2083C3.54099 13.2083 3 12.6673 3 12ZM7.58333 12.0006C7.58336 11.5864 7.91916 11.2506 8.33338 11.2507L20.2501 11.2514C20.6643 11.2514 21.0001 11.5872 21 12.0014C21 12.4156 20.6642 12.7514 20.25 12.7514L8.33329 12.7507C7.91907 12.7506 7.58331 12.4148 7.58333 12.0006ZM3 17.5C3 16.8327 3.54099 16.2917 4.20833 16.2917C4.87568 16.2917 5.41667 16.8327 5.41667 17.5C5.41667 18.1673 4.87568 18.7083 4.20833 18.7083C3.54099 18.7083 3 18.1673 3 17.5ZM7.58333 17.5006C7.58336 17.0864 7.91916 16.7506 8.33338 16.7507L20.2501 16.7514C20.6643 16.7514 21 17.0872 21 17.5014C21 17.9156 20.6642 18.2514 20.25 18.2514L8.33329 18.2507C7.91907 18.2506 7.58331 17.9148 7.58333 17.5006Z"
/>`,wR=hp(vJ,20),bJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.97755 4.02864C6.19866 4.16529 6.33325 4.40669 6.33325 4.66663V9.41663H7.41659C7.8308 9.41663 8.16659 9.75241 8.16659 10.1666C8.16659 10.5808 7.8308 10.9166 7.41659 10.9166H3.74992C3.33571 10.9166 2.99992 10.5808 2.99992 10.1666C2.99992 9.75241 3.33571 9.41663 3.74992 9.41663H4.83325V5.88015L4.08533 6.25411C3.71485 6.43936 3.26434 6.28919 3.0791 5.9187C2.89386 5.54822 3.04403 5.09772 3.41451 4.91247L5.24784 3.99581C5.48033 3.87956 5.75644 3.89198 5.97755 4.02864ZM9.41659 6.49991C9.41661 6.0857 9.75242 5.74994 10.1666 5.74996L20.25 5.75057C20.6642 5.75059 20.9999 6.0864 20.9999 6.50061C20.9999 6.91483 20.6641 7.25059 20.2499 7.25057L10.1665 7.24996C9.75233 7.24994 9.41656 6.91413 9.41659 6.49991ZM9.41659 11.9999C9.41661 11.5857 9.75242 11.2499 10.1666 11.25L20.25 11.2506C20.6642 11.2506 20.9999 11.5864 20.9999 12.0006C20.9999 12.4148 20.6641 12.7506 20.2499 12.7506L10.1665 12.75C9.75233 12.7499 9.41656 12.4141 9.41659 11.9999ZM5.58325 14.5833C5.07949 14.5833 4.65431 14.9278 4.53401 15.3952C4.43076 15.7964 4.02187 16.0379 3.62073 15.9346C3.21959 15.8314 2.9781 15.4225 3.08135 15.0213C3.36809 13.9073 4.3785 13.0833 5.58325 13.0833H5.84022C7.12504 13.0833 8.16659 14.1248 8.16659 15.4097C8.16659 16.0805 7.877 16.7187 7.37215 17.1604L5.74601 18.5833H7.41659C7.8308 18.5833 8.16659 18.9191 8.16659 19.3333C8.16659 19.7475 7.8308 20.0833 7.41659 20.0833H3.74992C3.43746 20.0833 3.15774 19.8896 3.04784 19.5971C2.93794 19.3046 3.02089 18.9746 3.25604 18.7689L6.38439 16.0316C6.56372 15.8746 6.66659 15.6479 6.66659 15.4097C6.66659 14.9533 6.29661 14.5833 5.84022 14.5833H5.58325ZM9.41659 17.4999C9.41661 17.0857 9.75242 16.7499 10.1666 16.75L20.25 16.7506C20.6642 16.7506 20.9999 17.0864 20.9999 17.5006C20.9999 17.9148 20.6641 18.2506 20.2499 18.2506L10.1665 18.25C9.75233 18.2499 9.41656 17.9141 9.41659 17.4999Z"
  />
</svg>`,CR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.97763 4.02868C6.19874 4.16533 6.33333 4.40673 6.33333 4.66667V9.41667H7.41666C7.83088 9.41667 8.16666 9.75245 8.16666 10.1667C8.16666 10.5809 7.83088 10.9167 7.41666 10.9167H3.75C3.33578 10.9167 3 10.5809 3 10.1667C3 9.75245 3.33578 9.41667 3.75 9.41667H4.83333V5.88019L4.08541 6.25415C3.71492 6.4394 3.26442 6.28923 3.07918 5.91874C2.89393 5.54826 3.0441 5.09776 3.41459 4.91251L5.24792 3.99585C5.48041 3.8796 5.75652 3.89202 5.97763 4.02868ZM9.41666 6.49995C9.41669 6.08574 9.7525 5.74998 10.1667 5.75L20.25 5.75061C20.6643 5.75063 21 6.08644 21 6.50065C21 6.91487 20.6642 7.25063 20.25 7.25061L10.1666 7.25C9.75241 7.24998 9.41664 6.91417 9.41666 6.49995ZM9.41666 12C9.41669 11.5857 9.7525 11.25 10.1667 11.25L20.25 11.2506C20.6643 11.2506 21 11.5864 21 12.0007C21 12.4149 20.6642 12.7506 20.25 12.7506L10.1666 12.75C9.75241 12.75 9.41664 12.4142 9.41666 12ZM5.58333 14.5833C5.07957 14.5833 4.65439 14.9279 4.53408 15.3953C4.43084 15.7964 4.02195 16.0379 3.62081 15.9347C3.21967 15.8314 2.97818 15.4225 3.08143 15.0214C3.36816 13.9073 4.37857 13.0833 5.58333 13.0833H5.8403C7.12512 13.0833 8.16666 14.1249 8.16666 15.4097C8.16666 16.0805 7.87708 16.7187 7.37222 17.1605L5.74608 18.5833H7.41666C7.83088 18.5833 8.16666 18.9191 8.16666 19.3333C8.16666 19.7475 7.83088 20.0833 7.41666 20.0833H3.75C3.43754 20.0833 3.15782 19.8896 3.04792 19.5971C2.93802 19.3046 3.02097 18.9747 3.25612 18.7689L6.38446 16.0316C6.5638 15.8747 6.66666 15.648 6.66666 15.4097C6.66666 14.9533 6.29669 14.5833 5.8403 14.5833H5.58333ZM9.41666 17.5C9.41669 17.0857 9.7525 16.75 10.1667 16.75L20.25 16.7506C20.6643 16.7506 21 17.0864 21 17.5007C21 17.9149 20.6642 18.2506 20.25 18.2506L10.1666 18.25C9.75241 18.25 9.41664 17.9142 9.41666 17.5Z"
  />
</svg>`,xm=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.1728 4.25H17.8272C18.3641 4.24999 18.8067 4.24999 19.1671 4.27575C19.5398 4.3024 19.8854 4.35951 20.2134 4.50573C20.721 4.73207 21.1527 5.10167 21.4301 5.57811C21.6157 5.89681 21.6871 6.23393 21.7195 6.58088C21.75 6.90782 21.75 7.30509 21.75 7.76685V16.2331C21.75 16.6949 21.75 17.0922 21.7195 17.4191C21.6871 17.7661 21.6157 18.1032 21.4301 18.4219C21.1527 18.8983 20.721 19.2679 20.2134 19.4943C19.8854 19.6405 19.5398 19.6976 19.1671 19.7242C18.8067 19.75 18.3641 19.75 17.8272 19.75H6.1728C5.63587 19.75 5.19332 19.75 4.83292 19.7242C4.46022 19.6976 4.1146 19.6405 3.78662 19.4943C3.27896 19.2679 2.8473 18.8983 2.56987 18.4219C2.38428 18.1032 2.31289 17.7661 2.2805 17.4191C2.24997 17.0922 2.24998 16.6949 2.25 16.2331V7.76689C2.24998 7.30511 2.24997 6.90783 2.2805 6.58088C2.31289 6.23393 2.38428 5.89681 2.56987 5.57811C2.8473 5.10167 3.27896 4.73207 3.78662 4.50573C4.1146 4.35951 4.46022 4.3024 4.83292 4.27575C5.19332 4.24999 5.63586 4.24999 6.1728 4.25ZM3.75 10.125V16.2C3.75 16.7042 3.75076 17.0308 3.774 17.2797C3.7961 17.5164 3.83371 17.6114 3.86611 17.6671C3.97217 17.8492 4.15244 18.015 4.39742 18.1243C4.49727 18.1688 4.64558 18.207 4.93989 18.2281C5.24043 18.2496 5.62911 18.25 6.2 18.25H7.25V10.125H3.75ZM3.75 8.625V7.8C3.75 7.29583 3.75076 6.96922 3.774 6.72033C3.7961 6.48364 3.83371 6.38857 3.86611 6.33293C3.97217 6.1508 4.15243 5.98497 4.39742 5.87574C4.49727 5.83123 4.64558 5.79297 4.93989 5.77193C5.24043 5.75045 5.62911 5.75 6.2 5.75H17.8C18.3709 5.75 18.7596 5.75045 19.0601 5.77193C19.3544 5.79297 19.5027 5.83123 19.6026 5.87574C19.8476 5.98497 20.0278 6.1508 20.1339 6.33293C20.1663 6.38857 20.2039 6.48364 20.226 6.72033C20.2492 6.96922 20.25 7.29583 20.25 7.8V8.625H3.75ZM8.75 10.125V18.25H17.8C18.3709 18.25 18.7596 18.2496 19.0601 18.2281C19.3544 18.207 19.5027 18.1688 19.6026 18.1243C19.8476 18.015 20.0278 17.8492 20.1339 17.6671C20.1663 17.6114 20.2039 17.5164 20.226 17.2797C20.2492 17.0308 20.25 16.7042 20.25 16.2V10.125H8.75Z"
  />
</svg>`,rk=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.25 8.4C5.25 7.76487 5.76487 7.25 6.4 7.25H10.1C10.7351 7.25 11.25 7.76487 11.25 8.4V15.6C11.25 16.2351 10.7351 16.75 10.1 16.75H6.4C5.76487 16.75 5.25 16.2351 5.25 15.6V8.4ZM6.75 8.75V15.25H9.75V8.75H6.75Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12.75 8.4C12.75 7.76487 13.2649 7.25 13.9 7.25H17.6C18.2351 7.25 18.75 7.76487 18.75 8.4V13.6C18.75 14.2351 18.2351 14.75 17.6 14.75H13.9C13.2649 14.75 12.75 14.2351 12.75 13.6V8.4ZM14.25 8.75V13.25H17.25V8.75H14.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.25 7C2.25 5.48122 3.48122 4.25 5 4.25H19C20.5188 4.25 21.75 5.48122 21.75 7V17C21.75 18.5188 20.5188 19.75 19 19.75H5C3.48122 19.75 2.25 18.5188 2.25 17V7ZM5 5.75C4.30964 5.75 3.75 6.30964 3.75 7V17C3.75 17.6904 4.30964 18.25 5 18.25H19C19.6904 18.25 20.25 17.6904 20.25 17V7C20.25 6.30964 19.6904 5.75 19 5.75H5Z"
  />
</svg>`,ax=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 6.28571C3.25 4.60914 4.60914 3.25 6.28571 3.25H17.7143C19.3909 3.25 20.75 4.60914 20.75 6.28571V17.7143C20.75 19.3909 19.3909 20.75 17.7143 20.75H6.28571C4.60914 20.75 3.25 19.3909 3.25 17.7143V6.28571ZM6.28571 4.75C5.43756 4.75 4.75 5.43756 4.75 6.28571V17.7143C4.75 18.5624 5.43756 19.25 6.28571 19.25H17.7143C18.5624 19.25 19.25 18.5624 19.25 17.7143V6.28571C19.25 5.43756 18.5624 4.75 17.7143 4.75H6.28571Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.5068 8.44713C16.8121 8.72703 16.8328 9.20145 16.5529 9.50679L11.0529 15.5068C10.9146 15.6576 10.7208 15.7454 10.5163 15.7498C10.3118 15.7543 10.1143 15.675 9.96967 15.5303L7.46967 13.0303C7.17678 12.7374 7.17678 12.2626 7.46967 11.9697C7.76256 11.6768 8.23744 11.6768 8.53033 11.9697L10.4764 13.9158L15.4471 8.49321C15.727 8.18787 16.2015 8.16724 16.5068 8.44713Z"
  />
</svg>`,SR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.16957 4.25H17.8304C18.3646 4.24999 18.8104 4.24998 19.1747 4.27974C19.5546 4.31078 19.9112 4.37789 20.2485 4.54973C20.7659 4.81339 21.1866 5.23408 21.4503 5.75153C21.6221 6.08879 21.6892 6.44545 21.7203 6.82533C21.75 7.18956 21.75 7.6354 21.75 8.16955V15.8305C21.75 16.3646 21.75 16.8104 21.7203 17.1747C21.6892 17.5546 21.6221 17.9112 21.4503 18.2485C21.1866 18.7659 20.7659 19.1866 20.2485 19.4503C19.9112 19.6221 19.5546 19.6892 19.1747 19.7203C18.8104 19.75 18.3646 19.75 17.8305 19.75H6.16955C5.6354 19.75 5.18956 19.75 4.82533 19.7203C4.44545 19.6892 4.08879 19.6221 3.75153 19.4503C3.23408 19.1866 2.81338 18.7659 2.54973 18.2485C2.37789 17.9112 2.31078 17.5546 2.27974 17.1747C2.24998 16.8104 2.24999 16.3646 2.25 15.8304V8.16957C2.24999 7.63541 2.24998 7.18956 2.27974 6.82533C2.31078 6.44545 2.37789 6.08879 2.54973 5.75153C2.81338 5.23408 3.23408 4.81338 3.75153 4.54973C4.08879 4.37789 4.44545 4.31078 4.82533 4.27974C5.18956 4.24998 5.63541 4.24999 6.16957 4.25ZM4.94748 5.77476C4.66036 5.79822 4.52307 5.8401 4.43251 5.88624C4.19731 6.00608 4.00608 6.19731 3.88624 6.43251C3.8401 6.52307 3.79822 6.66036 3.77476 6.94748C3.75058 7.24336 3.75 7.62757 3.75 8.2V15.8C3.75 16.3724 3.75058 16.7566 3.77476 17.0525C3.79822 17.3396 3.8401 17.4769 3.88624 17.5675C4.00608 17.8027 4.19731 17.9939 4.43251 18.1138C4.52307 18.1599 4.66036 18.2018 4.94748 18.2252C5.24336 18.2494 5.62757 18.25 6.2 18.25H17.8C18.3724 18.25 18.7566 18.2494 19.0525 18.2252C19.3396 18.2018 19.4769 18.1599 19.5675 18.1138C19.8027 17.9939 19.9939 17.8027 20.1138 17.5675C20.1599 17.4769 20.2018 17.3396 20.2252 17.0525C20.2494 16.7566 20.25 16.3724 20.25 15.8V8.2C20.25 7.62757 20.2494 7.24336 20.2252 6.94748C20.2018 6.66036 20.1599 6.52307 20.1138 6.43251C19.9939 6.19731 19.8027 6.00608 19.5675 5.88624C19.4769 5.8401 19.3396 5.79822 19.0525 5.77476C18.7566 5.75058 18.3724 5.75 17.8 5.75H6.2C5.62757 5.75 5.24336 5.75058 4.94748 5.77476Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M10.5303 8.46967C10.8232 8.76256 10.8232 9.23744 10.5303 9.53033L8.06066 12L10.5303 14.4697C10.8232 14.7626 10.8232 15.2374 10.5303 15.5303C10.2374 15.8232 9.76256 15.8232 9.46967 15.5303L6.46967 12.5303C6.17678 12.2374 6.17678 11.7626 6.46967 11.4697L9.46967 8.46967C9.76256 8.17678 10.2374 8.17678 10.5303 8.46967ZM13.4697 8.46967C13.7626 8.17678 14.2374 8.17678 14.5303 8.46967L17.5303 11.4697C17.8232 11.7626 17.8232 12.2374 17.5303 12.5303L14.5303 15.5303C14.2374 15.8232 13.7626 15.8232 13.4697 15.5303C13.1768 15.2374 13.1768 14.7626 13.4697 14.4697L15.9393 12L13.4697 9.53033C13.1768 9.23744 13.1768 8.76256 13.4697 8.46967Z"
  />
</svg>`,kR=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.75 4C4.16421 4 4.5 4.33579 4.5 4.75L4.5 19.25C4.5 19.6642 4.16421 20 3.75 20C3.33579 20 3 19.6642 3 19.25L3 4.75C3 4.33579 3.33579 4 3.75 4Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M19 6.75C19 7.16421 18.6642 7.5 18.25 7.5H7.75C7.33579 7.5 7 7.16421 7 6.75C7 6.33579 7.33579 6 7.75 6H18.25C18.6642 6 19 6.33579 19 6.75Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M17 11.75C17 12.1642 16.6642 12.5 16.25 12.5H7.75C7.33579 12.5 7 12.1642 7 11.75C7 11.3358 7.33579 11 7.75 11H16.25C16.6642 11 17 11.3358 17 11.75Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M21 16.75C21 17.1642 20.6642 17.5 20.25 17.5H7.75C7.33579 17.5 7 17.1642 7 16.75C7 16.3358 7.33579 16 7.75 16H20.25C20.6642 16 21 16.3358 21 16.75Z"
  />
</svg>`,_R=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H4.94118C5.35539 11.25 5.69118 11.5858 5.69118 12C5.69118 12.4142 5.35539 12.75 4.94118 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12ZM7.01471 12C7.01471 11.5858 7.35049 11.25 7.76471 11.25H8.70588C9.1201 11.25 9.45588 11.5858 9.45588 12C9.45588 12.4142 9.1201 12.75 8.70588 12.75H7.76471C7.35049 12.75 7.01471 12.4142 7.01471 12ZM10.7794 12C10.7794 11.5858 11.1152 11.25 11.5294 11.25H12.4706C12.8848 11.25 13.2206 11.5858 13.2206 12C13.2206 12.4142 12.8848 12.75 12.4706 12.75H11.5294C11.1152 12.75 10.7794 12.4142 10.7794 12ZM14.5441 12C14.5441 11.5858 14.8799 11.25 15.2941 11.25H16.2353C16.6495 11.25 16.9853 11.5858 16.9853 12C16.9853 12.4142 16.6495 12.75 16.2353 12.75H15.2941C14.8799 12.75 14.5441 12.4142 14.5441 12ZM18.3088 12C18.3088 11.5858 18.6446 11.25 19.0588 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H19.0588C18.6446 12.75 18.3088 12.4142 18.3088 12Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4 4.25C4.41421 4.25 4.75 4.58579 4.75 5V6.59459C4.75 7.1261 5.1896 7.57432 5.75343 7.57432H18.2466C18.8104 7.57432 19.25 7.1261 19.25 6.59459V5C19.25 4.58579 19.5858 4.25 20 4.25C20.4142 4.25 20.75 4.58579 20.75 5V6.59459C20.75 7.9737 19.6195 9.07432 18.2466 9.07432H5.75343C4.38048 9.07432 3.25 7.9737 3.25 6.59459V5C3.25 4.58579 3.58579 4.25 4 4.25ZM5.75342 16.4257C5.1896 16.4257 4.75 16.8739 4.75 17.4054V19C4.75 19.4142 4.41421 19.75 4 19.75C3.58579 19.75 3.25 19.4142 3.25 19V17.4054C3.25 16.0263 4.38047 14.9257 5.75342 14.9257L18.2466 14.9257C19.6195 14.9257 20.75 16.0263 20.75 17.4054V19C20.75 19.4142 20.4142 19.75 20 19.75C19.5858 19.75 19.25 19.4142 19.25 19V17.4054C19.25 16.8739 18.8104 16.4257 18.2466 16.4257L5.75342 16.4257Z"
  />
</svg>`,yJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.25 4C6.25 3.58579 6.58579 3.25 7 3.25H12.9583C15.6288 3.25 17.8333 5.35506 17.8333 8C17.8333 9.51519 17.1099 10.8532 15.9898 11.7198C17.6162 12.484 18.75 14.1032 18.75 16C18.75 18.6449 16.5455 20.75 13.875 20.75H7C6.58579 20.75 6.25 20.4142 6.25 20V4ZM7.75 12.75V19.25H13.875C15.7609 19.25 17.25 17.7733 17.25 16C17.25 14.2267 15.7609 12.75 13.875 12.75H7.75ZM7.75 11.25H12.9583C14.8442 11.25 16.3333 9.77334 16.3333 8C16.3333 6.22666 14.8442 4.75 12.9583 4.75H7.75V11.25Z"
  />
</svg>`,xJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M14.6075 3.25H10.25C9.83579 3.25 9.5 3.58579 9.5 4C9.5 4.41421 9.83579 4.75 10.25 4.75H13.5896L8.83175 19.25H5C4.58579 19.25 4.25 19.5858 4.25 20C4.25 20.4142 4.58579 20.75 5 20.75H9.35778C9.36938 20.7503 9.38095 20.7503 9.39249 20.75H13.75C14.1642 20.75 14.5 20.4142 14.5 20C14.5 19.5858 14.1642 19.25 13.75 19.25H10.4104L15.1682 4.75H19C19.4142 4.75 19.75 4.41421 19.75 4C19.75 3.58579 19.4142 3.25 19 3.25H14.6422C14.6306 3.24973 14.619 3.24973 14.6075 3.25Z"
  />
</svg>`,wJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.25 4C4.25 3.58579 4.58579 3.25 5 3.25H8.5C8.91421 3.25 9.25 3.58579 9.25 4C9.25 4.41421 8.91421 4.75 8.5 4.75H7.48717C7.49559 4.79501 7.5 4.84143 7.5 4.88889V11.1111C7.5 13.6536 9.52581 15.6944 12 15.6944C14.4742 15.6944 16.5 13.6536 16.5 11.1111V4.88889C16.5 4.84143 16.5044 4.79501 16.5128 4.75H15.5C15.0858 4.75 14.75 4.41421 14.75 4C14.75 3.58579 15.0858 3.25 15.5 3.25H19C19.4142 3.25 19.75 3.58579 19.75 4C19.75 4.41421 19.4142 4.75 19 4.75H17.9872C17.9956 4.79501 18 4.84143 18 4.88889V11.1111C18 14.4597 15.3248 17.1944 12 17.1944C8.6752 17.1944 6 14.4597 6 11.1111V4.88889C6 4.84143 6.00441 4.79501 6.01283 4.75H5C4.58579 4.75 4.25 4.41421 4.25 4ZM4.25 20C4.25 19.5858 4.58579 19.25 5 19.25H19C19.4142 19.25 19.75 19.5858 19.75 20C19.75 20.4142 19.4142 20.75 19 20.75H5C4.58579 20.75 4.25 20.4142 4.25 20Z"
  />
</svg>`,CJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.02778 8C5.02778 5.37665 7.15442 3.25 9.77778 3.25H14.3889C16.9202 3.25 18.9722 5.30203 18.9722 7.83333V8C18.9722 8.41421 18.6364 8.75 18.2222 8.75C17.808 8.75 17.4722 8.41421 17.4722 8V7.83333C17.4722 6.13046 16.0918 4.75 14.3889 4.75H9.77778C7.98285 4.75 6.52778 6.20507 6.52778 8C6.52778 9.79493 7.98285 11.25 9.77778 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H17.6863C18.4838 13.5997 18.9722 14.7428 18.9722 16C18.9722 18.6234 16.8456 20.75 14.2222 20.75H9.69444C7.11712 20.75 5.02778 18.6607 5.02778 16.0833V16C5.02778 15.5858 5.36356 15.25 5.77778 15.25C6.19199 15.25 6.52778 15.5858 6.52778 16V16.0833C6.52778 17.8322 7.94554 19.25 9.69444 19.25H14.2222C16.0171 19.25 17.4722 17.7949 17.4722 16C17.4722 14.2051 16.0171 12.75 14.2222 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H6.31366C5.5162 10.4003 5.02778 9.25721 5.02778 8Z"
  />
</svg>`,SJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M14.1819 3.27239C14.5837 3.37285 14.8281 3.78006 14.7276 4.1819L10.7276 20.1819C10.6271 20.5837 10.2199 20.8281 9.8181 20.7276C9.41625 20.6271 9.17193 20.2199 9.27239 19.8181L13.2724 3.8181C13.3729 3.41625 13.7801 3.17193 14.1819 3.27239ZM7.5511 7.49129C7.83206 7.79566 7.81308 8.27015 7.50871 8.5511L4.06145 11.7332L7.5496 15.4897C7.83145 15.7932 7.81387 16.2677 7.51034 16.5496C7.20681 16.8314 6.73226 16.8139 6.45041 16.5103L2.45041 12.2026C2.31479 12.0566 2.24289 11.8626 2.25056 11.6634C2.25823 11.4643 2.34485 11.2764 2.49129 11.1412L6.49129 7.4489C6.79566 7.16794 7.27015 7.18692 7.5511 7.49129ZM16.4489 7.49129C16.7299 7.18692 17.2043 7.16794 17.5087 7.4489L21.5087 11.1412C21.6552 11.2764 21.7418 11.4643 21.7494 11.6634C21.7571 11.8626 21.6852 12.0566 21.5496 12.2026L17.5496 16.5103C17.2677 16.8139 16.7932 16.8314 16.4897 16.5496C16.1861 16.2677 16.1686 15.7932 16.4504 15.4897L19.9386 11.7332L16.4913 8.5511C16.1869 8.27015 16.1679 7.79566 16.4489 7.49129Z"
  />
</svg>`,ER=dp`<path
  fill-rule="evenodd"
  clip-rule="evenodd"
  d="M12.8423 4.60675C14.6513 2.79775 17.5842 2.79775 19.3932 4.60676C21.2023 6.41576 21.2023 9.34874 19.3932 11.1577L17.3344 13.2166C17.0415 13.5095 16.5666 13.5095 16.2737 13.2166C15.9808 12.9237 15.9808 12.4489 16.2737 12.156L18.3326 10.0971C19.5558 8.87387 19.5558 6.89064 18.3326 5.66742C17.1094 4.4442 15.1261 4.44419 13.9029 5.66741L11.1577 8.41258C9.93453 9.6358 9.93453 11.619 11.1577 12.8423C11.3498 13.0343 11.5596 13.1955 11.7816 13.3266C12.1382 13.5373 12.2566 13.9971 12.046 14.3538C11.8353 14.7104 11.3754 14.8288 11.0188 14.6182C10.6891 14.4235 10.379 14.1849 10.0971 13.9029C8.28808 12.0939 8.28808 9.16093 10.0971 7.35192L12.8423 4.60675ZM11.954 9.64621C12.1647 9.28955 12.6246 9.17119 12.9812 9.38183C13.3109 9.57652 13.621 9.81515 13.9029 10.0971C15.7119 11.9061 15.7119 14.8391 13.9029 16.6481L11.1577 19.3932C9.34874 21.2023 6.41576 21.2023 4.60675 19.3932C2.79775 17.5842 2.79775 14.6513 4.60675 12.8423L6.66563 10.7834C6.95852 10.4905 7.4334 10.4905 7.72629 10.7834C8.01918 11.0763 8.01918 11.5511 7.72629 11.844L5.66741 13.9029C4.4442 15.1261 4.4442 17.1094 5.66742 18.3326C6.89064 19.5558 8.87387 19.5558 10.0971 18.3326L12.8423 15.5874C14.0655 14.3642 14.0655 12.381 12.8423 11.1577C12.6502 10.9657 12.4404 10.8045 12.2184 10.6734C11.8618 10.4627 11.7434 10.0029 11.954 9.64621Z"
/>`,kJ=hp(ER,20),_J=nk(ER),jb=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11.1696 3.25H16.8304C17.3646 3.24999 17.8104 3.24998 18.1747 3.27974C18.5546 3.31078 18.9112 3.37789 19.2485 3.54973C19.7659 3.81338 20.1866 4.23408 20.4503 4.75153C20.6221 5.08879 20.6892 5.44545 20.7203 5.82533C20.75 6.18956 20.75 6.6354 20.75 7.16955V12.8305C20.75 13.3646 20.75 13.8104 20.7203 14.1747C20.6892 14.5546 20.6221 14.9112 20.4503 15.2485C20.1866 15.7659 19.7659 16.1866 19.2485 16.4503C18.9112 16.6221 18.5546 16.6892 18.1747 16.7203C17.8104 16.75 17.3646 16.75 16.8305 16.75H16.75V16.8305C16.75 17.3646 16.75 17.8104 16.7203 18.1747C16.6892 18.5546 16.6221 18.9112 16.4503 19.2485C16.1866 19.7659 15.7659 20.1866 15.2485 20.4503C14.9112 20.6221 14.5546 20.6892 14.1747 20.7203C13.8104 20.75 13.3646 20.75 12.8305 20.75H7.16955C6.6354 20.75 6.18956 20.75 5.82533 20.7203C5.44545 20.6892 5.08879 20.6221 4.75153 20.4503C4.23408 20.1866 3.81338 19.7659 3.54973 19.2485C3.37789 18.9112 3.31078 18.5546 3.27974 18.1747C3.24998 17.8104 3.24999 17.3646 3.25 16.8304V11.1696C3.24999 10.6354 3.24998 10.1896 3.27974 9.82533C3.31078 9.44545 3.37789 9.08879 3.54973 8.75153C3.81338 8.23408 4.23408 7.81339 4.75153 7.54973C5.08879 7.37789 5.44545 7.31078 5.82533 7.27974C6.18957 7.24998 6.63542 7.24999 7.16957 7.25L7.25 7.25L7.25 7.16957C7.24999 6.63542 7.24998 6.18957 7.27974 5.82533C7.31078 5.44545 7.37789 5.08879 7.54973 4.75153C7.81339 4.23408 8.23408 3.81338 8.75153 3.54973C9.08879 3.37789 9.44545 3.31078 9.82533 3.27974C10.1896 3.24998 10.6354 3.24999 11.1696 3.25ZM7.25 8.75H7.2C6.62757 8.75 6.24336 8.75058 5.94748 8.77476C5.66036 8.79822 5.52307 8.8401 5.43251 8.88624C5.19731 9.00608 5.00608 9.19731 4.88624 9.43251C4.8401 9.52307 4.79822 9.66036 4.77476 9.94748C4.75058 10.2434 4.75 10.6276 4.75 11.2V16.8C4.75 17.3724 4.75058 17.7566 4.77476 18.0525C4.79822 18.3396 4.8401 18.4769 4.88624 18.5675C5.00608 18.8027 5.19731 18.9939 5.43251 19.1138C5.52307 19.1599 5.66036 19.2018 5.94748 19.2252C6.24336 19.2494 6.62757 19.25 7.2 19.25H12.8C13.3724 19.25 13.7566 19.2494 14.0525 19.2252C14.3396 19.2018 14.4769 19.1599 14.5675 19.1138C14.8027 18.9939 14.9939 18.8027 15.1138 18.5675C15.1599 18.4769 15.2018 18.3396 15.2252 18.0525C15.2494 17.7566 15.25 17.3724 15.25 16.8V16.75H11.1695C10.6354 16.75 10.1896 16.75 9.82533 16.7203C9.44545 16.6892 9.08879 16.6221 8.75153 16.4503C8.23408 16.1866 7.81339 15.7659 7.54973 15.2485C7.37789 14.9112 7.31078 14.5546 7.27974 14.1747C7.24998 13.8104 7.24999 13.3646 7.25 12.8304L7.25 8.75ZM11.2 15.25C10.6276 15.25 10.2434 15.2494 9.94748 15.2252C9.66036 15.2018 9.52307 15.1599 9.43251 15.1138C9.19731 14.9939 9.00608 14.8027 8.88624 14.5675C8.8401 14.4769 8.79822 14.3396 8.77476 14.0525C8.75058 13.7566 8.75 13.3724 8.75 12.8V7.2C8.75 6.62757 8.75058 6.24336 8.77476 5.94748C8.79822 5.66036 8.8401 5.52307 8.88624 5.43251C9.00608 5.19731 9.19731 5.00608 9.43251 4.88624C9.52307 4.8401 9.66036 4.79822 9.94748 4.77476C10.2434 4.75058 10.6276 4.75 11.2 4.75H16.8C17.3724 4.75 17.7566 4.75058 18.0525 4.77476C18.3396 4.79822 18.4769 4.8401 18.5675 4.88624C18.8027 5.00608 18.9939 5.19731 19.1138 5.43251C19.1599 5.52307 19.2018 5.66036 19.2252 5.94748C19.2494 6.24336 19.25 6.62757 19.25 7.2V12.8C19.25 13.3724 19.2494 13.7566 19.2252 14.0525C19.2018 14.3396 19.1599 14.4769 19.1138 14.5675C18.9939 14.8027 18.8027 14.9939 18.5675 15.1138C18.4769 15.1599 18.3396 15.2018 18.0525 15.2252C17.7566 15.2494 17.3724 15.25 16.8 15.25H11.2Z"
  />
</svg>`,EJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M11.25 9C11.25 9.41421 11.5858 9.75 12 9.75H13.1893L7.46967 15.4697C7.17678 15.7626 7.17678 16.2374 7.46967 16.5303C7.76256 16.8232 8.23744 16.8232 8.53033 16.5303L14.25 10.8107V12C14.25 12.4142 14.5858 12.75 15 12.75C15.4142 12.75 15.75 12.4142 15.75 12V9.1C15.75 9.08264 15.7495 9.0654 15.7485 9.04829C15.7618 8.84059 15.6891 8.62841 15.5303 8.46967C15.3716 8.31093 15.1594 8.23823 14.9517 8.25155C14.9346 8.25052 14.9174 8.25 14.9 8.25H12C11.5858 8.25 11.25 8.58579 11.25 9Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.8304 3.25H11.1696C10.6354 3.24999 10.1896 3.24998 9.82533 3.27974C9.44545 3.31078 9.08879 3.37789 8.75153 3.54973C8.23408 3.81338 7.81339 4.23408 7.54973 4.75153C7.37789 5.08879 7.31078 5.44545 7.27974 5.82533C7.24998 6.18956 7.24999 6.63541 7.25 7.16956L7.25 7.25L7.16957 7.25C6.63542 7.24999 6.18956 7.24998 5.82533 7.27974C5.44545 7.31078 5.08879 7.37789 4.75153 7.54973C4.23408 7.81339 3.81338 8.23408 3.54973 8.75153C3.37789 9.08879 3.31078 9.44545 3.27974 9.82533C3.24998 10.1896 3.24999 10.6354 3.25 11.1696V16.8304C3.24999 17.3646 3.24998 17.8104 3.27974 18.1747C3.31078 18.5546 3.37789 18.9112 3.54973 19.2485C3.81338 19.7659 4.23408 20.1866 4.75153 20.4503C5.08879 20.6221 5.44545 20.6892 5.82533 20.7203C6.18956 20.75 6.6354 20.75 7.16955 20.75H12.8305C13.3646 20.75 13.8104 20.75 14.1747 20.7203C14.5546 20.6892 14.9112 20.6221 15.2485 20.4503C15.7659 20.1866 16.1866 19.7659 16.4503 19.2485C16.6221 18.9112 16.6892 18.5546 16.7203 18.1747C16.75 17.8105 16.75 17.3646 16.75 16.8305V16.75H16.8305C17.3646 16.75 17.8105 16.75 18.1747 16.7203C18.5546 16.6892 18.9112 16.6221 19.2485 16.4503C19.7659 16.1866 20.1866 15.7659 20.4503 15.2485C20.6221 14.9112 20.6892 14.5546 20.7203 14.1747C20.75 13.8104 20.75 13.3646 20.75 12.8305V7.16955C20.75 6.6354 20.75 6.18956 20.7203 5.82533C20.6892 5.44545 20.6221 5.08879 20.4503 4.75153C20.1866 4.23408 19.7659 3.81338 19.2485 3.54973C18.9112 3.37789 18.5546 3.31078 18.1747 3.27974C17.8104 3.24998 17.3646 3.24999 16.8304 3.25ZM7.25 11V8.75H7.2C6.62757 8.75 6.24336 8.75058 5.94748 8.77476C5.66036 8.79822 5.52307 8.8401 5.43251 8.88624C5.19731 9.00608 5.00608 9.19731 4.88624 9.43251C4.8401 9.52307 4.79822 9.66036 4.77476 9.94748C4.75058 10.2434 4.75 10.6276 4.75 11.2V16.8C4.75 17.3724 4.75058 17.7566 4.77476 18.0525C4.79822 18.3396 4.8401 18.4769 4.88624 18.5675C5.00608 18.8027 5.19731 18.9939 5.43251 19.1138C5.52307 19.1599 5.66036 19.2018 5.94748 19.2252C6.24336 19.2494 6.62757 19.25 7.2 19.25H12.8C13.3724 19.25 13.7566 19.2494 14.0525 19.2252C14.3396 19.2018 14.4769 19.1599 14.5675 19.1138C14.8027 18.9939 14.9939 18.8027 15.1138 18.5675C15.1599 18.4769 15.2018 18.3396 15.2252 18.0525C15.2494 17.7566 15.25 17.3724 15.25 16.8V16.75H13C12.5858 16.75 12.25 16.4142 12.25 16C12.25 15.5858 12.5858 15.25 13 15.25H16.8C17.3724 15.25 17.7566 15.2494 18.0525 15.2252C18.3396 15.2018 18.4769 15.1599 18.5675 15.1138C18.8027 14.9939 18.9939 14.8027 19.1138 14.5675C19.1599 14.4769 19.2018 14.3396 19.2252 14.0525C19.2494 13.7566 19.25 13.3724 19.25 12.8V7.2C19.25 6.62757 19.2494 6.24336 19.2252 5.94748C19.2018 5.66036 19.1599 5.52307 19.1138 5.43251C18.9939 5.19731 18.8027 5.00608 18.5675 4.88624C18.4769 4.8401 18.3396 4.79822 18.0525 4.77476C17.7566 4.75058 17.3724 4.75 16.8 4.75H11.2C10.6276 4.75 10.2434 4.75058 9.94748 4.77476C9.66036 4.79822 9.52307 4.8401 9.43251 4.88624C9.19731 5.00608 9.00608 5.19731 8.88624 5.43251C8.8401 5.52307 8.79822 5.66036 8.77476 5.94748C8.75058 6.24336 8.75 6.62757 8.75 7.2V11C8.75 11.4142 8.41422 11.75 8 11.75C7.58579 11.75 7.25 11.4142 7.25 11Z"
  />
</svg>`,wm=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11.1799 2.24992C11.2215 2.24996 11.2637 2.25 11.3064 2.25H12.6936C12.7363 2.25 12.7785 2.24996 12.8201 2.24992C13.5245 2.24927 14.0767 2.24875 14.565 2.44082C14.9934 2.60932 15.3727 2.88268 15.668 3.23585C16.0047 3.6384 16.1788 4.1624 16.4009 4.83082C16.4141 4.87034 16.4274 4.91036 16.4409 4.9509L16.5406 5.25H20C20.4142 5.25 20.75 5.58579 20.75 6C20.75 6.41421 20.4142 6.75 20 6.75H18.75V16.2321C18.75 17.045 18.75 17.7006 18.7066 18.2315C18.662 18.7781 18.5676 19.2582 18.3413 19.7025C17.9817 20.4081 17.4081 20.9818 16.7025 21.3413C16.2582 21.5676 15.7781 21.662 15.2315 21.7066C14.7006 21.75 14.045 21.75 13.2321 21.75H10.7679C9.95505 21.75 9.29944 21.75 8.76853 21.7066C8.2219 21.662 7.74175 21.5676 7.29754 21.3413C6.59193 20.9818 6.01825 20.4081 5.65873 19.7025C5.43238 19.2582 5.33803 18.7781 5.29336 18.2315C5.24999 17.7006 5.24999 17.0449 5.25 16.2321L5.25 6.75H4C3.58579 6.75 3.25 6.41421 3.25 6C3.25 5.58579 3.58579 5.25 4 5.25H7.45943L7.55913 4.9509C7.57264 4.91036 7.58594 4.87034 7.59908 4.83081C7.82119 4.1624 7.99532 3.6384 8.33195 3.23585C8.62729 2.88269 9.00657 2.60932 9.435 2.44082C9.92335 2.24875 10.4755 2.24927 11.1799 2.24992ZM7.9827 6.75C7.99433 6.75027 8.00594 6.75027 8.01751 6.75H15.9825C15.9941 6.75027 16.0057 6.75027 16.0173 6.75H17.25V16.2C17.25 17.0525 17.2494 17.6467 17.2116 18.1093C17.1745 18.5632 17.1054 18.824 17.0048 19.0215C16.7891 19.4448 16.4448 19.789 16.0215 20.0048C15.824 20.1054 15.5632 20.1745 15.1093 20.2116C14.6467 20.2494 14.0525 20.25 13.2 20.25H10.8C9.94755 20.25 9.35331 20.2494 8.89068 20.2116C8.4368 20.1745 8.17604 20.1054 7.97852 20.0048C7.55516 19.789 7.21095 19.4448 6.99524 19.0215C6.8946 18.824 6.82546 18.5632 6.78838 18.1093C6.75058 17.6467 6.75 17.0525 6.75 16.2V6.75H7.9827ZM14.9592 5.25H9.0408C9.27769 4.54546 9.36214 4.34218 9.48262 4.19811C9.61687 4.03758 9.78927 3.91333 9.98401 3.83674C10.1725 3.76261 10.4131 3.75 11.3064 3.75H12.6936C13.5869 3.75 13.8275 3.76261 14.016 3.83674C14.2107 3.91333 14.3831 4.03759 14.5174 4.19811C14.6379 4.34218 14.7223 4.54546 14.9592 5.25ZM10 9.25C10.4142 9.25 10.75 9.58579 10.75 10V17C10.75 17.4142 10.4142 17.75 10 17.75C9.58579 17.75 9.25 17.4142 9.25 17V10C9.25 9.58579 9.58579 9.25 10 9.25ZM14 9.25C14.4142 9.25 14.75 9.58579 14.75 10V17C14.75 17.4142 14.4142 17.75 14 17.75C13.5858 17.75 13.25 17.4142 13.25 17V10C13.25 9.58579 13.5858 9.25 14 9.25Z"
  />
</svg>`,PJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M8.5 13.75C8.5 13.3358 8.16421 13 7.75 13C7.33579 13 7 13.3358 7 13.75L7 15.25C7 15.6642 7.33579 16 7.75 16C8.16421 16 8.5 15.6642 8.5 15.25V13.75Z"
  />
  <path
    d="M12 11C12.4142 11 12.75 11.3358 12.75 11.75V17.25C12.75 17.6642 12.4142 18 12 18C11.5858 18 11.25 17.6642 11.25 17.25V11.75C11.25 11.3358 11.5858 11 12 11Z"
  />
  <path
    d="M15.5 15.25C15.5 15.6642 15.8358 16 16.25 16C16.6642 16 17 15.6642 17 15.25V13.75C17 13.3358 16.6642 13 16.25 13C15.8358 13 15.5 13.3358 15.5 13.75V15.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.30556 4C8.30556 3.58579 7.96977 3.25 7.55556 3.25C7.14134 3.25 6.80556 3.58579 6.80556 4V5.02778C6.33711 5.02777 5.94085 5.02793 5.61573 5.05449C5.2729 5.0825 4.94369 5.14356 4.63019 5.30329C4.15456 5.54564 3.76786 5.93234 3.52551 6.40797C3.36578 6.72146 3.30472 7.05068 3.27671 7.39351C3.24998 7.72071 3.24999 8.11996 3.25 8.59235V17.1854C3.24999 17.6578 3.24998 18.0571 3.27671 18.3843C3.30472 18.7271 3.36578 19.0563 3.52551 19.3698C3.76786 19.8454 4.15456 20.2321 4.63019 20.4745C4.94369 20.6342 5.2729 20.6953 5.61573 20.7233C5.94291 20.75 6.34214 20.75 6.81449 20.75H17.1854C17.6578 20.75 18.0571 20.75 18.3843 20.7233C18.7271 20.6953 19.0563 20.6342 19.3698 20.4745C19.8454 20.2321 20.2321 19.8454 20.4745 19.3698C20.6342 19.0563 20.6953 18.7271 20.7233 18.3843C20.75 18.0571 20.75 17.6579 20.75 17.1855V8.59236C20.75 8.12001 20.75 7.72069 20.7233 7.39351C20.6953 7.05068 20.6342 6.72146 20.4745 6.40797C20.2321 5.93234 19.8454 5.54564 19.3698 5.30329C19.0563 5.14356 18.7271 5.0825 18.3843 5.05449C18.0592 5.02793 17.6629 5.02777 17.1944 5.02778V4C17.1944 3.58579 16.8587 3.25 16.4444 3.25C16.0302 3.25 15.6944 3.58579 15.6944 4V5.02778H8.30556V4ZM5.73788 6.54951C5.9967 6.52836 6.33425 6.52778 6.84445 6.52778H17.1556C17.6658 6.52778 18.0033 6.52836 18.2621 6.54951C18.5122 6.56994 18.622 6.60577 18.6888 6.6398C18.8822 6.73833 19.0394 6.89556 19.138 7.08895C19.172 7.15575 19.2078 7.26559 19.2283 7.51566C19.2489 7.76785 19.25 8.09477 19.25 8.58333H4.75C4.75004 8.09477 4.75113 7.76785 4.77173 7.51566C4.79216 7.26559 4.82799 7.15575 4.86202 7.08895C4.96056 6.89557 5.11779 6.73834 5.31118 6.6398C5.37797 6.60577 5.48781 6.56994 5.73788 6.54951ZM4.75 10.0833H19.25V17.1556C19.25 17.6658 19.2494 18.0033 19.2283 18.2621C19.2078 18.5122 19.172 18.622 19.138 18.6888C19.0394 18.8822 18.8822 19.0394 18.6888 19.138C18.622 19.172 18.5122 19.2078 18.2621 19.2283C18.0033 19.2494 17.6658 19.25 17.1556 19.25H6.84445C6.33425 19.25 5.9967 19.2494 5.73788 19.2283C5.48781 19.2078 5.37797 19.172 5.31118 19.138C5.11779 19.0394 4.96056 18.8822 4.86202 18.6888C4.82799 18.622 4.79216 18.5122 4.77173 18.2621C4.75058 18.0033 4.75 17.6658 4.75 17.1556V10.0833Z"
  />
</svg>`,MJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M8.5 13.75C8.5 13.3358 8.16421 13 7.75 13C7.33579 13 7 13.3358 7 13.75L7 15.25C7 15.6642 7.33579 16 7.75 16C8.16421 16 8.5 15.6642 8.5 15.25V13.75Z"
  />
  <path
    d="M12 13C12.4142 13 12.75 13.3358 12.75 13.75V15.25C12.75 15.6642 12.4142 16 12 16C11.5858 16 11.25 15.6642 11.25 15.25V13.75C11.25 13.3358 11.5858 13 12 13Z"
  />
  <path
    d="M15.5 17.25C15.5 17.6642 15.8358 18 16.25 18C16.6642 18 17 17.6642 17 17.25V11.75C17 11.3358 16.6642 11 16.25 11C15.8358 11 15.5 11.3358 15.5 11.75V17.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.30556 4C8.30556 3.58579 7.96977 3.25 7.55556 3.25C7.14134 3.25 6.80556 3.58579 6.80556 4V5.02778C6.33711 5.02777 5.94085 5.02793 5.61573 5.05449C5.2729 5.0825 4.94369 5.14356 4.63019 5.30329C4.15456 5.54564 3.76786 5.93234 3.52551 6.40797C3.36578 6.72146 3.30472 7.05068 3.27671 7.39351C3.24998 7.72071 3.24999 8.11996 3.25 8.59235V17.1854C3.24999 17.6578 3.24998 18.0571 3.27671 18.3843C3.30472 18.7271 3.36578 19.0563 3.52551 19.3698C3.76786 19.8454 4.15456 20.2321 4.63019 20.4745C4.94369 20.6342 5.2729 20.6953 5.61573 20.7233C5.94291 20.75 6.34214 20.75 6.81449 20.75H17.1854C17.6578 20.75 18.0571 20.75 18.3843 20.7233C18.7271 20.6953 19.0563 20.6342 19.3698 20.4745C19.8454 20.2321 20.2321 19.8454 20.4745 19.3698C20.6342 19.0563 20.6953 18.7271 20.7233 18.3843C20.75 18.0571 20.75 17.6579 20.75 17.1855V8.59236C20.75 8.12001 20.75 7.72069 20.7233 7.39351C20.6953 7.05068 20.6342 6.72146 20.4745 6.40797C20.2321 5.93234 19.8454 5.54564 19.3698 5.30329C19.0563 5.14356 18.7271 5.0825 18.3843 5.05449C18.0592 5.02793 17.6629 5.02777 17.1944 5.02778V4C17.1944 3.58579 16.8587 3.25 16.4444 3.25C16.0302 3.25 15.6944 3.58579 15.6944 4V5.02778H8.30556V4ZM5.73788 6.54951C5.9967 6.52836 6.33425 6.52778 6.84445 6.52778H17.1556C17.6658 6.52778 18.0033 6.52836 18.2621 6.54951C18.5122 6.56994 18.622 6.60577 18.6888 6.6398C18.8822 6.73833 19.0394 6.89556 19.138 7.08895C19.172 7.15575 19.2078 7.26559 19.2283 7.51566C19.2489 7.76785 19.25 8.09477 19.25 8.58333H4.75C4.75004 8.09477 4.75113 7.76785 4.77173 7.51566C4.79216 7.26559 4.82799 7.15575 4.86202 7.08895C4.96056 6.89557 5.11779 6.73834 5.31118 6.6398C5.37797 6.60577 5.48781 6.56994 5.73788 6.54951ZM4.75 10.0833H19.25V17.1556C19.25 17.6658 19.2494 18.0033 19.2283 18.2621C19.2078 18.5122 19.172 18.622 19.138 18.6888C19.0394 18.8822 18.8822 19.0394 18.6888 19.138C18.622 19.172 18.5122 19.2078 18.2621 19.2283C18.0033 19.2494 17.6658 19.25 17.1556 19.25H6.84445C6.33425 19.25 5.9967 19.2494 5.73788 19.2283C5.48781 19.2078 5.37797 19.172 5.31118 19.138C5.11779 19.0394 4.96056 18.8822 4.86202 18.6888C4.82799 18.622 4.79216 18.5122 4.77173 18.2621C4.75058 18.0033 4.75 17.6658 4.75 17.1556V10.0833Z"
  />
</svg>`,IJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.55556 3.25C7.96977 3.25 8.30556 3.58579 8.30556 4V5.02778H15.6944V4C15.6944 3.58579 16.0302 3.25 16.4444 3.25C16.8587 3.25 17.1944 3.58579 17.1944 4V5.02778C17.6629 5.02777 18.0592 5.02793 18.3843 5.05449C18.7271 5.0825 19.0563 5.14356 19.3698 5.30329C19.8454 5.54564 20.2321 5.93234 20.4745 6.40797C20.6342 6.72146 20.6953 7.05068 20.7233 7.39351C20.75 7.72071 20.75 8.11997 20.75 8.59236V17.1854C20.75 17.6578 20.75 18.0571 20.7233 18.3843C20.6953 18.7271 20.6342 19.0563 20.4745 19.3698C20.2321 19.8454 19.8454 20.2321 19.3698 20.4745C19.0563 20.6342 18.7271 20.6953 18.3843 20.7233C18.0571 20.75 17.6578 20.75 17.1854 20.75H6.81458C6.34219 20.75 5.94293 20.75 5.61573 20.7233C5.2729 20.6953 4.94369 20.6342 4.63019 20.4745C4.15456 20.2321 3.76786 19.8454 3.52551 19.3698C3.36578 19.0563 3.30472 18.7271 3.27671 18.3843C3.24998 18.0571 3.24999 17.6578 3.25 17.1854V8.59238C3.24999 8.11998 3.24998 7.72071 3.27671 7.39351C3.30472 7.05068 3.36578 6.72146 3.52551 6.40797C3.76786 5.93234 4.15456 5.54564 4.63019 5.30329C4.94369 5.14356 5.2729 5.0825 5.61573 5.05449C5.94085 5.02793 6.33711 5.02777 6.80556 5.02778V4C6.80556 3.58579 7.14134 3.25 7.55556 3.25ZM6.84445 6.52778C6.33425 6.52778 5.9967 6.52836 5.73788 6.54951C5.48781 6.56994 5.37797 6.60577 5.31118 6.6398C5.11779 6.73834 4.96056 6.89557 4.86202 7.08895C4.82799 7.15575 4.79216 7.26559 4.77173 7.51566C4.75113 7.76785 4.75004 8.09477 4.75 8.58333H19.25C19.25 8.09477 19.2489 7.76785 19.2283 7.51566C19.2078 7.26559 19.172 7.15575 19.138 7.08895C19.0394 6.89556 18.8822 6.73833 18.6888 6.6398C18.622 6.60577 18.5122 6.56994 18.2621 6.54951C18.0033 6.52836 17.6658 6.52778 17.1556 6.52778H6.84445ZM19.25 10.0833H4.75V17.1556C4.75 17.6658 4.75058 18.0033 4.77173 18.2621C4.79216 18.5122 4.82799 18.622 4.86202 18.6888C4.96056 18.8822 5.11779 19.0394 5.31118 19.138C5.37797 19.172 5.48781 19.2078 5.73788 19.2283C5.9967 19.2494 6.33425 19.25 6.84445 19.25H17.1556C17.6658 19.25 18.0033 19.2494 18.2621 19.2283C18.5122 19.2078 18.622 19.172 18.6888 19.138C18.8822 19.0394 19.0394 18.8822 19.138 18.6888C19.172 18.622 19.2078 18.5122 19.2283 18.2621C19.2494 18.0033 19.25 17.6658 19.25 17.1556V10.0833Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M16.25 13C15.8358 13 15.5 13.3358 15.5 13.75V15.25C15.5 15.6642 15.8358 16 16.25 16C16.6642 16 17 15.6642 17 15.25V13.75C17 13.3358 16.6642 13 16.25 13Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12 13C11.5858 13 11.25 13.3358 11.25 13.75V15.25C11.25 15.6642 11.5858 16 12 16C12.4142 16 12.75 15.6642 12.75 15.25V13.75C12.75 13.3358 12.4142 13 12 13Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.75 18C8.16421 18 8.5 17.6642 8.5 17.25L8.5 11.75C8.5 11.3358 8.16421 11 7.75 11C7.33579 11 7 11.3358 7 11.75L7 17.25C7 17.6642 7.33579 18 7.75 18Z"
  />
</svg>`,TJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.11366 3.678C6.40656 3.9709 6.40656 4.44577 6.11366 4.73866L4.28033 6.572C3.98744 6.86489 3.51256 6.86489 3.21967 6.572C2.92678 6.2791 2.92678 5.80423 3.21967 5.51134L5.053 3.678C5.3459 3.38511 5.82077 3.38511 6.11366 3.678ZM17.8863 3.678C18.1792 3.38511 18.6541 3.38511 18.947 3.678L20.7803 5.51134C21.0732 5.80423 21.0732 6.2791 20.7803 6.572C20.4874 6.86489 20.0126 6.86489 19.7197 6.572L17.8863 4.73866C17.5934 4.44577 17.5934 3.9709 17.8863 3.678ZM12 5.875C8.36413 5.875 5.41667 8.82246 5.41667 12.4583C5.41667 16.0942 8.36413 19.0417 12 19.0417C15.6359 19.0417 18.5833 16.0942 18.5833 12.4583C18.5833 8.82246 15.6359 5.875 12 5.875ZM3.91667 12.4583C3.91667 7.99403 7.5357 4.375 12 4.375C16.4643 4.375 20.0833 7.99403 20.0833 12.4583C20.0833 16.9226 16.4643 20.5417 12 20.5417C7.5357 20.5417 3.91667 16.9226 3.91667 12.4583Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M15.197 10.3586C15.4899 10.6515 15.4899 11.1264 15.197 11.4192L11.6415 14.9748C11.3486 15.2677 10.8737 15.2677 10.5808 14.9748L8.80301 13.197C8.51012 12.9041 8.51012 12.4293 8.80301 12.1364C9.09591 11.8435 9.57078 11.8435 9.86367 12.1364L11.1111 13.3838L14.1363 10.3586C14.4292 10.0657 14.9041 10.0657 15.197 10.3586Z"
  />
</svg>`,OJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.34315 6.34314C6.63604 6.05025 7.11091 6.05025 7.40381 6.34314L12 10.9393L16.5962 6.34314C16.8891 6.05025 17.364 6.05025 17.6569 6.34314C17.9497 6.63604 17.9497 7.11091 17.6569 7.4038L13.0607 12L17.6569 16.5962C17.9497 16.8891 17.9497 17.364 17.6569 17.6569C17.364 17.9497 16.8891 17.9497 16.5962 17.6569L12 13.0607L7.40381 17.6569C7.11091 17.9497 6.63604 17.9497 6.34315 17.6569C6.05025 17.364 6.05025 16.8891 6.34315 16.5962L10.9393 12L6.34315 7.4038C6.05025 7.11091 6.05025 6.63604 6.34315 6.34314Z"
  />
</svg>`,AJ=dp`<path
  fill-rule="evenodd"
  clip-rule="evenodd"
  d="M5.57378 3.25C5.5825 3.25 5.59124 3.25 5.6 3.25L8.42622 3.25C8.68371 3.24998 8.92019 3.24996 9.11787 3.26612C9.33101 3.28353 9.56418 3.32339 9.79449 3.44074C10.1238 3.60852 10.3915 3.87623 10.5593 4.20552C10.6766 4.43582 10.7165 4.669 10.7339 4.88213C10.75 5.07982 10.75 5.3163 10.75 5.57379V8.42621C10.75 8.6837 10.75 8.92019 10.7339 9.11787C10.7165 9.33101 10.6766 9.56418 10.5593 9.79448C10.3915 10.1238 10.1238 10.3915 9.79449 10.5593C9.56418 10.6766 9.33101 10.7165 9.11787 10.7339C8.92019 10.75 8.6837 10.75 8.42622 10.75H5.57379C5.3163 10.75 5.07982 10.75 4.88213 10.7339C4.669 10.7165 4.43583 10.6766 4.20552 10.5593C3.87624 10.3915 3.60852 10.1238 3.44074 9.79448C3.32339 9.56418 3.28353 9.33101 3.26612 9.11787C3.24997 8.92019 3.24998 8.6837 3.25 8.42622L3.25 5.6C3.25 5.59124 3.25 5.5825 3.25 5.57378C3.24998 5.3163 3.24997 5.07981 3.26612 4.88213C3.28353 4.669 3.32339 4.43582 3.44074 4.20552C3.60852 3.87623 3.87624 3.60852 4.20552 3.44074C4.43583 3.32339 4.669 3.28353 4.88213 3.26612C5.07982 3.24996 5.3163 3.24998 5.57378 3.25ZM4.88088 4.77973C4.88085 4.77972 4.88132 4.77952 4.88239 4.77917L4.88088 4.77973ZM4.88346 4.77882C4.89234 4.77607 4.92547 4.76757 5.00428 4.76113C5.13341 4.75058 5.3076 4.75 5.6 4.75H8.4C8.6924 4.75 8.8666 4.75058 8.99573 4.76113C9.07454 4.76757 9.10766 4.77607 9.11654 4.77882C9.16118 4.80234 9.19766 4.83882 9.22118 4.88346C9.22393 4.89234 9.23243 4.92547 9.23887 5.00428C9.24942 5.1334 9.25 5.3076 9.25 5.6V8.4C9.25 8.6924 9.24942 8.8666 9.23887 8.99572C9.23243 9.07453 9.22393 9.10766 9.22118 9.11654C9.19766 9.16118 9.16118 9.19766 9.11654 9.22118C9.10767 9.22393 9.07454 9.23243 8.99573 9.23887C8.8666 9.24942 8.6924 9.25 8.4 9.25H5.6C5.3076 9.25 5.13341 9.24942 5.00428 9.23887C4.92547 9.23243 4.89234 9.22393 4.88347 9.22118C4.83883 9.19766 4.80235 9.16118 4.77883 9.11654C4.77607 9.10766 4.76757 9.07453 4.76114 8.99572C4.75059 8.8666 4.75 8.6924 4.75 8.4V5.6C4.75 5.3076 4.75059 5.1334 4.76114 5.00428C4.76757 4.92547 4.77607 4.89234 4.77883 4.88346C4.80235 4.83882 4.83883 4.80234 4.88346 4.77882ZM4.77973 4.88088C4.77974 4.8809 4.77956 4.88144 4.77917 4.88239L4.77973 4.88088ZM4.77973 9.11913C4.77972 9.11915 4.77953 9.11869 4.77918 9.11764L4.77973 9.11913ZM4.88088 9.22027C4.88091 9.22026 4.88143 9.22044 4.88236 9.22082L4.88088 9.22027ZM9.11913 9.22027C9.11916 9.22028 9.11869 9.22048 9.11764 9.22082L9.11913 9.22027ZM9.22028 9.11913C9.22027 9.11909 9.22044 9.11856 9.22084 9.11761L9.22028 9.11913ZM9.22028 4.88088C9.22029 4.88085 9.22048 4.88132 9.22084 4.88239L9.22028 4.88088ZM9.11764 4.77918C9.11869 4.77952 9.11916 4.77972 9.11913 4.77973L9.11764 4.77918ZM15.5738 3.25H18.4262C18.6837 3.24998 18.9202 3.24996 19.1179 3.26612C19.331 3.28353 19.5642 3.32339 19.7945 3.44074C20.1238 3.60852 20.3915 3.87623 20.5593 4.20552C20.6766 4.43582 20.7165 4.669 20.7339 4.88213C20.75 5.07981 20.75 5.31629 20.75 5.57377V8.42623C20.75 8.68371 20.75 8.92019 20.7339 9.11787C20.7165 9.33101 20.6766 9.56418 20.5593 9.79448C20.3915 10.1238 20.1238 10.3915 19.7945 10.5593C19.5642 10.6766 19.331 10.7165 19.1179 10.7339C18.9202 10.75 18.6837 10.75 18.4262 10.75H15.5738C15.3163 10.75 15.0798 10.75 14.8821 10.7339C14.669 10.7165 14.4358 10.6766 14.2055 10.5593C13.8762 10.3915 13.6085 10.1238 13.4407 9.79448C13.3234 9.56418 13.2835 9.33101 13.2661 9.11787C13.25 8.92019 13.25 8.68371 13.25 8.42623V5.57377C13.25 5.31629 13.25 5.07981 13.2661 4.88213C13.2835 4.669 13.3234 4.43582 13.4407 4.20552C13.6085 3.87623 13.8762 3.60852 14.2055 3.44074C14.4358 3.32339 14.669 3.28353 14.8821 3.26612C15.0798 3.24996 15.3163 3.24998 15.5738 3.25ZM14.8809 4.77973C14.8808 4.77972 14.8813 4.77953 14.8824 4.77918L14.8809 4.77973ZM14.8835 4.77882C14.8923 4.77607 14.9255 4.76757 15.0043 4.76113C15.1334 4.75058 15.3076 4.75 15.6 4.75H18.4C18.6924 4.75 18.8666 4.75058 18.9957 4.76113C19.0745 4.76757 19.1077 4.77607 19.1165 4.77882C19.1612 4.80234 19.1977 4.83882 19.2212 4.88346C19.2239 4.89234 19.2324 4.92547 19.2389 5.00428C19.2494 5.1334 19.25 5.3076 19.25 5.6V8.4C19.25 8.6924 19.2494 8.8666 19.2389 8.99572C19.2324 9.07453 19.2239 9.10766 19.2212 9.11654C19.1977 9.16118 19.1612 9.19766 19.1165 9.22118C19.1077 9.22393 19.0745 9.23243 18.9957 9.23887C18.8666 9.24942 18.6924 9.25 18.4 9.25H15.6C15.3076 9.25 15.1334 9.24942 15.0043 9.23887C14.9255 9.23243 14.8923 9.22393 14.8835 9.22118C14.8388 9.19766 14.8023 9.16118 14.7788 9.11654C14.7761 9.10766 14.7676 9.07453 14.7611 8.99572C14.7506 8.8666 14.75 8.6924 14.75 8.4V5.6C14.75 5.3076 14.7506 5.1334 14.7611 5.00428C14.7676 4.92547 14.7761 4.89234 14.7788 4.88346C14.8023 4.83882 14.8388 4.80234 14.8835 4.77882ZM14.7797 4.88088C14.7797 4.8809 14.7796 4.88143 14.7792 4.88236L14.7797 4.88088ZM14.7797 9.11913C14.7797 9.11915 14.7795 9.11867 14.7792 9.11761L14.7797 9.11913ZM14.8809 9.22027C14.8809 9.22026 14.8814 9.22044 14.8824 9.22082L14.8809 9.22027ZM19.1191 9.22027C19.1192 9.22028 19.1187 9.22048 19.1176 9.22082L19.1191 9.22027ZM19.2203 9.11913C19.2203 9.11911 19.2204 9.11857 19.2208 9.11761L19.2203 9.11913ZM19.2203 4.88088C19.2203 4.88085 19.2205 4.88131 19.2208 4.88236L19.2203 4.88088ZM19.1176 4.77917C19.1187 4.77952 19.1192 4.77972 19.1191 4.77973L19.1176 4.77917ZM5.57377 13.25H8.42623C8.68372 13.25 8.92019 13.25 9.11787 13.2661C9.33101 13.2835 9.56418 13.3234 9.79449 13.4407C10.1238 13.6085 10.3915 13.8762 10.5593 14.2055C10.6766 14.4358 10.7165 14.669 10.7339 14.8821C10.75 15.0798 10.75 15.3163 10.75 15.5738V18.4262C10.75 18.6837 10.75 18.9202 10.7339 19.1179C10.7165 19.331 10.6766 19.5642 10.5593 19.7945C10.3915 20.1238 10.1238 20.3915 9.79449 20.5593C9.56418 20.6766 9.33101 20.7165 9.11787 20.7339C8.92019 20.75 8.68372 20.75 8.42623 20.75H5.57377C5.31629 20.75 5.07981 20.75 4.88213 20.7339C4.669 20.7165 4.43583 20.6766 4.20552 20.5593C3.87624 20.3915 3.60852 20.1238 3.44074 19.7945C3.32339 19.5642 3.28353 19.331 3.26612 19.1179C3.24997 18.9202 3.24998 18.6837 3.25 18.4262V15.5738C3.24998 15.3163 3.24997 15.0798 3.26612 14.8821C3.28353 14.669 3.32339 14.4358 3.44074 14.2055C3.60852 13.8762 3.87624 13.6085 4.20552 13.4407C4.43583 13.3234 4.669 13.2835 4.88213 13.2661C5.07981 13.25 5.31629 13.25 5.57377 13.25ZM4.88088 14.7797C4.88085 14.7797 4.88131 14.7795 4.88237 14.7792L4.88088 14.7797ZM4.88346 14.7788C4.89234 14.7761 4.92546 14.7676 5.00428 14.7611C5.13341 14.7506 5.3076 14.75 5.6 14.75H8.4C8.6924 14.75 8.8666 14.7506 8.99573 14.7611C9.07453 14.7676 9.10766 14.7761 9.11654 14.7788C9.16118 14.8023 9.19766 14.8388 9.22118 14.8835C9.22393 14.8923 9.23243 14.9255 9.23887 15.0043C9.24942 15.1334 9.25 15.3076 9.25 15.6V18.4C9.25 18.6924 9.24942 18.8666 9.23887 18.9957C9.23243 19.0745 9.22393 19.1077 9.22118 19.1165C9.19766 19.1612 9.16118 19.1977 9.11654 19.2212C9.10767 19.2239 9.07454 19.2324 8.99573 19.2389C8.8666 19.2494 8.6924 19.25 8.4 19.25H5.6C5.3076 19.25 5.13341 19.2494 5.00428 19.2389C4.92547 19.2324 4.89235 19.2239 4.88347 19.2212C4.83883 19.1977 4.80235 19.1612 4.77883 19.1165C4.77607 19.1077 4.76757 19.0745 4.76114 18.9957C4.75059 18.8666 4.75 18.6924 4.75 18.4V15.6C4.75 15.3076 4.75059 15.1334 4.76114 15.0043C4.76757 14.9255 4.77607 14.8923 4.77883 14.8835C4.80234 14.8388 4.83882 14.8023 4.88346 14.7788ZM4.77973 14.8809C4.77974 14.8809 4.77956 14.8814 4.77918 14.8824L4.77973 14.8809ZM4.77973 19.1191C4.77972 19.1192 4.77953 19.1187 4.77918 19.1176L4.77973 19.1191ZM4.88088 19.2203C4.8809 19.2203 4.88143 19.2204 4.88236 19.2208L4.88088 19.2203ZM9.11913 19.2203C9.11917 19.2203 9.1187 19.2205 9.11762 19.2208L9.11913 19.2203ZM9.22028 19.1191C9.22026 19.1191 9.22044 19.1185 9.22087 19.1175L9.22028 19.1191ZM9.22027 14.8809C9.22028 14.8808 9.22048 14.8813 9.22084 14.8824L9.22027 14.8809ZM9.11761 14.7792C9.11868 14.7795 9.11915 14.7797 9.11913 14.7797L9.11761 14.7792ZM17 13.25C17.4142 13.25 17.75 13.5858 17.75 14V16.25H20C20.4142 16.25 20.75 16.5858 20.75 17C20.75 17.4142 20.4142 17.75 20 17.75H17.75V20C17.75 20.4142 17.4142 20.75 17 20.75C16.5858 20.75 16.25 20.4142 16.25 20V17.75H14C13.5858 17.75 13.25 17.4142 13.25 17C13.25 16.5858 13.5858 16.25 14 16.25H16.25V14C16.25 13.5858 16.5858 13.25 17 13.25Z"
/>`,LJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  ${AJ}
</svg>`,$J=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.57378 3.25C5.5825 3.25 5.59124 3.25 5.6 3.25L8.42622 3.25C8.68371 3.24998 8.92019 3.24996 9.11787 3.26612C9.33101 3.28353 9.56418 3.32339 9.79449 3.44074C10.1238 3.60852 10.3915 3.87623 10.5593 4.20552C10.6766 4.43582 10.7165 4.669 10.7339 4.88213C10.75 5.07982 10.75 5.3163 10.75 5.57379V8.42621C10.75 8.6837 10.75 8.92019 10.7339 9.11787C10.7165 9.33101 10.6766 9.56418 10.5593 9.79448C10.3915 10.1238 10.1238 10.3915 9.79449 10.5593C9.56418 10.6766 9.33101 10.7165 9.11787 10.7339C8.92019 10.75 8.6837 10.75 8.42622 10.75H5.57379C5.3163 10.75 5.07982 10.75 4.88213 10.7339C4.669 10.7165 4.43583 10.6766 4.20552 10.5593C3.87624 10.3915 3.60852 10.1238 3.44074 9.79448C3.32339 9.56418 3.28353 9.33101 3.26612 9.11787C3.24997 8.92019 3.24998 8.6837 3.25 8.42622L3.25 5.6C3.25 5.59124 3.25 5.5825 3.25 5.57378C3.24998 5.3163 3.24997 5.07981 3.26612 4.88213C3.28353 4.669 3.32339 4.43582 3.44074 4.20552C3.60852 3.87623 3.87624 3.60852 4.20552 3.44074C4.43583 3.32339 4.669 3.28353 4.88213 3.26612C5.07982 3.24996 5.3163 3.24998 5.57378 3.25ZM4.88088 4.77973C4.88085 4.77972 4.88132 4.77952 4.88239 4.77917L4.88088 4.77973ZM4.88346 4.77882C4.89234 4.77607 4.92547 4.76757 5.00428 4.76113C5.13341 4.75058 5.3076 4.75 5.6 4.75H8.4C8.6924 4.75 8.8666 4.75058 8.99573 4.76113C9.07454 4.76757 9.10766 4.77607 9.11654 4.77882C9.16118 4.80234 9.19766 4.83882 9.22118 4.88346C9.22393 4.89234 9.23243 4.92547 9.23887 5.00428C9.24942 5.1334 9.25 5.3076 9.25 5.6V8.4C9.25 8.6924 9.24942 8.8666 9.23887 8.99572C9.23243 9.07453 9.22393 9.10766 9.22118 9.11654C9.19766 9.16118 9.16118 9.19766 9.11654 9.22118C9.10767 9.22393 9.07454 9.23243 8.99573 9.23887C8.8666 9.24942 8.6924 9.25 8.4 9.25H5.6C5.3076 9.25 5.13341 9.24942 5.00428 9.23887C4.92547 9.23243 4.89234 9.22393 4.88347 9.22118C4.83883 9.19766 4.80235 9.16118 4.77883 9.11654C4.77607 9.10766 4.76757 9.07453 4.76114 8.99572C4.75059 8.8666 4.75 8.6924 4.75 8.4V5.6C4.75 5.3076 4.75059 5.1334 4.76114 5.00428C4.76757 4.92547 4.77607 4.89234 4.77883 4.88346C4.80235 4.83882 4.83883 4.80234 4.88346 4.77882ZM4.77973 4.88088C4.77974 4.8809 4.77956 4.88144 4.77917 4.88239L4.77973 4.88088ZM4.77973 9.11913C4.77972 9.11915 4.77953 9.11869 4.77918 9.11764L4.77973 9.11913ZM4.88088 9.22027C4.88091 9.22026 4.88143 9.22044 4.88236 9.22082L4.88088 9.22027ZM9.11913 9.22027C9.11916 9.22028 9.11869 9.22048 9.11764 9.22082L9.11913 9.22027ZM9.22028 9.11913C9.22027 9.11909 9.22044 9.11856 9.22084 9.11761L9.22028 9.11913ZM9.22028 4.88088C9.22029 4.88085 9.22048 4.88132 9.22084 4.88239L9.22028 4.88088ZM9.11764 4.77918C9.11869 4.77952 9.11916 4.77972 9.11913 4.77973L9.11764 4.77918ZM15.5738 3.25H18.4262C18.6837 3.24998 18.9202 3.24996 19.1179 3.26612C19.331 3.28353 19.5642 3.32339 19.7945 3.44074C20.1238 3.60852 20.3915 3.87623 20.5593 4.20552C20.6766 4.43582 20.7165 4.669 20.7339 4.88213C20.75 5.07981 20.75 5.31629 20.75 5.57377V8.42623C20.75 8.68371 20.75 8.92019 20.7339 9.11787C20.7165 9.33101 20.6766 9.56418 20.5593 9.79448C20.3915 10.1238 20.1238 10.3915 19.7945 10.5593C19.5642 10.6766 19.331 10.7165 19.1179 10.7339C18.9202 10.75 18.6837 10.75 18.4262 10.75H15.5738C15.3163 10.75 15.0798 10.75 14.8821 10.7339C14.669 10.7165 14.4358 10.6766 14.2055 10.5593C13.8762 10.3915 13.6085 10.1238 13.4407 9.79448C13.3234 9.56418 13.2835 9.33101 13.2661 9.11787C13.25 8.92019 13.25 8.68371 13.25 8.42623V5.57377C13.25 5.31629 13.25 5.07981 13.2661 4.88213C13.2835 4.669 13.3234 4.43582 13.4407 4.20552C13.6085 3.87623 13.8762 3.60852 14.2055 3.44074C14.4358 3.32339 14.669 3.28353 14.8821 3.26612C15.0798 3.24996 15.3163 3.24998 15.5738 3.25ZM14.8809 4.77973C14.8808 4.77972 14.8813 4.77953 14.8824 4.77918L14.8809 4.77973ZM14.8835 4.77882C14.8923 4.77607 14.9255 4.76757 15.0043 4.76113C15.1334 4.75058 15.3076 4.75 15.6 4.75H18.4C18.6924 4.75 18.8666 4.75058 18.9957 4.76113C19.0745 4.76757 19.1077 4.77607 19.1165 4.77882C19.1612 4.80234 19.1977 4.83882 19.2212 4.88346C19.2239 4.89234 19.2324 4.92547 19.2389 5.00428C19.2494 5.1334 19.25 5.3076 19.25 5.6V8.4C19.25 8.6924 19.2494 8.8666 19.2389 8.99572C19.2324 9.07453 19.2239 9.10766 19.2212 9.11654C19.1977 9.16118 19.1612 9.19766 19.1165 9.22118C19.1077 9.22393 19.0745 9.23243 18.9957 9.23887C18.8666 9.24942 18.6924 9.25 18.4 9.25H15.6C15.3076 9.25 15.1334 9.24942 15.0043 9.23887C14.9255 9.23243 14.8923 9.22393 14.8835 9.22118C14.8388 9.19766 14.8023 9.16118 14.7788 9.11654C14.7761 9.10766 14.7676 9.07453 14.7611 8.99572C14.7506 8.8666 14.75 8.6924 14.75 8.4V5.6C14.75 5.3076 14.7506 5.1334 14.7611 5.00428C14.7676 4.92547 14.7761 4.89234 14.7788 4.88346C14.8023 4.83882 14.8388 4.80234 14.8835 4.77882ZM14.7797 4.88088C14.7797 4.8809 14.7796 4.88143 14.7792 4.88236L14.7797 4.88088ZM14.7797 9.11913C14.7797 9.11915 14.7795 9.11867 14.7792 9.11761L14.7797 9.11913ZM14.8809 9.22027C14.8809 9.22026 14.8814 9.22044 14.8824 9.22082L14.8809 9.22027ZM19.1191 9.22027C19.1192 9.22028 19.1187 9.22048 19.1176 9.22082L19.1191 9.22027ZM19.2203 9.11913C19.2203 9.11911 19.2204 9.11857 19.2208 9.11761L19.2203 9.11913ZM19.2203 4.88088C19.2203 4.88085 19.2205 4.88131 19.2208 4.88236L19.2203 4.88088ZM19.1176 4.77917C19.1187 4.77952 19.1192 4.77972 19.1191 4.77973L19.1176 4.77917ZM5.57377 13.25H8.42623C8.68372 13.25 8.92019 13.25 9.11787 13.2661C9.33101 13.2835 9.56418 13.3234 9.79449 13.4407C10.1238 13.6085 10.3915 13.8762 10.5593 14.2055C10.6766 14.4358 10.7165 14.669 10.7339 14.8821C10.75 15.0798 10.75 15.3163 10.75 15.5738V18.4262C10.75 18.6837 10.75 18.9202 10.7339 19.1179C10.7165 19.331 10.6766 19.5642 10.5593 19.7945C10.3915 20.1238 10.1238 20.3915 9.79449 20.5593C9.56418 20.6766 9.33101 20.7165 9.11787 20.7339C8.92019 20.75 8.68372 20.75 8.42623 20.75H5.57377C5.31629 20.75 5.07981 20.75 4.88213 20.7339C4.669 20.7165 4.43583 20.6766 4.20552 20.5593C3.87624 20.3915 3.60852 20.1238 3.44074 19.7945C3.32339 19.5642 3.28353 19.331 3.26612 19.1179C3.24997 18.9202 3.24998 18.6837 3.25 18.4262V15.5738C3.24998 15.3163 3.24997 15.0798 3.26612 14.8821C3.28353 14.669 3.32339 14.4358 3.44074 14.2055C3.60852 13.8762 3.87624 13.6085 4.20552 13.4407C4.43583 13.3234 4.669 13.2835 4.88213 13.2661C5.07981 13.25 5.31629 13.25 5.57377 13.25ZM4.88088 14.7797C4.88085 14.7797 4.88131 14.7795 4.88237 14.7792L4.88088 14.7797ZM4.88346 14.7788C4.89234 14.7761 4.92546 14.7676 5.00428 14.7611C5.13341 14.7506 5.3076 14.75 5.6 14.75H8.4C8.6924 14.75 8.8666 14.7506 8.99573 14.7611C9.07453 14.7676 9.10766 14.7761 9.11654 14.7788C9.16118 14.8023 9.19766 14.8388 9.22118 14.8835C9.22393 14.8923 9.23243 14.9255 9.23887 15.0043C9.24942 15.1334 9.25 15.3076 9.25 15.6V18.4C9.25 18.6924 9.24942 18.8666 9.23887 18.9957C9.23243 19.0745 9.22393 19.1077 9.22118 19.1165C9.19766 19.1612 9.16118 19.1977 9.11654 19.2212C9.10767 19.2239 9.07454 19.2324 8.99573 19.2389C8.8666 19.2494 8.6924 19.25 8.4 19.25H5.6C5.3076 19.25 5.13341 19.2494 5.00428 19.2389C4.92547 19.2324 4.89235 19.2239 4.88347 19.2212C4.83883 19.1977 4.80235 19.1612 4.77883 19.1165C4.77607 19.1077 4.76757 19.0745 4.76114 18.9957C4.75059 18.8666 4.75 18.6924 4.75 18.4V15.6C4.75 15.3076 4.75059 15.1334 4.76114 15.0043C4.76757 14.9255 4.77607 14.8923 4.77883 14.8835C4.80234 14.8388 4.83882 14.8023 4.88346 14.7788ZM4.77973 14.8809C4.77974 14.8809 4.77956 14.8814 4.77918 14.8824L4.77973 14.8809ZM4.77973 19.1191C4.77972 19.1192 4.77953 19.1187 4.77918 19.1176L4.77973 19.1191ZM4.88088 19.2203C4.8809 19.2203 4.88143 19.2204 4.88236 19.2208L4.88088 19.2203ZM9.11913 19.2203C9.11917 19.2203 9.1187 19.2205 9.11762 19.2208L9.11913 19.2203ZM9.22028 19.1191C9.22026 19.1191 9.22044 19.1185 9.22087 19.1175L9.22028 19.1191ZM9.22027 14.8809C9.22028 14.8808 9.22048 14.8813 9.22084 14.8824L9.22027 14.8809ZM9.11761 14.7792C9.11868 14.7795 9.11915 14.7797 9.11913 14.7797L9.11761 14.7792ZM17 13.25C17.4142 13.25 17.75 13.5858 17.75 14V16.25H20C20.4142 16.25 20.75 16.5858 20.75 17C20.75 17.4142 20.4142 17.75 20 17.75H17.75V20C17.75 20.4142 17.4142 20.75 17 20.75C16.5858 20.75 16.25 20.4142 16.25 20V17.75H14C13.5858 17.75 13.25 17.4142 13.25 17C13.25 16.5858 13.5858 16.25 14 16.25H16.25V14C16.25 13.5858 16.5858 13.25 17 13.25Z"
  />
</svg>`,jJ=rt`<svg
  width="24"
  height="24"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.25 7C2.25 5.48122 3.48122 4.25 5 4.25H19C20.5188 4.25 21.75 5.48122 21.75 7V17C21.75 18.5188 20.5188 19.75 19 19.75H5C3.48122 19.75 2.25 18.5188 2.25 17V7ZM5 5.75C4.30964 5.75 3.75 6.30964 3.75 7V17C3.75 17.6904 4.30964 18.25 5 18.25H19C19.6904 18.25 20.25 17.6904 20.25 17V7C20.25 6.30964 19.6904 5.75 19 5.75H5Z"
  />
</svg>`,RJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M11 3.75C6.99594 3.75 3.75 6.99594 3.75 11C3.75 15.0041 6.99594 18.25 11 18.25C13.0026 18.25 14.8156 17.4381 16.1276 16.1254C16.128 16.1251 16.1284 16.1247 16.1287 16.1243C16.1288 16.1243 16.1289 16.1242 16.1289 16.1241C17.4395 14.8123 18.25 13.0008 18.25 11C18.25 6.99594 15.0041 3.75 11 3.75ZM17.6965 16.6324C18.9779 15.1104 19.75 13.1453 19.75 11C19.75 6.16751 15.8325 2.25 11 2.25C6.16751 2.25 2.25 6.16751 2.25 11C2.25 15.8325 6.16751 19.75 11 19.75C13.1471 19.75 15.1136 18.9767 16.6361 17.6933L20.4694 21.5301C20.7622 21.8231 21.2371 21.8233 21.5301 21.5306C21.8231 21.2378 21.8233 20.7629 21.5306 20.4699L17.6965 16.6324ZM10.25 6C10.25 5.58579 10.5858 5.25 11 5.25C14.1756 5.25 16.75 7.82436 16.75 11C16.75 11.4142 16.4142 11.75 16 11.75C15.5858 11.75 15.25 11.4142 15.25 11C15.25 8.65279 13.3472 6.75 11 6.75C10.5858 6.75 10.25 6.41421 10.25 6Z"
  />
</svg>`,DJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M17.6726 6.0059L7.49998 16.1785L2.32739 11.0059L3.5059 9.82739L7.49998 13.8215L16.4941 4.82739L17.6726 6.0059Z"
  />
</svg>`,NJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.245 4.43531L12.543 5.16181L14.8382 7.45701L15.5647 6.75504C16.2018 6.11419 16.2006 5.07822 15.5612 4.4388C14.9218 3.7994 13.8859 3.79823 13.245 4.43531ZM13.9392 8.32572L11.6743 6.06086L5.13833 12.8251L4.2655 15.7345L7.17493 14.8617L13.9392 8.32572ZM12.3576 3.55492C13.4863 2.42619 15.3164 2.42619 16.4451 3.55492C17.5738 4.68365 17.5738 6.51369 16.4451 7.64242L16.4375 7.65L7.93429 15.8662C7.86252 15.9355 7.77518 15.9867 7.67959 16.0153L3.51292 17.2654C3.29269 17.3314 3.05397 17.2712 2.89139 17.1087C2.7288 16.9461 2.66862 16.7073 2.73469 16.4871L3.98469 12.3204C4.01337 12.2249 4.06452 12.1375 4.13387 12.0657L12.3576 3.55492Z"
  />
</svg>`,zJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12.8423 4.60675C14.6513 2.79775 17.5843 2.79775 19.3933 4.60675C21.2023 6.41576 21.2023 9.34874 19.3933 11.1577L17.3344 13.2166C17.0415 13.5095 16.5666 13.5095 16.2737 13.2166C15.9808 12.9237 15.9808 12.4489 16.2737 12.156L18.3326 10.0971C19.5558 8.87386 19.5558 6.89063 18.3326 5.66741C17.1094 4.44419 15.1261 4.44419 13.9029 5.66741L11.1578 8.41258C9.93454 9.6358 9.93454 11.619 11.1578 12.8423C11.3498 13.0343 11.5596 13.1955 11.7816 13.3266C12.1383 13.5372 12.2566 13.9971 12.046 14.3538C11.8353 14.7104 11.3755 14.8288 11.0188 14.6182C10.6892 14.4235 10.379 14.1849 10.0971 13.9029C8.28809 12.0939 8.28809 9.16093 10.0971 7.35192L12.8423 4.60675ZM11.954 9.64621C12.1647 9.28955 12.6246 9.17119 12.9812 9.38183C13.3109 9.57652 13.621 9.81514 13.9029 10.0971C15.7119 11.9061 15.7119 14.8391 13.9029 16.6481L11.1578 19.3932C9.34875 21.2023 6.41577 21.2023 4.60677 19.3932C2.79776 17.5842 2.79776 14.6513 4.60677 12.8423L6.66564 10.7834C6.95854 10.4905 7.43341 10.4905 7.7263 10.7834C8.0192 11.0763 8.0192 11.5511 7.7263 11.844L5.66743 13.9029C4.44421 15.1261 4.44421 17.1094 5.66743 18.3326C6.89065 19.5558 8.87388 19.5558 10.0971 18.3326L12.8423 15.5874C14.0655 14.3642 14.0655 12.381 12.8423 11.1577C12.6503 10.9657 12.4404 10.8045 12.2184 10.6734C11.8618 10.4627 11.7434 10.0029 11.954 9.64621Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.19501 3.26921C8.59861 3.17607 9.0013 3.42775 9.09444 3.83135L9.53081 5.72226C9.62395 6.12587 9.37227 6.52856 8.96866 6.6217C8.56505 6.71484 8.16236 6.46316 8.06922 6.05955L7.63286 4.16864C7.53972 3.76504 7.7914 3.36234 8.19501 3.26921ZM3.26922 8.19499C3.36236 7.79138 3.76505 7.5397 4.16866 7.63284L6.05957 8.06921C6.46317 8.16235 6.71486 8.56504 6.62172 8.96864C6.52858 9.37225 6.12588 9.62393 5.72228 9.53079L3.83137 9.09443C3.42776 9.00129 3.17608 8.5986 3.26922 8.19499ZM17.3783 15.0314C17.4715 14.6277 17.8741 14.3761 18.2777 14.4692L20.1687 14.9056C20.5723 14.9987 20.8239 15.4014 20.7308 15.805C20.6377 16.2086 20.235 16.4603 19.8314 16.3672L17.9405 15.9308C17.5369 15.8377 17.2852 15.435 17.3783 15.0314ZM15.0314 17.3783C15.435 17.2852 15.8377 17.5368 15.9308 17.9404L16.3672 19.8314C16.4603 20.235 16.2086 20.6377 15.805 20.7308C15.4014 20.8239 14.9987 20.5723 14.9056 20.1686L14.4692 18.2777C14.3761 17.8741 14.6278 17.4714 15.0314 17.3783Z"
  />
</svg>`,BJ=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77516)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M6.16667 6.79166C5.59137 6.79166 5.125 7.25803 5.125 7.83333V16.1667C5.125 16.742 5.59137 17.2083 6.16667 17.2083H17.8333C18.4086 17.2083 18.875 16.742 18.875 16.1667V12C18.875 11.6548 19.1548 11.375 19.5 11.375C19.8452 11.375 20.125 11.6548 20.125 12V16.1667C20.125 17.4323 19.099 18.4583 17.8333 18.4583H6.16667C4.90101 18.4583 3.875 17.4323 3.875 16.1667V7.83333C3.875 6.56768 4.90101 5.54166 6.16667 5.54166H12C12.3452 5.54166 12.625 5.82148 12.625 6.16666C12.625 6.51184 12.3452 6.79166 12 6.79166H6.16667Z"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M15.6063 5.48362C16.64 4.4499 18.316 4.4499 19.3497 5.48362C20.3834 6.51734 20.3834 8.19333 19.3497 9.22705L18.2774 10.2994C18.0333 10.5435 17.6376 10.5435 17.3935 10.2994C17.3371 10.243 17.2937 10.1784 17.2634 10.1096C17.2915 10.8217 17.0338 11.5429 16.4902 12.0866L15.0604 13.5164C14.0267 14.5501 12.3507 14.5501 11.317 13.5164C10.2832 12.4827 10.2832 10.8067 11.317 9.77294L12.3893 8.70061C12.6334 8.45653 13.0291 8.45653 13.2732 8.70061C13.3296 8.75703 13.373 8.82155 13.4033 8.89042C13.3751 8.17833 13.6329 7.45704 14.1765 6.91339L15.6063 5.48362ZM13.4445 9.2633C13.4215 9.38098 13.3643 9.49332 13.2732 9.58449L12.2008 10.6568C11.6553 11.2024 11.6553 12.0869 12.2008 12.6325C12.7464 13.1781 13.6309 13.1781 14.1765 12.6325L15.6063 11.2027C16.1518 10.6571 16.1518 9.77261 15.6063 9.22705C15.5203 9.1411 15.4267 9.0692 15.3279 9.01086C15.0307 8.83532 14.932 8.45209 15.1076 8.15487C15.2831 7.85766 15.6664 7.75902 15.9636 7.93456C16.1521 8.0459 16.3293 8.18227 16.4902 8.34317C16.8849 8.73787 17.1289 9.22622 17.2221 9.73669C17.2452 9.619 17.3023 9.50667 17.3935 9.4155L18.4658 8.34317C19.0114 7.7976 19.0114 6.91307 18.4658 6.3675C17.9203 5.82194 17.0357 5.82194 16.4902 6.3675L15.0604 7.79728C14.5148 8.34284 14.5148 9.22738 15.0604 9.77294C15.1463 9.85889 15.24 9.93079 15.3388 9.98913C15.636 10.1647 15.7346 10.5479 15.5591 10.8451C15.3835 11.1423 15.0003 11.241 14.7031 11.0654C14.5146 10.9541 14.3374 10.8177 14.1765 10.6568C13.7818 10.2621 13.5378 9.77377 13.4445 9.2633Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77516">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,HJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.70831 4.16671C2.70831 3.36129 3.36123 2.70837 4.16665 2.70837H7.49998C8.30539 2.70837 8.95831 3.36129 8.95831 4.16671V7.50004C8.95831 8.30546 8.30539 8.95837 7.49998 8.95837H4.16665C3.36123 8.95837 2.70831 8.30546 2.70831 7.50004V4.16671ZM4.16665 3.95837C4.05159 3.95837 3.95831 4.05165 3.95831 4.16671V7.50004C3.95831 7.6151 4.05159 7.70837 4.16665 7.70837H7.49998C7.61504 7.70837 7.70831 7.6151 7.70831 7.50004V4.16671C7.70831 4.05165 7.61504 3.95837 7.49998 3.95837H4.16665Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.70831 16.6667C2.70831 16.3215 2.98814 16.0417 3.33331 16.0417L13.3333 16.0417C13.6785 16.0417 13.9583 16.3215 13.9583 16.6667C13.9583 17.0119 13.6785 17.2917 13.3333 17.2917L3.33331 17.2917C2.98813 17.2917 2.70831 17.0119 2.70831 16.6667Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.70831 12.5C2.70831 12.1549 2.98814 11.875 3.33331 11.875L16.6666 11.875C17.0118 11.875 17.2916 12.1549 17.2916 12.5C17.2916 12.8452 17.0118 13.125 16.6666 13.125L3.33331 13.125C2.98813 13.125 2.70831 12.8452 2.70831 12.5Z"
  />
</svg>`,FJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9.99997 2.70837C10.3452 2.70837 10.625 2.9882 10.625 3.33337V10.7134L12.197 9.14138C12.4411 8.8973 12.8368 8.8973 13.0809 9.14138C13.3249 9.38546 13.3249 9.78119 13.0809 10.0253L10.4419 12.6642C10.1978 12.9083 9.80211 12.9083 9.55803 12.6642L6.91909 10.0253C6.67502 9.78119 6.67502 9.38546 6.91909 9.14138C7.16317 8.8973 7.5589 8.8973 7.80298 9.14138L9.37498 10.7134V3.33337C9.37498 2.9882 9.6548 2.70837 9.99997 2.70837ZM16.6666 11.212C17.0118 11.212 17.2916 11.4918 17.2916 11.837V14.9104C17.2916 15.5317 17.0577 16.1337 16.6318 16.5825C16.2049 17.0324 15.6186 17.2917 15 17.2917H4.99998C4.38132 17.2917 3.79506 17.0324 3.36812 16.5825C2.94223 16.1337 2.70831 15.5317 2.70831 14.9104L2.70831 11.837C2.70831 11.4918 2.98813 11.212 3.33331 11.212C3.67849 11.212 3.95831 11.4918 3.95831 11.837L3.95831 14.9104C3.95831 15.2207 4.07559 15.5121 4.27482 15.722C4.473 15.9309 4.73459 16.0417 4.99998 16.0417H15C15.2654 16.0417 15.527 15.9309 15.7251 15.722C15.9244 15.5121 16.0416 15.2207 16.0416 14.9104V11.837C16.0416 11.4918 16.3215 11.212 16.6666 11.212Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.0787 13.6458C13.0787 13.3007 13.3585 13.0208 13.7037 13.0208H13.7111C14.0563 13.0208 14.3361 13.3007 14.3361 13.6458C14.3361 13.991 14.0563 14.2708 13.7111 14.2708H13.7037C13.3585 14.2708 13.0787 13.991 13.0787 13.6458Z"
  />
</svg>`,ZJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 20 20"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.16665 2.5C3.53484 2.5 3.83331 2.79848 3.83331 3.16667L3.83331 16.8333C3.83331 17.2015 3.53484 17.5 3.16665 17.5C2.79846 17.5 2.49998 17.2015 2.49998 16.8333L2.49998 3.16667C2.49998 2.79848 2.79846 2.5 3.16665 2.5ZM9.31209 14.6598C9.58453 14.4121 9.60461 13.9905 9.35694 13.7181L8.85553 13.1665H11.8939C13.5757 13.1665 14.8333 11.6875 14.8333 9.99983C14.8333 8.31215 13.5757 6.83317 11.8939 6.83317H5.83334C5.46515 6.83317 5.16668 7.13164 5.16668 7.49983C5.16668 7.86802 5.46515 8.1665 5.83334 8.1665H11.8939C12.7226 8.1665 13.5 8.92609 13.5 9.99983C13.5 11.0736 12.7226 11.8332 11.8939 11.8332H8.85553L9.35694 11.2816C9.60461 11.0092 9.58453 10.5875 9.31209 10.3399C9.03966 10.0922 8.61802 10.1123 8.37035 10.3847L6.8552 12.0514C6.62404 12.3057 6.62404 12.694 6.8552 12.9483L8.37035 14.6149C8.61802 14.8874 9.03966 14.9075 9.31209 14.6598ZM16.1666 16.8333C16.1666 17.2015 16.4651 17.5 16.8333 17.5C17.2015 17.5 17.5 17.2015 17.5 16.8333L17.5 3.16667C17.5 2.79848 17.2015 2.5 16.8333 2.5C16.4651 2.5 16.1666 2.79848 16.1666 3.16667V16.8333Z"
  />
</svg>`,UJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4 3.25C4.41421 3.25 4.75 3.58579 4.75 4L4.75 20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20L3.25 4C3.25 3.58579 3.58579 3.25 4 3.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20 3.25C20.4142 3.25 20.75 3.58579 20.75 4V20C20.75 20.4142 20.4142 20.75 20 20.75C19.5858 20.75 19.25 20.4142 19.25 20V4C19.25 3.58579 19.5858 3.25 20 3.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M10.6437 12.408C10.3168 12.7053 10.2927 13.2112 10.5899 13.5381L11.1916 14.2H7C6.55817 14.2 6.2 14.5582 6.2 15C6.2 15.4418 6.55817 15.8 7 15.8L11.1916 15.8L10.5899 16.4619C10.2927 16.7888 10.3168 17.2947 10.6437 17.592C10.9706 17.8892 11.4766 17.8651 11.7738 17.5381L13.592 15.5381C13.8693 15.233 13.8693 14.767 13.592 14.4619L11.7738 12.4619C11.4766 12.1349 10.9706 12.1108 10.6437 12.408Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M14.6437 6.40805C14.3168 6.70525 14.2927 7.21121 14.5899 7.53814L15.1916 8.2H7C6.55817 8.2 6.2 8.55817 6.2 9C6.2 9.44183 6.55817 9.8 7 9.8H15.1916L14.5899 10.4619C14.2927 10.7888 14.3168 11.2947 14.6437 11.592C14.9706 11.8892 15.4766 11.8651 15.7738 11.5381L17.592 9.53814C17.8693 9.233 17.8693 8.767 17.592 8.46186L15.7738 6.46186C15.4766 6.13494 14.9706 6.11084 14.6437 6.40805Z"
  />
</svg>`,Rb=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M6.46967 9.46967C6.76256 9.17678 7.23744 9.17678 7.53033 9.46967L11.6464 13.5858C11.8417 13.781 12.1583 13.781 12.3536 13.5858L16.4697 9.46967C16.7626 9.17678 17.2374 9.17678 17.5303 9.46967C17.8232 9.76256 17.8232 10.2374 17.5303 10.5303L13.4142 14.6464C12.6332 15.4275 11.3668 15.4275 10.5858 14.6464L6.46967 10.5303C6.17678 10.2374 6.17678 9.76256 6.46967 9.46967Z"
  />
</svg>`,PR=dp`
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 6C3.25 4.48122 4.48122 3.25 6 3.25H14C14.4142 3.25 14.75 3.58579 14.75 4C14.75 4.41421 14.4142 4.75 14 4.75H6C5.30964 4.75 4.75 5.30964 4.75 6V20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20V6Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20.75 18C20.75 19.5188 19.5188 20.75 18 20.75H10C9.58579 20.75 9.25 20.4142 9.25 20C9.25 19.5858 9.58579 19.25 10 19.25L18 19.25C18.6904 19.25 19.25 18.6904 19.25 18L19.25 4C19.25 3.58579 19.5858 3.25 20 3.25C20.4142 3.25 20.75 3.58579 20.75 4L20.75 18Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.25 9C8.25 8.0335 9.0335 7.25 10 7.25H14C14.9665 7.25 15.75 8.0335 15.75 9V11C15.75 11.9665 14.9665 12.75 14 12.75H10C9.0335 12.75 8.25 11.9665 8.25 11V9ZM10 8.75C9.86193 8.75 9.75 8.86193 9.75 9V11C9.75 11.1381 9.86193 11.25 10 11.25H14C14.1381 11.25 14.25 11.1381 14.25 11V9C14.25 8.86193 14.1381 8.75 14 8.75H10Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.25 16C8.25 15.5858 8.58579 15.25 9 15.25H15C15.4142 15.25 15.75 15.5858 15.75 16C15.75 16.4142 15.4142 16.75 15 16.75H9C8.58579 16.75 8.25 16.4142 8.25 16Z"
  />`,MR=dp`<path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 6C3.25 4.48122 4.48122 3.25 6 3.25H14C14.4142 3.25 14.75 3.58579 14.75 4C14.75 4.41421 14.4142 4.75 14 4.75H6C5.30964 4.75 4.75 5.30964 4.75 6V20C4.75 20.4142 4.41421 20.75 4 20.75C3.58579 20.75 3.25 20.4142 3.25 20V6Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M20 10.75C19.5858 10.75 19.25 10.4142 19.25 10V4C19.25 3.58579 19.5858 3.25 20 3.25C20.4142 3.25 20.75 3.58579 20.75 4V10C20.75 10.4142 20.4142 10.75 20 10.75Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.25 9C8.25 8.0335 9.0335 7.25 10 7.25H14C14.9665 7.25 15.75 8.0335 15.75 9V11C15.75 11.9665 14.9665 12.75 14 12.75H10C9.0335 12.75 8.25 11.9665 8.25 11V9ZM10 8.75C9.86193 8.75 9.75 8.86193 9.75 9V11C9.75 11.1381 9.86193 11.25 10 11.25H14C14.1381 11.25 14.25 11.1381 14.25 11V9C14.25 8.86193 14.1381 8.75 14 8.75H10Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M8.25 16C8.25 15.5858 8.58579 15.25 9 15.25H12C12.4142 15.25 12.75 15.5858 12.75 16C12.75 16.4142 12.4142 16.75 12 16.75H9C8.58579 16.75 8.25 16.4142 8.25 16Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M18 14.75C17.5858 14.75 17.25 14.4142 17.25 14C17.25 13.5858 17.5858 13.25 18 13.25H20.9C20.9174 13.25 20.9346 13.2505 20.9517 13.2515C21.1594 13.2382 21.3716 13.3109 21.5303 13.4697C21.6891 13.6284 21.7618 13.8406 21.7485 14.0483C21.7495 14.0654 21.75 14.0826 21.75 14.1V17C21.75 17.4142 21.4142 17.75 21 17.75C20.5858 17.75 20.25 17.4142 20.25 17V15.8107L14.5303 21.5303C14.2374 21.8232 13.7626 21.8232 13.4697 21.5303C13.1768 21.2374 13.1768 20.7626 13.4697 20.4697L19.1893 14.75H18Z"
  />`,WJ=nk(PR),VJ=nk(MR),IR=hp(PR,20),KJ=hp(MR,20),YJ=rt`<svg
  width="20"
  height="20"
  viewBox="0 0 24 24"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M12 3.25C12.4142 3.25 12.75 3.58579 12.75 4V20C12.75 20.4142 12.4142 20.75 12 20.75C11.5858 20.75 11.25 20.4142 11.25 20V4C11.25 3.58579 11.5858 3.25 12 3.25Z"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12Z"
  />
</svg>`,TR=dp`<path
  fill-rule="evenodd"
  clip-rule="evenodd"
  d="M11 4.75C10.5858 4.75 10.25 4.41421 10.25 4C10.25 3.58579 10.5858 3.25 11 3.25H19.9C19.9174 3.25 19.9346 3.25052 19.9517 3.25155C20.1594 3.23823 20.3716 3.31093 20.5303 3.46967C20.6891 3.62841 20.7618 3.84059 20.7485 4.04829C20.7495 4.0654 20.75 4.08264 20.75 4.1V13C20.75 13.4142 20.4142 13.75 20 13.75C19.5858 13.75 19.25 13.4142 19.25 13V5.81066L4.53033 20.5303C4.23744 20.8232 3.76256 20.8232 3.46967 20.5303C3.17678 20.2374 3.17678 19.7626 3.46967 19.4697L18.1893 4.75H11Z"
/>`,OR=hp(TR,20),GJ=hp(TR,16),ku=[{flavour:"affine:paragraph",type:"text",name:"Text",hotkey:`${ki}+option+0,${ki}+shift+0`,icon:ym},{flavour:"affine:paragraph",type:"h1",name:"Heading 1",hotkey:`${ki}+option+1,${ki}+shift+1`,icon:gR},{flavour:"affine:paragraph",type:"h2",name:"Heading 2",hotkey:`${ki}+option+2,${ki}+shift+2`,icon:mR},{flavour:"affine:paragraph",type:"h3",name:"Heading 3",hotkey:`${ki}+option+3,${ki}+shift+3`,icon:vR},{flavour:"affine:paragraph",type:"h4",name:"Heading 4",hotkey:`${ki}+option+4,${ki}+shift+4`,icon:bR},{flavour:"affine:paragraph",type:"h5",name:"Heading 5",hotkey:`${ki}+option+5,${ki}+shift+5`,icon:yR},{flavour:"affine:paragraph",type:"h6",name:"Heading 6",hotkey:`${ki}+option+6,${ki}+shift+6`,icon:xR},{flavour:"affine:list",type:"bulleted",name:"Bulleted List",hotkey:`${ki}+option+8,${ki}+shift+8`,icon:wR},{flavour:"affine:list",type:"numbered",name:"Numbered List",hotkey:`${ki}+option+9,${ki}+shift+9`,icon:CR},{flavour:"affine:list",type:"todo",name:"To-do List",hotkey:null,icon:ax},{flavour:"affine:code",type:void 0,name:"Code Block",hotkey:"command+option+c,ctrl+alt+c",icon:SR},{flavour:"affine:paragraph",type:"quote",name:"Quote",hotkey:null,icon:kR},{flavour:"affine:divider",type:"divider",name:"Divider",hotkey:`${ki}+option+d,${ki}+shift+d`,icon:_R}],XJ=[{flavour:"affine:paragraph",type:"text",name:"Text",description:"Start typing with plain text.",icon:ym,tooltip:"Drag/Click to insert Text block"},{flavour:"affine:paragraph",type:"h1",name:"Heading 1",description:"Headings in the largest font.",icon:gR,tooltip:"Drag/Click to insert Heading 1"},{flavour:"affine:paragraph",type:"h2",name:"Heading 2",description:"Headings in the 2nd font size.",icon:mR,tooltip:"Drag/Click to insert Heading 2"},{flavour:"affine:paragraph",type:"h3",name:"Heading 3",description:"Headings in the 3rd font size.",icon:vR,tooltip:"Drag/Click to insert Heading 3"},{flavour:"affine:paragraph",type:"h4",name:"Heading 4",description:"Heading in the 4th font size.",icon:bR,tooltip:"Drag/Click to insert Heading 4"},{flavour:"affine:paragraph",type:"h5",name:"Heading 5",description:"Heading in the 5th font size.",icon:yR,tooltip:"Drag/Click to insert Heading 5"},{flavour:"affine:paragraph",type:"h6",name:"Heading 6",description:"Heading in the 6th font size.",icon:xR,tooltip:"Drag/Click to insert Heading 6"},{flavour:"affine:code",type:null,name:"Code Block",description:"Capture a code snippet.",icon:SR,tooltip:"Drag/Click to insert Code Block"},{flavour:"affine:paragraph",type:"quote",name:"Quote",description:"Capture a quote.",icon:kR,tooltip:"Drag/Click to insert Quote"},{flavour:"affine:divider",type:null,name:"Divider",description:"A visual divider.",icon:_R,tooltip:"A visual divider"}],qJ=[{flavour:"affine:list",type:"bulleted",name:"Bulleted List",description:"A simple bulleted list.",icon:wR,tooltip:"Drag/Click to insert Bulleted List"},{flavour:"affine:list",type:"numbered",name:"Numbered List",description:"A list with numbering.",icon:CR,tooltip:"Drag/Click to insert Numbered List"},{flavour:"affine:list",type:"todo",name:"To-do List",description:"Track tasks with a to-do list.",icon:ax,tooltip:"Drag/Click to insert To-do List"}],JJ=[{flavour:"affine:embed",type:"image",name:"Image",description:"Upload images.",icon:aR,tooltip:"Drag/Click to insert Image"},{flavour:"affine:bookmark",type:"bookmark",name:"Bookmark",description:"Insert a link in card view.",icon:sR,tooltip:"Drag/Click to insert Bookmark"}];/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lr=n=>e=>typeof e=="function"?((t,r)=>(customElements.define(t,r),r))(n,e):((t,r)=>{const{kind:o,elements:i}=r;return{kind:o,elements:i,finisher(a){customElements.define(t,a)}}})(n,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QJ=(n,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(t){t.createProperty(e.key,n)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,n)}},eQ=(n,e,t)=>{e.constructor.createProperty(t,n)};function Ft(n){return(e,t)=>t!==void 0?eQ(n,e,t):QJ(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ar(n){return Ft({...n,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const AR=({finisher:n,descriptor:e})=>(t,r)=>{var o;if(r===void 0){const i=(o=t.originalKey)!==null&&o!==void 0?o:t.key,a=e!=null?{kind:"method",placement:"prototype",key:i,descriptor:e(t.key)}:{...t,key:i};return n!=null&&(a.finisher=function(s){n(s,i)}),a}{const i=t.constructor;e!==void 0&&Object.defineProperty(t,r,e(r)),n==null||n(i,r)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Rr(n,e){return AR({descriptor:t=>{const r={get(){var o,i;return(i=(o=this.renderRoot)===null||o===void 0?void 0:o.querySelector(n))!==null&&i!==void 0?i:null},enumerable:!0,configurable:!0};if(e){const o=typeof t=="symbol"?Symbol():"__"+t;r.get=function(){var i,a;return this[o]===void 0&&(this[o]=(a=(i=this.renderRoot)===null||i===void 0?void 0:i.querySelector(n))!==null&&a!==void 0?a:null),this[o]}}return r}})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function LR(n){return AR({descriptor:e=>({get(){var t,r;return(r=(t=this.renderRoot)===null||t===void 0?void 0:t.querySelectorAll(n))!==null&&r!==void 0?r:[]},enumerable:!0,configurable:!0})})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var M7;((M7=window.HTMLSlotElement)===null||M7===void 0?void 0:M7.prototype.assignedElements)!=null;function ui(n){class e extends n{constructor(){super(...arguments),this._disposables=new Ya}connectedCallback(){super.connectedCallback(),this._disposables.disposed&&(this._disposables=new Ya)}disconnectedCallback(){super.disconnectedCallback(),this._disposables.dispose()}}return e}class ua extends so{static finalizeStyles(e){let t=super.finalizeStyles(e);const r=document.head;return this.disableShadowRoot&&(t.forEach(o=>{if(o instanceof JS){const i=document.createElement("style");i.textContent=o.cssText,r.appendChild(i)}else console.error("unreachable")}),t=[]),t}createRenderRoot(){return this.constructor.disableShadowRoot?this:super.createRenderRoot()}}ua.disableShadowRoot=!0;var sx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};class ql extends ui(ua){}sx([Ft()],ql.prototype,"root",void 0);sx([Ft()],ql.prototype,"model",void 0);sx([Ft()],ql.prototype,"content",void 0);sx([Ft()],ql.prototype,"page",void 0);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ok={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},lx=n=>(...e)=>({_$litDirective$:n,values:e});let cx=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:tQ}=KX,gI=()=>document.createComment(""),M2=(n,e,t)=>{var r;const o=n._$AA.parentNode,i=e===void 0?n._$AB:e._$AA;if(t===void 0){const a=o.insertBefore(gI(),i),s=o.insertBefore(gI(),i);t=new tQ(a,s,n,n.options)}else{const a=t._$AB.nextSibling,s=t._$AM,l=s!==n;if(l){let d;(r=t._$AQ)===null||r===void 0||r.call(t,n),t._$AM=n,t._$AP!==void 0&&(d=n._$AU)!==s._$AU&&t._$AP(d)}if(a!==i||l){let d=t._$AA;for(;d!==a;){const u=d.nextSibling;o.insertBefore(d,i),d=u}}}return t},Up=(n,e,t=n)=>(n._$AI(e,t),n),nQ={},$R=(n,e=nQ)=>n._$AH=e,rQ=n=>n._$AH,I7=n=>{var e;(e=n._$AP)===null||e===void 0||e.call(n,!1,!0);let t=n._$AA;const r=n._$AB.nextSibling;for(;t!==r;){const o=t.nextSibling;t.remove(),t=o}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mI=(n,e,t)=>{const r=new Map;for(let o=e;o<=t;o++)r.set(n[o],o);return r},Vs=lx(class extends cx{constructor(n){if(super(n),n.type!==ok.CHILD)throw Error("repeat() can only be used in text expressions")}ct(n,e,t){let r;t===void 0?t=e:e!==void 0&&(r=e);const o=[],i=[];let a=0;for(const s of n)o[a]=r?r(s,a):a,i[a]=t(s,a),a++;return{values:i,keys:o}}render(n,e,t){return this.ct(n,e,t).values}update(n,[e,t,r]){var o;const i=rQ(n),{values:a,keys:s}=this.ct(e,t,r);if(!Array.isArray(i))return this.ut=s,a;const l=(o=this.ut)!==null&&o!==void 0?o:this.ut=[],d=[];let u,p,f=0,h=i.length-1,c=0,g=a.length-1;for(;f<=h&&c<=g;)if(i[f]===null)f++;else if(i[h]===null)h--;else if(l[f]===s[c])d[c]=Up(i[f],a[c]),f++,c++;else if(l[h]===s[g])d[g]=Up(i[h],a[g]),h--,g--;else if(l[f]===s[g])d[g]=Up(i[f],a[g]),M2(n,d[g+1],i[f]),f++,g--;else if(l[h]===s[c])d[c]=Up(i[h],a[c]),M2(n,i[f],i[h]),h--,c++;else if(u===void 0&&(u=mI(s,c,g),p=mI(l,f,h)),u.has(l[f]))if(u.has(l[h])){const m=p.get(s[c]),b=m!==void 0?i[m]:null;if(b===null){const v=M2(n,i[f]);Up(v,a[c]),d[c]=v}else d[c]=Up(b,a[c]),M2(n,i[f],b),i[m]=null;c++}else I7(i[h]),h--;else I7(i[f]),f++;for(;c<=g;){const m=M2(n,d[g+1]);Up(m,a[c]),d[c++]=m}for(;f<=h;){const m=i[f++];m!==null&&I7(m)}return this.ut=s,$R(n,d),ox}});class k6{constructor(e){this.event=e,this.type="defaultState"}}class qc{constructor(){this._map={},this.add=e=>{const t=e.type;this._map[t]&&console.warn("UIEventStateContext: state name duplicated",t),this._map[t]=e},this.has=e=>!!this._map[e],this.get=e=>{const t=this._map[e];return xt(t,`UIEventStateContext: state ${e} not found`),t}}static from(...e){const t=new qc;return e.forEach(r=>{t.add(r)}),t}}class I2 extends k6{get x(){return this.point.x}get y(){return this.point.y}constructor({event:e,rect:t,startX:r,startY:o,last:i}){super(e),this.type="pointerState";const a=e.clientX-t.left,s=e.clientY-t.top;this.raw=e,this.point={x:a,y:s},this.containerOffset={x:t.left,y:t.top},this.start={x:r,y:o},this.delta=i?{x:a-i.point.x,y:s-i.point.y}:{x:0,y:0},this.keys={shift:e.shiftKey,cmd:e.metaKey||e.ctrlKey,alt:e.altKey},this.button=(i==null?void 0:i.button)||e.button,this.dragging=!!i}}class vI extends k6{constructor({event:e}){super(e),this.type="keyboardState",this.raw=e}}class oQ{constructor(e){this._dispatcher=e,this._down=t=>{const r=new vI({event:t});this._dispatcher.run("keyDown",qc.from(r))},this._up=t=>{const r=new vI({event:t});this._dispatcher.run("keyUp",qc.from(r))}}listen(){this._dispatcher.disposables.addFromEvent(document,"keydown",this._down),this._dispatcher.disposables.addFromEvent(document,"keyup",this._up)}}function bI(n,e){const t=n.x-e.x,r=n.y-e.y;return Math.pow(t,2)+Math.pow(r,2)>4}const yI=n=>n.toLowerCase();class iQ{constructor(e){this._dispatcher=e,this._lastPointerDownEvent=null,this._startDragState=null,this._lastDragState=null,this._pointerDownCount=0,this._dragging=!1,this._startX=-1/0,this._startY=-1/0,this._reset=()=>{this._startX=-1/0,this._startY=-1/0,this._lastDragState=null,this._dragging=!1},this._down=t=>{this._lastPointerDownEvent&&t.timeStamp-this._lastPointerDownEvent.timeStamp<500&&!bI(t,this._lastPointerDownEvent)?this._pointerDownCount++:this._pointerDownCount=1;const r=new I2({event:t,rect:this._rect,startX:this._startX,startY:this._startY,last:null});this._startX=r.point.x,this._startY=r.point.y,this._startDragState=r,this._lastDragState=r,this._lastPointerDownEvent=t,this._dispatcher.run("pointerDown",qc.from(r)),this._dispatcher.disposables.addFromEvent(document,"pointermove",this._move),this._dispatcher.disposables.addFromEvent(document,"pointerup",this._up)},this._up=t=>{const r=new I2({event:t,rect:this._rect,startX:this._startX,startY:this._startY,last:this._lastDragState}),o=qc.from(r);(()=>{if(this._dragging){this._dispatcher.run("dragEnd",o);return}this._dispatcher.run("click",o),this._pointerDownCount===2&&this._dispatcher.run("doubleClick",o),this._pointerDownCount===3&&this._dispatcher.run("tripleClick",o)})(),this._dispatcher.run("pointerUp",o),this._reset(),document.removeEventListener("pointermove",this._move),document.removeEventListener("pointerup",this._up)},this._move=t=>{const r=this._lastDragState,o=new I2({event:t,rect:this._rect,startX:this._startX,startY:this._startY,last:r});this._lastDragState=o,xt(this._startDragState),!this._dragging&&bI(this._startDragState.raw,o.raw)&&(this._dragging=!0,this._dispatcher.run("dragStart",qc.from(this._startDragState))),this._dragging&&this._dispatcher.run("dragMove",qc.from(o))},this._moveOn=t=>{const r=new I2({event:t,rect:this._rect,startX:this._startX,startY:this._startY,last:this._lastDragState});this._dispatcher.run("pointerMove",qc.from(r))},this._out=t=>{const r=new I2({event:t,rect:this._rect,startX:-1/0,startY:-1/0,last:null});this._dispatcher.run("pointerOut",qc.from(r))}}listen(){this._dispatcher.disposables.addFromEvent(this._dispatcher.root,"pointerdown",this._down),this._dispatcher.disposables.addFromEvent(this._dispatcher.root,"pointermove",this._moveOn),this._dispatcher.disposables.addFromEvent(this._dispatcher.root,"pointerout",this._out)}get _rect(){return this._dispatcher.root.getBoundingClientRect()}}const jR=["beforeInput","compositionStart","compositionUpdate","compositionEnd","paste","copy","blur","focus","drop","contextMenu","wheel"],RR=["selectionChange","virgo-vrange-updated"],aQ=["click","doubleClick","tripleClick","pointerDown","pointerMove","pointerUp","pointerOut","dragStart","dragMove","dragEnd","keyDown","keyUp",...jR,...RR];class sQ{constructor(e){this.root=e,this.disposables=new Ya,this._handlersMap=Object.fromEntries(aQ.map(t=>[t,[]])),this._pointerControl=new iQ(this),this._keyboardControl=new oQ(this)}mount(){this.disposables.disposed&&(this.disposables=new Ya),this._bindEvents()}unmount(){this.disposables.dispose()}run(e,t){const r=this._handlersMap[e];if(r){for(const o of r)if(o(t))return}}add(e,t){return this._handlersMap[e].unshift(t),()=>{this._handlersMap[e].includes(t)&&(this._handlersMap[e]=this._handlersMap[e].filter(r=>r!==t))}}_bindEvents(){jR.forEach(e=>{this.disposables.addFromEvent(this.root,yI(e),t=>{this.run(e,qc.from(new k6(t)))})}),RR.forEach(e=>{this.disposables.addFromEvent(document,yI(e),t=>{this.run(e,qc.from(new k6(t)))})}),this._pointerControl.listen(),this._keyboardControl.listen()}}var dx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Bv=class extends ua{constructor(){super(...arguments),this.blockIdAttr="data-block-id",this.modelSubscribed=new Set,this.uiEventDispatcher=new sQ(this),this.renderModel=e=>{const{flavour:t,children:r}=e,o=this.page.schema.flavourSchemaMap.get(t);if(!o)return console.warn(`Cannot find schema for ${t}.`),Ei`${Di}`;const i=this.componentMap.get(o);return i?(this._onLoadModel(e),Ei`<${i}
      ${Aj(this.blockIdAttr)}=${e.id}
      .root=${this}
      .page=${this.page}
      .model=${e}
      .content=${Ei`${Vs(r,a=>a.id,a=>this.renderModel(a))}`}
    ></${i}>`):(console.warn(`Cannot find tag for ${t}.`),Ei`${Di}`)},this._onLoadModel=e=>{const{id:t}=e;this.modelSubscribed.has(t)||(e.propsUpdated.on(()=>{this.requestUpdate()}),e.childrenUpdated.on(()=>{this.requestUpdate()}),this.modelSubscribed.add(t))}}connectedCallback(){super.connectedCallback(),this.uiEventDispatcher.mount()}disconnectedCallback(){super.disconnectedCallback(),this.uiEventDispatcher.unmount()}render(){const{root:e}=this.page;return e?this.renderModel(e):null}};dx([Ft()],Bv.prototype,"componentMap",void 0);dx([Ft()],Bv.prototype,"page",void 0);dx([Ft()],Bv.prototype,"blockIdAttr",void 0);Bv=dx([lr("block-suite-root")],Bv);class lQ{constructor(){this.activeSlot=new Yo,this.clearActive=()=>{this.activeElement!=null&&(this.activeElement=void 0,this.activeSlot.emit(void 0))}}isActive(e){return this.activeElement?this.activeElement.contains(e):!1}setActive(e){e!==this.activeElement&&(this.activeElement=e,this.activeSlot.emit(e))}setIfNoActive(e){this.activeElement||this.setActive(e)}getActiveEditor(){return this.activeElement}}const ca=new lQ;var zd;(function(n){n[n.Thin=4]="Thin",n[n.Thick=10]="Thick"})(zd||(zd={}));class DR{constructor(e,t){this._disposables=new Ya,this.container=e,this._dispatcher=t}get page(){return this.container.page}}function ik(n){return!(Tr(n,["affine:embed","affine:divider","affine:code"])||Tr(n,["affine:paragraph"])&&["h1","h2","h3","h4","h5","h6","quote"].includes(n.type??""))}function NR(n){var e;return n.children.length!==0?!n.children.find(r=>!NR(r)):!((e=n.text)!=null&&e.length)&&!n.sourceId&&n.flavour!=="affine:code"}function Qp(n,e,t=1e-4){return Math.abs(n-e)<t}function wv(n,e){return new CustomEvent(n,{detail:e})}function X9(){}function ux(n,e,{leading:t=!0,trailing:r=!0}={}){let o=null,i=null;const a=()=>{i&&r?(n(...i),i=null,o=setTimeout(a,e)):o=null};return function(...s){if(o){i=s;return}t&&n.apply(this,s),o=setTimeout(a,e)}}const zR=(n,e,{leading:t=!0,trailing:r=!0}={})=>{let o=null,i=null;const a=()=>{i&&r?(n(...i),i=null,o=setTimeout(a,e)):o=null};return function(...s){o&&(i=s,clearTimeout(o)),t&&!o&&n(...s),o=setTimeout(a,e)}},x1=(n,e,t)=>n<e?e:n>t?t:n;function Jl(n,e){const t={};return n.forEach(r=>{const o=e(r);t[o]||(t[o]=0),t[o]+=1}),t}function Ql(n,e){if(!n.length)return null;let t=n[0],r=e(t);for(let o=1;o<n.length;o++){const i=n[o],a=e(i);a>r&&(r=a,t=i)}return t}function _6(n){return n.ctrlKey||n.metaKey||n.altKey}function cQ(n){return n.key.length===1&&!_6(n)}function dQ(n,e,t){let r=0;for(let o=0;o<n.length;o++)if(e(n[o])&&(r++,r>=t))return!0;return!1}function BR(n,e){const t={};for(const r of n){const o=typeof e=="function"?e(r):r[e];t[o]||(t[o]=[]),t[o].push(r)}return t}function uQ(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function HR(n,e){const t=n.trim().toLowerCase().split("").filter(o=>o!==" ").join("");return new RegExp(e.split("").filter(o=>o!==" ").map(o=>`${uQ(o)}.*`).join(""),"i").test(t)}class ho{constructor(e=0,t=0){this.x=e,this.y=t}static from(e,t){return Array.isArray(e)?new ho(e[0],e[1]):typeof e=="number"?new ho(e,t??e):new ho(e.x,e.y)}set(e,t){this.x=e,this.y=t}equals({x:e,y:t}){return this.x===e&&this.y===t}add(e){return new ho(this.x+e.x,this.y+e.y)}scale(e){return new ho(this.x*e,this.y*e)}subtract(e){return new ho(this.x-e.x,this.y-e.y)}clone(){return new ho(this.x,this.y)}cross(e){return this.x*e.y-this.y*e.x}lerp(e,t){return new ho(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}toArray(){return[this.x,this.y]}static min(e,t){return new ho(Math.min(e.x,t.x),Math.min(e.y,t.y))}static max(e,t){return new ho(Math.max(e.x,t.x),Math.max(e.y,t.y))}static clamp(e,t,r){return new ho(x1(e.x,t.x,r.x),x1(e.y,t.y,r.y))}}class Xi{constructor(e,t,r,o){const[i,a]=e<=r?[e,r]:[r,e],[s,l]=t<=o?[t,o]:[o,t];this.min=new ho(i,s),this.max=new ho(a,l)}get width(){return this.max.x-this.min.x}set width(e){this.max.x=this.min.x+e}get height(){return this.max.y-this.min.y}set height(e){this.max.y=this.min.y+e}get left(){return this.min.x}set left(e){this.min.x=e}get top(){return this.min.y}set top(e){this.min.y=e}get right(){return this.max.x}set right(e){this.max.x=e}get bottom(){return this.max.y}set bottom(e){this.max.y=e}center(){return new ho((this.left+this.right)/2,(this.top+this.bottom)/2)}extend_with(e){this.min=ho.min(this.min,e),this.max=ho.max(this.max,e)}extend_with_x(e){this.min.x=Math.min(this.min.x,e),this.max.x=Math.max(this.max.x,e)}extend_with_y(e){this.min.y=Math.min(this.min.y,e),this.max.y=Math.max(this.max.y,e)}equals({min:e,max:t}){return this.min.equals(e)&&this.max.equals(t)}contains({min:e,max:t}){return this.isPointIn(e)&&this.isPointIn(t)}intersects({left:e,top:t,right:r,bottom:o}){return this.left<=r&&e<=this.right&&this.top<=o&&t<=this.bottom}isPointIn({x:e,y:t}){return this.left<=e&&e<=this.right&&this.top<=t&&t<=this.bottom}isPointDown({x:e,y:t}){return this.bottom<t&&this.left<=e&&this.right>=e}isPointUp({x:e,y:t}){return t<this.top&&this.left<=e&&this.right>=e}isPointLeft({x:e,y:t}){return e<this.left&&this.top<=t&&this.bottom>=t}isPointRight({x:e,y:t}){return e>this.right&&this.top<=t&&this.bottom>=t}intersect(e){return Xi.fromPoints(ho.max(this.min,e.min),ho.min(this.max,e.max))}clamp(e){return ho.clamp(e,this.min,this.max)}clone(){const{left:e,top:t,right:r,bottom:o}=this;return new Xi(e,t,r,o)}toDOMRect(){const{left:e,top:t,width:r,height:o}=this;return new DOMRect(e,t,r,o)}static fromLTRB(e,t,r,o){return new Xi(e,t,r,o)}static fromLWTH(e,t,r,o){return new Xi(e,r,e+t,r+o)}static fromXY(e,t){return Xi.fromPoint(new ho(e,t))}static fromPoint(e){return Xi.fromPoints(e.clone(),e)}static fromPoints(e,t){const r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),i=Math.min(t.x,e.x),a=Math.min(t.y,e.y);return Xi.fromLWTH(i,r,a,o)}static fromDOMRect({left:e,top:t,right:r,bottom:o}){return Xi.fromLTRB(e,t,r,o)}static fromDOM(e){return Xi.fromDOMRect(e.getBoundingClientRect())}}const Hu="",xI="";/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const FR="important",hQ=" !"+FR,Ur=lx(class extends cx{constructor(n){var e;if(super(n),n.type!==ok.ATTRIBUTE||n.name!=="style"||((e=n.strings)===null||e===void 0?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(n){return Object.keys(n).reduce((e,t)=>{const r=n[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(n,[e]){const{style:t}=n.element;if(this.ht===void 0){this.ht=new Set;for(const r in e)this.ht.add(r);return this.render(e)}this.ht.forEach(r=>{e[r]==null&&(this.ht.delete(r),r.includes("-")?t.removeProperty(r):t[r]="")});for(const r in e){const o=e[r];if(o!=null){this.ht.add(r);const i=typeof o=="string"&&o.endsWith(hQ);r.includes("-")||i?t.setProperty(r,i?o.slice(0,-11):o,i?FR:""):t[r]=o}}return ox}});function fQ(n){let e="";n.underline&&(e+="underline"),n.strike&&(e+=" line-through");let t={};return n.code&&(t={"font-family":'"SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace',"line-height":"normal",background:"rgba(135,131,120,0.15)",color:"#EB5757","border-radius":"3px","font-size":"85%",padding:"0.2em 0.4em"}),Ur({"word-wrap":"break-word","white-space":"break-spaces","font-weight":n.bold?"bold":"normal","font-style":n.italic?"italic":"normal","text-decoration":e.length>0?e:"none",...t})}const ZR=()=>n=>{const e=n.attributes?fQ(n.attributes):Ur({});return rt`<span style=${e}
      ><v-text .str=${n.insert}></v-text
    ></span>`};var ak=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let E6=class extends so{constructor(){super(...arguments),this.delta={insert:Hu},this.attributeRenderer=ZR()}render(){return rt`<span data-virgo-element="true"
      >${this.attributeRenderer(this.delta)}</span
    >`}createRenderRoot(){return this}};ak([Ft({type:Object})],E6.prototype,"delta",void 0);ak([Ft({type:Function,attribute:!1})],E6.prototype,"attributeRenderer",void 0);E6=ak([lr("v-element")],E6);var UR=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Dg=class extends so{constructor(){super(...arguments),this.elements=[]}get vElements(){return Array.from(this.querySelectorAll("v-element"))}get textLength(){return this.vElements.reduce((e,t)=>e+t.delta.insert.length,0)}get textContent(){return this.vElements.reduce((e,t)=>e+t.delta.insert,"")}async getUpdateComplete(){const e=await super.getUpdateComplete();return await Promise.all(this.vElements.map(t=>t.updateComplete)),e}firstUpdated(){this.style.display="block"}render(){return this.elements.length===0?rt`<div><v-text .str=${Hu}></v-text></div>`:rt`<div>${this.elements}</div>`}createRenderRoot(){return this}};UR([Ft({attribute:!1})],Dg.prototype,"elements",void 0);Dg=UR([lr("v-line")],Dg);var sk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Ng=class extends so{constructor(){super(...arguments),this.str=Hu,this.styles=Ur({"word-wrap":"break-word","white-space":"break-spaces"})}render(){return rt`<span style=${this.styles} data-virgo-text="true"
      >${this.str}</span
    >`}createRenderRoot(){return this}};sk([Ft()],Ng.prototype,"str",void 0);sk([Ft()],Ng.prototype,"styles",void 0);Ng=sk([lr("v-text")],Ng);const WR=Td.object({bold:Td.literal(!0).optional().catch(void 0),italic:Td.literal(!0).optional().catch(void 0),underline:Td.literal(!0).optional().catch(void 0),strike:Td.literal(!0).optional().catch(void 0),code:Td.literal(!0).optional().catch(void 0),link:Td.string().optional().catch(void 0)});function pQ(n){const e=[];let t=n.insert;for(;t.length>0;){const r=t.indexOf(`
`);if(r===-1){e.push({insert:t,attributes:n.attributes});break}t.slice(0,r).length>0&&e.push({insert:t.slice(0,r),attributes:n.attributes}),e.push(`
`),t=t.slice(r+1)}return e}function gQ(n){if(n.length===0)return[[]];const e=n.flatMap(pQ);function*t(r){let o=0;for(let i=0;i<r.length;i++)if(r[i]===`
`){const a=r.slice(o,i);o=i+1,yield a}else i===r.length-1&&(yield r.slice(o));r.at(-1)===`
`&&(yield[])}return[...t(e)]}function mQ(n){var e;return n instanceof Text&&((e=n.parentElement)==null?void 0:e.dataset.virgoText)==="true"}function vQ(n){return n instanceof HTMLElement&&n.dataset.virgoElement==="true"}function bQ(n){return n instanceof HTMLElement&&(n instanceof Dg||n.parentElement instanceof Dg)}function yQ(n){return n instanceof HTMLElement&&n.dataset.virgoRoot==="true"}function hx(n){return n.wholeText===Hu?0:n.wholeText.length}function K1(n){return Array.from(n.querySelectorAll('[data-virgo-text="true"]')).map(r=>{const o=Array.from(r.childNodes).find(i=>i instanceof Text);if(!o)throw new Error("text node not found");return o})}function q9(n,e){if(mQ(n))return[n,e];if(vQ(n)){const r=K1(n);let o=e;for(const i of r){if(e<=i.length)return[i,o];o-=i.length}return null}if(bQ(n)||yQ(n))return J9(n,e,!0);if(!(n instanceof Node))return null;const t=xQ(n);return t?wQ(t,n,e):null}function w1(n,e,t){if(t.dataset.virgoRoot!=="true")throw new Error("textRangeToDomPoint should be called with editor root element");if(!t.contains(n))return null;const r=K1(t),o=r.indexOf(n);let i=0;for(const d of r.slice(0,o))i+=hx(d);n.wholeText!==Hu&&(i+=e);const a=n.parentElement;if(!a)throw new Error("text element parent not found");const s=a.closest("v-line");if(!s)throw new Error("line element not found");const l=Array.from(t.querySelectorAll("v-line")).indexOf(s);return{text:n,index:i+l}}function xQ(n){var r,o;const e=(r=n.parentElement)==null?void 0:r.closest("v-line");if(e)return Array.from(e.querySelectorAll("v-element"));const t=n instanceof Element?n.closest('[data-virgo-root="true"]'):(o=n.parentElement)==null?void 0:o.closest('[data-virgo-root="true"]');return t?Array.from(t.querySelectorAll("v-line")):null}function wQ(n,e,t){const r=n[0];for(let o=0;o<n.length;o++){const i=n[o];if(o===0&&CI(e,i))return J9(r,t,!0);if(CQ(e,i))return J9(r,t,!1);if(o===n.length-1&&SI(e,i)||o<n.length-1&&SI(e,i)&&CI(e,n[o+1]))return wI(i)}return null}function wI(n){const e=K1(n);if(e.length===0)return null;const t=e[e.length-1];return[t,hx(t)]}function J9(n,e,t){const r=K1(n);if(r.length===0)return null;const o=t?r[0]:r[r.length-1];return[o,e===0?e:o.length]}function CQ(n,e){return e.compareDocumentPosition(n)===Node.DOCUMENT_POSITION_CONTAINED_BY||e.compareDocumentPosition(n)===(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)}function CI(n,e){return n.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING}function SI(n,e){return n.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING}function lk(n){const e=n.rootElement;if(!e)throw new Error("editor root element not found");const t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&"getSelection"in t?t:e.ownerDocument}function VR(n){let e=!1;if(!n.isCollapsed&&n.anchorNode&&n.focusNode){const t=document.createRange();t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),e=t.collapsed,t.detach()}return e}const SQ=({rootElement:n,anchorText:e,focusText:t})=>n.contains(e)&&n.contains(t),kQ=({rootElement:n,anchorText:e,focusText:t,anchorTextOffset:r,focusTextOffset:o})=>{const i=w1(e,r,n),a=w1(t,o,n);return!i||!a?null:{index:Math.min(i.index,a.index),length:Math.abs(i.index-a.index)}},_Q=({rootElement:n,anchorText:e,focusText:t})=>!n.contains(e)&&n.contains(t),EQ=({selection:n,yText:e,rootElement:t,anchorText:r,focusText:o,anchorTextOffset:i,focusTextOffset:a})=>{if(VR(n)){const s=w1(r,i,t);return s?{index:s.index,length:e.length-s.index}:null}else{const s=w1(o,a,t);return s?{index:0,length:s.index}:null}},PQ=({rootElement:n,anchorText:e,focusText:t})=>n.contains(e)&&!n.contains(t),MQ=({selection:n,yText:e,rootElement:t,anchorText:r,focusText:o,anchorTextOffset:i,focusTextOffset:a})=>{if(VR(n)){const s=w1(o,a,t);return s?{index:0,length:s.index}:null}else{const s=w1(r,i,t);return s?{index:s.index,length:e.length-s.index}:null}},IQ=({rootElement:n,anchorText:e,focusText:t})=>!n.contains(e)&&!n.contains(t),TQ=({yText:n})=>({index:0,length:n.length}),OQ=(n,e,t)=>{const{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:a}=n,s=q9(r,o),l=q9(i,a);if(!s||!l)return null;const[d,u]=s,[p,f]=l;return{rootElement:e,selection:n,yText:t,anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:a,anchorText:d,anchorTextOffset:u,focusText:p,focusTextOffset:f}};function AQ(n,e,t){const r=OQ(n,e,t);return r?SQ(r)?kQ(r):_Q(r)?EQ(r):PQ(r)?MQ(r):IQ(r)?TQ(r):null:null}function LQ(n,e){const t=Array.from(n.querySelectorAll("v-line"));let r=null,o=null,i=0,a=0,s=0;for(let d=0;d<t.length&&!(r&&o);d++){const u=K1(t[d]);for(const p of u){const f=hx(p);if(!r&&s+f>=e.index&&(r=p,i=e.index-s),!o&&s+f>=e.index+e.length&&(o=p,a=e.index+e.length-s),r&&o)break;s+=f}s+=1}if(!r||!o)return null;const l=document.createRange();return l.setStart(r,i),l.setEnd(o,a),l}function $Q(n,e,t){return rt`<v-element
    .delta=${{insert:n.insert,attributes:e(n.attributes)}}
    .attributeRenderer=${t}
  ></v-element>`}function jQ(n,e,t,r){n.index>=0&&e&&(t.slots.vRangeUpdated.emit([{index:n.index+e.length,length:0},"input"]),t.insertText(n,e,r))}function RQ(n,e){n.index>=0&&(e.slots.vRangeUpdated.emit([{index:n.index+1,length:0},"input"]),e.insertLineBreak(n))}function DQ(n,e){if(n.index>=0){if(n.length>0){e.slots.vRangeUpdated.emit([{index:n.index,length:0},"input"]),e.deleteText(n);return}if(n.index>0){const t=e.yText.toString().slice(0,n.index),r=[...new Intl.Segmenter().segment(t)],o=r[r.length-1].segment.length;e.slots.vRangeUpdated.emit([{index:n.index-o,length:0},"input"]),e.deleteText({index:n.index-o,length:o})}}}function NQ(n,e){const t=/\S+\s*$/.exec(n.yText.toString().slice(0,e.index));if(t){const r=t[0].length;n.slots.vRangeUpdated.emit([{index:e.index-r,length:0},"input"]),n.deleteText({index:e.index-r,length:r})}}function zQ(n,e){if(e.length>0){n.slots.vRangeUpdated.emit([{index:e.index,length:0},"input"]),n.deleteText(e);return}if(e.index>0){const t=n.yText.toString(),r=e.index-Math.max(0,t.slice(0,e.index).lastIndexOf(`
`));n.slots.vRangeUpdated.emit([{index:e.index-r,length:0},"input"]),n.deleteText({index:e.index-r,length:r})}}function BQ(n,e){if(e.index<n.yText.length){const t=n.yText.toString(),r=[...new Intl.Segmenter().segment(t)],o=t.slice(0,e.index),i=[...new Intl.Segmenter().segment(o)],a=r[i.length].segment.length;n.slots.vRangeUpdated.emit([{index:e.index,length:0},"input"]),n.deleteText({index:e.index,length:a})}}function HQ(n,e,t,r,o){switch(n){case"insertText":{jQ(r,e,o,t);return}case"insertParagraph":{RQ(r,o);return}case"deleteContentBackward":case"deleteByCut":{DQ(r,o);return}case"deleteWordBackward":{NQ(o,r);return}case"deleteHardLineBackward":case"deleteSoftLineBackward":{zQ(o,r);return}case"deleteContentForward":{BQ(o,r);return}}}class FQ{constructor(e){this._marks=null,this._attributeRenderer=ZR(),this._attributeSchema=WR,this.setMarks=t=>{this._marks=t},this.resetMarks=()=>{this._marks=null},this.setAttributeSchema=t=>{this._attributeSchema=t},this.setAttributeRenderer=t=>{this._attributeRenderer=t},this.getFormat=(t,r=!1)=>{const i=this._editor.deltaService.getDeltasByVRange(t).filter(([s,l])=>l.index+l.length>t.index&&l.index<=t.index+t.length).map(([s])=>s.attributes);return r?i.reduce((s,l)=>({...s,...l}),{}):!i.length||i.some(s=>!s)?{}:i.reduce((s,l)=>{const d={};for(const u in s){const p=u;s[p]===l[p]&&(d[p]=s[p])}return d})},this.normalizeAttributes=t=>{if(!t)return;const r=this._attributeSchema.safeParse(t);if(!r.success){console.error(r.error);return}return Object.fromEntries(Object.entries(r.data).filter(([o,i])=>i))},this._editor=e}get marks(){return this._marks}get attributeRenderer(){return this._attributeRenderer}}class ZQ{constructor(e){this.mapDeltasInVRange=(t,r)=>{const o=this.deltas,i=[];return o.reduce((a,s)=>{const l=s.insert.length,d=t.index-l,u=t.index+t.length;if(a>=d&&(a<u||t.length===0&&a===t.index)){const f=r(s,a);i.push(f)}return a+l},0),i},this.getDeltaByRangeIndex=t=>{const r=this.deltas;let o=0;for(const i of r){if(o+i.insert.length>=t)return i;o+=i.insert.length}return null},this.getDeltasByVRange=t=>this.mapDeltasInVRange(t,(r,o)=>[r,{index:o,length:r.insert.length}]),this.render=async()=>{const t=this._editor.rootElement,r=this.deltas,i=gQ(r).map(s=>{const l=[];return s.length>0&&s.forEach(d=>{const u=$Q(d,this._editor.attributeService.normalizeAttributes,this._editor.attributeService.attributeRenderer);l.push(u)}),rt`<v-line .elements=${l}></v-line>`});try{Rv(Vs(i.map((s,l)=>({line:s,index:l})),s=>s.index,s=>s.line),t)}catch{Rv(rt`<div></div>`,t),this._editor.requestUpdate()}const a=Array.from(t.querySelectorAll("v-line"));await Promise.all(a.map(s=>s.updateComplete)),this._editor.rangeService.syncVRange(),this._editor.slots.updated.emit()},this._editor=e}get deltas(){return this._editor.yText.toDelta()}}class UQ{constructor(e){this._mountAbortController=null,this._handlerAbortController=null,this._isComposing=!1,this._handlers={},this._previousAnchor=null,this._previousFocus=null,this.defaultHandlers={paste:t=>{var o;const r=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(r){const i=this._editor.getVRange(),a=r.replace(/(\r\n|\r|\n)/g,`
`);i&&(this._editor.insertText(i,a),this._editor.setVRange({index:i.index+a.length,length:0}))}}},this.mount=()=>{const t=this._editor.rootElement;this._mountAbortController=new AbortController,document.addEventListener("selectionchange",this._onSelectionChange);const r=this._mountAbortController.signal;t.addEventListener("beforeinput",this._onBeforeInput,{signal:r}),t.querySelectorAll('[data-virgo-text="true"]').forEach(o=>{o.addEventListener("dragstart",i=>{i.preventDefault()})}),t.addEventListener("compositionstart",this._onCompositionStart,{signal:r}),t.addEventListener("compositionend",this._onCompositionEnd,{signal:r}),t.addEventListener("scroll",this._onScroll),this.bindHandlers()},this.unmount=()=>{document.removeEventListener("selectionchange",this._onSelectionChange),this._mountAbortController&&(this._mountAbortController.abort(),this._mountAbortController=null),this._handlerAbortController&&(this._handlerAbortController.abort(),this._handlerAbortController=null),this._handlers=this.defaultHandlers},this.bindHandlers=(t=this.defaultHandlers)=>{this._handlers=t,this._handlerAbortController&&this._handlerAbortController.abort(),this._handlerAbortController=new AbortController,this._handlers.paste&&this._editor.rootElement.addEventListener("paste",this._handlers.paste,{signal:this._handlerAbortController.signal}),this._handlers.keydown&&this._editor.rootElement.addEventListener("keydown",this._handlers.keydown,{signal:this._handlerAbortController.signal})},this._onSelectionChange=()=>{const t=this._editor.rootElement;if(this._isComposing)return;const o=lk(this._editor).getSelection();if(!o||o.rangeCount===0)return;const i=o.getRangeAt(0);if(i.startContainer===i.endContainer&&i.startContainer.textContent===Hu&&i.startOffset===1){i.setStart(i.startContainer,0),i.setEnd(i.endContainer,0),o.removeAllRanges(),o.addRange(i);return}if(!i)return;if(!i.intersectsNode(t))if(i.endContainer.contains(t)&&Array.from(i.endContainer.childNodes).filter(s=>s instanceof HTMLElement).length===1&&i.startContainer.contains(t)&&Array.from(i.startContainer.childNodes).filter(s=>s instanceof HTMLElement).length===1)this._editor.focusEnd();else return;this._previousAnchor=[i.startContainer,i.startOffset],this._previousFocus=[i.endContainer,i.endOffset];const a=this._editor.toVRange(o);a&&this._editor.slots.vRangeUpdated.emit([a,"native"]),((i.startContainer.nodeType!==Node.TEXT_NODE||i.endContainer.nodeType!==Node.TEXT_NODE)&&i.startContainer!==this._previousAnchor[0]&&i.endContainer!==this._previousFocus[0]&&i.startOffset!==this._previousAnchor[1]&&i.endOffset!==this._previousFocus[1]||i.startContainer.nodeType===Node.COMMENT_NODE||i.endContainer.nodeType===Node.COMMENT_NODE)&&this._editor.syncVRange()},this._onCompositionStart=()=>{this._isComposing=!0},this._onCompositionEnd=t=>{var s,l,d;if(this._isComposing=!1,this._editor.isReadonly)return;const r=this._editor.getVRange();if(!r)return;let o={event:t,data:t.data,vRange:r,skipDefault:!1,attributes:null};if(this._handlers.virgoCompositionEnd&&(o=this._handlers.virgoCompositionEnd(o)),o.skipDefault)return;const{data:i,vRange:a}=o;if(a.index>=0){const u=window.getSelection();if(u&&u.rangeCount!==0){const f=u.getRangeAt(0).startContainer;if(f instanceof Text){if(((s=f.parentElement)==null?void 0:s.dataset.virgoText)!=="true")f.remove();else{const[c]=this._editor.getTextPoint(a.index),g=(l=c.parentElement)==null?void 0:l.closest("v-text");if(g)g.str!==c.textContent&&(c.textContent=g.str);else{const m=(d=c.parentElement)==null?void 0:d.closest('[data-virgo-text="true"]');if(m instanceof HTMLElement)if(m.dataset.virgoTextValue)m.dataset.virgoTextValue!==c.textContent&&(c.textContent=m.dataset.virgoTextValue);else throw new Error("We detect a forged v-text node but it has no data-virgo-text-value attribute.")}}const h=this._editor.toDomRange(a);h&&(xt(h),u.removeAllRanges(),u.addRange(h))}}i&&i.length>0&&(this._editor.insertText(a,i,o.attributes??{}),this._editor.slots.vRangeUpdated.emit([{index:a.index+i.length,length:0},"input"]))}},this._firstRecomputeInFrame=!0,this._onBeforeInput=t=>{if(t.preventDefault(),this._editor.isReadonly||this._isComposing)return;this._firstRecomputeInFrame&&(this._firstRecomputeInFrame=!1,this._onSelectionChange(),requestAnimationFrame(()=>{this._firstRecomputeInFrame=!0}));const r=this._editor.getVRange();if(!r)return;let o={event:t,data:t.data,vRange:r,skipDefault:!1,attributes:null};if(this._handlers.virgoInput&&(o=this._handlers.virgoInput(o)),o.skipDefault)return;const{event:i,data:a,vRange:s}=o;HQ(i.inputType,a,o.attributes??{},s,this._editor)},this._onScroll=t=>{this._editor.slots.scrollUpdated.emit(this._editor.rootElement.scrollLeft)},this._editor=e}}class WQ{constructor(e){this._vRange=null,this._lastScrollLeft=0,this.onVRangeUpdated=([t,r])=>{if(this._vRange=t,document.dispatchEvent(new CustomEvent("virgo-vrange-updated")),r!=="other")return;requestAnimationFrame(()=>{this._vRange&&this._applyVRange(this._vRange)})},this.getVRange=()=>this._vRange,this.setVRange=t=>{this._editor.slots.vRangeUpdated.emit([t,"other"])},this.syncVRange=()=>{this._vRange&&this._applyVRange(this._vRange)},this.toDomRange=t=>{const r=this._editor.rootElement;return LQ(r,t)},this.toVRange=t=>{const{rootElement:r,yText:o}=this._editor;return AQ(t,r,o)},this.mergeRanges=(t,r)=>({index:Math.max(t.index,r.index),length:Math.min(t.index+t.length,r.index+r.length)-Math.max(t.index,r.index)}),this.onScrollUpdated=t=>{this._lastScrollLeft=t},this._applyVRange=t=>{if(!this._editor.isActive)return;const o=lk(this._editor).getSelection();if(!o)return;const i=this.toDomRange(t);i&&(o.removeAllRanges(),o.addRange(i),this._scrollLineIntoViewIfNeeded(i),this._scrollCursorIntoViewIfNeeded(i),this._editor.slots.rangeUpdated.emit(i))},this._scrollLineIntoViewIfNeeded=t=>{if(this._editor.shouldLineScrollIntoView){let r=t.endContainer.parentElement;for(;!(r instanceof Dg);)r=(r==null?void 0:r.parentElement)??null;r==null||r.scrollIntoView({block:"nearest"})}},this._scrollCursorIntoViewIfNeeded=t=>{if(this._editor.shouldCursorScrollIntoView){const r=this._editor.rootElement,o=r.getBoundingClientRect(),i=t.getBoundingClientRect();let a=0;i.left>o.left&&(a=Math.max(this._lastScrollLeft,i.left-o.right)),r.scrollLeft=a,this._lastScrollLeft=a}},this._editor=e}}class od{get yText(){return this._yText}get rootElement(){return xt(this._rootElement),this._rootElement}get eventService(){return this._eventService}get rangeService(){return this._rangeService}get attributeService(){return this._attributeService}get deltaService(){return this._deltaService}get marks(){return this._attributeService.marks}constructor(e,t){if(this._rootElement=null,this._isReadonly=!1,this._eventService=new UQ(this),this._rangeService=new WQ(this),this._attributeService=new FQ(this),this._deltaService=new ZQ(this),this.shouldLineScrollIntoView=!0,this.shouldCursorScrollIntoView=!0,this.setAttributeSchema=this._attributeService.setAttributeSchema,this.setAttributeRenderer=this._attributeService.setAttributeRenderer,this.setMarks=this._attributeService.setMarks,this.resetMarks=this._attributeService.resetMarks,this.getFormat=this._attributeService.getFormat,this.bindHandlers=this._eventService.bindHandlers,this.toDomRange=this.rangeService.toDomRange,this.toVRange=this.rangeService.toVRange,this.getVRange=this.rangeService.getVRange,this.setVRange=this.rangeService.setVRange,this.syncVRange=this.rangeService.syncVRange,this.getDeltasByVRange=this.deltaService.getDeltasByVRange,this.getDeltaByRangeIndex=this.deltaService.getDeltaByRangeIndex,this.mapDeltasInVRange=this.deltaService.mapDeltasInVRange,this._onYTextChange=()=>{if(this.yText.toString().includes("\r"))throw new Error("yText must not contain \r because it will break the range synchronization");Promise.resolve().then(()=>{xt(this._rootElement),this.deltaService.render()})},!e.doc)throw new Error("yText must be attached to a Y.Doc");if(e.toString().includes("\r"))throw new Error("yText must not contain \r because it will break the range synchronization");this._yText=e,this._isActive=(t==null?void 0:t.active)??(()=>!0),this.slots={mounted:new Yo,unmounted:new Yo,updated:new Yo,vRangeUpdated:new Yo,rangeUpdated:new Yo,scrollUpdated:new Yo},this.slots.vRangeUpdated.on(this.rangeService.onVRangeUpdated),this.slots.scrollUpdated.on(this.rangeService.onScrollUpdated)}mount(e){const t=e;t.virgoEditor=this,this._rootElement=t,this._rootElement.replaceChildren(),this._rootElement.contentEditable="true",this._rootElement.dataset.virgoRoot="true",this.yText.observe(this._onYTextChange),this._deltaService.render(),this._eventService.mount(),this.slots.mounted.emit()}unmount(){var e;this._eventService.unmount(),this.yText.unobserve(this._onYTextChange),(e=this._rootElement)==null||e.replaceChildren(),this._rootElement=null,this.slots.unmounted.emit()}requestUpdate(){Promise.resolve().then(()=>{xt(this._rootElement),this._deltaService.render()})}getNativeSelection(){const t=lk(this).getSelection();return!t||t.rangeCount===0?null:t}getTextPoint(e){xt(this._rootElement);const t=Array.from(this._rootElement.querySelectorAll("v-line"));let r=0;for(const o of t){const i=od.getTextNodesFromElement(o);for(const a of i){if(!a.textContent)throw new Error("text element should have textContent");if(r+a.textContent.length>=e)return[a,e-r];r+=hx(a)}r+=1}throw new Error("failed to find leaf")}getLine(e){xt(this._rootElement);const t=Array.from(this._rootElement.querySelectorAll("v-line"));let r=0;for(const o of t){if(e>=r&&e<=r+o.textLength)return[o,e-r];if(e===r+o.textLength&&e===this.yText.length)return[o,e-r];r+=o.textLength+1}throw new Error("failed to find line")}setReadonly(e){this.rootElement.contentEditable=e?"false":"true",this._isReadonly=e}get isReadonly(){return this._isReadonly}get isActive(){return this._isActive()}focusEnd(){this.rangeService.setVRange({index:this.yText.length,length:0})}deleteText(e){this._transact(()=>{this.yText.delete(e.index,e.length)})}insertText(e,t,r={}){this._attributeService.marks&&(r={...r,...this._attributeService.marks});const o=this._attributeService.normalizeAttributes(r);if(!t||!t.length)throw new Error("text must not be empty");this._transact(()=>{this.yText.delete(e.index,e.length),this.yText.insert(e.index,t,o)})}insertLineBreak(e){this._transact(()=>{this.yText.delete(e.index,e.length),this.yText.insert(e.index,`
`)})}formatText(e,t,r={}){const{match:o=()=>!0,mode:i="merge"}=r;this._deltaService.getDeltasByVRange(e).filter(([s,l])=>o(s,l)).forEach(([s,l])=>{const d=this._rangeService.mergeRanges(e,l);i==="replace"&&this.resetText(d),this._transact(()=>{this.yText.format(d.index,d.length,t)})})}resetText(e){const t=[];for(let o=e.index;o<=e.index+e.length;o++){const i=this.getDeltaByRangeIndex(o);i&&t.push(i)}const r=Object.fromEntries(t.flatMap(o=>o.attributes?Object.keys(o.attributes).map(i=>[i,null]):[]));this._transact(()=>{this.yText.format(e.index,e.length,{...r})})}setText(e,t={}){this._transact(()=>{this.yText.delete(0,this.yText.length),this.yText.insert(0,e,t)})}_transact(e){const t=this.yText.doc;if(!t)throw new Error("yText is not attached to a doc");t.transact(e,t.clientID)}}od.nativePointToTextPoint=q9;od.textPointToDomPoint=w1;od.getTextNodesFromElement=K1;async function Db(n,e){var r;const t=await fk(n);return(r=t==null?void 0:t.vEditor)==null||r.setVRange(e),new Promise(o=>{var i;(i=t==null?void 0:t.vEditor)==null||i.slots.rangeUpdated.once(()=>{o()})})}function za(n,e,t={index:0,length:0}){const r=n.getBlockById(e);if(xt(r),!Tr(r,["affine:divider"]))return Db(r,t)}function VQ(n){const e=n.getVRange();return(e==null?void 0:e.index)===0&&(e==null?void 0:e.length)===0}function KR(n,e,t){if(e===t)return!0;let r;for(;;){if(r=n.getParent(e),r===null)return!1;if(r.id===t.id)return!0;e=r}}function p5(n,e,t,r,o){var i,a,s,l,d;if(Tr(e,["affine:list"])&&e.type===t)return!1;if(Tr(e,["affine:paragraph"])){const u=n.getParent(e);if(!u)return!1;const p=u.children.indexOf(e);(i=e.text)==null||i.insert(" ",r.length),n.captureSync(),(a=e.text)==null||a.delete(0,r.length+1);const f={type:t,text:(s=e.text)==null?void 0:s.clone(),children:e.children,...o};n.deleteBlock(e);const h=n.addBlock("affine:list",f,u,p);za(n,h)}else Tr(e,["affine:list"])&&e.type!==t&&((l=e.text)==null||l.insert(" ",r.length),n.captureSync(),(d=e.text)==null||d.delete(0,r.length+1),n.updateBlock(e,{type:t}),za(n,e.id));return!0}function Wp(n,e,t,r){var o,i,a,s,l;if(Tr(e,["affine:paragraph"])&&e.type===t)return!1;if(Tr(e,["affine:paragraph"])){if(Tr(e,["affine:paragraph"])&&e.type!==t){(s=e.text)==null||s.insert(" ",r.length),n.captureSync(),(l=e.text)==null||l.delete(0,r.length+1);const d=Cs(e);d&&d.setVRange({index:0,length:0}),n.updateBlock(e,{type:t})}}else{const d=n.getParent(e);if(!d)return!1;const u=d.children.indexOf(e);(o=e.text)==null||o.insert(" ",r.length),n.captureSync(),(i=e.text)==null||i.delete(0,r.length+1);const p={type:t,text:(a=e.text)==null?void 0:a.clone(),children:e.children};n.deleteBlock(e);const f=n.addBlock("affine:paragraph",p,d,u);za(n,f)}return!0}function KQ(n,e,t){var r,o;if(Tr(e,["affine:divider"])||e.type==="quote")return!1;if(!Tr(e,["affine:divider"])){const i=n.getParent(e);if(!i)return!1;const a=i.children.indexOf(e);(r=e.text)==null||r.insert(" ",t.length),n.captureSync(),(o=e.text)==null||o.delete(0,t.length+1);const s={children:e.children};n.addBlock("affine:divider",s,i,a);const l=i.children[a+1];if(l)za(n,l.id);else{const d=n.addBlock("affine:paragraph",{},i);za(n,d)}}return!0}function C3(n,e){const{page:t}=n,r=t.addBlock("affine:bookmark",{url:""},n.id,e);return requestAnimationFrame(()=>{const o=t.getBlockById(r);Hl(o).slots.openInitialModal.emit()}),r}const YQ=/[^\p{Alpha}\p{M}\p{Nd}\p{Pc}\p{Join_C}]/u,YR=/[^\p{Alpha}\p{M}\p{Nd}\p{Pc}\p{Join_C}\s]/u;function GR(n){const e=document.createRange();let t=n.firstChild;for(;t!=null&&t.firstChild;)t=t.firstChild;return t&&(e.setStart(t,0),e.setEnd(t,0)),e}function XR(n){var r,o;const e=document.createRange();let t=n.lastChild;for(;t!=null&&t.lastChild;)t=t.lastChild;return t&&(e.setStart(t,((r=t.textContent)==null?void 0:r.length)||0),e.setEnd(t,((o=t.textContent)==null?void 0:o.length)||0)),e}async function GQ(n,e,t=1){const r=e.closest(".affine-default-viewport"),{top:o,bottom:i}=Xi.fromDOM(e),{clientHeight:a}=document.documentElement,s=(Number(window.getComputedStyle(e).lineHeight.replace(/\D+$/,""))||16)*t;switch(i<n){case!0:{let d=i;return i<dv&&r&&(r.scrollTop=r.scrollTop-dv+i,requestAnimationFrame(()=>{d=e.getBoundingClientRect().bottom})),d-s/2}case!1:{let d=o;return r&&o>a-dv&&(r.scrollTop=r.scrollTop+(o+dv-a),requestAnimationFrame(()=>{d=e.getBoundingClientRect().top})),d+s/2}}}function ck(n,e=1/0,t=0){const r=Gd(n);if(!r)throw new Error("Can't find page component!");if(!r.titleVEditor)throw new Error("Can't find title vEditor!");e>r.titleVEditor.yText.length&&(e=r.titleVEditor.yText.length),r.titleVEditor.setVRange({index:e,length:t})}async function XQ(n,e="end",t=1){var a;const{left:r,right:o}=Xi.fromDOM(n);(a=n.querySelector("v-line"))==null||a.scrollIntoView({block:"nearest"});let i=null;switch(e){case"start":i=GR(n);break;case"end":i=XR(n);break;default:{const{x:s,y:l}=e;let d=s;const u=await GQ(l,n,t);s<=r&&(d=r+1),s>=o&&(d=o-1),i=Uf(d,u);break}}ts(i)}function C1(n,e="end",t=1){var s;if(Tr(n,["affine:frame","affine:page"]))throw new Error("Can't focus frame or page!");const r=Sm(n);xt(r);const o=r.tagName==="AFFINE-DEFAULT-PAGE";if(o&&Tr(n,["affine:embed","affine:divider","affine:code","affine:database","affine:bookmark"])){r.selection.state.clearSelection();const l=(s=Hl(n))==null?void 0:s.getBoundingClientRect();l&&r.slots.selectedRectsUpdated.emit([l]);const d=Hl(n);if(xt(d),r.selection.state.selectedBlocks.push(d),Tr(n,["affine:database"])){const u=n.children.map(p=>Hl(p)).filter(p=>p!==null);r.selection.state.selectedBlocks.push(...u)}r.selection.state.type="block",ts(null),document.activeElement.blur();return}const i=Hl(n),a=i==null?void 0:i.querySelector("[contenteditable]");a&&(o&&(r.selection.state.clearSelection(),r.selection.setFocusedBlock(i)),XQ(a,e,t))}function hv(n,e="start",t=1){const r=Sm(n);xt(r);let o=e;r.tagName==="AFFINE-DEFAULT-PAGE"&&(o?r.lastSelectionPosition=o:r.lastSelectionPosition&&(o=r.lastSelectionPosition));const i=gx(n);i&&o&&C1(i,o,t)}function S3(n,e="start",t=1){const r=Sm(n);xt(r);let o=e;r.tagName==="AFFINE-DEFAULT-PAGE"&&(o?r.lastSelectionPosition=o:r.lastSelectionPosition&&(o=r.lastSelectionPosition));const i=dk(n);i&&C1(i,o,t)}function ts(n){const e=window.getSelection();xt(e),e.removeAllRanges(),n&&e.addRange(n)}function kI(n){var e;n.root&&((e=Sm(n.root))==null||e.selection.clear())}function Cm(){const n=window.getSelection();return n?!!n.rangeCount:!1}function qQ(n=Ba()){return rD(n).length>1}function JQ(n=Ba()){const{height:e}=n.getBoundingClientRect(),t=document.createRange();t.setStart(n.startContainer,n.startOffset);const{height:r}=t.getBoundingClientRect();return e>r}function Ba(n=window.getSelection()){if(!n)throw new Error("Failed to get current range, selection is null");if(n.rangeCount===0)throw new Error("Failed to get current range, rangeCount is 0");return n.rangeCount>1&&console.warn("getCurrentRange may be wrong, rangeCount > 1"),n.getRangeAt(0)}function QQ(n,e,t,r,o,i){i?o.setEnd(t,r):o.setStart(n,e),ts(o)}function fx(n,e){const t=!!document.querySelector("affine-edgeless-page"),{clientX:r,clientY:o,target:i}=e.raw;let a=Uf(r,o);if(!a)return;xt(n);const{startContainer:s,startOffset:l,endContainer:d,endOffset:u}=n,f=(s.nodeType===Node.TEXT_NODE?s.parentElement:s).closest("affine-frame");if(!f)return;let h=null,c=!1;if(t)h=f,c=!0;else{const m=document.elementFromPoint(r,o);if(m!=null&&m.classList.contains("virgo-editor"))return;h=m==null?void 0:m.closest("affine-frame");const b=m==null?void 0:m.closest(".virgo-editor");c=!h||!b,h??(h=cee(o))}if(!h)return;if(c){let m=null;if(i&&"closest"in i&&(m=i.closest(".virgo-editor")),m||(m=eD(o,h)),!m)return;const b=eee({x:r,y:o},m);if(a=Uf(b.x,b.y),!a||a.endContainer.nodeType!==Node.TEXT_NODE||!h.contains(a.endContainer))return}const g=a.comparePoint(d,u)===1;QQ(s,l,d,u,a,g)}function eee(n,e){const{top:t,left:r,right:o,bottom:i}=e.getBoundingClientRect(),a={...n},{x:s,y:l}=n;return l<t?(a.y=t+4,a.x=r+4):l>i?(a.y=i-4,a.x=o-4):s<r?a.x=r:s>o&&(a.x=o),a}function qR(n){const{cursor:e}=window.getComputedStyle(n.raw.target);return e!=="text"}function tee(n,e,t){const r=vee(e.raw.target),o=r==null?void 0:r.closest(`[${Ss}]`),i=(o==null?void 0:o.model)||(o==null?void 0:o.pageModel);if(!i||!Tr(i,["affine:frame","affine:page"]))return;const{clientX:s,clientY:l}=e.raw,d=eD(l,t);if(d!=null&&d.closest("affine-database")||!d)return;const u=Bl(d),p=d.getBoundingClientRect();if(Tr(u,YX)&&l>p.bottom){const f=n.getParent(u);xt(f);const h=n.addBlock("affine:paragraph",{},f.id);za(n,h);return}if(s<p.left){const f=GR(d);ts(f)}else{const f=XR(d);ts(f)}}function _I(n,e,t){e.button||(px(e.raw.clientX,e.raw.clientY),tee(n,e,t))}function px(n,e){const t=Uf(n,e);(t==null?void 0:t.startContainer)instanceof Node&&ts(t)}function nee(){var e;const n=window.getSelection();if(n&&n.isCollapsed&&n.anchorNode){const t=(e=n.anchorNode.parentElement)==null?void 0:e.closest("[contenteditable]");return t?ree(n,t):null}return null}function ree(n,e){const t=JR(e);if(!t.length)return null;const[r,o,i]=iee(t,n),a=aee(n,r,o,t,i);return a&&ts(a),a}function oee(n,e,t,r){var l,d,u;let o=e[0],i=0,a=e[e.length-1],s=((l=a.textContent)==null?void 0:l.length)||0;for(let p=n;p>=0;p--){const f=e[p];if(f instanceof Text){const h=(d=f.textContent)==null?void 0:d.slice(0,p===n?t.anchorOffset:void 0);if(h){const c=Array.from(h).reverse().join(""),g=c.search(r);if(g!==-1){o=f,i=c.length-g;break}}}}for(let p=n;p<e.length;p++){const f=e[p];if(f instanceof Text){const h=(u=f.textContent)==null?void 0:u.slice(p===n?t.anchorOffset:void 0);if(h){const c=h.search(r);if(c!==-1){a=f,s=p===n?t.anchorOffset+c:c;break}}}}return[o,i,a,s]}function iee(n,e){var u,p;let t=n[0],r=0,o=n[n.length-1],i=((u=o.textContent)==null?void 0:u.length)||0;const a=e.anchorNode instanceof Element?e.anchorNode.firstChild:e.anchorNode,s=((p=a==null?void 0:a.textContent)==null?void 0:p[e.anchorOffset])||"",l=n.findIndex(f=>f===a);if(s&&YR.test(s)&&a)t=a,o=a,r=e.anchorOffset,i=e.anchorOffset+1;else{let f=YQ;/\s/.test(s)&&(f=/\S/),/\w/.test(s)&&(f=/\W/);const[h,c,g,m]=oee(l,n,e,f);t=h,r=c,o=g,i=m}const d=document.createRange();return d.setStart(t,r),d.setEnd(o,i),[d,s,l]}function aee(n,e,t,r,o){var i,a;if(Intl.Segmenter&&!YR.test(t)&&!/\w/.test(t)){const[s,l]=see(e,r,n,t);if(s===-1||o===-1)return null;let d=s,u=l.length-s;for(let p=o;p>=0;p--){const f=r[p],h=p===o?n.anchorOffset:((i=f.textContent)==null?void 0:i.length)||0;if(d<=h){e.setStart(f,h-d);break}else d=d-h}for(let p=o;p<r.length;p++){const f=r[p],h=((a=f.textContent)==null?void 0:a.length)||0,c=p===o?h-n.anchorOffset:h;if(u<=c){e.setEnd(f,h-c+u);break}else u=u-c}}return e}function see(n,e,t,r){var f;const o=n.toString(),a=new Intl.Segmenter([],{granularity:"word"}).segment(o)[Symbol.iterator](),s=Array.from(a);if(s.length===0)return[-1,""];let l=0,d=!1;for(let h=0;h<e.length;h++){const c=e[h];if(d||c===n.startContainer)if(d=!0,c!==t.anchorNode)l=l+(((f=c.textContent)==null?void 0:f.length)||0);else{l=l+t.anchorOffset-n.startOffset;break}}let u=s[s.length-1].segment;for(let h=0;h<s.length;h++){const c=s[h];if(l===c.index){u=c.segment;break}if(l<c.index){u=s[h-1].segment;break}}return[u.indexOf(r),u]}function JR(n,e=[]){if(n.nodeType===Node.TEXT_NODE)e.push(n);else{const t=n.childNodes;for(let r=0;r<t.length;r++)JR(t[r],e)}return e}function lee(n){return!!n.raw.target.classList.contains("resize")}function QR(n,e,t=document.body){const r=Array.from(t.querySelectorAll(e)).sort((s,l)=>s.getBoundingClientRect().top>l.getBoundingClientRect().top?1:-1),o=r.length;if(o===0)return null;if(o===1||n<r[0].getBoundingClientRect().top)return r[0];if(n>r[o-1].getBoundingClientRect().bottom)return r[o-1];let i=0,a=o-1;for(;i<=a;){const s=Math.floor((i+a)/2),l=r[s];if(n<=l.getBoundingClientRect().bottom&&(s===0||n>r[s-1].getBoundingClientRect().bottom))return r[s];l.getBoundingClientRect().top>n?a=s-1:i=s+1}return null}function eD(n,e=document.body){return QR(n,".virgo-editor",e)}function cee(n){return QR(n,"affine-frame")}function dee(n){var l,d;const{raw:{clientX:e,clientY:t}}=n,r=(l=document.elementFromPoint(e,t))==null?void 0:l.closest(".virgo-editor");if(!r)return null;const o=K1(r),i=o[0],a=o[o.length-1],s=new Range;return s.setStart(i,0),s.setEnd(a,Number((d=a.textContent)==null?void 0:d.length)),ts(s),s}const zg=`[${Ss}]`,uee=32,T7=uee/2/2;function dk(n,e={}){if(n.id in e)throw new Error("Can't get next block! There's a loop in the block tree!");e[n.id]=!0;const t=n.page;if(n.children.length)return n.children[0];let r=n;for(;r;){const o=t.getNextSibling(r);if(o)return Tr(o,["affine:frame"])?dk(o):o;r=t.getParent(r)}return null}function gx(n,e={}){if(n.id in e)throw new Error("Can't get previous block! There's a loop in the block tree!");e[n.id]=!0;const t=n.page,r=t.getParent(n);if(!r)return null;const o=t.getPreviousSibling(n);if(!o)return Tr(r,["affine:frame","affine:page","affine:database"])?gx(r):r;if(o.children.length){let i=o.children[o.children.length-1];for(;i.children.length;)i=i.children[i.children.length-1];return i}return o}function Sm(n){return xt(n.page.root),document.querySelector(`[${Ss}="${n.page.root.id}"]`)}function Gd(n){try{const e=Wf(n);return e.mode!=="page"?null:e.querySelector("affine-default-page")}catch(e){console.warn("getDefaultPage",e);return}}function hee(n){const e=Wf(n);return e.mode!=="edgeless"?null:e.querySelector("affine-edgeless-page")}function Wf(n){xt(n.root,"Failed to check page mode! Page root is not exists!");const e=mx(n.root.id),t=e==null?void 0:e.closest("editor-container");return xt(t),t}function tD(n){const e=n.closest("editor-container");return xt(e),e}function uk(n){const e=Wf(n);if(!("mode"in e))throw new Error("Failed to check page mode! Editor mode is not exists!");return e.mode==="page"}function hk(n){if(!uk(n))return null;xt(n.root);const t=document.querySelector(`[${Ss}="${n.root.id}"]`);if(!t||t.closest("affine-default-page")!==t)throw new Error("Failed to get viewport element!");return t.viewportElement}function Hl(n){xt(n.page.root);const t=(ca.getActiveEditor()??document).querySelector(`[${Ss}="${n.page.root.id}"]`);return t?n.id===n.page.root.id?t:t.querySelector(`[${Ss}="${n.id}"]`):null}function nD(n){xt(n.page.root);const t=(ca.getActiveEditor()??document).querySelector(`[${Ss}="${n.page.root.id}"]`);if(!t)return Promise.resolve(null);if(n.id===n.page.root.id)return Promise.resolve(t);let r=!1;return new Promise((o,i)=>{const a=d=>{r=!0,l.disconnect(),o(d)},s=()=>{l.disconnect(),i(new Error(`Cannot find block element by model: ${n.flavour} id: ${n.id}`))},l=new MutationObserver(()=>{const d=t.querySelector(`[${Ss}="${n.id}"]`);d&&a(d)});l.observe(t,{childList:!0,subtree:!0}),requestAnimationFrame(()=>{if(!r){const d=Hl(n);d?a(d):s()}})})}function EI(n=Ba()){const t=(n.startContainer instanceof Text?n.startContainer.parentElement:n.startContainer).closest(`[${Ss}]`);if(!t)return null;const r=t.model;return Tr(r,["affine:frame","affine:page"])?null:r}function Nb(n){const e=Hl(n),t=e==null?void 0:e.querySelector("rich-text");return t||null}async function fk(n){const e=await nD(n),t=e==null?void 0:e.querySelector("rich-text");return t||null}function Cs(n){if(Tr(n,["affine:database"]))return null;const e=Nb(n);return e?e.vEditor:null}async function fee(n){if(Tr(n,["affine:database"]))throw new Error("Cannot get virgo by database model!");const e=await fk(n);return e?e.vEditor:null}function rD(n){var o;if(n.startContainer.nodeType===Node.COMMENT_NODE||n.endContainer.nodeType===Node.COMMENT_NODE||n.commonAncestorContainer.nodeType===Node.COMMENT_NODE)return[];let e=n.commonAncestorContainer;if(e.nodeType===Node.TEXT_NODE){const i=EI(n);return i?[i]:[]}if(e.attributes&&!e.attributes.getNamedItem(Ss)){const i=(o=e.closest(zg))==null?void 0:o.parentElement;i!=null&&(e=i)}const t=[],r=e.querySelectorAll(zg);if(!r.length)return[];if(r.length===1){const i=EI(n);return i?[i]:[]}return Array.from(r).filter(i=>"model"in i).forEach(i=>{const a=i;if(!a.model)return;const s=Tr(a.model,["affine:page"])?i==null?void 0:i.querySelector(".affine-default-page-block-title-container"):(i==null?void 0:i.querySelector("rich-text"))||(i==null?void 0:i.querySelector("img"));s&&n.intersectsNode(s)&&!Tr(a.model,["affine:frame","affine:page"])&&t.push(a.model)}),t}function Bl(n){const e=n.closest(zg);return xt(e,"Cannot find block element by element"),Fd(e)}function pee(n){if(n instanceof Event)throw new Error('Did you mean "event.target"?');return!n||!(n instanceof Element)?!1:!!n.closest("rich-text")}function ws(n){const t=(ca.getActiveEditor()??document).querySelector('[data-block-is-title="true"]');return t?t.contains(n):!1}function hg(n){const t=(ca.getActiveEditor()??document).querySelector("surface-text-editor");return t?t.contains(n):!1}function mc(n){return n instanceof HTMLElement&&n.getAttribute("data-virgo-root")==="true"&&!!n.closest("affine-database")}function gee(n){const e=document.querySelector('[data-block-is-database-title="true"]');return e?e.contains(n):!1}function mee(n){return n instanceof Element?n.classList.contains("affine-embed-wrapper-caption"):!1}function vee(n){return n?n instanceof Element?n:(n instanceof Node&&n.parentElement,null):null}function Hv(n,e){return n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY}function bee(n,e){return n.some(t=>Hv(t,e))}function Q9(n){return n.hasAttribute(Ss)}function yee({tagName:n}){return n==="AFFINE-DEFAULT-PAGE"}function xee({tagName:n}){return n==="AFFINE-EDGELESS-PAGE"}function wee(n){return yee(n)||xee(n)||iD(n)||Cee(n)}function Fv(n){return!wee(n)}function oD({tagName:n,firstElementChild:e}){return n==="AFFINE-EMBED"&&(e==null?void 0:e.tagName)==="AFFINE-IMAGE"}function iD({tagName:n}){return n==="AFFINE-FRAME"}function Cee({tagName:n}){return n==="AFFINE-SURFACE"}function See({tagName:n}){return n==="AFFINE-EMBED"}function pk({tagName:n}){return n==="AFFINE-DATABASE-TABLE"||n==="AFFINE-DATABASE"}function kee({classList:n}){return n.contains("affine-edgeless-block-child")}function d1(n,e=null,t=1){var u,p;const{y:r}=n;let o,i=null,a=null,s=null,l=0,d=1;if(e){const{snapToEdge:f={x:!0,y:!1}}=e;o=e.container;const h=e.rect||(o==null?void 0:o.getBoundingClientRect());h&&(f.x&&(n.x=Math.min(Math.max(n.x,h.left)+Dv*t-1,h.right-Dv*t-1)),f.y&&(t!==1&&console.warn("scale is not supported yet"),n.y=x1(n.y,h.top+1,h.bottom-1)))}if(i=MI(document.elementsFromPoint(n.x,n.y),o),i){if(pk(i)){a=i.getBoundingClientRect();const f=sD(i);if(xt(f),s=f.getBoundingClientRect(),s.height){if(n.y<s.top||n.y>s.bottom)return i;s=null}else return i}else if(a=Ea(i),s=(p=(u=i.querySelector(".affine-block-children-container"))==null?void 0:u.firstElementChild)==null?void 0:p.getBoundingClientRect(),s&&s.height){if(a.x<n.x&&n.x<=s.x)return i;s=null}else return i;a=null,i=null}do if(n.y=r-d*2,d<0&&d--,d*=-1,i=MI(document.elementsFromPoint(n.x,n.y),o),i){if(a=Ea(i),l=a.bottom-n.y,l>=0&&l<=T7*2||(l=n.y-a.top,l>=0&&l<=T7*2))return i;a=null,i=null}while(d<=T7);return i}function gk(n){return n&&(Q9(n)&&Fv(n)||(n=n.closest(zg),n&&Fv(n)))?n:null}function Fd(n){const e=n;if("hostModel"in e){const t=e;return xt(t.hostModel),t.hostModel}return xt(e.model),e.model}function mk(n=document){return Array.from(n.querySelectorAll(zg)).filter(Fv)}function mx(n,e=ca.getActiveEditor()??document){return e.querySelector(`[${Ss}="${n}"]`)}function eC(n,e=document){const t=mx(n,e);return t?iD(t)?t:t.closest("affine-frame"):null}function Ea(n){return pk(n)?n.getBoundingClientRect():(n.firstElementChild??n).getBoundingClientRect()}function O7(n){if(oD(n)){const e=n.querySelector(".affine-image-wrapper"),t=n.querySelector(".resizable-img");xt(e),xt(t);const r=Xi.fromDOM(e),o=Xi.fromDOM(t);return r.intersect(o).toDOMRect()}return Ea(n)}function zf(n){if(n.length<=1)return n;let e=n[0];return n.filter((t,r)=>r===0?!0:Hv(e,t)?!1:(e=t,!0))}function PI(n){return n.reduce((e,t)=>(pk(t)?e.push(t):e.push(t,...mk(t)),e),[])}function MI(n,e){const t=n.length;let r=null,o=0;for(;o<t;)if(r=n[o],o++,!(e&&!Hv(e,r))){if(Q9(r)&&Fv(r))return r;if(See(r))return o<t&&Q9(n[o])&&Fv(n[o])?n[o]:gk(r)}return null}function vk(){return getComputedStyle(document.documentElement).getPropertyValue("--affine-theme-mode").trim()==="dark"?"dark":"light"}function aD(n){return document.elementsFromPoint(n.x,n.y).find(kee)||null}function _ee(n){return n.querySelector(".affine-database-block-table")}function Eee(n){return n.querySelector(".affine-database-column-header")}function sD(n){return n.querySelector(".affine-database-block-rows")}var Af;(function(n){n[n.Normal=0]="Normal",n[n.Database=1]="Database",n[n.EmptyDatabase=2]="EmptyDatabase"})(Af||(Af={}));function Pee(n,e,t){const r={rect:Ea(t),flag:Af.Normal};if(Tr(e,["affine:database"])){const i=_ee(t);xt(i);let a=i.getBoundingClientRect();if(e.isEmpty()){if(r.flag=Af.EmptyDatabase,n.y<a.top)return r;const s=Eee(t);xt(s),a=s.getBoundingClientRect(),r.rect=new DOMRect(r.rect.left,a.bottom,r.rect.width,1)}else{r.flag=Af.Database;const s=sD(t);xt(s);const l=s.getBoundingClientRect();if(n.y<l.top||n.y>l.bottom)return r;const d=document.elementsFromPoint(n.x,n.y),u=d.length;let p,f=0;for(;f<u;f++){if(p=d[f],p.classList.contains("affine-database-block-row-cell-content"))return r.rect=A7(p,a),r;if(p.classList.contains("affine-database-block-row"))return p=p.querySelector(zg),xt(p),r.rect=A7(p,a),r}}}else{const i=t.parentElement;if(i!=null&&i.classList.contains("affine-database-block-row-cell-content"))return r.flag=Af.Database,r.rect=A7(i),r}return r}function A7(n,e){if(!e){const a=n.closest(".affine-database-block-table");xt(a),e=a.getBoundingClientRect()}const t=n.parentElement;xt(t);const r=t.parentElement;xt(r);const o=t.getBoundingClientRect(),i=r.getBoundingClientRect();return new DOMRect(e.left,i.top,o.right-e.left,o.height)}function II(n){return n&&n instanceof Element}function Mee(n){return n.tagName==="AFFINE-SELECTED-BLOCKS"}function TI(n){return n.tagName==="AFFINE-DRAG-HANDLE"}function Vi(n){var t;const e=Gd(n);if(e){const r=e.selection.state.selectedBlocks,o=e.selection.state.selectedEmbeds,i=[...r,...o].map(a=>Bl(a)).filter(Boolean);if(i.length)return{type:"Block",startOffset:0,endOffset:((t=i[i.length-1].text)==null?void 0:t.length)??0,models:i}}if(Cm()){const r=Ba(),o=Iee(r);return o?{...o,nativeRange:r}:null}return null}function Pg(n){if(n.type==="Title"){const s=n.models[0].page,l=Gd(s);if(!l)return null;const d=l.titleVEditor,[u,p]=d.getTextPoint(n.startOffset),[f,h]=d.getTextPoint(n.endOffset),c=new Range;return c.setStart(u,p),c.setEnd(f,h),c}const e=n.models.filter(s=>s.text);if(!e.length)return null;const[t,r]=AI(e[0],n.startOffset),[o,i]=AI(e[e.length-1],n.endOffset),a=new Range;return a.setStart(t,r),a.setEnd(o,i),a}function Iee(n){const e=rD(n);if(!e.length)return null;const t=OI(n.startContainer),r=OI(n.endContainer);if(!t||!r)return null;const o=t.index,i=r.index+r.length;return{type:"Native",startOffset:o,endOffset:i,models:e}}function Tee(n,e,t){return n.models=n.models.map(r=>r===e?t:r),n}function S1(n){if(!n.models.length)throw new Error("Can't restore selection, blockRange.models is empty");const e=n.models[0].page,t=Gd(e);if(n.type==="Native"){const r=Pg(n);ts(r),t&&(t.selection.state.clearBlockSelection(),t.selection.state.type="native");return}if(n.type==="Block"){t&&(t.selection.state.type="block",t.selection.refreshSelectedBlocksRectsByModels(n.models)),ts(null),document.activeElement.blur();return}if(t&&n.type==="Title"){ck(e,n.startOffset,n.endOffset-n.startOffset);return}throw new Error("Invalid block range type: "+n.type)}function Oee(n){const e=Vi(n);if(e)return e;if(!Cm())return null;const t=Ba();if(ws(t.startContainer)&&ws(t.endContainer)){const o=n.root;return xt(o),{type:"Title",startOffset:t.startOffset,endOffset:t.endOffset,models:[o]}}return null}function OI(n){if(!n.parentElement)return null;const e=n.parentElement.closest('[data-virgo-root="true"]')||(n instanceof HTMLElement?n.querySelector('[data-virgo-root="true"]'):null),t=e==null?void 0:e.virgoEditor;return t?t.getVRange():null}function AI(n,e=0){const t=n.text;if(!t)throw new Error("Failed to get block's text!");e>t.length&&(e=t.length);const r=Cs(n);xt(r);const[o,i]=r.getTextPoint(e);return[o,i]}function lD(n,e,t,r,o,i=null){var v,w;const a=e.page.getSchemaByFlavour("affine:database");xt(a);const s=a.model.children??[];let l=!0;if(s.length&&(r.length?l=r.map(Fd).every(_=>s.includes(_.flavour)):i&&(l=s.includes(i))),!l&&!Tr(e,["affine:database"])){const _=t.closest("affine-database");_&&(t=_,e=Fd(t))}let d="none";const u=3*o,{rect:p,flag:f}=Pee(n,e,t);if(f===Af.EmptyDatabase){const _=Xi.fromDOMRect(p);return _.top-=u/2,_.height=u,d="database",{type:d,rect:_,modelState:{model:e,rect:p,element:t}}}else if(f===Af.Database){const _=Math.abs(p.top-n.y),k=Math.abs(p.bottom-n.y),y=_<k;return d=y?"before":"after",{type:d,rect:Xi.fromLWTH(p.left,p.width,(y?p.top-1:p.bottom)-u/2,u),modelState:{model:e,rect:p,element:t}}}const h=Math.abs(p.top-n.y),c=Math.abs(p.bottom-n.y);d=h<c?"before":"after";let m=4;if(d==="before"){let _,k;_=t.previousElementSibling,_?_===r[r.length-1]?d="none":k=Ea(_):(_=(v=t.parentElement)==null?void 0:v.previousElementSibling,_&&(k=_.getBoundingClientRect())),k&&(m=(p.top-k.bottom)/2)}else{let _,k;_=t.nextElementSibling,_?_===r[0]&&(d="none",_=null):_=(w=gk(t.parentElement))==null?void 0:w.nextElementSibling,_&&(k=Ea(_),m=(k.top-p.bottom)/2)}if(d==="none")return null;let b=p.top;return d==="before"?b-=m:b+=p.height+m,{type:d,rect:Xi.fromLWTH(p.left,p.width,b-u/2,u),modelState:{model:e,rect:p,element:t}}}function Aee(n){return Lj||$j?n.ctrlKey||n.metaKey:n.ctrlKey}function T2(n,e){const t={dataTransfer:new DataTransfer};if(e){const{clientX:r,clientY:o,screenX:i,screenY:a}=e;Object.assign(t,{clientX:r,clientY:o,screenX:i,screenY:a})}return new DragEvent(n,t)}const Lee=()=>{const n=document.createElement("input");return n.type="file",n.multiple=!0,n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",n},P6=async(n,e)=>{const t={flavour:"affine:embed",type:"image"},r=Lee();document.body.appendChild(r);let o;const i=new Promise(s=>{o=s}),a=async()=>{if(!r.files)return;const s=await n.blobs;xt(s);const l=r.files;if(l.length===1){const d=l[0];e&&e(await $ee(d));const u=await s.set(d);o([{...t,sourceId:u}])}else{const d=[];for(let u=0;u<l.length;u++){const p=l[u],f=await s.set(p);d.push({...t,sourceId:f})}o(d)}r.removeEventListener("change",a),r.remove()};return r.addEventListener("change",a),r.click(),await i};function $ee(n){return new Promise(e=>{let t=0,r=0,o=new FileReader;o.addEventListener("load",i=>{const a=new Image;a.onload=()=>{t=a.width,r=a.height,o=null,e({width:t,height:r})},a.src=o==null?void 0:o.result}),o.addEventListener("error",i=>{o=null,e({width:t,height:r})}),o.readAsDataURL(n)})}const L7=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function $7(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),t)}function O2(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r):n.detachEvent&&n.detachEvent("on".concat(e),t)}function cD(n,e){const t=e.slice(0,e.length-1);for(let r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}function dD(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function jee(n,e){const t=n.length>=e.length?n:e,r=n.length>=e.length?e:n;let o=!0;for(let i=0;i<t.length;i++)r.indexOf(t[i])===-1&&(o=!1);return o}const Zv={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":L7?173:189,"=":L7?61:187,";":L7?59:186,"'":222,"[":219,"]":221,"\\":220},Mu={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},tC={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Ns={16:!1,18:!1,17:!1,91:!1},Ra={};for(let n=1;n<20;n++)Zv["f".concat(n)]=111+n;let aa=[],Cv=null,uD="all";const fh=new Map,zb=n=>Zv[n.toLowerCase()]||Mu[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),Ree=n=>Object.keys(Zv).find(e=>Zv[e]===n),Dee=n=>Object.keys(Mu).find(e=>Mu[e]===n);function hD(n){uD=n||"all"}function Uv(){return uD||"all"}function Nee(){return aa.slice(0)}function zee(){return aa.map(n=>Ree(n)||Dee(n)||String.fromCharCode(n))}function Bee(){const n=[];return Object.keys(Ra).forEach(e=>{Ra[e].forEach(t=>{let{key:r,scope:o,mods:i,shortcut:a}=t;n.push({scope:o,shortcut:a,mods:i,keys:r.split("+").map(s=>zb(s))})})}),n}function Hee(n){const e=n.target||n.srcElement,{tagName:t}=e;let r=!0;const o=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(o||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}function Fee(n){return typeof n=="string"&&(n=zb(n)),aa.indexOf(n)!==-1}function Zee(n,e){let t,r;n||(n=Uv());for(const o in Ra)if(Object.prototype.hasOwnProperty.call(Ra,o))for(t=Ra[o],r=0;r<t.length;)t[r].scope===n?t.splice(r,1).forEach(a=>{let{element:s}=a;return bk(s)}):r++;Uv()===n&&hD(e||"all")}function Uee(n){let e=n.keyCode||n.which||n.charCode;const t=aa.indexOf(e);if(t>=0&&aa.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&aa.splice(0,aa.length),(e===93||e===224)&&(e=91),e in Ns){Ns[e]=!1;for(const r in Mu)Mu[r]===e&&(Cc[r]=!1)}}function fD(n){if(typeof n>"u")Object.keys(Ra).forEach(o=>{Array.isArray(Ra[o])&&Ra[o].forEach(i=>g5(i)),delete Ra[o]}),bk(null);else if(Array.isArray(n))n.forEach(o=>{o.key&&g5(o)});else if(typeof n=="object")n.key&&g5(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];let[o,i]=t;typeof o=="function"&&(i=o,o=""),g5({key:n,scope:o,method:i,splitKey:"+"})}}const g5=n=>{let{key:e,scope:t,method:r,splitKey:o="+"}=n;dD(e).forEach(a=>{const s=a.split(o),l=s.length,d=s[l-1],u=d==="*"?"*":zb(d);if(!Ra[u])return;t||(t=Uv());const p=l>1?cD(Mu,s):[],f=[];Ra[u]=Ra[u].filter(h=>{const g=(r?h.method===r:!0)&&h.scope===t&&jee(h.mods,p);return g&&f.push(h.element),!g}),f.forEach(h=>bk(h))})};function LI(n,e,t,r){if(e.element!==r)return;let o;if(e.scope===t||e.scope==="all"){o=e.mods.length>0;for(const i in Ns)Object.prototype.hasOwnProperty.call(Ns,i)&&(!Ns[i]&&e.mods.indexOf(+i)>-1||Ns[i]&&e.mods.indexOf(+i)===-1)&&(o=!1);(e.mods.length===0&&!Ns[16]&&!Ns[18]&&!Ns[17]&&!Ns[91]||o||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(aa),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function $I(n,e){const t=Ra["*"];let r=n.keyCode||n.which||n.charCode;if(!Cc.filter.call(this,n))return;if((r===93||r===224)&&(r=91),aa.indexOf(r)===-1&&r!==229&&aa.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(s=>{const l=tC[s];n[s]&&aa.indexOf(l)===-1?aa.push(l):!n[s]&&aa.indexOf(l)>-1?aa.splice(aa.indexOf(l),1):s==="metaKey"&&n[s]&&aa.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(aa=aa.slice(aa.indexOf(l))))}),r in Ns){Ns[r]=!0;for(const s in Mu)Mu[s]===r&&(Cc[s]=!0);if(!t)return}for(const s in Ns)Object.prototype.hasOwnProperty.call(Ns,s)&&(Ns[s]=n[tC[s]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(aa.indexOf(17)===-1&&aa.push(17),aa.indexOf(18)===-1&&aa.push(18),Ns[17]=!0,Ns[18]=!0);const o=Uv();if(t)for(let s=0;s<t.length;s++)t[s].scope===o&&(n.type==="keydown"&&t[s].keydown||n.type==="keyup"&&t[s].keyup)&&LI(n,t[s],o,e);if(!(r in Ra))return;const i=Ra[r],a=i.length;for(let s=0;s<a;s++)if((n.type==="keydown"&&i[s].keydown||n.type==="keyup"&&i[s].keyup)&&i[s].key){const l=i[s],{splitKey:d}=l,u=l.key.split(d),p=[];for(let f=0;f<u.length;f++)p.push(zb(u[f]));p.sort().join("")===aa.sort().join("")&&LI(n,l,o,e)}}function Cc(n,e,t){aa=[];const r=dD(n);let o=[],i="all",a=document,s=0,l=!1,d=!0,u="+",p=!1,f=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(a=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(d=e.keydown),e.capture!==void 0&&(p=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(f=!0)),typeof e=="string"&&(i=e),f&&fD(n,i);s<r.length;s++)n=r[s].split(u),o=[],n.length>1&&(o=cD(Mu,n)),n=n[n.length-1],n=n==="*"?"*":zb(n),n in Ra||(Ra[n]=[]),Ra[n].push({keyup:l,keydown:d,scope:i,mods:o,shortcut:r[s],method:t,key:r[s],splitKey:u,element:a});if(typeof a<"u"&&window){if(!fh.has(a)){const h=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return $I(g,a)},c=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;$I(g,a),Uee(g)};fh.set(a,{keydownListener:h,keyupListenr:c,capture:p}),$7(a,"keydown",h,p),$7(a,"keyup",c,p)}if(!Cv){const h=()=>{aa=[]};Cv={listener:h,capture:p},$7(window,"focus",h,p)}}}function Wee(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Ra).forEach(t=>{Ra[t].filter(o=>o.scope===e&&o.shortcut===n).forEach(o=>{o&&o.method&&o.method()})})}function bk(n){const e=Object.values(Ra).flat();if(e.findIndex(r=>{let{element:o}=r;return o===n})<0){const{keydownListener:r,keyupListenr:o,capture:i}=fh.get(n)||{};r&&o&&(O2(n,"keyup",o,i),O2(n,"keydown",r,i),fh.delete(n))}if((e.length<=0||fh.size<=0)&&(Object.keys(fh).forEach(o=>{const{keydownListener:i,keyupListenr:a,capture:s}=fh.get(o)||{};i&&a&&(O2(o,"keyup",a,s),O2(o,"keydown",i,s),fh.delete(o))}),fh.clear(),Object.keys(Ra).forEach(o=>delete Ra[o]),Cv)){const{listener:o,capture:i}=Cv;O2(window,"focus",o,i),Cv=null}}const j7={getPressedKeyString:zee,setScope:hD,getScope:Uv,deleteScope:Zee,getPressedKeyCodes:Nee,getAllKeyCodes:Bee,isPressed:Fee,filter:Hee,trigger:Wee,unbind:fD,keyMap:Zv,modifier:Mu,modifierMap:tC};for(const n in j7)Object.prototype.hasOwnProperty.call(j7,n)&&(Cc[n]=j7[n]);if(typeof window<"u"){const n=window.hotkeys;Cc.noConflict=e=>(e&&window.hotkeys===Cc&&(window.hotkeys=n),Cc),window.hotkeys=Cc}Cc.filter=n=>!Vee(n);function R7(n){return!!((n.ctrlKey||n.metaKey)&&!n.altKey&&n.key==="z")}function Vee(n){return n.target?pee(n.target)?!1:!(mee(n.target)&&n.key==="Enter"||ws(n.target)&&R7(n)||(gee(n.target)||mc(n.target))&&R7(n)||hg(n.target)&&R7(n)||n.target===document.body):!0}const pD={AFFINE_PAGE:"affine:page",AFFINE_EDGELESS:"affine:edgeless"},jI="hotkey_disabled";class Kee{constructor(){this._scope=jI,this._disabled=!1,this.counter=0,this._hotkeys=Cc}get disabled(){return this._disabled}newScope(e){return`${e}-${this.counter++}`}setScope(e){this._scope=e,this._hotkeys.setScope(e)}deleteScope(e){this._hotkeys.deleteScope(e)}addListener(e,t,r={}){this._hotkeys(e,{...r,scope:this._scope},t)}removeListener(e){this._hotkeys.unbind((Array.isArray(e)?e:[e]).join(","),this._scope)}disableHotkey(){this._disabled=!0,this._hotkeys.setScope(jI)}enableHotkey(){this._disabled=!1,this._hotkeys.setScope(this._scope)}async withDisabledHotkey(e){this.disableHotkey();try{return await e()}finally{this.enableHotkey()}}withDisabledHotkeyFn(e){return(...t)=>this.withDisabledHotkey(()=>e(...t))}withScope(e,t){const r=this._scope;try{this._scope=e,t()}finally{this._scope=r}}}const Eo=new Kee;function Yee(n,e){return n.map(t=>e.findIndex(r=>r===t))}function Gee(n){let e,t=1,r=n[0],o=n[0];const i=[{start:r,end:o}],a=n.length;for(;t<a;t++)e=n[t],e-o===1?i[i.length-1].end=o=e:(r=o=e,i.push({start:r,end:o}));return i}function RI(n,e){let t=n.length;for(;t;){t--;const{start:r,end:o}=n[t],i=e.splice(r,o+1-r);e.splice(r+1,0,...i)}}function DI(n,e){let t=0;const r=n.length;for(;t<r;t++){const{start:o,end:i}=n[t];if(o===0)continue;const a=e.splice(o,i+1-o);e.splice(o-1,0,...a)}}function Xee(n,e,t,r,o){if(!n.length)return;n.sort(e);const{start:i,end:a}=t(n),s=r(i,a,n.length);o(s,n)}function qee(n,e,t,r,o,i,a){if(!n.length)return;n.sort(e);const s=t().sort(e),{start:l,end:d}=r(s),u=Yee(n,s),p=Gee(u);o(p,s);const f=i(l,d,s.length);a(f,s)}var Bb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Jee=vr`
  :host {
    position: relative;
  }

  .btn {
    box-sizing: border-box;
    display: inline-flex;
    align-items: center;
    border: none;
    padding: 1px 4px;
    border-radius: 5px;
    gap: 4px;
    background: transparent;
    cursor: pointer;

    user-select: none;
    font-family: var(--affine-font-family);
    fill: var(--affine-text-secondary-color);
    color: var(--affine-text-secondary-color);
    pointer-events: auto;
  }

  .btn > span {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  .btn:hover {
    background: var(--affine-hover-color);
  }

  .btn:active {
    background: var(--affine-hover-color);
  }

  .backlink-popover {
    position: absolute;
    left: 0;
    bottom: -8px;

    display: flex;
    flex-direction: column;
    padding: 8px 4px;
    background: var(--affine-white);
    box-shadow: var(--affine-menu-shadow);
    border-radius: 12px;
    transform: translateY(100%);
    z-index: 1;
  }

  .backlink-popover .group-title {
    color: var(--affine-text-secondary-color);
    margin: 8px 12px;
  }

  .backlink-popover icon-button {
    padding: 8px;
    justify-content: flex-start;
    gap: 8px;
  }

  ::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 4px;
  }
  ::-webkit-scrollbar-thumb {
    border-radius: 2px;
    background-color: #b1b1b1;
  }
`;let k1=class extends ui(so){constructor(){super(...arguments),this._backlinks=[],this._showPopover=!1,this._onClickAway=e=>{e.target!==this&&this._showPopover&&(this._showPopover=!1)}}connectedCallback(){super.connectedCallback(),this.tabIndex=0;const e=this.page;xt(e);const t=e.workspace.indexer.backlink;this._backlinks=t.getBacklink(e.id),t.slots.indexUpdated.on(()=>{this._backlinks=t.getBacklink(e.id),this._backlinks.length||(this._showPopover=!1)}),this._disposables.addFromEvent(window,"mousedown",this._onClickAway)}onClick(){this._showPopover=!this._showPopover}render(){const e=this._backlinks.filter(({type:t})=>t==="LinkedPage");return e.length?rt`<div class="btn" @click=${this.onClick}>
        ${GJ}<span>Backlinks (${e.length})</span
        >${Rb}
      </div>
      ${this._showPopover?ete(this.host,e):null}`:null}};k1.styles=Jee;Bb([Ft()],k1.prototype,"page",void 0);Bb([Ft()],k1.prototype,"host",void 0);Bb([Ar()],k1.prototype,"_backlinks",void 0);Bb([Ar()],k1.prototype,"_showPopover",void 0);k1=Bb([lr("backlink-button")],k1);const Qee="Untitled";function ete(n,e){const t=n.page.workspace.meta.pageMetas;return rt`<div class="backlink-popover">
    <div class="group-title">Linked to this page</div>
    <div class="group" style="overflow-y: scroll; max-height: 372px;">
      ${e.map(({pageId:r,blockId:o,type:i})=>{const a=i==="LinkedPage"?KJ:IR,s=t.find(d=>d.id===r);s||console.warn("Unexpected page meta not found",r);const l=(s==null?void 0:s.title)||Qee;return rt`<icon-button
          width="248px"
          height="32px"
          text=${l}
          @click=${()=>{r!==n.page.id&&n.slots.pageLinkClicked.emit({pageId:r,blockId:o})}}
        >
          ${a}
        </icon-button>`})}
    </div>
  </div>`}const gD=6,mD=.1,k3=.25,tte=3e3;var ya;(function(n){n.Solid="solid",n.Dashed="dash",n.None="none"})(ya||(ya={}));var Hs;(function(n){n[n.Straight=0]="Straight",n[n.Orthogonal=1]="Orthogonal"})(Hs||(Hs={}));function NI(n,e,t,r=o=>o){return n*r(.5-e*(.5-t))}function nte(n){return[-n[0],-n[1]]}function Id(n,e){return[n[0]+e[0],n[1]+e[1]]}function Gc(n,e){return[n[0]-e[0],n[1]-e[1]]}function Md(n,e){return[n[0]*e,n[1]*e]}function rte(n,e){return[n[0]/e,n[1]/e]}function A2(n){return[n[1],-n[0]]}function zI(n,e){return n[0]*e[0]+n[1]*e[1]}function ote(n,e){return n[0]===e[0]&&n[1]===e[1]}function ite(n){return Math.hypot(n[0],n[1])}function ate(n){return n[0]*n[0]+n[1]*n[1]}function BI(n,e){return ate(Gc(n,e))}function vD(n){return rte(n,ite(n))}function ste(n,e){return Math.hypot(n[1]-e[1],n[0]-e[0])}function L2(n,e,t){const r=Math.sin(t),o=Math.cos(t),i=n[0]-e[0],a=n[1]-e[1],s=i*o-a*r,l=i*r+a*o;return[s+e[0],l+e[1]]}function nC(n,e,t){return Id(n,Md(Gc(e,n),t))}function HI(n,e,t){return Id(n,Md(e,t))}const{min:B0,PI:lte}=Math,FI=.275,$2=lte+1e-4;function cte(n,e={}){const{size:t=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:a=pe=>pe,start:s={},end:l={},last:d=!1}=e,{cap:u=!0,easing:p=pe=>pe*(2-pe)}=s,{cap:f=!0,easing:h=pe=>--pe*pe*pe+1}=l;if(n.length===0||t<=0)return[];const c=n[n.length-1].runningLength,g=s.taper===!1?0:s.taper===!0?Math.max(t,c):s.taper,m=l.taper===!1?0:l.taper===!0?Math.max(t,c):l.taper,b=Math.pow(t*r,2),v=[],w=[];let _=n.slice(0,10).reduce((pe,ie)=>{let te=ie.pressure;if(i){const Z=B0(1,ie.distance/t),D=B0(1,1-Z);te=B0(1,pe+(D-pe)*(Z*FI))}return(pe+te)/2},n[0].pressure),k=NI(t,o,n[n.length-1].pressure,a),y,S=n[0].vector,C=n[0].point,I=C,A=C,T=I,L=!1;for(let pe=0;pe<n.length;pe++){let{pressure:ie}=n[pe];const{point:te,vector:Z,distance:D,runningLength:B}=n[pe];if(pe<n.length-1&&c-B<3)continue;if(o){if(i){const q=B0(1,D/t),fe=B0(1,1-q);ie=B0(1,_+(fe-_)*(q*FI))}k=NI(t,o,ie,a)}else k=t/2;y===void 0&&(y=k);const H=B<g?p(B/g):1,V=c-B<m?h((c-B)/m):1;k=Math.max(.01,k*Math.min(H,V));const R=(pe<n.length-1?n[pe+1]:n[pe]).vector,Y=pe<n.length-1?zI(Z,R):1,W=zI(Z,S)<0&&!L,F=Y!==null&&Y<0;if(W||F){const q=Md(A2(S),k);for(let fe=1/13,ce=0;ce<=1;ce+=fe)A=L2(Gc(te,q),te,$2*ce),v.push(A),T=L2(Id(te,q),te,$2*-ce),w.push(T);C=A,I=T,F&&(L=!0);continue}if(L=!1,pe===n.length-1){const q=Md(A2(Z),k);v.push(Gc(te,q)),w.push(Id(te,q));continue}const z=Md(A2(nC(R,Z,Y)),k);A=Gc(te,z),(pe<=1||BI(C,A)>b)&&(v.push(A),C=A),T=Id(te,z),(pe<=1||BI(I,T)>b)&&(w.push(T),I=T),_=ie,S=Z}const j=n[0].point.slice(0,2),$=n.length>1?n[n.length-1].point.slice(0,2):Id(n[0].point,[1,1]),ee=[],Q=[];if(n.length===1){if(!(g||m)||d){const pe=HI(j,vD(A2(Gc(j,$))),-(y||k)),ie=[];for(let te=1/13,Z=te;Z<=1;Z+=te)ie.push(L2(pe,j,$2*2*Z));return ie}}else{if(!(g||m&&n.length===1))if(u)for(let ie=1/13,te=ie;te<=1;te+=ie){const Z=L2(w[0],j,$2*te);ee.push(Z)}else{const ie=Gc(v[0],w[0]),te=Md(ie,.5),Z=Md(ie,.51);ee.push(Gc(j,te),Gc(j,Z),Id(j,Z),Id(j,te))}const pe=A2(nte(n[n.length-1].vector));if(m||g&&n.length===1)Q.push($);else if(f){const ie=HI($,pe,k);for(let te=1/29,Z=te;Z<1;Z+=te)Q.push(L2(ie,$,$2*3*Z))}else Q.push(Id($,Md(pe,k)),Id($,Md(pe,k*.99)),Gc($,Md(pe,k*.99)),Gc($,Md(pe,k)))}return v.concat(Q,w.reverse(),ee)}function dte(n,e={}){var f;const{streamline:t=.5,size:r=16,last:o=!1}=e;if(n.length===0)return[];const i=.15+(1-t)*.85;let a=Array.isArray(n[0])?n:n.map(({x:h,y:c,pressure:g=.5})=>[h,c,g]);if(a.length===2){const h=a[1];a=a.slice(0,-1);for(let c=1;c<5;c++)a.push(nC(a[0],h,c/4))}a.length===1&&(a=[...a,[...Id(a[0],[1,1]),...a[0].slice(2)]]);const s=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];let l=!1,d=0,u=s[0];const p=a.length-1;for(let h=1;h<a.length;h++){const c=o&&h===p?a[h].slice(0,2):nC(u.point,a[h],i);if(ote(u.point,c))continue;const g=ste(c,u.point);if(d+=g,h<p&&!l){if(d<r)continue;l=!0}u={point:c,pressure:a[h][2]>=0?a[h][2]:.5,vector:vD(Gc(u.point,c)),distance:g,runningLength:d},s.push(u)}return s[0].vector=((f=s[1])==null?void 0:f.vector)||[0,0],s}function ute(n,e={}){return cte(dte(n,e),e)}const bD=1e-12,hte=112e-18;class fte{static intersect(e,t,r,o,i=!1){const a=t.subtract(e),s=o.subtract(r),l=a.cross(s);if(Qp(l,0,hte))return null;const d=e.subtract(r);let u=s.cross(d)/l;const p=a.cross(d)/l,f=bD,h=-f,c=1+f;return i||h<u&&u<c&&h<p&&p<c?(i||(u=x1(u,0,1)),e.lerp(a,u)):null}}class rn{static clamp(e,t,r){return Math.max(t,typeof r<"u"?Math.min(e,r):e)}static clampV(e,t,r){return e.map(o=>r?rn.clamp(o,t,r):rn.clamp(o,t))}static cross(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}static snap(e,t=1){return[Math.round(e[0]/t)*t,Math.round(e[1]/t)*t]}}rn.neg=n=>[-n[0],-n[1]];rn.add=(n,e)=>[n[0]+e[0],n[1]+e[1]];rn.addScalar=(n,e)=>[n[0]+e,n[1]+e];rn.sub=(n,e)=>[n[0]-e[0],n[1]-e[1]];rn.subScalar=(n,e)=>[n[0]-e,n[1]-e];rn.vec=(n,e)=>[e[0]-n[0],e[1]-n[1]];rn.mul=(n,e)=>[n[0]*e,n[1]*e];rn.mulV=(n,e)=>[n[0]*e[0],n[1]*e[1]];rn.div=(n,e)=>[n[0]/e,n[1]/e];rn.divV=(n,e)=>[n[0]/e[0],n[1]/e[1]];rn.per=n=>[n[1],-n[0]];rn.dpr=(n,e)=>n[0]*e[0]+n[1]*e[1];rn.cpr=(n,e)=>n[0]*e[1]-e[0]*n[1];rn.len2=n=>n[0]*n[0]+n[1]*n[1];rn.len=n=>Math.hypot(n[0],n[1]);rn.pry=(n,e)=>rn.dpr(n,e)/rn.len(e);rn.uni=n=>rn.div(n,rn.len(n));rn.normalize=n=>rn.uni(n);rn.tangent=(n,e)=>rn.uni(rn.sub(n,e));rn.dist2=(n,e)=>rn.len2(rn.sub(n,e));rn.dist=(n,e)=>Math.hypot(n[1]-e[1],n[0]-e[0]);rn.fastDist=(n,e)=>{const t=[e[0]-n[0],e[1]-n[1]],r=[Math.abs(t[0]),Math.abs(t[1])];let o=1/Math.max(r[0],r[1]);return o=o*(1.29289-(r[0]+r[1])*o*.29289),[t[0]*o,t[1]*o]};rn.ang=(n,e)=>Math.atan2(rn.cpr(n,e),rn.dpr(n,e));rn.angle=(n,e)=>Math.atan2(e[1]-n[1],e[0]-n[0]);rn.med=(n,e)=>rn.mul(rn.add(n,e),.5);rn.rot=(n,e=0)=>[n[0]*Math.cos(e)-n[1]*Math.sin(e),n[0]*Math.sin(e)+n[1]*Math.cos(e)];rn.rotWith=(n,e,t=0)=>{if(t===0)return n;const r=Math.sin(t),o=Math.cos(t),i=n[0]-e[0],a=n[1]-e[1],s=i*o-a*r,l=i*r+a*o;return[s+e[0],l+e[1]]};rn.isEqual=(n,e)=>n[0]===e[0]&&n[1]===e[1];rn.lrp=(n,e,t)=>rn.add(n,rn.mul(rn.sub(e,n),t));rn.int=(n,e,t,r,o=1)=>{const i=(rn.clamp(t,r)-t)/(r-t);return rn.add(rn.mul(n,1-i),rn.mul(e,o))};rn.ang3=(n,e,t)=>{const r=rn.vec(e,n),o=rn.vec(e,t);return rn.ang(r,o)};rn.abs=n=>[Math.abs(n[0]),Math.abs(n[1])];rn.rescale=(n,e)=>{const t=rn.len(n);return[e*n[0]/t,e*n[1]/t]};rn.isLeft=(n,e,t)=>(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1]);rn.clockwise=(n,e,t)=>rn.isLeft(n,e,t)>0;rn.toFixed=n=>n.map(e=>Math.round(e*100)/100);rn.nearestPointOnLineThroughPoint=(n,e,t)=>rn.add(n,rn.mul(e,rn.pry(rn.sub(t,n),e)));rn.distanceToLineThroughPoint=(n,e,t)=>rn.dist(t,rn.nearestPointOnLineThroughPoint(n,e,t));rn.nearestPointOnLineSegment=(n,e,t,r=!0)=>{const o=rn.uni(rn.sub(e,n)),i=rn.add(n,rn.mul(o,rn.pry(rn.sub(t,n),o)));if(r){if(i[0]<Math.min(n[0],e[0]))return n[0]<e[0]?n:e;if(i[0]>Math.max(n[0],e[0]))return n[0]>e[0]?n:e;if(i[1]<Math.min(n[1],e[1]))return n[1]<e[1]?n:e;if(i[1]>Math.max(n[1],e[1]))return n[1]>e[1]?n:e}return i};rn.distanceToLineSegment=(n,e,t,r=!0)=>rn.dist(t,rn.nearestPointOnLineSegment(n,e,t,r));rn.nearestPointOnBounds=(n,e)=>[rn.clamp(e[0],n.minX,n.maxX),rn.clamp(e[1],n.minY,n.maxY)];rn.distanceToBounds=(n,e)=>rn.dist(e,rn.nearestPointOnBounds(n,e));rn.nudge=(n,e,t)=>rn.isEqual(n,e)?n:rn.add(n,rn.mul(rn.uni(rn.sub(e,n)),t));rn.nudgeAtAngle=(n,e,t)=>[Math.cos(e)*t+n[0],Math.sin(e)*t+n[1]];rn.toPrecision=(n,e=4)=>[+n[0].toPrecision(e),+n[1].toPrecision(e)];rn.pointsBetween=(n,e,t=6)=>Array.from(Array(t)).map((r,o)=>{const i=o/(t-1),a=Math.min(1,.5+Math.abs(.5-i));return[...rn.lrp(n,e,i),a]});rn.slope=(n,e)=>n[0]===e[0]?NaN:(n[1]-e[1])/(n[0]-e[0]);rn.max=(...n)=>[Math.max(...n.map(e=>e[0])),Math.max(...n.map(e=>e[1]))];rn.min=(...n)=>[Math.min(...n.map(e=>e[0])),Math.min(...n.map(e=>e[1]))];rn.rotAround=(n,e,t)=>{const r=Math.sin(t),o=Math.cos(t),i=n[0]-e[0],a=n[1]-e[1],s=i*o-a*r,l=i*r+a*o;return[s+e[0],l+e[1]]};const m5=Math.PI*2;var Rl;(function(n){n.Top="top_edge",n.Right="right_edge",n.Bottom="bottom_edge",n.Left="left_edge"})(Rl||(Rl={}));var Ko;(function(n){n.TopLeft="top_left_corner",n.TopRight="top_right_corner",n.BottomRight="bottom_right_corner",n.BottomLeft="bottom_left_corner"})(Ko||(Ko={}));var Va;(function(n){n.minX="minX",n.midX="midX",n.maxX="maxX",n.minY="minY",n.midY="midY",n.maxY="maxY"})(Va||(Va={}));class ia{static lerp(e,t,r){return r=ia.clamp(r,0,1),e*(1-r)+t*r}static lerpColor(e,t,r=.5){function o(d){const u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d);return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}function i(d){return"#"+((1<<24)+(d[0]<<16)+(d[1]<<8)+d[2]).toString(16).slice(1)}const a=o(e)||[0,0,0],s=o(t)||[0,0,0],l=a.slice();for(let d=0;d<3;d++)l[d]=Math.round(l[d]+r*(s[d]-a[d]));return i(l)}static modulate(e,t,r,o=!1){const[i,a]=t,[s,l]=r,d=s+(e-i)/(a-i)*(l-s);return o?s<l?Math.max(Math.min(d,l),s):Math.max(Math.min(d,s),l):d}static clamp(e,t,r){return Math.max(t,typeof r<"u"?Math.min(e,r):e)}static deepClone(e){if(e===null)return e;if(Array.isArray(e))return[...e];if(typeof e=="object"){const t={...e};return Object.keys(t).forEach(r=>t[r]=typeof e[r]=="object"?ia.deepClone(e[r]):e[r]),t}return e}static rng(e=""){let t=0,r=0,o=0,i=0;function a(){const s=t^t<<11;return t=r,r=o,o=i,i^=(i>>>19^s^s>>>8)>>>0,i/4294967296}for(let s=0;s<e.length+64;s++)t^=e.charCodeAt(s)|0,a();return a}static pointsToLineSegments(e,t=!1){const r=[];for(let o=1;o<e.length;o++)r.push([e[o-1],e[o]]);return t&&r.push([e[e.length-1],e[0]]),r}static getRectangleSides(e,t,r=0){const o=[e[0]+t[0]/2,e[1]+t[1]/2],i=rn.rotWith(e,o,r),a=rn.rotWith(rn.add(e,[t[0],0]),o,r),s=rn.rotWith(rn.add(e,t),o,r),l=rn.rotWith(rn.add(e,[0,t[1]]),o,r);return[["top",[i,a]],["right",[a,s]],["bottom",[s,l]],["left",[l,i]]]}static circleFromThreePoints(e,t,r){const[o,i]=e,[a,s]=t,[l,d]=r,u=o*(s-d)-i*(a-l)+a*d-l*s,p=(o*o+i*i)*(d-s)+(a*a+s*s)*(i-d)+(l*l+d*d)*(s-i),f=(o*o+i*i)*(a-l)+(a*a+s*s)*(l-o)+(l*l+d*d)*(o-a),h=-p/(2*u),c=-f/(2*u);return[h,c,Math.hypot(h-o,c-i)]}static perimeterOfEllipse(e,t){const r=Math.pow(e-t,2)/Math.pow(e+t,2);return Math.PI*(e+t)*(1+3*r/(10+Math.sqrt(4-3*r)))}static shortAngleDist(e,t){const r=Math.PI*2,o=(t-e)%r;return 2*o%r-o}static longAngleDist(e,t){return Math.PI*2-ia.shortAngleDist(e,t)}static lerpAngles(e,t,r){return e+ia.shortAngleDist(e,t)*r}static angleDelta(e,t){return ia.shortAngleDist(e,t)}static getSweep(e,t,r){return ia.angleDelta(rn.angle(e,t),rn.angle(e,r))}static clampRadians(e){return(Math.PI*2+e)%(Math.PI*2)}static snapAngleToSegments(e,t){const r=Math.PI*2/t;return Math.floor((ia.clampRadians(e)+r/2)/r)*r}static isAngleBetween(e,t,r){if(r===e||r===t)return!0;const o=(t-e+m5)%m5,i=(r-e+m5)%m5;return o<=Math.PI!=i>o}static degreesToRadians(e){return e*Math.PI/180}static radiansToDegrees(e){return e*180/Math.PI}static getArcLength(e,t,r,o){const i=ia.getSweep(e,r,o);return t*(2*Math.PI)*(i/(2*Math.PI))}static getSweepFlag(e,t,r){const o=rn.angle(e,r);return(rn.angle(e,t)-o+3*Math.PI)%(2*Math.PI)-Math.PI>0?0:1}static getLargeArcFlag(e,t,r){const o=rn.angle(r,e),a=(rn.angle(r,t)-o+3*Math.PI)%(2*Math.PI)-Math.PI;return Math.abs(a)>Math.PI/2?0:1}static getArcDashOffset(e,t,r,o,i){const a=ia.getSweepFlag(e,r,o),s=ia.getArcLength(e,t,r,o);return-(a<0?s:2*Math.PI*e[2]-s)/2+i}static getEllipseDashOffset(e,t){return-(2*Math.PI*e[2])/2+-t}static pointInCircle(e,t,r){return rn.dist(e,t)<=r}static pointInEllipse(e,t,r,o,i=0){i=i||0;const a=Math.cos(i),s=Math.sin(i),l=rn.sub(e,t),d=a*l[0]+s*l[1],u=s*l[0]-a*l[1];return d*d/(r*r)+u*u/(o*o)<=1}static pointInRect(e,t){return!(e[0]<t[0]||e[0]>e[0]+t[0]||e[1]<t[1]||e[1]>e[1]+t[1])}static pointInPolygon(e,t){let r=0;return t.forEach((o,i)=>{const a=t[(i+1)%t.length];o[1]<=e[1]?a[1]>e[1]&&rn.cross(o,a,e)>0&&(r+=1):a[1]<=e[1]&&rn.cross(o,a,e)<0&&(r-=1)}),r!==0}static pointInBounds(e,t){return!(e[0]<t.minX||e[0]>t.maxX||e[1]<t.minY||e[1]>t.maxY)}static pointInPolyline(e,t,r=3){for(let o=1;o<t.length;o++)if(rn.distanceToLineSegment(t[o-1],t[o],e)<r)return!0;return!1}static getBoundsSides(e){return this.getRectangleSides([e.minX,e.minY],[e.width,e.height])}static expandBounds(e,t){return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,width:e.width+t*2,height:e.height+t*2}}static boundsCollide(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)}static boundsContain(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX}static boundsContained(e,t){return ia.boundsContain(t,e)}static boundsAreEqual(e,t){return!(t.maxX!==e.maxX||t.minX!==e.minX||t.maxY!==e.maxY||t.minY!==e.minY)}static getBoundsFromPoints(e,t=0){let r=1/0,o=1/0,i=-1/0,a=-1/0;if(e.length<2)r=0,o=0,i=1,a=1;else for(const[s,l]of e)r=Math.min(s,r),o=Math.min(l,o),i=Math.max(s,i),a=Math.max(l,a);return t!==0?ia.getBoundsFromPoints(e.map(s=>rn.rotWith(s,[(r+i)/2,(o+a)/2],t))):{minX:r,minY:o,maxX:i,maxY:a,width:Math.max(1,i-r),height:Math.max(1,a-o)}}static centerBounds(e,t){const r=this.getBoundsCenter(e),o=t[0]-r[0],i=t[1]-r[1];return this.translateBounds(e,[o,i])}static snapBoundsToGrid(e,t){const r=Math.round(e.minX/t)*t,o=Math.round(e.minY/t)*t,i=Math.round(e.maxX/t)*t,a=Math.round(e.maxY/t)*t;return{minX:r,minY:o,maxX:i,maxY:a,width:Math.max(1,i-r),height:Math.max(1,a-o)}}static translateBounds(e,t){return{minX:e.minX+t[0],minY:e.minY+t[1],maxX:e.maxX+t[0],maxY:e.maxY+t[1],width:e.width,height:e.height}}static rotateBounds(e,t,r){const[o,i]=rn.rotWith([e.minX,e.minY],t,r),[a,s]=rn.rotWith([e.maxX,e.maxY],t,r);return{minX:o,minY:i,maxX:a,maxY:s,width:e.width,height:e.height}}static getRotatedEllipseBounds(e,t,r,o,i=0){const a=Math.cos(i),s=Math.sin(i),l=Math.hypot(r*a,o*s),d=Math.hypot(r*s,o*a);return{minX:e+r-l,minY:t+o-d,maxX:e+r+l,maxY:t+o+d,width:l*2,height:d*2}}static getExpandedBounds(e,t){const r=Math.min(e.minX,t.minX),o=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),a=Math.max(e.maxY,t.maxY),s=Math.abs(i-r),l=Math.abs(a-o);return{minX:r,minY:o,maxX:i,maxY:a,width:s,height:l}}static getCommonBounds(e){if(e.length<2)return e[0];let t=e[0];for(let r=1;r<e.length;r++)t=ia.getExpandedBounds(t,e[r]);return t}static getRotatedCorners(e,t=0){const r=[e.minX+e.width/2,e.minY+e.height/2];return[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]].map(o=>rn.rotWith(o,r,t))}static getTransformedBoundingBox(e,t,r,o=0,i=!1){const[a,s]=[e.minX,e.minY],[l,d]=[e.maxX,e.maxY];let[u,p]=[e.minX,e.minY],[f,h]=[e.maxX,e.maxY];if(t==="center")return{minX:u+r[0],minY:p+r[1],maxX:f+r[0],maxY:h+r[1],width:f-u,height:h-p,scaleX:1,scaleY:1};const[c,g]=rn.rot(r,-o);switch(t){case Rl.Top:case Ko.TopLeft:case Ko.TopRight:{p+=g;break}case Rl.Bottom:case Ko.BottomLeft:case Ko.BottomRight:{h+=g;break}}switch(t){case Rl.Left:case Ko.TopLeft:case Ko.BottomLeft:{u+=c;break}case Rl.Right:case Ko.TopRight:case Ko.BottomRight:{f+=c;break}}const m=l-a,b=d-s,v=(f-u)/m,w=(h-p)/b,_=v<0,k=w<0,y=Math.abs(f-u),S=Math.abs(h-p);if(i){const C=m/b,I=C<y/S,A=y*(w<0?1:-1)*(1/C),T=S*(v<0?1:-1)*C;switch(t){case Ko.TopLeft:{I?p=h+A:u=f+T;break}case Ko.TopRight:{I?p=h+A:f=u-T;break}case Ko.BottomRight:{I?h=p-A:f=u-T;break}case Ko.BottomLeft:{I?h=p-A:u=f+T;break}case Rl.Bottom:case Rl.Top:{const L=(u+f)/2,j=S*C;u=L-j/2,f=L+j/2;break}case Rl.Left:case Rl.Right:{const L=(p+h)/2,j=y/C;p=L-j/2,h=L+j/2;break}}}if(o%(Math.PI*2)!==0){let C=[0,0];const I=rn.med([a,s],[l,d]),A=rn.med([u,p],[f,h]);switch(t){case Ko.TopLeft:{C=rn.sub(rn.rotWith([f,h],A,o),rn.rotWith([l,d],I,o));break}case Ko.TopRight:{C=rn.sub(rn.rotWith([u,h],A,o),rn.rotWith([a,d],I,o));break}case Ko.BottomRight:{C=rn.sub(rn.rotWith([u,p],A,o),rn.rotWith([a,s],I,o));break}case Ko.BottomLeft:{C=rn.sub(rn.rotWith([f,p],A,o),rn.rotWith([l,s],I,o));break}case Rl.Top:{C=rn.sub(rn.rotWith(rn.med([u,h],[f,h]),A,o),rn.rotWith(rn.med([a,d],[l,d]),I,o));break}case Rl.Left:{C=rn.sub(rn.rotWith(rn.med([f,p],[f,h]),A,o),rn.rotWith(rn.med([l,s],[l,d]),I,o));break}case Rl.Bottom:{C=rn.sub(rn.rotWith(rn.med([u,p],[f,p]),A,o),rn.rotWith(rn.med([a,s],[l,s]),I,o));break}case Rl.Right:{C=rn.sub(rn.rotWith(rn.med([u,p],[u,h]),A,o),rn.rotWith(rn.med([a,s],[a,d]),I,o));break}}[u,p]=rn.sub([u,p],C),[f,h]=rn.sub([f,h],C)}return f<u&&([f,u]=[u,f]),h<p&&([h,p]=[p,h]),{minX:u,minY:p,maxX:f,maxY:h,width:f-u,height:h-p,scaleX:(f-u)/(l-a||1)*(_?-1:1),scaleY:(h-p)/(d-s||1)*(k?-1:1)}}static getTransformAnchor(e,t,r){let o=e;switch(e){case Ko.TopLeft:{t&&r?o=Ko.BottomRight:t?o=Ko.TopRight:r?o=Ko.BottomLeft:o=Ko.BottomRight;break}case Ko.TopRight:{t&&r?o=Ko.BottomLeft:t?o=Ko.TopLeft:r?o=Ko.BottomRight:o=Ko.BottomLeft;break}case Ko.BottomRight:{t&&r?o=Ko.TopLeft:t?o=Ko.BottomLeft:r?o=Ko.TopRight:o=Ko.TopLeft;break}case Ko.BottomLeft:{t&&r?o=Ko.TopRight:t?o=Ko.BottomRight:r?o=Ko.TopLeft:o=Ko.TopRight;break}}return o}static getRelativeTransformedBoundingBox(e,t,r,o,i){const a=(o?t.maxX-r.maxX:r.minX-t.minX)/t.width,s=(i?t.maxY-r.maxY:r.minY-t.minY)/t.height,l=r.width/t.width,d=r.height/t.height,u=e.minX+e.width*a,p=e.minY+e.height*s,f=e.width*l,h=e.height*d;return{minX:u,minY:p,maxX:u+f,maxY:p+h,width:f,height:h}}static getRotatedSize(e,t){const r=rn.div(e,2),o=[[0,0],[e[0],0],e,[0,e[1]]].map(a=>rn.rotWith(a,r,t)),i=ia.getBoundsFromPoints(o);return[i.width,i.height]}static getBoundsCenter(e){return[e.minX+e.width/2,e.minY+e.height/2]}static getBoundsWithCenter(e){const t=ia.getBoundsCenter(e);return{...e,midX:t[0],midY:t[1]}}static getCommonTopLeft(e){const t=[1/0,1/0];return e.forEach(r=>{t[0]=Math.min(t[0],r[0]),t[1]=Math.min(t[1],r[1])}),t}static getFromCache(e,t,r){let o=e.get(t);if(o===void 0&&(e.set(t,r()),o=e.get(t),o===void 0))throw Error("Cache did not include item!");return o}static uniqueId(e=""){return e?((Number(e)^Math.random()*16)>>Number(e)/4).toString(16):`10000000-1000-4000-8000-${1e11}`.replace(/[018]/g,ia.uniqueId)}static rotateArray(e,t){return e.map((r,o)=>e[(o+t)%e.length])}static debounce(e,t=0){let r;return function(...o){clearTimeout(r),r=setTimeout(()=>e.apply(o),t)}}static getSvgPathFromStroke(e,t=!0){const r=e.length;if(r<4)return"";let o=e[0],i=e[1];const a=e[2];let s=`M${o[0].toFixed(2)},${o[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${Cf(i[0],a[0]).toFixed(2)},${Cf(i[1],a[1]).toFixed(2)} T`;for(let l=2,d=r-1;l<d;l++)o=e[l],i=e[l+1],s+=`${Cf(o[0],i[0]).toFixed(2)},${Cf(o[1],i[1]).toFixed(2)} `;return t&&(s+="Z"),s}static getSvgPathFromStrokePoints(e,t=!1){const r=e.length;if(r<4)return"";let o=e[0].point,i=e[1].point;const a=e[2].point;let s=`M${o[0].toFixed(2)},${o[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${Cf(i[0],a[0]).toFixed(2)},${Cf(i[1],a[1]).toFixed(2)} T`;for(let l=2,d=r-1;l<d;l++)o=e[l].point,i=e[l+1].point,s+=`${Cf(o[0],i[0]).toFixed(2)},${Cf(o[1],i[1]).toFixed(2)} `;return t&&(s+="Z"),s}static getPerfectDashProps(e,t,r,o=1,i=!0,a=2){let s,l,d;if(r.toLowerCase()==="dashed")s=t*a,d=1,l=i?(s/2).toString():"0";else if(r.toLowerCase()==="dotted")s=t/100,d=100,l="0";else return{strokeDasharray:"none",strokeDashoffset:"none"};let u=Math.floor(e/s/(2*d));u-=u%o,u=Math.max(u,4);const p=Math.max(s,(e-u*s)/(i?u:u-1));return{strokeDasharray:[s,p].join(" "),strokeDashoffset:l}}static isMobileSafari(){if(typeof window>"u")return!1;const e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i);return t&&r&&!e.match(/CriOS/i)}static throttle(e,t){let r,o;return function(...i){return r||(r=!0,setTimeout(()=>r=!1,t),o=e(...i)),o}}static isDarwin(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}static metaKey(e){return ia.isDarwin()?e.metaKey:e.ctrlKey}static lns(e){const t=e.split("");return t.push(...t.splice(0,Math.round(t.length/5))),t.push(...t.splice(0,Math.round(t.length/4))),t.push(...t.splice(0,Math.round(t.length/3))),t.push(...t.splice(0,Math.round(t.length/2))),t.reverse().map(r=>+r?+r<5?5+ +r:+r>5?+r-5:r:r).join("")}}ia.getSnapPoints=(n,e,t)=>{const r={...n},o=[0,0],i=[],a={[Va.minX]:{id:Va.minX,isSnapped:!1},[Va.midX]:{id:Va.midX,isSnapped:!1},[Va.maxX]:{id:Va.maxX,isSnapped:!1},[Va.minY]:{id:Va.minY,isSnapped:!1},[Va.midY]:{id:Va.midY,isSnapped:!1},[Va.maxY]:{id:Va.maxY,isSnapped:!1}},s=[Va.midX,Va.minX,Va.maxX],l=[Va.midY,Va.minY,Va.maxY],d=e.map(c=>{const g=s.flatMap((b,v)=>s.map((w,_)=>{const k=r[b]-c[w],y=Math.abs(k);return{f:b,t:w,gap:k,distance:y,isCareful:v===0||v+_===3}})),m=l.flatMap((b,v)=>l.map((w,_)=>{const k=r[b]-c[w],y=Math.abs(k);return{f:b,t:w,gap:k,distance:y,isCareful:v===0||v+_===3}}));return[c,g,m]});let u=1/0,p=1/0,f=1/0,h=1/0;return d.forEach(([c,g,m])=>{g.forEach(b=>{b.distance<t&&b.distance<f&&(f=b.distance,u=b.gap)}),m.forEach(b=>{b.distance<t&&b.distance<h&&(h=b.distance,p=b.gap)})}),d.forEach(([c,g,m])=>{u!==1/0&&g.forEach(b=>{Math.abs(b.gap-u)<2&&(a[b.f]={...a[b.f],isSnapped:!0,to:c[b.t],B:c,distance:b.distance})}),p!==1/0&&m.forEach(b=>{Math.abs(b.gap-p)<2&&(a[b.f]={...a[b.f],isSnapped:!0,to:c[b.t],B:c,distance:b.distance})})}),o[0]=u===1/0?0:u,o[1]=p===1/0?0:p,r.minX-=o[0],r.midX-=o[0],r.maxX-=o[0],r.minY-=o[1],r.midY-=o[1],r.maxY-=o[1],s.forEach(c=>{const g=a[c];if(!g.isSnapped)return;const{id:m,B:b}=g,v=r[m];i.push(m===Va.minX?[[v,r.midY],[v,b.minY],[v,b.maxY]]:[[v,r.minY],[v,r.maxY],[v,b.minY],[v,b.maxY]])}),l.forEach(c=>{const g=a[c];if(!g.isSnapped)return;const{id:m,B:b}=g,v=r[m];i.push(m===Va.midY?[[r.midX,v],[b.minX,v],[b.maxX,v]]:[[r.minX,v],[r.maxX,v],[b.minX,v],[b.maxX,v]])}),{offset:o,snapLines:i}};ia.deepMerge=(n,e)=>{const t={...n},r=Object.entries(e);for(const[o,i]of r)t[o]=i===Object(i)&&!Array.isArray(i)?ia.deepMerge(t[o],i):i;return t};function Cf(n,e){return(n+e)/2}function _1(n,e,t,r){return`[${n},${e},${t},${r}]`}function Da(n){return JSON.parse(n)}class ns{constructor(e,t,r,o){this.x=e,this.y=t,this.w=r,this.h=o}static from(e){return new ns(e.x,e.y,e.w,e.h)}get center(){return new ho(this.x+this.w/2,this.y+this.h/2)}get minX(){return this.x}get minY(){return this.y}get maxX(){return this.x+this.w}get maxY(){return this.y+this.h}get tl(){return new ho(this.x,this.y)}get tr(){return new ho(this.x+this.w,this.y)}get bl(){return new ho(this.x,this.y+this.h)}get br(){return new ho(this.x+this.w,this.y+this.h)}intersectLine(e,t,r=!1){const o=[];return[[this.tl,this.tr],[this.tl,this.bl],[this.tr,this.br],[this.bl,this.br]].forEach(([i,a])=>{const s=fte.intersect(e,t,i,a,r);s&&o.push(s)}),o.length===0?null:o}isIntersectWithBound(e,t=bD){return e.maxX>this.minX-t&&e.maxY>this.minY-t&&e.minX<this.maxX+t&&e.minY<this.maxY+t}serialize(){return _1(this.x,this.y,this.w,this.h)}static deserialize(e){const[t,r,o,i]=Da(e);return new ns(t,r,o,i)}}function pte(n,e){const t=Math.min(n.x,e.x),r=Math.min(n.y,e.y),o=Math.max(n.x+n.w,e.x+e.w),i=Math.max(n.y+n.h,e.y+e.h),a=Math.abs(o-t),s=Math.abs(i-r);return{x:t,y:r,w:a,h:s}}function km(n){if(!n.length)return null;if(n.length===1){const{x:t,y:r,w:o,h:i}=n[0];return new ns(t,r,o,i)}let e=n[0];for(let t=1;t<n.length;t++)e=pte(e,n[t]);return new ns(e.x,e.y,e.w,e.h)}function yD(n,e){return n.x<=e.x&&n.x+n.w>=e.x+e.w&&n.y<=e.y&&n.y+n.h>=e.y+e.h}function xD(n){const{minX:e,minY:t,width:r,height:o}=ia.getBoundsFromPoints(n);return new ns(e,t,r,o)}function M6(n,e){const t=e/2,r=new ns(n.x-t,n.y-t,n.w+e,n.h+e);if(r.w<=0||r.h<=0)throw new Error("Invalid delta range or bound size.");return r}function I6(n,e,t,r,o){const i=t*2,a=o*2,s=Math.max(e.w-i,1),l=Math.max(e.h-i,1),d=Math.max(r.w-a,1),u=Math.max(r.h-a,1);return{points:n.map(f=>({...f,x:d*((f.x-t)/s)+o,y:u*((f.y-t)/l)+o})),bound:new ns(r.x,r.y,d+a,u+a)}}function Hb(n,e,t){return n.x<=e&&e<=n.x+n.w&&n.y<=t&&t<=n.y+n.h}function Fb(n,e){return n.x<e.x+e.w&&n.x+n.w>e.x&&n.y<e.y+e.h&&n.y+n.h>e.y}class Zb{get display(){return this._display}setDisplay(e){var t,r;this._display=e,(t=this.renderer)==null||t.removeElement(this),(r=this.renderer)==null||r.addElement(this)}constructor(e,t,r){if(this.renderer=null,this.surface=null,this.computedValue=o=>o,this._display=!0,this._onMap=()=>{var o,i;(o=this.renderer)==null||o.removeElement(this),(i=this.renderer)==null||i.addElement(this)},!e.doc)throw new Error("yMap must be bound to a Y.Doc");if(this.yMap=e,r)for(const o in r)this.yMap.set(o,r[o]);this.surface=t}get id(){return this.yMap.get("id")}get index(){return this.yMap.get("index")}get type(){return this.yMap.get("type")}get xywh(){return this.yMap.get("xywh")}get x(){const[e]=Da(this.xywh);return e}get y(){const[,e]=Da(this.xywh);return e}get w(){const[,,e]=Da(this.xywh);return e}get h(){const[,,,e]=Da(this.xywh);return e}get seed(){return this.yMap.get("seed")}get minWidth(){return this.w}get minHeight(){return this.h}applyUpdate(e){for(const t in e)this.yMap.set(t,e[t])}serialize(){return this.yMap.toJSON()}hitTest(e,t,r){return Hb(this,e,t)}mount(e){this.renderer=e,this.renderer.addElement(this),this.yMap.observeDeep(this._onMap)}unmount(){var e;this.yMap.unobserveDeep(this._onMap),(e=this.renderer)==null||e.removeElement(this),this.renderer=null}render(e,t){}}function gte(n,e){return ute(n,{size:e,thinning:.6,streamline:.5,smoothing:.5,easing:t=>Math.sin(t*Math.PI/2),simulatePressure:!0})}class mte extends Zb{get points(){return this.yMap.get("points")}get color(){return this.yMap.get("color")}get lineWidth(){return this.yMap.get("lineWidth")}render(e){const t=gte(this.points,this.lineWidth),r=ia.getSvgPathFromStroke(t),o=new Path2D(r);e.fillStyle=this.computedValue(this.color),e.fill(o)}applyUpdate(e){const t={...e},{points:r,xywh:o}=e;if(r!=null&&r.length){const i=this.lineWidth,a=xD(r),s=M6(a,i),l=r.map(([d,u])=>[d-s.x,u-s.y]);t.points=l,t.xywh=s.serialize()}if(o){const i=ns.deserialize(o),{lineWidth:a}=this,s=I6(this.points.map(([l,d])=>({x:l,y:d})),this,a/2,i,a/2);t.points=s.points.map(l=>[l.x,l.y]),t.xywh=s.bound.serialize()}if(e.lineWidth&&e.lineWidth!==this.lineWidth){const i=t.xywh?ns.deserialize(t.xywh):this,a=t.points??this.points,s=I6(a.map(([l,d])=>({x:l,y:d})),i,this.lineWidth/2,M6(i,e.lineWidth-this.lineWidth),e.lineWidth/2);t.points=s.points.map(l=>[l.x,l.y]),t.xywh=s.bound.serialize()}for(const i in t)this.yMap.set(i,t[i])}}const vte={type:"brush",xywh:"[0,0,0,0]",points:[],color:"#000000",lineWidth:4};function wD([n,e],[t,r],o=10){const i=t-n,a=r-e,s=Math.atan2(a,i),l=[t-o*Math.cos(s-Math.PI/10),r-o*Math.sin(s-Math.PI/10)],d=[t-o*Math.cos(s+Math.PI/10),r-o*Math.sin(s+Math.PI/10)];return{sides:[l,d],start:[n,e],end:[t,r]}}function bte(n){const e=n[n.length-1],t=n[n.length-2],o=wD([e.x,e.y],[t.x,t.y]).sides.concat(n.map(i=>[i.x,i.y]));return xD(o)}class vx extends Zb{get mode(){return this.yMap.get("mode")}get lineWidth(){return this.yMap.get("lineWidth")}get color(){return this.yMap.get("color")}get strokeStyle(){return this.yMap.get("strokeStyle")}get roughness(){return this.yMap.get("roughness")??2}get startElement(){return this.yMap.get("startElement")}get endElement(){return this.yMap.get("endElement")}get controllers(){return this.yMap.get("controllers")}render(e,t){const{seed:r,strokeStyle:o,color:i,roughness:a,lineWidth:s,controllers:l}=this,d=this.computedValue(i);this.mode===Hs.Orthogonal?t.linearPath(l.map(c=>[c.x,c.y]),{seed:r,roughness:a,strokeLineDash:o===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:s}):t.linearPath([[l[0].x,l[0].y],[l[l.length-1].x,l[l.length-1].y]],{seed:r,roughness:a,strokeLineDash:o===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:s});const u=this.controllers[this.controllers.length-1],p=this.controllers[this.controllers.length-2],{sides:f,end:h}=wD([p.x,p.y],[u.x,u.y],35);t.linearPath([[f[0][0],f[0][1]],[h[0],h[1]],[f[1][0],f[1][1]]],{seed:r,roughness:a,strokeLineDash:o===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:s})}applyUpdate(e){const t={...e},{controllers:r,xywh:o}=e;if(r!=null&&r.length){const i=e.lineWidth??this.lineWidth,a=bte(r),s=M6(a,i),l=r.map(d=>({...d,x:d.x-s.x,y:d.y-s.y}));t.controllers=l,t.xywh=s.serialize()}if(o){const{lineWidth:i}=this,a=ns.deserialize(o),s=I6(this.controllers,this,i/2,a,i/2);t.controllers=s.points,t.xywh=s.bound.serialize()}if(e.lineWidth&&e.lineWidth!==this.lineWidth){const i=t.xywh?ns.deserialize(t.xywh):this,a=t.controllers??this.controllers,s=I6(a,i,this.lineWidth/2,M6(i,e.lineWidth-this.lineWidth),e.lineWidth/2);t.controllers=s.points,t.xywh=s.bound.serialize()}for(const i in t)this.yMap.set(i,t[i])}}const yte={type:"connector",xywh:"[0,0,0,0]",mode:Hs.Orthogonal,lineWidth:4,color:"#000000",strokeStyle:ya.Solid,roughness:2,controllers:[]},xte={type:"debug",xywh:"[0,0,0,0]",color:"#000000"};class wte extends Zb{get color(){return this.yMap.get("color")}render(e){e.fillStyle=this.color,e.fillRect(0,0,this.w,this.h)}}const Cte={type:"shape",xywh:"[0,0,0,0]",shapeType:"rect",radius:0,filled:!1,fillColor:"#ffffff",strokeWidth:4,strokeColor:"#000000",strokeStyle:ya.Solid,roughness:2},Ste={render(n,e,t){const{w:r,h:o,seed:i,strokeWidth:a,filled:s,realFillColor:l,realStrokeColor:d,strokeStyle:u,roughness:p}=t,f=Math.max(a,0)/2,h=r-f*2,c=o-f*2;n.translate(f,f),e.polygon([[h/2,0],[h,c/2],[h/2,c],[0,c/2]],{seed:i,roughness:p,strokeLineDash:u===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:a,fill:s?l:void 0})},hitTest(n,e,t,r){const o=[[t.x+t.w/2,t.y+0],[t.x+t.w,t.y+t.h/2],[t.x+t.w/2,t.y+t.h],[t.x+0,t.y+t.h/2]];return ia.pointInPolygon([n,e],o)}},kte={render(n,e,t){const{w:r,h:o,seed:i,strokeWidth:a,filled:s,realFillColor:l,realStrokeColor:d,strokeStyle:u,roughness:p}=t,f=Math.max(a,0)/2,h=Math.max(1,r-f*2),c=Math.max(1,o-f*2);n.translate(f,f),e.ellipse(h/2,c/2,h,c,{seed:i,roughness:p,strokeLineDash:u===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:a,fill:s?l:void 0})},hitTest(n,e,t,r){return ia.pointInEllipse([n,e],[t.x+t.w/2,t.y+t.h/2],t.w/2,t.h/2)}},Sf=1-.5522847498,_te={render(n,e,t){const{w:r,h:o,seed:i,strokeWidth:a,filled:s,realFillColor:l,realStrokeColor:d,radius:u,strokeStyle:p,roughness:f}=t,h=Math.max(a,0)/2,c=r-h*2,g=o-h*2,m=Math.min(c*u,g*u);n.translate(h,h),e.path(`
      M${m} 0
      L${c-m} 0
      C ${c-Sf*m} 0 ${c} ${Sf*m} ${c} ${m}
      L${c} ${g-m}
      C ${c} ${g-Sf*m} ${c-Sf*m} ${g} ${c-m} ${g}
      L${m} ${g}
      C ${Sf*m} ${g} 0 ${g-Sf*m} 0 ${g-m}
      L0 ${m}
      C 0 ${Sf*m} ${Sf*m} 0 ${m} 0
      Z
      `,{seed:i,roughness:f,strokeLineDash:p===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:a,fill:s?l:void 0})},hitTest(n,e,t,r){return Hb(t,n,e)}},Ete={render(n,e,t){const{w:r,h:o,seed:i,strokeWidth:a,filled:s,realFillColor:l,realStrokeColor:d,strokeStyle:u,roughness:p}=t,f=Math.max(a,0)/2,h=r-f*2,c=o-f*2;n.translate(f,f),e.polygon([[h/2,0],[h,c],[0,c]],{seed:i,roughness:p,strokeLineDash:u===ya.Dashed?[12,12]:void 0,stroke:d,strokeWidth:a,fill:s?l:void 0})},hitTest(n,e,t,r){const o=[[t.x+t.w/2,t.y+0],[t.x+t.w,t.y+t.h],[t.x+0,t.y+t.h]];return ia.pointInPolygon([n,e],o)}},ZI={rect:_te,triangle:Ete,ellipse:kte,diamond:Ste};class Pte extends Zb{get shapeType(){return this.yMap.get("shapeType")}get radius(){return this.yMap.get("radius")}get filled(){return this.yMap.get("filled")}get fillColor(){return this.yMap.get("fillColor")}get strokeWidth(){return this.yMap.get("strokeWidth")}get strokeColor(){return this.yMap.get("strokeColor")}get strokeStyle(){return this.yMap.get("strokeStyle")}get roughness(){return this.yMap.get("roughness")??2}get realStrokeColor(){return this.computedValue(this.strokeColor)}get realFillColor(){return this.computedValue(this.fillColor)}hitTest(e,t,r){const{hitTest:o}=ZI[this.shapeType];return o(e,t,this,r)}render(e,t){const{render:r}=ZI[this.shapeType];r(e,t,this)}}const Mte={type:"text",xywh:"[0,0,0,0]",text:new $g,color:"#000000",fontSize:16,fontFamily:"'Kalam', cursive",textAlign:"center"},Ite="A-Za-z--------",Tte="---",Ote=new RegExp(`^[^${Ite}]*[${Tte}]`),Ate=n=>Ote.test(n);var Tj;const Lte=((Tj=globalThis.navigator)==null?void 0:Tj.userAgent.indexOf("Chrome"))!==-1;var Oj;!Lte&&((Oj=globalThis.navigator)==null||Oj.userAgent.indexOf("Safari"));const $te=({fontSize:n,fontFamily:e,lineHeight:t})=>`${n}px/${t} ${e}`;function jte(n){return n.replace(/\t/g,"        ").replace(/\r?\n|\r/g,`
`)}const Rte=n=>jte(n).split(`
`);function Dte(n,e){const r=document.createElement("canvas").getContext("2d");return r.font=e,r.measureText(n).width}function Nte(n,e){const t=Rte(n);let r=0;return t.forEach(o=>{r=Math.max(r,Dte(o,e))}),r}function zte(n){const e=[];let t=n.insert;for(;t.length>0;){const r=t.indexOf(`
`);if(r===-1){e.push({insert:t,attributes:n.attributes});break}t.slice(0,r).length>0&&e.push({insert:t.slice(0,r),attributes:n.attributes}),e.push(`
`),t=t.slice(r+1)}return e}function Bte(n){if(n.length===0)return[[]];const e=n.flatMap(zte);function*t(r){let o=0;for(let i=0;i<r.length;i++)if(r[i]===`
`){const a=r.slice(o,i);o=i+1,yield a}else i===r.length-1&&(yield r.slice(o));r.at(-1)===`
`&&(yield[])}return[...t(e)]}class E1 extends Zb{constructor(){super(...arguments),this._maxTextWidth=0,this._maxTextHeight=0,this._lineHeight=0,this._lines=[]}get text(){return this.yMap.get("text")}get color(){return this.yMap.get("color")}get fontSize(){return this.yMap.get("fontSize")}get fontFamily(){return this.yMap.get("fontFamily")}get textAlign(){return this.yMap.get("textAlign")}get minWidth(){return this._maxTextWidth}get minHeight(){return this._maxTextHeight}get lineHeight(){return this._lineHeight}get lines(){return this._lines}render(e){const{w:t,text:r,color:o,fontSize:i,fontFamily:a,textAlign:s}=this,d=r.toDelta(),u=Bte(d);this._lines=u;const p=this.h/u.length,f=$te({fontSize:i,lineHeight:`${p}px`,fontFamily:a});this._lineHeight=p;const h=s==="center"?t/2:s==="right"?t:0;for(const[c,g]of u.entries()){let m=0;for(const b of g){e.save();const v=b.insert,w=Ate(v),_=w&&!e.canvas.isConnected;_&&document.body.appendChild(e.canvas),e.canvas.setAttribute("dir",w?"rtl":"ltr"),e.font=f,e.fillStyle=this.computedValue(o),e.textAlign=s,e.textBaseline="ideographic",e.fillText(v,h+m,(c+1)*p),m+=Nte(v,a),_&&e.canvas.remove(),e.restore()}m>this._maxTextWidth&&(this._maxTextWidth=m)}this._maxTextHeight<u.length*p&&(this._maxTextHeight=u.length*p)}}const UI={debug:wte,brush:mte,shape:Pte,connector:vx,text:E1},Hte={debug:xte,brush:vte,shape:Cte,connector:yte,text:Mte};function gg(n){return Math.ceil(n/tte)-1}function v5(n){const e=gg(n.x),t=gg(n.x+n.w),r=gg(n.y),o=gg(n.y+n.h);return[e,t,r,o]}function Sv(n,e){return n.index<e.index?-1:n.index>e.index?1:0}class Fte{constructor(){this._grids=new Map,this._elementToGrids=new Map}_createGrid(e,t){const r=e+"|"+t,o=new Set;return this._grids.set(r,o),o}_getGrid(e,t){const r=e+"|"+t;return this._grids.get(r)}get isEmpty(){return this._grids.size===0}add(e){const[t,r,o,i]=v5(e),a=new Set;this._elementToGrids.set(e,a);for(let s=t;s<=r;s++)for(let l=o;l<=i;l++){let d=this._getGrid(s,l);d||(d=this._createGrid(s,l)),d.add(e),a.add(d)}}remove(e){const t=this._elementToGrids.get(e);xt(t);for(const r of t)r.delete(e)}boundHasChanged(e,t){const[r,o,i,a]=v5(e),[s,l,d,u]=v5(t);return r!==s||o!==l||i!==d||a!==u}search(e){const[t,r,o,i]=v5(e),a=new Set;for(let l=t;l<=r;l++)for(let d=o;d<=i;d++){const u=this._getGrid(l,d);if(u)for(const p of u)Fb(p,e)&&a.add(p)}return Array.from(a).sort(Sv)}pick(e,t){const r=gg(e),o=gg(t),i=this._getGrid(r,o);if(!i)return[];const a=[];for(const s of i)Hb(s,e,t)&&a.push(s);return a}}function rC(n,e,t){if(n&&n.length){const[r,o]=e,i=Math.PI/180*t,a=Math.cos(i),s=Math.sin(i);for(const l of n){const[d,u]=l;l[0]=(d-r)*a-(u-o)*s+r,l[1]=(d-r)*s+(u-o)*a+o}}}function Zte(n,e,t){const r=[];n.forEach(o=>r.push(...o)),rC(r,e,t)}function Ute(n,e){return n[0]===e[0]&&n[1]===e[1]}function Wte(n,e,t,r=1){const o=t,i=Math.max(e,.1),a=n[0]&&n[0][0]&&typeof n[0][0]=="number"?[n]:n,s=[0,0];if(o)for(const d of a)rC(d,s,o);const l=Vte(a,i,r);if(o){for(const d of a)rC(d,s,-o);Zte(l,s,-o)}return l}function Vte(n,e,t){const r=[];for(const d of n){const u=[...d];Ute(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&r.push(u)}const o=[];e=Math.max(e,.1);const i=[];for(const d of r)for(let u=0;u<d.length-1;u++){const p=d[u],f=d[u+1];if(p[1]!==f[1]){const h=Math.min(p[1],f[1]);i.push({ymin:h,ymax:Math.max(p[1],f[1]),x:h===p[1]?p[0]:f[0],islope:(f[0]-p[0])/(f[1]-p[1])})}}if(i.sort((d,u)=>d.ymin<u.ymin?-1:d.ymin>u.ymin?1:d.x<u.x?-1:d.x>u.x?1:d.ymax===u.ymax?0:(d.ymax-u.ymax)/Math.abs(d.ymax-u.ymax)),!i.length)return o;let a=[],s=i[0].ymin,l=0;for(;a.length||i.length;){if(i.length){let d=-1;for(let p=0;p<i.length&&!(i[p].ymin>s);p++)d=p;i.splice(0,d+1).forEach(p=>{a.push({s,edge:p})})}if(a=a.filter(d=>!(d.edge.ymax<=s)),a.sort((d,u)=>d.edge.x===u.edge.x?0:(d.edge.x-u.edge.x)/Math.abs(d.edge.x-u.edge.x)),(t!==1||l%e===0)&&a.length>1)for(let d=0;d<a.length;d=d+2){const u=d+1;if(u>=a.length)break;const p=a[d].edge,f=a[u].edge;o.push([[Math.round(p.x),s],[Math.round(f.x),s]])}s+=t,a.forEach(d=>{d.edge.x=d.edge.x+t*d.edge.islope}),l++}return o}function Ub(n,e){var t;const r=e.hachureAngle+90;let o=e.hachureGap;o<0&&(o=e.strokeWidth*4),o=Math.round(Math.max(o,.1));let i=1;return e.roughness>=1&&(((t=e.randomizer)===null||t===void 0?void 0:t.next())||Math.random())>.7&&(i=o),Wte(n,o,r,i||1)}class yk{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const r=Ub(e,t);return{type:"fillSketch",ops:this.renderLines(r,t)}}renderLines(e,t){const r=[];for(const o of e)r.push(...this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],t));return r}}function bx(n){const e=n[0],t=n[1];return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}class Kte extends yk{fillPolygons(e,t){let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);const o=Object.assign({},t,{hachureGap:r}),i=Ub(e,o),a=Math.PI/180*t.hachureAngle,s=[],l=r*.5*Math.cos(a),d=r*.5*Math.sin(a);for(const[p,f]of i)bx([p,f])&&s.push([[p[0]-l,p[1]+d],[...f]],[[p[0]+l,p[1]-d],[...f]]);return{type:"fillSketch",ops:this.renderLines(s,t)}}}class Yte extends yk{fillPolygons(e,t){const r=this._fillPolygons(e,t),o=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),i=this._fillPolygons(e,o);return r.ops=r.ops.concat(i.ops),r}}class Gte{constructor(e){this.helper=e}fillPolygons(e,t){t=Object.assign({},t,{hachureAngle:0});const r=Ub(e,t);return this.dotsOnLines(r,t)}dotsOnLines(e,t){const r=[];let o=t.hachureGap;o<0&&(o=t.strokeWidth*4),o=Math.max(o,.1);let i=t.fillWeight;i<0&&(i=t.strokeWidth/2);const a=o/4;for(const s of e){const l=bx(s),d=l/o,u=Math.ceil(d)-1,p=l-u*o,f=(s[0][0]+s[1][0])/2-o/4,h=Math.min(s[0][1],s[1][1]);for(let c=0;c<u;c++){const g=h+p+c*o,m=f-a+Math.random()*2*a,b=g-a+Math.random()*2*a,v=this.helper.ellipse(m,b,i,i,t);r.push(...v.ops)}}return{type:"fillSketch",ops:r}}}class Xte{constructor(e){this.helper=e}fillPolygons(e,t){const r=Ub(e,t);return{type:"fillSketch",ops:this.dashedLine(r,t)}}dashedLine(e,t){const r=t.dashOffset<0?t.hachureGap<0?t.strokeWidth*4:t.hachureGap:t.dashOffset,o=t.dashGap<0?t.hachureGap<0?t.strokeWidth*4:t.hachureGap:t.dashGap,i=[];return e.forEach(a=>{const s=bx(a),l=Math.floor(s/(r+o)),d=(s+o-l*(r+o))/2;let u=a[0],p=a[1];u[0]>p[0]&&(u=a[1],p=a[0]);const f=Math.atan((p[1]-u[1])/(p[0]-u[0]));for(let h=0;h<l;h++){const c=h*(r+o),g=c+r,m=[u[0]+c*Math.cos(f)+d*Math.cos(f),u[1]+c*Math.sin(f)+d*Math.sin(f)],b=[u[0]+g*Math.cos(f)+d*Math.cos(f),u[1]+g*Math.sin(f)+d*Math.sin(f)];i.push(...this.helper.doubleLineOps(m[0],m[1],b[0],b[1],t))}}),i}}class qte{constructor(e){this.helper=e}fillPolygons(e,t){const r=t.hachureGap<0?t.strokeWidth*4:t.hachureGap,o=t.zigzagOffset<0?r:t.zigzagOffset;t=Object.assign({},t,{hachureGap:r+o});const i=Ub(e,t);return{type:"fillSketch",ops:this.zigzagLines(i,o,t)}}zigzagLines(e,t,r){const o=[];return e.forEach(i=>{const a=bx(i),s=Math.round(a/(2*t));let l=i[0],d=i[1];l[0]>d[0]&&(l=i[1],d=i[0]);const u=Math.atan((d[1]-l[1])/(d[0]-l[0]));for(let p=0;p<s;p++){const f=p*2*t,h=(p+1)*2*t,c=Math.sqrt(2*Math.pow(t,2)),g=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],m=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],b=[g[0]+c*Math.cos(u+Math.PI/4),g[1]+c*Math.sin(u+Math.PI/4)];o.push(...this.helper.doubleLineOps(g[0],g[1],b[0],b[1],r),...this.helper.doubleLineOps(b[0],b[1],m[0],m[1],r))}}),o}}const jl={};function Jte(n,e){let t=n.fillStyle||"hachure";if(!jl[t])switch(t){case"zigzag":jl[t]||(jl[t]=new Kte(e));break;case"cross-hatch":jl[t]||(jl[t]=new Yte(e));break;case"dots":jl[t]||(jl[t]=new Gte(e));break;case"dashed":jl[t]||(jl[t]=new Xte(e));break;case"zigzag-line":jl[t]||(jl[t]=new qte(e));break;case"hachure":default:t="hachure",jl[t]||(jl[t]=new yk(e));break}return jl[t]}function CD(){return Math.floor(Math.random()*2**31)}class Qte{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ene=0,oC=1,SD=2,b5={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function tne(n){const e=new Array;for(;n!=="";)if(n.match(/^([ \t\r\n,]+)/))n=n.substr(RegExp.$1.length);else if(n.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:ene,text:RegExp.$1},n=n.substr(RegExp.$1.length);else if(n.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))e[e.length]={type:oC,text:`${parseFloat(RegExp.$1)}`},n=n.substr(RegExp.$1.length);else return[];return e[e.length]={type:SD,text:""},e}function D7(n,e){return n.type===e}function xk(n){const e=[],t=tne(n);let r="BOD",o=0,i=t[o];for(;!D7(i,SD);){let a=0;const s=[];if(r==="BOD")if(i.text==="M"||i.text==="m")o++,a=b5[i.text],r=i.text;else return xk("M0,0"+n);else D7(i,oC)?a=b5[r]:(o++,a=b5[i.text],r=i.text);if(o+a<t.length){for(let l=o;l<o+a;l++){const d=t[l];if(D7(d,oC))s[s.length]=+d.text;else throw new Error("Param not a number: "+r+","+d.text)}if(typeof b5[r]=="number"){const l={key:r,data:s};e.push(l),o+=a,i=t[o],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return e}function kD(n){let e=0,t=0,r=0,o=0;const i=[];for(const{key:a,data:s}of n)switch(a){case"M":i.push({key:"M",data:[...s]}),[e,t]=s,[r,o]=s;break;case"m":e+=s[0],t+=s[1],i.push({key:"M",data:[e,t]}),r=e,o=t;break;case"L":i.push({key:"L",data:[...s]}),[e,t]=s;break;case"l":e+=s[0],t+=s[1],i.push({key:"L",data:[e,t]});break;case"C":i.push({key:"C",data:[...s]}),e=s[4],t=s[5];break;case"c":{const l=s.map((d,u)=>u%2?d+t:d+e);i.push({key:"C",data:l}),e=l[4],t=l[5];break}case"Q":i.push({key:"Q",data:[...s]}),e=s[2],t=s[3];break;case"q":{const l=s.map((d,u)=>u%2?d+t:d+e);i.push({key:"Q",data:l}),e=l[2],t=l[3];break}case"A":i.push({key:"A",data:[...s]}),e=s[5],t=s[6];break;case"a":e+=s[5],t+=s[6],i.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,t]});break;case"H":i.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...s]}),t=s[0];break;case"v":t+=s[0],i.push({key:"V",data:[t]});break;case"S":i.push({key:"S",data:[...s]}),e=s[2],t=s[3];break;case"s":{const l=s.map((d,u)=>u%2?d+t:d+e);i.push({key:"S",data:l}),e=l[2],t=l[3];break}case"T":i.push({key:"T",data:[...s]}),e=s[0],t=s[1];break;case"t":e+=s[0],t+=s[1],i.push({key:"T",data:[e,t]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=r,t=o;break}return i}function _D(n){const e=[];let t="",r=0,o=0,i=0,a=0,s=0,l=0;for(const{key:d,data:u}of n){switch(d){case"M":e.push({key:"M",data:[...u]}),[r,o]=u,[i,a]=u;break;case"C":e.push({key:"C",data:[...u]}),r=u[4],o=u[5],s=u[2],l=u[3];break;case"L":e.push({key:"L",data:[...u]}),[r,o]=u;break;case"H":r=u[0],e.push({key:"L",data:[r,o]});break;case"V":o=u[0],e.push({key:"L",data:[r,o]});break;case"S":{let p=0,f=0;t==="C"||t==="S"?(p=r+(r-s),f=o+(o-l)):(p=r,f=o),e.push({key:"C",data:[p,f,...u]}),s=u[0],l=u[1],r=u[2],o=u[3];break}case"T":{const[p,f]=u;let h=0,c=0;t==="Q"||t==="T"?(h=r+(r-s),c=o+(o-l)):(h=r,c=o);const g=r+2*(h-r)/3,m=o+2*(c-o)/3,b=p+2*(h-p)/3,v=f+2*(c-f)/3;e.push({key:"C",data:[g,m,b,v,p,f]}),s=h,l=c,r=p,o=f;break}case"Q":{const[p,f,h,c]=u,g=r+2*(p-r)/3,m=o+2*(f-o)/3,b=h+2*(p-h)/3,v=c+2*(f-c)/3;e.push({key:"C",data:[g,m,b,v,h,c]}),s=p,l=f,r=h,o=c;break}case"A":{const p=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],c=u[3],g=u[4],m=u[5],b=u[6];p===0||f===0?(e.push({key:"C",data:[r,o,m,b,m,b]}),r=m,o=b):(r!==m||o!==b)&&(ED(r,o,m,b,p,f,h,c,g).forEach(function(w){e.push({key:"C",data:w})}),r=m,o=b);break}case"Z":e.push({key:"Z",data:[]}),r=i,o=a;break}t=d}return e}function nne(n){return Math.PI*n/180}function j2(n,e,t){const r=n*Math.cos(t)-e*Math.sin(t),o=n*Math.sin(t)+e*Math.cos(t);return[r,o]}function ED(n,e,t,r,o,i,a,s,l,d){const u=nne(a);let p=[],f=0,h=0,c=0,g=0;if(d)[f,h,c,g]=d;else{[n,e]=j2(n,e,-u),[t,r]=j2(t,r,-u);const L=(n-t)/2,j=(e-r)/2;let $=L*L/(o*o)+j*j/(i*i);$>1&&($=Math.sqrt($),o=$*o,i=$*i);const ee=s===l?-1:1,Q=o*o,pe=i*i,ie=Q*pe-Q*j*j-pe*L*L,te=Q*j*j+pe*L*L,Z=ee*Math.sqrt(Math.abs(ie/te));c=Z*o*j/i+(n+t)/2,g=Z*-i*L/o+(e+r)/2,f=Math.asin(parseFloat(((e-g)/i).toFixed(9))),h=Math.asin(parseFloat(((r-g)/i).toFixed(9))),n<c&&(f=Math.PI-f),t<c&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let m=h-f;if(Math.abs(m)>Math.PI*120/180){const L=h,j=t,$=r;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,t=c+o*Math.cos(h),r=g+i*Math.sin(h),p=ED(t,r,j,$,o,i,a,0,l,[h,L,c,g])}m=h-f;const b=Math.cos(f),v=Math.sin(f),w=Math.cos(h),_=Math.sin(h),k=Math.tan(m/4),y=4/3*o*k,S=4/3*i*k,C=[n,e],I=[n+y*v,e-S*b],A=[t+y*_,r-S*w],T=[t,r];if(I[0]=2*C[0]-I[0],I[1]=2*C[1]-I[1],d)return[I,A,T].concat(p);{p=[I,A,T].concat(p);const L=[];for(let j=0;j<p.length;j+=3){const $=j2(p[j][0],p[j][1],u),ee=j2(p[j+1][0],p[j+1][1],u),Q=j2(p[j+2][0],p[j+2][1],u);L.push([$[0],$[1],ee[0],ee[1],Q[0],Q[1]])}return L}}const rne={randOffset:lne,randOffsetWithRange:cne,ellipse:ane,doubleLineOps:dne};function PD(n,e,t,r,o){return{type:"path",ops:Vf(n,e,t,r,o)}}function _3(n,e,t){const r=(n||[]).length;if(r>2){const o=[];for(let i=0;i<r-1;i++)o.push(...Vf(n[i][0],n[i][1],n[i+1][0],n[i+1][1],t));return e&&o.push(...Vf(n[r-1][0],n[r-1][1],n[0][0],n[0][1],t)),{type:"path",ops:o}}else if(r===2)return PD(n[0][0],n[0][1],n[1][0],n[1][1],t);return{type:"path",ops:[]}}function one(n,e){return _3(n,!0,e)}function ine(n,e,t,r,o){const i=[[n,e],[n+t,e],[n+t,e+r],[n,e+r]];return one(i,o)}function WI(n,e){if(n.length){const r=typeof n[0][0]=="number"?[n]:n,o=y5(r[0],1*(1+e.roughness*.2),e),i=e.disableMultiStroke?[]:y5(r[0],1.5*(1+e.roughness*.22),YI(e));for(let a=1;a<r.length;a++){const s=r[a];if(s.length){const l=y5(s,1*(1+e.roughness*.2),e),d=e.disableMultiStroke?[]:y5(s,1.5*(1+e.roughness*.22),YI(e));for(const u of l)u.op!=="move"&&o.push(u);for(const u of d)u.op!=="move"&&i.push(u)}}return{type:"path",ops:o.concat(i)}}return{type:"path",ops:[]}}function ane(n,e,t,r,o){const i=MD(t,r,o);return iC(n,e,o,i).opset}function MD(n,e,t){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(n/2,2)+Math.pow(e/2,2))/2)),o=Math.ceil(Math.max(t.curveStepCount,t.curveStepCount/Math.sqrt(200)*r)),i=Math.PI*2/o;let a=Math.abs(n/2),s=Math.abs(e/2);const l=1-t.curveFitting;return a+=So(a*l,t),s+=So(s*l,t),{increment:i,rx:a,ry:s}}function iC(n,e,t,r){const[o,i]=GI(r.increment,n,e,r.rx,r.ry,1,r.increment*T6(.1,T6(.4,1,t),t),t);let a=O6(o,null,t);if(!t.disableMultiStroke&&t.roughness!==0){const[s]=GI(r.increment,n,e,r.rx,r.ry,1.5,0,t),l=O6(s,null,t);a=a.concat(l)}return{estimatedPoints:i,opset:{type:"path",ops:a}}}function VI(n,e,t,r,o,i,a,s,l){const d=n,u=e;let p=Math.abs(t/2),f=Math.abs(r/2);p+=So(p*.01,l),f+=So(f*.01,l);let h=o,c=i;for(;h<0;)h+=Math.PI*2,c+=Math.PI*2;c-h>Math.PI*2&&(h=0,c=Math.PI*2);const g=Math.PI*2/l.curveStepCount,m=Math.min(g/2,(c-h)/2),b=XI(m,d,u,p,f,h,c,1,l);if(!l.disableMultiStroke){const v=XI(m,d,u,p,f,h,c,1.5,l);b.push(...v)}return a&&(s?b.push(...Vf(d,u,d+p*Math.cos(h),u+f*Math.sin(h),l),...Vf(d,u,d+p*Math.cos(c),u+f*Math.sin(c),l)):b.push({op:"lineTo",data:[d,u]},{op:"lineTo",data:[d+p*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:b}}function KI(n,e){const t=_D(kD(xk(n))),r=[];let o=[0,0],i=[0,0];for(const{key:a,data:s}of t)switch(a){case"M":{i=[s[0],s[1]],o=[s[0],s[1]];break}case"L":r.push(...Vf(i[0],i[1],s[0],s[1],e)),i=[s[0],s[1]];break;case"C":{const[l,d,u,p,f,h]=s;r.push(...une(l,d,u,p,f,h,i,e)),i=[f,h];break}case"Z":r.push(...Vf(i[0],i[1],o[0],o[1],e)),i=[o[0],o[1]];break}return{type:"path",ops:r}}function N7(n,e){const t=[];for(const r of n)if(r.length){const o=e.maxRandomnessOffset||0,i=r.length;if(i>2){t.push({op:"move",data:[r[0][0]+So(o,e),r[0][1]+So(o,e)]});for(let a=1;a<i;a++)t.push({op:"lineTo",data:[r[a][0]+So(o,e),r[a][1]+So(o,e)]})}}return{type:"fillPath",ops:t}}function fg(n,e){return Jte(e,rne).fillPolygons(n,e)}function sne(n,e,t,r,o,i,a){const s=n,l=e;let d=Math.abs(t/2),u=Math.abs(r/2);d+=So(d*.01,a),u+=So(u*.01,a);let p=o,f=i;for(;p<0;)p+=Math.PI*2,f+=Math.PI*2;f-p>Math.PI*2&&(p=0,f=Math.PI*2);const h=(f-p)/a.curveStepCount,c=[];for(let g=p;g<=f;g=g+h)c.push([s+d*Math.cos(g),l+u*Math.sin(g)]);return c.push([s+d*Math.cos(f),l+u*Math.sin(f)]),c.push([s,l]),fg([c],a)}function lne(n,e){return So(n,e)}function cne(n,e,t){return T6(n,e,t)}function dne(n,e,t,r,o){return Vf(n,e,t,r,o,!0)}function YI(n){const e=Object.assign({},n);return e.randomizer=void 0,n.seed&&(e.seed=n.seed+1),e}function ID(n){return n.randomizer||(n.randomizer=new Qte(n.seed||0)),n.randomizer.next()}function T6(n,e,t,r=1){return t.roughness*r*(ID(t)*(e-n)+n)}function So(n,e,t=1){return T6(-n,n,e,t)}function Vf(n,e,t,r,o,i=!1){const a=i?o.disableMultiStrokeFill:o.disableMultiStroke,s=aC(n,e,t,r,o,!0,!1);if(a)return s;const l=aC(n,e,t,r,o,!0,!0);return s.concat(l)}function aC(n,e,t,r,o,i,a){const s=Math.pow(n-t,2)+Math.pow(e-r,2),l=Math.sqrt(s);let d=1;l<200?d=1:l>500?d=.4:d=-.0016668*l+1.233334;let u=o.maxRandomnessOffset||0;u*u*100>s&&(u=l/10);const p=u/2,f=.2+ID(o)*.2;let h=o.bowing*o.maxRandomnessOffset*(r-e)/200,c=o.bowing*o.maxRandomnessOffset*(n-t)/200;h=So(h,o,d),c=So(c,o,d);const g=[],m=()=>So(p,o,d),b=()=>So(u,o,d),v=o.preserveVertices;return i&&(a?g.push({op:"move",data:[n+(v?0:m()),e+(v?0:m())]}):g.push({op:"move",data:[n+(v?0:So(u,o,d)),e+(v?0:So(u,o,d))]})),a?g.push({op:"bcurveTo",data:[h+n+(t-n)*f+m(),c+e+(r-e)*f+m(),h+n+2*(t-n)*f+m(),c+e+2*(r-e)*f+m(),t+(v?0:m()),r+(v?0:m())]}):g.push({op:"bcurveTo",data:[h+n+(t-n)*f+b(),c+e+(r-e)*f+b(),h+n+2*(t-n)*f+b(),c+e+2*(r-e)*f+b(),t+(v?0:b()),r+(v?0:b())]}),g}function y5(n,e,t){if(!n.length)return[];const r=[];r.push([n[0][0]+So(e,t),n[0][1]+So(e,t)]),r.push([n[0][0]+So(e,t),n[0][1]+So(e,t)]);for(let o=1;o<n.length;o++)r.push([n[o][0]+So(e,t),n[o][1]+So(e,t)]),o===n.length-1&&r.push([n[o][0]+So(e,t),n[o][1]+So(e,t)]);return O6(r,null,t)}function O6(n,e,t){const r=n.length,o=[];if(r>3){const i=[],a=1-t.curveTightness;o.push({op:"move",data:[n[1][0],n[1][1]]});for(let s=1;s+2<r;s++){const l=n[s];i[0]=[l[0],l[1]],i[1]=[l[0]+(a*n[s+1][0]-a*n[s-1][0])/6,l[1]+(a*n[s+1][1]-a*n[s-1][1])/6],i[2]=[n[s+1][0]+(a*n[s][0]-a*n[s+2][0])/6,n[s+1][1]+(a*n[s][1]-a*n[s+2][1])/6],i[3]=[n[s+1][0],n[s+1][1]],o.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&e.length===2){const s=t.maxRandomnessOffset;o.push({op:"lineTo",data:[e[0]+So(s,t),e[1]+So(s,t)]})}}else r===3?(o.push({op:"move",data:[n[1][0],n[1][1]]}),o.push({op:"bcurveTo",data:[n[1][0],n[1][1],n[2][0],n[2][1],n[2][0],n[2][1]]})):r===2&&o.push(...aC(n[0][0],n[0][1],n[1][0],n[1][1],t,!0,!0));return o}function GI(n,e,t,r,o,i,a,s){const l=s.roughness===0,d=[],u=[];if(l){n=n/4,u.push([e+r*Math.cos(-n),t+o*Math.sin(-n)]);for(let p=0;p<=Math.PI*2;p=p+n){const f=[e+r*Math.cos(p),t+o*Math.sin(p)];d.push(f),u.push(f)}u.push([e+r*Math.cos(0),t+o*Math.sin(0)]),u.push([e+r*Math.cos(n),t+o*Math.sin(n)])}else{const p=So(.5,s)-Math.PI/2;u.push([So(i,s)+e+.9*r*Math.cos(p-n),So(i,s)+t+.9*o*Math.sin(p-n)]);const f=Math.PI*2+p-.01;for(let h=p;h<f;h=h+n){const c=[So(i,s)+e+r*Math.cos(h),So(i,s)+t+o*Math.sin(h)];d.push(c),u.push(c)}u.push([So(i,s)+e+r*Math.cos(p+Math.PI*2+a*.5),So(i,s)+t+o*Math.sin(p+Math.PI*2+a*.5)]),u.push([So(i,s)+e+.98*r*Math.cos(p+a),So(i,s)+t+.98*o*Math.sin(p+a)]),u.push([So(i,s)+e+.9*r*Math.cos(p+a*.5),So(i,s)+t+.9*o*Math.sin(p+a*.5)])}return[u,d]}function XI(n,e,t,r,o,i,a,s,l){const d=i+So(.1,l),u=[];u.push([So(s,l)+e+.9*r*Math.cos(d-n),So(s,l)+t+.9*o*Math.sin(d-n)]);for(let p=d;p<=a;p=p+n)u.push([So(s,l)+e+r*Math.cos(p),So(s,l)+t+o*Math.sin(p)]);return u.push([e+r*Math.cos(a),t+o*Math.sin(a)]),u.push([e+r*Math.cos(a),t+o*Math.sin(a)]),O6(u,null,l)}function une(n,e,t,r,o,i,a,s){const l=[],d=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let u=[0,0];const p=s.disableMultiStroke?1:2,f=s.preserveVertices;for(let h=0;h<p;h++)h===0?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(f?0:So(d[0],s)),a[1]+(f?0:So(d[0],s))]}),u=f?[o,i]:[o+So(d[h],s),i+So(d[h],s)],l.push({op:"bcurveTo",data:[n+So(d[h],s),e+So(d[h],s),t+So(d[h],s),r+So(d[h],s),u[0],u[1]]});return l}function R2(n){return[...n]}function qI(n,e=0){const t=n.length;if(t<3)throw new Error("A curve must have at least three points.");const r=[];if(t===3)r.push(R2(n[0]),R2(n[1]),R2(n[2]),R2(n[2]));else{const o=[];o.push(n[0],n[0]);for(let s=1;s<n.length;s++)o.push(n[s]),s===n.length-1&&o.push(n[s]);const i=[],a=1-e;r.push(R2(o[0]));for(let s=1;s+2<o.length;s++){const l=o[s];i[0]=[l[0],l[1]],i[1]=[l[0]+(a*o[s+1][0]-a*o[s-1][0])/6,l[1]+(a*o[s+1][1]-a*o[s-1][1])/6],i[2]=[o[s+1][0]+(a*o[s][0]-a*o[s+2][0])/6,o[s+1][1]+(a*o[s][1]-a*o[s+2][1])/6],i[3]=[o[s+1][0],o[s+1][1]],r.push(i[1],i[2],i[3])}}return r}function hne(n,e){return Math.sqrt(E3(n,e))}function E3(n,e){return Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)}function fne(n,e,t){const r=E3(e,t);if(r===0)return E3(n,e);let o=((n[0]-e[0])*(t[0]-e[0])+(n[1]-e[1])*(t[1]-e[1]))/r;return o=Math.max(0,Math.min(1,o)),E3(n,Xp(e,t,o))}function Xp(n,e,t){return[n[0]+(e[0]-n[0])*t,n[1]+(e[1]-n[1])*t]}function pne(n,e){const t=n[e+0],r=n[e+1],o=n[e+2],i=n[e+3];let a=3*r[0]-2*t[0]-i[0];a*=a;let s=3*r[1]-2*t[1]-i[1];s*=s;let l=3*o[0]-2*i[0]-t[0];l*=l;let d=3*o[1]-2*i[1]-t[1];return d*=d,a<l&&(a=l),s<d&&(s=d),a+s}function sC(n,e,t,r){const o=r||[];if(pne(n,e)<t){const i=n[e+0];o.length?hne(o[o.length-1],i)>1&&o.push(i):o.push(i),o.push(n[e+3])}else{const a=n[e+0],s=n[e+1],l=n[e+2],d=n[e+3],u=Xp(a,s,.5),p=Xp(s,l,.5),f=Xp(l,d,.5),h=Xp(u,p,.5),c=Xp(p,f,.5),g=Xp(h,c,.5);sC([a,u,h,g],0,t,o),sC([g,c,f,d],0,t,o)}return o}function gne(n,e){return A6(n,0,n.length,e)}function A6(n,e,t,r,o){const i=o||[],a=n[e],s=n[t-1];let l=0,d=1;for(let u=e+1;u<t-1;++u){const p=fne(n[u],a,s);p>l&&(l=p,d=u)}return Math.sqrt(l)>r?(A6(n,e,d+1,r,i),A6(n,d,t,r,i)):(i.length||i.push(a),i.push(s)),i}function lC(n,e=.15,t){const r=[],o=(n.length-1)/3;for(let i=0;i<o;i++){const a=i*3;sC(n,a,e,r)}return t&&t>0?A6(r,0,r.length,t):r}function mne(n,e,t){const r=xk(n),o=_D(kD(r)),i=[];let a=[],s=[0,0],l=[];const d=()=>{l.length>=4&&a.push(...lC(l,e)),l=[]},u=()=>{d(),a.length&&(i.push(a),a=[])};for(const{key:f,data:h}of o)switch(f){case"M":u(),s=[h[0],h[1]],a.push(s);break;case"L":d(),a.push([h[0],h[1]]);break;case"C":if(!l.length){const c=a.length?a[a.length-1]:s;l.push([c[0],c[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":d(),a.push([s[0],s[1]]);break}if(u(),!t)return i;const p=[];for(const f of i){const h=gne(f,t);h.length&&p.push(h)}return p}const hc="none";class vne{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return CD()}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,r){return{shape:e,sets:t||[],options:r||this.defaultOptions}}line(e,t,r,o,i){const a=this._o(i);return this._d("line",[PD(e,t,r,o,a)],a)}rectangle(e,t,r,o,i){const a=this._o(i),s=[],l=ine(e,t,r,o,a);if(a.fill){const d=[[e,t],[e+r,t],[e+r,t+o],[e,t+o]];a.fillStyle==="solid"?s.push(N7([d],a)):s.push(fg([d],a))}return a.stroke!==hc&&s.push(l),this._d("rectangle",s,a)}ellipse(e,t,r,o,i){const a=this._o(i),s=[],l=MD(r,o,a),d=iC(e,t,a,l);if(a.fill)if(a.fillStyle==="solid"){const u=iC(e,t,a,l).opset;u.type="fillPath",s.push(u)}else s.push(fg([d.estimatedPoints],a));return a.stroke!==hc&&s.push(d.opset),this._d("ellipse",s,a)}circle(e,t,r,o){const i=this.ellipse(e,t,r,r,o);return i.shape="circle",i}linearPath(e,t){const r=this._o(t);return this._d("linearPath",[_3(e,!1,r)],r)}arc(e,t,r,o,i,a,s=!1,l){const d=this._o(l),u=[],p=VI(e,t,r,o,i,a,s,!0,d);if(s&&d.fill)if(d.fillStyle==="solid"){const f=Object.assign({},d);f.disableMultiStroke=!0;const h=VI(e,t,r,o,i,a,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(sne(e,t,r,o,i,a,d));return d.stroke!==hc&&u.push(p),this._d("arc",u,d)}curve(e,t){const r=this._o(t),o=[],i=WI(e,r);if(r.fill&&r.fill!==hc)if(r.fillStyle==="solid"){const a=WI(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],s=e;if(s.length){const d=typeof s[0][0]=="number"?[s]:s;for(const u of d)u.length<3?a.push(...u):u.length===3?a.push(...lC(qI([u[0],u[0],u[1],u[2]]),10,(1+r.roughness)/2)):a.push(...lC(qI(u),10,(1+r.roughness)/2))}a.length&&o.push(fg([a],r))}return r.stroke!==hc&&o.push(i),this._d("curve",o,r)}polygon(e,t){const r=this._o(t),o=[],i=_3(e,!0,r);return r.fill&&(r.fillStyle==="solid"?o.push(N7([e],r)):o.push(fg([e],r))),r.stroke!==hc&&o.push(i),this._d("polygon",o,r)}path(e,t){const r=this._o(t),o=[];if(!e)return this._d("path",o,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=r.fill&&r.fill!=="transparent"&&r.fill!==hc,a=r.stroke!==hc,s=!!(r.simplification&&r.simplification<1),l=s?4-4*(r.simplification||1):(1+r.roughness)/2,d=mne(e,1,l),u=KI(e,r);if(i)if(r.fillStyle==="solid")if(d.length===1){const p=KI(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(p.ops)})}else o.push(N7(d,r));else o.push(fg(d,r));return a&&(s?d.forEach(p=>{o.push(_3(p,!1,r))}):o.push(u)),this._d("path",o,r)}opsToPath(e,t){let r="";for(const o of e.ops){const i=typeof t=="number"&&t>=0?o.data.map(a=>+a.toFixed(t)):o.data;switch(o.op){case"move":r+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":r+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":r+=`L${i[0]} ${i[1]} `;break}}return r.trim()}toPaths(e){const t=e.sets||[],r=e.options||this.defaultOptions,o=[];for(const i of t){let a=null;switch(i.type){case"path":a={d:this.opsToPath(i),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:hc};break;case"fillPath":a={d:this.opsToPath(i),stroke:hc,strokeWidth:0,fill:r.fill||hc};break;case"fillSketch":a=this.fillSketch(i,r);break}a&&o.push(a)}return o}fillSketch(e,t){let r=t.fillWeight;return r<0&&(r=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||hc,strokeWidth:r,fill:hc}}_mergedShape(e){return e.filter((t,r)=>r===0?!0:t.op!=="move")}}class bne{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new vne(t)}draw(e){const t=e.sets||[],r=e.options||this.getDefaultOptions(),o=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(const a of t)switch(a.type){case"path":o.save(),o.strokeStyle=r.stroke==="none"?"transparent":r.stroke,o.lineWidth=r.strokeWidth,r.strokeLineDash&&o.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(o.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(o,a,i),o.restore();break;case"fillPath":{o.save(),o.fillStyle=r.fill||"";const s=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(o,a,i,s),o.restore();break}case"fillSketch":this.fillSketch(o,a,r);break}}fillSketch(e,t,r){let o=r.fillWeight;o<0&&(o=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=o,this._drawToContext(e,t,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,r,o="nonzero"){e.beginPath();for(const i of t.ops){const a=typeof r=="number"&&r>=0?i.data.map(s=>+s.toFixed(r)):i.data;switch(i.op){case"move":e.moveTo(a[0],a[1]);break;case"bcurveTo":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":e.lineTo(a[0],a[1]);break}}t.type==="fillPath"?e.fill(o):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,r,o,i){const a=this.gen.line(e,t,r,o,i);return this.draw(a),a}rectangle(e,t,r,o,i){const a=this.gen.rectangle(e,t,r,o,i);return this.draw(a),a}ellipse(e,t,r,o,i){const a=this.gen.ellipse(e,t,r,o,i);return this.draw(a),a}circle(e,t,r,o){const i=this.gen.circle(e,t,r,o);return this.draw(i),i}linearPath(e,t){const r=this.gen.linearPath(e,t);return this.draw(r),r}polygon(e,t){const r=this.gen.polygon(e,t);return this.draw(r),r}arc(e,t,r,o,i,a,s=!1,l){const d=this.gen.arc(e,t,r,o,i,a,s,l);return this.draw(d),d}curve(e,t){const r=this.gen.curve(e,t);return this.draw(r),r}path(e,t){const r=this.gen.path(e,t);return this.draw(r),r}}let yne=class{constructor(){this.gridManager=new Fte,this._left=0,this._top=0,this._width=0,this._height=0,this._zoom=1,this._center=new ho,this._shouldUpdate=!1,this.applyDeltaCenter=(t,r)=>{this.setCenter(this.centerX+t,this.centerY+r)};const e=document.createElement("canvas");this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.rc=new bne(e)}get left(){return this._left}get top(){return this._top}get width(){return this._width}get height(){return this._height}get zoom(){return this._zoom}get centerX(){return this._center.x}get centerY(){return this._center.y}get center(){return this._center}get viewportX(){const{centerX:e,width:t,zoom:r}=this;return e-t/2/r}get viewportY(){const{centerY:e,height:t,zoom:r}=this;return e-t/2/r}get viewportMinXY(){const{centerX:e,centerY:t,width:r,height:o,zoom:i}=this;return{x:e-r/2/i,y:t-o/2/i}}get viewportMaxXY(){const{centerX:e,centerY:t,width:r,height:o,zoom:i}=this;return{x:e+r/2/i,y:t+o/2/i}}get viewportBounds(){const{viewportMinXY:e,viewportMaxXY:t}=this;return{...e,w:t.x-e.x,h:t.y-e.y}}toModelCoord(e,t){const{viewportX:r,viewportY:o,zoom:i}=this;return[r+e/i,o+t/i]}toViewCoord(e,t){const{viewportX:r,viewportY:o,zoom:i}=this;return[(e-r)*i,(t-o)*i]}setCenter(e,t){this._center.set(e,t),this._shouldUpdate=!0}setZoom(e,t){const r=this.zoom;t=t??this._center,this._zoom=x1(e,mD,gD);const o=this.zoom,i=this.center.subtract(t),a=t.add(i.scale(r/o));this.setCenter(a.x,a.y),this._shouldUpdate=!0}addElement(e){this.gridManager.add(e),this._shouldUpdate=!0}removeElement(e){this.gridManager.remove(e),this._shouldUpdate=!0}load(e){for(let t=0;t<e.length;t++)this.gridManager.add(e[t]);this._shouldUpdate=!0}refresh(){this._shouldUpdate=!0}attach(e){GX(this._container,"Phasor surface is attached multiple times"),this._container=e,e.appendChild(this.canvas),this._resetSize(),this._loop()}onResize(){const e=this.width,t=this.height;this._resetSize(),this.setCenter(this.centerX-(e-this.width)/2,this.centerY-(t-this.height)/2),this._render(),this._shouldUpdate=!1}_resetSize(){const{canvas:e}=this,t=window.devicePixelRatio;e.style.width="100%",e.style.height="100%";const r=e.getBoundingClientRect();e.width=Math.ceil(r.width*t),e.height=Math.ceil(r.height*t),this._left=r.left,this._top=r.top,this._width=r.width,this._height=r.height,this._shouldUpdate=!0}_loop(){requestAnimationFrame(()=>{this._shouldUpdate&&this._render(),this._shouldUpdate=!1,this._loop()})}_render(){const{ctx:e,gridManager:t,viewportBounds:r,width:o,height:i,rc:a,zoom:s}=this,l=window.devicePixelRatio;e.clearRect(0,0,o*l,i*l),e.save(),e.setTransform(s*l,0,0,s*l,0,0);const d=t.search(r);for(const u of d){const p=u.x-r.x,f=u.y-r.y;e.save(),e.translate(p,f),Fb(u,r)&&u.display&&u.render(e,a),e.restore()}e.restore()}};const TD="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function mg(n,e,t){const r=t[0];if(e!=null&&n>=e)throw new Error(n+" >= "+e);if(n.slice(-1)===r||e&&e.slice(-1)===r)throw new Error("trailing zero");if(e){let a=0;for(;(n[a]||r)===e[a];)a++;if(a>0)return e.slice(0,a)+mg(n.slice(a),e.slice(a),t)}const o=n?t.indexOf(n[0]):0,i=e!=null?t.indexOf(e[0]):t.length;if(i-o>1){const a=Math.round(.5*(o+i));return t[a]}else return e&&e.length>1?e.slice(0,1):t[o]+mg(n.slice(1),null,t)}function OD(n){if(n.length!==AD(n[0]))throw new Error("invalid integer part of order key: "+n)}function AD(n){if(n>="a"&&n<="z")return n.charCodeAt(0)-97+2;if(n>="A"&&n<="Z")return 90-n.charCodeAt(0)+2;throw new Error("invalid order key head: "+n)}function fv(n){const e=AD(n[0]);if(e>n.length)throw new Error("invalid order key: "+n);return n.slice(0,e)}function JI(n,e){if(n==="A"+e[0].repeat(26))throw new Error("invalid order key: "+n);const t=fv(n);if(n.slice(t.length).slice(-1)===e[0])throw new Error("invalid order key: "+n)}function QI(n,e){OD(n);const[t,...r]=n.split("");let o=!0;for(let i=r.length-1;o&&i>=0;i--){const a=e.indexOf(r[i])+1;a===e.length?r[i]=e[0]:(r[i]=e[a],o=!1)}if(o){if(t==="Z")return"a"+e[0];if(t==="z")return null;const i=String.fromCharCode(t.charCodeAt(0)+1);return i>"a"?r.push(e[0]):r.pop(),i+r.join("")}else return t+r.join("")}function xne(n,e){OD(n);const[t,...r]=n.split("");let o=!0;for(let i=r.length-1;o&&i>=0;i--){const a=e.indexOf(r[i])-1;a===-1?r[i]=e.slice(-1):(r[i]=e[a],o=!1)}if(o){if(t==="a")return"Z"+e.slice(-1);if(t==="A")return null;const i=String.fromCharCode(t.charCodeAt(0)-1);return i<"Z"?r.push(e.slice(-1)):r.pop(),i+r.join("")}else return t+r.join("")}function yu(n,e,t=TD){if(n!=null&&JI(n,t),e!=null&&JI(e,t),n!=null&&e!=null&&n>=e)throw new Error(n+" >= "+e);if(n==null){if(e==null)return"a"+t[0];const l=fv(e),d=e.slice(l.length);if(l==="A"+t[0].repeat(26))return l+mg("",d,t);if(l<e)return l;const u=xne(l,t);if(u==null)throw new Error("cannot decrement any more");return u}if(e==null){const l=fv(n),d=n.slice(l.length),u=QI(l,t);return u??l+mg(d,null,t)}const r=fv(n),o=n.slice(r.length),i=fv(e),a=e.slice(i.length);if(r===i)return r+mg(o,a,t);const s=QI(r,t);if(s==null)throw new Error("cannot increment any more");return s<e?s:r+mg(o,null,t)}function L6(n,e,t,r=TD){if(t===0)return[];if(t===1)return[yu(n,e,r)];if(e==null){let a=yu(n,e,r);const s=[a];for(let l=0;l<t-1;l++)a=yu(a,e,r),s.push(a);return s}if(n==null){let a=yu(n,e,r);const s=[a];for(let l=0;l<t-1;l++)a=yu(n,a,r),s.push(a);return s.reverse(),s}const o=Math.floor(t/2),i=yu(n,e,r);return[...L6(n,i,o,r),i,...L6(i,e,t-o-1,r)]}function wne(){return XX(10)}function LD(n,e=1){const t=Math.sign(n),r=Math.abs(n),o=k3*100;r>o&&(n=o*t);let i=e-n/100;return i+=Math.log10(Math.max(1,e))*-t*Math.min(1,r/20),i}class $D{constructor(e,t=r=>r){this._elements=new Map,this._bindings=new Map,this.indexes={min:"a0",max:"a0"},this._onYContainer=r=>{r.changes.keys.size!==0&&r.keysChanged.forEach(o=>{const i=r.changes.keys.get(o);if(!i){console.error("invalid event",r);return}if(i.action==="add"){const a=this._yContainer.get(o),s=a.get("type"),l=UI[s];xt(l);const d=new l(a,this);d.computedValue=this._computedValue,d.mount(this._renderer),this._elements.set(d.id,d),d.index>this.indexes.max&&(this.indexes.max=d.index),this._updateBindings(d)}else if(i.action==="update")console.error("update event on yElements is not supported",r);else if(i.action==="delete"){const a=this._elements.get(o);xt(a),a.unmount(),this._elements.delete(o),a.index===this.indexes.min&&(this.indexes.min=yu(a.index,null))}})},this._renderer=new yne,this._yContainer=e,this._computedValue=t,this._syncFromExistingContainer(),this._yContainer.observe(this._onYContainer)}get viewport(){return this._renderer}_addBinding(e,t){var r;this._bindings.has(e)||this._bindings.set(e,new Set),(r=this._bindings.get(e))==null||r.add(t)}_updateBindings(e){e instanceof vx&&(e.startElement&&(this._addBinding(e.startElement.id,e.id),this._addBinding(e.id,e.startElement.id)),e.endElement&&(this._addBinding(e.endElement.id,e.id),this._addBinding(e.id,e.endElement.id)))}_syncFromExistingContainer(){this._transact(()=>{this._yContainer.forEach(e=>{const t=e.get("type"),r=UI[t];xt(r);const o=new r(e,this);o.computedValue=this._computedValue,o.mount(this._renderer),this._elements.set(o.id,o),o.index>this.indexes.max?this.indexes.max=o.index:o.index<this.indexes.min&&(this.indexes.min=o.index),this._updateBindings(o)})})}_transact(e){const t=this._yContainer.doc;t.transact(e,t.clientID)}refresh(){this._renderer.refresh()}updateIndexes(e,t,r){this._transact(()=>{let o,i=0;const a=t.length;for(;i<a;i++){o=e[i];const s=this._yContainer.get(t[i].id);s.get("index")!==o&&s.set("index",o)}r(e)})}attach(e){this._renderer.attach(e)}onResize(){this._renderer.onResize()}getElementsBound(){return km([...this._elements.values()])}addElement(e,t){const r=wne(),o=new qX,a={...Hte[e],...t,id:r,index:yu(this.indexes.max,null),seed:CD()};return this._transact(()=>{for(const[s,l]of Object.entries(a))s==="text"&&!(l instanceof $g)?o.set(s,new $g(l)):o.set(s,l);this._yContainer.set(r,o)}),r}updateElement(e,t){this._transact(()=>{const r=this._elements.get(e);xt(r),r.applyUpdate(t)})}setElementBound(e,t){this.updateElement(e,{xywh:_1(t.x,t.y,t.w,t.h)})}removeElement(e){this._transact(()=>{this._yContainer.delete(e)})}hasElement(e){return this._yContainer.has(e)}toModelCoord(e,t){return this._renderer.toModelCoord(e,t)}toViewCoord(e,t){return this._renderer.toViewCoord(e,t)}pickById(e){return this._elements.get(e)}pickByPoint(e,t,r){const o={x:e-1,y:t-1,w:2,h:2};return this._renderer.gridManager.search(o).filter(s=>s.hitTest(e,t,r))}pickTop(e,t){const r=this.pickByPoint(e,t);return r[r.length-1]??null}pickByBound(e){return this._renderer.gridManager.search(e).filter(o=>yD(e,o)||Fb(e,o))}getSortedElementsWithViewportBounds(){return this.pickByBound(this.viewport.viewportBounds).sort(Sv)}getBindingElements(e){const t=this._bindings.get(e);return t!=null&&t.size?[...t.values()].map(r=>this.pickById(r)).filter(r=>!!r):[]}dispose(){this._yContainer.unobserve(this._onYContainer)}initDefaultGestureHandler(){const{_renderer:e}=this;e.canvas.addEventListener("wheel",t=>{if(t.preventDefault(),t.ctrlKey){const r=LD(t.deltaY);e.setZoom(r)}else{const r=t.deltaX/e.zoom,o=t.deltaY/e.zoom;e.setCenter(e.centerX+r,e.centerY+o)}})}getElements(){return[...this._elements.values()]}}class Cne{constructor(e){this._content=[],this._scoreFunction=e}push(e){this._content.push(e),this.sinkDown(this._content.length-1)}pop(){const{_content:e}=this,t=e[0],r=e.pop();return e.length>0&&(e[0]=r,this.bubbleUp(0)),t}remove(e){const{_content:t,_scoreFunction:r}=this,o=t.indexOf(e),i=t.pop();o!==t.length-1&&(t[o]=i,r(i)<r(e)?this.sinkDown(o):this.bubbleUp(o))}size(){return this._content.length}rescoreElement(e){this.sinkDown(this._content.indexOf(e))}sinkDown(e){const{_content:t,_scoreFunction:r}=this,o=this._content[e];for(;e>0;){const i=(e+1>>1)-1,a=t[i];if(r(o)<r(a))t[i]=o,t[e]=a,e=i;else break}}bubbleUp(e){const{_content:t,_scoreFunction:r}=this,o=t.length,i=t[e],a=r(i);for(;;){const s=e+1<<1,l=s-1;let d=null,u=null;if(l<o){const p=t[l];u=r(p),u<a&&(d=l)}if(s<o){const p=t[s];r(p)<(d===null?a:u)&&(d=s)}if(d!==null)t[e]=t[d],t[d]=i,e=d;else break}}}function Sne(n,e){return Math.abs(n.x-e.x)+Math.abs(n.y-e.y)}function kne(n){let e=n;const t=[];for(;e.parent;)t.unshift(e),e=e.parent;return t.unshift(e),t}function _ne(n,e,t,r=Sne){const o=new Cne(i=>i.f);for(e.h=r(e,t),o.push(e);o.size()>0;){const i=o.pop();if(i===t)return kne(i);i.closed=!0;const a=n.neighbors(i);for(let s=0,l=a.length;s<l;++s){const d=a[s];if(d.closed)continue;const u=i.g+d.cost(i),p=d.visited;(!p||u<d.g)&&(d.visited=!0,d.parent=i,d.h=d.h||r(d,t),d.g=u,d.f=d.g+d.h,p?o.rescoreElement(d):o.push(d))}}return[]}function Ene(n,e){return!!(e.parent&&(e.x===e.parent.x&&e.x!==n.x||e.y===e.parent.y&&e.y!==n.y))}class $d{constructor(e){this.nodes={},this.edges={},this.connections=[],this.gridX=[],this.gridY=[],this._init(e)}_init(e){this._addGraphNodesAndInitGrid(e),this._linkGraphNodes()}_createGraphNode(e){return{x:e.x,y:e.y,parent:null,cost:t=>{const r=Math.abs(e.x-t.x)+Math.abs(e.y-t.y),o=Ene(e,t);return r+(o?10:0)},f:0,h:0,g:0}}_addGraphNodesAndInitGrid(e){const t=new Set,r=new Set;e.forEach(o=>{const i=this._createGraphNode(o);t.add(o.x),r.add(o.y);const a=$d.getKey(o);this.nodes[a]=i,this.edges[a]=new Set}),this.gridX=[...t.values()].sort((o,i)=>o-i),this.gridY=[...r.values()].sort((o,i)=>o-i)}_linkGraphNodes(){const{gridX:e,gridY:t}=this;for(let r=0;r<e.length;r++)for(let o=0;o<t.length;o++){const i=$d.getKey({x:e[r],y:t[o]});if(this.nodes[i]){if(o>0){const a=$d.getKey({x:e[r],y:t[o-1]});this.nodes[a]&&(this.edges[i].add(a),this.edges[a].add(i),this.connections.push([this.nodes[i],this.nodes[a]]))}if(r>0){const a=$d.getKey({x:e[r-1],y:t[o]});this.nodes[a]&&(this.edges[i].add(a),this.edges[a].add(i),this.connections.push([this.nodes[i],this.nodes[a]]))}}}}neighbors(e){const t=$d.getKey(e),r=[];return this.edges[t].forEach(o=>{r.push(this.nodes[o])}),r}getNode(e){const t=$d.getKey(e);return this.nodes[t]}static getKey({x:e,y:t}){return`${e}:${t}`}static parseKey(e){const[t,r]=e.split(":").map(o=>Number(o));return{x:t,y:r}}}function Pne(n){const e=[],t=new Set,r=new Set,o=new Set;return{nodes:e,getGrid:()=>{const s=[...r.values()].sort((d,u)=>d-u),l=[...o.values()].sort((d,u)=>d-u);return{gridX:s,gridY:l}},addPoint:(s,l,d=!1)=>{if(!d&&n(s,l))return;const u={x:s,y:l},p=$d.getKey(u);t.has(p)||(t.add(p),r.add(s),o.add(l),e.push(u))},hasPoint:(s,l)=>{const d=$d.getKey({x:s,y:l});return t.has(d)}}}function Mne(n,e){const{rows:t,columns:r}=n;for(let o=0;o<t.length;o++){const i=o===0||o===t.length-2;for(let a=0;a<r.length;a++){const s=a===0||a===r.length-2,l=r[a],d=t[o];e(l,d);const u=s?void 0:r[a+1],p=i?void 0:t[o+1];u&&e((l+u)/2,d),p&&e(l,(d+p)/2),u&&p&&e((l+u)/2,(d+p)/2)}}}function Ine(n,e,t,r,o,i){n.forEach(a=>{const s=i(a.x,a.y);if(s)switch(s.relativeDirection(a.x,a.y)){case"left":{let d=e.indexOf(a.x);for(;d>-1;){const u=e[d];if(o(u,a.y))break;r(u,a.y,!0),d--}break}case"right":{let d=e.indexOf(a.x);for(;d<e.length;){const u=e[d];if(o(u,a.y))break;r(u,a.y,!0),d++}break}case"top":{let d=t.indexOf(a.y);for(;d>-1;){const u=t[d];if(o(a.x,u))break;r(a.x,u,!0),d--}break}case"bottom":{let d=t.indexOf(a.y);for(;d<t.length;){const u=t[d];if(o(a.x,u))break;r(a.x,u,!0),d++}break}}})}function Tne(n,e,t){const r=(u,p)=>e.find(f=>f.contains(u,p)),{nodes:o,addPoint:i,hasPoint:a,getGrid:s}=Pne(r);Mne(n,i);const{gridX:l,gridY:d}=s();return Ine(t,l,d,i,a,r),o}function One(n,e,t){const r=new Set,o=new Set;n.forEach(s=>{r.add(s.minX),r.add(s.maxX),o.add(s.minY),o.add(s.maxY)}),e.forEach(s=>{r.add(s.x),o.add(s.y)});const i=[...r.values()].sort((s,l)=>s-l),a=[...o.values()].sort((s,l)=>s-l);return{columns:[i[0]-t[0],...i,i[i.length-1]+t[0]],rows:[a[0]-t[1],...a,a[a.length-1]+t[1]]}}function Ane(n,e){if(!n.length)return!0;if(n.length!==1||e.length!==2)return!1;const t=e[0].x,r=e[0].y,o=e[1].x,i=e[1].y,a=n[0],{x:s,y:l,maxX:d,maxY:u}=a,p=t<=s&&o<=a.x,f=t>=d&&o>=d,h=r<=l&&i<=l,c=r>=u&&i>=u;return!!(p||f||h||c)}function Lne(n,e){const r=n.length===1&&(e[0].y<=n[0].y&&e[1].y<=n[0].y||e[0].y>=n[0].maxY&&e[1].y>=n[0].maxY)?[{x:e[0].x,y:(e[0].y+e[1].y)/2},{x:e[1].x,y:(e[0].y+e[1].y)/2}]:[{x:(e[0].x+e[1].x)/2,y:e[0].y},{x:(e[0].x+e[1].x)/2,y:e[1].y}],o=[...e,...r,{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}],i=new $d(o);return{rectangles:n,points:e,inflatedRectangles:[],rulers:{rows:[],columns:[]},nodes:o,graph:i}}function $ne(n,e,t=[10,10]){if(Ane(n,e))return Lne(n,e);const r=n.map(s=>s.inflate(t[0],t[1])),o=One(r,e,t),i=Tne(o,r,e),a=new $d(i);return{rectangles:n,points:e,inflatedRectangles:r,rulers:o,nodes:i,graph:a}}class P1{constructor(e,t,r,o){this.id=Math.random().toString(16).slice(2),this.x=e,this.y=t,this.w=r,this.h=o}get minX(){return this.x}get maxX(){return this.x+this.w}get minY(){return this.y}get maxY(){return this.y+this.h}inflate(e,t){return new P1(this.x-e,this.y-t,this.w+e*2,this.h+t*2)}contains(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY}relativeDirection(e,t){const r={left:Math.abs(e-this.x),right:Math.abs(e-this.x-this.w),top:Math.abs(t-this.y),bottom:Math.abs(t-this.y-this.h)};let o,i="top";return Object.entries(r).forEach(([a,s])=>{(o===void 0||s<o)&&(o=s,i=a)}),i}}function jne(n,e){const t=n.x-e.x,r=n.y-e.y;return t*t+r*r}function Rne(n,e,t){let r=e.x,o=e.y,i=t.x-r,a=t.y-o;if(i!==0||a!==0){const s=((n.x-r)*i+(n.y-o)*a)/(i*i+a*a);s>1?(r=t.x,o=t.y):s>0&&(r+=i*s,o+=a*s)}return i=n.x-r,a=n.y-o,i*i+a*a}function Dne(n,e){let t=n[0];const r=[t];let o;for(let i=1,a=n.length;i<a;i++)o=n[i],jne(o,t)>e&&(r.push(o),t=o);return t!==o&&r.push(o),r}function cC(n,e,t,r,o){let i=r,a=-1;for(let s=e+1;s<t;s++){const l=Rne(n[s],n[e],n[t]);l>i&&(a=s,i=l)}i>r&&(a-e>1&&cC(n,e,a,r,o),o.push(n[a]),t-a>1&&cC(n,a,t,r,o))}function Nne(n,e){const t=n.length-1,r=[n[0]];return cC(n,0,t,e,r),r.push(n[t]),r}function wk(n,e=0,t){if(n.length<=2)return n;const r=e!==void 0?e*e:1;return n=t?n:Dne(n,r),n=Nne(n,r),n}function z7(n,e){const{graph:t}=$ne(n,e),r=t.getNode(e[0]),o=t.getNode(e[1]),i=_ne(t,r,o);return wk(i)}var Ck=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Wv=class extends so{constructor(){super(...arguments),this.value="left"}_onSelect(e){this.value=e,this.onSelect&&this.onSelect(e)}render(){return rt`
      <div class="align-panel-container">
        <edgeless-tool-icon-button
          .tooltip=${"Left"}
          .active=${this.value==="left"}
          @click=${()=>{this._onSelect("left")}}
        >
          ${dR}
        </edgeless-tool-icon-button>
        <edgeless-tool-icon-button
          .tooltip=${"Center"}
          .active=${this.value==="center"}
          @click=${()=>{this._onSelect("center")}}
        >
          ${uR}
        </edgeless-tool-icon-button>
        <edgeless-tool-icon-button
          .tooltip=${"Right"}
          .active=${this.value==="right"}
          @click=${()=>{this._onSelect("right")}}
        >
          ${hR}
        </edgeless-tool-icon-button>
      </div>
    `}};Wv.styles=vr`
    :host {
      display: block;
      z-index: 2;
    }
    .align-panel-container {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
      fill: none;
      stroke: currentColor;
    }
  `;Ck([Ft()],Wv.prototype,"value",void 0);Ck([Ft()],Wv.prototype,"onSelect",void 0);Wv=Ck([lr("edgeless-align-panel")],Wv);var Wb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};class zne extends Event{constructor(e,{detail:t,composed:r,bubbles:o}){super(e,{bubbles:o,composed:r}),this.detail=t}}const jD=["--affine-palette-line-yellow","--affine-palette-line-orange","--affine-palette-line-tangerine","--affine-palette-line-red","--affine-palette-line-magenta","--affine-palette-line-purple","--affine-palette-line-green","--affine-palette-line-blue","--affine-palette-line-navy","--affine-palette-line-black","--affine-palette-line-grey","--affine-palette-line-white"],_m=jD[9];function Sk(n){return n.toLowerCase()==="--affine-palette-transparent"}function RD(n){return["--affine-palette-line-white","--affine-palette-shape-white"].includes(n.toLowerCase())}function Bne(n=!1){const e={position:"relative",width:"16px",height:"16px",stroke:"none"},r=n?rt`<div style=${Ur({position:"absolute",width:"10px",height:"10px",left:"3px",top:"3.5px",borderRadius:"50%",background:"var(--affine-popover-background)"})}></div>`:Di;return rt`<div style=${Ur(e)}>
    ${aJ} ${r}
  </div>`}function Hne(n){const e=RD(n)?1:0,t={fill:`var(${n})`,stroke:"var(--affine-border-color)"};return rt`<svg
    width="16"
    height="16"
    viewBox="0 0 16 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M12.3125 8C12.3125 10.3817 10.3817 12.3125 8 12.3125C5.61827 12.3125 3.6875 10.3817 3.6875 8C3.6875 5.61827 5.61827 3.6875 8 3.6875C10.3817 3.6875 12.3125 5.61827 12.3125 8ZM8 15.5C12.1421 15.5 15.5 12.1421 15.5 8C15.5 3.85786 12.1421 0.5 8 0.5C3.85786 0.5 0.5 3.85786 0.5 8C0.5 12.1421 3.85786 15.5 8 15.5Z"
      stroke-width="${e}"
      style=${Ur(t)}
    />
  </svg> `}function Fne(n,e){return Sk(n)?Bne(e):e?Hne(n):Di}function $6(n,{hollowCircle:e,letter:t}={}){const r=Fne(n,!!e),o=e?{}:{background:`var(${n})`},a={display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",borderRadius:"50%",boxSizing:"border-box",overflow:"hidden",...RD(n)&&!e?{border:"1px solid var(--affine-border-color)"}:{},...o};return rt`<div
    class="color-unit"
    style=${Ur(a)}
    aria-label=${n.toLowerCase()}
    data-letter=${t?"A":""}
  >
    ${r}
  </div>`}let M1=class extends so{constructor(){super(...arguments),this.options=jD,this.showLetterMark=!1,this.hollowCircle=!1}_onSelect(e){this.dispatchEvent(new zne("select",{detail:e,composed:!0,bubbles:!0})),this.value=e}render(){return Vs(this.options,e=>e,e=>{const t=$6(e,{hollowCircle:this.hollowCircle,letter:this.showLetterMark});return rt`
          <div
            class="color-container"
            ?active=${e===this.value}
            @click=${()=>this._onSelect(e)}
          >
            ${t}
          </div>
        `})}};M1.styles=vr`
    :host {
      display: flex;
      width: 204px;
      padding: 8px 12px;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 12px;
      box-sizing: border-box;
      background: var(--affine-popover-background);
    }

    .color-container {
      display: flex;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      box-sizing: border-box;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      cursor: pointer;
    }

    .color-container[active] {
      border: 1px solid var(--affine-primary-color);
    }

    .color-unit::before {
      content: attr(data-letter);
      display: block;
      font-size: 12px;
    }
  `;Wb([Ft()],M1.prototype,"value",void 0);Wb([Ft()],M1.prototype,"options",void 0);Wb([Ft()],M1.prototype,"showLetterMark",void 0);Wb([Ft()],M1.prototype,"hollowCircle",void 0);M1=Wb([lr("edgeless-color-panel")],M1);var Zl="top",id="bottom",ad="right",Ul="left",kk="auto",Vb=[Zl,id,ad,Ul],Bg="start",Vv="end",Zne="clippingParents",DD="viewport",D2="popper",Une="reference",eT=Vb.reduce(function(n,e){return n.concat([e+"-"+Bg,e+"-"+Vv])},[]),ND=[].concat(Vb,[kk]).reduce(function(n,e){return n.concat([e,e+"-"+Bg,e+"-"+Vv])},[]),Wne="beforeRead",Vne="read",Kne="afterRead",Yne="beforeMain",Gne="main",Xne="afterMain",qne="beforeWrite",Jne="write",Qne="afterWrite",ere=[Wne,Vne,Kne,Yne,Gne,Xne,qne,Jne,Qne];function Iu(n){return n?(n.nodeName||"").toLowerCase():null}function Mc(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function I1(n){var e=Mc(n).Element;return n instanceof e||n instanceof Element}function nd(n){var e=Mc(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function _k(n){if(typeof ShadowRoot>"u")return!1;var e=Mc(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function tre(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},o=e.attributes[t]||{},i=e.elements[t];!nd(i)||!Iu(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(a){var s=o[a];s===!1?i.removeAttribute(a):i.setAttribute(a,s===!0?"":s)}))})}function nre(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),s=a.reduce(function(l,d){return l[d]="",l},{});!nd(o)||!Iu(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(l){o.removeAttribute(l)}))})}}const rre={name:"applyStyles",enabled:!0,phase:"write",fn:tre,effect:nre,requires:["computeStyles"]};function Eu(n){return n.split("-")[0]}var u1=Math.max,j6=Math.min,Hg=Math.round;function dC(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function zD(){return!/^((?!chrome|android).)*safari/i.test(dC())}function Fg(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),o=1,i=1;e&&nd(n)&&(o=n.offsetWidth>0&&Hg(r.width)/n.offsetWidth||1,i=n.offsetHeight>0&&Hg(r.height)/n.offsetHeight||1);var a=I1(n)?Mc(n):window,s=a.visualViewport,l=!zD()&&t,d=(r.left+(l&&s?s.offsetLeft:0))/o,u=(r.top+(l&&s?s.offsetTop:0))/i,p=r.width/o,f=r.height/i;return{width:p,height:f,top:u,right:d+p,bottom:u+f,left:d,x:d,y:u}}function Ek(n){var e=Fg(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function BD(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&_k(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ih(n){return Mc(n).getComputedStyle(n)}function ore(n){return["table","td","th"].indexOf(Iu(n))>=0}function fp(n){return((I1(n)?n.ownerDocument:n.document)||window.document).documentElement}function yx(n){return Iu(n)==="html"?n:n.assignedSlot||n.parentNode||(_k(n)?n.host:null)||fp(n)}function tT(n){return!nd(n)||Ih(n).position==="fixed"?null:n.offsetParent}function ire(n){var e=/firefox/i.test(dC()),t=/Trident/i.test(dC());if(t&&nd(n)){var r=Ih(n);if(r.position==="fixed")return null}var o=yx(n);for(_k(o)&&(o=o.host);nd(o)&&["html","body"].indexOf(Iu(o))<0;){var i=Ih(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function Kb(n){for(var e=Mc(n),t=tT(n);t&&ore(t)&&Ih(t).position==="static";)t=tT(t);return t&&(Iu(t)==="html"||Iu(t)==="body"&&Ih(t).position==="static")?e:t||ire(n)||e}function Pk(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function kv(n,e,t){return u1(n,j6(e,t))}function are(n,e,t){var r=kv(n,e,t);return r>t?t:r}function HD(){return{top:0,right:0,bottom:0,left:0}}function FD(n){return Object.assign({},HD(),n)}function ZD(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var sre=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,FD(typeof e!="number"?e:ZD(e,Vb))};function lre(n){var e,t=n.state,r=n.name,o=n.options,i=t.elements.arrow,a=t.modifiersData.popperOffsets,s=Eu(t.placement),l=Pk(s),d=[Ul,ad].indexOf(s)>=0,u=d?"height":"width";if(!(!i||!a)){var p=sre(o.padding,t),f=Ek(i),h=l==="y"?Zl:Ul,c=l==="y"?id:ad,g=t.rects.reference[u]+t.rects.reference[l]-a[l]-t.rects.popper[u],m=a[l]-t.rects.reference[l],b=Kb(i),v=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,w=g/2-m/2,_=p[h],k=v-f[u]-p[c],y=v/2-f[u]/2+w,S=kv(_,y,k),C=l;t.modifiersData[r]=(e={},e[C]=S,e.centerOffset=S-y,e)}}function cre(n){var e=n.state,t=n.options,r=t.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||BD(e.elements.popper,o)&&(e.elements.arrow=o))}const dre={name:"arrow",enabled:!0,phase:"main",fn:lre,effect:cre,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zg(n){return n.split("-")[1]}var ure={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hre(n,e){var t=n.x,r=n.y,o=e.devicePixelRatio||1;return{x:Hg(t*o)/o||0,y:Hg(r*o)/o||0}}function nT(n){var e,t=n.popper,r=n.popperRect,o=n.placement,i=n.variation,a=n.offsets,s=n.position,l=n.gpuAcceleration,d=n.adaptive,u=n.roundOffsets,p=n.isFixed,f=a.x,h=f===void 0?0:f,c=a.y,g=c===void 0?0:c,m=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=m.x,g=m.y;var b=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),w=Ul,_=Zl,k=window;if(d){var y=Kb(t),S="clientHeight",C="clientWidth";if(y===Mc(t)&&(y=fp(t),Ih(y).position!=="static"&&s==="absolute"&&(S="scrollHeight",C="scrollWidth")),y=y,o===Zl||(o===Ul||o===ad)&&i===Vv){_=id;var I=p&&y===k&&k.visualViewport?k.visualViewport.height:y[S];g-=I-r.height,g*=l?1:-1}if(o===Ul||(o===Zl||o===id)&&i===Vv){w=ad;var A=p&&y===k&&k.visualViewport?k.visualViewport.width:y[C];h-=A-r.width,h*=l?1:-1}}var T=Object.assign({position:s},d&&ure),L=u===!0?hre({x:h,y:g},Mc(t)):{x:h,y:g};if(h=L.x,g=L.y,l){var j;return Object.assign({},T,(j={},j[_]=v?"0":"",j[w]=b?"0":"",j.transform=(k.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",j))}return Object.assign({},T,(e={},e[_]=v?g+"px":"",e[w]=b?h+"px":"",e.transform="",e))}function fre(n){var e=n.state,t=n.options,r=t.gpuAcceleration,o=r===void 0?!0:r,i=t.adaptive,a=i===void 0?!0:i,s=t.roundOffsets,l=s===void 0?!0:s,d={placement:Eu(e.placement),variation:Zg(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,nT(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,nT(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const pre={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fre,data:{}};var x5={passive:!0};function gre(n){var e=n.state,t=n.instance,r=n.options,o=r.scroll,i=o===void 0?!0:o,a=r.resize,s=a===void 0?!0:a,l=Mc(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",t.update,x5)}),s&&l.addEventListener("resize",t.update,x5),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",t.update,x5)}),s&&l.removeEventListener("resize",t.update,x5)}}const mre={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gre,data:{}};var vre={left:"right",right:"left",bottom:"top",top:"bottom"};function P3(n){return n.replace(/left|right|bottom|top/g,function(e){return vre[e]})}var bre={start:"end",end:"start"};function rT(n){return n.replace(/start|end/g,function(e){return bre[e]})}function Mk(n){var e=Mc(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Ik(n){return Fg(fp(n)).left+Mk(n).scrollLeft}function yre(n,e){var t=Mc(n),r=fp(n),o=t.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;var d=zD();(d||!d&&e==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s+Ik(n),y:l}}function xre(n){var e,t=fp(n),r=Mk(n),o=(e=n.ownerDocument)==null?void 0:e.body,i=u1(t.scrollWidth,t.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=u1(t.scrollHeight,t.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Ik(n),l=-r.scrollTop;return Ih(o||t).direction==="rtl"&&(s+=u1(t.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}function Tk(n){var e=Ih(n),t=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+o+r)}function UD(n){return["html","body","#document"].indexOf(Iu(n))>=0?n.ownerDocument.body:nd(n)&&Tk(n)?n:UD(yx(n))}function _v(n,e){var t;e===void 0&&(e=[]);var r=UD(n),o=r===((t=n.ownerDocument)==null?void 0:t.body),i=Mc(r),a=o?[i].concat(i.visualViewport||[],Tk(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(_v(yx(a)))}function uC(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function wre(n,e){var t=Fg(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function oT(n,e,t){return e===DD?uC(yre(n,t)):I1(e)?wre(e,t):uC(xre(fp(n)))}function Cre(n){var e=_v(yx(n)),t=["absolute","fixed"].indexOf(Ih(n).position)>=0,r=t&&nd(n)?Kb(n):n;return I1(r)?e.filter(function(o){return I1(o)&&BD(o,r)&&Iu(o)!=="body"}):[]}function Sre(n,e,t,r){var o=e==="clippingParents"?Cre(n):[].concat(e),i=[].concat(o,[t]),a=i[0],s=i.reduce(function(l,d){var u=oT(n,d,r);return l.top=u1(u.top,l.top),l.right=j6(u.right,l.right),l.bottom=j6(u.bottom,l.bottom),l.left=u1(u.left,l.left),l},oT(n,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function WD(n){var e=n.reference,t=n.element,r=n.placement,o=r?Eu(r):null,i=r?Zg(r):null,a=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,l;switch(o){case Zl:l={x:a,y:e.y-t.height};break;case id:l={x:a,y:e.y+e.height};break;case ad:l={x:e.x+e.width,y:s};break;case Ul:l={x:e.x-t.width,y:s};break;default:l={x:e.x,y:e.y}}var d=o?Pk(o):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Bg:l[d]=l[d]-(e[u]/2-t[u]/2);break;case Vv:l[d]=l[d]+(e[u]/2-t[u]/2);break}}return l}function Kv(n,e){e===void 0&&(e={});var t=e,r=t.placement,o=r===void 0?n.placement:r,i=t.strategy,a=i===void 0?n.strategy:i,s=t.boundary,l=s===void 0?Zne:s,d=t.rootBoundary,u=d===void 0?DD:d,p=t.elementContext,f=p===void 0?D2:p,h=t.altBoundary,c=h===void 0?!1:h,g=t.padding,m=g===void 0?0:g,b=FD(typeof m!="number"?m:ZD(m,Vb)),v=f===D2?Une:D2,w=n.rects.popper,_=n.elements[c?v:f],k=Sre(I1(_)?_:_.contextElement||fp(n.elements.popper),l,u,a),y=Fg(n.elements.reference),S=WD({reference:y,element:w,strategy:"absolute",placement:o}),C=uC(Object.assign({},w,S)),I=f===D2?C:y,A={top:k.top-I.top+b.top,bottom:I.bottom-k.bottom+b.bottom,left:k.left-I.left+b.left,right:I.right-k.right+b.right},T=n.modifiersData.offset;if(f===D2&&T){var L=T[o];Object.keys(A).forEach(function(j){var $=[ad,id].indexOf(j)>=0?1:-1,ee=[Zl,id].indexOf(j)>=0?"y":"x";A[j]+=L[ee]*$})}return A}function kre(n,e){e===void 0&&(e={});var t=e,r=t.placement,o=t.boundary,i=t.rootBoundary,a=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,d=l===void 0?ND:l,u=Zg(r),p=u?s?eT:eT.filter(function(c){return Zg(c)===u}):Vb,f=p.filter(function(c){return d.indexOf(c)>=0});f.length===0&&(f=p);var h=f.reduce(function(c,g){return c[g]=Kv(n,{placement:g,boundary:o,rootBoundary:i,padding:a})[Eu(g)],c},{});return Object.keys(h).sort(function(c,g){return h[c]-h[g]})}function _re(n){if(Eu(n)===kk)return[];var e=P3(n);return[rT(n),e,rT(e)]}function Ere(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var o=t.mainAxis,i=o===void 0?!0:o,a=t.altAxis,s=a===void 0?!0:a,l=t.fallbackPlacements,d=t.padding,u=t.boundary,p=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,c=h===void 0?!0:h,g=t.allowedAutoPlacements,m=e.options.placement,b=Eu(m),v=b===m,w=l||(v||!c?[P3(m)]:_re(m)),_=[m].concat(w).reduce(function(V,R){return V.concat(Eu(R)===kk?kre(e,{placement:R,boundary:u,rootBoundary:p,padding:d,flipVariations:c,allowedAutoPlacements:g}):R)},[]),k=e.rects.reference,y=e.rects.popper,S=new Map,C=!0,I=_[0],A=0;A<_.length;A++){var T=_[A],L=Eu(T),j=Zg(T)===Bg,$=[Zl,id].indexOf(L)>=0,ee=$?"width":"height",Q=Kv(e,{placement:T,boundary:u,rootBoundary:p,altBoundary:f,padding:d}),pe=$?j?ad:Ul:j?id:Zl;k[ee]>y[ee]&&(pe=P3(pe));var ie=P3(pe),te=[];if(i&&te.push(Q[L]<=0),s&&te.push(Q[pe]<=0,Q[ie]<=0),te.every(function(V){return V})){I=T,C=!1;break}S.set(T,te)}if(C)for(var Z=c?3:1,D=function(R){var Y=_.find(function(E){var W=S.get(E);if(W)return W.slice(0,R).every(function(F){return F})});if(Y)return I=Y,"break"},B=Z;B>0;B--){var H=D(B);if(H==="break")break}e.placement!==I&&(e.modifiersData[r]._skip=!0,e.placement=I,e.reset=!0)}}const Pre={name:"flip",enabled:!0,phase:"main",fn:Ere,requiresIfExists:["offset"],data:{_skip:!1}};function iT(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function aT(n){return[Zl,ad,id,Ul].some(function(e){return n[e]>=0})}function Mre(n){var e=n.state,t=n.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,a=Kv(e,{elementContext:"reference"}),s=Kv(e,{altBoundary:!0}),l=iT(a,r),d=iT(s,o,i),u=aT(l),p=aT(d);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}const Ire={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Mre};function Tre(n,e,t){var r=Eu(n),o=[Ul,Zl].indexOf(r)>=0?-1:1,i=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[Ul,ad].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function Ore(n){var e=n.state,t=n.options,r=n.name,o=t.offset,i=o===void 0?[0,0]:o,a=ND.reduce(function(u,p){return u[p]=Tre(p,e.rects,i),u},{}),s=a[e.placement],l=s.x,d=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=a}const Are={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ore};function Lre(n){var e=n.state,t=n.name;e.modifiersData[t]=WD({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const $re={name:"popperOffsets",enabled:!0,phase:"read",fn:Lre,data:{}};function jre(n){return n==="x"?"y":"x"}function Rre(n){var e=n.state,t=n.options,r=n.name,o=t.mainAxis,i=o===void 0?!0:o,a=t.altAxis,s=a===void 0?!1:a,l=t.boundary,d=t.rootBoundary,u=t.altBoundary,p=t.padding,f=t.tether,h=f===void 0?!0:f,c=t.tetherOffset,g=c===void 0?0:c,m=Kv(e,{boundary:l,rootBoundary:d,padding:p,altBoundary:u}),b=Eu(e.placement),v=Zg(e.placement),w=!v,_=Pk(b),k=jre(_),y=e.modifiersData.popperOffsets,S=e.rects.reference,C=e.rects.popper,I=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,A=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(y){if(i){var j,$=_==="y"?Zl:Ul,ee=_==="y"?id:ad,Q=_==="y"?"height":"width",pe=y[_],ie=pe+m[$],te=pe-m[ee],Z=h?-C[Q]/2:0,D=v===Bg?S[Q]:C[Q],B=v===Bg?-C[Q]:-S[Q],H=e.elements.arrow,V=h&&H?Ek(H):{width:0,height:0},R=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:HD(),Y=R[$],E=R[ee],W=kv(0,S[Q],V[Q]),F=w?S[Q]/2-Z-W-Y-A.mainAxis:D-W-Y-A.mainAxis,z=w?-S[Q]/2+Z+W+E+A.mainAxis:B+W+E+A.mainAxis,q=e.elements.arrow&&Kb(e.elements.arrow),fe=q?_==="y"?q.clientTop||0:q.clientLeft||0:0,ce=(j=T==null?void 0:T[_])!=null?j:0,U=pe+F-ce-fe,ve=pe+z-ce,oe=kv(h?j6(ie,U):ie,pe,h?u1(te,ve):te);y[_]=oe,L[_]=oe-pe}if(s){var re,ae=_==="x"?Zl:Ul,me=_==="x"?id:ad,he=y[k],se=k==="y"?"height":"width",ge=he+m[ae],X=he-m[me],we=[Zl,Ul].indexOf(b)!==-1,be=(re=T==null?void 0:T[k])!=null?re:0,le=we?ge:he-S[se]-C[se]-be+A.altAxis,ye=we?he+S[se]+C[se]-be-A.altAxis:X,ue=h&&we?are(le,he,ye):kv(h?le:ge,he,h?ye:X);y[k]=ue,L[k]=ue-he}e.modifiersData[r]=L}}const Dre={name:"preventOverflow",enabled:!0,phase:"main",fn:Rre,requiresIfExists:["offset"]};function Nre(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function zre(n){return n===Mc(n)||!nd(n)?Mk(n):Nre(n)}function Bre(n){var e=n.getBoundingClientRect(),t=Hg(e.width)/n.offsetWidth||1,r=Hg(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Hre(n,e,t){t===void 0&&(t=!1);var r=nd(e),o=nd(e)&&Bre(e),i=fp(e),a=Fg(n,o,t),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((Iu(e)!=="body"||Tk(i))&&(s=zre(e)),nd(e)?(l=Fg(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Ik(i))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Fre(n){var e=new Map,t=new Set,r=[];n.forEach(function(i){e.set(i.name,i)});function o(i){t.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(s){if(!t.has(s)){var l=e.get(s);l&&o(l)}}),r.push(i)}return n.forEach(function(i){t.has(i.name)||o(i)}),r}function Zre(n){var e=Fre(n);return ere.reduce(function(t,r){return t.concat(e.filter(function(o){return o.phase===r}))},[])}function Ure(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Wre(n){var e=n.reduce(function(t,r){var o=t[r.name];return t[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var sT={placement:"bottom",modifiers:[],strategy:"absolute"};function lT(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Vre(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,o=e.defaultOptions,i=o===void 0?sT:o;return function(s,l,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},sT,i),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},p=[],f=!1,h={state:u,setOptions:function(b){var v=typeof b=="function"?b(u.options):b;g(),u.options=Object.assign({},i,u.options,v),u.scrollParents={reference:I1(s)?_v(s):s.contextElement?_v(s.contextElement):[],popper:_v(l)};var w=Zre(Wre([].concat(r,u.options.modifiers)));return u.orderedModifiers=w.filter(function(_){return _.enabled}),c(),h.update()},forceUpdate:function(){if(!f){var b=u.elements,v=b.reference,w=b.popper;if(lT(v,w)){u.rects={reference:Hre(v,Kb(w),u.options.strategy==="fixed"),popper:Ek(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var k=u.orderedModifiers[_],y=k.fn,S=k.options,C=S===void 0?{}:S,I=k.name;typeof y=="function"&&(u=y({state:u,options:C,name:I,instance:h})||u)}}}},update:Ure(function(){return new Promise(function(m){h.forceUpdate(),m(u)})}),destroy:function(){g(),f=!0}};if(!lT(s,l))return h;h.setOptions(d).then(function(m){!f&&d.onFirstUpdate&&d.onFirstUpdate(m)});function c(){u.orderedModifiers.forEach(function(m){var b=m.name,v=m.options,w=v===void 0?{}:v,_=m.effect;if(typeof _=="function"){var k=_({state:u,name:b,instance:h,options:w}),y=function(){};p.push(k||y)}})}function g(){p.forEach(function(m){return m()}),p=[]}return h}}var Kre=[mre,$re,pre,rre,Are,Pre,Dre,dre,Ire],sd=Vre({defaultModifiers:Kre});function VD(n,e=!1,t=!1){return{"--affine-border-width":`${e?2:1}px`,left:n.x+"px",top:n.y+"px",width:n.width+"px",height:n.height+"px",backgroundColor:!e&&t?"var(--affine-hover-color)":""}}function KD(n,e){if(n.length===0)return new DOMRect(0,0,0,0);const t=n.map(o=>{const{x:i,y:a,width:s,height:l}=QD(e,Th(o));return{x:i,y:a,w:s,h:l}}),r=km(t);return new DOMRect(r==null?void 0:r.x,r==null?void 0:r.y,r==null?void 0:r.w,r==null?void 0:r.h)}function Yre(n){const e=new Map;for(const t of n){let r;Fs(t)?r=ns.deserialize(Th(t)):r=new ns(t.x,t.y,t.w,t.h),e.set(t.id,r)}return e}function Gre(n,e){const t=r=>{r.composedPath().includes(n)||e()};return document.addEventListener("click",t),{dispose:()=>{document.removeEventListener("click",t)}}}const B7="data-show";function td(n,e,t=()=>{}){const r=sd(n,e,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,12]}}]}),o=()=>{e.setAttribute(B7,""),r.setOptions(l=>({...l,modifiers:[...l.modifiers??[],{name:"eventListeners",enabled:!1}]})),r.update(),t({display:"show"})},i=()=>{e.removeAttribute(B7),r.setOptions(l=>({...l,modifiers:[...l.modifiers??[],{name:"eventListeners",enabled:!1}]})),t({display:"hidden"})},a=()=>{e.hasAttribute(B7)?i():o()},s=Gre(n,()=>i());return{popper:r,show:o,hide:i,toggle:a,dispose:()=>{r.destroy(),s.dispose()}}}function Lf(n,e){return rt`<span>${n}</span
    ><span style="margin-left: 10px;">(${e})</span>`}var Xd=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function Xre(n){const e=Jl(n,r=>r.color),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function qre(n){const e=Jl(n,r=>r.textAlign),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:"left"}const hC=["--affine-palette-line-yellow","--affine-palette-line-orange","--affine-palette-line-tangerine","--affine-palette-line-red","--affine-palette-line-magenta","--affine-palette-line-purple","--affine-palette-line-navy","--affine-palette-line-blue","--affine-palette-line-green","--affine-palette-line-white","--affine-palette-line-black","--affine-palette-line-grey"],Jre=hC[10];let Ic=class extends ui(so){constructor(){super(...arguments),this.texts=[],this._popperShow=!1,this._colorSelectorPopper=null,this._textAlignPopper=null}_setTextColor(e){this.texts.forEach(t=>{this.surface.updateElement(t.id,{color:e})}),this.slots.selectionUpdated.emit({...this.selectionState})}_setTextAlign(e){this.texts.forEach(t=>{this.surface.updateElement(t.id,{textAlign:e})}),this.slots.selectionUpdated.emit({...this.selectionState})}firstUpdated(e){const t=this._disposables;this._colorSelectorPopper=td(this._textColorButton,this._textColorMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._colorSelectorPopper),this._textAlignPopper=td(this._textAlignButton,this._textAlignMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._textAlignPopper),super.firstUpdated(e)}render(){const e=Xre(this.texts)??hC[0],t=qre(this.texts);return rt`
      <edgeless-tool-icon-button
        class="text-color-button"
        .tooltip=${this._popperShow?"":"Text Color"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var r;return(r=this._colorSelectorPopper)==null?void 0:r.toggle()}}
      >
        ${$6(e)}
      </edgeless-tool-icon-button>
      <div class="color-panel-container text-color">
        <edgeless-color-panel
          .value=${e}
          .options=${hC}
          @select=${r=>{this._setTextColor(r.detail)}}
        ></edgeless-color-panel>
      </div>

      <menu-divider .vertical=${!0}></menu-divider>

      <edgeless-tool-icon-button
        class="text-align-button"
        .tooltip=${this._popperShow?"":"Alignment"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var r;return(r=this._textAlignPopper)==null?void 0:r.toggle()}}
      >
        ${t==="left"?dR:t==="center"?uR:hR}
      </edgeless-tool-icon-button>
      <div class="align-panel-container text-align">
        <edgeless-align-panel
          .value=${t}
          .onSelect=${r=>{this._setTextAlign(r)}}
        ></edgeless-align-panel>
      </div>
    `}};Ic.styles=vr`
    :host {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      color: var(--affine-text-primary-color);
      stroke: none;
      fill: currentColor;
    }

    .color-panel-container,
    .align-panel-container {
      display: none;
      padding: 4px;
      justify-content: center;
      align-items: center;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }

    .color-panel-container[data-show],
    .align-panel-container[data-show] {
      display: block;
    }
  `;Xd([Ft()],Ic.prototype,"texts",void 0);Xd([Ft()],Ic.prototype,"page",void 0);Xd([Ft()],Ic.prototype,"surface",void 0);Xd([Ft()],Ic.prototype,"selectionState",void 0);Xd([Ft()],Ic.prototype,"slots",void 0);Xd([Ar()],Ic.prototype,"_popperShow",void 0);Xd([Rr(".text-color-button")],Ic.prototype,"_textColorButton",void 0);Xd([Rr(".color-panel-container.text-color")],Ic.prototype,"_textColorMenu",void 0);Xd([Rr(".text-align-button")],Ic.prototype,"_textAlignButton",void 0);Xd([Rr(".align-panel-container.text-align")],Ic.prototype,"_textAlignMenu",void 0);Ic=Xd([lr("edgeless-change-text-button")],Ic);const Qre=["--affine-brand-color","--affine-primary-color","--affine-secondary-color","--affine-tertiary-color","--affine-hover-color","--affine-icon-color","--affine-icon-secondary","--affine-border-color","--affine-divider-color","--affine-placeholder-color","--affine-quote-color","--affine-link-color","--affine-edgeless-grid-color","--affine-success-color","--affine-warning-color","--affine-error-color","--affine-processing-color","--affine-text-emphasis-color","--affine-text-primary-color","--affine-text-secondary-color","--affine-text-disable-color","--affine-black-10","--affine-black-30","--affine-black-50","--affine-black-60","--affine-black-80","--affine-black-90","--affine-black","--affine-white-10","--affine-white-30","--affine-white-50","--affine-white-60","--affine-white-80","--affine-white-90","--affine-white","--affine-background-code-block","--affine-background-tertiary-color","--affine-background-processing-color","--affine-background-error-color","--affine-background-warning-color","--affine-background-success-color","--affine-background-primary-color","--affine-background-secondary-color","--affine-background-modal-color","--affine-background-overlay-panel-color","--affine-tag-blue","--affine-tag-green","--affine-tag-teal","--affine-tag-white","--affine-tag-purple","--affine-tag-red","--affine-tag-pink","--affine-tag-yellow","--affine-tag-orange","--affine-tag-gray","--affine-palette-line-yellow","--affine-palette-line-orange","--affine-palette-line-tangerine","--affine-palette-line-red","--affine-palette-line-magenta","--affine-palette-line-purple","--affine-palette-line-navy","--affine-palette-line-blue","--affine-palette-line-green","--affine-palette-line-white","--affine-palette-line-black","--affine-palette-line-grey","--affine-palette-shape-yellow","--affine-palette-shape-orange","--affine-palette-shape-tangerine","--affine-palette-shape-red","--affine-palette-shape-magenta","--affine-palette-shape-purple","--affine-palette-shape-navy","--affine-palette-shape-blue","--affine-palette-shape-green","--affine-palette-shape-white","--affine-palette-shape-black","--affine-palette-shape-grey","--affine-tooltip"],eoe=["--affine-font-h-1","--affine-font-h-2","--affine-font-h-3","--affine-font-h-4","--affine-font-h-5","--affine-font-h-6","--affine-font-base","--affine-font-sm","--affine-font-xs","--affine-line-height","--affine-z-index-modal","--affine-z-index-popover"],toe=["--affine-font-family","--affine-font-number-family","--affine-font-code-family"],YD=["--affine-editor-width","--affine-theme-mode","--affine-editor-mode","--affine-palette-transparent","--affine-popover-shadow","--affine-menu-shadow","--affine-float-button-shadow","--affine-shadow-1","--affine-shadow-2","--affine-shadow-3","--affine-paragraph-space","--affine-popover-radius","--affine-zoom","--affine-scale",...eoe,...Qre,...toe];function GD(n){return YD.includes(n)}var XD=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let R6=class extends ui(ua){constructor(){super(...arguments),this._vEditor=null,this._element=null,this._edgeless=null,this._keeping=!1}get vEditor(){return this._vEditor}setKeeping(e){this._keeping=e}_syncRect(){const e=this._edgeless,t=this._element;if(e&&t){const r=this._virgoContainer.getBoundingClientRect(),o=Array.from(this._virgoContainer.querySelectorAll("v-line")),i=o[0].getBoundingClientRect().height;e.surface.updateElement(t.id,{xywh:new ns(t.x,t.y,r.width/e.surface.viewport.zoom,o.length/e.surface.viewport.zoom*i).serialize()}),e.slots.selectionUpdated.emit({selected:[t],active:!0})}}mount(e,t){this._element=e,this._edgeless=t,this._vEditor=new od(e.text),this._vEditor.slots.updated.on(()=>{this._syncRect()}),this._disposables.add(t.slots.viewportUpdated.on(()=>{this.requestUpdate(),requestAnimationFrame(()=>{this._syncRect()})})),this.requestUpdate(),requestAnimationFrame(()=>{var r;xt(this._vEditor),(r=this._element)==null||r.setDisplay(!1),this._vEditor.mount(this._virgoContainer),this._virgoContainer.addEventListener("blur",()=>{this._keeping||this._unmount()},{once:!0})})}_unmount(){var e,t,r,o,i;(e=this.vEditor)==null||e.unmount(),(t=this._element)==null||t.setDisplay(!0),((r=this._element)==null?void 0:r.text.length)===0&&((i=this._edgeless)==null||i.surface.removeElement((o=this._element)==null?void 0:o.id)),this.remove(),xt(this._edgeless),this._edgeless.slots.selectionUpdated.emit({selected:[],active:!1})}render(){var r;const e=(r=this._edgeless)==null?void 0:r.surface.viewport;let t=Ur({});if(e&&this._element&&this._edgeless){const o=e.zoom,i=KD([this._element],this._edgeless.surface.viewport);t=Ur({position:"absolute",left:i.x+"px",top:i.y+"px",fontSize:this._element.fontSize+"px",fontFamily:this._element.fontFamily,lineHeight:"initial",outline:"none",transform:`scale(${o}, ${o})`,transformOrigin:"top left",color:GD(this._element.color)?`var(${this._element.color})`:this._element.color})}return rt`<div style=${t} class="virgo-container"></div>`}};XD([Rr(".virgo-container")],R6.prototype,"_virgoContainer",void 0);R6=XD([lr("surface-text-editor")],R6);const cT=200,dT=20,Ug=448,qD=72,noe=30,roe=40,JD=20;function Fs(n){return!!n&&"flavour"in n}function ooe(n){return!Fs(n)}function ioe(n,e,t){const[r,o,i,a]=Da(n.xywh);return Hb({x:r,y:o,w:i,h:a},e,t)}function Ok(n,e,t){for(let r=n.length-1;r>=0;r--){const o=n[r];if(ioe(o,e,t))return o}return null}function aoe(n,e){return n.filter(t=>{const[r,o,i,a]=Da(t.xywh),s={x:r,y:o,w:i,h:a};return yD(e,s)||Fb(e,s)})}function QD(n,e){const[t,r,o,i]=Da(e),[a,s]=n.toViewCoord(t,r);return new DOMRect(a,s,o*n.zoom,i*n.zoom)}function Th(n){return Fs(n)?n.xywh:_1(n.x,n.y,n.w,n.h)}function _u(n){n.stopPropagation()}function soe(n){switch(n.type){case"default":return"default";case"pan":return n.panning?"grabbing":"grab";case"brush":case"shape":case"connector":return"crosshair";case"text":return"text";default:return"default"}}function eN(n,e,t,r,o){var l;const[i,a]=n.viewport.toModelCoord(t,r),s=n.pickByPoint(i,a).filter(o);return s.length?s[s.length-1]:Ok(((l=e.root)==null?void 0:l.children).filter(d=>d.flavour==="affine:frame")??[],i,a)}function uT(n,e,t){var i;const r=((i=e.root)==null?void 0:i.children.filter(a=>a.flavour==="affine:frame"))??[];return n.pickById(t)||r.find(a=>a.id===t)}function Yv(n,e,t,r,o,i=Hs.Orthogonal,a){if(i!==Hs.Orthogonal)return[t,r];let s=1/0,l=-1;o.forEach((u,p)=>{u.customized&&(s=Math.min(s,p),l=Math.max(l,p))});let d=[];if(a&&l>-1){const u=o[s],p=a==="start"?o.slice(0,s+1):z7(n?[n]:[],[t,u]),f=o.slice(s,l+1),h=o[l],c=a==="end"?o.slice(l):z7(e?[e]:[],[h,r]);d=wk([...p.slice(0,-1),...f,...c.slice(1)])}else d=z7([n,e].filter(u=>!!u),[t,r]);return d.length<3&&(d=[t,r]),d}function tN({x:n,y:e,w:t,h:r},o){switch(o){case"top":return{x:n+t/2,y:e};case"right":return{x:n+t,y:e+r/2};case"bottom":return{x:n+t/2,y:e+r};case"left":return{x:n,y:e+r/2};default:throw new Error(`Unknown direction: ${o}`)}}function fC(n,e,t){if(!t||!t.contains(n,e))return{point:{x:n,y:e},position:null};const r=t.relativeDirection(n,e),o={x:(n-t.x)/t.w,y:(e-t.y)/t.h},i=tN(t,r);return Math.sqrt(Math.pow(n-i.x,2)+Math.pow(e-i.y,2))<JD?{point:i,position:{x:(i.x-t.x)/t.w,y:(i.y-t.y)/t.h}}:{point:{x:n,y:e},position:o}}function hT(n,e){const t=n.x+n.w*e.x,r=n.y+n.h*e.y,o=n.relativeDirection(t,r),i=tN(n,o);return Math.sqrt(Math.pow(t-i.x,2)+Math.pow(r-i.y,2))<JD?i:{x:t,y:r}}function Ak(n,e,t){const{startElement:r,endElement:o}=n,i=r!=null&&r.id?uT(e,t,r.id):null,a=i?new P1(...Da(Th(i))):null,s=a&&r?hT(a,r.position):{x:n.x+n.controllers[0].x,y:n.y+n.controllers[0].y},l=o!=null&&o.id?uT(e,t,o.id):null,d=l?new P1(...Da(Th(l))):null,u=d&&o?hT(d,o.position):{x:n.x+n.controllers[n.controllers.length-1].x,y:n.y+n.controllers[n.controllers.length-1].y};return{start:{element:r,rect:a,point:s},end:{element:o,rect:d,point:u}}}function nN(n,e){if(!e.find(s=>s.id===n.id))return!1;const{startElement:r,endElement:o}=n,i=e.find(s=>s.id===(r==null?void 0:r.id)),a=e.find(s=>s.id===(o==null?void 0:o.id));return!!(!r&&!o||!r&&a||!o&&i||i&&a)}function rN(n,e,t,r){n.type!=="connector"&&t.getBindingElements(n.id).forEach(i=>{if(i instanceof vx){if(nN(i,e))return;const{startElement:a,endElement:s,id:l,x:d,y:u,controllers:p,mode:f}=i,{start:h,end:c}=Ak(i,t,r),g=(a==null?void 0:a.id)===n.id?"end":(s==null?void 0:s.id)===n.id?"start":void 0,m=Yv(h.rect,c.rect,h.point,c.point,p.map(b=>({...b,x:b.x+d,y:b.y+u})),f,g);t.updateElement(l,{controllers:m})}})}function loe(n,e,t,r){const i=20*(t<.5?2:1/(Math.floor(t)||1))*t,a=-n*t,s=-e*t;return{gap:i,translateX:a,translateY:s,grid:r?"radial-gradient(var(--affine-edgeless-grid-color) 1px, var(--affine-background-primary-color) 1px)":"unset"}}function coe(n,e,t,r=Ug){const o=n.addFrameWithPoint(new ho(t.point.x,t.point.y),{width:r});e.addBlock("affine:paragraph",{},o),n.slots.mouseModeUpdated.emit({type:"default"}),requestAnimationFrame(()=>{var s;const a=(((s=e.root)==null?void 0:s.children.filter(l=>l.flavour==="affine:frame"))??[]).find(l=>l.id===o);a&&(n.slots.selectionUpdated.emit({selected:[a],active:!0}),n.updateComplete.then(()=>{px(t.raw.clientX,t.raw.clientY)}))})}function oN(n,e){var o;const t=new R6;e.pageBlockContainer.appendChild(t),t.mount(n,e),(o=t.vEditor)==null||o.focusEnd(),e.selection.switchToDefaultMode({selected:[n],active:!0})}function iN(n,e){if(!n.surface.pickTop(e.x,e.y)){const[r,o]=n.surface.viewport.toModelCoord(e.x,e.y),i=n.surface.addElement("text",{xywh:new ns(r,o,32,32).serialize(),text:new $g,textAlign:"left",fontSize:24,color:Jre});n.page.captureSync();const a=n.surface.pickById(i);xt(a),a instanceof E1&&oN(a,n)}}function doe(n){const[e,t,r,o]=Da(n.xywh);return{x:e,y:t,w:r,h:o}}function aN(n){let e=n.getVRange();const t=n.slots.vRangeUpdated.on(([r,o])=>{e&&r&&(o==="native"&&r.index===e.index||o!=="native"&&r.index===e.index+1)?e=r:(n.resetMarks(),t.dispose())})}function Yb(n,e){e.shouldCursorScrollIntoView=!0}var Em=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Tu=class extends so{constructor(){super(),this.size=null,this.width="28px",this.height="28px",this.text=null,this.disabled=!1,this.addEventListener("keypress",e=>{this.disabled||e.key==="Enter"&&this.click()}),this.addEventListener("click",e=>{this.disabled===""&&(e.preventDefault(),e.stopPropagation())},{capture:!0})}connectedCallback(){if(super.connectedCallback(),this.tabIndex=0,this.size&&(this.width||this.height))throw new Error("Cannot set both size and width/height on an icon-button");let e=this.width,t=this.height;this.size&&(e=this.size,t=this.size),this.style.setProperty("--button-width",typeof e=="string"?e:`${e}px`),this.style.setProperty("--button-height",typeof t=="string"?t:`${t}px`)}render(){return rt`<slot></slot>${this.text?rt`<span>${this.text}</span>`:""}<slot name="optional"></slot> `}};Tu.styles=vr`
    :host {
      box-sizing: border-box;
      display: flex;
      justify-content: center;
      align-items: center;
      border: none;
      width: var(--button-width);
      height: var(--button-height);
      border-radius: 5px;
      background: transparent;
      cursor: pointer;
      user-select: none;
      font-family: var(--affine-font-family);
      fill: var(--affine-icon-color);
      color: var(--affine-popover-color);
      pointer-events: auto;
    }

    :host > span {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    :host(:hover) {
      background: var(--affine-hover-color);
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }

    :host(:active) {
      background: transparent;
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }

    :host([disabled]),
    :host(:disabled) {
      background: transparent;
      color: var(--affine-text-disable-color);
      fill: var(--affine-text-disable-color);
      cursor: not-allowed;
    }

    /* You can add a 'hover' attribute to the button to show the hover style */
    :host([hover]) {
      background: var(--affine-hover-color);
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }

    /* You can add a 'active' attribute to the button to revert the active style */
    :host([active]) {
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }

    :host(:active[active]) {
      background: transparent;
      fill: var(--affine-icon-color);
    }
  `;Em([Ft()],Tu.prototype,"size",void 0);Em([Ft()],Tu.prototype,"width",void 0);Em([Ft()],Tu.prototype,"height",void 0);Em([Ft()],Tu.prototype,"text",void 0);Em([Ft()],Tu.prototype,"disabled",void 0);Tu=Em([lr("icon-button")],Tu);var xx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Wg=class extends Tu{constructor(){super(...arguments),this.width="32px",this.height="32px",this.active=!1,this._mousedown=e=>{e.stopPropagation(),e.preventDefault()}}connectedCallback(){super.connectedCallback(),this.addEventListener("mousedown",this._mousedown)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mousedown",this._mousedown)}};Wg.styles=vr`
    ${Tu.styles}

    :host {
      width: var(--button-width);
      height: var(--button-height);
      fill: var(--affine-icon-color);
      white-space: nowrap;
      user-select: none;
      gap: 8px;
    }
  `;xx([Ft()],Wg.prototype,"width",void 0);xx([Ft()],Wg.prototype,"height",void 0);xx([Ft()],Wg.prototype,"active",void 0);Wg=xx([lr("format-bar-button")],Wg);function sN(n){if(n.nodeType===Node.TEXT_NODE)return n;for(let e=0;e<n.childNodes.length;e++){const t=sN(n.childNodes[e]);if(t)return t}return null}function uoe(n,e=t=>t===document.body){for(;n.parentNode;){const t=n.parentNode;if(!t)return console.warn("Failed to find text node from node! no parent node",n),null;const r=Array.from(t.childNodes).indexOf(n);if(r===-1)return console.warn("Failed to find text node from node! no node index",n),null;for(let o=r+1;o<t.childNodes.length;o++){const i=sN(t.childNodes[o]);if(i)return i}if(e(t))return null;n=t}return null}function hoe(n){if(!n.collapsed)throw new Error("Failed to shift range! expected a collapsed range");const e=n.startContainer;if(!(e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE||e.nodeType===Node.CDATA_SECTION_NODE))return null;const r=e.textContent;if(typeof r!="string")throw new Error("Failed to shift range! unexpected startContainer");if(r.length>n.startOffset){const s=n.cloneRange();return s.setStart(n.startContainer,n.startOffset+1),s.setEnd(n.startContainer,n.startOffset+1),s}const i=uoe(e,s=>s instanceof HTMLElement&&s.contentEditable==="true");if(!i)return null;const a=n.cloneRange();return a.setStart(i,0),a.setEnd(i,0),a}function wx(n){if(!n.collapsed)return!1;const e=hoe(n);if(!e)return!1;const t=e.getBoundingClientRect();return n.getBoundingClientRect().top===t.top?!1:e}function foe(n,e){if(!n.collapsed)throw new Error("Failed to determine if the caret is at the first line! expected a collapsed range but got"+n);if(!e.contains(n.commonAncestorContainer))throw new Error("Failed to determine if the caret is at the first line! expected the range to be inside the container but got"+n+" and "+e);const t=e.getBoundingClientRect(),r=n.getBoundingClientRect();if(r.left===0&&r.top===0)return!0;const o=r.height;return t.top>r.top-o/2&&!wx(n)}function poe(n,e){if(!n.collapsed)throw new Error("Failed to determine if the caret is at the last line! expected a collapsed range but got"+n);if(!e.contains(n.commonAncestorContainer))throw new Error("Failed to determine if the caret is at the first line! expected the range to be inside the container but got"+n+" and "+e);const t=e.getBoundingClientRect(),r=n.getBoundingClientRect();if(r.left===0&&r.bottom===0)return!0;const o=r.height;if(r.bottom+o/2>t.bottom)return!0;const a=wx(n);if(!a)return!1;const s=a.getBoundingClientRect(),l=s.height;return s.bottom+l/2>t.bottom}function goe(n){const e=window.getSelection(),t=e&&e.rangeCount&&e.getRangeAt(0),r=Uf(n.x,n.y);t&&r&&t.isPointInRange(r.startContainer,r.startOffset)&&t.isPointInRange(r.endContainer,r.endOffset)?requestAnimationFrame(()=>{ts(t)}):n.preventDefault()}function moe(n){const e=n.start.x,t=n.start.y,r=n.point.x,o=n.point.y,i=r>e,a=Ba(),s=!JQ(a);return i?s||o>=t?"right-bottom":"right-top":s||o<=t?"left-top":"left-bottom"}function lN(n){const e=Ba(),t=moe(n);return{selectedType:e.collapsed||e.toString().length===0?"Caret":"Text",direction:t}}function cN(n,e){const{startContainer:t,startOffset:r,endContainer:o,endOffset:i}=n,a=e.includes("top"),[s,l]=a?[t,r]:[o,i],d=new Range;if(e.includes("center"))d.setStart(t,r),d.setEnd(o,i);else if(d.setStart(s,l),s.nodeType===Node.TEXT_NODE||s.nodeType===Node.COMMENT_NODE||s.nodeType===Node.CDATA_SECTION_NODE||(d.setStart(t,r),d.setEnd(o,i)),e.includes("left")){const c=wx(d);c&&(d.setStart(c.startContainer,c.startOffset),d.setEnd(c.endContainer,c.endOffset))}const u=d.getBoundingClientRect(),p=e.includes("bottom");return{x:u.x+u.width/2,y:u.y+(p?u.height:0)}}function vg(n,e){if(!e||!e.selectedBlocks.length){if(!Cm())throw new Error("Failed to get anchor element! There's no block selection or native selection.");const d=Ba();return cN(d,n)}const t=e.selectedBlocks,r=t[0],o=t[t.length-1],a=(n.includes("bottom")?o:r).getBoundingClientRect(),s=a.x+a.width/2,l=n.includes("bottom")?a.bottom:a.top;return{x:s,y:l}}function Lk({positioningPoint:n,objRect:e={width:0,height:0},boundaryRect:t=document.body.getBoundingClientRect(),offsetX:r=0,offsetY:o=0,edgeGap:i=20}){const a=x1(n.x+r,i,t.width-e.width-i),s=n.y+o;return{x:a,y:s}}function dN(n,e=document.body,t=20){const r=n.getBoundingClientRect(),o=e.getBoundingClientRect(),i=r.top-o.top,a=o.bottom-r.bottom,s=i>a?"top":"bottom";return{placement:s,height:(s==="top"?i:a)-t}}function uN(n,e,{gap:t=12,offsetY:r=5}={}){n||console.warn("The popper element is not exist. Popper position maybe incorrect");const{placement:o,height:i}=dN(e,document.body,t+r),a=e.getBoundingClientRect(),s={x:a.x,y:a.y+(o==="bottom"?a.height:0)},l=document.body.getBoundingClientRect(),d=n==null?void 0:n.getBoundingClientRect(),u=Lk({positioningPoint:s,objRect:d,boundaryRect:l,offsetY:o==="bottom"?r:-r});return{placement:o,height:i,x:`${u.x}px`,y:o==="bottom"?`${u.y}px`:`calc(${u.y}px - 100%)`}}function voe(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),o=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(o),e&&(r.href=e),o.href=n,o.href}const boe=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function Ch(n){const e=[];for(let t=0,r=n.length;t<r;t++)e.push(n[t]);return e}function D6(n,e){const r=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function yoe(n){const e=D6(n,"border-left-width"),t=D6(n,"border-right-width");return n.clientWidth+e+t}function xoe(n){const e=D6(n,"border-top-width"),t=D6(n,"border-bottom-width");return n.clientHeight+e+t}function hN(n,e={}){const t=e.width||yoe(n),r=e.height||xoe(n);return{width:t,height:r}}function woe(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const fc=16384;function Coe(n){(n.width>fc||n.height>fc)&&(n.width>fc&&n.height>fc?n.width>n.height?(n.height*=fc/n.width,n.width=fc):(n.width*=fc/n.height,n.height=fc):n.width>fc?(n.height*=fc/n.width,n.width=fc):(n.width*=fc/n.height,n.height=fc))}function N6(n){return new Promise((e,t)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=n})}async function Soe(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function koe(n,e,t){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${t}`),o.setAttribute("viewBox",`0 0 ${e} ${t}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(n),Soe(o)}const Wl=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Wl(t,e)};function _oe(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function Eoe(n){return Ch(n).map(e=>{const t=n.getPropertyValue(e),r=n.getPropertyPriority(e);return`${e}: ${t}${r?" !important":""};`}).join(" ")}function Poe(n,e,t){const r=`.${n}:${e}`,o=t.cssText?_oe(t):Eoe(t);return document.createTextNode(`${r}{${o}}`)}function fT(n,e,t){const r=window.getComputedStyle(n,t),o=r.getPropertyValue("content");if(o===""||o==="none")return;const i=boe();try{e.className=`${e.className} ${i}`}catch{return}const a=document.createElement("style");a.appendChild(Poe(i,t,r)),e.appendChild(a)}function Moe(n,e){fT(n,e,":before"),fT(n,e,":after")}const pT="application/font-woff",gT="image/jpeg",Ioe={woff:pT,woff2:pT,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:gT,jpeg:gT,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Toe(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function $k(n){const e=Toe(n).toLowerCase();return Ioe[e]||""}function Ooe(n){return n.split(/,/)[1]}function pC(n){return n.search(/^(data:)/)!==-1}function fN(n,e){return`data:${e};base64,${n}`}async function pN(n,e,t){const r=await fetch(n,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise((i,a)=>{const s=new FileReader;s.onerror=a,s.onloadend=()=>{try{i(t({res:r,result:s.result}))}catch(l){a(l)}},s.readAsDataURL(o)})}const H7={};function Aoe(n,e,t){let r=n.replace(/\?.*/,"");return t&&(r=n),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function jk(n,e,t){const r=Aoe(n,e,t.includeQueryParams);if(H7[r]!=null)return H7[r];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let o;try{const i=await pN(n,t.fetchRequestInit,({res:a,result:s})=>(e||(e=a.headers.get("Content-Type")||""),Ooe(s)));o=fN(i,e)}catch(i){o=t.imagePlaceholder||"";let a=`Failed to fetch resource: ${n}`;i&&(a=typeof i=="string"?i:i.message),a&&console.warn(a)}return H7[r]=o,o}async function Loe(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):N6(e)}async function $oe(n,e){if(n.currentSrc){const i=document.createElement("canvas"),a=i.getContext("2d");i.width=n.clientWidth,i.height=n.clientHeight,a==null||a.drawImage(n,0,0,i.width,i.height);const s=i.toDataURL();return N6(s)}const t=n.poster,r=$k(t),o=await jk(t,r,e);return N6(o)}async function joe(n){var e;try{if(!((e=n==null?void 0:n.contentDocument)===null||e===void 0)&&e.body)return await Cx(n.contentDocument.body,{},!0)}catch{}return n.cloneNode(!1)}async function Roe(n,e){return Wl(n,HTMLCanvasElement)?Loe(n):Wl(n,HTMLVideoElement)?$oe(n,e):Wl(n,HTMLIFrameElement)?joe(n):n.cloneNode(!1)}const Doe=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT";async function Noe(n,e,t){var r,o;let i=[];return Doe(n)&&n.assignedNodes?i=Ch(n.assignedNodes()):Wl(n,HTMLIFrameElement)&&(!((r=n.contentDocument)===null||r===void 0)&&r.body)?i=Ch(n.contentDocument.body.childNodes):i=Ch(((o=n.shadowRoot)!==null&&o!==void 0?o:n).childNodes),i.length===0||Wl(n,HTMLVideoElement)||await i.reduce((a,s)=>a.then(()=>Cx(s,t)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function zoe(n,e){const t=e.style;if(!t)return;const r=window.getComputedStyle(n);r.cssText?(t.cssText=r.cssText,t.transformOrigin=r.transformOrigin):Ch(r).forEach(o=>{let i=r.getPropertyValue(o);o==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Wl(n,HTMLIFrameElement)&&o==="display"&&i==="inline"&&(i="block"),o==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),t.setProperty(o,i,r.getPropertyPriority(o))})}function Boe(n,e){Wl(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Wl(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function Hoe(n,e){if(Wl(n,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(o=>n.value===o.getAttribute("value"));r&&r.setAttribute("selected","")}}function Foe(n,e){return Wl(e,Element)&&(zoe(n,e),Moe(n,e),Boe(n,e),Hoe(n,e)),e}async function Zoe(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const r={};for(let i=0;i<t.length;i++){const s=t[i].getAttribute("xlink:href");if(s){const l=n.querySelector(s),d=document.querySelector(s);!l&&d&&!r[s]&&(r[s]=await Cx(d,e,!0))}}const o=Object.values(r);if(o.length){const i="http://www.w3.org/1999/xhtml",a=document.createElementNS(i,"svg");a.setAttribute("xmlns",i),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const s=document.createElementNS(i,"defs");a.appendChild(s);for(let l=0;l<o.length;l++)s.appendChild(o[l]);n.appendChild(a)}return n}async function Cx(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(r=>Roe(r,e)).then(r=>Noe(n,r,e)).then(r=>Foe(n,r)).then(r=>Zoe(r,e))}const gN=/url\((['"]?)([^'"]+?)\1\)/g,Uoe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Woe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Voe(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Koe(n){const e=[];return n.replace(gN,(t,r,o)=>(e.push(o),t)),e.filter(t=>!pC(t))}async function Yoe(n,e,t,r,o){try{const i=t?voe(e,t):e,a=$k(e);let s;if(o){const l=await o(i);s=fN(l,a)}else s=await jk(i,a,r);return n.replace(Voe(e),`$1${s}$3`)}catch{}return n}function Goe(n,{preferredFontFormat:e}){return e?n.replace(Woe,t=>{for(;;){const[r,,o]=Uoe.exec(t)||[];if(!o)return"";if(o===e)return`src: ${r};`}}):n}function mN(n){return n.search(gN)!==-1}async function vN(n,e,t){if(!mN(n))return n;const r=Goe(n,t);return Koe(r).reduce((i,a)=>i.then(s=>Yoe(s,a,e,t)),Promise.resolve(r))}async function w5(n,e,t){var r;const o=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(n);if(o){const i=await vN(o,null,t);return e.style.setProperty(n,i,e.style.getPropertyPriority(n)),!0}return!1}async function Xoe(n,e){await w5("background",n,e)||await w5("background-image",n,e),await w5("mask",n,e)||await w5("mask-image",n,e)}async function qoe(n,e){const t=Wl(n,HTMLImageElement);if(!(t&&!pC(n.src))&&!(Wl(n,SVGImageElement)&&!pC(n.href.baseVal)))return;const r=t?n.src:n.href.baseVal,o=await jk(r,$k(r),e);await new Promise((i,a)=>{n.onload=i,n.onerror=a;const s=n;s.decode&&(s.decode=i),s.loading==="lazy"&&(s.loading="eager"),t?(n.srcset="",n.src=o):n.href.baseVal=o})}async function Joe(n,e){const r=Ch(n.childNodes).map(o=>bN(o,e));await Promise.all(r).then(()=>n)}async function bN(n,e){Wl(n,Element)&&(await Xoe(n,e),await qoe(n,e),await Joe(n,e))}function Qoe(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(o=>{t[o]=r[o]}),n}const mT={};async function vT(n){let e=mT[n];if(e!=null)return e;const r=await(await fetch(n)).text();return e={url:n,cssText:r},mT[n]=e,e}async function bT(n,e){let t=n.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(t.match(/url\([^)]+\)/g)||[]).map(async a=>{let s=a.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,n.url).href),pN(s,e.fetchRequestInit,({result:l})=>(t=t.replace(a,`url(${l})`),[a,l]))});return Promise.all(i).then(()=>t)}function yT(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=n.replace(t,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=o.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(o,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",s=new RegExp(a,"gi");for(;;){let l=i.exec(r);if(l===null){if(l=s.exec(r),l===null)break;i.lastIndex=s.lastIndex}else s.lastIndex=i.lastIndex;e.push(l[0])}return e}async function eie(n,e){const t=[],r=[];return n.forEach(o=>{if("cssRules"in o)try{Ch(o.cssRules||[]).forEach((i,a)=>{if(i.type===CSSRule.IMPORT_RULE){let s=a+1;const l=i.href,d=vT(l).then(u=>bT(u,e)).then(u=>yT(u).forEach(p=>{try{o.insertRule(p,p.startsWith("@import")?s+=1:o.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:p,error:f})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(d)}})}catch(i){const a=n.find(s=>s.href==null)||document.styleSheets[0];o.href!=null&&r.push(vT(o.href).then(s=>bT(s,e)).then(s=>yT(s).forEach(l=>{a.insertRule(l,o.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s)})),console.error("Error inlining remote css file",i)}}),Promise.all(r).then(()=>(n.forEach(o=>{if("cssRules"in o)try{Ch(o.cssRules||[]).forEach(i=>{t.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${o.href}`,i)}}),t))}function tie(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>mN(e.style.getPropertyValue("src")))}async function nie(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Ch(n.ownerDocument.styleSheets),r=await eie(t,e);return tie(r)}async function rie(n,e){const t=await nie(n,e);return(await Promise.all(t.map(o=>{const i=o.parentStyleSheet?o.parentStyleSheet.href:null;return vN(o.cssText,i,e)}))).join(`
`)}async function oie(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await rie(n,e);if(t){const r=document.createElement("style"),o=document.createTextNode(t);r.appendChild(o),n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}}async function iie(n,e={}){const{width:t,height:r}=hN(n,e),o=await Cx(n,e,!0);return await oie(o,e),await bN(o,e),Qoe(o,e),await koe(o,t,r)}async function aie(n,e={}){const{width:t,height:r}=hN(n,e),o=await iie(n,e),i=await N6(o),a=document.createElement("canvas"),s=a.getContext("2d"),l=e.pixelRatio||woe(),d=e.canvasWidth||t,u=e.canvasHeight||r;return a.width=d*l,a.height=u*l,e.skipAutoScale||Coe(a),a.style.width=`${d}`,a.style.height=`${u}`,e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),a}async function sie(n,e={}){return(await aie(n,e)).toDataURL()}function yN(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Y1=yN();function lie(n){Y1=n}const xN=/[&<>"']/,cie=new RegExp(xN.source,"g"),wN=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,die=new RegExp(wN.source,"g"),uie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xT=n=>uie[n];function il(n,e){if(e){if(xN.test(n))return n.replace(cie,xT)}else if(wN.test(n))return n.replace(die,xT);return n}const hie=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function CN(n){return n.replace(hie,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const fie=/(^|[^\[])\^/g;function ra(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,o)=>(o=o.source||o,o=o.replace(fie,"$1"),n=n.replace(r,o),t),getRegex:()=>new RegExp(n,e)};return t}const pie=/[^\w:]/g,gie=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function wT(n,e,t){if(n){let r;try{r=decodeURIComponent(CN(t)).replace(pie,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!gie.test(t)&&(t=yie(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const C5={},mie=/^[^:]+:\/*[^/]*$/,vie=/^([^:]+:)[\s\S]*$/,bie=/^([^:]+:\/*[^/]*)[\s\S]*$/;function yie(n,e){C5[" "+n]||(mie.test(n)?C5[" "+n]=n+"/":C5[" "+n]=M3(n,"/",!0)),n=C5[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(vie,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(bie,"$1")+e:n+e}const z6={exec:function(){}};function CT(n,e){const t=n.replace(/\|/g,(i,a,s)=>{let l=!1,d=a;for(;--d>=0&&s[d]==="\\";)l=!l;return l?"|":" |"}),r=t.split(/ \|/);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function M3(n,e,t){const r=n.length;if(r===0)return"";let o=0;for(;o<r;){const i=n.charAt(r-o-1);if(i===e&&!t)o++;else if(i!==e&&t)o++;else break}return n.slice(0,r-o)}function xie(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,o=0;for(;o<t;o++)if(n[o]==="\\")o++;else if(n[o]===e[0])r++;else if(n[o]===e[1]&&(r--,r<0))return o;return-1}function wie(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function ST(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function kT(n,e,t,r){const o=e.href,i=e.title?il(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const s={type:"link",raw:t,href:o,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,s}return{type:"image",raw:t,href:o,title:i,text:il(a)}}function Cie(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(o=>{const i=o.match(/^\s+/);if(i===null)return o;const[a]=i;return a.length>=r.length?o.slice(r.length):o}).join(`
`)}class Rk{constructor(e){this.options=e||Y1}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:M3(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],o=Cie(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:o}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const o=M3(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),o=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:t[0],tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,o,i,a,s,l,d,u,p,f,h,c,g=t[1].trim();const m=g.length>1,b={type:"list",raw:"",ordered:m,start:m?+g.slice(0,-1):"",loose:!1,items:[]};g=m?`\\d{1,9}\\${g.slice(-1)}`:`\\${g}`,this.options.pedantic&&(g=m?g:"[*+-]");const v=new RegExp(`^( {0,3}${g})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(c=!1,!(!(t=v.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),u=t[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),p=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=u.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,h=u.slice(a),a+=t[1].length),l=!1,!u&&/^ *$/.test(p)&&(r+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const _=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),k=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),y=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),S=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(f=e.split(`
`,1)[0],p=f,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(y.test(p)||S.test(p)||_.test(p)||k.test(e)));){if(p.search(/[^ ]/)>=a||!p.trim())h+=`
`+p.slice(a);else{if(l||u.search(/[^ ]/)>=4||y.test(u)||S.test(u)||k.test(u))break;h+=`
`+p}!l&&!p.trim()&&(l=!0),r+=f+`
`,e=e.substring(f.length+1),u=p.slice(a)}}b.loose||(d?b.loose=!0:/\n *\n *$/.test(r)&&(d=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(h),o&&(i=o[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),b.items.push({type:"list_item",raw:r,task:!!o,checked:i,loose:!1,text:h}),b.raw+=r}b.items[b.items.length-1].raw=r.trimRight(),b.items[b.items.length-1].text=h.trimRight(),b.raw=b.raw.trimRight();const w=b.items.length;for(s=0;s<w;s++)if(this.lexer.state.top=!1,b.items[s].tokens=this.lexer.blockTokens(b.items[s].text,[]),!b.loose){const _=b.items[s].tokens.filter(y=>y.type==="space"),k=_.length>0&&_.some(y=>/\n.*\n/.test(y.raw));b.loose=k}if(b.loose)for(s=0;s<w;s++)b.items[s].loose=!0;return b}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const o=this.options.sanitizer?this.options.sanitizer(t[0]):il(t[0]);r.type="paragraph",r.text=o,r.tokens=this.lexer.inline(o)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),o=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:o,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:CT(t[1]).map(o=>({text:o})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let o=r.align.length,i,a,s,l;for(i=0;i<o;i++)/^ *-+: *$/.test(r.align[i])?r.align[i]="right":/^ *:-+: *$/.test(r.align[i])?r.align[i]="center":/^ *:-+ *$/.test(r.align[i])?r.align[i]="left":r.align[i]=null;for(o=r.rows.length,i=0;i<o;i++)r.rows[i]=CT(r.rows[i],r.header.length).map(d=>({text:d}));for(o=r.header.length,a=0;a<o;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(o=r.rows.length,a=0;a<o;a++)for(l=r.rows[a],s=0;s<l.length;s++)l[s].tokens=this.lexer.inline(l[s].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:il(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):il(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=M3(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=xie(t[2],"()");if(a>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let o=t[2],i="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);a&&(o=a[1],i=a[3])}else i=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(r)?o=o.slice(1):o=o.slice(1,-1)),kT(t,{href:o&&o.replace(this.rules.inline._escapes,"$1"),title:i&&i.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let o=(r[2]||r[1]).replace(/\s+/g," ");if(o=t[o.toLowerCase()],!o){const i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return kT(r,o,r[0],this.lexer)}}emStrong(e,t,r=""){let o=this.rules.inline.emStrong.lDelim.exec(e);if(!o||o[3]&&r.match(/[\p{L}\p{N}]/u))return;const i=o[1]||o[2]||"";if(!i||i&&(r===""||this.rules.inline.punctuation.exec(r))){const a=o[0].length-1;let s,l,d=a,u=0;const p=o[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+a);(o=p.exec(t))!=null;){if(s=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!s)continue;if(l=s.length,o[3]||o[4]){d+=l;continue}else if((o[5]||o[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(d-=l,d>0)continue;l=Math.min(l,l+d+u);const f=e.slice(0,a+o.index+(o[0].length-s.length)+l);if(Math.min(a,l)%2){const c=f.slice(1,-1);return{type:"em",raw:f,text:c,tokens:this.lexer.inlineTokens(c)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const o=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return o&&i&&(r=r.substring(1,r.length-1)),r=il(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let o,i;return r[2]==="@"?(o=il(this.options.mangle?t(r[1]):r[1]),i="mailto:"+o):(o=il(r[1]),i=o),{type:"link",raw:r[0],text:o,href:i,tokens:[{type:"text",raw:o,text:o}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let o,i;if(r[2]==="@")o=il(this.options.mangle?t(r[0]):r[0]),i="mailto:"+o;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);o=il(r[0]),r[1]==="www."?i="http://"+r[0]:i=r[0]}return{type:"link",raw:r[0],text:o,href:i,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let o;return this.lexer.state.inRawBlock?o=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):il(r[0]):r[0]:o=il(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:o}}}}const Co={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:z6,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Co._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Co._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Co.def=ra(Co.def).replace("label",Co._label).replace("title",Co._title).getRegex();Co.bullet=/(?:[*+-]|\d{1,9}[.)])/;Co.listItemStart=ra(/^( *)(bull) */).replace("bull",Co.bullet).getRegex();Co.list=ra(Co.list).replace(/bull/g,Co.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Co.def.source+")").getRegex();Co._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Co._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Co.html=ra(Co.html,"i").replace("comment",Co._comment).replace("tag",Co._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Co.paragraph=ra(Co._paragraph).replace("hr",Co.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Co._tag).getRegex();Co.blockquote=ra(Co.blockquote).replace("paragraph",Co.paragraph).getRegex();Co.normal={...Co};Co.gfm={...Co.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};Co.gfm.table=ra(Co.gfm.table).replace("hr",Co.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Co._tag).getRegex();Co.gfm.paragraph=ra(Co._paragraph).replace("hr",Co.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Co.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Co._tag).getRegex();Co.pedantic={...Co.normal,html:ra(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Co._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:z6,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ra(Co.normal._paragraph).replace("hr",Co.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Co.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const Gr={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:z6,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:z6,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Gr._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Gr.punctuation=ra(Gr.punctuation).replace(/punctuation/g,Gr._punctuation).getRegex();Gr.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Gr.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;Gr._comment=ra(Co._comment).replace("(?:-->|$)","-->").getRegex();Gr.emStrong.lDelim=ra(Gr.emStrong.lDelim).replace(/punct/g,Gr._punctuation).getRegex();Gr.emStrong.rDelimAst=ra(Gr.emStrong.rDelimAst,"g").replace(/punct/g,Gr._punctuation).getRegex();Gr.emStrong.rDelimUnd=ra(Gr.emStrong.rDelimUnd,"g").replace(/punct/g,Gr._punctuation).getRegex();Gr._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Gr._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Gr._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Gr.autolink=ra(Gr.autolink).replace("scheme",Gr._scheme).replace("email",Gr._email).getRegex();Gr._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Gr.tag=ra(Gr.tag).replace("comment",Gr._comment).replace("attribute",Gr._attribute).getRegex();Gr._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Gr._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Gr._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Gr.link=ra(Gr.link).replace("label",Gr._label).replace("href",Gr._href).replace("title",Gr._title).getRegex();Gr.reflink=ra(Gr.reflink).replace("label",Gr._label).replace("ref",Co._label).getRegex();Gr.nolink=ra(Gr.nolink).replace("ref",Co._label).getRegex();Gr.reflinkSearch=ra(Gr.reflinkSearch,"g").replace("reflink",Gr.reflink).replace("nolink",Gr.nolink).getRegex();Gr.normal={...Gr};Gr.pedantic={...Gr.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ra(/^!?\[(label)\]\((.*?)\)/).replace("label",Gr._label).getRegex(),reflink:ra(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Gr._label).getRegex()};Gr.gfm={...Gr.normal,escape:ra(Gr.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};Gr.gfm.url=ra(Gr.gfm.url,"i").replace("email",Gr.gfm._extended_email).getRegex();Gr.breaks={...Gr.gfm,br:ra(Gr.br).replace("{2,}","*").getRegex(),text:ra(Gr.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Sie(n){return n.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function _T(n){let e="",t,r;const o=n.length;for(t=0;t<o;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class Kf{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Y1,this.options.tokenizer=this.options.tokenizer||new Rk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Co.normal,inline:Gr.normal};this.options.pedantic?(t.block=Co.pedantic,t.inline=Gr.pedantic):this.options.gfm&&(t.block=Co.gfm,this.options.breaks?t.inline=Gr.breaks:t.inline=Gr.gfm),this.tokenizer.rules=t}static get rules(){return{block:Co,inline:Gr}}static lex(e,t){return new Kf(t).lex(e)}static lexInline(e,t){return new Kf(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(s,l,d)=>l+"    ".repeat(d.length));let r,o,i,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(r=s.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),o=t[t.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),o=t[t.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let s=1/0;const l=e.slice(1);let d;this.options.extensions.startBlock.forEach(function(u){d=u.call({lexer:this},l),typeof d=="number"&&d>=0&&(s=Math.min(s,d))}),s<1/0&&s>=0&&(i=e.substring(0,s+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){o=t[t.length-1],a&&o.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(r),a=i.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),o=t[t.length-1],o&&o.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(r);continue}if(e){const s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,o,i,a=e,s,l,d;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,s.index)+"["+ST("a",s[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,s.index)+"["+ST("a",s[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,s.index+s[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(l||(d=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),o=t[t.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),o=t[t.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,a,d)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,_T)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,_T))){e=e.substring(r.raw.length),t.push(r);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const p=e.slice(1);let f;this.options.extensions.startInline.forEach(function(h){f=h.call({lexer:this},p),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(i=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(i,Sie)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(d=r.raw.slice(-1)),l=!0,o=t[t.length-1],o&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):t.push(r);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class Dk{constructor(e){this.options=e||Y1}code(e,t,r){const o=(t||"").match(/\S*/)[0];if(this.options.highlight){const i=this.options.highlight(e,o);i!=null&&i!==e&&(r=!0,e=i)}return e=e.replace(/\n$/,"")+`
`,o?'<pre><code class="'+this.options.langPrefix+il(o)+'">'+(r?e:il(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:il(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,r,o){if(this.options.headerIds){const i=this.options.headerPrefix+o.slug(r);return`<h${t} id="${i}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const o=t?"ol":"ul",i=t&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+e+"</"+o+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=wT(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+r+"</a>",o}image(e,t,r){if(e=wT(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let o=`<img src="${e}" alt="${r}"`;return t&&(o+=` title="${t}"`),o+=this.options.xhtml?"/>":">",o}text(e){return e}}class SN{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class kN{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,o=0;if(this.seen.hasOwnProperty(r)){o=this.seen[e];do o++,r=e+"-"+o;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=o,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Yf{constructor(e){this.options=e||Y1,this.options.renderer=this.options.renderer||new Dk,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new SN,this.slugger=new kN}static parse(e,t){return new Yf(t).parse(e)}static parseInline(e,t){return new Yf(t).parseInline(e)}parse(e,t=!0){let r="",o,i,a,s,l,d,u,p,f,h,c,g,m,b,v,w,_,k,y;const S=e.length;for(o=0;o<S;o++){if(h=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(y=this.options.extensions.renderers[h.type].call({parser:this},h),y!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=y||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,CN(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(p="",u="",s=h.header.length,i=0;i<s;i++)u+=this.renderer.tablecell(this.parseInline(h.header[i].tokens),{header:!0,align:h.align[i]});for(p+=this.renderer.tablerow(u),f="",s=h.rows.length,i=0;i<s;i++){for(d=h.rows[i],u="",l=d.length,a=0;a<l;a++)u+=this.renderer.tablecell(this.parseInline(d[a].tokens),{header:!1,align:h.align[a]});f+=this.renderer.tablerow(u)}r+=this.renderer.table(p,f);continue}case"blockquote":{f=this.parse(h.tokens),r+=this.renderer.blockquote(f);continue}case"list":{for(c=h.ordered,g=h.start,m=h.loose,s=h.items.length,f="",i=0;i<s;i++)v=h.items[i],w=v.checked,_=v.task,b="",v.task&&(k=this.renderer.checkbox(w),m?v.tokens.length>0&&v.tokens[0].type==="paragraph"?(v.tokens[0].text=k+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&v.tokens[0].tokens[0].type==="text"&&(v.tokens[0].tokens[0].text=k+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:k}):b+=k),b+=this.parse(v.tokens,m),f+=this.renderer.listitem(b,_,w);r+=this.renderer.list(f,c,g);continue}case"html":{r+=this.renderer.html(h.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(f=h.tokens?this.parseInline(h.tokens):h.text;o+1<S&&e[o+1].type==="text";)h=e[++o],f+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=t?this.renderer.paragraph(f):f;continue}default:{const C='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(C);return}else throw new Error(C)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",o,i,a;const s=e.length;for(o=0;o<s;o++){if(i=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]&&(a=this.options.extensions.renderers[i.type].call({parser:this},i),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))){r+=a||"";continue}switch(i.type){case"escape":{r+=t.text(i.text);break}case"html":{r+=t.html(i.text);break}case"link":{r+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break}case"image":{r+=t.image(i.href,i.title,i.text);break}case"strong":{r+=t.strong(this.parseInline(i.tokens,t));break}case"em":{r+=t.em(this.parseInline(i.tokens,t));break}case"codespan":{r+=t.codespan(i.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(i.tokens,t));break}case"text":{r+=t.text(i.text);break}default:{const l='Token with "'+i.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return r}}class B6{constructor(e){this.options=e||Y1}preprocess(e){return e}postprocess(e){return e}}J(B6,"passThroughHooks",new Set(["preprocess","postprocess"]));function kie(n,e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const o="<p>An error occurred:</p><pre>"+il(r.message+"",!0)+"</pre>";if(e)return Promise.resolve(o);if(t){t(null,o);return}return o}if(e)return Promise.reject(r);if(t){t(r);return}throw r}}function _N(n,e){return(t,r,o)=>{typeof r=="function"&&(o=r,r=null);const i={...r};r={...wo.defaults,...i};const a=kie(r.silent,r.async,o);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(wie(r),r.hooks&&(r.hooks.options=r),o){const s=r.highlight;let l;try{r.hooks&&(t=r.hooks.preprocess(t)),l=n(t,r)}catch(p){return a(p)}const d=function(p){let f;if(!p)try{r.walkTokens&&wo.walkTokens(l,r.walkTokens),f=e(l,r),r.hooks&&(f=r.hooks.postprocess(f))}catch(h){p=h}return r.highlight=s,p?a(p):o(null,f)};if(!s||s.length<3||(delete r.highlight,!l.length))return d();let u=0;wo.walkTokens(l,function(p){p.type==="code"&&(u++,setTimeout(()=>{s(p.text,p.lang,function(f,h){if(f)return d(f);h!=null&&h!==p.text&&(p.text=h,p.escaped=!0),u--,u===0&&d()})},0))}),u===0&&d();return}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(s=>n(s,r)).then(s=>r.walkTokens?Promise.all(wo.walkTokens(s,r.walkTokens)).then(()=>s):s).then(s=>e(s,r)).then(s=>r.hooks?r.hooks.postprocess(s):s).catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));const s=n(t,r);r.walkTokens&&wo.walkTokens(s,r.walkTokens);let l=e(s,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(s){return a(s)}}}function wo(n,e,t){return _N(Kf.lex,Yf.parse)(n,e,t)}wo.options=wo.setOptions=function(n){return wo.defaults={...wo.defaults,...n},lie(wo.defaults),wo};wo.getDefaults=yN;wo.defaults=Y1;wo.use=function(...n){const e=wo.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=wo.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const i=e.renderers[o.name];i?e.renderers[o.name]=function(...a){let s=o.renderer.apply(this,a);return s===!1&&(s=i.apply(this,a)),s}:e.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[o.level]?e[o.level].unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),r.extensions=e),t.renderer){const o=wo.defaults.renderer||new Dk;for(const i in t.renderer){const a=o[i];o[i]=(...s)=>{let l=t.renderer[i].apply(o,s);return l===!1&&(l=a.apply(o,s)),l}}r.renderer=o}if(t.tokenizer){const o=wo.defaults.tokenizer||new Rk;for(const i in t.tokenizer){const a=o[i];o[i]=(...s)=>{let l=t.tokenizer[i].apply(o,s);return l===!1&&(l=a.apply(o,s)),l}}r.tokenizer=o}if(t.hooks){const o=wo.defaults.hooks||new B6;for(const i in t.hooks){const a=o[i];B6.passThroughHooks.has(i)?o[i]=s=>{if(wo.defaults.async)return Promise.resolve(t.hooks[i].call(o,s)).then(d=>a.call(o,d));const l=t.hooks[i].call(o,s);return a.call(o,l)}:o[i]=(...s)=>{let l=t.hooks[i].apply(o,s);return l===!1&&(l=a.apply(o,s)),l}}r.hooks=o}if(t.walkTokens){const o=wo.defaults.walkTokens;r.walkTokens=function(i){let a=[];return a.push(t.walkTokens.call(this,i)),o&&(a=a.concat(o.call(this,i))),a}}wo.setOptions(r)})};wo.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(wo,r)),r.type){case"table":{for(const o of r.header)t=t.concat(wo.walkTokens(o.tokens,e));for(const o of r.rows)for(const i of o)t=t.concat(wo.walkTokens(i.tokens,e));break}case"list":{t=t.concat(wo.walkTokens(r.items,e));break}default:wo.defaults.extensions&&wo.defaults.extensions.childTokens&&wo.defaults.extensions.childTokens[r.type]?wo.defaults.extensions.childTokens[r.type].forEach(function(o){t=t.concat(wo.walkTokens(r[o],e))}):r.tokens&&(t=t.concat(wo.walkTokens(r.tokens,e)))}return t};wo.parseInline=_N(Kf.lexInline,Yf.parseInline);wo.Parser=Yf;wo.parser=Yf.parse;wo.Renderer=Dk;wo.TextRenderer=SN;wo.Lexer=Kf;wo.lexer=Kf.lex;wo.Tokenizer=Rk;wo.Slugger=kN;wo.Hooks=B6;wo.parse=wo;wo.options;wo.setOptions;wo.use;wo.walkTokens;wo.parseInline;Yf.parse;Kf.lex;let Mg=class{constructor(e,t){this.mimeType=e,this.data=t}hasData(){return this.data!==null&&this.data!==void 0}};var Zs;(function(n){n.HTML="text/html",n.TEXT="text/plain",n.BLOCKSUITE_PAGE="blocksuite/page",n.BLOCKSUITE_SURFACE="blocksuite/surface"})(Zs||(Zs={}));function EN(n,e){const r=new DOMParser().parseFromString(e,"text/html").querySelector(`blocksuite[data-type="${n}"]`);return r==null?void 0:r.getAttribute("data-clipboard")}function _ie(n){const e=n.clipboardData;if(!e)return;const t=e.getData(Zs.BLOCKSUITE_SURFACE);if(t)return JSON.parse(t);const r=e.getData(Zs.HTML),o=EN(Zs.BLOCKSUITE_SURFACE,r);if(o)return JSON.parse(o)}function Eie(n){const e=n.types;return e.length===1&&e[0]==="Files"||e.length===2&&(e.includes("text/plain")||e.includes("text/html"))&&e.includes("Files")}function Pie(n){const e=n.files;if(e&&e[0]&&e[0].type.indexOf("image")>-1)return e[0]}function Nk(n){let e=!1;const t=document.createElement("textarea");t.value="temp",document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length);const r=o=>{const i=o.clipboardData;i&&n.forEach(a=>i.setData(a.mimeType,a.data)),o.preventDefault(),o.stopPropagation(),t.removeEventListener("copy",r)};t.addEventListener("copy",r);try{e=document.execCommand("copy")}finally{t.removeEventListener("copy",r),document.body.removeChild(t)}return e}function Mie(n){const e=JSON.stringify(n),t=new Mg(Zs.BLOCKSUITE_SURFACE,e),r=new Mg(Zs.HTML,PN(e,Zs.BLOCKSUITE_SURFACE));return[t,r]}function PN(n,e){return`<blocksuite style="display: none" data-type="${e}" data-clipboard="${n.replace(/"/g,"&quot;")}"></blocksuite>`}function Iie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])}return n}function gC(n,e){return Array(e+1).join(n)}function Tie(n){return n.replace(/^\n*/,"")}function Oie(n){for(var e=n.length;e>0&&n[e-1]===`
`;)e--;return n.substring(0,e)}var Aie=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function zk(n){return Bk(n,Aie)}var MN=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function IN(n){return Bk(n,MN)}function Lie(n){return ON(n,MN)}var TN=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function $ie(n){return Bk(n,TN)}function jie(n){return ON(n,TN)}function Bk(n,e){return e.indexOf(n.nodeName)>=0}function ON(n,e){return n.getElementsByTagName&&e.some(function(t){return n.getElementsByTagName(t).length})}var gl={};gl.paragraph={filter:"p",replacement:function(n){return`

`+n+`

`}};gl.lineBreak={filter:"br",replacement:function(n,e,t){return t.br+`
`}};gl.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(n,e,t){var r=Number(e.nodeName.charAt(1));if(t.headingStyle==="setext"&&r<3){var o=gC(r===1?"=":"-",n.length);return`

`+n+`
`+o+`

`}else return`

`+gC("#",r)+" "+n+`

`}};gl.blockquote={filter:"blockquote",replacement:function(n){return n=n.replace(/^\n+|\n+$/g,""),n=n.replace(/^/gm,"> "),`

`+n+`

`}};gl.list={filter:["ul","ol"],replacement:function(n,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+n:`

`+n+`

`}};gl.listItem={filter:"li",replacement:function(n,e,t){n=n.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=t.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var i=o.getAttribute("start"),a=Array.prototype.indexOf.call(o.children,e);r=(i?Number(i)+a:a+1)+".  "}return r+n+(e.nextSibling&&!/\n$/.test(n)?`
`:"")}};gl.indentedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="indented"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};gl.fencedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="fenced"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){for(var r=e.firstChild.getAttribute("class")||"",o=(r.match(/language-(\S+)/)||[null,""])[1],i=e.firstChild.textContent,a=t.fence.charAt(0),s=3,l=new RegExp("^"+a+"{3,}","gm"),d;d=l.exec(i);)d[0].length>=s&&(s=d[0].length+1);var u=gC(a,s);return`

`+u+o+`
`+i.replace(/\n$/,"")+`
`+u+`

`}};gl.horizontalRule={filter:"hr",replacement:function(n,e,t){return`

`+t.hr+`

`}};gl.inlineLink={filter:function(n,e){return e.linkStyle==="inlined"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e){var t=e.getAttribute("href"),r=H6(e.getAttribute("title"));return r&&(r=' "'+r+'"'),"["+n+"]("+t+r+")"}};gl.referenceLink={filter:function(n,e){return e.linkStyle==="referenced"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e,t){var r=e.getAttribute("href"),o=H6(e.getAttribute("title"));o&&(o=' "'+o+'"');var i,a;switch(t.linkReferenceStyle){case"collapsed":i="["+n+"][]",a="["+n+"]: "+r+o;break;case"shortcut":i="["+n+"]",a="["+n+"]: "+r+o;break;default:var s=this.references.length+1;i="["+n+"]["+s+"]",a="["+s+"]: "+r+o}return this.references.push(a),i},references:[],append:function(n){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};gl.emphasis={filter:["em","i"],replacement:function(n,e,t){return n.trim()?t.emDelimiter+n+t.emDelimiter:""}};gl.strong={filter:["strong","b"],replacement:function(n,e,t){return n.trim()?t.strongDelimiter+n+t.strongDelimiter:""}};gl.code={filter:function(n){var e=n.previousSibling||n.nextSibling,t=n.parentNode.nodeName==="PRE"&&!e;return n.nodeName==="CODE"&&!t},replacement:function(n){if(!n)return"";n=n.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(n)?" ":"",t="`",r=n.match(/`+/gm)||[];r.indexOf(t)!==-1;)t=t+"`";return t+e+n+e+t}};gl.image={filter:"img",replacement:function(n,e){var t=H6(e.getAttribute("alt")),r=e.getAttribute("src")||"",o=H6(e.getAttribute("title")),i=o?' "'+o+'"':"";return r?"!["+t+"]("+r+i+")":""}};function H6(n){return n?n.replace(/(\n+\s*)+/g,`
`):""}function AN(n){this.options=n,this._keep=[],this._remove=[],this.blankRule={replacement:n.blankReplacement},this.keepReplacement=n.keepReplacement,this.defaultRule={replacement:n.defaultReplacement},this.array=[];for(var e in n.rules)this.array.push(n.rules[e])}AN.prototype={add:function(n,e){this.array.unshift(e)},keep:function(n){this._keep.unshift({filter:n,replacement:this.keepReplacement})},remove:function(n){this._remove.unshift({filter:n,replacement:function(){return""}})},forNode:function(n){if(n.isBlank)return this.blankRule;var e;return(e=F7(this.array,n,this.options))||(e=F7(this._keep,n,this.options))||(e=F7(this._remove,n,this.options))?e:this.defaultRule},forEach:function(n){for(var e=0;e<this.array.length;e++)n(this.array[e],e)}};function F7(n,e,t){for(var r=0;r<n.length;r++){var o=n[r];if(Rie(o,e,t))return o}}function Rie(n,e,t){var r=n.filter;if(typeof r=="string"){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(n,e,t))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Die(n){var e=n.element,t=n.isBlock,r=n.isVoid,o=n.isPre||function(p){return p.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var i=null,a=!1,s=null,l=ET(s,e,o);l!==e;){if(l.nodeType===3||l.nodeType===4){var d=l.data.replace(/[ \r\n\t]+/g," ");if((!i||/ $/.test(i.data))&&!a&&d[0]===" "&&(d=d.substr(1)),!d){l=Z7(l);continue}l.data=d,i=l}else if(l.nodeType===1)t(l)||l.nodeName==="BR"?(i&&(i.data=i.data.replace(/ $/,"")),i=null,a=!1):r(l)||o(l)?(i=null,a=!0):i&&(a=!1);else{l=Z7(l);continue}var u=ET(s,l,o);s=l,l=u}i&&(i.data=i.data.replace(/ $/,""),i.data||Z7(i))}}function Z7(n){var e=n.nextSibling||n.parentNode;return n.parentNode.removeChild(n),e}function ET(n,e,t){return n&&n.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var LN=typeof window<"u"?window:{};function Nie(){var n=LN.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e}function zie(){var n=function(){};return Bie()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}function Bie(){var n=!1;try{document.implementation.createHTMLDocument("").open()}catch{window.ActiveXObject&&(n=!0)}return n}var Hie=Nie()?LN.DOMParser:zie();function Fie(n,e){var t;if(typeof n=="string"){var r=Zie().parseFromString('<x-turndown id="turndown-root">'+n+"</x-turndown>","text/html");t=r.getElementById("turndown-root")}else t=n.cloneNode(!0);return Die({element:t,isBlock:zk,isVoid:IN,isPre:e.preformattedCode?Uie:null}),t}var U7;function Zie(){return U7=U7||new Hie,U7}function Uie(n){return n.nodeName==="PRE"||n.nodeName==="CODE"}function Wie(n,e){return n.isBlock=zk(n),n.isCode=n.nodeName==="CODE"||n.parentNode.isCode,n.isBlank=Vie(n),n.flankingWhitespace=Kie(n,e),n}function Vie(n){return!IN(n)&&!$ie(n)&&/^\s*$/i.test(n.textContent)&&!Lie(n)&&!jie(n)}function Kie(n,e){if(n.isBlock||e.preformattedCode&&n.isCode)return{leading:"",trailing:""};var t=Yie(n.textContent);return t.leadingAscii&&PT("left",n,e)&&(t.leading=t.leadingNonAscii),t.trailingAscii&&PT("right",n,e)&&(t.trailing=t.trailingNonAscii),{leading:t.leading,trailing:t.trailing}}function Yie(n){var e=n.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function PT(n,e,t){var r,o,i;return n==="left"?(r=e.previousSibling,o=/ $/):(r=e.nextSibling,o=/^ /),r&&(r.nodeType===3?i=o.test(r.nodeValue):t.preformattedCode&&r.nodeName==="CODE"?i=!1:r.nodeType===1&&!zk(r)&&(i=o.test(r.textContent))),i}var Gie=Array.prototype.reduce,Xie=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function F6(n){if(!(this instanceof F6))return new F6(n);var e={rules:gl,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,r){return r.isBlock?`

`:""},keepReplacement:function(t,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(t,r){return r.isBlock?`

`+t+`

`:t}};this.options=Iie({},e,n),this.rules=new AN(this.options)}F6.prototype={turndown:function(n){if(!Qie(n))throw new TypeError(n+" is not a string, or an element/document/fragment node.");if(n==="")return"";var e=$N.call(this,new Fie(n,this.options));return qie.call(this,e)},use:function(n){if(Array.isArray(n))for(var e=0;e<n.length;e++)this.use(n[e]);else if(typeof n=="function")n(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(n,e){return this.rules.add(n,e),this},keep:function(n){return this.rules.keep(n),this},remove:function(n){return this.rules.remove(n),this},escape:function(n){return Xie.reduce(function(e,t){return e.replace(t[0],t[1])},n)}};function $N(n){var e=this;return Gie.call(n.childNodes,function(t,r){r=new Wie(r,e.options);var o="";return r.nodeType===3?o=r.isCode?r.nodeValue:e.escape(r.nodeValue):r.nodeType===1&&(o=Jie.call(e,r)),jN(t,o)},"")}function qie(n){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(n=jN(n,t.append(e.options)))}),n.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Jie(n){var e=this.rules.forNode(n),t=$N.call(this,n),r=n.flankingWhitespace;return(r.leading||r.trailing)&&(t=t.trim()),r.leading+e.replacement(t,n,this.options)+r.trailing}function jN(n,e){var t=Oie(n),r=Tie(e),o=Math.max(n.length-t.length,e.length-r.length),i=`

`.substring(0,o);return t+i+r}function Qie(n){return n!=null&&(typeof n=="string"||n.nodeType&&(n.nodeType===1||n.nodeType===9||n.nodeType===11))}const eae=vr`
  :root {
    --affine-editor-width: ${jj}px;

    --affine-theme-mode: light;
    --affine-editor-mode: page;
    /* --affine-palette-transparent: special values added for the sake of logical consistency. */
    --affine-palette-transparent: #00000000;

    --affine-popover-shadow: 0px 1px 10px -6px rgba(24, 39, 75, 0.08),
      0px 3px 16px -6px rgba(24, 39, 75, 0.04);
    --affine-font-family: Avenir Next, Poppins, apple-system, BlinkMacSystemFont,
      Helvetica Neue, Tahoma, PingFang SC, Microsoft Yahei, Arial,
      Hiragino Sans GB, sans-serif, Apple Color Emoji, Segoe UI Emoji,
      Segoe UI Symbol, Noto Color Emoji;
    --affine-font-number-family: Roboto Mono, apple-system, BlinkMacSystemFont,
      Helvetica Neue, Tahoma, PingFang SC, Microsoft Yahei, Arial,
      Hiragino Sans GB, sans-serif, Apple Color Emoji, Segoe UI Emoji,
      Segoe UI Symbol, Noto Color Emoji;
    --affine-font-code-family: Space Mono, Consolas, Menlo, Monaco, Courier,
      monospace, apple-system, BlinkMacSystemFont, Helvetica Neue, Tahoma,
      PingFang SC, Microsoft Yahei, Arial, Hiragino Sans GB, sans-serif,
      Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    --affine-font-h-1: 28px;
    --affine-font-h-2: 26px;
    --affine-font-h-3: 24px;
    --affine-font-h-4: 22px;
    --affine-font-h-5: 20px;
    --affine-font-h-6: 18px;
    --affine-font-base: 16px;
    --affine-font-sm: 14px;
    --affine-font-xs: 12px;
    --affine-line-height: calc(1em + 8px);
    --affine-z-index-modal: 1000;
    --affine-z-index-popover: 1000;
    --affine-paragraph-space: 8px;
    --affine-popover-radius: 10px;
    --affine-zoom: 1;
    --affine-scale: calc(1 / var(--affine-zoom));

    --affine-brand-color: #5438ff;
    --affine-tertiary-color: #f3f0ff;
    --affine-primary-color: #5438ff;
    --affine-secondary-color: #7d91ff;
    --affine-background-success-color: #fff;
    --affine-background-error-color: hsla(0, 0%, 100%, 0.2);
    --affine-background-processing-color: #fff;
    --affine-background-warning-color: #fff;
    --affine-background-primary-color: #fff;
    --affine-background-overlay-panel-color: #fbfbfc;
    --affine-background-secondary-color: #fbfafc;
    --affine-background-tertiary-color: #e9e9ec;
    --affine-background-code-block: #fafbfd;
    --affine-background-modal-color: rgba(0, 0, 0, 0.6);
    --affine-text-primary-color: #424149;
    --affine-text-secondary-color: #8e8d91;
    --affine-text-disable-color: #a9a9ad;
    --affine-text-emphasis-color: #5438ff;
    --affine-hover-color: rgba(0, 0, 0, 0.04);
    --affine-link-color: #7d91ff;
    --affine-quote-color: #645f82;
    --affine-icon-color: #77757d;
    --affine-icon-secondary: hsla(255, 3%, 47%, 0.6);
    --affine-border-color: #e3e2e4;
    --affine-divider-color: #e3e2e4;
    --affine-placeholder-color: #c0bfc1;
    --affine-edgeless-grid-color: #e6e6e6;
    --affine-success-color: #10cb86;
    --affine-warning-color: #ff631f;
    --affine-error-color: #eb4335;
    --affine-processing-color: #2776ff;
    --affine-black-10: rgba(0, 0, 0, 0.1);
    --affine-black-30: rgba(0, 0, 0, 0.3);
    --affine-black-50: rgba(0, 0, 0, 0.5);
    --affine-black-60: rgba(0, 0, 0, 0.6);
    --affine-black-80: rgba(0, 0, 0, 0.8);
    --affine-black-90: rgba(0, 0, 0, 0.9);
    --affine-black: #000;
    --affine-white-10: hsla(0, 0%, 100%, 0.1);
    --affine-white-30: hsla(0, 0%, 100%, 0.3);
    --affine-white-50: hsla(0, 0%, 100%, 0.5);
    --affine-white-60: hsla(0, 0%, 100%, 0.6);
    --affine-white-80: hsla(0, 0%, 100%, 0.8);
    --affine-white-90: hsla(0, 0%, 100%, 0.9);
    --affine-white: #fff;
    --affine-tag-white: #f5f5f5;
    --affine-tag-gray: #e3e2e0;
    --affine-tag-red: #ffe1e1;
    --affine-tag-orange: #ffeaca;
    --affine-tag-yellow: #fff4d8;
    --affine-tag-green: #dff4e8;
    --affine-tag-teal: #dff4f3;
    --affine-tag-blue: #e1efff;
    --affine-tag-purple: #f3f0ff;
    --affine-tag-pink: #fce8ff;
    --affine-palette-line-yellow: #3874ff;
    --affine-palette-line-orange: #ffaf38;
    --affine-palette-line-tangerine: #ff631f;
    --affine-palette-line-red: #fc3f55;
    --affine-palette-line-magenta: #ff38b3;
    --affine-palette-line-purple: #b638ff;
    --affine-palette-line-navy: #3b25cc;
    --affine-palette-line-blue: #4f90ff;
    --affine-palette-line-green: #10cb86;
    --affine-palette-line-white: #fff;
    --affine-palette-line-black: #000;
    --affine-palette-line-grey: #999;
    --affine-palette-shape-yellow: #fff188;
    --affine-palette-shape-orange: #ffcf88;
    --affine-palette-shape-tangerine: #ffa179;
    --affine-palette-shape-red: #fd8c99;
    --affine-palette-shape-magenta: #ff88d1;
    --affine-palette-shape-purple: #d388ff;
    --affine-palette-shape-navy: #897ce0;
    --affine-palette-shape-blue: #95bcff;
    --affine-palette-shape-green: #70e0b6;
    --affine-palette-shape-white: #fff;
    --affine-palette-shape-black: #000;
    --affine-palette-shape-grey: #c2c2c2;
    --affine-tooltip: #424149;
  }
  body {
    font-family: var(--affine-font-family);
    color: var(--affine-text-primary-color);
  }
`,W7="Untitled",e1={exportFile(n,e){const t=document.createElement("a");t.setAttribute("href",e);const r=nae(n);t.setAttribute("download",r),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},exportTextFile(n,e,t){e1.exportFile(n,"data:"+t+";charset=utf-8,"+encodeURIComponent(e))},exportHtml(n,e){const t=(n==null?void 0:n.trim())||W7;e1.exportTextFile(t+".html",tae(t,e),"text/html")},exportHtmlAsMarkdown(n,e){const t=new F6;t.addRule("input",{[Symbol.iterator](){},anchor(i){return""},big(){return""},blink(){return""},bold(){return""},charAt(i){return""},charCodeAt(i){return 0},codePointAt(i){},concat(i){return""},endsWith(i,a){return!1},fixed(){return""},fontcolor(i){return""},includes(i,a){return!1},indexOf(i,a){return 0},italics(){return""},lastIndexOf(i,a){return 0},length:0,link(i){return""},repeat(i){return""},slice(i,a){return""},small(){return""},startsWith(i,a){return!1},strike(){return""},sub(){return""},substr(i,a){return""},substring(i,a){return""},sup(){return""},toLocaleLowerCase(i){return""},toLocaleUpperCase(i){return""},toLowerCase(){return""},toString(){return""},toUpperCase(){return""},trim(){return""},valueOf(){return""},fontsize(i){return""},localeCompare(i,a,s){return 0},match(i){},normalize(i){return""},replace(i,a){return""},search(i){return 0},split(i,a){return[]},filter:["input"],replacement:function(i,a){return a.getAttribute("checked")===null?"[ ] ":"[x] "}}),t.addRule("codeBlock",{filter:["pre"],replacement:function(i,a){return"```"+a.getAttribute("code-lang")+`
`+a.textContent+"```\n"}}),t.keep(["del","u"]);const r=t.turndown(e),o=(n==null?void 0:n.trim())||W7;e1.exportTextFile(o+".md",r,"text/plain")},exportPng(n,e){const t=(n==null?void 0:n.trim())||W7;e1.exportFile(t+".png",e)}};function tae(n,e){const t=`<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
<style>
  ${eae}
</style>`;return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>${n}</title>
  ${t}
</head>
<body>
<div style="margin:0 auto;padding:1rem;max-width:${jj}px">
${e}
</div>
</body>
</html>
`}function nae(n){const e=" ",t=/[<>:"/\\|?*\u0000-\u001F]/g,r=/^(con|prn|aux|nul|com\d|lpt\d)$/i,o=/[\u0000-\u001F\u0080-\u009F]/g,i=/\.+$/;function s(p,f){const h=f.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),c=new RegExp(`(?:${h}){2,}`,"g");return p.replace(c,f)}n=n.normalize("NFD").replace(t,e).replace(o,e).replace(i,""),n=s(n,e),n=r.test(n)?n+e:n;const l=n.lastIndexOf("."),d=n.slice(0,l).trim(),u=n.slice(l);return n=d.slice(0,Math.max(1,50-u.length))+u,n}var RN={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(la,()=>{return t={770:function(o,i,a){var s=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(i,"__esModule",{value:!0}),i.setDefaultDebugCall=i.createOnigScanner=i.createOnigString=i.loadWASM=i.OnigScanner=i.OnigString=void 0;const l=s(a(418));let d=null,u=!1;class p{static _utf8ByteLength(b){let v=0;for(let w=0,_=b.length;w<_;w++){const k=b.charCodeAt(w);let y=k,S=!1;if(k>=55296&&k<=56319&&w+1<_){const C=b.charCodeAt(w+1);C>=56320&&C<=57343&&(y=65536+(k-55296<<10)|C-56320,S=!0)}v+=y<=127?1:y<=2047?2:y<=65535?3:4,S&&w++}return v}constructor(b){const v=b.length,w=p._utf8ByteLength(b),_=w!==v,k=_?new Uint32Array(v+1):null;_&&(k[v]=w);const y=_?new Uint32Array(w+1):null;_&&(y[w]=v);const S=new Uint8Array(w);let C=0;for(let I=0;I<v;I++){const A=b.charCodeAt(I);let T=A,L=!1;if(A>=55296&&A<=56319&&I+1<v){const j=b.charCodeAt(I+1);j>=56320&&j<=57343&&(T=65536+(A-55296<<10)|j-56320,L=!0)}_&&(k[I]=C,L&&(k[I+1]=C),T<=127?y[C+0]=I:T<=2047?(y[C+0]=I,y[C+1]=I):T<=65535?(y[C+0]=I,y[C+1]=I,y[C+2]=I):(y[C+0]=I,y[C+1]=I,y[C+2]=I,y[C+3]=I)),T<=127?S[C++]=T:T<=2047?(S[C++]=192|(1984&T)>>>6,S[C++]=128|(63&T)>>>0):T<=65535?(S[C++]=224|(61440&T)>>>12,S[C++]=128|(4032&T)>>>6,S[C++]=128|(63&T)>>>0):(S[C++]=240|(1835008&T)>>>18,S[C++]=128|(258048&T)>>>12,S[C++]=128|(4032&T)>>>6,S[C++]=128|(63&T)>>>0),L&&I++}this.utf16Length=v,this.utf8Length=w,this.utf16Value=b,this.utf8Value=S,this.utf16OffsetToUtf8=k,this.utf8OffsetToUtf16=y}createString(b){const v=b._omalloc(this.utf8Length);return b.HEAPU8.set(this.utf8Value,v),v}}class f{constructor(b){if(this.id=++f.LAST_ID,!d)throw new Error("Must invoke loadWASM first.");this._onigBinding=d,this.content=b;const v=new p(b);this.utf16Length=v.utf16Length,this.utf8Length=v.utf8Length,this.utf16OffsetToUtf8=v.utf16OffsetToUtf8,this.utf8OffsetToUtf16=v.utf8OffsetToUtf16,this.utf8Length<1e4&&!f._sharedPtrInUse?(f._sharedPtr||(f._sharedPtr=d._omalloc(1e4)),f._sharedPtrInUse=!0,d.HEAPU8.set(v.utf8Value,f._sharedPtr),this.ptr=f._sharedPtr):this.ptr=v.createString(d)}convertUtf8OffsetToUtf16(b){return this.utf8OffsetToUtf16?b<0?0:b>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[b]:b}convertUtf16OffsetToUtf8(b){return this.utf16OffsetToUtf8?b<0?0:b>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[b]:b}dispose(){this.ptr===f._sharedPtr?f._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}i.OnigString=f,f.LAST_ID=0,f._sharedPtr=0,f._sharedPtrInUse=!1;class h{constructor(b){if(!d)throw new Error("Must invoke loadWASM first.");const v=[],w=[];for(let S=0,C=b.length;S<C;S++){const I=new p(b[S]);v[S]=I.createString(d),w[S]=I.utf8Length}const _=d._omalloc(4*b.length);d.HEAPU32.set(v,_/4);const k=d._omalloc(4*b.length);d.HEAPU32.set(w,k/4);const y=d._createOnigScanner(_,k,b.length);for(let S=0,C=b.length;S<C;S++)d._ofree(v[S]);d._ofree(k),d._ofree(_),y===0&&function(S){throw new Error(S.UTF8ToString(S._getLastOnigError()))}(d),this._onigBinding=d,this._ptr=y}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(b,v,w){let _=u,k=0;if(typeof w=="number"?(8&w&&(_=!0),k=w):typeof w=="boolean"&&(_=w),typeof b=="string"){b=new f(b);const y=this._findNextMatchSync(b,v,_,k);return b.dispose(),y}return this._findNextMatchSync(b,v,_,k)}_findNextMatchSync(b,v,w,_){const k=this._onigBinding;let y;if(y=w?k._findNextOnigScannerMatchDbg(this._ptr,b.id,b.ptr,b.utf8Length,b.convertUtf16OffsetToUtf8(v),_):k._findNextOnigScannerMatch(this._ptr,b.id,b.ptr,b.utf8Length,b.convertUtf16OffsetToUtf8(v),_),y===0)return null;const S=k.HEAPU32;let C=y/4;const I=S[C++],A=S[C++];let T=[];for(let L=0;L<A;L++){const j=b.convertUtf8OffsetToUtf16(S[C++]),$=b.convertUtf8OffsetToUtf16(S[C++]);T[L]={start:j,end:$,length:$-j}}return{index:I,captureIndices:T}}}i.OnigScanner=h;let c=!1,g=null;i.loadWASM=function(m){if(c)return g;let b,v,w,_;if(c=!0,function(k){return typeof k.instantiator=="function"}(m))b=m.instantiator,v=m.print;else{let k;(function(y){return y.data!==void 0})(m)?(k=m.data,v=m.print):k=m,b=function(y){return typeof Response<"u"&&y instanceof Response}(k)?typeof WebAssembly.instantiateStreaming=="function"?function(y){return S=>WebAssembly.instantiateStreaming(y,S)}(k):function(y){return async S=>{const C=await y.arrayBuffer();return WebAssembly.instantiate(C,S)}}(k):function(y){return S=>WebAssembly.instantiate(y,S)}(k)}return g=new Promise((k,y)=>{w=k,_=y}),function(k,y,S,C){(0,l.default)({print:y,instantiateWasm:(I,A)=>{if(typeof performance>"u"){const T=()=>Date.now();I.env.emscripten_get_now=T,I.wasi_snapshot_preview1.emscripten_get_now=T}return k(I).then(T=>A(T.instance),C),{}}}).then(I=>{d=I,S()})}(b,v,w,_),g},i.createOnigString=function(m){return new f(m)},i.createOnigScanner=function(m){return new h(m)},i.setDefaultDebugCall=function(m){u=m}},418:o=>{var i=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(a){var s,l,d=(a=a||{})!==void 0?a:{};d.ready=new Promise(function(X,we){s=X,l=we});var u,p=Object.assign({},d),f=!1,h="";function c(X){return d.locateFile?d.locateFile(X,h):h+X}u=function(X){let we;return typeof readbuffer=="function"?new Uint8Array(readbuffer(X)):(we=read(X,"binary"),_(typeof we=="object"),we)},typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var g,m,b=d.print||console.log.bind(console),v=d.printErr||console.warn.bind(console);Object.assign(d,p),p=null,d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.quit&&d.quit,d.wasmBinary&&(g=d.wasmBinary),d.noExitRuntime,typeof WebAssembly!="object"&&R("no native wasm support detected");var w=!1;function _(X,we){X||R(we)}var k,y,S,C=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function I(X,we,be){for(var le=we+be,ye=we;X[ye]&&!(ye>=le);)++ye;if(ye-we>16&&X.buffer&&C)return C.decode(X.subarray(we,ye));for(var ue="";we<ye;){var xe=X[we++];if(128&xe){var Pe=63&X[we++];if((224&xe)!=192){var Ne=63&X[we++];if((xe=(240&xe)==224?(15&xe)<<12|Pe<<6|Ne:(7&xe)<<18|Pe<<12|Ne<<6|63&X[we++])<65536)ue+=String.fromCharCode(xe);else{var Me=xe-65536;ue+=String.fromCharCode(55296|Me>>10,56320|1023&Me)}}else ue+=String.fromCharCode((31&xe)<<6|Pe)}else ue+=String.fromCharCode(xe)}return ue}function A(X,we){return X?I(y,X,we):""}function T(X){k=X,d.HEAP8=new Int8Array(X),d.HEAP16=new Int16Array(X),d.HEAP32=new Int32Array(X),d.HEAPU8=y=new Uint8Array(X),d.HEAPU16=new Uint16Array(X),d.HEAPU32=S=new Uint32Array(X),d.HEAPF32=new Float32Array(X),d.HEAPF64=new Float64Array(X)}d.INITIAL_MEMORY;var L=[],j=[],$=[];function ee(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)ie(d.preRun.shift());ce(L)}function Q(){ce(j)}function pe(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)Z(d.postRun.shift());ce($)}function ie(X){L.unshift(X)}function te(X){j.unshift(X)}function Z(X){$.unshift(X)}var D=0,B=null;function H(X){D++,d.monitorRunDependencies&&d.monitorRunDependencies(D)}function V(X){if(D--,d.monitorRunDependencies&&d.monitorRunDependencies(D),D==0&&B){var we=B;B=null,we()}}function R(X){d.onAbort&&d.onAbort(X),v(X="Aborted("+X+")"),w=!0,X+=". Build with -sASSERTIONS for more info.";var we=new WebAssembly.RuntimeError(X);throw l(we),we}var Y,E,W="data:application/octet-stream;base64,";function F(X){return X.startsWith(W)}function z(X){try{if(X==Y&&g)return new Uint8Array(g);if(u)return u(X);throw"both async and sync fetching of the wasm failed"}catch(we){R(we)}}function q(){return g||!f||typeof fetch!="function"?Promise.resolve().then(function(){return z(Y)}):fetch(Y,{credentials:"same-origin"}).then(function(X){if(!X.ok)throw"failed to load wasm binary file at '"+Y+"'";return X.arrayBuffer()}).catch(function(){return z(Y)})}function fe(){var X={env:se,wasi_snapshot_preview1:se};function we(ye,ue){var xe=ye.exports;d.asm=xe,T((m=d.asm.memory).buffer),d.asm.__indirect_function_table,te(d.asm.__wasm_call_ctors),V()}function be(ye){we(ye.instance)}function le(ye){return q().then(function(ue){return WebAssembly.instantiate(ue,X)}).then(function(ue){return ue}).then(ye,function(ue){v("failed to asynchronously prepare wasm: "+ue),R(ue)})}if(H(),d.instantiateWasm)try{return d.instantiateWasm(X,we)}catch(ye){v("Module.instantiateWasm callback failed with error: "+ye),l(ye)}return(g||typeof WebAssembly.instantiateStreaming!="function"||F(Y)||typeof fetch!="function"?le(be):fetch(Y,{credentials:"same-origin"}).then(function(ye){return WebAssembly.instantiateStreaming(ye,X).then(be,function(ue){return v("wasm streaming compile failed: "+ue),v("falling back to ArrayBuffer instantiation"),le(be)})})).catch(l),{}}function ce(X){for(;X.length>0;)X.shift()(d)}function U(X,we,be){y.copyWithin(X,we,we+be)}function ve(X){try{return m.grow(X-k.byteLength+65535>>>16),T(m.buffer),1}catch{}}function oe(X){var we,be=y.length,le=2147483648;if((X>>>=0)>le)return!1;for(var ye=1;ye<=4;ye*=2){var ue=be*(1+.2/ye);if(ue=Math.min(ue,X+100663296),ve(Math.min(le,(we=Math.max(X,ue))+(65536-we%65536)%65536)))return!0}return!1}F(Y="onig.wasm")||(Y=c(Y)),E=typeof dateNow<"u"?dateNow:()=>performance.now();var re=[null,[],[]];function ae(X,we){var be=re[X];we===0||we===10?((X===1?b:v)(I(be,0)),be.length=0):be.push(we)}function me(X,we,be,le){for(var ye=0,ue=0;ue<be;ue++){var xe=S[we>>2],Pe=S[we+4>>2];we+=8;for(var Ne=0;Ne<Pe;Ne++)ae(X,y[xe+Ne]);ye+=Pe}return S[le>>2]=ye,0}var he,se={emscripten_get_now:E,emscripten_memcpy_big:U,emscripten_resize_heap:oe,fd_write:me};function ge(X){function we(){he||(he=!0,d.calledRun=!0,w||(Q(),s(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),pe()))}D>0||(ee(),D>0||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),we()},1)):we()))}if(fe(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.__wasm_call_ctors).apply(null,arguments)},d.___errno_location=function(){return(d.___errno_location=d.asm.__errno_location).apply(null,arguments)},d._omalloc=function(){return(d._omalloc=d.asm.omalloc).apply(null,arguments)},d._ofree=function(){return(d._ofree=d.asm.ofree).apply(null,arguments)},d._getLastOnigError=function(){return(d._getLastOnigError=d.asm.getLastOnigError).apply(null,arguments)},d._createOnigScanner=function(){return(d._createOnigScanner=d.asm.createOnigScanner).apply(null,arguments)},d._freeOnigScanner=function(){return(d._freeOnigScanner=d.asm.freeOnigScanner).apply(null,arguments)},d._findNextOnigScannerMatch=function(){return(d._findNextOnigScannerMatch=d.asm.findNextOnigScannerMatch).apply(null,arguments)},d._findNextOnigScannerMatchDbg=function(){return(d._findNextOnigScannerMatchDbg=d.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},d.stackSave=function(){return(d.stackSave=d.asm.stackSave).apply(null,arguments)},d.stackRestore=function(){return(d.stackRestore=d.asm.stackRestore).apply(null,arguments)},d.stackAlloc=function(){return(d.stackAlloc=d.asm.stackAlloc).apply(null,arguments)},d.dynCall_jiji=function(){return(d.dynCall_jiji=d.asm.dynCall_jiji).apply(null,arguments)},d.UTF8ToString=A,B=function X(){he||ge(),he||(B=X)},d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();return ge(),a.ready});o.exports=i}},r={},function o(i){var a=r[i];if(a!==void 0)return a.exports;var s=r[i]={exports:{}};return t[i].call(s.exports,s,s.exports,o),s.exports}(770);var t,r})})(RN);var S5=RN.exports,DN={exports:{}};(function(n,e){var t={};(function(r,o){n.exports=o()})(la,function(){return(()=>{var r={350:(i,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UseOnigurumaFindOptions=a.DebugFlags=void 0,a.DebugFlags={InDebugMode:typeof process<"u"&&!!t.VSCODE_TEXTMATE_DEBUG},a.UseOnigurumaFindOptions=!1},36:(i,a)=>{var s;Object.defineProperty(a,"__esModule",{value:!0}),a.toOptionalTokenType=a.EncodedTokenAttributes=void 0,(s=a.EncodedTokenAttributes||(a.EncodedTokenAttributes={})).toBinaryStr=function(l){let d=l.toString(2);for(;d.length<32;)d="0"+d;return d},s.print=function(l){const d=s.getLanguageId(l),u=s.getTokenType(l),p=s.getFontStyle(l),f=s.getForeground(l),h=s.getBackground(l);console.log({languageId:d,tokenType:u,fontStyle:p,foreground:f,background:h})},s.getLanguageId=function(l){return(255&l)>>>0},s.getTokenType=function(l){return(768&l)>>>8},s.containsBalancedBrackets=function(l){return(1024&l)!=0},s.getFontStyle=function(l){return(30720&l)>>>11},s.getForeground=function(l){return(16744448&l)>>>15},s.getBackground=function(l){return(4278190080&l)>>>24},s.set=function(l,d,u,p,f,h,c){let g=s.getLanguageId(l),m=s.getTokenType(l),b=s.containsBalancedBrackets(l)?1:0,v=s.getFontStyle(l),w=s.getForeground(l),_=s.getBackground(l);return d!==0&&(g=d),u!==8&&(m=u),p!==null&&(b=p?1:0),f!==-1&&(v=f),h!==0&&(w=h),c!==0&&(_=c),(g<<0|m<<8|b<<10|v<<11|w<<15|_<<24)>>>0},a.toOptionalTokenType=function(l){return l}},996:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BasicScopeAttributesProvider=a.BasicScopeAttributes=void 0;const l=s(878);class d{constructor(h,c){this.languageId=h,this.tokenType=c}}a.BasicScopeAttributes=d;class u{constructor(h,c){this._getBasicScopeAttributes=new l.CachedFn(g=>{const m=this._scopeToLanguage(g),b=this._toStandardTokenType(g);return new d(m,b)}),this._defaultAttributes=new d(h,8),this._embeddedLanguagesMatcher=new p(Object.entries(c||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(h){return h===null?u._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(h)}_scopeToLanguage(h){return this._embeddedLanguagesMatcher.match(h)||0}_toStandardTokenType(h){const c=h.match(u.STANDARD_TOKEN_TYPE_REGEXP);if(!c)return 8;switch(c[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}a.BasicScopeAttributesProvider=u,u._NULL_SCOPE_METADATA=new d(0,0),u.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class p{constructor(h){if(h.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(h);const c=h.map(([g,m])=>l.escapeRegExpCharacters(g));c.sort(),c.reverse(),this.scopesRegExp=new RegExp(`^((${c.join(")|(")}))($|\\.)`,"")}}match(h){if(!this.scopesRegExp)return;const c=h.match(this.scopesRegExp);return c?this.values.get(c[1]):void 0}}},947:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LineTokens=a.BalancedBracketSelectors=a.StateStack=a.AttributedScopeStack=a.Grammar=a.createGrammar=void 0;const l=s(350),d=s(36),u=s(736),p=s(44),f=s(792),h=s(583),c=s(878),g=s(996),m=s(47);function b(I,A,T,L,j){const $=u.createMatchers(A,v),ee=f.RuleFactory.getCompiledRuleId(T,L,j.repository);for(const Q of $)I.push({debugSelector:A,matcher:Q.matcher,ruleId:ee,grammar:j,priority:Q.priority})}function v(I,A){if(A.length<I.length)return!1;let T=0;return I.every(L=>{for(let j=T;j<A.length;j++)if(w(A[j],L))return T=j+1,!0;return!1})}function w(I,A){if(!I)return!1;if(I===A)return!0;const T=A.length;return I.length>T&&I.substr(0,T)===A&&I[T]==="."}a.createGrammar=function(I,A,T,L,j,$,ee,Q){return new _(I,A,T,L,j,$,ee,Q)};class _{constructor(A,T,L,j,$,ee,Q,pe){if(this._rootScopeName=A,this.balancedBracketSelectors=ee,this._onigLib=pe,this._basicScopeAttributesProvider=new g.BasicScopeAttributesProvider(L,j),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=Q,this._grammar=k(T,null),this._injections=null,this._tokenTypeMatchers=[],$)for(const ie of Object.keys($)){const te=u.createMatchers(ie,v);for(const Z of te)this._tokenTypeMatchers.push({matcher:Z.matcher,type:$[ie]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const A of this._ruleId2desc)A&&A.dispose()}createOnigScanner(A){return this._onigLib.createOnigScanner(A)}createOnigString(A){return this._onigLib.createOnigString(A)}getMetadataForScope(A){return this._basicScopeAttributesProvider.getBasicScopeAttributes(A)}_collectInjections(){const A=[],T=this._rootScopeName,L=(j=>j===this._rootScopeName?this._grammar:this.getExternalGrammar(j))(T);if(L){const j=L.injections;if(j)for(let ee in j)b(A,ee,j[ee],this,L);const $=this._grammarRepository.injections(T);$&&$.forEach(ee=>{const Q=this.getExternalGrammar(ee);if(Q){const pe=Q.injectionSelector;pe&&b(A,pe,Q,this,Q)}})}return A.sort((j,$)=>j.priority-$.priority),A}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),l.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const A of this._injections)console.log(`  - ${A.debugSelector}`)}return this._injections}registerRule(A){const T=++this._lastRuleId,L=A(f.ruleIdFromNumber(T));return this._ruleId2desc[T]=L,L}getRule(A){return this._ruleId2desc[f.ruleIdToNumber(A)]}getExternalGrammar(A,T){if(this._includedGrammars[A])return this._includedGrammars[A];if(this._grammarRepository){const L=this._grammarRepository.lookup(A);if(L)return this._includedGrammars[A]=k(L,T&&T.$base),this._includedGrammars[A]}}tokenizeLine(A,T,L=0){const j=this._tokenize(A,T,!1,L);return{tokens:j.lineTokens.getResult(j.ruleStack,j.lineLength),ruleStack:j.ruleStack,stoppedEarly:j.stoppedEarly}}tokenizeLine2(A,T,L=0){const j=this._tokenize(A,T,!0,L);return{tokens:j.lineTokens.getBinaryResult(j.ruleStack,j.lineLength),ruleStack:j.ruleStack,stoppedEarly:j.stoppedEarly}}_tokenize(A,T,L,j){let $;if(this._rootId===-1&&(this._rootId=f.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),T&&T!==S.NULL)$=!1,T.reset();else{$=!0;const te=this._basicScopeAttributesProvider.getDefaultAttributes(),Z=this.themeProvider.getDefaults(),D=d.EncodedTokenAttributes.set(0,te.languageId,te.tokenType,null,Z.fontStyle,Z.foregroundId,Z.backgroundId),B=this.getRule(this._rootId).getName(null,null);let H;H=B?y.createRootAndLookUpScopeName(B,D,this):y.createRoot("unknown",D),T=new S(null,this._rootId,-1,-1,!1,null,H,H)}A+=`
`;const ee=this.createOnigString(A),Q=ee.content.length,pe=new C(L,A,this._tokenTypeMatchers,this.balancedBracketSelectors),ie=m._tokenizeString(this,ee,$,0,T,pe,!0,j);return p.disposeOnigString(ee),{lineLength:Q,lineTokens:pe,ruleStack:ie.stack,stoppedEarly:ie.stoppedEarly}}}function k(I,A){return(I=c.clone(I)).repository=I.repository||{},I.repository.$self={$vscodeTextmateLocation:I.$vscodeTextmateLocation,patterns:I.patterns,name:I.scopeName},I.repository.$base=A||I.repository.$self,I}a.Grammar=_;class y{constructor(A,T,L){this.parent=A,this.scopePath=T,this.tokenAttributes=L}static createRoot(A,T){return new y(null,new h.ScopeStack(null,A),T)}static createRootAndLookUpScopeName(A,T,L){const j=L.getMetadataForScope(A),$=new h.ScopeStack(null,A),ee=L.themeProvider.themeMatch($),Q=y.mergeAttributes(T,j,ee);return new y(null,$,Q)}get scopeName(){return this.scopePath.scopeName}equals(A){return y._equals(this,A)}static _equals(A,T){for(;;){if(A===T||!A&&!T)return!0;if(!A||!T||A.scopeName!==T.scopeName||A.tokenAttributes!==T.tokenAttributes)return!1;A=A.parent,T=T.parent}}static mergeAttributes(A,T,L){let j=-1,$=0,ee=0;return L!==null&&(j=L.fontStyle,$=L.foregroundId,ee=L.backgroundId),d.EncodedTokenAttributes.set(A,T.languageId,T.tokenType,null,j,$,ee)}pushAttributed(A,T){if(A===null)return this;if(A.indexOf(" ")===-1)return y._pushAttributed(this,A,T);const L=A.split(/ /g);let j=this;for(const $ of L)j=y._pushAttributed(j,$,T);return j}static _pushAttributed(A,T,L){const j=L.getMetadataForScope(T),$=A.scopePath.push(T),ee=L.themeProvider.themeMatch($),Q=y.mergeAttributes(A.tokenAttributes,j,ee);return new y(A,$,Q)}getScopeNames(){return this.scopePath.getSegments()}}a.AttributedScopeStack=y;class S{constructor(A,T,L,j,$,ee,Q,pe){this.parent=A,this.ruleId=T,this.beginRuleCapturedEOL=$,this.endRule=ee,this.nameScopesList=Q,this.contentNameScopesList=pe,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=L,this._anchorPos=j}equals(A){return A!==null&&S._equals(this,A)}static _equals(A,T){return A===T||!!this._structuralEquals(A,T)&&A.contentNameScopesList.equals(T.contentNameScopesList)}static _structuralEquals(A,T){for(;;){if(A===T||!A&&!T)return!0;if(!A||!T||A.depth!==T.depth||A.ruleId!==T.ruleId||A.endRule!==T.endRule)return!1;A=A.parent,T=T.parent}}clone(){return this}static _reset(A){for(;A;)A._enterPos=-1,A._anchorPos=-1,A=A.parent}reset(){S._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(A,T,L,j,$,ee,Q){return new S(this,A,T,L,j,$,ee,Q)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(A){return A.getRule(this.ruleId)}toString(){const A=[];return this._writeString(A,0),"["+A.join(",")+"]"}_writeString(A,T){return this.parent&&(T=this.parent._writeString(A,T)),A[T++]=`(${this.ruleId}, TODO-${this.nameScopesList}, TODO-${this.contentNameScopesList})`,T}withContentNameScopesList(A){return this.contentNameScopesList===A?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,A)}withEndRule(A){return this.endRule===A?this:new S(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,A,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(A){let T=this;for(;T&&T._enterPos===A._enterPos;){if(T.ruleId===A.ruleId)return!0;T=T.parent}return!1}}a.StateStack=S,S.NULL=new S(null,0,0,0,!1,null,null,null),a.BalancedBracketSelectors=class{constructor(I,A){this.allowAny=!1,this.balancedBracketScopes=I.flatMap(T=>T==="*"?(this.allowAny=!0,[]):u.createMatchers(T,v).map(L=>L.matcher)),this.unbalancedBracketScopes=A.flatMap(T=>u.createMatchers(T,v).map(L=>L.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(I){for(const A of this.unbalancedBracketScopes)if(A(I))return!1;for(const A of this.balancedBracketScopes)if(A(I))return!0;return this.allowAny}};class C{constructor(A,T,L,j){this.balancedBracketSelectors=j,this._emitBinaryTokens=A,this._tokenTypeOverrides=L,l.DebugFlags.InDebugMode?this._lineText=T:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(A,T){this.produceFromScopes(A.contentNameScopesList,T)}produceFromScopes(A,T){var j;if(this._lastTokenEndIndex>=T)return;if(this._emitBinaryTokens){let $=A.tokenAttributes,ee=!1;if((j=this.balancedBracketSelectors)!=null&&j.matchesAlways&&(ee=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const Q=A.getScopeNames();for(const pe of this._tokenTypeOverrides)pe.matcher(Q)&&($=d.EncodedTokenAttributes.set($,0,d.toOptionalTokenType(pe.type),null,-1,0,0));this.balancedBracketSelectors&&(ee=this.balancedBracketSelectors.match(Q))}if(ee&&($=d.EncodedTokenAttributes.set($,0,8,ee,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===$)return void(this._lastTokenEndIndex=T);if(l.DebugFlags.InDebugMode){const Q=A.getScopeNames();console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,T).replace(/\n$/,"\\n")+"|");for(let pe=0;pe<Q.length;pe++)console.log("      * "+Q[pe])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push($),void(this._lastTokenEndIndex=T)}const L=A.getScopeNames();if(l.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,T).replace(/\n$/,"\\n")+"|");for(let $=0;$<L.length;$++)console.log("      * "+L[$])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:T,scopes:L}),this._lastTokenEndIndex=T}getResult(A,T){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===T-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(A,T),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(A,T){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===T-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(A,T),this._binaryTokens[this._binaryTokens.length-2]=0);const L=new Uint32Array(this._binaryTokens.length);for(let j=0,$=this._binaryTokens.length;j<$;j++)L[j]=this._binaryTokens[j];return L}}a.LineTokens=C},965:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.parseInclude=a.TopLevelRepositoryReference=a.TopLevelReference=a.RelativeReference=a.SelfReference=a.BaseReference=a.ScopeDependencyProcessor=a.ExternalReferenceCollector=a.TopLevelRepositoryRuleReference=a.TopLevelRuleReference=void 0;const l=s(878);class d{constructor(S){this.scopeName=S}toKey(){return this.scopeName}}a.TopLevelRuleReference=d;class u{constructor(S,C){this.scopeName=S,this.ruleName=C}toKey(){return`${this.scopeName}#${this.ruleName}`}}a.TopLevelRepositoryRuleReference=u;class p{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(S){const C=S.toKey();this._seenReferenceKeys.has(C)||(this._seenReferenceKeys.add(C),this._references.push(S))}}function f(y,S,C,I){const A=C.lookup(y.scopeName);if(!A){if(y.scopeName===S)throw new Error(`No grammar provided for <${S}>`);return}const T=C.lookup(S);y instanceof d?c({baseGrammar:T,selfGrammar:A},I):h(y.ruleName,{baseGrammar:T,selfGrammar:A,repository:A.repository},I);const L=C.injections(y.scopeName);if(L)for(const j of L)I.add(new d(j))}function h(y,S,C){S.repository&&S.repository[y]&&g([S.repository[y]],S,C)}function c(y,S){y.selfGrammar.patterns&&Array.isArray(y.selfGrammar.patterns)&&g(y.selfGrammar.patterns,{...y,repository:y.selfGrammar.repository},S),y.selfGrammar.injections&&g(Object.values(y.selfGrammar.injections),{...y,repository:y.selfGrammar.repository},S)}function g(y,S,C){for(const I of y){if(C.visitedRule.has(I))continue;C.visitedRule.add(I);const A=I.repository?l.mergeObjects({},S.repository,I.repository):S.repository;Array.isArray(I.patterns)&&g(I.patterns,{...S,repository:A},C);const T=I.include;if(!T)continue;const L=k(T);switch(L.kind){case 0:c({...S,selfGrammar:S.baseGrammar},C);break;case 1:c(S,C);break;case 2:h(L.ruleName,{...S,repository:A},C);break;case 3:case 4:const j=L.scopeName===S.selfGrammar.scopeName?S.selfGrammar:L.scopeName===S.baseGrammar.scopeName?S.baseGrammar:void 0;if(j){const $={baseGrammar:S.baseGrammar,selfGrammar:j,repository:A};L.kind===4?h(L.ruleName,$,C):c($,C)}else L.kind===4?C.add(new u(L.scopeName,L.ruleName)):C.add(new d(L.scopeName))}}}a.ExternalReferenceCollector=p,a.ScopeDependencyProcessor=class{constructor(y,S){this.repo=y,this.initialScopeName=S,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new d(this.initialScopeName)]}processQueue(){const y=this.Q;this.Q=[];const S=new p;for(const C of y)f(C,this.initialScopeName,this.repo,S);for(const C of S.references)if(C instanceof d){if(this.seenFullScopeRequests.has(C.scopeName))continue;this.seenFullScopeRequests.add(C.scopeName),this.Q.push(C)}else{if(this.seenFullScopeRequests.has(C.scopeName)||this.seenPartialScopeRequests.has(C.toKey()))continue;this.seenPartialScopeRequests.add(C.toKey()),this.Q.push(C)}}};class m{constructor(){this.kind=0}}a.BaseReference=m;class b{constructor(){this.kind=1}}a.SelfReference=b;class v{constructor(S){this.ruleName=S,this.kind=2}}a.RelativeReference=v;class w{constructor(S){this.scopeName=S,this.kind=3}}a.TopLevelReference=w;class _{constructor(S,C){this.scopeName=S,this.ruleName=C,this.kind=4}}function k(y){if(y==="$base")return new m;if(y==="$self")return new b;const S=y.indexOf("#");if(S===-1)return new w(y);if(S===0)return new v(y.substring(1));{const C=y.substring(0,S),I=y.substring(S+1);return new _(C,I)}}a.TopLevelRepositoryReference=_,a.parseInclude=k},391:function(i,a,s){var l=this&&this.__createBinding||(Object.create?function(u,p,f,h){h===void 0&&(h=f),Object.defineProperty(u,h,{enumerable:!0,get:function(){return p[f]}})}:function(u,p,f,h){h===void 0&&(h=f),u[h]=p[f]}),d=this&&this.__exportStar||function(u,p){for(var f in u)f==="default"||Object.prototype.hasOwnProperty.call(p,f)||l(p,u,f)};Object.defineProperty(a,"__esModule",{value:!0}),d(s(947),a)},47:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LocalStackElement=a._tokenizeString=void 0;const l=s(350),d=s(44),u=s(792),p=s(878);class f{constructor(_,k){this.stack=_,this.stoppedEarly=k}}function h(w,_,k,y,S,C,I,A){const T=_.content.length;let L=!1,j=-1;if(I){const Q=function(pe,ie,te,Z,D,B){let H=D.beginRuleCapturedEOL?0:-1;const V=[];for(let R=D;R;R=R.pop()){const Y=R.getRule(pe);Y instanceof u.BeginWhileRule&&V.push({rule:Y,stack:R})}for(let R=V.pop();R;R=V.pop()){const{ruleScanner:Y,findOptions:E}=g(R.rule,pe,R.stack.endRule,te,Z===H),W=Y.findNextMatchSync(ie,Z,E);if(l.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(Y.toString())),!W){l.DebugFlags.InDebugMode&&console.log("  popping "+R.rule.debugName+" - "+R.rule.debugWhileRegExp),D=R.stack.pop();break}if(W.ruleId!==u.whileRuleId){D=R.stack.pop();break}W.captureIndices&&W.captureIndices.length&&(B.produce(R.stack,W.captureIndices[0].start),b(pe,ie,te,R.stack,B,R.rule.whileCaptures,W.captureIndices),B.produce(R.stack,W.captureIndices[0].end),H=W.captureIndices[0].end,W.captureIndices[0].end>Z&&(Z=W.captureIndices[0].end,te=!1))}return{stack:D,linePos:Z,anchorPosition:H,isFirstLine:te}}(w,_,k,y,S,C);S=Q.stack,y=Q.linePos,k=Q.isFirstLine,j=Q.anchorPosition}const $=Date.now();for(;!L;){if(A!==0&&Date.now()-$>A)return new f(S,!0);ee()}return new f(S,!1);function ee(){l.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${y}: |${_.content.substr(y).replace(/\n$/,"\\n")}|`));const Q=function(Z,D,B,H,V,R){const Y=function(q,fe,ce,U,ve,oe){const re=ve.getRule(q),{ruleScanner:ae,findOptions:me}=c(re,q,ve.endRule,ce,U===oe);let he=0;l.DebugFlags.InDebugMode&&(he=p.performanceNow());const se=ae.findNextMatchSync(fe,U,me);if(l.DebugFlags.InDebugMode){const ge=p.performanceNow()-he;ge>5&&console.warn(`Rule ${re.debugName} (${re.id}) matching took ${ge} against '${fe}'`),console.log(`  scanning for (linePos: ${U}, anchorPosition: ${oe})`),console.log(ae.toString()),se&&console.log(`matched rule id: ${se.ruleId} from ${se.captureIndices[0].start} to ${se.captureIndices[0].end}`)}return se?{captureIndices:se.captureIndices,matchedRuleId:se.ruleId}:null}(Z,D,B,H,V,R),E=Z.getInjections();if(E.length===0)return Y;const W=function(q,fe,ce,U,ve,oe,re){let ae,me=Number.MAX_VALUE,he=null,se=0;const ge=oe.contentNameScopesList.getScopeNames();for(let X=0,we=q.length;X<we;X++){const be=q[X];if(!be.matcher(ge))continue;const le=fe.getRule(be.ruleId),{ruleScanner:ye,findOptions:ue}=c(le,fe,null,U,ve===re),xe=ye.findNextMatchSync(ce,ve,ue);if(!xe)continue;l.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${be.debugSelector}`),console.log(ye.toString()));const Pe=xe.captureIndices[0].start;if(!(Pe>=me)&&(me=Pe,he=xe.captureIndices,ae=xe.ruleId,se=be.priority,me===ve))break}return he?{priorityMatch:se===-1,captureIndices:he,matchedRuleId:ae}:null}(E,Z,D,B,H,V,R);if(!W)return Y;if(!Y)return W;const F=Y.captureIndices[0].start,z=W.captureIndices[0].start;return z<F||W.priorityMatch&&z===F?W:Y}(w,_,k,y,S,j);if(!Q)return l.DebugFlags.InDebugMode&&console.log("  no more matches."),C.produce(S,T),void(L=!0);const pe=Q.captureIndices,ie=Q.matchedRuleId,te=!!(pe&&pe.length>0)&&pe[0].end>y;if(ie===u.endRuleId){const Z=S.getRule(w);l.DebugFlags.InDebugMode&&console.log("  popping "+Z.debugName+" - "+Z.debugEndRegExp),C.produce(S,pe[0].start),S=S.withContentNameScopesList(S.nameScopesList),b(w,_,k,S,C,Z.endCaptures,pe),C.produce(S,pe[0].end);const D=S;if(S=S.parent,j=D.getAnchorPos(),!te&&D.getEnterPos()===y)return l.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),S=D,C.produce(S,T),void(L=!0)}else{const Z=w.getRule(ie);C.produce(S,pe[0].start);const D=S,B=Z.getName(_.content,pe),H=S.contentNameScopesList.pushAttributed(B,w);if(S=S.push(ie,y,j,pe[0].end===T,null,H,H),Z instanceof u.BeginEndRule){const V=Z;l.DebugFlags.InDebugMode&&console.log("  pushing "+V.debugName+" - "+V.debugBeginRegExp),b(w,_,k,S,C,V.beginCaptures,pe),C.produce(S,pe[0].end),j=pe[0].end;const R=V.getContentName(_.content,pe),Y=H.pushAttributed(R,w);if(S=S.withContentNameScopesList(Y),V.endHasBackReferences&&(S=S.withEndRule(V.getEndWithResolvedBackReferences(_.content,pe))),!te&&D.hasSameRuleAs(S))return l.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),S=S.pop(),C.produce(S,T),void(L=!0)}else if(Z instanceof u.BeginWhileRule){const V=Z;l.DebugFlags.InDebugMode&&console.log("  pushing "+V.debugName),b(w,_,k,S,C,V.beginCaptures,pe),C.produce(S,pe[0].end),j=pe[0].end;const R=V.getContentName(_.content,pe),Y=H.pushAttributed(R,w);if(S=S.withContentNameScopesList(Y),V.whileHasBackReferences&&(S=S.withEndRule(V.getWhileWithResolvedBackReferences(_.content,pe))),!te&&D.hasSameRuleAs(S))return l.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),S=S.pop(),C.produce(S,T),void(L=!0)}else{const V=Z;if(l.DebugFlags.InDebugMode&&console.log("  matched "+V.debugName+" - "+V.debugMatchRegExp),b(w,_,k,S,C,V.captures,pe),C.produce(S,pe[0].end),S=S.pop(),!te)return l.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),S=S.safePop(),C.produce(S,T),void(L=!0)}}pe[0].end>y&&(y=pe[0].end,k=!1)}}function c(w,_,k,y,S){return l.UseOnigurumaFindOptions?{ruleScanner:w.compile(_,k),findOptions:m(y,S)}:{ruleScanner:w.compileAG(_,k,y,S),findOptions:0}}function g(w,_,k,y,S){return l.UseOnigurumaFindOptions?{ruleScanner:w.compileWhile(_,k),findOptions:m(y,S)}:{ruleScanner:w.compileWhileAG(_,k,y,S),findOptions:0}}function m(w,_){let k=0;return w||(k|=1),_||(k|=4),k}function b(w,_,k,y,S,C,I){if(C.length===0)return;const A=_.content,T=Math.min(C.length,I.length),L=[],j=I[0].end;for(let $=0;$<T;$++){const ee=C[$];if(ee===null)continue;const Q=I[$];if(Q.length===0)continue;if(Q.start>j)break;for(;L.length>0&&L[L.length-1].endPos<=Q.start;)S.produceFromScopes(L[L.length-1].scopes,L[L.length-1].endPos),L.pop();if(L.length>0?S.produceFromScopes(L[L.length-1].scopes,Q.start):S.produce(y,Q.start),ee.retokenizeCapturedWithRuleId){const ie=ee.getName(A,I),te=y.contentNameScopesList.pushAttributed(ie,w),Z=ee.getContentName(A,I),D=te.pushAttributed(Z,w),B=y.push(ee.retokenizeCapturedWithRuleId,Q.start,-1,!1,null,te,D),H=w.createOnigString(A.substring(0,Q.end));h(w,H,k&&Q.start===0,Q.start,B,S,!1,0),d.disposeOnigString(H);continue}const pe=ee.getName(A,I);if(pe!==null){const ie=(L.length>0?L[L.length-1].scopes:y.contentNameScopesList).pushAttributed(pe,w);L.push(new v(ie,Q.end))}}for(;L.length>0;)S.produceFromScopes(L[L.length-1].scopes,L[L.length-1].endPos),L.pop()}a._tokenizeString=h;class v{constructor(_,k){this.scopes=_,this.endPos=k}}a.LocalStackElement=v},974:(i,a)=>{function s(p,f){throw new Error("Near offset "+p.pos+": "+f+" ~~~"+p.source.substr(p.pos,50)+"~~~")}Object.defineProperty(a,"__esModule",{value:!0}),a.parseJSON=void 0,a.parseJSON=function(p,f,h){let c=new l(p),g=new d,m=0,b=null,v=[],w=[];function _(){v.push(m),w.push(b)}function k(){m=v.pop(),b=w.pop()}function y(S){s(c,S)}for(;u(c,g);){if(m===0){if(b!==null&&y("too many constructs in root"),g.type===3){b={},h&&(b.$vscodeTextmateLocation=g.toLocation(f)),_(),m=1;continue}if(g.type===2){b=[],_(),m=4;continue}y("unexpected token in root")}if(m===2){if(g.type===5){k();continue}if(g.type===7){m=3;continue}y("expected , or }")}if(m===1||m===3){if(m===1&&g.type===5){k();continue}if(g.type===1){let S=g.value;if(u(c,g)&&g.type===6||y("expected colon"),u(c,g)||y("expected value"),m=2,g.type===1){b[S]=g.value;continue}if(g.type===8){b[S]=null;continue}if(g.type===9){b[S]=!0;continue}if(g.type===10){b[S]=!1;continue}if(g.type===11){b[S]=parseFloat(g.value);continue}if(g.type===2){let C=[];b[S]=C,_(),m=4,b=C;continue}if(g.type===3){let C={};h&&(C.$vscodeTextmateLocation=g.toLocation(f)),b[S]=C,_(),m=1,b=C;continue}}y("unexpected token in dict")}if(m===5){if(g.type===4){k();continue}if(g.type===7){m=6;continue}y("expected , or ]")}if(m===4||m===6){if(m===4&&g.type===4){k();continue}if(m=5,g.type===1){b.push(g.value);continue}if(g.type===8){b.push(null);continue}if(g.type===9){b.push(!0);continue}if(g.type===10){b.push(!1);continue}if(g.type===11){b.push(parseFloat(g.value));continue}if(g.type===2){let S=[];b.push(S),_(),m=4,b=S;continue}if(g.type===3){let S={};h&&(S.$vscodeTextmateLocation=g.toLocation(f)),b.push(S),_(),m=1,b=S;continue}y("unexpected token in array")}y("unknown state")}return w.length!==0&&y("unclosed constructs"),b};class l{constructor(f){this.source=f,this.pos=0,this.len=f.length,this.line=1,this.char=0}}class d{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(f){return{filename:f,line:this.line,char:this.char}}}function u(p,f){f.value=null,f.type=0,f.offset=-1,f.len=-1,f.line=-1,f.char=-1;let h,c=p.source,g=p.pos,m=p.len,b=p.line,v=p.char;for(;;){if(g>=m)return!1;if(h=c.charCodeAt(g),h!==32&&h!==9&&h!==13){if(h!==10)break;g++,b++,v=0}else g++,v++}if(f.offset=g,f.line=b,f.char=v,h===34){for(f.type=1,g++,v++;;){if(g>=m)return!1;if(h=c.charCodeAt(g),g++,v++,h!==92){if(h===34)break}else g++,v++}f.value=c.substring(f.offset+1,g-1).replace(/\\u([0-9A-Fa-f]{4})/g,(w,_)=>String.fromCodePoint(parseInt(_,16))).replace(/\\(.)/g,(w,_)=>{switch(_){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:s(p,"invalid escape sequence")}throw new Error("unreachable")})}else if(h===91)f.type=2,g++,v++;else if(h===123)f.type=3,g++,v++;else if(h===93)f.type=4,g++,v++;else if(h===125)f.type=5,g++,v++;else if(h===58)f.type=6,g++,v++;else if(h===44)f.type=7,g++,v++;else if(h===110){if(f.type=8,g++,v++,h=c.charCodeAt(g),h!==117||(g++,v++,h=c.charCodeAt(g),h!==108)||(g++,v++,h=c.charCodeAt(g),h!==108))return!1;g++,v++}else if(h===116){if(f.type=9,g++,v++,h=c.charCodeAt(g),h!==114||(g++,v++,h=c.charCodeAt(g),h!==117)||(g++,v++,h=c.charCodeAt(g),h!==101))return!1;g++,v++}else if(h===102){if(f.type=10,g++,v++,h=c.charCodeAt(g),h!==97||(g++,v++,h=c.charCodeAt(g),h!==108)||(g++,v++,h=c.charCodeAt(g),h!==115)||(g++,v++,h=c.charCodeAt(g),h!==101))return!1;g++,v++}else for(f.type=11;;){if(g>=m)return!1;if(h=c.charCodeAt(g),!(h===46||h>=48&&h<=57||h===101||h===69||h===45||h===43))break;g++,v++}return f.len=g-f.offset,f.value===null&&(f.value=c.substr(f.offset,f.len)),p.pos=g,p.line=b,p.char=v,!0}},787:function(i,a,s){var l=this&&this.__createBinding||(Object.create?function(g,m,b,v){v===void 0&&(v=b),Object.defineProperty(g,v,{enumerable:!0,get:function(){return m[b]}})}:function(g,m,b,v){v===void 0&&(v=b),g[v]=m[b]}),d=this&&this.__exportStar||function(g,m){for(var b in g)b==="default"||Object.prototype.hasOwnProperty.call(m,b)||l(m,g,b)};Object.defineProperty(a,"__esModule",{value:!0}),a.parseRawGrammar=a.INITIAL=a.Registry=void 0;const u=s(391),p=s(50),f=s(652),h=s(583),c=s(965);d(s(44),a),a.Registry=class{constructor(g){this._options=g,this._syncRegistry=new f.SyncRegistry(h.Theme.createFromRawTheme(g.theme,g.colorMap),g.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(g,m){this._syncRegistry.setTheme(h.Theme.createFromRawTheme(g,m))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(g,m,b){return this.loadGrammarWithConfiguration(g,m,{embeddedLanguages:b})}loadGrammarWithConfiguration(g,m,b){return this._loadGrammar(g,m,b.embeddedLanguages,b.tokenTypes,new u.BalancedBracketSelectors(b.balancedBracketSelectors||[],b.unbalancedBracketSelectors||[]))}loadGrammar(g){return this._loadGrammar(g,0,null,null,null)}async _loadGrammar(g,m,b,v,w){const _=new c.ScopeDependencyProcessor(this._syncRegistry,g);for(;_.Q.length>0;)await Promise.all(_.Q.map(k=>this._loadSingleGrammar(k.scopeName))),_.processQueue();return this._grammarForScopeName(g,m,b,v,w)}async _loadSingleGrammar(g){return this._ensureGrammarCache.has(g)||this._ensureGrammarCache.set(g,this._doLoadSingleGrammar(g)),this._ensureGrammarCache.get(g)}async _doLoadSingleGrammar(g){const m=await this._options.loadGrammar(g);if(m){const b=typeof this._options.getInjections=="function"?this._options.getInjections(g):void 0;this._syncRegistry.addGrammar(m,b)}}async addGrammar(g,m=[],b=0,v=null){return this._syncRegistry.addGrammar(g,m),await this._grammarForScopeName(g.scopeName,b,v)}_grammarForScopeName(g,m=0,b=null,v=null,w=null){return this._syncRegistry.grammarForScopeName(g,m,b,v,w)}},a.INITIAL=u.StateStack.NULL,a.parseRawGrammar=p.parseRawGrammar},736:(i,a)=>{function s(l){return!!l&&!!l.match(/[\w\.:]+/)}Object.defineProperty(a,"__esModule",{value:!0}),a.createMatchers=void 0,a.createMatchers=function(l,d){const u=[],p=function(g){let m=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,b=m.exec(g);return{next:()=>{if(!b)return null;const v=b[0];return b=m.exec(g),v}}}(l);let f=p.next();for(;f!==null;){let g=0;if(f.length===2&&f.charAt(1)===":"){switch(f.charAt(0)){case"R":g=1;break;case"L":g=-1;break;default:console.log(`Unknown priority ${f} in scope selector`)}f=p.next()}let m=c();if(u.push({matcher:m,priority:g}),f!==",")break;f=p.next()}return u;function h(){if(f==="-"){f=p.next();const g=h();return m=>!!g&&!g(m)}if(f==="("){f=p.next();const g=function(){const m=[];let b=c();for(;b&&(m.push(b),f==="|"||f===",");){do f=p.next();while(f==="|"||f===",");b=c()}return v=>m.some(w=>w(v))}();return f===")"&&(f=p.next()),g}if(s(f)){const g=[];do g.push(f),f=p.next();while(s(f));return m=>d(g,m)}return null}function c(){const g=[];let m=h();for(;m;)g.push(m),m=h();return b=>g.every(v=>v(b))}}},44:(i,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.disposeOnigString=void 0,a.disposeOnigString=function(s){typeof s.dispose=="function"&&s.dispose()}},50:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.parseRawGrammar=void 0;const l=s(69),d=s(350),u=s(974);a.parseRawGrammar=function(p,f=null){return f!==null&&/\.json$/.test(f)?(h=p,c=f,d.DebugFlags.InDebugMode?u.parseJSON(h,c,!0):JSON.parse(h)):function(g,m){return d.DebugFlags.InDebugMode?l.parseWithLocation(g,m,"$vscodeTextmateLocation"):l.parsePLIST(g)}(p,f);var h,c}},69:(i,a)=>{function s(l,d,u){const p=l.length;let f=0,h=1,c=0;function g(W){if(u===null)f+=W;else for(;W>0;)l.charCodeAt(f)===10?(f++,h++,c=0):(f++,c++),W--}function m(W){u===null?f=W:g(W-f)}function b(){for(;f<p;){let W=l.charCodeAt(f);if(W!==32&&W!==9&&W!==13&&W!==10)break;g(1)}}function v(W){return l.substr(f,W.length)===W&&(g(W.length),!0)}function w(W){let F=l.indexOf(W,f);m(F!==-1?F+W.length:p)}function _(W){let F=l.indexOf(W,f);if(F!==-1){let z=l.substring(f,F);return m(F+W.length),z}{let z=l.substr(f);return m(p),z}}p>0&&l.charCodeAt(0)===65279&&(f=1);let k=0,y=null,S=[],C=[],I=null;function A(W,F){S.push(k),C.push(y),k=W,y=F}function T(){if(S.length===0)return L("illegal state stack");k=S.pop(),y=C.pop()}function L(W){throw new Error("Near offset "+f+": "+W+" ~~~"+l.substr(f,50)+"~~~")}const j=function(){if(I===null)return L("missing <key>");let W={};u!==null&&(W[u]={filename:d,line:h,char:c}),y[I]=W,I=null,A(1,W)},$=function(){if(I===null)return L("missing <key>");let W=[];y[I]=W,I=null,A(2,W)},ee=function(){let W={};u!==null&&(W[u]={filename:d,line:h,char:c}),y.push(W),A(1,W)},Q=function(){let W=[];y.push(W),A(2,W)};function pe(){if(k!==1)return L("unexpected </dict>");T()}function ie(){return k===1||k!==2?L("unexpected </array>"):void T()}function te(W){if(k===1){if(I===null)return L("missing <key>");y[I]=W,I=null}else k===2?y.push(W):y=W}function Z(W){if(isNaN(W))return L("cannot parse float");if(k===1){if(I===null)return L("missing <key>");y[I]=W,I=null}else k===2?y.push(W):y=W}function D(W){if(isNaN(W))return L("cannot parse integer");if(k===1){if(I===null)return L("missing <key>");y[I]=W,I=null}else k===2?y.push(W):y=W}function B(W){if(k===1){if(I===null)return L("missing <key>");y[I]=W,I=null}else k===2?y.push(W):y=W}function H(W){if(k===1){if(I===null)return L("missing <key>");y[I]=W,I=null}else k===2?y.push(W):y=W}function V(W){if(k===1){if(I===null)return L("missing <key>");y[I]=W,I=null}else k===2?y.push(W):y=W}function R(){let W=_(">"),F=!1;return W.charCodeAt(W.length-1)===47&&(F=!0,W=W.substring(0,W.length-1)),{name:W.trim(),isClosed:F}}function Y(W){if(W.isClosed)return"";let F=_("</");return w(">"),F.replace(/&#([0-9]+);/g,function(z,q){return String.fromCodePoint(parseInt(q,10))}).replace(/&#x([0-9a-f]+);/g,function(z,q){return String.fromCodePoint(parseInt(q,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(z){switch(z){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return z})}for(;f<p&&(b(),!(f>=p));){const W=l.charCodeAt(f);if(g(1),W!==60)return L("expected <");if(f>=p)return L("unexpected end of input");const F=l.charCodeAt(f);if(F===63){g(1),w("?>");continue}if(F===33){if(g(1),v("--")){w("-->");continue}w(">");continue}if(F===47){if(g(1),b(),v("plist")){w(">");continue}if(v("dict")){w(">"),pe();continue}if(v("array")){w(">"),ie();continue}return L("unexpected closed tag")}let z=R();switch(z.name){case"dict":k===1?j():k===2?ee():(y={},u!==null&&(y[u]={filename:d,line:h,char:c}),A(1,y)),z.isClosed&&pe();continue;case"array":k===1?$():k===2?Q():(y=[],A(2,y)),z.isClosed&&ie();continue;case"key":E=Y(z),k!==1?L("unexpected <key>"):I!==null?L("too many <key>"):I=E;continue;case"string":te(Y(z));continue;case"real":Z(parseFloat(Y(z)));continue;case"integer":D(parseInt(Y(z),10));continue;case"date":B(new Date(Y(z)));continue;case"data":H(Y(z));continue;case"true":Y(z),V(!0);continue;case"false":Y(z),V(!1);continue}if(!/^plist/.test(z.name))return L("unexpected opened tag "+z.name)}var E;return y}Object.defineProperty(a,"__esModule",{value:!0}),a.parsePLIST=a.parseWithLocation=void 0,a.parseWithLocation=function(l,d,u){return s(l,d,u)},a.parsePLIST=function(l){return s(l,null,null)}},652:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SyncRegistry=void 0;const l=s(391);a.SyncRegistry=class{constructor(d,u){this._onigLibPromise=u,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=d}dispose(){for(const d of this._grammars.values())d.dispose()}setTheme(d){this._theme=d}getColorMap(){return this._theme.getColorMap()}addGrammar(d,u){this._rawGrammars.set(d.scopeName,d),u&&this._injectionGrammars.set(d.scopeName,u)}lookup(d){return this._rawGrammars.get(d)}injections(d){return this._injectionGrammars.get(d)}getDefaults(){return this._theme.getDefaults()}themeMatch(d){return this._theme.match(d)}async grammarForScopeName(d,u,p,f,h){if(!this._grammars.has(d)){let c=this._rawGrammars.get(d);if(!c)return null;this._grammars.set(d,l.createGrammar(d,c,u,p,f,h,this,await this._onigLibPromise))}return this._grammars.get(d)}}},792:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CompiledRule=a.RegExpSourceList=a.RegExpSource=a.RuleFactory=a.BeginWhileRule=a.BeginEndRule=a.IncludeOnlyRule=a.MatchRule=a.CaptureRule=a.Rule=a.ruleIdToNumber=a.ruleIdFromNumber=a.whileRuleId=a.endRuleId=void 0;const l=s(878),d=s(965),u=/\\(\d+)/,p=/\\(\d+)/g;a.endRuleId=-1,a.whileRuleId=-2,a.ruleIdFromNumber=function(y){return y},a.ruleIdToNumber=function(y){return y};class f{constructor(S,C,I,A){this.$location=S,this.id=C,this._name=I||null,this._nameIsCapturing=l.RegexSource.hasCaptures(this._name),this._contentName=A||null,this._contentNameIsCapturing=l.RegexSource.hasCaptures(this._contentName)}get debugName(){const S=this.$location?`${l.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${S}`}getName(S,C){return this._nameIsCapturing&&this._name!==null&&S!==null&&C!==null?l.RegexSource.replaceCaptures(this._name,S,C):this._name}getContentName(S,C){return this._contentNameIsCapturing&&this._contentName!==null?l.RegexSource.replaceCaptures(this._contentName,S,C):this._contentName}}a.Rule=f;class h extends f{constructor(S,C,I,A,T){super(S,C,I,A),this.retokenizeCapturedWithRuleId=T}dispose(){}collectPatterns(S,C){throw new Error("Not supported!")}compile(S,C){throw new Error("Not supported!")}compileAG(S,C,I,A){throw new Error("Not supported!")}}a.CaptureRule=h;class c extends f{constructor(S,C,I,A,T){super(S,C,I,null),this._match=new w(A,this.id),this.captures=T,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(S,C){C.push(this._match)}compile(S,C){return this._getCachedCompiledPatterns(S).compile(S)}compileAG(S,C,I,A){return this._getCachedCompiledPatterns(S).compileAG(S,I,A)}_getCachedCompiledPatterns(S){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _,this.collectPatterns(S,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}a.MatchRule=c;class g extends f{constructor(S,C,I,A,T){super(S,C,I,A),this.patterns=T.patterns,this.hasMissingPatterns=T.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(S,C){for(const I of this.patterns)S.getRule(I).collectPatterns(S,C)}compile(S,C){return this._getCachedCompiledPatterns(S).compile(S)}compileAG(S,C,I,A){return this._getCachedCompiledPatterns(S).compileAG(S,I,A)}_getCachedCompiledPatterns(S){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new _,this.collectPatterns(S,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}a.IncludeOnlyRule=g;class m extends f{constructor(S,C,I,A,T,L,j,$,ee,Q){super(S,C,I,A),this._begin=new w(T,this.id),this.beginCaptures=L,this._end=new w(j||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=$,this.applyEndPatternLast=ee||!1,this.patterns=Q.patterns,this.hasMissingPatterns=Q.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(S,C){return this._end.resolveBackReferences(S,C)}collectPatterns(S,C){C.push(this._begin)}compile(S,C){return this._getCachedCompiledPatterns(S,C).compile(S)}compileAG(S,C,I,A){return this._getCachedCompiledPatterns(S,C).compileAG(S,I,A)}_getCachedCompiledPatterns(S,C){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _;for(const I of this.patterns)S.getRule(I).collectPatterns(S,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,C):this._cachedCompiledPatterns.setSource(0,C)),this._cachedCompiledPatterns}}a.BeginEndRule=m;class b extends f{constructor(S,C,I,A,T,L,j,$,ee){super(S,C,I,A),this._begin=new w(T,this.id),this.beginCaptures=L,this.whileCaptures=$,this._while=new w(j,a.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=ee.patterns,this.hasMissingPatterns=ee.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(S,C){return this._while.resolveBackReferences(S,C)}collectPatterns(S,C){C.push(this._begin)}compile(S,C){return this._getCachedCompiledPatterns(S).compile(S)}compileAG(S,C,I,A){return this._getCachedCompiledPatterns(S).compileAG(S,I,A)}_getCachedCompiledPatterns(S){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new _;for(const C of this.patterns)S.getRule(C).collectPatterns(S,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(S,C){return this._getCachedCompiledWhilePatterns(S,C).compile(S)}compileWhileAG(S,C,I,A){return this._getCachedCompiledWhilePatterns(S,C).compileAG(S,I,A)}_getCachedCompiledWhilePatterns(S,C){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new _,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,C||""),this._cachedCompiledWhilePatterns}}a.BeginWhileRule=b;class v{static createCaptureRule(S,C,I,A,T){return S.registerRule(L=>new h(C,L,I,A,T))}static getCompiledRuleId(S,C,I){return S.id||C.registerRule(A=>{if(S.id=A,S.match)return new c(S.$vscodeTextmateLocation,S.id,S.name,S.match,v._compileCaptures(S.captures,C,I));if(S.begin===void 0){S.repository&&(I=l.mergeObjects({},I,S.repository));let T=S.patterns;return T===void 0&&S.include&&(T=[{include:S.include}]),new g(S.$vscodeTextmateLocation,S.id,S.name,S.contentName,v._compilePatterns(T,C,I))}return S.while?new b(S.$vscodeTextmateLocation,S.id,S.name,S.contentName,S.begin,v._compileCaptures(S.beginCaptures||S.captures,C,I),S.while,v._compileCaptures(S.whileCaptures||S.captures,C,I),v._compilePatterns(S.patterns,C,I)):new m(S.$vscodeTextmateLocation,S.id,S.name,S.contentName,S.begin,v._compileCaptures(S.beginCaptures||S.captures,C,I),S.end,v._compileCaptures(S.endCaptures||S.captures,C,I),S.applyEndPatternLast,v._compilePatterns(S.patterns,C,I))}),S.id}static _compileCaptures(S,C,I){let A=[];if(S){let T=0;for(const L in S){if(L==="$vscodeTextmateLocation")continue;const j=parseInt(L,10);j>T&&(T=j)}for(let L=0;L<=T;L++)A[L]=null;for(const L in S){if(L==="$vscodeTextmateLocation")continue;const j=parseInt(L,10);let $=0;S[L].patterns&&($=v.getCompiledRuleId(S[L],C,I)),A[j]=v.createCaptureRule(C,S[L].$vscodeTextmateLocation,S[L].name,S[L].contentName,$)}}return A}static _compilePatterns(S,C,I){let A=[];if(S)for(let T=0,L=S.length;T<L;T++){const j=S[T];let $=-1;if(j.include){const ee=d.parseInclude(j.include);switch(ee.kind){case 0:case 1:$=v.getCompiledRuleId(I[j.include],C,I);break;case 2:let Q=I[ee.ruleName];Q&&($=v.getCompiledRuleId(Q,C,I));break;case 3:case 4:const pe=ee.scopeName,ie=ee.kind===4?ee.ruleName:null,te=C.getExternalGrammar(pe,I);if(te)if(ie){let Z=te.repository[ie];Z&&($=v.getCompiledRuleId(Z,C,te.repository))}else $=v.getCompiledRuleId(te.repository.$self,C,te.repository)}}else $=v.getCompiledRuleId(j,C,I);if($!==-1){const ee=C.getRule($);let Q=!1;if((ee instanceof g||ee instanceof m||ee instanceof b)&&ee.hasMissingPatterns&&ee.patterns.length===0&&(Q=!0),Q)continue;A.push($)}}return{patterns:A,hasMissingPatterns:(S?S.length:0)!==A.length}}}a.RuleFactory=v;class w{constructor(S,C){if(S){const I=S.length;let A=0,T=[],L=!1;for(let j=0;j<I;j++)if(S.charAt(j)==="\\"&&j+1<I){const $=S.charAt(j+1);$==="z"?(T.push(S.substring(A,j)),T.push("$(?!\\n)(?<!\\n)"),A=j+2):$!=="A"&&$!=="G"||(L=!0),j++}this.hasAnchor=L,A===0?this.source=S:(T.push(S.substring(A,I)),this.source=T.join(""))}else this.hasAnchor=!1,this.source=S;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=C,this.hasBackReferences=u.test(this.source)}clone(){return new w(this.source,this.ruleId)}setSource(S){this.source!==S&&(this.source=S,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(S,C){let I=C.map(A=>S.substring(A.start,A.end));return p.lastIndex=0,this.source.replace(p,(A,T)=>l.escapeRegExpCharacters(I[parseInt(T,10)]||""))}_buildAnchorCache(){let S,C,I,A,T=[],L=[],j=[],$=[];for(S=0,C=this.source.length;S<C;S++)I=this.source.charAt(S),T[S]=I,L[S]=I,j[S]=I,$[S]=I,I==="\\"&&S+1<C&&(A=this.source.charAt(S+1),A==="A"?(T[S+1]="",L[S+1]="",j[S+1]="A",$[S+1]="A"):A==="G"?(T[S+1]="",L[S+1]="G",j[S+1]="",$[S+1]="G"):(T[S+1]=A,L[S+1]=A,j[S+1]=A,$[S+1]=A),S++);return{A0_G0:T.join(""),A0_G1:L.join(""),A1_G0:j.join(""),A1_G1:$.join("")}}resolveAnchors(S,C){return this.hasAnchor&&this._anchorCache?S?C?this._anchorCache.A1_G1:this._anchorCache.A1_G0:C?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}a.RegExpSource=w;class _{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(S){this._items.push(S),this._hasAnchors=this._hasAnchors||S.hasAnchor}unshift(S){this._items.unshift(S),this._hasAnchors=this._hasAnchors||S.hasAnchor}length(){return this._items.length}setSource(S,C){this._items[S].source!==C&&(this._disposeCaches(),this._items[S].setSource(C))}compile(S){if(!this._cached){let C=this._items.map(I=>I.source);this._cached=new k(S,C,this._items.map(I=>I.ruleId))}return this._cached}compileAG(S,C,I){return this._hasAnchors?C?I?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(S,C,I)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(S,C,I)),this._anchorCache.A1_G0):I?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(S,C,I)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(S,C,I)),this._anchorCache.A0_G0):this.compile(S)}_resolveAnchors(S,C,I){let A=this._items.map(T=>T.resolveAnchors(C,I));return new k(S,A,this._items.map(T=>T.ruleId))}}a.RegExpSourceList=_;class k{constructor(S,C,I){this.regExps=C,this.rules=I,this.scanner=S.createOnigScanner(C)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const S=[];for(let C=0,I=this.rules.length;C<I;C++)S.push("   - "+this.rules[C]+": "+this.regExps[C]);return S.join(`
`)}findNextMatchSync(S,C,I){const A=this.scanner.findNextMatchSync(S,C,I);return A?{ruleId:this.rules[A.index],captureIndices:A.captureIndices}:null}}a.CompiledRule=k},583:(i,a,s)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeTrieElement=a.ThemeTrieElementRule=a.ColorMap=a.fontStyleToString=a.ParsedThemeRule=a.parseTheme=a.StyleAttributes=a.ScopeStack=a.Theme=void 0;const l=s(878);class d{constructor(w,_,k){this._colorMap=w,this._defaults=_,this._root=k,this._cachedMatchRoot=new l.CachedFn(y=>this._root.match(y))}static createFromRawTheme(w,_){return this.createFromParsedTheme(h(w),_)}static createFromParsedTheme(w,_){return function(k,y){k.sort((j,$)=>{let ee=l.strcmp(j.scope,$.scope);return ee!==0?ee:(ee=l.strArrCmp(j.parentScopes,$.parentScopes),ee!==0?ee:j.index-$.index)});let S=0,C="#000000",I="#ffffff";for(;k.length>=1&&k[0].scope==="";){let j=k.shift();j.fontStyle!==-1&&(S=j.fontStyle),j.foreground!==null&&(C=j.foreground),j.background!==null&&(I=j.background)}let A=new g(y),T=new f(S,A.getId(C),A.getId(I)),L=new b(new m(0,null,-1,0,0),[]);for(let j=0,$=k.length;j<$;j++){let ee=k[j];L.insert(0,ee.scope,ee.parentScopes,ee.fontStyle,A.getId(ee.foreground),A.getId(ee.background))}return new d(A,T,L)}(w,_)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(w){if(w===null)return this._defaults;const _=w.scopeName,k=this._cachedMatchRoot.get(_).find(y=>function(S,C){if(C===null)return!0;let I=0,A=C[I];for(;S;){if(p(S.scopeName,A)){if(I++,I===C.length)return!0;A=C[I]}S=S.parent}return!1}(w.parent,y.parentScopes));return k?new f(k.fontStyle,k.foreground,k.background):null}}a.Theme=d;class u{constructor(w,_){this.parent=w,this.scopeName=_}static from(...w){let _=null;for(let k=0;k<w.length;k++)_=new u(_,w[k]);return _}push(w){return new u(this,w)}getSegments(){let w=this;const _=[];for(;w;)_.push(w.scopeName),w=w.parent;return _.reverse(),_}toString(){return this.getSegments().join(" ")}}function p(v,w){return w===v||v.startsWith(w)&&v[w.length]==="."}a.ScopeStack=u;class f{constructor(w,_,k){this.fontStyle=w,this.foregroundId=_,this.backgroundId=k}}function h(v){if(!v)return[];if(!v.settings||!Array.isArray(v.settings))return[];let w=v.settings,_=[],k=0;for(let y=0,S=w.length;y<S;y++){let C,I=w[y];if(!I.settings)continue;if(typeof I.scope=="string"){let j=I.scope;j=j.replace(/^[,]+/,""),j=j.replace(/[,]+$/,""),C=j.split(",")}else C=Array.isArray(I.scope)?I.scope:[""];let A=-1;if(typeof I.settings.fontStyle=="string"){A=0;let j=I.settings.fontStyle.split(" ");for(let $=0,ee=j.length;$<ee;$++)switch(j[$]){case"italic":A|=1;break;case"bold":A|=2;break;case"underline":A|=4;break;case"strikethrough":A|=8}}let T=null;typeof I.settings.foreground=="string"&&l.isValidHexColor(I.settings.foreground)&&(T=I.settings.foreground);let L=null;typeof I.settings.background=="string"&&l.isValidHexColor(I.settings.background)&&(L=I.settings.background);for(let j=0,$=C.length;j<$;j++){let ee=C[j].trim().split(" "),Q=ee[ee.length-1],pe=null;ee.length>1&&(pe=ee.slice(0,ee.length-1),pe.reverse()),_[k++]=new c(Q,pe,y,A,T,L)}}return _}a.StyleAttributes=f,a.parseTheme=h;class c{constructor(w,_,k,y,S,C){this.scope=w,this.parentScopes=_,this.index=k,this.fontStyle=y,this.foreground=S,this.background=C}}a.ParsedThemeRule=c,a.fontStyleToString=function(v){if(v===-1)return"not set";let w="";return 1&v&&(w+="italic "),2&v&&(w+="bold "),4&v&&(w+="underline "),8&v&&(w+="strikethrough "),w===""&&(w="none"),w.trim()};class g{constructor(w){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(w)){this._isFrozen=!0;for(let _=0,k=w.length;_<k;_++)this._color2id[w[_]]=_,this._id2color[_]=w[_]}else this._isFrozen=!1}getId(w){if(w===null)return 0;w=w.toUpperCase();let _=this._color2id[w];if(_)return _;if(this._isFrozen)throw new Error(`Missing color in color map - ${w}`);return _=++this._lastColorId,this._color2id[w]=_,this._id2color[_]=w,_}getColorMap(){return this._id2color.slice(0)}}a.ColorMap=g;class m{constructor(w,_,k,y,S){this.scopeDepth=w,this.parentScopes=_,this.fontStyle=k,this.foreground=y,this.background=S}clone(){return new m(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(w){let _=[];for(let k=0,y=w.length;k<y;k++)_[k]=w[k].clone();return _}acceptOverwrite(w,_,k,y){this.scopeDepth>w?console.log("how did this happen?"):this.scopeDepth=w,_!==-1&&(this.fontStyle=_),k!==0&&(this.foreground=k),y!==0&&(this.background=y)}}a.ThemeTrieElementRule=m;class b{constructor(w,_=[],k={}){this._mainRule=w,this._children=k,this._rulesWithParentScopes=_}static _sortBySpecificity(w){return w.length===1||w.sort(this._cmpBySpecificity),w}static _cmpBySpecificity(w,_){if(w.scopeDepth===_.scopeDepth){const k=w.parentScopes,y=_.parentScopes;let S=k===null?0:k.length,C=y===null?0:y.length;if(S===C)for(let I=0;I<S;I++){const A=k[I].length,T=y[I].length;if(A!==T)return T-A}return C-S}return _.scopeDepth-w.scopeDepth}match(w){if(w==="")return b._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let _,k,y=w.indexOf(".");return y===-1?(_=w,k=""):(_=w.substring(0,y),k=w.substring(y+1)),this._children.hasOwnProperty(_)?this._children[_].match(k):b._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(w,_,k,y,S,C){if(_==="")return void this._doInsertHere(w,k,y,S,C);let I,A,T,L=_.indexOf(".");L===-1?(I=_,A=""):(I=_.substring(0,L),A=_.substring(L+1)),this._children.hasOwnProperty(I)?T=this._children[I]:(T=new b(this._mainRule.clone(),m.cloneArr(this._rulesWithParentScopes)),this._children[I]=T),T.insert(w+1,A,k,y,S,C)}_doInsertHere(w,_,k,y,S){if(_!==null){for(let C=0,I=this._rulesWithParentScopes.length;C<I;C++){let A=this._rulesWithParentScopes[C];if(l.strArrCmp(A.parentScopes,_)===0)return void A.acceptOverwrite(w,k,y,S)}k===-1&&(k=this._mainRule.fontStyle),y===0&&(y=this._mainRule.foreground),S===0&&(S=this._mainRule.background),this._rulesWithParentScopes.push(new m(w,_,k,y,S))}else this._mainRule.acceptOverwrite(w,k,y,S)}}a.ThemeTrieElement=b},878:(i,a)=>{function s(u){return Array.isArray(u)?function(p){let f=[];for(let h=0,c=p.length;h<c;h++)f[h]=s(p[h]);return f}(u):typeof u=="object"?function(p){let f={};for(let h in p)f[h]=s(p[h]);return f}(u):u}Object.defineProperty(a,"__esModule",{value:!0}),a.performanceNow=a.CachedFn=a.escapeRegExpCharacters=a.isValidHexColor=a.strArrCmp=a.strcmp=a.RegexSource=a.basename=a.mergeObjects=a.clone=void 0,a.clone=function(u){return s(u)},a.mergeObjects=function(u,...p){return p.forEach(f=>{for(let h in f)u[h]=f[h]}),u},a.basename=function u(p){const f=~p.lastIndexOf("/")||~p.lastIndexOf("\\");return f===0?p:~f==p.length-1?u(p.substring(0,p.length-1)):p.substr(1+~f)};let l=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function d(u,p){return u<p?-1:u>p?1:0}a.RegexSource=class{static hasCaptures(u){return u!==null&&(l.lastIndex=0,l.test(u))}static replaceCaptures(u,p,f){return u.replace(l,(h,c,g,m)=>{let b=f[parseInt(c||g,10)];if(!b)return h;{let v=p.substring(b.start,b.end);for(;v[0]===".";)v=v.substring(1);switch(m){case"downcase":return v.toLowerCase();case"upcase":return v.toUpperCase();default:return v}}})}},a.strcmp=d,a.strArrCmp=function(u,p){if(u===null&&p===null)return 0;if(!u)return-1;if(!p)return 1;let f=u.length,h=p.length;if(f===h){for(let c=0;c<f;c++){let g=d(u[c],p[c]);if(g!==0)return g}return 0}return f-h},a.isValidHexColor=function(u){return!!(/^#[0-9a-f]{6}$/i.test(u)||/^#[0-9a-f]{8}$/i.test(u)||/^#[0-9a-f]{3}$/i.test(u)||/^#[0-9a-f]{4}$/i.test(u))},a.escapeRegExpCharacters=function(u){return u.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},a.CachedFn=class{constructor(u){this.fn=u,this.cache=new Map}get(u){if(this.cache.has(u))return this.cache.get(u);const p=this.fn(u);return this.cache.set(u,p),p}},a.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},o={};return function i(a){var s=o[a];if(s!==void 0)return s.exports;var l=o[a]={exports:{}};return r[a].call(l.exports,l,l.exports,i),l.exports}(787)})()})})(DN);var NN=DN.exports;const Gf=[{id:"abap",scopeName:"source.abap",path:"abap.tmLanguage.json",displayName:"ABAP",samplePath:"abap.sample"},{id:"actionscript-3",scopeName:"source.actionscript.3",path:"actionscript-3.tmLanguage.json",displayName:"ActionScript",samplePath:"actionscript-3.sample"},{id:"ada",scopeName:"source.ada",path:"ada.tmLanguage.json",displayName:"Ada",samplePath:"ada.sample"},{id:"apache",scopeName:"source.apacheconf",path:"apache.tmLanguage.json",displayName:"Apache Conf",samplePath:"apache.sample"},{id:"apex",scopeName:"source.apex",path:"apex.tmLanguage.json",displayName:"Apex",samplePath:"apex.sample"},{id:"apl",scopeName:"source.apl",path:"apl.tmLanguage.json",displayName:"APL",samplePath:"apl.sample",embeddedLangs:["html","xml","css","javascript","json"]},{id:"applescript",scopeName:"source.applescript",path:"applescript.tmLanguage.json",displayName:"AppleScript",samplePath:"applescript.sample"},{id:"ara",scopeName:"source.ara",path:"ara.tmLanguage.json",displayName:"Ara",samplePath:"ara.sample"},{id:"asm",scopeName:"source.asm.x86_64",path:"asm.tmLanguage.json",displayName:"Assembly",samplePath:"asm.sample"},{id:"astro",scopeName:"source.astro",path:"astro.tmLanguage.json",displayName:"Astro",samplePath:"astro.sample",embeddedLangs:["json","javascript","typescript","stylus","sass","css","scss","less","postcss","tsx"]},{id:"awk",scopeName:"source.awk",path:"awk.tmLanguage.json",displayName:"AWK",samplePath:"awk.sample"},{id:"ballerina",scopeName:"source.ballerina",path:"ballerina.tmLanguage.json",displayName:"Ballerina",samplePath:"ballerina.sample"},{id:"bat",scopeName:"source.batchfile",path:"bat.tmLanguage.json",displayName:"Batch",samplePath:"bat.sample",aliases:["batch"]},{id:"beancount",scopeName:"text.beancount",path:"beancount.tmLanguage.json",displayName:"Beancount",samplePath:"beancount.sample"},{id:"berry",scopeName:"source.berry",path:"berry.tmLanguage.json",displayName:"Berry",samplePath:"berry.sample",aliases:["be"]},{id:"bibtex",scopeName:"text.bibtex",path:"bibtex.tmLanguage.json",displayName:"BibTeX",samplePath:"bibtex.sample"},{id:"bicep",scopeName:"source.bicep",path:"bicep.tmLanguage.json",displayName:"Bicep",samplePath:"bicep.sample"},{id:"blade",scopeName:"text.html.php.blade",path:"blade.tmLanguage.json",displayName:"Blade",samplePath:"blade.sample",embeddedLangs:["html","xml","sql","javascript","json","css"]},{id:"c",scopeName:"source.c",path:"c.tmLanguage.json",displayName:"C",samplePath:"c.sample"},{id:"cadence",scopeName:"source.cadence",path:"cadence.tmLanguage.json",displayName:"Cadence",samplePath:"cadence.sample",aliases:["cdc"]},{id:"clarity",scopeName:"source.clar",path:"clarity.tmLanguage.json",displayName:"Clarity",samplePath:"clarity.sample"},{id:"clojure",scopeName:"source.clojure",path:"clojure.tmLanguage.json",displayName:"Clojure",samplePath:"clojure.sample",aliases:["clj"]},{id:"cmake",scopeName:"source.cmake",path:"cmake.tmLanguage.json",displayName:"CMake",samplePath:"cmake.sample"},{id:"cobol",scopeName:"source.cobol",path:"cobol.tmLanguage.json",displayName:"COBOL",samplePath:"cobol.sample",embeddedLangs:["sql","html","java"]},{id:"codeql",scopeName:"source.ql",path:"codeql.tmLanguage.json",displayName:"CodeQL",samplePath:"codeql.sample",aliases:["ql"]},{id:"coffee",scopeName:"source.coffee",path:"coffee.tmLanguage.json",displayName:"CoffeeScript",samplePath:"coffee.sample",embeddedLangs:["javascript"]},{id:"cpp",scopeName:"source.cpp",path:"cpp.tmLanguage.json",displayName:"C++",samplePath:"cpp.sample",aliases:["c++"],embeddedLangs:["glsl","sql"]},{id:"crystal",scopeName:"source.crystal",path:"crystal.tmLanguage.json",displayName:"Crystal",samplePath:"crystal.sample",embeddedLangs:["html","sql","css","c","javascript","shellscript"]},{id:"csharp",scopeName:"source.cs",path:"csharp.tmLanguage.json",displayName:"C#",samplePath:"csharp.sample",aliases:["c#","cs"]},{id:"css",scopeName:"source.css",path:"css.tmLanguage.json",displayName:"CSS",samplePath:"css.sample"},{id:"csv",scopeName:"text.csv",path:"csv.tmLanguage.json",displayName:"csv syntax",samplePath:"csv.sample"},{id:"cue",scopeName:"source.cue",path:"cue.tmLanguage.json",displayName:"CUE",samplePath:"cue.sample"},{id:"cypher",scopeName:"source.cypher",path:"cypher.tmLanguage.json",displayName:"Cypher",samplePath:"cypher.sample",aliases:["cql"]},{id:"d",scopeName:"source.d",path:"d.tmLanguage.json",displayName:"D",samplePath:"d.sample"},{id:"dart",scopeName:"source.dart",path:"dart.tmLanguage.json",displayName:"Dart",samplePath:"dart.sample"},{id:"dax",scopeName:"source.dax",path:"dax.tmLanguage.json",displayName:"DAX",samplePath:"dax.sample"},{id:"diff",scopeName:"source.diff",path:"diff.tmLanguage.json",displayName:"Diff",samplePath:"diff.sample"},{id:"docker",scopeName:"source.dockerfile",path:"docker.tmLanguage.json",displayName:"Docker",samplePath:"docker.sample",aliases:["dockerfile"]},{id:"dream-maker",scopeName:"source.dm",path:"dream-maker.tmLanguage.json",displayName:"Dream Maker",samplePath:"dream-maker.sample"},{id:"elixir",scopeName:"source.elixir",path:"elixir.tmLanguage.json",displayName:"Elixir",samplePath:"elixir.sample",embeddedLangs:["html"]},{id:"elm",scopeName:"source.elm",path:"elm.tmLanguage.json",displayName:"Elm",samplePath:"elm.sample",embeddedLangs:["glsl"]},{id:"erb",scopeName:"text.html.erb",path:"erb.tmLanguage.json",displayName:"ERB",samplePath:"erb.sample",embeddedLangs:["html","ruby"]},{id:"erlang",scopeName:"source.erlang",path:"erlang.tmLanguage.json",displayName:"Erlang",samplePath:"erlang.sample",aliases:["erl"]},{id:"fish",scopeName:"source.fish",path:"fish.tmLanguage.json",displayName:"Fish",samplePath:"fish.sample"},{id:"fsharp",scopeName:"source.fsharp",path:"fsharp.tmLanguage.json",displayName:"F#",samplePath:"fsharp.sample",aliases:["f#","fs"],embeddedLangs:["markdown"]},{id:"gdresource",scopeName:"source.gdresource",path:"gdresource.tmLanguage.json",displayName:"GDResource",samplePath:"gdresource.sample",embeddedLangs:["gdshader","gdscript"]},{id:"gdscript",scopeName:"source.gdscript",path:"gdscript.tmLanguage.json",displayName:"GDScript",samplePath:"gdscript.sample"},{id:"gdshader",scopeName:"source.gdshader",path:"gdshader.tmLanguage.json",displayName:"GDShader",samplePath:"gdshader.sample"},{id:"gherkin",scopeName:"text.gherkin.feature",path:"gherkin.tmLanguage.json",displayName:"Gherkin",samplePath:"gherkin.sample"},{id:"git-commit",scopeName:"text.git-commit",path:"git-commit.tmLanguage.json",displayName:"Git Commit Message",embeddedLangs:["diff"]},{id:"git-rebase",scopeName:"text.git-rebase",path:"git-rebase.tmLanguage.json",displayName:"Git Rebase Message",embeddedLangs:["shellscript"]},{id:"glimmer-js",scopeName:"source.gjs",path:"glimmer-js.tmLanguage.json",displayName:"Glimmer JS",aliases:["gjs"],embeddedLangs:["javascript","handlebars"]},{id:"glimmer-ts",scopeName:"source.gts",path:"glimmer-ts.tmLanguage.json",displayName:"Glimmer TS",aliases:["gts"],embeddedLangs:["typescript","handlebars"]},{id:"glsl",scopeName:"source.glsl",path:"glsl.tmLanguage.json",displayName:"GLSL",samplePath:"glsl.sample",embeddedLangs:["c"]},{id:"gnuplot",scopeName:"source.gnuplot",path:"gnuplot.tmLanguage.json",displayName:"Gnuplot",samplePath:"gnuplot.sample"},{id:"go",scopeName:"source.go",path:"go.tmLanguage.json",displayName:"Go",samplePath:"go.sample"},{id:"graphql",scopeName:"source.graphql",path:"graphql.tmLanguage.json",displayName:"GraphQL",samplePath:"graphql.sample",aliases:["gql"],embeddedLangs:["javascript","typescript","jsx","tsx"]},{id:"groovy",scopeName:"source.groovy",path:"groovy.tmLanguage.json",displayName:"Groovy",samplePath:"groovy.sample"},{id:"hack",scopeName:"source.hack",path:"hack.tmLanguage.json",displayName:"Hack",samplePath:"hack.sample",embeddedLangs:["html","sql"]},{id:"haml",scopeName:"text.haml",path:"haml.tmLanguage.json",displayName:"Ruby Haml",samplePath:"haml.sample",embeddedLangs:["ruby","javascript","sass","coffee","markdown","css"]},{id:"handlebars",scopeName:"text.html.handlebars",path:"handlebars.tmLanguage.json",displayName:"Handlebars",samplePath:"handlebars.sample",aliases:["hbs"],embeddedLangs:["html","css","javascript","yaml"]},{id:"haskell",scopeName:"source.haskell",path:"haskell.tmLanguage.json",displayName:"Haskell",samplePath:"haskell.sample",aliases:["hs"]},{id:"hcl",scopeName:"source.hcl",path:"hcl.tmLanguage.json",displayName:"HashiCorp HCL",samplePath:"hcl.sample"},{id:"hjson",scopeName:"source.hjson",path:"hjson.tmLanguage.json",displayName:"Hjson",samplePath:"hjson.sample"},{id:"hlsl",scopeName:"source.hlsl",path:"hlsl.tmLanguage.json",displayName:"HLSL",samplePath:"hlsl.sample"},{id:"html",scopeName:"text.html.basic",path:"html.tmLanguage.json",displayName:"HTML",samplePath:"html.sample",embeddedLangs:["javascript","css"]},{id:"http",scopeName:"source.http",path:"http.tmLanguage.json",displayName:"HTTP",samplePath:"http.sample",embeddedLangs:["shellscript","json","xml","graphql"]},{id:"imba",scopeName:"source.imba",path:"imba.tmLanguage.json",displayName:"Imba",samplePath:"imba.sample"},{id:"ini",scopeName:"source.ini",path:"ini.tmLanguage.json",displayName:"INI",samplePath:"ini.sample",aliases:["properties"]},{id:"java",scopeName:"source.java",path:"java.tmLanguage.json",displayName:"Java",samplePath:"java.sample"},{id:"javascript",scopeName:"source.js",path:"javascript.tmLanguage.json",displayName:"JavaScript",samplePath:"javascript.sample",aliases:["js"]},{id:"jinja-html",scopeName:"text.html.jinja",path:"jinja-html.tmLanguage.json",displayName:"Jinja",samplePath:"jinja-html.sample",embeddedLangs:["html"]},{id:"jison",scopeName:"source.jison",path:"jison.tmLanguage.json",displayName:"Jison",samplePath:"jison.sample",embeddedLangs:["javascript"]},{id:"json",scopeName:"source.json",path:"json.tmLanguage.json",displayName:"JSON",samplePath:"json.sample"},{id:"json5",scopeName:"source.json5",path:"json5.tmLanguage.json",displayName:"JSON5",samplePath:"json5.sample"},{id:"jsonc",scopeName:"source.json.comments",path:"jsonc.tmLanguage.json",displayName:"JSON with Comments",samplePath:"jsonc.sample"},{id:"jsonl",scopeName:"source.json.lines",path:"jsonl.tmLanguage.json",displayName:"JSON Lines",samplePath:"jsonl.sample"},{id:"jsonnet",scopeName:"source.jsonnet",path:"jsonnet.tmLanguage.json",displayName:"Jsonnet",samplePath:"jsonnet.sample"},{id:"jssm",scopeName:"source.jssm",path:"jssm.tmLanguage.json",displayName:"JSSM",samplePath:"jssm.sample",aliases:["fsl"]},{id:"jsx",scopeName:"source.js.jsx",path:"jsx.tmLanguage.json",displayName:"JSX",samplePath:"jsx.sample"},{id:"julia",scopeName:"source.julia",path:"julia.tmLanguage.json",displayName:"Julia",samplePath:"julia.sample",embeddedLangs:["cpp","python","javascript","r","sql"]},{id:"kotlin",scopeName:"source.kotlin",path:"kotlin.tmLanguage.json",displayName:"Kotlin",samplePath:"kotlin.sample",aliases:["kt","kts"]},{id:"kusto",scopeName:"source.kusto",path:"kusto.tmLanguage.json",displayName:"Kusto",samplePath:"kusto.sample",aliases:["kql"]},{id:"latex",scopeName:"text.tex.latex",path:"latex.tmLanguage.json",displayName:"LaTeX",samplePath:"latex.sample",embeddedLangs:["tex","css","haskell","html","xml","java","lua","julia","ruby","javascript","typescript","python","yaml","rust","scala","gnuplot"]},{id:"less",scopeName:"source.css.less",path:"less.tmLanguage.json",displayName:"Less",samplePath:"less.sample"},{id:"liquid",scopeName:"text.html.liquid",path:"liquid.tmLanguage.json",displayName:"Liquid",samplePath:"liquid.sample",embeddedLangs:["html","css","json","javascript"]},{id:"lisp",scopeName:"source.lisp",path:"lisp.tmLanguage.json",displayName:"Lisp",samplePath:"lisp.sample"},{id:"logo",scopeName:"source.logo",path:"logo.tmLanguage.json",displayName:"Logo",samplePath:"logo.sample"},{id:"lua",scopeName:"source.lua",path:"lua.tmLanguage.json",displayName:"Lua",samplePath:"lua.sample",embeddedLangs:["c"]},{id:"make",scopeName:"source.makefile",path:"make.tmLanguage.json",displayName:"Makefile",samplePath:"make.sample",aliases:["makefile"]},{id:"markdown",scopeName:"text.html.markdown",path:"markdown.tmLanguage.json",displayName:"Markdown",samplePath:"markdown.sample",aliases:["md"],embeddedLangs:["css","html","ini","java","lua","make","perl","r","ruby","php","sql","vb","xml","xsl","yaml","bat","clojure","coffee","c","cpp","diff","docker","git-commit","git-rebase","go","groovy","pug","javascript","json","jsonc","less","objective-c","swift","scss","raku","powershell","python","julia","rust","scala","shellscript","typescript","tsx","csharp","fsharp","dart","handlebars","erlang","elixir","latex","bibtex"]},{id:"marko",scopeName:"text.marko",path:"marko.tmLanguage.json",displayName:"Marko",samplePath:"marko.sample",embeddedLangs:["css","less","scss","javascript"]},{id:"matlab",scopeName:"source.matlab",path:"matlab.tmLanguage.json",displayName:"MATLAB",samplePath:"matlab.sample"},{id:"mdc",scopeName:"text.markdown.mdc",path:"mdc.tmLanguage.json",displayName:"mdc",samplePath:"mdc.sample",embeddedLangs:["markdown","yaml"]},{id:"mdx",scopeName:"source.mdx",path:"mdx.tmLanguage.json",displayName:"MDX",samplePath:"mdx.sample",embeddedLangs:["tsx","toml","yaml","c","clojure","coffee","cpp","csharp","css","diff","docker","elixir","elm","erlang","go","graphql","haskell","html","ini","java","javascript","json","julia","kotlin","less","lua","make","markdown","objective-c","perl","python","r","ruby","rust","scala","scss","shellscript","shellsession","sql","xml","swift","typescript"]},{id:"mermaid",scopeName:"source.mermaid",path:"mermaid.tmLanguage.json",displayName:"Mermaid",samplePath:"mermaid.sample"},{id:"mojo",scopeName:"source.mojo",path:"mojo.tmLanguage.json",displayName:"MagicPython",samplePath:"mojo.sample"},{id:"narrat",scopeName:"source.narrat",path:"narrat.tmLanguage.json",displayName:"Narrat Language",samplePath:"narrat.sample",aliases:["nar"]},{id:"nextflow",scopeName:"source.nextflow",path:"nextflow.tmLanguage.json",displayName:"Nextflow",samplePath:"nextflow.sample",aliases:["nf"]},{id:"nginx",scopeName:"source.nginx",path:"nginx.tmLanguage.json",displayName:"Nginx",samplePath:"nginx.sample",embeddedLangs:["lua"]},{id:"nim",scopeName:"source.nim",path:"nim.tmLanguage.json",displayName:"Nim",samplePath:"nim.sample",embeddedLangs:["c","html","xml","javascript","css","glsl","markdown"]},{id:"nix",scopeName:"source.nix",path:"nix.tmLanguage.json",displayName:"Nix",samplePath:"nix.sample"},{id:"nushell",scopeName:"source.nushell",path:"nushell.tmLanguage.json",displayName:"nushell",samplePath:"nushell.sample",aliases:["nu"]},{id:"objective-c",scopeName:"source.objc",path:"objective-c.tmLanguage.json",displayName:"Objective-C",samplePath:"objective-c.sample",aliases:["objc"]},{id:"objective-cpp",scopeName:"source.objcpp",path:"objective-cpp.tmLanguage.json",displayName:"Objective-C++",samplePath:"objective-cpp.sample"},{id:"ocaml",scopeName:"source.ocaml",path:"ocaml.tmLanguage.json",displayName:"OCaml",samplePath:"ocaml.sample"},{id:"pascal",scopeName:"source.pascal",path:"pascal.tmLanguage.json",displayName:"Pascal",samplePath:"pascal.sample"},{id:"perl",scopeName:"source.perl",path:"perl.tmLanguage.json",displayName:"Perl",samplePath:"perl.sample",embeddedLangs:["html","xml","css","javascript","sql"]},{id:"php",scopeName:"source.php",path:"php.tmLanguage.json",displayName:"PHP",samplePath:"php.sample",embeddedLangs:["html","xml","sql","javascript","json","css"]},{id:"plsql",scopeName:"source.plsql.oracle",path:"plsql.tmLanguage.json",displayName:"PL/SQL",samplePath:"plsql.sample"},{id:"postcss",scopeName:"source.css.postcss",path:"postcss.tmLanguage.json",displayName:"PostCSS",samplePath:"postcss.sample"},{id:"powerquery",scopeName:"source.powerquery",path:"powerquery.tmLanguage.json",displayName:"PowerQuery",samplePath:"powerquery.sample"},{id:"powershell",scopeName:"source.powershell",path:"powershell.tmLanguage.json",displayName:"PowerShell",samplePath:"powershell.sample",aliases:["ps","ps1"]},{id:"prisma",scopeName:"source.prisma",path:"prisma.tmLanguage.json",displayName:"Prisma",samplePath:"prisma.sample"},{id:"prolog",scopeName:"source.prolog",path:"prolog.tmLanguage.json",displayName:"Prolog",samplePath:"prolog.sample"},{id:"proto",scopeName:"source.proto",path:"proto.tmLanguage.json",displayName:"Protocol Buffer 3",samplePath:"proto.sample"},{id:"pug",scopeName:"text.pug",path:"pug.tmLanguage.json",displayName:"Pug",samplePath:"pug.sample",aliases:["jade"],embeddedLangs:["javascript","css","sass","scss","stylus","coffee","html"]},{id:"puppet",scopeName:"source.puppet",path:"puppet.tmLanguage.json",displayName:"Puppet",samplePath:"puppet.sample"},{id:"purescript",scopeName:"source.purescript",path:"purescript.tmLanguage.json",displayName:"PureScript",samplePath:"purescript.sample"},{id:"python",scopeName:"source.python",path:"python.tmLanguage.json",displayName:"Python",samplePath:"python.sample",aliases:["py"]},{id:"r",scopeName:"source.r",path:"r.tmLanguage.json",displayName:"R",samplePath:"r.sample"},{id:"raku",scopeName:"source.perl.6",path:"raku.tmLanguage.json",displayName:"Raku",samplePath:"raku.sample",aliases:["perl6"]},{id:"razor",scopeName:"text.aspnetcorerazor",path:"razor.tmLanguage.json",displayName:"ASP.NET Razor",samplePath:"razor.sample",embeddedLangs:["html","csharp"]},{id:"reg",scopeName:"source.reg",path:"reg.tmLanguage.json",displayName:"Windows Registry Script",samplePath:"reg.sample"},{id:"rel",scopeName:"source.rel",path:"rel.tmLanguage.json",displayName:"Rel",samplePath:"rel.sample"},{id:"riscv",scopeName:"source.riscv",path:"riscv.tmLanguage.json",displayName:"RISC-V",samplePath:"riscv.sample"},{id:"rst",scopeName:"source.rst",path:"rst.tmLanguage.json",displayName:"reStructuredText",samplePath:"rst.sample",embeddedLangs:["cpp","python","javascript","shellscript","yaml","cmake","ruby"]},{id:"ruby",scopeName:"source.ruby",path:"ruby.tmLanguage.json",displayName:"Ruby",samplePath:"ruby.sample",aliases:["rb"],embeddedLangs:["html","xml","sql","css","c","javascript","shellscript","lua"]},{id:"rust",scopeName:"source.rust",path:"rust.tmLanguage.json",displayName:"Rust",samplePath:"rust.sample",aliases:["rs"]},{id:"sas",scopeName:"source.sas",path:"sas.tmLanguage.json",displayName:"SAS",samplePath:"sas.sample",embeddedLangs:["sql"]},{id:"sass",scopeName:"source.sass",path:"sass.tmLanguage.json",displayName:"Sass",samplePath:"sass.sample"},{id:"scala",scopeName:"source.scala",path:"scala.tmLanguage.json",displayName:"Scala",samplePath:"scala.sample"},{id:"scheme",scopeName:"source.scheme",path:"scheme.tmLanguage.json",displayName:"Scheme",samplePath:"scheme.sample"},{id:"scss",scopeName:"source.css.scss",path:"scss.tmLanguage.json",displayName:"SCSS",samplePath:"scss.sample",embeddedLangs:["css"]},{id:"shaderlab",scopeName:"source.shaderlab",path:"shaderlab.tmLanguage.json",displayName:"ShaderLab",samplePath:"shaderlab.sample",aliases:["shader"],embeddedLangs:["hlsl"]},{id:"shellscript",scopeName:"source.shell",path:"shellscript.tmLanguage.json",displayName:"Shell",samplePath:"shellscript.sample",aliases:["bash","sh","shell","zsh"]},{id:"shellsession",scopeName:"text.shell-session",path:"shellsession.tmLanguage.json",displayName:"Shell Session",samplePath:"shellsession.sample",aliases:["console"],embeddedLangs:["shellscript"]},{id:"smalltalk",scopeName:"source.smalltalk",path:"smalltalk.tmLanguage.json",displayName:"Smalltalk",samplePath:"smalltalk.sample"},{id:"solidity",scopeName:"source.solidity",path:"solidity.tmLanguage.json",displayName:"Solidity",samplePath:"solidity.sample"},{id:"sparql",scopeName:"source.sparql",path:"sparql.tmLanguage.json",displayName:"SPARQL",samplePath:"sparql.sample",embeddedLangs:["turtle"]},{id:"splunk",scopeName:"source.splunk_search",path:"splunk.tmLanguage.json",displayName:"Splunk Query Language",samplePath:"splunk.sample",aliases:["spl"]},{id:"sql",scopeName:"source.sql",path:"sql.tmLanguage.json",displayName:"SQL",samplePath:"sql.sample"},{id:"ssh-config",scopeName:"source.ssh-config",path:"ssh-config.tmLanguage.json",displayName:"SSH Config",samplePath:"ssh-config.sample"},{id:"stata",scopeName:"source.stata",path:"stata.tmLanguage.json",displayName:"Stata",samplePath:"stata.sample",embeddedLangs:["sql"]},{id:"stylus",scopeName:"source.stylus",path:"stylus.tmLanguage.json",displayName:"Stylus",samplePath:"stylus.sample",aliases:["styl"]},{id:"svelte",scopeName:"source.svelte",path:"svelte.tmLanguage.json",displayName:"Svelte",samplePath:"svelte.sample",embeddedLangs:["javascript","typescript","coffee","stylus","sass","css","scss","less","postcss","pug","markdown"]},{id:"swift",scopeName:"source.swift",path:"swift.tmLanguage.json",displayName:"Swift",samplePath:"swift.sample"},{id:"system-verilog",scopeName:"source.systemverilog",path:"system-verilog.tmLanguage.json",displayName:"SystemVerilog",samplePath:"system-verilog.sample"},{id:"tasl",scopeName:"source.tasl",path:"tasl.tmLanguage.json",displayName:"Tasl",samplePath:"tasl.sample"},{id:"tcl",scopeName:"source.tcl",path:"tcl.tmLanguage.json",displayName:"Tcl",samplePath:"tcl.sample"},{id:"tex",scopeName:"text.tex",path:"tex.tmLanguage.json",displayName:"TeX",samplePath:"tex.sample",embeddedLangs:["r"]},{id:"toml",scopeName:"source.toml",path:"toml.tmLanguage.json",displayName:"TOML",samplePath:"toml.sample"},{id:"tsx",scopeName:"source.tsx",path:"tsx.tmLanguage.json",displayName:"TSX",samplePath:"tsx.sample"},{id:"turtle",scopeName:"source.turtle",path:"turtle.tmLanguage.json",displayName:"Turtle",samplePath:"turtle.sample"},{id:"twig",scopeName:"text.html.twig",path:"twig.tmLanguage.json",displayName:"Twig",samplePath:"twig.sample",embeddedLangs:["css","javascript","scss","php","python","ruby"]},{id:"typescript",scopeName:"source.ts",path:"typescript.tmLanguage.json",displayName:"TypeScript",samplePath:"typescript.sample",aliases:["ts"]},{id:"v",scopeName:"source.v",path:"v.tmLanguage.json",displayName:"V",samplePath:"v.sample"},{id:"vb",scopeName:"source.asp.vb.net",path:"vb.tmLanguage.json",displayName:"Visual Basic",samplePath:"vb.sample",aliases:["cmd"]},{id:"verilog",scopeName:"source.verilog",path:"verilog.tmLanguage.json",displayName:"Verilog",samplePath:"verilog.sample"},{id:"vhdl",scopeName:"source.vhdl",path:"vhdl.tmLanguage.json",displayName:"VHDL",samplePath:"vhdl.sample"},{id:"viml",scopeName:"source.viml",path:"viml.tmLanguage.json",displayName:"Vim Script",samplePath:"viml.sample",aliases:["vim","vimscript"]},{id:"vue-html",scopeName:"text.html.vue-html",path:"vue-html.tmLanguage.json",displayName:"Vue HTML",samplePath:"vue-html.sample",embeddedLangs:["vue","javascript"]},{id:"vue",scopeName:"source.vue",path:"vue.tmLanguage.json",displayName:"Vue",samplePath:"vue.sample",embeddedLangs:["html","markdown","pug","stylus","sass","css","scss","less","javascript","typescript","jsx","tsx","json","jsonc","json5","yaml","toml","graphql"]},{id:"vyper",scopeName:"source.vyper",path:"vyper.tmLanguage.json",displayName:"Vyper",samplePath:"vyper.sample",aliases:["vy"]},{id:"wasm",scopeName:"source.wat",path:"wasm.tmLanguage.json",displayName:"WebAssembly",samplePath:"wasm.sample"},{id:"wenyan",scopeName:"source.wenyan",path:"wenyan.tmLanguage.json",displayName:"Wenyan",samplePath:"wenyan.sample",aliases:[""]},{id:"wgsl",scopeName:"source.wgsl",path:"wgsl.tmLanguage.json",displayName:"WGSL",samplePath:"wgsl.sample"},{id:"wolfram",scopeName:"source.wolfram",path:"wolfram.tmLanguage.json",displayName:"Wolfram",samplePath:"wolfram.sample",aliases:["wl"]},{id:"xml",scopeName:"text.xml",path:"xml.tmLanguage.json",displayName:"XML",samplePath:"xml.sample",embeddedLangs:["java"]},{id:"xsl",scopeName:"text.xml.xsl",path:"xsl.tmLanguage.json",displayName:"XSL",samplePath:"xsl.sample",embeddedLangs:["xml"]},{id:"yaml",scopeName:"source.yaml",path:"yaml.tmLanguage.json",displayName:"YAML",samplePath:"yaml.sample",aliases:["yml"]},{id:"zenscript",scopeName:"source.zenscript",path:"zenscript.tmLanguage.json",displayName:"ZenScript",samplePath:"zenscript.sample"},{id:"zig",scopeName:"source.zig",path:"zig.tmLanguage.json",displayName:"zig",samplePath:"zig.sample"}];var $f=(n=>(n[n.NotSet=-1]="NotSet",n[n.None=0]="None",n[n.Italic=1]="Italic",n[n.Bold=2]="Bold",n[n.Underline=4]="Underline",n))($f||{});class Nl{static toBinaryStr(e){let t=e.toString(2);for(;t.length<32;)t="0"+t;return t}static printMetadata(e){let t=Nl.getLanguageId(e),r=Nl.getTokenType(e),o=Nl.getFontStyle(e),i=Nl.getForeground(e),a=Nl.getBackground(e);console.log({languageId:t,tokenType:r,fontStyle:o,foreground:i,background:a})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>15}static getBackground(e){return(e&4286578688)>>>24}static containsBalancedBrackets(e){return(e&1024)!==0}static set(e,t,r,o,i,a){let s=Nl.getLanguageId(e),l=Nl.getTokenType(e),d=Nl.getFontStyle(e),u=Nl.getForeground(e),p=Nl.getBackground(e),f=Nl.containsBalancedBrackets(e)?1:0;return t!==0&&(s=t),r!==0&&(l=r===8?0:r),o!==-1&&(d=o),i!==0&&(u=i),a!==0&&(p=a),(s<<0|l<<8|d<<11|f<<10|u<<15|p<<24)>>>0}}function rae(n){return n.endsWith("/")||n.endsWith("\\")?n.slice(0,-1):n}function oae(n){return n.startsWith("./")?n.slice(2):n}function zN(n){const e=n.split(/[\/\\]/g);return e.slice(0,e.length-1)}function BN(...n){return n.map(rae).map(oae).join("/")}function iae(n,e){const t=new Map;for(const r of n){const o=e(r);t.has(o)?t.get(o).push(r):t.set(o,[r])}return t}function aae(n,e=!1){const t=n.length;let r=0,o="",i=0,a=16,s=0,l=0,d=0,u=0,p=0;function f(w,_){let k=0,y=0;for(;k<w||!_;){let S=n.charCodeAt(r);if(S>=48&&S<=57)y=y*16+S-48;else if(S>=65&&S<=70)y=y*16+S-65+10;else if(S>=97&&S<=102)y=y*16+S-97+10;else break;r++,k++}return k<w&&(y=-1),y}function h(w){r=w,o="",i=0,a=16,p=0}function c(){let w=r;if(n.charCodeAt(r)===48)r++;else for(r++;r<n.length&&H0(n.charCodeAt(r));)r++;if(r<n.length&&n.charCodeAt(r)===46)if(r++,r<n.length&&H0(n.charCodeAt(r)))for(r++;r<n.length&&H0(n.charCodeAt(r));)r++;else return p=3,n.substring(w,r);let _=r;if(r<n.length&&(n.charCodeAt(r)===69||n.charCodeAt(r)===101))if(r++,(r<n.length&&n.charCodeAt(r)===43||n.charCodeAt(r)===45)&&r++,r<n.length&&H0(n.charCodeAt(r))){for(r++;r<n.length&&H0(n.charCodeAt(r));)r++;_=r}else p=3;return n.substring(w,_)}function g(){let w="",_=r;for(;;){if(r>=t){w+=n.substring(_,r),p=2;break}const k=n.charCodeAt(r);if(k===34){w+=n.substring(_,r),r++;break}if(k===92){if(w+=n.substring(_,r),r++,r>=t){p=2;break}switch(n.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:const S=f(4,!0);S>=0?w+=String.fromCharCode(S):p=4;break;default:p=5}_=r;continue}if(k>=0&&k<=31)if(N2(k)){w+=n.substring(_,r),p=2;break}else p=6;r++}return w}function m(){if(o="",p=0,i=r,l=s,u=d,r>=t)return i=t,a=17;let w=n.charCodeAt(r);if(V7(w)){do r++,o+=String.fromCharCode(w),w=n.charCodeAt(r);while(V7(w));return a=15}if(N2(w))return r++,o+=String.fromCharCode(w),w===13&&n.charCodeAt(r)===10&&(r++,o+=`
`),s++,d=r,a=14;switch(w){case 123:return r++,a=1;case 125:return r++,a=2;case 91:return r++,a=3;case 93:return r++,a=4;case 58:return r++,a=6;case 44:return r++,a=5;case 34:return r++,o=g(),a=10;case 47:const _=r-1;if(n.charCodeAt(r+1)===47){for(r+=2;r<t&&!N2(n.charCodeAt(r));)r++;return o=n.substring(_,r),a=12}if(n.charCodeAt(r+1)===42){r+=2;const k=t-1;let y=!1;for(;r<k;){const S=n.charCodeAt(r);if(S===42&&n.charCodeAt(r+1)===47){r+=2,y=!0;break}r++,N2(S)&&(S===13&&n.charCodeAt(r)===10&&r++,s++,d=r)}return y||(r++,p=1),o=n.substring(_,r),a=13}return o+=String.fromCharCode(w),r++,a=16;case 45:if(o+=String.fromCharCode(w),r++,r===t||!H0(n.charCodeAt(r)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=c(),a=11;default:for(;r<t&&b(w);)r++,w=n.charCodeAt(r);if(i!==r){switch(o=n.substring(i,r),o){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return o+=String.fromCharCode(w),r++,a=16}}function b(w){if(V7(w)||N2(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function v(){let w;do w=m();while(w>=12&&w<=15);return w}return{setPosition:h,getPosition:()=>r,scan:e?v:m,getToken:()=>a,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>l,getTokenStartCharacter:()=>i-u,getTokenError:()=>p}}function V7(n){return n===32||n===9}function N2(n){return n===10||n===13}function H0(n){return n>=48&&n<=57}var MT;(function(n){n[n.lineFeed=10]="lineFeed",n[n.carriageReturn=13]="carriageReturn",n[n.space=32]="space",n[n._0=48]="_0",n[n._1=49]="_1",n[n._2=50]="_2",n[n._3=51]="_3",n[n._4=52]="_4",n[n._5=53]="_5",n[n._6=54]="_6",n[n._7=55]="_7",n[n._8=56]="_8",n[n._9=57]="_9",n[n.a=97]="a",n[n.b=98]="b",n[n.c=99]="c",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.g=103]="g",n[n.h=104]="h",n[n.i=105]="i",n[n.j=106]="j",n[n.k=107]="k",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.p=112]="p",n[n.q=113]="q",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.v=118]="v",n[n.w=119]="w",n[n.x=120]="x",n[n.y=121]="y",n[n.z=122]="z",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.asterisk=42]="asterisk",n[n.backslash=92]="backslash",n[n.closeBrace=125]="closeBrace",n[n.closeBracket=93]="closeBracket",n[n.colon=58]="colon",n[n.comma=44]="comma",n[n.dot=46]="dot",n[n.doubleQuote=34]="doubleQuote",n[n.minus=45]="minus",n[n.openBrace=123]="openBrace",n[n.openBracket=91]="openBracket",n[n.plus=43]="plus",n[n.slash=47]="slash",n[n.formFeed=12]="formFeed",n[n.tab=9]="tab"})(MT||(MT={}));var Z6;(function(n){n.DEFAULT={allowTrailingComma:!1}})(Z6||(Z6={}));function sae(n,e=[],t=Z6.DEFAULT){let r=null,o=[];const i=[];function a(l){Array.isArray(o)?o.push(l):r!==null&&(o[r]=l)}return lae(n,{onObjectBegin:()=>{const l={};a(l),i.push(o),o=l,r=null},onObjectProperty:l=>{r=l},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{const l=[];a(l),i.push(o),o=l,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:a,onError:(l,d,u)=>{e.push({error:l,offset:d,length:u})}},t),o[0]}function lae(n,e,t=Z6.DEFAULT){const r=aae(n,!1),o=[];function i(L){return L?()=>L(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(L){return L?()=>L(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function s(L){return L?j=>L(j,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function l(L){return L?j=>L(j,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}const d=a(e.onObjectBegin),u=l(e.onObjectProperty),p=i(e.onObjectEnd),f=a(e.onArrayBegin),h=i(e.onArrayEnd),c=l(e.onLiteralValue),g=s(e.onSeparator),m=i(e.onComment),b=s(e.onError),v=t&&t.disallowComments,w=t&&t.allowTrailingComma;function _(){for(;;){const L=r.scan();switch(r.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:v||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(L){case 12:case 13:v?k(10):m();break;case 16:k(1);break;case 15:case 14:break;default:return L}}}function k(L,j=[],$=[]){if(b(L),j.length+$.length>0){let ee=r.getToken();for(;ee!==17;){if(j.indexOf(ee)!==-1){_();break}else if($.indexOf(ee)!==-1)break;ee=_()}}}function y(L){const j=r.getTokenValue();return L?c(j):(u(j),o.push(j)),_(),!0}function S(){switch(r.getToken()){case 11:const L=r.getTokenValue();let j=Number(L);isNaN(j)&&(k(2),j=0),c(j);break;case 7:c(null);break;case 8:c(!0);break;case 9:c(!1);break;default:return!1}return _(),!0}function C(){return r.getToken()!==10?(k(3,[],[2,5]),!1):(y(!1),r.getToken()===6?(g(":"),_(),T()||k(4,[],[2,5])):k(5,[],[2,5]),o.pop(),!0)}function I(){d(),_();let L=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(L||k(4,[],[]),g(","),_(),r.getToken()===2&&w)break}else L&&k(6,[],[]);C()||k(4,[],[2,5]),L=!0}return p(),r.getToken()!==2?k(7,[2],[]):_(),!0}function A(){f(),_();let L=!0,j=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(j||k(4,[],[]),g(","),_(),r.getToken()===4&&w)break}else j&&k(6,[],[]);L?(o.push(0),L=!1):o[o.length-1]++,T()||k(4,[],[4,5]),j=!0}return h(),L||o.pop(),r.getToken()!==4?k(8,[4],[]):_(),!0}function T(){switch(r.getToken()){case 3:return A();case 1:return I();case 10:return y(!0);default:return S()}}return _(),r.getToken()===17?t.allowEmptyContent?!0:(k(4,[],[]),!1):T()?(r.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}var IT;(function(n){n[n.None=0]="None",n[n.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=2]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",n[n.InvalidUnicode=4]="InvalidUnicode",n[n.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",n[n.InvalidCharacter=6]="InvalidCharacter"})(IT||(IT={}));var TT;(function(n){n[n.OpenBraceToken=1]="OpenBraceToken",n[n.CloseBraceToken=2]="CloseBraceToken",n[n.OpenBracketToken=3]="OpenBracketToken",n[n.CloseBracketToken=4]="CloseBracketToken",n[n.CommaToken=5]="CommaToken",n[n.ColonToken=6]="ColonToken",n[n.NullKeyword=7]="NullKeyword",n[n.TrueKeyword=8]="TrueKeyword",n[n.FalseKeyword=9]="FalseKeyword",n[n.StringLiteral=10]="StringLiteral",n[n.NumericLiteral=11]="NumericLiteral",n[n.LineCommentTrivia=12]="LineCommentTrivia",n[n.BlockCommentTrivia=13]="BlockCommentTrivia",n[n.LineBreakTrivia=14]="LineBreakTrivia",n[n.Trivia=15]="Trivia",n[n.Unknown=16]="Unknown",n[n.EOF=17]="EOF"})(TT||(TT={}));const cae=sae;var OT;(function(n){n[n.InvalidSymbol=1]="InvalidSymbol",n[n.InvalidNumberFormat=2]="InvalidNumberFormat",n[n.PropertyNameExpected=3]="PropertyNameExpected",n[n.ValueExpected=4]="ValueExpected",n[n.ColonExpected=5]="ColonExpected",n[n.CommaExpected=6]="CommaExpected",n[n.CloseBraceExpected=7]="CloseBraceExpected",n[n.CloseBracketExpected=8]="CloseBracketExpected",n[n.EndOfFileExpected=9]="EndOfFileExpected",n[n.InvalidCommentToken=10]="InvalidCommentToken",n[n.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=12]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",n[n.InvalidUnicode=14]="InvalidUnicode",n[n.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",n[n.InvalidCharacter=16]="InvalidCharacter"})(OT||(OT={}));const dae=typeof self<"u"&&typeof self.WorkerGlobalScope<"u",uae="process"in globalThis&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node",hae="process"in globalThis&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="bun",Hk=dae||!uae&&!hae;let fae="";const pae="dist/";let K7=null;async function gae(n){if(!K7){let e;if(Hk)e=S5.loadWASM({data:await fetch(HN(BN(...zN(n),"onig.wasm")))});else{const r=require("path").join(require.resolve("vscode-oniguruma"),"../onig.wasm"),i=require("fs").readFileSync(r).buffer;e=S5.loadWASM(i)}K7=e.then(()=>({createOnigScanner(t){return S5.createOnigScanner(t)},createOnigString(t){return S5.createOnigString(t)}}))}return K7}function HN(n){if(Hk)return`${fae}${n}`;{const e=require("path");return e.isAbsolute(n)?n:e.resolve(__dirname,"..",n)}}async function mae(n){const e=HN(n);return Hk?await fetch(e).then(t=>t.text()):await require("fs").promises.readFile(e,"utf-8")}async function FN(n){const e=[],t=await mae(n);let r;try{r=JSON.parse(t)}catch{if(r=cae(t,e,{allowTrailingComma:!0}),e.length)throw e[0]}return r}async function ZN(n){let e=await FN(n);const t=UN(e);if(t.include){const r=await ZN(BN(...zN(n),t.include));r.settings&&(t.settings=r.settings.concat(t.settings)),r.bg&&!t.bg&&(t.bg=r.bg),r.colors&&(t.colors={...r.colors,...t.colors}),delete t.include}return t}async function vae(n){return await FN(n)}function bae(n){n.settings||(n.settings=[]),!(n.settings[0]&&n.settings[0].settings&&!n.settings[0].scope)&&n.settings.unshift({settings:{foreground:n.fg,background:n.bg}})}function UN(n){const e=n.type||"dark",t={name:n.name,type:e,...n,...yae(n)};return n.include&&(t.include=n.include),n.tokenColors&&(t.settings=n.tokenColors,delete t.tokenColors),bae(t),t}const AT={light:"#333333",dark:"#bbbbbb"},LT={light:"#fffffe",dark:"#1e1e1e"};function yae(n){var i,a,s,l;let e,t,r=n.settings?n.settings:n.tokenColors;const o=r?r.find(d=>!d.name&&!d.scope):void 0;return(i=o==null?void 0:o.settings)!=null&&i.foreground&&(e=o.settings.foreground),(a=o==null?void 0:o.settings)!=null&&a.background&&(t=o.settings.background),!e&&((s=n==null?void 0:n.colors)!=null&&s["editor.foreground"])&&(e=n.colors["editor.foreground"]),!t&&((l=n==null?void 0:n.colors)!=null&&l["editor.background"])&&(t=n.colors["editor.background"]),e||(e=n.type==="light"?AT.light:AT.dark),t||(t=n.type==="light"?LT.light:LT.dark),{fg:e,bg:t}}class xae{constructor(e,t){this.languagesPath="languages/",this.languageMap={},this.scopeToLangMap={},this._onigLibPromise=e,this._onigLibName=t}get onigLib(){return this._onigLibPromise}getOnigLibName(){return this._onigLibName}getLangRegistration(e){return this.languageMap[e]}async loadGrammar(e){const t=this.scopeToLangMap[e];if(!t)return null;if(t.grammar)return t.grammar;const r=await vae(Gf.includes(t)?`${this.languagesPath}${t.path}`:t.path);return t.grammar=r,r}addLanguage(e){this.languageMap[e.id]=e,e.aliases&&e.aliases.forEach(t=>{this.languageMap[t]=e}),this.scopeToLangMap[e.scopeName]=e}}function wae(n,e,t,r,o){let i=t.split(/\r\n|\r|\n/),a=NN.INITIAL,s=[],l=[];for(let d=0,u=i.length;d<u;d++){let p=i[d];if(p===""){s=[],l.push([]);continue}let f,h,c;o.includeExplanation&&(f=r.tokenizeLine(p,a),h=f.tokens,c=0);let g=r.tokenizeLine2(p,a),m=g.tokens.length/2;for(let b=0;b<m;b++){let v=g.tokens[2*b],w=b+1<m?g.tokens[2*b+2]:p.length;if(v===w)continue;let _=g.tokens[2*b+1],k=Nl.getForeground(_),y=e[k],S=Nl.getFontStyle(_),C=[];if(o.includeExplanation){let I=0;for(;v+I<w;){let A=h[c],T=p.substring(A.startIndex,A.endIndex);I+=T.length,C.push({content:T,scopes:Cae(n,A.scopes)}),c++}}s.push({content:p.substring(v,w),color:y,fontStyle:S,explanation:C})}l.push(s),s=[],a=g.ruleStack}return l}function Cae(n,e){let t=[];for(let r=0,o=e.length;r<o;r++){let i=e.slice(0,r),a=e[r];t[r]={scopeName:a,themeMatches:kae(n,a,i)}}return t}function $T(n,e){let t=n+".";return n===e||e.substring(0,t.length)===t}function Sae(n,e,t,r){if(!$T(n,t))return!1;let o=e.length-1,i=r.length-1;for(;o>=0&&i>=0;)$T(e[o],r[i])&&o--,i--;return o===-1}function kae(n,e,t){let r=[],o=0;for(let i=0,a=n.settings.length;i<a;i++){let s=n.settings[i],l;if(typeof s.scope=="string")l=s.scope.split(/,/).map(d=>d.trim());else if(Array.isArray(s.scope))l=s.scope;else continue;for(let d=0,u=l.length;d<u;d++){let f=l[d].split(/ /),h=f[f.length-1],c=f.slice(0,f.length-1);Sae(h,c,e,t)&&(r[o++]=s,d=u)}}return r}var yh=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Y7={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function _ae(n,e){const t=n.indexOf("\x1B",e);if(t!==-1&&n[t+1]==="["){const r=n.indexOf("m",t);return{sequence:n.substring(t+2,r).split(";"),startPosition:t,position:r+1}}return{position:n.length}}function jT(n){const e=n.shift();if(e==="2"){const t=n.splice(0,3).map(r=>Number.parseInt(r));return t.length!==3||t.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:t}}else if(e==="5"){const t=n.shift();if(t)return{type:"table",index:Number(t)}}}function Eae(n){const e=[];for(;n.length>0;){const t=n.shift();if(!t)continue;const r=Number.parseInt(t);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)Y7[r]&&e.push({type:"setDecoration",value:Y7[r]});else if(r<=29){const o=Y7[r-20];o&&e.push({type:"resetDecoration",value:o})}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:yh[r-30]}});else if(r===38){const o=jT(n);o&&e.push({type:"setForegroundColor",value:o})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:yh[r-40]}});else if(r===48){const o=jT(n);o&&e.push({type:"setBackgroundColor",value:o})}else r===49?e.push({type:"resetBackgroundColor"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:yh[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:yh[r-100+8]}})}return e}function Pae(){let n=null,e=null,t=new Set;return{parse(r){const o=[];let i=0;do{const a=_ae(r,i),s=a.sequence?r.substring(i,a.startPosition):r.substring(i);if(s.length>0&&o.push({value:s,foreground:n,background:e,decorations:new Set(t)}),a.sequence){const l=Eae(a.sequence);for(const d of l)d.type==="resetAll"?(n=null,e=null,t.clear()):d.type==="resetForegroundColor"?n=null:d.type==="resetBackgroundColor"?e=null:d.type==="resetDecoration"&&t.delete(d.value);for(const d of l)d.type==="setForegroundColor"?n=d.value:d.type==="setBackgroundColor"?e=d.value:d.type==="setDecoration"&&t.add(d.value)}i=a.position}while(i<r.length);return o}}}var Mae={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Iae(n=Mae){function e(s){return n[s]}function t(s){return`#${s.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function o(){if(r)return r;r=[];for(let d=0;d<yh.length;d++)r.push(e(yh[d]));let s=[0,95,135,175,215,255];for(let d=0;d<6;d++)for(let u=0;u<6;u++)for(let p=0;p<6;p++)r.push(t([s[d],s[u],s[p]]));let l=8;for(let d=0;d<24;d++,l+=10)r.push(t([l,l,l]));return r}function i(s){return o()[s]}function a(s){switch(s.type){case"named":return e(s.name);case"rgb":return t(s.rgb);case"table":return i(s.index)}}return{value:a}}function Tae(n,e){const t=e.split(/\r?\n/),r=Iae(Object.fromEntries(yh.map(i=>[i,n.colors[`terminal.ansi${i[0].toUpperCase()}${i.substring(1)}`]]))),o=Pae();return t.map(i=>o.parse(i).map(a=>{let s;a.decorations.has("reverse")?s=a.background?r.value(a.background):n.bg:s=a.foreground?r.value(a.foreground):n.fg,a.decorations.has("dim")&&(s=Oae(s));let l=$f.None;return a.decorations.has("bold")&&(l|=$f.Bold),a.decorations.has("italic")&&(l|=$f.Italic),a.decorations.has("underline")&&(l|=$f.Underline),{content:a.value,color:s,fontStyle:l}}))}function Oae(n){const e=n.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const t=n.match(/var\((--shiki-color-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:n}const Aae={pre({className:n,style:e,children:t}){return`<pre class="${n}" style="${e}" tabindex="0">${t}</pre>`},code({children:n}){return`<code>${n}</code>`},line({className:n,children:e}){return`<span class="${n}">${e}</span>`},token({style:n,children:e}){return`<span style="${n}">${e}</span>`}};function RT(n,e={}){const t=e.bg||"#fff",r=iae(e.lineOptions??[],a=>a.line),o=e.elements||{};function i(a="",s={},l){const d=o[a]||Aae[a];return d?(l=l.filter(Boolean),d({...s,children:a==="code"?l.join(`
`):l.join("")})):""}return i("pre",{className:"shiki "+(e.themeName||""),style:`background-color: ${t}`},[e.langId?`<div class="language-id">${e.langId}</div>`:"",i("code",{},n.map((a,s)=>{const l=s+1,d=r.get(l)??[],u=jae(d).join(" ");return i("line",{className:u,lines:n,line:a,index:s},a.map((p,f)=>{const h=[`color: ${p.color||e.fg}`];return p.fontStyle&$f.Italic&&h.push("font-style: italic"),p.fontStyle&$f.Bold&&h.push("font-weight: bold"),p.fontStyle&$f.Underline&&h.push("text-decoration: underline"),i("token",{style:h.join("; "),tokens:a,token:p,index:f},[$ae(p.content)])}))}))])}const Lae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $ae(n){return n.replace(/[&<>"']/g,e=>Lae[e])}function jae(n){const e=new Set(["line"]);for(const t of n)for(const r of t.classes??[])e.add(r);return Array.from(e)}class Rae extends NN.Registry{constructor(e){super(e),this._resolver=e,this.themesPath="themes/",this._resolvedThemes={},this._resolvedGrammars={},this._langGraph=new Map,this._langMap=Gf.reduce((t,r)=>(t[r.id]=r,t),{})}getTheme(e){return typeof e=="string"?this._resolvedThemes[e]:e}async loadTheme(e){return typeof e=="string"?(this._resolvedThemes[e]||(this._resolvedThemes[e]=await ZN(`${this.themesPath}${e}.json`)),this._resolvedThemes[e]):(e=UN(e),e.name&&(this._resolvedThemes[e.name]=e),e)}async loadThemes(e){return await Promise.all(e.map(t=>this.loadTheme(t)))}getLoadedThemes(){return Object.keys(this._resolvedThemes)}getGrammar(e){return this._resolvedGrammars[e]}async loadLanguage(e){var i;const r={embeddedLanguages:(i=e.embeddedLangs)==null?void 0:i.reduce(async(a,s,l)=>{if(!this.getLoadedLanguages().includes(s)&&this._resolver.getLangRegistration(s))return await this._resolver.loadGrammar(this._resolver.getLangRegistration(s).scopeName),a[this._resolver.getLangRegistration(s).scopeName]=l+2,a},{}),balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]},o=await this.loadGrammarWithConfiguration(e.scopeName,1,r);this._resolvedGrammars[e.id]=o,e.aliases&&e.aliases.forEach(a=>{this._resolvedGrammars[a]=o})}async loadLanguages(e){for(const r of e)this.resolveEmbeddedLanguages(r);const t=Array.from(this._langGraph.values());for(const r of t)this._resolver.addLanguage(r);for(const r of t)await this.loadLanguage(r)}getLoadedLanguages(){return Object.keys(this._resolvedGrammars)}resolveEmbeddedLanguages(e){if(this._langGraph.has(e.id)||this._langGraph.set(e.id,e),e.embeddedLangs)for(const t of e.embeddedLangs)this._langGraph.set(t,this._langMap[t])}}function WN(n){return typeof n=="string"?Gf.find(e=>{var t;return e.id===n||((t=e.aliases)==null?void 0:t.includes(n))}):n}function Dae(n){var o;let e=Gf,t=n.themes||[],r=(o=n.paths)!=null&&o.wasm?n.paths.wasm.endsWith("/")?n.paths.wasm:n.paths.wasm+"/":pae;return n.langs&&(e=n.langs.map(WN)),n.theme&&t.unshift(n.theme),t.length||(t=["nord"]),{_languages:e,_themes:t,_wasmPath:r}}function Nae(){const n={"#000001":"var(--shiki-color-text)","#000002":"var(--shiki-color-background)","#000004":"var(--shiki-token-constant)","#000005":"var(--shiki-token-string)","#000006":"var(--shiki-token-comment)","#000007":"var(--shiki-token-keyword)","#000008":"var(--shiki-token-parameter)","#000009":"var(--shiki-token-function)","#000010":"var(--shiki-token-string-expression)","#000011":"var(--shiki-token-punctuation)","#000012":"var(--shiki-token-link)"};for(let e=0;e<yh.length;e++){const t=`#A${e.toString().padStart(5,"0")}`,r=yh[e].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n[t]=`var(--shiki-color-ansi-${r})`}return n}async function zae(n){var C,I;const{_languages:e,_themes:t,_wasmPath:r}=Dae(n),o=new xae(gae(r),"vscode-oniguruma"),i=new Rae(o);(C=n.paths)!=null&&C.themes&&(i.themesPath=n.paths.themes.endsWith("/")?n.paths.themes:n.paths.themes+"/"),(I=n.paths)!=null&&I.languages&&(o.languagesPath=n.paths.languages.endsWith("/")?n.paths.languages:n.paths.languages+"/");const s=(await i.loadThemes(t))[0];let l;await i.loadLanguages(e);let d=Nae();function u(A){d=A}function p(A,T){A.bg=d[A.bg]||A.bg,A.fg=d[A.fg]||A.fg,Object.entries(A.colors).forEach(([L,j])=>{A.colors[L]=d[j]||j}),T.forEach((L,j)=>{T[j]=d[L]||L})}function f(A){const T=A?i.getTheme(A):s;if(!T)throw Error(`No theme registration for ${A}`);(!l||l.name!==T.name)&&(i.setTheme(T),l=T);const L=i.getColorMap();return T.type==="css"&&p(T,L),{_theme:T,_colorMap:L}}function h(A){const T=i.getGrammar(A);if(!T)throw Error(`No language registration for ${A}`);return{_grammar:T}}function c(A,T="text",L,j={includeExplanation:!0}){if(Bae(T))return[...A.split(/\r\n|\r|\n/).map(ie=>[{content:ie}])];const{_grammar:$}=h(T),{_theme:ee,_colorMap:Q}=f(L);return wae(ee,Q,A,$,j)}function g(A,T){const{_theme:L}=f(T);return Tae(L,A)}function m(A,T="text",L){let j;typeof T=="object"?j=T:j={lang:T,theme:L};const $=c(A,j.lang,j.theme,{includeExplanation:!1}),{_theme:ee}=f(j.theme);return RT($,{fg:ee.fg,bg:ee.bg,lineOptions:j==null?void 0:j.lineOptions,themeName:ee.name})}function b(A,T){const L=g(A,T==null?void 0:T.theme),{_theme:j}=f(T==null?void 0:T.theme);return RT(L,{fg:j.fg,bg:j.bg,lineOptions:T==null?void 0:T.lineOptions,themeName:j.name})}async function v(A){await i.loadTheme(A)}async function w(A){const T=WN(A);o.addLanguage(T),await i.loadLanguage(T)}function _(){return i.getLoadedThemes()}function k(){return i.getLoadedLanguages()}function y(A){const{_theme:T}=f(A);return T.bg}function S(A){const{_theme:T}=f(A);return T.fg}return{codeToThemedTokens:c,codeToHtml:m,ansiToThemedTokens:g,ansiToHtml:b,getTheme:A=>f(A)._theme,loadTheme:v,loadLanguage:w,getBackgroundColor:y,getForegroundColor:S,getLoadedThemes:_,getLoadedLanguages:k,setColorReplacements:u}}function Bae(n){return!n||["plaintext","txt","text"].includes(n)}const Hae=["python","c","java","cpp","csharp","vb","javascript","php","sql","asm","pascal","go","swift","matlab","r","rust","ruby","sas","ada","perl","objective-c","cobol","lisp","dart","lua","julia","d","kotlin","logo","scala","haskell","fsharp","scheme","typescript","groovy","abap","prolog","plsql","bash","apex","markdown","json","html","css","diff","jsx","tsx","vue"],DT=Hae.reduce((n,e,t)=>({[e]:t,...n}),{});function Fae(n){return[U9.id,...U9.aliases].includes(n.toLowerCase())}const Fk=n=>!n||Fae(n)?null:Gf.find(t=>{var r;return t.id.toLowerCase()===n.toLowerCase()||((r=t.aliases)==null?void 0:r.includes(n.toLowerCase()))})??null,G7=["DEL","STRONG","B","EM","I","U","S","SPAN","A","INPUT","MARK","CODE","LABEL","BIG","SMALL","ABBR","CITE","BDI","TIME"];class Zae{constructor(e,t,r,o,i){this._fetchFileHandler=async a=>{if(this._customFetchFileHandler){const d=await this._customFetchFileHandler(a);if(d&&d.size>0)return d}let s;try{s=await fetch(a,{cache:"no-cache",mode:"cors",headers:{Origin:window.location.origin}})}catch(d){return console.error(d),null}const l=await s.blob();return l.type.startsWith("image/")?l:null},this._nodeParser=async a=>{var f,h,c,g,m,b,v,w,_,k,y,S,C,I,A,T,L,j,$,ee,Q;let s;if(s=await((f=this._contentParser.getParserHtmlText2Block("customNodeParser"))==null?void 0:f(a)),s&&s.length>0)return s;const l=a.tagName;if((a instanceof Text||G7.includes(l))&&((h=a.textContent)!=null&&h.length))s=await((c=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:c({element:a,flavour:"affine:paragraph",type:"text"}));else switch(l){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":s=await((g=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:g({element:a,flavour:"affine:paragraph",type:l.toLowerCase()}));break;case"BLOCKQUOTE":s=await((m=this._contentParser.getParserHtmlText2Block("blockQuoteParser"))==null?void 0:m(a));break;case"P":a.firstChild instanceof Text&&((b=a.firstChild.textContent)!=null&&b.startsWith("[] ")||(v=a.firstChild.textContent)!=null&&v.startsWith("[ ] ")||(w=a.firstChild.textContent)!=null&&w.startsWith("[x] "))?s=await((_=this._contentParser.getParserHtmlText2Block("listItemParser"))==null?void 0:_(a)):a.firstChild instanceof HTMLImageElement?s=await((k=this._contentParser.getParserHtmlText2Block("embedItemParser"))==null?void 0:k(a.firstChild)):((y=a.firstElementChild)==null?void 0:y.tagName)==="A"||(C=(S=a.firstElementChild)==null?void 0:S.getAttribute("href"))!=null&&C.endsWith(".csv")?s=await((I=this._contentParser.getParserHtmlText2Block("tableParser"))==null?void 0:I(a.firstChild)):s=await((A=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:A({element:a,flavour:"affine:paragraph",type:"text"}));break;case"LI":s=await((T=this._contentParser.getParserHtmlText2Block("listItemParser"))==null?void 0:T(a));break;case"HR":s=await((L=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:L({element:a,flavour:"affine:divider"}));break;case"PRE":s=await((j=this._contentParser.getParserHtmlText2Block("codeBlockParser"))==null?void 0:j(a));break;case"FIGURE":case"IMG":s=await(($=this._contentParser.getParserHtmlText2Block("embedItemParser"))==null?void 0:$(a));break;case"HEADER":s=await((ee=this._contentParser.getParserHtmlText2Block("headerParser"))==null?void 0:ee(a));break;case"TABLE":s=await((Q=this._contentParser.getParserHtmlText2Block("tableParser"))==null?void 0:Q(a));break}if(s&&s.length>0)return s;if(a.childNodes.length>0&&!Array.from(a.childNodes).some(ie=>{if(ie.nodeType===Node.TEXT_NODE)return!1;if(ie.nodeType===Node.ELEMENT_NODE){const te=ie;return!(G7.includes(te.tagName)||te.tagName.includes("-")&&NT(te))}return!0})){const ie=await this._commonHTML2Block(a,"affine:paragraph","text");if(ie)return[ie]}const u=Array.from(a.children).map(async pe=>{var te;return await((te=this._contentParser.getParserHtmlText2Block("nodeParser"))==null?void 0:te(pe))||[]}),p=[];for(const pe of u)p.push(await pe);return p.flat().filter(pe=>pe)},this._commonParser=async({element:a,flavour:s,type:l,checked:d,ignoreEmptyElement:u=!0})=>{const p=await this._commonHTML2Block(a,s,l,d,u);return p?[p]:null},this._listItemParser=async a=>{var p,f,h,c,g,m,b,v,w,_,k,y;let l=((p=a.parentElement)==null?void 0:p.tagName)==="OL"?"numbered":"bulleted";if(((f=a.firstElementChild)==null?void 0:f.tagName)==="DETAIL"||((c=(h=a.firstElementChild)==null?void 0:h.firstElementChild)==null?void 0:c.tagName)==="SUMMARY"){const S=await((g=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:g({element:a.firstElementChild.firstElementChild,flavour:"affine:list",type:l})),C=a.firstElementChild.childNodes,I=[];for(let A=1;A<C.length;A++){const T=C.item(A);if(T&&T instanceof Element){const L=await this._nodeParser(T);L&&I.push(...L)}}return S&&S.length>0&&(S[0].children=[...S[0].children||[],...I]),S}let d,u;return(((m=u=a.firstElementChild)==null?void 0:m.tagName)==="INPUT"||((v=u=(b=a.firstElementChild)==null?void 0:b.firstElementChild)==null?void 0:v.tagName)==="INPUT")&&(l="todo",d=(u==null?void 0:u.getAttribute("checked"))!==null),a.firstChild instanceof Text&&((w=a.firstChild.textContent)!=null&&w.startsWith("[] ")?(a.firstChild.textContent=a.firstChild.textContent.slice(3),l="todo",d=!1):(_=a.firstChild.textContent)!=null&&_.startsWith("[ ] ")?(a.firstChild.textContent=a.firstChild.textContent.slice(4),l="todo",d=!1):(k=a.firstChild.textContent)!=null&&k.startsWith("[x] ")&&(a.firstChild.textContent=a.firstChild.textContent.slice(4),l="todo",d=!0)),(y=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:y({element:a,flavour:"affine:list",type:l,checked:d})},this._blockQuoteParser=async a=>{var d;const s=u=>{const p=[];return u.forEach(f=>{var g;const h=((g=f.text)==null?void 0:g.filter(m=>m.insert))||[];p.length>0&&h.length>0&&p.push({insert:`
`}),p.push(...h);const c=s(f.children||[])||[];p.length>0&&c.length>0&&p.push({insert:`
`}),p.push(...c)}),p},l=await((d=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:d({element:a,flavour:"affine:paragraph",type:"text"}));return l?[{flavour:"affine:paragraph",type:"quote",text:s(l),children:[]}]:null},this._codeBlockParser=async a=>{var f,h,c;const s=a.children[0],l=(f=s==null?void 0:s.getAttribute("class"))==null?void 0:f.split("-"),d=s.tagName==="Code"&&(l==null?void 0:l[0])==="language";let u="",p=Nv;return d?(u=((h=a.firstChild)==null?void 0:h.textContent)||"",p=((c=Fk(l==null?void 0:l[1]))==null?void 0:c.id)||Nv):u=a.textContent||"",[{flavour:"affine:code",text:[{insert:u}],children:[],language:p}]},this._embedItemParser=async a=>{var u;let s=[],l=null;const d=[];if(a.tagName==="FIGURE"){l=a.querySelector("img");const p=a.querySelector("figcaption");if(p){const f=await((u=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:u({element:p,flavour:"affine:paragraph",type:"text"}));f&&f.length>0&&d.push(...f[0].text||[])}}else a instanceof HTMLImageElement&&(l=a,d.push({insert:""}));if(l){const p=l.getAttribute("src")||"",f=await this._fetchFileHandler(p);if(!f||f.size===0)s=[{flavour:"affine:paragraph",type:"text",children:[],text:[{insert:p,attributes:{link:p}}]}];else{const h=this._page.blobs;xt(h),s=[{flavour:"affine:embed",type:"image",sourceId:await h.set(f),children:[],text:d}]}}return s},this._tableParser=async a=>{let s=[];if(this._customTableParserHandler&&(s=await this._customTableParserHandler(a),s&&s.length>0))return s;if(a.tagName==="TABLE"){const l=a.querySelector("thead"),d=a.querySelector("tbody"),u=l==null?void 0:l.querySelector("tr");let p=1;const f=[];u==null||u.querySelectorAll("th").forEach(v=>{f.push(v.textContent||"")});const h=[];d==null||d.querySelectorAll("tr").forEach(v=>{const w=[];v.querySelectorAll("td").forEach(_=>{w.push(_.textContent||"")}),h.push(w)});const c=f.slice(1).map((v,w)=>({name:v,type:"rich-text",width:200,hide:!1,id:""+p++}));if(h.length>0){let v=h[0].length;for(let _=1;_<h.length;_++)v=Math.max(v,h[_].length);const w=v-c.length;for(let _=0;_<w;_++)c.push({name:"",type:"rich-text",width:200,hide:!1,id:""+p++})}const g=p++,m={},b=[];h.forEach(v=>{b.push({flavour:"affine:paragraph",type:"text",text:[{insert:v[0]}],children:[]});const w=""+p++;m[w]={},v.slice(1).forEach((_,k)=>{m[w][c[k].id]={columnId:c[k].id,value:_}})}),s=[{flavour:"affine:database",databaseProps:{id:""+g,title:"Database",titleColumnName:f[0],titleColumnWidth:432,rowIds:Object.keys(m),cells:m,columns:c},children:b}]}return s},this._headerParser=async a=>{var u;let s=a;a.getElementsByClassName("page-title").length>0&&(s=a.getElementsByClassName("page-title")[0]);const l=s.tagName;return await((u=this._contentParser.getParserHtmlText2Block("commonParser"))==null?void 0:u({element:s,flavour:"affine:page",type:l.toLowerCase()}))},this._contentParser=e,this._page=t,this._customFetchFileHandler=r,this._customTextStyleHandler=o,this._customTableParserHandler=i}registerParsers(){this._contentParser.registerParserHtmlText2Block("nodeParser",this._nodeParser),this._contentParser.registerParserHtmlText2Block("commonParser",this._commonParser),this._contentParser.registerParserHtmlText2Block("listItemParser",this._listItemParser),this._contentParser.registerParserHtmlText2Block("blockQuoteParser",this._blockQuoteParser),this._contentParser.registerParserHtmlText2Block("codeBlockParser",this._codeBlockParser),this._contentParser.registerParserHtmlText2Block("embedItemParser",this._embedItemParser),this._contentParser.registerParserHtmlText2Block("tableParser",this._tableParser),this._contentParser.registerParserHtmlText2Block("headerParser",this._headerParser)}async _commonHTML2Block(e,t,r,o,i=!0){const a=e.childNodes;let s=!1;const l=[],d=[];for(let u=0;u<a.length;u++){const p=a.item(u);if(p&&p.nodeName!=="#comment"&&p.nodeName!=="STYLE"){if(!s){if(p instanceof Text){l.push(...this._commonHTML2Text(p,{},i));continue}const f=p;if(G7.includes(f.tagName)||f.tagName.includes("-")&&NT(f)){l.push(...this._commonHTML2Text(p,{},i));continue}}if(p instanceof Element){const f=await this._nodeParser(p);f&&d.push(...f)}s=!0}}return l.length===0&&d.length===1?{flavour:t,type:r,checked:o,text:d[0].text,children:d[0].children}:l.length===0&&d.length>0&&t==="affine:list"?{flavour:t,type:r,checked:o,text:d[0].text,children:d.slice(1)}:{flavour:t,type:r,checked:o,text:l,children:d}}_commonHTML2Text(e,t={},r=!0){if(e instanceof Text){let s=!1;return t.reference&&(s=t.reference.type==="LinkedPage"),(e.textContent||"").split(`
`).map(l=>({insert:s?" ":l,attributes:t}))}const o=e;if(o.classList.contains("katex-mathml"))return[];const i=Array.from(o.childNodes),a=Wae(o);return this._customTextStyleHandler&&this._customTextStyleHandler(o,a),i.length?i.reduce((s,l)=>{const d=this._commonHTML2Text(l,{...t,...a},r);return s.push(...d),s},[]).filter(s=>s):r?[]:[{insert:"",attributes:a}]}}const Uae=n=>["A"].includes(n.tagName),Wae=n=>{const e=n.tagName,t={},r=(n.getAttribute("style")||"").split(";").reduce((o,i)=>{const[a,s]=i.split(":");return a&&s&&(o[a]=s),o},{});if((r["font-weight"]==="bold"||Number(r["font-weight"])>400||["STRONG","B","H1","H2","H3","H4","H5","H6"].includes(n.tagName))&&(t.bold=!0),Uae(n)){const o=n.getAttribute("href")||n.getAttribute("src");t.link=o}return(e==="EM"||r.fontStyle==="italic")&&(t.italic=!0),(e==="U"||r["text-decoration"]&&r["text-decoration"].indexOf("underline")!==-1||r["border-bottom"])&&(t.underline=!0),e==="CODE"&&(t.code=!0),(e==="S"||e==="DEL"||r["text-decoration"]&&r["text-decoration"].indexOf("line-through")!==-1)&&(t.strike=!0),e==="MARK"&&(t.background="yellow"),t},NT=n=>window.getComputedStyle(n).display.includes("inline")||n.style.display.includes("inline");class I3{constructor(e,t,r,o){this.slots={beforeHtml2Block:new Yo},this._parsers={},this.urlPattern=new RegExp("(?<=\\s|^)https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)(?=\\s|$)","g"),this._page=e,this._htmlParser=new Zae(this,e,t,r,o),this._htmlParser.registerParsers()}async exportHtml(){const e=this._page.root;if(!e)return;const t=await this.block2Html(this._getSelectedBlock(e).children[1].children);e1.exportHtml(e.title.toString(),t)}async exportMarkdown(){const e=this._page.root;if(!e)return;const t=await this.block2Html(this._getSelectedBlock(e).children[1].children);e1.exportHtmlAsMarkdown(e.title.toString(),t)}async exportPng(){const e=this._page.root;if(!e)return;const t=Wf(this._page),r=document.createElement("style");r.textContent="editor-container,.affine-editor-container {height: auto;}",t.appendChild(r),e1.exportPng(e.title.toString(),await sie(t,{cacheBust:!0})),t.removeChild(r)}async exportPdf(){this._page.root&&window.print()}async block2Html(e){let t="";for(let r=0;r<e.length;r++)t=t+await this._getHtmlInfoBySelectionInfo(e[r]);return t}async block2Text(e){return(await Promise.all(e.map(t=>this._getTextInfoBySelectionInfo(t)))).reduce((t,r)=>t+r,"")}async htmlText2Block(e){var r;const t=document.createElement("html");return t.innerHTML=e,(r=t.querySelector("head"))==null||r.remove(),this.slots.beforeHtml2Block.emit(t),this._convertHtml2Blocks(t)}async file2Blocks(e){const t=Pie(e);if(t&&t.type.includes("image")){const r=this._page.blobs;return xt(r),[{flavour:"affine:embed",type:"image",sourceId:await r.set(t),children:[]}]}return[]}async markdown2Block(e){const t={name:"underline",level:"inline",start(i){return i.indexOf("~")},tokenizer(i){const s=/^~([^~]+)~/.exec(i);if(s)return{type:"underline",raw:s[0],text:s[1].trim()}},renderer(i){return`<u>${i.text}</u>`}},r={name:"inlineCode",level:"inline",start(i){return i.indexOf("`")},tokenizer(i){const s=/^(?:`)(`{2,}?|[^`]+)(?:`)$/g.exec(i);if(s)return{type:"inlineCode",raw:s[0],text:s[1].trim()}},renderer(i){return`<code>${i.text}</code>`}};wo.use({extensions:[t,r]});const o=wo.parse(e);return this.htmlText2Block(o)}async importMarkdown(e,t){const r=await this.markdown2Block(e),o=this._page.getBlockById(t);xt(o);const{getServiceOrRegister:i}=await uv(()=>Promise.resolve().then(()=>P5),void 0);(await i(o.flavour)).json2Block(o,r)}async importHtml(e,t){const r=await this.htmlText2Block(e),o=this._page.getBlockById(t);xt(o);const{getServiceOrRegister:i}=await uv(()=>Promise.resolve().then(()=>P5),void 0);(await i(o.flavour)).json2Block(o,r)}registerParserHtmlText2Block(e,t){this._parsers[e]=t}getParserHtmlText2Block(e){return this._parsers[e]||null}text2blocks(e){return e.split(`
`).map(t=>{const r=t.split(this.urlPattern),o=t.match(this.urlPattern),i=[];for(let a=0;a<r.length;a++)r[a]&&i.push({insert:r[a]}),o&&o[a]&&i.push({insert:o[a],attributes:{link:o[a]}});return{flavour:"affine:paragraph",type:"text",text:i,children:[]}})}_getSelectedBlock(e){return{id:e.id,children:e.children.map(t=>this._getSelectedBlock(t))}}async _getHtmlInfoBySelectionInfo(e){const t=this._page.getBlockById(e.id);if(!t)return"";const r=[];for(let a=0;a<e.children.length;a++){const s=await this._getHtmlInfoBySelectionInfo(e.children[a]);s&&r.push(s)}const{getServiceOrRegister:o}=await uv(()=>Promise.resolve().then(()=>P5),void 0);return(await o(t.flavour)).block2html(t,{childText:r.join(""),begin:e.startPos,end:e.endPos})}async _getTextInfoBySelectionInfo(e){const t=this._page.getBlockById(e.id);if(!t)return"";const r=[];for(const a of e.children){const s=await this._getTextInfoBySelectionInfo(a);s&&r.push(s)}const{getServiceOrRegister:o}=await uv(()=>Promise.resolve().then(()=>P5),void 0);return(await o(t.flavour)).block2Text(t,{childText:r.join(""),begin:e.startPos,end:e.endPos})}async _convertHtml2Blocks(e){const t=Array.from(e.children).map(async o=>{var i;return await((i=this.getParserHtmlText2Block("nodeParser"))==null?void 0:i(o))||[]}),r=[];for(const o of t)r.push(await o);return r.flat().filter(o=>o)}}const hd=vr`
  tool-tip {
    font-family: var(--affine-font-family);
    position: absolute;

    inline-size: max-content;
    text-align: center;
    font-size: var(--affine-font-sm);
    padding: 4px 12px;
    color: var(--affine-white);
    background: var(--affine-tooltip);
    opacity: 0;
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: none;
    user-select: none;

    /* Default is top-start */
    left: 0;
    top: 0;
    border-radius: 10px 10px 10px 0;
    transform: translate(0, calc(-100% - 8px));
  }

  tool-tip:is([tip-position='top']) {
    left: 50%;
    border-radius: 10px;
    transform: translate(-50%, calc(-100% - 8px));
  }
  tool-tip:is([tip-position='right']) {
    left: unset;
    right: 0;
    transform: translateX(calc(100% + 8px));
    border-radius: 0 10px 10px 10px;
  }
  tool-tip:is([tip-position='left']) {
    left: 0;
    top: 50%;
    transform: translate(calc(-100% - 8px), -50%);
    border-radius: 10px 10px 0 10px;
  }
  tool-tip:is([tip-position='bottom']) {
    top: unset;
    left: 50%;
    bottom: 0;
    transform: translate(-50%, calc(100% + 8px));
    border-radius: 10px;
  }

  /* work for tip-position='top' */
  tool-tip:is([arrow]):is([tip-position='top']) {
    transform: translate(-50%, calc(-100% - 16px));
  }
  tool-tip:is([arrow]):is([tip-position='top'])::before {
    position: absolute;
    content: '';
    left: 50%;
    bottom: 0;
    transform: translate(-50%, 100%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 6px solid var(--affine-tooltip);
  }

  /* work for tip-position='right' */
  tool-tip:is([arrow]):is([tip-position='right']) {
    transform: translateX(calc(100% + 16px));
  }
  tool-tip:is([arrow]):is([tip-position='right'])::before {
    position: absolute;
    content: '';
    left: 0;
    bottom: 50%;
    transform: translate(-100%, 50%);
    width: 0;
    height: 0;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-right: 6px solid var(--affine-tooltip);
  }

  /* work for tip-position='left' */
  tool-tip:is([arrow]):is([tip-position='left']) {
    transform: translate(calc(-100% - 16px), -50%);
  }
  tool-tip:is([arrow]):is([tip-position='left'])::before {
    position: absolute;
    content: '';
    right: 0;
    bottom: 50%;
    transform: translate(100%, 50%);
    width: 0;
    height: 0;
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
    border-left: 6px solid var(--affine-tooltip);
  }

  /* work for tip-position='bottom' */
  tool-tip:is([arrow]):is([tip-position='bottom']) {
    transform: translate(-50%, calc(100% + 16px));
  }
  tool-tip:is([arrow]):is([tip-position='bottom'])::before {
    position: absolute;
    content: '';
    left: 50%;
    top: 0;
    transform: translate(-50%, -100%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 6px solid var(--affine-tooltip);
  }

  .has-tool-tip {
    position: relative;
  }
  .has-tool-tip:is(:hover, :focus-visible, :active) > tool-tip {
    opacity: 1;
    transition-delay: 200ms;
  }
`,Vae=rt`
  <svg
    width="16"
    height="16"
    viewBox="0 0 16 16"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3334_77372)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M2.71294 6.47927C2.9781 6.34125 3.27709 6.21883 3.59925 6.11144C4.18904 5.91485 4.88593 5.759 5.65385 5.65385C5.759 4.88593 5.91485 4.18904 6.11144 3.59925C6.21883 3.27709 6.34125 2.9781 6.47927 2.71294C4.66435 3.23402 3.23402 4.66435 2.71294 6.47927ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5ZM8 2.5C7.94272 2.5 7.80858 2.53437 7.61422 2.781C7.42429 3.02199 7.23139 3.4017 7.06013 3.91547C6.90527 4.38004 6.77549 4.9317 6.67997 5.5472C7.10671 5.5162 7.5484 5.5 8 5.5C8.4516 5.5 8.89329 5.5162 9.32003 5.5472C9.22451 4.9317 9.09473 4.38004 8.93987 3.91547C8.76861 3.4017 8.57571 3.02199 8.38579 2.781C8.19142 2.53437 8.05728 2.5 8 2.5ZM10.3461 5.65385C10.241 4.88593 10.0852 4.18904 9.88856 3.59925C9.78117 3.27709 9.65875 2.9781 9.52073 2.71294C11.3357 3.23402 12.766 4.66435 13.2871 6.47927C13.0219 6.34125 12.7229 6.21883 12.4008 6.11144C11.811 5.91485 11.1141 5.759 10.3461 5.65385ZM9.44027 6.55973C8.98158 6.52087 8.49906 6.5 8 6.5C7.50094 6.5 7.01842 6.52087 6.55973 6.55973C6.52087 7.01842 6.5 7.50094 6.5 8C6.5 8.49906 6.52087 8.98158 6.55973 9.44027C7.01842 9.47913 7.50094 9.5 8 9.5C8.49906 9.5 8.98158 9.47913 9.44027 9.44027C9.47913 8.98158 9.5 8.49906 9.5 8C9.5 7.50094 9.47913 7.01842 9.44027 6.55973ZM10.4528 9.32002C10.4838 8.89329 10.5 8.4516 10.5 8C10.5 7.5484 10.4838 7.10671 10.4528 6.67998C11.0683 6.7755 11.62 6.90527 12.0845 7.06013C12.5983 7.23139 12.978 7.42429 13.219 7.61422C13.4656 7.80858 13.5 7.94272 13.5 8C13.5 8.05728 13.4656 8.19142 13.219 8.38579C12.978 8.57571 12.5983 8.76861 12.0845 8.93987C11.62 9.09473 11.0683 9.2245 10.4528 9.32002ZM9.32003 10.4528C8.89329 10.4838 8.4516 10.5 8 10.5C7.5484 10.5 7.10671 10.4838 6.67998 10.4528C6.7755 11.0683 6.90527 11.62 7.06013 12.0845C7.23139 12.5983 7.42429 12.978 7.61422 13.219C7.80858 13.4656 7.94272 13.5 8 13.5C8.05728 13.5 8.19142 13.4656 8.38579 13.219C8.57571 12.978 8.76861 12.5983 8.93987 12.0845C9.09473 11.62 9.22451 11.0683 9.32003 10.4528ZM9.52073 13.2871C9.65875 13.0219 9.78117 12.7229 9.88856 12.4008C10.0852 11.811 10.241 11.1141 10.3461 10.3461C11.1141 10.241 11.811 10.0852 12.4008 9.88856C12.7229 9.78117 13.0219 9.65875 13.2871 9.52073C12.766 11.3357 11.3357 12.766 9.52073 13.2871ZM6.47927 13.2871C4.66435 12.766 3.23402 11.3357 2.71294 9.52073C2.9781 9.65875 3.27709 9.78117 3.59925 9.88856C4.18904 10.0852 4.88593 10.241 5.65385 10.3461C5.759 11.1141 5.91485 11.811 6.11144 12.4008C6.21883 12.7229 6.34125 13.0219 6.47927 13.2871ZM5.5472 9.32003C4.9317 9.22451 4.38004 9.09473 3.91547 8.93987C3.4017 8.76861 3.02199 8.57571 2.781 8.38579C2.53437 8.19142 2.5 8.05728 2.5 8C2.5 7.94272 2.53437 7.80858 2.781 7.61422C3.02199 7.42429 3.4017 7.23139 3.91547 7.06013C4.38004 6.90527 4.9317 6.7755 5.5472 6.67998C5.5162 7.10671 5.5 7.5484 5.5 8C5.5 8.4516 5.5162 8.89329 5.5472 9.32003Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3334_77372">
        <rect width="16" height="16" fill="white" />
      </clipPath>
    </defs>
  </svg>
`,Kae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77646)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M4.70834 12C4.70834 7.97292 7.97293 4.70833 12 4.70833C13.8671 4.70833 15.5717 5.41092 16.8613 6.56516L16.8633 6.56695L18.0417 7.63079V5.33333C18.0417 4.98815 18.3215 4.70833 18.6667 4.70833C19.0119 4.70833 19.2917 4.98815 19.2917 5.33333V9.03704C19.2917 9.38221 19.0119 9.66204 18.6667 9.66204H14.963C14.6178 9.66204 14.338 9.38221 14.338 9.03704C14.338 8.69186 14.6178 8.41204 14.963 8.41204H17.0417L16.0276 7.49658C16.0273 7.49628 16.027 7.49599 16.0266 7.49569C14.9575 6.53917 13.5473 5.95833 12 5.95833C8.66329 5.95833 5.95834 8.66328 5.95834 12C5.95834 15.3367 8.66329 18.0417 12 18.0417C14.8745 18.0417 17.2815 16.0336 17.892 13.3432C17.9684 13.0066 18.3032 12.7956 18.6398 12.872C18.9764 12.9484 19.1874 13.2832 19.111 13.6198C18.3741 16.8671 15.471 19.2917 12 19.2917C7.97293 19.2917 4.70834 16.0271 4.70834 12Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77646">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,Yae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77647)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M11.3166 3.87493C11.3513 3.87497 11.3864 3.875 11.422 3.875H12.578C12.6136 3.875 12.6487 3.87497 12.6834 3.87493C13.2704 3.87439 13.7306 3.87396 14.1375 4.03401C14.4945 4.17443 14.8106 4.40223 15.0567 4.69654C15.3372 5.032 15.4824 5.46866 15.6674 6.02568C15.6784 6.05861 15.6895 6.09197 15.7007 6.12575L15.7838 6.375H18.6667C19.0119 6.375 19.2917 6.65482 19.2917 7C19.2917 7.34518 19.0119 7.625 18.6667 7.625H17.625V15.5268C17.625 16.2041 17.625 16.7505 17.5889 17.1929C17.5517 17.6484 17.473 18.0485 17.2844 18.4187C16.9848 19.0067 16.5067 19.4848 15.9187 19.7844C15.5485 19.973 15.1484 20.0516 14.6929 20.0889C14.2505 20.125 13.7041 20.125 13.0268 20.125H10.9732C10.2959 20.125 9.74954 20.125 9.30712 20.0889C8.85159 20.0516 8.45147 19.973 8.08129 19.7844C7.49328 19.4848 7.01522 19.0067 6.71561 18.4187C6.527 18.0485 6.44836 17.6484 6.41115 17.1929C6.375 16.7505 6.375 16.2041 6.37501 15.5268L6.37501 7.625H5.33334C4.98817 7.625 4.70834 7.34518 4.70834 7C4.70834 6.65482 4.98817 6.375 5.33334 6.375H8.2162L8.29929 6.12575C8.31055 6.09197 8.32163 6.05861 8.33257 6.02568C8.51767 5.46866 8.66277 5.032 8.9433 4.69654C9.18942 4.40224 9.50548 4.17443 9.86251 4.03401C10.2695 3.87396 10.7296 3.87439 11.3166 3.87493ZM8.65226 7.625C8.66195 7.62522 8.67162 7.62522 8.68127 7.625H15.3188C15.3284 7.62522 15.3381 7.62522 15.3478 7.625H16.375V15.5C16.375 16.2104 16.3745 16.7056 16.343 17.0911C16.3121 17.4693 16.2545 17.6866 16.1706 17.8512C15.9909 18.204 15.704 18.4909 15.3512 18.6706C15.1866 18.7545 14.9693 18.8121 14.5911 18.843C14.2056 18.8745 13.7104 18.875 13 18.875H11C10.2896 18.875 9.79444 18.8745 9.40891 18.843C9.03068 18.8121 8.81338 18.7545 8.64878 18.6706C8.29597 18.4909 8.00914 18.204 7.82937 17.8512C7.74551 17.6866 7.6879 17.4693 7.657 17.0911C7.6255 16.7056 7.62501 16.2104 7.62501 15.5V7.625H8.65226ZM14.466 6.375H9.53401C9.73142 5.78788 9.8018 5.61848 9.9022 5.49843C10.0141 5.36465 10.1577 5.2611 10.32 5.19728C10.4771 5.1355 10.6776 5.125 11.422 5.125H12.578C13.3225 5.125 13.5229 5.1355 13.68 5.19728C13.8423 5.2611 13.986 5.36465 14.0978 5.49843C14.1982 5.61848 14.2686 5.78788 14.466 6.375ZM10.3333 9.70833C10.6785 9.70833 10.9583 9.98815 10.9583 10.3333V16.1667C10.9583 16.5118 10.6785 16.7917 10.3333 16.7917C9.98817 16.7917 9.70834 16.5118 9.70834 16.1667V10.3333C9.70834 9.98815 9.98817 9.70833 10.3333 9.70833ZM13.6667 9.70833C14.0119 9.70833 14.2917 9.98815 14.2917 10.3333V16.1667C14.2917 16.5118 14.0119 16.7917 13.6667 16.7917C13.3215 16.7917 13.0417 16.5118 13.0417 16.1667V10.3333C13.0417 9.98815 13.3215 9.70833 13.6667 9.70833Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77647">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,Gae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77641)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M15.245 6.43527L14.543 7.16176L16.8382 9.45697L17.5647 8.755C18.2018 8.11415 18.2006 7.07817 17.5612 6.43876C16.9218 5.79935 15.8859 5.79819 15.245 6.43527ZM15.9392 10.3257L13.6743 8.06082L7.13833 14.8251L6.2655 17.7345L9.17493 16.8617L15.9392 10.3257ZM14.3576 5.55488C15.4863 4.42615 17.3164 4.42615 18.4451 5.55488C19.5738 6.68361 19.5738 8.51364 18.4451 9.64238L18.4375 9.64996L9.93429 17.8661C9.86252 17.9355 9.77518 17.9866 9.67959 18.0153L5.51292 19.2653C5.29269 19.3314 5.05397 19.2712 4.89139 19.1086C4.7288 18.946 4.66862 18.7073 4.73469 18.4871L5.98469 14.3204C6.01337 14.2248 6.06452 14.1375 6.13387 14.0657L14.3576 5.55488Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77641">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,Xae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77679)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M12.7019 5.83896C14.2094 4.33145 16.6535 4.33145 18.161 5.83896C19.6685 7.34646 19.6685 9.79061 18.161 11.2981L16.4453 13.0138C16.2012 13.2579 15.8055 13.2579 15.5614 13.0138C15.3173 12.7698 15.3173 12.374 15.5614 12.13L17.2771 10.4142C18.2965 9.39488 18.2965 7.74219 17.2771 6.72284C16.2578 5.70349 14.6051 5.70349 13.5857 6.72284L11.2981 9.01048C10.2788 10.0298 10.2788 11.6825 11.2981 12.7019C11.4581 12.8619 11.633 12.9963 11.818 13.1055C12.1152 13.281 12.2138 13.6643 12.0383 13.9615C11.8628 14.2587 11.4795 14.3573 11.1823 14.1818C10.9076 14.0196 10.6492 13.8207 10.4142 13.5858C8.90671 12.0782 8.90671 9.6341 10.4142 8.1266L12.7019 5.83896ZM11.9617 10.0385C12.1372 9.74129 12.5204 9.64265 12.8177 9.81819C13.0924 9.98043 13.3508 10.1793 13.5857 10.4142C15.0932 11.9217 15.0932 14.3659 13.5857 15.8734L11.2981 18.161C9.7906 19.6685 7.34645 19.6685 5.83894 18.161C4.33144 16.6535 4.33144 14.2094 5.83894 12.7019L7.55467 10.9861C7.79875 10.7421 8.19448 10.7421 8.43855 10.9861C8.68263 11.2302 8.68263 11.6259 8.43855 11.87L6.72283 13.5858C5.70348 14.6051 5.70348 16.2578 6.72283 17.2771C7.74218 18.2965 9.39487 18.2965 10.4142 17.2771L12.7019 14.9895C13.7212 13.9702 13.7212 12.3175 12.7019 11.2981C12.5418 11.1381 12.367 11.0037 12.182 10.8945C11.8848 10.719 11.7861 10.3357 11.9617 10.0385Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77679">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,qae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77644)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M11.308 4.70833H16.0254C16.4705 4.70832 16.842 4.70832 17.1456 4.73312C17.4621 4.75898 17.7594 4.81491 18.0404 4.95811C18.4716 5.17782 18.8222 5.5284 19.0419 5.9596C19.1851 6.24066 19.241 6.53787 19.2669 6.85444C19.2917 7.15797 19.2917 7.5295 19.2917 7.97462V12.692C19.2917 13.1372 19.2917 13.5087 19.2669 13.8122C19.241 14.1288 19.1851 14.426 19.0419 14.7071C18.8222 15.1383 18.4716 15.4888 18.0404 15.7086C17.7594 15.8518 17.4621 15.9077 17.1456 15.9336C16.842 15.9584 16.4705 15.9583 16.0254 15.9583H15.9583V16.0254C15.9584 16.4705 15.9584 16.842 15.9336 17.1456C15.9077 17.4621 15.8518 17.7593 15.7086 18.0404C15.4889 18.4716 15.1383 18.8222 14.7071 19.0419C14.426 19.1851 14.1288 19.241 13.8122 19.2669C13.5087 19.2917 13.1372 19.2917 12.6921 19.2917H7.97463C7.52951 19.2917 7.15798 19.2917 6.85445 19.2669C6.53788 19.241 6.24067 19.1851 5.95962 19.0419C5.52841 18.8222 5.17783 18.4716 4.95812 18.0404C4.81492 17.7593 4.75899 17.4621 4.73313 17.1456C4.70833 16.842 4.70833 16.4705 4.70834 16.0254V11.308C4.70833 10.8628 4.70833 10.4913 4.73313 10.1878C4.75899 9.8712 4.81492 9.57399 4.95812 9.29294C5.17783 8.86173 5.52841 8.51115 5.95962 8.29144C6.24067 8.14824 6.53788 8.09231 6.85445 8.06645C7.15798 8.04165 7.52952 8.04166 7.97465 8.04167L8.04168 8.04167L8.04168 7.97464C8.04167 7.52951 8.04166 7.15797 8.06646 6.85444C8.09233 6.53787 8.14825 6.24066 8.29145 5.9596C8.51116 5.5284 8.86174 5.17782 9.29295 4.95811C9.574 4.81491 9.87122 4.75898 10.1878 4.73312C10.4913 4.70832 10.8629 4.70832 11.308 4.70833ZM8.04168 9.29167H8.00001C7.52299 9.29167 7.20281 9.29215 6.95624 9.3123C6.71697 9.33185 6.60257 9.36675 6.5271 9.4052C6.3311 9.50507 6.17175 9.66442 6.07188 9.86043C6.03343 9.93589 5.99852 10.0503 5.97898 10.2896C5.95883 10.5361 5.95834 10.8563 5.95834 11.3333V16C5.95834 16.477 5.95883 16.7972 5.97898 17.0438C5.99852 17.283 6.03343 17.3974 6.07188 17.4729C6.17175 17.6689 6.3311 17.8283 6.5271 17.9281C6.60257 17.9666 6.71697 18.0015 6.95624 18.021C7.20281 18.0412 7.52299 18.0417 8.00001 18.0417H12.6667C13.1437 18.0417 13.4639 18.0412 13.7104 18.021C13.9497 18.0015 14.0641 17.9666 14.1396 17.9281C14.3356 17.8283 14.4949 17.6689 14.5948 17.4729C14.6333 17.3974 14.6682 17.283 14.6877 17.0438C14.7079 16.7972 14.7083 16.477 14.7083 16V15.9583H11.308C10.8628 15.9583 10.4913 15.9584 10.1878 15.9336C9.87122 15.9077 9.574 15.8518 9.29295 15.7086C8.86174 15.4888 8.51116 15.1383 8.29145 14.7071C8.14825 14.426 8.09233 14.1288 8.06646 13.8122C8.04166 13.5087 8.04167 13.1372 8.04168 12.692L8.04168 9.29167ZM11.3333 14.7083C10.8563 14.7083 10.5361 14.7078 10.2896 14.6877C10.0503 14.6682 9.93591 14.6333 9.86044 14.5948C9.66444 14.4949 9.50508 14.3356 9.40521 14.1396C9.36676 14.0641 9.33186 13.9497 9.31231 13.7104C9.29216 13.4639 9.29168 13.1437 9.29168 12.6667V8C9.29168 7.52298 9.29216 7.2028 9.31231 6.95623C9.33186 6.71696 9.36676 6.60256 9.40521 6.52709C9.50508 6.33109 9.66444 6.17174 9.86044 6.07187C9.93591 6.03342 10.0503 5.99851 10.2896 5.97896C10.5361 5.95882 10.8563 5.95833 11.3333 5.95833H16C16.477 5.95833 16.7972 5.95882 17.0438 5.97896C17.2831 5.99851 17.3975 6.03342 17.4729 6.07187C17.6689 6.17174 17.8283 6.33109 17.9281 6.52709C17.9666 6.60256 18.0015 6.71696 18.021 6.95623C18.0412 7.2028 18.0417 7.52298 18.0417 8V12.6667C18.0417 13.1437 18.0412 13.4639 18.021 13.7104C18.0015 13.9497 17.9666 14.0641 17.9281 14.1396C17.8283 14.3356 17.6689 14.4949 17.4729 14.5948C17.3975 14.6333 17.2831 14.6682 17.0438 14.6877C16.7972 14.7078 16.477 14.7083 16 14.7083H11.3333Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77644">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,Jae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77683)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M4.70831 6.16666C4.70831 5.36125 5.36123 4.70833 6.16665 4.70833H9.49998C10.3054 4.70833 10.9583 5.36125 10.9583 6.16666V9.49999C10.9583 10.3054 10.3054 10.9583 9.49998 10.9583H6.16665C5.36123 10.9583 4.70831 10.3054 4.70831 9.49999V6.16666ZM6.16665 5.95833C6.05159 5.95833 5.95831 6.0516 5.95831 6.16666V9.49999C5.95831 9.61505 6.05159 9.70833 6.16665 9.70833H9.49998C9.61504 9.70833 9.70831 9.61505 9.70831 9.49999V6.16666C9.70831 6.0516 9.61504 5.95833 9.49998 5.95833H6.16665Z"
        fill="currentColor"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M4.70831 18.6667C4.70831 18.3215 4.98814 18.0417 5.33331 18.0417L15.3333 18.0417C15.6785 18.0417 15.9583 18.3215 15.9583 18.6667C15.9583 19.0118 15.6785 19.2917 15.3333 19.2917L5.33331 19.2917C4.98813 19.2917 4.70831 19.0118 4.70831 18.6667Z"
        fill="currentColor"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M4.70831 14.5C4.70831 14.1548 4.98814 13.875 5.33331 13.875L18.6666 13.875C19.0118 13.875 19.2916 14.1548 19.2916 14.5C19.2916 14.8452 19.0118 15.125 18.6666 15.125L5.33331 15.125C4.98813 15.125 4.70831 14.8452 4.70831 14.5Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77683">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,Qae=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_77645)">
      <path
        d="M11.375 9.5C11.375 9.84518 11.6548 10.125 12 10.125H12.9911L8.22474 14.8914C7.98066 15.1355 7.98066 15.5312 8.22474 15.7753C8.46881 16.0194 8.86454 16.0194 9.10862 15.7753L13.875 11.0089V12C13.875 12.3452 14.1548 12.625 14.5 12.625C14.8452 12.625 15.125 12.3452 15.125 12V9.58333C15.125 9.56886 15.1246 9.5545 15.1237 9.54024C15.1348 9.36716 15.0742 9.19034 14.942 9.05806C14.8097 8.92578 14.6328 8.86519 14.4598 8.87629C14.4455 8.87543 14.4311 8.875 14.4167 8.875H12C11.6548 8.875 11.375 9.15482 11.375 9.5Z"
        fill="currentColor"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M16.0254 4.70833H11.308C10.8629 4.70832 10.4913 4.70832 10.1878 4.73312C9.87122 4.75898 9.574 4.81491 9.29295 4.95811C8.86174 5.17782 8.51116 5.5284 8.29145 5.9596C8.14825 6.24066 8.09233 6.53787 8.06646 6.85444C8.04166 7.15797 8.04167 7.5295 8.04168 7.97463L8.04168 8.04167L7.97465 8.04167C7.52953 8.04166 7.15798 8.04165 6.85445 8.06645C6.53788 8.09231 6.24067 8.14824 5.95962 8.29144C5.52841 8.51115 5.17783 8.86173 4.95812 9.29294C4.81492 9.57399 4.75899 9.8712 4.73313 10.1878C4.70833 10.4913 4.70834 10.8628 4.70834 11.308V16.0254C4.70834 16.4705 4.70833 16.842 4.73313 17.1456C4.75899 17.4621 4.81492 17.7593 4.95812 18.0404C5.17783 18.4716 5.52841 18.8222 5.95962 19.0419C6.24067 19.1851 6.53788 19.241 6.85445 19.2669C7.15798 19.2917 7.52951 19.2917 7.97463 19.2917H12.6921C13.1372 19.2917 13.5087 19.2917 13.8122 19.2669C14.1288 19.241 14.426 19.1851 14.7071 19.0419C15.1383 18.8222 15.4889 18.4716 15.7086 18.0404C15.8518 17.7593 15.9077 17.4621 15.9336 17.1456C15.9584 16.842 15.9584 16.4705 15.9583 16.0254V15.9583H16.0254C16.4705 15.9583 16.8421 15.9583 17.1456 15.9335C17.4621 15.9077 17.7594 15.8518 18.0404 15.7086C18.4716 15.4888 18.8222 15.1383 19.0419 14.7071C19.1851 14.426 19.241 14.1288 19.2669 13.8122C19.2917 13.5087 19.2917 13.1372 19.2917 12.692V7.97462C19.2917 7.5295 19.2917 7.15797 19.2669 6.85444C19.241 6.53787 19.1851 6.24066 19.0419 5.9596C18.8222 5.5284 18.4716 5.17782 18.0404 4.95811C17.7594 4.81491 17.4621 4.75898 17.1456 4.73312C16.842 4.70832 16.4705 4.70832 16.0254 4.70833ZM8.04168 11.1667V9.29167H8.00001C7.52299 9.29167 7.20281 9.29215 6.95624 9.3123C6.71697 9.33185 6.60257 9.36675 6.5271 9.4052C6.3311 9.50507 6.17175 9.66442 6.07188 9.86043C6.03343 9.93589 5.99852 10.0503 5.97898 10.2896C5.95883 10.5361 5.95834 10.8563 5.95834 11.3333V16C5.95834 16.477 5.95883 16.7972 5.97898 17.0438C5.99852 17.283 6.03343 17.3974 6.07188 17.4729C6.17175 17.6689 6.3311 17.8283 6.5271 17.9281C6.60257 17.9666 6.71697 18.0015 6.95624 18.021C7.20281 18.0412 7.52299 18.0417 8.00001 18.0417H12.6667C13.1437 18.0417 13.4639 18.0412 13.7104 18.021C13.9497 18.0015 14.0641 17.9666 14.1396 17.9281C14.3356 17.8283 14.4949 17.6689 14.5948 17.4729C14.6333 17.3974 14.6682 17.283 14.6877 17.0438C14.7079 16.7972 14.7083 16.477 14.7083 16V15.9583H12.8333C12.4882 15.9583 12.2083 15.6785 12.2083 15.3333C12.2083 14.9882 12.4882 14.7083 12.8333 14.7083H16C16.477 14.7083 16.7972 14.7078 17.0438 14.6877C17.283 14.6682 17.3974 14.6333 17.4729 14.5948C17.6689 14.4949 17.8283 14.3356 17.9281 14.1396C17.9666 14.0641 18.0015 13.9497 18.021 13.7104C18.0412 13.4639 18.0417 13.1437 18.0417 12.6667V8C18.0417 7.52298 18.0412 7.2028 18.021 6.95623C18.0015 6.71696 17.9666 6.60256 17.9281 6.52709C17.8283 6.33109 17.6689 6.17174 17.4729 6.07187C17.3974 6.03342 17.283 5.99851 17.0438 5.97896C16.7972 5.95882 16.477 5.95833 16 5.95833H11.3333C10.8563 5.95833 10.5361 5.95882 10.2896 5.97896C10.0503 5.99851 9.9359 6.03342 9.86044 6.07187C9.66444 6.17174 9.50508 6.33109 9.40521 6.52709C9.36676 6.60256 9.33186 6.71696 9.31231 6.95623C9.29216 7.2028 9.29168 7.52298 9.29168 8V11.1667C9.29168 11.5118 9.01186 11.7917 8.66668 11.7917C8.3215 11.7917 8.04168 11.5118 8.04168 11.1667Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_77645">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,VN=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3409_76820)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M6.34314 6.34314C6.63604 6.05025 7.11091 6.05025 7.4038 6.34314L12 10.9393L16.5962 6.34314C16.8891 6.05025 17.364 6.05025 17.6569 6.34314C17.9497 6.63604 17.9497 7.11091 17.6569 7.4038L13.0607 12L17.6569 16.5962C17.9497 16.8891 17.9497 17.364 17.6569 17.6569C17.364 17.9497 16.8891 17.9497 16.5962 17.6569L12 13.0607L7.4038 17.6569C7.11091 17.9497 6.63604 17.9497 6.34314 17.6569C6.05025 17.364 6.05025 16.8891 6.34314 16.5962L10.9393 12L6.34314 7.4038C6.05025 7.11091 6.05025 6.63604 6.34314 6.34314Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3409_76820">
        <rect width="24" height="24" fill="white" />
      </clipPath>
    </defs>
  </svg>
`,ese=rt`
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_3407_76065)">
      <path
        d="M12 6.99999C11.5398 6.99999 11.1667 6.6269 11.1667 6.16666C11.1667 5.70642 11.5398 5.33333 12 5.33333C12.4602 5.33333 12.8333 5.70642 12.8333 6.16666C12.8333 6.6269 12.4602 6.99999 12 6.99999Z"
        fill="currentColor"
      />
      <path
        d="M12 12.8333C11.5398 12.8333 11.1667 12.4602 11.1667 12C11.1667 11.5398 11.5398 11.1667 12 11.1667C12.4602 11.1667 12.8333 11.5398 12.8333 12C12.8333 12.4602 12.4602 12.8333 12 12.8333Z"
        fill="currentColor"
      />
      <path
        d="M12 18.6667C11.5398 18.6667 11.1667 18.2936 11.1667 17.8333C11.1667 17.3731 11.5398 17 12 17C12.4602 17 12.8333 17.3731 12.8333 17.8333C12.8333 18.2936 12.4602 18.6667 12 18.6667Z"
        fill="currentColor"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M12 5.75001C11.7699 5.75001 11.5833 5.93655 11.5833 6.16667C11.5833 6.39679 11.7699 6.58334 12 6.58334C12.2301 6.58334 12.4167 6.39679 12.4167 6.16667C12.4167 5.93655 12.2301 5.75001 12 5.75001ZM10.75 6.16667C10.75 5.47632 11.3096 4.91667 12 4.91667C12.6904 4.91667 13.25 5.47632 13.25 6.16667C13.25 6.85703 12.6904 7.41667 12 7.41667C11.3096 7.41667 10.75 6.85703 10.75 6.16667ZM12 11.5833C11.7699 11.5833 11.5833 11.7699 11.5833 12C11.5833 12.2301 11.7699 12.4167 12 12.4167C12.2301 12.4167 12.4167 12.2301 12.4167 12C12.4167 11.7699 12.2301 11.5833 12 11.5833ZM10.75 12C10.75 11.3096 11.3096 10.75 12 10.75C12.6904 10.75 13.25 11.3096 13.25 12C13.25 12.6904 12.6904 13.25 12 13.25C11.3096 13.25 10.75 12.6904 10.75 12ZM12 17.4167C11.7699 17.4167 11.5833 17.6032 11.5833 17.8333C11.5833 18.0635 11.7699 18.25 12 18.25C12.2301 18.25 12.4167 18.0635 12.4167 17.8333C12.4167 17.6032 12.2301 17.4167 12 17.4167ZM10.75 17.8333C10.75 17.143 11.3096 16.5833 12 16.5833C12.6904 16.5833 13.25 17.143 13.25 17.8333C13.25 18.5237 12.6904 19.0833 12 19.0833C11.3096 19.0833 10.75 18.5237 10.75 17.8333Z"
        fill="currentColor"
      />
    </g>
    <defs>
      <clipPath id="clip0_3407_76065">
        <rect width="20" height="20" fill="white" transform="translate(2 2)" />
      </clipPath>
    </defs>
  </svg>
`,tse=rt`
  <svg
    width="140"
    height="96"
    viewBox="0 0 140 96"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_4257_88403)">
      <g opacity="0.4">
        <g clip-path="url(#clip1_4257_88403)">
          <g clip-path="url(#clip2_4257_88403)">
            <g opacity="0.8" filter="url(#filter0_f_4257_88403)">
              <ellipse
                cx="45.5713"
                cy="61.2938"
                rx="45.5713"
                ry="61.2938"
                transform="matrix(-0.275152 -0.961401 0.994111 -0.108365 23.6692 80.3025)"
                fill="#C0BFC1"
              />
            </g>
            <g opacity="0.8" filter="url(#filter1_f_4257_88403)">
              <ellipse
                cx="49.6555"
                cy="50.1114"
                rx="49.6555"
                ry="50.1114"
                transform="matrix(-0.517539 -0.855659 0.945307 -0.326182 10.3975 87.9766)"
                fill="#C0BFC1"
              />
            </g>
            <g opacity="0.8" filter="url(#filter2_f_4257_88403)">
              <path
                d="M141.154 3.03247C167.539 22.8936 134.54 99.5878 124.212 92.7915C117.912 88.6456 113.733 60.4772 94.173 45.9086C81.6691 36.5955 56.6586 38.5939 41.1056 37.1878C1.22291 33.5821 114.548 -16.9943 141.154 3.03247Z"
                fill="#C0BFC1"
              />
            </g>
            <path
              d="M78.5971 45.1263C77.9794 49.5216 81.121 53.5957 85.6131 54.2271C90.1053 54.8584 94.2481 51.808 94.8658 47.4128C95.4835 43.0175 92.342 38.9434 87.8498 38.312C83.3577 37.6807 79.2149 40.7311 78.5971 45.1263Z"
              fill="url(#paint0_linear_4257_88403)"
            />
            <path
              d="M120.378 78.3637L119.989 81.1303C119.731 82.9654 119.562 84.15 119.36 85.0413C119.166 85.8959 118.999 86.1992 118.895 86.3451C118.499 86.9002 117.932 87.3171 117.277 87.5363C117.105 87.5938 116.76 87.6677 115.867 87.6141C114.934 87.5582 113.723 87.3905 111.847 87.1268L80.6109 82.7369C78.735 82.4733 77.524 82.3006 76.6125 82.0973C75.7385 81.9024 75.4276 81.7365 75.278 81.6337C74.7087 81.2424 74.2794 80.6856 74.0516 80.0428C73.9917 79.8739 73.9142 79.5361 73.9635 78.6612C74.0149 77.7488 74.1789 76.5635 74.4369 74.7283L75.6584 66.0369C75.8058 65.9369 75.9505 65.8411 76.0924 65.7498C77.1899 65.0437 78.3629 64.4423 79.7464 64.1873C81.8083 63.8072 83.9443 64.0829 85.8427 64.9742C87.1166 65.5723 88.0991 66.452 88.9822 67.4137C89.5619 68.0451 90.1807 68.8058 90.8604 69.6691L94.5285 66.9912C95.9295 65.9684 97.1371 65.0867 98.1922 64.4415C99.3051 63.761 100.491 63.1868 101.879 62.9626C103.947 62.6286 106.075 62.9506 107.951 63.8817C109.21 64.5065 110.172 65.4058 111.033 66.385C111.033 66.385 117.277 74.3919 120.378 78.3637Z"
              fill="url(#paint1_linear_4257_88403)"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M18.0193 52.2289C18.1346 51.4086 18.8931 50.837 19.7134 50.9523L67.2463 57.6326C68.0667 57.7479 68.6382 58.5064 68.5229 59.3268C68.4076 60.1471 67.6491 60.7187 66.8288 60.6034L19.2959 53.9231C18.4755 53.8078 17.904 53.0493 18.0193 52.2289Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M21.5681 26.9771C21.7218 25.8833 22.7332 25.1212 23.827 25.2749L47.5934 28.6151C48.6872 28.7688 49.4493 29.7801 49.2956 30.874C49.1419 31.9678 48.1305 32.7299 47.0367 32.5762L23.2703 29.236C22.1765 29.0823 21.4144 28.0709 21.5681 26.9771Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M19.55 41.336C19.6653 40.5156 20.4238 39.9441 21.2442 40.0593L68.7771 46.7397C69.5974 46.8549 70.169 47.6135 70.0537 48.4338C69.9384 49.2542 69.1799 49.8258 68.3595 49.7105L20.8267 43.0301C20.0063 42.9149 19.4347 42.1564 19.55 41.336Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M16.4883 63.1219C16.6036 62.3015 17.3621 61.7299 18.1824 61.8452L65.7153 68.5255C66.5357 68.6408 67.1072 69.3993 66.9919 70.2197C66.8766 71.0401 66.1181 71.6116 65.2978 71.4963L17.7649 64.816C16.9445 64.7007 16.373 63.9422 16.4883 63.1219Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15.2358 72.0343C15.3511 71.2139 16.1096 70.6424 16.93 70.7576L64.4628 77.438C65.2832 77.5533 65.8548 78.3118 65.7395 79.1321C65.6242 79.9525 64.8657 80.5241 64.0453 80.4088L16.5125 73.7285C15.6921 73.6132 15.1205 72.8547 15.2358 72.0343Z"
              fill="white"
              fill-opacity="0.4"
            />
          </g>
        </g>
      </g>
    </g>
    <defs>
      <filter
        id="filter0_f_4257_88403"
        x="-14.1589"
        y="-38.4709"
        width="172.444"
        height="136.638"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"
        />
        <feGaussianBlur
          stdDeviation="12"
          result="effect1_foregroundBlur_4257_88403"
        />
      </filter>
      <filter
        id="filter1_f_4257_88403"
        x="-45.8333"
        y="-40.3932"
        width="155.805"
        height="139.072"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"
        />
        <feGaussianBlur
          stdDeviation="12"
          result="effect1_foregroundBlur_4257_88403"
        />
      </filter>
      <filter
        id="filter2_f_4257_88403"
        x="8.68726"
        y="-25.6425"
        width="166.468"
        height="142.859"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"
        />
        <feGaussianBlur
          stdDeviation="12"
          result="effect1_foregroundBlur_4257_88403"
        />
      </filter>
      <linearGradient
        id="paint0_linear_4257_88403"
        x1="102.492"
        y1="40.3698"
        x2="96.2289"
        y2="84.9319"
        gradientUnits="userSpaceOnUse"
      >
        <stop offset="0.578125" stop-color="white" />
        <stop offset="1" stop-color="white" stop-opacity="0" />
      </linearGradient>
      <linearGradient
        id="paint1_linear_4257_88403"
        x1="102.492"
        y1="40.3698"
        x2="96.2289"
        y2="84.9319"
        gradientUnits="userSpaceOnUse"
      >
        <stop offset="0.578125" stop-color="white" />
        <stop offset="1" stop-color="white" stop-opacity="0" />
      </linearGradient>
      <clipPath id="clip0_4257_88403">
        <rect width="140" height="96" fill="white" />
      </clipPath>
      <clipPath id="clip1_4257_88403">
        <rect
          x="11.7563"
          y="3.38196"
          width="130"
          height="88"
          rx="4"
          transform="rotate(8 11.7563 3.38196)"
          fill="white"
        />
      </clipPath>
      <clipPath id="clip2_4257_88403">
        <rect
          width="130"
          height="88"
          fill="white"
          transform="translate(11.7563 3.38196) rotate(8)"
        />
      </clipPath>
    </defs>
  </svg>
`,nse=rt`
  <svg
    width="140"
    height="96"
    viewBox="0 0 140 96"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g clip-path="url(#clip0_4391_90250)">
      <g opacity="0.4">
        <g clip-path="url(#clip1_4391_90250)">
          <g clip-path="url(#clip2_4391_90250)">
            <g opacity="0.8" filter="url(#filter0_f_4391_90250)">
              <ellipse
                cx="45.5713"
                cy="61.2938"
                rx="45.5713"
                ry="61.2938"
                transform="matrix(-0.275152 -0.961401 0.994111 -0.108365 23.6692 80.3025)"
                fill="#3E3E3F"
              />
            </g>
            <g opacity="0.8" filter="url(#filter1_f_4391_90250)">
              <ellipse
                cx="49.6555"
                cy="50.1114"
                rx="49.6555"
                ry="50.1114"
                transform="matrix(-0.517539 -0.855659 0.945307 -0.326182 10.3975 87.9766)"
                fill="#3E3E3F"
              />
            </g>
            <g opacity="0.8" filter="url(#filter2_f_4391_90250)">
              <path
                d="M141.154 3.03247C167.539 22.8936 134.54 99.5878 124.212 92.7915C117.912 88.6456 113.733 60.4772 94.173 45.9086C81.6691 36.5955 56.6586 38.5939 41.1056 37.1878C1.22291 33.5821 114.548 -16.9943 141.154 3.03247Z"
                fill="#3E3E3F"
              />
            </g>
            <path
              d="M78.5971 45.1263C77.9794 49.5216 81.121 53.5957 85.6131 54.2271C90.1053 54.8584 94.2481 51.808 94.8658 47.4128C95.4835 43.0175 92.342 38.9434 87.8498 38.312C83.3577 37.6807 79.2149 40.7311 78.5971 45.1263Z"
              fill="url(#paint0_linear_4391_90250)"
            />
            <path
              d="M120.378 78.3637L119.989 81.1303C119.731 82.9654 119.562 84.15 119.36 85.0413C119.166 85.8959 118.999 86.1992 118.895 86.3451C118.499 86.9002 117.932 87.3171 117.277 87.5363C117.105 87.5938 116.76 87.6677 115.867 87.6141C114.934 87.5582 113.723 87.3905 111.847 87.1268L80.6109 82.7369C78.735 82.4733 77.524 82.3006 76.6125 82.0973C75.7385 81.9024 75.4276 81.7365 75.278 81.6337C74.7087 81.2424 74.2794 80.6856 74.0516 80.0428C73.9917 79.8739 73.9142 79.5361 73.9635 78.6612C74.0149 77.7488 74.1789 76.5635 74.4369 74.7283L75.6584 66.0369C75.8058 65.9369 75.9505 65.8411 76.0924 65.7498C77.1899 65.0437 78.3629 64.4423 79.7464 64.1873C81.8083 63.8072 83.9443 64.0829 85.8427 64.9742C87.1166 65.5723 88.0991 66.452 88.9822 67.4137C89.5619 68.0451 90.1807 68.8058 90.8604 69.6691L94.5285 66.9912C95.9295 65.9684 97.1371 65.0867 98.1922 64.4415C99.3051 63.761 100.491 63.1868 101.879 62.9626C103.947 62.6286 106.075 62.9506 107.951 63.8817C109.21 64.5065 110.172 65.4058 111.033 66.385C111.033 66.385 117.277 74.3919 120.378 78.3637Z"
              fill="url(#paint1_linear_4391_90250)"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M18.0193 52.2289C18.1346 51.4086 18.8931 50.837 19.7134 50.9523L67.2463 57.6326C68.0667 57.7479 68.6382 58.5064 68.5229 59.3268C68.4076 60.1471 67.6491 60.7187 66.8288 60.6034L19.2959 53.9231C18.4755 53.8078 17.904 53.0493 18.0193 52.2289Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M21.5681 26.9771C21.7218 25.8833 22.7332 25.1212 23.827 25.2749L47.5934 28.6151C48.6872 28.7688 49.4493 29.7801 49.2956 30.874C49.1419 31.9678 48.1305 32.7299 47.0367 32.5762L23.2703 29.236C22.1765 29.0823 21.4144 28.0709 21.5681 26.9771Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M19.55 41.336C19.6653 40.5156 20.4238 39.9441 21.2442 40.0593L68.7771 46.7397C69.5974 46.8549 70.169 47.6135 70.0537 48.4338C69.9384 49.2542 69.1799 49.8258 68.3595 49.7105L20.8267 43.0301C20.0063 42.9149 19.4347 42.1564 19.55 41.336Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M16.4883 63.1219C16.6036 62.3015 17.3621 61.7299 18.1824 61.8452L65.7153 68.5255C66.5357 68.6408 67.1072 69.3993 66.9919 70.2197C66.8766 71.0401 66.1181 71.6116 65.2978 71.4963L17.7649 64.816C16.9445 64.7007 16.373 63.9422 16.4883 63.1219Z"
              fill="white"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15.2358 72.0344C15.3511 71.214 16.1096 70.6424 16.93 70.7577L64.4628 77.438C65.2832 77.5533 65.8548 78.3118 65.7395 79.1322C65.6242 79.9525 64.8657 80.5241 64.0453 80.4088L16.5125 73.7285C15.6921 73.6132 15.1205 72.8547 15.2358 72.0344Z"
              fill="white"
              fill-opacity="0.4"
            />
          </g>
        </g>
      </g>
    </g>
    <defs>
      <filter
        id="filter0_f_4391_90250"
        x="-14.1589"
        y="-38.4709"
        width="172.444"
        height="136.638"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"
        />
        <feGaussianBlur
          stdDeviation="12"
          result="effect1_foregroundBlur_4391_90250"
        />
      </filter>
      <filter
        id="filter1_f_4391_90250"
        x="-45.8333"
        y="-40.3932"
        width="155.805"
        height="139.072"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"
        />
        <feGaussianBlur
          stdDeviation="12"
          result="effect1_foregroundBlur_4391_90250"
        />
      </filter>
      <filter
        id="filter2_f_4391_90250"
        x="8.68726"
        y="-25.6425"
        width="166.468"
        height="142.859"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="BackgroundImageFix"
          result="shape"
        />
        <feGaussianBlur
          stdDeviation="12"
          result="effect1_foregroundBlur_4391_90250"
        />
      </filter>
      <linearGradient
        id="paint0_linear_4391_90250"
        x1="102.492"
        y1="40.3698"
        x2="96.2289"
        y2="84.9319"
        gradientUnits="userSpaceOnUse"
      >
        <stop offset="0.578125" stop-color="white" />
        <stop offset="1" stop-color="white" stop-opacity="0" />
      </linearGradient>
      <linearGradient
        id="paint1_linear_4391_90250"
        x1="102.492"
        y1="40.3698"
        x2="96.2289"
        y2="84.9319"
        gradientUnits="userSpaceOnUse"
      >
        <stop offset="0.578125" stop-color="white" />
        <stop offset="1" stop-color="white" stop-opacity="0" />
      </linearGradient>
      <clipPath id="clip0_4391_90250">
        <rect width="140" height="96" fill="white" />
      </clipPath>
      <clipPath id="clip1_4391_90250">
        <rect
          x="11.7563"
          y="3.38196"
          width="130"
          height="88"
          rx="4"
          transform="rotate(8 11.7563 3.38196)"
          fill="white"
        />
      </clipPath>
      <clipPath id="clip2_4391_90250">
        <rect
          width="130"
          height="88"
          fill="white"
          transform="translate(11.7563 3.38196) rotate(8)"
        />
      </clipPath>
    </defs>
  </svg>
`;let X7=null;const KN=n=>{const e=document.createElement("template");if(typeof n=="string")n=n.trim(),e.innerHTML=n;else{const{strings:t,values:r}=n,o=[...r,""],i=t.reduce((a,s,l)=>a+s+o[l],"");e.innerHTML=i}return e.content.firstChild},rse=()=>{const n=vr`
    position: fixed;
    z-index: 9999;
    top: 16px;
    left: 16px;
    right: 16px;
    bottom: 78px;
    pointer-events: none;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
  `,e=rt`<div style="${n}"></div>`,t=KN(e);return document.body.appendChild(t),t},Zh=(n,e=2500)=>{X7||(X7=rse());const t=vr`
    max-width: 480px;
    text-align: center;
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-sm);
    padding: 6px 12px;
    margin: 10px 0 0 0;
    color: var(--affine-white);
    background: var(--affine-tooltip);
    box-shadow: var(--affine-float-button-shadow);
    border-radius: 10px;
    transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1);
    opacity: 0;
  `,r=rt`<div style="${t}"></div>`,o=KN(r);o.textContent=n,X7.appendChild(o);const i=[{opacity:0},{opacity:1}],a={duration:230,easing:"cubic-bezier(0.21, 1.02, 0.73, 1)",fill:"forwards"};return o.animate(i,a),setTimeout(async()=>{const s=i.reverse();await o.animate(s,a).finished,o.style.maxHeight="0",o.style.margin="0",o.style.padding="0",o.addEventListener("transitionend",()=>{o.remove()},{once:!0})},e),o};async function mC(n,e,t=!1){var r,o;if((o=(r=window==null?void 0:window.apis)==null?void 0:r.ui)!=null&&o.getBookmarkDataByLink){if((n.crawled||!n.url)&&!t)return;e.loading=!0;const i=await window.apis.ui.getBookmarkDataByLink(n.url);if(!n.page.getBlockById(n.id))return;n.page.withoutTransact(()=>{n.page.updateBlock(n,{...i,url:n.url,crawled:!0})}),e.loading=!1}}function YN(n){return Object.keys(JX).reduce((e,t)=>(e[t]=n[t],e),{})}var Gb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function ose(n,e){const t=document.createElement("bookmark-operation-menu");t.model=e.model,t.onSelected=e.onSelected,n.appendChild(t);const r=sd(n,t,{placement:"top-start",modifiers:[{name:"offset",options:{offset:[0,6]}}]});return{element:t,dispose:()=>{t.remove(),r.destroy()}}}const ise=[{type:"copy",icon:qae,label:"Copy original link",action:(n,e)=>{X1({type:"Block",models:[n],startOffset:0,endOffset:0}),Zh("Copied link to clipboard"),e==null||e("copy")}},{type:"duplicate",icon:Qae,label:"Duplicate",action:(n,e)=>{const{page:t}=n,r=t.getParent(n),o=r==null?void 0:r.children.indexOf(n),i=YN(n);t.addBlock("affine:bookmark",i,r,o),e==null||e("duplicate")}},{type:"reload",icon:Kae,label:"Reload",action:(n,e)=>{mC(n,Hl(n),!0),e==null||e("reload")}},{type:"delete",icon:Yae,label:"Delete",action:(n,e)=>{n.page.deleteBlock(n),e==null||e("delete")}}];let T1=class extends ui(so){connectedCallback(){super.connectedCallback()}render(){const e=Vs(ise,({type:t})=>t,({type:t,icon:r,label:o,action:i,divider:a})=>rt`<icon-button
            width="130px"
            height="32px"
            class="menu-item ${t}"
            @click=${()=>{i(this.model,this.onSelected,this)}}
          >
            ${r} ${o}
          </icon-button>
          ${a?rt`<div class="divider"></div>`:Di} `);return rt` <div class="bookmark-operation-menu">${e}</div> `}};T1.styles=vr`
    .bookmark-operation-menu {
      border-radius: 8px 8px 8px 0;
      padding: 8px;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
    }
    .menu-item {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      fill: var(--affine-icon-color);
      color: var(--affine-text-primary-color);
    }
    .menu-item:hover {
      background: var(--affine-hover-color);
      fill: var(--affine-primary-color);
      color: var(--affine-primary-color);
    }
    .menu-item svg {
      margin: 0 8px;
    }
  `;Gb([Ft()],T1.prototype,"model",void 0);Gb([Ft()],T1.prototype,"root",void 0);Gb([Ft()],T1.prototype,"onSelected",void 0);Gb([Rr(".bookmark-bar")],T1.prototype,"formatQuickBarElement",void 0);T1=Gb([lr("bookmark-operation-menu")],T1);var Xb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const ase=[{type:"link",icon:Xae,tooltip:"Turn into Link view",action:(n,e)=>{const{page:t}=n,r=t.getParent(n),o=r==null?void 0:r.children.indexOf(n),i=new $g,a=n.title||n.caption||n.url;i.insert(0,a),i.format(0,a.length,{link:n.url});const s=new t.Text(i);t.addBlock("affine:paragraph",{text:s},r,o),n.page.deleteBlock(n),e==null||e("link")},divider:!0},{type:"caption",icon:Jae,tooltip:"Add Caption",action:(n,e)=>{e==null||e("caption")}},{type:"edit",icon:Gae,tooltip:"Edit",action:(n,e)=>{e==null||e("edit")},divider:!0}];let O1=class extends ui(so){constructor(){super(...arguments),this._menu=null}_toggleMenu(){this._menu?(this._menu.dispose(),this._menu=null):this._menu=ose(this.moreButton,{model:this.model,onSelected:e=>{var t;this._toggleMenu(),(t=this.onSelected)==null||t.call(this,e)}})}connectedCallback(){super.connectedCallback()}render(){const e=Vs(ase,({type:t})=>t,({type:t,icon:r,tooltip:o,action:i,divider:a})=>rt`<icon-button
            width="32px"
            height="32px"
            class="bookmark-toolbar-button has-tool-tip ${t}"
            @click=${()=>{i(this.model,this.onSelected,this)}}
          >
            ${r}
            <tool-tip inert role="tooltip">${o}</tool-tip>
          </icon-button>
          ${a?rt`<div class="divider"></div>`:Di} `);return rt`
      <div class="bookmark-bar">
        ${e}

        <div class="more-button-wrapper">
          <icon-button
            width="32px"
            height="32px"
            class="has-tool-tip more-button"
            @click=${()=>{this._toggleMenu()}}
          >
            ${ese}
            <tool-tip inert role="tooltip">More</tool-tip>
          </icon-button>
        </div>
      </div>
    `}};O1.styles=vr`
    ${hd}
    .bookmark-bar {
      box-sizing: border-box;
      position: absolute;
      right: 0;
      top: -40px;
      display: flex;
      align-items: center;
      padding: 4px 8px;
      gap: 4px;
      height: 40px;

      border-radius: 8px;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      z-index: var(--affine-z-index-popover);
      user-select: none;
    }
    .divider {
      width: 1px;
      height: 24px;
      background-color: var(--affine-border-color);
    }
  `;Xb([Ft()],O1.prototype,"model",void 0);Xb([Ft()],O1.prototype,"onSelected",void 0);Xb([Rr(".bookmark-bar")],O1.prototype,"formatQuickBarElement",void 0);Xb([Rr(".more-button-wrapper")],O1.prototype,"moreButton",void 0);O1=Xb([lr("bookmark-toolbar")],O1);var Zk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let U6=class extends so{constructor(){super(...arguments),this.container=document.body,this.template=rt``,this._portalRoot=null}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._portalRoot)==null||e.remove()}createRenderRoot(){const e=document.createElement("div");return e.classList.add("affine-portal"),this.container.append(e),this._portalRoot=e,e}render(){return this.template}};Zk([Ft()],U6.prototype,"container",void 0);Zk([Ft()],U6.prototype,"template",void 0);U6=Zk([lr("affine-portal")],U6);var Sx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const GN=rt`
  <style>
    .bookmark-modal-container {
      position: fixed;
      width: 100vw;
      height: 100vh;
      display: flex;
    }
    .bookmark-modal-mask {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      margin: auto;
    }
    .bookmark-modal-wrapper {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      margin: auto;

      width: 360px;
      height: 260px;
      background: var(--affine-background-primary-color);
      box-shadow: var(--affine-menu-shadow);
      border-radius: var(--affine-popover-radius);
      padding: 36px 40px 24px;
    }
    .bookmark-modal-close-button {
      position: absolute;
      right: 20px;
      top: 12px;
    }
    .bookmark-modal-title {
      font-size: var(--affine-font-h-6);
      font-weight: 600;
    }
    .bookmark-modal-desc {
      font-size: var(--affine-font-base);
      margin-top: 20px;
      caret-color: var(--affine-primary-color);
    }
    .bookmark-input {
      width: 100%;
      height: 32px;
      font-size: var(--affine-font-base);
      margin-top: 20px;
      caret-color: var(--affine-primary-color);
      transition: border-color 0.15s;

      line-height: 22px;
      padding: 8px 12px;
      color: var(--affine-text-primary-color);
      border: 1px solid;
      border-color: var(--affine-border-color);
      background-color: var(--affine-white);
      border-radius: 10px;
      outline: medium;
    }
    .bookmark-input:focus {
      border-color: var(--affine-primary-color);
    }

    .bookmark-input::placeholder {
      color: var(--affine-placeholder-color);
      font-size: var(--affine-font-base);
    }

    .bookmark-modal-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 40px;
    }
    .bookmark-confirm-button {
      padding: 4px 20px;
      height: 32px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: var(--affine-font-base);
      background: var(--affine-primary-color);
      color: var(--affine-white);
      border-color: var(--affine-primary-color);
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
`;let Gv=class extends ui(so){constructor(){super(...arguments),this._modalKeyboardListener=e=>{var t;e.key==="Enter"&&this._onConfirm(),e.key==="Escape"&&((t=this.onCancel)==null||t.call(this))}}get id(){return`bookmark-modal-${this.model.id.split(":")[0]}`}connectedCallback(){super.connectedCallback(),document.addEventListener("keydown",this._modalKeyboardListener),requestAnimationFrame(()=>{const e=document.querySelector(`#${this.id} input.title`);e.focus(),e.setSelectionRange(0,e.value.length)})}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this._modalKeyboardListener)}_onConfirm(){var r;const e=document.querySelector(`#${this.id} input.title`),t=document.querySelector(`#${this.id} input.description`);this.model.page.updateBlock(this.model,{title:e.value,description:t.value}),(r=this.onConfirm)==null||r.call(this)}render(){const e=rt`${GN}
      <div class="bookmark-modal" id="${this.id}">
        <div
          class="bookmark-modal-mask"
          @click=${()=>{var t;(t=this.onCancel)==null||t.call(this)}}
        ></div>
        <div class="bookmark-modal-wrapper">
          <icon-button
            width="32px"
            height="32px"
            class="bookmark-modal-close-button"
            @click=${()=>{var t;(t=this.onCancel)==null||t.call(this)}}
            >${VN}</icon-button
          >

          <div class="bookmark-modal-title">Edit</div>
          <input
            type="text"
            class="bookmark-input title"
            placeholder="Title"
            value=${this.model.title||"Bookmark"}
            tabindex="1"
          />
          <input
            type="text"
            class="bookmark-input description"
            placeholder="Description"
            value=${this.model.description||this.model.url}
            tabindex="2"
          />
          <div class="bookmark-modal-footer">
            <div
              class="bookmark-confirm-button"
              tabindex="3"
              @click=${()=>{this._onConfirm()}}
            >
              Save
            </div>
          </div>
        </div>
      </div>`;return rt`<affine-portal .template=${e}></affine-portal>`}};Sx([Ft()],Gv.prototype,"model",void 0);Sx([Ft()],Gv.prototype,"onCancel",void 0);Sx([Ft()],Gv.prototype,"onConfirm",void 0);Gv=Sx([lr("bookmark-edit-modal")],Gv);var kx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Xv=class extends ui(so){constructor(){super(...arguments),this._modalKeyboardListener=e=>{var t;e.key==="Enter"&&this._onConfirm(),e.key==="Escape"&&((t=this.onCancel)==null||t.call(this))}}get id(){return`bookmark-create-modal-${this.model.id.split(":")[0]}`}connectedCallback(){super.connectedCallback(),requestAnimationFrame(()=>{document.querySelector(`#${this.id} input.link`).focus()}),document.addEventListener("keydown",this._modalKeyboardListener)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this._modalKeyboardListener)}_onConfirm(){var t;const e=document.querySelector(`#${this.id} input.link`);if(!e.value){Zh("Bookmark url can not be empty");return}this.model.page.updateBlock(this.model,{url:e.value}),(t=this.onConfirm)==null||t.call(this)}render(){const e=rt`${GN}
      <div class="bookmark-modal" id="${this.id}">
        <div
          class="bookmark-modal-mask"
          @click=${()=>{var t;(t=this.onCancel)==null||t.call(this),this.model.page.deleteBlock(this.model)}}
        ></div>
        <div class="bookmark-modal-wrapper" style="width:480px">
          <icon-button
            width="32px"
            height="32px"
            class="bookmark-modal-close-button"
            @click=${()=>{var t;(t=this.onCancel)==null||t.call(this),this.model.page.deleteBlock(this.model)}}
            >${VN}</icon-button
          >

          <div class="bookmark-modal-title">Bookmark</div>
          <div class="bookmark-modal-desc">
            Create a Bookmark that previews a link in card view.
          </div>
          <input
            tabindex="1"
            type="text"
            class="bookmark-input link"
            placeholder="Input in https://..."
          />

          <div class="bookmark-modal-footer">
            <div
              tabindex="2"
              class="bookmark-confirm-button"
              @click=${()=>this._onConfirm()}
            >
              Confirm
            </div>
          </div>
        </div>
      </div>`;return rt`<affine-portal .template=${e}></affine-portal>`}};kx([Ft()],Xv.prototype,"model",void 0);kx([Ft()],Xv.prototype,"onCancel",void 0);kx([Ft()],Xv.prototype,"onConfirm",void 0);Xv=kx([lr("bookmark-create-modal")],Xv);var Uk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let qv=class extends so{constructor(){super(...arguments),this.size="50px",this.color="blue"}firstUpdated(){this.updateComplete.then(()=>{const{size:e,color:t}=this;this.style.setProperty("--loader-size",typeof e=="string"?e:`${e}px`),this.style.setProperty("--loader-color",t)})}render(){return rt`<div class="bookmark-loader-wrapper">
      <svg class="bookmark-loader" x="0px" y="0px" viewBox="0 0 150 150">
        <circle class="bookmark-loader-block" cx="75" cy="75" r="60" />
      </svg>
    </div>`}};qv.styles=vr`
    .bookmark-loader-wrapper {
      display: flex;
      width: var(--loader-size);
      height: var(--loader-size);
    }
    .bookmark-loader {
      width: var(--loader-size);
      animation: loading 3s linear infinite;
    }
    .bookmark-loader-block {
      animation: loading-circle 2s linear infinite;
      stroke-dashoffset: 0;
      stroke-dasharray: 300;
      stroke-width: 15;
      stroke-miterlimit: 10;
      stroke-linecap: round;
      stroke: var(--loader-color);
      fill: transparent;
    }

    @keyframes loading {
      0% {
        transform: rotate(0);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    @keyframes loading-circle {
      0% {
        stroke-dashoffset: 0;
      }
      100% {
        stroke-dashoffset: -600;
      }
    }
  `;Uk([Ft()],qv.prototype,"size",void 0);Uk([Ft()],qv.prototype,"color",void 0);qv=Uk([lr("bookmark-loader")],qv);function XN(n,e){var d;const t=n.getParent(e),r=n.getNextSibling(e);if(!t)return;const o=()=>Tr(e,["affine:list"])?[e.flavour,{type:e.type}]:["affine:paragraph",{type:"text"}],[i,a]=o();if(ix(n,e,"affine:database")){n.captureSync();const u=t.children.findIndex(g=>g.id===e.id);let p=t,f=u+1;const h=t.children.length;if(u===h-1&&((d=e.text)==null?void 0:d.yText.length)===0){h!==1&&n.deleteBlock(e);const g=n.getNextSibling(p);if(g&&Tr(g,["affine:paragraph"])){za(n,g.id,{index:g.text.yText.length,length:0});return}const m=n.getParent(t);if(!m)return;const b=m.children.findIndex(v=>v.id===t.id);p=m,f=b+1}const c=n.addBlock(i,a,p,f);za(n,c);return}const s=t.children.indexOf(e);if(s===-1)return;n.captureSync();const l=e.children.length?n.addBlock(i,a,e,0):n.addBlock(i,a,t,s+1);if(Tr(e,["affine:list"])&&e.type==="numbered"){let u=r;for(;u&&Tr(u,["affine:list"])&&e.type==="numbered";)n.updateBlock(u,{}),u=n.getNextSibling(u)}za(n,l)}function qN(n,e,t,r){if(!e.text){console.error("Failed to handle soft enter! No text found!",e);return}n.captureSync(),e.text.replace(t,r,`
`)}function W6(n,e,t,r){if(!(e.text instanceof jg)||e.text.yText.length<t+r)return;const o=n.getParent(e);if(!o)return;n.captureSync();const i=e.text.split(t,r);let a=o,s=a.children.indexOf(e)+1;Tr(e,["affine:list"])&&e.children.length>0&&(a=e,s=0);const l=[...e.children];n.updateBlock(e,{children:[]});const d=n.addBlock(e.flavour,{text:i,type:e.type,children:l},a,s);return za(n,d)}function JN(n,e,t=0){const r=n.getPreviousSibling(e),o=n.getNextSibling(e);if(!r||!ik(r))return;const i=n.getParent(e);if(!i)return;n.captureSync();const a=e.children;if(n.updateBlock(e,{children:[]}),n.updateBlock(i,{children:i.children.filter(s=>s.id!==e.id)}),n.updateBlock(r,{children:[...r.children,e,...a]}),Tr(e,["affine:list"])&&e.type==="numbered"){let s=o;for(;s&&Tr(s,["affine:list"])&&e.type==="numbered";)n.updateBlock(s,{}),s=n.getNextSibling(s)}xt(e),Db(e,{index:t,length:0})}function QN(n,e){if(!e.length)return;const t=n.getPreviousSibling(e[0]),r=n.getNextSibling(e.at(-1));if(!t||!ik(t)||!e.every((i,a,s)=>{const l=s.at(a-1);if(!l)return!1;const d=n.getParent(i),u=n.getParent(l);return d&&u&&d.id===u.id}))return;n.captureSync();const o=n.getParent(e[0]);xt(o),e.forEach(i=>{const a=i.children;if(n.updateBlock(i,{children:[]}),n.updateBlock(o,{children:o.children.filter(s=>s.id!==i.id)}),n.updateBlock(t,{children:[...t.children,i,...a]}),Tr(i,["affine:list"])&&i.type==="numbered"){let s=r;for(;s&&Tr(s,["affine:list"])&&i.type==="numbered";)n.updateBlock(s,{}),s=n.getNextSibling(s)}xt(i),Db(i,{index:0,length:0})})}function _x(n,e,t=0,r=!0){const o=n.getParent(e);if(!o||Tr(o,["affine:frame"]))return;const i=n.getParent(o);if(!i)return;r&&n.captureSync();const a=n.getPreviousSiblings(e),s=n.getNextSiblings(e);n.updateBlock(o,{children:a});const l=i.children.indexOf(o);n.updateBlock(i,{children:[...i.children.slice(0,l+1),e,...i.children.slice(l+1)]}),n.updateBlock(e,{children:[...e.children,...s]});const d=n.getNextSibling(e);if(Tr(e,["affine:list"])&&e.type==="numbered"){let u=d;for(;u&&Tr(u,["affine:list"])&&e.type==="numbered";)n.updateBlock(u,{}),u=n.getNextSibling(u)}xt(e),Db(e,{index:t,length:0})}function sse(n,e){return Tr(e,["affine:code"])?(C1(e),!0):!1}function lse(n,e){return!!ix(n,e,"affine:database")}function cse(n,e){var a;if(!Tr(e,["affine:list"]))return!1;const t=n.getParent(e);if(!t)return!1;const r=t.children.indexOf(e),o={type:"text",text:(a=e.text)==null?void 0:a.clone(),children:e.children};n.captureSync(),n.deleteBlock(e);const i=n.addBlock("affine:paragraph",o,t,r);return za(n,i),!0}function dse(n,e){function t(s,l,d,u){var h,c,g;if(!d||!Tr(d,["affine:paragraph","affine:list"]))return!1;s.captureSync();const p=((h=d.text)==null?void 0:h.length)||0;(c=l.text)!=null&&c.length&&((g=d.text)==null||g.join(l.text)),s.deleteBlock(l,{bringChildrenTo:u});const f=Cs(d);return f==null||f.setVRange({index:p,length:0}),!0}function r(s,l,d){var u;return!d||!Tr(d,["affine:embed","affine:divider","affine:code"])?!1:(C1(d),(u=l.text)!=null&&u.length||(s.captureSync(),s.deleteBlock(l)),!0)}function o(s,l,d){if(d)return!1;const u=l.text,p=document.querySelector(".affine-default-page-block-title"),h=Bl(p).title;s.captureSync();let c=0;return u&&(c=u.length,h.join(u)),s.deleteBlock(l),ck(s,h.length-c),!0}const i=n.getParent(e);if(!i)return!1;const a=gx(e);return Tr(i,["affine:database"])?a?(n.deleteBlock(e),C1(a),!0):o(n,e,a):Tr(i,["affine:frame"])?t(n,e,a,i)||r(n,e,a)||o(n,e,a):!1}function use(n,e){return Tr(e,["affine:paragraph"])?e.type!=="text"?(n.captureSync(),n.updateBlock(e,{type:"text"}),!0):(dse(n,e)||_x(n,e),!0):!1}function hse(n){throw new Error("Failed to handle backspace! Unknown block flavours! flavour:"+n.flavour)}function Wk(n,e){if(sse(n,e)||cse(n,e)||use(n,e)){lse(n,e);return}hse(e)}function ez(n,e){const t=Ba();return t.collapsed||t.collapse(!0),foe(t,e)?ss:(n.stopPropagation(),ja)}function tz(n,e,t){const r=Ba();return r.collapsed||r.collapse(),poe(r,t)?dk(n)?ss:ja:(e.stopPropagation(),ja)}const fse=Object.freeze(Object.defineProperty({__proto__:null,handleBlockEndEnter:XN,handleBlockSplit:W6,handleIndent:JN,handleKeyDown:tz,handleKeyUp:ez,handleLineStartBackspace:Wk,handleMultiBlockIndent:QN,handleSoftEnter:qN,handleUnindent:_x},Symbol.toStringTag,{value:"Module"}));async function Vk(n,e,t){var g,m,b,v,w,_,k;const{convertToPastedIfEmpty:r=!1,range:o}=t??{};xt(o);const{page:i}=n,a=e[0],s=e[e.length-1],l=!((g=n.text)!=null&&g.length)&&!r,d=!l&&a.text&&n.text,u=n.text&&s.text,p=i.getParent(n);if(xt(p),e.length===1){const y=((m=a==null?void 0:a.text)==null?void 0:m.reduce((C,I)=>{var A;return C+(((A=I.insert)==null?void 0:A.length)||0)},0))??0;if(((b=n.text)==null?void 0:b.length)!==o.endOffset&&await W6(i,n,o.startOffset,0),d)(v=n.text)==null||v.insertList(a.text||[],(o==null?void 0:o.startOffset)||0),await t1(i,a.children||[],n,0),await k5(n,{index:((o==null?void 0:o.startOffset)??0)+y,length:0});else{const[C]=await t1(i,e,p,p.children.indexOf(n)+1),I=i.getBlockById(C);xt(I),I.text&&await k5(I,{index:y,length:0})}l&&i.deleteBlock(n);return}await W6(i,n,o.startOffset,0),d&&((w=n.text)==null||w.insertList(a.text||[],(o==null?void 0:o.startOffset)||0),await t1(i,a.children||[],n,0));const f=p.children.indexOf(n)+(d?1:0),h=await t1(i,e.slice(d?1:0),p,f);l&&i.deleteBlock(n);const c=i.getBlockById(h[h.length-1]);if(u){xt(c);const y=((_=c.text)==null?void 0:_.length)||0,S=i.getNextSibling(c);(k=c.text)==null||k.join(S==null?void 0:S.text),xt(S),i.deleteBlock(S),requestAnimationFrame(()=>{k5(c,{index:y,length:0})})}else c!=null&&c.text&&k5(c,{index:c.text.length,length:0})}async function k5(n,e){const t=await fee(n);xt(t),t.setVRange(e)}async function t1(n,e,t,r){var a,s,l,d,u,p,f;const o=[],i=[];for(let h=0;h<e.length;h++){const c=e[h],g=c.flavour,m={flavour:g,type:c.type,checked:c.checked,sourceId:c.sourceId,caption:c.caption,width:c.width,height:c.height,language:c.language,title:((a=c.databaseProps)==null?void 0:a.title)||c.title,titleColumnName:(s=c.databaseProps)==null?void 0:s.titleColumnName,titleColumnWidth:(l=c.databaseProps)==null?void 0:l.titleColumnWidth,url:c.url,description:c.description,icon:c.icon,image:c.image,crawled:c.crawled},b=n.addBlock(g,m,t,r+h);o.push(b);const v=n.getBlockById(b);xt(v);const w=(v==null?void 0:v.flavour)&&n.getInitialPropsByFlavour(v==null?void 0:v.flavour);w&&w.text instanceof jg&&c.text&&((d=v==null?void 0:v.text)==null||d.applyDelta(c.text)),v&&c.children.length&&(await t1(n,c.children,v,0),i.push({model:v,json:c}))}for(const{model:h,json:c}of i){const g=h.flavour;(await L1(g)).onBlockPasted(h,{rowIds:(u=c.databaseProps)==null?void 0:u.rowIds,cells:(p=c.databaseProps)==null?void 0:p.cells,columns:(f=c.databaseProps)==null?void 0:f.columns})}return o}const pse=[{name:"bolditalic",pattern:/(?:\*){3}(.+?)(?:\*){3}$/g,action:(n,e,t,r,o)=>{const i=o.exec(t);if(!i)return!1;const a=i[0],s=r.index-a.length;return t.match(/^([* \n]+)$/g)?!1:(e.insertText({index:s+a.length,length:0}," "),n.page.captureSync(),e.formatText({index:s,length:a.length},{bold:!0,italic:!0}),e.deleteText({index:s+a.length,length:1}),e.deleteText({index:s+a.length-3,length:3}),e.deleteText({index:s,length:3}),e.setVRange({index:s+a.length-6,length:0}),!0)}},{name:"bold",pattern:/(?:\*){2}(.+?)(?:\*){2}$/g,action:(n,e,t,r,o)=>{const i=o.exec(t);if(!i)return!1;const a=i[0],s=r.index-a.length;return t.match(/^([* \n]+)$/g)?!1:(e.insertText({index:s+a.length,length:0}," "),n.page.captureSync(),e.formatText({index:s,length:a.length},{bold:!0}),e.deleteText({index:s+a.length,length:1}),e.deleteText({index:s+a.length-2,length:2}),e.deleteText({index:s,length:2}),e.setVRange({index:s+a.length-4,length:0}),!0)}},{name:"italic",pattern:/(?:\*){1}(.+?)(?:\*){1}$/g,action:(n,e,t,r,o)=>{const i=o.exec(t);if(!i)return!1;const a=i[0],s=r.index-a.length;return t.match(/^([* \n]+)$/g)?!1:(e.insertText({index:s+a.length,length:0}," "),n.page.captureSync(),e.formatText({index:s,length:a.length},{italic:!0}),e.deleteText({index:s+a.length,length:1}),e.deleteText({index:s+a.length-1,length:1}),e.deleteText({index:s,length:1}),e.setVRange({index:s+a.length-2,length:0}),!0)}},{name:"strikethrough",pattern:/(?:~~)(.+?)(?:~~)$/g,action:(n,e,t,r,o)=>{const i=o.exec(t);if(!i)return!1;const a=i[0],s=r.index-a.length;return t.match(/^([* \n]+)$/g)?!1:(e.insertText({index:s+a.length,length:0}," "),n.page.captureSync(),e.formatText({index:s,length:a.length},{strike:!0}),e.deleteText({index:s+a.length,length:1}),e.deleteText({index:s+a.length-2,length:2}),e.deleteText({index:s,length:2}),e.setVRange({index:s+a.length-4,length:0}),!0)}},{name:"underthrough",pattern:/(?:~)(.+?)(?:~)$/g,action:(n,e,t,r,o)=>{const i=o.exec(t);if(!i)return!1;const a=i[0],s=r.index-a.length;return t.match(/^([* \n]+)$/g)?!1:(e.insertText({index:s+a.length,length:0}," "),n.page.captureSync(),e.formatText({index:s,length:a.length},{underline:!0}),e.deleteText({index:s+a.length,length:1}),e.deleteText({index:r.index-1,length:1}),e.deleteText({index:s,length:1}),e.setVRange({index:s+a.length-2,length:0}),!0)}},{name:"code",pattern:/(?:`)(`{2,}?|[^`]+)(?:`)$/g,action:(n,e,t,r,o)=>{const i=o.exec(t);if(!i)return!1;const a=i[0],s=r.index-a.length;return t.match(/^([* \n]+)$/g)?!1:(e.insertText({index:s+a.length,length:0}," "),n.page.captureSync(),e.formatText({index:s,length:a.length},{code:!0}),e.deleteText({index:s+a.length,length:1}),e.deleteText({index:s+a.length-1,length:1}),e.deleteText({index:s,length:1}),e.setVRange({index:s+a.length-2,length:0}),!0)}},{name:"codeblock",pattern:/^```([a-zA-Z0-9]*)$/g,action:(n,e,t,r,o)=>{var p;if(n.flavour==="affine:paragraph"&&n.type==="quote")return!1;const i=o.exec(t),a=n.page;a.captureSync();const s=a.getParent(n);xt(s);const l=s.children.indexOf(n);a.deleteBlock(n);const d=a.addBlock("affine:code",{language:((p=Fk((i==null?void 0:i[1])||""))==null?void 0:p.id)??Nv},s,l),u=a.getBlockById(d);return xt(u),Db(u,{index:0,length:0}),!0}},{name:"link",pattern:/(?:\[(.+?)\])(?:\((.+?)\))$/g,action:(n,e,t,r,o)=>{var u,p,f;const i=t.search(o),a=(u=t.match(o))==null?void 0:u[0],s=(p=t.match(/(?:\[(.*?)\])/g))==null?void 0:p[0],l=(f=t.match(/(?:\((.*?)\))/g))==null?void 0:f[0];if(i===-1||!a||!s||!l)return!1;const d=r.index-a.length;return e.insertText({index:r.index,length:0}," "),n.page.captureSync(),e.formatText({index:d,length:s.length},{link:l.slice(1,l.length-1)}),e.deleteText({index:r.index+a.length,length:1}),e.deleteText({index:r.index-l.length-1,length:l.length+1}),e.deleteText({index:d,length:1}),e.setVRange({index:d+s.length-1,length:0}),!0}}];function nz(n,e,t){const r=n.getVRange();if(!r)return!1;for(const o of pse)if(t.match(o.pattern))return o.action(e,n,t,r,o.pattern);return!1}function gse(n,e,t,r,o){const[,i]=t.getLine(o.index);if(i>r.length)return ja;const a=QX(e.type,"quote"),s=Tr(e,["affine:code"]);if(a||s)return ja;let l=!1;switch(r.trim()){case"[]":case"[ ]":l=p5(n,e,"todo",r,{checked:!1});break;case"[x]":l=p5(n,e,"todo",r,{checked:!0});break;case"-":case"*":l=p5(n,e,"bulleted",r);break;case"***":case"---":l=KQ(n,e,r);break;case"#":l=Wp(n,e,"h1",r);break;case"##":l=Wp(n,e,"h2",r);break;case"###":l=Wp(n,e,"h3",r);break;case"####":l=Wp(n,e,"h4",r);break;case"#####":l=Wp(n,e,"h5",r);break;case"######":l=Wp(n,e,"h6",r);break;case">":l=Wp(n,e,"quote",r);break;default:l=p5(n,e,"numbered",r)}return l?ss:ja}function vC(n,e,t){return qN(n.page,n,e.index,e.length),t.setVRange({index:e.index+1,length:0}),ss}function zT(n,e,t,r,o=!1){const i=n.page;r.stopPropagation();const a=i.getParent(n),s=(a==null?void 0:a.lastChild())===n,l=Tr(n,["affine:list"])&&n.text.length===0;if(xt(n.text,"Failed to hardEnter! model.text not exists!"),l&&a&&Tr(a,["affine:frame","affine:database"])&&n.children.length===0)return Wk(i,n),ss;if(l&&s)return _x(i,n,e.index),ss;if(n.text.length===e.index||o){const p=BT(n),f=n.text.toString(),h=f===`
`||f.endsWith(`
`);return p&&!h?(vC(n,e,t),ss):(p&&n.text.delete(e.index-1,1),XN(i,n),ss)}return BT(n)?(vC(n,e,t),ss):(W6(i,n,e.index,e.length),ss)}function BT(n){return Tr(n,["affine:code"])?!0:Tr(n,["affine:paragraph"])?n.type==="quote":!1}function mse(n,e,t,r){const{prefix:o}=r;return nz(e,n,o),ja}function vse(n,e,t,r){const{prefix:o}=r;return nz(e,n,o)?ss:ja}function bse(n,e,t,r){const{prefix:o}=r;return gse(n.page,n,e,o,t)}function yse(n,e,t){return e.stopPropagation(),VQ(t)?(Wk(n.page,n),ss):ja}function xse(n,e){return e.length!==0?(n.stopPropagation(),ja):e.index===0?ss:(n.stopPropagation(),ja)}function wse(n,e,t){return t.length!==0?(e.stopPropagation(),ja):(xt(n.text,"Failed to onKeyRight! model.text not exists!"),n.text.length===t.index?ss:(e.stopPropagation(),ja))}class fd{block2html(e,{childText:t="",begin:r,end:o}={}){var s;return`${(((s=e.text)==null?void 0:s.sliceToDelta(r||0,o))||[]).reduce((l,d)=>l+fd.deltaLeaf2Html(e,d),"")}${t}`}block2Text(e,{childText:t="",begin:r=0,end:o}={}){var a;return`${(((a=e.text)==null?void 0:a.toString())||"").slice(r,o)}${t}`}block2Json(e,t,r){var i,a;const o=((i=e.text)==null?void 0:i.sliceToDelta(t||0,r))||[];return{flavour:e.flavour,type:e.type,text:o,children:(a=e.children)==null?void 0:a.map((s,l)=>l===e.children.length-1?na(s.flavour).block2Json(s,0,r):na(s.flavour).block2Json(s))}}async json2Block(e,t,r){return Vk(e,t,{range:r})}async onBlockPasted(e,t){}static deltaLeaf2Html(e,t){let r=t.insert??"";r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");const o=t.attributes;if(!o)return r;if(o.code&&(r=`<code>${r}</code>`),o.bold&&(r=`<strong>${r}</strong>`),o.italic&&(r=`<em>${r}</em>`),o.underline&&(r=`<u>${r}</u>`),o.strikethrough&&(r=`<s>${r}</s>`),o.link&&(r=`<a href="${o.link}">${r}</a>`),o.reference){const i=o.reference.pageId,a=e.page.workspace,s=a.meta.pageMetas.find(p=>p.id===i),d=`${window.location.origin}/workspace/${a.id}/${i}`,u=s?s.title:"Deleted page";r=`<a href="${d}">${u}</a>`}return r}async updateEffect(e){const t=(await uv(()=>Promise.resolve().then(()=>fse),void 0)).handleUnindent;ik(e)||e.children.length&&t(e.page,e.children[0],0,!1)}defineKeymap(e,t){return{enterMarkdownMatch:{key:"Enter",handler:(r,o)=>(xt(t),mse(e,t,r,o))},spaceMarkdownMatch:{key:" ",handler(r,o){return xt(t),vse(e,t,r,o)}},hardEnter:{key:"Enter",handler(r,o){return xt(t),zT(e,r,t,o.event)}},softEnter:{key:"Enter",shiftKey:!0,handler(r,o){return xt(t),vC(e,r,t)}},insertLineAfter:{key:"Enter",shortKey:!0,handler(r,o){return xt(t),zT(e,r,t,o.event,!0)}},tab:{key:"Tab",handler(r,o){const i=r.index;return JN(e.page,e,i),o.event.stopPropagation(),ss}},shiftTab:{key:"Tab",shiftKey:!0,handler(r,o){const i=r.index;return _x(e.page,e,i),o.event.stopPropagation(),ss}},backspace:{key:"Backspace",handler(r,o){return yse(e,o.event,this.vEditor)}},up:{key:"ArrowUp",shiftKey:!1,handler(r,o){return ez(o.event,this.vEditor.rootElement)}},down:{key:"ArrowDown",shiftKey:!1,handler(r,o){return tz(e,o.event,this.vEditor.rootElement)}},left:{key:"ArrowLeft",shiftKey:!1,handler(r,o){return xse(o.event,r)}},right:{key:"ArrowRight",shiftKey:!1,handler(r,o){return wse(e,o.event,r)}},inputRule:{key:" ",shiftKey:null,prefix:/^(\d+\.|-|\*|\[ ?\]|\[x\]|(#){1,6}|(-){3}|(\*){3}|>)$/,handler(r,o){return bse(e,t,r,o)}}}}}class rz extends fd{block2html(e,{childText:t="",begin:r,end:o}={}){return e.url}block2Text(e,{childText:t="",begin:r=0,end:o}={}){return e.url}block2Json(e,t,r){const o=YN(e);return{flavour:e.flavour,children:[],...o}}}const Cse=rt`<svg
  width="140"
  height="96"
  viewBox="0 0 140 96"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <g clip-path="url(#clip0_3433_80247)">
    <g opacity="0.4">
      <g clip-path="url(#clip1_3433_80247)">
        <g clip-path="url(#clip2_3433_80247)">
          <g opacity="0.8" filter="url(#filter0_f_3433_80247)">
            <ellipse
              cx="45.5713"
              cy="61.2938"
              rx="45.5713"
              ry="61.2938"
              transform="matrix(-0.275152 -0.961401 0.994111 -0.108365 23.6692 80.3025)"
              fill="#5076FF"
            />
          </g>
          <g opacity="0.8" filter="url(#filter1_f_3433_80247)">
            <ellipse
              cx="49.6555"
              cy="50.1114"
              rx="49.6555"
              ry="50.1114"
              transform="matrix(-0.517539 -0.855659 0.945307 -0.326182 10.3975 87.9766)"
              fill="#77FFCE"
            />
          </g>
          <g opacity="0.8" filter="url(#filter2_f_3433_80247)">
            <path
              d="M141.154 3.03247C167.539 22.8936 134.54 99.5878 124.212 92.7915C117.912 88.6456 113.733 60.4772 94.173 45.9086C81.6691 36.5955 56.6586 38.5939 41.1056 37.1878C1.22291 33.5821 114.548 -16.9943 141.154 3.03247Z"
              fill="#35B7E0"
            />
          </g>
          <path
            d="M78.5971 45.1263C77.9794 49.5216 81.121 53.5957 85.6131 54.2271C90.1053 54.8584 94.2481 51.808 94.8658 47.4128C95.4835 43.0175 92.342 38.9434 87.8498 38.312C83.3577 37.6807 79.2149 40.7311 78.5971 45.1263Z"
            fill="url(#paint0_linear_3433_80247)"
          />
          <path
            d="M120.378 78.3637L119.989 81.1303C119.731 82.9654 119.562 84.15 119.36 85.0413C119.166 85.8959 118.999 86.1992 118.895 86.3451C118.499 86.9002 117.932 87.3171 117.277 87.5363C117.105 87.5938 116.76 87.6677 115.867 87.6141C114.934 87.5582 113.723 87.3905 111.847 87.1268L80.6109 82.7369C78.735 82.4733 77.524 82.3006 76.6125 82.0973C75.7385 81.9024 75.4276 81.7365 75.278 81.6337C74.7087 81.2424 74.2794 80.6856 74.0516 80.0428C73.9917 79.8739 73.9142 79.5361 73.9635 78.6612C74.0149 77.7488 74.1789 76.5635 74.4369 74.7283L75.6584 66.0369C75.8058 65.9369 75.9505 65.8411 76.0924 65.7498C77.1899 65.0437 78.3629 64.4423 79.7464 64.1873C81.8083 63.8072 83.9443 64.0829 85.8427 64.9742C87.1166 65.5723 88.0991 66.452 88.9822 67.4137C89.5619 68.0451 90.1807 68.8058 90.8604 69.6691L94.5285 66.9912C95.9295 65.9684 97.1371 65.0867 98.1922 64.4415C99.3051 63.761 100.491 63.1868 101.879 62.9626C103.947 62.6286 106.075 62.9506 107.951 63.8817C109.21 64.5065 110.172 65.4058 111.033 66.385C111.033 66.385 117.277 74.3919 120.378 78.3637Z"
            fill="url(#paint1_linear_3433_80247)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M18.0193 52.2289C18.1346 51.4086 18.8931 50.837 19.7134 50.9523L67.2463 57.6326C68.0667 57.7479 68.6382 58.5064 68.5229 59.3268C68.4076 60.1471 67.6491 60.7187 66.8288 60.6034L19.2959 53.9231C18.4755 53.8078 17.904 53.0493 18.0193 52.2289Z"
            fill="white"
            fill-opacity="0.8"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M21.5681 26.9771C21.7218 25.8833 22.7332 25.1212 23.827 25.2749L47.5934 28.6151C48.6872 28.7688 49.4493 29.7801 49.2956 30.874C49.1419 31.9678 48.1305 32.7299 47.0367 32.5762L23.2703 29.236C22.1765 29.0823 21.4144 28.0709 21.5681 26.9771Z"
            fill="white"
            fill-opacity="0.8"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M19.55 41.336C19.6653 40.5156 20.4238 39.9441 21.2442 40.0593L68.7771 46.7397C69.5974 46.8549 70.169 47.6135 70.0537 48.4338C69.9384 49.2542 69.1799 49.8258 68.3595 49.7105L20.8267 43.0301C20.0063 42.9149 19.4347 42.1564 19.55 41.336Z"
            fill="white"
            fill-opacity="0.8"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.4883 63.1219C16.6036 62.3015 17.3621 61.7299 18.1824 61.8452L65.7153 68.5255C66.5357 68.6408 67.1072 69.3993 66.9919 70.2197C66.8766 71.0401 66.1181 71.6116 65.2978 71.4963L17.7649 64.816C16.9445 64.7007 16.373 63.9422 16.4883 63.1219Z"
            fill="white"
            fill-opacity="0.8"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2358 72.0344C15.3511 71.214 16.1096 70.6424 16.93 70.7577L64.4628 77.438C65.2832 77.5533 65.8548 78.3118 65.7395 79.1322C65.6242 79.9525 64.8657 80.5241 64.0453 80.4088L16.5125 73.7285C15.6921 73.6132 15.1205 72.8547 15.2358 72.0344Z"
            fill="white"
            fill-opacity="0.4"
          />
        </g>
      </g>
    </g>
  </g>
  <defs>
    <filter
      id="filter0_f_3433_80247"
      x="-14.1589"
      y="-38.4709"
      width="172.444"
      height="136.638"
      filterUnits="userSpaceOnUse"
      color-interpolation-filters="sRGB"
    >
      <feFlood flood-opacity="0" result="BackgroundImageFix" />
      <feBlend
        mode="normal"
        in="SourceGraphic"
        in2="BackgroundImageFix"
        result="shape"
      />
      <feGaussianBlur
        stdDeviation="12"
        result="effect1_foregroundBlur_3433_80247"
      />
    </filter>
    <filter
      id="filter1_f_3433_80247"
      x="-45.8333"
      y="-40.3932"
      width="155.805"
      height="139.072"
      filterUnits="userSpaceOnUse"
      color-interpolation-filters="sRGB"
    >
      <feFlood flood-opacity="0" result="BackgroundImageFix" />
      <feBlend
        mode="normal"
        in="SourceGraphic"
        in2="BackgroundImageFix"
        result="shape"
      />
      <feGaussianBlur
        stdDeviation="12"
        result="effect1_foregroundBlur_3433_80247"
      />
    </filter>
    <filter
      id="filter2_f_3433_80247"
      x="8.68726"
      y="-25.6425"
      width="166.468"
      height="142.859"
      filterUnits="userSpaceOnUse"
      color-interpolation-filters="sRGB"
    >
      <feFlood flood-opacity="0" result="BackgroundImageFix" />
      <feBlend
        mode="normal"
        in="SourceGraphic"
        in2="BackgroundImageFix"
        result="shape"
      />
      <feGaussianBlur
        stdDeviation="12"
        result="effect1_foregroundBlur_3433_80247"
      />
    </filter>
    <linearGradient
      id="paint0_linear_3433_80247"
      x1="102.492"
      y1="40.3698"
      x2="96.2289"
      y2="84.9319"
      gradientUnits="userSpaceOnUse"
    >
      <stop offset="0.578125" stop-color="white" />
      <stop offset="1" stop-color="white" stop-opacity="0" />
    </linearGradient>
    <linearGradient
      id="paint1_linear_3433_80247"
      x1="102.492"
      y1="40.3698"
      x2="96.2289"
      y2="84.9319"
      gradientUnits="userSpaceOnUse"
    >
      <stop offset="0.578125" stop-color="white" />
      <stop offset="1" stop-color="white" stop-opacity="0" />
    </linearGradient>
    <clipPath id="clip0_3433_80247">
      <rect width="140" height="96" fill="white" />
    </clipPath>
    <clipPath id="clip1_3433_80247">
      <rect
        x="11.7563"
        y="3.38196"
        width="130"
        height="88"
        rx="4"
        transform="rotate(8 11.7563 3.38196)"
        fill="white"
      />
    </clipPath>
    <clipPath id="clip2_3433_80247">
      <rect
        width="130"
        height="88"
        fill="white"
        transform="translate(11.7563 3.38196) rotate(8)"
      />
    </clipPath>
  </defs>
</svg>`;var G1=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Oh=class extends ql{constructor(){super(...arguments),this.slots={openInitialModal:new Yo},this._showCreateModal=!1,this._showToolbar=!1,this._showEditModal=!1,this._isLoading=!1,this._timer=null,this._onToolbarSelected=e=>{e==="caption"&&(this._input.classList.add("caption-show"),requestAnimationFrame(()=>{this._input.focus()})),e==="edit"&&(this._showEditModal=!0),this._showToolbar=!1}}set loading(e){this._isLoading=e}get loading(){return this._isLoading}firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.updateComplete.then(()=>{var e;this._caption=((e=this.model)==null?void 0:e.caption)??"",this._caption&&this._input.classList.add("caption-show")})}connectedCallback(){super.connectedCallback(),pd("affine:bookmark",rz),mC(this.model,this),this.slots.openInitialModal.on(()=>{this._showCreateModal=!0})}_onInputChange(){this._caption=this._input.value,this.model.page.updateBlock(this.model,{caption:this._caption})}_onInputBlur(){this._caption||this._input.classList.remove("caption-show")}_onHover(){this._isLoading||(this._showToolbar=!0,this._timer&&clearTimeout(this._timer))}_onHoverOut(){this._timer=setTimeout(()=>{this._showToolbar=!1},100)}render(){const{url:e,title:t,description:r,icon:o,image:i}=this.model,a=vk(),s=this._showCreateModal?rt`<bookmark-create-modal
          .model=${this.model}
          .onCancel=${()=>{this._showCreateModal=!1}}
          .onConfirm=${()=>{mC(this.model,this,!0),this._showCreateModal=!1}}
        ></bookmark-create-modal>`:Di,l=this._showEditModal?rt`<bookmark-edit-modal
          .model=${this.model}
          .onCancel=${()=>{this._showEditModal=!1}}
          .onConfirm=${()=>{this._showEditModal=!1}}
        ></bookmark-edit-modal>`:Di,d=this._showToolbar?rt`<bookmark-toolbar
          .model=${this.model}
          .onSelected=${this._onToolbarSelected}
        ></bookmark-toolbar>`:Di,u=this._isLoading?rt`<div
          class="affine-bookmark-loading ${a==="light"?"":"dark"}"
        >
          <div class="affine-bookmark-title">
            <bookmark-loader
              size="15px"
              color="var(--affine-primary-color)"
            ></bookmark-loader>
            <div class="affine-bookmark-title-content">Loading...</div>
          </div>
          <div class="affine-bookmark-banner">
            ${a==="light"?tse:nse}
          </div>
        </div>`:Di,p=rt`<a
      href="${e}"
      target="_blank"
      class="affine-bookmark-link"
    >
      <div class="affine-bookmark-content-wrapper">
        <div class="affine-bookmark-title">
          <div class="affine-bookmark-icon">
            ${o?rt`<img src="${o}" alt="icon" />`:Vae}
          </div>
          <div class="affine-bookmark-title-content">
            ${t||"Bookmark"}
          </div>
        </div>

        <div class="affine-bookmark-description">${r||e}</div>
        <div class="affine-bookmark-url">${e}</div>
      </div>
      <div class="affine-bookmark-banner ${i?"shadow":""}">
        ${i?rt`<img src="${i}" alt="image" />`:Cse}
      </div>
    </a>`;return e?rt`
      ${l}
      <div
        class="affine-bookmark-block-container"
        @mouseover="${this._onHover}"
        @mouseout="${this._onHoverOut}"
      >
        ${d} ${this._isLoading?u:p}
        <input
          .disabled=${this.model.page.readonly}
          placeholder="Write a caption"
          class="affine-bookmark-caption"
          value=${this._caption}
          @input=${this._onInputChange}
          @blur=${this._onInputBlur}
          @click=${f=>{f.stopPropagation()}}
        />
      </div>
    `:s}};Oh.styles=vr`
    .affine-bookmark-block-container {
      width: 100%;
      margin-top: calc(var(--affine-paragraph-space) + 8px);
      position: relative;
    }
    .affine-bookmark-link {
      height: 112px;
      box-shadow: var(--affine-shadow-1);
      background: var(--affine-card-background-blue);
      border: 3px solid var(--affine-background-secondary-color);
      border-radius: 12px;
      padding: 16px 24px;
      display: flex;
      cursor: pointer;
      text-decoration: none;
      color: var(--affine-text-primary-color);
      overflow: hidden;
      line-height: calc(1em + 4px);
      position: relative;
    }
    .affine-bookmark-banner {
      width: 140px;
      height: 93px;
      margin-left: 20px;
      border-radius: 8px 8px 0 0;
      overflow: hidden;
      flex-shrink: 0;
    }
    .affine-bookmark-banner.shadow {
      box-shadow: var(--affine-shadow-1);
    }

    .affine-bookmark-banner img,
    .affine-bookmark-banner svg {
      width: 140px;
      height: 93px;
      object-fit: cover;
    }
    .affine-bookmark-content-wrapper {
      flex-grow: 1;
      overflow: hidden;
    }
    .affine-bookmark-title {
      height: 18px;
      display: flex;
      align-items: center;
      font-size: var(--affine-font-sm);
      font-weight: 600;
    }
    .affine-bookmark-title-content {
      flex-grow: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      margin-left: 8px;
    }
    .affine-bookmark-icon {
      width: 18px;
      height: 18px;
      color: var(--affine-text-secondary-color);
      flex-shrink: 0;
    }
    .affine-bookmark-icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .affine-bookmark-description {
      height: 32px;
      line-height: 16px;
      margin-top: 4px;
      font-size: var(--affine-font-xs);

      display: -webkit-box;
      word-break: break-all;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .affine-bookmark-url {
      font-size: var(--affine-font-xs);
      color: var(--affine-text-secondary-color);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      margin-top: 2px;
    }
    .affine-bookmark-caption {
      width: 100%;
      font-size: var(--affine-font-sm);
      outline: none;
      border: 0;
      font-family: inherit;
      text-align: center;
      color: var(--affine-icon-color);
      display: none;
      background: var(--affine-background-primary-color);
    }
    .affine-bookmark-caption::placeholder {
      color: var(--affine-placeholder-color);
    }
    .affine-bookmark-caption.caption-show {
      display: inline-block;
    }
    .affine-bookmark-loading {
      width: 100%;
      height: 112px;
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      box-shadow: var(--affine-shadow-1);
      background: var(--affine-hover-color);
      border: 3px solid var(--affine-background-secondary-color);
      color: var(--affine-placeholder-color);
      border-radius: 12px;
    }
  `;G1([Rr("input.affine-bookmark-caption")],Oh.prototype,"_input",void 0);G1([Ar()],Oh.prototype,"_showCreateModal",void 0);G1([Ar()],Oh.prototype,"_showToolbar",void 0);G1([Ar()],Oh.prototype,"_showEditModal",void 0);G1([Ar()],Oh.prototype,"_caption",void 0);G1([Ar()],Oh.prototype,"_isLoading",void 0);Oh=G1([lr("affine-bookmark")],Oh);class Kk{constructor(e){this._abortController=new AbortController,this._disposables=new Ya,this._suggestionState={show:!1,position:{x:0,y:0},loading:!1,text:""},this.onFocusIn=t=>{if(!this.provider)return;xt(this.model);const o=this.vEditor;xt(o),this._disposables.add(o.slots.vRangeUpdated.on(async([i,a])=>{this._updateSuggestions(i)}))},this.onFocusOut=t=>{this._abortController.abort(),this._disposables.dispose(),this._disposables=new Ya},this._updateSuggestions=zR(async t=>{this._abortController.abort(),this._abortController=new AbortController,xt(this.model);const r=this.vEditor;xt(r);const o=r.yText.length;if(!o||t.length!==0||t.index!==o)return;const i=this.model.page.root;if(xt(i),!Tr(i,["affine:page"]))throw new Error("Invalid page root");this._setSuggestionState({show:!0,loading:!0,position:this._updatePosition()});const a=this.model.text;xt(a);const s=a.toString(),l=i.title.toString(),d=this._abortController;d.signal.addEventListener("abort",()=>{this._setSuggestionState({show:!1,loading:!1})});try{xt(this.provider);const u=await this.provider({title:l,text:s,abortSignal:d.signal});if(d.signal.aborted){this._setSuggestionState({show:!1,loading:!1});return}requestAnimationFrame(()=>{this._setSuggestionState({show:!0,loading:!1,text:u,position:this._updatePosition()})})}catch(u){console.error("Failed to get inline suggest",u),this._setSuggestionState({show:!1,loading:!1})}},300,{leading:!1}),this.onKeyDown=t=>{if(!this._suggestionState.show||this._suggestionState.loading)return;if(t.isComposing||t.key!=="Tab"){requestAnimationFrame(()=>{const a=this._updatePosition();this._setSuggestionState({position:a})});return}const r=this.vEditor;xt(r);const o=r.getVRange();if(!o)return;const i=this._suggestionState.text;r.insertText(o,i),r.setVRange({index:o.index+i.length,length:0}),this._setSuggestionState({text:""}),t.stopPropagation(),t.preventDefault()},e.addController(this),this.host=e}hostConnected(){this._disposables=new Ya}hostDisconnected(){this._disposables.dispose()}init({model:e,vEditor:t,provider:r}){this.provider=r,this.model=e,this.vEditor=t}_setSuggestionState(e){const t=this._suggestionState;this._suggestionState={...t,...e},this.host.requestUpdate()}_updatePosition(){const e=this.host.getBoundingClientRect();if(!Cm())return;const r=Ba().getBoundingClientRect();return{x:r.x-e.x,y:-r.height}}render(){if(!this._suggestionState.show)return Di;const e=this._suggestionState.loading?"...":this._suggestionState.text,t=this._suggestionState.position;return e?rt`<div
      class="inline-suggestion"
      style="text-indent: ${t.x+2}px;"
    >
      ${e}
    </div>`:Di}}Kk.styles=vr`
    .inline-suggestion {
      display: flex;
      align-items: center;
      gap: 4px;
      left: 0;
      top: 0;
      color: var(--affine-placeholder-color);
      fill: var(--affine-placeholder-color);
      margin-bottom: calc(-1 * var(--affine-line-height));
      transform: translateY(calc(-1 * var(--affine-line-height)));
      pointer-events: none;
    }
  `;var oz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function Yk(n,e){let t="";n.underline&&(t+="underline"),n.strike&&(t+=" line-through");let r={};return n.code&&(r={"font-family":"var(--affine-font-code-family)",background:"var(--affine-background-code-block)",color:"var(--affine-text-primary-color)","border-radius":"4px",padding:"3px 6px","font-size":"calc(var(--affine-font-base) - 4px)","font-variant-ligatures":"none","line-height":"var(--affine-font-base)",border:"1px solid var(--affine-border-color)"}),Ur({"font-weight":n.bold?"bold":"normal","font-style":n.italic?"italic":"normal","text-decoration":t.length>0?t:"none",...r,...e})}let V6=class extends ua{constructor(){super(...arguments),this.delta={insert:Hu}}render(){const e=this.delta.attributes?Yk(this.delta.attributes):Ur({});return rt`<span style=${e}
      ><v-text .str=${this.delta.insert}></v-text
    ></span>`}};V6.styles=vr`
    affine-text {
      white-space: break-spaces;
      word-break: break-word;
    }
  `;oz([Ft({type:Object})],V6.prototype,"delta",void 0);V6=oz([lr("affine-text")],V6);var Gk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Jv=" ",Sse="Untitled";let Qv=class extends ui(ua){constructor(){super(...arguments),this.delta={insert:Hu,attributes:{}},this._refAttribute={type:"LinkedPage",pageId:"0"},this._updateRefMeta=e=>{var r;const t=(r=this.delta.attributes)==null?void 0:r.reference;xt(t,"Failed to get reference attribute!"),this._refAttribute=t,this._refMeta=e.workspace.meta.pageMetas.find(o=>o.id===t.pageId)}}connectedCallback(){super.connectedCallback(),this.delta.insert!==Jv&&console.error(`Reference node must be initialized with '${Jv}', but got '${this.delta.insert}'`);const e=Bl(this),t=e.page;this._updateRefMeta(t),this._disposables.add(e.page.workspace.slots.pagesUpdated.on(()=>this._updateRefMeta(t)))}_onClick(e){const t=this._refMeta,r=Bl(this);if(!t){console.warn("The page is deleted",this._refAttribute.pageId);return}if(t.id===r.page.id)return;const o=t.id,i=r.page.root;xt(i);const a=mx(i==null?void 0:i.id);xt(a),a.slots.pageLinkClicked.emit({pageId:o})}render(){var s;const e=this._refMeta,t=!e,r=t?"Deleted page":e.title,o=this.delta.attributes;xt(o,"Failed to get attributes!");const i=(s=o.reference)==null?void 0:s.type;xt(i,"Unable to get reference type!");const a=Yk(o,t?{color:"var(--affine-text-disable-color)",fill:"var(--affine-text-disable-color)"}:{});return rt`<span
      class="affine-reference"
      style=${a}
      @click=${this._onClick}
      >${i==="LinkedPage"?VJ:WJ}<span
        class="affine-reference-title"
        data-title=${r||Sse}
        data-virgo-text="true"
        data-virgo-text-value=${xI}
        >${xI}</span
      ></span
    >`}};Qv.styles=vr`
    .affine-reference {
      white-space: nowrap;
      word-break: break-word;
      color: var(--affine-link-color);
      fill: var(--affine-link-color);
      border-radius: 2px;
      text-decoration: none;
      cursor: pointer;
      user-select: none;
      padding: 0 2px;
      margin: 0 2px;
    }
    .affine-reference:hover {
      background: var(--affine-hover-color);
    }

    .affine-reference > svg {
      margin-right: 4px;
    }

    .affine-reference > span {
      white-space: break-spaces;
    }

    .affine-reference-title {
      color: var(--affine-text-primary-color);
    }
    .affine-reference-title::before {
      content: attr(data-title);
      color: var(--affine-link-color);
    }
  `;Gk([Ft({type:Object})],Qv.prototype,"delta",void 0);Gk([Ar()],Qv.prototype,"_refMeta",void 0);Qv=Gk([lr("affine-reference")],Qv);var Ex=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Vg=class extends so{constructor(){super(),this.hostModel=null,this.radius="8px",this.width="150px"}connectedCallback(){super.connectedCallback(),this.hostModel&&(this.setAttribute(Ss,this.hostModel.id),this.setAttribute(eq,"true"));const e=this.width;this.style.setProperty("--loader-width",typeof e=="string"?e:`${e}px`)}render(){return rt`
      <div class="load-container">
        <div class="load load1"></div>
        <div class="load load2"></div>
        <div class="load"></div>
      </div>
    `}};Vg.styles=vr`
    .load-container {
      margin: 10px auto;
      width: var(--loader-width);
      text-align: center;
    }

    .load-container .load {
      width: 8px;
      height: 8px;
      background-color: var(--affine-text-primary-color);

      border-radius: 100%;
      display: inline-block;
      -webkit-animation: bouncedelay 1.4s infinite ease-in-out;
      animation: bouncedelay 1.4s infinite ease-in-out;
      /* Prevent first frame from flickering when animation starts */
      -webkit-animation-fill-mode: both;
      animation-fill-mode: both;
    }
    .load-container .load1 {
      -webkit-animation-delay: -0.32s;
      animation-delay: -0.32s;
    }
    .load-container .load2 {
      -webkit-animation-delay: -0.16s;
      animation-delay: -0.16s;
    }

    @-webkit-keyframes bouncedelay {
      0%,
      80%,
      100% {
        -webkit-transform: scale(0.625);
      }
      40% {
        -webkit-transform: scale(1);
      }
    }

    @keyframes bouncedelay {
      0%,
      80%,
      100% {
        transform: scale(0);
        -webkit-transform: scale(0.625);
      }
      40% {
        transform: scale(1);
        -webkit-transform: scale(1);
      }
    }
  `;Ex([Ft()],Vg.prototype,"hostModel",void 0);Ex([Ft()],Vg.prototype,"radius",void 0);Ex([Ft()],Vg.prototype,"width",void 0);Vg=Ex([lr("loader-element")],Vg);var iz={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,o,i){function a(d,u){if(!o[d]){if(!r[d]){var p=typeof f5=="function"&&f5;if(!u&&p)return p(d,!0);if(s)return s(d,!0);var f=new Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f}var h=o[d]={exports:{}};r[d][0].call(h.exports,function(c){var g=r[d][1][c];return a(g||c)},h,h.exports,t,r,o,i)}return o[d].exports}for(var s=typeof f5=="function"&&f5,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(t,r,o){var i=t("./utils"),a=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(l){for(var d,u,p,f,h,c,g,m=[],b=0,v=l.length,w=v,_=i.getTypeOf(l)!=="string";b<l.length;)w=v-b,p=_?(d=l[b++],u=b<v?l[b++]:0,b<v?l[b++]:0):(d=l.charCodeAt(b++),u=b<v?l.charCodeAt(b++):0,b<v?l.charCodeAt(b++):0),f=d>>2,h=(3&d)<<4|u>>4,c=1<w?(15&u)<<2|p>>6:64,g=2<w?63&p:64,m.push(s.charAt(f)+s.charAt(h)+s.charAt(c)+s.charAt(g));return m.join("")},o.decode=function(l){var d,u,p,f,h,c,g=0,m=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var v,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&w--,l.charAt(l.length-2)===s.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|w):new Array(0|w);g<l.length;)d=s.indexOf(l.charAt(g++))<<2|(f=s.indexOf(l.charAt(g++)))>>4,u=(15&f)<<4|(h=s.indexOf(l.charAt(g++)))>>2,p=(3&h)<<6|(c=s.indexOf(l.charAt(g++))),v[m++]=d,h!==64&&(v[m++]=u),c!==64&&(v[m++]=p);return v}},{"./support":30,"./utils":32}],2:[function(t,r,o){var i=t("./external"),a=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function d(u,p,f,h,c){this.compressedSize=u,this.uncompressedSize=p,this.crc32=f,this.compression=h,this.compressedContent=c}d.prototype={getContentWorker:function(){var u=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return u.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,p,f){return u.pipe(new s).pipe(new l("uncompressedSize")).pipe(p.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,o){var i=t("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},o.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,o){var i=t("./utils"),a=function(){for(var s,l=[],d=0;d<256;d++){s=d;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;l[d]=s}return l}();r.exports=function(s,l){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(d,u,p,f){var h=a,c=f+p;d^=-1;for(var g=f;g<c;g++)d=d>>>8^h[255&(d^u[g])];return-1^d}(0|l,s,s.length,0):function(d,u,p,f){var h=a,c=f+p;d^=-1;for(var g=f;g<c;g++)d=d>>>8^h[255&(d^u.charCodeAt(g))];return-1^d}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(t,r,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(t,r,o){var i=null;i=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:i}},{lie:37}],7:[function(t,r,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),s=t("./utils"),l=t("./stream/GenericWorker"),d=i?"uint8array":"array";function u(p,f){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=f,this.meta={}}o.magic="\b\0",s.inherits(u,l),u.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(d,p.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(f){p.push({data:f,meta:p.meta})}},o.compressWorker=function(p){return new u("Deflate",p)},o.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,o){function i(h,c){var g,m="";for(g=0;g<c;g++)m+=String.fromCharCode(255&h),h>>>=8;return m}function a(h,c,g,m,b,v){var w,_,k=h.file,y=h.compression,S=v!==d.utf8encode,C=s.transformTo("string",v(k.name)),I=s.transformTo("string",d.utf8encode(k.name)),A=k.comment,T=s.transformTo("string",v(A)),L=s.transformTo("string",d.utf8encode(A)),j=I.length!==k.name.length,$=L.length!==A.length,ee="",Q="",pe="",ie=k.dir,te=k.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};c&&!g||(Z.crc32=h.crc32,Z.compressedSize=h.compressedSize,Z.uncompressedSize=h.uncompressedSize);var D=0;c&&(D|=8),S||!j&&!$||(D|=2048);var B=0,H=0;ie&&(B|=16),b==="UNIX"?(H=798,B|=function(R,Y){var E=R;return R||(E=Y?16893:33204),(65535&E)<<16}(k.unixPermissions,ie)):(H=20,B|=function(R){return 63&(R||0)}(k.dosPermissions)),w=te.getUTCHours(),w<<=6,w|=te.getUTCMinutes(),w<<=5,w|=te.getUTCSeconds()/2,_=te.getUTCFullYear()-1980,_<<=4,_|=te.getUTCMonth()+1,_<<=5,_|=te.getUTCDate(),j&&(Q=i(1,1)+i(u(C),4)+I,ee+="up"+i(Q.length,2)+Q),$&&(pe=i(1,1)+i(u(T),4)+L,ee+="uc"+i(pe.length,2)+pe);var V="";return V+=`
\0`,V+=i(D,2),V+=y.magic,V+=i(w,2),V+=i(_,2),V+=i(Z.crc32,4),V+=i(Z.compressedSize,4),V+=i(Z.uncompressedSize,4),V+=i(C.length,2),V+=i(ee.length,2),{fileRecord:p.LOCAL_FILE_HEADER+V+C+ee,dirRecord:p.CENTRAL_FILE_HEADER+i(H,2)+V+i(T.length,2)+"\0\0\0\0"+i(B,4)+i(m,4)+C+ee+T}}var s=t("../utils"),l=t("../stream/GenericWorker"),d=t("../utf8"),u=t("../crc32"),p=t("../signature");function f(h,c,g,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=g,this.encodeFileName=m,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,l),f.prototype.push=function(h){var c=h.meta.percent||0,g=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,l.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:g?(c+100*(g-m-1))/g:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var c=this.streamFiles&&!h.file.dir;if(c){var g=a(h,c,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var c=this.streamFiles&&!h.file.dir,g=a(h,c,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),c)this.push({data:function(m){return p.DATA_DESCRIPTOR+i(m.crc32,4)+i(m.compressedSize,4)+i(m.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,c=0;c<this.dirRecords.length;c++)this.push({data:this.dirRecords[c],meta:{percent:100}});var g=this.bytesWritten-h,m=function(b,v,w,_,k){var y=s.transformTo("string",k(_));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(v,4)+i(w,4)+i(y.length,2)+y}(this.dirRecords.length,g,h,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var c=this;return h.on("data",function(g){c.processChunk(g)}),h.on("end",function(){c.closedSource(c.previous.streamInfo),c._sources.length?c.prepareNextSource():c.end()}),h.on("error",function(g){c.error(g)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var c=this._sources;if(!l.prototype.error.call(this,h))return!1;for(var g=0;g<c.length;g++)try{c[g].error(h)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var h=this._sources,c=0;c<h.length;c++)h[c].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,o){var i=t("../compressions"),a=t("./ZipFileWorker");o.generateWorker=function(s,l,d){var u=new a(l.streamFiles,d,l.platform,l.encodeFileName),p=0;try{s.forEach(function(f,h){p++;var c=function(v,w){var _=v||w,k=i[_];if(!k)throw new Error(_+" is not a valid compression method !");return k}(h.options.compression,l.compression),g=h.options.compressionOptions||l.compressionOptions||{},m=h.dir,b=h.date;h._compressWorker(c,g).withStreamInfo("file",{name:f,dir:m,date:b,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(u)}),u.entriesCount=p}catch(f){u.error(f)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,o){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var s in this)typeof this[s]!="function"&&(a[s]=this[s]);return a}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(a,s){return new i().loadAsync(a,s)},i.external=t("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,o){var i=t("./utils"),a=t("./external"),s=t("./utf8"),l=t("./zipEntries"),d=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function p(f){return new a.Promise(function(h,c){var g=f.decompressed.getContentWorker().pipe(new d);g.on("error",function(m){c(m)}).on("end",function(){g.streamInfo.crc32!==f.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(f,h){var c=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),u.isNode&&u.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(g){var m=new l(h);return m.load(g),m}).then(function(g){var m=[a.Promise.resolve(g)],b=g.files;if(h.checkCRC32)for(var v=0;v<b.length;v++)m.push(p(b[v]));return a.Promise.all(m)}).then(function(g){for(var m=g.shift(),b=m.files,v=0;v<b.length;v++){var w=b[v],_=w.fileNameStr,k=i.resolve(w.fileNameStr);c.file(k,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:h.createFolders}),w.dir||(c.file(k).unsafeOriginalName=_)}return m.zipComment.length&&(c.comment=m.zipComment),c})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,o){var i=t("../utils"),a=t("../stream/GenericWorker");function s(l,d){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(s,a),s.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},s.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,o){var i=t("readable-stream").Readable;function a(s,l,d){i.call(this,l),this._helper=s;var u=this;s.on("data",function(p,f){u.push(p)||u._helper.pause(),d&&d(f)}).on("error",function(p){u.emit("error",p)}).on("end",function(){u.push(null)})}t("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,r,o){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,r,o){function i(k,y,S){var C,I=s.getTypeOf(y),A=s.extend(S||{},u);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(k=b(k)),A.createFolders&&(C=m(k))&&v.call(this,C,!0);var T=I==="string"&&A.binary===!1&&A.base64===!1;S&&S.binary!==void 0||(A.binary=!T),(y instanceof p&&y.uncompressedSize===0||A.dir||!y||y.length===0)&&(A.base64=!1,A.binary=!0,y="",A.compression="STORE",I="string");var L=null;L=y instanceof p||y instanceof l?y:c.isNode&&c.isStream(y)?new g(k,y):s.prepareContent(k,y,A.binary,A.optimizedBinaryString,A.base64);var j=new f(k,L,A);this.files[k]=j}var a=t("./utf8"),s=t("./utils"),l=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),u=t("./defaults"),p=t("./compressedObject"),f=t("./zipObject"),h=t("./generate"),c=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),m=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var y=k.lastIndexOf("/");return 0<y?k.substring(0,y):""},b=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},v=function(k,y){return y=y!==void 0?y:u.createFolders,k=b(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:y}),this.files[k]};function w(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var y,S,C;for(y in this.files)C=this.files[y],(S=y.slice(this.root.length,y.length))&&y.slice(0,this.root.length)===this.root&&k(S,C)},filter:function(k){var y=[];return this.forEach(function(S,C){k(S,C)&&y.push(C)}),y},file:function(k,y,S){if(arguments.length!==1)return k=this.root+k,i.call(this,k,y,S),this;if(w(k)){var C=k;return this.filter(function(A,T){return!T.dir&&C.test(A)})}var I=this.files[this.root+k];return I&&!I.dir?I:null},folder:function(k){if(!k)return this;if(w(k))return this.filter(function(I,A){return A.dir&&k.test(I)});var y=this.root+k,S=v.call(this,y),C=this.clone();return C.root=S.name,C},remove:function(k){k=this.root+k;var y=this.files[k];if(y||(k.slice(-1)!=="/"&&(k+="/"),y=this.files[k]),y&&!y.dir)delete this.files[k];else for(var S=this.filter(function(I,A){return A.name.slice(0,k.length)===k}),C=0;C<S.length;C++)delete this.files[S[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var y,S={};try{if((S=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");s.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var C=S.comment||this.comment||"";y=h.generateWorker(this,S,C)}catch(I){(y=new l("error")).error(I)}return new d(y,S.type||"string",S.mimeType)},generateAsync:function(k,y){return this.generateInternalStream(k).accumulate(y)},generateNodeStream:function(k,y){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(y)}};r.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,o){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,o){var i=t("./DataReader");function a(s){i.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}t("../utils").inherits(a,i),a.prototype.byteAt=function(s){return this.data[this.zero+s]},a.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),d=s.charCodeAt(1),u=s.charCodeAt(2),p=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===d&&this.data[f+2]===u&&this.data[f+3]===p)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),d=s.charCodeAt(1),u=s.charCodeAt(2),p=s.charCodeAt(3),f=this.readData(4);return l===f[0]&&d===f[1]&&u===f[2]&&p===f[3]},a.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,r,o){var i=t("../utils");function a(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,d=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=s,d},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=a},{"../utils":32}],19:[function(t,r,o){var i=t("./Uint8ArrayReader");function a(s){i.call(this,s)}t("../utils").inherits(a,i),a.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,o){var i=t("./DataReader");function a(s){i.call(this,s)}t("../utils").inherits(a,i),a.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},a.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},a.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},a.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,r,o){var i=t("./ArrayReader");function a(s){i.call(this,s)}t("../utils").inherits(a,i),a.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,o){var i=t("../utils"),a=t("../support"),s=t("./ArrayReader"),l=t("./StringReader"),d=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");r.exports=function(p){var f=i.getTypeOf(p);return i.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new d(p):a.uint8array?new u(i.transformTo("uint8array",p)):new s(i.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,o){var i=t("./GenericWorker"),a=t("../utils");function s(l){i.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(s,i),s.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,o){var i=t("./GenericWorker"),a=t("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,i),s.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,o){var i=t("../utils"),a=t("./GenericWorker");function s(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(s,a),s.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,o){var i=t("../utils"),a=t("./GenericWorker");function s(l){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){d.dataIsReady=!0,d.data=u,d.max=u&&u.length||0,d.type=i.getTypeOf(u),d.isPaused||d._tickAndRepeat()},function(u){d.error(u)})}i.inherits(s,a),s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,o){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,s){return this._listeners[a].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,s){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,s)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var s=this;return a.on("data",function(l){s.processChunk(l)}),a.on("end",function(){s.end()}),a.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,s){return this.extraStreamInfo[a]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(t,r,o){var i=t("../utils"),a=t("./ConvertWorker"),s=t("./GenericWorker"),l=t("../base64"),d=t("../support"),u=t("../external"),p=null;if(d.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(c,g){return new u.Promise(function(m,b){var v=[],w=c._internalType,_=c._outputType,k=c._mimeType;c.on("data",function(y,S){v.push(y),g&&g(S)}).on("error",function(y){v=[],b(y)}).on("end",function(){try{var y=function(S,C,I){switch(S){case"blob":return i.newBlob(i.transformTo("arraybuffer",C),I);case"base64":return l.encode(C);default:return i.transformTo(S,C)}}(_,function(S,C){var I,A=0,T=null,L=0;for(I=0;I<C.length;I++)L+=C[I].length;switch(S){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(T=new Uint8Array(L),I=0;I<C.length;I++)T.set(C[I],A),A+=C[I].length;return T;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+S+"'")}}(w,v),k);m(y)}catch(S){b(S)}v=[]}).resume()})}function h(c,g,m){var b=g;switch(g){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=g,this._mimeType=m,i.checkSupport(b),this._worker=c.pipe(new a(b)),c.lock()}catch(v){this._worker=new s("error"),this._worker.error(v)}}h.prototype={accumulate:function(c){return f(this,c)},on:function(c,g){var m=this;return c==="data"?this._worker.on(c,function(b){g.call(m,b.data,b.meta)}):this._worker.on(c,function(){i.delay(g,arguments,m)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(c){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},c)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var i=new ArrayBuffer(0);try{o.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),o.blob=a.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!t("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,o){for(var i=t("./utils"),a=t("./support"),s=t("./nodejsUtils"),l=t("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;d[254]=d[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}o.utf8encode=function(h){return a.nodebuffer?s.newBufferFrom(h,"utf-8"):function(c){var g,m,b,v,w,_=c.length,k=0;for(v=0;v<_;v++)(64512&(m=c.charCodeAt(v)))==55296&&v+1<_&&(64512&(b=c.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),k+=m<128?1:m<2048?2:m<65536?3:4;for(g=a.uint8array?new Uint8Array(k):new Array(k),v=w=0;w<k;v++)(64512&(m=c.charCodeAt(v)))==55296&&v+1<_&&(64512&(b=c.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),m<128?g[w++]=m:(m<2048?g[w++]=192|m>>>6:(m<65536?g[w++]=224|m>>>12:(g[w++]=240|m>>>18,g[w++]=128|m>>>12&63),g[w++]=128|m>>>6&63),g[w++]=128|63&m);return g}(h)},o.utf8decode=function(h){return a.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(c){var g,m,b,v,w=c.length,_=new Array(2*w);for(g=m=0;g<w;)if((b=c[g++])<128)_[m++]=b;else if(4<(v=d[b]))_[m++]=65533,g+=v-1;else{for(b&=v===2?31:v===3?15:7;1<v&&g<w;)b=b<<6|63&c[g++],v--;1<v?_[m++]=65533:b<65536?_[m++]=b:(b-=65536,_[m++]=55296|b>>10&1023,_[m++]=56320|1023&b)}return _.length!==m&&(_.subarray?_=_.subarray(0,m):_.length=m),i.applyFromCharCode(_)}(h=i.transformTo(a.uint8array?"uint8array":"array",h))},i.inherits(p,l),p.prototype.processChunk=function(h){var c=i.transformTo(a.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var g=c;(c=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),c.set(g,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var m=function(v,w){var _;for((w=w||v.length)>v.length&&(w=v.length),_=w-1;0<=_&&(192&v[_])==128;)_--;return _<0||_===0?w:_+d[v[_]]>w?_:w}(c),b=c;m!==c.length&&(a.uint8array?(b=c.subarray(0,m),this.leftOver=c.subarray(m,c.length)):(b=c.slice(0,m),this.leftOver=c.slice(m,c.length))),this.push({data:o.utf8decode(b),meta:h.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=p,i.inherits(f,l),f.prototype.processChunk=function(h){this.push({data:o.utf8encode(h.data),meta:h.meta})},o.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,o){var i=t("./support"),a=t("./base64"),s=t("./nodejsUtils"),l=t("./external");function d(g){return g}function u(g,m){for(var b=0;b<g.length;++b)m[b]=255&g.charCodeAt(b);return m}t("setimmediate"),o.newBlob=function(g,m){o.checkSupport("blob");try{return new Blob([g],{type:m})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(g),b.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(g,m,b){var v=[],w=0,_=g.length;if(_<=b)return String.fromCharCode.apply(null,g);for(;w<_;)m==="array"||m==="nodebuffer"?v.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+b,_)))):v.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+b,_)))),w+=b;return v.join("")},stringifyByChar:function(g){for(var m="",b=0;b<g.length;b++)m+=String.fromCharCode(g[b]);return m},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(g){var m=65536,b=o.getTypeOf(g),v=!0;if(b==="uint8array"?v=p.applyCanBeUsed.uint8array:b==="nodebuffer"&&(v=p.applyCanBeUsed.nodebuffer),v)for(;1<m;)try{return p.stringifyByChunk(g,b,m)}catch{m=Math.floor(m/2)}return p.stringifyByChar(g)}function h(g,m){for(var b=0;b<g.length;b++)m[b]=g[b];return m}o.applyFromCharCode=f;var c={};c.string={string:d,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return c.string.uint8array(g).buffer},uint8array:function(g){return u(g,new Uint8Array(g.length))},nodebuffer:function(g){return u(g,s.allocBuffer(g.length))}},c.array={string:f,array:d,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return s.newBufferFrom(g)}},c.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return h(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:d,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return s.newBufferFrom(new Uint8Array(g))}},c.uint8array={string:f,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:d,nodebuffer:function(g){return s.newBufferFrom(g)}},c.nodebuffer={string:f,array:function(g){return h(g,new Array(g.length))},arraybuffer:function(g){return c.nodebuffer.uint8array(g).buffer},uint8array:function(g){return h(g,new Uint8Array(g.length))},nodebuffer:d},o.transformTo=function(g,m){if(m=m||"",!g)return m;o.checkSupport(g);var b=o.getTypeOf(m);return c[b][g](m)},o.resolve=function(g){for(var m=g.split("/"),b=[],v=0;v<m.length;v++){var w=m[v];w==="."||w===""&&v!==0&&v!==m.length-1||(w===".."?b.pop():b.push(w))}return b.join("/")},o.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(g)?"nodebuffer":i.uint8array&&g instanceof Uint8Array?"uint8array":i.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(g){if(!i[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(g){var m,b,v="";for(b=0;b<(g||"").length;b++)v+="\\x"+((m=g.charCodeAt(b))<16?"0":"")+m.toString(16).toUpperCase();return v},o.delay=function(g,m,b){setImmediate(function(){g.apply(b||null,m||[])})},o.inherits=function(g,m){function b(){}b.prototype=m.prototype,g.prototype=new b},o.extend=function(){var g,m,b={};for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&b[m]===void 0&&(b[m]=arguments[g][m]);return b},o.prepareContent=function(g,m,b,v,w){return l.Promise.resolve(m).then(function(_){return i.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,y){var S=new FileReader;S.onload=function(C){k(C.target.result)},S.onerror=function(C){y(C.target.error)},S.readAsArrayBuffer(_)}):_}).then(function(_){var k=o.getTypeOf(_);return k?(k==="arraybuffer"?_=o.transformTo("uint8array",_):k==="string"&&(w?_=a.decode(_):b&&v!==!0&&(_=function(y){return u(y,i.uint8array?new Uint8Array(y.length):new Array(y.length))}(_))),_):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,o){var i=t("./reader/readerFor"),a=t("./utils"),s=t("./signature"),l=t("./zipEntry"),d=t("./support");function u(p){this.files=[],this.loadOptions=p}u.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(p)+")")}},isSignature:function(p,f){var h=this.reader.index;this.reader.setIndex(p);var c=this.reader.readString(4)===f;return this.reader.setIndex(h),c},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),f=d.uint8array?"uint8array":"array",h=a.transformTo(f,p);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,f,h,c=this.zip64EndOfCentralSize-44;0<c;)p=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[p]={id:p,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,f;for(p=0;p<this.files.length;p++)f=this.files[p],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var f=p;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var c=f-h;if(0<c)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=c);else if(c<0)throw new Error("Corrupted zip: missing "+Math.abs(c)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,o){var i=t("./reader/readerFor"),a=t("./utils"),s=t("./compressedObject"),l=t("./crc32"),d=t("./utf8"),u=t("./compressions"),p=t("./support");function f(h,c){this.options=h,this.loadOptions=c}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var c,g;if(h.skip(22),this.fileNameLength=h.readInt(2),g=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((c=function(m){for(var b in u)if(Object.prototype.hasOwnProperty.call(u,b)&&u[b].magic===m)return u[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,c,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var c=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(c),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var c,g,m,b=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<b;)c=h.readInt(2),g=h.readInt(2),m=h.readData(g),this.extraFields[c]={id:c,length:g,value:m};h.setIndex(b)},handleUTF8:function(){var h=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{var g=a.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var b=a.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var c=i(h.value);return c.readInt(1)!==1||l(this.fileName)!==c.readInt(4)?null:d.utf8decode(c.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var c=i(h.value);return c.readInt(1)!==1||l(this.fileComment)!==c.readInt(4)?null:d.utf8decode(c.readData(h.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,o){function i(c,g,m){this.name=c,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=g,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var a=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),l=t("./utf8"),d=t("./compressedObject"),u=t("./stream/GenericWorker");i.prototype={internalStream:function(c){var g=null,m="string";try{if(!c)throw new Error("No output type specified.");var b=(m=c.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),g=this._decompressWorker();var v=!this._dataBinary;v&&!b&&(g=g.pipe(new l.Utf8EncodeWorker)),!v&&b&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(w){(g=new u("error")).error(w)}return new a(g,m,"")},async:function(c,g){return this.internalStream(c).accumulate(g)},nodeStream:function(c,g){return this.internalStream(c||"nodebuffer").toNodejsStream(g)},_compressWorker:function(c,g){if(this._data instanceof d&&this._data.compression.magic===c.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(m,c,g)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof u?this._data:new s(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<p.length;h++)i.prototype[p[h]]=f;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,o){(function(i){var a,s,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var d=0,u=new l(c),p=i.document.createTextNode("");u.observe(p,{characterData:!0}),a=function(){p.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var g=i.document.createElement("script");g.onreadystatechange=function(){c(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},i.document.documentElement.appendChild(g)}:function(){setTimeout(c,0)};else{var f=new i.MessageChannel;f.port1.onmessage=c,a=function(){f.port2.postMessage(0)}}var h=[];function c(){var g,m;s=!0;for(var b=h.length;b;){for(m=h,h=[],g=-1;++g<b;)m[g]();b=h.length}s=!1}r.exports=function(g){h.push(g)!==1||s||a()}}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,o){var i=t("immediate");function a(){}var s={},l=["REJECTED"],d=["FULFILLED"],u=["PENDING"];function p(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,b!==a&&g(this,b)}function f(b,v,w){this.promise=b,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function h(b,v,w){i(function(){var _;try{_=v(w)}catch(k){return s.reject(b,k)}_===b?s.reject(b,new TypeError("Cannot resolve promise with itself")):s.resolve(b,_)})}function c(b){var v=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof v=="function")return function(){v.apply(b,arguments)}}function g(b,v){var w=!1;function _(S){w||(w=!0,s.reject(b,S))}function k(S){w||(w=!0,s.resolve(b,S))}var y=m(function(){v(k,_)});y.status==="error"&&_(y.value)}function m(b,v){var w={};try{w.value=b(v),w.status="success"}catch(_){w.status="error",w.value=_}return w}(r.exports=p).prototype.finally=function(b){if(typeof b!="function")return this;var v=this.constructor;return this.then(function(w){return v.resolve(b()).then(function(){return w})},function(w){return v.resolve(b()).then(function(){throw w})})},p.prototype.catch=function(b){return this.then(null,b)},p.prototype.then=function(b,v){if(typeof b!="function"&&this.state===d||typeof v!="function"&&this.state===l)return this;var w=new this.constructor(a);return this.state!==u?h(w,this.state===d?b:v,this.outcome):this.queue.push(new f(w,b,v)),w},f.prototype.callFulfilled=function(b){s.resolve(this.promise,b)},f.prototype.otherCallFulfilled=function(b){h(this.promise,this.onFulfilled,b)},f.prototype.callRejected=function(b){s.reject(this.promise,b)},f.prototype.otherCallRejected=function(b){h(this.promise,this.onRejected,b)},s.resolve=function(b,v){var w=m(c,v);if(w.status==="error")return s.reject(b,w.value);var _=w.value;if(_)g(b,_);else{b.state=d,b.outcome=v;for(var k=-1,y=b.queue.length;++k<y;)b.queue[k].callFulfilled(v)}return b},s.reject=function(b,v){b.state=l,b.outcome=v;for(var w=-1,_=b.queue.length;++w<_;)b.queue[w].callRejected(v);return b},p.resolve=function(b){return b instanceof this?b:s.resolve(new this(a),b)},p.reject=function(b){var v=new this(a);return s.reject(v,b)},p.all=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=b.length,_=!1;if(!w)return this.resolve([]);for(var k=new Array(w),y=0,S=-1,C=new this(a);++S<w;)I(b[S],S);return C;function I(A,T){v.resolve(A).then(function(L){k[T]=L,++y!==w||_||(_=!0,s.resolve(C,k))},function(L){_||(_=!0,s.reject(C,L))})}},p.race=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=b.length,_=!1;if(!w)return this.resolve([]);for(var k=-1,y=new this(a);++k<w;)S=b[k],v.resolve(S).then(function(C){_||(_=!0,s.resolve(y,C))},function(C){_||(_=!0,s.reject(y,C))});var S;return y}},{immediate:36}],38:[function(t,r,o){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,o){var i=t("./zlib/deflate"),a=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/messages"),d=t("./zlib/zstream"),u=Object.prototype.toString,p=0,f=-1,h=0,c=8;function g(b){if(!(this instanceof g))return new g(b);this.options=a.assign({level:f,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},b||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(w!==p)throw new Error(l[w]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var _;if(_=typeof v.dictionary=="string"?s.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(w=i.deflateSetDictionary(this.strm,_))!==p)throw new Error(l[w]);this._dict_set=!0}}function m(b,v){var w=new g(v);if(w.push(b,!0),w.err)throw w.msg||l[w.err];return w.result}g.prototype.push=function(b,v){var w,_,k=this.strm,y=this.options.chunkSize;if(this.ended)return!1;_=v===~~v?v:v===!0?4:0,typeof b=="string"?k.input=s.string2buf(b):u.call(b)==="[object ArrayBuffer]"?k.input=new Uint8Array(b):k.input=b,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(y),k.next_out=0,k.avail_out=y),(w=i.deflate(k,_))!==1&&w!==p)return this.onEnd(w),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&w!==1);return _===4?(w=i.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===p):_!==2||(this.onEnd(p),!(k.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},o.Deflate=g,o.deflate=m,o.deflateRaw=function(b,v){return(v=v||{}).raw=!0,m(b,v)},o.gzip=function(b,v){return(v=v||{}).gzip=!0,m(b,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,o){var i=t("./zlib/inflate"),a=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),d=t("./zlib/messages"),u=t("./zlib/zstream"),p=t("./zlib/gzheader"),f=Object.prototype.toString;function h(g){if(!(this instanceof h))return new h(g);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},g||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||g&&g.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,m.windowBits);if(b!==l.Z_OK)throw new Error(d[b]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function c(g,m){var b=new h(m);if(b.push(g,!0),b.err)throw b.msg||d[b.err];return b.result}h.prototype.push=function(g,m){var b,v,w,_,k,y,S=this.strm,C=this.options.chunkSize,I=this.options.dictionary,A=!1;if(this.ended)return!1;v=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?S.input=s.binstring2buf(g):f.call(g)==="[object ArrayBuffer]"?S.input=new Uint8Array(g):S.input=g,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new a.Buf8(C),S.next_out=0,S.avail_out=C),(b=i.inflate(S,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(y=typeof I=="string"?s.string2buf(I):f.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,b=i.inflateSetDictionary(this.strm,y)),b===l.Z_BUF_ERROR&&A===!0&&(b=l.Z_OK,A=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&b!==l.Z_STREAM_END&&(S.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=s.utf8border(S.output,S.next_out),_=S.next_out-w,k=s.buf2string(S.output,w),S.next_out=_,S.avail_out=C-_,_&&a.arraySet(S.output,S.output,w,_,0),this.onData(k)):this.onData(a.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(A=!0)}while((0<S.avail_in||S.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(S.avail_out=0))},h.prototype.onData=function(g){this.chunks.push(g)},h.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},o.Inflate=h,o.inflate=c,o.inflateRaw=function(g,m){return(m=m||{}).raw=!0,c(g,m)},o.ungzip=c},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,o){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var p in u)u.hasOwnProperty(p)&&(l[p]=u[p])}}return l},o.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var a={arraySet:function(l,d,u,p,f){if(d.subarray&&l.subarray)l.set(d.subarray(u,u+p),f);else for(var h=0;h<p;h++)l[f+h]=d[u+h]},flattenChunks:function(l){var d,u,p,f,h,c;for(d=p=0,u=l.length;d<u;d++)p+=l[d].length;for(c=new Uint8Array(p),d=f=0,u=l.length;d<u;d++)h=l[d],c.set(h,f),f+=h.length;return c}},s={arraySet:function(l,d,u,p,f){for(var h=0;h<p;h++)l[f+h]=d[u+h]},flattenChunks:function(l){return[].concat.apply([],l)}};o.setTyped=function(l){l?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,a)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,s))},o.setTyped(i)},{}],42:[function(t,r,o){var i=t("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new i.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function u(p,f){if(f<65537&&(p.subarray&&s||!p.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(p,f));for(var h="",c=0;c<f;c++)h+=String.fromCharCode(p[c]);return h}l[254]=l[254]=1,o.string2buf=function(p){var f,h,c,g,m,b=p.length,v=0;for(g=0;g<b;g++)(64512&(h=p.charCodeAt(g)))==55296&&g+1<b&&(64512&(c=p.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(c-56320),g++),v+=h<128?1:h<2048?2:h<65536?3:4;for(f=new i.Buf8(v),g=m=0;m<v;g++)(64512&(h=p.charCodeAt(g)))==55296&&g+1<b&&(64512&(c=p.charCodeAt(g+1)))==56320&&(h=65536+(h-55296<<10)+(c-56320),g++),h<128?f[m++]=h:(h<2048?f[m++]=192|h>>>6:(h<65536?f[m++]=224|h>>>12:(f[m++]=240|h>>>18,f[m++]=128|h>>>12&63),f[m++]=128|h>>>6&63),f[m++]=128|63&h);return f},o.buf2binstring=function(p){return u(p,p.length)},o.binstring2buf=function(p){for(var f=new i.Buf8(p.length),h=0,c=f.length;h<c;h++)f[h]=p.charCodeAt(h);return f},o.buf2string=function(p,f){var h,c,g,m,b=f||p.length,v=new Array(2*b);for(h=c=0;h<b;)if((g=p[h++])<128)v[c++]=g;else if(4<(m=l[g]))v[c++]=65533,h+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&h<b;)g=g<<6|63&p[h++],m--;1<m?v[c++]=65533:g<65536?v[c++]=g:(g-=65536,v[c++]=55296|g>>10&1023,v[c++]=56320|1023&g)}return u(v,c)},o.utf8border=function(p,f){var h;for((f=f||p.length)>p.length&&(f=p.length),h=f-1;0<=h&&(192&p[h])==128;)h--;return h<0||h===0?f:h+l[p[h]]>f?h:f}},{"./common":41}],43:[function(t,r,o){r.exports=function(i,a,s,l){for(var d=65535&i|0,u=i>>>16&65535|0,p=0;s!==0;){for(s-=p=2e3<s?2e3:s;u=u+(d=d+a[l++]|0)|0,--p;);d%=65521,u%=65521}return d|u<<16|0}},{}],44:[function(t,r,o){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,o){var i=function(){for(var a,s=[],l=0;l<256;l++){a=l;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;s[l]=a}return s}();r.exports=function(a,s,l,d){var u=i,p=d+l;a^=-1;for(var f=d;f<p;f++)a=a>>>8^u[255&(a^s[f])];return-1^a}},{}],46:[function(t,r,o){var i,a=t("../utils/common"),s=t("./trees"),l=t("./adler32"),d=t("./crc32"),u=t("./messages"),p=0,f=4,h=0,c=-2,g=-1,m=4,b=2,v=8,w=9,_=286,k=30,y=19,S=2*_+1,C=15,I=3,A=258,T=A+I+1,L=42,j=113,$=1,ee=2,Q=3,pe=4;function ie(U,ve){return U.msg=u[ve],ve}function te(U){return(U<<1)-(4<U?9:0)}function Z(U){for(var ve=U.length;0<=--ve;)U[ve]=0}function D(U){var ve=U.state,oe=ve.pending;oe>U.avail_out&&(oe=U.avail_out),oe!==0&&(a.arraySet(U.output,ve.pending_buf,ve.pending_out,oe,U.next_out),U.next_out+=oe,ve.pending_out+=oe,U.total_out+=oe,U.avail_out-=oe,ve.pending-=oe,ve.pending===0&&(ve.pending_out=0))}function B(U,ve){s._tr_flush_block(U,0<=U.block_start?U.block_start:-1,U.strstart-U.block_start,ve),U.block_start=U.strstart,D(U.strm)}function H(U,ve){U.pending_buf[U.pending++]=ve}function V(U,ve){U.pending_buf[U.pending++]=ve>>>8&255,U.pending_buf[U.pending++]=255&ve}function R(U,ve){var oe,re,ae=U.max_chain_length,me=U.strstart,he=U.prev_length,se=U.nice_match,ge=U.strstart>U.w_size-T?U.strstart-(U.w_size-T):0,X=U.window,we=U.w_mask,be=U.prev,le=U.strstart+A,ye=X[me+he-1],ue=X[me+he];U.prev_length>=U.good_match&&(ae>>=2),se>U.lookahead&&(se=U.lookahead);do if(X[(oe=ve)+he]===ue&&X[oe+he-1]===ye&&X[oe]===X[me]&&X[++oe]===X[me+1]){me+=2,oe++;do;while(X[++me]===X[++oe]&&X[++me]===X[++oe]&&X[++me]===X[++oe]&&X[++me]===X[++oe]&&X[++me]===X[++oe]&&X[++me]===X[++oe]&&X[++me]===X[++oe]&&X[++me]===X[++oe]&&me<le);if(re=A-(le-me),me=le-A,he<re){if(U.match_start=ve,se<=(he=re))break;ye=X[me+he-1],ue=X[me+he]}}while((ve=be[ve&we])>ge&&--ae!=0);return he<=U.lookahead?he:U.lookahead}function Y(U){var ve,oe,re,ae,me,he,se,ge,X,we,be=U.w_size;do{if(ae=U.window_size-U.lookahead-U.strstart,U.strstart>=be+(be-T)){for(a.arraySet(U.window,U.window,be,be,0),U.match_start-=be,U.strstart-=be,U.block_start-=be,ve=oe=U.hash_size;re=U.head[--ve],U.head[ve]=be<=re?re-be:0,--oe;);for(ve=oe=be;re=U.prev[--ve],U.prev[ve]=be<=re?re-be:0,--oe;);ae+=be}if(U.strm.avail_in===0)break;if(he=U.strm,se=U.window,ge=U.strstart+U.lookahead,X=ae,we=void 0,we=he.avail_in,X<we&&(we=X),oe=we===0?0:(he.avail_in-=we,a.arraySet(se,he.input,he.next_in,we,ge),he.state.wrap===1?he.adler=l(he.adler,se,we,ge):he.state.wrap===2&&(he.adler=d(he.adler,se,we,ge)),he.next_in+=we,he.total_in+=we,we),U.lookahead+=oe,U.lookahead+U.insert>=I)for(me=U.strstart-U.insert,U.ins_h=U.window[me],U.ins_h=(U.ins_h<<U.hash_shift^U.window[me+1])&U.hash_mask;U.insert&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[me+I-1])&U.hash_mask,U.prev[me&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=me,me++,U.insert--,!(U.lookahead+U.insert<I)););}while(U.lookahead<T&&U.strm.avail_in!==0)}function E(U,ve){for(var oe,re;;){if(U.lookahead<T){if(Y(U),U.lookahead<T&&ve===p)return $;if(U.lookahead===0)break}if(oe=0,U.lookahead>=I&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+I-1])&U.hash_mask,oe=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),oe!==0&&U.strstart-oe<=U.w_size-T&&(U.match_length=R(U,oe)),U.match_length>=I)if(re=s._tr_tally(U,U.strstart-U.match_start,U.match_length-I),U.lookahead-=U.match_length,U.match_length<=U.max_lazy_match&&U.lookahead>=I){for(U.match_length--;U.strstart++,U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+I-1])&U.hash_mask,oe=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart,--U.match_length!=0;);U.strstart++}else U.strstart+=U.match_length,U.match_length=0,U.ins_h=U.window[U.strstart],U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+1])&U.hash_mask;else re=s._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++;if(re&&(B(U,!1),U.strm.avail_out===0))return $}return U.insert=U.strstart<I-1?U.strstart:I-1,ve===f?(B(U,!0),U.strm.avail_out===0?Q:pe):U.last_lit&&(B(U,!1),U.strm.avail_out===0)?$:ee}function W(U,ve){for(var oe,re,ae;;){if(U.lookahead<T){if(Y(U),U.lookahead<T&&ve===p)return $;if(U.lookahead===0)break}if(oe=0,U.lookahead>=I&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+I-1])&U.hash_mask,oe=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),U.prev_length=U.match_length,U.prev_match=U.match_start,U.match_length=I-1,oe!==0&&U.prev_length<U.max_lazy_match&&U.strstart-oe<=U.w_size-T&&(U.match_length=R(U,oe),U.match_length<=5&&(U.strategy===1||U.match_length===I&&4096<U.strstart-U.match_start)&&(U.match_length=I-1)),U.prev_length>=I&&U.match_length<=U.prev_length){for(ae=U.strstart+U.lookahead-I,re=s._tr_tally(U,U.strstart-1-U.prev_match,U.prev_length-I),U.lookahead-=U.prev_length-1,U.prev_length-=2;++U.strstart<=ae&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+I-1])&U.hash_mask,oe=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),--U.prev_length!=0;);if(U.match_available=0,U.match_length=I-1,U.strstart++,re&&(B(U,!1),U.strm.avail_out===0))return $}else if(U.match_available){if((re=s._tr_tally(U,0,U.window[U.strstart-1]))&&B(U,!1),U.strstart++,U.lookahead--,U.strm.avail_out===0)return $}else U.match_available=1,U.strstart++,U.lookahead--}return U.match_available&&(re=s._tr_tally(U,0,U.window[U.strstart-1]),U.match_available=0),U.insert=U.strstart<I-1?U.strstart:I-1,ve===f?(B(U,!0),U.strm.avail_out===0?Q:pe):U.last_lit&&(B(U,!1),U.strm.avail_out===0)?$:ee}function F(U,ve,oe,re,ae){this.good_length=U,this.max_lazy=ve,this.nice_length=oe,this.max_chain=re,this.func=ae}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*S),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*y+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(C+1),this.heap=new a.Buf16(2*_+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*_+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(U){var ve;return U&&U.state?(U.total_in=U.total_out=0,U.data_type=b,(ve=U.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?L:j,U.adler=ve.wrap===2?0:1,ve.last_flush=p,s._tr_init(ve),h):ie(U,c)}function fe(U){var ve=q(U);return ve===h&&function(oe){oe.window_size=2*oe.w_size,Z(oe.head),oe.max_lazy_match=i[oe.level].max_lazy,oe.good_match=i[oe.level].good_length,oe.nice_match=i[oe.level].nice_length,oe.max_chain_length=i[oe.level].max_chain,oe.strstart=0,oe.block_start=0,oe.lookahead=0,oe.insert=0,oe.match_length=oe.prev_length=I-1,oe.match_available=0,oe.ins_h=0}(U.state),ve}function ce(U,ve,oe,re,ae,me){if(!U)return c;var he=1;if(ve===g&&(ve=6),re<0?(he=0,re=-re):15<re&&(he=2,re-=16),ae<1||w<ae||oe!==v||re<8||15<re||ve<0||9<ve||me<0||m<me)return ie(U,c);re===8&&(re=9);var se=new z;return(U.state=se).strm=U,se.wrap=he,se.gzhead=null,se.w_bits=re,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=ae+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+I-1)/I),se.window=new a.Buf8(2*se.w_size),se.head=new a.Buf16(se.hash_size),se.prev=new a.Buf16(se.w_size),se.lit_bufsize=1<<ae+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new a.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=ve,se.strategy=me,se.method=oe,fe(U)}i=[new F(0,0,0,0,function(U,ve){var oe=65535;for(oe>U.pending_buf_size-5&&(oe=U.pending_buf_size-5);;){if(U.lookahead<=1){if(Y(U),U.lookahead===0&&ve===p)return $;if(U.lookahead===0)break}U.strstart+=U.lookahead,U.lookahead=0;var re=U.block_start+oe;if((U.strstart===0||U.strstart>=re)&&(U.lookahead=U.strstart-re,U.strstart=re,B(U,!1),U.strm.avail_out===0)||U.strstart-U.block_start>=U.w_size-T&&(B(U,!1),U.strm.avail_out===0))return $}return U.insert=0,ve===f?(B(U,!0),U.strm.avail_out===0?Q:pe):(U.strstart>U.block_start&&(B(U,!1),U.strm.avail_out),$)}),new F(4,4,8,4,E),new F(4,5,16,8,E),new F(4,6,32,32,E),new F(4,4,16,16,W),new F(8,16,32,32,W),new F(8,16,128,128,W),new F(8,32,128,256,W),new F(32,128,258,1024,W),new F(32,258,258,4096,W)],o.deflateInit=function(U,ve){return ce(U,ve,v,15,8,0)},o.deflateInit2=ce,o.deflateReset=fe,o.deflateResetKeep=q,o.deflateSetHeader=function(U,ve){return U&&U.state?U.state.wrap!==2?c:(U.state.gzhead=ve,h):c},o.deflate=function(U,ve){var oe,re,ae,me;if(!U||!U.state||5<ve||ve<0)return U?ie(U,c):c;if(re=U.state,!U.output||!U.input&&U.avail_in!==0||re.status===666&&ve!==f)return ie(U,U.avail_out===0?-5:c);if(re.strm=U,oe=re.last_flush,re.last_flush=ve,re.status===L)if(re.wrap===2)U.adler=0,H(re,31),H(re,139),H(re,8),re.gzhead?(H(re,(re.gzhead.text?1:0)+(re.gzhead.hcrc?2:0)+(re.gzhead.extra?4:0)+(re.gzhead.name?8:0)+(re.gzhead.comment?16:0)),H(re,255&re.gzhead.time),H(re,re.gzhead.time>>8&255),H(re,re.gzhead.time>>16&255),H(re,re.gzhead.time>>24&255),H(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),H(re,255&re.gzhead.os),re.gzhead.extra&&re.gzhead.extra.length&&(H(re,255&re.gzhead.extra.length),H(re,re.gzhead.extra.length>>8&255)),re.gzhead.hcrc&&(U.adler=d(U.adler,re.pending_buf,re.pending,0)),re.gzindex=0,re.status=69):(H(re,0),H(re,0),H(re,0),H(re,0),H(re,0),H(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),H(re,3),re.status=j);else{var he=v+(re.w_bits-8<<4)<<8;he|=(2<=re.strategy||re.level<2?0:re.level<6?1:re.level===6?2:3)<<6,re.strstart!==0&&(he|=32),he+=31-he%31,re.status=j,V(re,he),re.strstart!==0&&(V(re,U.adler>>>16),V(re,65535&U.adler)),U.adler=1}if(re.status===69)if(re.gzhead.extra){for(ae=re.pending;re.gzindex<(65535&re.gzhead.extra.length)&&(re.pending!==re.pending_buf_size||(re.gzhead.hcrc&&re.pending>ae&&(U.adler=d(U.adler,re.pending_buf,re.pending-ae,ae)),D(U),ae=re.pending,re.pending!==re.pending_buf_size));)H(re,255&re.gzhead.extra[re.gzindex]),re.gzindex++;re.gzhead.hcrc&&re.pending>ae&&(U.adler=d(U.adler,re.pending_buf,re.pending-ae,ae)),re.gzindex===re.gzhead.extra.length&&(re.gzindex=0,re.status=73)}else re.status=73;if(re.status===73)if(re.gzhead.name){ae=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ae&&(U.adler=d(U.adler,re.pending_buf,re.pending-ae,ae)),D(U),ae=re.pending,re.pending===re.pending_buf_size)){me=1;break}me=re.gzindex<re.gzhead.name.length?255&re.gzhead.name.charCodeAt(re.gzindex++):0,H(re,me)}while(me!==0);re.gzhead.hcrc&&re.pending>ae&&(U.adler=d(U.adler,re.pending_buf,re.pending-ae,ae)),me===0&&(re.gzindex=0,re.status=91)}else re.status=91;if(re.status===91)if(re.gzhead.comment){ae=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ae&&(U.adler=d(U.adler,re.pending_buf,re.pending-ae,ae)),D(U),ae=re.pending,re.pending===re.pending_buf_size)){me=1;break}me=re.gzindex<re.gzhead.comment.length?255&re.gzhead.comment.charCodeAt(re.gzindex++):0,H(re,me)}while(me!==0);re.gzhead.hcrc&&re.pending>ae&&(U.adler=d(U.adler,re.pending_buf,re.pending-ae,ae)),me===0&&(re.status=103)}else re.status=103;if(re.status===103&&(re.gzhead.hcrc?(re.pending+2>re.pending_buf_size&&D(U),re.pending+2<=re.pending_buf_size&&(H(re,255&U.adler),H(re,U.adler>>8&255),U.adler=0,re.status=j)):re.status=j),re.pending!==0){if(D(U),U.avail_out===0)return re.last_flush=-1,h}else if(U.avail_in===0&&te(ve)<=te(oe)&&ve!==f)return ie(U,-5);if(re.status===666&&U.avail_in!==0)return ie(U,-5);if(U.avail_in!==0||re.lookahead!==0||ve!==p&&re.status!==666){var se=re.strategy===2?function(ge,X){for(var we;;){if(ge.lookahead===0&&(Y(ge),ge.lookahead===0)){if(X===p)return $;break}if(ge.match_length=0,we=s._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,we&&(B(ge,!1),ge.strm.avail_out===0))return $}return ge.insert=0,X===f?(B(ge,!0),ge.strm.avail_out===0?Q:pe):ge.last_lit&&(B(ge,!1),ge.strm.avail_out===0)?$:ee}(re,ve):re.strategy===3?function(ge,X){for(var we,be,le,ye,ue=ge.window;;){if(ge.lookahead<=A){if(Y(ge),ge.lookahead<=A&&X===p)return $;if(ge.lookahead===0)break}if(ge.match_length=0,ge.lookahead>=I&&0<ge.strstart&&(be=ue[le=ge.strstart-1])===ue[++le]&&be===ue[++le]&&be===ue[++le]){ye=ge.strstart+A;do;while(be===ue[++le]&&be===ue[++le]&&be===ue[++le]&&be===ue[++le]&&be===ue[++le]&&be===ue[++le]&&be===ue[++le]&&be===ue[++le]&&le<ye);ge.match_length=A-(ye-le),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=I?(we=s._tr_tally(ge,1,ge.match_length-I),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(we=s._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),we&&(B(ge,!1),ge.strm.avail_out===0))return $}return ge.insert=0,X===f?(B(ge,!0),ge.strm.avail_out===0?Q:pe):ge.last_lit&&(B(ge,!1),ge.strm.avail_out===0)?$:ee}(re,ve):i[re.level].func(re,ve);if(se!==Q&&se!==pe||(re.status=666),se===$||se===Q)return U.avail_out===0&&(re.last_flush=-1),h;if(se===ee&&(ve===1?s._tr_align(re):ve!==5&&(s._tr_stored_block(re,0,0,!1),ve===3&&(Z(re.head),re.lookahead===0&&(re.strstart=0,re.block_start=0,re.insert=0))),D(U),U.avail_out===0))return re.last_flush=-1,h}return ve!==f?h:re.wrap<=0?1:(re.wrap===2?(H(re,255&U.adler),H(re,U.adler>>8&255),H(re,U.adler>>16&255),H(re,U.adler>>24&255),H(re,255&U.total_in),H(re,U.total_in>>8&255),H(re,U.total_in>>16&255),H(re,U.total_in>>24&255)):(V(re,U.adler>>>16),V(re,65535&U.adler)),D(U),0<re.wrap&&(re.wrap=-re.wrap),re.pending!==0?h:1)},o.deflateEnd=function(U){var ve;return U&&U.state?(ve=U.state.status)!==L&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==j&&ve!==666?ie(U,c):(U.state=null,ve===j?ie(U,-3):h):c},o.deflateSetDictionary=function(U,ve){var oe,re,ae,me,he,se,ge,X,we=ve.length;if(!U||!U.state||(me=(oe=U.state).wrap)===2||me===1&&oe.status!==L||oe.lookahead)return c;for(me===1&&(U.adler=l(U.adler,ve,we,0)),oe.wrap=0,we>=oe.w_size&&(me===0&&(Z(oe.head),oe.strstart=0,oe.block_start=0,oe.insert=0),X=new a.Buf8(oe.w_size),a.arraySet(X,ve,we-oe.w_size,oe.w_size,0),ve=X,we=oe.w_size),he=U.avail_in,se=U.next_in,ge=U.input,U.avail_in=we,U.next_in=0,U.input=ve,Y(oe);oe.lookahead>=I;){for(re=oe.strstart,ae=oe.lookahead-(I-1);oe.ins_h=(oe.ins_h<<oe.hash_shift^oe.window[re+I-1])&oe.hash_mask,oe.prev[re&oe.w_mask]=oe.head[oe.ins_h],oe.head[oe.ins_h]=re,re++,--ae;);oe.strstart=re,oe.lookahead=I-1,Y(oe)}return oe.strstart+=oe.lookahead,oe.block_start=oe.strstart,oe.insert=oe.lookahead,oe.lookahead=0,oe.match_length=oe.prev_length=I-1,oe.match_available=0,U.next_in=se,U.input=ge,U.avail_in=he,oe.wrap=me,h},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,o){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,o){r.exports=function(i,a){var s,l,d,u,p,f,h,c,g,m,b,v,w,_,k,y,S,C,I,A,T,L,j,$,ee;s=i.state,l=i.next_in,$=i.input,d=l+(i.avail_in-5),u=i.next_out,ee=i.output,p=u-(a-i.avail_out),f=u+(i.avail_out-257),h=s.dmax,c=s.wsize,g=s.whave,m=s.wnext,b=s.window,v=s.hold,w=s.bits,_=s.lencode,k=s.distcode,y=(1<<s.lenbits)-1,S=(1<<s.distbits)-1;e:do{w<15&&(v+=$[l++]<<w,w+=8,v+=$[l++]<<w,w+=8),C=_[v&y];t:for(;;){if(v>>>=I=C>>>24,w-=I,(I=C>>>16&255)===0)ee[u++]=65535&C;else{if(!(16&I)){if(!(64&I)){C=_[(65535&C)+(v&(1<<I)-1)];continue t}if(32&I){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}A=65535&C,(I&=15)&&(w<I&&(v+=$[l++]<<w,w+=8),A+=v&(1<<I)-1,v>>>=I,w-=I),w<15&&(v+=$[l++]<<w,w+=8,v+=$[l++]<<w,w+=8),C=k[v&S];n:for(;;){if(v>>>=I=C>>>24,w-=I,!(16&(I=C>>>16&255))){if(!(64&I)){C=k[(65535&C)+(v&(1<<I)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(T=65535&C,w<(I&=15)&&(v+=$[l++]<<w,(w+=8)<I&&(v+=$[l++]<<w,w+=8)),h<(T+=v&(1<<I)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(v>>>=I,w-=I,(I=u-p)<T){if(g<(I=T-I)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(j=b,(L=0)===m){if(L+=c-I,I<A){for(A-=I;ee[u++]=b[L++],--I;);L=u-T,j=ee}}else if(m<I){if(L+=c+m-I,(I-=m)<A){for(A-=I;ee[u++]=b[L++],--I;);if(L=0,m<A){for(A-=I=m;ee[u++]=b[L++],--I;);L=u-T,j=ee}}}else if(L+=m-I,I<A){for(A-=I;ee[u++]=b[L++],--I;);L=u-T,j=ee}for(;2<A;)ee[u++]=j[L++],ee[u++]=j[L++],ee[u++]=j[L++],A-=3;A&&(ee[u++]=j[L++],1<A&&(ee[u++]=j[L++]))}else{for(L=u-T;ee[u++]=ee[L++],ee[u++]=ee[L++],ee[u++]=ee[L++],2<(A-=3););A&&(ee[u++]=ee[L++],1<A&&(ee[u++]=ee[L++]))}break}}break}}while(l<d&&u<f);l-=A=w>>3,v&=(1<<(w-=A<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<d?d-l+5:5-(l-d),i.avail_out=u<f?f-u+257:257-(u-f),s.hold=v,s.bits=w}},{}],49:[function(t,r,o){var i=t("../utils/common"),a=t("./adler32"),s=t("./crc32"),l=t("./inffast"),d=t("./inftrees"),u=1,p=2,f=0,h=-2,c=1,g=852,m=592;function b(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(L){var j;return L&&L.state?(j=L.state,L.total_in=L.total_out=j.total=0,L.msg="",j.wrap&&(L.adler=1&j.wrap),j.mode=c,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new i.Buf32(g),j.distcode=j.distdyn=new i.Buf32(m),j.sane=1,j.back=-1,f):h}function _(L){var j;return L&&L.state?((j=L.state).wsize=0,j.whave=0,j.wnext=0,w(L)):h}function k(L,j){var $,ee;return L&&L.state?(ee=L.state,j<0?($=0,j=-j):($=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?h:(ee.window!==null&&ee.wbits!==j&&(ee.window=null),ee.wrap=$,ee.wbits=j,_(L))):h}function y(L,j){var $,ee;return L?(ee=new v,(L.state=ee).window=null,($=k(L,j))!==f&&(L.state=null),$):h}var S,C,I=!0;function A(L){if(I){var j;for(S=new i.Buf32(512),C=new i.Buf32(32),j=0;j<144;)L.lens[j++]=8;for(;j<256;)L.lens[j++]=9;for(;j<280;)L.lens[j++]=7;for(;j<288;)L.lens[j++]=8;for(d(u,L.lens,0,288,S,0,L.work,{bits:9}),j=0;j<32;)L.lens[j++]=5;d(p,L.lens,0,32,C,0,L.work,{bits:5}),I=!1}L.lencode=S,L.lenbits=9,L.distcode=C,L.distbits=5}function T(L,j,$,ee){var Q,pe=L.state;return pe.window===null&&(pe.wsize=1<<pe.wbits,pe.wnext=0,pe.whave=0,pe.window=new i.Buf8(pe.wsize)),ee>=pe.wsize?(i.arraySet(pe.window,j,$-pe.wsize,pe.wsize,0),pe.wnext=0,pe.whave=pe.wsize):(ee<(Q=pe.wsize-pe.wnext)&&(Q=ee),i.arraySet(pe.window,j,$-ee,Q,pe.wnext),(ee-=Q)?(i.arraySet(pe.window,j,$-ee,ee,0),pe.wnext=ee,pe.whave=pe.wsize):(pe.wnext+=Q,pe.wnext===pe.wsize&&(pe.wnext=0),pe.whave<pe.wsize&&(pe.whave+=Q))),0}o.inflateReset=_,o.inflateReset2=k,o.inflateResetKeep=w,o.inflateInit=function(L){return y(L,15)},o.inflateInit2=y,o.inflate=function(L,j){var $,ee,Q,pe,ie,te,Z,D,B,H,V,R,Y,E,W,F,z,q,fe,ce,U,ve,oe,re,ae=0,me=new i.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return h;($=L.state).mode===12&&($.mode=13),ie=L.next_out,Q=L.output,Z=L.avail_out,pe=L.next_in,ee=L.input,te=L.avail_in,D=$.hold,B=$.bits,H=te,V=Z,ve=f;e:for(;;)switch($.mode){case c:if($.wrap===0){$.mode=13;break}for(;B<16;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(2&$.wrap&&D===35615){me[$.check=0]=255&D,me[1]=D>>>8&255,$.check=s($.check,me,2,0),B=D=0,$.mode=2;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&D)<<8)+(D>>8))%31){L.msg="incorrect header check",$.mode=30;break}if((15&D)!=8){L.msg="unknown compression method",$.mode=30;break}if(B-=4,U=8+(15&(D>>>=4)),$.wbits===0)$.wbits=U;else if(U>$.wbits){L.msg="invalid window size",$.mode=30;break}$.dmax=1<<U,L.adler=$.check=1,$.mode=512&D?10:12,B=D=0;break;case 2:for(;B<16;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if($.flags=D,(255&$.flags)!=8){L.msg="unknown compression method",$.mode=30;break}if(57344&$.flags){L.msg="unknown header flags set",$.mode=30;break}$.head&&($.head.text=D>>8&1),512&$.flags&&(me[0]=255&D,me[1]=D>>>8&255,$.check=s($.check,me,2,0)),B=D=0,$.mode=3;case 3:for(;B<32;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}$.head&&($.head.time=D),512&$.flags&&(me[0]=255&D,me[1]=D>>>8&255,me[2]=D>>>16&255,me[3]=D>>>24&255,$.check=s($.check,me,4,0)),B=D=0,$.mode=4;case 4:for(;B<16;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}$.head&&($.head.xflags=255&D,$.head.os=D>>8),512&$.flags&&(me[0]=255&D,me[1]=D>>>8&255,$.check=s($.check,me,2,0)),B=D=0,$.mode=5;case 5:if(1024&$.flags){for(;B<16;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}$.length=D,$.head&&($.head.extra_len=D),512&$.flags&&(me[0]=255&D,me[1]=D>>>8&255,$.check=s($.check,me,2,0)),B=D=0}else $.head&&($.head.extra=null);$.mode=6;case 6:if(1024&$.flags&&(te<(R=$.length)&&(R=te),R&&($.head&&(U=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),i.arraySet($.head.extra,ee,pe,R,U)),512&$.flags&&($.check=s($.check,ee,R,pe)),te-=R,pe+=R,$.length-=R),$.length))break e;$.length=0,$.mode=7;case 7:if(2048&$.flags){if(te===0)break e;for(R=0;U=ee[pe+R++],$.head&&U&&$.length<65536&&($.head.name+=String.fromCharCode(U)),U&&R<te;);if(512&$.flags&&($.check=s($.check,ee,R,pe)),te-=R,pe+=R,U)break e}else $.head&&($.head.name=null);$.length=0,$.mode=8;case 8:if(4096&$.flags){if(te===0)break e;for(R=0;U=ee[pe+R++],$.head&&U&&$.length<65536&&($.head.comment+=String.fromCharCode(U)),U&&R<te;);if(512&$.flags&&($.check=s($.check,ee,R,pe)),te-=R,pe+=R,U)break e}else $.head&&($.head.comment=null);$.mode=9;case 9:if(512&$.flags){for(;B<16;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(D!==(65535&$.check)){L.msg="header crc mismatch",$.mode=30;break}B=D=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),L.adler=$.check=0,$.mode=12;break;case 10:for(;B<32;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}L.adler=$.check=b(D),B=D=0,$.mode=11;case 11:if($.havedict===0)return L.next_out=ie,L.avail_out=Z,L.next_in=pe,L.avail_in=te,$.hold=D,$.bits=B,2;L.adler=$.check=1,$.mode=12;case 12:if(j===5||j===6)break e;case 13:if($.last){D>>>=7&B,B-=7&B,$.mode=27;break}for(;B<3;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}switch($.last=1&D,B-=1,3&(D>>>=1)){case 0:$.mode=14;break;case 1:if(A($),$.mode=20,j!==6)break;D>>>=2,B-=2;break e;case 2:$.mode=17;break;case 3:L.msg="invalid block type",$.mode=30}D>>>=2,B-=2;break;case 14:for(D>>>=7&B,B-=7&B;B<32;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if((65535&D)!=(D>>>16^65535)){L.msg="invalid stored block lengths",$.mode=30;break}if($.length=65535&D,B=D=0,$.mode=15,j===6)break e;case 15:$.mode=16;case 16:if(R=$.length){if(te<R&&(R=te),Z<R&&(R=Z),R===0)break e;i.arraySet(Q,ee,pe,R,ie),te-=R,pe+=R,Z-=R,ie+=R,$.length-=R;break}$.mode=12;break;case 17:for(;B<14;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if($.nlen=257+(31&D),D>>>=5,B-=5,$.ndist=1+(31&D),D>>>=5,B-=5,$.ncode=4+(15&D),D>>>=4,B-=4,286<$.nlen||30<$.ndist){L.msg="too many length or distance symbols",$.mode=30;break}$.have=0,$.mode=18;case 18:for(;$.have<$.ncode;){for(;B<3;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}$.lens[he[$.have++]]=7&D,D>>>=3,B-=3}for(;$.have<19;)$.lens[he[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,oe={bits:$.lenbits},ve=d(0,$.lens,0,19,$.lencode,0,$.work,oe),$.lenbits=oe.bits,ve){L.msg="invalid code lengths set",$.mode=30;break}$.have=0,$.mode=19;case 19:for(;$.have<$.nlen+$.ndist;){for(;F=(ae=$.lencode[D&(1<<$.lenbits)-1])>>>16&255,z=65535&ae,!((W=ae>>>24)<=B);){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(z<16)D>>>=W,B-=W,$.lens[$.have++]=z;else{if(z===16){for(re=W+2;B<re;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(D>>>=W,B-=W,$.have===0){L.msg="invalid bit length repeat",$.mode=30;break}U=$.lens[$.have-1],R=3+(3&D),D>>>=2,B-=2}else if(z===17){for(re=W+3;B<re;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}B-=W,U=0,R=3+(7&(D>>>=W)),D>>>=3,B-=3}else{for(re=W+7;B<re;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}B-=W,U=0,R=11+(127&(D>>>=W)),D>>>=7,B-=7}if($.have+R>$.nlen+$.ndist){L.msg="invalid bit length repeat",$.mode=30;break}for(;R--;)$.lens[$.have++]=U}}if($.mode===30)break;if($.lens[256]===0){L.msg="invalid code -- missing end-of-block",$.mode=30;break}if($.lenbits=9,oe={bits:$.lenbits},ve=d(u,$.lens,0,$.nlen,$.lencode,0,$.work,oe),$.lenbits=oe.bits,ve){L.msg="invalid literal/lengths set",$.mode=30;break}if($.distbits=6,$.distcode=$.distdyn,oe={bits:$.distbits},ve=d(p,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,oe),$.distbits=oe.bits,ve){L.msg="invalid distances set",$.mode=30;break}if($.mode=20,j===6)break e;case 20:$.mode=21;case 21:if(6<=te&&258<=Z){L.next_out=ie,L.avail_out=Z,L.next_in=pe,L.avail_in=te,$.hold=D,$.bits=B,l(L,V),ie=L.next_out,Q=L.output,Z=L.avail_out,pe=L.next_in,ee=L.input,te=L.avail_in,D=$.hold,B=$.bits,$.mode===12&&($.back=-1);break}for($.back=0;F=(ae=$.lencode[D&(1<<$.lenbits)-1])>>>16&255,z=65535&ae,!((W=ae>>>24)<=B);){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(F&&!(240&F)){for(q=W,fe=F,ce=z;F=(ae=$.lencode[ce+((D&(1<<q+fe)-1)>>q)])>>>16&255,z=65535&ae,!(q+(W=ae>>>24)<=B);){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}D>>>=q,B-=q,$.back+=q}if(D>>>=W,B-=W,$.back+=W,$.length=z,F===0){$.mode=26;break}if(32&F){$.back=-1,$.mode=12;break}if(64&F){L.msg="invalid literal/length code",$.mode=30;break}$.extra=15&F,$.mode=22;case 22:if($.extra){for(re=$.extra;B<re;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}$.length+=D&(1<<$.extra)-1,D>>>=$.extra,B-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=23;case 23:for(;F=(ae=$.distcode[D&(1<<$.distbits)-1])>>>16&255,z=65535&ae,!((W=ae>>>24)<=B);){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(!(240&F)){for(q=W,fe=F,ce=z;F=(ae=$.distcode[ce+((D&(1<<q+fe)-1)>>q)])>>>16&255,z=65535&ae,!(q+(W=ae>>>24)<=B);){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}D>>>=q,B-=q,$.back+=q}if(D>>>=W,B-=W,$.back+=W,64&F){L.msg="invalid distance code",$.mode=30;break}$.offset=z,$.extra=15&F,$.mode=24;case 24:if($.extra){for(re=$.extra;B<re;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}$.offset+=D&(1<<$.extra)-1,D>>>=$.extra,B-=$.extra,$.back+=$.extra}if($.offset>$.dmax){L.msg="invalid distance too far back",$.mode=30;break}$.mode=25;case 25:if(Z===0)break e;if(R=V-Z,$.offset>R){if((R=$.offset-R)>$.whave&&$.sane){L.msg="invalid distance too far back",$.mode=30;break}Y=R>$.wnext?(R-=$.wnext,$.wsize-R):$.wnext-R,R>$.length&&(R=$.length),E=$.window}else E=Q,Y=ie-$.offset,R=$.length;for(Z<R&&(R=Z),Z-=R,$.length-=R;Q[ie++]=E[Y++],--R;);$.length===0&&($.mode=21);break;case 26:if(Z===0)break e;Q[ie++]=$.length,Z--,$.mode=21;break;case 27:if($.wrap){for(;B<32;){if(te===0)break e;te--,D|=ee[pe++]<<B,B+=8}if(V-=Z,L.total_out+=V,$.total+=V,V&&(L.adler=$.check=$.flags?s($.check,Q,V,ie-V):a($.check,Q,V,ie-V)),V=Z,($.flags?D:b(D))!==$.check){L.msg="incorrect data check",$.mode=30;break}B=D=0}$.mode=28;case 28:if($.wrap&&$.flags){for(;B<32;){if(te===0)break e;te--,D+=ee[pe++]<<B,B+=8}if(D!==(4294967295&$.total)){L.msg="incorrect length check",$.mode=30;break}B=D=0}$.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return h}return L.next_out=ie,L.avail_out=Z,L.next_in=pe,L.avail_in=te,$.hold=D,$.bits=B,($.wsize||V!==L.avail_out&&$.mode<30&&($.mode<27||j!==4))&&T(L,L.output,L.next_out,V-L.avail_out)?($.mode=31,-4):(H-=L.avail_in,V-=L.avail_out,L.total_in+=H,L.total_out+=V,$.total+=V,$.wrap&&V&&(L.adler=$.check=$.flags?s($.check,Q,V,L.next_out-V):a($.check,Q,V,L.next_out-V)),L.data_type=$.bits+($.last?64:0)+($.mode===12?128:0)+($.mode===20||$.mode===15?256:0),(H==0&&V===0||j===4)&&ve===f&&(ve=-5),ve)},o.inflateEnd=function(L){if(!L||!L.state)return h;var j=L.state;return j.window&&(j.window=null),L.state=null,f},o.inflateGetHeader=function(L,j){var $;return L&&L.state&&2&($=L.state).wrap?(($.head=j).done=!1,f):h},o.inflateSetDictionary=function(L,j){var $,ee=j.length;return L&&L.state?($=L.state).wrap!==0&&$.mode!==11?h:$.mode===11&&a(1,j,ee,0)!==$.check?-3:T(L,j,ee,ee)?($.mode=31,-4):($.havedict=1,f):h},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,o){var i=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,p,f,h,c,g,m,b){var v,w,_,k,y,S,C,I,A,T=b.bits,L=0,j=0,$=0,ee=0,Q=0,pe=0,ie=0,te=0,Z=0,D=0,B=null,H=0,V=new i.Buf16(16),R=new i.Buf16(16),Y=null,E=0;for(L=0;L<=15;L++)V[L]=0;for(j=0;j<h;j++)V[p[f+j]]++;for(Q=T,ee=15;1<=ee&&V[ee]===0;ee--);if(ee<Q&&(Q=ee),ee===0)return c[g++]=20971520,c[g++]=20971520,b.bits=1,0;for($=1;$<ee&&V[$]===0;$++);for(Q<$&&(Q=$),L=te=1;L<=15;L++)if(te<<=1,(te-=V[L])<0)return-1;if(0<te&&(u===0||ee!==1))return-1;for(R[1]=0,L=1;L<15;L++)R[L+1]=R[L]+V[L];for(j=0;j<h;j++)p[f+j]!==0&&(m[R[p[f+j]]++]=j);if(S=u===0?(B=Y=m,19):u===1?(B=a,H-=257,Y=s,E-=257,256):(B=l,Y=d,-1),L=$,y=g,ie=j=D=0,_=-1,k=(Z=1<<(pe=Q))-1,u===1&&852<Z||u===2&&592<Z)return 1;for(;;){for(C=L-ie,A=m[j]<S?(I=0,m[j]):m[j]>S?(I=Y[E+m[j]],B[H+m[j]]):(I=96,0),v=1<<L-ie,$=w=1<<pe;c[y+(D>>ie)+(w-=v)]=C<<24|I<<16|A|0,w!==0;);for(v=1<<L-1;D&v;)v>>=1;if(v!==0?(D&=v-1,D+=v):D=0,j++,--V[L]==0){if(L===ee)break;L=p[f+m[j]]}if(Q<L&&(D&k)!==_){for(ie===0&&(ie=Q),y+=$,te=1<<(pe=L-ie);pe+ie<ee&&!((te-=V[pe+ie])<=0);)pe++,te<<=1;if(Z+=1<<pe,u===1&&852<Z||u===2&&592<Z)return 1;c[_=D&k]=Q<<24|pe<<16|y-g|0}}return D!==0&&(c[y+D]=L-ie<<24|64<<16|0),b.bits=Q,0}},{"../utils/common":41}],51:[function(t,r,o){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,o){var i=t("../utils/common"),a=0,s=1;function l(ae){for(var me=ae.length;0<=--me;)ae[me]=0}var d=0,u=29,p=256,f=p+1+u,h=30,c=19,g=2*f+1,m=15,b=16,v=7,w=256,_=16,k=17,y=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(f+2));l(T);var L=new Array(2*h);l(L);var j=new Array(512);l(j);var $=new Array(256);l($);var ee=new Array(u);l(ee);var Q,pe,ie,te=new Array(h);function Z(ae,me,he,se,ge){this.static_tree=ae,this.extra_bits=me,this.extra_base=he,this.elems=se,this.max_length=ge,this.has_stree=ae&&ae.length}function D(ae,me){this.dyn_tree=ae,this.max_code=0,this.stat_desc=me}function B(ae){return ae<256?j[ae]:j[256+(ae>>>7)]}function H(ae,me){ae.pending_buf[ae.pending++]=255&me,ae.pending_buf[ae.pending++]=me>>>8&255}function V(ae,me,he){ae.bi_valid>b-he?(ae.bi_buf|=me<<ae.bi_valid&65535,H(ae,ae.bi_buf),ae.bi_buf=me>>b-ae.bi_valid,ae.bi_valid+=he-b):(ae.bi_buf|=me<<ae.bi_valid&65535,ae.bi_valid+=he)}function R(ae,me,he){V(ae,he[2*me],he[2*me+1])}function Y(ae,me){for(var he=0;he|=1&ae,ae>>>=1,he<<=1,0<--me;);return he>>>1}function E(ae,me,he){var se,ge,X=new Array(m+1),we=0;for(se=1;se<=m;se++)X[se]=we=we+he[se-1]<<1;for(ge=0;ge<=me;ge++){var be=ae[2*ge+1];be!==0&&(ae[2*ge]=Y(X[be]++,be))}}function W(ae){var me;for(me=0;me<f;me++)ae.dyn_ltree[2*me]=0;for(me=0;me<h;me++)ae.dyn_dtree[2*me]=0;for(me=0;me<c;me++)ae.bl_tree[2*me]=0;ae.dyn_ltree[2*w]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function F(ae){8<ae.bi_valid?H(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function z(ae,me,he,se){var ge=2*me,X=2*he;return ae[ge]<ae[X]||ae[ge]===ae[X]&&se[me]<=se[he]}function q(ae,me,he){for(var se=ae.heap[he],ge=he<<1;ge<=ae.heap_len&&(ge<ae.heap_len&&z(me,ae.heap[ge+1],ae.heap[ge],ae.depth)&&ge++,!z(me,se,ae.heap[ge],ae.depth));)ae.heap[he]=ae.heap[ge],he=ge,ge<<=1;ae.heap[he]=se}function fe(ae,me,he){var se,ge,X,we,be=0;if(ae.last_lit!==0)for(;se=ae.pending_buf[ae.d_buf+2*be]<<8|ae.pending_buf[ae.d_buf+2*be+1],ge=ae.pending_buf[ae.l_buf+be],be++,se===0?R(ae,ge,me):(R(ae,(X=$[ge])+p+1,me),(we=S[X])!==0&&V(ae,ge-=ee[X],we),R(ae,X=B(--se),he),(we=C[X])!==0&&V(ae,se-=te[X],we)),be<ae.last_lit;);R(ae,w,me)}function ce(ae,me){var he,se,ge,X=me.dyn_tree,we=me.stat_desc.static_tree,be=me.stat_desc.has_stree,le=me.stat_desc.elems,ye=-1;for(ae.heap_len=0,ae.heap_max=g,he=0;he<le;he++)X[2*he]!==0?(ae.heap[++ae.heap_len]=ye=he,ae.depth[he]=0):X[2*he+1]=0;for(;ae.heap_len<2;)X[2*(ge=ae.heap[++ae.heap_len]=ye<2?++ye:0)]=1,ae.depth[ge]=0,ae.opt_len--,be&&(ae.static_len-=we[2*ge+1]);for(me.max_code=ye,he=ae.heap_len>>1;1<=he;he--)q(ae,X,he);for(ge=le;he=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],q(ae,X,1),se=ae.heap[1],ae.heap[--ae.heap_max]=he,ae.heap[--ae.heap_max]=se,X[2*ge]=X[2*he]+X[2*se],ae.depth[ge]=(ae.depth[he]>=ae.depth[se]?ae.depth[he]:ae.depth[se])+1,X[2*he+1]=X[2*se+1]=ge,ae.heap[1]=ge++,q(ae,X,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],function(ue,xe){var Pe,Ne,Me,Re,We,Se,Be=xe.dyn_tree,_e=xe.max_code,ze=xe.stat_desc.static_tree,Ve=xe.stat_desc.has_stree,ut=xe.stat_desc.extra_bits,Ie=xe.stat_desc.extra_base,ot=xe.stat_desc.max_length,Ye=0;for(Re=0;Re<=m;Re++)ue.bl_count[Re]=0;for(Be[2*ue.heap[ue.heap_max]+1]=0,Pe=ue.heap_max+1;Pe<g;Pe++)ot<(Re=Be[2*Be[2*(Ne=ue.heap[Pe])+1]+1]+1)&&(Re=ot,Ye++),Be[2*Ne+1]=Re,_e<Ne||(ue.bl_count[Re]++,We=0,Ie<=Ne&&(We=ut[Ne-Ie]),Se=Be[2*Ne],ue.opt_len+=Se*(Re+We),Ve&&(ue.static_len+=Se*(ze[2*Ne+1]+We)));if(Ye!==0){do{for(Re=ot-1;ue.bl_count[Re]===0;)Re--;ue.bl_count[Re]--,ue.bl_count[Re+1]+=2,ue.bl_count[ot]--,Ye-=2}while(0<Ye);for(Re=ot;Re!==0;Re--)for(Ne=ue.bl_count[Re];Ne!==0;)_e<(Me=ue.heap[--Pe])||(Be[2*Me+1]!==Re&&(ue.opt_len+=(Re-Be[2*Me+1])*Be[2*Me],Be[2*Me+1]=Re),Ne--)}}(ae,me),E(X,ye,ae.bl_count)}function U(ae,me,he){var se,ge,X=-1,we=me[1],be=0,le=7,ye=4;for(we===0&&(le=138,ye=3),me[2*(he+1)+1]=65535,se=0;se<=he;se++)ge=we,we=me[2*(se+1)+1],++be<le&&ge===we||(be<ye?ae.bl_tree[2*ge]+=be:ge!==0?(ge!==X&&ae.bl_tree[2*ge]++,ae.bl_tree[2*_]++):be<=10?ae.bl_tree[2*k]++:ae.bl_tree[2*y]++,X=ge,ye=(be=0)===we?(le=138,3):ge===we?(le=6,3):(le=7,4))}function ve(ae,me,he){var se,ge,X=-1,we=me[1],be=0,le=7,ye=4;for(we===0&&(le=138,ye=3),se=0;se<=he;se++)if(ge=we,we=me[2*(se+1)+1],!(++be<le&&ge===we)){if(be<ye)for(;R(ae,ge,ae.bl_tree),--be!=0;);else ge!==0?(ge!==X&&(R(ae,ge,ae.bl_tree),be--),R(ae,_,ae.bl_tree),V(ae,be-3,2)):be<=10?(R(ae,k,ae.bl_tree),V(ae,be-3,3)):(R(ae,y,ae.bl_tree),V(ae,be-11,7));X=ge,ye=(be=0)===we?(le=138,3):ge===we?(le=6,3):(le=7,4)}}l(te);var oe=!1;function re(ae,me,he,se){V(ae,(d<<1)+(se?1:0),3),function(ge,X,we,be){F(ge),be&&(H(ge,we),H(ge,~we)),i.arraySet(ge.pending_buf,ge.window,X,we,ge.pending),ge.pending+=we}(ae,me,he,!0)}o._tr_init=function(ae){oe||(function(){var me,he,se,ge,X,we=new Array(m+1);for(ge=se=0;ge<u-1;ge++)for(ee[ge]=se,me=0;me<1<<S[ge];me++)$[se++]=ge;for($[se-1]=ge,ge=X=0;ge<16;ge++)for(te[ge]=X,me=0;me<1<<C[ge];me++)j[X++]=ge;for(X>>=7;ge<h;ge++)for(te[ge]=X<<7,me=0;me<1<<C[ge]-7;me++)j[256+X++]=ge;for(he=0;he<=m;he++)we[he]=0;for(me=0;me<=143;)T[2*me+1]=8,me++,we[8]++;for(;me<=255;)T[2*me+1]=9,me++,we[9]++;for(;me<=279;)T[2*me+1]=7,me++,we[7]++;for(;me<=287;)T[2*me+1]=8,me++,we[8]++;for(E(T,f+1,we),me=0;me<h;me++)L[2*me+1]=5,L[2*me]=Y(me,5);Q=new Z(T,S,p+1,f,m),pe=new Z(L,C,0,h,m),ie=new Z(new Array(0),I,0,c,v)}(),oe=!0),ae.l_desc=new D(ae.dyn_ltree,Q),ae.d_desc=new D(ae.dyn_dtree,pe),ae.bl_desc=new D(ae.bl_tree,ie),ae.bi_buf=0,ae.bi_valid=0,W(ae)},o._tr_stored_block=re,o._tr_flush_block=function(ae,me,he,se){var ge,X,we=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=function(be){var le,ye=4093624447;for(le=0;le<=31;le++,ye>>>=1)if(1&ye&&be.dyn_ltree[2*le]!==0)return a;if(be.dyn_ltree[18]!==0||be.dyn_ltree[20]!==0||be.dyn_ltree[26]!==0)return s;for(le=32;le<p;le++)if(be.dyn_ltree[2*le]!==0)return s;return a}(ae)),ce(ae,ae.l_desc),ce(ae,ae.d_desc),we=function(be){var le;for(U(be,be.dyn_ltree,be.l_desc.max_code),U(be,be.dyn_dtree,be.d_desc.max_code),ce(be,be.bl_desc),le=c-1;3<=le&&be.bl_tree[2*A[le]+1]===0;le--);return be.opt_len+=3*(le+1)+5+5+4,le}(ae),ge=ae.opt_len+3+7>>>3,(X=ae.static_len+3+7>>>3)<=ge&&(ge=X)):ge=X=he+5,he+4<=ge&&me!==-1?re(ae,me,he,se):ae.strategy===4||X===ge?(V(ae,2+(se?1:0),3),fe(ae,T,L)):(V(ae,4+(se?1:0),3),function(be,le,ye,ue){var xe;for(V(be,le-257,5),V(be,ye-1,5),V(be,ue-4,4),xe=0;xe<ue;xe++)V(be,be.bl_tree[2*A[xe]+1],3);ve(be,be.dyn_ltree,le-1),ve(be,be.dyn_dtree,ye-1)}(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,we+1),fe(ae,ae.dyn_ltree,ae.dyn_dtree)),W(ae),se&&F(ae)},o._tr_tally=function(ae,me,he){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=me>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&me,ae.pending_buf[ae.l_buf+ae.last_lit]=255&he,ae.last_lit++,me===0?ae.dyn_ltree[2*he]++:(ae.matches++,me--,ae.dyn_ltree[2*($[he]+p+1)]++,ae.dyn_dtree[2*B(me)]++),ae.last_lit===ae.lit_bufsize-1},o._tr_align=function(ae){V(ae,2,3),R(ae,w,T),function(me){me.bi_valid===16?(H(me,me.bi_buf),me.bi_buf=0,me.bi_valid=0):8<=me.bi_valid&&(me.pending_buf[me.pending++]=255&me.bi_buf,me.bi_buf>>=8,me.bi_valid-=8)}(ae)}},{"../utils/common":41}],53:[function(t,r,o){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,o){(function(i){(function(a,s){if(!a.setImmediate){var l,d,u,p,f=1,h={},c=!1,g=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,l={}.toString.call(a.process)==="[object process]"?function(_){process.nextTick(function(){v(_)})}:function(){if(a.postMessage&&!a.importScripts){var _=!0,k=a.onmessage;return a.onmessage=function(){_=!1},a.postMessage("","*"),a.onmessage=k,_}}()?(p="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",w,!1):a.attachEvent("onmessage",w),function(_){a.postMessage(p+_,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(_){v(_.data)},function(_){u.port2.postMessage(_)}):g&&"onreadystatechange"in g.createElement("script")?(d=g.documentElement,function(_){var k=g.createElement("script");k.onreadystatechange=function(){v(_),k.onreadystatechange=null,d.removeChild(k),k=null},d.appendChild(k)}):function(_){setTimeout(v,0,_)},m.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var k=new Array(arguments.length-1),y=0;y<k.length;y++)k[y]=arguments[y+1];var S={callback:_,args:k};return h[f]=S,l(f),f++},m.clearImmediate=b}function b(_){delete h[_]}function v(_){if(c)setTimeout(v,0,_);else{var k=h[_];if(k){c=!0;try{(function(y){var S=y.callback,C=y.args;switch(C.length){case 0:S();break;case 1:S(C[0]);break;case 2:S(C[0],C[1]);break;case 3:S(C[0],C[1],C[2]);break;default:S.apply(s,C)}})(k)}finally{b(_),c=!1}}}}function w(_){_.source===a&&typeof _.data=="string"&&_.data.indexOf(p)===0&&v(+_.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(iz);var kse=iz.exports;const HT=bm(kse),_se=vr`
  :host {
    position: absolute;
    width: 480px;
    left: calc(50% - 480px / 2);
    top: calc(50% - 270px / 2);
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-base);
    line-height: var(--affine-line-height);
    padding: 20px 40px 24px 40px;
    gap: 19px;
    display: flex;
    flex-direction: column;
    background: var(--affine-background-primary-color);
    box-shadow: var(--affine-shadow-2);
    border-radius: 16px;
    z-index: var(--affine-z-index-popover);
  }

  :host([hidden]) {
    display: none;
  }

  header {
    cursor: move;
    user-select: none;
    font-size: var(--affine-font-h-6);
    font-weight: 600;
  }

  a {
    white-space: nowrap;
    word-break: break-word;
    color: var(--affine-link-color);
    fill: var(--affine-link-color);
    text-decoration: none;
    cursor: pointer;
  }

  header icon-button {
    margin-left: auto;
  }

  .button-container {
    display: flex;
    justify-content: space-between;
  }

  .button-container icon-button {
    padding: 8px;
    justify-content: flex-start;
    gap: 8px;
    width: 190px;
    height: 40px;
    box-shadow: var(--affine-shadow-1);
  }

  .footer {
    display: flex;
    align-items: center;
    color: var(--affine-text-secondary-color);
  }

  .loading-header {
    display: flex;
    align-items: center;
  }

  .has-tool-tip {
    display: flex;
    margin-left: auto;
  }

  ${hd}
`;var Pm=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const q7=1024*200;let Ah=class extends ui(so){constructor(e,t,r,o=new AbortController){super(),this.workspace=e,this.multiple=t,this.onSuccess=r,this.abortController=o,this._loading=!1,this.x=0,this.y=0,this._startX=0,this._startY=0,this._loading=!1,this.x=0,this.y=0,this._startX=0,this._startY=0,this._onMouseMove=this._onMouseMove.bind(this)}loading(){return this._loading}updated(e){(e.has("x")||e.has("y"))&&(this.style.transform=`translate(${this.x}px, ${this.y}px)`)}_onMouseDown(e){this._startX=e.clientX-this.x,this._startY=e.clientY-this.y,window.addEventListener("mousemove",this._onMouseMove)}_onMouseUp(){window.removeEventListener("mousemove",this._onMouseMove)}_onMouseMove(e){this.x=e.clientX-this._startX,this.y=e.clientY-this._startY}_onCloseClick(e){e.stopPropagation(),this.abortController.abort()}async _selectFile(e){const t=document.createElement("input");return t.type="file",t.accept=e,t.multiple=this.multiple,t.click(),new Promise((r,o)=>{t.onchange=()=>{const i=t.files;if(!i){o();return}r(Array.from(i))},t.onerror=()=>{o()}})}_onImportSuccess(e){var t;Zh(`Successfully imported ${e.length} Page${e.length>1?"s":""}.`),(t=this.onSuccess)==null||t.call(this,e)}async _importFile(e,t,r){this.hidden=!0;const o=await this._selectFile(e),i=await t(o);i?(this.hidden=!1,this._loading=!0):this.abortController.abort();const a=[];for(const s of o){const l=await r(s);a.push(...l)}this._onImportSuccess(a),i&&this.abortController.abort()}async _importMarkDown(){await this._importFile(".md",async e=>{let t=0;for(const r of e)if(t+=r.size,t>q7)return!0;return!1},async e=>{var a;const t=await e.text(),r=this.workspace.createPage({init:{title:""}}),o=(a=r.root)==null?void 0:a.id,i=new I3(r);return o?(await i.importMarkdown(t,o),[r.id]):[]})}async _importHtml(){await this._importFile(".html",async e=>{let t=0;for(const r of e)if(t+=r.size,t>q7)return!0;return!1},async e=>{var a;const t=await e.text(),r=this.workspace.createPage({init:{title:""}}),o=(a=r.root)==null?void 0:a.id,i=new I3(r);return o?(await i.importHtml(t,o),[r.id]):[]})}async _importNotion(){await this._importFile(".zip",async e=>{let t=0;for(const r of e){const i=await new HT().loadAsync(r),a=Object.values(i.files);for(const s of a){if(s.dir)continue;const l=await s.async("uint8array");if(t+=l.length,t>q7)return!0}}return!1},async e=>{const t=[],r=async i=>{var h;const s=await new HT().loadAsync(i),l=new Map,d=Object.keys(s.files),u=[],p=d.filter(c=>c.endsWith(".csv")).map(c=>c.substring(0,c.length-4));for(let c=0;c<d.length;c++){const g=d[c];if(g.startsWith("__MACOSX/"))continue;const m=g.lastIndexOf("/");if(p.includes(g.substring(0,m)))continue;const b=g.substring(m+1);if(b.endsWith(".html")||b.endsWith(".md")){const v=this.workspace.createPage({init:{title:""}});l.set(g,v)}if(b.endsWith(".zip")){const v=await((h=s.file(b))==null?void 0:h.async("blob"));v&&u.push(...await r(v))}}const f=Array.from(l.keys()).map(async c=>{var w,_;const g=l.get(c);if(!g)return;const m=c.lastIndexOf("/"),b=c.substring(0,m)||"",v=c.substring(m+1);if(v.endsWith(".html")||v.endsWith(".md")){const k=v.endsWith(".html"),y=(w=g.root)==null?void 0:w.id,S=async L=>{var $;const j=this.joinWebPaths(b,decodeURI(L));return await(($=s.file(j))==null?void 0:$.async("blob"))||new Blob},C=(L,j)=>{if(j.link){const $=j.link,ee=this.joinWebPaths(b,decodeURI($)),Q=l.get(ee);Q&&(j.reference={pageId:Q.id,type:"LinkedPage"},delete j.link)}},I=async L=>{var j,$;if(L.tagName==="A"&&((j=L.getAttribute("href"))!=null&&j.endsWith(".csv"))){const ee=L.getAttribute("href")||"",Q=this.joinWebPaths(b,decodeURI(ee)),pe=await(($=s.file(Q))==null?void 0:$.async("string"));let ie=[],te=1;const Z=[],D=[];pe==null||pe.split(`
`).forEach((Y,E)=>{if(E===0)Z.push(...Y.split(","));else{const W=Y.split(",");D.push(W)}});const B=Z.slice(1).map((Y,E)=>({name:Y,type:"rich-text",width:200,hide:!1,id:""+te++}));if(D.length>0){let Y=D[0].length;for(let W=1;W<D.length;W++)Y=Math.max(Y,D[W].length);const E=Y-B.length;for(let W=0;W<E;W++)B.push({name:"",type:"rich-text",width:200,hide:!1,id:""+te++})}const H=te++,V={},R=[];return D.forEach(Y=>{R.push({flavour:"affine:paragraph",type:"text",text:[{insert:Y[0]}],children:[]});const E=""+te++;V[E]={},Y.slice(1).forEach((W,F)=>{V[E][B[F].id]={columnId:B[F].id,value:W}})}),ie=[{flavour:"affine:database",databaseProps:{id:""+H,title:L.textContent||"Database",titleColumnName:Z[0],titleColumnWidth:432,rowIds:Object.keys(V),cells:V,columns:B},children:R}],ie}return null},A=new I3(g,S,C,I),T=await((_=s.file(c))==null?void 0:_.async("string"))||"";y&&(t.push(g.id),k?await A.importHtml(T,y):await A.importMarkdown(T,y))}});return u.push(...f),u},o=await r(e);return await Promise.all(o.flat()),t})}joinWebPaths(...e){const r=e.join("/").replace(/\/+/g,"/").split("/").filter(Boolean),o=[];return r.forEach(i=>{i!=="."&&(i===".."?o.pop():o.push(i))}),o.join("/")}_openLearnImportLink(e){e.stopPropagation(),window.open("https://affine.pro/blog/import-your-data-from-notion-into-affine","_blank")}render(){return this._loading?rt`
        <header
          class="loading-header"
          @mousedown=${this._onMouseDown}
          @mouseup=${this._onMouseUp}
        >
          <div>Import</div>
          <loader-element width="50px"></loader-element>
        </header>
        <div>
          Importing the file may take some time. It depends on document size and
          complexity.
        </div>
      `:rt`
      <header @mousedown=${this._onMouseDown} @mouseup=${this._onMouseUp}>
        <icon-button height="16px" @click=${this._onCloseClick}>
          ${uJ}
        </icon-button>
        <div>Import</div>
      </header>
      <div>
        AFFiNE will gradually support more and more file types for import.
        <a
          href="https://community.affine.pro/c/feature-requests/import-export"
          target="_blank"
          >Provide feedback.</a
        >
      </div>
      <div class="button-container">
        <icon-button
          class="button-item"
          text="Markdown"
          @click=${this._importMarkDown}
        >
          ${hJ}
        </icon-button>
        <icon-button class="button-item" text="HTML" @click=${this._importHtml}>
          ${fJ}
        </icon-button>
      </div>
      <div class="button-container">
        <icon-button
          class="button-item"
          text="Notion"
          @click=${this._importNotion}
        >
          ${pJ}
          <div
            slot="optional"
            class="has-tool-tip"
            @click=${this._openLearnImportLink}
          >
            ${mJ}
            <tool-tip inert arrow tip-position="top" role="tooltip">
              Learn how to Import your Notion pages into AFFiNE.
            </tool-tip>
          </div>
        </icon-button>
        <icon-button class="button-item" text="Coming soon..." disabled="true">
          ${gJ}
        </icon-button>
      </div>
      <!-- <div class="footer">
        <div>Migrate from other versions of AFFiNE?</div>
      </div> -->
    `}};Ah.styles=_se;Pm([Ar()],Ah.prototype,"_loading",void 0);Pm([Ar()],Ah.prototype,"x",void 0);Pm([Ar()],Ah.prototype,"y",void 0);Pm([Ar()],Ah.prototype,"_startX",void 0);Pm([Ar()],Ah.prototype,"_startY",void 0);Ah=Pm([lr("import-page")],Ah);function Ese({workspace:n,onSuccess:e,multiple:t=!0,container:r=document.body,abortController:o=new AbortController}){const i=new Ah(n,t,e,o);r.appendChild(i);const a=new Ya;return o.signal.addEventListener("abort",()=>a.dispose()),a.add(()=>i.remove()),a.addFromEvent(window,"mousedown",s=>{s.target===i||i.loading()||o.abort()}),i}const az=({target:n,onUpdateQuery:e,onMove:t,onConfirm:r,onEsc:o,interceptor:i=(s,l)=>l(),abortController:a})=>{var f;let s="";const l=n.vEditor;xt(l,"Failed to observer keyboard! virgo editor is not exist.");const d=((f=l==null?void 0:l.getVRange())==null?void 0:f.index)??0,u=async()=>{var v;await tq(0);const h=Ba();if(h.startContainer!==h.endContainer){console.warn("Failed to parse query! Current range is not collapsed.",h),a.abort();return}if(h.startContainer.nodeType!==Node.TEXT_NODE){console.warn("Failed to parse query! Current range is not a text node.",h),a.abort();return}const g=((v=l.getVRange())==null?void 0:v.index)??0,m=l.yText.toString(),b=s;s=m.slice(d,g),s!==b&&e(s)},p=h=>{if(h.stopPropagation(),!h.defaultPrevented){if(_6(h)){if((h.ctrlKey||h.metaKey)&&!h.altKey&&!h.shiftKey&&h.key.length===1)switch(h.key){case"P":case"p":{t(-1),h.preventDefault();return}case"N":case"n":{t(1),h.preventDefault();return}}if(h.key==="Control"||h.key==="Meta"||h.key==="Alt")return;a.abort();return}if(_6(h)||h.key.length!==1)switch(h.key){case"Escape":{a.abort();return}case"Backspace":{s.length||a.abort(),u();return}case"Enter":{if(h.isComposing)return;if(h.shiftKey){a.abort();return}r(),h.preventDefault();return}case"Tab":{h.shiftKey?t(-1):t(1),h.preventDefault();return}case"ArrowUp":{if(h.shiftKey){a.abort();return}t(-1),h.preventDefault();return}case"ArrowDown":{if(h.shiftKey){a.abort();return}t(1),h.preventDefault();return}case"ArrowLeft":case"ArrowRight":{a.abort();return}default:return}u()}};if(n.addEventListener("keydown",h=>i(h,()=>p(h)),{capture:!0,signal:a.signal}),n.addEventListener("input",u,{signal:a.signal}),o){const h=c=>{c.key==="Escape"&&o()};window.addEventListener("keydown",h,{signal:a.signal})}},Pse=vr`
  :host {
    position: absolute;
  }

  .linked-page-popover {
    position: fixed;
    left: 0;
    top: 0;
    box-sizing: border-box;
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-base);
    padding: 12px 8px;
    display: flex;
    flex-direction: column;

    background: var(--affine-background-overlay-panel-color);
    box-shadow: var(--affine-shadow-2);
    border-radius: 12px;
    z-index: var(--affine-z-index-popover);
  }

  .linked-page-popover icon-button {
    padding: 8px;
    justify-content: flex-start;
    gap: 8px;
  }

  .linked-page-popover .group-title {
    color: var(--affine-text-secondary-color);
    margin: 8px 12px;
  }

  .linked-page-popover .divider {
    margin: 6px 12px;
    height: 1px;
    background: var(--affine-border-color);
  }

  ::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 4px;
  }
  ::-webkit-scrollbar-thumb {
    border-radius: 2px;
    background-color: #b1b1b1;
  }
`;var Mm=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function Mse(n,e){const t=n.getVRange();xt(t);const r=t.index-e.length,o=n.yText.toString().slice(r,r+e.length);if(o!==e){console.warn(`Failed to clean text! Text mismatch expected: ${e} but actual: ${o}`);return}n.deleteText({index:r,length:e.length}),n.setVRange({index:r,length:0})}const FT="Untitled";let Lh=class extends ui(so){get _actionList(){const t=this._query||FT,r=t.slice(0,8)+(t.length>8?"..":""),o=this._pageList.filter(({title:i})=>HR(i,this._query));return[...o.map((i,a)=>({key:i.id,name:i.title||FT,active:a===this._activatedItemIndex,icon:IR,action:()=>this._insertLinkedNode("LinkedPage",i.id)})),{key:"create-linked-page",name:`Create "${r}" page`,active:o.length===this._activatedItemIndex,icon:OR,action:()=>this._createPage()},{key:"import-linked-page",name:"Import",active:o.length===this._activatedItemIndex,icon:dJ,action:()=>this._importPage()}]}get _page(){return this.model.page}constructor(e,t=new AbortController){super(),this.model=e,this.abortController=t,this._position=null,this._query="",this._pageList=[],this._activatedItemIndex=0}connectedCallback(){super.connectedCallback();const e=Nb(this.model);xt(e,"RichText not found"),az({target:e,onUpdateQuery:t=>{this._query=t,this._activatedItemIndex=0},abortController:this.abortController,onMove:t=>{this._activatedItemIndex=(this._actionList.length+this._activatedItemIndex+t)%this._actionList.length;const r=this._actionList[this._activatedItemIndex];if(r.key==="create-linked-page"||r.key==="import-linked-page")return;const o=this.shadowRoot;if(!o){console.warn("Failed to find the shadow root!",this);return}const i=o.querySelector(`icon-button[data-id="${r.key}"]`);if(!i){console.warn("Failed to find the active item!",r);return}i.scrollIntoView({block:"nearest"})},onConfirm:()=>{this._actionList[this._activatedItemIndex].action()},onEsc:()=>{this.abortController.abort()}}),this._disposables.addFromEvent(this,"mousedown",t=>{t.preventDefault()}),this._pageList=this._page.workspace.meta.pageMetas,this._disposables.add(this.model.page.workspace.slots.pagesUpdated.on(()=>{this._pageList=this._page.workspace.meta.pageMetas}))}updatePosition(e){this._position=e}_insertLinkedNode(e,t){this.abortController.abort();const r=Cs(this.model);xt(r,"Editor not found"),Mse(r,"@"+this._query);const o=r.getVRange();xt(o),r.insertText(o,Jv,{reference:{type:e,pageId:t}}),r.setVRange({index:o.index+1,length:0})}_createPage(){const e=this._query,t=this._page.workspace.createPage({init:{title:e}});this._insertLinkedNode("LinkedPage",t.id)}_importPage(){this.abortController.abort();const e=t=>{if(t.length===0)return;const r=t[0];this._insertLinkedNode("LinkedPage",r)};Ese({workspace:this._page.workspace,multiple:!1,onSuccess:e})}render(){const t=this._position?Ur({transform:`translate(${this._position.x}, ${this._position.y})`,maxHeight:`${Math.min(this._position.height,396)}px`}):Ur({visibility:"hidden"}),r=this._actionList.slice(0,-2).map(({key:i,name:a,action:s,active:l,icon:d},u)=>rt`<icon-button
        width="280px"
        height="32px"
        data-id=${i}
        text=${a}
        ?hover=${l}
        @click=${s}
        @mousemove=${()=>{this._activatedItemIndex=u}}
        >${d}</icon-button
      >`),o=this._actionList.slice(-2).map(({key:i,name:a,action:s,active:l,icon:d},u)=>rt`<icon-button
        width="280px"
        height="32px"
        data-id=${i}
        text=${a}
        ?hover=${l}
        @click=${s}
        @mousemove=${()=>{this._activatedItemIndex=this._actionList.length-1+u}}
        >${d}</icon-button
      >`);return rt`<div class="linked-page-popover" style="${t}">
      ${r.length?rt`<div class="group-title">Link to page</div>
            <div class="group" style="overflow-y: scroll; max-height: 224px;">
              ${r}
            </div>
            <div class="divider"></div>`:null}

      <div class="group-title">New page</div>
      ${o}
    </div>`}};Lh.styles=Pse;Mm([Ar()],Lh.prototype,"_position",void 0);Mm([Ar()],Lh.prototype,"_query",void 0);Mm([Ar()],Lh.prototype,"_pageList",void 0);Mm([Ar()],Lh.prototype,"_activatedItemIndex",void 0);Mm([Rr(".linked-page-popover")],Lh.prototype,"linkedPageElement",void 0);Lh=Mm([lr("affine-linked-page-popover")],Lh);function bC({model:n,range:e,container:t=document.body,abortController:r=new AbortController}){const o=new Ya;r.signal.addEventListener("abort",()=>o.dispose());const i=new Lh(n,r);t.appendChild(i),o.add(()=>i.remove());const a=ux(()=>{const l=i.linkedPageElement;xt(l,"You should render the linked page node even if no position");const d=uN(l,e);i.updatePosition(d)},10);o.addFromEvent(window,"resize",a);const s=hk(n.page);return s&&o.addFromEvent(s,"scroll",a,{passive:!0}),setTimeout(a),o.addFromEvent(window,"mousedown",l=>{l.target!==i&&r.abort()}),i}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sz=lx(class extends cx{constructor(n){var e;if(super(n),n.type!==ok.ATTRIBUTE||n.name!=="class"||((e=n.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(n){return" "+Object.keys(n).filter(e=>n[e]).join(" ")+" "}update(n,[e]){var t,r;if(this.it===void 0){this.it=new Set,n.strings!==void 0&&(this.nt=new Set(n.strings.join(" ").split(/\s/).filter(i=>i!=="")));for(const i in e)e[i]&&!(!((t=this.nt)===null||t===void 0)&&t.has(i))&&this.it.add(i);return this.render(e)}const o=n.element.classList;this.it.forEach(i=>{i in e||(o.remove(i),this.it.delete(i))});for(const i in e){const a=!!e[i];a===this.it.has(i)||!((r=this.nt)===null||r===void 0)&&r.has(i)||(a?(o.add(i),this.it.add(i)):(o.remove(i),this.it.delete(i)))}return ox}});var Im=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Ise=n=>{n.preventDefault()};let K6=class extends so{constructor(){super(...arguments),this.rect=null}render(){if(!this.rect)return null;const{left:e,top:t,width:r,height:o}=this.rect,i=Ur({width:`${r}px`,height:`${o}px`,transform:`translate(${e}px, ${t}px)`});return rt`<div class="affine-drag-indicator" style=${i}></div>`}};K6.styles=vr`
    .affine-drag-indicator {
      position: absolute;
      top: 0;
      left: 0;
      background: var(--affine-primary-color);
      transition-property: width, height, transform;
      transition-duration: 100ms;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-delay: 0s;
      transform-origin: 0 0;
      pointer-events: none;
      z-index: 1;
    }
  `;Im([Ft()],K6.prototype,"rect",void 0);K6=Im([lr("affine-drag-indicator")],K6);let Y6=class extends ua{constructor(){super(...arguments),this.offset={x:0,y:0}}render(){return rt`<style>
      affine-drag-preview {
        --x: 0px;
        --y: 0px;
        height: auto;
        display: block;
        position: absolute;
        box-sizing: border-box;
        font-family: var(--affine-font-family);
        font-size: var(--affine-font-base);
        line-height: var(--affine-line-height);
        color: var(--affine-text-primary-color);
        font-weight: 400;
        top: 0;
        left: 0;
        opacity: 0.843;
        cursor: none;
        user-select: none;
        pointer-events: none;
        caret-color: transparent;
        transform-origin: 0 0;
        z-index: 2;
      }

      affine-drag-preview > .affine-block-element {
        pointer-events: none;
      }

      affine-drag-preview > .affine-block-element:first-child > *:first-child {
        margin-top: 0;
      }

      affine-drag-preview .affine-rich-text {
        user-modify: read-only;
        -webkit-user-modify: read-only;
      }

      affine-drag-preview.grabbing {
        cursor: grabbing;
        pointer-events: auto;
      }

      affine-drag-preview.grabbing:after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 24px;
        height: 24px;
        transform: translate(var(--x), var(--y));
      }
    </style>`}};Im([Ft()],Y6.prototype,"offset",void 0);Y6=Im([lr("affine-drag-preview")],Y6);const yC=16,Ev=24;let A1=class extends ui(so){constructor(e){super(),this._draggingElements=[],this._scale=1,this._currentClientX=0,this._currentClientY=0,this._stopPropagation=!1,this._handleAnchorState=null,this._handleAnchorDisposable=null,this._lastDroppingTarget=null,this._lastDroppingType="none",this._indicator=null,this._dragPreview=null,this._onClick=t=>{const{selectedBlocks:r}=this;let{_handleAnchorState:o}=this;const i=o==null?void 0:o.element;o&&r.length&&i===r[0]&&(o=null),this.setSelectedBlock(o,i),this.toggleAttribute("data-selected",!!o),t.stopPropagation()},this._onDragOverDocument=t=>{if(!Su)throw new Error("FireFox only");this._currentClientX=t.clientX,this._currentClientY=t.clientY},this.onDragStart=(t,r=!1)=>{if(this._dragPreview||!t.dataTransfer)return;t.dataTransfer.effectAllowed="move";const o=this._handleAnchorState;let i=this.selectedBlocks;o&&!i.includes(o.element)&&(i=[o.element],this.setSelectedBlock(o)),this._draggingElements=i,this._createDragPreview(t,zf(i),r),this.setDragType(!0)},this.onDrag=(t,r,o)=>{this._dragHandle.style.cursor="grabbing";let i=t.clientX,a=t.clientY;if(!r&&Su&&(i=this._currentClientX,a=this._currentClientY),!this._indicator||!r&&this._indicator.rect&&this._indicator.rect.left===i&&this._indicator.rect.top===a)return;if(this._dragPreview&&t.screenY){const{x:f,y:h}=this._dragPreview.offset,c=i+f,g=a+h,m=this._scale;this._dragPreview.style.transform=`translate(${c}px, ${g}px) scale(${m})`}if(o)return;const s=new ho(i,a),l=this._getClosestBlockElement(s.clone());let d="none",u=null,p=null;if(l&&!this._draggingElements.includes(l)&&!bee(this._draggingElements,l)){const f=Fd(l),h=lD(s,f,l,this._draggingElements,this._scale);h&&(d=h.type,u=h.rect,p=h.modelState)}this._indicator.rect=u,this._lastDroppingType=d,this._lastDroppingTarget=p},this.onDragEnd=(t,r)=>{var i,a,s,l;this._stopPropagation=!1;const o=((i=t.dataTransfer)==null?void 0:i.dropEffect)??"none";if(this._removeDragPreview(),this.setDragType(!1),!r&&o==="none"){this.hide(!0);return}xt(this._draggingElements),(l=this.onDropCallback)==null||l.call(this,((s=(a=this._indicator)==null?void 0:a.rect)==null?void 0:s.min)??new ho(t.clientX,t.clientY),this._draggingElements,this._lastDroppingTarget,this._lastDroppingType),this.hide(!0)},this.getDropAllowedBlocks=()=>(console.warn("you may forget to set `getAllowedBlocks`"),[]),this.addEventListener("beforeprint",()=>this.hide(!0)),this.onDropCallback=e==null?void 0:e.onDropCallback,this.setDragType=e==null?void 0:e.setDragType,this.setSelectedBlock=e==null?void 0:e.setSelectedBlock,this._getSelectedBlocks=e==null?void 0:e.getSelectedBlocks,this._getClosestBlockElement=e==null?void 0:e.getClosestBlockElement,e==null||e.container.appendChild(this),this._container=e==null?void 0:e.container}get selectedBlocks(){return this._getSelectedBlocks()??[]}onContainerMouseMove(e,t){const r=this._container.querySelector(".affine-frame-block-container");xt(r);const o=r.getBoundingClientRect();if(e.raw.clientY<o.y&&this.hide(),t){const{rect:i,element:a}=t;let s=i.left,l=i.top,d=i.height,u=!1;const p=this.selectedBlocks;if(p.includes(a)&&(u=!0,p.length>1)){const m=zf(p),b=Ea(m[0]),v=Ea(m[m.length-1]);s=b.left,l=b.top,d=v.bottom-b.top}this.toggleAttribute("data-selected",u),this._handleAnchorState=t,this.style.display="block",this.style.height=`${d/this._scale}px`,this.style.width=`${Ev}px`;const f=this._container.getBoundingClientRect(),h=s-f.left-(Ev+nq)*this._scale,c=l-f.top;this.style.transform=`translate(${h}px, ${c}px) scale(${this._scale})`,this.style.opacity=`${(1-(e.raw.clientX-s)/i.width).toFixed(2)}`;const g=this._calcDragHandleY(e.raw.clientY,l,d,this._scale);this._dragHandle.style.transform=`translateY(${g}px)`,this._handleAnchorDisposable&&this._handleAnchorDisposable.dispose(),this._handleAnchorDisposable=t.model.propsUpdated.on(()=>{this.hide()});return}this.hide()}hide(e=!1){this.style.display="none",e&&this.reset()}reset(){this._handleAnchorState=null,this._lastDroppingType="none",this._lastDroppingTarget=null,this._indicator&&(this._indicator.rect=null),this._draggingElements.forEach(e=>{e.style.opacity="1"}),this._draggingElements=[]}setPointerEvents(e){this.style.pointerEvents=e}setScale(e=1){this._scale=e}firstUpdated(){this.style.display="none",this.style.position="absolute",this._indicator=document.querySelector("affine-drag-indicator"),this._indicator||(this._indicator=document.createElement("affine-drag-indicator"),document.body.appendChild(this._indicator));const e=this._disposables;Su&&e.addFromEvent(this._container,"dragover",this._onDragOverDocument),e.addFromEvent(document.body,"dragover",Ise,!1),e.addFromEvent(this,"mousemove",this._onMouseMoveOnHost),e.addFromEvent(this._dragHandle,"click",this._onClick),e.addFromEvent(this._dragHandle,"dragstart",this.onDragStart),e.addFromEvent(this._dragHandle,"drag",this.onDrag),e.addFromEvent(this._dragHandle,"dragend",this.onDragEnd)}disconnectedCallback(){var e;super.disconnectedCallback(),this.hide(!0),(e=this._handleAnchorDisposable)==null||e.dispose()}_onMouseMoveOnHost(e){if(Su&&(this._currentClientX=e.clientX,this._currentClientY=e.clientY),this._stopPropagation&&e.stopPropagation(),!this._handleAnchorState)return;const{rect:t,element:r}=this._handleAnchorState,o=this.selectedBlocks;let i=t.top,a=t.height;if(o.includes(r)&&o.length>1){const l=zf(o),d=Ea(l[0]),u=Ea(l[l.length-1]);i=d.top,a=u.bottom-d.top}const s=this._calcDragHandleY(e.clientY,i,a,this._scale);this._dragHandle.style.cursor="grab",this._dragHandle.style.transform=`translateY(${s}px)`}_calcDragHandleY(e,t,r,o){return Math.max(0,Math.min(e-t-yC*o/2,r-yC*o))/o}_createDragPreview(e,t,r=!1){const o=this._dragPreview=new Y6,i=this._container.getBoundingClientRect(),a=t[0].getBoundingClientRect(),{clientX:s,clientY:l}=e,d=this._scale,u=a.left-i.left,p=a.top-i.top;o.offset.x=u-s,o.offset.y=p-l,o.style.width=`${a.width/d}px`,o.style.transform=`translate(${u}px, ${p}px) scale(${d})`;const f=-o.offset.x-i.left-24/2,h=-o.offset.y-i.top-24/2;o.style.setProperty("--x",`${f}px`),o.style.setProperty("--y",`${h}px`);const c=document.createDocumentFragment();t.forEach(g=>{const m=document.createElement("div");m.classList.add("affine-block-element"),Rv(g.render(),m),c.appendChild(m)}),o.appendChild(c),this._container.appendChild(o),r&&o.classList.add("grabbing"),requestAnimationFrame(()=>{var g,m;(m=(g=o.querySelector("rich-text"))==null?void 0:g.vEditor)==null||m.rootElement.blur()})}_removeDragPreview(){this._dragPreview&&(this._dragPreview.remove(),this._dragPreview=null)}render(){return rt`
      <div class="affine-drag-handle-line"></div>
      <div class="affine-drag-handle" draggable="true">
        <svg
          class="affine-drag-handle-normal"
          width="16"
          height="18"
          viewBox="0 0 16 12"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect
            x="7.7782"
            y="0.707107"
            width="10"
            height="10"
            rx="2.5"
            transform="rotate(45 7.7782 0.707107)"
          />
        </svg>

        <svg
          class="affine-drag-handle-hover"
          width="16"
          height="18"
          viewBox="0 0 16 12"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M2.41421 6.58579L6.58579 2.41421C7.36684 1.63317 8.63316 1.63316 9.41421 2.41421L13.5858 6.58579C14.3668 7.36684 14.3668 8.63316 13.5858 9.41421L9.41421 13.5858C8.63316 14.3668 7.36684 14.3668 6.58579 13.5858L2.41421 9.41421C1.63317 8.63316 1.63316 7.36684 2.41421 6.58579Z"
            stroke-width="1.5"
          />
          <path
            class="ok"
            d="M5 8.5L7.5 10.5L10.5 7"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </div>
    `}};A1.styles=vr`
    :host {
      top: 0;
      left: 0;
      overflow: hidden;
      width: ${Ev+8}px;
      transform-origin: 0 0;
      pointer-events: none;
      user-select: none;
    }

    :host(:hover) > .affine-drag-handle-line {
      opacity: 1;
    }

    .affine-drag-handle-line {
      opacity: 0;
      width: 1px;
      height: 100%;
      position: absolute;
      left: ${(Ev-1)/2}px;
      background-color: var(--affine-icon-color);
      transition: opacity ease-in-out 300ms;
      pointer-events: none;
    }

    .affine-drag-handle {
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      width: ${Ev}px;
      height: ${yC}px;
      /* background-color: var(--affine-white-90); */
      pointer-events: auto;
      color: var(--affine-icon-color);
    }

    @media print {
      .affine-drag-handle-line {
        display: none;
      }

      .affine-drag-handle {
        display: none;
      }
    }

    .affine-drag-handle-normal {
      display: flex;
      stroke: currentcolor;
    }

    .affine-drag-handle-hover {
      fill: currentcolor;
      transition: opacity ease-in-out 300ms;
    }

    .affine-drag-handle-hover path.ok {
      stroke: var(--affine-white-90);
    }

    .affine-drag-handle-hover {
      display: none;
    }

    :host(:hover) .affine-drag-handle-normal,
    :host([data-selected]) .affine-drag-handle-normal {
      display: none !important;
    }

    :host(:hover) .affine-drag-handle-hover,
    :host([data-selected]) .affine-drag-handle-hover {
      display: flex !important;
      /* padding-top: 5px !important; FIXME */
    }
  `;Im([Rr(".affine-drag-handle")],A1.prototype,"_dragHandle",void 0);A1=Im([lr("affine-drag-handle")],A1);var Sl=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Tse=vr`
  affine-block-hub {
    position: absolute;
    z-index: 1;
    user-select: none;
  }

  @media print {
    affine-block-hub {
      display: none;
    }
  }

  .affine-block-hub-container {
    width: 274px;
    position: absolute;
    right: calc(100% + 8px);
    overflow-y: unset;
    display: none;
    justify-content: center;
    fill: var(--affine-icon-color);
    color: var(--affine-icon-color);
    font-size: var(--affine-font-sm);
    background: var(--affine-background-overlay-panel-color);
    box-shadow: var(--affine-menu-shadow);
    border-radius: 8px;
  }

  .affine-block-hub-container[type='text'] {
    top: unset;
    bottom: 0;
    transform: unset;
    right: calc(100% + 4px);
  }

  .visible {
    display: block;
  }

  .invisible {
    display: none;
  }

  .card-container-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    position: relative;
  }

  .card-container {
    display: flex;
    position: relative;
    align-items: center;
    width: 250px;
    height: 54px;
    background: var(--affine-white-80);
    box-shadow: var(--affine-shadow-1);
    border-radius: 8px;
    margin-bottom: 12px;
    cursor: grab;
    top: 0;
    left: 0;
    transition: all 0.1s ease-in-out;
  }

  .card-icon-container {
    display: flex;
    align-items: center;
    position: absolute;
    right: 12px;
  }

  .card-icon-container > svg {
    width: 20px;
    height: 20px;
  }

  .card-container-inner:hover .card-container {
    background: var(--affine-hover-color);
    top: -2px;
    left: -2px;
  }

  .card-container-inner:hover .card-container.grabbing {
    top: unset;
    left: unset;
    box-shadow: var(--affine-shadow-2);
  }

  .card-description-container {
    display: block;
    width: 190px;
    color: var(--affine-text-primary-color);
    font-size: var(--affine-font-base);
    line-height: var(--affine-line-height);
    margin: 8px 0 8px 12px;
    text-align: justify;
  }

  .affine-block-hub-container .description {
    font-size: var(--affine-font-sm);
    line-height: var(--affine-line-height);
    color: var(--affine-text-secondary-color);
    white-space: pre;
  }

  .grabbing {
    cursor: grabbing;
  }

  .grab {
    cursor: grab;
  }

  .affine-block-hub-title-container {
    margin: 16px 0 20px 12px;
    color: var(--affine-text-secondary-color);
    font-size: var(--affine-font-base);
    user-select: none;
  }

  .prominent {
    z-index: 1;
  }

  .block-hub-menu-container {
    display: flex;
    font-family: var(--affine-font-family);
    flex-flow: column;
    justify-content: center;
    align-items: center;
    position: fixed;
    width: 44px;
    background: var(--affine-background-primary-color);
    border-radius: 8px;
  }

  .block-hub-menu-container[expanded] {
    box-shadow: var(--affine-menu-shadow);
    background: var(--affine-background-overlay-panel-color);
  }

  .block-hub-icon-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 8px;
    position: relative;
    border-radius: 4px;
    fill: var(--affine-icon-color);
    color: var(--affine-icon-color);
    height: 36px;
  }
  .block-hub-icon-container svg {
    width: 24px;
    height: 24px;
  }

  .block-hub-icon-container[selected='true'] {
    background: var(--affine-hover-color);
  }

  .block-hub-icon-container:hover {
    background: var(--affine-hover-color);
    border-radius: 4px;
  }

  .new-icon {
    width: 44px;
    height: 44px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 8px;
    fill: var(--affine-icon-color);
  }

  .new-icon-in-edgeless {
    box-shadow: var(--affine-menu-shadow);
  }
  .block-hub-menu-container[expanded] .new-icon {
    border-radius: 4px;
    box-shadow: unset;
  }

  .new-icon:hover {
    box-shadow: var(--affine-menu-shadow);
    background: var(--affine-white);
  }

  .icon-expanded {
    width: 36px;
    height: 36px;
  }

  .icon-expanded:hover {
    background: var(--affine-hover-color);
  }

  .divider {
    height: 1px;
    width: 36px;
    background: var(--affine-border-color);
    margin: 4px 0;
  }

  [role='menuitem'] tool-tip {
    font-size: var(--affine-font-sm);
  }

  .block-hub-icons-container {
    overflow: hidden;
    transition: all 0.2s cubic-bezier(0, 0, 0.55, 1.6);
  }

  ${hd}
`,ZT=200,UT=70,Ose=24,Ase=24;function xC(n,e,t,r){return e&&t&&r===n}function wC(n,e,t,r,o,i,a){const s=r<800,l=Ur({maxHeight:`${r}px`,overflowY:s?"scroll":"unset"});return rt`
    <div
      class="affine-block-hub-container ${o?"visible":""}"
      style="${l}"
      type=${e}
    >
      <div class="affine-block-hub-title-container">${t}</div>
      ${n.map(({flavour:d,type:u,name:p,description:f,icon:h,tooltip:c},g)=>rt`
            <div class="card-container-wrapper">
              <div class="card-container-inner">
                <div
                  class="card-container has-tool-tip ${i?"grabbing":""}"
                  draggable="true"
                  affine-flavour=${d}
                  affine-type=${u??""}
                >
                  <div class="card-description-container">
                    <div>${p}</div>
                    <div class="description">${f}</div>
                  </div>
                  <div class="card-icon-container">${h}</div>
                  <tool-tip
                    tip-position=${s&&g===n.length-1?"top":"bottom"}
                    style="${a?"":"display: none"}; z-index: ${n.length-g}"
                    >${c}</tool-tip
                  >
                </div>
              </div>
            </div>
          `)}
    </div>
  `}function Lse(n,e,t,r,o,i,a,s){const d=(n?5:4)*44+10,u=wC(qJ,"list","List",a,xC("list",e,o,r),t,i),p=wC(JJ.filter(({flavour:f})=>f==="affine:bookmark"?s.awarenessStore.getFlag("enable_bookmark_operation"):!0),"file","Content & Media",a,xC("file",e,o,r),t,i);return rt`
    <div
      class="block-hub-icons-container"
      ?transition=${e}
      style="height: ${e?`${d}px`:"0"};"
    >
      <div
        class="block-hub-icon-container has-tool-tip ${t?"grabbing":"grab"}"
        selected=${r==="blank"?"true":"false"}
        type="blank"
        draggable="true"
        affine-flavour="affine:paragraph"
        affine-type="text"
      >
        ${jJ}
        <tool-tip
          inert
          role="tooltip"
          tip-position="left"
          ?hidden=${!i}
          >Drag to insert blank line
        </tool-tip>
      </div>
      <div
        class="block-hub-icon-container"
        type="text"
        selected=${r==="text"?"true":"false"}
      >
        ${pR}
      </div>
      <div
        class="block-hub-icon-container"
        type="list"
        selected=${r==="list"?"true":"false"}
      >
        ${u} ${bJ}
      </div>
      <div
        class="block-hub-icon-container"
        type="file"
        selected=${r==="file"?"true":"false"}
      >
        ${p} ${Xq}
      </div>
      ${n?rt`
            <div
              class="block-hub-icon-container has-tool-tip"
              type="database"
              draggable="true"
              affine-flavour="affine:database"
              selected=${r==="database"?"true":"false"}
            >
              ${xm}
              <tool-tip
                inert
                role="tooltip"
                tip-position="left"
                ?hidden=${!i}
              >
                Drag to create a database
              </tool-tip>
            </div>
          `:null}
      <div class="divider"></div>
    </div>
  `}let ks=class extends ui(ua){constructor(e){super(),this._expanded=!1,this._isGrabbing=!1,this._visibleCardType=null,this._showTooltip=!0,this._inEdgelessMode=!1,this._maxHeight=2e3,this._currentClientX=0,this._currentClientY=0,this._isCardListVisible=!1,this._lastDroppingTarget=null,this._lastDroppingType="none",this._lastDraggingFlavour=null,this._timer=null,this._onTransitionStart=t=>{this._timer&&clearTimeout(this._timer),this._expanded?(this._blockHubMenuContainer.style.padding="4px",this._timer=window.setTimeout(()=>{this._blockHubIconsContainer.style.overflow="unset"},ZT)):(this._blockHubMenuContainer.style.padding="0 4px",this._timer=window.setTimeout(()=>{this._blockHubIconsContainer.style.overflow="hidden"},ZT))},this._onClickOutside=t=>{const r=t.target;r instanceof HTMLElement&&!r.closest("affine-block-hub")&&this._hideCardList()},this._onClickCard=(t,r)=>{const o=r.getAttribute("affine-type");xt(o);const i={flavour:r.getAttribute("affine-flavour")??""};o&&(i.type=o),this._onClickCardCallback(i)},this._onBlockHubButtonClick=t=>{this._expanded=!this._expanded,this._expanded||this._hideCardList()},this._onDragStart=t=>{this._showTooltip=!1,xt(t.dataTransfer),t.dataTransfer.effectAllowed="move";const r=t.target,o=r.getAttribute("affine-type"),i={flavour:r.getAttribute("affine-flavour")};o&&(i.type=o),t.dataTransfer.setData("affine/block-hub",JSON.stringify(i)),this._lastDraggingFlavour=i.flavour,this._onDragStartCallback()},this._onMouseDown=t=>{Su&&(this._currentClientX=t.clientX,this._currentClientY=t.clientY)},this._onDrag=t=>{this._hideCardList();let r=t.clientX,o=t.clientY;if(Su&&(r=this._currentClientX,o=this._currentClientY),!this._indicator||this._indicator.rect&&this._indicator.rect.left===r&&this._indicator.rect.top===o)return;const i=new ho(r,o),{container:a,rect:s,scale:l}=this.getHoveringFrameState(i.clone());if(!s){this._resetDropState();return}const d=d1(i,{container:a,rect:s,snapToEdge:{x:!1,y:!0}},l);if(!d){this._resetDropState();return}let u="none",p=null,f=null;const h=Fd(d),c=lD(i,h,d,[],l,this._lastDraggingFlavour);c&&(u=c.type,p=c.rect,f=c.modelState),this._lastDroppingType=u,this._indicator.rect=p,this._lastDroppingTarget=f},this._onDragOver=t=>{t.preventDefault()},this._onDragOverDocument=t=>{if(!Su)throw new Error("FireFox only");this._currentClientX=t.clientX,this._currentClientY=t.clientY},this._onDragEnd=t=>{this._showTooltip=!0,this._isGrabbing=!1,this._lastDraggingFlavour=null,this._resetDropState()},this._resetDropState=()=>{this._lastDroppingType="none",this._indicator.rect=null,this._lastDroppingTarget=null},this._onDrop=t=>{var r,o;xt(t.dataTransfer),t.dataTransfer.getData("affine/block-hub")&&this._onDropCallback(t,((o=(r=this._indicator)==null?void 0:r.rect)==null?void 0:o.min)??new ho(t.clientX,t.clientY),this._lastDroppingTarget,this._lastDroppingType)},this._onCardMouseDown=t=>{this._isGrabbing=!0},this._onCardMouseUp=t=>{this._isGrabbing=!1},this._onBlankMenuMouseDown=()=>{this._isGrabbing=!0},this._onBlankMenuMouseUp=()=>{this._isGrabbing=!1},this._onBlockHubMenuMouseOver=t=>{const o=t.currentTarget.getAttribute("type");xt(o),this._isCardListVisible=!0,this._visibleCardType=o},this._onBlockHubEntryMouseOver=()=>{this._isCardListVisible=!1},this._onResize=()=>{const t=document.body.getBoundingClientRect();this._maxHeight=t.height-Ase-UT},this._page=e.page,this._mouseRoot=e.mouseRoot,this._enableDatabase=e.enableDatabase,this.getAllowedBlocks=e.getAllowedBlocks,this.getHoveringFrameState=e.getHoveringFrameState,this._onDragStartCallback=e.onDragStart,this._onDropCallback=e.onDrop,this._onClickCardCallback=e.onClickCard}connectedCallback(){super.connectedCallback();const e=this._disposables;e.addFromEvent(this,"dragstart",this._onDragStart),e.addFromEvent(this,"drag",this._onDrag),e.addFromEvent(this,"dragend",this._onDragEnd),e.addFromEvent(this._mouseRoot,"dragover",this._onDragOver),e.addFromEvent(this._mouseRoot,"drop",this._onDrop),e.addFromEvent(this,"mousedown",this._onMouseDown),e.add(this._mouseRoot.slots.pageModeSwitched.on(t=>{this._inEdgelessMode=t==="edgeless"})),Su&&e.addFromEvent(this._mouseRoot,"dragover",this._onDragOverDocument),this._onResize()}firstUpdated(){const e=this._disposables;this._blockHubCards.forEach(t=>{e.addFromEvent(t,"mousedown",this._onCardMouseDown),e.addFromEvent(t,"mouseup",this._onCardMouseUp),e.addFromEvent(t,"click",r=>this._onClickCard(r,t))});for(const t of this._blockHubMenus)e.addFromEvent(t,"mouseover",this._onBlockHubMenuMouseOver),t.getAttribute("type")==="blank"&&(e.addFromEvent(t,"mousedown",this._onBlankMenuMouseDown),e.addFromEvent(t,"mouseup",this._onBlankMenuMouseUp));e.addFromEvent(this._blockHubMenuEntry,"mouseover",this._onBlockHubEntryMouseOver),e.addFromEvent(document,"click",this._onClickOutside),e.addFromEvent(this._blockHubButton,"click",this._onBlockHubButtonClick),e.addFromEvent(this._blockHubButton,"mousedown",t=>{t.preventDefault()}),e.addFromEvent(this._blockHubIconsContainer,"transitionstart",this._onTransitionStart),e.addFromEvent(window,"resize",this._onResize),this._indicator=document.createElement("affine-drag-indicator"),document.body.appendChild(this._indicator)}disconnectedCallback(){super.disconnectedCallback(),this._disposables.dispose()}toggleMenu(){this._expanded=!this._expanded,this._expanded||this._hideCardList()}_hideCardList(){this._visibleCardType&&(this._visibleCardType=null,this._isCardListVisible=!1)}render(){const e=Lse(this._enableDatabase,this._expanded,this._isGrabbing,this._visibleCardType,this._isCardListVisible,this._showTooltip,this._maxHeight,this._page),t=wC(XJ,"text","Text block",this._maxHeight,xC("text",this._expanded,this._isCardListVisible,this._visibleCardType),this._isGrabbing,this._showTooltip),r=sz({"icon-expanded":this._expanded,"new-icon-in-edgeless":this._inEdgelessMode&&!this._expanded,"has-tool-tip":!0,"new-icon":!0});return rt`
      <div
        class="block-hub-menu-container"
        ?expanded=${this._expanded}
        style="bottom: ${UT}px; right: ${Ose}px;"
      >
        ${e}
        <div class=${r} role="menuitem" style="cursor:pointer;">
          ${this._expanded?OJ:$J}
          <tool-tip
            class=${this._expanded?"invisible":""}
            inert
            tip-position="left"
            role="tooltip"
            >Insert blocks
          </tool-tip>
        </div>
        ${t}
      </div>
    `}};ks.styles=Tse;Sl([Ft()],ks.prototype,"getAllowedBlocks",void 0);Sl([Ft()],ks.prototype,"getHoveringFrameState",void 0);Sl([Ar()],ks.prototype,"_expanded",void 0);Sl([Ar()],ks.prototype,"_isGrabbing",void 0);Sl([Ar()],ks.prototype,"_visibleCardType",void 0);Sl([Ar()],ks.prototype,"_showTooltip",void 0);Sl([Ar()],ks.prototype,"_inEdgelessMode",void 0);Sl([Ar()],ks.prototype,"_maxHeight",void 0);Sl([LR(".card-container")],ks.prototype,"_blockHubCards",void 0);Sl([LR(".block-hub-icon-container[type]")],ks.prototype,"_blockHubMenus",void 0);Sl([Rr(".new-icon")],ks.prototype,"_blockHubButton",void 0);Sl([Rr(".block-hub-icons-container")],ks.prototype,"_blockHubIconsContainer",void 0);Sl([Rr(".block-hub-menu-container")],ks.prototype,"_blockHubMenuContainer",void 0);Sl([Rr('[role="menuitem"]')],ks.prototype,"_blockHubMenuEntry",void 0);ks=Sl([lr("affine-block-hub")],ks);var lz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let G6=class extends so{constructor(){super(...arguments),this.vertical=!1}render(){return rt`<div
      class="divider ${this.vertical?"vertical":"horizontal"}"
    ></div>`}};G6.styles=vr`
    :host {
      display: inline-block;
    }

    .divider {
      background-color: var(--affine-border-color);
    }

    .divider.vertical {
      width: 1px;
      height: 100%;
      margin: 0 7px;
    }

    .divider.horizontal {
      width: 100%;
      height: 1px;
      margin: 7px 0;
    }
  `;lz([Ft()],G6.prototype,"vertical",void 0);G6=lz([lr("menu-divider")],G6);var cz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function $se(n,e){const t=Math.round(Math.min(Math.max(e,0),1)*255);return n+t.toString(16).toUpperCase()}function jse(){return`#${Math.floor(Math.random()*16777215).toString(16)}`}function Rse(n,e){return Ur({position:"absolute",width:`${n.width}px`,height:`${n.height}px`,top:`${n.top}px`,left:`${n.left}px`,backgroundColor:e})}function Dse(n,e){return Ur({position:"absolute",width:`${n.width}px`,height:`${n.height}px`,top:`${n.top}px`,left:`${n.left}px`,backgroundColor:e})}let X6=class extends so{constructor(){super(...arguments),this.page=null,this._ranges=[],this._colorMap=new Map,this._resizeObserver=new ResizeObserver(()=>{this.requestUpdate()}),this._abortController=new AbortController}firstUpdated(){xt(this.page),this.page.awarenessStore.slots.update.subscribe(t=>t,t=>{var a,s;if(!t||!((a=t.state)!=null&&a.rangeMap)||t.id===((s=this.page)==null?void 0:s.awarenessStore.awareness.clientID))return;xt(this.page);const r=this.page,{user:o,rangeMap:i}=t.state;if(t.type==="update"){const l=this._ranges.findIndex(d=>d.id===t.id);l===-1?this._ranges.push({id:t.id,userRange:i[r.prefixedId],user:o}):this._ranges[l]={id:t.id,userRange:i[r.prefixedId],user:o}}else if(t.type==="add")this._ranges.push({id:t.id,userRange:i[r.prefixedId],user:o});else if(t.type==="remove"){const l=this._ranges.findIndex(d=>d.id===t.id);this._ranges.splice(l,1)}this.requestUpdate()}),this.page.history.on("stack-item-popped",t=>{const r=t.stackItem.meta.get("cursor-location");if(!r)return;xt(this.page);const o=r.blockIds.map(i=>(xt(this.page),this.page.getBlockById(i))).filter(Boolean);o.length&&requestAnimationFrame(()=>{if(xt(this.page),o.length===1&&o[0]===this.page.root){S1({type:"Title",startOffset:r.startOffset,endOffset:r.endOffset,models:[this.page.root]});return}S1({type:"Native",startOffset:r.startOffset,endOffset:r.endOffset,models:o})})}),this._resizeObserver.observe(document.body);const e=document.querySelector(".affine-default-viewport");e==null||e.addEventListener("scroll",()=>this.requestUpdate(),{signal:this._abortController.signal})}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver.disconnect(),this._abortController.abort()}_getSelectionRect(e){xt(this.page);const t=e.blockIds.map(s=>(xt(this.page),this.page.getBlockById(s))).filter(Boolean);let r=null;if(t.length===1&&t[0]===this.page.root?r=Pg({type:"Title",startOffset:e.startOffset,endOffset:e.endOffset,models:[this.page.root]}):r=Pg({type:"Native",startOffset:e.startOffset,endOffset:e.endOffset,models:t}),!r)return[];const o=Wf(this.page);xt(o);const i=o.getBoundingClientRect();return Array.from(r.getClientRects()).map(s=>({width:s.width,height:s.height,top:s.top-i.top,left:s.left-i.left})).filter(s=>s.width>1&&s.height>0||e.blockIds.length===1)}_getCursorRect(e){xt(this.page);const t=e.blockIds[e.blockIds.length-1],r=e.endOffset,o=this.page.getBlockById(t);if(!o||!o.text)return null;const i=Pg({type:"Native",startOffset:r,endOffset:r,models:[o]});if(!i)return null;const a=Wf(this.page);xt(a);const s=a.getBoundingClientRect(),l=Array.from(i.getClientRects());if(l.length===1){const d=l[0];return{width:2,height:d.height+4,top:d.top-2-s.top,left:d.left-s.left}}return null}render(){if(!this.page||this._ranges.length===0)return this._colorMap.clear(),rt``;const e=this._ranges.filter(t=>t.userRange).map(t=>({id:t.id,userRange:t.userRange,rects:this._getSelectionRect(t.userRange),user:t.user}));return rt`<div>
      ${e.flatMap(t=>{var i;t.user&&this._colorMap.set(t.id,t.user.color),this._colorMap.has(t.id)||this._colorMap.set(t.id,jse());const r=this._colorMap.get(t.id),o=this._getCursorRect(t.userRange);return t.rects.map(a=>rt`
              <div style="${Rse(a,$se(r,.5))}"></div>
            `).concat([rt`
              <div
                style="${o?Dse(o,r):Ur({display:"none"})}"
              >
                <div
                  style="${Ur({position:"relative",height:"100%"})}"
                >
                  <div
                    style="${Ur({position:"absolute",bottom:`${o==null?void 0:o.height}px`,padding:"2px","background-color":r,color:"white"})}"
                  >
                    ${(i=t.user)==null?void 0:i.name}
                  </div>
                </div>
              </div>
            `])})}
    </div>`}};X6.styles=vr`
    :host {
      position: absolute;
      pointer-events: none;
      left: 0;
      top: 0;
    }
  `;cz([Ft()],X6.prototype,"page",void 0);X6=cz([lr("remote-selection")],X6);var Px=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Kg=class extends ui(so){constructor(){super(...arguments),this.offset={x:0,y:0},this.state={rects:[],grab:!1}}_onPointerUp({clientX:e,clientY:t,shiftKey:r}){this.removeAttribute("data-grab"),document.dispatchEvent(new PointerEvent("pointerup",{bubbles:!0,clientX:e,clientY:t,shiftKey:r}))}connectedCallback(){super.connectedCallback(),this._disposables.addFromEvent(this,"pointerup",this._onPointerUp)}willUpdate(){const{rects:[e],grab:t}=this.state;if(e){const{x:r,y:o}=this.offset;this.style.top=`${e.top+o}px`,this.style.left=`${e.left+r}px`}this.toggleAttribute("data-grab",!!(e&&t))}render(){const{rects:e}=this.state,t=e[0];return t?Vs(e,r=>rt`<div
            style=${Ur({width:`${r.width}px`,height:`${r.height}px`,top:`${r.top-t.top}px`,left:`${r.left-t.left}px`})}
          ></div>`):Di}};Kg.styles=vr`
    :host {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      pointer-events: none;
    }

    :host([data-grab]) {
      pointer-events: auto;
    }

    :host([data-grab]:hover) {
      cursor: grab;
    }

    :host > div {
      position: absolute;
      border-radius: 5px;
      background: var(--affine-hover-color);
    }
  `;Px([Ft()],Kg.prototype,"mouseRoot",void 0);Px([Ft()],Kg.prototype,"offset",void 0);Px([Ft()],Kg.prototype,"state",void 0);Kg=Px([lr("affine-selected-blocks")],Kg);document.createElement("div");async function Nse(n){const e=await Use(n);if(!e)return;const t=await e.arrayBuffer(),r=new Uint8Array(t);let o;r[0]===71&&r[1]===73&&r[2]===70&&r[3]===56?o="image/gif":r[0]===137&&r[1]===80&&r[2]===78&&r[3]===71?o="image/png":r[0]===255&&r[1]===216&&r[2]===255&&r[3]===224?o="image/jpeg":(console.error("unknown image type"),o="image/png");const i=URL.createObjectURL(new Blob([t],{type:o})),a=document.createElement("a"),s=new MouseEvent("click");a.download="image",a.href=i,a.dispatchEvent(s),a.remove(),URL.revokeObjectURL(i)}async function zse(n){X1({type:"Block",models:[n],startOffset:0,endOffset:0}),Zh("Copied image to clipboard")}function Bse(n){return n.text?n.text.toDelta():[]}async function Hse(n){var i;const e="blocksuite/x-c+w",t=Bse(n),r={data:[{type:n.type,flavour:n.flavour,sourceId:n.sourceId,text:t,children:[]}]};return Fse([{mimeType:e,data:JSON.stringify(r)},{mimeType:"text/plain",data:((i=n.text)==null?void 0:i.toString())||""}])}function Fse(n){let e=!1;const t=document.createElement("textarea");t.value="temp",document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length);const r=o=>{const i=o.clipboardData;i&&n.forEach(a=>i.setData(a.mimeType,a.data)),o.preventDefault(),o.stopPropagation(),t.removeEventListener("copy",r)};t.addEventListener("copy",r);try{e=document.execCommand("copy")}finally{t.removeEventListener("copy",r),document.body.removeChild(t)}return e}function Zse(n){const e=Hl(n);xt(e);const t=e.querySelector(".affine-embed-wrapper-caption");t.classList.add("caption-show"),t.focus()}async function Use(n){xt(n.sourceId);const e=await n.page.blobs;return e==null?void 0:e.get(n.sourceId)}function Wse(n){X1({type:"Block",models:[n],startOffset:0,endOffset:0}),Zh("Copied to clipboard")}function Pv(n){const e=[],t=n.children.slice(),r=o=>{for(const i of o)i.flavour!=="affine:frame"&&e.push(i),i.children.length&&r(i.children)};return r(t),e}function Vse(n){return new A1({container:n.mouseRoot,onDropCallback(e,t,r,o){if(!r||o==="none")return;const{model:i}=r,a=n.page,s=zf(t).map(Fd);if(s.length===1&&KR(a,i,s[0]))return;a.captureSync();const l=a.getParent(i),d=a.getParent(s[0]);o==="database"?a.moveBlocks(s,i):(xt(l),a.moveBlocks(s,l,i,o==="before")),n.updateComplete.then(()=>{if(d&&Tr(d,["affine:database"])&&na("affine:database").refreshRowSelection(),l&&Tr(l,["affine:database"])){n.selection.clear();return}requestAnimationFrame(()=>{n.selection.setSelectedBlocks(t.map(u=>mx(u.model.id)).filter(u=>!!u))})})},setDragType(e){n.selection.state.type=e?"block:drag":"block"},setSelectedBlock(e,t){if(t&&t.closest("affine-database")&&na("affine:database").toggleRowSelection(t)){n.selection.clear();return}const r=e==null?void 0:e.model;if(r){const i=r.page.getParent(r);if(i&&Tr(i,["affine:database"])){na("affine:database").setRowSelectionByElement(e.element);return}}n.selection.selectOneBlock(e==null?void 0:e.element,e==null?void 0:e.rect);const o=L1("affine:database");Promise.resolve(o).then(i=>{i.getLastRowSelection()&&i.clearRowSelection()})},getSelectedBlocks(){return n.selection.state.selectedBlocks},getClosestBlockElement(e){return d1(e,{rect:n.innerRect})}})}const Kse=vr`
  .affine-link-edit-popover {
    box-sizing: border-box;
    width: 404px;
    height: 112px;
    padding: 12px;
    box-shadow: var(--affine-shadow-2);
    background: var(--affine-background-overlay-panel-color);
    border-radius: 8px;
    display: grid;
    grid-template-columns: auto auto auto;
    grid-template-rows: repeat(2, 1fr);
    gap: 12px;
    grid-template-areas:
      'text-area .'
      'link-area btn';
    justify-items: center;
    align-items: center;
    /* breaks 'basic link' test in chromium */
    /* user-select: none; */
  }

  .affine-edit-text-area {
    grid-area: text-area;
    width: 338px;
    display: grid;
    gap: 6px;
    grid-template-columns: auto auto auto;
    grid-template-rows: repeat(1, 1fr);
    grid-template-areas: 'text span text-input';
    justify-items: center;
    align-items: center;
    user-select: none;
  }

  .affine-edit-link-area {
    grid-area: link-area;
    width: 338px;
    display: grid;
    gap: 6px;
    grid-template-columns: auto auto auto;
    grid-template-rows: repeat(1, 1fr);
    grid-template-areas: 'link span link-input';
    justify-items: center;
    align-items: center;
  }

  .affine-link-popover-dividing-line {
    grid-area: span;
  }
  .affine-edit-text-text {
    grid-area: text;
  }

  .affine-edit-text-input {
    grid-area: text-input;
  }

  .affine-edit-link-text {
    grid-area: link;
  }

  .affine-edit-link-input {
    grid-area: link-input;
  }

  .affine-confirm-button {
    grid-area: btn;
    user-select: none;
    fill: var(--affine-icon-color);
  }
  .affine-confirm-button[disabled],
  .affine-confirm-button:disabled {
    fill: var(--affine-icon-color);
  }
`,Yse=vr`
  .popover-container {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-base);
    font-style: normal;
    line-height: 24px;
    color: var(--affine-popover-color);
    z-index: var(--affine-z-index-popover);
    animation: affine-popover-fade-in 0.2s ease;
  }

  @keyframes affine-popover-fade-in {
    from {
      opacity: 0;
      transform: translateY(-3px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .overlay-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: var(--affine-z-index-popover);
  }
  .affine-edit-text-area {
    border: 1px solid var(--affine-border-color);
    outline: none;
    border-radius: 10px;
    background: transparent;
  }
  .affine-edit-text-area:focus-within {
    border: 1px solid var(--affine-primary-color);
  }
  .affine-edit-link-area {
    border: 1px solid var(--affine-border-color);
    outline: none;
    border-radius: 10px;
    background: transparent;
  }
  .affine-edit-link-area:focus-within {
    border: 1px solid var(--affine-primary-color);
  }

  label {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-sm);
    box-sizing: border-box;
    padding: 6px 0 6px 12px;
    color: var(--affine-icon-color);
  }

  input {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-base);
    box-sizing: border-box;
    padding: 6px 12px 6px 0;
    width: 260px;
    height: 34px;
    color: inherit;
    border: none;
    background: transparent;
  }
  input::placeholder {
    color: var(--affine-placeholder-color);
  }
  input:focus {
    outline: none;
  }
  input:focus ~ label,
  input:active ~ label {
    color: var(--affine-primary-color);
  }

  .affine-link-popover {
    display: flex;
    align-items: center;
    height: 40px;
    padding: 0 12px;

    background: var(--affine-background-overlay-panel-color);
    box-shadow: var(--affine-shadow-2);
    border-radius: 8px;
  }

  .affine-link-popover-input {
    border: none;
  }
  .affine-link-popover-input::placeholder {
    color: var(--affine-placeholder-color);
  }
  .affine-link-popover-input:focus {
    border: none;
  }

  .affine-link-preview {
    width: 260px;
    height: 28px;
    display: flex;
    align-items: center;
    user-select: none;
    cursor: pointer;
    white-space: nowrap;
  }

  .affine-link-popover-dividing-line {
    margin: 0 6px;
    width: 1px;
    height: 20px;
    background-color: var(--affine-border-color);
  }

  ${Kse}
  ${hd}
`;var Ac=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Gse=["http","https","ftp","sftp","mailto","tel","revezone"],Xse=/^[a-zA-Z0-9.!#$%&*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;function qse(n){return Gse.some(r=>n.startsWith(r+":"))?n:Xse.test(n)?"mailto:"+n:"http://"+n}let Cl=class extends so{constructor(){super(...arguments),this.left="0",this.top="0",this.type="create",this.showMask=!0,this.text="",this.previewLink="",this.showBookmarkOperation=!1,this._bodyOverflowStyle="",this._disableConfirm=!0}connectedCallback(){super.connectedCallback(),this.showMask&&(this._bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden")}firstUpdated(e){super.firstUpdated(e),this.linkInput&&this.linkInput.focus()}disconnectedCallback(){super.disconnectedCallback(),this.showMask&&(document.body.style.overflow=this._bodyOverflowStyle)}_hide(){this.dispatchEvent(new CustomEvent("updateLink",{detail:{type:"cancel"}}))}_onConfirm(){var r;if(this._disableConfirm)return;if(!this.linkInput)throw new Error("Failed to update link! Link input not found!");const e=qse(this.linkInput.value),t=((r=this.textInput)==null?void 0:r.value)??void 0;e&&this.dispatchEvent(wv("updateLink",{type:"confirm",link:e,text:t}))}_onCopy(e){navigator.clipboard.writeText(this.previewLink),Zh("Copied link to clipboard")}_onUnlink(e){this.dispatchEvent(wv("updateLink",{type:"remove"}))}_onLinkToCard(e){this.dispatchEvent(new CustomEvent("updateLink",{detail:{type:"toBookmark"}}))}_onEdit(e){this.dispatchEvent(wv("editLink",null)),this._disableConfirm=!1}_onInput(e){if(!this.linkInput)throw new Error("Failed to update link! Link input not found!");this._disableConfirm=!1}_onKeydown(e){e.key==="Enter"&&!e.isComposing&&(e.preventDefault(),this._onConfirm())}confirmBtnTemplate(){return rt`<icon-button
      class="affine-confirm-button"
      ?disabled=${this._disableConfirm}
      @click=${this._onConfirm}
      >${DJ}</icon-button
    >`}createLinkTemplate(){return rt`<div class="affine-link-popover">
      <input
        id="link-input"
        class="affine-link-popover-input"
        type="text"
        spellcheck="false"
        placeholder="Paste or type a link"
        value=${this.previewLink}
        @keydown=${this._onKeydown}
        @input=${this._onInput}
      />
      <span class="affine-link-popover-dividing-line"></span>
      ${this.confirmBtnTemplate()}
    </div>`}previewTemplate(){return rt`<div class="affine-link-popover">
      <div class="affine-link-preview has-tool-tip" @click=${this._onCopy}>
        <tool-tip inert role="tooltip">Click to copy link</tool-tip>
        <span style="overflow: hidden;">${this.previewLink}</span>
      </div>
      <span class="affine-link-popover-dividing-line"></span>
      ${this.showBookmarkOperation?rt`<icon-button
              class="has-tool-tip"
              data-testid="unlink"
              @click=${this._onLinkToCard}
            >
              ${BJ}
              <tool-tip inert role="tooltip">Turn into Card view</tool-tip>
            </icon-button>
            <span class="affine-link-popover-dividing-line"></span>`:""}
      <icon-button
        class="has-tool-tip"
        data-testid="unlink"
        @click=${this._onUnlink}
      >
        ${zJ}
        <tool-tip inert role="tooltip">Remove</tool-tip>
      </icon-button>

      <icon-button
        class="has-tool-tip"
        data-testid="edit"
        @click=${this._onEdit}
      >
        ${NJ}
        <tool-tip inert role="tooltip">Edit</tool-tip>
      </icon-button>
    </div>`}simpleTemplate(){return!this.previewLink?this.createLinkTemplate():this.previewTemplate()}editTemplate(){return rt`<div class="affine-link-edit-popover">
      <div class="affine-edit-text-area">
        <input
          class="affine-edit-text-input"
          id="text-input"
          type="text"
          placeholder="Enter text"
          value=${this.text}
          @keydown=${this._onKeydown}
        />
        <span class="affine-link-popover-dividing-line"></span>
        <label class="affine-edit-text-text" for="text-input">Text</label>
      </div>
      <div class="affine-edit-link-area">
        <input
          id="link-input"
          class="affine-edit-link-input"
          type="text"
          spellcheck="false"
          placeholder="Paste or type a link"
          value=${this.previewLink}
          @keydown=${this._onKeydown}
        />
        <span class="affine-link-popover-dividing-line"></span>
        <label class="affine-edit-link-text" for="link-input">Link</label>
      </div>
      ${this.confirmBtnTemplate()}
    </div>`}render(){const e=this.showMask?rt`<div class="overlay-mask" @click="${this._hide}"></div>`:rt``,t=this.type==="create"?this.simpleTemplate():this.editTemplate();return rt`
      <div class="overlay-root">
        ${e}
        <div
          class="popover-container"
          style="position: absolute; left: ${this.left}; top: ${this.top};${this.style.cssText}"
        >
          ${t}
        </div>
      </div>
    `}};Cl.styles=Yse;Ac([Ft()],Cl.prototype,"left",void 0);Ac([Ft()],Cl.prototype,"top",void 0);Ac([Ft()],Cl.prototype,"type",void 0);Ac([Ft()],Cl.prototype,"showMask",void 0);Ac([Ft()],Cl.prototype,"text",void 0);Ac([Ft()],Cl.prototype,"previewLink",void 0);Ac([Ft()],Cl.prototype,"showBookmarkOperation",void 0);Ac([Ar()],Cl.prototype,"_bodyOverflowStyle",void 0);Ac([Ar()],Cl.prototype,"_disableConfirm",void 0);Ac([Rr("#text-input")],Cl.prototype,"textInput",void 0);Ac([Rr("#link-input")],Cl.prototype,"linkInput",void 0);Ac([Rr(".popover-container")],Cl.prototype,"popoverContainer",void 0);Cl=Ac([lr("edit-link-panel")],Cl);function dz(n,e){var i;const t=e.getBoundingClientRect(),r=5,o=Lk({positioningPoint:{x:t.x,y:t.top+t.height+r},objRect:(i=n.popoverContainer)==null?void 0:i.getBoundingClientRect(),offsetY:r});n.left=`${o.x}px`,n.top=`${o.y}px`}function Jse(n,e,{showMask:t,previewLink:r,page:o}){const i=document.createElement("edit-link-panel");return i.showMask=t,i.previewLink=r,i.showBookmarkOperation=!!o.awarenessStore.getFlag("enable_bookmark_operation"),e.appendChild(i),requestAnimationFrame(()=>{dz(i,n)}),i}function Qse(n,e,t){let o;const i=p=>{clearTimeout(o)},a=p=>{o=window.setTimeout(()=>{t.abort()},300)},s=()=>{t.abort()};n.addEventListener("mouseover",i),n.addEventListener("mouseout",a),e.addEventListener("mouseover",i),e.addEventListener("mouseout",a);const l=Bl(n),d=Gd(l.page),u=d==null?void 0:d.viewportElement;return u==null||u.addEventListener("scroll",s),()=>{n.removeEventListener("mouseover",i),n.removeEventListener("mouseout",a),e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",a),u==null||u.removeEventListener("scroll",s)}}async function uz({anchorEl:n,page:e,container:t=document.body,text:r="",link:o="",showMask:i=!0,interactionKind:a="always",abortController:s=new AbortController}){if(xt(n,"Can't show tooltip without anchor element!"),s.signal.aborted)return Promise.resolve({type:"cancel"});const l=Jse(n,t,{showMask:i,previewLink:o,page:e}),d=a==="hover"?Qse(n,l,s):X9;return new Promise(u=>{s.signal.addEventListener("abort",()=>{l.remove(),u({type:"cancel"})}),l.addEventListener("editLink",p=>{s.signal.aborted||(l.type="edit",l.showMask=!0,l.text=r,d(),requestAnimationFrame(()=>{dz(l,n)}))}),l.addEventListener("updateLink",p=>{s.signal.aborted||(l.remove(),u(p.detail))})})}var Mx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Yg=class extends ua{get link(){var t;const e=(t=this.delta.attributes)==null?void 0:t.link;return e||""}constructor(){super(),this.delta={insert:Hu},this.popoverHoverOpenDelay=150,this._popoverTimer=0,this._isHovering=!1,this.addEventListener("mouseenter",this.onHover),this.addEventListener("mouseleave",this._onHoverEnd)}onHover(e){this._isHovering||(this._isHovering=!0,Bl(this).page.readonly)||(this._popoverTimer=window.setTimeout(()=>{this.onDelayHover(e).catch(r=>{console.warn("onDelayHover",r)})},this.popoverHoverOpenDelay))}async onDelayHover(e){if(!(e.target instanceof HTMLElement)||!document.contains(e.target))return;const t=Bl(this),r=this.delta.insert,o=await uz({anchorEl:e.target,page:t.page,text:r,link:this.link,showMask:!1,interactionKind:"hover"});if(o.type==="confirm"){const i=o.link,a=o.text,s=a!==r;this._updateLink(i,s?a:void 0);return}if(o.type==="remove"){this._updateLink();return}if(o.type==="toBookmark"){this._onConvertToBookmark();return}}_updateLink(e,t){const r=Bl(this),{page:o}=r,i=this.delta.insert,a=this.delta.attributes,s=this.querySelector('[data-virgo-text="true"]');xt(s);const l=Array.from(s.childNodes).find(f=>f instanceof Text);xt(l);const d=this.closest("rich-text");xt(d);const u=od.textPointToDomPoint(l,0,d.virgoContainer);xt(u);const p=d.vEditor;if(xt(p),e)t?(o.captureSync(),p.deleteText({index:u.index,length:l.length}),p.insertText({index:u.index,length:0},t),p.formatText({index:u.index,length:t.length},{link:e})):(o.captureSync(),p.formatText({index:u.index,length:i.length},{link:e}));else{o.captureSync();const f={...a};delete f.link,p.formatText({index:u.index,length:i.length},f,{mode:"replace"})}}_onConvertToBookmark(){const e=Bl(this),{page:t}=e,r=this.querySelector('[data-virgo-text="true"]');xt(r);const o=Array.from(r.childNodes).find(u=>u instanceof Text);xt(o);const i=this.closest("rich-text");xt(i);const a=od.textPointToDomPoint(o,0,i.virgoContainer);xt(a);const s=i.vEditor;xt(s);const l=t.getParent(e);xt(l);const d=l.children.indexOf(e);t.addBlock("affine:bookmark",{url:this.link,title:this.delta.insert},l,d+1),s.deleteText({index:a.index,length:o.length})}_onHoverEnd(e){this._isHovering=!1,clearTimeout(this._popoverTimer)}_onMouseUp(e){const t=this.querySelector("a");xt(t),t.isContentEditable&&(t.contentEditable="false",setTimeout(()=>{t.removeAttribute("contenteditable")},0))}_onClick(e){console.log("link click",this.link),this.link.startsWith("revezone://")&&e.preventDefault();const t=Bl(this),{page:r}=t;r.slots.linkClicked.emit(this.link)}render(){const e=this.delta.attributes?Yk(this.delta.attributes):Ur({});return rt`<a
      href=${this.link}
      rel="noopener noreferrer"
      target="_blank"
      style=${e}
      @mouseup=${this._onMouseUp}
      @click=${this._onClick}
      >${_J}<v-text .str=${this.delta.insert}></v-text
    ></a>`}};Yg.styles=vr`
    affine-link > a {
      white-space: nowrap;
      word-break: break-word;
      color: var(--affine-link-color);
      fill: var(--affine-link-color);
      text-decoration: none;
      cursor: pointer;
    }

    affine-link > a:hover [data-virgo-text='true'] {
      text-decoration: underline;
    }

    affine-link > a > v-text {
      white-space: break-spaces;
    }
  `;Mx([Ft({type:Object})],Yg.prototype,"delta",void 0);Mx([Ft()],Yg.prototype,"popoverHoverOpenDelay",void 0);Mx([Ar()],Yg.prototype,"_popoverTimer",void 0);Yg=Mx([lr("affine-link")],Yg);var ele=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let CC=class extends so{constructor(e){super(),this.rects=e}render(){return rt`
      ${this.rects.map(e=>rt`<div
          style="${Ur({position:"absolute",width:`${e.width}px`,height:`${e.height}px`,top:`${e.top}px`,left:`${e.left}px`,backgroundColor:"rgba(35, 131, 226, 0.28)"})}"
        ></div>`)}
    `}};CC=ele([lr("link-mock-selection")],CC);function tle(n){const e=Vi(n);if(!e)return;if(e.models.length>1)throw new Error("Can't create link with multiple blocks for now");const t=e.models[0];if(!t)return;const r=Cs(t);xt(r);const o={index:e.startOffset,length:e.endOffset-e.startOffset};if(o.length===0)return;if(r.getFormat(o).link){n.captureSync(),r.formatText(o,{link:null}),r.setVRange(o);return}const a=Pg(e);xt(a);const s=Array.from(a.getClientRects()),l=Wf(n);xt(l);const d=l.getBoundingClientRect(),u=new CC(s.map(f=>new DOMRect(f.left-d.left,f.top-d.top,f.width,f.height))),p=Wf(n);xt(p),p.appendChild(u),setTimeout(async()=>{var c;const f=await uz({anchorEl:(c=u.shadowRoot)==null?void 0:c.querySelector("div"),page:n});if(u.remove(),f.type!=="confirm")return;const h=f.link;n.captureSync(),r.formatText(o,{link:h}),r.setVRange(o)})}const Ix=[{id:"bold",name:"Bold",icon:yJ,hotkey:`${ki}+b`,activeWhen:n=>"bold"in n,showWhen:n=>F0(n),action:({page:n})=>{B2(n,"bold")}},{id:"italic",name:"Italic",icon:xJ,hotkey:`${ki}+i`,activeWhen:n=>"italic"in n,showWhen:n=>F0(n),action:({page:n})=>{B2(n,"italic")}},{id:"underline",name:"Underline",icon:wJ,hotkey:`${ki}+u`,activeWhen:n=>"underline"in n,showWhen:n=>F0(n),action:({page:n})=>{B2(n,"underline")}},{id:"strike",name:"Strikethrough",icon:CJ,hotkey:`${ki}+shift+s`,activeWhen:n=>"strike"in n,showWhen:n=>F0(n),action:({page:n})=>{B2(n,"strike")}},{id:"code",name:"Code",icon:SJ,hotkey:`${ki}+e`,activeWhen:n=>"code"in n,showWhen:n=>F0(n),action:({page:n})=>{B2(n,"code")}},{id:"link",name:"Link",icon:kJ,hotkey:`${ki}+k`,activeWhen:n=>"link"in n,showWhen:n=>n.length===1&&F0(n)&&!pv(n[0].page,!0).reference,action:({page:n,abortController:e,format:t})=>{tle(n),t&&e&&!("link"in t)&&e.abort()}}];function F0(n){return!n.every(e=>e.flavour==="affine:code")}function hz(n){n.readonly||(Ix.forEach(({hotkey:e,action:t})=>{Eo.addListener(e,r=>{r.preventDefault(),!n.awarenessStore.isReadonly(n)&&t({page:n})})}),Nz.forEach(({hotkey:e,action:t,enabledWhen:r})=>{e&&Eo.addListener(e,o=>{o.preventDefault(),r(n)&&(n.awarenessStore.isReadonly(n)||t({page:n}))})}),ku.forEach(({flavour:e,type:t,hotkey:r})=>{r&&Eo.addListener(r,()=>{const o=Vi(n);o&&Q6(o.models,e,t)})}),Eo.addListener(sa.UNDO,e=>{e.preventDefault(),n.canUndo&&kI(n),n.undo()}),Eo.addListener(sa.REDO,e=>{e.preventDefault(),n.canRedo&&kI(n),n.redo()}),Eo.addListener(sa.ANY_KEY,e=>{if(!cQ(e)||n.readonly)return;const t=Vi(n);if(!t)return;if(t.type==="Block"){Ece({page:n,keyboardEvent:e,selectedBlocks:t.models});return}const r=Pg(t);!r||!qQ(r)||j1(n)}))}function nle(){Eo.removeListener([...Ix.map(({hotkey:n})=>n),...ku.map(({hotkey:n})=>n).filter(n=>!!n),sa.UNDO,sa.REDO,sa.ANY_KEY])}function fz(n,e,{selection:t,zoom:r}={zoom:1}){const o=Vi(e);if(o){if(o.type==="Block"){if(!t){console.error("Failed to handle up: selection is not provided",o);return}const i=Bl(t.state.selectedBlocks[0]);t.clear();const a=Gd(e);xt(a),hv(i,a.lastSelectionPosition instanceof ho?a.lastSelectionPosition:"end"),n.preventDefault();return}if(o.type==="Native"){Rj(o.models.length,1,"Failed to handle up! range is not collapsed");const i=o.models[0],a=gx(i),s=Ba(),{left:l,top:d}=s.getBoundingClientRect();if(!a&&uk(e)){ck(e);return}if(l===0&&d===0){if(!(s.startContainer instanceof HTMLElement)){console.warn("Failed to calculate caret position! range.getBoundingClientRect() is zero and it's startContainer not an HTMLElement.",s),hv(i);return}const u=s.startContainer.getBoundingClientRect();hv(i,new ho(u.left,u.top),r);return}hv(i,new ho(l,d),r)}}}function pz(n,e,{selection:t,zoom:r}={zoom:1}){const o=Vi(e);if(o){if(o.type==="Block"){if(!t){console.error("Failed to handle down: selection is not provided",o);return}const i=t.state.selectedBlocks.at(-1);if(!i)throw new Error("Failed to handleDown! Can't find last selected element!");const a=Bl(i);t.clear();const s=Gd(e);xt(s),S3(a,s.lastSelectionPosition instanceof ho?s.lastSelectionPosition:"start"),n.preventDefault()}if(o.type==="Native"){Rj(o.models.length,1,"Failed to handle down! range is not collapsed");const i=o.models[0];if(Tr(i,["affine:code"])||Tr(i,["affine:page"]))return;const a=Ba(),s=wx(a),{left:l,bottom:d}=a.getBoundingClientRect();if(s||l===0&&d===0){const p=Nb(i);xt(p);const f=p.getBoundingClientRect();S3(i,new ho(f.left,f.top),r);return}S3(i,new ho(l,d),r)}}}function rle(n,e,t){const r=Vi(e);if(!r)return;n.preventDefault();const o=r.models;QN(e,o),r.type==="Block"&&requestAnimationFrame(()=>{t.refreshSelectedBlocksRectsByModels(o)})}function ole(n,e){const{BACKSPACE:t,SELECT_ALL:r,SHIFT_UP:o,SHIFT_DOWN:i,UP:a,DOWN:s,LEFT:l,RIGHT:d,ENTER:u,TAB:p,SPACE:f}=sa;hz(n),Eo.addListener(r,h=>{h.preventDefault(),_ce(e),e.state.type="block"}),!n.readonly&&(Eo.addListener(u,h=>{var v,w;const c=Vi(n);if(!c)return;if(c.type==="Block"){h.preventDefault();const _=c.models[c.models.length-1],k=n.getParent(_),y=k==null?void 0:k.children.indexOf(_);xt(y),xt(k);const S=n.addBlock("affine:paragraph",{type:"text"},k,y+1);za(n,S),e.clear();return}h.preventDefault();const g=c.models[0];(v=g.text)==null||v.delete(c.startOffset,g.text.length-c.startOffset);const m=c.models[c.models.length-1];(w=m.text)==null||w.delete(0,c.endOffset),c.models.slice(1,-1).forEach(_=>{n.deleteBlock(_)});const b=Cs(m);b==null||b.slots.updated.once(()=>{C1(m,"start")})}),Eo.addListener(t,h=>{j1(n),h.preventDefault()}),Eo.addListener(a,h=>{const c=Vi(n);if(!c)return;const g=n.getParent(c.models[0]);g&&Tr(g,["affine:database"])&&na("affine:database").getLastCellSelection()||fz(h,n,{selection:e})}),Eo.addListener(s,h=>{const c=Vi(n);if(!c)return;const g=n.getParent(c.models[0]);g&&Tr(g,["affine:database"])&&na("affine:database").getLastCellSelection()||pz(h,n,{selection:e})}),Eo.addListener(l,h=>{const c=Vi(n);if(c&&c.type!=="Block"){if(c.models.length>1){h.preventDefault();const g=getSelection();if(g){const m=c.nativeRange.cloneRange();m.collapse(!0),g.removeAllRanges(),g.addRange(m)}return}hv(c.models[0],"end")}}),Eo.addListener(d,h=>{const c=Vi(n);if(c&&!(Tr(c.models[0],["affine:database"])&&na("affine:database").getLastCellSelection())&&c.type!=="Block"){if(c.models.length>1){h.preventDefault();const g=getSelection();if(g){const m=c.nativeRange.cloneRange();m.collapse(!1),g.removeAllRanges(),g.addRange(m)}return}S3(c.models[0],"start")}}),Eo.addListener(p,h=>rle(h,n,e)),Eo.addListener(o,h=>{}),Eo.addListener(i,h=>{}),Eo.addListener(f,h=>{e.state.type==="block"&&h.preventDefault()}))}function ile(){nle(),Eo.removeListener([sa.BACKSPACE,sa.SELECT_ALL,sa.SHIFT_UP,sa.SHIFT_DOWN,sa.UP,sa.DOWN,sa.LEFT,sa.RIGHT,sa.ENTER,sa.TAB,sa.SPACE])}function Z0(n,e,t){if(!n.text)throw new Error("Can't insert text! Text not found");const r=Cs(n);if(!r)throw new Error("Can't insert text! vEditor not found");const o=r.getVRange(),i=o?o.index:n.text.length;n.text.insert(e,i,t),r.setVRange({index:i+e.length,length:0})}function J7(n){const e=n.getFullYear(),t=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0");return`${e}-${t}-${r}`}function z2(n){return ix(n.page,n,"affine:database")}const ale=[{name:"Text",items:[...ku.filter(n=>n.flavour!=="affine:list").map(({name:n,icon:e,flavour:t,type:r})=>({name:n,icon:e,showWhen:o=>o.page.schema.flavourSchemaMap.has(t)?["Quote","Code Block","Divider"].includes(n)?!z2(o):!0:!1,action:({model:o})=>{const i=Q6([o],t,r);if(t==="affine:code"){if(i.length!==1)throw new Error("Failed to reset selection! New model length isn't 1");const a=i[0];Bz(a,()=>{S1({type:"Native",startOffset:0,endOffset:0,models:[a]})})}}}))]},{name:"Style",items:Ix.filter(n=>!["Link","Code"].includes(n.name)).map(({name:n,icon:e,id:t})=>({name:n,icon:e,action:({model:r})=>{if(!r.text)return;const o=r.text.length;if(!o){const i=Cs(r);xt(i,"Can't set style mark! vEditor not found"),i.setMarks({[t]:!0}),aN(i);return}r.text.format(0,o,{[t]:!0})}}))},{name:"List",items:ku.filter(n=>n.flavour==="affine:list").map(({name:n,icon:e,flavour:t,type:r})=>({name:n,icon:e,showWhen:o=>!!o.page.schema.flavourSchemaMap.has(t),action:({model:o})=>Q6([o],t,r)}))},{name:"Pages",items:[{name:"New Page",icon:YJ,showWhen:n=>!!n.page.awarenessStore.getFlag("enable_linked_page"),action:({page:n,model:e})=>{const t=n.workspace.createPage({init:!0});Z0(e,Jv,{reference:{type:"LinkedPage",pageId:t.id}})}},{name:"Link Page",alias:["dual link"],icon:OR,showWhen:n=>!!n.page.awarenessStore.getFlag("enable_linked_page"),action:({model:n})=>{Z0(n,"@"),bC({model:n,range:Ba()})}}]},{name:"Content & Media",items:[{name:"Image",icon:Gq,showWhen:n=>!(!n.page.schema.flavourSchemaMap.has("affine:embed")||z2(n)),async action({page:n,model:e}){const t=n.getParent(e);if(!t)return;t.children.indexOf(e);const r=await P6(n);n.addSiblingBlocks(e,r)}},{name:"Bookmark",icon:sR,showWhen:n=>!n.page.awarenessStore.getFlag("enable_bookmark_operation")||!n.page.schema.flavourSchemaMap.has("affine:embed")?!1:!z2(n),async action({page:n,model:e}){const t=n.getParent(e);if(!t)return;const r=t.children.indexOf(e);C3(t,r+1)}}]},{name:"Date & Time",items:[{name:"Today",icon:PJ,action:({model:n})=>{Z0(n,J7(new Date))}},{name:"Tomorrow",icon:MJ,action:({model:n})=>{const e=new Date;e.setDate(e.getDate()+1),Z0(n,J7(e))}},{name:"Yesterday",icon:IJ,action:({model:n})=>{const e=new Date;e.setDate(e.getDate()-1),Z0(n,J7(e))}},{name:"Now",icon:TJ,action:({model:n})=>{const e=new Date;let t=e.getHours();const r=e.getMinutes().toString().padStart(2,"0"),o=t>=12?"pm":"am";t=t%12,t=t||12;const i=t+":"+r+" "+o;Z0(n,i)}}]},{name:"Database",items:[{name:"Table View",alias:["database"],icon:xm,showWhen:n=>!(!n.page.awarenessStore.getFlag("enable_database")||!n.page.schema.flavourSchemaMap.has("affine:database")||z2(n)),action:async({page:n,model:e})=>{const t=n.getParent(e);xt(t);const r=t.children.indexOf(e),o=n.addBlock("affine:database",{},n.getParent(e),r);(await L1("affine:database")).initDatabaseBlock(n,e,o,!1)}},{name:"Kanban View",alias:["database"],disabled:!0,icon:rk,showWhen:n=>!(!n.page.awarenessStore.getFlag("enable_database")||!n.page.schema.flavourSchemaMap.has("affine:database")||z2(n)),action:({model:n})=>{}}]},{name:"Actions",items:[{name:"Copy",icon:jb,action:async({model:n})=>{const e=Ba();await Hse(n),ts(e),Zh("Copied to clipboard")}},{name:"Duplicate",icon:EJ,action:({page:n,model:e})=>{if(!e.text||!(e.text instanceof jg))throw new Error("Can't duplicate a block without text");const t=n.getParent(e);if(!t)throw new Error("Failed to duplicate block! Parent not found");const r=t.children.indexOf(e);n.addBlock(e.flavour,{type:e.type,text:n.Text.fromDelta(Dz(n,e.text.toDelta())),checked:e.checked},n.getParent(e),r)}},{name:"Delete",icon:wm,action:({page:n,model:e})=>{n.deleteBlock(e)}}]}].map(n=>({name:n.name,items:n.items.map(e=>({...e,groupName:n.name}))})),sle=vr`
  .overlay-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: var(--affine-z-index-popover);
  }

  .slash-menu-container {
    z-index: var(--affine-z-index-popover);
    user-select: none;
  }

  .slash-menu {
    position: fixed;
    left: 0;
    top: 0;
    box-sizing: border-box;
    font-size: var(--affine-font-base);
    padding: 12px 0;
    display: flex;

    background: var(--affine-background-overlay-panel-color);
    box-shadow: var(--affine-shadow-2);
    border-radius: 12px;
    z-index: var(--affine-z-index-popover);
    /* transition: max-height 0.2s ease-in-out; */
  }

  .slash-category {
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
    width: 150px;
    max-width: 150px;
    display: flex;
    flex-direction: column;
    color: var(--affine-text-secondary-color);
    gap: 5px;
    margin-bottom: 20px;
    /* transition: max-width 0.2s ease-in-out; */
  }
  .slash-category::before {
    content: '';
    position: absolute;
    top: 10px;
    right: 0;
    height: 100%;
    width: 1px;
    background-color: var(--affine-border-color);
  }

  .slash-category-hide {
    max-width: 0;
    padding: 0;
    margin: 0;
    height: 0;
  }

  .slash-category-name {
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-sm);
    white-space: nowrap;
    cursor: pointer;
    padding: 4px 20px;
  }

  .slash-active-category {
    position: relative;
    box-sizing: border-box;
    color: var(--affine-primary-color);
  }

  .slash-active-category::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 1px;
    height: 12px;
    background: linear-gradient(
      180deg,
      var(--affine-text-emphasis-color) 0%,
      var(--affine-palette-purple) 100%
    );
    border-radius: 1px;
  }

  .slash-item-container {
    box-sizing: border-box;
    overflow-y: auto;
    padding: 0 8px;
    width: 200px;
  }

  ::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 4px;
  }
  ::-webkit-scrollbar-thumb {
    border-radius: 2px;
    background-color: #b1b1b1;
  }

  .slash-item-divider {
    border-top: 1px dashed var(--affine-border-color);
    margin: 8px 0;
  }

  format-bar-button svg {
    width: 20px;
    height: 20px;
  }
`;var pp=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function WT(n){return n.reduce((e,t)=>((!e.length||e[e.length-1]!==t.groupName)&&e.push(t.groupName),e),[])}let Kd=class extends ui(so){constructor(){super(...arguments),this._leftPanelActivated=!1,this._activatedItemIndex=0,this._filterItems=[],this._hide=!1,this._position=null,this.abortController=new AbortController,this._searchString="",this._onClickAway=e=>{this._hide&&this.abortController.abort()}}get menuGroups(){return ale}connectedCallback(){super.connectedCallback(),this._disposables.addFromEvent(window,"mousedown",this._onClickAway),this._disposables.addFromEvent(this,"mousedown",t=>{t.preventDefault()}),this._filterItems=this._updateItem("");const e=Nb(this.model);if(!e){console.warn("Slash Menu may not work properly! No rich text found for model",this.model);return}az({target:e,abortController:this.abortController,interceptor:(t,r)=>{if(t.key==="/")return;if(this._hide&&t.key!=="Backspace"){this.abortController.abort();return}if(t.key===" "){this._hide=!0,r();return}this._hide&&(this._hide=!1);const o=_6(t),i=t.shiftKey;if(t.key==="ArrowLeft"&&!o&&!i){if(t.stopPropagation(),t.preventDefault(),this._searchString.length)return;this._leftPanelActivated=!0;return}if(t.key==="ArrowRight"&&!o&&!i){t.stopPropagation(),t.preventDefault(),this._leftPanelActivated=!1;return}r()},onUpdateQuery:t=>{const r=this._updateItem(t);this._filterItems=r,r.length||(this._hide=!0)},onMove:t=>{const r=this._filterItems.length;if(this._leftPanelActivated){const i=WT(this._filterItems),a=i.findIndex(l=>l===this._filterItems[this._activatedItemIndex].groupName),s=i[(a+t+i.length)%i.length];this._handleClickCategory(s);return}let o=r;do this._activatedItemIndex=(this._activatedItemIndex+t+r)%r;while(this._filterItems[this._activatedItemIndex].disabled&&o--);this._scrollToItem(this._filterItems[this._activatedItemIndex],!1)},onConfirm:()=>{this._handleClickItem(this._activatedItemIndex)},onEsc:()=>{this.abortController.abort()}})}updatePosition(e){this._position=e}_updateItem(e){this._searchString=e,this._activatedItemIndex=0,this._leftPanelActivated&&(this._leftPanelActivated=!1);const t=this._searchString.toLowerCase();let r=this.menuGroups.flatMap(o=>o.items);return r=r.filter(({showWhen:o=()=>!0})=>o(this.model)),t?r.filter(({name:o,alias:i=[]})=>[o,...i].some(a=>HR(a,t))):r}_scrollToItem(e,t=!0){const r=this.shadowRoot;if(!r)return;const o=r.querySelector(`format-bar-button[text="${e.name}"]`);if(o){if(t){o.scrollIntoView(!0);return}o.scrollIntoView({block:"nearest"})}}_handleClickItem(e){if(this._leftPanelActivated||e<0||e>=this._filterItems.length)return;this.abortController.abort(this._searchString);const{action:t}=this._filterItems[e];t({page:this.model.page,model:this.model})}_handleClickCategory(e){const t=this._filterItems.find(r=>r.groupName===e);t&&(this._scrollToItem(t),this._activatedItemIndex=this._filterItems.findIndex(r=>r.name===t.name))}_categoryTemplate(){var o;const e=!this._searchString.length,t=(o=this._filterItems[this._activatedItemIndex])==null?void 0:o.groupName,r=WT(this._filterItems);return rt`<div
      class="slash-category ${e?"":"slash-category-hide"}"
    >
      ${r.map(i=>rt`<div
            class="slash-category-name ${t===i?"slash-active-category":""}"
            @click=${()=>this._handleClickCategory(i)}
          >
            ${i}
          </div>`)}
    </div>`}render(){if(this._hide)return Di;const e=408,t=344,r=!this._searchString.length,o=this._position?Ur({transform:`translate(${this._position.x}, ${this._position.y})`,maxHeight:`${Math.min(this._position.height,r?e:t)}px`}):Ur({visibility:"hidden"}),i=this._filterItems.map(({name:a,icon:s,disabled:l=!1,groupName:d},u)=>{const p=u!==0&&this._filterItems[u-1].groupName!==d;return rt`<div
            class="slash-item-divider"
            ?hidden=${!p||!!this._searchString.length}
          ></div>
          <format-bar-button
            ?disabled=${l}
            width="100%"
            style="padding-left: 12px; justify-content: flex-start;"
            ?hover=${!l&&!this._leftPanelActivated&&this._activatedItemIndex===u}
            text="${a}"
            data-testid="${a}"
            @mousemove=${()=>{this._leftPanelActivated=!1,this._activatedItemIndex=u}}
            @click=${()=>{this._handleClickItem(u)}}
          >
            ${s}
          </format-bar-button>`});return rt`<div class="slash-menu-container">
      <div
        class="overlay-mask"
        @click="${()=>this.abortController.abort()}"
      ></div>
      <div class="slash-menu" style="${o}">
        ${this._categoryTemplate()}
        <div class="slash-item-container">${i}</div>
      </div>
    </div>`}};Kd.styles=sle;pp([Ft()],Kd.prototype,"model",void 0);pp([Rr(".slash-menu")],Kd.prototype,"slashMenuElement",void 0);pp([Ar()],Kd.prototype,"_leftPanelActivated",void 0);pp([Ar()],Kd.prototype,"_activatedItemIndex",void 0);pp([Ar()],Kd.prototype,"_filterItems",void 0);pp([Ar()],Kd.prototype,"_hide",void 0);pp([Ar()],Kd.prototype,"_position",void 0);Kd=pp([lr("slash-menu")],Kd);let VT=new AbortController;function lle(n,e,t,r){if(e.remove(),window.removeEventListener("resize",t),!n.target||!(n.target instanceof AbortSignal))throw new Error("Failed to clean slash search text! Unknown abort event");if(n.target.reason instanceof DOMException)return;if(typeof n.target.reason!="string")throw new Error("Failed to clean slash search text! Unknown abort reason");const o="/"+n.target.reason,i=r.text;if(!i){console.warn("Failed to clean slash search text! No text found for model",r);return}const a=Cs(r);if(!a){console.warn("Failed to clean slash search text! No vEditor found for model, model:",r);return}const s=a.getVRange();xt(s);const l=s.index-o.length,d=i.toString().slice(l,l+o.length);if(d!==o){console.warn(`Failed to clean slash search text! Text mismatch expected: ${o} but actual: ${d}`);return}i.delete(l,o.length),a.setVRange({index:l,length:0})}function gz({model:n,range:e,container:t=document.body,abortController:r=new AbortController}){VT.abort(),VT=r;const o=new Kd;o.model=n,o.abortController=r;const i=ux(()=>{const a=o.slashMenuElement;xt(a,"You should render the slash menu node even if no position");const s=uN(a,e);o.updatePosition(s)},10);return window.addEventListener("resize",i),t.appendChild(o),setTimeout(i),r.signal.addEventListener("abort",a=>{lle(a,o,i,n)}),o}const cle=[{name:"parenthesis",left:"(",right:")"},{name:"square bracket",left:"[",right:"]"},{name:"curly bracket",left:"{",right:"}"},{name:"single quote",left:"'",right:"'"},{name:"double quote",left:'"',right:'"'},{name:"angle bracket",left:"<",right:">"},{name:"fullwidth single quote",left:"",right:""},{name:"fullwidth double quote",left:"",right:""},{name:"fullwidth parenthesis",left:"",right:""},{name:"fullwidth square bracket",left:"",right:""},{name:"fullwidth angle bracket",left:"",right:""},{name:"corner bracket",left:"",right:""},{name:"white corner bracket",left:"",right:""}];function dle(n){const e={};return cle.forEach(t=>{e[t.name]={key:t.left,shiftKey:null,collapsed:!1,handler(r){return n.text?(n.text.insert(t.left,r.index),n.text.insert(t.right,r.index+r.length+1),this.vEditor.setVRange({index:r.index+1,length:r.length}),ss):ja}}}),e.backtick={key:"`",collapsed:!1,handler(t,r){return n.text?(n.text.format(t.index,t.length,{code:!0}),this.vEditor.setVRange({index:t.index,length:t.length}),ss):ja}},e}function ule(n,e){const t=n.page;return{...na(n.flavour).defineKeymap(n,e),linkedPage:{key:["[","","@"],altKey:null,shiftKey:null,handler(a,{event:s,prefix:l}){return a.length>0?ja:(s.key==="["||s.key==="")&&!l.endsWith(s.key)?ja:t.awarenessStore.getFlag("enable_linked_page")?Tr(n,["affine:code"])?ja:(this.vEditor.slots.rangeUpdated.once(()=>{if(s.key==="["||s.key===""){this.vEditor.deleteText({index:a.index-1,length:2}),this.vEditor.insertText({index:a.index-1,length:0},"@"),this.vEditor.setVRange({index:a.index,length:0}),this.vEditor.slots.rangeUpdated.once(()=>{const p=Ba();bC({model:n,range:p})});return}const u=Ba();bC({model:n,range:u})}),ja):ja}},slash:{key:["/",""],shiftKey:null,handler(a,s){return t.awarenessStore.getFlag("enable_slash_menu")?Tr(n,["affine:code"])?ja:(this.vEditor.slots.rangeUpdated.once(()=>{const d=Ba();gz({model:n,range:d})}),ja):ja}},...dle(n)}}const hle=Lj||$j?"metaKey":"ctrlKey";function fle(n,e,t){const r={};function o(l){return l.shortKey&&(l[hle]=l.shortKey,delete l.shortKey),l}function i(l,d){return["altKey","ctrlKey","metaKey","shiftKey"].some(u=>!!d[u]!==l[u]&&d[u]!==null)?!1:d.key===l.key||d.key===l.which}function a(l){const d=o(l);(Array.isArray(d.key)?d.key:[d.key]).forEach(p=>{const f={...d,key:p};r[p]=r[p]??[],r[p].push(f)})}Object.values(e).forEach(l=>{a(l)});function s(l){const d=t.page.getParent(t),u=t.page.getPreviousSibling(t);if((d&&Tr(d,["affine:database"])||u&&Tr(u,["affine:database"]))&&l.key==="Tab"){l.preventDefault(),l.stopPropagation();return}if(l.defaultPrevented||l.isComposing)return;const f=(r[l.key]||[]).concat(r[l.which]||[]).filter(I=>i(l,I));if(f.length===0)return;const h=n.getVRange();if(!h||!Cm())return;const c=Ba();if(!c||!n.rootElement.contains(c.startContainer)||!n.rootElement.contains(c.endContainer))return;const[g,m]=n.getLine(h.index),[b,v]=n.getTextPoint(h.index),[w,_]=h.length===0?[b,v]:n.getTextPoint(h.index+h.length),k=b.textContent?b.textContent.slice(0,v):"",y=w.textContent?w.textContent.slice(_):"",S={collapsed:h.length===0,empty:h.length===0&&g.textLength<=1,format:n.getFormat(h),line:g,offset:m,prefix:k,suffix:y,event:l};f.some(I=>I.collapsed!=null&&I.collapsed!==S.collapsed||I.prefix!=null&&!I.prefix.test(S.prefix)||I.suffix!=null&&!I.suffix.test(S.suffix)?!1:!I.handler.call({vEditor:n,options:{bindings:e}},h,S))&&l.preventDefault()}return s}const mz=WR.extend({reference:Td.object({type:Td.enum(["Subpage","LinkedPage"]),pageId:Td.string()}).optional()});var Tx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const KT=["code","reference"],YT=(n,e)=>{var d,u,p;const t=n.getVRange();if(!t)return;if((d=e.attributes)!=null&&d.link&&e.data===" "){delete e.attributes.link;return}const r=/.*\.(com|cn|org|edu|net|gov|mil|info|biz|io|me)(\/\S*)?$/i;if((u=e.attributes)!=null&&u.link){const f=n.deltaService.getDeltasByVRange(t).filter(([w])=>{var _;return(_=w.attributes)==null?void 0:_.link})[0],[h,{index:c,length:g}]=f,m=t.index-c;if(((p=h.attributes)==null?void 0:p.link)!==h.insert){if(m===g){delete e.attributes.link;return}return}const b=h.insert.slice(0,m)+e.data+h.insert.slice(m);if(!r.exec(b)){n.resetText({index:c,length:g}),delete e.attributes.link;return}n.formatText({index:c,length:g},{link:b}),e.attributes={...e.attributes,link:b};return}const[o]=n.getLine(t.index),i=o.textContent.slice(0,t.index),a=r.exec(i+e.data);if(!a)return;const s=a[0],l=t.index-s.length;n.formatText({index:l,length:s.length},{link:s}),e.attributes={...e.attributes,link:s}};let Gg=class extends ua{constructor(){super(...arguments),this._vEditor=null,this._inlineSuggestController=new Kk(this)}get virgoContainer(){return this._virgoContainer}get vEditor(){return this._vEditor}firstUpdated(){xt(this.model.text,"rich-text need text to init."),this._vEditor=new od(this.model.text.yText,{active:()=>ca.isActive(this)}),Yb(this.model.page,this._vEditor);const e=this.textSchema;xt(e,"Failed to render rich-text! textSchema not found"),this._vEditor.setAttributeSchema(e.attributesSchema),this._vEditor.setAttributeRenderer(e.textRenderer());const t=ule(this.model,this._vEditor),r=fle(this._vEditor,t,this.model);let o=!1;this._vEditor.mount(this._virgoContainer),this._vEditor.bindHandlers({keydown:r,virgoInput:a=>{const s=this._vEditor;xt(s);const l=s.getVRange();if(!l||l.length!==0)return a;const{data:d,event:u}=a,p=s.getDeltasByVRange(l);if(u.inputType==="insertText"&&d===" "?o=!0:d!==". "&&d!==" "&&(o=!1),o&&(d===". "||d===" ")&&(a.data=" "),d&&d.length>0&&d!==`
`&&(p.length>1||p.length===1&&l.index!==0)){const{attributes:f}=p[0][0];(p.length!==1||l.index===s.yText.length)&&KT.forEach(h=>{f==null||delete f[h]}),a.attributes=f??null}return YT(s,a),a},virgoCompositionEnd:a=>{const s=this._vEditor;xt(s);const l=s.getVRange();if(!l||l.length!==0)return a;const{data:d}=a,u=s.getDeltasByVRange(l);if(d&&d.length>0&&d!==`
`&&(u.length>1||u.length===1&&l.index!==0)){const p=u[0][0].attributes;(u.length!==1||l.index===s.yText.length)&&KT.forEach(f=>{p==null||delete p[f]}),a.attributes=p??null}return YT(s,a),a}}),this._vEditor.setReadonly(this.model.page.readonly);const i=this.model.page.workspace.inlineSuggestionProvider;i&&this._inlineSuggestController.init({provider:i,model:this.model,vEditor:this._vEditor})}updated(){this._vEditor&&this._vEditor.setReadonly(this.model.page.readonly)}render(){return rt`<div
        class="affine-rich-text virgo-editor"
        @keydown=${this._inlineSuggestController.onKeyDown}
        @focusin=${this._inlineSuggestController.onFocusIn}
        @focusout=${this._inlineSuggestController.onFocusOut}
      ></div>
      ${this._inlineSuggestController.render()}`}};Gg.styles=vr`
    .affine-rich-text {
      height: 100%;
      width: 100%;
      outline: none;
      cursor: text;
    }

    v-line {
      scroll-margin-top: 50px;
      scroll-margin-bottom: 30px;
    }

    ${Kk.styles}
  `;Tx([Rr(".affine-rich-text")],Gg.prototype,"_virgoContainer",void 0);Tx([Ft()],Gg.prototype,"model",void 0);Tx([Ft()],Gg.prototype,"textSchema",void 0);Gg=Tx([lr("rich-text")],Gg);function ple({model:n,position:e,hoverState:t,wrap:r,onClickWrap:o}){const a=n.page.readonly,s={position:"fixed",left:e.x+"px",top:e.y+"px"};return rt`
    <style>
      .affine-codeblock-option-container > div {
          position: fixed;
          z-index: 1;
          box-shadow:var(--affine-shadow-2)
      }
      .affine-codeblock-option {
        box-shadow:var(--affine-shadow-2);
        padding:4px;
        border-radius:8px;
        background:var(--affine-background-overlay-panel-color)
      }

      ${hd}
    </style>

    <div
      class="affine-codeblock-option"
      style=${Ur(s)}
      @mouseover=${()=>t.emit(!0)}
      @mouseout=${()=>t.emit(!1)}
    >
      <format-bar-button
        class="has-tool-tip"
        data-testid="copy-button"
        @click=${()=>Wse(n)}
      >
        ${jb}
        <tool-tip inert tip-position="right" role="tooltip"
          >Copy to Clipboard</tool-tip
        >
      </format-bar-button>
      <format-bar-button
        class="has-tool-tip"
        data-testid="wrap-button"
        ?active=${r}
        @click=${o}
      >
        ${r?UJ:ZJ}
        <tool-tip inert tip-position="right" role="tooltip">Wrap code</tool-tip>
      </format-bar-button>
      ${a?"":rt`<format-bar-button
            data-testid="delete-button"
            class="has-tool-tip"
            @click=${()=>{a||n.page.deleteBlock(n)}}
          >
            ${wm}
            <tool-tip inert tip-position="right" role="tooltip"
              >Delete</tool-tip
            >
          </format-bar-button>`}
    </div>
  `}var qb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Xg=class extends ua{constructor(){super(...arguments),this._filterText="",this._currentSelectedIndex=0,this.delay=150,this._clickAwayListener=e=>{var t;(t=this.renderRoot.parentElement)!=null&&t.contains(e.target)||this.dispatchEvent(wv("dispose",null))}}static get styles(){return vr`
      lang-list {
        display: flex;
        flex-direction: column;
        position: absolute;
        background: var(--affine-background-overlay-panel-color);
        border-radius: 12px;
        top: 24px;
        z-index: 1;
      }

      .lang-list-container {
        box-shadow: var(--affine-menu-shadow);
        border-radius: 8px;
        padding: 12px 8px;
      }

      .lang-list-button-container {
        position: relative;
        overflow: scroll;
        height: 424px;
        width: 200px;
        padding-top: 5px;
        padding-left: 4px;
        padding-right: 4px;
        /*scrollbar-color: #fff0 #fff0;*/
      }

      /*
      .lang-list-button-container::-webkit-scrollbar {
        background: none;
      }
      */

      .lang-item {
        display: flex;
        justify-content: flex-start;
        padding-left: 12px;
        margin-bottom: 5px;
      }

      .input-wrapper {
        position: relative;
        display: flex;
        margin-top: 8px;
        margin-left: 4px;
      }

      #filter-input {
        display: flex;
        align-items: center;
        height: 32px;
        width: 192px;
        border: 1px solid var(--affine-border-color);
        border-radius: 8px;
        padding-left: 44px;
        padding-top: 4px;

        font-family: var(--affine-font-family);
        font-size: var(--affine-font-sm);
        box-sizing: border-box;
        color: inherit;
        background: var(--affine-background-overlay-panel-color);
      }

      #filter-input:focus {
        outline: none;
      }

      #filter-input::placeholder {
        color: var(--affine-placeholder-color);
        font-size: var(--affine-font-sm);
      }

      .search-icon {
        position: absolute;
        left: 8px;
        height: 100%;
        display: flex;
        align-items: center;
        fill: var(--affine-icon-color);
      }
    `}async connectedCallback(){super.connectedCallback(),document.addEventListener("click",this._clickAwayListener),setTimeout(()=>{var e;(e=this.filterInput)==null||e.focus()},0)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this._clickAwayListener)}_onLanguageClicked(e){this.dispatchEvent(wv("selected-language-changed",{language:(e==null?void 0:e.id)??null}))}render(){const e=[U9,...Gf].filter(r=>{var o;return this._filterText?r.id.startsWith(this._filterText.toLowerCase())||((o=r.aliases)==null?void 0:o.some(i=>i.startsWith(this._filterText.toLowerCase()))):!0}).sort((r,o)=>(DT[r.id]??1/0)-(DT[o.id]??1/0));return rt`
      <div class="lang-list-container">
        <div class="input-wrapper">
          <div class="search-icon">${RJ}</div>
          <input
            id="filter-input"
            type="text"
            placeholder="Search"
            @input="${()=>{var r;this._filterText=(r=this.filterInput)==null?void 0:r.value,this._currentSelectedIndex=0}}"
            @keydown="${r=>{if(r.key==="ArrowDown")r.preventDefault(),this._currentSelectedIndex=(this._currentSelectedIndex+1)%e.length;else if(r.key==="ArrowUp")r.preventDefault(),this._currentSelectedIndex=(this._currentSelectedIndex+e.length-1)%e.length;else if(r.key==="Enter"){if(r.preventDefault(),this._currentSelectedIndex===-1||this._currentSelectedIndex>=e.length)return;this._onLanguageClicked(e[this._currentSelectedIndex])}}}"
          />
        </div>
        <div class="lang-list-button-container">
          ${e.map((r,o)=>rt`
              <icon-button
                width="100%"
                height="32px"
                @click="${()=>this._onLanguageClicked(r)}"
                class="lang-item"
                ?hover=${o===this._currentSelectedIndex}
              >
                ${r.id[0].toUpperCase()+r.id.slice(1)}
              </icon-button>
            `)}
        </div>
      </div>
    `}};qb([Ar()],Xg.prototype,"_filterText",void 0);qb([Ar()],Xg.prototype,"_currentSelectedIndex",void 0);qb([Rr("#filter-input")],Xg.prototype,"filterInput",void 0);qb([Ft()],Xg.prototype,"delay",void 0);Xg=qb([lr("lang-list")],Xg);function vz(n){const e=n.closest("editor-container");return xt(e),e}function bz(n,e){return vz(n).themeObserver.on(e)}function gle(n,e){var r;return(r=vz(n).themeObserver.cssVariables)==null?void 0:r[e]}const _5="  ",E5=`
`,GT=(n,e,t=0,r=n.length)=>{const o=[];let i=t;for(;i<r;){const a=n.indexOf(e,i);if(a===-1||a>r)break;o.push(a),i=a+1}return o};class yz extends fd{setLang(e,t){const r=Fk(t),o=(r==null?void 0:r.id)??Nv;e.page.updateBlock(e,{language:o})}block2html(e,{childText:t="",begin:r,end:o}={}){const i=document.querySelector(`[${Ss}="${e.id}"] rich-text`);if(!i)return super.block2html(e,{childText:t,begin:r,end:o});const a=document.createElement("pre"),s=document.createElement("code");return a.setAttribute("code-lang",e.language),s.innerHTML=Array.from(i.querySelectorAll("v-line")).map(l=>l.textContent+`
`).join(""),a.append(s),a.outerHTML}async json2Block(e,t,r){var l;xt(r);const a=t.map(d=>d.text).map(d=>d==null?void 0:d.map(u=>u.insert).join("")).join(`
`);(l=e.text)==null||l.insert(a,r.startOffset);const s=Cs(e);xt(s),s.setVRange({index:r.startOffset+a.length,length:0})}defineKeymap(e,t){return{...super.defineKeymap(e,t),tab:{key:"Tab",handler(o,i){i.event.stopPropagation();const a=this.vEditor.yText.toString(),s=a.lastIndexOf(E5,o.index-1),l=GT(a,E5,o.index,o.index+o.length).map(d=>d+1).reverse();return s!==-1?l.push(s+1):l.push(0),l.forEach(d=>{this.vEditor.insertText({index:d,length:0},_5)}),this.vEditor.setVRange({index:o.index+2,length:o.length+(l.length-1)*_5.length}),ss}},shiftTab:{key:"Tab",shiftKey:!0,handler:function(o,i){i.event.stopPropagation();const a=this.vEditor.yText.toString(),s=a.lastIndexOf(E5,o.index-1);let l=GT(a,E5,o.index,o.index+o.length).map(d=>d+1).reverse();return s!==-1?l.push(s+1):l.push(0),l=l.filter(d=>a.slice(d,d+2)===_5),l.forEach(d=>{this.vEditor.deleteText({index:d,length:2})}),l.length>0&&this.vEditor.setVRange({index:o.index-(l[l.length-1]<o.index?2:0),length:o.length-(l.length-1)*_5.length}),ss}}}}}const mle=n=>e=>rt`<affine-code-line
    .delta=${e}
    .highlightOptionsGetter=${n}
  ></affine-code-line>`;var Ox=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let qg=class extends ql{constructor(){super(...arguments),this._showLangList=!1,this._optionPosition=null,this._wrap=!1,this.textSchema={attributesSchema:Td.object({}),textRenderer:()=>mle(()=>({lang:this.model.language.toLowerCase(),highlighter:this._highlighter}))},this._richTextResizeObserver=new ResizeObserver(()=>{this._updateLineNumbers()}),this._themeChangeObserver=null,this._preLang=null,this._highlighter=null,this.hoverState=new Yo}async _startHighlight(e){const t=vk();this._highlighter=await zae({theme:t==="dark"?W9:V9,themes:[V9,W9],langs:[e],paths:{wasm:"https://cdn.jsdelivr.net/npm/shiki/dist",themes:"https://cdn.jsdelivr.net/",languages:"https://cdn.jsdelivr.net/npm/shiki/languages"}});const r=this.querySelector("rich-text");xt(r);const o=r.vEditor;xt(o);const i=o.getVRange();o.requestUpdate(),i&&o.setVRange(i)}get readonly(){return this.model.page.readonly}connectedCallback(){super.connectedCallback(),pd("affine:code",yz),this._disposables.add(this.model.propsUpdated.on(()=>this.requestUpdate())),this._disposables.add(this.model.childrenUpdated.on(()=>this.requestUpdate()));const e=64,t=96;let r;const o=()=>{const s=this.getBoundingClientRect();this._optionPosition={x:s.right+12,y:Math.min(Math.max(s.top,e+12),s.bottom-t)}};this.hoverState.on(s=>{if(clearTimeout(r),s){o();return}r=window.setTimeout(()=>{this._optionPosition=null},i)}),this._disposables.addFromEvent(this,"mouseover",s=>{this.hoverState.emit(!0)});const i=300;this._disposables.addFromEvent(this,"mouseleave",s=>{this.hoverState.emit(!1)});const a=hk(this.model.page);a&&this._disposables.addFromEvent(a,"scroll",s=>{this._optionPosition&&o()})}disconnectedCallback(){var e;super.disconnectedCallback(),this.hoverState.dispose(),this._richTextResizeObserver.disconnect(),(e=this._themeChangeObserver)==null||e.dispose()}_onClickWrapBtn(){const e=this.querySelector(".affine-code-block-container");xt(e),this._wrap=e.classList.toggle("wrap")}firstUpdated(){if(this._themeChangeObserver=bz(this,async t=>{if(!this._highlighter)return;const r=this.querySelector("rich-text"),o=r==null?void 0:r.vEditor;o&&setTimeout(()=>{o.requestUpdate()})}),!this.model.language||this.model.language===Nv){this._highlighter=null;return}const e=Gf.find(t=>t.id===this.model.language.toLowerCase());if(!e){console.warn("Unexpected language: ",this.model.language);return}this._startHighlight(e)}updated(){if(this.model.language!==this._preLang){this._preLang=this.model.language;const t=Gf.find(i=>i.id===this.model.language.toLowerCase());t?this._highlighter?this._highlighter.getLoadedLanguages().includes(t.id)||this._highlighter.loadLanguage(t).then(()=>{const a=this.querySelector("rich-text"),s=a==null?void 0:a.vEditor;s&&s.requestUpdate()}):this._startHighlight(t):this._highlighter=null;const r=this.querySelector("rich-text"),o=r==null?void 0:r.vEditor;o&&o.requestUpdate()}const e=this.querySelector("rich-text");xt(e),this._richTextResizeObserver.disconnect(),this._richTextResizeObserver.observe(e)}_onClickLangBtn(){this.readonly||(this._showLangList=!this._showLangList)}_langListTemplate(){const e=this.model.language[0].toUpperCase()+this.model.language.slice(1);return rt`<div
      class="lang-list-wrapper"
      style="${this._showLangList?"visibility: visible;":""}"
    >
      <icon-button
        class="lang-button"
        data-testid="lang-button"
        width="auto"
        height="24px"
        ?hover=${this._showLangList}
        ?disabled=${this.readonly}
        @click=${this._onClickLangBtn}
      >
        ${e} ${this.readonly?rt``:Rb}
      </icon-button>
      ${this._showLangList?rt`<lang-list
            @selected-language-changed=${t=>{na("affine:code").setLang(this.model,t.detail.language),this._showLangList=!1}}
            @dispose=${()=>{this._showLangList=!1}}
          ></lang-list>`:""}
    </div>`}_codeOptionTemplate(){return this._optionPosition?rt`<affine-portal
      .template=${ple({model:this.model,position:this._optionPosition,hoverState:this.hoverState,wrap:this._wrap,onClickWrap:()=>this._onClickWrapBtn()})}
    ></affine-portal>`:""}_updateLineNumbers(){const e=this.querySelector("#line-numbers");xt(e);const t=this._wrap?vle():ble;Rv(Vs(Array.from(this.querySelectorAll("v-line")),t),e)}render(){return rt`<div class="affine-code-block-container">
        ${this._langListTemplate()}
        <div class="rich-text-container">
          <div id="line-numbers"></div>
          <rich-text .model=${this.model} .textSchema=${this.textSchema}>
          </rich-text>
        </div>
        ${this.content}
      </div>
      ${this._codeOptionTemplate()}`}};qg.styles=vr`
    code-block {
      position: relative;
      z-index: 1;
    }

    .affine-code-block-container {
      font-size: var(--affine-font-sm);
      line-height: var(--affine-line-height);
      position: relative;
      padding: 32px 0px 12px 0px;
      background: var(--affine-background-code-block);
      border-radius: 10px;
      margin-top: calc(var(--affine-paragraph-space) + 8px);
      margin-bottom: calc(var(--affine-paragraph-space) + 8px);
    }

    /* hover area */
    .affine-code-block-container::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 50px;
      height: 100%;
      transform: translateX(100%);
    }

    /* hover area */
    .affine-code-block-container::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 50px;
      height: 100%;
      transform: translateX(100%);
    }

    .affine-code-block-container .virgo-editor {
      font-family: var(--affine-font-code-family);
      font-variant-ligatures: none;
    }

    .affine-code-block-container .lang-list-wrapper {
      position: absolute;
      font-size: var(--affine-font-sm);
      line-height: var(--affine-line-height);
      top: 12px;
      left: 12px;
    }

    .affine-code-block-container > .lang-list-wrapper {
      visibility: hidden;
    }
    .affine-code-block-container:hover > .lang-list-wrapper {
      visibility: visible;
    }

    .affine-code-block-container > .lang-list-wrapper > .lang-button {
      display: flex;
      justify-content: flex-start;
      padding: 0 8px;
    }

    .affine-code-block-container rich-text {
      /* to make sure the resize observer can be triggered as expected */
      display: block;
      position: relative;
      width: 90%;
      overflow-x: auto;
      overflow-y: hidden;
      padding-bottom: 20px;
    }

    .affine-code-block-container .rich-text-container {
      position: relative;
      border-radius: 5px;
      padding: 4px 12px 4px 60px;
    }

    #line-numbers {
      position: absolute;
      text-align: right;
      left: 20px;
      line-height: var(--affine-line-height);
      color: var(--affine-text-secondary-color);
    }

    .affine-code-block-container .virgo-editor {
      width: 90%;
      margin: 0;
    }

    .affine-code-block-container affine-code-line span v-text {
      display: inline;
    }

    .affine-code-block-container affine-code-line span {
      white-space: pre;
    }

    .affine-code-block-container.wrap #line-numbers {
      top: calc(var(--affine-line-height) + 4px);
    }

    .affine-code-block-container.wrap #line-numbers > div {
      margin-top: calc(
        var(--top, 0) / var(--affine-zoom, 1) - var(--affine-line-height)
      );
    }

    .affine-code-block-container.wrap v-line > div {
      display: block;
    }

    .affine-code-block-container.wrap affine-code-line span {
      white-space: break-spaces;
    }

    .affine-code-block-container .virgo-editor::-webkit-scrollbar {
      display: none;
    }

    .code-block-option {
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
      list-style: none;
      padding: 4px;
      width: 40px;
      background-color: var(--affine-background-overlay-panel-color);
      margin: 0;
    }

    ${hd}
  `;Ox([Ar()],qg.prototype,"_showLangList",void 0);Ox([Ar()],qg.prototype,"_optionPosition",void 0);Ox([Ar()],qg.prototype,"_wrap",void 0);qg=Ox([lr("affine-code")],qg);function vle(n=0){return function(t,r){const o={"--top":`${n}px`};return n=t.getBoundingClientRect().height,rt`<div style=${Ur(o)}>${r+1}</div>`}}function ble(n,e){return rt`<div>${e+1}</div>`}var Xk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Jg=class extends ui(so){constructor(){super(...arguments),this.state=null,this.setSelection=e=>{this.state=e},this.clearSelection=()=>{this.state=null},this._getStyles=()=>{if(this.state===null)return Ur({left:0,top:0,height:0,width:0,display:"none"});const{databaseId:e,coords:t}=this.state,{left:r,top:o,width:i,height:a}=Ele(t,e),l=gp(e).getBoundingClientRect(),d=1/this._zoom,u=(r-l.left)*d,p=(o-l.top)*d,f=i*d,h=a*d;return Ur({left:`${u}px`,top:`${p}px`,height:`${h}px`,width:`${f}px`,display:"block"})}}get _zoom(){const e=document.querySelector("affine-edgeless-page");return e?e.surface.viewport.zoom:1}render(){const e=this._getStyles();return rt`<div
      class="database-cell-level-selection"
      style=${e}
    ></div>`}};Jg.styles=vr`
    .database-cell-level-selection {
      position: absolute;
      width: 100%;
      z-index: 1;
      box-sizing: border-box;
      border: 2px solid var(--affine-primary-color);
      border-radius: 2px;
      background: var(--affine-primary-color-04);
    }
  `;Xk([Ft()],Jg.prototype,"cell",void 0);Xk([Ar()],Jg.prototype,"state",void 0);Jg=Xk([lr("database-cell-level-selection")],Jg);var qk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Qg=class extends ui(so){constructor(){super(...arguments),this.state=null,this.setSelection=({databaseId:e,rowIds:t})=>{this.state={databaseId:e,rowIds:t}},this.clearSelection=()=>{this.state=null},this._getStyles=()=>{const e=Ur({left:0,top:0,height:0,display:"none"});if(!this.state)return e;const{rowIds:t}=this.state,{startRow:r,endRow:o}=yle(this.container,{startRowId:t[0],endRowId:t[t.length-1]});if(!r||!o)return e;const i=this.container.getBoundingClientRect(),{left:a,top:s}=r.getBoundingClientRect(),l=1/this._zoom,d=xle(this.container,t)*l,u=(a-i.left)*l,p=(s-i.top)*l;return Ur({left:`${u}px`,top:`${p}px`,height:`${d}px`})}}get _zoom(){const e=document.querySelector("affine-edgeless-page");return e?e.surface.viewport.zoom:1}render(){const e=this._getStyles();return rt`<div
      class="database-row-level-selection"
      style=${e}
    ></div>`}};Qg.styles=vr`
    .database-row-level-selection {
      position: absolute;
      z-index: 1;
      box-sizing: border-box;
      width: 100%;
      border: 2px solid var(--affine-primary-color);
      border-radius: 2px;
      background: var(--affine-primary-color-04);
    }
  `;qk([Ft()],Qg.prototype,"container",void 0);qk([Ar()],Qg.prototype,"state",void 0);Qg=qk([lr("database-row-level-selection")],Qg);function yle(n,{startRowId:e,endRowId:t}){const r=n.querySelector(`.database-row[data-row-id="${e}"]`),o=n.querySelector(`.database-row[data-row-id="${t}"]`);return{startRow:r,endRow:o}}function xle(n,e){return e.reduce((t,r)=>{const o=n.querySelector(`.database-row[data-row-id="${r}"]`);if(!o)return t;const{height:i}=o.getBoundingClientRect();return t+i},0)}function wle(){document.querySelectorAll("affine-database").forEach(e=>{const t=e.querySelector("database-row-level-selection");t==null||t.clearSelection()})}function Cle(n,e){const t=gp(n);let r=t.querySelector("database-row-level-selection");r||(r=new Qg,t.appendChild(r)),r.container=t,r.setSelection({databaseId:n,rowIds:e})}function Sle(n,e){const t=gp(n);Lle(t).setSelection({databaseId:n,coords:e}),Cz(e[0],n).scrollIntoView({block:"nearest"})}function kle(){document.querySelectorAll("affine-database").forEach(e=>{const t=e.querySelector("database-cell-level-selection");t==null||t.clearSelection()})}function _le(n,e){var a,s,l,d;const r=(a=Cz(e,n).firstElementChild)==null?void 0:a.firstElementChild;xt(r);let o=!0;const i=r==null?void 0:r.querySelector("rich-text");i?(s=i.vEditor)==null||s.focusEnd():r.cellType==="number"?(l=r.vEditor)==null||l.focusEnd():r.cellType==="rich-text"?(d=r.vEditor)==null||d.focusEnd():(r.cellType==="checkbox"&&(o=!1),r.click()),o&&$le(n)}function xz(n,e,t){const r=gp(e),o=Ax(r),i=o.length,a=o[0].length;let s=null;return n instanceof Element?(s=Ple(n,e),xt(s)):s=n,Mle(t,s,i,a)}function Ele(n,e){const t=gp(e),r=Ax(t),[o]=n,i=r[o.rowIndex][o.cellIndex];return{left:i.left,top:i.top,width:i.width,height:i.height}}function gp(n){const t=wz(n).querySelector(".affine-database-table-container");return xt(t),t}function wz(n){const e=document.querySelector(`affine-database[data-block-id="${n}"]`);return xt(e),e}function Ple(n,e){const t=gp(e),r=Ax(t);for(let o=0;o<r.length;o++){const i=r[o];for(let a=0;a<i.length;a++)if(i[a].cell===n)return{rowIndex:o,cellIndex:a}}return null}function Cz(n,e){const t=gp(e),r=Ax(t),{rowIndex:o,cellIndex:i}=n;return r[o][i].cell}function Ax(n){const e=[];return n.querySelectorAll(".affine-database-block-row").forEach((r,o)=>{r.querySelectorAll(".database-cell").forEach((a,s)=>{if(a.classList.contains("add-column-button"))return;const{left:l,top:d,height:u,width:p}=a.getBoundingClientRect();e[o]=e[o]??[],e[o][s]={left:l,top:d,height:u,width:p,cell:a}})}),e}function Mle(n,e,t,r){switch(n){case"Escape":return e;case"Tab":case"ArrowRight":return Ile(e,t,r);case"ArrowUp":return Ole(e);case"ArrowDown":return Ale(e,t);case"ArrowLeft":return Tle(e,r)}return e}function Ile(n,e,t){const r={rowIndex:0,cellIndex:0};return n.cellIndex!==t-1?(r.rowIndex=n.rowIndex,r.cellIndex=n.cellIndex+1,r):n.rowIndex!==e-1?(r.rowIndex=n.rowIndex+1,r.cellIndex=0,r):n}function Tle(n,e){const t={rowIndex:0,cellIndex:0};return n.cellIndex!==0?(t.rowIndex=n.rowIndex,t.cellIndex=n.cellIndex-1,t):n.rowIndex!==0?(t.rowIndex=n.rowIndex-1,t.cellIndex=e-1,t):n}function Ole(n){const e={rowIndex:0,cellIndex:0};return n.rowIndex!==0?(e.rowIndex=n.rowIndex-1,e.cellIndex=n.cellIndex,e):n}function Ale(n,e){const t={rowIndex:0,cellIndex:0};return n.rowIndex+1!==e?(t.rowIndex=n.rowIndex+1,t.cellIndex=n.cellIndex,t):n}function Lle(n){let e=n.querySelector("database-cell-level-selection");return e||(e=new Jg,n.appendChild(e)),e}function $le(n){const t=gp(n).querySelector("database-cell-level-selection");t==null||t.clearSelection()}function XT(n){var t;const e=(t=n.closest(".database-row"))==null?void 0:t.getAttribute("data-row-index");return e?Number(e):-1}function qT(n){var t;const e=(t=n.closest(".database-row"))==null?void 0:t.getAttribute("data-row-id");return e||""}function JT(n,e){return e.map(t=>Rle(n,t))}function jle(n,e){const t=XT(n),r=XT(e);if(t===-1||r===-1)return[];const o=Math.min(t,r),i=Math.max(t,r),a=[];for(let s=o;s<=i;s++)a.push(s);return a}function Sz(n){const e=n==null?void 0:n.closest("affine-database");return xt(e),e}function SC(n){const e=Sz(n).getAttribute("data-block-id");return xt(e),e}function Q7(n){return n.closest("affine-database")!==null}function Rle(n,e){var r;const t=(r=n.querySelector(`.database-row[data-row-index="${e}"]`))==null?void 0:r.getAttribute("data-row-id");return xt(t),t}class kz extends fd{constructor(){super(),this._lastRowSelection=null,this._lastCellSelection=null,this.slots={tableViewRowSelectionUpdated:new Yo,tableViewCellSelectionUpdated:new Yo},this.slots.tableViewRowSelectionUpdated.on(e=>{const{type:t}=e;if(t==="select"||t==="click"){const{rowIds:r,databaseId:o}=e;this._lastRowSelection={databaseId:o,rowIds:r},Cle(o,r)}else t==="clear"&&(this.clearLastRowSelection(),wle())}),this.slots.tableViewCellSelectionUpdated.on(e=>{const{type:t}=e;if(t==="select"){const{databaseId:r,coords:o}=e;this._lastCellSelection={databaseId:r,coords:o},Sle(r,o)}else if(t==="edit"){this._lastCellSelection=null;const{databaseId:r,coords:o}=e;_le(r,o[0])}else t==="clear"&&(this._lastCellSelection=null,kle())})}initDatabaseBlock(e,t,r,o=!0){for(let a=0;a<3;a++){const s=e.addBlock("affine:paragraph",{text:new e.Text("")},r);a===0&&za(e,s)}if(o){const a=e.getParent(t);xt(a),e.addBlock("affine:paragraph",{},a.id)}const i=e.getBlockById(r);xt(i),i.updateColumn({name:"Tag",type:"multi-select",width:200,hide:!1,selection:[]}),i.applyColumnUpdate()}block2Json(e,t,r){var a;const o=[...e.columns],i=e.children.map(s=>s.id);return{flavour:e.flavour,databaseProps:{id:e.id,title:e.title.toString(),titleColumnName:e.titleColumnName,titleColumnWidth:e.titleColumnWidth,rowIds:i,cells:e.cells,columns:o},children:(a=e.children)==null?void 0:a.map((s,l)=>l===e.children.length-1?na(s.flavour).block2Json(s,0,r):na(s.flavour).block2Json(s))}}async onBlockPasted(e,t){const{rowIds:r,columns:o,cells:i}=t,a=o.map(d=>d.id),s=o.map(d=>{const{id:u,...p}=d;return e.updateColumn(p)});e.applyColumnUpdate();const l=e.children.map(d=>d.id);r.forEach((d,u)=>{const p=l[u];a.forEach((f,h)=>{var m;const c=(m=i[d])==null?void 0:m[f],g=c==null?void 0:c.value;g&&e.updateCell(p,{columnId:s[h],value:g})})})}clearSelection(){this.clearRowSelection(),this.clearCellLevelSelection()}clearRowSelection(){this.slots.tableViewRowSelectionUpdated.emit({type:"clear"})}setRowSelection(e){var t,r;if(e.type==="click"&&this._lastRowSelection&&((t=e.rowIds)==null?void 0:t[0])===((r=this._lastRowSelection.rowIds)==null?void 0:r[0])){this.clearRowSelection();return}this.slots.tableViewRowSelectionUpdated.emit(e)}setRowSelectionByElement(e){const t=qT(e);if(t!==""){const r=SC(e);this.setRowSelection({type:"select",databaseId:r,rowIds:[t]})}}clearLastRowSelection(){this._lastRowSelection=null}refreshRowSelection(){if(!this._lastRowSelection)return;const{databaseId:e,rowIds:t}=this._lastRowSelection;this.setRowSelection({type:"select",databaseId:e,rowIds:t})}toggleRowSelection(e){var o;const t=qT(e);return t===""?!1:((((o=this._lastRowSelection)==null?void 0:o.rowIds)??[]).indexOf(t)>-1?this.clearRowSelection():this.setRowSelection({type:"click",databaseId:SC(e),rowIds:[t]}),!0)}getLastRowSelection(){return this._lastRowSelection}clearCellLevelSelection(){this.slots.tableViewCellSelectionUpdated.emit({type:"clear"})}setCellSelection(e){this.slots.tableViewCellSelectionUpdated.emit(e)}getLastCellSelection(){return this._lastCellSelection}}class _z extends fd{block2html(e,{childText:t="",begin:r,end:o}={}){return"<hr/>"}}var Dle=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let kC=class extends ql{connectedCallback(){super.connectedCallback(),pd("affine:divider",_z)}firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){const e=rt`<div
      class="affine-block-children-container"
      style="padding-left: ${Dv}px"
    >
      ${this.content}
    </div>`;return rt`
      <div class=${"affine-divider-block-container"}>
        <hr />
        ${e}
      </div>
    `}};kC.styles=vr`
    .affine-divider-block-container {
      width: 100%;
      height: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      margin-top: calc(var(--affine-paragraph-space) + 8px);
      margin-bottom: calc(var(--affine-paragraph-space) + 8px);
    }
    hr {
      width: 100%;
    }
  `;kC=Dle([lr("affine-divider")],kC);class Ez extends fd{block2html(e,{childText:t="",begin:r,end:o}={}){return`<figure><img src="${e.sourceId}" alt="${e.caption}"><figcaption>${e.caption}</figcaption></figure>`}block2Text(e,{childText:t="",begin:r,end:o}={}){return e.caption}block2Json(e,t,r){return{type:e.type,sourceId:e.sourceId,width:e.width,height:e.height,caption:e.caption,flavour:e.flavour,children:[]}}}var Jk=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let eb=class extends ql{connectedCallback(){super.connectedCallback(),pd("affine:embed",Ez)}firstUpdated(e){super.firstUpdated(e),this.updateComplete.then(()=>{var t;this._caption=((t=this.model)==null?void 0:t.caption)??"",this._caption.length>0&&this._input.classList.add("caption-show")}),this.addEventListener("click",()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()})}_onInputChange(){this._caption=this._input.value,this.model.page.updateBlock(this.model,{caption:this._caption})}_onInputBlur(){this._caption||this._input.classList.remove("caption-show")}render(){const e=this.model.type==="image"?rt`<affine-image .model=${this.model}></affine-image>`:Di;return rt`
      ${e}
      <div class="affine-embed-block-container">
        <div class="affine-embed-wrapper">
          <input
            .disabled=${this.model.page.readonly}
            placeholder="Write a caption"
            class="affine-embed-wrapper-caption"
            value=${this._caption}
            @input=${this._onInputChange}
            @blur=${this._onInputBlur}
            @click=${t=>{t.stopPropagation()}}
          />
        </div>
      </div>
    `}};eb.styles=vr`
    affine-embed {
      display: block;
    }
    .affine-embed-wrapper {
      text-align: center;
      margin-bottom: calc(var(--affine-paragraph-space) + 8px);
    }
    .affine-embed-wrapper-caption {
      width: 100%;
      font-size: var(--affine-font-sm);
      outline: none;
      border: 0;
      font-family: inherit;
      text-align: center;
      color: var(--affine-icon-color);
      display: none;
      background: var(--affine-background-primary-color);
    }
    .affine-embed-wrapper-caption::placeholder {
      color: var(--affine-placeholder-color);
    }

    .affine-embed-wrapper .caption-show {
      display: inline-block;
    }
  `;Jk([Rr("input")],eb.prototype,"_input",void 0);Jk([Ar()],eb.prototype,"_caption",void 0);eb=Jk([lr("affine-embed")],eb);var Nle=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const zle="affine-image-block-circle-loading";let _C=class extends ua{render(){return rt`<div class="affine-image-block-container">
      <div class="affine-image-block-loading"></div>
    </div>`}};_C.styles=vr`
    @keyframes affine-image-block-rotate {
      from {
        rotate: 0deg;
      }
      to {
        rotate: 360deg;
      }
    }

    .affine-image-block-container {
      width: 24px;
      height: 24px;
      overflow: hidden;
    }

    .affine-image-block-loading {
      display: inline-block;
      width: 24px;
      height: 24px;
      position: relative;
      background: conic-gradient(rgba(255, 255, 255, 0.31), #6880ff);
      border-radius: 50%;
      animation: affine-image-block-rotate 1s infinite ease-in;
    }

    .affine-image-block-loading::before {
      content: '';
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background-color: white;
      position: absolute;
      top: 2px;
      left: 2px;
    }
  `;_C=Nle([lr(zle)],_C);var Pz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Ble="affine-image-block-loading-card";let q6=class extends ua{constructor(){super(...arguments),this.content="Loading content..."}render(){return rt`
      <div class="affine-image-block-loading-card">
        <affine-image-block-circle-loading></affine-image-block-circle-loading>
        <div class="affine-image-block-content">${this.content}</div>
      </div>
    `}};q6.styles=vr`
    .affine-image-block-loading-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      margin: 0 auto;
      border: 1px solid #ebeeff;
      border-radius: 10px;
      background: #fbfbff;
    }

    .affine-image-block-content {
      height: 30px;
      line-height: 22px;
      padding-top: 8px;
      color: var(--affine-primary-color);
      font-size: 16px;
      font-weight: 400;
    }
  `;Pz([Ft()],q6.prototype,"content",void 0);q6=Pz([lr(Ble)],q6);var Hle=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Fle=rt`<svg
  width="25"
  height="24"
  viewBox="0 0 25 24"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M14.5 3H8.3C6.61984 3 5.77976 3 5.13803 3.32698C4.57354 3.6146 4.1146 4.07354 3.82698 4.63803C3.5 5.27976 3.5 6.11984 3.5 7.8V16.2C3.5 17.8802 3.5 18.7202 3.82698 19.362C4.1146 19.9265 4.57354 20.3854 5.13803 20.673C5.77976 21 6.61984 21 8.3 21H12.5L15.5 18L11.5 14L12.8418 12.6582C12.8197 12.6391 12.7979 12.6205 12.7762 12.6022C12.4696 12.3444 12.1366 12.1162 11.7278 11.987C11.1185 11.7945 10.4637 11.8016 9.85866 12.0072C9.45274 12.1452 9.12474 12.3806 8.82383 12.645C8.82383 12.645 6.60291 14.8415 5.5 15.9308V6.6C5.5 6.03995 5.5 5.75992 5.60899 5.54601C5.70487 5.35785 5.85785 5.20487 6.04601 5.10899C6.25992 5 6.53995 5 7.1 5H12.5L14.5 3ZM13.304 7.80408C13.1102 8.15931 13 8.56677 13 9C13 9.94759 13.5271 10.7719 14.3041 11.1959L15.5 10L13.304 7.80408ZM15.4156 11.4986L16.9142 10L13.9514 7.03724C14.3773 6.7008 14.9152 6.5 15.5 6.5C16.8806 6.5 18 7.61914 18 9C18 10.3809 16.8806 11.5 15.5 11.5C15.4718 11.5 15.4437 11.4995 15.4156 11.4986ZM13.5691 13.3451C13.6352 13.4103 13.7029 13.4775 13.7724 13.5464L14.7645 14.5302C15.0059 14.2937 15.2246 14.0861 15.4261 13.9167C15.7329 13.6587 16.0663 13.4302 16.4756 13.3011C17.0855 13.1087 17.7409 13.1162 18.3463 13.3226C18.7524 13.4611 19.0805 13.6971 19.3813 13.9622C19.4202 13.9965 19.4598 14.0322 19.5 14.0694V6.6C19.5 6.03995 19.5 5.75992 19.391 5.54601C19.2951 5.35785 19.1422 5.20487 18.954 5.10899C18.7401 5 18.4601 5 17.9 5H13.9143L15.9143 3H16.7C18.3802 3 19.2202 3 19.862 3.32698C20.4265 3.6146 20.8854 4.07354 21.173 4.63803C21.5 5.27976 21.5 6.11984 21.5 7.8V16.2C21.5 17.8802 21.5 18.7202 21.173 19.362C20.8854 19.9265 20.4265 20.3854 19.862 20.673C19.2202 21 18.3802 21 16.7 21H13.9143L16.9142 18L12.9142 14L13.5691 13.3451Z"
    fill="#6880FF"
  />
</svg>`,Zle="affine-image-block-not-found-card";let EC=class extends ua{render(){return rt`
      <div class="affine-image-block-not-found-card">${Fle}</div>
    `}};EC.styles=vr`
    .affine-image-block-not-found-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      margin: 0 auto;
      border: 1px solid var(--affine-border-color);
      border-radius: 10px;
      background: var(--affine-background-primary-color);
    }
  `;EC=Hle([lr(Zle)],EC);var Jb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i},PC;let Xf=PC=class extends ui(ua){constructor(){super(...arguments),this._imageReady={dispose:()=>{}},this._imageState="loading",this._retryCount=0,this._fetchError=e=>{this._imageState="waitUploaded",this._retryCount++,console.warn("Cannot find blob, retrying",this._retryCount),this._retryCount<PC.maxRetryCount?setTimeout(()=>{this._fetchImage()},1e3*this._retryCount):(console.error(e),this._imageState="failed")},this._fetchImage=()=>{if(this._imageState==="ready")return;this.model.page.blobs.get(this.model.sourceId).then(t=>{t?(this._source=URL.createObjectURL(t),this._imageState="ready"):this._fetchError(new Error("Cannot find blob"))}).catch(this._fetchError)}}async firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate());const{width:e,height:t}=this.model;e&&t&&(this.resizeImg.style.width=e+"px",this.resizeImg.style.height=t+"px")}connectedCallback(){super.connectedCallback(),this._imageState="loading",this._fetchImage(),this._disposables.add(this.model.page.workspace.slots.blobUpdate.on(this._fetchImage))}disconnectedCallback(){this._imageReady.dispose(),this._source&&URL.revokeObjectURL(this._source),super.disconnectedCallback()}render(){const e={width:"unset",height:"unset"},{width:t,height:r}=this.model;t&&r&&(e.width=`${t}px`,e.height=`${r}px`);const o={waitUploaded:rt`<affine-image-block-loading-card
        content="Delivering content..."
      ></affine-image-block-loading-card>`,loading:rt`<affine-image-block-loading-card
        content="Loading content..."
      ></affine-image-block-loading-card>`,ready:rt`<img src=${this._source} />`,failed:rt`<affine-image-block-not-found-card></affine-image-block-not-found-card>`}[this._imageState];return rt`
      <div class="affine-image-wrapper">
        <div class="resizable-img" style=${Ur(e)}>
          ${o}
        </div>
      </div>
    `}};Xf.styles=vr`
    .affine-image-wrapper {
      padding: 8px;
      width: 100%;
      text-align: center;
      line-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-top: calc(var(--affine-paragraph-space) + 8px);
      overflow: hidden;
    }
    .affine-image-wrapper img {
      max-width: 100%;
      margin: auto;
      width: 100%;
    }

    .resizable {
      max-width: 100%;
    }

    .active .resizable {
      border: 1px solid var(--affine-primary-color) !important;
    }
    .resizable .image-option-container {
      display: none;
      position: absolute;
      top: 4px;
      right: -52px;
      margin: 0;
      padding-left: 12px;
    }

    .embed-editing-state {
      box-shadow: var(--affine-shadow-2);
      border-radius: 10px;
      list-style: none;
      padding: 4px;
      width: 40px;
      background-color: var(--affine-background-overlay-panel-color);
      margin: 0;
    }

    .resizable .resizes {
      /* width: 100%; */
      height: 100%;
      box-sizing: border-box;
      line-height: 0;
    }

    .resizable .resizes .resize {
      /* display: none; */
      width: 10px;
      height: 10px;
      border-radius: 50%; /*magic to turn square into circle*/
      background: white;
      border: 2px solid var(--affine-primary-color);
      position: absolute;
    }

    .resizable:hover .resize {
      display: block;
    }
    .active .resize {
      display: block !important;
    }
    .resizable .resizes .resize.top-left {
      left: -5px;
      top: -5px;
      cursor: nwse-resize; /*resizer cursor*/
    }
    .resizable .resizes .resize.top-right {
      right: -5px;
      top: -5px;
      cursor: nesw-resize;
    }
    .resizable .resizes .resize.bottom-left {
      left: -5px;
      bottom: -5px;
      cursor: nesw-resize;
    }
    .resizable .resizes .resize.bottom-right {
      right: -5px;
      bottom: -5px;
      cursor: nwse-resize;
    }

    .resizable-img {
      border: 1px solid var(--affine-white-90);
    }
    .resizable-img:hover {
      border: 1px solid var(--affine-primary-color);
    }

    .resizable-img img {
      width: 100%;
    }
  `;Xf.maxRetryCount=3;Jb([Ft()],Xf.prototype,"model",void 0);Jb([Rr(".resizable-img")],Xf.prototype,"resizeImg",void 0);Jb([Ar()],Xf.prototype,"_source",void 0);Jb([Ar()],Xf.prototype,"_imageState",void 0);Xf=PC=Jb([lr("affine-image")],Xf);class Mz extends fd{async json2Block(e,t){await t1(e.page,t,e,0)}block2Json(e,t,r){var i,a;const o=((i=e.text)==null?void 0:i.sliceToDelta(t||0,r))||[];return{flavour:e.flavour,type:e.type,text:o,xywh:e.xywh,background:e.background,children:(a=e.children)==null?void 0:a.map((s,l)=>l===e.children.length-1?na(s.flavour).block2Json(s,0,r):na(s.flavour).block2Json(s))}}}var Ule=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let MC=class extends ql{connectedCallback(){super.connectedCallback(),pd("affine:frame",Mz)}firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){return rt`
      <div class="affine-frame-block-container">
        <div class="affine-block-children-container">${this.content}</div>
      </div>
    `}};MC.styles=vr`
    .affine-frame-block-container {
      display: flow-root;
    }
    .affine-frame-block-container.selected {
      background-color: var(--affine-hover-color);
    }
  `;MC=Ule([lr("affine-frame")],MC);const Iz=()=>n=>{const e=rt`<affine-text .delta=${n}></affine-text>`;if(!n.attributes)return e;const t=n.attributes;return t.link?(t.reference&&console.error("Invalid attributes: link and reference cannot be used together",n),rt`<affine-link .delta=${n}></affine-link>`):t.reference?rt`${Vs(Array.from(n.insert).map((r,o)=>({delta:{insert:Jv,attributes:t},index:o})),r=>r.index,r=>rt`<affine-reference .delta=${r.delta}></affine-reference>`)}`:e};class Tz extends fd{block2html(e,{childText:t="",begin:r,end:o}={}){let i=super.block2html(e,{childText:t,begin:r,end:o});const a=e.page.getPreviousSibling(e),s=e.page.getNextSibling(e);switch(e.type){case"bulleted":case"toggle":i=`<li>${i}</li>`;break;case"numbered":i=`<li>${i}</li>`;break;case"todo":i=`<li><input disabled type="checkbox" ${e.checked?"checked":""}>${i}</li>`;break}if((a==null?void 0:a.flavour)!==e.flavour||a.type!==e.type)switch(e.type){case"bulleted":case"toggle":case"todo":i=`<ul>${i}`;break;case"numbered":i=`<ol>${i}`;break}if((s==null?void 0:s.flavour)!==e.flavour||s.type!==e.type)switch(e.type){case"bulleted":case"toggle":case"todo":i=`${i}</ul>`;break;case"numbered":i=`${i}</ol>`;break}return i}async json2Block(e,t,r){const o=t[0].flavour!=="affine:list";return Vk(e,t,{range:r,convertToPastedIfEmpty:o})}}function Wle(n){let o="";for(;n>=0;)o=String.fromCharCode(n%26+97)+o,n=Math.floor(n/26)-1;return o}function Vle(n){const e={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};let t="";for(const r in e)for(;n>=e[r];)t+=r,n-=e[r];return t}function Kle(n,e){const t=[()=>e+1,Wle,()=>Vle(e+1)];return t[n%t.length](e)}function Yle(n,e){return`${Kle(e,n)} .`}const Gle=()=>rt`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <circle cx="12" cy="12" r="2" />
    </svg>
  `,Xle=()=>rt`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"
      />
    </svg>
  `,qle=()=>rt`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path
        d="M11.6056 10.1634C11.8234 9.94555 12.1766 9.94555 12.3944 10.1634L13.8366 11.6056C14.0545 11.8234 14.0545 12.1766 13.8366 12.3944L12.3944 13.8366C12.1766 14.0545 11.8234 14.0545 11.6056 13.8366L10.1634 12.3944C9.94555 12.1766 9.94555 11.8234 10.1634 11.6056L11.6056 10.1634Z"
      />
    </svg>
  `,Jle=()=>rt`
    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M13.4422 12L12 10.5578L10.5578 12L12 13.4422L13.4422 12ZM12.3944 10.1634C12.1766 9.94555 11.8234 9.94555 11.6056 10.1634L10.1634 11.6056C9.94555 11.8234 9.94555 12.1766 10.1634 12.3944L11.6056 13.8366C11.8234 14.0545 12.1766 14.0545 12.3944 13.8366L13.8366 12.3944C14.0545 12.1766 14.0545 11.8234 13.8366 11.6056L12.3944 10.1634Z"
        fill="#7389FD"
      />
    </svg>
  `,Qle=(n=!0)=>rt`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      data-is-toggle-icon="true"
      width="1em"
      height="1em"
      viewBox="0 0 20 20"
    >
      <path
        data-is-toggle-icon="true"
        fill="currentColor"
        opacity="${n?"1":"0.6"}"
        d="m15.795 11.272l-8 5A1.5 1.5 0 0 1 5.5 15V5a1.5 1.5 0 0 1 2.295-1.272l8 5a1.5 1.5 0 0 1 0 2.544Z"
      />
    </svg>
  `,ece=()=>rt`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      data-is-toggle-icon="true"
      width="1em"
      height="1em"
      viewBox="0 0 20 20"
      @mousedown="${n=>{}}"
    >
      <path
        data-is-toggle-icon="true"
        fill="currentColor"
        d="m8.728 15.795l-5-8A1.5 1.5 0 0 1 5 5.5h10a1.5 1.5 0 0 1 1.272 2.295l-5 8a1.5 1.5 0 0 1-2.544 0Z"
      />
    </svg>
  `,Oz=()=>rt`
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7 4C5.34315 4 4 5.34315 4 7V17C4 18.6569 5.34315 20 7 20H17C18.6569 20 20 18.6569 20 17V7C20 5.34315 18.6569 4 17 4H7ZM17.5665 9.56473C17.8785 9.25181 17.8776 8.74528 17.5647 8.43336C17.2518 8.12144 16.7453 8.12225 16.4334 8.43517L10.3547 14.5333L7.56666 11.7352C7.2548 11.4222 6.74827 11.4213 6.43529 11.7331C6.1223 12.045 6.12139 12.5515 6.43325 12.8645L9.64626 16.0891C10.037 16.4813 10.672 16.4814 11.0629 16.0893L17.5665 9.56473Z"
        fill="#A6ABB7"
      />
    </svg>
  `,Az=()=>rt`
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M17 5.6H7C6.2268 5.6 5.6 6.2268 5.6 7V17C5.6 17.7732 6.2268 18.4 7 18.4H17C17.7732 18.4 18.4 17.7732 18.4 17V7C18.4 6.2268 17.7732 5.6 17 5.6ZM7 4C5.34315 4 4 5.34315 4 7V17C4 18.6569 5.34315 20 7 20H17C18.6569 20 20 18.6569 20 17V7C20 5.34315 18.6569 4 17 4H7Z"
        fill="#A6ABB7"
      />
    </svg>
  `,QT=[Gle(),Xle(),qle(),Jle()];function tce(n,e,t,r,o){const i=(()=>{switch(n.type){case"bulleted":return QT[t%QT.length];case"numbered":return Yle(e,t);case"todo":return n.checked?Oz():Az();case"toggle":return r?ece():Qle(n.children.length>0);default:return""}})();return rt`
    <div
      class="affine-list-block__prefix ${n.type==="todo"?"affine-list-block__todo-prefix":""}"
      @click="${a=>o(a)}"
    >
      ${i}
    </div>
  `}const nce=n=>{var o;const e=((o=n.page.getParent(n))==null?void 0:o.children)||[],t=e.findIndex(i=>i===n);let r=0;for(let i=0;i<t;i++)e[i].flavour===n.flavour&&e[i].type===n.type?r+=1:r=0;return r},rce=n=>{let e=0,t=n.page.getParent(n);for(;(t==null?void 0:t.flavour)===n.flavour;)e++,t=n.page.getParent(t);return e},oce=n=>{const e=rce(n),t=nce(n);return{deep:e,index:t}};var Lz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let J6=class extends ql{constructor(){super(...arguments),this.showChildren=!0,this.textSchema={attributesSchema:mz,textRenderer:Iz},this._onClickIcon=e=>{if(e.stopPropagation(),this.model.type==="toggle"){this.showChildren=!this.showChildren;return}else if(this.model.type==="todo"){this.model.page.captureSync();const t={checked:!this.model.checked};this.model.page.updateBlock(this.model,t);return}this._select()}}_select(){const e=Sm(this.model);xt(e),e instanceof ld&&e.selection.selectOneBlock(this)}firstUpdated(){this.model.propsUpdated.on(()=>this.requestUpdate()),this.model.childrenUpdated.on(()=>this.requestUpdate())}connectedCallback(){super.connectedCallback(),pd("affine:list",Tz)}render(){const{deep:e,index:t}=oce(this.model),{model:r,showChildren:o,_onClickIcon:i}=this,a=tce(r,t,e,o,i),s=t===0&&e===0,l=rt`<div
      class="affine-block-children-container"
      style="padding-left: ${Dv}px"
    >
      ${this.content}
    </div>`;return rt`
      <div
        class=${`affine-list-block-container ${s?"affine-list-block-container--first":""}`}
      >
        <div
          class=${`affine-list-rich-text-wrapper ${this.model.checked?"affine-list--checked":""}`}
        >
          ${a}
          <rich-text
            .model=${this.model}
            .textSchema=${this.textSchema}
          ></rich-text>
        </div>
        ${this.showChildren?l:Di}
      </div>
    `}};J6.styles=vr`
    .affine-list-block-container {
      box-sizing: border-box;
      border-radius: 5px;
      margin-top: 2px;
    }
    .affine-list-block-container--first {
      margin-top: var(--affine-paragraph-space);
    }
    .affine-list-block-container .affine-list-block-container {
      margin-top: 0;
    }
    .affine-list-block-container.selected {
      background-color: var(--affine-hover-color);
    }
    .affine-list-rich-text-wrapper {
      display: flex;
      align-items: center;
    }
    .affine-list-rich-text-wrapper rich-text {
      flex: 1;
    }

    .affine-list-block__prefix {
      flex-shrink: 0;
      min-width: 26px;
      height: 26px;
      margin-right: 4px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      align-self: flex-start;
      color: var(--affine-list-color);
      font-size: 14px;
      line-height: var(--affine-line-height);
      user-select: none;
    }
    .affine-list-block__todo-prefix {
      cursor: pointer;
    }
    .affine-list-block__todo {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      border: 1px solid var(--affine-icon-color);
    }
    .affine-list-block__todo.affine-list-block__todo--active {
      background: var(--affine-icon-color);
    }

    .affine-list--checked {
      color: var(--affine-icon-color);
    }
  `;Lz([Ar()],J6.prototype,"showChildren",void 0);J6=Lz([lr("affine-list")],J6);class $z extends fd{block2html(e,{childText:t="",begin:r,end:o}={}){const i=super.block2html(e,{childText:t,begin:r,end:o});switch(e.type){case"text":return`<p>${i}</p>`;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return`<${e.type}>${i}</${e.type}>`;case"quote":return`<blockquote>${i}</blockquote>`;default:return i}}async json2Block(e,t,r){const o=e.type!=="text";return Vk(e,t,{range:r,convertToPastedIfEmpty:o})}}var Tm=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function ice(n){n.preventDefault()}function ace(n,e){if(!Tr(n,["affine:paragraph"]))throw new Error("TipsPlaceholder can't be used for this model");if(n.type==="text"){if(!uk(n.page))return rt`<div class="tips-placeholder" style=${Ur(e)}>
        Type '/' for commands
      </div> `;const r=document.querySelector("affine-block-hub");return r?rt`
      <div
        class="tips-placeholder"
        @click=${()=>{if(!r)throw new Error("Failed to find blockHub!");r.toggleMenu()}}
        @pointerdown=${ice}
        style=${Ur(e)}
      >
        Click ${LJ} to insert blocks, type '/' for commands
      </div>
    `:rt`<div class="tips-placeholder" style=${Ur(e)}>
        Type '/' for commands
      </div>`}return rt`<div class="tips-placeholder">${{h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",quote:""}[n.type]}</div> `}let qf=class extends ql{constructor(){super(...arguments),this.tipsPos={top:"50%",transform:"translateY(-50%)",left:"2px"},this._tipsPlaceholderTemplate=rt``,this._isComposing=!1,this._isFocus=!1,this.textSchema={attributesSchema:mz,textRenderer:Iz},this._placeholderDisposables=new Ya,this._updatePlaceholder=()=>{var e;if(this.model.text.length!==0||this._isComposing){this._tipsPlaceholderTemplate=rt``;return}if(this.model.type==="text"&&!this._isFocus){this._tipsPlaceholderTemplate=rt``;return}if(this._richTextElement){const t=(e=this._richTextElement.parentElement)==null?void 0:e.getBoundingClientRect(),r=this._richTextElement.getBoundingClientRect(),o=r.top-t.top,i=r.left-t.left;this.tipsPos={top:`${o}px`,transform:"",left:`${i+2}px`}}try{this._tipsPlaceholderTemplate=ace(this.model,this.tipsPos)}catch(t){console.warn("TipsPlaceholder",t)}},this._onFocusIn=e=>{this._isFocus=!0,this._updatePlaceholder(),this.model.text.yText.observe(this._updatePlaceholder),this._placeholderDisposables.add(()=>this.model.text.yText.unobserve(this._updatePlaceholder)),this._placeholderDisposables.addFromEvent(this,"compositionstart",()=>{this._isComposing=!0,this._updatePlaceholder()}),this._placeholderDisposables.addFromEvent(this,"compositionend",()=>{this._isComposing=!1,this._updatePlaceholder()})},this._onFocusOut=e=>{this._isFocus=!1,this._updatePlaceholder(),this._placeholderDisposables.dispose(),this._placeholderDisposables=new Ya},this.isInDatabase=()=>{let e=this.parentElement;for(;e&&e!==document.body;){if(e.tagName.toLowerCase()==="affine-database")return!0;e=e.parentElement}return!1}}connectedCallback(){super.connectedCallback(),this._updatePlaceholder(),pd("affine:paragraph",$z)}firstUpdated(){this.model.propsUpdated.on(()=>{this._updatePlaceholder(),this.requestUpdate()}),this.model.childrenUpdated.on(()=>this.requestUpdate())}render(){const{type:e}=this.model,t=this.isInDatabase()?"":this._tipsPlaceholderTemplate,r=rt`<div
      class="affine-block-children-container"
      style="padding-left: ${Dv}px"
    >
      ${this.content}
    </div>`;return rt`
      <div class="affine-paragraph-block-container ${e}">
        ${t}
        <rich-text
          .model=${this.model}
          .textSchema=${this.textSchema}
          @focusin=${this._onFocusIn}
          @focusout=${this._onFocusOut}
          style=${Ur({fontWeight:/^h[1-6]$/.test(e)?"600":void 0})}
        ></rich-text>
        ${r}
      </div>
    `}};qf.styles=vr`
    .affine-paragraph-block-container {
      position: relative;
      border-radius: 5px;
    }
    .affine-paragraph-block-container.selected {
      background-color: var(--affine-hover-color);
    }
    .h1 {
      font-size: var(--affine-font-h-1);
      line-height: calc(1em + 12px);
      margin-top: calc(var(--affine-paragraph-space) + 24px);
    }
    .h1 code {
      font-size: calc(var(--affine-font-base) + 8px);
    }
    .h2 {
      font-size: var(--affine-font-h-2);
      line-height: calc(1em + 10px);
      margin-top: calc(var(--affine-paragraph-space) + 20px);
    }
    .h2 code {
      font-size: calc(var(--affine-font-base) + 6px);
    }
    .h3 {
      font-size: var(--affine-font-h-3);
      line-height: calc(1em + 8px);
      margin-top: calc(var(--affine-paragraph-space) + 16px);
    }
    .h3 code {
      font-size: calc(var(--affine-font-base) + 4px);
    }
    .h4 {
      font-size: var(--affine-font-h-4);
      line-height: calc(1em + 10px);
      margin-top: calc(var(--affine-paragraph-space) + 12px);
    }
    .h4 code {
      font-size: calc(var(--affine-font-base) + 2px);
    }
    .h5 {
      font-size: var(--affine-font-h-5);
      line-height: calc(1em + 8px);
      margin-top: calc(var(--affine-paragraph-space) + 8px);
    }
    .h5 code {
      font-size: calc(var(--affine-font-base));
    }
    .h6 {
      font-size: var(--affine-font-h-6);
      line-height: calc(1em + 8px);
      margin-top: calc(var(--affine-paragraph-space) + 4px);
    }
    .h6 code {
      font-size: calc(var(--affine-font-base) - 2px);
    }
    .quote {
      line-height: 26px;
      padding-left: 12px;
      margin-top: var(--affine-paragraph-space);
      position: relative;
    }
    .quote::after {
      content: '';
      width: 4px;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: var(--affine-quote-color);
      border-radius: 4px;
    }
    .text {
      margin-top: var(--affine-paragraph-space);
      font-size: var(--affine-font-base);
    }

    .tips-placeholder {
      position: absolute;
      display: flex;
      align-items: center;
      gap: 4px;
      pointer-events: none;
      color: var(--affine-placeholder-color);
      fill: var(--affine-placeholder-color);
    }

    .tips-placeholder > svg {
      cursor: pointer;
      pointer-events: all;
    }
    .tips-placeholder > svg:hover {
      fill: var(--affine-primary-color);
    }
  `;Tm([Ar()],qf.prototype,"tipsPos",void 0);Tm([Ar()],qf.prototype,"_tipsPlaceholderTemplate",void 0);Tm([Ar()],qf.prototype,"_isComposing",void 0);Tm([Ar()],qf.prototype,"_isFocus",void 0);Tm([Rr("rich-text")],qf.prototype,"_richTextElement",void 0);qf=Tm([lr("affine-paragraph")],qf);const sce={"affine:code":yz,"affine:database":kz,"affine:paragraph":$z,"affine:list":Tz,"affine:embed":Ez,"affine:divider":_z,"affine:frame":Mz,"affine:bookmark":rz},h1=new Map;function lce(n){return h1.has(n)}function pd(n,e){if(h1.has(n))return;const t=new e;h1.set(n,t)}function na(n){const e=h1.get(n);if(!e)throw new Error(`cannot find service by flavour ${n}`);return e}function L1(n){const e=h1.get(n);if(!e){const t=sce[n]??fd,r=pd(n,t);return r instanceof Promise?r.then(()=>h1.get(n)):h1.get(n)}return e}const P5=Object.freeze(Object.defineProperty({__proto__:null,getService:na,getServiceOrRegister:L1,hasService:lce,registerService:pd},Symbol.toStringTag,{value:"Module"}));class Ig{checkIfTextContainsMd(e){e=e.replace(//g,"T"),e=e.replace(/\$/g,"D"),e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`),e=e.replace(/\u00A0/g,"&nbsp;"),e=`

${e}

`,e=Ig._detab(e);for(let t=0;t<Ig._checkRegArr.length;t++){const r=t===3?`${e}0`:e;if(Ig._checkRegArr[t].test(r))return!0}return!1}static _detab(e){return e=e.replace(/\t(?=\t)/g," "),e=e.replace(/\t/g,"AB"),e=e.replace(/B(.+?)A/g,(t,r)=>{let o=r;const i=4-o.length%4;for(let a=0;a<i;a++)o+=" ";return o}),e=e.replace(/A/g," "),e=e.replace(/B/g,""),e}}Ig._checkRegArr=[/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,/!\[([^\[\]]+)]()()()()()/g,/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,/\[([^\[\]]+)]()()()()()/g];const cce=new Ig;function T3(n,e,t){const r=na(n.flavour),o=r.block2html(n,{begin:e,end:t}),i=r.block2Text(n,{begin:e,end:t}),a=r.block2Json(n,e,t);return{html:o,text:i,json:a,model:n}}function dce(n){const e=n.models.map((s,l)=>l===0?T3(s,n.startOffset,l===n.models.length-1?n.endOffset:void 0):l===n.models.length-1?T3(s,void 0,n.endOffset):T3(s)),t=JSON.stringify(e.filter(s=>s.json?!jz(n.models,s.model):!1).map(s=>s.json)),r=PN(t,Zs.BLOCKSUITE_PAGE),o=new Mg(Zs.TEXT,e.reduce((s,l,d)=>`${s}${l.text}${d===e.length-1?"":`
`}`,"")),i=new Mg(Zs.HTML,`${e.map(s=>s.html).join("")}${r}`),a=new Mg(Zs.BLOCKSUITE_PAGE,t);return[o,i,a]}function X1(n){const e=dce(n),t=Cm()?Ba():null;Nk(e),t&&ts(t)}function jz(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.children&&(r.children.findIndex(o=>o.id===e.id)>-1||jz(r.children,e)))return!0}return!1}async function Rz(n,e){if(!e)return[];const t=new I3(n);if(Eie(e))return t.file2Blocks(e);const r=e.getData(Zs.HTML);if(r){const a=EN(Zs.BLOCKSUITE_PAGE,e.getData(Zs.HTML));if(a)return JSON.parse(a)}const o=e.getData(Zs.TEXT),i=cce.checkIfTextContainsMd(o);return r&&!i?await t.htmlText2Block(r):i?await t.markdown2Block(o):t.text2blocks(o)}function Dz(n,e){const t=n.workspace.indexer.backlink;return e.forEach(r=>{if(!(r&&r.attributes&&r.attributes.reference&&r.attributes.reference.type==="Subpage"))return;const o=r.attributes.reference;t.getParentPage(o.pageId)&&(r.attributes={...r.attributes,reference:{...o,type:"LinkedPage"}})}),e}function uce(n,e){return e.filter(t=>t.text).forEach(t=>{Dz(n,t.text)}),e}function hce(n){const e=n.querySelector("surface-text-editor");if(e){const t=e.vEditor;xt(t);const r=t.getVRange();if(r){const o=t.yText.toString().slice(r.index,r.index+r.length),i=new Mg(Zs.TEXT,o);e.setKeeping(!0),Nk([i]),e.setKeeping(!1),t.rootElement.focus(),t.setVRange(r)}}}const fce=vr`
  :host {
    font-family: var(--affine-font-family);
  }
  :host * {
    box-sizing: border-box;
  }
  .overlay-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.6);
    z-index: var(--affine-z-index-modal);
  }
  .modal-container {
    position: absolute;
    z-index: var(--affine-z-index-modal);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 720px;
    padding: 24px 40px;
    border-radius: 24px;
    background: var(--affine-background-overlay-panel-color);
  }
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .modal-header-title {
    color: var(--affine-text-primary-color);
    font-size: 20px;
    font-weight: 600;
  }
  .modal-header-close-icon {
    display: flex;
    align-items: center;
    color: var(--affine-icon-color);
    cursor: pointer;
  }
  .modal-header-close-icon svg {
    width: 24px;
    height: 24px;
  }
  .modal-footer {
    color: var(--affine-text-secondary-color);
    font-size: 14px;
    text-align: center;
  }
  .modal-body {
    padding: 24px 0;
  }
  .modal-desc {
    margin-bottom: 38px;
    color: var(--affine-text-primary-color);
    font-size: 14px;
  }
  .modal-view-container {
    display: flex;
    justify-content: center;
    gap: 18px;
  }
  .modal-view-item {
    display: flex;
    flex-direction: column;
    gap: 6px;
    cursor: pointer;
  }
  .modal-view-item.coming-soon {
    cursor: not-allowed;
  }
  .modal-view-item.coming-soon .modal-view-item-content {
    pointer-events: none;
  }
  .modal-view-item-content:hover {
    background: var(--affine-hover-color);
  }
  .modal-view-item-content:hover .modal-view-item-text,
  .modal-view-item-content:hover svg {
    fill: var(--affine-primary-color);
    color: var(--affine-primary-color);
  }
  .modal-view-item-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 18px 0;
    gap: 6px;
    width: 108px;
    height: 108px;
    border: 2px solid var(--affine-border-color);
    border-radius: 8px;
  }
  .modal-view-item-icon {
    width: 42px;
    height: 42px;
  }
  .modal-view-item-icon svg {
    width: 42px;
    height: 42px;
    fill: var(--affine-black-50);
  }
  .modal-view-item-text {
    font-size: 14px;
    color: var(--affine-black-50);
  }
  .modal-view-item-description {
    font-size: 12px;
    color: var(--affine-text-secondary-color);
    text-align: center;
  }
`;var Lx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const pce=[{type:"table",text:"Table view",icon:xm},{type:"kanban",text:"Kanban view",icon:rk,description:"Coming soon",isComingSoon:!0}];let $1=class extends so{constructor(){super(...arguments),this._selectedView="table"}_convertToDatabase(e){if(e!=="table")return;this._hide(),this.page.captureSync();const t=Vi(this.page);xt(t);const r=t.models,o=this.page.getParent(r[0]);xt(o);const i=this.page.addBlock("affine:database",{columns:[],titleColumnName:"Title"},o,o.children.indexOf(r[0])),a=this.page.getBlockById(i);xt(a),a.updateColumn({name:"Tag",type:"multi-select",width:200,hide:!1,selection:[]}),a.applyColumnUpdate(),this.page.moveBlocks(r,a);const s=Gd(this.page);xt(s),s.selection&&s.selection.clear()}_hide(){this.abortController.abort()}render(){return rt`<div class="overlay-root">
      <div class="overlay-mask" @click=${this._hide}></div>
      <div class="modal-container">
        <div class="modal-header">
          <div class="modal-header-title">Select Database View</div>
          <div class="modal-header-close-icon" @click=${this._hide}>
            ${QS}
          </div>
        </div>
        <div class="modal-body">
          <div class="modal-desc">
            Group as Database can quickly convert selected blocks into Database
            for easy structuring of data.
          </div>
          <div class="modal-view-container">
            ${pce.map(e=>{const t=e.type===this._selectedView;return rt`
                <div
                  class="modal-view-item ${e.type} ${e.isComingSoon?"coming-soon":""}"
                  @click=${()=>this._convertToDatabase(e.type)}
                >
                  <div
                    class="modal-view-item-content ${t?"selected":""}"
                  >
                    <div class="modal-view-item-icon">${e.icon}</div>
                    <div class="modal-view-item-text">${e.text}</div>
                  </div>
                  <div class="modal-view-item-description">
                    ${e.description}
                  </div>
                </div>
              `})}
          </div>
        </div>
        <div class="modal-footer">More views are on the way.</div>
      </div>
    </div>`}};$1.styles=fce;Lx([Ft()],$1.prototype,"page",void 0);Lx([Ar()],$1.prototype,"_selectedView",void 0);Lx([Ft()],$1.prototype,"abortController",void 0);$1=Lx([lr("affine-database-modal")],$1);function gce({page:n,container:e=document.body,abortController:t=new AbortController}){const r=new Ya;t.signal.addEventListener("abort",()=>r.dispose());const o=new $1;return o.page=n,o.abortController=t,e.appendChild(o),r.add(()=>o.remove()),o}const mce=["affine:list","affine:paragraph"],Nz=[{id:"copy",name:"Copy",disabledToolTip:void 0,icon:jb,hotkey:void 0,showWhen:()=>!0,enabledWhen:()=>!0,action:({page:n})=>{const e=Vi(n);xt(e),X1(e),Zh("Copied to clipboard")}},{id:"convert-to-database",name:"Group as Database",disabledToolTip:"Contains Block types that cannot be converted to Database. Learn more",icon:xm,hotkey:`${ki}+g`,showWhen:(n,e)=>{if(e.length===1&&Tr(e[0],["affine:database"]))return!1;const t=Vi(n);return(t==null?void 0:t.type)==="Block"},enabledWhen:n=>{const e=Vi(n);return e?e.models.every(t=>mce.includes(t.flavour)):!1},action:({page:n})=>{gce({page:n})}}],vce=vr`
  .paragraph-button > svg:nth-child(2) {
    transition-duration: 0.3s;
  }
  .paragraph-button:is(:hover, :focus-visible, :active) > svg:nth-child(2) {
    transform: rotate(180deg);
  }

  .paragraph-panel {
    font-size: var(--affine-font-sm);
    box-sizing: border-box;
    position: absolute;
    min-width: 173px;
    padding: 8px 4px;
    overflow-y: auto;

    background: var(--affine-background-overlay-panel-color);
    box-shadow: var(--affine-shadow-2);
    border-radius: 8px;
    z-index: var(--affine-z-index-popover);
  }
`,bce=vr`
  .format-quick-bar {
    box-sizing: border-box;
    position: fixed;
    display: flex;
    align-items: center;
    padding: 4px 8px;
    gap: 4px;
    height: 40px;

    border-radius: 8px;
    background: var(--affine-background-overlay-panel-color);
    box-shadow: var(--affine-shadow-2);
    z-index: var(--affine-z-index-popover);
    user-select: none;
  }

  .divider {
    width: 1px;
    height: 24px;
    background-color: var(--affine-border-color);
  }

  format-bar-button svg {
    width: 20px;
    height: 20px;
  }

  ${vce}
  ${hd}
`;var ec=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i},O3;function yce(n,e,t,r,o,i,a,s,l){if(n==="hidden")return rt``;const d=r[0].page;xt(d);const u=Ur({left:"0",top:n==="bottom"?"calc(100% + 4px)":null,bottom:n==="top"?"calc(100% + 4px)":null,maxHeight:e}),p=(f,h)=>{const c=t===`${f}/${h}`,{flavour:g,type:m}=ku[0],b=c?g:f,v=c?m:h,w=Q6(r,b,v);if(b==="affine:code"){if(w.length!==1)throw new Error("Failed to reset selection! New model length isn't 1");const _=w[0];Hz(_,()=>{var k;S1({type:"Block",startOffset:0,endOffset:((k=_.text)==null?void 0:k.length)??0,models:[_]})})}s(w),l(`${b}/${v}`),o.emit()};return rt` <div
    class="paragraph-panel"
    style="${u}"
    @mouseover="${i}"
    @mouseout="${a}"
  >
    ${ku.filter(({flavour:f})=>f!=="affine:divider").filter(({flavour:f})=>d.schema.flavourSchemaMap.has(f)).map(({flavour:f,type:h,name:c,icon:g})=>rt`<format-bar-button
          width="100%"
          style="padding-left: 12px; justify-content: flex-start;"
          text="${c}"
          data-testid="${f}/${h}"
          @click="${()=>p(f,h)}"
        >
          ${g}
        </format-bar-button>`)}
  </div>`}let _s=O3=class extends ui(so){constructor(){super(...arguments),this.left=null,this.top=null,this.abortController=new AbortController,this.positionUpdated=new Yo,this.models=[],this._paragraphType=`${ku[0].flavour}/${ku[0].type}`,this._paragraphPanelHoverDelay=150,this._paragraphPanelTimer=0,this._showParagraphPanel="hidden",this.paragraphPanelMaxHeight=null,this._format={},this._customElements=[],this._selectionChangeHandler=()=>{const e=Vi(this.page);if(!e){this.abortController.abort();return}if(e.type==="Native"&&e.models.length===1&&e.startOffset===e.endOffset){this.abortController.abort();return}this._format=pv(this.page),this.positionUpdated.emit()}}update(e){super.update(e),this._customElements.length===0&&O3.customElements.length!==0&&(this._customElements=O3.customElements.map(t=>t(this.page,()=>Vi(this.page))),this.customItemsElement.append(...this._customElements),this._disposables.add(()=>{this._customElements.forEach(t=>{t.remove()}),this._customElements=[],this.customItemsElement.innerHTML=""}))}connectedCallback(){super.connectedCallback();const e=this.models[0];this._paragraphType=`${e.flavour}/${e.type}`,this._format=pv(this.page),this.addEventListener("pointerdown",r=>{r.preventDefault(),r.stopPropagation()}),this.abortController.signal.addEventListener("abort",()=>{this.remove()}),document.addEventListener("selectionchange",this._selectionChangeHandler);const t=new MutationObserver(()=>{this.page&&(this._format=pv(this.page))});this.models.forEach(r=>{const o=Nb(r);if(!o){console.warn("Format quick bar may not work properly! Cannot find rich text node by model. model:",r);return}t.observe(o,{childList:!0,subtree:!0})}),this._disposables.add(()=>t.disconnect()),this._disposables.add(()=>document.removeEventListener("selectionchange",this._selectionChangeHandler))}_onHover(){if(this._showParagraphPanel!=="hidden"){clearTimeout(this._paragraphPanelTimer);return}this._paragraphPanelTimer=window.setTimeout(async()=>{const{placement:e,height:t}=dN(this.formatQuickBarElement,document.body,10);this._showParagraphPanel=e,this.paragraphPanelMaxHeight=t+"px"},this._paragraphPanelHoverDelay)}_onHoverEnd(){if(this._showParagraphPanel!=="hidden"){this._paragraphPanelTimer=window.setTimeout(async()=>{this._showParagraphPanel="hidden"},this._paragraphPanelHoverDelay*2);return}clearTimeout(this._paragraphPanelTimer)}render(){var l;const e=this.page;if(!this.models.length||!e)return console.error("Failed to render format-quick-bar! no model or page not found!",this.models,e),rt``;const t=Ur({left:this.left,top:this.top}),r=Nz.filter(({showWhen:d=()=>!0})=>d(e,this.models)).map(({id:d,name:u,icon:p,action:f,enabledWhen:h,disabledToolTip:c})=>{const g=h(e),m=g?rt`<tool-tip inert role="tooltip">${u}</tool-tip>`:rt`<tool-tip tip-position="top" inert role="tooltip"
              >${c}</tool-tip
            >`;return rt`<format-bar-button
          class="has-tool-tip"
          data-testid=${d}
          ?disabled=${!g}
          @click=${()=>g&&f({page:e})}
        >
          ${p}${m}
        </format-bar-button>`});if(this.models.length===1&&Tr(this.models[0],["affine:database"]))return rt`<div
        class="format-quick-bar"
        style="${t}"
        @pointerdown=${_u}
      >
        ${r}
      </div>`;const o=((l=ku.find(({flavour:d,type:u})=>`${d}/${u}`===this._paragraphType))==null?void 0:l.icon)??ku[0].icon,i=rt` <format-bar-button
      class="paragraph-button"
      width="52px"
      @mouseover="${this._onHover}"
      @mouseout="${this._onHoverEnd}"
    >
      ${o} ${Rb}
    </format-bar-button>`,a=yce(this._showParagraphPanel,this.paragraphPanelMaxHeight,this._paragraphType,this.models,this.positionUpdated,this._onHover,this._onHoverEnd,d=>this.models=d,d=>this._paragraphType=d),s=Ix.filter(({showWhen:d=()=>!0})=>d(this.models)).map(({id:d,name:u,icon:p,action:f,activeWhen:h})=>rt` <format-bar-button
          class="has-tool-tip"
          data-testid=${d}
          ?active=${h(this._format)}
          @click=${()=>{f({page:e,abortController:this.abortController,format:this._format}),this._format=pv(e),this.positionUpdated.emit()}}
        >
          ${p}
          <tool-tip inert role="tooltip">${u}</tool-tip>
        </format-bar-button>`);return rt` <div
      class="format-quick-bar"
      style="${t}"
      @pointerdown=${_u}
    >
      <div class="custom-items"></div>
      ${this._customElements.length>0?rt`<div class="divider"></div>`:null}
      ${i}
      <div class="divider"></div>
      ${s}
      ${s.length?rt` <div class="divider"></div>`:""}
      ${r} ${a}
    </div>`}};_s.styles=bce;_s.customElements=[];ec([Ft()],_s.prototype,"page",void 0);ec([Ft()],_s.prototype,"left",void 0);ec([Ft()],_s.prototype,"top",void 0);ec([Ft()],_s.prototype,"abortController",void 0);ec([Ft()],_s.prototype,"positionUpdated",void 0);ec([Ft()],_s.prototype,"models",void 0);ec([Ar()],_s.prototype,"_paragraphType",void 0);ec([Ar()],_s.prototype,"_paragraphPanelHoverDelay",void 0);ec([Ar()],_s.prototype,"_paragraphPanelTimer",void 0);ec([Ar()],_s.prototype,"_showParagraphPanel",void 0);ec([Ar()],_s.prototype,"_format",void 0);ec([Rr(".format-quick-bar")],_s.prototype,"formatQuickBarElement",void 0);ec([Rr(".custom-items")],_s.prototype,"customItemsElement",void 0);_s=O3=ec([lr("format-quick-bar")],_s);let e8=null;const bg=async({page:n,anchorEl:e,direction:t="right-bottom",container:r=document.body,abortController:o=new AbortController})=>{if(e8)return;const i=Vi(n);if(!i)return;i.models=i.models.filter(h=>Tr(h,["affine:paragraph","affine:list","affine:code","affine:database"]));const a=i.models;if(a.length===0||Tr(a[0],["affine:database"])&&i.type==="Native")return;const s=new _s;s.page=n,s.models=a,s.abortController=o;const l=new Yo;s.positionUpdated=l,e8=s,o.signal.addEventListener("abort",()=>{e8=null});const d=ux(()=>{if(o.signal.aborted)return;const h=e instanceof Range?cN(e,t):e.getBoundingClientRect(),c=document.body.getBoundingClientRect(),g=s.formatQuickBarElement.getBoundingClientRect(),m=5,b=t.includes("bottom"),v=Lk({positioningPoint:h,objRect:g,boundaryRect:c,offsetX:-g.width/2,offsetY:b?m:-g.height-m});s.left=`${v.x}px`,s.top=`${v.y}px`},10);if(!n.root)throw new Error("Failed to get page's root element");const u=hk(n);u&&u.addEventListener("scroll",d,{passive:!0}),l.on(d),window.addEventListener("resize",d,{passive:!0}),r.appendChild(s);const p=h=>{h.target!==s&&o.abort()},f=()=>{o.abort()};return document.addEventListener("pointerdown",p),window.addEventListener("popstate",f),Hz(i.models[0],d),o.signal.addEventListener("abort",()=>{u==null||u.removeEventListener("scroll",d),window.removeEventListener("resize",d),document.removeEventListener("pointerdown",p),window.removeEventListener("popstate",f),l.dispose()}),s};function xce(n,e){const t=n.getParent(e[0]);xt(t);const r=t.children.indexOf(e[0]);n.captureSync(),e.forEach(s=>n.deleteBlock(s));const o=n.addBlock("affine:paragraph",{type:"text"},t,r),i=n.getBlockById(o),a=Gd(e[0].page);return a?(a.selection.clear(),za(n,o),i):null}function j1(n,e=Vi(n)){if(!e)return null;if(e.type==="Block")return xce(n,e.models);const t=e.models[0],r=e.models[e.models.length-1];if(!t.text||!r.text)throw new Error("startModel or endModel does not have text");const o=Cs(t);return xt(o),t===r?(n.captureSync(),e.startOffset===e.endOffset&&e.startOffset>0||(t.text.delete(e.startOffset,e.endOffset-e.startOffset),o.setVRange({index:e.startOffset,length:0})),t):(n.captureSync(),t.text.delete(e.startOffset,t.text.length-e.startOffset),r.text.delete(0,e.endOffset),t.text.join(r.text),e.models.slice(1).forEach(i=>{n.deleteBlock(i)}),o.setVRange({index:e.startOffset,length:0}),t)}function wce(n,e){const t=n.getParent(e[0]);xt(t);const r=t.children.indexOf(e[0]),o=e.map(a=>a.text instanceof jg?a.text.toString():null).filter(Boolean).join(`
`);return e.map(a=>n.deleteBlock(a)),n.addBlock("affine:code",{text:new jg(o)},t,r)}function Q6(n,e,t){if(!n.length)return[];const r=n[0].page;n.every(l=>l.page===r)||console.error("Not all models have the same page instanceof, the result for update text type may not be correct",n),r.captureSync();const i=Vi(r);if(e==="affine:code"){const l=wce(r,n),d=r.getBlockById(l);if(!d)throw new Error("Failed to get model after merge code block!");return[d]}if(e==="affine:divider"){const l=n.at(-1);if(!l)return[];const d=r.getParent(l);if(!d)return[];const u=d.children.indexOf(l),p=r.getNextSibling(l);let f=p==null?void 0:p.id;const h=r.addBlock("affine:divider",{},d,u+1);p||(f=r.addBlock("affine:paragraph",{},d)),za(r,f);const c=r.getBlockById(h);if(!c)throw new Error("Failed to get model after add divider block!");return[c]}const a=[];n.forEach(l=>{if(rq(l,["affine:paragraph","affine:list","affine:code"]),l.flavour===e){r.updateBlock(l,{type:t}),a.push(l);return}const d=Cce(l,e,t),u=r.getBlockById(d);if(!u)throw new Error("Failed to get new model after transform block!");i&&Tee(i,l,u),a.push(u)});const s=i==null?void 0:i.models.map(l=>new Promise(d=>Bz(l,d)));return s&&i&&Promise.all(s).then(()=>{S1(i)}),a}function Cce(n,e,t){var s;const r=n.page,o=r.getParent(n);xt(o);const i={type:t,text:(s=n==null?void 0:n.text)==null?void 0:s.clone(),children:n.children},a=o.children.indexOf(n);return r.deleteBlock(n),r.addBlock(e,i,o,a)}function Sce(n,e){return n.length?e?n.reduce((t,r)=>({...t,...r})):n.reduce((t,r)=>{const o={};for(const i in t){const a=i;t[a]===r[a]&&(o[a]=t[a])}return o}):{}}function zz(n,e=!1){if(n.models.length===1){const i=Cs(n.models[0]);return xt(i),i.getFormat({index:n.startOffset,length:n.endOffset-n.startOffset},e)}const t=[],r=n.models[0];if(!Tr(r,["affine:code"])&&r.text&&r.text.length){const i=Cs(r);xt(i);const a=i.getFormat({index:n.startOffset,length:i.yText.length-n.startOffset},e);t.push(a)}const o=n.models[n.models.length-1];if(!Tr(o,["affine:code"])&&o.text&&o.text.length){const i=Cs(o);xt(i);const a=i.getFormat({index:0,length:n.endOffset},e);t.push(a)}return n.models.slice(1,-1).filter(i=>!Tr(i,["affine:code"])).filter(i=>i.text&&i.text.length).forEach(i=>{const a=Cs(i);xt(a);const s=a.getFormat({index:0,length:a.yText.length-1});t.push(s)},e),Sce(t,e)}function pv(n,e=!1){const t=Vi(n);return!t||t.models.every(r=>!r.text)?{}:zz(t,e)}function kce(n,e){var s,l,d;const{startOffset:t,endOffset:r}=n,o=n.models[0],i=n.models[n.models.length-1];if(n.models.length===1&&t===r){const u=Cs(o),p=u==null?void 0:u.getDeltaByRangeIndex(t);if(!u||!p)return;u.setMarks({...u.marks,[e]:u.marks&&u.marks[e]||p.attributes&&p.attributes[e]?null:!0}),aN(u);return}const a=zz(n);if(n.models.length===1){if(Tr(o,["affine:code"]))return;const u=Cs(o);u==null||u.slots.updated.once(()=>{S1(n)}),(s=o.text)==null||s.format(t,r-t,{[e]:a[e]?null:!0});return}if(Tr(o,["affine:code"])||(l=o.text)==null||l.format(t,o.text.length-t,{[e]:a[e]?null:!0}),Tr(i,["affine:code"])||(d=i.text)==null||d.format(0,r,{[e]:a[e]?null:!0}),n.models.slice(1,-1).filter(u=>!Tr(u,["affine:code"])).forEach(u=>{var p;(p=u.text)==null||p.format(0,u.text.length,{[e]:a[e]?null:!0})}),n.type==="Native"){const u=n.models.filter(p=>!Tr(p,["affine:code"])).map(p=>new Promise(f=>{const h=Cs(p);h==null||h.slots.updated.once(()=>{f(h)})}));Promise.all(u).then(()=>{S1(n)})}}function B2(n,e){const t=Vi(n);t&&(n.captureSync(),kce(t,e))}function _ce(n){var t;const e=window.getSelection();n.state.selectedBlocks.length===0&&((t=e==null?void 0:e.focusNode)==null?void 0:t.nodeName)==="#text"?n.selectOneBlock(gk(e.focusNode.parentElement)):n.selectAllBlocks(),ts(null)}function Ece({page:n,keyboardEvent:e,selectedBlocks:t}){const{key:r}=e,o=n.getParent(t[0]),i=o==null?void 0:o.children.indexOf(t[0]);t.forEach(s=>{n.deleteBlock(s)});const a=n.addBlock("affine:paragraph",{text:new n.Text(r)},o,i);requestAnimationFrame(()=>{const s=Gd(n),l=n.getBlockById(a);if(s==null||s.selection.clear(),C1(l,"end"),r==="/"){const d=Ba(),u=n.getBlockById(a);xt(u),gz({model:u,range:d})}})}async function Bz(n,e){var r;const t=await fk(n);(r=t==null?void 0:t.vEditor)==null||r.slots.updated.once(()=>{e(t)})}async function Hz(n,e){const t=await nD(n);t&&e(t)}function e4(n,e){requestAnimationFrame(()=>{if(!n.root)return;n.root.children.filter(r=>r.flavour==="affine:frame").forEach(r=>{const o=Hl(r);if(!o)return;const i=o.getBoundingClientRect(),[a,s,l,d]=Da(r.xywh),u=i.height/e+y6*2;Qp(u,d)||n.updateBlock(r,{xywh:JSON.stringify([a,s,l,Math.round(u)])})})})}function t4(n,e,t,r,o){const i=n==="double"?nee():dee(e);if(e.raw.target instanceof HTMLTextAreaElement||!i||i.collapsed||t.readonly)return;const a="center-bottom";bg({page:t,container:r,direction:a,anchorEl:{getBoundingClientRect:()=>vg(a,o)}})}class Pce{constructor(e,t){this._onCut=r=>{if(!ca.isActive(this._edgeless))return;r.preventDefault(),this._onCopy(r);const{state:o}=this.selection;if(o.active){j1(this._page);return}this._page.transact(()=>{o.selected.forEach(i=>{Fs(i)?this._page.deleteBlock(i):this.surface.removeElement(i.id)})}),this.slots.selectionUpdated.emit({active:!1,selected:[]})},this._onCopy=r=>{if(!ca.isActive(this._edgeless))return;r.preventDefault();const{state:o}=this.selection;if(o.active){if(o.selected[0]instanceof E1)hce(this._edgeless);else{const s=Vi(this._page);xt(s),X1(s)}return}const i=o.selected.map(s=>Fs(s)?T3(s).json:s.serialize()).filter(s=>!!s),a=Mie(i);Nk(a)},this._onPaste=async r=>{if(!ca.isActive(this._edgeless))return;r.preventDefault();const{state:o}=this.selection;if(o.active){o.selected[0]instanceof E1||this._pasteInTextFrame(r);return}const i=_ie(r);i&&this._pasteShapesAndFrames(i)},this._page=e,this._edgeless=t}init(e=this._page){this._page=e,document.body.addEventListener("cut",this._onCut),document.body.addEventListener("copy",this._onCopy),document.body.addEventListener("paste",this._onPaste)}get selection(){return this._edgeless.selection}get slots(){return this._edgeless.slots}get surface(){return this._edgeless.surface}dispose(){document.body.removeEventListener("cut",this._onCut),document.body.removeEventListener("copy",this._onCopy),document.body.removeEventListener("paste",this._onPaste)}async _pasteInTextFrame(e){const t=await Rz(this._page,e.clipboardData);if(!t.length)return;this._page.captureSync(),j1(this._page);const r=Vi(this._page),o=r==null?void 0:r.models[0];xt(o);const i=na(o.flavour);xt(r),await i.json2Block(o,t,r)}_createPhasorElements(e){return(e==null?void 0:e.map(r=>{const o=this.surface.addElement(r.type,r);return this.surface.pickById(o)}).filter(r=>!!r))||[]}async _createFrameBlocks(e,t,r,o){return await Promise.all(e.map(async({xywh:a,children:s,background:l})=>{var m;const[d,u,p,f]=a?Da(a):[o.x,o.y,Ug,qD],h=_1(t+d-o.x,r+u-o.y,p,f),c=this._page.addBlock("affine:frame",{xywh:h,background:l},(m=this._page.root)==null?void 0:m.id),g=this._page.getBlockById(c);return xt(g),await t1(this._page,s,g,0),c}))}_getOldCommonBound(e,t){const r=km([...e,...t.map(({xywh:o})=>{if(!o)return;const[i,a,s,l]=Da(o);return{x:i,y:a,w:s,h:l}}).filter(o=>!!o)]);return xt(r),r}_emitSelectionChangeAfterPaste(e,t){const r=[...e.map(o=>this.surface.pickById(o)).filter(o=>!!o),...t.map(o=>this._page.getBlockById(o)).filter(o=>!!o&&o.flavour==="affine:frame")];this.slots.selectionUpdated.emit({active:!1,selected:r})}async _pasteShapesAndFrames(e){const t=BR(e,p=>Fs(p)?"frames":"elements"),r=this._createPhasorElements(t.elements||[]),o=this._getOldCommonBound(r,t.frames||[]),{lastMousePos:i}=this.selection,[a,s]=this.surface.toModelCoord(i.x,i.y),l=a-o.w/2,d=s-o.h/2;r.forEach(p=>{const f=_1(l+p.x-o.x,d+p.y-o.y,p.w,p.h);this.surface.updateElement(p.id,{xywh:f})});const u=await this._createFrameBlocks(t.frames||[],l,d,o);this._emitSelectionChangeAfterPaste(r.map(p=>p.id),u)}}class Mce{constructor(e){this._onPaste=async t=>{if(!ca.isActive(this._ele))return;const r=Vi(this._page);if(!t.clipboardData||!r)return;t.preventDefault();const o=await Rz(this._page,t.clipboardData),i=uce(this._page,o);if(!i.length)return;this._page.captureSync();const a=j1(this._page,r);xt(a);const s=na(a.flavour);xt(r),await s.json2Block(a,i,r),this._page.captureSync(),this._page.slots.pasted.emit(o)},this._onCopy=(t,r=Vi(this._page))=>{ca.isActive(this._ele)&&r&&(t.preventDefault(),this._page.captureSync(),X1(r),this._page.captureSync(),this._page.slots.copied.emit())},this._onCut=t=>{if(!ca.isActive(this._ele))return;const r=Vi(this._page);r&&(t.preventDefault(),this._onCopy(t,r),j1(this._page,r))},this._ele=e}init(e){this._page=e,document.body.addEventListener("cut",this._onCut),document.body.addEventListener("copy",this._onCopy),document.body.addEventListener("paste",this._onPaste)}dispose(){document.body.removeEventListener("cut",this._onCut),document.body.removeEventListener("copy",this._onCopy),document.body.removeEventListener("paste",this._onPaste)}}function Ice(n){if(n===null)return null;const e={left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"};return rt`
    <style>
      .affine-page-dragging-area {
        position: absolute;
        background: var(--affine-hover-color);
        z-index: 1;
        pointer-events: none;
      }
    </style>
    <div class="affine-page-dragging-area" style=${Ur(e)}></div>
  `}function Tce(n,e){return rt`
    <style>
      .affine-page-selected-embed-rects-container > div {
        position: absolute;
        display: block;
        border: 2px solid var(--affine-primary-color);
        user-select: none;
      }
    </style>
    <div class="affine-page-selected-embed-rects-container resizable">
      ${n.map(t=>{const r={left:t.left+e.x+"px",top:t.top+e.y+"px",width:t.width+"px",height:t.height+"px"};return rt`
          <div class="resizes" style=${Ur(r)}>
            <div class="resize top-left"></div>
            <div class="resize top-right"></div>
            <div class="resize bottom-left"></div>
            <div class="resize bottom-right"></div>
          </div>
        `})}
    </div>
  `}function Oce(n,e,t){if(!n)return null;const{rect:{x:r,y:o},model:i}=n,a={left:r+t.x+"px",top:o+t.y+"px"};return rt`
    <style>
      .affine-embed-editing-state-container > div {
        position: absolute;
        display: block;
        z-index: 1;
      }
      ${hd}
    </style>

    <div
      class="affine-embed-editing-state-container"
      @pointerdown=${_u}
    >
      <div style=${Ur(a)} class="embed-editing-state">
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click=${()=>{Zse(i),e.embedRectsUpdated.emit([])}}
        >
          ${HJ}
          <tool-tip inert tip-position="right" role="tooltip">Caption</tool-tip>
        </format-bar-button>
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click=${()=>{Nse(i)}}
        >
          ${FJ}
          <tool-tip inert tip-position="right" role="tooltip"
            >Download
          </tool-tip>
        </format-bar-button>
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click=${()=>{zse(i)}}
        >
          ${jb}
          <tool-tip inert tip-position="right" role="tooltip"
            >Copy to clipboard
          </tool-tip>
        </format-bar-button>
        <format-bar-button
          class="has-tool-tip"
          width="100%"
          @click="${()=>{i.page.deleteBlock(i),e.embedRectsUpdated.emit([])}}"
        >
          ${wm}
          <tool-tip inert tip-position="right" role="tooltip">Delete</tool-tip>
        </format-bar-button>
      </div>
    </div>
  `}const M5=dv/2;function Ace(n,e,t){return n.left+t.x<e.right&&n.right+t.x>e.left&&n.top+t.y<e.bottom&&n.bottom+t.y>e.top}function Lce(n,e,t){const r=Array.from(n.entries()),o=r.length,i=[];if(o===0)return i;let a=-1;for(let s=0;s<o;s++){const[l,d]=r[s];if(Ace(d,e,t)){if(a===-1)a=s;else{let u=r[a][0];if(Hv(u,l)){if(Tr(u.model,["affine:database"]))continue;if(i.length>1)continue;a=s,i.shift()}else{const{previousElementSibling:p}=l;if(p&&p!==u&&Hv(p,u)){let f=s,h=i.length;for(;f--;)if(u=r[f][0],u===p){i.push({block:u,index:f});break}else h>0&&(i.pop(),h--)}a=s}}i.push({block:l,index:s})}}return i}function $ce(n){const e=Oee(n);if(!e||e.type==="Block")return;const t={startOffset:e.startOffset,endOffset:e.endOffset,blockIds:e.models.map(r=>r.id)};n.awarenessStore.setLocalRange(n,t)}function I5(n,e,t,r){if(n.selectedBlocks=t,r){e.selectedRectsUpdated.emit(r);return}const o=[];for(const i of zf(t))o.push(Ea(i));e.selectedRectsUpdated.emit(o)}function Qk(n,e,t){const{state:r}=n,{y:o}=e.point,{viewportElement:i}=n,{viewport:a}=r,{scrollHeight:s,clientHeight:l}=a;let{scrollTop:d}=a;const u=s-l;t.init();let p=!0;const f=()=>{if(p)r.rafID=requestAnimationFrame(f);else{r.clearRaf();return}if(Math.ceil(d)<u&&l-o<M5){const h=(M5-(l-o))*.25;d+=h,p=Math.ceil(d)<u,i.scrollTop=d,t.onScroll(h)}else if(d>0&&o<M5){const h=(o-M5)*.25;d+=h,p=d>0,i.scrollTop=d,t.onScroll(h)}else p=!1,t.onMove()};r.clearRaf(),r.rafID=requestAnimationFrame(f)}const t8={onStart(n,e){const{state:t}=n;t.blur(),t.type="block",n.updateViewport();const{scrollLeft:r,scrollTop:o}=t.viewport;t.resetDraggingArea(e,{scrollTop:o,scrollLeft:r}),t.refreshBlockRectCache()},onMove(n,e){Qk(n,e,{init(){const{x:t,y:r}=e.point,{draggingArea:o,viewport:{scrollLeft:i,scrollTop:a}}=n.state;xt(o),o.end.x=t+i,o.end.y=r+a},onScroll(t){const{draggingArea:r}=n.state;xt(r),r.end.y+=t,n.updateDraggingArea(r)},onMove(){const{blockCache:t,draggingArea:r,viewportOffset:o}=n.state;xt(r);const i=n.updateDraggingArea(r);n.selectBlocksByDraggingArea(t,i,o)}})},onEnd(n,e){n.state.type="block",n.state.clearDraggingArea(),n.slots.draggingAreaUpdated.emit(null)}};class jce{constructor(e,t){this._originPosition={x:0,y:0},this._dropContainer=null,this._dropContainerSize={w:0,h:0,left:0},this._dragMoveTarget="right",this.state=e,this.slots=t}onStart(e){var r;this._originPosition.x=e.raw.pageX,this._originPosition.y=e.raw.pageY,this._dropContainer=e.raw.target.closest(".resizes");const t=(r=this._dropContainer)==null?void 0:r.getBoundingClientRect();this._dropContainerSize.w=t.width,this._dropContainerSize.h=t.height,this._dropContainerSize.left=t.left,e.raw.target.className.includes("right")?this._dragMoveTarget="right":this._dragMoveTarget="left"}onMove(e){var a;const t=this.state.activeComponent||this.state.selectedEmbeds[0];if(!t)return;let r=0,o=0,i=0;if(this._dragMoveTarget==="right"?r=this._dropContainerSize.w+(e.raw.pageX-this._originPosition.x):r=this._dropContainerSize.w-(e.raw.pageX-this._originPosition.x),r<t.getBoundingClientRect().width&&r>=50&&(this._dragMoveTarget==="right"?i=this._dropContainerSize.left-(e.raw.pageX-this._originPosition.x)/2:i=this._dropContainerSize.left+(e.raw.pageX-this._originPosition.x)/2,o=r*(this._dropContainerSize.h/this._dropContainerSize.w),this._dropContainer)){this.slots.embedRectsUpdated.emit([new DOMRect(i,this._dropContainer.getBoundingClientRect().top,r,o)]);const s=(a=this.state.activeComponent)==null?void 0:a.querySelector(".resizable-img");s&&(s.style.width=r+"px",s.style.height=o+"px")}}onEnd(){xt(this.state.activeComponent);const e=Bl(this.state.activeComponent);e.page.captureSync(),xt(this._dropContainer);const{width:t,height:r}=this._dropContainer.getBoundingClientRect();e.page.updateBlock(e,{width:t,height:r})}}const T5={onStart(n,e){n.state.resetStartRange(e),n.state.type="native"},onMove(n,e){Qk(n,e,{init(){n.state.lastPoint=new ho(e.raw.clientX,e.raw.clientY),fx(n.state.startRange,e)},onMove:X9,onScroll:X9})},onEnd(n,e){n.state.clearRaf()}},O5={onStart(n,e){var o;const{container:t,state:r}=n;r.blur(),(o=t.components.dragHandle)==null||o.onDragStart(T2("dragstart",e.raw),!0)},onMove(n,e){Qk(n,e,{init(){const{state:t}=n,{raw:{clientX:r,clientY:o}}=e;t.lastPoint=new ho(r,o)},onScroll(t){var i;const{container:r,state:{lastPoint:o}}=n;xt(o),(i=r.components.dragHandle)==null||i.onDrag(T2("drag",new MouseEvent("mousemove",{clientX:o.x,clientY:o.y,screenY:1})),!0,!0)},onMove(){var o;const{raw:t}=e,{container:r}=n;(o=r.components.dragHandle)==null||o.onDrag(T2("drag",t),!0)}})},onEnd(n,e){var o;const{container:t,state:r}=n;r.clearRaf(),r.lastPoint=null,(o=t.components.dragHandle)==null||o.onDragEnd(T2("dragend",e.raw),!0)},clear(n){var t;const{container:e}=n;(t=e.components.dragHandle)==null||t.onDragEnd(T2("dragend"))}};class Rce{constructor(e){this.viewport={left:0,top:0,scrollLeft:0,scrollTop:0,scrollHeight:0,clientHeight:0,clientWidth:0},this.draggingArea=null,this.selectedEmbeds=[],this.selectedBlocks=[],this.focusedBlock=null,this.lastPoint=null,this._startRange=null,this._richTextCache=new Map,this._blockCache=new Map,this._embedCache=new Map,this._activeComponent=null,this.type=e}get activeComponent(){return this._activeComponent}set activeComponent(e){this._activeComponent=e}get startRange(){return this._startRange}get richTextCache(){return this._richTextCache}get blockCache(){return this._blockCache}get embedCache(){return this._embedCache}get viewportOffset(){const{viewport:{left:e,top:t,scrollLeft:r,scrollTop:o}}=this;return{x:r-e,y:o-t}}resetStartRange(e){const{clientX:t,clientY:r}=e.raw;this._startRange=Uf(t,r),this.lastPoint=new ho(t,r)}resetDraggingArea(e,t={scrollLeft:0,scrollTop:0}){const{scrollLeft:r,scrollTop:o}=t;let{x:i,y:a}=e.point;i+=r,a+=o;const s=new ho(i,a);this.draggingArea={start:s.clone(),end:s}}refreshBlockRectCache(){this._blockCache.clear();const e=mk(document);for(const t of e)this._blockCache.set(t,Ea(t))}blur(){ts(null),document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}clearRaf(){this.rafID&&(this.rafID=void cancelAnimationFrame(this.rafID))}clearDraggingArea(){this.clearRaf(),this.draggingArea=null}clearNativeSelection(){this.clearRaf(),this.type="none",this._richTextCache.clear(),this._startRange=null,this.lastPoint=null,ts(null)}clearBlockSelection(){this.type="none",this._activeComponent=null,this.focusedBlock=null,this.selectedBlocks=[],this.clearDraggingArea()}clearEmbedSelection(){this.type="none",this.selectedEmbeds=[],this._activeComponent=null}clearSelection(){this.clearBlockSelection(),this.clearEmbedSelection(),this.clearNativeSelection()}}function U0(n){const e=n.target;return!e||!(e instanceof HTMLElement)?!1:e.tagName==="INPUT"||e.tagName==="FORMAT-QUICK-BAR"}class Dce extends DR{constructor({container:e,dispatcher:t,page:r,mouseRoot:o,slots:i}){super(e,t),this.state=new Rce("none"),this._add=(s,l)=>{this._disposables.add(this._dispatcher.add(s,l))},this._onContainerDragStart=s=>{var u;const l=s.get("pointerState"),d=l.raw.target;if(ws(d)||mc(d)){this.state.type="none";return}if(II(d)&&(TI(d)||Mee(d))){O5.onStart(this,l);return}if(lee(l)){this.state.type="embed",this._embedResizeManager.onStart(l);return}(u=this.container.components.dragHandle)==null||u.setPointerEvents("none"),this.clear(),qR(l)?t8.onStart(this,l):T5.onStart(this,l)},this._onContainerDragMove=s=>{const l=s.get("pointerState");if(this.state.type==="native"){T5.onMove(this,l);return}if(!this.page.readonly){if(this.state.type==="block:drag"){O5.onMove(this,l);return}if(this.state.type==="block"){t8.onMove(this,l);return}if(this.state.type==="embed")return this._embedResizeManager.onMove(l)}},this._onContainerDragEnd=s=>{var d;const l=s.get("pointerState");if((d=this.container.components.dragHandle)==null||d.setPointerEvents("auto"),this.state.type==="block:drag"){O5.onEnd(this,l);return}if(this.state.type==="native"?T5.onEnd(this,l):this.state.type==="block"?t8.onEnd(this,l):this.state.type==="embed"&&this._embedResizeManager.onEnd(),!this.page.readonly){if(this.state.type==="native"){const{direction:u,selectedType:p}=lN(l);if(p==="Caret")return;bg({page:this.page,container:this.container,direction:u,anchorEl:{getBoundingClientRect:()=>vg(u,this.state)}})}else if(this.state.type==="block"){if(!this.page.awarenessStore.getFlag("enable_block_selection_format_bar")||!this.state.selectedBlocks.length)return;const u=l.start.y<l.point.y?"center-bottom":"center-top";bg({page:this.page,container:this.container,direction:u,anchorEl:{getBoundingClientRect:()=>vg(u,this.state)}})}}},this._onContainerPointerDown=s=>{const l=s.get("pointerState");l.keys.shift&&l.raw.preventDefault()},this._onContainerClick=s=>{var C;const l=s.get("pointerState"),{point:{x:d,y:u},raw:{target:p,clientX:f,clientY:h,pageX:c},keys:{shift:g}}=l;this._ensureFrameExists()&&ws(p)&&requestAnimationFrame(()=>{_I(this.page,l,this.container)});const b=tD(this.container);ca.setActive(b);const{state:v}=this,{viewport:w}=v;let{type:_}=v;if(c>=w.clientWidth+w.left||II(p)&&TI(p))return;if(g){_==="none"&&(_=v.type="native"),_==="native"?(v.lastPoint=new ho(f,h),fx(v.startRange,l)):_==="block"&&this.selectedBlocksWithShiftClick(d,u);return}this.clear(),v.resetStartRange(l),Array.from(document.querySelectorAll(".affine-embed-wrapper-caption")).forEach(I=>{I!==p&&I.blur()});let y=null;const S=d1(new ho(f,h),{rect:this.container.innerRect});if(S&&(y={model:Fd(S),rect:O7(S),element:S}),y&&y.model){const{element:I}=y;this.container.lastSelectionPosition="start",v.focusedBlock=I}if(y&&Tr(y.model,["affine:embed","affine:divider"])){(C=window.getSelection())==null||C.removeAllRanges(),v.activeComponent=y.element,xt(this.state.activeComponent),y.model.type==="image"?(v.type="embed",v.selectedEmbeds.push(v.activeComponent),this.slots.embedRectsUpdated.emit([y.rect])):(v.type="block",v.selectedBlocks.push(v.activeComponent),this.slots.selectedRectsUpdated.emit([y.rect]));return}ws(p)||mc(p)||p instanceof HTMLInputElement||_I(this.page,l,this.container)},this._onContainerDblClick=s=>{const l=s.get("pointerState");this.clear(),T5.onStart(this,l);{const{raw:{clientX:d,clientY:u}}=l,p=d1(new ho(d,u),{rect:this.container.innerRect});if(p){const f=Fd(p);f.flavour==="affine:embed"&&window.dispatchEvent(new CustomEvent("affine.embed-block-db-click",{detail:{blockId:f.id}}))}}t4("double",l,this.page,this.container,this.state)},this._onContainerTripleClick=s=>{const l=s.get("pointerState");t4("triple",l,this.page,this.container,this.state)},this._onContainerContextMenu=s=>{const l=s.get("defaultState");goe(l.event)},this._onContainerPointerMove=s=>{var g;const l=s.get("pointerState"),{dragging:d,raw:u}=l;if(d||u.target.closest(".embed-editing-state"))return;const p=new ho(u.clientX,u.clientY);let f=null;const{innerRect:h}=this.container,c=d1(p.clone(),{rect:h});if(c){const{left:m,top:b,width:v,height:w}=Ea(c);f={element:c,model:Fd(c),rect:new DOMRect(Math.max(m,h.left+K9),b,v,w)}}if((g=this.container.components.dragHandle)==null||g.onContainerMouseMove(l,f),f){const{model:m,element:b}=f;let v=!0;if(m.type==="image"){const{state:{viewport:{left:w,clientWidth:_}}}=this,k=O7(b),y=Xi.fromDOMRect(k),S=k.right+60<w+_;y.right+=S?60:0,y.isPointIn(p)&&(k.x=k.right+(S?10:-50),f.rect=k,v=!1)}v&&(f=null)}this.slots.embedEditingStateUpdated.emit(f)},this._onSelectionChangeWithDebounce=()=>{const s=window.getSelection();if(!s||ws(s.anchorNode)||ws(s.focusNode)||!s.containsNode(this.container,!0)||Ba(s).collapsed||this.page.readonly)return;const d=s.anchorOffset-s.focusOffset;let u="none";d>0?u="right-left":d<0&&(u="left-right");const p=u==="left-right"?"right-bottom":"left-top";bg({page:this.page,container:this.container,direction:p,anchorEl:{getBoundingClientRect:()=>vg(p,this.state)}})},this.slots=i,this._embedResizeManager=new jce(this.state,i);let a=!1;this._add("dragStart",s=>{const l=s.get("pointerState");U0(l.raw)||(!ws(l.raw.target)&&!mc(l.raw.target)&&l.raw.preventDefault(),a=!0,this._onContainerDragStart(s))}),this._add("dragMove",s=>{const l=s.get("pointerState");U0(l.raw)||(!ws(l.raw.target)&&!mc(l.raw.target)&&l.raw.preventDefault(),this._onContainerDragMove(s))}),this._dispatcher.add("dragEnd",s=>{const l=s.get("pointerState");!ws(l.raw.target)&&!mc(l.raw.target)&&l.raw.preventDefault(),a=!1,this._onContainerDragEnd(s)}),this._add("click",s=>{const l=s.get("pointerState");!ws(l.raw.target)&&!mc(l.raw.target)&&l.raw.preventDefault(),this._onContainerClick(s)}),this._add("doubleClick",s=>{const l=s.get("pointerState");U0(l.raw)||this._onContainerDblClick(s)}),this._add("tripleClick",s=>{const l=s.get("pointerState");U0(l.raw)||this._onContainerTripleClick(s)}),this._add("pointerDown",this._onContainerPointerDown),this._add("pointerMove",s=>{const l=s.get("pointerState");U0(l.raw)||(!ws(l.raw.target)&&!mc(l.raw.target)&&l.raw.preventDefault(),this.page.hasFlavour("affine:frame")&&this._onContainerPointerMove(s))}),this._add("contextMenu",this._onContainerContextMenu),this._add("virgo-vrange-updated",zR(s=>{const{event:l}=s.get("defaultState");U0(l)||a||this._onSelectionChangeWithDebounce()},300))}_ensureFrameExists(){if(!this.page.hasFlavour("affine:frame")){const t=this.page.addBlock("affine:frame",{},this.page.root);return this.page.addBlock("affine:paragraph",{},t),!0}return!1}get viewportElement(){return this.container.viewportElement}updateDraggingArea(e){this.state.focusedBlock!==null&&(this.state.focusedBlock=null);const t=Xi.fromPoints(e.start,e.end).toDOMRect();return this.slots.draggingAreaUpdated.emit(t),t}updateViewport(){const{viewportElement:e}=this.container,{clientHeight:t,clientWidth:r,scrollHeight:o,scrollLeft:i,scrollTop:a}=e,{top:s,left:l}=e.getBoundingClientRect();this.state.viewport={top:s,left:l,clientHeight:t,clientWidth:r,scrollHeight:o,scrollLeft:i,scrollTop:a}}updateRects(){const{type:e}=this.state;e==="block"?this.refreshSelectedBlocksRects():e==="embed"&&this.refreshEmbedRects()}refreshDraggingArea(e){const{blockCache:t,draggingArea:r}=this.state;r?this.selectBlocksByDraggingArea(t,Xi.fromPoints(r.start,r.end).toDOMRect(),e,!0):(this.state.draggingArea=null,this.slots.draggingAreaUpdated.emit(null),this.refreshSelectedBlocksRects())}refreshSelectedBlocksRects(){const{focusedBlock:e,selectedBlocks:t}=this.state;if(t.length!==0)if(e===null){const r=zf(t).map(Ea);this.slots.selectedRectsUpdated.emit(r)}else this.slots.selectedRectsUpdated.emit([Ea(e)])}refreshSelectedBlocksRectsByModels(e){this.state.selectedBlocks=e.map(Hl).filter(t=>t!==null),this.refreshSelectedBlocksRects()}refreshEmbedRects(e=null){const{activeComponent:t,selectedEmbeds:r,viewport:o}=this.state;if(t&&r.length){const i=O7(t),a=[new DOMRect(i.left,i.top,i.width,i.height)];if(e&&oD(t)){const s=i.right+60<o.left+o.clientWidth;i.x=i.right+(s?10:-50),e.rect=i}this.slots.embedRectsUpdated.emit(a)}}refreshRemoteSelection(){const e=this.container.querySelector("remote-selection");e&&e.requestUpdate()}selectOneBlock(e,t){if(this.clear(),this.state.blur(),this.state.type="block",this.state.focusedBlock=e,!e)return;t||(t=Ea(this.state.focusedBlock));const r=PI([e]);I5(this.state,this.slots,r,[t])}selectAllBlocks(){this.clear(),this.state.type="block",this.state.focusedBlock=null;const e=mk(this.container),t=zf(e).map(Ea);I5(this.state,this.slots,e,t)}selectBlocksByDraggingArea(e,t,r,o=!1){o&&this.state.refreshBlockRectCache();const i=Lce(e,t,r),[a,s]=i.reduce((l,{block:d})=>(l[0].push(...PI([d])),l[1].push(Ea(d)),l),[[],[]]);I5(this.state,this.slots,a,s)}selectedBlocksWithShiftClick(e,t){const{state:r}=this,{viewport:{scrollLeft:o,scrollTop:i},viewportOffset:a,selectedBlocks:s}=r,l=s.length-1;if(l===-1)return;const d=l===0,u=s[0],p=d?u:s[l],f=Ea(u),h=d?f:Ea(p),c=Xi.fromPoints(new ho(f.left+a.x,f.top+a.y),new ho(h.right+a.x,h.bottom+a.y)),g=new ho(e+o,t+i);let m,b,v=!0;if(d){if(c.isPointIn(g))return;g.y<c.top?(m=g,b=c.max,v=!1):(m=c.min,b=g)}else c.isPointIn(g)?g.y>=c.top+c.height/2?(m=g,b=c.max,v=!1):(m=c.min,b=g):g.y<c.top?(m=g,b=c.max,v=!1):(m=c.min,b=g);m&&b&&this.selectBlocksByDraggingArea(r.blockCache,Xi.fromPoints(m,b).toDOMRect(),a,!0);const w=v?"center-bottom":"center-top";bg({page:this.page,container:this.container,direction:w,anchorEl:{getBoundingClientRect:()=>vg(w,r)}})}setSelectedBlocks(e,t){I5(this.state,this.slots,e,t)}setFocusedBlock(e){this.state.focusedBlock=e}clear(){var o;const{state:e,slots:t}=this;let{type:r}=e;r==="block:drag"&&(O5.clear(this),r="block"),r==="block"?(e.clearBlockSelection(),t.selectedRectsUpdated.emit([]),t.draggingAreaUpdated.emit(null),(o=this.container.querySelector("format-quick-bar"))==null||o.remove()):r==="embed"?(e.clearEmbedSelection(),t.embedRectsUpdated.emit([]),t.embedEditingStateUpdated.emit(null)):r==="native"&&e.clearNativeSelection()}dispose(){this.slots.selectedRectsUpdated.dispose(),this.slots.draggingAreaUpdated.dispose(),this.slots.embedEditingStateUpdated.dispose(),this.slots.embedRectsUpdated.dispose(),this._disposables.dispose()}}var Uh=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let ld=class extends ql{constructor(){super(...arguments),this.flavour="affine:page",this.clipboard=new Mce(this),this.getService=na,this.lastSelectionPosition="start",this.components={dragHandle:null},this._draggingArea=null,this._selectedRects=[],this._selectedEmbedRects=[],this._isComposing=!1,this._resizeObserver=null,this.slots={draggingAreaUpdated:new Yo,selectedRectsUpdated:new Yo,embedRectsUpdated:new Yo,embedEditingStateUpdated:new Yo,nativeSelectionToggled:new Yo,pageLinkClicked:new Yo},this._titleVEditor=null,this._updateTitleInMeta=()=>{this.page.workspace.setPageMeta(this.page.id,{title:this.model.title.toString()})},this._onTitleKeyDown=e=>{if(e.isComposing||this.page.readonly)return;const t=!this.page.isEmpty,{page:r,model:o}=this,i=o.children.find(a=>a.flavour==="affine:frame");if(e.key==="Enter"&&t){e.preventDefault(),xt(this._titleVEditor);const a=this._titleVEditor.getVRange();xt(a);const s=o.title.split(a.index),l=r.addBlock("affine:paragraph",{text:s},i,0);za(r,l);return}else if(e.key==="ArrowDown"&&t){e.preventDefault();const a=i==null?void 0:i.children.find(s=>Tr(s,["affine:paragraph","affine:list","affine:code"]));if(a)za(r,a.id);else{const s=r.addBlock("affine:paragraph",{},i,0);za(r,s)}return}else e.key==="Tab"&&e.preventDefault()},this._onTitlePaste=e=>{var i;const t=this._titleVEditor;if(!t)return;const r=t.getVRange();if(!r)return;const o=(i=e.clipboardData)==null?void 0:i.getData("text/plain");if(o){const a=o.replace(/(\r\n|\r|\n)/g,`
`);t.insertText(r,a),t.setVRange({index:r.index+a.length,length:0})}},this._onWheel=e=>{const{selection:t}=this,{state:r}=t,{type:o,viewport:i}=r;if(o!=="native"&&o.startsWith("block")){e.preventDefault();const{viewportElement:a}=this,{scrollTop:s,scrollHeight:l,clientHeight:d}=i,u=l-d;let p=e.deltaY/2;if(p>0){if(Math.ceil(s)===u)return;p=Math.min(p,u-s)}else if(p<0){if(s===0)return;p=Math.max(p,-s)}if(i.scrollTop+=p,a.scrollTop+=p,o==="block"){const{draggingArea:f}=r;f&&(f.end.y+=p,t.updateDraggingArea(f))}}},this._onScroll=e=>{const{selection:t}=this,{type:r,viewport:o}=t.state,{scrollLeft:i,scrollTop:a}=e.target;if(o.scrollLeft=i,o.scrollTop=a,r==="block"){t.refreshDraggingArea(t.state.viewportOffset);return}if(r==="embed"){t.refreshEmbedRects(this._embedEditingState);return}let s;if(r==="native"?s=t.state.startRange&&t.state.lastPoint:r==="block:drag"&&(s=t.state.lastPoint),s){const l=new PointerEvent("pointermove",{clientX:s.x,clientY:s.y});document.dispatchEvent(l)}},this._initDragHandle=()=>{const e=()=>{this.components.dragHandle=Vse(this),this.components.dragHandle.getDropAllowedBlocks=t=>t&&t.length===1&&ix(this.page,t[0],"affine:database")?Pv(this.page.getParent(t[0])):!t||t.length===1?Pv(this.model):Pv(this.model).filter(r=>!(t!=null&&t.includes(r.id)))};this.page.awarenessStore.getFlag("enable_drag_handle")&&!this.components.dragHandle&&e(),this._disposables.add(this.page.awarenessStore.slots.update.subscribe(t=>{var r;return(r=t.state)==null?void 0:r.flags.enable_drag_handle},t=>{var r;t?this.components.dragHandle||e():((r=this.components.dragHandle)==null||r.remove(),this.components.dragHandle=null)},{filter:t=>t.id===this.page.doc.clientID}))}}get titleVEditor(){return xt(this._titleVEditor),this._titleVEditor}get innerRect(){const{left:e,width:t}=this.pageBlockContainer.getBoundingClientRect(),{clientHeight:r,top:o}=this.selection.state.viewport;return Xi.fromLWTH(e,Math.min(t,window.innerWidth),o,Math.min(r,window.innerHeight))}_initTitleVEditor(){const{model:e}=this,t=e.title;this._titleVEditor=new od(t.yText,{active:()=>ca.isActive(this)}),this._titleVEditor.mount(this._titleContainer),this._titleVEditor.bindHandlers({keydown:this._onTitleKeyDown,paste:this._onTitlePaste}),this._disposables.addFromEvent(this._titleContainer,"compositionstart",()=>this._isComposing=!0),this._disposables.addFromEvent(this._titleContainer,"compositionend",()=>this._isComposing=!1),this.model.title.yText.observe(()=>{this._updateTitleInMeta(),this.requestUpdate()}),this._titleVEditor.setReadonly(this.page.readonly)}updated(e){e.has("model")&&this.model&&!this._titleVEditor&&this._initTitleVEditor()}_initSlotEffects(){const{slots:e}=this;e.draggingAreaUpdated.on(t=>{this._draggingArea=t}),e.selectedRectsUpdated.on(t=>{this._selectedRects=t}),e.embedRectsUpdated.on(t=>{this._selectedEmbedRects=t,t.length===0&&(this._embedEditingState=null)}),e.embedEditingStateUpdated.on(t=>{this._embedEditingState=t}),this.model.childrenUpdated.on(()=>this.requestUpdate())}_initFrameSizeEffect(){e4(this.page,1),this.addEventListener("keydown",e=>{e.ctrlKey||e.metaKey||e.shiftKey||e4(this.page,1)})}_initResizeEffect(){const e=new ResizeObserver(t=>{for(const{target:r}of t)if(r===this.viewportElement){this.selection.updateViewport(),this.selection.updateRects();break}});e.observe(this.viewportElement),this._resizeObserver=e}firstUpdated(){const{page:e,selection:t}=this,r=Eo.newScope(pD.AFFINE_PAGE);ca.isActive(this)&&Eo.setScope(r),this._disposables.add(ca.activeSlot.on(()=>{ca.isActive(this)&&Eo.setScope(r)})),this._disposables.add(()=>Eo.deleteScope(r)),Eo.withScope(r,()=>{ole(e,t)}),Eo.enableHotkey(),this._initDragHandle(),this._initSlotEffects(),this._initFrameSizeEffect(),this._initResizeEffect(),this.mouseRoot.addEventListener("wheel",this._onWheel),this.viewportElement.addEventListener("scroll",this._onScroll),this.setAttribute(Ss,this.model.id)}connectedCallback(){super.connectedCallback(),pd("affine:page",Vz),this.clipboard.init(this.page),this.mouseRoot=this.parentElement,this.selection=new Dce({page:this.page,mouseRoot:this.mouseRoot,slots:this.slots,container:this,dispatcher:this.root.uiEventDispatcher})}disconnectedCallback(){var e;super.disconnectedCallback(),this.clipboard.dispose(),this._disposables.dispose(),(e=this.components.dragHandle)==null||e.remove(),ile(),this.selection.clear(),this.selection.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this.mouseRoot.removeEventListener("wheel",this._onWheel),this.viewportElement.removeEventListener("scroll",this._onScroll)}render(){requestAnimationFrame(()=>{this.selection.refreshRemoteSelection()});const{page:e,selection:t}=this,{viewportOffset:r}=t.state,o=Ice(this._draggingArea),i=Tce(this._selectedEmbedRects,r),a=Oce(e.readonly?null:this._embedEditingState,this.slots,r),s=(!this.model.title||!this.model.title.length)&&!this._isComposing;return rt`
      <div class="affine-default-viewport">
        <div class="affine-default-page-block-container">
          <div class="affine-default-page-block-title-container">
            <div
              data-block-is-title="true"
              class="affine-default-page-block-title ${s?"affine-default-page-block-title-empty":""}"
            ></div>
            <backlink-button
              .host="${this}"
              .page="${this.page}"
            ></backlink-button>
          </div>
          ${this.content}
        </div>
        <affine-selected-blocks
          .mouseRoot="${this.mouseRoot}"
          .state="${{rects:this._selectedRects,grab:!o}}"
          .offset="${r}"
        ></affine-selected-blocks>
        ${o} ${i} ${a}
      </div>
    `}};ld.styles=vr`
    .affine-default-viewport {
      position: relative;
      overflow-x: hidden;
      overflow-y: auto;
      height: 100%;
    }

    .affine-default-page-block-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      font-family: var(--affine-font-family);
      font-size: var(--affine-font-base);
      line-height: var(--affine-line-height);
      color: var(--affine-text-primary-color);
      font-weight: 400;
      max-width: var(--affine-editor-width);
      margin: 0 auto;
      /* cursor: crosshair; */
      cursor: default;
      padding-bottom: ${Dj}px;

      /* Leave a place for drag-handle */
      padding-left: ${K9}px;
      padding-right: ${K9}px;
    }

    .affine-default-page-block-title {
      width: 100%;
      font-size: 40px;
      line-height: 50px;
      font-weight: 700;
      outline: none;
      resize: none;
      border: 0;
      font-family: inherit;
      color: inherit;
      cursor: text;
    }

    .affine-default-page-block-title-empty::before {
      content: 'Title';
      color: var(--affine-placeholder-color);
      position: absolute;
      opacity: 0.5;
    }

    .affine-default-page-block-title:disabled {
      background-color: transparent;
    }

    /*
    .affine-default-page-block-title-container {
    }
    */

    .affine-block-element {
      display: block;
    }
  `;Uh([Ar()],ld.prototype,"_draggingArea",void 0);Uh([Ar()],ld.prototype,"_selectedRects",void 0);Uh([Ar()],ld.prototype,"_selectedEmbedRects",void 0);Uh([Ar()],ld.prototype,"_embedEditingState",void 0);Uh([Ar()],ld.prototype,"_isComposing",void 0);Uh([Rr(".affine-default-viewport")],ld.prototype,"viewportElement",void 0);Uh([Rr(".affine-default-page-block-container")],ld.prototype,"pageBlockContainer",void 0);Uh([Rr(".affine-default-page-block-title")],ld.prototype,"_titleContainer",void 0);ld=Uh([lr("affine-default-page")],ld);var q1=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let $h=class extends so{constructor(){super(),this.disabled=!1,this.coming=!1,this.tipPosition="top",this.active=!1,this.activeMode="color",this.addEventListener("click",e=>{this.disabled&&(e.stopPropagation(),e.preventDefault())},{capture:!0})}render(){const e=this.coming?"(Coming soon)":this.tooltip,t=`icon-container has-tool-tip active-mode-${this.activeMode}`;return rt`
      <div
        class=${t}
        role="button"
        ?disabled=${this.disabled}
        ?active=${this.active}
      >
        <slot></slot>
        ${e?rt`<tool-tip
              inert
              role="tooltip"
              tip-position=${this.tipPosition}
              arrow
              >${e}</tool-tip
            >`:Di}
      </div>
    `}};$h.styles=vr`
    .icon-container {
      position: relative;
      display: flex;
      align-items: center;
      padding: 4px;
      color: var(--affine-icon-color);
      margin: 8px;
      border-radius: 5px;
      cursor: pointer;
    }

    .icon-container:hover {
      background: var(--affine-hover-color);
    }

    .icon-container.active-mode-color[active] {
      color: var(--affine-primary-color);
    }

    .icon-container.active-mode-background[active] {
      background: var(--affine-hover-color);
    }

    .icon-container[disabled] {
      pointer-events: none;
      cursor: not-allowed;
    }

    .icon-container[coming] {
      cursor: not-allowed;
      color: var(--affine-text-disable-color);
    }

    ${hd}

    tool-tip {
      z-index: 12;
    }
  `;q1([Ft()],$h.prototype,"disabled",void 0);q1([Ft()],$h.prototype,"coming",void 0);q1([Ft()],$h.prototype,"tooltip",void 0);q1([Ft()],$h.prototype,"tipPosition",void 0);q1([Ft()],$h.prototype,"active",void 0);q1([Ft()],$h.prototype,"activeMode",void 0);$h=q1([lr("edgeless-tool-icon-button")],$h);const Fz=[{name:"rect",icon:Qq,tooltip:"Square",disabled:!1},{name:"ellipse",icon:eJ,tooltip:"Ellipse",disabled:!1},{name:"diamond",icon:tJ,tooltip:"Diamond",disabled:!1},{name:"triangle",icon:nJ,tooltip:"Triangle",disabled:!1},{name:"roundedRect",icon:rJ,tooltip:"Rounded rectangle",disabled:!1}],Nce=Fz.reduce((n,e)=>(n[e.name]=e,n),{});var Zz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let n4=class extends so{constructor(){super(...arguments),this.slots={select:new Yo}}_onSelect(e){this.selectedShape=e,this.slots.select.emit(e)}disconnectedCallback(){this.slots.select.dispose(),super.disconnectedCallback()}render(){return rt`
      <div class="shape-menu-container">
        ${Fz.map(({name:e,icon:t,tooltip:r,disabled:o})=>rt`
            <edgeless-tool-icon-button
              .disabled=${o}
              .tooltip=${r}
              .active=${this.selectedShape===e}
              @click=${()=>{o||this._onSelect(e)}}
            >
              ${t}
            </edgeless-tool-icon-button>
          `)}
      </div>
    `}};n4.styles=vr`
    :host {
      display: block;
      z-index: 2;
    }
    .shape-menu-container {
      display: flex;
      align-items: center;
      width: 240px;
      height: 48px;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
      fill: none;
      stroke: currentColor;
    }
  `;Zz([Ft()],n4.prototype,"selectedShape",void 0);n4=Zz([lr("edgeless-shape-menu")],n4);const e_=[vr`
    .edgeless-component-line-size-button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 16px;
      height: 16px;
    }

    .edgeless-component-line-size-button div {
      border-radius: 50%;
      background-color: var(--affine-icon-color);
    }

    .edgeless-component-line-size-button.size-s div {
      width: 4px;
      height: 4px;
    }
    .edgeless-component-line-size-button.size-l div {
      width: 10px;
      height: 10px;
    }
  `];function zce(n){return{s:"Thin",l:"Thick"}[n]}function Bce({className:n,size:e,active:t,tooltip:r,onClick:o}){const i=`edgeless-component-line-size-button size-${e} ${t?"active":""}`,a=r!==void 0?r:zce(e);return rt`<edgeless-tool-icon-button
    class=${n}
    .active=${t}
    .activeMode=${"background"}
    .tooltip=${a}
    @click=${o}
  >
    <div class=${i}>
      <div></div>
    </div>
  </edgeless-tool-icon-button>`}const Hce=[vr`
    .edgeless-component-line-style-button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 16px;
      height: 16px;
      color: var(--affine-icon-color);
    }
  `];function Fce(n){switch(n){case"solid":return tk;case"dash":return sJ;case"none":return lJ}}function Zce(n){return{solid:"Solid",dash:"Dash",none:"None"}[n]}function Uce({className:n,mode:e,active:t,tooltip:r,onClick:o}){const i=`edgeless-component-line-style-button mode-${e} ${t?"active":""}`,a=Fce(e),s=r!==void 0?r:Zce(e);return rt`<edgeless-tool-icon-button
    class=${n}
    .active=${t}
    .activeMode=${"background"}
    .tooltip=${s}
    @click=${o}
  >
    <div class=${i}>${a}</div>
  </edgeless-tool-icon-button>`}const Wce=[vr`
    .edgeless-component-panel-wrapper {
      display: flex;
      padding: 4px;
      justify-content: center;
      align-items: center;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }
  `];function Vce({children:n,className:e}){const t=`edgeless-component-panel-wrapper ${e||""}`;return rt`<div class=${t}>${n}</div>`}const Uz=[Wce,e_,Hce];function Wz({onClick:n,selectedLineSize:e,selectedLineStyle:t,lineStyle:r=["solid","dash","none"]}={}){const o=Vs(["s","l"],a=>a,a=>Bce({size:a,active:a===e,onClick:()=>{n==null||n({type:"size",value:a})}})),i=Vs(r,a=>a,a=>Uce({mode:a,active:a===t,onClick:()=>{n==null||n({type:"lineStyle",value:a})}}));return Vce({className:"line-style-panel",children:rt`
      ${o}
      <menu-divider .vertical=${!0}></menu-divider>
      ${i}
    `})}var kl=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function Kce(n){const e=Jl(n,r=>r.shapeType==="rect"&&r.radius?"roundedRect":r.shapeType),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function Yce(n){const e=Jl(n,r=>r.filled?r.fillColor:"--affine-palette-transparent"),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function Gce(n){const e=Jl(n,r=>r.strokeColor),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function Xce(n){const e=Jl(n,r=>r.strokeWidth===4?"s":"l"),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function qce(n){const e=Jl(n,r=>{switch(r.strokeStyle){case ya.Solid:return"solid";case ya.Dashed:return"dash";case ya.None:return"none"}}),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}const IC=["--affine-palette-shape-yellow","--affine-palette-shape-orange","--affine-palette-shape-tangerine","--affine-palette-shape-red","--affine-palette-shape-magenta","--affine-palette-shape-purple","--affine-palette-shape-green","--affine-palette-shape-blue","--affine-palette-shape-navy","--affine-palette-shape-black","--affine-palette-shape-white","--affine-palette-transparent"],r4=IC[11],TC=["--affine-palette-line-yellow","--affine-palette-line-orange","--affine-palette-line-tangerine","--affine-palette-line-red","--affine-palette-line-magenta","--affine-palette-line-purple","--affine-palette-line-green","--affine-palette-line-blue","--affine-palette-line-navy","--affine-palette-line-black","--affine-palette-line-white","--affine-palette-transparent"],o4=TC[9];let Ks=class extends ui(so){constructor(){super(...arguments),this.elements=[],this._popperShow=!1,this._shapeMenuPopper=null,this._fillColorMenuPopper=null,this._strokeColorMenuPopper=null,this._lineStylesPanelPopper=null}_forceUpdateSelection(){this.slots.selectionUpdated.emit({...this.selectionState})}_setShapeFillColor(e){const t=!Sk(e);this.elements.forEach(r=>{this.surface.updateElement(r.id,{filled:t,fillColor:e})}),this._forceUpdateSelection()}_setShapeStrokeColor(e){this.elements.forEach(t=>{this.surface.updateElement(t.id,{strokeColor:e})}),this._forceUpdateSelection()}_setShapeStrokeWidth(e){this.elements.forEach(t=>{this.surface.updateElement(t.id,{strokeWidth:e})}),this._forceUpdateSelection()}_setShapeStrokeStyle(e){this.elements.forEach(t=>{this.surface.updateElement(t.id,{strokeStyle:e})}),this._forceUpdateSelection()}_setShapeStyles({type:e,value:t}){if(e==="size"){const r=t==="s"?4:10;this._setShapeStrokeWidth(r)}else if(e==="lineStyle")switch(t){case"solid":{this._setShapeStrokeStyle(ya.Solid);break}case"dash":{this._setShapeStrokeStyle(ya.Dashed);break}case"none":{this._setShapeStrokeStyle(ya.None);break}}}firstUpdated(e){const t=this._disposables;this._shapeMenuPopper=td(this._changeShapeButton,this._shapeMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._shapeMenuPopper),t.add(this._shapeMenu.slots.select.on(r=>{const o=r==="roundedRect"?{shapeType:"rect",radius:.1}:{shapeType:r,radius:0};this.page.captureSync(),this.elements.forEach(i=>{this.surface.updateElement(i.id,o)}),this._forceUpdateSelection()})),this._fillColorMenuPopper=td(this._fillColorButton,this._fillColorMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._fillColorMenuPopper),this._strokeColorMenuPopper=td(this._strokeColorButton,this._strokeColorMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._strokeColorMenuPopper),this._lineStylesPanelPopper=td(this._lineStylesButton,this._lineStylesPanel,({display:r})=>{this._popperShow=r==="show"}),t.add(this._lineStylesPanelPopper),super.firstUpdated(e)}render(){const e=Kce(this.elements),t=e?Nce[e].icon:null,r=Yce(this.elements)??IC[0],o=Gce(this.elements)??TC[0],i=Xce(this.elements)??"s",a=qce(this.elements)??"solid";return rt`
      <edgeless-tool-icon-button
        class="change-shape-button"
        .tooltip=${this._popperShow?"":"Switch type"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var s;return(s=this._shapeMenuPopper)==null?void 0:s.toggle()}}
      >
        ${t}
      </edgeless-tool-icon-button>
      <edgeless-shape-menu .selectedShape=${e}>
      </edgeless-shape-menu>

      <menu-divider .vertical=${!0}></menu-divider>

      <edgeless-tool-icon-button
        class="fill-color-button"
        .tooltip=${this._popperShow?"":"Shape color"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var s;return(s=this._fillColorMenuPopper)==null?void 0:s.toggle()}}
      >
        ${$6(r)}
      </edgeless-tool-icon-button>
      <div class="color-panel-container fill-color">
        <edgeless-color-panel
          .value=${r}
          .options=${IC}
          @select=${s=>this._setShapeFillColor(s.detail)}
        >
        </edgeless-color-panel>
      </div>

      <edgeless-tool-icon-button
        class="stroke-color-button"
        .tooltip=${this._popperShow?"":"Border color"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var s;return(s=this._strokeColorMenuPopper)==null?void 0:s.toggle()}}
      >
        ${$6(o,{hollowCircle:!0})}
      </edgeless-tool-icon-button>
      <div class="color-panel-container stroke-color">
        <edgeless-color-panel
          .value=${o}
          .options=${TC}
          .hollowCircle=${!0}
          @select=${s=>this._setShapeStrokeColor(s.detail)}
        >
        </edgeless-color-panel>
      </div>

      <menu-divider .vertical=${!0}></menu-divider>

      <edgeless-tool-icon-button
        class="line-styles-button"
        .tooltip=${this._popperShow?"":"Border style"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var s;return(s=this._lineStylesPanelPopper)==null?void 0:s.toggle()}}
      >
        ${lR}
      </edgeless-tool-icon-button>
      ${Wz({selectedLineSize:i,selectedLineStyle:a,onClick:s=>{this._setShapeStyles(s)}})}
    `}};Ks.styles=[e_,Uz,vr`
      :host {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        color: var(--affine-text-primary-color);
        stroke: none;
        fill: currentColor;
      }

      menu-divider {
        height: 24px;
      }

      edgeless-shape-menu {
        display: none;
      }

      edgeless-shape-menu[data-show] {
        display: block;
      }

      .change-shape-button {
        fill: none;
        stroke: currentColor;
      }

      .color-panel-container {
        display: none;
        padding: 4px;
        justify-content: center;
        align-items: center;
        background: var(--affine-background-overlay-panel-color);
        box-shadow: var(--affine-shadow-2);
        border-radius: 8px;
      }

      .color-panel-container[data-show] {
        display: block;
      }

      .shape-color-button-indicator {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 24px;
        height: 24px;
        box-sizing: border-box;
        border-radius: 4px;
        cursor: pointer;
      }

      .shape-color-button-indicator div {
        border-radius: 50%;
        width: 16px;
        height: 16px;
      }

      .line-style-panel {
        display: none;
      }
      .line-style-panel[data-show] {
        display: flex;
      }
    `];kl([Ft()],Ks.prototype,"elements",void 0);kl([Ft()],Ks.prototype,"page",void 0);kl([Ft()],Ks.prototype,"surface",void 0);kl([Ft()],Ks.prototype,"selectionState",void 0);kl([Ft()],Ks.prototype,"slots",void 0);kl([Ar()],Ks.prototype,"_popperShow",void 0);kl([Rr(".change-shape-button")],Ks.prototype,"_changeShapeButton",void 0);kl([Rr("edgeless-shape-menu")],Ks.prototype,"_shapeMenu",void 0);kl([Rr(".fill-color-button")],Ks.prototype,"_fillColorButton",void 0);kl([Rr(".color-panel-container.fill-color")],Ks.prototype,"_fillColorMenu",void 0);kl([Rr(".stroke-color-button")],Ks.prototype,"_strokeColorButton",void 0);kl([Rr(".color-panel-container.stroke-color")],Ks.prototype,"_strokeColorMenu",void 0);kl([Rr(".line-styles-button")],Ks.prototype,"_lineStylesButton",void 0);kl([Rr(".line-style-panel")],Ks.prototype,"_lineStylesPanel",void 0);Ks=kl([lr("edgeless-change-shape-button")],Ks);var mp=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function Jce(n){const e=Jl(n,r=>r.color),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function Qce(n){const e=Jl(n,r=>r.lineWidth),t=Ql(Object.entries(e),([r,o])=>o);return t?Number(t[0]):null}let Ou=class extends ui(so){constructor(){super(...arguments),this.elements=[],this._popperShow=!1,this._colorPanelPopper=null}_setBrushSize(e){this.page.captureSync(),this.elements.forEach(t=>{t.lineWidth!==e&&this.surface.updateElement(t.id,{lineWidth:e})}),this.slots.selectionUpdated.emit({...this.selectionState})}_setBrushColor(e){this.page.captureSync(),this.elements.forEach(t=>{t.color!==e&&this.surface.updateElement(t.id,{color:e})})}firstUpdated(e){const t=this._disposables;this._colorPanelPopper=td(this,this._colorPanel,({display:r})=>{this._popperShow=r==="show"}),t.add(this._colorPanelPopper),super.firstUpdated(e)}render(){const e=Jce(this.elements)??_m,t={backgroundColor:`var(${e})`},r=Qce(this.elements);return rt`
      <edgeless-tool-icon-button
        .tooltip=${"Thin"}
        @click=${()=>this._setBrushSize(zd.Thin)}
      >
        <div
          class="brush-size-button"
          ?active=${r===zd.Thin}
        >
          <div class="thin"></div>
        </div>
      </edgeless-tool-icon-button>
      <edgeless-tool-icon-button
        .tooltip=${"Thick"}
        @click=${()=>this._setBrushSize(zd.Thick)}
      >
        <div
          class="brush-size-button"
          ?active=${r===zd.Thick}
        >
          <div class="thick"></div>
        </div>
      </edgeless-tool-icon-button>
      <menu-divider .vertical=${!0}></menu-divider>
      <edgeless-tool-icon-button
        .tooltip=${this._popperShow?"":"Color"}
        .active=${!1}
        @click=${()=>{var o;return(o=this._colorPanelPopper)==null?void 0:o.toggle()}}
      >
        <div class="brush-size-button">
          <div class="thick" style=${Ur(t)}></div>
        </div>
      </edgeless-tool-icon-button>
      <div class="color-panel-container">
        <edgeless-color-panel
          .value=${e}
          @select=${o=>this._setBrushColor(o.detail)}
        >
        </edgeless-color-panel>
      </div>
    `}};Ou.styles=vr`
    :host {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      color: var(--affine-text-primary-color);
      fill: currentColor;
    }

    menu-divider {
      height: 24px;
    }

    .color-panel-container {
      display: none;
      padding: 4px;
      justify-content: center;
      align-items: center;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }

    .color-panel-container[data-show] {
      display: block;
    }

    .brush-size-button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 24px;
      height: 24px;
      box-sizing: border-box;
      border-radius: 4px;
      cursor: pointer;
    }

    .brush-size-button div {
      border-radius: 50%;
      background-color: var(--affine-icon-color);
    }

    .brush-size-button[active] div {
      background-color: var(--affine-blue);
    }

    .brush-size-button .thin {
      width: 4px;
      height: 4px;
    }

    .brush-size-button .thick {
      width: 10px;
      height: 10px;
    }
  `;mp([Ft()],Ou.prototype,"elements",void 0);mp([Ft({type:Object})],Ou.prototype,"selectionState",void 0);mp([Ft()],Ou.prototype,"page",void 0);mp([Ft()],Ou.prototype,"surface",void 0);mp([Ft()],Ou.prototype,"slots",void 0);mp([Ar()],Ou.prototype,"_popperShow",void 0);mp([Rr(".color-panel-container")],Ou.prototype,"_colorPanel",void 0);Ou=mp([lr("edgeless-change-brush-button")],Ou);var Fu=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function ede(n){const e=Jl(n,r=>r.color),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function tde(n){const e=Jl(n,r=>r.mode),t=Ql(Object.entries(e),([r,o])=>o);return t?Number(t[0]):null}function nde(n){const e=Jl(n,r=>r.lineWidth===4?"s":"l"),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}function rde(n){const e=Jl(n,r=>{switch(r.strokeStyle){case ya.Solid:return"solid";case ya.Dashed:return"dash";case ya.None:return"none"}}),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}let cd=class extends so{constructor(){super(...arguments),this.elements=[],this._colorPanelPopper=null,this._disposables=new Ya,this._lineStylesPanelPopper=null,this._popperShow=!1}_forceUpdateSelection(){this.slots.selectionUpdated.emit({...this.selectionState})}_setConnectorMode(e){this.page.captureSync(),this.elements.forEach(t=>{if(t.mode!==e)if(t.mode===Hs.Orthogonal){const r=[t.controllers[0],t.controllers[t.controllers.length-1]].map(o=>({...o,x:o.x+t.x,y:o.y+t.y}));this.surface.updateElement(t.id,{controllers:r,mode:e})}else{const{start:r,end:o}=Ak(t,this.surface,this.page),i=Yv(r.rect,o.rect,r.point,o.point,[]);this.surface.updateElement(t.id,{controllers:i,mode:e})}}),this._forceUpdateSelection()}_setConnectorColor(e){this.page.captureSync(),this.elements.forEach(t=>{t.color!==e&&this.surface.updateElement(t.id,{color:e})})}_setShapeStrokeWidth(e){this.elements.forEach(t=>{this.surface.updateElement(t.id,{lineWidth:e})}),this._forceUpdateSelection()}_setShapeStrokeStyle(e){this.elements.forEach(t=>{this.surface.updateElement(t.id,{strokeStyle:e})}),this._forceUpdateSelection()}_setShapeStyles({type:e,value:t}){if(e==="size"){const r=t==="s"?4:10;this._setShapeStrokeWidth(r)}else if(e==="lineStyle")switch(t){case"solid":{this._setShapeStrokeStyle(ya.Solid);break}case"dash":{this._setShapeStrokeStyle(ya.Dashed);break}case"none":{this._setShapeStrokeStyle(ya.None);break}}}firstUpdated(e){const t=this._disposables;this._colorPanelPopper=td(this._colorButton,this._colorPanel),t.add(this._colorPanelPopper),this._lineStylesPanelPopper=td(this._lineStylesButton,this._lineStylesPanel,({display:r})=>{this._popperShow=r==="show"}),t.add(this._lineStylesPanelPopper),super.firstUpdated(e)}render(){const e=ede(this.elements)??_m,t={backgroundColor:`var(${e})`},r=tde(this.elements),o=nde(this.elements)??"s",i=rde(this.elements)??"solid";return rt`
      <edgeless-tool-icon-button
        .tooltip=${"Straight line"}
        .tipPosition=${"bottom"}
        @click=${()=>this._setConnectorMode(Hs.Straight)}
      >
        <div
          class="connector-mode-button"
          ?active=${r===Hs.Straight}
        >
          ${tk}
        </div>
      </edgeless-tool-icon-button>
      <edgeless-tool-icon-button
        .tooltip=${"Connector"}
        .tipPosition=${"bottom"}
        @click=${()=>this._setConnectorMode(Hs.Orthogonal)}
      >
        <div
          class="connector-mode-button"
          ?active=${r===Hs.Orthogonal}
        >
          ${cR}
        </div>
      </edgeless-tool-icon-button>
      <menu-divider .vertical=${!0}></menu-divider>
      <edgeless-tool-icon-button
        class="connector-color-button"
        .tooltip=${"Color"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var a;return(a=this._colorPanelPopper)==null?void 0:a.toggle()}}
      >
        <div>
          <div class="color" style=${Ur(t)}></div>
        </div>
      </edgeless-tool-icon-button>
      <div class="color-panel-container">
        <edgeless-color-panel
          .value=${e}
          @select=${a=>this._setConnectorColor(a.detail)}
        >
        </edgeless-color-panel>
      </div>

      <edgeless-tool-icon-button
        class="line-styles-button"
        .tooltip=${this._popperShow?"":"Border style"}
        .tipPosition=${"bottom"}
        .active=${!1}
        @click=${()=>{var a;return(a=this._lineStylesPanelPopper)==null?void 0:a.toggle()}}
      >
        ${lR}
      </edgeless-tool-icon-button>
      ${Wz({selectedLineSize:o,selectedLineStyle:i,lineStyle:["solid","dash"],onClick:a=>{this._setShapeStyles(a)}})}
    `}};cd.styles=[e_,Uz,vr`
      :host {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        color: var(--affine-text-primary-color);
        fill: currentColor;
      }

      menu-divider {
        height: 24px;
      }

      .color-panel-container {
        display: none;
        padding: 4px;
        justify-content: center;
        align-items: center;
        background: var(--affine-background-overlay-panel-color);
        box-shadow: var(--affine-shadow-2);
        border-radius: 8px;
      }

      .color-panel-container[data-show] {
        display: block;
      }

      .connector-mode-button {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 24px;
        height: 24px;
        box-sizing: border-box;
        border-radius: 4px;
        cursor: pointer;
      }

      .connector-mode-button[active] {
        background-color: var(--affine-hover-color);
      }

      .connector-color-button .color {
        width: 16px;
        height: 16px;
        border-radius: 50%;
      }

      .line-style-panel {
        display: none;
      }
      .line-style-panel[data-show] {
        display: flex;
      }
    `];Fu([Ft()],cd.prototype,"elements",void 0);Fu([Ft({type:Object})],cd.prototype,"selectionState",void 0);Fu([Ft()],cd.prototype,"page",void 0);Fu([Ft()],cd.prototype,"surface",void 0);Fu([Ft()],cd.prototype,"slots",void 0);Fu([Rr(".connector-color-button")],cd.prototype,"_colorButton",void 0);Fu([Rr(".color-panel-container")],cd.prototype,"_colorPanel",void 0);Fu([Rr(".line-styles-button")],cd.prototype,"_lineStylesButton",void 0);Fu([Rr(".line-style-panel")],cd.prototype,"_lineStylesPanel",void 0);cd=Fu([lr("edgeless-change-connector-button")],cd);var J1=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function ode(n){const e=Jl(n,r=>r.background),t=Ql(Object.entries(e),([r,o])=>o);return t?t[0]:null}let jh=class extends ui(so){constructor(){super(...arguments),this.frames=[],this._popperShow=!1,this._colorSelectorPopper=null}_renderSelectedColor(e){const t={backgroundColor:`var(${e})`};return rt`<div class="selected-background" style=${Ur(t)}>
      A
    </div>`}_setBlockBackground(e){this.frames.forEach(t=>{this.page.updateBlock(t,{background:e})}),this.slots.selectionUpdated.emit({...this.selectionState})}firstUpdated(e){const t=this._disposables;this._colorSelectorPopper=td(this,this._colorSelector,({display:r})=>{this._popperShow=r==="show"}),t.add(this._colorSelectorPopper),super.firstUpdated(e)}render(){const e=ode(this.frames)||zv[0];return rt`
      <edgeless-tool-icon-button
        .tooltip=${this._popperShow?"":"Color"}
        .active=${!1}
        @click=${()=>{var t;return(t=this._colorSelectorPopper)==null?void 0:t.toggle()}}
      >
        ${this._renderSelectedColor(e)}
      </edgeless-tool-icon-button>
      <edgeless-color-panel
        .value=${e}
        .options=${zv}
        .showLetterMark=${!0}
        @select=${t=>{this._setBlockBackground(t.detail)}}
      ></edgeless-color-panel>
    `}};jh.styles=vr`
    :host {
      display: block;
      color: var(--affine-text-primary-color);
      fill: currentColor;
    }

    edgeless-color-panel {
      display: none;
      width: 108px;
      height: 68px;
      padding: 8px 12px;
      flex-wrap: wrap;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }

    edgeless-color-panel[data-show] {
      display: flex;
    }

    .selected-background {
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      width: 16px;
      height: 16px;
      box-sizing: border-box;
      border-radius: 50%;
      color: var(--affine-text-primary-color);
      font-size: 12px;
    }
  `;J1([Ft()],jh.prototype,"frames",void 0);J1([Ft()],jh.prototype,"page",void 0);J1([Ft()],jh.prototype,"selectionState",void 0);J1([Ft()],jh.prototype,"slots",void 0);J1([Ar()],jh.prototype,"_popperShow",void 0);J1([Rr("edgeless-color-panel")],jh.prototype,"_colorSelector",void 0);jh=J1([lr("edgeless-change-frame-button")],jh);var Q1=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const ide=[{name:"Bring to front",type:"front"},{name:"Bring forward",type:"forward"},{name:"Send backward",type:"backward"},{name:"Send to back",type:"back"},{name:"Delete",type:"delete"}];function ade(n){return Vs(ide,e=>e.type,e=>rt`<div
        class="action-item"
        @click=${()=>n(e)}
        ?data-disabled=${e.disabled}
      >
        ${e.name}
      </div>`)}let Rh=class extends ui(so){constructor(){super(...arguments),this.elements=[],this._popperShow=!1,this._actionsMenuPopper=null,this._runAction=({type:e})=>{var t;switch(e){case"delete":this._delete();break;case"front":case"forward":case"backward":case"back":{const{frames:r,shapes:o}=this._splitElements();r.length&&this.slots.reorderingFramesUpdated.emit({elements:r,type:e}),o.length&&this.slots.reorderingShapesUpdated.emit({elements:o,type:e});break}}(t=this._actionsMenuPopper)==null||t.hide()}}_splitElements(){const e=[],t=[];return this.elements.forEach(r=>{Fs(r)?e.push(r):t.push(r)}),{frames:e,shapes:t}}_delete(){this.page.captureSync(),this.elements.forEach(e=>{var t;Fs(e)?(((t=this.page.root)==null?void 0:t.children)??[]).length>1&&this.page.deleteBlock(e):this.surface.removeElement(e.id)}),this.slots.selectionUpdated.emit({selected:[],active:!1})}firstUpdated(e){const t=this._disposables;this._actionsMenuPopper=td(this,this._actionsMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._actionsMenuPopper),super.firstUpdated(e)}render(){const e=ade(this._runAction);return rt`
      <edgeless-tool-icon-button
        .tooltip=${this._popperShow?"":"More"}
        .active=${!1}
        @click=${()=>{var t;return(t=this._actionsMenuPopper)==null?void 0:t.toggle()}}
      >
        ${ek}
      </edgeless-tool-icon-button>
      <div class="more-actions-container">${e}</div>
    `}};Rh.styles=vr`
    :host {
      display: block;
      color: var(--affine-text-primary-color);
      fill: currentColor;
    }

    .more-actions-container {
      display: none;
      width: 158px;
      padding: 8px 4px;
      justify-content: center;
      align-items: center;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
      font-size: 16px;
      line-height: 22px;
    }

    .more-actions-container[data-show] {
      display: block;
    }

    .action-item {
      width: 100%;
      height: 32px;
      box-sizing: border-box;
      padding: 5px 12px;
      border-radius: 5px;
      overflow: hidden;
      text-overflow: ellipsis;
      cursor: pointer;
    }

    .action-item:hover {
      background-color: var(--affine-hover-color);
    }

    .action-item[data-disabled] {
      cursor: not-allowed;
    }
  `;Q1([Ft()],Rh.prototype,"elements",void 0);Q1([Ft()],Rh.prototype,"page",void 0);Q1([Ft()],Rh.prototype,"surface",void 0);Q1([Ft()],Rh.prototype,"slots",void 0);Q1([Ar()],Rh.prototype,"_popperShow",void 0);Q1([Rr(".more-actions-container")],Rh.prototype,"_actionsMenu",void 0);Rh=Q1([lr("edgeless-more-button")],Rh);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*sde(n,e){const t=typeof e=="function";if(n!==void 0){let r=-1;for(const o of n)r>-1&&(yield t?e(r):e),r++,yield o}}var Om=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Jf=class extends so{constructor(){super(...arguments),this.selected=[]}_groupSelected(){return BR(this.selected,t=>Fs(t)?"frame":t.type)}_getShapeButton(e){return e!=null&&e.length?rt`<edgeless-change-shape-button
          .elements=${e}
          .page=${this.page}
          .surface=${this.surface}
          .slots=${this.slots}
          .selectionState=${this.selectionState}
        >
        </edgeless-change-shape-button>`:null}_getBrushButton(e){return e!=null&&e.length?rt`<edgeless-change-brush-button
          .elements=${e}
          .page=${this.page}
          .surface=${this.surface}
          .slots=${this.slots}
          .selectionState=${this.selectionState}
        >
        </edgeless-change-brush-button>`:null}_getConnectorButton(e){return e!=null&&e.length?rt` <edgeless-change-connector-button
          .elements=${e}
          .page=${this.page}
          .surface=${this.surface}
          .slots=${this.slots}
          .selectionState=${this.selectionState}
        >
        </edgeless-change-connector-button>`:null}_getFrameButton(e){return e!=null&&e.length?rt`<edgeless-change-frame-button
          .frames=${e}
          .page=${this.page}
          .surface=${this.surface}
          .slots=${this.slots}
          .selectionState=${this.selectionState}
        >
        </edgeless-change-frame-button>`:null}_getTextButton(e){return e!=null&&e.length?rt`<edgeless-change-text-button
          .texts=${e}
          .page=${this.page}
          .surface=${this.surface}
          .slots=${this.slots}
          .selectionState=${this.selectionState}
        >
        </edgeless-change-text-button>`:null}render(){const e=this._groupSelected(),{shape:t,brush:r,connector:o,frame:i,text:a}=e,l=dQ(Object.values(e),u=>!!u.length,2)?[]:[this._getShapeButton(t),this._getBrushButton(r),this._getConnectorButton(o),this._getFrameButton(i),this._getTextButton(a)].filter(u=>!!u),d=l.length?rt`<menu-divider .vertical=${!0}></menu-divider>`:Di;return rt`<div class="container" @pointerdown=${_u}>
      ${sde(l,()=>"")} ${d}
      <edgeless-more-button
        .elements=${this.selected}
        .page=${this.page}
        .surface=${this.surface}
        .slots=${this.slots}
      >
      </edgeless-more-button>
    </div>`}};Jf.styles=vr`
    :host {
      display: block;
      user-select: none;
    }

    .container {
      display: flex;
      align-items: center;
      height: 48px;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }

    menu-divider {
      height: 24px;
    }
  `;Om([Ft()],Jf.prototype,"selected",void 0);Om([Ft({type:Object})],Jf.prototype,"selectionState",void 0);Om([Ft()],Jf.prototype,"page",void 0);Om([Ft()],Jf.prototype,"surface",void 0);Om([Ft()],Jf.prototype,"slots",void 0);Jf=Om([lr("edgeless-component-toolbar")],Jf);var ps;(function(n){n.Left="left",n.Right="right",n.TopLeft="top-left",n.BottomLeft="bottom-left",n.TopRight="top-right",n.BottomRight="bottom-right"})(ps||(ps={}));function W0(n,e){const t=r=>{r.stopPropagation(),e&&e(r,n)};return rt`<div
    aria-label=${`handle-${n}`}
    @pointerdown=${t}
  ></div>`}function lde(n,e){switch(n){case"corner":{const t=W0(ps.TopLeft,e),r=W0(ps.TopRight,e),o=W0(ps.BottomLeft,e),i=W0(ps.BottomRight,e);return rt`
        ${t}
        ${r}
        ${o}
        ${i}
      `}case"edge":{const t=W0(ps.Left,e),r=W0(ps.Right,e);return rt`${t} ${r}`}case"none":return Di}}class cde{constructor(e,t){this._dragDirection=ps.Left,this._dragPos={start:{x:0,y:0},end:{x:0,y:0}},this._bounds=new Map,this._commonBound=[0,0,0,0],this._aspectRatio=1,this._resizeMode="none",this._zoom=1,this._shiftKey=!1,this.onPointerDown=(r,o,i,a,s)=>{r.stopPropagation(),this._bounds=i;const{x:l,y:d,w:u,h:p}=km([...i.values()]);this._commonBound=[l,d,l+u,d+p],this._dragDirection=o,this._dragPos.start={x:r.x,y:r.y},this._dragPos.end={x:r.x,y:r.y},this._aspectRatio=u/p,this._resizeMode=a,this._zoom=s;const f=c=>{a!=="none"&&(this._shiftKey||(this._shiftKey=c.shiftKey),this._dragPos.end={x:c.x,y:c.y},this._resize(this._shiftKey))},h=c=>{this._onResizeEnd(),this._bounds.clear(),this._dragPos={start:{x:0,y:0},end:{x:0,y:0}},this._commonBound=[0,0,0,0],document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",h)};document.addEventListener("pointermove",f),document.addEventListener("pointerup",h)},this._onResizeMove=e,this._onResizeEnd=t}_resize(e=!1){const{_aspectRatio:t,_dragDirection:r,_dragPos:o,_resizeMode:i,_zoom:a,_commonBound:s}=this,l=i==="corner",{x:d,y:u}=o.start,{x:p,y:f}=o.end,h=(p-d)/a,[c,g,m,b]=s,v=m-c,w=b-g;let[_,k,y,S]=s,C=0,I=0,A=!1,T=!1;if(l){const $=(f-u)/a;switch(r){case ps.TopLeft:{_+=h,k+=$;break}case ps.BottomRight:{y+=h,S+=$;break}case ps.TopRight:y+=h,k+=$;break;case ps.BottomLeft:{_+=h,S+=$;break}}const ee=y-_,Q=S-k,pe=ee/v,ie=Q/w;if(A=pe<0,T=ie<0,e&&l){const te=Math.abs(ee),Z=Math.abs(Q),D=t<te/Z,B=te/t*(T?1:-1),H=Z*t*(A?1:-1);switch(r){case ps.TopLeft:{D?k=S+B:_=y+H;break}case ps.BottomRight:{D?S=k-B:y=_-H;break}case ps.TopRight:D?k=S+B:y=_-H;break;case ps.BottomLeft:{D?S=k-B:_=y+H;break}}}}else{switch(r){case ps.Left:_+=h;break;case ps.Right:y+=h;break}A=y<_}if(A){const $=y;y=_,_=$}if(T){const $=S;S=k,k=$}C=Math.abs(y-_),I=Math.abs(S-k);const L={x:_,y:k,w:C,h:I},j=new Map;this._bounds.forEach(($,ee)=>{const{x:Q,y:pe,w:ie,h:te}=$,Z=(A?m-Q-ie:Q-c)/v,D=(T?b-pe-te:pe-g)/w,B=L.w*Z+L.x,H=L.h*D+L.y,V=L.w*(ie/v),R=L.h*(te/w);j.set(ee,new ns(B,H,V,R))}),this._onResizeMove(j)}onPressShiftKey(e){this._shiftKey!==e&&(this._shiftKey=e,this._resize(e))}}function eO(n,e,t,r,o,i,a){const s=n.clientX,l=n.clientY,d=r.controllers.map(g=>({...g,x:g.x+r.x,y:g.y+r.y})),u=o==="start"?d[0]:d[d.length-1],p=u.x,f=u.y,h=g=>{const{clientX:m,clientY:b}=g,v=m-s,w=b-l,{zoom:_}=e.viewport,k=p+v/_,y=f+w/_,[S,C]=e.toViewCoord(k,y),{start:I,end:A}=Ak(r,e,t),T=eN(e,t,S,C,Q=>Q.id!==r.id&&Q.type!=="connector"),L=T?new P1(...Da(Th(T))):null,{point:j,position:$}=fC(k,y,L);let ee;o==="start"?ee=Yv(L,A.rect,j,A.point,d,i,"end"):ee=Yv(I.rect,L,I.point,j,d,i,"start"),o==="start"?e.updateElement(r.id,{controllers:ee,startElement:T&&$?{id:T.id,position:$}:void 0}):e.updateElement(r.id,{controllers:ee,endElement:T&&$?{id:T.id,position:$}:void 0}),a()},c=()=>{document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",c)};document.addEventListener("pointermove",h),document.addEventListener("pointerup",c)}function dde(n){const e=[];for(let t=0;t<n.length-1;t++){const r=n[t],o=n[t+1],i=r.x===o.x,a=i?{x:r.x,y:(r.y+o.y)/2,position:t,isVertical:i}:{x:(r.x+o.x)/2,y:r.y,position:t,isVertical:i};e.push(a)}return e}function ude(n,e,t,r,o,i){const a=n.clientX,s=n.clientY,{controllers:l,x:d,y:u}=r,p=h=>{const{isVertical:c,position:g}=o,{zoom:m}=e.viewport,b=l.map(C=>({...C,x:C.x+d,y:C.y+u})),v=c?h.clientX-a:0,w=c?0:h.clientY-s,_=b[g],k={x:_.x+v/m,y:_.y+w/m,customized:!0},y=b[g+1],S={x:y.x+v/m,y:y.y+w/m,customized:!0};g===0?(b.splice(g+1,0,k),b[g+2]=S):g===b.length-2?(b[g]=k,b.splice(g+1,0,S)):(b[g]=k,b[g+1]=S),e.updateElement(r.id,{controllers:wk(b)}),i()},f=h=>{document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",f)};document.addEventListener("pointermove",p),document.addEventListener("pointerup",f)}function hde(n,e,t,r){const{controllers:o,mode:i}=n,a=i===Hs.Orthogonal?dde(o):[],s=e.viewport.zoom,l={position:"absolute",left:`${o[0].x*s}px`,top:`${o[0].y*s}px`},d={position:"absolute",left:`${o[o.length-1].x*s}px`,top:`${o[o.length-1].y*s}px`};return rt`
    <style>
      .line-controller {
        position: absolute;
        width: 9px;
        height: 9px;
        box-sizing: border-box;
        border-radius: 50%;
        border: 2px solid var(--affine-text-emphasis-color);
        background-color: var(--affine-background-primary-color);
        transform: translate(-50%, -50%);
        cursor: pointer;
        z-index: 10;
        pointer-events: all;
        /**
         * Fix: pointerEvent stops firing after a short time.
         * When a gesture is started, the browser intersects the touch-action values of the touched element and its ancestors,
         * up to the one that implements the gesture (in other words, the first containing scrolling element)
         * https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action
         */
        touch-action: none;
      }
    </style>
    <div
      class="line-controller line-start"
      style=${Ur(l)}
      @pointerdown=${u=>{u.stopPropagation(),eO(u,e,t,n,"start",i,r)}}
    ></div>
    <div
      class="line-controller line-end"
      style=${Ur(d)}
      @pointerdown=${u=>{u.stopPropagation(),eO(u,e,t,n,"end",i,r)}}
    ></div>
    ${Vs(a,u=>Math.random(),u=>{const p={left:`${u.x*s}px`,top:`${u.y*s}px`,cursor:u.isVertical?"col-resize":"row-resize"};return rt`<div
          class="line-controller"
          style=${Ur(p)}
          @pointerdown=${f=>{f.stopPropagation(),ude(f,e,t,n,u,r)}}
        ></div>`})}
  `}var e0=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Dh=class extends ui(so){constructor(){super(),this._componentToolbarPopper=null,this._lock=!1,this._onDragMove=e=>{const{page:t,state:r,surface:o}=this,i=new Map(r.selected.map(a=>[a.id,a]));e.forEach((a,s)=>{const l=i.get(s);if(l){if(Fs(l)){let d=a.x,u=a.y,p=a.w,f=Da(l.xywh)[3];p<cT&&(p=cT,d=a.x),f<dT&&(f=dT,u=a.y),t.updateBlock(l,{xywh:JSON.stringify([d,u,p,f])})}else if(l instanceof E1){const d=a.h/l.h;a.w=l.w*d,o.updateElement(s,{xywh:_1(a.x,a.y,a.w,a.h),fontSize:l.fontSize*d})}else o.setElementBound(l.id,a);rN(l,[l],o,t)}}),this.requestUpdate()},this._onDragEnd=()=>{this._lock&&this.page.captureSync(),this._lock=!1},this._resizeManager=new cde(this._onDragMove,this._onDragEnd),this.addEventListener("pointerdown",_u)}get zoom(){return this.surface.viewport.zoom}get resizeMode(){return this.state.selected.length===1&&this.state.selected[0].type==="connector"?"none":this.state.selected.find(t=>Fs(t))?"edge":"corner"}firstUpdated(){const{_disposables:e,slots:t}=this;if(e.add(t.viewportUpdated.on(()=>this.requestUpdate())),e.add(t.pressShiftKeyUpdated.on(r=>this._resizeManager.onPressShiftKey(r))),this._componentToolbarPopper=this._componentToolbar?sd(this._selectedRect,this._componentToolbar,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,12]}},{name:"flip",options:{fallbackPlacements:["bottom"]}}]}):null,e.add(()=>{var r;return(r=this._componentToolbarPopper)==null?void 0:r.destroy()}),this._componentToolbar){const r=new ResizeObserver(()=>{var o;return(o=this._componentToolbarPopper)==null?void 0:o.update()});r.observe(this._componentToolbar),e.add(()=>r.disconnect())}}updated(e){var t;(t=this._componentToolbarPopper)==null||t.update(),super.updated(e)}render(){const{state:e}=this,{active:t,selected:r}=e;if(r.length===0||t&&r[0]instanceof E1)return Di;const{page:o,surface:i,resizeMode:a,_resizeManager:s}=this,l=KD(r,i.viewport),d=VD(l,t,!0),p=!t&&!o.readonly?lde(a,(c,g)=>{const m=Yre(r);s.onPointerDown(c,g,m,a,this.zoom)}):Di,f=r.length===1&&r[0].type==="connector"?hde(r[0],this.surface,this.page,()=>{this.slots.selectionUpdated.emit({...e})}):Di,h=t?Di:rt`<edgeless-component-toolbar
          .selected=${r}
          .page=${this.page}
          .surface=${this.surface}
          .slots=${this.slots}
          .selectionState=${e}
        >
        </edgeless-component-toolbar>`;return rt`
      <div class="affine-edgeless-selected-rect" style=${Ur(d)}>
        ${p} ${f}
      </div>
      ${h}
    `}};Dh.styles=vr`
    :host {
      display: block;
      user-select: none;
    }

    .affine-edgeless-selected-rect {
      position: absolute;
      border-radius: 0;
      pointer-events: none;
      box-sizing: border-box;
      z-index: 1;
      border: var(--affine-border-width) solid var(--affine-blue);
    }

    .affine-edgeless-selected-rect > [aria-label^='handle'] {
      position: absolute;
      width: 12px;
      height: 12px;
      box-sizing: border-box;
      border-radius: 6px;
      z-index: 10;
      border: 2px var(--affine-blue) solid;
      background: white;
      pointer-events: auto;
      user-select: none;
      outline: none;

      /**
       * Fix: pointerEvent stops firing after a short time.
       * When a gesture is started, the browser intersects the touch-action values of the touched element and its ancestors,
       * up to the one that implements the gesture (in other words, the first containing scrolling element)
       * https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action
       */
      touchaction: none;
    }

    :host([disabled='true'])
      .affine-edgeless-selected-rect
      > [aria-label^='handle'] {
      pointer-events: none;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-top-left'] {
      cursor: nwse-resize;
      left: -6px;
      top: -6px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-top-right'] {
      cursor: nesw-resize;
      top: -6px;
      right: -6px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-bottom-right'] {
      cursor: nwse-resize;
      right: -6px;
      bottom: -6px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-bottom-left'] {
      cursor: nesw-resize;
      bottom: -6px;
      left: -6px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-left'],
    .affine-edgeless-selected-rect > [aria-label='handle-right'] {
      cursor: ew-resize;
      top: 0;
      bottom: 0;
      height: 100%;
      width: 6px;
      border: 0;
      background: transparent;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-left'] {
      left: -3.5px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-right'] {
      right: -3.5px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-left']:after,
    .affine-edgeless-selected-rect > [aria-label='handle-right']:after {
      position: absolute;
      width: 12px;
      height: 12px;
      box-sizing: border-box;
      border-radius: 6px;
      z-index: 10;
      border: 2px var(--affine-blue) solid;
      content: '';
      top: calc(50% - 6px);
      background: white;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-left']:after {
      left: -3px;
    }

    .affine-edgeless-selected-rect > [aria-label='handle-right']:after {
      right: -3px;
    }

    edgeless-component-toolbar {
      /* greater than handle */
      z-index: 11;
    }
  `;e0([Ft({type:oq})],Dh.prototype,"page",void 0);e0([Ft({type:$D})],Dh.prototype,"surface",void 0);e0([Ft({type:Object})],Dh.prototype,"state",void 0);e0([Ft()],Dh.prototype,"slots",void 0);e0([Rr(".affine-edgeless-selected-rect")],Dh.prototype,"_selectedRect",void 0);e0([Rr("edgeless-component-toolbar")],Dh.prototype,"_componentToolbar",void 0);Dh=e0([lr("edgeless-selected-rect")],Dh);var Am=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Qf=class extends ui(so){constructor(){super(...arguments),this._popperShow=!1,this._shapeMenuPopper=null}_toggleShapeMenu(){var e;(e=this._shapeMenuPopper)==null||e.toggle()}firstUpdated(e){const t=this._disposables;this._shapeMenuPopper=td(this,this._shapeMenu,({display:r})=>{this._popperShow=r==="show"}),t.add(this._shapeMenuPopper),t.add(this._shapeMenu.slots.select.on(r=>{this.setMouseMode({type:"shape",shape:r,fillColor:r4,strokeColor:o4})})),super.firstUpdated(e)}disconnectedCallback(){var e;(e=this._disposables)==null||e.dispose(),super.disconnectedCallback()}render(){var r;const e=(r=this.mouseMode)==null?void 0:r.type,t=e==="shape"?this.mouseMode.shape:void 0;return rt`
      <edgeless-tool-icon-button
        .tooltip=${this._popperShow?"":Lf("Shape","S")}
        .active=${e==="shape"}
        @click=${()=>{this.setMouseMode({type:"shape",shape:"rect",fillColor:r4,strokeColor:o4}),this._toggleShapeMenu()}}
      >
        ${Yq}
      </edgeless-tool-icon-button>
      <edgeless-shape-menu .selectedShape=${t}>
      </edgeless-shape-menu>
    `}};Qf.styles=vr`
    :host {
      display: flex;
    }

    edgeless-shape-menu {
      display: none;
    }

    edgeless-shape-menu[data-show] {
      display: block;
    }
  `;Am([Ft()],Qf.prototype,"mouseMode",void 0);Am([Ft()],Qf.prototype,"edgeless",void 0);Am([Ft()],Qf.prototype,"setMouseMode",void 0);Am([Ar()],Qf.prototype,"_popperShow",void 0);Am([Rr("edgeless-shape-menu")],Qf.prototype,"_shapeMenu",void 0);Qf=Am([lr("edgeless-shape-tool-button")],Qf);var t_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function fde(n,e){if(n.type!=="brush")return Di;const{lineWidth:t}=n;return rt`
    <div class="brush-size-button-group has-tool-tip">
      <!-- This tooltip is for the last button(Thick) -->
      <tool-tip inert role="tooltip" tip-position="top" arrow>Thick</tool-tip>

      <div
        class="brush-size-button has-tool-tip"
        ?active=${t===zd.Thin}
        @click=${()=>e(zd.Thin)}
      >
        <div class="thin"></div>
        <tool-tip inert role="tooltip" tip-position="top" arrow>
          Thin
        </tool-tip>
      </div>

      <div
        class="brush-size-button"
        ?active=${t===zd.Thick}
        @click=${()=>e(zd.Thick)}
      >
        <div class="thick"></div>
      </div>
    </div>
  `}let tb=class extends so{constructor(){super(...arguments),this._setBrushColor=e=>{if(this.mouseMode.type!=="brush")return;const{lineWidth:t}=this.mouseMode;this.edgeless.slots.mouseModeUpdated.emit({type:"brush",color:e,lineWidth:t})},this._setBrushWidth=e=>{if(this.mouseMode.type!=="brush")return;const{color:t}=this.mouseMode;this.edgeless.slots.mouseModeUpdated.emit({type:"brush",color:t,lineWidth:e})}}render(){if(this.mouseMode.type!=="brush")return Di;const{color:e}=this.mouseMode,t=fde(this.mouseMode,this._setBrushWidth);return rt`
      <div class="container">
        ${t}
        <menu-divider .vertical=${!0}></menu-divider>
        <edgeless-color-panel
          .value=${e}
          @select=${r=>this._setBrushColor(r.detail)}
        ></edgeless-color-panel>
      </div>
    `}};tb.styles=vr`
    :host {
      width: 260px;
      z-index: 1;
    }
    .container {
      display: flex;
      padding: 4px;
      justify-content: center;
      align-items: center;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }

    .brush-size-button-group {
      display: flex;
      flex-direction: column;
    }

    .brush-size-button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 32px;
      height: 32px;
      box-sizing: border-box;
      border-radius: 4px;
      cursor: pointer;
    }

    .brush-size-button[active],
    .brush-size-button:hover {
      background-color: var(--affine-hover-color);
    }

    .brush-size-button div {
      border-radius: 50%;
      background-color: var(--affine-icon-color);
    }

    .brush-size-button .thin {
      width: 4px;
      height: 4px;
    }

    .brush-size-button .thick {
      width: 10px;
      height: 10px;
    }

    menu-divider {
      height: 62px;
    }

    ${hd}
  `;t_([Ft()],tb.prototype,"mouseMode",void 0);t_([Ft()],tb.prototype,"edgeless",void 0);tb=t_([lr("edgeless-brush-menu")],tb);var Qb=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function pde(n){const e=document.createElement("edgeless-brush-menu");xt(n.shadowRoot),n.shadowRoot.appendChild(e);const t=sd(n,e,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,12]}}]});return{element:e,dispose:()=>{e.remove(),t.destroy()}}}let R1=class extends so{constructor(){super(...arguments),this._popperShow=!1,this._brushMenu=null}_toggleBrushMenu(){this._brushMenu?(this._brushMenu.dispose(),this._brushMenu=null,this._popperShow=!1):(this._brushMenu=pde(this),this._brushMenu.element.mouseMode=this.mouseMode,this._brushMenu.element.edgeless=this.edgeless,this._popperShow=!0)}updated(e){var t;e.has("mouseMode")&&(this.mouseMode.type!=="brush"&&((t=this._brushMenu)==null||t.dispose(),this._brushMenu=null),this._brushMenu&&(this._brushMenu.element.mouseMode=this.mouseMode,this._brushMenu.element.edgeless=this.edgeless))}disconnectedCallback(){var e;(e=this._brushMenu)==null||e.dispose(),this._brushMenu=null,super.disconnectedCallback()}render(){var t;const e=(t=this.mouseMode)==null?void 0:t.type;return rt`
      <edgeless-tool-icon-button
        .tooltip=${this._popperShow?"":Lf("Pen","P")}
        .active=${e==="brush"}
        @click=${()=>{this.setMouseMode({type:"brush",lineWidth:4,color:_m}),this._toggleBrushMenu()}}
      >
        ${Rg}
      </edgeless-tool-icon-button>
    `}};R1.styles=vr`
    :host {
      display: flex;
    }
  `;Qb([Ft()],R1.prototype,"mouseMode",void 0);Qb([Ft()],R1.prototype,"edgeless",void 0);Qb([Ft()],R1.prototype,"setMouseMode",void 0);Qb([Ar()],R1.prototype,"_popperShow",void 0);R1=Qb([lr("edgeless-brush-tool-button")],R1);var n_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function gde(n,e){if(n.type!=="connector")return Di;const{mode:t}=n,r=Lf("Straight line","L"),o=Lf("Connector","X");return rt`
    <div class="connector-mode-button-group has-tool-tip">
      <!-- This tooltip is for the last button(Thick) -->
      <tool-tip inert role="tooltip" tip-position="top" arrow>
        ${o}
      </tool-tip>

      <div
        class="connector-mode-button has-tool-tip"
        ?active=${t===Hs.Straight}
        @click=${()=>e(Hs.Straight)}
      >
        ${tk}
        <tool-tip inert role="tooltip" tip-position="top" arrow>
          ${r}
        </tool-tip>
      </div>

      <div
        class="connector-mode-button"
        ?active=${t===Hs.Orthogonal}
        @click=${()=>e(Hs.Orthogonal)}
      >
        ${cR}
      </div>
    </div>
  `}let nb=class extends so{constructor(){super(...arguments),this._setConnectorColor=e=>{if(this.mouseMode.type!=="connector")return;const{mode:t}=this.mouseMode;this.edgeless.slots.mouseModeUpdated.emit({type:"connector",color:e,mode:t})},this._setConnectorMode=e=>{if(this.mouseMode.type!=="connector")return;const{color:t}=this.mouseMode;this.edgeless.slots.mouseModeUpdated.emit({type:"connector",color:t,mode:e})}}render(){if(this.mouseMode.type!=="connector")return Di;const{color:e}=this.mouseMode,t=gde(this.mouseMode,this._setConnectorMode);return rt`
      <div class="container">
        ${t}
        <menu-divider .vertical=${!0}></menu-divider>
        <edgeless-color-panel
          .value=${e}
          @select=${r=>this._setConnectorColor(r.detail)}
        ></edgeless-color-panel>
      </div>
    `}};nb.styles=vr`
    :host {
      width: 260px;
      z-index: 1;
    }
    .container {
      display: flex;
      padding: 4px;
      justify-content: center;
      align-items: center;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
    }

    .connector-mode-button-group {
      display: flex;
      flex-direction: column;
    }

    .connector-mode-button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 32px;
      height: 32px;
      box-sizing: border-box;
      border-radius: 4px;
      cursor: pointer;
    }

    .connector-mode-button[active],
    .connector-mode-button:hover {
      background-color: var(--affine-hover-color);
    }

    .connector-mode-button div {
      border-radius: 50%;
      background-color: var(--affine-icon-color);
    }

    menu-divider {
      height: 62px;
    }

    ${hd}
  `;n_([Ft()],nb.prototype,"mouseMode",void 0);n_([Ft()],nb.prototype,"edgeless",void 0);nb=n_([lr("edgeless-connector-menu")],nb);var $x=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function mde(n){const e=document.createElement("edgeless-connector-menu");xt(n.shadowRoot),n.shadowRoot.appendChild(e);const t=sd(n,e,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,12]}}]});return{element:e,dispose:()=>{e.remove(),t.destroy()}}}let em=class extends so{constructor(){super(...arguments),this._menu=null}_toggleMenu(){this._menu?(this._menu.dispose(),this._menu=null):(this._menu=mde(this),this._menu.element.mouseMode=this.mouseMode,this._menu.element.edgeless=this.edgeless)}updated(e){var t;e.has("mouseMode")&&(this.mouseMode.type!=="connector"&&((t=this._menu)==null||t.dispose(),this._menu=null),this._menu&&(this._menu.element.mouseMode=this.mouseMode,this._menu.element.edgeless=this.edgeless))}disconnectedCallback(){var e;(e=this._menu)==null||e.dispose(),this._menu=null,super.disconnectedCallback()}render(){var t;const e=(t=this.mouseMode)==null?void 0:t.type;return rt`
      <edgeless-tool-icon-button
        .tooltip=${"Connector"}
        .active=${e==="connector"}
        @click=${()=>{this.setMouseMode({type:"connector",mode:Hs.Orthogonal,color:_m}),this._toggleMenu()}}
      >
        ${qq}
      </edgeless-tool-icon-button>
    `}};em.styles=vr`
    :host {
      display: flex;
    }
  `;$x([Ft()],em.prototype,"mouseMode",void 0);$x([Ft()],em.prototype,"edgeless",void 0);$x([Ft()],em.prototype,"setMouseMode",void 0);em=$x([lr("edgeless-connector-tool-button")],em);var vde=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const tO=200;let i4=class extends ui(so){constructor(e){super(),this._imageLoading=!1,this._rafId=null,this.setMouseMode=t=>{this.edgeless.selection.setMouseMode(t)},this.edgeless=e}get mouseMode(){return this.edgeless.mouseMode}get zoom(){return this.edgeless.surface.viewport.zoom}_setCenter(e,t){this.edgeless.surface.viewport.setCenter(e,t),this.edgeless.slots.viewportUpdated.emit()}_setZoom(e,t){this.edgeless.surface.viewport.setZoom(e,t),this.edgeless.slots.viewportUpdated.emit()}_setZoomByStep(e){this._smoothZoom(x1(this.zoom+e,mD,gD))}_smoothZoom(e,t){const r=e-this.zoom,o=()=>{this._rafId&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(()=>{const i=r>0?1:-1,s=r/10,l=this._cutoff(this.zoom+s,e,i);this._setZoom(l,t),l!=e&&o()})};o()}_cutoff(e,t,r){return r>0&&e>t||r<0&&e<t?t:e}_zoomToFit(){const e=[],t=this.edgeless.frames[0];if(t){const p=Da(t.xywh),f=new ns(...p);e.push(f)}const r=this.edgeless.surface.getElementsBound();r&&e.push(r);const{viewport:o}=this.edgeless.surface;let{centerX:i,centerY:a,zoom:s}=o;if(e.length){const{width:p,height:f}=o,h=km(e);xt(h),s=Math.min((p-tO)/h.w,(f-tO)/h.h),i=h.x+h.w/2,a=h.y+h.h/2}else s=1;const u=this.zoom/s;if(u===1)this._smoothTranslate(i,a);else{const p=o.center,h=new ho(i,a).subtract(p.scale(u)).scale(1/(1-u));this._smoothZoom(s,h)}}_smoothTranslate(e,t){const{viewport:r}=this.edgeless.surface,o={x:e-r.centerX,y:t-r.centerY},i=()=>{this._rafId&&cancelAnimationFrame(this._rafId),this._rafId=requestAnimationFrame(()=>{const s={x:o.x/10,y:o.y/10},l={x:r.centerX+s.x,y:r.centerY+s.y},d=o.x>0?1:-1,u=o.y>0?1:-1;l.x=this._cutoff(l.x,e,d),l.y=this._cutoff(l.y,t,u),this._setCenter(l.x,l.y),(l.x!=e||l.y!=t)&&i()})};i()}async _addImage(){this._imageLoading=!0;const e={width:0,height:0,offsetX:0,offsetY:0},t=await P6(this.edgeless.page,c=>Object.assign(e,c)),{left:r,width:o,top:i,height:a}=this.edgeless.pageBlockContainer.getBoundingClientRect();if(e.width&&e.height){const c=o/a,g=a>100?a-100:a,m=e.width/e.height;if(c>=1)e.height=e.height>g?g:Math.min(e.height,g),e.width=m*e.height;else{const b=g*c;e.width=e.width>b?b:Math.min(e.width,b),e.height=e.width/m}}const{zoom:s}=this.edgeless.surface.viewport,l=r+o/2,d=i+a/2;let u=0,p=0;s>1?(u=l-e.width/2,p=d-e.height/2,e.width/=s,e.height/=s):(u=l-e.width*s/2,p=d-e.height*s/2);const{frameId:f}=this.edgeless.addNewFrame(t,new ho(u,p),e),h=this.edgeless.frames.find(c=>c.id===f);xt(h),this.edgeless.selection.switchToDefaultMode({selected:[h],active:!1}),this._imageLoading=!1}setZoomByAction(e){switch(e){case"fit":this._zoomToFit();break;case"reset":this._smoothZoom(1);break;case"in":case"out":this._setZoomByStep(k3*(e==="in"?1:-1))}}firstUpdated(){const{_disposables:e,edgeless:{slots:t}}=this;e.add(t.mouseModeUpdated.on(()=>this.requestUpdate())),e.add(t.viewportUpdated.on(()=>this.requestUpdate()))}render(){const{type:e}=this.mouseMode,t=`${Math.round(this.zoom*100)}%`;return rt`
      <div
        class="edgeless-toolbar-container"
        @dblclick=${_u}
        @mousedown=${_u}
        @mouseup=${_u}
        @pointerdown=${_u}
      >
        <edgeless-tool-icon-button
          .tooltip=${Lf("Select","V")}
          .active=${e==="default"}
          @click=${()=>this.setMouseMode({type:"default"})}
        >
          ${Kq}
        </edgeless-tool-icon-button>
        <edgeless-tool-icon-button
          .tooltip=${Lf("Text","T")}
          .active=${e==="text"}
          @click=${()=>this.setMouseMode({type:"text"})}
        >
          ${pR}
        </edgeless-tool-icon-button>
        <edgeless-shape-tool-button
          .mouseMode=${this.mouseMode}
          .edgeless=${this.edgeless}
          .setMouseMode=${this.setMouseMode}
        ></edgeless-shape-tool-button>
        <edgeless-tool-icon-button
          .disabled=${this._imageLoading}
          .tooltip=${"Image"}
          @click=${()=>this._addImage()}
        >
          ${aR}
        </edgeless-tool-icon-button>
        <edgeless-connector-tool-button
          .mouseMode=${this.mouseMode}
          .edgeless=${this.edgeless}
          .setMouseMode=${this.setMouseMode}
        ></edgeless-connector-tool-button>
        <edgeless-brush-tool-button
          .mouseMode=${this.mouseMode}
          .edgeless=${this.edgeless}
          .setMouseMode=${this.setMouseMode}
        ></edgeless-brush-tool-button>
        <edgeless-tool-icon-button
          .tooltip=${Lf("Hand","H")}
          .active=${e==="pan"}
          @click=${()=>this.setMouseMode({type:"pan",panning:!1})}
        >
          ${Jq}
        </edgeless-tool-icon-button>
        <edgeless-tool-icon-button
          .tooltip=${Lf("Note","N")}
          .active=${e==="note"}
          @click=${()=>this.setMouseMode({type:"note",background:zv[0]})}
        >
          ${cJ}
        </edgeless-tool-icon-button>
        <div class="divider"></div>
        <edgeless-tool-icon-button
          .tooltip=${"Fit to screen"}
          @click=${()=>this._zoomToFit()}
        >
          ${iJ}
        </edgeless-tool-icon-button>
        <edgeless-tool-icon-button
          .tooltip=${"Zoom out"}
          @click=${()=>this._setZoomByStep(-k3)}
        >
          ${oJ}
        </edgeless-tool-icon-button>
        <span class="zoom-percent" @click=${()=>this._smoothZoom(1)}>
          ${t}
        </span>
        <edgeless-tool-icon-button
          .tooltip=${"Zoom in"}
          @click=${()=>this._setZoomByStep(k3)}
        >
          ${$b}
        </edgeless-tool-icon-button>
      </div>
    `}};i4.styles=vr`
    :host {
      position: absolute;
      z-index: 2;
      bottom: 28px;
      left: calc(50%);
      display: flex;
      justify-content: center;
      transform: translateX(-50%);
      user-select: none;
    }

    .edgeless-toolbar-container {
      display: flex;
      align-items: center;
      height: 48px;
      background: var(--affine-background-overlay-panel-color);
      box-shadow: var(--affine-shadow-2);
      border-radius: 8px;
      fill: currentcolor;
    }

    .edgeless-toolbar-container[level='second'] {
      position: absolute;
      bottom: 8px;
      transform: translateY(-100%);
    }

    .edgeless-toolbar-container[hidden] {
      display: none;
    }

    .divider {
      width: 1px;
      height: 24px;
      margin: 0 7px;
      background-color: var(--affine-border-color);
    }

    .zoom-percent {
      display: block;
      box-sizing: border-box;
      width: 48px;
      height: 32px;
      line-height: 22px;
      padding: 5px;
      border-radius: 5px;
      font-size: 14px;
      font-weight: 500;
      text-align: center;
      cursor: pointer;
      color: var(--affine-icon-color);
    }

    .zoom-percent:hover {
      color: var(--affine-primary-color);
      background-color: var(--affine-hover-color);
    }
  `;i4=vde([lr("edgeless-toolbar")],i4);function bde(){return rt`
    <div class="affine-edgeless-mask" style=${Ur({position:"absolute",top:"0",left:"0",bottom:"0",right:"0",zIndex:"1"})}></div>
  `}function yde(n,e,t,r){const{xywh:o,background:i}=e,[a,s,l,d]=Da(o),u={position:"absolute",transform:`translate(${a}px, ${s}px)`,transformOrigin:"0 0",width:l+"px",height:d+"px",padding:`${y6}px`,background:`var(${i||zv[0]})`,pointerEvents:"all",zIndex:`${n}`,boxSizing:"border-box",borderRadius:"8px",border:"2px solid var(--affine-white-10)",boxShadow:"var(--affine-shadow-3)"},p=t?Di:bde();return rt`
    <div class="affine-edgeless-block-child" style=${Ur(u)}>
      ${r(e)} ${p}
    </div>
  `}function xde(n,e,t){return rt`
    ${Vs(n,r=>r.id,(r,o)=>yde(o,r,e,t))}
  `}function wde(n){if(n===null)return rt``;const e={left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"};return rt`
    <style>
      .affine-edgeless-dragging-area {
        position: absolute;
        background: var(--affine-hover-color);
        z-index: 1;
        pointer-events: none;
      }
    </style>
    <div class="affine-edgeless-dragging-area" style=${Ur(e)}></div>
  `}function Cde(n,e){if(!n)return null;const t=n.rect,r=VD(t);return rt`
    <div class="affine-edgeless-hover-rect" style=${Ur(r)}></div>
  `}class t0{constructor(e){this._draggingArea=null,this.enableHover=!1,this._edgeless=e}get draggingArea(){return this._draggingArea}get _surface(){return this._edgeless.surface}get _page(){return this._edgeless.page}get _blocks(){return this._edgeless.sortedFrames}}var ys;(function(n){n.ContentMoving="content-moving",n.Selecting="selecting",n.NativeEditing="native-editing",n.None="none",n.PreviewDragging="preview-dragging",n.AltCloning="alt-cloning"})(ys||(ys={}));class Sde extends t0{constructor(){super(...arguments),this.mouseMode={type:"default"},this.enableHover=!0,this.dragType=ys.None,this._startRange=null,this._dragStartPos={x:0,y:0},this._dragLastPos={x:0,y:0},this._lock=!1,this._isDoubleClickedOnMask=!1}get draggingArea(){return this.dragType===ys.Selecting?{start:new DOMPoint(this._dragStartPos.x,this._dragStartPos.y),end:new DOMPoint(this._dragLastPos.x,this._dragLastPos.y)}:null}get selectedBlocks(){return this._edgeless.selection.selectedBlocks}get state(){return this._edgeless.selection.state}get isActive(){return this._edgeless.selection.state.active}_pick(e,t){const{surface:r}=this._edgeless,[o,i]=r.viewport.toModelCoord(e,t),a=r.pickTop(o,i);return a||Ok(this._blocks,o,i)}_setNoneSelectionState(){this._edgeless.slots.selectionUpdated.emit({selected:[],active:!1}),ts(null)}_setSelectionState(e,t){this._edgeless.slots.selectionUpdated.emit({selected:e,active:t})}_handleClickOnSelected(e,t){const{selected:r,active:o}=this.state;if(this._edgeless.clearSelectedBlocks(),o&&r.length===1&&r[0]===e){px(t.raw.clientX,t.raw.clientY);return}if(!t.keys.shift&&r.length===1&&Fs(e)&&(r[0]===e&&!o||o&&r[0]!==e)){this._setSelectionState([e],!0),this._edgeless.slots.selectedBlocksUpdated.emit([]);return}if(t.keys.shift){const i=[...r];r.includes(e)?this._setSelectionState(i.filter(a=>a!==e),!1):this._setSelectionState([...i,e],!1)}else this._setSelectionState([e],!1)}_handleDragMoveEffect(e){rN(e,this.state.selected,this._edgeless.surface,this._page)}_handleSurfaceDragMove(e,t){this._lock||(this._lock=!0,this._page.captureSync());const{surface:r}=this._edgeless,{zoom:o}=r.viewport,i=this._dragLastPos.x-t.x,a=this._dragLastPos.y-t.y,s=e.x-i/o,l=e.y-a/o,d=e.w,u=e.h;(e.type!=="connector"||e instanceof vx&&nN(e,this.state.selected))&&r.setElementBound(e.id,{x:s,y:l,w:d,h:u}),this._handleDragMoveEffect(e)}_handleBlockDragMove(e,t){const[r,o,i,a]=JSON.parse(e.xywh),{zoom:s}=this._edgeless.surface.viewport,l=JSON.stringify([r+t.delta.x/s,o+t.delta.y/s,i,a]);this._page.updateBlock(e,{xywh:l}),this._handleDragMoveEffect(e),this.selectedBlocks.length&&this._edgeless.slots.selectedBlocksUpdated.emit(this.selectedBlocks)}_isInSelectedRect(e,t){const{selected:r}=this.state;if(!r.length)return!1;const o=km(r.map(s=>{if(Fs(s)){const[l,d,u,p]=Da(Th(s));return{x:l,y:d,w:u,h:p}}return s})),[i,a]=this._surface.toModelCoord(e,t);return!!(o&&Hb(o,i,a))}_forceUpdateSelection(){this._edgeless.slots.selectionUpdated.emit({...this.state})}_tryDeleteEmptyBlocks(){const e=this._blocks.filter(t=>NR(t));e.length===this._blocks.length&&e.shift(),e.length&&(this._page.captureSync(),e.forEach(t=>this._page.deleteBlock(t)))}_updateDragHandle(e){var d;const t=this.state.selected[0];if(!t||!Fs(t))return;const r=Hl(t);xt(r);const{raw:{clientX:o,clientY:i}}=e,a=new ho(o,i),s=d1(a,{container:r,rect:Xi.fromDOM(r)},this._edgeless.surface.viewport.zoom);let l=null;s&&(l={element:s,model:Fd(s),rect:Ea(s)},(d=this._edgeless.components.dragHandle)==null||d.onContainerMouseMove(e,l))}onContainerClick(e){this._tryDeleteEmptyBlocks();const t=this._pick(e.x,e.y);t?this._handleClickOnSelected(t,e):this._setNoneSelectionState(),this._isDoubleClickedOnMask=!1}onContainerContextMenu(e){}onContainerDblClick(e){const t=this._pick(e.x,e.y);if(t){if(t instanceof E1){oN(t,this._edgeless);return}}else{iN(this._edgeless,e);return}if(e.raw.target&&e.raw.target instanceof HTMLElement&&e.raw.target.classList.contains("affine-edgeless-mask")){this.onContainerClick(e),this._isDoubleClickedOnMask=!0;return}t4("double",e,this._page,this._edgeless)}onContainerTripleClick(e){this._isDoubleClickedOnMask||t4("triple",e,this._page,this._edgeless)}_determineDragType(e){if(this._isInSelectedRect(e.x,e.y))return this.state.active?ys.NativeEditing:ys.ContentMoving;{const t=this._pick(e.x,e.y);return t?(this._setSelectionState([t],!1),ys.ContentMoving):ys.Selecting}}async _cloneContent(e){this._lock=!0;const{surface:t}=this._edgeless,r=await Promise.all(this.state.selected.map(async o=>await this._cloneSelected(o,t)));this._setSelectionState(r,!1)}async _cloneSelected(e,t){var r;if(Fs(e)){const o=this._edgeless.getService("affine:frame"),i=this._page.addBlock("affine:frame",{xywh:e.xywh},(r=this._page.root)==null?void 0:r.id),a=this._page.getBlockById(i);return xt(a),await o.json2Block(a,o.block2Json(e).children),this._page.getBlockById(i)}else{const o=t.addElement(e.type,e.serialize());return t.pickById(o)}}async onContainerDragStart(e){let t=this._determineDragType(e);e.keys.alt&&t===ys.ContentMoving&&(t=ys.AltCloning,await this._cloneContent(e)),this.initializeDragState(e,t)}initializeDragState(e,t){this.dragType=t,this._startRange=Uf(e.x,e.y),this._dragStartPos={x:e.x,y:e.y},this._dragLastPos={x:e.x,y:e.y}}onContainerDragMove(e){switch(this.dragType){case ys.Selecting:{const t=this._dragStartPos.x,r=this._dragStartPos.y,o=Math.min(t,e.x),i=Math.min(r,e.y),[a,s]=this._surface.toModelCoord(o,i),l=Math.abs(t-e.x),d=Math.abs(r-e.y),{zoom:u}=this._surface.viewport,p=new ns(a,s,l/u,d/u),f=aoe(this._blocks,p),h=this._surface.pickByBound(p);this._setSelectionState([...f,...h],!1);break}case ys.AltCloning:case ys.ContentMoving:{this.state.selected.forEach(t=>{ooe(t)?this._handleSurfaceDragMove(t,e):this._handleBlockDragMove(t,e)}),this._forceUpdateSelection();break}case ys.NativeEditing:{fx(this._startRange,e);break}}this._dragLastPos={x:e.x,y:e.y}}onContainerDragEnd(e){if(this._lock&&(this._page.captureSync(),this._lock=!1),this.isActive){const{direction:t,selectedType:r}=lN(e);if(r==="Caret")return;bg({page:this._page,container:this._edgeless,direction:t,anchorEl:{getBoundingClientRect:()=>vg(t)}})}this.dragType=ys.None,this._dragStartPos={x:0,y:0},this._dragLastPos={x:0,y:0},this._forceUpdateSelection()}onContainerMouseMove(e){this.dragType!==ys.PreviewDragging&&this._updateDragHandle(e)}onContainerMouseOut(e){}onPressShiftKey(e){}}function kde(n){return new A1({container:n.mouseRoot,onDropCallback(e,t,r,o){const i=zf(t);if(!i.length)return;const a=i.map(Fd);if(!a.length)return;const s=n.page;if(r&&o!=="none"){const{model:p}=r;if(a.length===1&&KR(s,p,a[0]))return;const f=a[0].id,h=eC(p.id,n);xt(h);const c=eC(f,n);if(xt(c),s.captureSync(),o==="database")s.moveBlocks(a,p);else{const g=s.getParent(p);xt(g),s.moveBlocks(a,g,p,o==="before")}n.setSelection(h.model.id,!0,f,e);return}s.captureSync();const l=s.getParent(a[0]);xt(l);const d=l.children.findIndex(p=>p.id===a[0].id),u=l.children.findIndex(p=>p.id===a[a.length-1].id);if(n.moveBlocksWithNewFrame(a,e,{rect:Ea(i[0]),focus:!0,frameIndex:d===0?0:void 0}),d!==0&&u!==l.children.length-1){const p=Hl(l==null?void 0:l.children[u]);xt(p);const f=Ea(p);n.moveBlocksWithNewFrame(l==null?void 0:l.children.slice(u),new ho(f.x,f.y),{rect:f})}},setDragType(e){const{selection:t}=n;if(t.mouseMode.type==="default"){const r=t.currentController;r.dragType=e?ys.PreviewDragging:ys.None}},setSelectedBlock(e){const t=[];e&&t.push(e.element),n.slots.selectedBlocksUpdated.emit(t)},getSelectedBlocks(){return n.selection.selectedBlocks},getClosestBlockElement(e){if(n.mouseMode.type!=="default")return null;const t=aD(e);return t?d1(e,{container:t,rect:Xi.fromDOM(t)},n.surface.viewport.zoom):null}})}class _de{constructor(){this._cachedElements=new Map,this._lastRects=new Map,this.slots={resize:new Yo},this._onResize=e=>{const t=new Map;e.forEach(r=>{const o=r.target.closest(`[${Ss}]`),i=o==null?void 0:o.getAttribute(Ss);if(i){if(this._lastRects.has(i)){const a=this._lastRects.get(i);if(a&&Qp(a.x,r.contentRect.x)&&Qp(a.y,r.contentRect.y)&&Qp(a.width,r.contentRect.width)&&Qp(a.height,r.contentRect.height))return}this._lastRects.set(i,r.contentRect),t.set(i,r.contentRect)}}),t.size&&this.slots.resize.emit(t)},this._observer=new ResizeObserver(ux(this._onResize,1e3/60))}resetListener(e){var r;const t=new Set(this._cachedElements.keys());(r=e.root)==null||r.children.forEach(o=>{const i=o.id;t.delete(i);const a=Hl(o),s=a==null?void 0:a.querySelector(".affine-frame-block-container"),l=this._cachedElements.get(i);if(l){if(s===l)return;this._observer.unobserve(l),this._cachedElements.delete(i)}s&&(this._observer.observe(s),this._cachedElements.set(i,s))}),t.forEach(o=>{const i=this._cachedElements.get(o);i&&this._observer.unobserve(i)})}dispose(){this._observer.disconnect(),this.slots.resize.dispose(),this._cachedElements.clear(),this._lastRects.clear()}}function ph(n,e,t=!1){!t&&n.selection.isActive||n.selection.setMouseMode(e)}function Ede(n){let e=!1,t=null;Eo.addListener(sa.SPACE,r=>{const{mouseMode:o,state:i}=n.selection;if(r.type==="keydown"){if(o.type==="pan"||o.type==="default"&&i.active)return;e=!0,t=o,ph(n,{type:"pan",panning:!1});return}r.type==="keyup"&&(o.type==="pan"&&e&&t&&ph(n,t),e=!1)},{keydown:!0,keyup:!0})}function Pde(n){function e(t){j1(n.page);const{selected:r}=n.selection.state;r.forEach(o=>{var i;Fs(o)?(((i=n.page.root)==null?void 0:i.children)??[]).length>1&&n.page.deleteBlock(o):n.surface.removeElement(o.id)}),n.selection.clear(),n.slots.selectionUpdated.emit(n.selection.state)}Eo.addListener(sa.BACKSPACE,e),Eo.addListener(sa.DELETE,e)}function Mde(n,e="shift",t=!1){Eo.addListener(sa.ANY_KEY,r=>{r.key.toLowerCase()===e&&t!==r.shiftKey&&(t=r.shiftKey,n.slots.pressShiftKeyUpdated.emit(t))},{keydown:!0,keyup:!0})}function Ide(n){const e=Eo.newScope(pD.AFFINE_EDGELESS);ca.isActive(n)&&Eo.setScope(e);const t=ca.activeSlot.on(()=>{ca.isActive(n)&&Eo.setScope(e)});return Eo.withScope(e,()=>{Eo.addListener(sa.UP,r=>fz(r,n.page,{zoom:n.surface.viewport.zoom})),Eo.addListener(sa.DOWN,r=>pz(r,n.page,{zoom:n.surface.viewport.zoom})),Eo.addListener("v",()=>ph(n,{type:"default"})),Eo.addListener("t",()=>ph(n,{type:"text"})),Eo.addListener("h",()=>ph(n,{type:"pan",panning:!1})),Eo.addListener("n",()=>ph(n,{type:"note",background:zv[0]})),Eo.addListener("p",()=>ph(n,{type:"brush",color:_m,lineWidth:zd.Thin})),Eo.addListener("s",()=>ph(n,{type:"shape",shape:"rect",fillColor:r4,strokeColor:o4})),Eo.addListener(sa.ESC,()=>{n.slots.selectionUpdated.emit({selected:[],active:!1}),ph(n,{type:"default"},!0)}),Eo.addListener(sa.SELECT_ALL,r=>{r.preventDefault(),n.slots.selectionUpdated.emit({selected:[...n.frames,...n.surface.getElements()],active:!1})}),Eo.addListener(`${ki}+1`,r=>{r.preventDefault(),n.slots.zoomUpdated.emit("fit")}),Eo.addListener(`${ki}+-`,r=>{r.preventDefault(),n.slots.zoomUpdated.emit("out")}),Eo.addListener(`${ki}+0`,r=>{r.preventDefault(),n.slots.zoomUpdated.emit("reset")}),Eo.addListener(`${ki}+=`,r=>{r.preventDefault(),n.slots.zoomUpdated.emit("in")}),Ede(n),Pde(n),Mde(n),hz(n.page)}),()=>{Eo.deleteScope(e),t.dispose()}}class Tde extends t0{constructor(){super(...arguments),this.mouseMode={type:"brush",color:_m,lineWidth:4},this._draggingElementId=null,this._draggingPathPoints=null}onContainerClick(e){}onContainerContextMenu(e){}onContainerDblClick(e){}onContainerTripleClick(e){}onContainerDragStart(e){if(!this._page.awarenessStore.getFlag("enable_surface"))return;this._page.captureSync();const{viewport:t}=this._edgeless.surface,[r,o]=t.toModelCoord(e.point.x,e.point.y),{color:i,lineWidth:a}=this.mouseMode,s=[[r,o]],l=this._surface.addElement("brush",{points:s,color:i,lineWidth:a});this._draggingElementId=l,this._draggingPathPoints=s,this._edgeless.slots.surfaceUpdated.emit()}onContainerDragMove(e){if(!this._page.awarenessStore.getFlag("enable_surface")||!this._draggingElementId)return;xt(this._draggingElementId),xt(this._draggingPathPoints);const{lineWidth:t}=this.mouseMode,[r,o]=this._edgeless.surface.toModelCoord(e.point.x,e.point.y),i=[...this._draggingPathPoints,[r,o]];this._draggingPathPoints=i,this._surface.updateElement(this._draggingElementId,{points:i,lineWidth:t}),this._edgeless.slots.surfaceUpdated.emit()}onContainerDragEnd(e){this._draggingElementId=null,this._draggingPathPoints=null,this._page.captureSync(),this._edgeless.slots.surfaceUpdated.emit()}onContainerMouseMove(e){}onContainerMouseOut(e){}onPressShiftKey(e){}}class Ode extends t0{constructor(){super(...arguments),this.mouseMode={type:"connector"},this._draggingElementId=null,this._draggingArea=null,this._draggingStartElement=null,this._draggingStartRect=null}_pickBy(e,t,r){const{surface:o}=this._edgeless;return eN(o,this._page,e,t,r)}onContainerClick(e){}onContainerContextMenu(e){}onContainerDblClick(e){}onContainerTripleClick(e){}onContainerDragStart(e){if(!this._page.awarenessStore.getFlag("enable_surface"))return;this._page.captureSync();const{viewport:t}=this._edgeless.surface,{mode:r,color:o}=this.mouseMode,[i,a]=t.toModelCoord(e.x,e.y);this._draggingStartElement=this._pickBy(e.x,e.y,u=>u.type!=="connector"),this._draggingStartRect=this._draggingStartElement?new P1(...Da(Th(this._draggingStartElement))):null;const{point:s,position:l}=fC(i,a,this._draggingStartRect);this._draggingStartPoint=s;const d=this._surface.addElement("connector",{color:o,mode:r,controllers:[{x:i,y:a},{x:i+1,y:a+1}],lineWidth:4,strokeStyle:ya.Solid,startElement:this._draggingStartElement&&l?{id:this._draggingStartElement.id,position:l}:void 0});this._draggingElementId=d,this._draggingArea={start:new DOMPoint(e.x,e.y),end:new DOMPoint(e.x,e.y)},this._edgeless.slots.surfaceUpdated.emit()}onContainerDragMove(e){if(!this._page.awarenessStore.getFlag("enable_surface"))return;xt(this._draggingElementId),xt(this._draggingArea);const{viewport:t}=this._edgeless.surface,{mode:r}=this.mouseMode;this._draggingArea.end=new DOMPoint(e.x,e.y);const o=this._draggingElementId,i=this._draggingStartPoint.x,a=this._draggingStartPoint.y,[s,l]=t.toModelCoord(e.x,e.y),d=this._pickBy(e.x,e.y,g=>g.id!==o&&g.type!=="connector"),u=d&&d.id!==o?new P1(...Da(Th(d))):null,{point:{x:p,y:f},position:h}=fC(s,l,u),c=Yv(this._draggingStartRect,u,{x:i,y:a},{x:p,y:f},[],r);this._surface.updateElement(o,{controllers:c,endElement:d&&h?{id:d.id,position:h}:void 0}),this._edgeless.slots.surfaceUpdated.emit()}onContainerDragEnd(e){const t=this._draggingElementId;xt(t),this._draggingElementId=null,this._draggingArea=null,this._page.captureSync();const r=this._surface.pickById(t);xt(r),this._edgeless.selection.switchToDefaultMode({selected:[r],active:!1})}onContainerMouseMove(e){}onContainerMouseOut(e){}onPressShiftKey(e){}}class Ade extends t0{constructor(){super(...arguments),this.mouseMode={type:"note"},this._dragStartEvent=null}_addNote(e,t=Ug){coe(this._edgeless,this._page,e,t)}onContainerClick(e){this._addNote(e)}onContainerContextMenu(e){}onContainerDblClick(e){}onContainerTripleClick(e){}onContainerDragStart(e){this._dragStartEvent=e,this._draggingArea={start:new DOMPoint(e.x,e.y),end:new DOMPoint(e.x,e.y)}}onContainerDragMove(e){this._draggingArea&&(this._draggingArea.end=new DOMPoint(e.x,e.y),this._edgeless.slots.hoverUpdated.emit())}onContainerDragEnd(e){if(this._dragStartEvent){const t=e.x>this._dragStartEvent.x?this._dragStartEvent:e,r=Math.max(Math.abs(e.x-this._dragStartEvent.x),Ug);this._addNote(t,r)}this._dragStartEvent=null,this._draggingArea=null}onContainerMouseMove(e){}onContainerMouseOut(e){}onPressShiftKey(e){}}class Lde extends t0{constructor(){super(...arguments),this.mouseMode={type:"pan"},this._lastPoint=null}onContainerClick(e){}onContainerContextMenu(e){}onContainerDblClick(e){}onContainerTripleClick(e){}onContainerDragStart(e){this._page.awarenessStore.getFlag("enable_surface")&&(this._lastPoint=[e.x,e.y],this._edgeless.slots.mouseModeUpdated.emit({type:"pan",panning:!0}))}onContainerDragMove(e){if(!this._page.awarenessStore.getFlag("enable_surface")||!this._lastPoint)return;const{viewport:t}=this._edgeless.surface,{zoom:r}=t,[o,i]=this._lastPoint,a=o-e.x,s=i-e.y;this._lastPoint=[e.x,e.y],t.applyDeltaCenter(a/r,s/r),this._edgeless.slots.viewportUpdated.emit()}onContainerDragEnd(){this._lastPoint=null,this._edgeless.slots.mouseModeUpdated.emit({type:"pan",panning:!1})}onContainerMouseMove(e){}onContainerMouseOut(e){}onPressShiftKey(e){}}class $de extends t0{constructor(){super(...arguments),this.mouseMode={type:"shape",shape:"rect",fillColor:r4,strokeColor:o4},this._draggingElementId=null,this._draggingArea=null}onContainerClick(e){}onContainerContextMenu(e){}onContainerDblClick(e){}onContainerTripleClick(e){}onContainerDragStart(e){if(!this._page.awarenessStore.getFlag("enable_surface"))return;this._page.captureSync();const{viewport:t}=this._edgeless.surface,[r,o]=t.toModelCoord(e.point.x,e.point.y),i=new ns(r,o,0,0),{shape:a,fillColor:s,strokeColor:l}=this.mouseMode,d=a==="roundedRect"?"rect":a,u=this._surface.addElement("shape",{shapeType:d,xywh:i.serialize(),strokeColor:l,fillColor:s,filled:!Sk(s),radius:a==="roundedRect"?.1:0,strokeWidth:4,strokeStyle:ya.Solid});this._draggingElementId=u,this._draggingArea={start:new DOMPoint(e.x,e.y),end:new DOMPoint(e.x,e.y)},this._edgeless.slots.surfaceUpdated.emit()}onContainerDragMove(e){this._page.awarenessStore.getFlag("enable_surface")&&(xt(this._draggingElementId),xt(this._draggingArea),this._draggingArea.end=new DOMPoint(e.x,e.y),this._resize(e.keys.shift||this._edgeless.selection.shiftKey))}onContainerDragEnd(e){const t=this._draggingElementId;xt(t),this._draggingElementId=null,this._draggingArea=null,this._page.captureSync();const r=this._surface.pickById(t);xt(r),this._edgeless.selection.switchToDefaultMode({selected:[r],active:!1})}onPressShiftKey(e){this._draggingElementId&&this._resize(e)}_resize(e=!1){const{_draggingElementId:t,_draggingArea:r,_edgeless:o}=this;xt(t),xt(r);const{slots:i,surface:a}=o,{viewport:s}=a,{zoom:l}=s,{start:{x:d,y:u},end:p}=r;let{x:f,y:h}=p;if(e){const w=Math.abs(f-d),_=Math.abs(h-u),k=Math.max(w,_);f=d+(f>d?k:-k),h=u+(h>u?k:-k)}const[c,g]=s.toModelCoord(Math.min(d,f),Math.min(u,h)),m=Math.abs(d-f)/l,b=Math.abs(u-h)/l,v=new ns(c,g,m,b);a.setElementBound(t,v),i.surfaceUpdated.emit()}onContainerMouseMove(e){}onContainerMouseOut(e){}}class jde extends t0{constructor(){super(...arguments),this.mouseMode={type:"text"}}onContainerClick(e){iN(this._edgeless,e)}onContainerContextMenu(e){}onContainerDblClick(e){}onContainerTripleClick(e){}onContainerDragStart(e){}onContainerDragMove(e){}onContainerDragEnd(e){}onContainerMouseMove(e){}onContainerMouseOut(e){}onPressShiftKey(e){}}function H2(n){const e=n.target;return!e||!(e instanceof HTMLElement)?!1:e.tagName==="INPUT"||e.tagName==="FORMAT-QUICK-BAR"||e.tagName==="AFFINE-DRAG-HANDLE"}class Rde extends DR{get isActive(){return this.state.active}get lastMousePos(){return this._lastMousePos}get mouseMode(){return this._mouseMode}set mouseMode(e){this._mouseMode=e,this._controllers[this._mouseMode.type].mouseMode=this._mouseMode}get currentController(){return this._controllers[this.mouseMode.type]}get draggingArea(){if(!this.currentController.draggingArea)return null;const{start:e,end:t}=this.currentController.draggingArea,r=Math.min(e.x,t.x),o=Math.min(e.y,t.y),i=Math.max(e.x,t.x),a=Math.max(e.y,t.y);return new DOMRect(r,o,i-r,a-o)}get shiftKey(){return this._shiftKey}set shiftKey(e){this._shiftKey=e,this.currentController.onPressShiftKey(e)}constructor(e,t){super(e,t),this._mouseMode={type:"default"},this._lastMousePos={x:0,y:0},this._rightClickTimer=null,this._shiftKey=!1,this.selectedBlocks=[],this.lastState=null,this.state={selected:[],active:!1},this._add=(r,o)=>{this._disposables.add(this._dispatcher.add(r,o))},this._onContainerDragStart=r=>{if(!this.page.readonly&&!(r.button===2&&this.mouseMode.type!=="pan"))return this.currentController.onContainerDragStart(r)},this._onContainerDragMove=r=>{if(!this.page.readonly&&!(r.button===2&&this.mouseMode.type!=="pan"))return this.currentController.onContainerDragMove(r)},this._onContainerDragEnd=r=>{if(!this.page.readonly&&!(r.button===2&&this.mouseMode.type!=="pan"))return this.currentController.onContainerDragEnd(r)},this._onContainerClick=r=>{const o=tD(this.container);return ca.setActive(o),this.currentController.onContainerClick(r)},this._onContainerDblClick=r=>this.currentController.onContainerDblClick(r),this._onContainerTripleClick=r=>this.currentController.onContainerTripleClick(r),this._onContainerPointerMove=r=>(this._updateLastMousePos(r),this.container.slots.hoverUpdated.emit(),this._controllers[this.mouseMode.type].onContainerMouseMove(r)),this._onContainerPointerOut=r=>this._controllers[this.mouseMode.type].onContainerMouseOut(r),this._onContainerContextMenu=r=>{r.raw.preventDefault();const o=this.mouseMode;o.type!=="pan"&&!this._rightClickTimer&&(this._rightClickTimer={mouseMode:o,timeStamp:r.raw.timeStamp,timer:window.setTimeout(()=>{this._controllers.pan.onContainerDragStart(r)},233)})},this._onContainerPointerUp=r=>{if(r.button===2&&this._rightClickTimer){const{timer:o,timeStamp:i,mouseMode:a}=this._rightClickTimer;r.raw.timeStamp-i>233?this.container.slots.mouseModeUpdated.emit(a):clearTimeout(o),this._rightClickTimer=null}},this._onSelectionChangeWithoutDebounce=()=>{$ce(this.page)},this.setMouseMode=(r,o={selected:[],active:!1})=>{this.mouseMode!==r&&(r.type==="default"?!o.selected.length&&this.lastState?(o=this.lastState,this.lastState=null):this.lastState=o:this.state.selected.length&&(this.lastState=this.state),this.container.slots.mouseModeUpdated.emit(r),this.container.slots.selectionUpdated.emit(o))},this._controllers={default:new Sde(this.container),text:new jde(this.container),shape:new $de(this.container),brush:new Tde(this.container),pan:new Lde(this.container),note:new Ade(this.container),connector:new Ode(this.container)},this._initMouseAndWheelEvents()}_updateLastMousePos(e){this._lastMousePos={x:e.x,y:e.y}}async _initMouseAndWheelEvents(){this.container.surface||await new Promise(e=>requestAnimationFrame(e)),this._add("dragStart",e=>{const t=e.get("pointerState");H2(t.raw)||(!ws(t.raw.target)&&!mc(t.raw.target)&&!hg(t.raw.target)&&t.raw.preventDefault(),this._onContainerDragStart(t))}),this._add("dragMove",e=>{const t=e.get("pointerState");H2(t.raw)||(!ws(t.raw.target)&&!mc(t.raw.target)&&!hg(t.raw.target)&&t.raw.preventDefault(),this._onContainerDragMove(t))}),this._add("dragEnd",e=>{const t=e.get("pointerState");!ws(t.raw.target)&&!mc(t.raw.target)&&!hg(t.raw.target)&&t.raw.preventDefault(),this._onContainerDragEnd(t)}),this._add("click",e=>{const t=e.get("pointerState");!ws(t.raw.target)&&!mc(t.raw.target)&&!hg(t.raw.target)&&t.raw.preventDefault(),this._onContainerClick(t)}),this._add("doubleClick",e=>{const t=e.get("pointerState");H2(t.raw)||this._onContainerDblClick(t)}),this._add("tripleClick",e=>{const t=e.get("pointerState");H2(t.raw)||this._onContainerTripleClick(t)}),this._add("pointerMove",e=>{const t=e.get("pointerState");H2(t.raw)||(!ws(t.raw.target)&&!mc(t.raw.target)&&!hg(t.raw.target)&&t.raw.preventDefault(),this._onContainerPointerMove(t))}),this._add("pointerUp",e=>{const t=e.get("pointerState");this._onContainerPointerUp(t)}),this._add("pointerOut",e=>{const t=e.get("pointerState");this._onContainerPointerOut(t)}),this._add("contextMenu",e=>{const t=e.get("pointerState");this._onContainerContextMenu(t)}),this._add("selectionChange",()=>{this._onSelectionChangeWithoutDebounce()}),this._add("wheel",e=>{const r=e.get("defaultState").event;if(!(r instanceof WheelEvent))return;r.preventDefault();const o=this.container,{viewport:i}=o.surface;if(Aee(r)){const a=o.getBoundingClientRect(),[s,l]=o.surface.toModelCoord(r.clientX-a.x,r.clientY-a.y),d=LD(r.deltaY,i.zoom);i.setZoom(d,new ho(s,l)),o.slots.viewportUpdated.emit()}else{const a=r.deltaX/i.zoom,s=r.deltaY/i.zoom;i.applyDeltaCenter(a,s),o.slots.viewportUpdated.emit()}})}refreshRemoteSelection(){const e=document.querySelector("remote-selection");e&&e.requestUpdate()}getHoverState(){var d,u;if(!this.currentController.enableHover)return null;const{surface:e}=this.container,t=(((d=this.page.root)==null?void 0:d.children)??[]).filter(p=>p.flavour==="affine:frame"),{x:r,y:o}=this._lastMousePos,[i,a]=e.toModelCoord(r,o),s=e.pickTop(i,a)||Ok(t,i,a);if((!Fs(s)||this.mouseMode.type!=="default"||!this.state.active||this.state.selected[0].id!==s.id)&&((u=this.container.components.dragHandle)==null||u.hide()),!s||this.state.active)return null;const l=Th(s);return{rect:QD(e.viewport,l),content:s}}switchToDefaultMode(e){this.setMouseMode({type:"default"},e)}clear(){this.selectedBlocks=[],this.lastState=null,this.state={selected:[],active:!1}}dispose(){this._disposables.dispose()}}var ey=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let D1=class extends ql{constructor(){super(...arguments),this.flavour="edgeless",this.components={dragHandle:null,toolbar:null},this.showGrid=!0,this.mouseMode={type:"default"},this._rectsOfSelectedBlocks=[],this.clipboard=new Pce(this.page,this),this.slots={viewportUpdated:new Yo,selectedBlocksUpdated:new Yo,selectionUpdated:new Yo,hoverUpdated:new Yo,surfaceUpdated:new Yo,mouseModeUpdated:new Yo,reorderingFramesUpdated:new Yo,reorderingShapesUpdated:new Yo,zoomUpdated:new Yo,pressShiftKeyUpdated:new Yo,subpageLinked:new Yo,subpageUnlinked:new Yo,pageLinkClicked:new Yo},this.indexes={max:"a0",min:"a0"},this.getService=na,this._resizeObserver=null,this._frameResizeObserver=new _de,this._initDragHandle=()=>{const e=()=>{this.components.dragHandle=kde(this)};this.page.awarenessStore.getFlag("enable_drag_handle")&&!this.components.dragHandle&&e(),this._disposables.add(this.page.awarenessStore.slots.update.subscribe(t=>{var r;return(r=t.state)==null?void 0:r.flags.enable_drag_handle},t=>{var r;if(t){if(this.components.dragHandle)return;e();return}(r=this.components.dragHandle)==null||r.remove(),this.components.dragHandle=null},{filter:t=>t.id===this.page.doc.clientID}))},this.reorderFrames=({elements:e,type:t})=>{const r=(o,i)=>{this.updateIndexes(o,i,a=>{const s=a[0];s<this.indexes.min&&(this.indexes.min=s);const l=a[a.length-1];l>this.indexes.max&&(this.indexes.max=l)})};switch(t){case"front":this._reorderTo(e,()=>({start:this.indexes.max,end:null}),r);break;case"forward":this._reorder(e,o=>({start:yu(null,o[0].index),end:null}),()=>this.getSortedElementsWithViewportBounds(e),RI,r);break;case"backward":this._reorder(e,o=>({start:null,end:o[o.length-1].index}),()=>this.getSortedElementsWithViewportBounds(e),DI,r);break;case"back":this._reorderTo(e,()=>({start:null,end:this.indexes.min}),r);break}},this.reorderShapes=({elements:e,type:t})=>{const r=(o,i)=>{this.surface.updateIndexes(o,i,a=>{const s=a[0];s<this.surface.indexes.min&&(this.surface.indexes.min=s);const l=a[a.length-1];l>this.surface.indexes.max&&(this.surface.indexes.max=l)})};switch(t){case"front":this._reorderTo(e,()=>({start:this.surface.indexes.max,end:null}),r);break;case"forward":this._reorder(e,o=>({start:yu(null,o[0].index),end:null}),()=>this.surface.getSortedElementsWithViewportBounds(),RI,r);break;case"backward":this._reorder(e,o=>({start:null,end:o[o.length-1].index}),()=>this.surface.getSortedElementsWithViewportBounds(),DI,r);break;case"back":this._reorderTo(e,()=>({start:null,end:this.surface.indexes.min}),r);break}}}get frames(){return this.model.children.filter(e=>e.flavour==="affine:frame")}get sortedFrames(){return this.frames.sort(Sv)}_clearSelection(){requestAnimationFrame(()=>{this.selection.isActive||ts(null)})}_initSurface(){const{page:e,parentElement:t}=this,r=this.model.children.find(a=>a.flavour==="affine:surface");xt(t),xt(r);const o=e.getYBlockById(r.id);xt(o);let i=o.get("elements");i||(i=new e.YMap,o.set("elements",i)),this.surface=new $D(i,a=>{if(GD(a)){const s=gle(t,a);return s===void 0&&console.error(new Error(`All variables should have a value. Please check for any dirty data or variable renaming.Variable: ${a}`)),s??a}return a}),this._disposables.add(bz(this,()=>{this.surface.refresh()}))}_handleToolbarFlag(){const e=()=>{const t=new i4(this);this.appendChild(t),this.components.toolbar=t};this.page.awarenessStore.getFlag("enable_edgeless_toolbar")&&!this.components.toolbar&&e(),this._disposables.add(this.page.awarenessStore.slots.update.subscribe(t=>{var r;return(r=t.state)==null?void 0:r.flags.enable_edgeless_toolbar},t=>{var r;if(t){if(this.components.toolbar)return;e();return}(r=this.components.toolbar)==null||r.remove(),this.components.toolbar=null},{filter:t=>t.id===this.page.doc.clientID}))}_initSlotEffects(){const{_disposables:e,slots:t}=this;e.add(t.viewportUpdated.on(()=>{var i,a;const r=this.style.getPropertyValue("--affine-zoom"),o=this.surface.viewport.zoom;(!r||+r!==o)&&(this.style.setProperty("--affine-zoom",`${o}`),(i=this.components.dragHandle)==null||i.setScale(o)),(a=this.components.dragHandle)==null||a.hide(),this.selection.selectedBlocks.length&&t.selectedBlocksUpdated.emit([...this.selection.selectedBlocks]),this.requestUpdate()})),e.add(t.selectedBlocksUpdated.on(r=>{this.selection.selectedBlocks=r,requestAnimationFrame(()=>{this._rectsOfSelectedBlocks=r.map(Ea)})})),e.add(t.hoverUpdated.on(()=>this.requestUpdate())),e.add(t.selectionUpdated.on(r=>{this.selection.state=r,this._clearSelection(),this.requestUpdate()})),e.add(t.surfaceUpdated.on(()=>this.requestUpdate())),e.add(t.mouseModeUpdated.on(r=>{var o;r.type!=="default"&&((o=this.components.dragHandle)==null||o.hide()),this.mouseMode=r})),e.add(this.page.slots.historyUpdated.on(()=>{this._clearSelection(),this.requestUpdate()})),e.add(this.selection),e.add(this.surface),e.add(Ide(this)),e.add(this._frameResizeObserver),e.add(this._frameResizeObserver.slots.resize.on(r=>{const o=this.page;r.forEach((i,a)=>{const s=o.getBlockById(a),{index:l,xywh:d}=s,[u,p,f,h]=Da(d);l<this.indexes.min?this.indexes.min=l:l>this.indexes.max&&(this.indexes.max=l);const c=i.height+y6*2;Qp(c,h)||o.updateBlock(s,{xywh:JSON.stringify([u,p,f,Math.round(c)])})}),t.selectionUpdated.emit({...this.selection.state})})),e.add(t.reorderingFramesUpdated.on(this.reorderFrames)),e.add(t.reorderingShapesUpdated.on(this.reorderShapes)),e.add(t.zoomUpdated.on(r=>{var o;return(o=this.components.toolbar)==null?void 0:o.setZoomByAction(r)})),e.add(t.pressShiftKeyUpdated.on(r=>{this.selection.shiftKey=r,this.requestUpdate()}))}_reorderTo(e,t,r){Xee(e,Sv,t,(o,i,a)=>L6(o,i,a),r)}_reorder(e,t,r,o,i){qee(e,Sv,r,t,o,(a,s,l)=>L6(a,s,l),i)}updateIndexes(e,t,r){let o,i=0,a;const s=t.length;for(;i<s;i++)o=e[i],a=t[i],a.index!==o&&this.page.updateBlock(a,{index:o});r(e)}getSortedElementsWithViewportBounds(e){const t=this.surface.viewport.viewportBounds;return this.sortedFrames.filter(r=>e.includes(r)?!0:Fb(t,doe(r)))}addFrameWithPoint(e,t={}){var p;const{width:r=Ug,height:o=qD,offsetX:i=noe,offsetY:a=roe,parentId:s=(p=this.page.root)==null?void 0:p.id,frameIndex:l}=t,[d,u]=this.surface.toModelCoord(e.x,e.y);return this.page.addBlock("affine:frame",{xywh:_1(d-i,u-a,r,o),index:this.indexes.max},s,l)}addNewFrame(e,t,r){this.page.captureSync();const{left:o,top:i}=this.surface.viewport;t.x-=o,t.y-=i;const a=this.addFrameWithPoint(t,r),s=this.page.addBlocks(e.map(({flavour:l,...d})=>(xt(l),{flavour:l,blockProps:d})),a);return{frameId:a,ids:s}}moveBlocksWithNewFrame(e,t,{rect:r,focus:o,parentId:i,frameIndex:a}={}){const{left:s,top:l,zoom:d}=this.surface.viewport,u=r!=null&&r.width?r.width/d+y6*2:Ug;t.x-=s,t.y-=l;const p=this.addFrameWithPoint(t,{width:u,parentId:i,frameIndex:a}),f=this.page.getBlockById(p);this.page.moveBlocks(e,f),o&&this.setSelection(p,!0,e[0].id,t)}setSelection(e,t=!0,r,o){const i=this.frames.find(a=>a.id===e);xt(i),requestAnimationFrame(()=>{this.slots.selectedBlocksUpdated.emit([]),this.slots.selectionUpdated.emit({selected:[i],active:t}),this.updateComplete.then(()=>{r?za(this.page,r):o&&px(o.x,o.y)})})}clearSelectedBlocks(){this.selection.selectedBlocks.length&&this.slots.selectedBlocksUpdated.emit([])}update(e){e.has("page")&&(this._initSurface(),this.selection=new Rde(this,this.root.uiEventDispatcher)),e.has("mouseMode")&&(this.selection.mouseMode=this.mouseMode),super.update(e)}_initResizeEffect(){const e=new ResizeObserver(t=>{this.surface.onResize(),this.slots.selectedBlocksUpdated.emit([...this.selection.selectedBlocks]),this.slots.selectionUpdated.emit({...this.selection.state})});e.observe(this.pageBlockContainer),this._resizeObserver=e}firstUpdated(){var e;this._initSlotEffects(),this._initDragHandle(),this._initResizeEffect(),this.clipboard.init(this.page),e4(this.page,this.surface.viewport.zoom),requestAnimationFrame(()=>{this.surface.attach(this._surfaceContainer);const t=this.frames.find(r=>r.flavour==="affine:frame");if(t){const[r,o,i,a]=Da(t.xywh);this.surface.viewport.setCenter(r+i/2,o+a/2)}this._handleToolbarFlag(),this._frameResizeObserver.resetListener(this.page),this.requestUpdate()}),this._clearSelection(),(e=this.page.root)==null||e.childrenUpdated.on(()=>{requestAnimationFrame(()=>{this._frameResizeObserver.resetListener(this.page)})})}updated(e){super.updated(e)}connectedCallback(){super.connectedCallback(),pd("affine:page",Vz),this.mouseRoot=this.parentElement}disconnectedCallback(){var e;super.disconnectedCallback(),this.clipboard.dispose(),(e=this.components.dragHandle)==null||e.remove(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}render(){requestAnimationFrame(()=>{this.selection.refreshRemoteSelection()}),this.setAttribute(Ss,this.model.id);const{mouseMode:e,page:t,selection:r,surface:o,_rectsOfSelectedBlocks:i}=this,{state:a,draggingArea:s}=r,{viewport:l}=o,d=xde(this.sortedFrames,a.active,this.root.renderModel),{zoom:u,viewportX:p,viewportY:f,left:h,top:c}=l,g=wde(s),m=r.getHoverState(),b=Cde(m),{grid:v,gap:w,translateX:_,translateY:k}=loe(p,f,u,this.showGrid),y={cursor:soe(e),"--affine-edgeless-gap":`${w}px`,"--affine-edgeless-grid":v,"--affine-edgeless-x":`${_}px`,"--affine-edgeless-y":`${k}px`};return rt`
      <div class="affine-edgeless-surface-block-container">
        <!-- attach canvas later in Phasor -->
      </div>
      <div
        class="affine-edgeless-page-block-container"
        style=${Ur(y)}
      >
        <div class="affine-block-children-container edgeless">
          <div class="affine-edgeless-layer">${d}</div>
        </div>
        <affine-selected-blocks
          .mouseRoot=${this.mouseRoot}
          .state=${{rects:i,grab:!1}}
          .offset=${{x:-h,y:-c}}
        ></affine-selected-blocks>
        ${b} ${g}
        ${a.selected.length?rt`
              <edgeless-selected-rect
                disabled=${e.type==="pan"}
                .page=${t}
                .state=${a}
                .slots=${this.slots}
                .surface=${o}
              ></edgeless-selected-rect>
            `:Di}
      </div>
    `}};D1.styles=vr`
    .affine-edgeless-page-block-container {
      position: relative;
      box-sizing: border-box;
      overflow: hidden;
      height: 100%;
      font-family: var(--affine-font-family);
      font-size: var(--affine-font-base);
      line-height: var(--affine-line-height);
      color: var(--affine-text-primary-color);
      font-weight: 400;
    }

    .affine-edgeless-surface-block-container {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    .affine-edgeless-surface-block-container canvas {
      width: 100%;
      height: 100%;
      position: relative;
      z-index: 1;
      pointer-events: none;
    }

    .affine-block-children-container.edgeless {
      padding-left: 0;
      position: relative;
      overflow: hidden;
      height: 100%;
      /**
       * Fix: pointerEvent stops firing after a short time.
       * When a gesture is started, the browser intersects the touch-action values of the touched element and its ancestors,
       * up to the one that implements the gesture (in other words, the first containing scrolling element)
       * https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action
       */
      touch-action: none;

      background-size: var(--affine-edgeless-gap) var(--affine-edgeless-gap);
      background-position: var(--affine-edgeless-x) var(--affine-edgeless-y);
      background-color: var(--affine-background-primary-color);
      background-image: var(--affine-edgeless-grid);
      z-index: 0;
    }

    .affine-edgeless-layer {
      position: absolute;
      contain: layout style size;
      transform: translate(var(--affine-edgeless-x), var(--affine-edgeless-y))
        scale(var(--affine-zoom));
    }

    .affine-edgeless-hover-rect {
      position: absolute;
      border-radius: 0;
      pointer-events: none;
      box-sizing: border-box;
      z-index: 1;
      border: var(--affine-border-width) solid var(--affine-blue);
    }
  `;ey([Ar()],D1.prototype,"mouseMode",void 0);ey([Ar()],D1.prototype,"_rectsOfSelectedBlocks",void 0);ey([Rr(".affine-edgeless-surface-block-container")],D1.prototype,"_surfaceContainer",void 0);ey([Rr(".affine-edgeless-page-block-container")],D1.prototype,"pageBlockContainer",void 0);D1=ey([lr("affine-edgeless-page")],D1);class Vz extends fd{block2html(e,{childText:t="",begin:r,end:o}={}){return`<div>${e.title.toString()}${t}</div>`}block2Text(e,{childText:t="",begin:r,end:o}={}){return`${(e.title.toString()||"").slice(r||0,o)}${t}`}_getAllSubTexts(e){if(e.flavour==="affine:database")return[];const t=(e.text||[]).filter(r=>{var o;return!((o=r.attributes)!=null&&o.link)});return e.children&&e.children.forEach(r=>{t.push(...this._getAllSubTexts(r))}),t}async json2Block(e,t){if(t.length>0&&(t[0].children.length===0||t[0].flavour==="affine:page")){const a=this._getAllSubTexts(t[0]);e.title.applyDelta(a),t=t.slice(1)}const r=e.page.addBlock("affine:frame",{},e.id),o=e.page.getBlockById(r);return xt(o),na("affine:frame").json2Block(o,t)}}var Kz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let OC=class extends so{constructor(){super(),this.count=0}async _notify(){this.count++,await this.updateComplete;const e={detail:this.count,bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("block-count-update",e))}render(){return rt` <div @click=${this._notify}>${this.count}</div> `}};Kz([Ft()],OC.prototype,"count",void 0);OC=Kz([lr("counter-block")],OC);class Dde{constructor(e){this.maxSize=e,this.cache=new Map}get(e){const t=this.cache.get(e);return t===void 0?null:(this.cache.delete(e),this.cache.set(e,t),t)}set(e,t){if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}}const nO=new Dde(100);var r_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let a4=class extends ua{constructor(){super(...arguments),this.delta={insert:Hu},this.highlightOptionsGetter=null}render(){xt(this.highlightOptionsGetter,"highlightOptionsGetter is not set");const{lang:e,highlighter:t}=this.highlightOptionsGetter();if(!t||!t.getLoadedLanguages().includes(e)){const l=new Ng;return l.str=this.delta.insert,l.styles=Ur({}),rt`<span>${l}</span>`}const r=vk(),o=`${this.delta.insert}-${e}-${r}`,i=nO.get(o);let a=[{content:this.delta.insert}];i?a=i:(a=t.codeToThemedTokens(this.delta.insert,e,r==="dark"?W9:V9)[0],nO.set(o,a));const s=a.map(l=>{const d=new Ng;return d.str=l.content,d.styles=Ur({color:l.color}),d});return rt`<span>${s}</span>`}};r_([Ft({type:Object})],a4.prototype,"delta",void 0);r_([Ft()],a4.prototype,"highlightOptionsGetter",void 0);a4=r_([lr("affine-code-line")],a4);function Nde(n){return!!n&&!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}function N1(n,e,t="click",r=!1){const o=a=>{const s=a.composedPath&&a.composedPath();(s?s.indexOf(n)<0:!n.contains(a.target)&&Nde(n))&&(e(n,a.target),r||i())};document.addEventListener(t,o);const i=()=>{document.removeEventListener(t,o)};return i}const rO=["var(--affine-tag-blue)","var(--affine-tag-green)","var(--affine-tag-teal)","var(--affine-tag-white)","var(--affine-tag-purple)","var(--affine-tag-red)","var(--affine-tag-pink)","var(--affine-tag-yellow)","var(--affine-tag-orange)","var(--affine-tag-gray)"];function zde(){let n=[...rO];return()=>{n.length===0&&(n=[...rO]);const e=Math.floor(Math.random()*n.length);return n.splice(e,1)[0]}}const oO=zde();function o_(n){return n.type==="divider"}var rb;(function(n){n.Left="left",n.Right="right"})(rb||(rb={}));var as;(function(n){n.SearchInput="input",n.SearchIcon="icon",n.Searching="searching",n.Action="action"})(as||(as={}));var ob;(function(n){n.Multi="multi",n.Single="single"})(ob||(ob={}));const ty=vr`
  .action {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 32px;
    padding: 4px 8px;
    border-radius: 5px;
    cursor: pointer;
  }
  .action:hover {
    background: var(--affine-hover-color);
  }
  .action-content {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .action-content > svg {
    width: 20px;
    height: 20px;
    color: var(--affine-icon-color);
    fill: var(--affine-icon-color);
  }
  .action-divider {
    height: 0.5px;
    background: var(--affine-divider-color);
    margin: 8px 0;
  }
`,Bde=vr`
  :host {
    background: var(--affine-background-primary-color);
    box-shadow: var(--affine-menu-shadow);
    padding: 8px;
    border: 1px solid var(--affine-border-color);
    border-radius: 8px;
    z-index: 1;
    font-family: var(--affine-font-family);
  }

  .affine-database-edit-column-popup {
    display: flex;
    flex-direction: column;
    color: var(--affine-text-primary-color);
  }
  .affine-database-edit-column-popup * {
    box-sizing: border-box;
  }
  .rename,
  .delete,
  .column-type {
    fill: var(--affine-icon-color);
  }
  .column-type > svg {
    transform: rotate(-90deg);
  }
  ${ty}
`;var jx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Hde=[{type:"rich-text",text:"Text",icon:ym},{type:"select",text:"Select",icon:rR},{type:"multi-select",text:"Multi-select",icon:tR},{type:"number",text:"Number",icon:nR},{type:"checkbox",text:"Checkbox",icon:ax},{type:"progress",text:"Progress",icon:oR}],Fde=vr`
  :host {
    z-index: 1;
    width: 200px;
    padding: 8px;
    border: 1px solid var(--affine-border-color);
    border-radius: 8px;
    background: var(--affine-background-primary-color);
    box-shadow: var(--affine-menu-shadow);
    font-family: var(--affine-font-family);
  }
  ${ty}
  .action > svg {
    width: 16px;
    height: 16px;
  }

  .rich-text {
    fill: var(--affine-icon-color);
  }
  .column-type {
    padding: 0;
    color: var(--affine-text-secondary-color);
    font-size: 14px;
    cursor: unset;
  }
  .column-type:hover {
    background: none;
  }
  .selected {
    color: var(--affine-text-emphasis-color);
    background: rgba(0, 0, 0, 0.02);
  }
  .selected svg {
    color: var(--affine-text-emphasis-color);
  }
  .selected.rich-text svg {
    fill: var(--affine-text-emphasis-color);
  }
  /* .action.disabled {
    cursor: not-allowed;
  }
  .action.disabled:hover {
    background: unset;
  } */
`;let ep=class extends so{render(){return rt`
      <div class="affine-database-column-type-popup">
        <div class="action column-type">
          <div class="action-content"><span>Column type</span></div>
        </div>
        <div class="action-divider"></div>
        ${Hde.map(e=>{const t=e.type===this.columnType,r=()=>{t||this.changeColumnType(this.columnId,e.type)};return rt`
            <div
              class="action ${e.type} ${t?"selected":""}"
              @click=${r}
            >
              <div class="action-content">
                ${e.icon}<span>${e.text}</span>
              </div>
              ${t?S6:null}
            </div>
          `})}
      </div>
    `}};ep.styles=Fde;jx([Ft()],ep.prototype,"columnType",void 0);jx([Ft()],ep.prototype,"columnId",void 0);jx([Ft()],ep.prototype,"changeColumnType",void 0);ep=jx([lr("affine-database-column-type-popup")],ep);function Yz(n,e,t,r,o){if(gv(t))return;const i=t.type;if(r.page.captureSync(),i==="select"&&e==="multi-select")A5(n,{type:e},r);else if(i==="multi-select"&&e==="select")A5(n,{type:e},r),r.convertCellsByColumn(n,"select");else if(i==="number"&&e==="rich-text")A5(n,{type:e},r),r.convertCellsByColumn(n,"rich-text");else{const a=o.get(e);A5(n,{...a.propertyCreator(),type:e},r),r.deleteCellsByColumn(n)}}function Zde(n,e,t,r,o,i){if(n==="rename"){o(e);return}if(n==="insert-right"||n==="insert-left"){i(n==="insert-right"?rb.Right:rb.Left);return}if(n==="delete"){t.page.captureSync(),t.deleteColumn(e),t.deleteCellsByColumn(e),t.applyColumnUpdate();return}if(n==="move-left"||n==="move-right"){const a=n==="move-left"?r-1:r+1;t.page.captureSync(),t.moveColumn(r,a),t.applyColumnUpdate();return}if(n==="duplicate"){t.page.captureSync();const a=t.getColumn(e);xt(a);const{id:s,...l}=a,d={...l},u=t.addColumn(d,r+1);t.applyColumnUpdate(),t.copyCellsByColumn(s,u);return}}function A5(n,e,t){const r=t.getColumn(n);xt(r);const o={...r,...e};t.updateColumn(o)}function gv(n){return typeof n=="string"}var Zu=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Ude=[{type:"rename",text:"Rename",icon:Rg},{type:"divider"},{type:"column-type",text:"Column type",icon:ym},{type:"duplicate",text:"Duplicate column",icon:Hq},{type:"insert-left",text:"Insert left column",icon:Fq},{type:"insert-right",text:"Insert right column",icon:eR},{type:"move-left",text:"Move left",icon:Zq},{type:"move-right",text:"Move Right",icon:Uq},{type:"divider"},{type:"delete",text:"Delete column",icon:wm}],Wde=[{type:"rename",text:"Rename",icon:Rg},{type:"insert-right",text:"Insert right column",icon:eR}];let Tc=class extends so{constructor(){super(...arguments),this._onShowColumnType=e=>{this._columnTypePopup||(this._columnTypePopup=new ep,this._columnTypePopup.changeColumnType=this._changeColumnType,this._columnTypePopup.columnId=e,gv(this.targetColumn)||(this._columnTypePopup.columnType=this.targetColumn.type),this._container.appendChild(this._columnTypePopup),sd(this._container,this._columnTypePopup,{placement:"right-start",modifiers:[{name:"offset",options:{offset:[-9,12]}}]}))},this._onHideColumnType=()=>{var e;this._columnTypePopup&&((e=this._columnTypePopup)==null||e.remove(),this._columnTypePopup=null)},this._changeColumnType=(e,t)=>{Yz(e,t,this.targetColumn,this.targetModel,this.columnRenderer),this.closePopup()},this._onActionClick=(e,t)=>{Zde(e,t,this.targetModel,this.columnIndex,this.setTitleColumnEditId,this.insertColumn),this.closePopup()},this._renderActions=()=>{const e=gv(this.targetColumn)?Wde:Ude;return rt`
      ${e.map(t=>{if(o_(t))return rt`<div class="action-divider"></div>`;if(this.columnIndex===0&&t.type==="move-left"||this.columnIndex===this.targetModel.columns.length-1&&t.type==="move-right")return null;const r=gv(this.targetColumn)?"-1":this.targetColumn.id,o=gv(this.targetColumn)?void 0:t.type==="column-type"?()=>this._onShowColumnType(r):this._onHideColumnType;return rt`
          <div
            class="action ${t.type}"
            @mouseover=${o}
            @click=${()=>this._onActionClick(t.type,r)}
          >
            <div class="action-content">
              ${t.icon}<span>${t.text}</span>
            </div>
            ${t.type==="column-type"?Rb:rt``}
          </div>
        `})}
    `}}render(){return rt`
      <div class="affine-database-edit-column-popup">
        ${this._renderActions()}
      </div>
    `}};Tc.styles=Bde;Zu([Ft()],Tc.prototype,"targetModel",void 0);Zu([Ft()],Tc.prototype,"columnRenderer",void 0);Zu([Ft()],Tc.prototype,"targetColumn",void 0);Zu([Ft()],Tc.prototype,"columnIndex",void 0);Zu([Ft()],Tc.prototype,"closePopup",void 0);Zu([Ft()],Tc.prototype,"setTitleColumnEditId",void 0);Zu([Ft()],Tc.prototype,"insertColumn",void 0);Zu([Rr("input")],Tc.prototype,"titleInput",void 0);Zu([Rr(".affine-database-edit-column-popup")],Tc.prototype,"_container",void 0);Tc=Zu([lr("affine-database-edit-column-popup")],Tc);var i_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let tm=class extends so{constructor(){super(...arguments),this.targetRect=null,this.scale=1}render(){if(!this.targetRect)return null;const e=this.targetRect,t=Ur({width:`${3*this.scale}px`,height:`${e.height}px`,transform:`translate(${e.left}px, ${e.top}px)`});return rt`
      <div class="affine-database-column-drag-indicator" style=${t}></div>
    `}};tm.styles=vr`
    .affine-database-column-drag-indicator {
      position: fixed;
      z-index: 10;
      top: 0;
      left: 0;
      background: var(--affine-primary-color);
      transition-property: width, transform;
      transition-duration: 100ms;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-delay: 0s;
      pointer-events: none;
    }
  `;i_([Ft()],tm.prototype,"targetRect",void 0);i_([Ft()],tm.prototype,"scale",void 0);tm=i_([lr("affine-database-column-drag-indicator")],tm);var Vde=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let AC=class extends ua{render(){return rt`
      <style>
        affine-database-column-drag-preview {
          display: flex;
          flex-direction: column;
          position: fixed;
          top: 0;
          left: 0;
          height: 220px;
          width: fit-content;
          border: 1px solid var(--affine-border-color);
          border-radius: 4px;
          overflow: hidden;
          cursor: none;
          user-select: none;
          pointer-events: none;
          caret-color: transparent;
          z-index: 100;
        }

        .preview-column-header {
          opacity: 0.8;
          border-bottom: 1px solid var(--affine-border-color);
          background: var(--affine-tertiary-color);
        }
        .preview-column-header .affine-database-column-move svg {
          cursor: grabbing;
          opacity: 1;
        }
        .preview-column-header .affine-database-column-move circle {
          fill: var(--affine-text-emphasis-color);
        }

        .preview-column-content {
          flex: 1;
          opacity: 0.8;
          background: var(--affine-white);
        }
      </style>
    `}};AC=Vde([lr("affine-database-column-drag-preview")],AC);function Kde(n,e,t){let r=null,o=null,i=document.querySelector("affine-database-column-drag-indicator");i||(i=new tm,document.body.appendChild(i));let a=-1;const s=h=>{h.stopPropagation(),xt(h.dataTransfer),h.dataTransfer.effectAllowed="move";const c=Array.from(n.querySelectorAll(".affine-database-column")).filter(C=>!C.classList.contains("add-column-button")),m=h.target.closest(".affine-database-column");xt(m);const b=c.indexOf(m)-1,v=e.closest("affine-database");xt(v);const{x:w,y:_}=m.getBoundingClientRect(),k=e.closest(".affine-database-block-table");xt(k);const{left:y,right:S}=k.getBoundingClientRect();o={dragIndex:b,tableBody:k,headerColumns:c,targetIndex:-1,indicatorHeight:e.clientHeight,previewBoundaries:{left:y,right:S},offset:{x:h.clientX-w,y:h.clientY-_}},r=Yde(h),e.appendChild(r)},l=h=>{if(!o)return;xt(r),r.style.opacity!=="1"&&(r.style.opacity="1");const c=h.clientX,g=h.clientY,{dragIndex:m,tableBody:b,previewBoundaries:v,indicatorHeight:w,headerColumns:_,offset:{x:k,y}}=o;r.style.transform=`translate(${c-k}px, ${g-y}px)`;const S=new ho(c,g),{element:C,index:I}=Gde(S,_),A=C.getBoundingClientRect(),T=A.right<v.left||A.right>v.right,L=m===I||m===I-1||T?null:new DOMRect(A.right,A.top,1,w);xt(i),i.targetRect=L,o.targetIndex=I-1;const j=c<=v.left+50,$=c>=v.right-50,ee=j||$,Q=()=>{if(ee)a=requestAnimationFrame(Q);else{cancelAnimationFrame(a);return}$&&(b.scrollLeft+=10),j&&(b.scrollLeft-=10)};cancelAnimationFrame(a),a=requestAnimationFrame(Q)},d=h=>{if(!o)return;const{dragIndex:c,targetIndex:g}=o;o=null,i&&(i.targetRect=null),r&&(r.remove(),r=null);const m=g+1;c===m-1||c===m||(t.page.captureSync(),t.moveColumn(c,m),t.applyColumnUpdate())},u=new Ya,p=h=>h.stopPropagation();return n.querySelectorAll(".affine-database-column-move").forEach(h=>{u.addFromEvent(h,"pointerdown",p),u.addFromEvent(h,"pointermove",p),u.addFromEvent(h,"pointerup",p),u.addFromEvent(h,"click",p),u.addFromEvent(h,"dragstart",s),u.addFromEvent(h,"drag",l),u.addFromEvent(h,"dragend",d)}),u}function Yde(n){var s;const e=new AC;e.style.opacity="0";const t=document.createDocumentFragment(),o=n.target.closest(".affine-database-column");xt(o);const i=o.cloneNode(!0);i.classList.add("preview-column-header"),t.appendChild(i);const a=document.createElement("div");return a.classList.add("preview-column-content"),t.appendChild(a),e.appendChild(t),(s=n.dataTransfer)==null||s.setDragImage(e,0,0),e}function Gde(n,e){let t=null,r=-1;const o=e.length;for(let i=0;i<o;i++){const a=e[i],s=a.getBoundingClientRect();if(n.x>=s.left&&n.x<=s.right){t=a,r=i;break}}if(!t){const i=e[0].getBoundingClientRect();n.x<=i.left?(t=e[0],r=0):(t=e[o-1],r=o-1)}return{element:t,index:r}}function Xde(n,e,t,r){let o=null;const i=(u,p)=>{u.stopPropagation();const f=Array.from(e.querySelectorAll(`.database-cell:nth-child(${p+1})`)),h=n.querySelector(`.database-cell:nth-child(${p+1})`);xt(h);const c=e.parentElement;xt(c),o={index:p,rowCells:f,scrollLeft:c.scrollLeft,lastClientX:u.clientX,startClientX:u.clientX,rawWidth:f[0].clientWidth,currentCell:h,rafId:void 0},r(p)},a=u=>{if(u.stopPropagation(),!o)return;const{rafId:p,rowCells:f,rawWidth:h,lastClientX:c,startClientX:g,scrollLeft:m}=o;if(u.clientX-c===0)return;const b=u.clientX-c>0?"right":"left";o.lastClientX=u.clientX;const v=()=>{const w=h+u.clientX-g<=x6?x6:h+u.clientX-g;f.forEach(I=>{I.style.width=`${w}px`;const A=I.querySelector(".affine-database-column-text-input");A&&(A.style.width=`${w-54}px`)});const _=e.parentElement;xt(_);const{right:k,left:y}=_.getBoundingClientRect(),S=u.clientX-k+y3;if(S>=0){if(b==="right")_.scrollLeft=Math.max(_.scrollLeft,m+S);else{let I=_.scrollLeft;S<=y3&&(I+=S),_.scrollLeft=Math.min(I,m+S)}return}const C=u.clientX-y-y3;C<=0&&_.scrollLeft>0&&(_.scrollLeft=m+C)};p&&cancelAnimationFrame(p),o.rafId=requestAnimationFrame(v)},s=u=>{if(u.stopPropagation(),r(-1),!o)return;const{rafId:p,index:f,rowCells:h}=o;p&&cancelAnimationFrame(p),o=null;const c=h[0].offsetWidth;if(t.page.captureSync(),f===0)t.page.updateBlock(t,{titleColumnWidth:c});else{const g=t.columns[f-1].id,m=t.getColumn(g);t.updateColumn({...m,width:c}),t.applyColumnUpdate()}},l=new Ya;return n.querySelectorAll(".affine-database-column-drag-handle").forEach((u,p)=>{l.addFromEvent(u,"pointerdown",f=>i(f,p))}),l.addFromEvent(document,"pointermove",a),l.addFromEvent(document,"pointerup",s),l}const qde=vr`
  .affine-database-column-header {
    position: relative;
    display: flex;
    flex-direction: row;
    height: 40px;
    border-bottom: 1px solid var(--affine-border-color);
  }
  .affine-database-column-header > .affine-database-column:first-child {
    background: var(--affine-hover-color);
  }

  .affine-database-column {
    position: relative;
    z-index: 1;
    cursor: pointer;
    background: var(--affine-white);
    transform: translateX(0);
  }
  .database-cell {
    min-width: ${x6}px;
  }
  .database-cell.add-column-button {
    flex: 1;
    min-width: ${y3}px;
    min-height: 100%;
    display: flex;
    align-items: center;
  }
  .affine-database-column-content {
    display: flex;
    align-items: center;
    gap: 6px;
    width: 100%;
    height: 100%;
    padding: 8px;
    border-right: 1px solid var(--affine-border-color);
  }
  .affine-database-column:last-child .affine-database-column-content {
    border-right: none;
  }
  .affine-database-column-drag-handle {
    position: absolute;
    z-index: 1;
    top: 0;
    left: -8px;
    width: 16px;
    height: 100%;
    cursor: col-resize;
  }
  .affine-database-column-drag-handle::before {
    content: ' ';
    display: none;
    position: absolute;
    width: 2px;
    height: 100%;
    left: 7px;
    background: var(--affine-text-emphasis-color);
    box-shadow: 0px 0px 8px rgba(84, 56, 255, 0.35);
  }
  .affine-database-column-drag-handle:hover::before,
  .affine-database-column-drag-handle.dragging::before {
    display: block;
  }
  .affine-database-column-content:hover,
  .affine-database-column-content.edit {
    background: linear-gradient(
        0deg,
        var(--affine-hover-color),
        var(--affine-hover-color)
      ),
      var(--affine-white);
  }
  .affine-database-column-content.edit .affine-database-column-text-icon {
    opacity: 1;
  }
  .affine-database-column-text {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 4px;
    /* https://stackoverflow.com/a/36247448/15443637 */
    overflow: hidden;
    color: var(--affine-text-secondary-color);
    font-size: 14px;
    font-weight: 600;
  }
  .affine-database-column-type-icon {
    display: flex;
    align-items: center;
    border: 1px solid transparent;
    border-radius: 4px;
  }
  .affine-database-column-type-icon.edit {
    background: linear-gradient(
        0deg,
        var(--affine-hover-color),
        var(--affine-hover-color)
      ),
      var(--affine-white);
    border-color: var(--affine-border-color);
  }
  .affine-database-column-type-icon.edit:hover {
    background: var(--affine-white);
  }
  .affine-database-column-type-icon svg {
    width: 16px;
    height: 16px;
    fill: var(--affine-icon-color);
  }
  .affine-database-column-text-content {
    flex: 1;
    display: flex;
    align-items: center;
    overflow: hidden;
  }
  .affine-database-column-content:hover .affine-database-column-text-icon {
    opacity: 1;
  }
  .affine-database-column-text-input {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .affine-database-column-text-icon {
    display: flex;
    align-items: center;
    width: 16px;
    height: 16px;
    background: var(--affine-white);
    border: 1px solid var(--affine-border-color);
    border-radius: 4px;
    opacity: 0;
  }
  .affine-database-column-text-save-icon {
    display: flex;
    align-items: center;
    width: 16px;
    height: 16px;
    border: 1px solid transparent;
    border-radius: 4px;
    fill: var(--affine-icon-color);
  }
  .affine-database-column-text-save-icon:hover {
    background: var(--affine-white);
    border-color: var(--affine-border-color);
  }
  .affine-database-column-text-icon svg {
    fill: var(--affine-icon-color);
  }
  .affine-database-column-input {
    width: 100%;
    height: 24px;
    padding: 0;
    border: none;
    color: inherit;
    font-weight: 600;
    font-size: 14px;
    font-family: var(--affine-font-family);
    background: transparent;
  }
  .affine-database-column-input:focus {
    outline: none;
  }
  .affine-database-column-move {
    display: flex;
    align-items: center;
  }
  .affine-database-column-move svg {
    width: 10px;
    height: 14px;
    color: var(--affine-black-10);
    cursor: grab;
    opacity: 0;
  }
  .affine-database-column-content:hover svg {
    opacity: 1;
  }

  .affine-database-add-column-button {
    visibility: hidden;
    position: fixed;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 38px;
    cursor: pointer;
  }
  .header-add-column-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 100%;
    cursor: pointer;
  }

  .affine-database-column-move-preview {
    position: fixed;
    z-index: 100;
    width: 100px;
    height: 100px;
    background: var(--affine-text-emphasis-color);
  }
`;var gd=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Jde={select:rR,number:nR,checkbox:ax,progress:oR,"rich-text":ym,"multi-select":tR};let Kl=class extends ui(ua){constructor(){super(...arguments),this._editingColumnId="",this._changingColumnTypeId="",this._widthChangingIndex=-1,this._columnWidthDisposables=new Ya,this._columnMoveDisposables=new Ya,this._isHeaderHover=!1,this._indicator=null,this._editingColumnPopupIndex=-1,this.setEditingColumnId=e=>{this._editingColumnId=e},this.showAddColumnButton=e=>{const t=this.closest("affine-database");xt(t);const{right:r}=t.getBoundingClientRect(),{left:o}=this._headerAddColumnButton.getBoundingClientRect();let i=!0;e&&(i=e.offsetY<=iI&&e.offsetY>=0),r<=o&&this._isHeaderHover&&i?this._addColumnButton.style.visibility="visible":this._addColumnButton.style.visibility="hidden"},this._setChangingColumnIndex=e=>{this._widthChangingIndex!==e&&(this._widthChangingIndex=e)},this._onShowEditColumnPopup=(e,t,r)=>{if(this._editingColumnId||this.readonly)return;if(this._editingColumnPopupIndex===r){this._editingColumnPopupIndex=-1;return}this._editingColumnPopupIndex=r;const i=e.closest(".affine-database-column");xt(i);const a=new Tc;a.setTitleColumnEditId=this.setEditingColumnId,a.targetModel=this.targetModel,a.targetColumn=t,a.columnIndex=r-1,a.columnRenderer=this.columnRenderer,a.closePopup=()=>{this._editingColumnPopupIndex=-1,a.remove()},a.insertColumn=s=>{const l=s===rb.Right?r:r-1;this.addColumn(l)},document.body.appendChild(a),sd(i,a,{placement:"bottom-start"}),N1(a,(s,l)=>{l.closest(".affine-database-column-content")||(this._editingColumnPopupIndex=-1),s.remove()},"mousedown")},this._onShowColumnTypePopup=(e,t,r)=>{if(this._editingColumnId===""||this.readonly)return;if(this._changingColumnTypeId===t){this._changingColumnTypeId="";return}e.stopPropagation(),this._changingColumnTypeId=t;const o=new ep;o.columnId=t,o.columnType=r.type,o.changeColumnType=(s,l)=>{Yz(s,l,r,this.targetModel,this.columnRenderer),this._changingColumnTypeId="",o.remove()},document.body.appendChild(o);const a=e.target.closest(".affine-database-column-content");xt(a),sd(a,o,{placement:"bottom-start"}),N1(o,(s,l)=>{l.closest(".affine-database-column-type-icon")||(this._changingColumnTypeId=""),s.remove()},"mousedown")},this._onKeydown=(e,t,r)=>{if(e.key==="Enter"){this.targetModel.page.captureSync(),this._saveColumnTitle(t,r);return}if(e.key==="Escape"){this.setEditingColumnId("");return}},this._saveColumnTitle=(e,t)=>{if(this._editingColumnId==="")return;const r=this._titleColumnInput.value;e==="title"?this._onUpdateTitleColumn(r):(xt(t),this._onUpdateNormalColumn(r,t)),this._editingColumnId===(t==null?void 0:t.id)&&this.setEditingColumnId("")},this._onUpdateTitleColumn=e=>{this.targetModel.page.captureSync(),this.targetModel.page.updateBlock(this.targetModel,{titleColumnName:e}),this.setEditingColumnId("")},this._onUpdateNormalColumn=(e,t)=>{this.targetModel.page.captureSync(),this.targetModel.updateColumn({...t,name:e}),this.targetModel.applyColumnUpdate(),this.setEditingColumnId("")},this._onEditColumnTitle=(e,t)=>{e.stopPropagation(),this.setEditingColumnId(t)},this._onAddColumn=()=>{this.readonly||this.addColumn(this.targetModel.columns.length)}}get tableContainer(){return this.parentElement}get readonly(){return this.targetModel.page.readonly}firstUpdated(){if(this.readonly)return;this._initChangeColumnWidthHandlers(),this._initSetDragHandleHeightEffect(),this._initHeaderMousemoveHandlers(),this._initMoveColumnHandlers();const e=this.closest("affine-database");e&&this._initResizeEffect(e)}updated(e){if(super.updated(e),!this.readonly){if(e.has("_editingColumnId")&&this._editingColumnId){this._titleColumnInput.focus();const t=this._titleColumnInput.value.length;this._titleColumnInput.setSelectionRange(0,t)}e.has("columns")&&(this._initMoveColumnHandlers(),this._initChangeColumnWidthHandlers()),(e.size===0||e.has("columns"))&&this._setDragHandleHeight()}}disconnectedCallback(){super.disconnectedCallback(),this._columnWidthDisposables.dispose(),this._indicator&&(this._indicator.targetRect=null)}_initResizeEffect(e){const t=Gd(this.targetModel.page),r=t==null?void 0:t.viewportElement;r&&new ResizeObserver(i=>{for(const{target:a}of i)if(a===r){const{right:s}=e.getBoundingClientRect();this._addColumnButton.style.left=`${s}px`;break}}).observe(r)}_initSetDragHandleHeightEffect(){const e=new MutationObserver(()=>{this._setDragHandleHeight()}),t=this.closest(".affine-database-table-container");xt(t),e.observe(t,{childList:!0,subtree:!0}),this._disposables.add(()=>e.disconnect())}_setDragHandleHeight(){const e=this.closest("affine-database");if(!e)return;const t=e.querySelector(".affine-database-block-rows");xt(t);const r=t.clientHeight+iI-1;e.querySelectorAll(".affine-database-column-drag-handle").forEach(i=>{i.style.height=`${r}px`})}_initHeaderMousemoveHandlers(){this._disposables.addFromEvent(this._headerContainer,"mouseover",e=>{this._isHeaderHover=!0,this.showAddColumnButton(e)}),this._disposables.addFromEvent(this._headerContainer,"mouseleave",e=>{this._isHeaderHover=!1,this.showAddColumnButton(e)})}_initChangeColumnWidthHandlers(){if(this._widthChangingIndex!==-1)return;this._columnWidthDisposables.dispose();const t=Xde(this._headerContainer,this.tableContainer,this.targetModel,this._setChangingColumnIndex);this._columnWidthDisposables=t}_initMoveColumnHandlers(){this._columnMoveDisposables.dispose();const e=Kde(this._headerContainer,this.tableContainer,this.targetModel);this._columnMoveDisposables=e}render(){const e=Ur({width:`${this.targetModel.titleColumnWidth}px`}),t=this._editingColumnId==="-1"&&!this.readonly;return Ei`
      <div class="affine-database-column-header database-row">
        <div class="affine-database-column database-cell" style=${e}>
          <div
            class="affine-database-column-content ${this._editingColumnId==="-1"?"edit":""}"
            data-column-id="-1"
            @click=${r=>this._onShowEditColumnPopup(r.target,this.targetModel.titleColumnName,0)}
          >
            <div class="affine-database-column-text">
              <div class="affine-database-column-type-icon">${ym}</div>
              ${t?Ei`<div class="affine-database-column-text-content">
                    <input
                      class="affine-database-column-input"
                      value=${this.targetModel.titleColumnName}
                      @keydown=${r=>this._onKeydown(r,"title")}
                      @pointerdown=${r=>r.stopPropagation()}
                    />
                    <div
                      class="affine-database-column-text-save-icon"
                      @click=${r=>{r.stopPropagation(),this._saveColumnTitle("title")}}
                    >
                      ${S6}
                    </div>
                  </div>`:Ei`<div class="affine-database-column-text-content">
                    <div class="affine-database-column-text-input">
                      ${this.targetModel.titleColumnName}
                    </div>
                    ${this.readonly?null:Ei`<div
                          class="affine-database-column-text-icon"
                          @click=${r=>this._onEditColumnTitle(r,"-1")}
                        >
                          ${Rg}
                        </div>`}
                  </div>`}
            </div>
          </div>
        </div>
        ${Vs(this.columns,r=>r.id,(r,o)=>{const i=Ur({width:`${r.width}px`}),a=this._editingColumnId===r.id&&!this.readonly,s=this._changingColumnTypeId===r.id;return Ei`
              <div class="affine-database-column database-cell" style=${i}>
                <div
                  class="affine-database-column-content ${a?"edit":""}"
                  data-column-id="${r.id}"
                  @click=${l=>this._onShowEditColumnPopup(l.target,r,o+1)}
                >
                  <div class="affine-database-column-text ${r.type}">
                    <div
                      class="affine-database-column-type-icon ${a?"edit":""} ${s?"active":""}"
                      @click=${l=>this._onShowColumnTypePopup(l,r.id,r)}
                    >
                      ${Jde[r.type]}
                    </div>
                    ${a?Ei`<div class="affine-database-column-text-content">
                          <input
                            class="affine-database-column-input"
                            value=${r.name}
                            @keydown=${l=>this._onKeydown(l,"normal",r)}
                            @pointerdown=${l=>l.stopPropagation()}
                          />
                          <div
                            class="affine-database-column-text-save-icon"
                            @click=${l=>{l.stopPropagation(),this._saveColumnTitle("normal",r)}}
                          >
                            ${S6}
                          </div>
                        </div>`:Ei`<div class="affine-database-column-text-content">
                          <div class="affine-database-column-text-input">
                            ${r.name}
                          </div>
                          ${this.readonly?null:Ei`<div
                                class="affine-database-column-text-icon"
                                @click=${l=>this._onEditColumnTitle(l,r.id)}
                              >
                                ${Rg}
                              </div>`}
                        </div>`}
                  </div>
                  ${this.readonly?null:Ei`<div
                        draggable="true"
                        class="affine-database-column-move"
                      >
                        ${Vq}
                      </div>`}
                </div>
                ${this.readonly?null:Ei`<div
                      class="affine-database-column-drag-handle ${this._widthChangingIndex===o?"dragging":""}"
                    ></div>`}
              </div>
            `})}
        <div class="affine-database-column database-cell add-column-button">
          ${this.readonly?null:Ei`<div
                  class="affine-database-column-drag-handle  ${this._widthChangingIndex===this.columns.length?"dragging":""}"
                ></div>
                <div
                  class="header-add-column-button"
                  @click=${this._onAddColumn}
                >
                  ${pI}
                </div>`}
        </div>
        ${this.readonly?null:Ei`<div
              class="affine-database-add-column-button"
              data-test-id="affine-database-add-column-button"
              @click=${this._onAddColumn}
            >
              ${pI}
            </div>`}
      </div>
    `}};Kl.styles=qde;gd([Ft()],Kl.prototype,"targetModel",void 0);gd([Ft()],Kl.prototype,"columns",void 0);gd([Ft()],Kl.prototype,"addColumn",void 0);gd([Ft()],Kl.prototype,"columnRenderer",void 0);gd([Ar()],Kl.prototype,"_editingColumnId",void 0);gd([Ar()],Kl.prototype,"_changingColumnTypeId",void 0);gd([Rr(".affine-database-column-input")],Kl.prototype,"_titleColumnInput",void 0);gd([Rr(".affine-database-column-header")],Kl.prototype,"_headerContainer",void 0);gd([Rr(".affine-database-add-column-button")],Kl.prototype,"_addColumnButton",void 0);gd([Rr(".header-add-column-button")],Kl.prototype,"_headerAddColumnButton",void 0);gd([Ar()],Kl.prototype,"_widthChangingIndex",void 0);Kl=gd([lr("affine-database-column-header")],Kl);var ny=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};class tc extends ui(ua){constructor(){super(...arguments),this.cell=null}}ny([Ft()],tc.prototype,"rowHost",void 0);ny([Ft()],tc.prototype,"databaseModel",void 0);ny([Ft()],tc.prototype,"rowModel",void 0);ny([Ft()],tc.prototype,"column",void 0);ny([Ft()],tc.prototype,"cell",void 0);function Lm(n,e,t,r,o){return{displayName:o.displayName,type:n,propertyCreator:e,components:r,defaultValue:t}}class Qde{constructor(){this._columns=new Map}register(e){const t=this._columns;if(t.has(e.type))throw new Error("cannot register twice for "+e.type);t.set(e.type,e)}get(e){const t=this._columns.get(e);if(!t)throw new Error("cannot find renderer");return t}list(){return[...this._columns.values()]}}var a_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const Gz=8;let ib=class extends tc{constructor(){super(...arguments),this._isEditing=!1,this._onClick=e=>{this.readonly||(this._isEditing=!0,this.removeEventListener("click",this._onClick),setTimeout(()=>{N1(this,()=>{this.addEventListener("click",this._onClick),this._isEditing=!1},"mousedown")}))},this.setEditing=e=>{this._isEditing=e,this._isEditing||setTimeout(()=>{this.addEventListener("click",this._onClick)})},this.setHeight=e=>{this.style.height=`${e+Gz*2}px`}}get readonly(){return this.databaseModel.page.readonly}connectedCallback(){super.connectedCallback(),this._disposables.addFromEvent(this,"click",this._onClick)}firstUpdated(){this.setAttribute("data-block-is-database-input","true"),this.setAttribute("data-row-id",this.rowModel.id),this.setAttribute("data-column-id",this.column.id)}setValue(e,t={captureSync:!0}){queueMicrotask(()=>{t.captureSync&&this.databaseModel.page.captureSync(),this.databaseModel.updateCell(this.rowModel.id,{columnId:this.column.id,value:e}),this.databaseModel.applyColumnUpdate(),this.requestUpdate()})}updateColumnProperty(e){const t=e(this.column);this.databaseModel.page.captureSync(),this.databaseModel.updateColumn({...this.column,...t})}render(){const e=this.columnRenderer.get(this.column.type),t=this.databaseModel.getCell(this.rowModel.id,this.column.id);if(!this.readonly&&this._isEditing&&e.components.CellEditing!==null){const o=e.components.CellEditing.tag;return Ei`
        <${o}
          data-is-editing-cell="true"
          .rowHost=${this}
          .databaseModel=${this.databaseModel}
          .rowModel=${this.rowModel}
          .column=${this.column}
          .cell=${t}
        ></${o}>
      `}const r=e.components.Cell.tag;return Ei`
      <${r}
        .rowHost=${this}
        .databaseModel=${this.databaseModel}
        .rowModel=${this.rowModel}
        .column=${this.column}
        .cell=${t}
      ></${r}>
    `}};ib.styles=vr`
    affine-database-cell-container {
      display: flex;
      align-items: center;
      width: 100%;
      height: 100%;
      padding: 0 ${Gz}px;
      border-right: 1px solid var(--affine-border-color);
    }

    affine-database-cell-container * {
      box-sizing: border-box;
    }
  `;a_([Ar()],ib.prototype,"_isEditing",void 0);a_([Ft()],ib.prototype,"columnRenderer",void 0);ib=a_([lr("affine-database-cell-container")],ib);var ry=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const eue=[{type:"database-type",text:"Database type",icon:xm},{type:"copy",text:"Copy",icon:jb},{type:"divider"},{type:"delete-database",text:"Delete database",icon:wm}],tue=[{type:"table",text:"Table view",icon:xm},{type:"kanban",text:"Kanban view",icon:rk}];let ab=class extends so{render(){return rt`
      <div class="affine-database-type-popup">
        <div class="action database-type">
          <div class="action-content"><span>Database type</span></div>
        </div>
        <div class="action-divider"></div>
        ${tue.map(e=>{const t=e.type==="kanban",r=e.type===this.dbType&&!t;return rt`
            <div
              class="action ${e.type} ${r?"selected":""} ${t?"disabled":""}"
            >
              <div class="action-content">
                ${e.icon}<span>${e.text}</span>
              </div>
            </div>
          `})}
      </div>
    `}};ab.styles=vr`
    :host {
      width: 200px;
      padding: 8px;
      border: 1px solid var(--affine-border-color);
      border-radius: 8px;
      background: var(--affine-background-primary-color);
      box-shadow: 0px 0px 12px rgba(66, 65, 73, 0.14),
        inset 0px 0px 0px 0.5px var(--affine-border-color);
    }
    :host * {
      box-sizing: border-box;
    }
    ${ty}
    .action > svg {
      width: 16px;
      height: 16px;
      fill: var(--affine-icon-color);
    }
    .database-type {
      height: 30px;
      padding: 0;
      color: var(--affine-text-secondary-color);
      font-size: 14px;
      cursor: unset;
    }
    .database-type:hover {
      background: none;
    }
    .selected {
      color: var(--affine-text-emphasis-color);
      background: rgba(0, 0, 0, 0.02);
    }
    .selected svg {
      color: var(--affine-text-emphasis-color);
    }
    .selected.table-view svg {
      fill: var(--affine-text-emphasis-color);
    }
    .action.disabled {
      cursor: not-allowed;
    }
    .action.disabled:hover {
      background: unset;
    }
  `;ry([Ft()],ab.prototype,"dbType",void 0);ab=ry([lr("affine-database-type-popup")],ab);let nm=class extends so{constructor(){super(...arguments),this._onActionClick=(e,t)=>{e.stopPropagation(),t==="delete-database"?[this.targetModel,...this.targetModel.children].forEach(o=>this.targetModel.page.deleteBlock(o)):t==="copy"&&(X1({type:"Block",models:[this.targetModel],startOffset:0,endOffset:0}),Zh("Copied Database to clipboard")),this.close()},this._onShowDatabaseType=()=>{this._databaseTypePopup||(this._databaseTypePopup=new ab,this._databaseTypePopup.dbType="table",this._container.appendChild(this._databaseTypePopup),sd(this._container,this._databaseTypePopup,{placement:"right-start",modifiers:[{name:"offset",options:{offset:[-9,12]}}]}))},this._onHideDatabaseType=()=>{var e;this._databaseTypePopup&&((e=this._databaseTypePopup)==null||e.remove(),this._databaseTypePopup=null)},this._renderActions=()=>rt`
      ${eue.map(e=>{if(o_(e))return rt`<div class="action-divider"></div>`;const t=e.type==="database-type"?this._onShowDatabaseType:this._onHideDatabaseType;return rt`
          <div
            class="action ${e.type}"
            @mouseover=${t}
            @click=${r=>this._onActionClick(r,e.type)}
          >
            <div class="action-content">
              ${e.icon}<span>${e.text}</span>
            </div>
            ${e.type==="database-type"?Rb:rt``}
          </div>
        `})}
    `}render(){return rt`<div class="affine-database-toolbar-action-popup">
      ${this._renderActions()}
    </div>`}};nm.styles=vr`
    :host {
      width: 200px;
      height: 128px;
      padding: 8px;
      border: 1px solid var(--affine-border-color);
      border-radius: 8px;
      box-shadow: 0px 0px 12px rgba(66, 65, 73, 0.14),
        inset 0px 0px 0px 0.5px var(--affine-border-color);
      z-index: var(--affine-z-index-popover);
      background: var(--affine-white);
    }
    :host * {
      box-sizing: border-box;
    }
    ${ty}
    .action-content > svg {
      width: 20px;
      height: 20px;
      fill: var(--affine-icon-color);
    }
    .action > svg {
      width: 16px;
      height: 16px;
      fill: var(--affine-icon-color);
    }
    .database-type > svg {
      transform: rotate(-90deg);
    }
  `;ry([Ft()],nm.prototype,"close",void 0);ry([Rr(".affine-database-toolbar-action-popup")],nm.prototype,"_container",void 0);nm=ry([lr("affine-database-toolbar-action-popup")],nm);var Xz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let s4=class extends ua{constructor(){super(...arguments),this.offset={x:0,y:0}}render(){return rt`
      <style>
        affine-database-new-record-preview {
          display: flex;
          align-items: center;
          justify-content: center;
          position: fixed;
          top: 0;
          left: 0;
          height: 32px;
          width: 32px;
          border: 1px solid var(--affine-border-color);
          border-radius: 50%;
          background: linear-gradient(
              0deg,
              rgba(96, 70, 254, 0.3),
              rgba(96, 70, 254, 0.3)
            ),
            linear-gradient(
              0deg,
              var(--affine-hover-color),
              var(--affine-hover-color)
            ),
            var(--affine-white);
          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.05),
            0px 0px 0px 0.5px var(--affine-black-10);
          cursor: none;
          user-select: none;
          pointer-events: none;
          caret-color: transparent;
          z-index: 100;
        }
        affine-database-new-record-preview svg {
          width: 16px;
          height: 16px;
        }
        affine-database-new-record-preview path {
          fill: var(--affine-brand-color);
        }
      </style>
      ${$b}
    `}};Xz([Ft()],s4.prototype,"offset",void 0);s4=Xz([lr("affine-database-new-record-preview")],s4);function nue(n,e,t){let r=null,o=null;const i=e.closest("affine-database");if(!i)return;const a=i.querySelector(".affine-database-block-rows");xt(a);const s=document.querySelector("affine-drag-indicator");if(!s){const h=document.createElement("affine-drag-indicator");document.body.appendChild(h)}const l=h=>{var g;h.stopPropagation(),xt(h.dataTransfer),h.dataTransfer.effectAllowed="move",o=new s4,o.style.opacity="0",(g=h.dataTransfer)==null||g.setDragImage(o,0,0),e.appendChild(o),r={index:-1,rows:Array.from(a.querySelectorAll(".affine-database-block-row"))}},d=h=>{if(!r||!o)return;o.style.opacity!=="1"&&(o.style.opacity="1");const c=h.clientX,g=h.clientY;o.style.transform=`translate(${c}px, ${g}px)`;const m=new ho(c,g),b=rue(m,r.rows);if(xt(s),b){const{top:v,bottom:w}=b.element.getBoundingClientRect(),_=b.isLast?w:v,{width:k,left:y}=i.getBoundingClientRect();s.rect=Xi.fromLWTH(y,k,_,3),r.index=b.insertRowIndex}else s.rect=null,r.index=-1},u=()=>{if(!r)return;const{index:h}=r;r=null,s&&(s.rect=null),o&&(o.remove(),o=null),h!==-1&&t(h)},p=new Ya,f=h=>{h.stopPropagation()};return p.addFromEvent(n,"pointerdown",f),p.addFromEvent(n,"pointermove",f),p.addFromEvent(n,"pointerup",f),p.addFromEvent(n,"dragstart",l),p.addFromEvent(n,"drag",d),p.addFromEvent(n,"dragend",u),p}function rue(n,e){const t=e.length;for(let r=0;r<t;r++){const o=e[r],{top:i,bottom:a}=o.getBoundingClientRect();if(n.y<=i+20&&n.y>=i-20)return{element:o,insertRowIndex:r,isLast:!1};if(r===t-1&&n.y>=a-20&&n.y<=a+20)return{element:o,insertRowIndex:r+1,isLast:!0}}return null}var qd=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const oue=vr`
  .affine-database-toolbar {
    display: none;
    align-items: center;
    gap: 26px;
  }
  .affine-database-toolbar-search svg,
  .affine-database-toolbar svg {
    width: 16px;
    height: 16px;
    fill: var(--affine-icon-color);
  }
  .affine-database-toolbar-item {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .search-container.hidden {
    overflow: hidden;
  }
  .affine-database-toolbar-item.more-action {
    width: 32px;
    height: 32px;
    border-radius: 4px;
  }
  .affine-database-toolbar-item.more-action:hover,
  .more-action.active {
    background: var(--affine-hover-color);
  }
  .affine-database-search-container {
    display: flex;
    align-items: center;
    gap: 8px;
    width: 16px;
    height: 32px;
    padding: 8px 0;
    border-radius: 8px;
    transition: all 0.3s ease;
  }
  .affine-database-search-container > svg {
    min-width: 16px;
    min-height: 16px;
  }
  .search-container-expand {
    width: 138px;
    padding: 8px 12px;
    background-color: var(--affine-hover-color);
  }
  .search-input-container {
    display: flex;
    align-items: center;
  }
  .search-input-container > .close-icon {
    display: flex;
    align-items: center;
  }
  .close-icon .code {
    width: 31px;
    height: 18px;
    padding: 2px 6px;
    border-radius: 4px;
    background: var(--affine-white-10);
  }
  .affine-database-search-input-icon {
    display: inline-flex;
  }
  .affine-database-search-input {
    flex: 1;
    height: 16px;
    width: 80px;
    border: none;
    font-family: var(--affine-font-family);
    font-size: var(--affine-font-sm);
    box-sizing: border-box;
    color: inherit;
    background: transparent;
  }
  .affine-database-search-input:focus {
    outline: none;
  }
  .affine-database-search-input::placeholder {
    color: var(--affine-placeholder-color);
    font-size: var(--affine-font-sm);
  }

  .affine-database-toolbar-item.new-record {
    display: flex;
    align-items: center;
    gap: 4px;
    width: 120px;
    height: 32px;
    padding: 6px 8px;
    border-radius: 8px;
    font-size: 14px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.05),
      0px 0px 0px 0.5px var(--affine-black-10);
    background: linear-gradient(
        0deg,
        var(--affine-hover-color),
        var(--affine-hover-color)
      ),
      var(--affine-white);
  }
  .new-record > tool-tip {
    max-width: 280px;
  }

  .show-toolbar {
    display: flex;
  }
`;let Oc=class extends ui(ua){constructor(){super(...arguments),this._recordAddDisposables=new Ya,this._onSearch=e=>{const t=e.target,r=t.value.trim();this.setSearchState(as.Searching),r===""&&this.setSearchState(as.SearchInput);const{_databaseMap:o}=this,i=Object.keys(o).filter(s=>o[s].findIndex(l=>l.toLocaleLowerCase().includes(r.toLocaleLowerCase()))>-1),a=this.targetModel.children.filter(s=>i.includes(s.id)).map(s=>s.id);this.setFilteredRowIds(a),requestAnimationFrame(()=>t.focus())},this._onSearchKeydown=e=>{e.key==="Escape"&&(this._searchInput.value?(this._searchInput.value="",this.setSearchState(as.SearchInput)):(this._resetSearchStatus(),this._searchContainer.classList.add("hidden")))},this._clearSearch=e=>{e.stopPropagation(),this._searchInput.value="",this.setSearchState(as.SearchInput)},this._onShowSearch=()=>{this.setSearchState(as.SearchInput);const e=N1(this._searchContainer,()=>{this.searchState!==as.Searching&&(this._searchContainer.classList.add("hidden"),this.setSearchState(as.SearchIcon),e())},"click",!0)},this._onFocusSearchInput=()=>{this.searchState===as.SearchInput?(this._searchInput.focus(),this._searchContainer.classList.remove("hidden")):this._searchInput.blur()},this._onShowAction=()=>{if(!this.readonly){if(this._toolbarAction){this._closeToolbarAction();return}this.setSearchState(as.Action),this._toolbarAction=new nm,this._toolbarAction.targetModel=this.targetModel,this._toolbarAction.close=this._closeToolbarAction,this._moreActionContainer.appendChild(this._toolbarAction),sd(this._moreActionContainer,this._toolbarAction,{placement:"bottom"}),N1(this._moreActionContainer,()=>{this._closeToolbarAction()},"mousedown")}},this._closeToolbarAction=()=>{var e;(e=this._toolbarAction)==null||e.remove(),this._toolbarAction=void 0},this._resetSearchStatus=()=>{this._searchInput.value="",this.setFilteredRowIds([]),this.setSearchState(as.SearchIcon)},this._onAddNewRecord=()=>{this.readonly||this.addRow(0)}}get readonly(){return this.targetModel.page.readonly}firstUpdated(){this.readonly||this._initAddRecordHandlers()}updated(e){super.updated(e),this.readonly||this._initAddRecordHandlers()}_initAddRecordHandlers(){this._recordAddDisposables.dispose();const e=nue(this._newRecord,this,this.addRow);e&&(this._recordAddDisposables=e)}get _databaseMap(){var o;const e={};for(const i of this.targetModel.children)e[i.id]=[((o=i.text)==null?void 0:o.toString())??""];const{cells:t}=this.targetModel;return this.targetModel.children.map(i=>i.id).forEach(i=>{const a=t[i];if(!a)return;const s=Object.keys(a).map(l=>{const d=a[l].value;return Array.isArray(d)?d.map(u=>u.value):a[l].value+""});e[i].push(...s.flat())}),e}render(){const e=this.searchState===as.SearchInput||this.searchState===as.Searching,t=this.searchState===as.Action,r=e?void 0:this._onShowSearch,o=this._searchInput?this._searchInput.value===""?null:QS:null,i=rt`
      <div
        class="affine-database-search-container ${e?"search-container-expand":""}"
        @click=${r}
        @transitionend=${this._onFocusSearchInput}
      >
        <div class="affine-database-search-input-icon">
          ${Bq}
        </div>
        <div class="search-input-container">
          <input
            placeholder="Search..."
            class="affine-database-search-input"
            @input=${this._onSearch}
            @click=${a=>a.stopPropagation()}
            @keydown=${this._onSearchKeydown}
            @pointerdown=${_u}
          />
          <div class="has-tool-tip close-icon" @click=${this._clearSearch}>
            ${o}
            <tool-tip inert arrow tip-position="top" role="tooltip">
              <span class="code">Esc</span> to clear all
            </tool-tip>
          </div>
        </div>
      </div>
    `;return rt`<div
      class="affine-database-toolbar ${this.hoverState?"show-toolbar":""}"
    >
      <div class="affine-database-toolbar-item search-container hidden">
        ${i}
      </div>
      ${this.readonly?null:rt`<div
              class="affine-database-toolbar-item more-action ${t?"active":""}"
              @click=${this._onShowAction}
            >
              ${ek}
            </div>
            <div
              class="has-tool-tip affine-database-toolbar-item new-record"
              draggable="true"
              @click=${this._onAddNewRecord}
            >
              ${$b}<span>New Record</span>
              <tool-tip inert arrow tip-position="top" role="tooltip"
                >You can drag this button to the desired location and add a
                record
              </tool-tip>
            </div>`}
    </div>`}};Oc.styles=oue;qd([Ft()],Oc.prototype,"targetModel",void 0);qd([Ft()],Oc.prototype,"hoverState",void 0);qd([Ft()],Oc.prototype,"searchState",void 0);qd([Ft()],Oc.prototype,"addRow",void 0);qd([Ft()],Oc.prototype,"setSearchState",void 0);qd([Ft()],Oc.prototype,"setFilteredRowIds",void 0);qd([Rr(".affine-database-search-input")],Oc.prototype,"_searchInput",void 0);qd([Rr(".more-action")],Oc.prototype,"_moreActionContainer",void 0);qd([Rr(".search-container")],Oc.prototype,"_searchContainer",void 0);qd([Rr(".new-record")],Oc.prototype,"_newRecord",void 0);Oc=qd([lr("affine-database-toolbar")],Oc);class z1{constructor(e){this.yDoc=new iq,this._active=!0,this.type="default",this.maxLength=1/0;const{rootElement:t,yText:r=this.yDoc.getText(z1.YTEXT_NAME),maxLength:o,type:i}=e,a=r.toString();if(o&&(this.maxLength=o,a.length>o))throw new Error("The text exceeds the limit length.");if(i&&(this.type=i),r instanceof $g)if(r.doc)this.yText=r,this.yDoc=r.doc;else throw new Error("Y.Text should be binded to Y.Doc.");else this.yText=this.yDoc.getText(z1.YTEXT_NAME),this.yText.insert(0,a);this.undoManager=new aq(this.yText,{trackedOrigins:new Set([this.yDoc.clientID])}),this.undoManager.on("stack-item-added",s=>{const l=this.vEditor.getVRange();s.stackItem.meta.set("v-range",l)}),this.undoManager.on("stack-item-popped",s=>{const l=s.stackItem.meta.get("v-range");l&&this.vEditor.setVRange(l)}),this.vEditor=new od(this.yText,{active:()=>ca.isActive(e.rootElement)&&this.active}),this.vEditor.mount(t),this.vEditor.bindHandlers({paste:s=>{var u,p;s.stopPropagation();const l=(p=(u=s.clipboardData)==null?void 0:u.getData("text/plain"))==null?void 0:p.replace(/(\r\n|\r|\n)/g,`
`);if(!l)return;const d=this.vEditor.getVRange();if(d){d.length>0&&this.vEditor.yText.delete(d.index,d.length);const f=this.vEditor.yText.length,h=this.maxLength-f;if(h<=0)return;const c=l.length>h?l.slice(0,h):l;this.vEditor.insertText(d,c),this.vEditor.setVRange({index:d.index+c.length,length:0}),this.undoManager.stopCapturing()}},virgoInput:s=>{const l=this.vEditor.getVRange();if(!l)return s;let d=this.vEditor.yText.toString();l.length>0&&(d=`${d.substring(0,l.index)}${d.substring(l.index+l.length)}`);const u=`${d.substring(0,l.index)}${s.data??""}${d.substring(l.index)}`;let p=!0;return u.length>=this.maxLength&&(s.skipDefault=!0,p=!1),p&&this.undoManager.stopCapturing(),s},virgoCompositionEnd:s=>{const l=this.vEditor.getVRange();if(!l)return s;let d=this.vEditor.yText.toString();l.length>0&&(d=`${d.substring(0,l.index)}${d.substring(l.index+l.length)}`);const u=`${d.substring(0,l.index)}${s.data}${d.substring(l.index)}`;let p=!0;return u.length>=this.maxLength&&(s.data="",p=!1),p&&this.undoManager.stopCapturing(),s},keydown:s=>{s instanceof KeyboardEvent&&(s.ctrlKey||s.metaKey)&&(s.key==="z"||s.key==="Z")&&(s.preventDefault(),s.shiftKey?this.redo():this.undo())}}),t.addEventListener("blur",()=>{if(this.type==="number"){const s=this.yText.toString(),l=parseFloat(s),d=isNaN(l)?"":l.toString();s!==d&&(this.setActive(!1),this.setValue(d),requestAnimationFrame(()=>{this.setActive(!0)}))}})}get value(){return this.yText.toString()}get active(){return this._active}setActive(e){this._active=e}setValue(e){if(e.length>this.maxLength)throw new Error("The text exceeds the limit length.");this.yText.delete(0,this.yText.length),this.yText.insert(0,e),this.vEditor.setVRange({index:e.length,length:0}),this.undoManager.stopCapturing()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}}z1.YTEXT_NAME="YTEXT_NAME";var Rx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let rm=class extends ui(ua){constructor(){super(...arguments),this._titleVInput=null,this._handleKeyDown=e=>{if(e.key==="Enter"){e.preventDefault(),this.addRow(0);return}},this._onTitleFocus=()=>{var e,t,r;this._titleContainer.classList.remove("ellipsis"),(e=this._titleVInput)==null||e.setActive(!0),((t=this._titleVInput)==null?void 0:t.value)==="Database"&&((r=this._titleVInput)==null||r.setValue(""))},this._onTitleBlur=()=>{var e,t,r;this._titleContainer.classList.add("ellipsis"),(e=this._titleVInput)==null||e.setActive(!1),((t=this._titleVInput)==null?void 0:t.value)===""&&((r=this._titleVInput)==null||r.setValue(sq))}}firstUpdated(){this._initTitleVEditor();const e=this._disposables;e.addFromEvent(this._titleContainer,"focus",this._onTitleFocus),e.addFromEvent(this._titleContainer,"blur",this._onTitleBlur);const t=r=>r.stopPropagation();this._disposables.addFromEvent(this,"pointerdown",t),this._disposables.addFromEvent(this,"pointermove",t)}_initTitleVEditor(){this._titleVInput=new z1({yText:this.targetModel.title.yText,rootElement:this._titleContainer,maxLength:lq}),Yb(this.targetModel.page,this._titleVInput.vEditor),this._titleVInput.vEditor.setReadonly(this.targetModel.page.readonly),this._titleContainer.addEventListener("keydown",this._handleKeyDown),this.targetModel.title.yText.observe(()=>{this.requestUpdate()})}render(){const e=!this.targetModel.title||!this.targetModel.title.length;return rt`<div class="affine-database-title">
      <div
        class="database-title ${e?"database-title-empty":""}"
        data-block-is-database-title="true"
        title=${this.targetModel.title.toString()}
      ></div>
    </div>`}};rm.styles=vr`
    .affine-database-title {
      flex: 1;
      max-width: 300px;
      min-width: 300px;
      height: 30px;
    }

    .database-title {
      position: sticky;
      width: 300px;
      height: 30px;
      font-size: 18px;
      font-weight: 600;
      line-height: 24px;
      color: var(--affine-text-primary-color);
      font-family: inherit;
      /* overflow-x: scroll; */
      overflow: hidden;
      cursor: text;
    }

    .database-title [data-virgo-text='true'] {
      display: block;
      white-space: pre !important;
    }

    .database-title.ellipsis [data-virgo-text='true'] {
      white-space: nowrap !important;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .database-title:focus {
      outline: none;
    }

    .database-title:disabled {
      background-color: transparent;
    }

    .database-title-empty::before {
      content: 'Database';
      color: var(--affine-placeholder-color);
      position: absolute;
      opacity: 0.5;
    }
  `;Rx([Ft()],rm.prototype,"targetModel",void 0);Rx([Ft()],rm.prototype,"addRow",void 0);Rx([Rr(".database-title")],rm.prototype,"_titleContainer",void 0);rm=Rx([lr("affine-database-title")],rm);var iue=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let sb=class extends tc{constructor(){super(...arguments),this.cellType="checkbox"}firstUpdated(){this._disposables.addFromEvent(this,"click",this._onChange)}_onChange(){var t;const e=!((t=this.cell)!=null&&t.value);this.rowHost.setValue(e)}render(){var r;const e=((r=this.cell)==null?void 0:r.value)??!1,t=e?Oz():Az();return rt`<div class="affine-database-checkbox-container">
      <div class="affine-database-checkbox checkbox ${e&&"checked"}">
        ${t}
      </div>
    </div>`}};sb.tag=Ui`affine-database-checkbox-cell`;sb.styles=vr`
    affine-database-checkbox-cell {
      display: block;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .affine-database-checkbox-container {
      height: 100%;
    }

    .affine-database-checkbox {
      display: flex;
      align-items: center;
      height: 100%;
      width: 100%;
    }
  `;sb=iue([lr("affine-database-checkbox-cell")],sb);const aue=Lm("checkbox",()=>({}),()=>!1,{Cell:sb,CellEditing:null},{displayName:"Checkbox"});var qz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let lb=class extends tc{constructor(){super(...arguments),this.cellType="multi-select"}render(){return Ei`
      <affine-database-select-cell
        .rowHost=${this.rowHost}
        .databaseModel=${this.databaseModel}
        .rowModel=${this.rowModel}
        .column=${this.column}
        .cell=${this.cell}
      ></affine-database-select-cell>
    `}};lb.styles=vr`
    :host {
      width: 100%;
    }
  `;lb.tag=Ui`affine-database-multi-select-cell`;lb=qz([lr("affine-database-multi-select-cell")],lb);let l4=class extends tc{constructor(){super(...arguments),this.cellType="multi-select"}render(){return Ei`
      <affine-database-select-cell-editing
        data-is-editing-cell="true"
        .rowHost=${this.rowHost}
        .databaseModel=${this.databaseModel}
        .rowModel=${this.rowModel}
        .column=${this.column}
        .cell=${this.cell}
        .mode=${ob.Multi}
      ></affine-database-select-cell-editing>
    `}};l4.tag=Ui`affine-database-multi-select-cell-editing`;l4=qz([lr("affine-database-multi-select-cell-editing")],l4);const sue=Lm("multi-select",()=>({selection:[]}),()=>[],{Cell:lb,CellEditing:l4},{displayName:"Multi Select"});var Jz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let om=class extends tc{constructor(){super(...arguments),this.cellType="number",this._vInput=null,this._onClick=()=>{this.databaseModel.page.captureSync()},this._onInitVEditor=()=>{var t;let e;if((t=this.cell)!=null&&t.value)e=this.cell.value;else{const r=new this.databaseModel.page.YText("");this.databaseModel.updateCell(this.rowModel.id,{columnId:this.column.id,value:r}),e=r}this._vInput=new z1({yText:e,rootElement:this._container,type:"number"}),Yb(this.databaseModel.page,this.vEditor),this._container.addEventListener("keydown",r=>{if(this._vInput&&r.key==="Enter"){r.shiftKey||(this.rowHost.setEditing(!1),this._container.blur()),r.preventDefault();return}})}}get vEditor(){return xt(this._vInput),this._vInput.vEditor}firstUpdated(){this._disposables.addFromEvent(this,"click",this._onClick),this._onInitVEditor()}render(){return rt`<div class="affine-database-number number virgo-editor"></div>`}};om.styles=vr`
    affine-database-number-cell-editing {
      display: block;
      width: 100%;
      height: 100%;
      cursor: text;
    }

    .affine-database-number {
      display: flex;
      align-items: center;
      height: 100%;
    }
    .affine-database-number:focus {
      outline: none;
    }
    .affine-database-number v-line {
      display: flex !important;
      align-items: center;
      height: 100%;
      width: 100%;
    }
    .affine-database-number v-line > div {
      flex-grow: 1;
    }
  `;om.tag=Ui`affine-database-number-cell-editing`;Jz([Rr(".affine-database-number")],om.prototype,"_container",void 0);om=Jz([lr("affine-database-number-cell-editing")],om);const lue=Lm("number",()=>({decimal:0}),n=>new n.YText(""),{Cell:om,CellEditing:null},{displayName:"Number"});var s_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const cue=vr`
  affine-database-progress-cell-editing {
    display: block;
    width: 100%;
    height: 100%;
    padding: 0 4px;
  }

  affine-database-progress-cell-editing:hover
    .affine-database-progress-drag-handle {
    opacity: 1;
  }

  .affine-database-progress {
    display: flex;
    align-items: center;
    height: 100%;
    gap: 4px;
  }

  .affine-database-progress-bar {
    position: relative;
    width: 104px;
  }

  .affine-database-progress-bg {
    overflow: hidden;
    width: 100%;
    height: 13px;
    border-radius: 22px;
  }

  .affine-database-progress-fg {
    height: 100%;
  }

  .affine-database-progress-drag-handle {
    position: absolute;
    top: 0;
    left: 0;
    transform: translate(0px, -1px);
    width: 6px;
    height: 15px;
    border-radius: 2px;
    opacity: 0;
    cursor: ew-resize;
    background: var(--affine-primary-color);
    transition: opacity 0.2s ease-in-out;
  }

  .progress-number {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 18px;
    width: 25px;
    color: var(--affine-text-secondary-color);
    font-size: 14px;
  }
`,n8={empty:"var(--affine-black-10)",processing:"var(--affine-processing-color)",success:"var(--affine-success-color)"};let B1=class extends tc{constructor(){super(...arguments),this.cellType="progress",this._dragConfig=null,this._progressBgWidth=0,this._onDocumentMove=()=>{this._dragConfig&&this._onPointerUp()},this._onPointerDown=e=>{e.stopPropagation();const{left:t,width:r}=this._progressBg.getBoundingClientRect(),o=r-6;this._dragConfig={stepWidth:o/100,boundLeft:t,containerWidth:o},this.databaseModel.page.captureSync()},this._onPointerMove=e=>{var s;if(e.stopPropagation(),!this._dragConfig)return;const t=e.clientX,{boundLeft:r,containerWidth:o,stepWidth:i}=this._dragConfig;let a;t<=r?a=0:t-r>=o?a=100:a=Math.floor((t-r)/i),((s=this.cell)==null?void 0:s.value)!==a&&this.rowHost.setValue(a,{captureSync:!1})},this._onPointerUp=()=>{this._dragConfig=null,this.databaseModel.page.captureSync()}}firstUpdated(){var i;const e=this._disposables;e.addFromEvent(this._dragHandle,"pointerdown",this._onPointerDown),e.addFromEvent(this,"pointermove",this._onPointerMove),e.addFromEvent(this,"pointerup",this._onPointerUp),e.addFromEvent(document,"pointermove",this._onDocumentMove);const{width:t}=this._progressBg.getBoundingClientRect(),r=t-6;this._progressBgWidth=r;const o=(i=this.cell)==null?void 0:i.value;o&&this._setDragHandlePosition(o)}_setDragHandlePosition(e){const t=this._progressBgWidth*(e/100);this._dragHandle.style.transform=`translate(${t}px, -1px)`}updated(e){var t;super.updated(e),e.has("cell")&&this._setDragHandlePosition(((t=this.cell)==null?void 0:t.value)??0)}render(){var i;const e=((i=this.cell)==null?void 0:i.value)??0;let t=n8.processing;e===100&&(t=n8.success);const r=Ur({width:`${e}%`,backgroundColor:t}),o=Ur({backgroundColor:e===0?n8.empty:"var(--affine-hover-color)"});return rt`<div
      class="affine-database-progress"
      @mousedown=${a=>a.preventDefault()}
    >
      <div class="affine-database-progress-bar">
        <div class="affine-database-progress-bg" style=${o}>
          <div class="affine-database-progress-fg" style=${r}></div>
          <div class="affine-database-progress-drag-handle"></div>
        </div>
      </div>
      <div class="progress-number progress">${e}</div>
    </div>`}};B1.styles=cue;B1.tag=Ui`affine-database-progress-cell-editing`;s_([Rr(".affine-database-progress-drag-handle")],B1.prototype,"_dragHandle",void 0);s_([Rr(".affine-database-progress-bg")],B1.prototype,"_progressBg",void 0);B1=s_([lr("affine-database-progress-cell-editing")],B1);const due=Lm("progress",()=>({}),()=>0,{Cell:B1,CellEditing:null},{displayName:"Progress"});var Qz=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function F2(n,e){const t=n.getVRange();if(!t)return;const r=n.rootElement;if(!r)return;const o=n.getDeltasByVRange(t);let i={};for(const[s]of o){const l=s.attributes;l&&(i={...l})}const a=Object.fromEntries(Object.entries(e).map(([s,l])=>typeof l=="boolean"&&l===i[s]?[s,!l]:[s,l]));n.formatText(t,a,{mode:"merge"}),r.blur(),n.syncVRange()}let im=class extends tc{constructor(){super(...arguments),this.vEditor=null,this.cellType="rich-text",this._initYText=e=>{const t=new this.databaseModel.page.YText(e);return this.databaseModel.updateCell(this.rowModel.id,{columnId:this.column.id,value:t}),t},this._handleKeyDown=e=>{if(e.key!=="Escape"){if(e.key==="Tab"){e.preventDefault();return}e.stopPropagation()}if(!this.vEditor)return;if(e.key==="Enter"){e.shiftKey?this._onSoftEnter():(this.rowHost.setEditing(!1),this._container.blur()),e.preventDefault();return}const t=this.vEditor;switch(e.key){case"B":case"b":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),F2(this.vEditor,{bold:!0}));break;case"I":case"i":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),F2(this.vEditor,{italic:!0}));break;case"U":case"u":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),F2(this.vEditor,{underline:!0}));break;case"S":case"s":(e.metaKey||e.ctrlKey)&&e.shiftKey&&(e.preventDefault(),F2(t,{strike:!0}));break;case"E":case"e":(e.metaKey||e.ctrlKey)&&e.shiftKey&&(e.preventDefault(),F2(t,{code:!0}));break}},this._onSoftEnter=()=>{if(this.cell&&this.vEditor){const e=this.vEditor.getVRange();xt(e),this.databaseModel.page.captureSync(),new jg(this.vEditor.yText).replace(e.index,length,`
`),this.vEditor.setVRange({index:e.index+1,length:0})}}}get readonly(){return this.databaseModel.page.readonly}firstUpdated(){this._onInitVEditor(),this._disposables.addFromEvent(this,"click",this._handleClick)}_handleClick(){this.databaseModel.page.captureSync()}_onInitVEditor(){var t;let e;(t=this.cell)!=null&&t.value?typeof this.cell.value=="string"?e=this._initYText(this.cell.value):e=this.cell.value:e=this._initYText(),this.vEditor=new od(e,{active:()=>ca.isActive(this)}),Yb(this.databaseModel.page,this.vEditor),this.vEditor.mount(this._container),this.vEditor.bindHandlers({keydown:this._handleKeyDown}),this.vEditor.setReadonly(this.readonly)}render(){return Ei`<div class="affine-database-rich-text virgo-editor"></div>`}};im.styles=vr`
    affine-database-rich-text-cell {
      display: flex;
      align-items: center;
      width: 100%;
      height: 100%;
      cursor: text;
    }

    .affine-database-rich-text {
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 100%;
      height: 100%;
      outline: none;
    }
    .affine-database-rich-text v-line {
      display: flex !important;
      align-items: center;
      height: 100%;
      width: 100%;
    }
    .affine-database-rich-text v-line > div {
      flex-grow: 1;
    }
  `;im.tag=Ui`affine-database-rich-text-cell`;Qz([Rr(".affine-database-rich-text")],im.prototype,"_container",void 0);im=Qz([lr("affine-database-rich-text-cell")],im);const uue=Lm("rich-text",()=>({}),n=>new n.YText(""),{Cell:im,CellEditing:null},{displayName:"Rich Text"});var vp=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let Au=class extends ui(ua){constructor(){super(...arguments),this._onOptionFocus=()=>{this._container.classList.remove("ellipsis")},this._onOptionBlur=()=>{this._container.classList.add("ellipsis")}}get _vEditor(){return this._vInput.vEditor}updated(e){super.updated(e),e.has("editing")&&(this.editing&&this._vEditor.focusEnd(),this._vEditor.setReadonly(!this.editing),this._vEditor.setText(this.select.value)),e.has("select")&&this._vEditor.setText(this.select.value)}getSelectionValue(){return this._vEditor.yText.toString()}_onInitVEditor(){this._vInput=new z1({yText:this.select.value,rootElement:this._container,maxLength:x3}),Yb(this.databaseModel.page,this._vEditor),this._vEditor.setReadonly(!this.editing),this._container.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),this._vInput.value.length>0&&this.saveSelectionName(this.index)),e.key==="Escape"&&(e.stopPropagation(),e.preventDefault(),this.setEditingIndex(-1),this._container.blur())})}firstUpdated(){this._disposables.addFromEvent(this._container,"focus",this._onOptionFocus),this._disposables.addFromEvent(this._container,"blur",this._onOptionBlur),this._onInitVEditor()}render(){const e=Ur({backgroundColor:this.select.color,cursor:this.editing?"text":"pointer"});return rt`<div
      class="select-option-text virgo-editor"
      style=${e}
    ></div>`}};Au.styles=vr`
    affine-database-select-option {
      display: flex;
      align-items: center;
    }
    .select-option-text {
      display: inline-block;
      min-width: 22px;
      height: 100%;
      max-width: 100%;
      padding: 2px 10px;
      border-radius: 4px;
      background: var(--affine-tag-pink);
      overflow: hidden;
      cursor: text;
    }
    .select-option-text:focus {
      outline: none;
    }

    .select-option-text [data-virgo-text='true'] {
      display: block;
      white-space: nowrap !important;
      text-overflow: ellipsis;
      overflow: hidden;
    }
  `;vp([Ft()],Au.prototype,"databaseModel",void 0);vp([Ft()],Au.prototype,"select",void 0);vp([Ft()],Au.prototype,"editing",void 0);vp([Ft()],Au.prototype,"index",void 0);vp([Ft()],Au.prototype,"saveSelectionName",void 0);vp([Ft()],Au.prototype,"setEditingIndex",void 0);vp([Rr(".select-option-text")],Au.prototype,"_container",void 0);Au=vp([lr("affine-database-select-option")],Au);const hue=["Tab","Enter","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fue=["Tab","Escape"];class pue{constructor(e,t){this._disposables=new Ya,this._service=null,this._onClick=r=>{var o;(o=this._service)==null||o.clearCellLevelSelection()},this._onCellSelectionMove=r=>{const i=r.get("keyboardState").raw;if(hue.indexOf(i.key)<=-1)return;const a=na("affine:database"),s=a.getLastCellSelection();if(!s)return;i.preventDefault();const{databaseId:l,coords:d}=s;if(i.key==="Enter")a.setCellSelection({type:"edit",coords:d,databaseId:l});else{const u=xz(d[0],l,i.key);a.setCellSelection({type:"select",coords:[u],databaseId:l})}return!0},this._add=(r,o)=>{this._disposables.add(this._dispatcher.add(r,o))},this.onCellSelectionChange=r=>{if(!gue(r.key))return;r.preventDefault(),r.stopPropagation();const o=r.target;eB(o,this._model.id,r.key)},this._dispatcher=e,this._model=t,this._service=na("affine:database"),this._add("click",this._onClick),this._add("keyDown",this._onCellSelectionMove)}dispose(){this._disposables.dispose()}}function gue(n){return fue.indexOf(n)>-1}function eB(n,e,t){const r=n.closest(".affine-database-block-rows"),o=n.closest(".database-cell");if(!r||!o)return;const i=o.querySelector(".virgo-editor");i==null||i.blur(),ts(null);const a=xz(o,e,t),s=na("affine:database");s.getLastRowSelection()===null&&s.setCellSelection({type:"select",coords:[a],databaseId:e})}var Dx=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const mue=[{type:"rename",text:"Rename",icon:Rg},{type:"divider"},{type:"delete",text:"Delete",icon:wm}];let H1=class extends so{constructor(){super(...arguments),this._onAction=(e,t)=>{e.stopPropagation(),this.onAction(t,this.index),this.onClose()}}render(){return rt`
      <div class="affine-database-select-action">
        ${mue.map(e=>o_(e)?rt`<div class="action-divider"></div>`:rt`
            <div
              class="action ${e.type}"
              @mousedown=${t=>this._onAction(t,e.type)}
            >
              <div class="action-content">
                ${e.icon}<span>${e.text}</span>
              </div>
            </div>
          `)}
      </div>
    `}};H1.styles=vr`
    :host {
      z-index: 11;
    }
    .affine-database-select-action {
      width: 200px;
      padding: 8px;
      border: 1px solid var(--affine-border-color);
      border-radius: 8px;
      background: var(--affine-white);
      box-shadow: var(--affine-menu-shadow);
    }
    ${ty}
    .action {
      color: var(--affine-text-primary-color);
    }
    .action svg {
      width: 20px;
      height: 20px;
    }
    .rename,
    .delete {
      fill: var(--affine-icon-color);
    }
  `;Dx([Ft()],H1.prototype,"index",void 0);Dx([Ft()],H1.prototype,"onAction",void 0);Dx([Ft()],H1.prototype,"onClose",void 0);H1=Dx([lr("affine-database-select-action-popup")],H1);var n0=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const vue=["Enter","ArrowUp","ArrowDown"],bue=vr`
  affine-database-select-cell-editing {
    z-index: 2;
    border: 1px solid var(--affine-border-color);
    border-radius: 8px;
    background: var(--affine-background-primary-color);
    box-shadow: var(--affine-shadow-2);
  }
  .affine-database-select-cell-select {
    font-size: var(--affine-font-sm);
  }
  .select-input-container {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 6px;
    min-height: 44px;
    padding: 10px 8px;
    background: var(--affine-hover-color);
  }
  .select-input {
    flex: 1 1 0%;
    height: 24px;
    border: none;
    font-family: var(--affine-font-family);
    color: inherit;
    background: transparent;
    line-height: 24px;
  }
  .select-input:focus {
    outline: none;
  }
  .select-input::placeholder {
    color: var(--affine-placeholder-color);
  }
  .select-option-container {
    padding: 8px;
    color: var(--affine-black-90);
  }
  .select-option-container-header {
    padding: 8px 0px;
    color: var(--affine-black-60);
  }
  .select-input-container .select-selected {
    display: flex;
    align-items: center;
    padding: 2px 10px;
    gap: 10px;
    height: 28px;
    background: var(--affine-tag-white);
    border-radius: 4px;
    color: var(--affine-black-90);
    background: var(--affine-tertiary-color);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }
  .select-selected-text {
    width: calc(100% - 16px);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }
  .select-selected > .close-icon {
    display: flex;
    align-items: center;
  }
  .select-selected > .close-icon:hover {
    cursor: pointer;
  }
  .select-selected > .close-icon > svg {
    fill: var(--affine-black-90);
  }
  .select-option-new {
    display: flex;
    flex-direction: row;
    align-items: center;
    height: 36px;
    padding: 4px;
    gap: 5px;
    border-radius: 4px;
    background: var(--affine-selected-color);
  }
  .select-option-new-text {
    flex: 1;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    height: 28px;
    padding: 2px 10px;
    border-radius: 4px;
    background: var(--affine-tag-red);
  }
  .select-option-new-icon {
    display: flex;
    align-items: center;
    gap: 6px;
    height: 28px;
    color: var(--affine-text-primary-color);
  }
  .select-option-new-icon svg {
    width: 16px;
    height: 16px;
  }
  .select-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 36px;
    padding: 4px;
    border-radius: 4px;
    margin-bottom: 4px;
    cursor: pointer;
  }
  .select-option.selected,
  .select-option:hover {
    background: var(--affine-hover-color);
  }
  .select-option:hover .select-option-icon {
    display: flex;
  }
  .select-option-text-container {
    width: calc(100% - 28px);
    overflow: hidden;
  }
  .select-option-icon {
    display: none;
    justify-content: center;
    align-items: center;
    width: 28px;
    height: 28px;
    border-radius: 3px;
    cursor: pointer;
  }
  .select-option-icon:hover {
    background: var(--affine-hover-color);
  }
  .select-option-icon svg {
    width: 16px;
    height: 16px;
    pointer-events: none;
  }
  .editing {
    background: var(--affine-hover-color);
  }
  .editing .select-option-text [data-virgo-text='true'] {
    display: block;
    white-space: pre !important;
    overflow: unset;
    text-overflow: unset;
  }
  .editing .select-option-icon {
    display: flex;
    background: var(--affine-hover-background);
  }
`;let Yd=class extends tc{constructor(){super(...arguments),this.value=void 0,this.cellType="select",this.mode=ob.Single,this._inputValue="",this._editingIndex=-1,this._selectedOptionIndex=-1,this._selectColor=void 0,this._onSelectOption=e=>{var o;const t=e.key;if(vue.indexOf(t)<=-1)return;e.preventDefault(),e.stopPropagation();const r=this.selectionList.length-1;if(this._selectedOptionIndex===r&&t==="ArrowDown"){this._selectedOptionIndex=0;return}if(this._selectedOptionIndex<=0&&t==="ArrowUp"){this._selectedOptionIndex=r;return}if(t==="ArrowDown")this._selectedOptionIndex++;else if(t==="ArrowUp")this._selectedOptionIndex--;else if(t==="Enter"){const i=this._selectedOptionIndex;if(i===-1)return;this.isSingleMode&&(this._selectedOptionIndex=-1);const a=((o=this.cell)==null?void 0:o.value)??[],s=this.selectionList[i];this._onSelect(a,s);const l=this._selectOptionContainer.closest(".database-cell");xt(l),this._selectCell(l,"Escape")}},this._selectCell=(e,t,r=!1)=>{(this.isSingleMode||r)&&this.rowHost.setEditing(!1),eB(e,this.databaseModel.id,t)},this._onDeleteSelected=(e,t)=>{const r=e.filter(o=>o!==t);this.rowHost.setValue(r)},this._onSelectSearchInput=e=>{const t=e.target.value;this._inputValue=t,this._selectColor||(this._selectColor=oO())},this._onSelectOrAdd=(e,t)=>{const r=this._inputValue.trim();if(e.key==="Backspace"&&r==="")this._onDeleteSelected(t,t[t.length-1]);else if(e.key==="Enter"&&r!==""){if(this._selectedOptionIndex!==-1)return;const o=this.selectionList.find(i=>i.value===r);o?this._onSelect(t,o):this._onAddSelection(t)}else e.key==="Escape"?this._selectCell(e.target,"Escape",!0):e.key==="Tab"&&(e.preventDefault(),this._selectCell(e.target,"Tab",!0))},this._onSelect=(e,t)=>{if(this._editingIndex!==-1||e.findIndex(i=>i.value===t.value)>-1)return;if(this.value=t,!(e.indexOf(this.value)>-1)){const i=this.isSingleMode?[this.value]:[...e,this.value];this.rowHost.setValue(i),this.isSingleMode&&this.rowHost.setEditing(!1),!this.isSingleMode&&i.length>1&&this._calcRowHostHeight()}},this._onAddSelection=e=>{let t=this._inputValue.trim();if(t==="")return;t.length>x3&&(t=t.slice(0,x3));const r=this._selectColor??oO();this._selectColor=void 0;const o={id:cq(),value:t,color:r};this.rowHost.updateColumnProperty(a=>{const s=a.selection;return{...a,selection:s.findIndex(l=>l.value===t)===-1?[...s,o]:s}});const i=this.isSingleMode?[o]:[...e,o];this.rowHost.setValue(i),this.rowHost.setEditing(!1),!this.isSingleMode&&i.length>1&&this._calcRowHostHeight()},this._calcRowHostHeight=()=>{setTimeout(()=>{var r,o;const e=(o=(r=this.rowHost.shadowRoot)==null?void 0:r.children[0].shadowRoot)==null?void 0:o.children[0].shadowRoot,t=e==null?void 0:e.querySelector(".affine-database-select-cell-container");if(t){const{height:i}=t.getBoundingClientRect();this.rowHost.setHeight(i)}})},this._onSelectAction=(e,t)=>{if(e==="rename"){this._setEditingIndex(t);return}if(e==="delete"){this.databaseModel.updateColumn({...this.column,selection:this.selectionList.filter((o,i)=>i!==t)});const r=this.selectionList[t];this.databaseModel.deleteSelectedCellTag(this.column.id,r);return}},this._showSelectAction=e=>{const t=this.querySelectorAll(".select-option").item(e);xt(t);const r=new H1;r.onAction=this._onSelectAction,r.index=e,t.appendChild(r);const o=()=>r.remove();r.onClose=o,sd({getBoundingClientRect:()=>{const i=t.querySelector(".select-option-icon");xt(i);const{height:a}=r.getBoundingClientRect(),s=i.getBoundingClientRect();return s.y=s.y+a+36,s.x=s.x+33,s}},r,{placement:"bottom-end"}),N1(t,o,"mousedown")},this._onSaveSelectionName=e=>{const t=this._selectOptionContainer.querySelectorAll("affine-database-select-option").item(e),r=[...this.selectionList],o=t.getSelectionValue();if(r.findIndex((l,d)=>d!==e&&l.value===o)>-1)return;const a=r[e],s={...a,value:o};r[e]=s,this.databaseModel.updateColumn({...this.column,selection:r}),this.databaseModel.renameSelectedCellTag(this.column.id,a,s),this._setEditingIndex(-1)},this._setEditingIndex=e=>{this._editingIndex=e}}get isSingleMode(){return this.mode===ob.Single}get selectionList(){return this.column.selection}firstUpdated(){this.style.width=`${dq}px`,this._selectInput.focus()}connectedCallback(){super.connectedCallback(),this._disposables.addFromEvent(document.body,"keydown",this._onSelectOption),sd({getBoundingClientRect:()=>{const e=this.rowHost.getBoundingClientRect();return e.y=e.y-e.height-2,e.x=e.x-2,e}},this,{placement:"bottom-start",strategy:"fixed"})}updated(e){super.updated(e),e.has("cell")&&this._selectInput.focus()}render(){var i;const e=this.selectionList.filter(a=>this._inputValue?a.value.toLocaleLowerCase().indexOf(this._inputValue.toLocaleLowerCase())>-1:!0),t=((i=this.cell)==null?void 0:i.value)??[],o=this._inputValue&&e.findIndex(a=>a.value===this._inputValue)===-1?Ei`<div class="select-option-new" @click=${this._onAddSelection}>
          <div class="select-option-new-icon">Create ${$b}</div>
          <span
            class="select-option-new-text"
            style=${Ur({backgroundColor:this._selectColor})}
            >${this._inputValue}</span
          >
        </div>`:null;return Ei`
      <div class="affine-database-select-cell-select">
        <div class="select-input-container">
          ${t.map(a=>{const s=Ur({backgroundColor:a.color});return Ei`<div class="select-selected" style=${s}>
              <div class="select-selected-text">${a.value}</div>
              <span
                class="close-icon"
                @click=${()=>this._onDeleteSelected(t,a)}
                >${QS}</span
              >
            </div>`})}
          <input
            class="select-input"
            placeholder="Type here..."
            maxlength=${x3}
            @input=${this._onSelectSearchInput}
            @keydown=${a=>this._onSelectOrAdd(a,t)}
          />
        </div>
        <div class="select-option-container">
          <div class="select-option-container-header">
            Select tag or create one
          </div>
          ${o}
          ${Vs(e,a=>a.id,(a,s)=>{const l=s===this._editingIndex,d=s===this._selectedOptionIndex,u=l?()=>this._onSaveSelectionName(s):()=>this._showSelectAction(s),p=sz({"select-option":!0,selected:d,editing:l});return Ei`
                <div class="${p}">
                  <div
                    class="select-option-text-container"
                    @click=${()=>this._onSelect(t,a)}
                  >
                    <affine-database-select-option
                      style=${Ur({cursor:l?"text":"pointer"})}
                      .databaseModel=${this.databaseModel}
                      .select=${a}
                      .editing=${l}
                      .index=${s}
                      .saveSelectionName=${this._onSaveSelectionName}
                      .setEditingIndex=${this._setEditingIndex}
                    ></affine-database-select-option>
                  </div>
                  <div class="select-option-icon" @click=${u}>
                    ${l?S6:ek}
                  </div>
                </div>
              `})}
        </div>
      </div>
    `}};Yd.styles=bue;Yd.tag=Ui`affine-database-select-cell-editing`;n0([Ft()],Yd.prototype,"mode",void 0);n0([Rr(".select-input")],Yd.prototype,"_selectInput",void 0);n0([Ar()],Yd.prototype,"_inputValue",void 0);n0([Ar()],Yd.prototype,"_editingIndex",void 0);n0([Ar()],Yd.prototype,"_selectedOptionIndex",void 0);n0([Rr(".select-option-container")],Yd.prototype,"_selectOptionContainer",void 0);Yd=n0([lr("affine-database-select-cell-editing")],Yd);var yue=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let cb=class extends tc{constructor(){super(...arguments),this.cellType="select"}render(){var t;const e=((t=this.cell)==null?void 0:t.value)??[];return Ei`
      <div
        class="affine-database-select-cell-container"
        style=${Ur({maxWidth:`${this.column.width}px`})}
      >
        ${e.map(r=>{const o=Ur({backgroundColor:r.color});return Ei`<span class="select-selected" style=${o}
            >${r.value}</span
          >`})}
      </div>
    `}};cb.styles=vr`
    affine-database-select-cell {
      display: flex;
      align-items: center;
      width: calc(100% + 8px);
      height: 100%;
      margin: -2px -4px;
    }
    .affine-database-select-cell-container * {
      box-sizing: border-box;
    }
    .affine-database-select-cell-container {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
      width: 100%;
      cursor: pointer;
      font-size: var(--affine-font-sm);
    }
    .affine-database-select-cell-container .select-selected {
      height: 28px;
      padding: 2px 10px;
      border-radius: 4px;
      white-space: nowrap;
      background: var(--affine-tag-white);
    }
  `;cb.tag=Ui`affine-database-select-cell`;cb=yue([lr("affine-database-select-cell")],cb);const xue=Lm("select",()=>({selection:[]}),()=>[],{Cell:cb,CellEditing:Yd},{displayName:"Select"});function wue(){const n=new Qde;return n.register(lue),n.register(xue),n.register(sue),n.register(uue),n.register(due),n.register(aue),n}function Cue(n,e,t,r){const o=n.model,i=o.columns,a=t===as.Searching?o.children.filter(s=>e.indexOf(s.id)>-1):o.children;return rt`
    <style>
      .affine-database-block-rows {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
      }

      .affine-database-block-row {
        width: 100%;
        min-height: 44px;
        display: flex;
        flex-direction: row;
        border-bottom: 1px solid var(--affine-border-color);
      }
      .affine-database-block-row.selected > .database-cell {
        background: transparent;
      }
      .affine-database-block-row > .affine-database-block-row-cell:first-child {
        background: var(--affine-hover-color);
      }
      .affine-database-block-row > .database-cell {
        background: var(--affine-white);
      }

      .affine-database-block-row-cell-content {
        display: flex;
        align-items: center;
        height: 100%;
        min-height: 44px;
        padding: 0 8px;
        border-right: 1px solid var(--affine-border-color);
        transform: translateX(0);
      }
      .affine-database-block-row-cell-content > [data-block-id] {
        width: 100%;
      }
      .affine-database-block-row-cell-content > affine-paragraph {
        display: flex;
        align-items: center;
        width: 100%;
        height: 100%;
      }
      .affine-database-block-row-cell-content > affine-paragraph > .text {
        width: 100%;
        margin-top: unset;
      }
      .database-cell {
        min-width: ${x6}px;
      }
      .database-cell:last-child affine-database-cell-container {
        border-right: none;
      }
    </style>
    <div class="affine-database-block-rows">
      ${Vs(a,s=>s.id,(s,l)=>{const d=Ur({width:`${o.titleColumnWidth}px`});return rt`
            <div
              class="affine-database-block-row database-row"
              data-row-index="${l}"
              data-row-id="${s.id}"
            >
              <div
                class="affine-database-block-row-cell database-cell"
                style=${d}
              >
                <div class="affine-database-block-row-cell-content">
                  ${r.renderModel(s)}
                </div>
              </div>
              ${Vs(i,u=>rt`
                  <div
                    class="database-cell"
                    style=${Ur({width:`${u.width}px`})}
                  >
                    <affine-database-cell-container
                      .databaseModel=${o}
                      .rowModel=${s}
                      .column=${u}
                      .columnRenderer=${n.columnRenderer}
                    >
                    </affine-database-cell-container>
                  </div>
                `)}
              <div class="database-cell add-column-button"></div>
            </div>
          `})}
    </div>
  `}class Sue{constructor(e,t){this._disposables=new Ya,this._service=null,this._startCell=null,this._database=null,this._columnWidthHandles=[],this._startRange=null,this._rowIds=[],this._isInDatabase=!1,this._onDragStart=r=>{const o=r.get("pointerState"),{clientX:i,clientY:a,target:s}=o.raw,l=s;if(this._isInDatabase=Q7(l),!this._isInDatabase)return!1;const d=Uf(i,a);if(this._startRange=d,!qR(o)){const u=document.elementFromPoint(i,a);this._startCell=(u==null?void 0:u.closest(".database-cell"))??null;const p=Sz(this._startCell);this._database=p,this._columnWidthHandles=Array.from(p.querySelectorAll(".affine-database-column-drag-handle")),this._setColumnWidthHandleDisplay("none")}return!0},this._onDragMove=r=>{var p;if(!this._isInDatabase)return!1;const o=r.get("pointerState");o.raw.preventDefault();const{clientX:i,clientY:a,target:s}=o.raw;if(!Q7(s))return!1;const l=Array.from(document.elementsFromPoint(i,a)),d=l.find(f=>f.classList.contains("database-cell")),u=this._startCell;if(!d||!u||!this._database)return!1;if(d===u){const f=l.find(h=>h.classList.contains("virgo-editor"));if(f){const{left:h,right:c}=f.getBoundingClientRect();if(i<=h+1||i>=c-1)return!0;fx(this._startRange,o)}this._rowIds.length>0&&this._clearRowSelection()}else{o.raw.preventDefault(),ts(null);const f=jle(u,d),h=JT(this._database,f);this._rowIds=h;const c=SC(d);(p=this._service)==null||p.setRowSelection({type:"select",rowIds:h,databaseId:c})}return!0},this._onDragEnd=r=>{const i=r.get("pointerState").raw.target;Q7(i)&&(this._startRange=null,this._setColumnWidthHandleDisplay("block"))},this._onClick=r=>{var s;if(r.get("pointerState").raw.target instanceof A1)return;((s=this._service)==null?void 0:s.getLastRowSelection())&&this._clearRowSelection()},this._onKeydown=r=>{const a=r.get("keyboardState").raw.key;if(a==="Delete"||a==="Backspace")this._onRowSelectionDelete();else if(a==="Escape"){const s=na("affine:database"),l=s.getLastCellSelection();if(l){const{databaseId:d,coords:[u]}=l;s.clearCellLevelSelection();const p=wz(d),f=JT(p,[u.rowIndex]);s.setRowSelection({type:"select",rowIds:f,databaseId:d})}}},this._onRowSelectionDelete=()=>{const r=na("affine:database"),o=r.getLastRowSelection();if(!o)return;const{rowIds:i}=o,a=this._model.page,s=this._model.children;return a.captureSync(),s.length===i.length?a.deleteBlock(this._model):a.updateBlock(this._model,{children:s.filter(l=>i.indexOf(l.id)===-1)}),r.clearRowSelection(),!0},this._add=(r,o)=>{this._disposables.add(this._dispatcher.add(r,o))},this._dispatcher=e,this._model=t,this._service=na("affine:database"),this._add("dragStart",this._onDragStart),this._add("dragMove",this._onDragMove),this._add("dragEnd",this._onDragEnd),this._add("click",this._onClick),this._add("keyDown",this._onKeydown)}_setColumnWidthHandleDisplay(e){this._columnWidthHandles.forEach(t=>{t.style.display=e})}_clearRowSelection(){var e;this._rowIds=[],(e=this._service)==null||e.clearRowSelection(),ts(null)}dispose(){this._disposables.dispose()}}var bp=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const kue=vr`
  affine-database-table {
    position: relative;
  }

  .affine-database-block-title-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 44px;
    margin: 18px 0 0;
  }

  .affine-database-block-table {
    position: relative;
    width: 100%;
    padding-bottom: 4px;
    overflow-x: scroll;
    overflow-y: hidden;
    border-top: 1.5px solid var(--affine-border-color);
  }
  .affine-database-block-table:hover {
    padding-bottom: 0px;
  }
  .affine-database-block-table::-webkit-scrollbar {
    -webkit-appearance: none;
    display: block;
  }
  .affine-database-block-table::-webkit-scrollbar:horizontal {
    height: 4px;
  }
  .affine-database-block-table::-webkit-scrollbar-thumb {
    border-radius: 2px;
    background-color: var(--affine-black-10);
  }
  .affine-database-block-table:hover::-webkit-scrollbar:horizontal {
    height: 8px;
  }
  .affine-database-block-table:hover::-webkit-scrollbar-thumb {
    border-radius: 16px;
    background-color: var(--affine-black-30);
  }
  .affine-database-block-table:hover::-webkit-scrollbar-track {
    background-color: var(--affine-hover-color);
  }

  .affine-database-table-container {
    position: relative;
    width: fit-content;
    min-width: 100%;
  }

  .affine-database-block-tag-circle {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }

  .affine-database-block-tag {
    display: inline-flex;
    border-radius: 11px;
    align-items: center;
    padding: 0 8px;
    cursor: pointer;
  }

  .affine-database-block-footer {
    display: flex;
    width: 100%;
    height: 28px;
    margin-top: -8px;
  }
  .affine-database-block-footer:hover {
    position: relative;
    z-index: 1;
    background-color: var(--affine-hover-color-filled);
  }
  .affine-database-block-footer:hover .affine-database-block-add-row {
    display: flex;
  }

  .affine-database-block-add-row {
    display: none;
    flex: 1;
    align-items: center;
    justify-content: center;
    gap: 4px;
    width: 100%;
    height: 100%;
    cursor: pointer;
    user-select: none;
    font-size: 14px;
  }
  .affine-database-block-add-row svg {
    width: 16px;
    height: 16px;
  }

  ${hd}
`;let Lu=class extends ui(ua){constructor(){super(...arguments),this.flavour="affine:database",this._searchState=as.SearchIcon,this._filteredRowIds=[],this._hoverState=!1,this._columnRenderer=wue(),this._initRowSelectionEvents=()=>{this._rowSelection=new Sue(this.root.uiEventDispatcher,this.model)},this._initCellSelectionEvents=()=>{this._cellSelection=new pue(this.root.uiEventDispatcher,this.model)},this._setFilteredRowIds=e=>{this._filteredRowIds=e},this._setSearchState=e=>{this._searchState=e},this._onDatabaseScroll=e=>{this._columnHeaderComponent.showAddColumnButton()},this._onMouseOver=()=>{this._hoverState=!0},this._onMouseLeave=()=>{this._searchState===as.SearchIcon&&this._updateHoverState()},this._onClick=()=>{setTimeout(()=>{N1(this,()=>{this._searchState!==as.Searching&&(this._resetHoverState(),this._resetSearchState())},"mousedown")})},this._addRow=e=>{if(this.readonly)return;const t=this._searchState;this._resetSearchState(),this._resetHoverState();const r=this.model.page;r.captureSync();const o=r.addBlock("affine:paragraph",{},this.model.id,e);za(r,o),this._setSearchState(t)},this._addColumn=e=>{if(this.readonly)return;this.model.page.captureSync();const t=this.model.columns,r="multi-select",o=this._columnRenderer.get(r),i={type:r,name:`Column ${t.length+1}`,width:uq,hide:!1,...o.propertyCreator()},a=this.model.addColumn(i,e);this.model.applyColumnUpdate(),requestAnimationFrame(()=>{this._columnHeaderComponent.setEditingColumnId(a)})}}get columnRenderer(){return this._columnRenderer}get columns(){return this.model.columns}get readonly(){return this.model.page.readonly}connectedCallback(){super.connectedCallback(),this._updateHoverState(),this._initRowSelectionEvents(),this._initCellSelectionEvents();const e=this._disposables;e.addFromEvent(this,"mouseover",this._onMouseOver),e.addFromEvent(this,"mouseleave",this._onMouseLeave),e.addFromEvent(this,"click",this._onClick),e.addFromEvent(this,"keydown",this._cellSelection.onCellSelectionChange)}firstUpdated(){if(this.model.propsUpdated.on(()=>{var t;this.requestUpdate(),this.querySelectorAll("affine-database-cell-container").forEach(r=>{r.requestUpdate()}),(t=this.querySelector("affine-database-column-header"))==null||t.requestUpdate()}),this.model.childrenUpdated.on(()=>{var t;this.requestUpdate(),this.querySelectorAll("affine-database-cell-container").forEach(r=>{r.requestUpdate()}),(t=this.querySelector("affine-database-column-header"))==null||t.requestUpdate(),this._updateHoverState()}),this.readonly)return;const e=this._tableContainer.parentElement;xt(e),this._disposables.addFromEvent(e,"scroll",this._onDatabaseScroll)}_updateHoverState(){if(this.model.children.length===0){this._hoverState=!0;return}this._resetHoverState()}disconnectedCallback(){super.disconnectedCallback(),this._rowSelection.dispose(),this._cellSelection.dispose()}_resetSearchState(){this._searchState=as.SearchIcon}_resetHoverState(){this._hoverState=!1}render(){const e=Cue(this,this._filteredRowIds,this._searchState,this.root);return Ei`
      <div class="affine-database-table">
        <div class="affine-database-block-title-container">
          <affine-database-title
            .addRow=${this._addRow}
            .targetModel=${this.model}
          ></affine-database-title>
          <affine-database-toolbar
            .addRow=${this._addRow}
            .targetModel=${this.model}
            .hoverState=${this._hoverState}
            .searchState=${this._searchState}
            .setSearchState=${this._setSearchState}
            .setFilteredRowIds=${this._setFilteredRowIds}
          ></affine-database-toolbar>
        </div>
        <div class="affine-database-block-table">
          <div class="affine-database-table-container">
            <affine-database-column-header
              .columns=${this.columns}
              .targetModel=${this.model}
              .addColumn=${this._addColumn}
              .columnRenderer=${this.columnRenderer}
            ></affine-database-column-header>
            ${e}
          </div>
        </div>
        ${this.readonly?null:Ei`<div class="affine-database-block-footer">
              <div
                class="affine-database-block-add-row"
                data-test-id="affine-database-add-row-button"
                role="button"
                @click=${()=>this._addRow()}
              >
                ${$b}<span>New Record</span>
              </div>
            </div>`}
      </div>
    `}};Lu.styles=kue;bp([Ft()],Lu.prototype,"model",void 0);bp([Ft()],Lu.prototype,"root",void 0);bp([Rr(".affine-database-table-container")],Lu.prototype,"_tableContainer",void 0);bp([Rr("affine-database-column-header")],Lu.prototype,"_columnHeaderComponent",void 0);bp([Ar()],Lu.prototype,"_searchState",void 0);bp([Ar()],Lu.prototype,"_filteredRowIds",void 0);bp([Ar()],Lu.prototype,"_hoverState",void 0);Lu=bp([lr("affine-database-table")],Lu);var l_=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const _ue=vr`
  affine-database-kanban {
    position: relative;
  }
`;let db=class extends ui(ua){constructor(){super(...arguments),this.flavour="affine:database"}get slots(){return this.host.slots}get page(){return this.host.page}get clipboard(){return this.host.clipboard}get getService(){return this.host.getService}connectedCallback(){super.connectedCallback()}render(){return Ei`<div class="affine-database-kanban">kanban view</div>`}};db.styles=_ue;l_([Ft()],db.prototype,"model",void 0);l_([Ft()],db.prototype,"host",void 0);db=l_([lr("affine-database-kanban")],db);var Eue=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let iO=class extends ql{connectedCallback(){super.connectedCallback(),pd("affine:database",kz),this.model.propsUpdated.on(()=>this.requestUpdate())}render(){const e=Ui`affine-database-${Aj(this.model.mode)}`;return Ei`
      <${e}
        .root=${this.root}
        .model=${this.model}
        class="affine-block-element"
      ></${e}>
    `}};iO=Eue([lr("affine-database")],iO);function aO(n){const e=window.getComputedStyle(n);return YD.reduce((r,o)=>{const i=e.getPropertyValue(o).trim();return r[o]=i,o==="--affine-palette-transparent"&&!i&&(r[o]="#00000000"),r},{})}class Pue extends Yo{constructor(){super(...arguments),this._mode="",this._cssVariables=null}get cssVariables(){return this._cssVariables}observer(e){var t;(t=this._observer)==null||t.disconnect(),this._cssVariables=aO(e),this._observer=new MutationObserver(()=>{const r=e.getAttribute("data-theme");this._mode!==r&&(this._cssVariables=aO(e),this.emit(this._cssVariables))}),this._observer.observe(e,{attributes:!0,attributeFilter:["data-theme"]})}dispose(){var e;super.dispose(),(e=this._observer)==null||e.disconnect()}}const Mue=new Map([[Nj,Ui`affine-default-page`],[zj,Ui`affine-surface`],[Bj,Ui`affine-list`],[Hj,Ui`affine-frame`],[Fj,Ui`affine-database`],[Zj,Ui`affine-divider`],[Uj,Ui`affine-code`],[Wj,Ui`affine-embed`],[Vj,Ui`affine-paragraph`],[Kj,Ui`affine-bookmark`]]),Iue=new Map([[Nj,Ui`affine-edgeless-page`],[zj,Ui`affine-surface`],[Bj,Ui`affine-list`],[Hj,Ui`affine-frame`],[Fj,Ui`affine-database`],[Zj,Ui`affine-divider`],[Uj,Ui`affine-code`],[Wj,Ui`affine-embed`],[Vj,Ui`affine-paragraph`],[Kj,Ui`affine-bookmark`]]),tB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},nB="__ $BLOCKSUITE_BLOCKS$ __";tB[nB]===!0&&console.error("@revesuite/blocks was already imported. This breaks constructor checks and will lead to issues!");if(typeof window>"u")throw new Error("Seems like you are importing @revesuite/blocks in SSR mode. Which is not supported for now.");tB[nB]=!0;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tue=lx(class extends cx{constructor(){super(...arguments),this.key=Di}render(n,e){return this.key=n,e}update(n,[e,t]){return e!==this.key&&($R(n),this.key=e),t}}),Oue=()=>{var n;return((n=document.activeElement)==null?void 0:n.closest("editor-container"))!=null},Aue=(n,e)=>new ks({mouseRoot:n,enableDatabase:!!e.awarenessStore.getFlag("enable_database"),onClickCard:async r=>{var l,d,u,p;const o=[];if(r.flavour==="affine:database"&&!e.awarenessStore.getFlag("enable_database")){console.warn("database block is not enabled");return}r.flavour==="affine:embed"&&r.type==="image"?o.push(...await P6(e)):o.push(r);const a=(l=e.root)==null?void 0:l.lastItem(),s=Vi(e);if(s){const f=s.models[s.models.length-1];if(r.flavour==="affine:bookmark"){const g=e.getParent(f);xt(g);const m=g.children.indexOf(f);C3(g,m+1);return}const h=e.addSiblingBlocks(f,o,"after"),c=h[h.length-1];za(e,c)}else if(a){if(r.flavour==="affine:bookmark"){C3((d=e.root)==null?void 0:d.lastItem());return}let f=(p=(u=e.root)==null?void 0:u.lastItem())==null?void 0:p.id;o.forEach(h=>{var c;f=e.addBlock(h.flavour??"affine:paragraph",h,(c=e.root)==null?void 0:c.lastItem())}),f&&za(e,f)}},onDrop:async(r,o,i,a)=>{const s=r.dataTransfer;xt(s);const l=s.getData("affine/block-hub"),d=[],u=JSON.parse(l),p=u.flavour==="affine:database";if(p&&!e.awarenessStore.getFlag("enable_database")){console.warn("database block is not enabled");return}u.flavour==="affine:embed"&&u.type==="image"?d.push(...await P6(e)):d.push(u);let f,h;if(i&&a!=="none"){const{model:m}=i;if(e.captureSync(),a==="database")h=e.addBlocks(d,m)[0],f=m.id;else if(u.flavour==="affine:bookmark"){const b=e.getParent(m);xt(b);const v=b.children.indexOf(m);h=C3(b,v+1),f=b.id}else{const b=e.getParent(m);xt(b),h=e.addSiblingBlocks(m,d,a)[0],f=b.id}p&&(await L1(u.flavour)).initDatabaseBlock(e,m,h)}if(n.mode==="page"){h&&(za(e,h),e4(e,1));return}const c=hee(e);xt(c);let g;if(h&&f){const m=eC(f,c);xt(m),g=m.model.id}else{const m=c.addNewFrame(d,o);g=m.frameId,h=m.ids[0]}c.setSelection(g,!0,h,o)},onDragStart:()=>{if(n.mode==="page"){const r=n.querySelector("affine-default-page");xt(r),r.selection.clear()}},getAllowedBlocks:()=>{if(n.mode==="page"){const r=n.querySelector("affine-default-page");return xt(r),Pv(r.model)}else{const r=n.querySelector("affine-edgeless-page");return xt(r),Pv(r.model)}},getHoveringFrameState:r=>{const o={scale:1};if(n.mode==="page"){const i=n.querySelector("affine-default-page");xt(i);const a=Xi.fromDOMRect(i.pageBlockContainer.getBoundingClientRect());a.height-=Dj,o.rect=a}else{const i=n.querySelector("affine-edgeless-page");xt(i),o.scale=i.surface.viewport.zoom;const a=aD(r);a&&(o.rect=Xi.fromDOM(a),o.container=a)}return o},page:e});var $m=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};function sO(n,e){Object.entries(n).forEach(([t,r])=>{const o=e[t];o&&r.pipe(o)})}let Nh=class extends ui(ua){constructor(){super(...arguments),this.mode="page",this.autofocus=!1,this.themeObserver=new Pue,this.slots={pageLinkClicked:new Yo,pageModeSwitched:new Yo}}get model(){return this.page.root}connectedCallback(){super.connectedCallback(),ca.setIfNoActive(this);const e=t=>{var i;if(t.altKey&&t.metaKey&&t.code==="KeyC"&&t.preventDefault(),t.code!=="Escape")return;const r=this.model;if(!r)return;this.mode==="page"&&((i=Sm(r))==null||i.selection.clear());const o=getSelection();!o||o.isCollapsed||!Oue()||o.removeAllRanges()};if(Su?this._disposables.addFromEvent(document.body,"keydown",e):this._disposables.addFromEvent(window,"keydown",e),!this.page)throw new Error("Missing page for EditorContainer!");this._disposables.add(this.page.slots.rootAdded.on(()=>{this.requestUpdate("page")})),this._disposables.add(this.page.slots.blockUpdated.on(async({type:t,id:r})=>{const o=this.page.getBlockById(r);o&&t==="update"&&(await L1(o.flavour)).updateEffect(o)})),this.themeObserver.observer(document.documentElement),this._disposables.add(this.themeObserver)}disconnectedCallback(){super.disconnectedCallback(),ca.clearActive(),this.page.awarenessStore.setLocalRange(this.page,null)}firstUpdated(){L1("affine:code"),this.mode==="page"&&setTimeout(()=>{const e=this.querySelector("affine-default-page");this.autofocus&&(e==null||e.titleVEditor.focusEnd())})}updated(e){e.has("mode")&&this.slots.pageModeSwitched.emit(this.mode),!(!e.has("page")&&!e.has("mode"))&&requestAnimationFrame(()=>{this._defaultPageBlock&&sO(this._defaultPageBlock.slots,this.slots),this._edgelessPageBlock&&sO(this._edgelessPageBlock.slots,this.slots)})}async createBlockHub(){return await this.updateComplete,this.page.root||await new Promise(e=>this.page.slots.rootAdded.once(e)),Aue(this,this.page)}render(){if(!this.model)return null;const e=Tue(this.model.id,rt`<block-suite-root
        .page=${this.page}
        .componentMap=${this.mode==="page"?Mue:Iue}
      ></block-suite-root>`),t=rt`
      <remote-selection .page=${this.page}></remote-selection>
    `;return rt`
      <style>
        editor-container * {
          box-sizing: border-box;
        }
        editor-container,
        .affine-editor-container {
          display: block;
          height: 100%;
          position: relative;
          overflow: hidden;
          font-family: var(--affine-font-family);
          background: var(--affine-background-primary-color);
        }
        @media print {
          editor-container,
          .affine-editor-container {
            height: auto;
          }
        }
      </style>
      ${e} ${t}
    `}};$m([Ft()],Nh.prototype,"page",void 0);$m([Ft()],Nh.prototype,"mode",void 0);$m([Ft()],Nh.prototype,"autofocus",void 0);$m([Rr("affine-default-page")],Nh.prototype,"_defaultPageBlock",void 0);$m([Rr("affine-edgeless-page")],Nh.prototype,"_edgelessPageBlock",void 0);Nh=$m([lr("editor-container")],Nh);var Lue=function(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var s=n.length-1;s>=0;s--)(a=n[s])&&(i=(o<3?a(i):o>3?a(e,t,i):a(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let lO=class extends so{constructor(){super(),this.workspace=new hq({id:"test"}).register(fq),this.page=this.workspace.createPage({id:"page0"});const e=this.page.addBlock("affine:page"),t=this.page.addBlock("affine:frame",{},e);this.page.addBlock("affine:paragraph",{},t)}connectedCallback(){const e=new Nh;e.page=this.page,this.appendChild(e)}disconnectedCallback(){this.removeChild(this.children[0])}};lO=Lue([lr("simple-affine-editor")],lO);const rB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},oB="__ $BLOCKSUITE_EDITOR$ __";rB[oB]===!0&&console.error("@revesuite/editor was already imported. This breaks constructor checks and will lead to issues!");if(typeof window>"u")throw new Error("Seems like you are importing @revesuite/editor in SSR mode. Which is not supported for now.");rB[oB]=!0;const $ue="revezone-block-suite-editor";class iB extends so{constructor({pageId:t,onLinkOpen:r}){super();J(this,"workspace",pq.workspace);J(this,"page",null);J(this,"onLinkOpen");const o=this.workspace.getPage(t);this.onLinkOpen=r,o&&(this.page=o,this.eventListener(),window.workspace=this.workspace,window.page=o,window.editor=this)}connectedCallback(){const t=new Nh;this.page&&(t.page=this.page,this.appendChild(t))}disconnectedCallback(){this.removeChild(this.children[0])}async eventListener(){var t;(t=this.page)==null||t.slots.linkClicked.on(r=>{setTimeout(()=>{this.onLinkOpen(r)},100)})}}customElements.define($ue,iB);function aB(n){const[e]=w6(mq),{updateCurrentFile:t}=Yj(),{model:r,updateTabJsonModelWhenCurrentFileChanged:o}=Gj();return{onLinkOpen:ne.useCallback(async(a,s)=>{var u;s&&s.preventDefault();const l=typeof a=="string"?a:a.link,d=l&&gq(l);if(d){let p=e[d].data;p||(p=(u=Object.values(e).find(f=>f.data.name===d))==null?void 0:u.data),p&&(await t(p),o(p,r))}else n&&l&&window.open(l)},[e,r]),tabModel:r,fileTree:e}}function jue({file:n}){const{onLinkOpen:e,tabModel:t,fileTree:r}=aB(!1),o=ne.useRef(null),i=ne.useRef(),a=ne.useRef(!1);return n?(ne.useEffect(()=>{var s;if(!(!n||a.current))return a.current=!0,o.current&&(i.current=new iB({pageId:n.id,onLinkOpen:e}),o.current.innerHTML="",(s=o.current)==null||s.appendChild(i.current),window.editor=editor),()=>{var l;i.current&&((l=o.current)==null||l.removeChild(i.current)),i.current=void 0,a.current=!1}},[n.id,t,r,e]),ne.useEffect(()=>{a.current=!1},[n.id]),K.jsx("div",{className:"blocksuite-editor-container",ref:o})):null}var sB={exports:{}},lB={exports:{}};/*! For license information please see excalidraw.production.min.js.LICENSE.txt */(function(n,e){(function(t,r){n.exports=r(ne,up)})(self,function(t,r){return function(){var o,i,a,s,l={5612:function(f,h,c){function g(m,b,{checkForDefaultPrevented:v=!0}={}){return function(w){if(m==null||m(w),v===!1||!w.defaultPrevented)return b==null?void 0:b(w)}}c.d(h,{M:function(){return g}})},4562:function(f,h,c){c.d(h,{F:function(){return m},e:function(){return b}});var g=c(9787);function m(...v){return w=>v.forEach(_=>function(k,y){typeof k=="function"?k(y):k!=null&&(k.current=y)}(_,w))}function b(...v){return(0,g.useCallback)(m(...v),v)}},7879:function(f,h,c){c.d(h,{b:function(){return m}});var g=c(9787);function m(v,w=[]){let _=[];const k=()=>{const y=_.map(S=>(0,g.createContext)(S));return function(S){const C=(S==null?void 0:S[v])||y;return(0,g.useMemo)(()=>({[`__scope${v}`]:{...S,[v]:C}}),[S,C])}};return k.scopeName=v,[function(y,S){const C=(0,g.createContext)(S),I=_.length;function A(T){const{scope:L,children:j,...$}=T,ee=(L==null?void 0:L[v][I])||C,Q=(0,g.useMemo)(()=>$,Object.values($));return(0,g.createElement)(ee.Provider,{value:Q},j)}return _=[..._,S],A.displayName=y+"Provider",[A,function(T,L){const j=(L==null?void 0:L[v][I])||C,$=(0,g.useContext)(j);if($)return $;if(S!==void 0)return S;throw new Error(`\`${T}\` must be used within \`${y}\``)}]},b(k,...w)]}function b(...v){const w=v[0];if(v.length===1)return w;const _=()=>{const k=v.map(y=>({useScope:y(),scopeName:y.scopeName}));return function(y){const S=k.reduce((C,{useScope:I,scopeName:A})=>({...C,...I(y)[`__scope${A}`]}),{});return(0,g.useMemo)(()=>({[`__scope${w.scopeName}`]:S}),[S])}};return _.scopeName=w.scopeName,_}},7596:function(f,h,c){c.d(h,{M:function(){return w}});var g=c(9787),m=c(9041);const b=g.useId||(()=>{});let v=0;function w(_){const[k,y]=g.useState(b());return(0,m.b)(()=>{_||y(S=>S??String(v++))},[_]),_||(k?`radix-${k}`:"")}},4840:function(f,h,c){c.d(h,{z:function(){return w}});var g=c(9787),m=c(5156),b=c(4562),v=c(9041);const w=k=>{const{present:y,children:S}=k,C=function(T){const[L,j]=(0,g.useState)(),$=(0,g.useRef)({}),ee=(0,g.useRef)(T),Q=(0,g.useRef)("none"),pe=T?"mounted":"unmounted",[ie,te]=function(Z,D){return(0,g.useReducer)((B,H)=>{const V=D[B][H];return V??B},Z)}(pe,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,g.useEffect)(()=>{const Z=_($.current);Q.current=ie==="mounted"?Z:"none"},[ie]),(0,v.b)(()=>{const Z=$.current,D=ee.current;if(D!==T){const B=Q.current,H=_(Z);T?te("MOUNT"):H==="none"||(Z==null?void 0:Z.display)==="none"?te("UNMOUNT"):te(D&&B!==H?"ANIMATION_OUT":"UNMOUNT"),ee.current=T}},[T,te]),(0,v.b)(()=>{if(L){const Z=B=>{const H=_($.current).includes(B.animationName);B.target===L&&H&&(0,m.flushSync)(()=>te("ANIMATION_END"))},D=B=>{B.target===L&&(Q.current=_($.current))};return L.addEventListener("animationstart",D),L.addEventListener("animationcancel",Z),L.addEventListener("animationend",Z),()=>{L.removeEventListener("animationstart",D),L.removeEventListener("animationcancel",Z),L.removeEventListener("animationend",Z)}}te("ANIMATION_END")},[L,te]),{isPresent:["mounted","unmountSuspended"].includes(ie),ref:(0,g.useCallback)(Z=>{Z&&($.current=getComputedStyle(Z)),j(Z)},[])}}(y),I=typeof S=="function"?S({present:C.isPresent}):g.Children.only(S),A=(0,b.e)(C.ref,I.ref);return typeof S=="function"||C.isPresent?(0,g.cloneElement)(I,{ref:A}):null};function _(k){return(k==null?void 0:k.animationName)||"none"}w.displayName="Presence"},7826:function(f,h,c){c.d(h,{WV:function(){return w},jH:function(){return _}});var g=c(9181),m=c(9787),b=c(5156),v=c(2696);const w=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"].reduce((k,y)=>{const S=(0,m.forwardRef)((C,I)=>{const{asChild:A,...T}=C,L=A?v.g7:y;return(0,m.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,m.createElement)(L,(0,g.Z)({},T,{ref:I}))});return S.displayName=`Primitive.${y}`,{...k,[y]:S}},{});function _(k,y){k&&(0,b.flushSync)(()=>k.dispatchEvent(y))}},2696:function(f,h,c){c.d(h,{g7:function(){return v}});var g=c(9181),m=c(9787),b=c(4562);const v=(0,m.forwardRef)((S,C)=>{const{children:I,...A}=S,T=m.Children.toArray(I),L=T.find(k);if(L){const j=L.props.children,$=T.map(ee=>ee===L?m.Children.count(j)>1?m.Children.only(null):(0,m.isValidElement)(j)?j.props.children:null:ee);return(0,m.createElement)(w,(0,g.Z)({},A,{ref:C}),(0,m.isValidElement)(j)?(0,m.cloneElement)(j,void 0,$):null)}return(0,m.createElement)(w,(0,g.Z)({},A,{ref:C}),I)});v.displayName="Slot";const w=(0,m.forwardRef)((S,C)=>{const{children:I,...A}=S;return(0,m.isValidElement)(I)?(0,m.cloneElement)(I,{...y(A,I.props),ref:(0,b.F)(C,I.ref)}):m.Children.count(I)>1?m.Children.only(null):null});w.displayName="SlotClone";const _=({children:S})=>(0,m.createElement)(m.Fragment,null,S);function k(S){return(0,m.isValidElement)(S)&&S.type===_}function y(S,C){const I={...C};for(const A in C){const T=S[A],L=C[A];/^on[A-Z]/.test(A)?T&&L?I[A]=(...j)=>{L(...j),T(...j)}:T&&(I[A]=T):A==="style"?I[A]={...T,...L}:A==="className"&&(I[A]=[T,L].filter(Boolean).join(" "))}return{...S,...I}}},6713:function(f,h,c){c.d(h,{W:function(){return m}});var g=c(9787);function m(b){const v=(0,g.useRef)(b);return(0,g.useEffect)(()=>{v.current=b}),(0,g.useMemo)(()=>(...w)=>{var _;return(_=v.current)===null||_===void 0?void 0:_.call(v,...w)},[])}},9218:function(f,h,c){c.d(h,{T:function(){return b}});var g=c(9787),m=c(6713);function b({prop:v,defaultProp:w,onChange:_=()=>{}}){const[k,y]=function({defaultProp:A,onChange:T}){const L=(0,g.useState)(A),[j]=L,$=(0,g.useRef)(j),ee=(0,m.W)(T);return(0,g.useEffect)(()=>{$.current!==j&&(ee(j),$.current=j)},[j,$,ee]),L}({defaultProp:w,onChange:_}),S=v!==void 0,C=S?v:k,I=(0,m.W)(_);return[C,(0,g.useCallback)(A=>{if(S){const T=A,L=typeof A=="function"?T(v):A;L!==v&&I(L)}else y(A)},[S,v,y,I])]}},9041:function(f,h,c){c.d(h,{b:function(){return m}});var g=c(9787);const m=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{}},2451:function(){(()=>{var c,g,m;function f(b,v,w,_,k){if(![b,v,w,_].every(ee=>Number.isFinite(ee)))return;let y,S,C,I;if((k=function(ee){const Q=typeof ee;return Q==="undefined"||ee===null?[0]:Q==="function"?[NaN]:Q==="object"?typeof ee[Symbol.iterator]=="function"?[...ee].map(pe=>{const ie=typeof pe;return ie==="undefined"||pe===null?0:ie==="function"?NaN:ie==="object"?L(pe):j(pe)}):[L(ee)]:[j(ee)]}(k)).length===4)y=$(k[0]),S=$(k[1]),C=$(k[2]),I=$(k[3]);else if(k.length===3)y=$(k[0]),S=$(k[1]),I=$(k[1]),C=$(k[2]);else if(k.length===2)y=$(k[0]),C=$(k[0]),S=$(k[1]),I=$(k[1]);else{if(k.length!==1)throw new RangeError(`${h(this)} ${k.length} is not a valid size for radii sequence.`);y=$(k[0]),S=$(k[0]),C=$(k[0]),I=$(k[0])}const A=[y,S,C,I],T=A.find(({x:ee,y:Q})=>ee<0||Q<0);if((T==null?void 0:T.x)<0?T.x:T==null||T.y,!A.some(({x:ee,y:Q})=>!Number.isFinite(ee)||!Number.isFinite(Q))){if(T)throw new RangeError(`${h(this)} Radius value ${T} is negative.`);(function(ee){const[Q,pe,ie,te]=ee,Z=[Math.abs(w)/(Q.x+pe.x),Math.abs(_)/(pe.y+ie.y),Math.abs(w)/(ie.x+te.x),Math.abs(_)/(Q.y+te.y)],D=Math.min(...Z);if(D<=1)for(const B of ee)B.x*=D,B.y*=D})(A),w<0&&_<0?(this.moveTo(b-y.x,v),this.ellipse(b+w+S.x,v-S.y,S.x,S.y,0,1.5*-Math.PI,-Math.PI),this.ellipse(b+w+C.x,v+_+C.y,C.x,C.y,0,-Math.PI,-Math.PI/2),this.ellipse(b-I.x,v+_+I.y,I.x,I.y,0,-Math.PI/2,0),this.ellipse(b-y.x,v-y.y,y.x,y.y,0,0,-Math.PI/2)):w<0?(this.moveTo(b-y.x,v),this.ellipse(b+w+S.x,v+S.y,S.x,S.y,0,-Math.PI/2,-Math.PI,1),this.ellipse(b+w+C.x,v+_-C.y,C.x,C.y,0,-Math.PI,1.5*-Math.PI,1),this.ellipse(b-I.x,v+_-I.y,I.x,I.y,0,Math.PI/2,0,1),this.ellipse(b-y.x,v+y.y,y.x,y.y,0,0,-Math.PI/2,1)):_<0?(this.moveTo(b+y.x,v),this.ellipse(b+w-S.x,v-S.y,S.x,S.y,0,Math.PI/2,0,1),this.ellipse(b+w-C.x,v+_+C.y,C.x,C.y,0,0,-Math.PI/2,1),this.ellipse(b+I.x,v+_+I.y,I.x,I.y,0,-Math.PI/2,-Math.PI,1),this.ellipse(b+y.x,v-y.y,y.x,y.y,0,-Math.PI,1.5*-Math.PI,1)):(this.moveTo(b+y.x,v),this.ellipse(b+w-S.x,v+S.y,S.x,S.y,0,-Math.PI/2,0),this.ellipse(b+w-C.x,v+_-C.y,C.x,C.y,0,0,Math.PI/2),this.ellipse(b+I.x,v+_-I.y,I.x,I.y,0,Math.PI/2,Math.PI),this.ellipse(b+y.x,v+y.y,y.x,y.y,0,Math.PI,1.5*Math.PI)),this.closePath(),this.moveTo(b,v)}function L(ee){const{x:Q,y:pe,z:ie,w:te}=ee;return{x:Q,y:pe,z:ie,w:te}}function j(ee){return+ee}function $(ee){const Q=j(ee);return Number.isFinite(Q)?{x:Q,y:Q}:Object(ee)===ee?{x:j(ee.x??0),y:j(ee.y??0)}:{x:NaN,y:NaN}}}function h(b){return`Failed to execute 'roundRect' on '${function(v){return Object(v)===v&&v instanceof Path2D?"Path2D":v instanceof(globalThis==null?void 0:globalThis.CanvasRenderingContext2D)?"CanvasRenderingContext2D":v instanceof(globalThis==null?void 0:globalThis.OffscreenCanvasRenderingContext2D)?"OffscreenCanvasRenderingContext2D":(v==null?void 0:v.constructor.name)||v}(b)}':`}(c=Path2D.prototype).roundRect??(c.roundRect=f),globalThis.CanvasRenderingContext2D&&((g=globalThis.CanvasRenderingContext2D.prototype).roundRect??(g.roundRect=f)),globalThis.OffscreenCanvasRenderingContext2D&&((m=globalThis.OffscreenCanvasRenderingContext2D.prototype).roundRect??(m.roundRect=f))})()},8920:function(f,h){var c;(function(){var g={}.hasOwnProperty;function m(){for(var b=[],v=0;v<arguments.length;v++){var w=arguments[v];if(w){var _=typeof w;if(_==="string"||_==="number")b.push(w);else if(Array.isArray(w)){if(w.length){var k=m.apply(null,w);k&&b.push(k)}}else if(_==="object"){if(w.toString!==Object.prototype.toString&&!w.toString.toString().includes("[native code]")){b.push(w.toString());continue}for(var y in w)g.call(w,y)&&w[y]&&b.push(y)}}}return b.join(" ")}f.exports?(m.default=m,f.exports=m):(c=(function(){return m}).apply(h,[]))===void 0||(f.exports=c)})()},9076:function(f,h,c){function g(b){var v,w,_="";if(typeof b=="string"||typeof b=="number")_+=b;else if(typeof b=="object")if(Array.isArray(b))for(v=0;v<b.length;v++)b[v]&&(w=g(b[v]))&&(_&&(_+=" "),_+=w);else for(v in b)b[v]&&(_&&(_+=" "),_+=v);return _}function m(){for(var b,v,w=0,_="";w<arguments.length;)(b=arguments[w++])&&(v=g(b))&&(_&&(_+=" "),_+=v);return _}c.d(h,{Z:function(){return m}})},551:function(f,h){var c;c=function(g){g.version="0.3.0";var m=function(){for(var w=0,_=new Array(256),k=0;k!=256;++k)w=1&(w=1&(w=1&(w=1&(w=1&(w=1&(w=1&(w=1&(w=k)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1)?-306674912^w>>>1:w>>>1,_[k]=w;return typeof Int32Array<"u"?new Int32Array(_):_}(),b=typeof Buffer<"u";function v(w){for(var _=-1,k=0,y=w.length-7;k<y;)_=(_=(_=(_=(_=(_=(_=(_=_>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])];for(;k<y+7;)_=_>>>8^m[255&(_^w[k++])];return-1^_}g.table=m,g.bstr=function(w){if(w.length>32768&&b)return v(new Buffer(w));for(var _=-1,k=w.length-1,y=0;y<k;)_=m[255&(_^w.charCodeAt(y++))]^_>>>8,_=m[255&(_^w.charCodeAt(y++))]^_>>>8;return y===k&&(_=_>>>8^m[255&(_^w.charCodeAt(y))]),-1^_},g.buf=function(w){if(w.length>1e4)return v(w);for(var _=-1,k=0,y=w.length-3;k<y;)_=(_=(_=(_=_>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])])>>>8^m[255&(_^w[k++])];for(;k<y+3;)_=_>>>8^m[255&(_^w[k++])];return-1^_},g.str=function(w){for(var _,k,y=-1,S=0,C=w.length;S<C;)(_=w.charCodeAt(S++))<128?y=y>>>8^m[255&(y^_)]:_<2048?y=(y=y>>>8^m[255&(y^(192|_>>6&31))])>>>8^m[255&(y^(128|63&_))]:_>=55296&&_<57344?(_=64+(1023&_),k=1023&w.charCodeAt(S++),y=(y=(y=(y=y>>>8^m[255&(y^(240|_>>8&7))])>>>8^m[255&(y^(128|_>>2&63))])>>>8^m[255&(y^(128|k>>6&15|3&_))])>>>8^m[255&(y^(128|63&k))]):y=(y=(y=y>>>8^m[255&(y^(224|_>>12&15))])>>>8^m[255&(y^(128|_>>6&63))])>>>8^m[255&(y^(128|63&_))];return-1^y}},c(typeof DO_NOT_EXPORT_CRC>"u"?h:{})},9022:function(f,h,c){var g="[object Symbol]",m=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,b=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,v="\\u0300-\\u036f\\ufe20-\\ufe23",w="\\u2700-\\u27bf",_="a-z\\xdf-\\xf6\\xf8-\\xff",k="A-Z\\xc0-\\xd6\\xd8-\\xde",y="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",S="[']",C="[\\ud800-\\udfff]",I="["+y+"]",A="["+v+"\\u20d0-\\u20f0]",T="\\d+",L="[\\u2700-\\u27bf]",j="["+_+"]",$="[^\\ud800-\\udfff"+y+T+w+_+k+"]",ee="\\ud83c[\\udffb-\\udfff]",Q="[^\\ud800-\\udfff]",pe="(?:\\ud83c[\\udde6-\\uddff]){2}",ie="[\\ud800-\\udbff][\\udc00-\\udfff]",te="["+k+"]",Z="(?:"+j+"|"+$+")",D="(?:"+te+"|"+$+")",B="(?:['](?:d|ll|m|re|s|t|ve))?",H="(?:['](?:D|LL|M|RE|S|T|VE))?",V="(?:"+A+"|"+ee+")?",R="[\\ufe0e\\ufe0f]?",Y=R+V+("(?:\\u200d(?:"+[Q,pe,ie].join("|")+")"+R+V+")*"),E="(?:"+[L,pe,ie].join("|")+")"+Y,W="(?:"+[Q+A+"?",A,pe,ie,C].join("|")+")",F=RegExp(S,"g"),z=RegExp(A,"g"),q=RegExp(ee+"(?="+ee+")|"+W+Y,"g"),fe=RegExp([te+"?"+j+"+"+B+"(?="+[I,te,"$"].join("|")+")",D+"+"+H+"(?="+[I,te+Z,"$"].join("|")+")",te+"?"+Z+"+"+B,te+"+"+H,T,E].join("|"),"g"),ce=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),U=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ve=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,oe=typeof self=="object"&&self&&self.Object===Object&&self,re=ve||oe||Function("return this")(),ae,me=(ae={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},function(Re){return ae==null?void 0:ae[Re]});function he(Re){return ce.test(Re)}function se(Re){return he(Re)?function(We){return We.match(q)||[]}(Re):function(We){return We.split("")}(Re)}var ge=Object.prototype.toString,X=re.Symbol,we=X?X.prototype:void 0,be=we?we.toString:void 0;function le(Re){if(typeof Re=="string")return Re;if(function(Se){return typeof Se=="symbol"||function(Be){return!!Be&&typeof Be=="object"}(Se)&&ge.call(Se)==g}(Re))return be?be.call(Re):"";var We=Re+"";return We=="0"&&1/Re==-1/0?"-0":We}function ye(Re,We,Se){var Be=Re.length;return Se=Se===void 0?Be:Se,!We&&Se>=Be?Re:function(_e,ze,Ve){var ut=-1,Ie=_e.length;ze<0&&(ze=-ze>Ie?0:Ie+ze),(Ve=Ve>Ie?Ie:Ve)<0&&(Ve+=Ie),Ie=ze>Ve?0:Ve-ze>>>0,ze>>>=0;for(var ot=Array(Ie);++ut<Ie;)ot[ut]=_e[ut+ze];return ot}(Re,We,Se)}function ue(Re){return Re==null?"":le(Re)}var xe,Pe=(xe=function(Re,We,Se){return We=We.toLowerCase(),Re+(Se?Me(ue(We).toLowerCase()):We)},function(Re){return function(We,Se,Be,_e){var ze=-1,Ve=We?We.length:0;for(_e&&Ve&&(Be=We[++ze]);++ze<Ve;)Be=Se(Be,We[ze],ze,We);return Be}(function(We,Se,Be){return We=ue(We),(Se=Be?void 0:Se)===void 0?function(_e){return U.test(_e)}(We)?function(_e){return _e.match(fe)||[]}(We):function(_e){return _e.match(m)||[]}(We):We.match(Se)||[]}(function(We){return(We=ue(We))&&We.replace(b,me).replace(z,"")}(Re).replace(F,"")),xe,"")}),Ne,Me=(Ne="toUpperCase",function(Re){var We=he(Re=ue(Re))?se(Re):void 0,Se=We?We[0]:Re.charAt(0),Be=We?ye(We,1).join(""):Re.slice(1);return Se[Ne]()+Be});f.exports=Pe},6810:function(f,h,c){var g="Expected a function",m=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,w=/^0o[0-7]+$/i,_=parseInt,k=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g,y=typeof self=="object"&&self&&self.Object===Object&&self,S=k||y||Function("return this")(),C=Object.prototype.toString,I=Math.max,A=Math.min,T=function(){return S.Date.now()};function L(ee,Q,pe){var ie,te,Z,D,B,H,V=0,R=!1,Y=!1,E=!0;if(typeof ee!="function")throw new TypeError(g);function W(U){var ve=ie,oe=te;return ie=te=void 0,V=U,D=ee.apply(oe,ve)}function F(U){return V=U,B=setTimeout(q,Q),R?W(U):D}function z(U){var ve=U-H;return H===void 0||ve>=Q||ve<0||Y&&U-V>=Z}function q(){var U=T();if(z(U))return fe(U);B=setTimeout(q,function(ve){var oe=Q-(ve-H);return Y?A(oe,Z-(ve-V)):oe}(U))}function fe(U){return B=void 0,E&&ie?W(U):(ie=te=void 0,D)}function ce(){var U=T(),ve=z(U);if(ie=arguments,te=this,H=U,ve){if(B===void 0)return F(H);if(Y)return B=setTimeout(q,Q),W(H)}return B===void 0&&(B=setTimeout(q,Q)),D}return Q=$(Q)||0,j(pe)&&(R=!!pe.leading,Z=(Y="maxWait"in pe)?I($(pe.maxWait)||0,Q):Z,E="trailing"in pe?!!pe.trailing:E),ce.cancel=function(){B!==void 0&&clearTimeout(B),V=0,ie=H=te=B=void 0},ce.flush=function(){return B===void 0?D:fe(T())},ce}function j(ee){var Q=typeof ee;return!!ee&&(Q=="object"||Q=="function")}function $(ee){if(typeof ee=="number")return ee;if(function(ie){return typeof ie=="symbol"||function(te){return!!te&&typeof te=="object"}(ie)&&C.call(ie)=="[object Symbol]"}(ee))return NaN;if(j(ee)){var Q=typeof ee.valueOf=="function"?ee.valueOf():ee;ee=j(Q)?Q+"":Q}if(typeof ee!="string")return ee===0?ee:+ee;ee=ee.replace(m,"");var pe=v.test(ee);return pe||w.test(ee)?_(ee.slice(2),pe?2:8):b.test(ee)?NaN:+ee}f.exports=function(ee,Q,pe){var ie=!0,te=!0;if(typeof ee!="function")throw new TypeError(g);return j(pe)&&(ie="leading"in pe?!!pe.leading:ie,te="trailing"in pe?!!pe.trailing:te),L(ee,Q,{leading:ie,maxWait:Q,trailing:te})}},3666:function(f,h,c){var g={};(0,c(6613).assign)(g,c(9858),c(5449),c(4205)),f.exports=g},9858:function(f,h,c){var g=c(6786),m=c(6613),b=c(4323),v=c(8757),w=c(7644),_=Object.prototype.toString;function k(S){if(!(this instanceof k))return new k(S);this.options=m.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},S||{});var C=this.options;C.raw&&C.windowBits>0?C.windowBits=-C.windowBits:C.gzip&&C.windowBits>0&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var I=g.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(I!==0)throw new Error(v[I]);if(C.header&&g.deflateSetHeader(this.strm,C.header),C.dictionary){var A;if(A=typeof C.dictionary=="string"?b.string2buf(C.dictionary):_.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(I=g.deflateSetDictionary(this.strm,A))!==0)throw new Error(v[I]);this._dict_set=!0}}function y(S,C){var I=new k(C);if(I.push(S,!0),I.err)throw I.msg||v[I.err];return I.result}k.prototype.push=function(S,C){var I,A,T=this.strm,L=this.options.chunkSize;if(this.ended)return!1;A=C===~~C?C:C===!0?4:0,typeof S=="string"?T.input=b.string2buf(S):_.call(S)==="[object ArrayBuffer]"?T.input=new Uint8Array(S):T.input=S,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new m.Buf8(L),T.next_out=0,T.avail_out=L),(I=g.deflate(T,A))!==1&&I!==0)return this.onEnd(I),this.ended=!0,!1;T.avail_out!==0&&(T.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(b.buf2binstring(m.shrinkBuf(T.output,T.next_out))):this.onData(m.shrinkBuf(T.output,T.next_out)))}while((T.avail_in>0||T.avail_out===0)&&I!==1);return A===4?(I=g.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===0):A!==2||(this.onEnd(0),T.avail_out=0,!0)},k.prototype.onData=function(S){this.chunks.push(S)},k.prototype.onEnd=function(S){S===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},h.Deflate=k,h.deflate=y,h.deflateRaw=function(S,C){return(C=C||{}).raw=!0,y(S,C)},h.gzip=function(S,C){return(C=C||{}).gzip=!0,y(S,C)}},5449:function(f,h,c){var g=c(7939),m=c(6613),b=c(4323),v=c(4205),w=c(8757),_=c(7644),k=c(194),y=Object.prototype.toString;function S(I){if(!(this instanceof S))return new S(I);this.options=m.assign({chunkSize:16384,windowBits:0,to:""},I||{});var A=this.options;A.raw&&A.windowBits>=0&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(A.windowBits>=0&&A.windowBits<16)||I&&I.windowBits||(A.windowBits+=32),A.windowBits>15&&A.windowBits<48&&!(15&A.windowBits)&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var T=g.inflateInit2(this.strm,A.windowBits);if(T!==v.Z_OK)throw new Error(w[T]);if(this.header=new k,g.inflateGetHeader(this.strm,this.header),A.dictionary&&(typeof A.dictionary=="string"?A.dictionary=b.string2buf(A.dictionary):y.call(A.dictionary)==="[object ArrayBuffer]"&&(A.dictionary=new Uint8Array(A.dictionary)),A.raw&&(T=g.inflateSetDictionary(this.strm,A.dictionary))!==v.Z_OK))throw new Error(w[T])}function C(I,A){var T=new S(A);if(T.push(I,!0),T.err)throw T.msg||w[T.err];return T.result}S.prototype.push=function(I,A){var T,L,j,$,ee,Q=this.strm,pe=this.options.chunkSize,ie=this.options.dictionary,te=!1;if(this.ended)return!1;L=A===~~A?A:A===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof I=="string"?Q.input=b.binstring2buf(I):y.call(I)==="[object ArrayBuffer]"?Q.input=new Uint8Array(I):Q.input=I,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new m.Buf8(pe),Q.next_out=0,Q.avail_out=pe),(T=g.inflate(Q,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&ie&&(T=g.inflateSetDictionary(this.strm,ie)),T===v.Z_BUF_ERROR&&te===!0&&(T=v.Z_OK,te=!1),T!==v.Z_STREAM_END&&T!==v.Z_OK)return this.onEnd(T),this.ended=!0,!1;Q.next_out&&(Q.avail_out!==0&&T!==v.Z_STREAM_END&&(Q.avail_in!==0||L!==v.Z_FINISH&&L!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=b.utf8border(Q.output,Q.next_out),$=Q.next_out-j,ee=b.buf2string(Q.output,j),Q.next_out=$,Q.avail_out=pe-$,$&&m.arraySet(Q.output,Q.output,j,$,0),this.onData(ee)):this.onData(m.shrinkBuf(Q.output,Q.next_out)))),Q.avail_in===0&&Q.avail_out===0&&(te=!0)}while((Q.avail_in>0||Q.avail_out===0)&&T!==v.Z_STREAM_END);return T===v.Z_STREAM_END&&(L=v.Z_FINISH),L===v.Z_FINISH?(T=g.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===v.Z_OK):L!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),Q.avail_out=0,!0)},S.prototype.onData=function(I){this.chunks.push(I)},S.prototype.onEnd=function(I){I===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg},h.Inflate=S,h.inflate=C,h.inflateRaw=function(I,A){return(A=A||{}).raw=!0,C(I,A)},h.ungzip=C},6613:function(f,h){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function g(v,w){return Object.prototype.hasOwnProperty.call(v,w)}h.assign=function(v){for(var w=Array.prototype.slice.call(arguments,1);w.length;){var _=w.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var k in _)g(_,k)&&(v[k]=_[k])}}return v},h.shrinkBuf=function(v,w){return v.length===w?v:v.subarray?v.subarray(0,w):(v.length=w,v)};var m={arraySet:function(v,w,_,k,y){if(w.subarray&&v.subarray)v.set(w.subarray(_,_+k),y);else for(var S=0;S<k;S++)v[y+S]=w[_+S]},flattenChunks:function(v){var w,_,k,y,S,C;for(k=0,w=0,_=v.length;w<_;w++)k+=v[w].length;for(C=new Uint8Array(k),y=0,w=0,_=v.length;w<_;w++)S=v[w],C.set(S,y),y+=S.length;return C}},b={arraySet:function(v,w,_,k,y){for(var S=0;S<k;S++)v[y+S]=w[_+S]},flattenChunks:function(v){return[].concat.apply([],v)}};h.setTyped=function(v){v?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,m)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,b))},h.setTyped(c)},4323:function(f,h,c){var g=c(6613),m=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{m=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var v=new g.Buf8(256),w=0;w<256;w++)v[w]=w>=252?6:w>=248?5:w>=240?4:w>=224?3:w>=192?2:1;function _(k,y){if(y<65534&&(k.subarray&&b||!k.subarray&&m))return String.fromCharCode.apply(null,g.shrinkBuf(k,y));for(var S="",C=0;C<y;C++)S+=String.fromCharCode(k[C]);return S}v[254]=v[254]=1,h.string2buf=function(k){var y,S,C,I,A,T=k.length,L=0;for(I=0;I<T;I++)(64512&(S=k.charCodeAt(I)))==55296&&I+1<T&&(64512&(C=k.charCodeAt(I+1)))==56320&&(S=65536+(S-55296<<10)+(C-56320),I++),L+=S<128?1:S<2048?2:S<65536?3:4;for(y=new g.Buf8(L),A=0,I=0;A<L;I++)(64512&(S=k.charCodeAt(I)))==55296&&I+1<T&&(64512&(C=k.charCodeAt(I+1)))==56320&&(S=65536+(S-55296<<10)+(C-56320),I++),S<128?y[A++]=S:S<2048?(y[A++]=192|S>>>6,y[A++]=128|63&S):S<65536?(y[A++]=224|S>>>12,y[A++]=128|S>>>6&63,y[A++]=128|63&S):(y[A++]=240|S>>>18,y[A++]=128|S>>>12&63,y[A++]=128|S>>>6&63,y[A++]=128|63&S);return y},h.buf2binstring=function(k){return _(k,k.length)},h.binstring2buf=function(k){for(var y=new g.Buf8(k.length),S=0,C=y.length;S<C;S++)y[S]=k.charCodeAt(S);return y},h.buf2string=function(k,y){var S,C,I,A,T=y||k.length,L=new Array(2*T);for(C=0,S=0;S<T;)if((I=k[S++])<128)L[C++]=I;else if((A=v[I])>4)L[C++]=65533,S+=A-1;else{for(I&=A===2?31:A===3?15:7;A>1&&S<T;)I=I<<6|63&k[S++],A--;A>1?L[C++]=65533:I<65536?L[C++]=I:(I-=65536,L[C++]=55296|I>>10&1023,L[C++]=56320|1023&I)}return _(L,C)},h.utf8border=function(k,y){var S;for((y=y||k.length)>k.length&&(y=k.length),S=y-1;S>=0&&(192&k[S])==128;)S--;return S<0||S===0?y:S+v[k[S]]>y?S:y}},9013:function(f){f.exports=function(h,c,g,m){for(var b=65535&h|0,v=h>>>16&65535|0,w=0;g!==0;){g-=w=g>2e3?2e3:g;do v=v+(b=b+c[m++]|0)|0;while(--w);b%=65521,v%=65521}return b|v<<16|0}},4205:function(f){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},3277:function(f){var h=function(){for(var c,g=[],m=0;m<256;m++){c=m;for(var b=0;b<8;b++)c=1&c?3988292384^c>>>1:c>>>1;g[m]=c}return g}();f.exports=function(c,g,m,b){var v=h,w=b+m;c^=-1;for(var _=b;_<w;_++)c=c>>>8^v[255&(c^g[_])];return-1^c}},6786:function(f,h,c){var g,m=c(6613),b=c(6928),v=c(9013),w=c(3277),_=c(8757),k=-2,y=258,S=262,C=103,I=113,A=666;function T(E,W){return E.msg=_[W],W}function L(E){return(E<<1)-(E>4?9:0)}function j(E){for(var W=E.length;--W>=0;)E[W]=0}function $(E){var W=E.state,F=W.pending;F>E.avail_out&&(F=E.avail_out),F!==0&&(m.arraySet(E.output,W.pending_buf,W.pending_out,F,E.next_out),E.next_out+=F,W.pending_out+=F,E.total_out+=F,E.avail_out-=F,W.pending-=F,W.pending===0&&(W.pending_out=0))}function ee(E,W){b._tr_flush_block(E,E.block_start>=0?E.block_start:-1,E.strstart-E.block_start,W),E.block_start=E.strstart,$(E.strm)}function Q(E,W){E.pending_buf[E.pending++]=W}function pe(E,W){E.pending_buf[E.pending++]=W>>>8&255,E.pending_buf[E.pending++]=255&W}function ie(E,W){var F,z,q=E.max_chain_length,fe=E.strstart,ce=E.prev_length,U=E.nice_match,ve=E.strstart>E.w_size-S?E.strstart-(E.w_size-S):0,oe=E.window,re=E.w_mask,ae=E.prev,me=E.strstart+y,he=oe[fe+ce-1],se=oe[fe+ce];E.prev_length>=E.good_match&&(q>>=2),U>E.lookahead&&(U=E.lookahead);do if(oe[(F=W)+ce]===se&&oe[F+ce-1]===he&&oe[F]===oe[fe]&&oe[++F]===oe[fe+1]){fe+=2,F++;do;while(oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&oe[++fe]===oe[++F]&&fe<me);if(z=y-(me-fe),fe=me-y,z>ce){if(E.match_start=W,ce=z,z>=U)break;he=oe[fe+ce-1],se=oe[fe+ce]}}while((W=ae[W&re])>ve&&--q!=0);return ce<=E.lookahead?ce:E.lookahead}function te(E){var W,F,z,q,fe,ce,U,ve,oe,re,ae=E.w_size;do{if(q=E.window_size-E.lookahead-E.strstart,E.strstart>=ae+(ae-S)){m.arraySet(E.window,E.window,ae,ae,0),E.match_start-=ae,E.strstart-=ae,E.block_start-=ae,W=F=E.hash_size;do z=E.head[--W],E.head[W]=z>=ae?z-ae:0;while(--F);W=F=ae;do z=E.prev[--W],E.prev[W]=z>=ae?z-ae:0;while(--F);q+=ae}if(E.strm.avail_in===0)break;if(ce=E.strm,U=E.window,ve=E.strstart+E.lookahead,oe=q,re=void 0,(re=ce.avail_in)>oe&&(re=oe),F=re===0?0:(ce.avail_in-=re,m.arraySet(U,ce.input,ce.next_in,re,ve),ce.state.wrap===1?ce.adler=v(ce.adler,U,re,ve):ce.state.wrap===2&&(ce.adler=w(ce.adler,U,re,ve)),ce.next_in+=re,ce.total_in+=re,re),E.lookahead+=F,E.lookahead+E.insert>=3)for(fe=E.strstart-E.insert,E.ins_h=E.window[fe],E.ins_h=(E.ins_h<<E.hash_shift^E.window[fe+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[fe+3-1])&E.hash_mask,E.prev[fe&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=fe,fe++,E.insert--,!(E.lookahead+E.insert<3)););}while(E.lookahead<S&&E.strm.avail_in!==0)}function Z(E,W){for(var F,z;;){if(E.lookahead<S){if(te(E),E.lookahead<S&&W===0)return 1;if(E.lookahead===0)break}if(F=0,E.lookahead>=3&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+3-1])&E.hash_mask,F=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),F!==0&&E.strstart-F<=E.w_size-S&&(E.match_length=ie(E,F)),E.match_length>=3)if(z=b._tr_tally(E,E.strstart-E.match_start,E.match_length-3),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=3){E.match_length--;do E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+3-1])&E.hash_mask,F=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart;while(--E.match_length!=0);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else z=b._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(z&&(ee(E,!1),E.strm.avail_out===0))return 1}return E.insert=E.strstart<2?E.strstart:2,W===4?(ee(E,!0),E.strm.avail_out===0?3:4):E.last_lit&&(ee(E,!1),E.strm.avail_out===0)?1:2}function D(E,W){for(var F,z,q;;){if(E.lookahead<S){if(te(E),E.lookahead<S&&W===0)return 1;if(E.lookahead===0)break}if(F=0,E.lookahead>=3&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+3-1])&E.hash_mask,F=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=2,F!==0&&E.prev_length<E.max_lazy_match&&E.strstart-F<=E.w_size-S&&(E.match_length=ie(E,F),E.match_length<=5&&(E.strategy===1||E.match_length===3&&E.strstart-E.match_start>4096)&&(E.match_length=2)),E.prev_length>=3&&E.match_length<=E.prev_length){q=E.strstart+E.lookahead-3,z=b._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-3),E.lookahead-=E.prev_length-1,E.prev_length-=2;do++E.strstart<=q&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+3-1])&E.hash_mask,F=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart);while(--E.prev_length!=0);if(E.match_available=0,E.match_length=2,E.strstart++,z&&(ee(E,!1),E.strm.avail_out===0))return 1}else if(E.match_available){if((z=b._tr_tally(E,0,E.window[E.strstart-1]))&&ee(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return 1}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(z=b._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<2?E.strstart:2,W===4?(ee(E,!0),E.strm.avail_out===0?3:4):E.last_lit&&(ee(E,!1),E.strm.avail_out===0)?1:2}function B(E,W,F,z,q){this.good_length=E,this.max_lazy=W,this.nice_length=F,this.max_chain=z,this.func=q}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new m.Buf16(1146),this.dyn_dtree=new m.Buf16(122),this.bl_tree=new m.Buf16(78),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new m.Buf16(16),this.heap=new m.Buf16(573),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new m.Buf16(573),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(E){var W;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=2,(W=E.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?42:I,E.adler=W.wrap===2?0:1,W.last_flush=0,b._tr_init(W),0):T(E,k)}function R(E){var W,F=V(E);return F===0&&((W=E.state).window_size=2*W.w_size,j(W.head),W.max_lazy_match=g[W.level].max_lazy,W.good_match=g[W.level].good_length,W.nice_match=g[W.level].nice_length,W.max_chain_length=g[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=2,W.match_available=0,W.ins_h=0),F}function Y(E,W,F,z,q,fe){if(!E)return k;var ce=1;if(W===-1&&(W=6),z<0?(ce=0,z=-z):z>15&&(ce=2,z-=16),q<1||q>9||F!==8||z<8||z>15||W<0||W>9||fe<0||fe>4)return T(E,k);z===8&&(z=9);var U=new H;return E.state=U,U.strm=E,U.wrap=ce,U.gzhead=null,U.w_bits=z,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=q+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+3-1)/3),U.window=new m.Buf8(2*U.w_size),U.head=new m.Buf16(U.hash_size),U.prev=new m.Buf16(U.w_size),U.lit_bufsize=1<<q+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new m.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=W,U.strategy=fe,U.method=F,R(E)}g=[new B(0,0,0,0,function(E,W){var F=65535;for(F>E.pending_buf_size-5&&(F=E.pending_buf_size-5);;){if(E.lookahead<=1){if(te(E),E.lookahead===0&&W===0)return 1;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var z=E.block_start+F;if((E.strstart===0||E.strstart>=z)&&(E.lookahead=E.strstart-z,E.strstart=z,ee(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-S&&(ee(E,!1),E.strm.avail_out===0))return 1}return E.insert=0,W===4?(ee(E,!0),E.strm.avail_out===0?3:4):(E.strstart>E.block_start&&(ee(E,!1),E.strm.avail_out),1)}),new B(4,4,8,4,Z),new B(4,5,16,8,Z),new B(4,6,32,32,Z),new B(4,4,16,16,D),new B(8,16,32,32,D),new B(8,16,128,128,D),new B(8,32,128,256,D),new B(32,128,258,1024,D),new B(32,258,258,4096,D)],h.deflateInit=function(E,W){return Y(E,W,8,15,8,0)},h.deflateInit2=Y,h.deflateReset=R,h.deflateResetKeep=V,h.deflateSetHeader=function(E,W){return E&&E.state?E.state.wrap!==2?k:(E.state.gzhead=W,0):k},h.deflate=function(E,W){var F,z,q,fe;if(!E||!E.state||W>5||W<0)return E?T(E,k):k;if(z=E.state,!E.output||!E.input&&E.avail_in!==0||z.status===A&&W!==4)return T(E,E.avail_out===0?-5:k);if(z.strm=E,F=z.last_flush,z.last_flush=W,z.status===42)if(z.wrap===2)E.adler=0,Q(z,31),Q(z,139),Q(z,8),z.gzhead?(Q(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),Q(z,255&z.gzhead.time),Q(z,z.gzhead.time>>8&255),Q(z,z.gzhead.time>>16&255),Q(z,z.gzhead.time>>24&255),Q(z,z.level===9?2:z.strategy>=2||z.level<2?4:0),Q(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(Q(z,255&z.gzhead.extra.length),Q(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(E.adler=w(E.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(Q(z,0),Q(z,0),Q(z,0),Q(z,0),Q(z,0),Q(z,z.level===9?2:z.strategy>=2||z.level<2?4:0),Q(z,3),z.status=I);else{var ce=8+(z.w_bits-8<<4)<<8;ce|=(z.strategy>=2||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(ce|=32),ce+=31-ce%31,z.status=I,pe(z,ce),z.strstart!==0&&(pe(z,E.adler>>>16),pe(z,65535&E.adler)),E.adler=1}if(z.status===69)if(z.gzhead.extra){for(q=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>q&&(E.adler=w(E.adler,z.pending_buf,z.pending-q,q)),$(E),q=z.pending,z.pending!==z.pending_buf_size));)Q(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>q&&(E.adler=w(E.adler,z.pending_buf,z.pending-q,q)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){q=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>q&&(E.adler=w(E.adler,z.pending_buf,z.pending-q,q)),$(E),q=z.pending,z.pending===z.pending_buf_size)){fe=1;break}fe=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,Q(z,fe)}while(fe!==0);z.gzhead.hcrc&&z.pending>q&&(E.adler=w(E.adler,z.pending_buf,z.pending-q,q)),fe===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){q=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>q&&(E.adler=w(E.adler,z.pending_buf,z.pending-q,q)),$(E),q=z.pending,z.pending===z.pending_buf_size)){fe=1;break}fe=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,Q(z,fe)}while(fe!==0);z.gzhead.hcrc&&z.pending>q&&(E.adler=w(E.adler,z.pending_buf,z.pending-q,q)),fe===0&&(z.status=C)}else z.status=C;if(z.status===C&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&$(E),z.pending+2<=z.pending_buf_size&&(Q(z,255&E.adler),Q(z,E.adler>>8&255),E.adler=0,z.status=I)):z.status=I),z.pending!==0){if($(E),E.avail_out===0)return z.last_flush=-1,0}else if(E.avail_in===0&&L(W)<=L(F)&&W!==4)return T(E,-5);if(z.status===A&&E.avail_in!==0)return T(E,-5);if(E.avail_in!==0||z.lookahead!==0||W!==0&&z.status!==A){var U=z.strategy===2?function(ve,oe){for(var re;;){if(ve.lookahead===0&&(te(ve),ve.lookahead===0)){if(oe===0)return 1;break}if(ve.match_length=0,re=b._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++,re&&(ee(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,oe===4?(ee(ve,!0),ve.strm.avail_out===0?3:4):ve.last_lit&&(ee(ve,!1),ve.strm.avail_out===0)?1:2}(z,W):z.strategy===3?function(ve,oe){for(var re,ae,me,he,se=ve.window;;){if(ve.lookahead<=y){if(te(ve),ve.lookahead<=y&&oe===0)return 1;if(ve.lookahead===0)break}if(ve.match_length=0,ve.lookahead>=3&&ve.strstart>0&&(ae=se[me=ve.strstart-1])===se[++me]&&ae===se[++me]&&ae===se[++me]){he=ve.strstart+y;do;while(ae===se[++me]&&ae===se[++me]&&ae===se[++me]&&ae===se[++me]&&ae===se[++me]&&ae===se[++me]&&ae===se[++me]&&ae===se[++me]&&me<he);ve.match_length=y-(he-me),ve.match_length>ve.lookahead&&(ve.match_length=ve.lookahead)}if(ve.match_length>=3?(re=b._tr_tally(ve,1,ve.match_length-3),ve.lookahead-=ve.match_length,ve.strstart+=ve.match_length,ve.match_length=0):(re=b._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++),re&&(ee(ve,!1),ve.strm.avail_out===0))return 1}return ve.insert=0,oe===4?(ee(ve,!0),ve.strm.avail_out===0?3:4):ve.last_lit&&(ee(ve,!1),ve.strm.avail_out===0)?1:2}(z,W):g[z.level].func(z,W);if(U!==3&&U!==4||(z.status=A),U===1||U===3)return E.avail_out===0&&(z.last_flush=-1),0;if(U===2&&(W===1?b._tr_align(z):W!==5&&(b._tr_stored_block(z,0,0,!1),W===3&&(j(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),$(E),E.avail_out===0))return z.last_flush=-1,0}return W!==4?0:z.wrap<=0?1:(z.wrap===2?(Q(z,255&E.adler),Q(z,E.adler>>8&255),Q(z,E.adler>>16&255),Q(z,E.adler>>24&255),Q(z,255&E.total_in),Q(z,E.total_in>>8&255),Q(z,E.total_in>>16&255),Q(z,E.total_in>>24&255)):(pe(z,E.adler>>>16),pe(z,65535&E.adler)),$(E),z.wrap>0&&(z.wrap=-z.wrap),z.pending!==0?0:1)},h.deflateEnd=function(E){var W;return E&&E.state?(W=E.state.status)!==42&&W!==69&&W!==73&&W!==91&&W!==C&&W!==I&&W!==A?T(E,k):(E.state=null,W===I?T(E,-3):0):k},h.deflateSetDictionary=function(E,W){var F,z,q,fe,ce,U,ve,oe,re=W.length;if(!E||!E.state||(fe=(F=E.state).wrap)===2||fe===1&&F.status!==42||F.lookahead)return k;for(fe===1&&(E.adler=v(E.adler,W,re,0)),F.wrap=0,re>=F.w_size&&(fe===0&&(j(F.head),F.strstart=0,F.block_start=0,F.insert=0),oe=new m.Buf8(F.w_size),m.arraySet(oe,W,re-F.w_size,F.w_size,0),W=oe,re=F.w_size),ce=E.avail_in,U=E.next_in,ve=E.input,E.avail_in=re,E.next_in=0,E.input=W,te(F);F.lookahead>=3;){z=F.strstart,q=F.lookahead-2;do F.ins_h=(F.ins_h<<F.hash_shift^F.window[z+3-1])&F.hash_mask,F.prev[z&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=z,z++;while(--q);F.strstart=z,F.lookahead=2,te(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=2,F.match_available=0,E.next_in=U,E.input=ve,E.avail_in=ce,F.wrap=fe,0},h.deflateInfo="pako deflate (from Nodeca project)"},194:function(f){f.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},744:function(f){f.exports=function(h,c){var g,m,b,v,w,_,k,y,S,C,I,A,T,L,j,$,ee,Q,pe,ie,te,Z,D,B,H;g=h.state,m=h.next_in,B=h.input,b=m+(h.avail_in-5),v=h.next_out,H=h.output,w=v-(c-h.avail_out),_=v+(h.avail_out-257),k=g.dmax,y=g.wsize,S=g.whave,C=g.wnext,I=g.window,A=g.hold,T=g.bits,L=g.lencode,j=g.distcode,$=(1<<g.lenbits)-1,ee=(1<<g.distbits)-1;e:do{T<15&&(A+=B[m++]<<T,T+=8,A+=B[m++]<<T,T+=8),Q=L[A&$];t:for(;;){if(A>>>=pe=Q>>>24,T-=pe,(pe=Q>>>16&255)===0)H[v++]=65535&Q;else{if(!(16&pe)){if(!(64&pe)){Q=L[(65535&Q)+(A&(1<<pe)-1)];continue t}if(32&pe){g.mode=12;break e}h.msg="invalid literal/length code",g.mode=30;break e}ie=65535&Q,(pe&=15)&&(T<pe&&(A+=B[m++]<<T,T+=8),ie+=A&(1<<pe)-1,A>>>=pe,T-=pe),T<15&&(A+=B[m++]<<T,T+=8,A+=B[m++]<<T,T+=8),Q=j[A&ee];n:for(;;){if(A>>>=pe=Q>>>24,T-=pe,!(16&(pe=Q>>>16&255))){if(!(64&pe)){Q=j[(65535&Q)+(A&(1<<pe)-1)];continue n}h.msg="invalid distance code",g.mode=30;break e}if(te=65535&Q,T<(pe&=15)&&(A+=B[m++]<<T,(T+=8)<pe&&(A+=B[m++]<<T,T+=8)),(te+=A&(1<<pe)-1)>k){h.msg="invalid distance too far back",g.mode=30;break e}if(A>>>=pe,T-=pe,te>(pe=v-w)){if((pe=te-pe)>S&&g.sane){h.msg="invalid distance too far back",g.mode=30;break e}if(Z=0,D=I,C===0){if(Z+=y-pe,pe<ie){ie-=pe;do H[v++]=I[Z++];while(--pe);Z=v-te,D=H}}else if(C<pe){if(Z+=y+C-pe,(pe-=C)<ie){ie-=pe;do H[v++]=I[Z++];while(--pe);if(Z=0,C<ie){ie-=pe=C;do H[v++]=I[Z++];while(--pe);Z=v-te,D=H}}}else if(Z+=C-pe,pe<ie){ie-=pe;do H[v++]=I[Z++];while(--pe);Z=v-te,D=H}for(;ie>2;)H[v++]=D[Z++],H[v++]=D[Z++],H[v++]=D[Z++],ie-=3;ie&&(H[v++]=D[Z++],ie>1&&(H[v++]=D[Z++]))}else{Z=v-te;do H[v++]=H[Z++],H[v++]=H[Z++],H[v++]=H[Z++],ie-=3;while(ie>2);ie&&(H[v++]=H[Z++],ie>1&&(H[v++]=H[Z++]))}break}}break}}while(m<b&&v<_);m-=ie=T>>3,A&=(1<<(T-=ie<<3))-1,h.next_in=m,h.next_out=v,h.avail_in=m<b?b-m+5:5-(m-b),h.avail_out=v<_?_-v+257:257-(v-_),g.hold=A,g.bits=T}},7939:function(f,h,c){var g=c(6613),m=c(9013),b=c(3277),v=c(744),w=c(7431),_=-2,k=12,y=30;function S(ie){return(ie>>>24&255)+(ie>>>8&65280)+((65280&ie)<<8)+((255&ie)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(ie){var te;return ie&&ie.state?(te=ie.state,ie.total_in=ie.total_out=te.total=0,ie.msg="",te.wrap&&(ie.adler=1&te.wrap),te.mode=1,te.last=0,te.havedict=0,te.dmax=32768,te.head=null,te.hold=0,te.bits=0,te.lencode=te.lendyn=new g.Buf32(852),te.distcode=te.distdyn=new g.Buf32(592),te.sane=1,te.back=-1,0):_}function A(ie){var te;return ie&&ie.state?((te=ie.state).wsize=0,te.whave=0,te.wnext=0,I(ie)):_}function T(ie,te){var Z,D;return ie&&ie.state?(D=ie.state,te<0?(Z=0,te=-te):(Z=1+(te>>4),te<48&&(te&=15)),te&&(te<8||te>15)?_:(D.window!==null&&D.wbits!==te&&(D.window=null),D.wrap=Z,D.wbits=te,A(ie))):_}function L(ie,te){var Z,D;return ie?(D=new C,ie.state=D,D.window=null,(Z=T(ie,te))!==0&&(ie.state=null),Z):_}var j,$,ee=!0;function Q(ie){if(ee){var te;for(j=new g.Buf32(512),$=new g.Buf32(32),te=0;te<144;)ie.lens[te++]=8;for(;te<256;)ie.lens[te++]=9;for(;te<280;)ie.lens[te++]=7;for(;te<288;)ie.lens[te++]=8;for(w(1,ie.lens,0,288,j,0,ie.work,{bits:9}),te=0;te<32;)ie.lens[te++]=5;w(2,ie.lens,0,32,$,0,ie.work,{bits:5}),ee=!1}ie.lencode=j,ie.lenbits=9,ie.distcode=$,ie.distbits=5}function pe(ie,te,Z,D){var B,H=ie.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new g.Buf8(H.wsize)),D>=H.wsize?(g.arraySet(H.window,te,Z-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):((B=H.wsize-H.wnext)>D&&(B=D),g.arraySet(H.window,te,Z-D,B,H.wnext),(D-=B)?(g.arraySet(H.window,te,Z-D,D,0),H.wnext=D,H.whave=H.wsize):(H.wnext+=B,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=B))),0}h.inflateReset=A,h.inflateReset2=T,h.inflateResetKeep=I,h.inflateInit=function(ie){return L(ie,15)},h.inflateInit2=L,h.inflate=function(ie,te){var Z,D,B,H,V,R,Y,E,W,F,z,q,fe,ce,U,ve,oe,re,ae,me,he,se,ge,X,we=0,be=new g.Buf8(4),le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ie||!ie.state||!ie.output||!ie.input&&ie.avail_in!==0)return _;(Z=ie.state).mode===k&&(Z.mode=13),V=ie.next_out,B=ie.output,Y=ie.avail_out,H=ie.next_in,D=ie.input,R=ie.avail_in,E=Z.hold,W=Z.bits,F=R,z=Y,se=0;e:for(;;)switch(Z.mode){case 1:if(Z.wrap===0){Z.mode=13;break}for(;W<16;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(2&Z.wrap&&E===35615){Z.check=0,be[0]=255&E,be[1]=E>>>8&255,Z.check=b(Z.check,be,2,0),E=0,W=0,Z.mode=2;break}if(Z.flags=0,Z.head&&(Z.head.done=!1),!(1&Z.wrap)||(((255&E)<<8)+(E>>8))%31){ie.msg="incorrect header check",Z.mode=y;break}if((15&E)!=8){ie.msg="unknown compression method",Z.mode=y;break}if(W-=4,he=8+(15&(E>>>=4)),Z.wbits===0)Z.wbits=he;else if(he>Z.wbits){ie.msg="invalid window size",Z.mode=y;break}Z.dmax=1<<he,ie.adler=Z.check=1,Z.mode=512&E?10:k,E=0,W=0;break;case 2:for(;W<16;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(Z.flags=E,(255&Z.flags)!=8){ie.msg="unknown compression method",Z.mode=y;break}if(57344&Z.flags){ie.msg="unknown header flags set",Z.mode=y;break}Z.head&&(Z.head.text=E>>8&1),512&Z.flags&&(be[0]=255&E,be[1]=E>>>8&255,Z.check=b(Z.check,be,2,0)),E=0,W=0,Z.mode=3;case 3:for(;W<32;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}Z.head&&(Z.head.time=E),512&Z.flags&&(be[0]=255&E,be[1]=E>>>8&255,be[2]=E>>>16&255,be[3]=E>>>24&255,Z.check=b(Z.check,be,4,0)),E=0,W=0,Z.mode=4;case 4:for(;W<16;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}Z.head&&(Z.head.xflags=255&E,Z.head.os=E>>8),512&Z.flags&&(be[0]=255&E,be[1]=E>>>8&255,Z.check=b(Z.check,be,2,0)),E=0,W=0,Z.mode=5;case 5:if(1024&Z.flags){for(;W<16;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}Z.length=E,Z.head&&(Z.head.extra_len=E),512&Z.flags&&(be[0]=255&E,be[1]=E>>>8&255,Z.check=b(Z.check,be,2,0)),E=0,W=0}else Z.head&&(Z.head.extra=null);Z.mode=6;case 6:if(1024&Z.flags&&((q=Z.length)>R&&(q=R),q&&(Z.head&&(he=Z.head.extra_len-Z.length,Z.head.extra||(Z.head.extra=new Array(Z.head.extra_len)),g.arraySet(Z.head.extra,D,H,q,he)),512&Z.flags&&(Z.check=b(Z.check,D,q,H)),R-=q,H+=q,Z.length-=q),Z.length))break e;Z.length=0,Z.mode=7;case 7:if(2048&Z.flags){if(R===0)break e;q=0;do he=D[H+q++],Z.head&&he&&Z.length<65536&&(Z.head.name+=String.fromCharCode(he));while(he&&q<R);if(512&Z.flags&&(Z.check=b(Z.check,D,q,H)),R-=q,H+=q,he)break e}else Z.head&&(Z.head.name=null);Z.length=0,Z.mode=8;case 8:if(4096&Z.flags){if(R===0)break e;q=0;do he=D[H+q++],Z.head&&he&&Z.length<65536&&(Z.head.comment+=String.fromCharCode(he));while(he&&q<R);if(512&Z.flags&&(Z.check=b(Z.check,D,q,H)),R-=q,H+=q,he)break e}else Z.head&&(Z.head.comment=null);Z.mode=9;case 9:if(512&Z.flags){for(;W<16;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(E!==(65535&Z.check)){ie.msg="header crc mismatch",Z.mode=y;break}E=0,W=0}Z.head&&(Z.head.hcrc=Z.flags>>9&1,Z.head.done=!0),ie.adler=Z.check=0,Z.mode=k;break;case 10:for(;W<32;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}ie.adler=Z.check=S(E),E=0,W=0,Z.mode=11;case 11:if(Z.havedict===0)return ie.next_out=V,ie.avail_out=Y,ie.next_in=H,ie.avail_in=R,Z.hold=E,Z.bits=W,2;ie.adler=Z.check=1,Z.mode=k;case k:if(te===5||te===6)break e;case 13:if(Z.last){E>>>=7&W,W-=7&W,Z.mode=27;break}for(;W<3;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}switch(Z.last=1&E,W-=1,3&(E>>>=1)){case 0:Z.mode=14;break;case 1:if(Q(Z),Z.mode=20,te===6){E>>>=2,W-=2;break e}break;case 2:Z.mode=17;break;case 3:ie.msg="invalid block type",Z.mode=y}E>>>=2,W-=2;break;case 14:for(E>>>=7&W,W-=7&W;W<32;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if((65535&E)!=(E>>>16^65535)){ie.msg="invalid stored block lengths",Z.mode=y;break}if(Z.length=65535&E,E=0,W=0,Z.mode=15,te===6)break e;case 15:Z.mode=16;case 16:if(q=Z.length){if(q>R&&(q=R),q>Y&&(q=Y),q===0)break e;g.arraySet(B,D,H,q,V),R-=q,H+=q,Y-=q,V+=q,Z.length-=q;break}Z.mode=k;break;case 17:for(;W<14;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(Z.nlen=257+(31&E),E>>>=5,W-=5,Z.ndist=1+(31&E),E>>>=5,W-=5,Z.ncode=4+(15&E),E>>>=4,W-=4,Z.nlen>286||Z.ndist>30){ie.msg="too many length or distance symbols",Z.mode=y;break}Z.have=0,Z.mode=18;case 18:for(;Z.have<Z.ncode;){for(;W<3;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}Z.lens[le[Z.have++]]=7&E,E>>>=3,W-=3}for(;Z.have<19;)Z.lens[le[Z.have++]]=0;if(Z.lencode=Z.lendyn,Z.lenbits=7,ge={bits:Z.lenbits},se=w(0,Z.lens,0,19,Z.lencode,0,Z.work,ge),Z.lenbits=ge.bits,se){ie.msg="invalid code lengths set",Z.mode=y;break}Z.have=0,Z.mode=19;case 19:for(;Z.have<Z.nlen+Z.ndist;){for(;ve=(we=Z.lencode[E&(1<<Z.lenbits)-1])>>>16&255,oe=65535&we,!((U=we>>>24)<=W);){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(oe<16)E>>>=U,W-=U,Z.lens[Z.have++]=oe;else{if(oe===16){for(X=U+2;W<X;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(E>>>=U,W-=U,Z.have===0){ie.msg="invalid bit length repeat",Z.mode=y;break}he=Z.lens[Z.have-1],q=3+(3&E),E>>>=2,W-=2}else if(oe===17){for(X=U+3;W<X;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}W-=U,he=0,q=3+(7&(E>>>=U)),E>>>=3,W-=3}else{for(X=U+7;W<X;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}W-=U,he=0,q=11+(127&(E>>>=U)),E>>>=7,W-=7}if(Z.have+q>Z.nlen+Z.ndist){ie.msg="invalid bit length repeat",Z.mode=y;break}for(;q--;)Z.lens[Z.have++]=he}}if(Z.mode===y)break;if(Z.lens[256]===0){ie.msg="invalid code -- missing end-of-block",Z.mode=y;break}if(Z.lenbits=9,ge={bits:Z.lenbits},se=w(1,Z.lens,0,Z.nlen,Z.lencode,0,Z.work,ge),Z.lenbits=ge.bits,se){ie.msg="invalid literal/lengths set",Z.mode=y;break}if(Z.distbits=6,Z.distcode=Z.distdyn,ge={bits:Z.distbits},se=w(2,Z.lens,Z.nlen,Z.ndist,Z.distcode,0,Z.work,ge),Z.distbits=ge.bits,se){ie.msg="invalid distances set",Z.mode=y;break}if(Z.mode=20,te===6)break e;case 20:Z.mode=21;case 21:if(R>=6&&Y>=258){ie.next_out=V,ie.avail_out=Y,ie.next_in=H,ie.avail_in=R,Z.hold=E,Z.bits=W,v(ie,z),V=ie.next_out,B=ie.output,Y=ie.avail_out,H=ie.next_in,D=ie.input,R=ie.avail_in,E=Z.hold,W=Z.bits,Z.mode===k&&(Z.back=-1);break}for(Z.back=0;ve=(we=Z.lencode[E&(1<<Z.lenbits)-1])>>>16&255,oe=65535&we,!((U=we>>>24)<=W);){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(ve&&!(240&ve)){for(re=U,ae=ve,me=oe;ve=(we=Z.lencode[me+((E&(1<<re+ae)-1)>>re)])>>>16&255,oe=65535&we,!(re+(U=we>>>24)<=W);){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}E>>>=re,W-=re,Z.back+=re}if(E>>>=U,W-=U,Z.back+=U,Z.length=oe,ve===0){Z.mode=26;break}if(32&ve){Z.back=-1,Z.mode=k;break}if(64&ve){ie.msg="invalid literal/length code",Z.mode=y;break}Z.extra=15&ve,Z.mode=22;case 22:if(Z.extra){for(X=Z.extra;W<X;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}Z.length+=E&(1<<Z.extra)-1,E>>>=Z.extra,W-=Z.extra,Z.back+=Z.extra}Z.was=Z.length,Z.mode=23;case 23:for(;ve=(we=Z.distcode[E&(1<<Z.distbits)-1])>>>16&255,oe=65535&we,!((U=we>>>24)<=W);){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(!(240&ve)){for(re=U,ae=ve,me=oe;ve=(we=Z.distcode[me+((E&(1<<re+ae)-1)>>re)])>>>16&255,oe=65535&we,!(re+(U=we>>>24)<=W);){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}E>>>=re,W-=re,Z.back+=re}if(E>>>=U,W-=U,Z.back+=U,64&ve){ie.msg="invalid distance code",Z.mode=y;break}Z.offset=oe,Z.extra=15&ve,Z.mode=24;case 24:if(Z.extra){for(X=Z.extra;W<X;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}Z.offset+=E&(1<<Z.extra)-1,E>>>=Z.extra,W-=Z.extra,Z.back+=Z.extra}if(Z.offset>Z.dmax){ie.msg="invalid distance too far back",Z.mode=y;break}Z.mode=25;case 25:if(Y===0)break e;if(q=z-Y,Z.offset>q){if((q=Z.offset-q)>Z.whave&&Z.sane){ie.msg="invalid distance too far back",Z.mode=y;break}q>Z.wnext?(q-=Z.wnext,fe=Z.wsize-q):fe=Z.wnext-q,q>Z.length&&(q=Z.length),ce=Z.window}else ce=B,fe=V-Z.offset,q=Z.length;q>Y&&(q=Y),Y-=q,Z.length-=q;do B[V++]=ce[fe++];while(--q);Z.length===0&&(Z.mode=21);break;case 26:if(Y===0)break e;B[V++]=Z.length,Y--,Z.mode=21;break;case 27:if(Z.wrap){for(;W<32;){if(R===0)break e;R--,E|=D[H++]<<W,W+=8}if(z-=Y,ie.total_out+=z,Z.total+=z,z&&(ie.adler=Z.check=Z.flags?b(Z.check,B,z,V-z):m(Z.check,B,z,V-z)),z=Y,(Z.flags?E:S(E))!==Z.check){ie.msg="incorrect data check",Z.mode=y;break}E=0,W=0}Z.mode=28;case 28:if(Z.wrap&&Z.flags){for(;W<32;){if(R===0)break e;R--,E+=D[H++]<<W,W+=8}if(E!==(4294967295&Z.total)){ie.msg="incorrect length check",Z.mode=y;break}E=0,W=0}Z.mode=29;case 29:se=1;break e;case y:se=-3;break e;case 31:return-4;default:return _}return ie.next_out=V,ie.avail_out=Y,ie.next_in=H,ie.avail_in=R,Z.hold=E,Z.bits=W,(Z.wsize||z!==ie.avail_out&&Z.mode<y&&(Z.mode<27||te!==4))&&pe(ie,ie.output,ie.next_out,z-ie.avail_out)?(Z.mode=31,-4):(F-=ie.avail_in,z-=ie.avail_out,ie.total_in+=F,ie.total_out+=z,Z.total+=z,Z.wrap&&z&&(ie.adler=Z.check=Z.flags?b(Z.check,B,z,ie.next_out-z):m(Z.check,B,z,ie.next_out-z)),ie.data_type=Z.bits+(Z.last?64:0)+(Z.mode===k?128:0)+(Z.mode===20||Z.mode===15?256:0),(F===0&&z===0||te===4)&&se===0&&(se=-5),se)},h.inflateEnd=function(ie){if(!ie||!ie.state)return _;var te=ie.state;return te.window&&(te.window=null),ie.state=null,0},h.inflateGetHeader=function(ie,te){var Z;return ie&&ie.state&&2&(Z=ie.state).wrap?(Z.head=te,te.done=!1,0):_},h.inflateSetDictionary=function(ie,te){var Z,D=te.length;return ie&&ie.state?(Z=ie.state).wrap!==0&&Z.mode!==11?_:Z.mode===11&&m(1,te,D,0)!==Z.check?-3:pe(ie,te,D,D)?(Z.mode=31,-4):(Z.havedict=1,0):_},h.inflateInfo="pako inflate (from Nodeca project)"},7431:function(f,h,c){var g=c(6613),m=15,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(k,y,S,C,I,A,T,L){var j,$,ee,Q,pe,ie,te,Z,D,B=L.bits,H=0,V=0,R=0,Y=0,E=0,W=0,F=0,z=0,q=0,fe=0,ce=null,U=0,ve=new g.Buf16(16),oe=new g.Buf16(16),re=null,ae=0;for(H=0;H<=m;H++)ve[H]=0;for(V=0;V<C;V++)ve[y[S+V]]++;for(E=B,Y=m;Y>=1&&ve[Y]===0;Y--);if(E>Y&&(E=Y),Y===0)return I[A++]=20971520,I[A++]=20971520,L.bits=1,0;for(R=1;R<Y&&ve[R]===0;R++);for(E<R&&(E=R),z=1,H=1;H<=m;H++)if(z<<=1,(z-=ve[H])<0)return-1;if(z>0&&(k===0||Y!==1))return-1;for(oe[1]=0,H=1;H<m;H++)oe[H+1]=oe[H]+ve[H];for(V=0;V<C;V++)y[S+V]!==0&&(T[oe[y[S+V]]++]=V);if(k===0?(ce=re=T,ie=19):k===1?(ce=b,U-=257,re=v,ae-=257,ie=256):(ce=w,re=_,ie=-1),fe=0,V=0,H=R,pe=A,W=E,F=0,ee=-1,Q=(q=1<<E)-1,k===1&&q>852||k===2&&q>592)return 1;for(;;){te=H-F,T[V]<ie?(Z=0,D=T[V]):T[V]>ie?(Z=re[ae+T[V]],D=ce[U+T[V]]):(Z=96,D=0),j=1<<H-F,R=$=1<<W;do I[pe+(fe>>F)+($-=j)]=te<<24|Z<<16|D|0;while($!==0);for(j=1<<H-1;fe&j;)j>>=1;if(j!==0?(fe&=j-1,fe+=j):fe=0,V++,--ve[H]==0){if(H===Y)break;H=y[S+T[V]]}if(H>E&&(fe&Q)!==ee){for(F===0&&(F=E),pe+=R,z=1<<(W=H-F);W+F<Y&&!((z-=ve[W+F])<=0);)W++,z<<=1;if(q+=1<<W,k===1&&q>852||k===2&&q>592)return 1;I[ee=fe&Q]=E<<24|W<<16|pe-A|0}}return fe!==0&&(I[pe+fe]=H-F<<24|4194304|0),L.bits=E,0}},8757:function(f){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},6928:function(f,h,c){var g=c(6613);function m(oe){for(var re=oe.length;--re>=0;)oe[re]=0}var b=256,v=286,w=30,_=15,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(576);m(I);var A=new Array(60);m(A);var T=new Array(512);m(T);var L=new Array(256);m(L);var j=new Array(29);m(j);var $,ee,Q,pe=new Array(w);function ie(oe,re,ae,me,he){this.static_tree=oe,this.extra_bits=re,this.extra_base=ae,this.elems=me,this.max_length=he,this.has_stree=oe&&oe.length}function te(oe,re){this.dyn_tree=oe,this.max_code=0,this.stat_desc=re}function Z(oe){return oe<256?T[oe]:T[256+(oe>>>7)]}function D(oe,re){oe.pending_buf[oe.pending++]=255&re,oe.pending_buf[oe.pending++]=re>>>8&255}function B(oe,re,ae){oe.bi_valid>16-ae?(oe.bi_buf|=re<<oe.bi_valid&65535,D(oe,oe.bi_buf),oe.bi_buf=re>>16-oe.bi_valid,oe.bi_valid+=ae-16):(oe.bi_buf|=re<<oe.bi_valid&65535,oe.bi_valid+=ae)}function H(oe,re,ae){B(oe,ae[2*re],ae[2*re+1])}function V(oe,re){var ae=0;do ae|=1&oe,oe>>>=1,ae<<=1;while(--re>0);return ae>>>1}function R(oe,re,ae){var me,he,se=new Array(16),ge=0;for(me=1;me<=_;me++)se[me]=ge=ge+ae[me-1]<<1;for(he=0;he<=re;he++){var X=oe[2*he+1];X!==0&&(oe[2*he]=V(se[X]++,X))}}function Y(oe){var re;for(re=0;re<v;re++)oe.dyn_ltree[2*re]=0;for(re=0;re<w;re++)oe.dyn_dtree[2*re]=0;for(re=0;re<19;re++)oe.bl_tree[2*re]=0;oe.dyn_ltree[512]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function E(oe){oe.bi_valid>8?D(oe,oe.bi_buf):oe.bi_valid>0&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function W(oe,re,ae,me){var he=2*re,se=2*ae;return oe[he]<oe[se]||oe[he]===oe[se]&&me[re]<=me[ae]}function F(oe,re,ae){for(var me=oe.heap[ae],he=ae<<1;he<=oe.heap_len&&(he<oe.heap_len&&W(re,oe.heap[he+1],oe.heap[he],oe.depth)&&he++,!W(re,me,oe.heap[he],oe.depth));)oe.heap[ae]=oe.heap[he],ae=he,he<<=1;oe.heap[ae]=me}function z(oe,re,ae){var me,he,se,ge,X=0;if(oe.last_lit!==0)do me=oe.pending_buf[oe.d_buf+2*X]<<8|oe.pending_buf[oe.d_buf+2*X+1],he=oe.pending_buf[oe.l_buf+X],X++,me===0?H(oe,he,re):(H(oe,(se=L[he])+b+1,re),(ge=k[se])!==0&&B(oe,he-=j[se],ge),H(oe,se=Z(--me),ae),(ge=y[se])!==0&&B(oe,me-=pe[se],ge));while(X<oe.last_lit);H(oe,256,re)}function q(oe,re){var ae,me,he,se=re.dyn_tree,ge=re.stat_desc.static_tree,X=re.stat_desc.has_stree,we=re.stat_desc.elems,be=-1;for(oe.heap_len=0,oe.heap_max=573,ae=0;ae<we;ae++)se[2*ae]!==0?(oe.heap[++oe.heap_len]=be=ae,oe.depth[ae]=0):se[2*ae+1]=0;for(;oe.heap_len<2;)se[2*(he=oe.heap[++oe.heap_len]=be<2?++be:0)]=1,oe.depth[he]=0,oe.opt_len--,X&&(oe.static_len-=ge[2*he+1]);for(re.max_code=be,ae=oe.heap_len>>1;ae>=1;ae--)F(oe,se,ae);he=we;do ae=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],F(oe,se,1),me=oe.heap[1],oe.heap[--oe.heap_max]=ae,oe.heap[--oe.heap_max]=me,se[2*he]=se[2*ae]+se[2*me],oe.depth[he]=(oe.depth[ae]>=oe.depth[me]?oe.depth[ae]:oe.depth[me])+1,se[2*ae+1]=se[2*me+1]=he,oe.heap[1]=he++,F(oe,se,1);while(oe.heap_len>=2);oe.heap[--oe.heap_max]=oe.heap[1],function(le,ye){var ue,xe,Pe,Ne,Me,Re,We=ye.dyn_tree,Se=ye.max_code,Be=ye.stat_desc.static_tree,_e=ye.stat_desc.has_stree,ze=ye.stat_desc.extra_bits,Ve=ye.stat_desc.extra_base,ut=ye.stat_desc.max_length,Ie=0;for(Ne=0;Ne<=_;Ne++)le.bl_count[Ne]=0;for(We[2*le.heap[le.heap_max]+1]=0,ue=le.heap_max+1;ue<573;ue++)(Ne=We[2*We[2*(xe=le.heap[ue])+1]+1]+1)>ut&&(Ne=ut,Ie++),We[2*xe+1]=Ne,xe>Se||(le.bl_count[Ne]++,Me=0,xe>=Ve&&(Me=ze[xe-Ve]),Re=We[2*xe],le.opt_len+=Re*(Ne+Me),_e&&(le.static_len+=Re*(Be[2*xe+1]+Me)));if(Ie!==0){do{for(Ne=ut-1;le.bl_count[Ne]===0;)Ne--;le.bl_count[Ne]--,le.bl_count[Ne+1]+=2,le.bl_count[ut]--,Ie-=2}while(Ie>0);for(Ne=ut;Ne!==0;Ne--)for(xe=le.bl_count[Ne];xe!==0;)(Pe=le.heap[--ue])>Se||(We[2*Pe+1]!==Ne&&(le.opt_len+=(Ne-We[2*Pe+1])*We[2*Pe],We[2*Pe+1]=Ne),xe--)}}(oe,re),R(se,be,oe.bl_count)}function fe(oe,re,ae){var me,he,se=-1,ge=re[1],X=0,we=7,be=4;for(ge===0&&(we=138,be=3),re[2*(ae+1)+1]=65535,me=0;me<=ae;me++)he=ge,ge=re[2*(me+1)+1],++X<we&&he===ge||(X<be?oe.bl_tree[2*he]+=X:he!==0?(he!==se&&oe.bl_tree[2*he]++,oe.bl_tree[32]++):X<=10?oe.bl_tree[34]++:oe.bl_tree[36]++,X=0,se=he,ge===0?(we=138,be=3):he===ge?(we=6,be=3):(we=7,be=4))}function ce(oe,re,ae){var me,he,se=-1,ge=re[1],X=0,we=7,be=4;for(ge===0&&(we=138,be=3),me=0;me<=ae;me++)if(he=ge,ge=re[2*(me+1)+1],!(++X<we&&he===ge)){if(X<be)do H(oe,he,oe.bl_tree);while(--X!=0);else he!==0?(he!==se&&(H(oe,he,oe.bl_tree),X--),H(oe,16,oe.bl_tree),B(oe,X-3,2)):X<=10?(H(oe,17,oe.bl_tree),B(oe,X-3,3)):(H(oe,18,oe.bl_tree),B(oe,X-11,7));X=0,se=he,ge===0?(we=138,be=3):he===ge?(we=6,be=3):(we=7,be=4)}}m(pe);var U=!1;function ve(oe,re,ae,me){B(oe,0+(me?1:0),3),function(he,se,ge,X){E(he),X&&(D(he,ge),D(he,~ge)),g.arraySet(he.pending_buf,he.window,se,ge,he.pending),he.pending+=ge}(oe,re,ae,!0)}h._tr_init=function(oe){U||(function(){var re,ae,me,he,se,ge=new Array(16);for(me=0,he=0;he<28;he++)for(j[he]=me,re=0;re<1<<k[he];re++)L[me++]=he;for(L[me-1]=he,se=0,he=0;he<16;he++)for(pe[he]=se,re=0;re<1<<y[he];re++)T[se++]=he;for(se>>=7;he<w;he++)for(pe[he]=se<<7,re=0;re<1<<y[he]-7;re++)T[256+se++]=he;for(ae=0;ae<=_;ae++)ge[ae]=0;for(re=0;re<=143;)I[2*re+1]=8,re++,ge[8]++;for(;re<=255;)I[2*re+1]=9,re++,ge[9]++;for(;re<=279;)I[2*re+1]=7,re++,ge[7]++;for(;re<=287;)I[2*re+1]=8,re++,ge[8]++;for(R(I,287,ge),re=0;re<w;re++)A[2*re+1]=5,A[2*re]=V(re,5);$=new ie(I,k,257,v,_),ee=new ie(A,y,0,w,_),Q=new ie(new Array(0),S,0,19,7)}(),U=!0),oe.l_desc=new te(oe.dyn_ltree,$),oe.d_desc=new te(oe.dyn_dtree,ee),oe.bl_desc=new te(oe.bl_tree,Q),oe.bi_buf=0,oe.bi_valid=0,Y(oe)},h._tr_stored_block=ve,h._tr_flush_block=function(oe,re,ae,me){var he,se,ge=0;oe.level>0?(oe.strm.data_type===2&&(oe.strm.data_type=function(X){var we,be=4093624447;for(we=0;we<=31;we++,be>>>=1)if(1&be&&X.dyn_ltree[2*we]!==0)return 0;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return 1;for(we=32;we<b;we++)if(X.dyn_ltree[2*we]!==0)return 1;return 0}(oe)),q(oe,oe.l_desc),q(oe,oe.d_desc),ge=function(X){var we;for(fe(X,X.dyn_ltree,X.l_desc.max_code),fe(X,X.dyn_dtree,X.d_desc.max_code),q(X,X.bl_desc),we=18;we>=3&&X.bl_tree[2*C[we]+1]===0;we--);return X.opt_len+=3*(we+1)+5+5+4,we}(oe),he=oe.opt_len+3+7>>>3,(se=oe.static_len+3+7>>>3)<=he&&(he=se)):he=se=ae+5,ae+4<=he&&re!==-1?ve(oe,re,ae,me):oe.strategy===4||se===he?(B(oe,2+(me?1:0),3),z(oe,I,A)):(B(oe,4+(me?1:0),3),function(X,we,be,le){var ye;for(B(X,we-257,5),B(X,be-1,5),B(X,le-4,4),ye=0;ye<le;ye++)B(X,X.bl_tree[2*C[ye]+1],3);ce(X,X.dyn_ltree,we-1),ce(X,X.dyn_dtree,be-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,ge+1),z(oe,oe.dyn_ltree,oe.dyn_dtree)),Y(oe),me&&E(oe)},h._tr_tally=function(oe,re,ae){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=re>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&re,oe.pending_buf[oe.l_buf+oe.last_lit]=255&ae,oe.last_lit++,re===0?oe.dyn_ltree[2*ae]++:(oe.matches++,re--,oe.dyn_ltree[2*(L[ae]+b+1)]++,oe.dyn_dtree[2*Z(re)]++),oe.last_lit===oe.lit_bufsize-1},h._tr_align=function(oe){B(oe,2,3),H(oe,256,I),function(re){re.bi_valid===16?(D(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):re.bi_valid>=8&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(oe)}},7644:function(f){f.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},5763:function(f){f.exports=function(h){h.data&&h.name&&(h=h.data);for(var c=!0,g="",m="",b=0;b<h.length;b++){var v=h[b];if(c)v?m+=String.fromCharCode(v):c=!1;else{if(!v)throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");g+=String.fromCharCode(v)}}return{keyword:m,text:g}}},8576:function(f){f.exports=function(h,c){if(h=String(h),c=String(c),!/^[\x00-\xFF]+$/.test(h)||!/^[\x00-\xFF]+$/.test(c))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(h.length>=80)throw new Error('Keyword "'+h+'" is longer than the 79-character limit imposed by the PNG specification');for(var g,m=h.length+c.length+1,b=new Uint8Array(m),v=0,w=0;w<h.length;w++){if(!(g=h.charCodeAt(w)))throw new Error("0x00 character is not permitted in tEXt keywords");b[v++]=g}b[v++]=0;for(var _=0;_<c.length;_++){if(!(g=c.charCodeAt(_)))throw new Error("0x00 character is not permitted in tEXt content");b[v++]=g}return{name:"tEXt",data:b}}},9175:function(f,h,c){h.encode=c(8576),h.decode=c(5763)},3924:function(f,h,c){var g=c(201),m=c(551);f.exports=function(_){var k,y=8,S=y;for(k=0;k<_.length;k++)y+=_[k].data.length,y+=12;var C=new Uint8Array(y);for(C[0]=137,C[1]=80,C[2]=78,C[3]=71,C[4]=13,C[5]=10,C[6]=26,C[7]=10,k=0;k<_.length;k++){var I=_[k],A=I.name,T=I.data,L=T.length,j=[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)];w[0]=L,C[S++]=b[3],C[S++]=b[2],C[S++]=b[1],C[S++]=b[0],C[S++]=j[0],C[S++]=j[1],C[S++]=j[2],C[S++]=j[3];for(var $=0;$<L;)C[S++]=T[$++];var ee=j.concat(g(T)),Q=m.buf(ee);v[0]=Q,C[S++]=b[3],C[S++]=b[2],C[S++]=b[1],C[S++]=b[0]}return C};var b=new Uint8Array(4),v=new Int32Array(b.buffer),w=new Uint32Array(b.buffer)},2034:function(f,h,c){var g=c(551);f.exports=function(w){if(w[0]!==137)throw new Error("Invalid .png file header");if(w[1]!==80)throw new Error("Invalid .png file header");if(w[2]!==78)throw new Error("Invalid .png file header");if(w[3]!==71)throw new Error("Invalid .png file header");if(w[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(w[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(w[6]!==26)throw new Error("Invalid .png file header");if(w[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var _=!1,k=[],y=8;y<w.length;){m[3]=w[y++],m[2]=w[y++],m[1]=w[y++],m[0]=w[y++];var S=v[0]+4,C=new Uint8Array(S);C[0]=w[y++],C[1]=w[y++],C[2]=w[y++],C[3]=w[y++];var I=String.fromCharCode(C[0])+String.fromCharCode(C[1])+String.fromCharCode(C[2])+String.fromCharCode(C[3]);if(!k.length&&I!=="IHDR")throw new Error("IHDR header missing");if(I==="IEND"){_=!0,k.push({name:I,data:new Uint8Array(0)});break}for(var A=4;A<S;A++)C[A]=w[y++];m[3]=w[y++],m[2]=w[y++],m[1]=w[y++],m[0]=w[y++];var T=b[0];if(g.buf(C)!==T)throw new Error("CRC values for "+I+" header do not match, PNG file is likely corrupted");var L=new Uint8Array(C.buffer.slice(4));k.push({name:I,data:L})}if(!_)throw new Error(".png file ended prematurely: no IEND header was found");return k};var m=new Uint8Array(4),b=new Int32Array(m.buffer),v=new Uint32Array(m.buffer)},3190:function(f,h,c){function g(y,S){return Math.pow(y[0]-S[0],2)+Math.pow(y[1]-S[1],2)}function m(y,S,C){const I=g(S,C);if(I===0)return g(y,S);let A=((y[0]-S[0])*(C[0]-S[0])+(y[1]-S[1])*(C[1]-S[1]))/I;return A=Math.max(0,Math.min(1,A)),g(y,b(S,C,A))}function b(y,S,C){return[y[0]+(S[0]-y[0])*C,y[1]+(S[1]-y[1])*C]}function v(y,S,C,I){const A=I||[];if(function(j,$){const ee=j[$+0],Q=j[$+1],pe=j[$+2],ie=j[$+3];let te=3*Q[0]-2*ee[0]-ie[0];te*=te;let Z=3*Q[1]-2*ee[1]-ie[1];Z*=Z;let D=3*pe[0]-2*ie[0]-ee[0];D*=D;let B=3*pe[1]-2*ie[1]-ee[1];return B*=B,te<D&&(te=D),Z<B&&(Z=B),te+Z}(y,S)<C){const j=y[S+0];A.length?(T=A[A.length-1],L=j,Math.sqrt(g(T,L))>1&&A.push(j)):A.push(j),A.push(y[S+3])}else{const $=y[S+0],ee=y[S+1],Q=y[S+2],pe=y[S+3],ie=b($,ee,.5),te=b(ee,Q,.5),Z=b(Q,pe,.5),D=b(ie,te,.5),B=b(te,Z,.5),H=b(D,B,.5);v([$,ie,D,H],0,C,A),v([H,B,Z,pe],0,C,A)}var T,L;return A}function w(y,S){return _(y,0,y.length,S)}function _(y,S,C,I,A){const T=A||[],L=y[S],j=y[C-1];let $=0,ee=1;for(let Q=S+1;Q<C-1;++Q){const pe=m(y[Q],L,j);pe>$&&($=pe,ee=Q)}return Math.sqrt($)>I?(_(y,S,ee+1,I,T),_(y,ee,C,I,T)):(T.length||T.push(L),T.push(j)),T}function k(y,S=.15,C){const I=[],A=(y.length-1)/3;for(let T=0;T<A;T++)v(y,3*T,S,I);return C&&C>0?_(I,0,I.length,C):I}c.d(h,{o:function(){return w},s:function(){return k}})},6462:function(f,h){var c=typeof Symbol=="function"&&Symbol.for,g=c?Symbol.for("react.element"):60103,m=c?Symbol.for("react.portal"):60106,b=c?Symbol.for("react.fragment"):60107,v=c?Symbol.for("react.strict_mode"):60108,w=c?Symbol.for("react.profiler"):60114,_=c?Symbol.for("react.provider"):60109,k=c?Symbol.for("react.context"):60110,y=c?Symbol.for("react.async_mode"):60111,S=c?Symbol.for("react.concurrent_mode"):60111,C=c?Symbol.for("react.forward_ref"):60112,I=c?Symbol.for("react.suspense"):60113,A=c?Symbol.for("react.memo"):60115,T=c?Symbol.for("react.lazy"):60116;function L(j){if(typeof j=="object"&&j!==null){var $=j.$$typeof;switch($){case g:switch(j=j.type){case y:case S:case b:case w:case v:case I:return j;default:switch(j=j&&j.$$typeof){case k:case C:case T:case A:case _:return j;default:return $}}case m:return $}}}h.isFragment=function(j){return L(j)===b},h.isMemo=function(j){return L(j)===A}},364:function(f,h,c){f.exports=c(6462)},8697:function(f,h,c){var g=c(9787),m=Symbol.for("react.element"),b=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,w=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function k(y,S,C){var I,A={},T=null,L=null;for(I in C!==void 0&&(T=""+C),S.key!==void 0&&(T=""+S.key),S.ref!==void 0&&(L=S.ref),S)v.call(S,I)&&!_.hasOwnProperty(I)&&(A[I]=S[I]);if(y&&y.defaultProps)for(I in S=y.defaultProps)A[I]===void 0&&(A[I]=S[I]);return{$$typeof:m,type:y,key:T,ref:L,props:A,_owner:w.current}}h.Fragment=b,h.jsx=k,h.jsxs=k},9980:function(f,h,c){f.exports=c(8697)},5460:function(f,h,c){function g(){return Math.floor(Math.random()*2147483648)}c.d(h,{W:function(){return g},k:function(){return m}});class m{constructor(v){this.seed=v}next(){return this.seed?(2147483647&(this.seed=Math.imul(48271,this.seed)))/2147483648:Math.random()}}},6574:function(f,h,c){function g(be,le,ye){if(be&&be.length){const[ue,xe]=le,Pe=Math.PI/180*ye,Ne=Math.cos(Pe),Me=Math.sin(Pe);be.forEach(Re=>{const[We,Se]=Re;Re[0]=(We-ue)*Ne-(Se-xe)*Me+ue,Re[1]=(We-ue)*Me+(Se-xe)*Ne+xe})}}function m(be){const le=be[0],ye=be[1];return Math.sqrt(Math.pow(le[0]-ye[0],2)+Math.pow(le[1]-ye[1],2))}function b(be,le){const ye=le.hachureAngle+90;let ue=le.hachureGap;ue<0&&(ue=4*le.strokeWidth),ue=Math.max(ue,.1);const xe=[0,0];if(ye)for(const Ne of be)g(Ne,xe,ye);const Pe=function(Ne,Me){const Re=[];for(const ze of Ne){const Ve=[...ze];Ve[0].join(",")!==Ve[Ve.length-1].join(",")&&Ve.push([Ve[0][0],Ve[0][1]]),Ve.length>2&&Re.push(Ve)}const We=[];Me=Math.max(Me,.1);const Se=[];for(const ze of Re)for(let Ve=0;Ve<ze.length-1;Ve++){const ut=ze[Ve],Ie=ze[Ve+1];if(ut[1]!==Ie[1]){const ot=Math.min(ut[1],Ie[1]);Se.push({ymin:ot,ymax:Math.max(ut[1],Ie[1]),x:ot===ut[1]?ut[0]:Ie[0],islope:(Ie[0]-ut[0])/(Ie[1]-ut[1])})}}if(Se.sort((ze,Ve)=>ze.ymin<Ve.ymin?-1:ze.ymin>Ve.ymin?1:ze.x<Ve.x?-1:ze.x>Ve.x?1:ze.ymax===Ve.ymax?0:(ze.ymax-Ve.ymax)/Math.abs(ze.ymax-Ve.ymax)),!Se.length)return We;let Be=[],_e=Se[0].ymin;for(;Be.length||Se.length;){if(Se.length){let ze=-1;for(let Ve=0;Ve<Se.length&&!(Se[Ve].ymin>_e);Ve++)ze=Ve;Se.splice(0,ze+1).forEach(Ve=>{Be.push({s:_e,edge:Ve})})}if(Be=Be.filter(ze=>!(ze.edge.ymax<=_e)),Be.sort((ze,Ve)=>ze.edge.x===Ve.edge.x?0:(ze.edge.x-Ve.edge.x)/Math.abs(ze.edge.x-Ve.edge.x)),Be.length>1)for(let ze=0;ze<Be.length;ze+=2){const Ve=ze+1;if(Ve>=Be.length)break;const ut=Be[ze].edge,Ie=Be[Ve].edge;We.push([[Math.round(ut.x),_e],[Math.round(Ie.x),_e]])}_e+=Me,Be.forEach(ze=>{ze.edge.x=ze.edge.x+Me*ze.edge.islope})}return We}(be,ue);if(ye){for(const Ne of be)g(Ne,xe,-ye);(function(Ne,Me,Re){const We=[];Ne.forEach(Se=>We.push(...Se)),g(We,Me,Re)})(Pe,xe,-ye)}return Pe}c.d(h,{Z:function(){return we}});class v{constructor(le){this.helper=le}fillPolygons(le,ye){return this._fillPolygons(le,ye)}_fillPolygons(le,ye){const ue=b(le,ye);return{type:"fillSketch",ops:this.renderLines(ue,ye)}}renderLines(le,ye){const ue=[];for(const xe of le)ue.push(...this.helper.doubleLineOps(xe[0][0],xe[0][1],xe[1][0],xe[1][1],ye));return ue}}class w extends v{fillPolygons(le,ye){let ue=ye.hachureGap;ue<0&&(ue=4*ye.strokeWidth),ue=Math.max(ue,.1);const xe=b(le,Object.assign({},ye,{hachureGap:ue})),Pe=Math.PI/180*ye.hachureAngle,Ne=[],Me=.5*ue*Math.cos(Pe),Re=.5*ue*Math.sin(Pe);for(const[We,Se]of xe)m([We,Se])&&Ne.push([[We[0]-Me,We[1]+Re],[...Se]],[[We[0]+Me,We[1]-Re],[...Se]]);return{type:"fillSketch",ops:this.renderLines(Ne,ye)}}}class _ extends v{fillPolygons(le,ye){const ue=this._fillPolygons(le,ye),xe=Object.assign({},ye,{hachureAngle:ye.hachureAngle+90}),Pe=this._fillPolygons(le,xe);return ue.ops=ue.ops.concat(Pe.ops),ue}}class k{constructor(le){this.helper=le}fillPolygons(le,ye){const ue=b(le,ye=Object.assign({},ye,{hachureAngle:0}));return this.dotsOnLines(ue,ye)}dotsOnLines(le,ye){const ue=[];let xe=ye.hachureGap;xe<0&&(xe=4*ye.strokeWidth),xe=Math.max(xe,.1);let Pe=ye.fillWeight;Pe<0&&(Pe=ye.strokeWidth/2);const Ne=xe/4;for(const Me of le){const Re=m(Me),We=Re/xe,Se=Math.ceil(We)-1,Be=Re-Se*xe,_e=(Me[0][0]+Me[1][0])/2-xe/4,ze=Math.min(Me[0][1],Me[1][1]);for(let Ve=0;Ve<Se;Ve++){const ut=ze+Be+Ve*xe,Ie=_e-Ne+2*Math.random()*Ne,ot=ut-Ne+2*Math.random()*Ne,Ye=this.helper.ellipse(Ie,ot,Pe,Pe,ye);ue.push(...Ye.ops)}}return{type:"fillSketch",ops:ue}}}class y{constructor(le){this.helper=le}fillPolygons(le,ye){const ue=b(le,ye);return{type:"fillSketch",ops:this.dashedLine(ue,ye)}}dashedLine(le,ye){const ue=ye.dashOffset<0?ye.hachureGap<0?4*ye.strokeWidth:ye.hachureGap:ye.dashOffset,xe=ye.dashGap<0?ye.hachureGap<0?4*ye.strokeWidth:ye.hachureGap:ye.dashGap,Pe=[];return le.forEach(Ne=>{const Me=m(Ne),Re=Math.floor(Me/(ue+xe)),We=(Me+xe-Re*(ue+xe))/2;let Se=Ne[0],Be=Ne[1];Se[0]>Be[0]&&(Se=Ne[1],Be=Ne[0]);const _e=Math.atan((Be[1]-Se[1])/(Be[0]-Se[0]));for(let ze=0;ze<Re;ze++){const Ve=ze*(ue+xe),ut=Ve+ue,Ie=[Se[0]+Ve*Math.cos(_e)+We*Math.cos(_e),Se[1]+Ve*Math.sin(_e)+We*Math.sin(_e)],ot=[Se[0]+ut*Math.cos(_e)+We*Math.cos(_e),Se[1]+ut*Math.sin(_e)+We*Math.sin(_e)];Pe.push(...this.helper.doubleLineOps(Ie[0],Ie[1],ot[0],ot[1],ye))}}),Pe}}class S{constructor(le){this.helper=le}fillPolygons(le,ye){const ue=ye.hachureGap<0?4*ye.strokeWidth:ye.hachureGap,xe=ye.zigzagOffset<0?ue:ye.zigzagOffset,Pe=b(le,ye=Object.assign({},ye,{hachureGap:ue+xe}));return{type:"fillSketch",ops:this.zigzagLines(Pe,xe,ye)}}zigzagLines(le,ye,ue){const xe=[];return le.forEach(Pe=>{const Ne=m(Pe),Me=Math.round(Ne/(2*ye));let Re=Pe[0],We=Pe[1];Re[0]>We[0]&&(Re=Pe[1],We=Pe[0]);const Se=Math.atan((We[1]-Re[1])/(We[0]-Re[0]));for(let Be=0;Be<Me;Be++){const _e=2*Be*ye,ze=2*(Be+1)*ye,Ve=Math.sqrt(2*Math.pow(ye,2)),ut=[Re[0]+_e*Math.cos(Se),Re[1]+_e*Math.sin(Se)],Ie=[Re[0]+ze*Math.cos(Se),Re[1]+ze*Math.sin(Se)],ot=[ut[0]+Ve*Math.cos(Se+Math.PI/4),ut[1]+Ve*Math.sin(Se+Math.PI/4)];xe.push(...this.helper.doubleLineOps(ut[0],ut[1],ot[0],ot[1],ue),...this.helper.doubleLineOps(ot[0],ot[1],Ie[0],Ie[1],ue))}}),xe}}const C={};var I=c(5460);const A={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function T(be,le){return be.type===le}function L(be){const le=[],ye=function(Ne){const Me=new Array;for(;Ne!=="";)if(Ne.match(/^([ \t\r\n,]+)/))Ne=Ne.substr(RegExp.$1.length);else if(Ne.match(/^([aAcChHlLmMqQsStTvVzZ])/))Me[Me.length]={type:0,text:RegExp.$1},Ne=Ne.substr(RegExp.$1.length);else{if(!Ne.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];Me[Me.length]={type:1,text:`${parseFloat(RegExp.$1)}`},Ne=Ne.substr(RegExp.$1.length)}return Me[Me.length]={type:2,text:""},Me}(be);let ue="BOD",xe=0,Pe=ye[xe];for(;!T(Pe,2);){let Ne=0;const Me=[];if(ue==="BOD"){if(Pe.text!=="M"&&Pe.text!=="m")return L("M0,0"+be);xe++,Ne=A[Pe.text],ue=Pe.text}else T(Pe,1)?Ne=A[ue]:(xe++,Ne=A[Pe.text],ue=Pe.text);if(!(xe+Ne<ye.length))throw new Error("Path data ended short");for(let Re=xe;Re<xe+Ne;Re++){const We=ye[Re];if(!T(We,1))throw new Error("Param not a number: "+ue+","+We.text);Me[Me.length]=+We.text}if(typeof A[ue]!="number")throw new Error("Bad segment: "+ue);{const Re={key:ue,data:Me};le.push(Re),xe+=Ne,Pe=ye[xe],ue==="M"&&(ue="L"),ue==="m"&&(ue="l")}}return le}function j(be){let le=0,ye=0,ue=0,xe=0;const Pe=[];for(const{key:Ne,data:Me}of be)switch(Ne){case"M":Pe.push({key:"M",data:[...Me]}),[le,ye]=Me,[ue,xe]=Me;break;case"m":le+=Me[0],ye+=Me[1],Pe.push({key:"M",data:[le,ye]}),ue=le,xe=ye;break;case"L":Pe.push({key:"L",data:[...Me]}),[le,ye]=Me;break;case"l":le+=Me[0],ye+=Me[1],Pe.push({key:"L",data:[le,ye]});break;case"C":Pe.push({key:"C",data:[...Me]}),le=Me[4],ye=Me[5];break;case"c":{const Re=Me.map((We,Se)=>Se%2?We+ye:We+le);Pe.push({key:"C",data:Re}),le=Re[4],ye=Re[5];break}case"Q":Pe.push({key:"Q",data:[...Me]}),le=Me[2],ye=Me[3];break;case"q":{const Re=Me.map((We,Se)=>Se%2?We+ye:We+le);Pe.push({key:"Q",data:Re}),le=Re[2],ye=Re[3];break}case"A":Pe.push({key:"A",data:[...Me]}),le=Me[5],ye=Me[6];break;case"a":le+=Me[5],ye+=Me[6],Pe.push({key:"A",data:[Me[0],Me[1],Me[2],Me[3],Me[4],le,ye]});break;case"H":Pe.push({key:"H",data:[...Me]}),le=Me[0];break;case"h":le+=Me[0],Pe.push({key:"H",data:[le]});break;case"V":Pe.push({key:"V",data:[...Me]}),ye=Me[0];break;case"v":ye+=Me[0],Pe.push({key:"V",data:[ye]});break;case"S":Pe.push({key:"S",data:[...Me]}),le=Me[2],ye=Me[3];break;case"s":{const Re=Me.map((We,Se)=>Se%2?We+ye:We+le);Pe.push({key:"S",data:Re}),le=Re[2],ye=Re[3];break}case"T":Pe.push({key:"T",data:[...Me]}),le=Me[0],ye=Me[1];break;case"t":le+=Me[0],ye+=Me[1],Pe.push({key:"T",data:[le,ye]});break;case"Z":case"z":Pe.push({key:"Z",data:[]}),le=ue,ye=xe}return Pe}function $(be){const le=[];let ye="",ue=0,xe=0,Pe=0,Ne=0,Me=0,Re=0;for(const{key:We,data:Se}of be){switch(We){case"M":le.push({key:"M",data:[...Se]}),[ue,xe]=Se,[Pe,Ne]=Se;break;case"C":le.push({key:"C",data:[...Se]}),ue=Se[4],xe=Se[5],Me=Se[2],Re=Se[3];break;case"L":le.push({key:"L",data:[...Se]}),[ue,xe]=Se;break;case"H":ue=Se[0],le.push({key:"L",data:[ue,xe]});break;case"V":xe=Se[0],le.push({key:"L",data:[ue,xe]});break;case"S":{let Be=0,_e=0;ye==="C"||ye==="S"?(Be=ue+(ue-Me),_e=xe+(xe-Re)):(Be=ue,_e=xe),le.push({key:"C",data:[Be,_e,...Se]}),Me=Se[0],Re=Se[1],ue=Se[2],xe=Se[3];break}case"T":{const[Be,_e]=Se;let ze=0,Ve=0;ye==="Q"||ye==="T"?(ze=ue+(ue-Me),Ve=xe+(xe-Re)):(ze=ue,Ve=xe);const ut=ue+2*(ze-ue)/3,Ie=xe+2*(Ve-xe)/3,ot=Be+2*(ze-Be)/3,Ye=_e+2*(Ve-_e)/3;le.push({key:"C",data:[ut,Ie,ot,Ye,Be,_e]}),Me=ze,Re=Ve,ue=Be,xe=_e;break}case"Q":{const[Be,_e,ze,Ve]=Se,ut=ue+2*(Be-ue)/3,Ie=xe+2*(_e-xe)/3,ot=ze+2*(Be-ze)/3,Ye=Ve+2*(_e-Ve)/3;le.push({key:"C",data:[ut,Ie,ot,Ye,ze,Ve]}),Me=Be,Re=_e,ue=ze,xe=Ve;break}case"A":{const Be=Math.abs(Se[0]),_e=Math.abs(Se[1]),ze=Se[2],Ve=Se[3],ut=Se[4],Ie=Se[5],ot=Se[6];Be===0||_e===0?(le.push({key:"C",data:[ue,xe,Ie,ot,Ie,ot]}),ue=Ie,xe=ot):(ue!==Ie||xe!==ot)&&(Q(ue,xe,Ie,ot,Be,_e,ze,Ve,ut).forEach(function(Ye){le.push({key:"C",data:Ye})}),ue=Ie,xe=ot);break}case"Z":le.push({key:"Z",data:[]}),ue=Pe,xe=Ne}ye=We}return le}function ee(be,le,ye){return[be*Math.cos(ye)-le*Math.sin(ye),be*Math.sin(ye)+le*Math.cos(ye)]}function Q(be,le,ye,ue,xe,Pe,Ne,Me,Re,We){const Se=(Be=Ne,Math.PI*Be/180);var Be;let _e=[],ze=0,Ve=0,ut=0,Ie=0;if(We)[ze,Ve,ut,Ie]=We;else{[be,le]=ee(be,le,-Se),[ye,ue]=ee(ye,ue,-Se);const et=(be-ye)/2,st=(le-ue)/2;let ht=et*et/(xe*xe)+st*st/(Pe*Pe);ht>1&&(ht=Math.sqrt(ht),xe*=ht,Pe*=ht);const _t=xe*xe,Zt=Pe*Pe,Yt=_t*Zt-_t*st*st-Zt*et*et,bn=_t*st*st+Zt*et*et,Wt=(Me===Re?-1:1)*Math.sqrt(Math.abs(Yt/bn));ut=Wt*xe*st/Pe+(be+ye)/2,Ie=Wt*-Pe*et/xe+(le+ue)/2,ze=Math.asin(parseFloat(((le-Ie)/Pe).toFixed(9))),Ve=Math.asin(parseFloat(((ue-Ie)/Pe).toFixed(9))),be<ut&&(ze=Math.PI-ze),ye<ut&&(Ve=Math.PI-Ve),ze<0&&(ze=2*Math.PI+ze),Ve<0&&(Ve=2*Math.PI+Ve),Re&&ze>Ve&&(ze-=2*Math.PI),!Re&&Ve>ze&&(Ve-=2*Math.PI)}let ot=Ve-ze;if(Math.abs(ot)>120*Math.PI/180){const et=Ve,st=ye,ht=ue;Ve=Re&&Ve>ze?ze+120*Math.PI/180*1:ze+120*Math.PI/180*-1,_e=Q(ye=ut+xe*Math.cos(Ve),ue=Ie+Pe*Math.sin(Ve),st,ht,xe,Pe,Ne,0,Re,[Ve,et,ut,Ie])}ot=Ve-ze;const Ye=Math.cos(ze),Ke=Math.sin(ze),tt=Math.cos(Ve),pt=Math.sin(Ve),St=Math.tan(ot/4),Kt=4/3*xe*St,sn=4/3*Pe*St,nn=[be,le],Cn=[be+Kt*Ke,le-sn*Ye],vn=[ye+Kt*pt,ue-sn*tt],Fe=[ye,ue];if(Cn[0]=2*nn[0]-Cn[0],Cn[1]=2*nn[1]-Cn[1],We)return[Cn,vn,Fe].concat(_e);{_e=[Cn,vn,Fe].concat(_e);const et=[];for(let st=0;st<_e.length;st+=3){const ht=ee(_e[st][0],_e[st][1],Se),_t=ee(_e[st+1][0],_e[st+1][1],Se),Zt=ee(_e[st+2][0],_e[st+2][1],Se);et.push([ht[0],ht[1],_t[0],_t[1],Zt[0],Zt[1]])}return et}}const pe={randOffset:function(be,le){return F(be,le)},randOffsetWithRange:function(be,le,ye){return W(be,le,ye)},ellipse:function(be,le,ye,ue,xe){const Pe=B(ye,ue,xe);return H(be,le,xe,Pe).opset},doubleLineOps:function(be,le,ye,ue,xe){return z(be,le,ye,ue,xe,!0)}};function ie(be,le,ye,ue,xe){return{type:"path",ops:z(be,le,ye,ue,xe)}}function te(be,le,ye){const ue=(be||[]).length;if(ue>2){const xe=[];for(let Pe=0;Pe<ue-1;Pe++)xe.push(...z(be[Pe][0],be[Pe][1],be[Pe+1][0],be[Pe+1][1],ye));return le&&xe.push(...z(be[ue-1][0],be[ue-1][1],be[0][0],be[0][1],ye)),{type:"path",ops:xe}}return ue===2?ie(be[0][0],be[0][1],be[1][0],be[1][1],ye):{type:"path",ops:[]}}function Z(be,le,ye,ue,xe){return function(Pe,Ne){return te(Pe,!0,Ne)}([[be,le],[be+ye,le],[be+ye,le+ue],[be,le+ue]],xe)}function D(be,le){let ye=fe(be,1*(1+.2*le.roughness),le);if(!le.disableMultiStroke){const ue=fe(be,1.5*(1+.22*le.roughness),function(xe){const Pe=Object.assign({},xe);return Pe.randomizer=void 0,xe.seed&&(Pe.seed=xe.seed+1),Pe}(le));ye=ye.concat(ue)}return{type:"path",ops:ye}}function B(be,le,ye){const ue=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(be/2,2)+Math.pow(le/2,2))/2)),xe=Math.ceil(Math.max(ye.curveStepCount,ye.curveStepCount/Math.sqrt(200)*ue)),Pe=2*Math.PI/xe;let Ne=Math.abs(be/2),Me=Math.abs(le/2);const Re=1-ye.curveFitting;return Ne+=F(Ne*Re,ye),Me+=F(Me*Re,ye),{increment:Pe,rx:Ne,ry:Me}}function H(be,le,ye,ue){const[xe,Pe]=U(ue.increment,be,le,ue.rx,ue.ry,1,ue.increment*W(.1,W(.4,1,ye),ye),ye);let Ne=ce(xe,null,ye);if(!ye.disableMultiStroke&&ye.roughness!==0){const[Me]=U(ue.increment,be,le,ue.rx,ue.ry,1.5,0,ye),Re=ce(Me,null,ye);Ne=Ne.concat(Re)}return{estimatedPoints:Pe,opset:{type:"path",ops:Ne}}}function V(be,le,ye,ue,xe,Pe,Ne,Me,Re){const We=be,Se=le;let Be=Math.abs(ye/2),_e=Math.abs(ue/2);Be+=F(.01*Be,Re),_e+=F(.01*_e,Re);let ze=xe,Ve=Pe;for(;ze<0;)ze+=2*Math.PI,Ve+=2*Math.PI;Ve-ze>2*Math.PI&&(ze=0,Ve=2*Math.PI);const ut=2*Math.PI/Re.curveStepCount,Ie=Math.min(ut/2,(Ve-ze)/2),ot=ve(Ie,We,Se,Be,_e,ze,Ve,1,Re);if(!Re.disableMultiStroke){const Ye=ve(Ie,We,Se,Be,_e,ze,Ve,1.5,Re);ot.push(...Ye)}return Ne&&(Me?ot.push(...z(We,Se,We+Be*Math.cos(ze),Se+_e*Math.sin(ze),Re),...z(We,Se,We+Be*Math.cos(Ve),Se+_e*Math.sin(Ve),Re)):ot.push({op:"lineTo",data:[We,Se]},{op:"lineTo",data:[We+Be*Math.cos(ze),Se+_e*Math.sin(ze)]})),{type:"path",ops:ot}}function R(be,le){const ye=[];for(const ue of be)if(ue.length){const xe=le.maxRandomnessOffset||0,Pe=ue.length;if(Pe>2){ye.push({op:"move",data:[ue[0][0]+F(xe,le),ue[0][1]+F(xe,le)]});for(let Ne=1;Ne<Pe;Ne++)ye.push({op:"lineTo",data:[ue[Ne][0]+F(xe,le),ue[Ne][1]+F(xe,le)]})}}return{type:"fillPath",ops:ye}}function Y(be,le){return function(ye,ue){let xe=ye.fillStyle||"hachure";if(!C[xe])switch(xe){case"zigzag":C[xe]||(C[xe]=new w(ue));break;case"cross-hatch":C[xe]||(C[xe]=new _(ue));break;case"dots":C[xe]||(C[xe]=new k(ue));break;case"dashed":C[xe]||(C[xe]=new y(ue));break;case"zigzag-line":C[xe]||(C[xe]=new S(ue));break;default:xe="hachure",C[xe]||(C[xe]=new v(ue))}return C[xe]}(le,pe).fillPolygons(be,le)}function E(be){return be.randomizer||(be.randomizer=new I.k(be.seed||0)),be.randomizer.next()}function W(be,le,ye,ue=1){return ye.roughness*ue*(E(ye)*(le-be)+be)}function F(be,le,ye=1){return W(-be,be,le,ye)}function z(be,le,ye,ue,xe,Pe=!1){const Ne=Pe?xe.disableMultiStrokeFill:xe.disableMultiStroke,Me=q(be,le,ye,ue,xe,!0,!1);if(Ne)return Me;const Re=q(be,le,ye,ue,xe,!0,!0);return Me.concat(Re)}function q(be,le,ye,ue,xe,Pe,Ne){const Me=Math.pow(be-ye,2)+Math.pow(le-ue,2),Re=Math.sqrt(Me);let We=1;We=Re<200?1:Re>500?.4:-.0016668*Re+1.233334;let Se=xe.maxRandomnessOffset||0;Se*Se*100>Me&&(Se=Re/10);const Be=Se/2,_e=.2+.2*E(xe);let ze=xe.bowing*xe.maxRandomnessOffset*(ue-le)/200,Ve=xe.bowing*xe.maxRandomnessOffset*(be-ye)/200;ze=F(ze,xe,We),Ve=F(Ve,xe,We);const ut=[],Ie=()=>F(Be,xe,We),ot=()=>F(Se,xe,We),Ye=xe.preserveVertices;return Pe&&(Ne?ut.push({op:"move",data:[be+(Ye?0:Ie()),le+(Ye?0:Ie())]}):ut.push({op:"move",data:[be+(Ye?0:F(Se,xe,We)),le+(Ye?0:F(Se,xe,We))]})),Ne?ut.push({op:"bcurveTo",data:[ze+be+(ye-be)*_e+Ie(),Ve+le+(ue-le)*_e+Ie(),ze+be+2*(ye-be)*_e+Ie(),Ve+le+2*(ue-le)*_e+Ie(),ye+(Ye?0:Ie()),ue+(Ye?0:Ie())]}):ut.push({op:"bcurveTo",data:[ze+be+(ye-be)*_e+ot(),Ve+le+(ue-le)*_e+ot(),ze+be+2*(ye-be)*_e+ot(),Ve+le+2*(ue-le)*_e+ot(),ye+(Ye?0:ot()),ue+(Ye?0:ot())]}),ut}function fe(be,le,ye){const ue=[];ue.push([be[0][0]+F(le,ye),be[0][1]+F(le,ye)]),ue.push([be[0][0]+F(le,ye),be[0][1]+F(le,ye)]);for(let xe=1;xe<be.length;xe++)ue.push([be[xe][0]+F(le,ye),be[xe][1]+F(le,ye)]),xe===be.length-1&&ue.push([be[xe][0]+F(le,ye),be[xe][1]+F(le,ye)]);return ce(ue,null,ye)}function ce(be,le,ye){const ue=be.length,xe=[];if(ue>3){const Pe=[],Ne=1-ye.curveTightness;xe.push({op:"move",data:[be[1][0],be[1][1]]});for(let Me=1;Me+2<ue;Me++){const Re=be[Me];Pe[0]=[Re[0],Re[1]],Pe[1]=[Re[0]+(Ne*be[Me+1][0]-Ne*be[Me-1][0])/6,Re[1]+(Ne*be[Me+1][1]-Ne*be[Me-1][1])/6],Pe[2]=[be[Me+1][0]+(Ne*be[Me][0]-Ne*be[Me+2][0])/6,be[Me+1][1]+(Ne*be[Me][1]-Ne*be[Me+2][1])/6],Pe[3]=[be[Me+1][0],be[Me+1][1]],xe.push({op:"bcurveTo",data:[Pe[1][0],Pe[1][1],Pe[2][0],Pe[2][1],Pe[3][0],Pe[3][1]]})}if(le&&le.length===2){const Me=ye.maxRandomnessOffset;xe.push({op:"lineTo",data:[le[0]+F(Me,ye),le[1]+F(Me,ye)]})}}else ue===3?(xe.push({op:"move",data:[be[1][0],be[1][1]]}),xe.push({op:"bcurveTo",data:[be[1][0],be[1][1],be[2][0],be[2][1],be[2][0],be[2][1]]})):ue===2&&xe.push(...z(be[0][0],be[0][1],be[1][0],be[1][1],ye));return xe}function U(be,le,ye,ue,xe,Pe,Ne,Me){const Re=[],We=[];if(Me.roughness===0){be/=4,We.push([le+ue*Math.cos(-be),ye+xe*Math.sin(-be)]);for(let Se=0;Se<=2*Math.PI;Se+=be){const Be=[le+ue*Math.cos(Se),ye+xe*Math.sin(Se)];Re.push(Be),We.push(Be)}We.push([le+ue*Math.cos(0),ye+xe*Math.sin(0)]),We.push([le+ue*Math.cos(be),ye+xe*Math.sin(be)])}else{const Se=F(.5,Me)-Math.PI/2;We.push([F(Pe,Me)+le+.9*ue*Math.cos(Se-be),F(Pe,Me)+ye+.9*xe*Math.sin(Se-be)]);const Be=2*Math.PI+Se-.01;for(let _e=Se;_e<Be;_e+=be){const ze=[F(Pe,Me)+le+ue*Math.cos(_e),F(Pe,Me)+ye+xe*Math.sin(_e)];Re.push(ze),We.push(ze)}We.push([F(Pe,Me)+le+ue*Math.cos(Se+2*Math.PI+.5*Ne),F(Pe,Me)+ye+xe*Math.sin(Se+2*Math.PI+.5*Ne)]),We.push([F(Pe,Me)+le+.98*ue*Math.cos(Se+Ne),F(Pe,Me)+ye+.98*xe*Math.sin(Se+Ne)]),We.push([F(Pe,Me)+le+.9*ue*Math.cos(Se+.5*Ne),F(Pe,Me)+ye+.9*xe*Math.sin(Se+.5*Ne)])}return[We,Re]}function ve(be,le,ye,ue,xe,Pe,Ne,Me,Re){const We=Pe+F(.1,Re),Se=[];Se.push([F(Me,Re)+le+.9*ue*Math.cos(We-be),F(Me,Re)+ye+.9*xe*Math.sin(We-be)]);for(let Be=We;Be<=Ne;Be+=be)Se.push([F(Me,Re)+le+ue*Math.cos(Be),F(Me,Re)+ye+xe*Math.sin(Be)]);return Se.push([le+ue*Math.cos(Ne),ye+xe*Math.sin(Ne)]),Se.push([le+ue*Math.cos(Ne),ye+xe*Math.sin(Ne)]),ce(Se,null,Re)}function oe(be,le,ye,ue,xe,Pe,Ne,Me){const Re=[],We=[Me.maxRandomnessOffset||1,(Me.maxRandomnessOffset||1)+.3];let Se=[0,0];const Be=Me.disableMultiStroke?1:2,_e=Me.preserveVertices;for(let ze=0;ze<Be;ze++)ze===0?Re.push({op:"move",data:[Ne[0],Ne[1]]}):Re.push({op:"move",data:[Ne[0]+(_e?0:F(We[0],Me)),Ne[1]+(_e?0:F(We[0],Me))]}),Se=_e?[xe,Pe]:[xe+F(We[ze],Me),Pe+F(We[ze],Me)],Re.push({op:"bcurveTo",data:[be+F(We[ze],Me),le+F(We[ze],Me),ye+F(We[ze],Me),ue+F(We[ze],Me),Se[0],Se[1]]});return Re}function re(be){return[...be]}var ae=c(3190);const me="none";class he{constructor(le){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=le||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return(0,I.W)()}_o(le){return le?Object.assign({},this.defaultOptions,le):this.defaultOptions}_d(le,ye,ue){return{shape:le,sets:ye||[],options:ue||this.defaultOptions}}line(le,ye,ue,xe,Pe){const Ne=this._o(Pe);return this._d("line",[ie(le,ye,ue,xe,Ne)],Ne)}rectangle(le,ye,ue,xe,Pe){const Ne=this._o(Pe),Me=[],Re=Z(le,ye,ue,xe,Ne);if(Ne.fill){const We=[[le,ye],[le+ue,ye],[le+ue,ye+xe],[le,ye+xe]];Ne.fillStyle==="solid"?Me.push(R([We],Ne)):Me.push(Y([We],Ne))}return Ne.stroke!==me&&Me.push(Re),this._d("rectangle",Me,Ne)}ellipse(le,ye,ue,xe,Pe){const Ne=this._o(Pe),Me=[],Re=B(ue,xe,Ne),We=H(le,ye,Ne,Re);if(Ne.fill)if(Ne.fillStyle==="solid"){const Se=H(le,ye,Ne,Re).opset;Se.type="fillPath",Me.push(Se)}else Me.push(Y([We.estimatedPoints],Ne));return Ne.stroke!==me&&Me.push(We.opset),this._d("ellipse",Me,Ne)}circle(le,ye,ue,xe){const Pe=this.ellipse(le,ye,ue,ue,xe);return Pe.shape="circle",Pe}linearPath(le,ye){const ue=this._o(ye);return this._d("linearPath",[te(le,!1,ue)],ue)}arc(le,ye,ue,xe,Pe,Ne,Me=!1,Re){const We=this._o(Re),Se=[],Be=V(le,ye,ue,xe,Pe,Ne,Me,!0,We);if(Me&&We.fill)if(We.fillStyle==="solid"){const _e=Object.assign({},We);_e.disableMultiStroke=!0;const ze=V(le,ye,ue,xe,Pe,Ne,!0,!1,_e);ze.type="fillPath",Se.push(ze)}else Se.push(function(_e,ze,Ve,ut,Ie,ot,Ye){const Ke=_e,tt=ze;let pt=Math.abs(Ve/2),St=Math.abs(ut/2);pt+=F(.01*pt,Ye),St+=F(.01*St,Ye);let Kt=Ie,sn=ot;for(;Kt<0;)Kt+=2*Math.PI,sn+=2*Math.PI;sn-Kt>2*Math.PI&&(Kt=0,sn=2*Math.PI);const nn=(sn-Kt)/Ye.curveStepCount,Cn=[];for(let vn=Kt;vn<=sn;vn+=nn)Cn.push([Ke+pt*Math.cos(vn),tt+St*Math.sin(vn)]);return Cn.push([Ke+pt*Math.cos(sn),tt+St*Math.sin(sn)]),Cn.push([Ke,tt]),Y([Cn],Ye)}(le,ye,ue,xe,Pe,Ne,We));return We.stroke!==me&&Se.push(Be),this._d("arc",Se,We)}curve(le,ye){const ue=this._o(ye),xe=[],Pe=D(le,ue);if(ue.fill&&ue.fill!==me&&le.length>=3){const Ne=function(Re,We=0){const Se=Re.length;if(Se<3)throw new Error("A curve must have at least three points.");const Be=[];if(Se===3)Be.push(re(Re[0]),re(Re[1]),re(Re[2]),re(Re[2]));else{const _e=[];_e.push(Re[0],Re[0]);for(let ut=1;ut<Re.length;ut++)_e.push(Re[ut]),ut===Re.length-1&&_e.push(Re[ut]);const ze=[],Ve=1-We;Be.push(re(_e[0]));for(let ut=1;ut+2<_e.length;ut++){const Ie=_e[ut];ze[0]=[Ie[0],Ie[1]],ze[1]=[Ie[0]+(Ve*_e[ut+1][0]-Ve*_e[ut-1][0])/6,Ie[1]+(Ve*_e[ut+1][1]-Ve*_e[ut-1][1])/6],ze[2]=[_e[ut+1][0]+(Ve*_e[ut][0]-Ve*_e[ut+2][0])/6,_e[ut+1][1]+(Ve*_e[ut][1]-Ve*_e[ut+2][1])/6],ze[3]=[_e[ut+1][0],_e[ut+1][1]],Be.push(ze[1],ze[2],ze[3])}}return Be}(le),Me=(0,ae.s)(Ne,10,(1+ue.roughness)/2);ue.fillStyle==="solid"?xe.push(R([Me],ue)):xe.push(Y([Me],ue))}return ue.stroke!==me&&xe.push(Pe),this._d("curve",xe,ue)}polygon(le,ye){const ue=this._o(ye),xe=[],Pe=te(le,!0,ue);return ue.fill&&(ue.fillStyle==="solid"?xe.push(R([le],ue)):xe.push(Y([le],ue))),ue.stroke!==me&&xe.push(Pe),this._d("polygon",xe,ue)}path(le,ye){const ue=this._o(ye),xe=[];if(!le)return this._d("path",xe,ue);le=(le||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const Pe=ue.fill&&ue.fill!=="transparent"&&ue.fill!==me,Ne=ue.stroke!==me,Me=!!(ue.simplification&&ue.simplification<1),Re=function(We,Se,Be){const _e=$(j(L(We))),ze=[];let Ve=[],ut=[0,0],Ie=[];const ot=()=>{Ie.length>=4&&Ve.push(...(0,ae.s)(Ie,Se)),Ie=[]},Ye=()=>{ot(),Ve.length&&(ze.push(Ve),Ve=[])};for(const{key:tt,data:pt}of _e)switch(tt){case"M":Ye(),ut=[pt[0],pt[1]],Ve.push(ut);break;case"L":ot(),Ve.push([pt[0],pt[1]]);break;case"C":if(!Ie.length){const St=Ve.length?Ve[Ve.length-1]:ut;Ie.push([St[0],St[1]])}Ie.push([pt[0],pt[1]]),Ie.push([pt[2],pt[3]]),Ie.push([pt[4],pt[5]]);break;case"Z":ot(),Ve.push([ut[0],ut[1]])}if(Ye(),!Be)return ze;const Ke=[];for(const tt of ze){const pt=(0,ae.o)(tt,Be);pt.length&&Ke.push(pt)}return Ke}(le,1,Me?4-4*ue.simplification:(1+ue.roughness)/2);return Pe&&(ue.fillStyle==="solid"?xe.push(R(Re,ue)):xe.push(Y(Re,ue))),Ne&&(Me?Re.forEach(We=>{xe.push(te(We,!1,ue))}):xe.push(function(We,Se){const Be=$(j(L(We))),_e=[];let ze=[0,0],Ve=[0,0];for(const{key:ut,data:Ie}of Be)switch(ut){case"M":{const ot=1*(Se.maxRandomnessOffset||0),Ye=Se.preserveVertices;_e.push({op:"move",data:Ie.map(Ke=>Ke+(Ye?0:F(ot,Se)))}),Ve=[Ie[0],Ie[1]],ze=[Ie[0],Ie[1]];break}case"L":_e.push(...z(Ve[0],Ve[1],Ie[0],Ie[1],Se)),Ve=[Ie[0],Ie[1]];break;case"C":{const[ot,Ye,Ke,tt,pt,St]=Ie;_e.push(...oe(ot,Ye,Ke,tt,pt,St,Ve,Se)),Ve=[pt,St];break}case"Z":_e.push(...z(Ve[0],Ve[1],ze[0],ze[1],Se)),Ve=[ze[0],ze[1]]}return{type:"path",ops:_e}}(le,ue))),this._d("path",xe,ue)}opsToPath(le,ye){let ue="";for(const xe of le.ops){const Pe=typeof ye=="number"&&ye>=0?xe.data.map(Ne=>+Ne.toFixed(ye)):xe.data;switch(xe.op){case"move":ue+=`M${Pe[0]} ${Pe[1]} `;break;case"bcurveTo":ue+=`C${Pe[0]} ${Pe[1]}, ${Pe[2]} ${Pe[3]}, ${Pe[4]} ${Pe[5]} `;break;case"lineTo":ue+=`L${Pe[0]} ${Pe[1]} `}}return ue.trim()}toPaths(le){const ye=le.sets||[],ue=le.options||this.defaultOptions,xe=[];for(const Pe of ye){let Ne=null;switch(Pe.type){case"path":Ne={d:this.opsToPath(Pe),stroke:ue.stroke,strokeWidth:ue.strokeWidth,fill:me};break;case"fillPath":Ne={d:this.opsToPath(Pe),stroke:me,strokeWidth:0,fill:ue.fill||me};break;case"fillSketch":Ne=this.fillSketch(Pe,ue)}Ne&&xe.push(Ne)}return xe}fillSketch(le,ye){let ue=ye.fillWeight;return ue<0&&(ue=ye.strokeWidth/2),{d:this.opsToPath(le),stroke:ye.fill||me,strokeWidth:ue,fill:me}}}class se{constructor(le,ye){this.canvas=le,this.ctx=this.canvas.getContext("2d"),this.gen=new he(ye)}draw(le){const ye=le.sets||[],ue=le.options||this.getDefaultOptions(),xe=this.ctx,Pe=le.options.fixedDecimalPlaceDigits;for(const Ne of ye)switch(Ne.type){case"path":xe.save(),xe.strokeStyle=ue.stroke==="none"?"transparent":ue.stroke,xe.lineWidth=ue.strokeWidth,ue.strokeLineDash&&xe.setLineDash(ue.strokeLineDash),ue.strokeLineDashOffset&&(xe.lineDashOffset=ue.strokeLineDashOffset),this._drawToContext(xe,Ne,Pe),xe.restore();break;case"fillPath":{xe.save(),xe.fillStyle=ue.fill||"";const Me=le.shape==="curve"||le.shape==="polygon"||le.shape==="path"?"evenodd":"nonzero";this._drawToContext(xe,Ne,Pe,Me),xe.restore();break}case"fillSketch":this.fillSketch(xe,Ne,ue)}}fillSketch(le,ye,ue){let xe=ue.fillWeight;xe<0&&(xe=ue.strokeWidth/2),le.save(),ue.fillLineDash&&le.setLineDash(ue.fillLineDash),ue.fillLineDashOffset&&(le.lineDashOffset=ue.fillLineDashOffset),le.strokeStyle=ue.fill||"",le.lineWidth=xe,this._drawToContext(le,ye,ue.fixedDecimalPlaceDigits),le.restore()}_drawToContext(le,ye,ue,xe="nonzero"){le.beginPath();for(const Pe of ye.ops){const Ne=typeof ue=="number"&&ue>=0?Pe.data.map(Me=>+Me.toFixed(ue)):Pe.data;switch(Pe.op){case"move":le.moveTo(Ne[0],Ne[1]);break;case"bcurveTo":le.bezierCurveTo(Ne[0],Ne[1],Ne[2],Ne[3],Ne[4],Ne[5]);break;case"lineTo":le.lineTo(Ne[0],Ne[1])}}ye.type==="fillPath"?le.fill(xe):le.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(le,ye,ue,xe,Pe){const Ne=this.gen.line(le,ye,ue,xe,Pe);return this.draw(Ne),Ne}rectangle(le,ye,ue,xe,Pe){const Ne=this.gen.rectangle(le,ye,ue,xe,Pe);return this.draw(Ne),Ne}ellipse(le,ye,ue,xe,Pe){const Ne=this.gen.ellipse(le,ye,ue,xe,Pe);return this.draw(Ne),Ne}circle(le,ye,ue,xe){const Pe=this.gen.circle(le,ye,ue,xe);return this.draw(Pe),Pe}linearPath(le,ye){const ue=this.gen.linearPath(le,ye);return this.draw(ue),ue}polygon(le,ye){const ue=this.gen.polygon(le,ye);return this.draw(ue),ue}arc(le,ye,ue,xe,Pe,Ne,Me=!1,Re){const We=this.gen.arc(le,ye,ue,xe,Pe,Ne,Me,Re);return this.draw(We),We}curve(le,ye){const ue=this.gen.curve(le,ye);return this.draw(ue),ue}path(le,ye){const ue=this.gen.path(le,ye);return this.draw(ue),ue}}const ge="http://www.w3.org/2000/svg";class X{constructor(le,ye){this.svg=le,this.gen=new he(ye)}draw(le){const ye=le.sets||[],ue=le.options||this.getDefaultOptions(),xe=this.svg.ownerDocument||window.document,Pe=xe.createElementNS(ge,"g"),Ne=le.options.fixedDecimalPlaceDigits;for(const Me of ye){let Re=null;switch(Me.type){case"path":Re=xe.createElementNS(ge,"path"),Re.setAttribute("d",this.opsToPath(Me,Ne)),Re.setAttribute("stroke",ue.stroke),Re.setAttribute("stroke-width",ue.strokeWidth+""),Re.setAttribute("fill","none"),ue.strokeLineDash&&Re.setAttribute("stroke-dasharray",ue.strokeLineDash.join(" ").trim()),ue.strokeLineDashOffset&&Re.setAttribute("stroke-dashoffset",`${ue.strokeLineDashOffset}`);break;case"fillPath":Re=xe.createElementNS(ge,"path"),Re.setAttribute("d",this.opsToPath(Me,Ne)),Re.setAttribute("stroke","none"),Re.setAttribute("stroke-width","0"),Re.setAttribute("fill",ue.fill||""),le.shape!=="curve"&&le.shape!=="polygon"||Re.setAttribute("fill-rule","evenodd");break;case"fillSketch":Re=this.fillSketch(xe,Me,ue)}Re&&Pe.appendChild(Re)}return Pe}fillSketch(le,ye,ue){let xe=ue.fillWeight;xe<0&&(xe=ue.strokeWidth/2);const Pe=le.createElementNS(ge,"path");return Pe.setAttribute("d",this.opsToPath(ye,ue.fixedDecimalPlaceDigits)),Pe.setAttribute("stroke",ue.fill||""),Pe.setAttribute("stroke-width",xe+""),Pe.setAttribute("fill","none"),ue.fillLineDash&&Pe.setAttribute("stroke-dasharray",ue.fillLineDash.join(" ").trim()),ue.fillLineDashOffset&&Pe.setAttribute("stroke-dashoffset",`${ue.fillLineDashOffset}`),Pe}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(le,ye){return this.gen.opsToPath(le,ye)}line(le,ye,ue,xe,Pe){const Ne=this.gen.line(le,ye,ue,xe,Pe);return this.draw(Ne)}rectangle(le,ye,ue,xe,Pe){const Ne=this.gen.rectangle(le,ye,ue,xe,Pe);return this.draw(Ne)}ellipse(le,ye,ue,xe,Pe){const Ne=this.gen.ellipse(le,ye,ue,xe,Pe);return this.draw(Ne)}circle(le,ye,ue,xe){const Pe=this.gen.circle(le,ye,ue,xe);return this.draw(Pe)}linearPath(le,ye){const ue=this.gen.linearPath(le,ye);return this.draw(ue)}polygon(le,ye){const ue=this.gen.polygon(le,ye);return this.draw(ue)}arc(le,ye,ue,xe,Pe,Ne,Me=!1,Re){const We=this.gen.arc(le,ye,ue,xe,Pe,Ne,Me,Re);return this.draw(We)}curve(le,ye){const ue=this.gen.curve(le,ye);return this.draw(ue)}path(le,ye){const ue=this.gen.path(le,ye);return this.draw(ue)}}var we={canvas:(be,le)=>new se(be,le),svg:(be,le)=>new X(be,le),generator:be=>new he(be),newSeed:()=>he.newSeed()}},201:function(f){f.exports=function(h,c,g){var m=[],b=h.length;if(b===0)return m;var v=c<0?Math.max(0,c+b):c||0;for(g!==void 0&&(b=g<0?g+b:g);b-- >v;)m[b-v]=h[b];return m}},5766:function(f,h,c){var g=c(9787),m=typeof Object.is=="function"?Object.is:function(S,C){return S===C&&(S!==0||1/S==1/C)||S!=S&&C!=C},b=g.useState,v=g.useEffect,w=g.useLayoutEffect,_=g.useDebugValue;function k(S){var C=S.getSnapshot;S=S.value;try{var I=C();return!m(S,I)}catch{return!0}}var y=typeof window>"u"||window.document===void 0||window.document.createElement===void 0?function(S,C){return C()}:function(S,C){var I=C(),A=b({inst:{value:I,getSnapshot:C}}),T=A[0].inst,L=A[1];return w(function(){T.value=I,T.getSnapshot=C,k(T)&&L({inst:T})},[S,I,C]),v(function(){return k(T)&&L({inst:T}),S(function(){k(T)&&L({inst:T})})},[S]),_(I),I};h.useSyncExternalStore=g.useSyncExternalStore!==void 0?g.useSyncExternalStore:y},9496:function(f,h,c){var g=c(9787),m=c(8858),b=typeof Object.is=="function"?Object.is:function(S,C){return S===C&&(S!==0||1/S==1/C)||S!=S&&C!=C},v=m.useSyncExternalStore,w=g.useRef,_=g.useEffect,k=g.useMemo,y=g.useDebugValue;h.useSyncExternalStoreWithSelector=function(S,C,I,A,T){var L=w(null);if(L.current===null){var j={hasValue:!1,value:null};L.current=j}else j=L.current;L=k(function(){function ee(Z){if(!ie){if(ie=!0,Q=Z,Z=A(Z),T!==void 0&&j.hasValue){var D=j.value;if(T(D,Z))return pe=D}return pe=Z}if(D=pe,b(Q,Z))return D;var B=A(Z);return T!==void 0&&T(D,B)?D:(Q=Z,pe=B)}var Q,pe,ie=!1,te=I===void 0?null:I;return[function(){return ee(C())},te===null?void 0:function(){return ee(te())}]},[C,I,A,T]);var $=v(S,L[0],L[1]);return _(function(){j.hasValue=!0,j.value=$},[$]),y($),$}},8858:function(f,h,c){f.exports=c(5766)},4752:function(f,h,c){f.exports=c(9496)},5422:function(f,h,c){var g=c(487),m=c.n(g),b=c(631),v=c.n(b),w=c(2052),_=c.n(w),k=c(4010),y=c.n(k),S=c(1469),C=c.n(S),I=c(9329),A=c.n(I),T=c(2044),L={};L.styleTagTransform=A(),L.setAttributes=y(),L.insert=_().bind(null,"head"),L.domAPI=v(),L.insertStyleElement=C(),m()(T.Z,L),T.Z&&T.Z.locals&&T.Z.locals},487:function(f){var h=[];function c(b){for(var v=-1,w=0;w<h.length;w++)if(h[w].identifier===b){v=w;break}return v}function g(b,v){for(var w={},_=[],k=0;k<b.length;k++){var y=b[k],S=v.base?y[0]+v.base:y[0],C=w[S]||0,I="".concat(S," ").concat(C);w[S]=C+1;var A=c(I),T={css:y[1],media:y[2],sourceMap:y[3],supports:y[4],layer:y[5]};if(A!==-1)h[A].references++,h[A].updater(T);else{var L=m(T,v);v.byIndex=k,h.splice(k,0,{identifier:I,updater:L,references:1})}_.push(I)}return _}function m(b,v){var w=v.domAPI(v);return w.update(b),function(_){if(_){if(_.css===b.css&&_.media===b.media&&_.sourceMap===b.sourceMap&&_.supports===b.supports&&_.layer===b.layer)return;w.update(b=_)}else w.remove()}}f.exports=function(b,v){var w=g(b=b||[],v=v||{});return function(_){_=_||[];for(var k=0;k<w.length;k++){var y=c(w[k]);h[y].references--}for(var S=g(_,v),C=0;C<w.length;C++){var I=c(w[C]);h[I].references===0&&(h[I].updater(),h.splice(I,1))}w=S}}},2052:function(f){var h={};f.exports=function(c,g){var m=function(b){if(h[b]===void 0){var v=document.querySelector(b);if(window.HTMLIFrameElement&&v instanceof window.HTMLIFrameElement)try{v=v.contentDocument.head}catch{v=null}h[b]=v}return h[b]}(c);if(!m)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");m.appendChild(g)}},1469:function(f){f.exports=function(h){var c=document.createElement("style");return h.setAttributes(c,h.attributes),h.insert(c,h.options),c}},4010:function(f,h,c){f.exports=function(g){var m=c.nc;m&&g.setAttribute("nonce",m)}},631:function(f){f.exports=function(h){if(typeof document>"u")return{update:function(){},remove:function(){}};var c=h.insertStyleElement(h);return{update:function(g){(function(m,b,v){var w="";v.supports&&(w+="@supports (".concat(v.supports,") {")),v.media&&(w+="@media ".concat(v.media," {"));var _=v.layer!==void 0;_&&(w+="@layer".concat(v.layer.length>0?" ".concat(v.layer):""," {")),w+=v.css,_&&(w+="}"),v.media&&(w+="}"),v.supports&&(w+="}");var k=v.sourceMap;k&&typeof btoa<"u"&&(w+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(k))))," */")),b.styleTagTransform(w,m,b.options)})(c,h,g)},remove:function(){(function(g){if(g.parentNode===null)return!1;g.parentNode.removeChild(g)})(c)}}}},9329:function(f){f.exports=function(h,c){if(c.styleSheet)c.styleSheet.cssText=h;else{for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(document.createTextNode(h))}}},940:function(f,h,c){var g={"./ar-SA.json":[7822,2091],"./az-AZ.json":[9753,4568],"./bg-BG.json":[1203,1628],"./bn-BD.json":[8525,7429],"./ca-ES.json":[510,5130],"./cs-CZ.json":[7605,6265],"./da-DK.json":[2392,1790],"./de-DE.json":[2853,3082],"./el-GR.json":[9876,1513],"./en.json":[1463],"./es-ES.json":[9952,8759],"./eu-ES.json":[5658,8081],"./fa-IR.json":[3747,5330],"./fi-FI.json":[9490,3512],"./fr-FR.json":[7830,3682],"./gl-ES.json":[5199,2943],"./he-IL.json":[1994,2312],"./hi-IN.json":[4646,9828],"./hu-HU.json":[6373,7368],"./id-ID.json":[3247,3808],"./it-IT.json":[3257,6239],"./ja-JP.json":[198,1204],"./kaa.json":[7941,663],"./kab-KAB.json":[228,9551],"./kk-KZ.json":[8972,22],"./km-KH.json":[5845,6566],"./ko-KR.json":[5266,6844],"./ku-TR.json":[4142,3031],"./lt-LT.json":[3755,8340],"./lv-LV.json":[2327,6768],"./mr-IN.json":[5297,3397],"./my-MM.json":[7704,1477],"./nb-NO.json":[1167,2359],"./nl-NL.json":[290,3024],"./nn-NO.json":[4481,3885],"./oc-FR.json":[2284,1690],"./pa-IN.json":[5383,3162],"./percentages.json":[4451],"./pl-PL.json":[3661,3674],"./pt-BR.json":[8881,3721],"./pt-PT.json":[5622,5395],"./ro-RO.json":[2013,5089],"./ru-RU.json":[2253,8124],"./si-LK.json":[5497,1302],"./sk-SK.json":[4570,8750],"./sl-SI.json":[1984,6071],"./sv-SE.json":[6006,8534],"./ta-IN.json":[3952,2404],"./th-TH.json":[2596,537],"./tr-TR.json":[7315,4977],"./uk-UA.json":[334,7759],"./vi-VN.json":[456,4e3],"./zh-CN.json":[1037,4680],"./zh-HK.json":[5334,7920],"./zh-TW.json":[931,3421]};function m(b){if(!c.o(g,b))return Promise.resolve().then(function(){var _=new Error("Cannot find module '"+b+"'");throw _.code="MODULE_NOT_FOUND",_});var v=g[b],w=v[0];return Promise.all(v.slice(1).map(c.e)).then(function(){return c.t(w,19)})}m.keys=function(){return Object.keys(g)},m.id=940,f.exports=m},9713:function(f){f.exports=function(h,c,g){return c in h?Object.defineProperty(h,c,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[c]=g,h}},6479:function(f,h,c){var g=c(7316);f.exports=function(m,b){if(m==null)return{};var v,w,_=g(m,b);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(m);for(w=0;w<k.length;w++)v=k[w],b.indexOf(v)>=0||Object.prototype.propertyIsEnumerable.call(m,v)&&(_[v]=m[v])}return _}},7316:function(f){f.exports=function(h,c){if(h==null)return{};var g,m,b={},v=Object.keys(h);for(m=0;m<v.length;m++)g=v[m],c.indexOf(g)>=0||(b[g]=h[g]);return b}},4295:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b),w=c(1667),_=c.n(w),k=new URL(c(3940),c.b),y=new URL(c(3147),c.b),S=new URL(c(8303),c.b),C=new URL(c(1273),c.b),I=new URL(c(9577),c.b),A=new URL(c(9729),c.b),T=v()(m()),L=_()(k),j=_()(y),$=_()(S),ee=_()(C),Q=_()(I),pe=_()(A);T.push([f.id,'@font-face{font-family:"Virgil";src:url('+L+');font-display:swap;font-weight:400}@font-face{font-family:"Cascadia";src:url('+j+');font-display:swap;font-weight:400}@font-face{font-family:"Assistant";src:url('+$+');font-display:swap;font-weight:400}@font-face{font-family:"Assistant";src:url('+ee+');font-display:swap;font-weight:500}@font-face{font-family:"Assistant";src:url('+Q+');font-display:swap;font-weight:600}@font-face{font-family:"Assistant";src:url('+pe+');font-display:swap;font-weight:700}@font-face{font-family:"HanziPen Remote";src:url("https://g.alicdn.com/alidocs/common-fonts/0.0.3/static/media/DFHanziPenGB-Std.otf");font-display:swap;font-weight:bold}',""]),h.Z=T},6086:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".zoom-actions,.undo-redo-buttons{background-color:var(--island-bg-color);border-radius:var(--border-radius-lg)}.zoom-button,.undo-redo-buttons button{border:1px solid var(--default-border-color) !important;border-radius:0 !important;background-color:rgba(0,0,0,0) !important;font-size:.875rem !important;width:var(--lg-button-size);height:var(--lg-button-size)}.zoom-button svg,.undo-redo-buttons button svg{width:var(--lg-icon-size) !important;height:var(--lg-icon-size) !important}.zoom-button .ToolIcon__icon,.undo-redo-buttons button .ToolIcon__icon{width:100%;height:100%}.reset-zoom-button{border-left:0 !important;border-right:0 !important;padding:0 .625rem !important;width:3.75rem !important;justify-content:center;color:var(--text-primary-color)}.zoom-out-button{border-top-left-radius:var(--border-radius-lg) !important;border-bottom-left-radius:var(--border-radius-lg) !important}:root[dir=rtl] .zoom-out-button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.zoom-out-button .ToolIcon__icon{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.zoom-in-button{border-top-right-radius:var(--border-radius-lg) !important;border-bottom-right-radius:var(--border-radius-lg) !important}:root[dir=rtl] .zoom-in-button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.zoom-in-button .ToolIcon__icon{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}.undo-redo-buttons .undo-button-container button{border-top-left-radius:var(--border-radius-lg) !important;border-bottom-left-radius:var(--border-radius-lg) !important;border-right:0 !important}:root[dir=rtl] .undo-redo-buttons .undo-button-container button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.undo-redo-buttons .undo-button-container button .ToolIcon__icon{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.undo-redo-buttons .redo-button-container button{border-top-right-radius:var(--border-radius-lg) !important;border-bottom-right-radius:var(--border-radius-lg) !important}:root[dir=rtl] .undo-redo-buttons .redo-button-container button{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.undo-redo-buttons .redo-button-container button .ToolIcon__icon{border-top-left-radius:0 !important;border-bottom-left-radius:0 !important}",""]),h.Z=v},3729:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Avatar{width:1.25rem;height:1.25rem;position:relative;border-radius:100%;outline-offset:2px;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:.75rem;font-weight:800;line-height:1}.excalidraw .Avatar-img{width:100%;height:100%;border-radius:100%}.excalidraw .Avatar::before{content:"";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;border:1px solid var(--avatar-border-color);border-radius:100%}',""]),h.Z=v},3137:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b),w=c(1667),_=c.n(w),k=new URL(c(7984),c.b),y=new URL(c(1639),c.b),S=v()(m()),C=_()(k),I=_()(y);S.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url("+C+");--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-gray-80);--icon-green-fill-color: #2b8a3e;--default-bg-color: #ffffff;--input-bg-color: #ffffff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: rgba(255, 255, 255, 0.96);--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: #ffffff;--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000000;--popup-text-inverted-color: #ffffff;--select-highlight-color: #339af0;--shadow-island: 0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702);--button-hover-bg: var(--color-gray-10);--default-border-color: var(--color-gray-30);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-gray-20);--sidebar-bg-color: #fff;--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-gray-80);--color-selection: #6965db;--color-icon-white: #ffffff;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-primary-light-darker: #d7d5ff;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-warning: #fceeca;--color-warning-dark: #f5c354;--color-warning-darker: #f3ab2c;--color-warning-darkest: #ec8b14;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-danger-dark: #db6965;--color-danger-darker: #d65550;--color-danger-darkest: #d1413c;--color-danger-text: black;--color-danger-background: #fff0f0;--color-danger-icon-background: #ffdad6;--color-danger-color: #700000;--color-danger-icon-color: #700000;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--text-primary-color);--color-warning-icon-color: var(--text-primary-color);--color-muted: var(--color-gray-30);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-100);--color-muted-background: var(--color-gray-80);--color-muted-background-darker: var(--color-gray-100);--color-promo: #e70078;--color-success: #268029;--color-success-lighter: #cafccc;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem}@media screen and (min-device-width: 1921px){.excalidraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.excalidraw.theme--dark.theme--dark-background-none{background:none}.excalidraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url("+I+");--focus-highlight-color: #228be6;--icon-fill-color: var(--color-gray-40);--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #262627;--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-bg-color: #2c2c2c;--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--text-primary-color: var(--color-gray-40);--button-hover-bg: var(--color-gray-80);--default-border-color: var(--color-gray-80);--shadow-island: 0px 13px 33px rgba(0, 0, 0, 0.07), 0px 4.13px 9.94853px rgba(0, 0, 0, 0.0456112), 0px 1.13px 4.13211px rgba(0, 0, 0, 0.035), 0px 0.769896px 1.4945px rgba(0, 0, 0, 0.0243888);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--sidebar-border-color: var(--color-gray-85);--sidebar-bg-color: #191919;--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-selection: #3530c4;--color-icon-white: var(--color-gray-90);--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-primary-light-darker: #43415e;--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-danger-dark: #672120;--color-danger-darker: #8f2625;--color-danger-darkest: #ac2b29;--color-danger-text: #fbcbcc;--color-danger-background: #fbcbcc;--color-danger-icon-background: #672120;--color-danger-color: #261919;--color-danger-icon-color: #fbcbcc;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--color-gray-80);--color-warning-icon-color: var(--color-gray-80);--color-muted: var(--color-gray-80);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-20);--color-muted-background: var(--color-gray-40);--color-muted-background-darker: var(--color-gray-20);--color-promo: #d297ff}.excalidraw .excalidraw-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color))}.excalidraw .excalidraw-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .excalidraw-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .excalidraw-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .excalidraw-button.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .excalidraw-button.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .excalidraw-button.active svg{color:var(--button-color, var(--color-primary-darker))}",""]),h.Z=S},4241:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Card{display:flex;flex-direction:column;align-items:center;max-width:290px;margin:1em;text-align:center}.excalidraw .Card .Card-icon{font-size:2.6em;display:flex;flex:0 0 auto;padding:1.4rem;border-radius:50%;background:var(--card-color);color:#fff}.excalidraw .Card .Card-icon svg{width:2.8rem;height:2.8rem}.excalidraw .Card .Card-details{font-size:.96em;min-height:90px;padding:0 1em;margin-bottom:auto}.excalidraw .Card .Card-button.ToolIcon_type_button{height:2.5rem;margin-top:1em;margin-bottom:.3em;background-color:var(--card-color)}.excalidraw .Card .Card-button.ToolIcon_type_button:hover{background-color:var(--card-color-darker)}.excalidraw .Card .Card-button.ToolIcon_type_button:active{background-color:var(--card-color-darkest)}.excalidraw .Card .Card-button.ToolIcon_type_button .ToolIcon__label{color:#fff}.excalidraw .Card .Card-button.ToolIcon_type_button .Spinner{--spinner-color: #fff}",""]),h.Z=v},6029:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Checkbox{margin:4px .3em;display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.excalidraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus){box-shadow:0 0 0 2px #4dabf7}.excalidraw .Checkbox:hover:not(.is-checked) .Checkbox-box:not(:focus) svg{display:block;opacity:.3}.excalidraw .Checkbox:active .Checkbox-box{box-shadow:0 0 2px 1px inset #1c7ed6 !important}.excalidraw .Checkbox:hover .Checkbox-box{background-color:rgba(208,235,255,.2)}.excalidraw .Checkbox.is-checked .Checkbox-box{background-color:#d0ebff}.excalidraw .Checkbox.is-checked .Checkbox-box svg{display:block}.excalidraw .Checkbox.is-checked:hover .Checkbox-box{background-color:#a5d8ff}.excalidraw .Checkbox .Checkbox-box{width:22px;height:22px;padding:0;flex:0 0 auto;margin:0 1em;display:flex;align-items:center;justify-content:center;box-shadow:0 0 0 2px #1c7ed6;background-color:rgba(0,0,0,0);border-radius:4px;color:#1c7ed6;border:0}.excalidraw .Checkbox .Checkbox-box:focus{box-shadow:0 0 0 3px #1c7ed6}.excalidraw .Checkbox .Checkbox-box svg{display:none;width:16px;height:16px;stroke-width:3px}.excalidraw .Checkbox .Checkbox-label{display:flex;align-items:center}.excalidraw .Checkbox .excalidraw-tooltip-icon{width:1em;height:1em}",""]),h.Z=v},4269:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b),w=c(1667),_=c.n(w),k=new URL(c(9669),c.b),y=v()(m()),S=_()(k);y.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .focus-visible-none:focus-visible{outline:none !important}.excalidraw .color-picker__heading{padding:0 .5rem;font-size:.75rem;text-align:left}.excalidraw .color-picker-container{display:grid;grid-template-columns:1fr 20px 1.625rem;padding:.25rem 0px;align-items:center}.excalidraw--mobile.excalidraw .color-picker-container{max-width:175px}.excalidraw .color-picker__top-picks{display:flex;justify-content:space-between}.excalidraw .color-picker__button{--radius: 0.25rem;padding:0;margin:0;width:1.35rem;height:1.35rem;border:1px solid var(--color-gray-30);border-radius:var(--radius);-webkit-filter:var(--theme-filter);filter:var(--theme-filter);background-color:var(--swatch-color);background-position:left center;position:relative;font-family:inherit;box-sizing:border-box}.excalidraw .color-picker__button:hover::after{content:"";position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;box-shadow:0 0 0 1px var(--color-gray-30);border-radius:calc(var(--radius) + 1px);-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .color-picker__button.active .color-picker__button-outline{position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;box-shadow:0 0 0 1px var(--color-primary-darkest);z-index:1;border-radius:calc(var(--radius) + 1px);-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .color-picker__button:focus-visible{outline:none}.excalidraw .color-picker__button:focus-visible::after{content:"";position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;border:3px solid var(--focus-highlight-color);border-radius:calc(var(--radius) + 1px)}.excalidraw .color-picker__button:focus-visible.active .color-picker__button-outline{display:none}.excalidraw .color-picker__button--large{--radius: 0.5rem;width:1.875rem;height:1.875rem}.excalidraw .color-picker__button.is-transparent{background-image:url('+S+")}.excalidraw .color-picker__button--no-focus-visible{border:0}.excalidraw .color-picker__button--no-focus-visible::after{display:none}.excalidraw .color-picker__button--no-focus-visible:focus-visible{outline:none !important}.excalidraw .color-picker__button.active-color{border-radius:calc(var(--radius) + 1px);width:1.625rem;height:1.625rem}.excalidraw .color-picker__button__hotkey-label{position:absolute;right:4px;bottom:4px;-webkit-filter:none;filter:none;font-size:11px}.excalidraw .color-picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}:root[dir=ltr] .excalidraw .color-picker{left:-5.5px}:root[dir=rtl] .excalidraw .color-picker{right:-5.5px}.excalidraw .color-picker-control-container{display:grid;grid-template-columns:auto 1fr;align-items:center;-webkit-column-gap:.5rem;column-gap:.5rem}.excalidraw .color-picker-control-container+.popover{position:static}.excalidraw .color-picker-popover-container{margin-top:-0.25rem}:root[dir=ltr] .excalidraw .color-picker-popover-container{margin-left:.5rem}:root[dir=rtl] .excalidraw .color-picker-popover-container{margin-left:-3rem}.excalidraw .color-picker-triangle{width:0;height:0;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--popup-bg-color);position:absolute;top:10px}:root[dir=ltr] .excalidraw .color-picker-triangle{-webkit-transform:rotate(270deg);transform:rotate(270deg);left:-14px}:root[dir=rtl] .excalidraw .color-picker-triangle{-webkit-transform:rotate(90deg);transform:rotate(90deg);right:-14px}.excalidraw .color-picker-triangle-shadow{border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,.1)}:root[dir=ltr] .excalidraw .color-picker-triangle-shadow{left:-14px}:root[dir=rtl] .excalidraw .color-picker-triangle-shadow{right:-16px}.excalidraw .color-picker-content{display:flex;flex-direction:column;gap:.75rem;outline:none}.excalidraw .color-picker-content--default{padding:.5rem;display:grid;grid-template-columns:repeat(5, 1.875rem);grid-gap:.25rem;border-radius:4px}.excalidraw .color-picker-content--default:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .color-picker-content--canvas{display:flex;flex-direction:column;padding:.25rem}.excalidraw .color-picker-content--canvas-title{color:#868e96;font-size:12px;padding:0 .25rem}.excalidraw .color-picker-content--canvas-colors{padding:.5rem 0}.excalidraw .color-picker-content--canvas-colors .color-picker-swatch{margin:0 .25rem}.excalidraw .color-picker-content .color-input-container{grid-column:1/span 5}.excalidraw .color-picker-swatch{position:relative;height:1.875rem;width:1.875rem;cursor:pointer;border-radius:4px;margin:0;box-sizing:border-box;border:1px solid #ddd;background-color:currentColor !important;-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .color-picker-swatch:focus{box-shadow:0 0 4px 1px currentColor;border-color:var(--select-highlight-color)}.excalidraw .color-picker-transparent{border-radius:4px;box-shadow:rgba(0,0,0,.1) 0 0 0 1px inset;position:absolute;top:0;right:0;bottom:0;left:0}.excalidraw .color-picker-transparent,.excalidraw .color-picker-label-swatch{background:url("+S+') left center}.excalidraw .color-picker-hash{height:var(--default-button-size);flex-shrink:0;padding:.5rem .5rem .5rem .75rem;border:1px solid var(--default-border-color);border-right:0;box-sizing:border-box;color:var(--input-label-color);display:flex;align-items:center;justify-content:center;position:relative}:root[dir=ltr] .excalidraw .color-picker-hash{border-radius:var(--border-radius-lg) 0 0 var(--border-radius-lg)}:root[dir=rtl] .excalidraw .color-picker-hash{border-radius:0 var(--border-radius-lg) var(--border-radius-lg) 0;border-right:1px solid var(--default-border-color);border-left:0}.excalidraw .color-input-container{display:flex}.excalidraw .color-input-container:focus-within{box-shadow:0 0 0 1px var(--color-primary-darkest);border-radius:var(--border-radius-lg)}.excalidraw .color-picker__input-label{display:grid;grid-template-columns:auto 1fr auto auto;gap:8px;align-items:center;border:1px solid var(--default-border-color);border-radius:8px;padding:0 12px;margin:8px;box-sizing:border-box}.excalidraw .color-picker__input-label:focus-within{box-shadow:0 0 0 1px var(--color-primary-darkest);border-radius:var(--border-radius-lg)}.excalidraw .color-picker__input-hash{padding:0 .25rem}.excalidraw .color-picker-input{box-sizing:border-box;width:100%;margin:0;font-size:.875rem;font-family:inherit;background-color:rgba(0,0,0,0);color:var(--text-primary-color);border:0;outline:none;height:var(--default-button-size);border:1px solid var(--default-border-color);border-left:0;letter-spacing:.4px;padding:.5rem;padding-left:.25rem;-webkit-appearance:none;appearance:none}:root[dir=ltr] .excalidraw .color-picker-input{border-radius:0 var(--border-radius-lg) var(--border-radius-lg) 0}:root[dir=rtl] .excalidraw .color-picker-input{border-radius:var(--border-radius-lg) 0 0 var(--border-radius-lg);border-left:1px solid var(--default-border-color);border-right:0}.excalidraw .color-picker-input:focus-visible{box-shadow:none}.excalidraw .color-picker-label-swatch-container{border:1px solid var(--default-border-color);border-radius:var(--border-radius-lg);width:var(--default-button-size);height:var(--default-button-size);box-sizing:border-box;overflow:hidden}.excalidraw .color-picker-label-swatch{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--swatch-color) !important;overflow:hidden;position:relative;-webkit-filter:var(--theme-filter);filter:var(--theme-filter);border:0 !important}.excalidraw .color-picker-label-swatch svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .color-picker-label-swatch:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .color-picker-label-swatch:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .color-picker-label-swatch.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .color-picker-label-swatch.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .color-picker-label-swatch.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .color-picker-label-swatch:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--swatch-color)}.excalidraw .color-picker-keybinding{position:absolute;bottom:2px;font-size:.7em}:root[dir=ltr] .excalidraw .color-picker-keybinding{right:2px}:root[dir=rtl] .excalidraw .color-picker-keybinding{left:2px}.excalidraw--mobile.excalidraw .color-picker-keybinding{display:none}.excalidraw .color-picker-type-canvasBackground .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementBackground .color-picker-keybinding{color:#fff}.excalidraw .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementStroke .color-picker-keybinding{color:#d4d4d4}.excalidraw.theme--dark .color-picker-type-elementBackground .color-picker-keybinding{color:#000}.excalidraw.theme--dark .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#000}',""]),h.Z=y},9393:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .confirm-dialog-buttons{display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;justify-content:flex-end}",""]),h.Z=v},6578:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .context-menu{position:relative;border-radius:4px;box-shadow:0 3px 10px rgba(0,0,0,.2);padding:0;list-style:none;-webkit-user-select:none;user-select:none;margin:-0.25rem 0 0 .125rem;padding:.5rem 0;background-color:var(--popup-secondary-bg-color);border:1px solid var(--button-gray-3);cursor:default}.excalidraw .context-menu button{color:var(--popup-text-color)}.excalidraw .context-menu-item{position:relative;width:100%;min-width:9.5rem;margin:0;padding:.25rem 1rem .25rem 1.25rem;text-align:start;border-radius:0;background-color:rgba(0,0,0,0);border:none;white-space:nowrap;font-family:inherit;display:grid;grid-template-columns:1fr .2fr;align-items:center}.excalidraw .context-menu-item.checkmark::before{position:absolute;left:6px;margin-bottom:1px;content:""}.excalidraw .context-menu-item.dangerous .context-menu-item__label{color:#f03e3e}.excalidraw .context-menu-item .context-menu-item__label{justify-self:start;-webkit-margin-end:20px;margin-inline-end:20px}.excalidraw .context-menu-item .context-menu-item__shortcut{justify-self:end;opacity:.6;font-family:inherit;font-size:.7rem}.excalidraw .context-menu-item:hover{color:var(--popup-bg-color);background-color:var(--select-highlight-color)}.excalidraw .context-menu-item:hover.dangerous{background-color:#fa5252}.excalidraw .context-menu-item:hover.dangerous .context-menu-item__label{color:var(--popup-bg-color)}.excalidraw .context-menu-item:focus{z-index:1}.excalidraw--mobile.excalidraw .context-menu-item{display:block}.excalidraw--mobile.excalidraw .context-menu-item .context-menu-item__label{-webkit-margin-end:0;margin-inline-end:0}.excalidraw--mobile.excalidraw .context-menu-item .context-menu-item__shortcut{display:none}.excalidraw .context-menu-item-separator{border:none;border-top:1px solid #adb5bd}',""]),h.Z=v},9482:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Dialog{-webkit-user-select:text;user-select:text;cursor:auto}.excalidraw .Dialog__title{margin:0;text-align:left;font-size:1.25rem;border-bottom:1px solid var(--dialog-border-color);padding:0 0 .75rem;margin-bottom:1.5rem}.excalidraw .Dialog__close{color:var(--color-gray-40);margin:0;position:absolute;top:.75rem;right:.5rem;border:0;background-color:rgba(0,0,0,0);line-height:0;cursor:pointer}.excalidraw .Dialog__close:hover{color:var(--color-gray-60)}.excalidraw .Dialog__close:active{color:var(--color-gray-40)}.excalidraw--mobile.excalidraw .Dialog__close{top:1.25rem;right:1.25rem}.excalidraw .Dialog__close svg{width:1.5rem;height:1.5rem}",""]),h.Z=v},6148:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .Dialog__action-button{position:relative;display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;align-items:center;padding:.5rem 1.5rem;border:1px solid var(--default-border-color);background-color:rgba(0,0,0,0);height:3rem;border-radius:var(--border-radius-lg);letter-spacing:.4px;color:inherit;font-family:inherit;font-size:.875rem;font-weight:600;-webkit-user-select:none;user-select:none}.excalidraw .Dialog__action-button svg{display:block;width:1rem;height:1rem}.excalidraw .Dialog__action-button--danger{background-color:var(--color-danger);border-color:var(--color-danger);color:#fff}.excalidraw .Dialog__action-button--primary{background-color:var(--color-primary);border-color:var(--color-primary);color:#fff}.excalidraw.theme--dark .Dialog__action-button--danger{color:var(--color-gray-100)}.excalidraw.theme--dark .Dialog__action-button--primary{color:var(--color-gray-100)}",""]),h.Z=v},7955:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b),w=c(1667),_=c.n(w),k=new URL(c(9669),c.b),y=v()(m()),S=_()(k);y.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .ExportDialog__preview{--preview-padding: calc(var(--space-factor) * 4);background:url("+S+") left center;text-align:center;padding:var(--preview-padding);margin-bottom:calc(var(--space-factor)*3);display:flex;justify-content:center;align-items:center}.excalidraw .ExportDialog__preview canvas{max-width:calc(100% - var(--preview-padding)*2);max-height:25rem}.excalidraw.theme--dark .ExportDialog__preview canvas{-webkit-filter:none;filter:none}.excalidraw .ExportDialog__actions{width:100%;display:flex;grid-gap:calc(var(--space-factor)*2);align-items:top;justify-content:space-between}.excalidraw--mobile.excalidraw .ExportDialog{display:flex;flex-direction:column}.excalidraw--mobile.excalidraw .ExportDialog__actions{flex-direction:column;align-items:center}.excalidraw--mobile.excalidraw .ExportDialog__actions>*{margin-bottom:calc(var(--space-factor)*3)}.excalidraw--mobile.excalidraw .ExportDialog__preview canvas{max-height:30vh}.excalidraw--mobile.excalidraw .ExportDialog__dialog,.excalidraw--mobile.excalidraw .ExportDialog__dialog .Island{height:100%;box-sizing:border-box}.excalidraw--mobile.excalidraw .ExportDialog__dialog .Island{overflow-y:auto}.excalidraw .ExportDialog--json .ExportDialog-cards{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));justify-items:center;row-gap:2em}@media(max-width: 460px){.excalidraw .ExportDialog--json .ExportDialog-cards{grid-template-columns:repeat(auto-fit, minmax(240px, 1fr))}.excalidraw .ExportDialog--json .ExportDialog-cards .Card-details{min-height:40px}}.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:1em auto;align-items:flex-start;flex-direction:column}.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName .TextInput{width:auto}.excalidraw .ExportDialog--json .ExportDialog-cards .ProjectName-label{margin:.625em 0;font-weight:bold}.excalidraw button.ExportDialog-imageExportButton{border:0;width:5rem;height:5rem;margin:0 .2em;padding:0;display:flex;align-items:center;justify-content:center;border-radius:1rem;background-color:var(--button-color);box-shadow:0 3px 5px -1px rgba(0,0,0,.28),0 6px 10px 0 rgba(0,0,0,.14);font-family:Cascadia;font-size:1.8em;color:#fff}.excalidraw button.ExportDialog-imageExportButton:hover{background-color:var(--button-color-darker)}.excalidraw button.ExportDialog-imageExportButton:active{background-color:var(--button-color-darkest);box-shadow:none}.excalidraw button.ExportDialog-imageExportButton svg{width:.9em}",""]),h.Z=y},7522:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .excalidraw-eye-dropper-container,.excalidraw .excalidraw-eye-dropper-backdrop{position:absolute;width:100%;height:100%;z-index:2;touch-action:none}.excalidraw .excalidraw-eye-dropper-container{pointer-events:none}.excalidraw .excalidraw-eye-dropper-backdrop{pointer-events:all}.excalidraw .excalidraw-eye-dropper-preview{pointer-events:none;width:3rem;height:3rem;position:fixed;z-index:999999;border-radius:1rem;border:1px solid var(--default-border-color);-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .excalidraw-eye-dropper-trigger{width:1.25rem;height:1.25rem;cursor:pointer;padding:4px;margin-right:-4px;margin-left:-2px;border-radius:.5rem;color:var(--icon-fill-color)}.excalidraw .excalidraw-eye-dropper-trigger:hover{background:var(--button-hover-bg)}.excalidraw .excalidraw-eye-dropper-trigger.selected{color:var(--color-primary);background:var(--color-primary-light)}",""]),h.Z=v},8960:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .ExcButton{--text-color: transparent;--border-color: transparent;--back-color: transparent;color:var(--text-color);background-color:var(--back-color);border-color:var(--border-color);display:flex;justify-content:center;align-items:center;flex-shrink:0;flex-wrap:nowrap;border-radius:.5rem;border-width:1px;border-style:solid;font-family:"Assistant";-webkit-user-select:none;user-select:none;transition:all 150ms ease-out}.excalidraw .ExcButton--color-primary.ExcButton--variant-filled{--text-color: var(--input-bg-color);--back-color: var(--color-primary)}.excalidraw .ExcButton--color-primary.ExcButton--variant-filled:hover{--back-color: var(--color-primary-darker)}.excalidraw .ExcButton--color-primary.ExcButton--variant-filled:active{--back-color: var(--color-primary-darkest)}.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined,.excalidraw .ExcButton--color-primary.ExcButton--variant-icon{--text-color: var(--color-primary);--border-color: var(--color-primary);--back-color: var(--input-bg-color)}.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined:hover,.excalidraw .ExcButton--color-primary.ExcButton--variant-icon:hover{--text-color: var(--color-primary-darker);--border-color: var(--color-primary-darker)}.excalidraw .ExcButton--color-primary.ExcButton--variant-outlined:active,.excalidraw .ExcButton--color-primary.ExcButton--variant-icon:active{--text-color: var(--color-primary-darkest);--border-color: var(--color-primary-darkest)}.excalidraw .ExcButton--color-danger.ExcButton--variant-filled{--text-color: var(--color-danger-text);--back-color: var(--color-danger-dark)}.excalidraw .ExcButton--color-danger.ExcButton--variant-filled:hover{--back-color: var(--color-danger-darker)}.excalidraw .ExcButton--color-danger.ExcButton--variant-filled:active{--back-color: var(--color-danger-darkest)}.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined,.excalidraw .ExcButton--color-danger.ExcButton--variant-icon{--text-color: var(--color-danger);--border-color: var(--color-danger);--back-color: transparent}.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined:hover,.excalidraw .ExcButton--color-danger.ExcButton--variant-icon:hover{--text-color: var(--color-danger-darkest);--border-color: var(--color-danger-darkest)}.excalidraw .ExcButton--color-danger.ExcButton--variant-outlined:active,.excalidraw .ExcButton--color-danger.ExcButton--variant-icon:active{--text-color: var(--color-danger-darker);--border-color: var(--color-danger-darker)}.excalidraw .ExcButton--color-muted.ExcButton--variant-filled{--text-color: var(--island-bg-color);--back-color: var(--color-gray-50)}.excalidraw .ExcButton--color-muted.ExcButton--variant-filled:hover{--back-color: var(--color-gray-60)}.excalidraw .ExcButton--color-muted.ExcButton--variant-filled:active{--back-color: var(--color-gray-80)}.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined,.excalidraw .ExcButton--color-muted.ExcButton--variant-icon{--text-color: var(--color-muted-background);--border-color: var(--color-muted);--back-color: var(--island-bg-color)}.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined:hover,.excalidraw .ExcButton--color-muted.ExcButton--variant-icon:hover{--text-color: var(--color-muted-background-darker);--border-color: var(--color-muted-darker)}.excalidraw .ExcButton--color-muted.ExcButton--variant-outlined:active,.excalidraw .ExcButton--color-muted.ExcButton--variant-icon:active{--text-color: var(--color-muted-background-darker);--border-color: var(--color-muted-darkest)}.excalidraw .ExcButton--color-warning.ExcButton--variant-filled{--text-color: black;--back-color: var(--color-warning-dark)}.excalidraw .ExcButton--color-warning.ExcButton--variant-filled:hover{--back-color: var(--color-warning-darker)}.excalidraw .ExcButton--color-warning.ExcButton--variant-filled:active{--back-color: var(--color-warning-darkest)}.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined,.excalidraw .ExcButton--color-warning.ExcButton--variant-icon{--text-color: var(--color-warning-dark);--border-color: var(--color-warning-dark);--back-color: var(--input-bg-color)}.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined:hover,.excalidraw .ExcButton--color-warning.ExcButton--variant-icon:hover{--text-color: var(--color-warning-darker);--border-color: var(--color-warning-darker)}.excalidraw .ExcButton--color-warning.ExcButton--variant-outlined:active,.excalidraw .ExcButton--color-warning.ExcButton--variant-icon:active{--text-color: var(--color-warning-darkest);--border-color: var(--color-warning-darkest)}.excalidraw .ExcButton--size-large{font-weight:600;font-size:.875rem;min-height:3rem;padding:.5rem 1.5rem;gap:.75rem;letter-spacing:.4px}.excalidraw .ExcButton--size-medium{font-weight:600;font-size:.75rem;min-height:2.5rem;padding:.5rem 1rem;gap:.5rem;letter-spacing:normal}.excalidraw .ExcButton--variant-icon{padding:.5rem .75rem;width:3rem}.excalidraw .ExcButton--fullWidth{width:100%}.excalidraw .ExcButton__icon{width:1.25rem;height:1.25rem}',""]),h.Z=v},3195:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .FixedSideContainer{position:absolute;pointer-events:none}.excalidraw .FixedSideContainer>*{pointer-events:all}.excalidraw .FixedSideContainer_side_top{left:var(--editor-container-padding);top:var(--editor-container-padding);right:var(--editor-container-padding);bottom:var(--editor-container-padding);z-index:2}.excalidraw .FixedSideContainer_side_top.zen-mode{right:42px}",""]),h.Z=v},2978:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .HelpDialog .Modal__content{max-width:960px}.excalidraw .HelpDialog h3{margin:1.5rem 0;font-weight:bold;font-size:1.125rem}.excalidraw .HelpDialog__header{display:flex;flex-wrap:wrap;gap:.75rem}.excalidraw .HelpDialog__btn{display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;align-items:center;border:1px solid var(--default-border-color);padding:.625rem 1rem;border-radius:var(--border-radius-lg);color:var(--text-primary-color);font-weight:600;font-size:.75rem;letter-spacing:.4px}.excalidraw .HelpDialog__btn:hover{text-decoration:none}.excalidraw .HelpDialog__link-icon{line-height:0}.excalidraw .HelpDialog__link-icon svg{width:1rem;height:1rem}.excalidraw .HelpDialog__islands-container{display:grid;grid-column-gap:1.5rem;grid-row-gap:2rem}@media screen and (min-width: 1024px){.excalidraw .HelpDialog__islands-container{grid-template-columns:1fr 1fr}}@media screen and (min-width: 1024px){.excalidraw .HelpDialog__island--tools{grid-area:1/1/2/2}.excalidraw .HelpDialog__island--view{grid-area:2/1/3/2}.excalidraw .HelpDialog__island--editor{grid-area:1/2/3/3}}.excalidraw .HelpDialog__island h4{font-size:1rem;font-weight:bold;margin:0;margin-bottom:.625rem}.excalidraw .HelpDialog__island-content{border:1px solid var(--dialog-border-color);border-radius:var(--border-radius-lg)}.excalidraw .HelpDialog__shortcut{border-bottom:1px solid var(--dialog-border-color);padding:.375rem .75rem;display:flex;justify-content:space-between;align-items:center;font-size:.875rem;-webkit-column-gap:.5rem;column-gap:.5rem}.excalidraw .HelpDialog__shortcut:last-child{border-bottom:none}.excalidraw .HelpDialog__key-container{display:flex;align-items:center;-webkit-column-gap:.25rem;column-gap:.25rem;flex-shrink:0}.excalidraw .HelpDialog__key{display:flex;box-sizing:border-box;font-size:.625rem;background-color:var(--color-primary-light);border-radius:var(--border-radius-md);padding:.5rem;word-break:keep-all;align-items:center;font-family:inherit;line-height:1}",""]),h.Z=v},1587:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .HintViewer{pointer-events:none;box-sizing:border-box;position:absolute;display:flex;justify-content:center;left:0;top:100%;max-width:100%;width:100%;margin-top:.5rem;text-align:center;color:var(--color-gray-40);font-size:.75rem}.excalidraw--mobile.excalidraw .HintViewer{position:static;padding-right:2rem}.excalidraw .HintViewer>span{padding:.25rem}.excalidraw.theme--dark .HintViewer{color:var(--color-gray-60)}",""]),h.Z=v},9478:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .picker-container{display:inline-block;box-sizing:border-box;margin-right:.25rem}.excalidraw .picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 2px 2px 4px 2px;border-radius:4px;position:absolute}.excalidraw .picker-container button,.excalidraw .picker button{position:relative;display:flex;align-items:center;justify-content:center}.excalidraw .picker-container button:focus-visible,.excalidraw .picker button:focus-visible{outline:rgba(0,0,0,0);background-color:var(--button-gray-2)}.excalidraw .picker-container button:focus-visible svg,.excalidraw .picker button:focus-visible svg{opacity:1}.excalidraw .picker-container button:hover,.excalidraw .picker button:hover{background-color:var(--button-gray-2)}.excalidraw .picker-container button:active,.excalidraw .picker button:active{background-color:var(--button-gray-3)}.excalidraw .picker-container button:disabled,.excalidraw .picker button:disabled{cursor:not-allowed}.excalidraw .picker-container button svg,.excalidraw .picker button svg{margin:0;width:36px;height:18px;pointer-events:none}.excalidraw .picker button{padding:.25rem .28rem .35rem .25rem}.excalidraw .picker-triangle{width:0;height:0;position:relative;top:-10px;z-index:10}:root[dir=ltr] .excalidraw .picker-triangle{left:12px}:root[dir=rtl] .excalidraw .picker-triangle{right:12px}.excalidraw .picker-triangle:before{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,.1);top:-1px}.excalidraw .picker-triangle:after{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--popup-bg-color)}.excalidraw .picker-content{padding:.5rem;display:grid;grid-template-columns:repeat(3, auto);grid-gap:.5rem;border-radius:4px}:root[dir=rtl] .excalidraw .picker-content{padding:.4rem}.excalidraw .picker-keybinding{position:absolute;bottom:2px;font-size:.7em;color:var(--keybinding-color)}:root[dir=ltr] .excalidraw .picker-keybinding{right:2px}:root[dir=rtl] .excalidraw .picker-keybinding{left:2px}.excalidraw--mobile.excalidraw .picker-keybinding{display:none}.excalidraw .picker-type-canvasBackground .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementBackground .picker-keybinding{color:#fff}.excalidraw .picker-swatch[aria-label=transparent] .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementStroke .picker-keybinding{color:#d4d4d4}.excalidraw.theme--dark .picker-type-elementBackground .picker-keybinding{color:#000}.excalidraw.theme--dark .picker-swatch[aria-label=transparent] .picker-keybinding{color:#000}',""]),h.Z=v},9706:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b),w=c(1667),_=c.n(w),k=new URL(c(9669),c.b),y=v()(m()),S=_()(k);y.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--ImageExportModal-preview-border: #d6d6d6}.excalidraw.theme--dark{--ImageExportModal-preview-border: #5c5c5c}.excalidraw .ImageExportModal{display:flex;flex-direction:row;justify-content:space-between}.excalidraw .ImageExportModal h3{font-family:"Assistant";font-style:normal;font-weight:700;font-size:1.313rem;line-height:130%;padding:0;margin:0}.excalidraw--mobile.excalidraw .ImageExportModal h3{display:none}.excalidraw .ImageExportModal>h3{display:none}.excalidraw--mobile.excalidraw .ImageExportModal>h3{display:block}.excalidraw--mobile.excalidraw .ImageExportModal{flex-direction:column;height:calc(100vh - 5rem)}.excalidraw .ImageExportModal__preview{box-sizing:border-box;display:flex;flex-direction:column;align-items:center;height:360px;width:55%;margin-right:1.5rem}.excalidraw--mobile.excalidraw .ImageExportModal__preview{max-width:unset;margin-right:unset;width:100%;height:unset;flex-grow:1}.excalidraw .ImageExportModal__preview__filename>input{margin-top:1rem}.excalidraw .ImageExportModal__preview__canvas{box-sizing:border-box;width:100%;height:100%;display:flex;flex-grow:1;justify-content:center;align-items:center;background:url('+S+') left center;border:1px solid var(--ImageExportModal-preview-border);border-radius:12px;overflow:hidden;padding:1rem}.excalidraw .ImageExportModal__preview__canvas>canvas{max-width:calc(100% - 2rem);max-height:calc(100% - 2rem);-webkit-filter:none !important;filter:none !important}.excalidraw--mobile.excalidraw .ImageExportModal__preview__canvas>canvas{max-height:100%}.excalidraw--mobile.excalidraw .ImageExportModal__preview__canvas{margin-top:24px;max-width:unset}.excalidraw .ImageExportModal__settings{display:flex;flex-direction:column;flex-wrap:wrap;gap:18px}.excalidraw--mobile.excalidraw .ImageExportModal__settings{margin-left:unset;margin-top:1rem;flex-direction:row;gap:6px 34px;align-content:flex-start}.excalidraw .ImageExportModal__settings__setting{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.excalidraw--mobile.excalidraw .ImageExportModal__settings__setting{flex-direction:column;align-items:start;justify-content:unset;height:52px}.excalidraw .ImageExportModal__settings__setting__label{display:flex;flex-direction:row;align-items:center;font-family:"Assistant";font-weight:600;font-size:1rem;line-height:150%}.excalidraw .ImageExportModal__settings__setting__label svg{width:20px;height:20px;margin-left:10px}.excalidraw .ImageExportModal__settings__setting__content{display:flex;height:100%;align-items:center}.excalidraw .ImageExportModal__settings__buttons{flex-grow:1;flex-wrap:wrap;display:flex;flex-direction:row;gap:11px;align-items:flex-end;align-content:flex-end}.excalidraw--mobile.excalidraw .ImageExportModal__settings__buttons{padding-top:32px;flex-basis:100%;justify-content:center}',""]),h.Z=y},7369:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .Island{--padding: 0;box-sizing:border-box;background-color:var(--island-bg-color);box-shadow:var(--shadow-island);border-radius:var(--border-radius-lg);padding:calc(var(--padding)*var(--space-factor));position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .Island.zen-mode{box-shadow:none}",""]),h.Z=v},1434:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .layer-ui__wrapper.animate{transition:width .1s ease-in-out}.excalidraw .layer-ui__wrapper{position:absolute;width:100%;height:100%;pointer-events:none;z-index:var(--zIndex-layerUI)}.excalidraw .layer-ui__wrapper__top-right{display:flex;gap:.75rem}.excalidraw .layer-ui__wrapper__footer{width:100%}.excalidraw .layer-ui__wrapper__footer-right{z-index:100;display:flex}.excalidraw .layer-ui__wrapper .zen-mode-transition{transition:-webkit-transform .5s ease-in-out;transition:transform .5s ease-in-out;transition:transform .5s ease-in-out, -webkit-transform .5s ease-in-out}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{-webkit-transform:translate(-999px, 0);transform:translate(-999px, 0)}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{-webkit-transform:translate(999px, 0);transform:translate(999px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{-webkit-transform:translate(999px, 0);transform:translate(999px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{-webkit-transform:translate(-999px, 0);transform:translate(-999px, 0)}.excalidraw .layer-ui__wrapper .zen-mode-transition.layer-ui__wrapper__footer-left--transition-bottom{-webkit-transform:translate(0, 92px);transform:translate(0, 92px)}.excalidraw .layer-ui__wrapper .disable-zen-mode{height:30px;position:absolute;bottom:10px;font-size:10px;padding:10px;font-weight:500;opacity:0;visibility:hidden;transition:visibility 0s linear 0s,opacity .5s}[dir=ltr] .excalidraw .layer-ui__wrapper .disable-zen-mode{right:15px}[dir=rtl] .excalidraw .layer-ui__wrapper .disable-zen-mode{left:15px}.excalidraw .layer-ui__wrapper .disable-zen-mode--visible{opacity:1;visibility:visible;transition:visibility 0s linear 300ms,opacity .5s;transition-delay:.8s}.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-left,.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-right,.excalidraw .layer-ui__wrapper .disable-zen-mode--visible{pointer-events:all}.excalidraw .layer-ui__wrapper .layer-ui__wrapper__footer-right{margin-top:auto;margin-bottom:auto}",""]),h.Z=v},8923:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,'.excalidraw .layer-ui__library{display:flex;flex-direction:column;flex:1 1 auto}.excalidraw .library-actions-counter{background-color:var(--color-primary);color:var(--color-primary-light);font-weight:bold;display:flex;align-items:center;justify-content:center;border-radius:50%;width:1rem;height:1rem;position:absolute;bottom:-0.25rem;right:-0.25rem;font-size:.625rem;pointer-events:none}.excalidraw .layer-ui__library-message{padding:2rem;min-width:200px;display:flex;flex-direction:column;align-items:center;flex-grow:1;justify-content:center}.excalidraw .layer-ui__library-message span{font-size:.8em}.excalidraw .publish-library-success .Dialog__content{display:flex;flex-direction:column}.excalidraw .publish-library-success-close.ToolIcon_type_button{background-color:#228be6;align-self:flex-end}.excalidraw .publish-library-success-close.ToolIcon_type_button:hover{background-color:#1971c2}.excalidraw .publish-library-success-close.ToolIcon_type_button .ToolIcon__icon{width:auto;font-size:1rem;color:#fff;padding:0 .5rem}.excalidraw .library-menu-control-buttons{display:flex;align-items:center;justify-content:center;gap:.625rem;position:relative}.excalidraw .library-menu-control-buttons--at-bottom::before{content:"";width:calc(100% - 1.5rem);height:1px;position:absolute;top:-1px;background:var(--sidebar-border-color)}.excalidraw .library-menu-browse-button{flex:1;height:var(--lg-button-size);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;border-radius:var(--border-radius-lg);background-color:var(--color-primary);color:#fff;text-align:center;white-space:nowrap;text-decoration:none !important;font-weight:600;font-size:.75rem}.excalidraw .library-menu-browse-button:hover{background-color:var(--color-primary-darker)}.excalidraw .library-menu-browse-button:active{background-color:var(--color-primary-darkest)}.excalidraw.theme--dark .library-menu-browse-button{color:var(--color-gray-100)}.excalidraw.excalidraw--mobile .library-menu-browse-button{height:var(--default-button-size)}.excalidraw .layer-ui__library .dropdown-menu{width:auto;top:initial;right:0;left:initial;bottom:100%;margin-bottom:.625rem}.excalidraw .layer-ui__library .dropdown-menu .dropdown-menu-container{width:196px;box-shadow:var(--library-dropdown-shadow);border-radius:var(--border-radius-lg);padding:.25rem .5rem}.excalidraw .layer-ui__library .library-menu-dropdown-container{position:relative}.excalidraw .layer-ui__library .library-menu-dropdown-container--in-heading{padding:0;position:absolute;top:1rem;right:.75rem;z-index:1}.excalidraw .layer-ui__library .library-menu-dropdown-container--in-heading .dropdown-menu{top:100%}',""]),h.Z=v},5605:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw{--container-padding-y: 1.5rem;--container-padding-x: 0.75rem}.excalidraw .library-menu-items__no-items{text-align:center;color:var(--color-gray-70);line-height:1.5;font-size:.875rem;width:100%}.excalidraw .library-menu-items__no-items__label{color:var(--color-primary);font-weight:bold;font-size:1.125rem;margin-bottom:.75rem}.excalidraw.theme--dark .library-menu-items__no-items{color:var(--color-gray-40)}.excalidraw .library-menu-items-container{width:100%;display:flex;flex-grow:1;flex-shrink:1;flex-basis:0;overflow-y:auto;flex-direction:column;height:100%;justify-content:center;margin:0;position:relative}.excalidraw .library-menu-items-container>div{padding-left:.75rem;padding-right:.75rem}.excalidraw .library-menu-items-container__row{display:grid;grid-template-columns:repeat(4, 1fr);gap:1rem}.excalidraw .library-menu-items-container__items{row-gap:.5rem;padding:var(--container-padding-y) 0;flex:1;overflow-y:auto;overflow-x:hidden;margin-bottom:1rem}.excalidraw .library-menu-items-container__header{color:var(--color-primary);font-size:1.125rem;font-weight:bold;margin-bottom:.75rem;width:100%;padding-right:4rem;box-sizing:border-box}.excalidraw .library-menu-items-container__header--excal{margin-top:2rem}.excalidraw .library-menu-items-container__grid{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:1rem}.excalidraw .library-menu-items-container .separator{width:100%;display:flex;align-items:center;font-weight:500;font-size:.9rem;margin:.6em .2em;color:var(--text-primary-color)}.excalidraw .library-menu-items-private-library-container{min-height:3.75rem;width:100%}",""]),h.Z=v},2701:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .library-unit{align-items:center;border:1px solid rgba(0,0,0,0);display:flex;justify-content:center;position:relative;width:55px;height:55px;box-sizing:border-box;border-radius:var(--border-radius-lg)}.excalidraw .library-unit--hover{border-color:var(--color-primary)}.excalidraw .library-unit--selected{border-color:var(--color-primary);border-width:1px}.excalidraw .library-unit--skeleton{opacity:.5;background:linear-gradient(-45deg, var(--color-gray-10), var(--color-gray-20), var(--color-gray-10));background-size:200% 200%;-webkit-animation:library-unit__skeleton-opacity-animation .2s linear;animation:library-unit__skeleton-opacity-animation .2s linear}.excalidraw.theme--dark .library-unit--skeleton{background-image:linear-gradient(-45deg, var(--color-gray-100), var(--color-gray-80), var(--color-gray-100))}.excalidraw .library-unit__dragger{display:flex;align-items:center;justify-content:center;height:100%;width:100%}.excalidraw .library-unit__dragger>svg{-webkit-filter:var(--theme-filter);filter:var(--theme-filter);flex-grow:1;max-height:100%;max-width:100%}.excalidraw .library-unit__checkbox-container,.excalidraw .library-unit__checkbox-container:hover,.excalidraw .library-unit__checkbox-container:active{align-items:center;background:none;border:none;color:var(--icon-fill-color);display:flex;justify-content:center;margin:0;padding:.5rem;position:absolute;left:2rem;bottom:2rem;cursor:pointer}.excalidraw .library-unit__checkbox-container input,.excalidraw .library-unit__checkbox-container:hover input,.excalidraw .library-unit__checkbox-container:active input{cursor:pointer}.excalidraw .library-unit__checkbox{position:absolute;top:.125rem;right:.125rem;margin:0}.excalidraw .library-unit__checkbox .Checkbox-box{margin:0;width:1rem;height:1rem;border-radius:4px;background-color:var(--color-primary-light);border:1px solid var(--color-primary);box-shadow:none !important;padding:2px}.excalidraw .library-unit__checkbox.Checkbox:hover .Checkbox-box{background-color:var(--color-primary-light)}.excalidraw .library-unit__checkbox.is-checked .Checkbox-box{background-color:var(--color-primary) !important}.excalidraw .library-unit__checkbox.is-checked .Checkbox-box svg{color:var(--color-primary-light)}.excalidraw .library-unit__removeFromLibrary>svg{height:16px;width:16px}.excalidraw .library-unit__adder{-webkit-transform:scale(1);transform:scale(1);-webkit-animation:library-unit__adder-animation 1s ease-in infinite;animation:library-unit__adder-animation 1s ease-in infinite;position:absolute;width:1.5rem;height:1.5rem;background-color:var(--color-primary);border-radius:var(--border-radius-md);display:flex;justify-content:center;align-items:center;pointer-events:none}.excalidraw .library-unit__adder svg{color:var(--color-primary-light);width:1rem;height:1rem}.excalidraw .library-unit:active .library-unit__adder{-webkit-animation:none;animation:none;-webkit-transform:scale(0.8);transform:scale(0.8)}.excalidraw .library-unit__active{cursor:pointer}@-webkit-keyframes library-unit__adder-animation{0%{-webkit-transform:scale(0.85);transform:scale(0.85)}50%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0.85);transform:scale(0.85)}}@keyframes library-unit__adder-animation{0%{-webkit-transform:scale(0.85);transform:scale(0.85)}50%{-webkit-transform:scale(1);transform:scale(1)}100%{-webkit-transform:scale(0.85);transform:scale(0.85)}}@-webkit-keyframes library-unit__skeleton-opacity-animation{0%{opacity:0}75%{opacity:0}100%{opacity:.5}}@keyframes library-unit__skeleton-opacity-animation{0%{opacity:0}75%{opacity:0}100%{opacity:.5}}",""]),h.Z=v},6843:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw.excalidraw-modal-container{position:absolute;z-index:var(--zIndex-modal)}.excalidraw .Modal{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;overflow:auto;padding:calc(var(--space-factor)*10)}.excalidraw .Modal .Island{padding:2.5rem !important}.excalidraw .Modal__background{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1;background-color:rgba(18,18,18,.2);-webkit-animation:Modal__background__fade-in .125s linear forwards;animation:Modal__background__fade-in .125s linear forwards}.excalidraw .Modal__content{position:relative;z-index:2;width:100%;max-width:var(--max-width);max-height:100%;opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px);-webkit-animation:Modal__content_fade-in .1s ease-out .05s forwards;animation:Modal__content_fade-in .1s ease-out .05s forwards;position:relative;overflow-y:auto;background:var(--island-bg-color);border:1px solid var(--dialog-border-color);box-shadow:var(--modal-shadow);border-radius:6px;box-sizing:border-box}.excalidraw .Modal__content:focus{outline:none}.excalidraw--mobile.excalidraw .Modal__content{max-width:100%;border:0;border-radius:0}@-webkit-keyframes Modal__background__fade-in{from{opacity:0}to{opacity:1}}@keyframes Modal__background__fade-in{from{opacity:0}to{opacity:1}}@-webkit-keyframes Modal__content_fade-in{from{opacity:0;-webkit-transform:scale(0.9);transform:scale(0.9)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes Modal__content_fade-in{from{opacity:0;-webkit-transform:scale(0.9);transform:scale(0.9)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}.excalidraw .Modal__close{color:var(--icon-fill-color);margin:0;padding:.375rem;position:absolute;top:1rem;right:1rem;border:0;background-color:rgba(0,0,0,0);line-height:0;cursor:pointer}.excalidraw .Modal__close svg{width:1.5rem;height:1.5rem}.excalidraw--mobile.excalidraw .Modal{padding:0}.excalidraw--mobile.excalidraw .Modal__content{position:absolute;top:0;left:0;right:0;bottom:0}",""]),h.Z=v},9439:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .OverwriteConfirm{display:flex;flex-direction:column;align-items:center;gap:.75rem;isolation:isolate}.excalidraw .OverwriteConfirm h3{margin:0;font-weight:700;font-size:1.3125rem;line-height:130%;align-self:flex-start;color:var(--text-primary-color)}.excalidraw .OverwriteConfirm__Description{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;width:100%;gap:1rem;padding:2.5rem;background:var(--color-danger-background);border-radius:.5rem;font-family:"Assistant";font-style:normal;font-weight:400;font-size:1rem;line-height:150%;color:var(--color-danger-color)}.excalidraw--mobile.excalidraw .OverwriteConfirm__Description{flex-direction:column;text-align:center}.excalidraw .OverwriteConfirm__Description__spacer{flex-grow:1}.excalidraw .OverwriteConfirm__Description__icon{box-sizing:border-box;display:flex;align-items:center;justify-content:center;border-radius:2.5rem;background:var(--color-danger-icon-background);width:3.5rem;height:3.5rem;padding:.75rem}.excalidraw .OverwriteConfirm__Description__icon svg{color:var(--color-danger-icon-color);width:1.5rem;height:1.5rem}.excalidraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning{background:var(--color-warning-background);color:var(--color-warning-color)}.excalidraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning .OverwriteConfirm__Description__icon{background:var(--color-warning-icon-background);flex:0 0 auto}.excalidraw .OverwriteConfirm__Description.OverwriteConfirm__Description--color-warning .OverwriteConfirm__Description__icon svg{color:var(--color-warning-icon-color)}.excalidraw .OverwriteConfirm__Actions{display:flex;flex-direction:row;align-items:stretch;justify-items:stretch;justify-content:center;gap:1.5rem}.excalidraw--mobile.excalidraw .OverwriteConfirm__Actions{flex-direction:column}.excalidraw .OverwriteConfirm__Actions__Action{display:flex;flex-direction:column;align-items:center;padding:1.5rem;gap:.75rem;flex-basis:50%;flex-grow:0}.excalidraw .OverwriteConfirm__Actions__Action__content{height:100%;font-size:.875rem;text-align:center}.excalidraw .OverwriteConfirm__Actions__Action h4{font-weight:700;font-size:1.125rem;line-height:130%;margin:0;color:var(--text-primary-color)}',""]),h.Z=v},8461:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw--mobile.excalidraw .PasteChartDialog .Island{display:flex;flex-direction:column}.excalidraw .PasteChartDialog .container{display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap}.excalidraw--mobile.excalidraw .PasteChartDialog .container{flex-direction:column;justify-content:center}.excalidraw .PasteChartDialog .ChartPreview{margin:8px;text-align:center;width:192px;height:128px;border-radius:2px;padding:1px;border:1px solid #ced4da;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0)}.excalidraw .PasteChartDialog .ChartPreview div{display:inline-block}.excalidraw .PasteChartDialog .ChartPreview svg{max-height:120px;max-width:186px}.excalidraw .PasteChartDialog .ChartPreview:hover{padding:0;border:2px solid #339af0}",""]),h.Z=v},9935:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .popover{position:absolute;z-index:10;padding:5px 0 5px;outline:none}",""]),h.Z=v},532:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".ProjectName{margin:auto;display:flex;align-items:center}.ProjectName .TextInput{height:calc(1rem - 3px);width:200px;overflow:hidden;text-align:center;margin-left:8px;text-overflow:ellipsis}.ProjectName .TextInput--readonly{background:none;border:none;width:auto;max-width:200px;padding-left:2px}.ProjectName .TextInput--readonly:hover{background:none}",""]),h.Z=v},7589:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .publish-library__fields{display:flex;flex-direction:column}.excalidraw .publish-library__fields label{padding:1em 0;display:flex;justify-content:space-between;align-items:center}.excalidraw .publish-library__fields label span{font-weight:500;font-size:1rem;color:#868e96}.excalidraw .publish-library__fields label input,.excalidraw .publish-library__fields label textarea{width:70%;padding:.6em;font-family:var(--ui-font)}.excalidraw .publish-library__fields label .required{color:#e03131;margin:.2rem}.excalidraw .publish-library__buttons{display:flex;padding:.2rem 0;justify-content:flex-end;gap:.5rem}.excalidraw .publish-library__buttons .ToolIcon__icon{min-width:2.5rem;width:auto;font-size:1rem}.excalidraw .publish-library__buttons .ToolIcon_type_button{margin-left:1rem;padding:0 .5rem}.excalidraw .publish-library__buttons--confirm.ToolIcon_type_button{background-color:#228be6}.excalidraw .publish-library__buttons--confirm.ToolIcon_type_button:hover{background-color:#1971c2}.excalidraw .publish-library__buttons--cancel.ToolIcon_type_button{background-color:#adb5bd}.excalidraw .publish-library__buttons--cancel.ToolIcon_type_button:hover{background-color:#868e96}.excalidraw .publish-library__buttons .ToolIcon__icon{color:#fff}.excalidraw .publish-library__buttons .ToolIcon__icon .Spinner{--spinner-color: #fff}.excalidraw .publish-library__buttons .ToolIcon__icon .Spinner svg{padding:.5rem}.excalidraw .publish-library .selected-library-items{display:flex;flex-wrap:wrap}.excalidraw .publish-library .selected-library-items .single-library-item-wrapper{width:9rem}.excalidraw .publish-library-warning{color:#fa5252}.excalidraw .publish-library-note{padding:1em 0;font-style:italic;font-size:14px;display:block}.excalidraw .single-library-item{position:relative}.excalidraw .single-library-item-status{position:absolute;top:.3rem;left:.3rem;font-size:.7rem;color:#f03e3e;background:rgba(255,255,255,.9);padding:.1rem .2rem;border-radius:.2rem}.excalidraw .single-library-item__svg{background-color:#fff;padding:.3rem;width:7.5rem;height:7.5rem;border:1px solid var(--button-gray-2)}.excalidraw .single-library-item__svg svg{width:100%;height:100%}.excalidraw .single-library-item .ToolIcon__icon{background-color:#fff;width:auto;height:auto;margin:0 .5rem}.excalidraw .single-library-item .ToolIcon,.excalidraw .single-library-item .ToolIcon_type_button:hover{background-color:#fff}.excalidraw .single-library-item .required,.excalidraw .single-library-item .error{color:#e03131;font-weight:bold;font-size:1rem;margin:.2rem}.excalidraw .single-library-item .error{font-weight:500;margin:0;padding:.3em 0}.excalidraw .single-library-item--remove{position:absolute;top:.2rem;right:1rem}.excalidraw .single-library-item--remove .ToolIcon__icon{margin:0}.excalidraw .single-library-item--remove .ToolIcon__icon{background-color:#fa5252}.excalidraw .single-library-item--remove .ToolIcon__icon:hover{background-color:#f03e3e}.excalidraw .single-library-item--remove .ToolIcon__icon:active{background-color:#e03131}.excalidraw .single-library-item--remove svg{color:#fff;padding:.26rem;border-radius:.3em;width:1rem;height:1rem}",""]),h.Z=v},6217:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--RadioGroup-background: #ffffff;--RadioGroup-border: var(--color-gray-30);--RadioGroup-choice-color-off: var(--color-primary);--RadioGroup-choice-color-off-hover: var(--color-primary-darkest);--RadioGroup-choice-background-off: white;--RadioGroup-choice-background-off-active: var(--color-gray-20);--RadioGroup-choice-color-on: white;--RadioGroup-choice-background-on: var(--color-primary);--RadioGroup-choice-background-on-hover: var(--color-primary-darker);--RadioGroup-choice-background-on-active: var(--color-primary-darkest)}.excalidraw.theme--dark{--RadioGroup-background: var(--color-gray-85);--RadioGroup-border: var(--color-gray-70);--RadioGroup-choice-background-off: var(--color-gray-85);--RadioGroup-choice-background-off-active: var(--color-gray-70);--RadioGroup-choice-color-on: var(--color-gray-85)}.excalidraw .RadioGroup{box-sizing:border-box;display:flex;flex-direction:row;align-items:flex-start;padding:3px;border-radius:10px;background:var(--RadioGroup-background);border:1px solid var(--RadioGroup-border)}.excalidraw .RadioGroup__choice{position:relative;display:flex;align-items:center;justify-content:center;width:32px;height:24px;color:var(--RadioGroup-choice-color-off);background:var(--RadioGroup-choice-background-off);border-radius:8px;font-family:"Assistant";font-style:normal;font-weight:600;font-size:.75rem;line-height:100%;-webkit-user-select:none;user-select:none;letter-spacing:.4px;transition:all 75ms ease-out}.excalidraw .RadioGroup__choice:hover{color:var(--RadioGroup-choice-color-off-hover)}.excalidraw .RadioGroup__choice:active{background:var(--RadioGroup-choice-background-off-active)}.excalidraw .RadioGroup__choice.active{color:var(--RadioGroup-choice-color-on);background:var(--RadioGroup-choice-background-on)}.excalidraw .RadioGroup__choice.active:hover{background:var(--RadioGroup-choice-background-on-hover)}.excalidraw .RadioGroup__choice.active:active{background:var(--RadioGroup-choice-background-on-active)}.excalidraw .RadioGroup__choice input{z-index:1;position:absolute;width:100%;height:100%;margin:0;padding:0;border-radius:8px;-webkit-appearance:none;appearance:none;cursor:pointer}',""]),h.Z=v},8208:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .sidebar{display:flex;flex-direction:column;position:absolute;top:0;bottom:0;right:0;z-index:5;margin:0;padding:0;box-sizing:border-box;background-color:var(--sidebar-bg-color);box-shadow:var(--sidebar-shadow);overflow:hidden;border-radius:0;width:calc(302px - var(--space-factor) * 2);border-left:1px solid var(--sidebar-border-color)}:root[dir=rtl] .excalidraw .sidebar{left:0;right:auto}.excalidraw .sidebar--docked{box-shadow:none}:root[dir=rtl] .excalidraw .sidebar{border-right:1px solid var(--sidebar-border-color);border-left:0}.excalidraw .sidebar__header{box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;width:100%;padding:1rem .75rem;position:relative}.excalidraw .sidebar__header::after{content:"";width:calc(100% - 1.5rem);height:1px;background:var(--sidebar-border-color);position:absolute;bottom:-1px}.excalidraw .sidebar__header__buttons{gap:0;display:flex;align-items:center;margin-left:auto}.excalidraw .sidebar__header__buttons button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));--button-bg: transparent;border:0 !important;width:var(--lg-button-size);height:var(--lg-button-size);padding:0}.excalidraw .sidebar__header__buttons button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .sidebar__header__buttons button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .sidebar__header__buttons button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .sidebar__header__buttons button.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .sidebar__header__buttons button.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .sidebar__header__buttons button.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .sidebar__header__buttons button svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .sidebar__header__buttons button:hover{background:var(--button-hover-bg, var(--island-bg-color))}.excalidraw .sidebar__header__buttons .sidebar__dock.selected svg{stroke:var(--color-primary);fill:var(--color-primary)}.excalidraw .sidebar-tabs-root{display:flex;flex-direction:column;flex:1 1 auto;padding:1rem 0}.excalidraw .sidebar-tabs-root [role=tabpanel]{flex:1;outline:none;flex:1 1 auto;display:flex;flex-direction:column;outline:none}.excalidraw .sidebar-tabs-root [role=tabpanel][data-state=inactive]{display:none !important}.excalidraw .sidebar-tabs-root [role=tablist]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit, minmax(0, 1fr))}.excalidraw .sidebar-tabs-root>.sidebar__header{padding-top:0;padding-bottom:1rem}.excalidraw .sidebar-tab-trigger{--button-width: auto;--button-bg: transparent;--button-hover-bg: transparent;--button-active-bg: var(--color-primary);--button-hover-color: var(--color-primary);--button-hover-border: var(--color-primary)}.excalidraw .sidebar-tab-trigger[data-state=active]{--button-bg: var(--color-primary);--button-hover-bg: var(--color-primary-darker);--button-hover-color: var(--color-icon-white);--button-border: var(--color-primary);color:var(--color-icon-white)}.excalidraw .default-sidebar{display:flex;flex-direction:column}.excalidraw .default-sidebar .sidebar-triggers{display:flex;gap:0;padding:2px;margin-top:-3px;margin-bottom:-3px;border:1px solid var(--sidebar-border-color);background:var(--default-bg-color);border-radius:.625rem}.excalidraw .default-sidebar .sidebar-triggers .sidebar-tab-trigger{height:var(--lg-button-size);width:var(--lg-button-size);border:none}',""]),h.Z=v},7051:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .sidebar-trigger{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--island-bg-color);width:auto;height:var(--lg-button-size);display:flex;align-items:center;gap:.5rem;line-height:0;font-size:.75rem;letter-spacing:.4px}.excalidraw .sidebar-trigger svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .sidebar-trigger:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .sidebar-trigger:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .sidebar-trigger.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .sidebar-trigger.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .sidebar-trigger.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .sidebar-trigger svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .default-sidebar-trigger .sidebar-trigger__label{display:none}@media screen and (min-width: 1024px){.excalidraw .default-sidebar-trigger .sidebar-trigger__label{display:block}}",""]),h.Z=v},5892:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .Spinner{display:flex;align-items:center;justify-content:center;height:100%;margin-left:auto;margin-right:auto;--spinner-color: var(--icon-fill-color)}.excalidraw .Spinner svg{-webkit-animation:rotate 1.6s linear infinite;animation:rotate 1.6s linear infinite;-webkit-animation-delay:var(--spinner-delay);animation-delay:var(--spinner-delay);-webkit-transform-origin:center center;transform-origin:center center}.excalidraw .Spinner circle{stroke:var(--spinner-color);-webkit-animation:dash 1.6s linear 0s infinite;animation:dash 1.6s linear 0s infinite;stroke-linecap:round}@-webkit-keyframes rotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,300;stroke-dashoffset:0}50%{stroke-dasharray:150,300;stroke-dashoffset:-200}100%{stroke-dasharray:1,300;stroke-dashoffset:-280}}@keyframes dash{0%{stroke-dasharray:1,300;stroke-dashoffset:0}50%{stroke-dasharray:150,300;stroke-dashoffset:-200}100%{stroke-dasharray:1,300;stroke-dashoffset:-280}}",""]),h.Z=v},3874:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .Stack{--gap: 0;display:grid;gap:calc(var(--space-factor)*var(--gap))}.excalidraw .Stack_vertical{grid-template-columns:auto;grid-auto-flow:row;grid-auto-rows:-webkit-min-content;grid-auto-rows:min-content}.excalidraw .Stack_horizontal{grid-template-rows:auto;grid-auto-flow:column;grid-auto-columns:-webkit-min-content;grid-auto-columns:min-content}",""]),h.Z=v},2681:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Stats{position:absolute;top:64px;right:12px;font-size:12px;z-index:10;pointer-events:all}.excalidraw .Stats h3{margin:0 24px 8px 0;white-space:nowrap}.excalidraw .Stats .close{float:right;height:16px;width:16px;cursor:pointer}.excalidraw .Stats .close svg{width:100%;height:100%}.excalidraw .Stats table{width:100%}.excalidraw .Stats table th{border-bottom:1px solid var(--input-border-color);padding:4px}.excalidraw .Stats table tr td:nth-child(2){min-width:24px;text-align:right}:root[dir=rtl] .excalidraw .Stats{left:12px;right:initial}:root[dir=rtl] .excalidraw .Stats h3{margin:0 0 8px 24px}:root[dir=rtl] .excalidraw .Stats .close{float:left}",""]),h.Z=v},7802:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--Switch-disabled-color: #d6d6d6;--Switch-track-background: white;--Switch-thumb-background: #3d3d3d}.excalidraw.theme--dark{--Switch-disabled-color: #5c5c5c;--Switch-track-background: #242424;--Switch-thumb-background: #b8b8b8}.excalidraw .Switch{position:relative;box-sizing:border-box;width:40px;height:20px;border-radius:12px;transition-property:background,border;transition-duration:150ms;transition-timing-function:ease-out;background:var(--Switch-track-background);border:1px solid var(--Switch-disabled-color)}.excalidraw .Switch:hover{background:var(--Switch-track-background);border:1px solid #999}.excalidraw .Switch.toggled{background:var(--color-primary);border:1px solid var(--color-primary)}.excalidraw .Switch.toggled:hover{background:var(--color-primary-darker);border:1px solid var(--color-primary-darker)}.excalidraw .Switch.disabled{background:var(--Switch-track-background);border:1px solid var(--Switch-disabled-color)}.excalidraw .Switch.disabled.toggled{background:var(--Switch-disabled-color);border:1px solid var(--Switch-disabled-color)}.excalidraw .Switch:before{content:"";box-sizing:border-box;display:block;pointer-events:none;position:absolute;border-radius:100%;transition:all 150ms ease-out;width:10px;height:10px;top:4px;left:4px;background:var(--Switch-thumb-background)}.excalidraw .Switch:active:before{width:12px}.excalidraw .Switch.toggled:before{width:14px;height:14px;left:22px;top:2px;background:var(--Switch-track-background)}.excalidraw .Switch.toggled:active:before{width:16px;left:20px}.excalidraw .Switch.disabled:before{background:var(--Switch-disabled-color)}.excalidraw .Switch.disabled.toggled:before{background:var(--color-gray-50)}.excalidraw .Switch input{width:100%;height:100%;margin:0;border-radius:12px;-webkit-appearance:none;appearance:none;cursor:pointer}.excalidraw .Switch input:disabled{cursor:unset}',""]),h.Z=v},6759:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .TextInput{display:inline-block}",""]),h.Z=v},9650:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .Toast{-webkit-animation:fade-in .5s;animation:fade-in .5s;background-color:var(--button-gray-1);border-radius:4px;bottom:10px;box-sizing:border-box;cursor:default;left:50%;margin-left:-150px;padding:4px 0;position:absolute;text-align:center;width:300px;z-index:999999}.excalidraw .Toast .Toast__message{padding:0 1.6rem;color:var(--popup-text-color);white-space:pre-wrap}.excalidraw .Toast .close{position:absolute;top:0;right:0;padding:.4rem}.excalidraw .Toast .close .ToolIcon__icon{width:1.2rem;height:1.2rem}@-webkit-keyframes fade-in{from{opacity:0}to{opacity:1}}@keyframes fade-in{from{opacity:0}to{opacity:1}}",""]),h.Z=v},2044:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .ToolIcon{border-radius:var(--border-radius-lg);display:inline-flex;align-items:center;position:relative;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;user-select:none}.excalidraw .ToolIcon__hidden{display:none !important}.excalidraw .ToolIcon.fillable .ToolIcon_type_radio:checked+.ToolIcon__icon,.excalidraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked+.ToolIcon__icon{--icon-fill-color: var(--color-primary-darker)}.excalidraw .ToolIcon.fillable .ToolIcon_type_radio:checked+.ToolIcon__icon svg,.excalidraw .ToolIcon.fillable .ToolIcon_type_checkbox:checked+.ToolIcon__icon svg{fill:var(--icon-fill-color)}.excalidraw .ToolIcon .ToolIcon_type_radio:checked+.ToolIcon__icon,.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked+.ToolIcon__icon{background:var(--color-primary-light);--keybinding-color: var(--color-gray-60)}.excalidraw .ToolIcon .ToolIcon_type_radio:checked+.ToolIcon__icon svg,.excalidraw .ToolIcon .ToolIcon_type_checkbox:checked+.ToolIcon__icon svg{color:var(--color-primary-darker)}.excalidraw .ToolIcon .ToolIcon__keybinding{bottom:4px;right:4px}.excalidraw .ToolIcon .ToolIcon__icon:hover{background:var(--button-hover-bg)}.excalidraw .ToolIcon .ToolIcon__icon:active{background:var(--button-hover-bg);border:1px solid var(--color-primary-darkest)}.excalidraw .ToolIcon--plain{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon--plain .ToolIcon__icon{width:2rem;height:2rem}.excalidraw .ToolIcon_type_radio,.excalidraw .ToolIcon_type_checkbox{position:absolute;opacity:0;pointer-events:none}.excalidraw .ToolIcon__icon{box-sizing:border-box;width:var(--default-button-size);height:var(--default-button-size);color:var(--icon-fill-color);display:flex;justify-content:center;align-items:center;border-radius:var(--border-radius-lg)}.excalidraw .ToolIcon__icon+.ToolIcon__label{-webkit-margin-start:0;margin-inline-start:0}.excalidraw .ToolIcon__icon svg{position:relative;width:var(--default-icon-size);height:var(--default-icon-size);color:var(--icon-fill-color)}.excalidraw .ToolIcon__label{display:flex;align-items:center;color:var(--icon-fill-color);font-family:var(--ui-font);margin:0 .8em;text-overflow:ellipsis}.excalidraw .ToolIcon__label .Spinner{margin-left:.6em}.excalidraw .ToolIcon_size_small .ToolIcon__icon{width:2rem;height:2rem;font-size:.8em}.excalidraw .ToolIcon_type_button,.excalidraw .Modal .ToolIcon_type_button,.excalidraw .ToolIcon_type_button{padding:0;border:none;margin:0;font-size:inherit;background-color:initial}.excalidraw .ToolIcon_type_button:focus-visible,.excalidraw .Modal .ToolIcon_type_button:focus-visible,.excalidraw .ToolIcon_type_button:focus-visible{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .ToolIcon_type_button.ToolIcon--selected,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected,.excalidraw .ToolIcon_type_button.ToolIcon--selected{background-color:var(--button-gray-2)}.excalidraw .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .ToolIcon_type_button.ToolIcon--selected:active{background-color:var(--button-gray-3)}.excalidraw .ToolIcon_type_button:active,.excalidraw .Modal .ToolIcon_type_button:active,.excalidraw .ToolIcon_type_button:active{background-color:var(--button-gray-3)}.excalidraw .ToolIcon_type_button--show,.excalidraw .Modal .ToolIcon_type_button--show,.excalidraw .ToolIcon_type_button--show{visibility:visible}.excalidraw .ToolIcon_type_button--hide,.excalidraw .Modal .ToolIcon_type_button--hide,.excalidraw .ToolIcon_type_button--hide{display:none !important}.excalidraw .ToolIcon_type_floating{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon_type_floating:hover{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon_type_floating:active{background-color:rgba(0,0,0,0)}.excalidraw .ToolIcon_type_floating .ToolIcon__icon{background-color:var(--button-gray-1);width:2rem;height:2rem}.excalidraw .ToolIcon_type_floating .ToolIcon__icon:hover{background-color:var(--button-gray-2)}.excalidraw .ToolIcon_type_floating .ToolIcon__icon:active{background-color:var(--button-gray-3)}.excalidraw .ToolIcon__keybinding{position:absolute;bottom:2px;right:3px;font-size:.625rem;color:var(--keybinding-color);font-family:var(--ui-font);-webkit-user-select:none;user-select:none}:root[dir=ltr] .excalidraw .unlocked-icon{left:2px}:root[dir=rtl] .excalidraw .unlocked-icon{right:2px}.excalidraw .App-toolbar-container .ToolIcon__icon{width:var(--lg-button-size);height:var(--lg-button-size)}.excalidraw .App-toolbar-container .ToolIcon__icon svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}",""]),h.Z=v},9144:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .App-toolbar.zen-mode .ToolIcon__keybinding,.excalidraw .App-toolbar.zen-mode .HintViewer{display:none}.excalidraw .App-toolbar__divider{width:1px;height:1.5rem;align-self:center;background-color:var(--default-border-color);margin:0 .25rem}.excalidraw .App-toolbar__extra-tools-trigger{box-shadow:none;border:0}.excalidraw .App-toolbar__extra-tools-trigger:active{background-color:var(--button-hover-bg);box-shadow:0 0 0 1px var(--button-active-border, var(--color-primary-darkest)) inset}.excalidraw .App-toolbar__extra-tools-dropdown{margin-top:.375rem;right:0;min-width:11.875rem}",""]),h.Z=v},6626:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw-tooltip{--ui-font: Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;font-family:var(--ui-font);position:fixed;z-index:var(--zIndex-popup);padding:8px;border-radius:6px;box-sizing:border-box;pointer-events:none;word-wrap:break-word;background:#000;line-height:1.5;text-align:center;font-size:13px;font-weight:500;color:#fff;display:none}.excalidraw-tooltip.excalidraw-tooltip--visible{display:block}.excalidraw-tooltip-wrapper{display:flex}.excalidraw-tooltip-icon{width:.9em;height:.9em;margin-left:5px;margin-top:1px;display:flex}.excalidraw--mobile.excalidraw-tooltip-icon{display:none}",""]),h.Z=v},6359:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .UserList{pointer-events:none;padding:var(--space-factor) var(--space-factor) var(--space-factor) var(--space-factor);display:flex;flex-wrap:wrap;justify-content:flex-end;align-items:center;gap:.625rem;max-height:140px;max-width:290px;overflow:hidden}.excalidraw .UserList:empty{display:none}.excalidraw .UserList>*{pointer-events:all}.excalidraw .UserList_mobile{padding:0;justify-content:normal;margin:.5rem 0}",""]),h.Z=v},7399:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .dropdown-menu{position:absolute;top:100%;margin-top:.25rem}.excalidraw .dropdown-menu--mobile{bottom:55px;top:auto;left:0;width:100%;row-gap:.75rem}.excalidraw .dropdown-menu--mobile .dropdown-menu-container{padding:8px 8px;box-sizing:border-box;background-color:var(--island-bg-color);box-shadow:var(--shadow-island);border-radius:var(--border-radius-lg);position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .dropdown-menu--mobile .dropdown-menu-container.zen-mode{box-shadow:none}.excalidraw .dropdown-menu .dropdown-menu-container{background-color:#fff !important;max-height:calc(100vh - 150px);overflow-y:auto;--gap: 2}.excalidraw .dropdown-menu .dropdown-menu-item-base{display:flex;padding:0 .625rem;-webkit-column-gap:.625rem;column-gap:.625rem;font-size:.875rem;color:var(--color-gray-100);width:100%;box-sizing:border-box;font-weight:normal;font-family:inherit}.excalidraw .dropdown-menu .dropdown-menu-item{background-color:rgba(0,0,0,0);border:0;align-items:center;height:2rem;cursor:pointer;border-radius:var(--border-radius-md)}@media screen and (min-width: 1921px){.excalidraw .dropdown-menu .dropdown-menu-item{height:2.25rem}}.excalidraw .dropdown-menu .dropdown-menu-item__text{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.excalidraw .dropdown-menu .dropdown-menu-item__shortcut{-webkit-margin-start:auto;margin-inline-start:auto;opacity:.5}.excalidraw .dropdown-menu .dropdown-menu-item:hover{background-color:var(--button-hover-bg);text-decoration:none}.excalidraw .dropdown-menu .dropdown-menu-item svg{width:1rem;height:1rem;display:block}.excalidraw .dropdown-menu .dropdown-menu-item-custom{margin-top:.5rem}.excalidraw .dropdown-menu .dropdown-menu-group-title{font-size:14px;text-align:left;margin:10px 0;font-weight:500}.excalidraw.theme--dark .dropdown-menu-item{color:var(--color-gray-40)}.excalidraw.theme--dark .dropdown-menu-container{background-color:var(--color-gray-90) !important}.excalidraw .dropdown-menu-button{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--island-bg-color);width:var(--lg-button-size);height:var(--lg-button-size)}.excalidraw .dropdown-menu-button svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .dropdown-menu-button:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .dropdown-menu-button:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .dropdown-menu-button.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .dropdown-menu-button.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .dropdown-menu-button.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .dropdown-menu-button svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .dropdown-menu-button--mobile{border:none;margin:0;padding:0;width:var(--default-button-size);height:var(--default-button-size)}",""]),h.Z=v},8793:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".footer-center{pointer-events:none;display:flex;width:100%;justify-content:flex-start}.footer-center>*{pointer-events:all}",""]),h.Z=v},3397:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,':export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw .collab-button{--button-bg: var(--color-primary);--button-color: white;--button-border: var(--color-primary);--button-width: var(--lg-button-size);--button-height: var(--lg-button-size);--button-hover-bg: var(--color-primary-darker);--button-hover-border: var(--color-primary-darker);--button-active-bg: var(--color-primary-darker);flex-shrink:0}.excalidraw .collab-button.active.active{background-color:#0fb884;border-color:#0fb884}.excalidraw .collab-button.active.active svg{color:#fff}.excalidraw .collab-button.active.active:hover,.excalidraw .collab-button.active.active:active{background-color:#0fb884;border-color:#0fb884}.excalidraw.theme--dark .collab-button{color:var(--color-gray-90)}.excalidraw .CollabButton.is-collaborating{background-color:var(--button-special-active-bg-color)}.excalidraw .CollabButton.is-collaborating .ToolIcon__icon svg,.excalidraw .CollabButton.is-collaborating .ToolIcon__label{color:var(--icon-green-fill-color)}.excalidraw .CollabButton-collaborators{min-width:1em;min-height:1em;line-height:1;position:absolute;bottom:-5px;padding:3px;border-radius:50%;background-color:#b2f2bb;color:#2b8a3e;font-size:.6rem;font-family:"Cascadia"}:root[dir=ltr] .excalidraw .CollabButton-collaborators{right:-5px}:root[dir=rtl] .excalidraw .CollabButton-collaborators{left:-5px}',""]),h.Z=v},4343:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".excalidraw .ActiveFile .ActiveFile__fileName{display:flex;align-items:center}.excalidraw .ActiveFile .ActiveFile__fileName span{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:9.3em}.excalidraw .ActiveFile .ActiveFile__fileName svg{width:1.15em;-webkit-margin-end:.3em;margin-inline-end:.3em;-webkit-transform:scaleY(0.9);transform:scaleY(0.9)}",""]),h.Z=v},1569:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,'.excalidraw .virgil{font-family:"Virgil"}.excalidraw .welcome-screen-decor{pointer-events:none;color:var(--color-gray-40)}.excalidraw.theme--dark .welcome-screen-decor{color:var(--color-gray-60)}@media(max-height: 599px){.excalidraw .welcome-screen-decor-hint{display:none !important}}@media(max-width: 1024px),(max-width: 800px){.excalidraw .welcome-screen-decor-hint .welcome-screen-decor--help,.excalidraw .welcome-screen-decor-hint .welcome-screen-decor--menu{display:none}}.excalidraw .welcome-screen-decor-hint--help{display:flex;position:absolute;right:0;bottom:100%}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--help{left:0;right:auto}.excalidraw .welcome-screen-decor-hint--help svg{margin-top:.5rem;width:85px;height:71px;-webkit-transform:scaleX(-1) rotate(80deg);transform:scaleX(-1) rotate(80deg)}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--help svg{-webkit-transform:rotate(80deg);transform:rotate(80deg)}.excalidraw .welcome-screen-decor-hint--toolbar{position:absolute;top:100%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin-top:2.5rem;display:flex;align-items:baseline}.excalidraw .welcome-screen-decor-hint--toolbar .welcome-screen-decor-hint__label{width:120px;position:relative;top:-0.5rem}.excalidraw .welcome-screen-decor-hint--toolbar svg{width:38px;height:78px}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--toolbar svg{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.excalidraw .welcome-screen-decor-hint--menu{position:absolute;width:320px;font-size:1rem;top:100%;margin-top:.25rem;-webkit-margin-start:.6rem;margin-inline-start:.6rem;display:flex;align-items:flex-end;gap:.5rem}.excalidraw .welcome-screen-decor-hint--menu svg{width:41px;height:94px}:root[dir=rtl] .excalidraw .welcome-screen-decor-hint--menu svg{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@media(max-width: 860px){.excalidraw .welcome-screen-decor-hint--menu .welcome-screen-decor-hint__label{max-width:160px}}.excalidraw .welcome-screen-center{display:flex;flex-direction:column;gap:2rem;justify-content:center;align-items:center;position:absolute;pointer-events:none;left:1rem;top:1rem;right:1rem;bottom:1rem}.excalidraw .welcome-screen-center__logo{display:flex;align-items:center;-webkit-column-gap:.75rem;column-gap:.75rem;font-size:2.25rem}.excalidraw .welcome-screen-center__logo svg{width:1.625rem;height:auto}.excalidraw .welcome-screen-center__heading{font-size:1.125rem;text-align:center}.excalidraw .welcome-screen-menu{display:flex;flex-direction:column;gap:2px;justify-content:center;align-items:center}.excalidraw .welcome-screen-menu-item{box-sizing:border-box;pointer-events:all;color:var(--color-gray-50);font-size:.875rem;width:100%;min-width:300px;max-width:400px;display:grid;align-items:center;justify-content:space-between;background:none;border:none;padding:.75rem;border-radius:var(--border-radius-md);grid-template-columns:calc(var(--default-icon-size) + .5rem) 1fr 3rem}.excalidraw .welcome-screen-menu-item__text{display:flex;align-items:center;margin-right:auto;text-align:left;-webkit-column-gap:.5rem;column-gap:.5rem}.excalidraw .welcome-screen-menu-item__icon{width:var(--default-icon-size);height:var(--default-icon-size)}.excalidraw .welcome-screen-menu-item__shortcut{margin-left:auto;color:var(--color-gray-40);font-size:.75rem}.excalidraw:not(:active) .welcome-screen-menu-item:hover{text-decoration:none;background:var(--color-gray-10)}.excalidraw:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut{color:var(--color-gray-50)}.excalidraw:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__text{color:var(--color-gray-100)}.excalidraw .welcome-screen-menu-item:active{background:var(--color-gray-20)}.excalidraw .welcome-screen-menu-item:active .welcome-screen-menu-item__shortcut{color:var(--color-gray-50)}.excalidraw .welcome-screen-menu-item:active .welcome-screen-menu-item__text{color:var(--color-gray-100)}.excalidraw .welcome-screen-menu-item:active--promo{color:var(--color-promo) !important}.excalidraw .welcome-screen-menu-item:active--promo:hover .welcome-screen-menu-item__text{color:var(--color-promo) !important}.excalidraw.theme--dark .welcome-screen-menu-item{color:var(--color-gray-60)}.excalidraw.theme--dark .welcome-screen-menu-item__shortcut{color:var(--color-gray-60)}.excalidraw.theme--dark:not(:active) .welcome-screen-menu-item:hover{background:var(--color-gray-85)}.excalidraw.theme--dark:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__shortcut{color:var(--color-gray-50)}.excalidraw.theme--dark:not(:active) .welcome-screen-menu-item:hover .welcome-screen-menu-item__text{color:var(--color-gray-10)}.excalidraw.theme--dark .welcome-screen-menu-item:active{background-color:var(--color-gray-90)}.excalidraw.theme--dark .welcome-screen-menu-item:active .welcome-screen-menu-item__text{color:var(--color-gray-10)}@media(max-height: 599px){.excalidraw .welcome-screen-center{margin-top:4rem}}@media(min-height: 600px)and (max-height: 900px){.excalidraw .welcome-screen-center{margin-top:8rem}}@media(max-height: 500px),(max-width: 320px){.excalidraw .welcome-screen-center{display:none}}',""]),h.Z=v},9915:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,".visually-hidden{position:absolute !important;height:1px;width:1px;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);white-space:nowrap;-webkit-user-select:none;user-select:none}.LoadingMessage{position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none}.LoadingMessage .Spinner{font-size:2.8em}.LoadingMessage .LoadingMessage-text{margin-top:1em;font-size:.8em}.LoadingMessage--dark{background-color:#121212;color:#ced4da}",""]),h.Z=v},9310:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b),w=c(1667),_=c.n(w),k=new URL(c(7984),c.b),y=new URL(c(1639),c.b),S=v()(m()),C=_()(k),I=_()(y);S.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}:export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw{--theme-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--button-special-active-bg-color: #ebfbee;--dialog-border-color: var(--color-gray-20);--dropdown-icon: url("+C+");--focus-highlight-color: #a5d8ff;--icon-fill-color: var(--color-gray-80);--icon-green-fill-color: #2b8a3e;--default-bg-color: #ffffff;--input-bg-color: #ffffff;--input-border-color: #ced4da;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: rgba(255, 255, 255, 0.96);--keybinding-color: var(--color-gray-40);--link-color: #1c7ed6;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: #ffffff;--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000000;--popup-text-inverted-color: #ffffff;--select-highlight-color: #339af0;--shadow-island: 0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702);--button-hover-bg: var(--color-gray-10);--default-border-color: var(--color-gray-30);--default-button-size: 2rem;--default-icon-size: 1rem;--lg-button-size: 2.25rem;--lg-icon-size: 1rem;--editor-container-padding: 1rem;--scrollbar-thumb: var(--button-gray-2);--scrollbar-thumb-hover: var(--button-gray-3);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-20);--sidebar-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--sidebar-border-color: var(--color-gray-20);--sidebar-bg-color: #fff;--library-dropdown-shadow: 0px 15px 6px rgba(0, 0, 0, 0.01), 0px 8px 5px rgba(0, 0, 0, 0.05), 0px 4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);--space-factor: 0.25rem;--text-primary-color: var(--color-gray-80);--color-selection: #6965db;--color-icon-white: #ffffff;--color-primary: #6965db;--color-primary-darker: #5b57d1;--color-primary-darkest: #4a47b1;--color-primary-light: #e3e2fe;--color-primary-light-darker: #d7d5ff;--color-gray-10: #f5f5f5;--color-gray-20: #ebebeb;--color-gray-30: #d6d6d6;--color-gray-40: #b8b8b8;--color-gray-50: #999999;--color-gray-60: #7a7a7a;--color-gray-70: #5c5c5c;--color-gray-80: #3d3d3d;--color-gray-85: #242424;--color-gray-90: #1e1e1e;--color-gray-100: #121212;--color-warning: #fceeca;--color-warning-dark: #f5c354;--color-warning-darker: #f3ab2c;--color-warning-darkest: #ec8b14;--color-text-warning: var(--text-primary-color);--color-danger: #db6965;--color-danger-dark: #db6965;--color-danger-darker: #d65550;--color-danger-darkest: #d1413c;--color-danger-text: black;--color-danger-background: #fff0f0;--color-danger-icon-background: #ffdad6;--color-danger-color: #700000;--color-danger-icon-color: #700000;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--text-primary-color);--color-warning-icon-color: var(--text-primary-color);--color-muted: var(--color-gray-30);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-100);--color-muted-background: var(--color-gray-80);--color-muted-background-darker: var(--color-gray-100);--color-promo: #e70078;--color-success: #268029;--color-success-lighter: #cafccc;--border-radius-md: 0.375rem;--border-radius-lg: 0.5rem}@media screen and (min-device-width: 1921px){.excalidraw{--lg-button-size: 2.5rem;--lg-icon-size: 1.25rem;--default-button-size: 2.25rem;--default-icon-size: 1.25rem}}.excalidraw.theme--dark.theme--dark-background-none{background:none}.excalidraw.theme--dark{--theme-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--button-special-active-bg-color: #204624;--dialog-border-color: var(--color-gray-80);--dropdown-icon: url("+I+');--focus-highlight-color: #228be6;--icon-fill-color: var(--color-gray-40);--icon-green-fill-color: #69db7c;--default-bg-color: #121212;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #262627;--keybinding-color: var(--color-gray-60);--link-color: #4dabf7;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-bg-color: #2c2c2c;--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--text-primary-color: var(--color-gray-40);--button-hover-bg: var(--color-gray-80);--default-border-color: var(--color-gray-80);--shadow-island: 0px 13px 33px rgba(0, 0, 0, 0.07), 0px 4.13px 9.94853px rgba(0, 0, 0, 0.0456112), 0px 1.13px 4.13211px rgba(0, 0, 0, 0.035), 0px 0.769896px 1.4945px rgba(0, 0, 0, 0.0243888);--modal-shadow: 0px 100px 80px rgba(0, 0, 0, 0.07), 0px 41.7776px 33.4221px rgba(0, 0, 0, 0.0503198), 0px 22.3363px 17.869px rgba(0, 0, 0, 0.0417275), 0px 12.5216px 10.0172px rgba(0, 0, 0, 0.035), 0px 6.6501px 5.32008px rgba(0, 0, 0, 0.0282725), 0px 2.76726px 2.21381px rgba(0, 0, 0, 0.0196802);--avatar-border-color: var(--color-gray-85);--sidebar-border-color: var(--color-gray-85);--sidebar-bg-color: #191919;--scrollbar-thumb: #343a40;--scrollbar-thumb-hover: #495057;--color-selection: #3530c4;--color-icon-white: var(--color-gray-90);--color-primary: #a8a5ff;--color-primary-darker: #b2aeff;--color-primary-darkest: #beb9ff;--color-primary-light: #4f4d6f;--color-primary-light-darker: #43415e;--color-text-warning: var(--color-gray-80);--color-danger: #ffa8a5;--color-danger-dark: #672120;--color-danger-darker: #8f2625;--color-danger-darkest: #ac2b29;--color-danger-text: #fbcbcc;--color-danger-background: #fbcbcc;--color-danger-icon-background: #672120;--color-danger-color: #261919;--color-danger-icon-color: #fbcbcc;--color-warning-background: var(--color-warning);--color-warning-icon-background: var(--color-warning-dark);--color-warning-color: var(--color-gray-80);--color-warning-icon-color: var(--color-gray-80);--color-muted: var(--color-gray-80);--color-muted-darker: var(--color-gray-60);--color-muted-darkest: var(--color-gray-20);--color-muted-background: var(--color-gray-40);--color-muted-background-darker: var(--color-gray-20);--color-promo: #d297ff}:root{--zIndex-canvas: 1;--zIndex-wysiwyg: 2;--zIndex-layerUI: 3;--zIndex-modal: 1000;--zIndex-popup: 1001;--zIndex-toast: 999999;--sab: env(safe-area-inset-bottom);--sal: env(safe-area-inset-left);--sar: env(safe-area-inset-right);--sat: env(safe-area-inset-top)}.excalidraw{--ui-font: Assistant, system-ui, BlinkMacSystemFont, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;font-family:var(--ui-font);position:relative;overflow:hidden;color:var(--text-primary-color);display:flex;top:0;bottom:0;left:0;right:0;height:100%;width:100%;-webkit-user-select:none;user-select:none}.excalidraw button{cursor:pointer}.excalidraw:focus{outline:none}.excalidraw a{font-weight:500;text-decoration:none;color:var(--link-color)}.excalidraw a:hover{text-decoration:underline}.excalidraw canvas{touch-action:none;image-rendering:pixelated;image-rendering:-moz-crisp-edges;z-index:var(--zIndex-canvas)}.excalidraw__canvas{position:absolute}.excalidraw.theme--dark canvas{-webkit-filter:var(--theme-filter);filter:var(--theme-filter)}.excalidraw .FixedSideContainer{padding-top:var(--sat, 0);padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0)}.excalidraw .panelRow{display:flex;justify-content:space-between}.excalidraw .panelColumn{display:flex;flex-direction:column;row-gap:.75rem}.excalidraw .panelColumn h3,.excalidraw .panelColumn legend,.excalidraw .panelColumn .control-label{margin:0;margin-bottom:.25rem;font-size:.75rem;color:var(--text-primary-color);font-weight:normal;display:block}.excalidraw .panelColumn .control-label input{display:block;width:100%}.excalidraw .panelColumn legend{padding:0}.excalidraw .panelColumn .iconSelectList{flex-wrap:wrap;position:relative}.excalidraw .panelColumn .buttonList{flex-wrap:wrap;display:flex;-webkit-column-gap:.5rem;column-gap:.5rem;row-gap:.5rem}.excalidraw .panelColumn .buttonList label{font-size:.75rem}.excalidraw .panelColumn .buttonList input[type=radio],.excalidraw .panelColumn .buttonList input[type=button]{opacity:0;position:absolute;pointer-events:none}.excalidraw .panelColumn .buttonList .iconRow{margin-top:8px}.excalidraw .panelColumn fieldset{margin:0;padding:0;border:none}.excalidraw .divider{width:1px;background-color:#e9ecef;margin:1px}.excalidraw .welcome-screen-menu-item:focus-visible,.excalidraw .dropdown-menu-item:focus-visible,.excalidraw button:focus-visible,.excalidraw .buttonList label:focus-within,.excalidraw input:focus-visible{outline:rgba(0,0,0,0);box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .buttonList .ToolIcon__icon{all:unset !important;display:flex !important}.excalidraw .buttonList button{background-color:rgba(0,0,0,0)}.excalidraw .buttonList label,.excalidraw .buttonList button,.excalidraw .buttonList .zIndexButton{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));padding:0}.excalidraw .buttonList label svg,.excalidraw .buttonList button svg,.excalidraw .buttonList .zIndexButton svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .buttonList label:hover,.excalidraw .buttonList button:hover,.excalidraw .buttonList .zIndexButton:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .buttonList label:active,.excalidraw .buttonList button:active,.excalidraw .buttonList .zIndexButton:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .buttonList label.active,.excalidraw .buttonList button.active,.excalidraw .buttonList .zIndexButton.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .buttonList label.active:hover,.excalidraw .buttonList button.active:hover,.excalidraw .buttonList .zIndexButton.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .buttonList label.active svg,.excalidraw .buttonList button.active svg,.excalidraw .buttonList .zIndexButton.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .buttonList label svg,.excalidraw .buttonList button svg,.excalidraw .buttonList .zIndexButton svg{width:var(--default-icon-size);height:var(--default-icon-size)}.excalidraw .App-top-bar{z-index:var(--zIndex-layerUI);display:flex;flex-direction:column;align-items:center}.excalidraw .App-bottom-bar{position:absolute;top:0;bottom:0;left:0;right:0;--bar-padding: calc(4 * var(--space-factor));padding-top:max(var(--bar-padding), var(--sat,0));padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0);z-index:4;display:flex;align-items:flex-end;pointer-events:none}.excalidraw .App-bottom-bar>.Island{width:100%;max-width:100%;min-width:100%;box-sizing:border-box;max-height:100%;display:flex;flex-direction:column;pointer-events:initial}.excalidraw .App-bottom-bar>.Island .panelColumn{padding:8px 8px 0 8px}.excalidraw .App-toolbar{width:100%}.excalidraw .App-toolbar .eraser.ToolIcon:hover{--icon-fill-color: #fff;--keybinding-color: #fff}.excalidraw .App-toolbar .eraser.active{background-color:var(--color-primary)}.excalidraw .App-toolbar-content{display:flex;align-items:center;justify-content:space-between;padding:8px}.excalidraw .App-mobile-menu{width:100%;overflow-x:visible;overflow-y:auto;box-sizing:border-box;margin-bottom:var(--bar-padding)}.excalidraw .App-menu{display:grid;color:var(--icon-fill-color)}.excalidraw .shapes-section{display:flex;justify-content:center;pointer-events:none !important}.excalidraw .shapes-section>*{pointer-events:all}.excalidraw .App-menu_top{grid-template-columns:1fr 2fr 1fr;grid-gap:2rem;align-items:flex-start;cursor:default;pointer-events:none !important}@media(min-width: 1536px){.excalidraw .App-menu_top{grid-template-columns:1fr 1fr 1fr;grid-gap:3rem}}.excalidraw .layer-ui__wrapper:not(.disable-pointerEvents) .App-menu_top>*{pointer-events:all}.excalidraw .App-menu_top>*:first-child{justify-self:flex-start}.excalidraw .App-menu_top>*:last-child{justify-self:flex-end}.excalidraw .App-menu_bottom{position:absolute;bottom:1rem;display:flex;justify-content:space-between;align-items:flex-start;cursor:default;pointer-events:none !important;box-sizing:border-box;padding:0 1rem}.excalidraw .App-menu_bottom--transition-left section{width:185px}.excalidraw .App-menu_bottom section{display:flex}.excalidraw .App-menu_bottom>*:first-child{justify-self:flex-start}.excalidraw .App-menu_bottom>*:last-child{justify-self:flex-end}.excalidraw .App-menu_left{grid-template-rows:1fr auto 1fr;height:100%}.excalidraw .App-menu_right{grid-template-rows:1fr;height:100%}.excalidraw .App-menu__left{overflow-y:auto;padding:.75rem;width:202px;box-sizing:border-box;position:absolute}.excalidraw .dropdown-select{height:1.5rem;padding:0;-webkit-padding-start:.5rem;padding-inline-start:.5rem;-webkit-padding-end:1.5rem;padding-inline-end:1.5rem;color:var(--icon-fill-color);background-color:var(--button-gray-1);border-radius:var(--space-factor);border:1px solid var(--button-gray-2);font-size:.8rem;font-family:inherit;outline:none;-webkit-appearance:none;appearance:none;background-image:var(--dropdown-icon);background-repeat:no-repeat;background-position:right .7rem top 50%,0 0;background-size:.65em auto,100%}:root[dir=rtl] .excalidraw .dropdown-select{background-position:left .7rem top 50%,0 0}.excalidraw .dropdown-select:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .dropdown-select:hover{background-color:var(--button-gray-2)}.excalidraw .dropdown-select:active{background-color:var(--button-gray-2)}.excalidraw .dropdown-select__language{height:2rem;background-color:var(--island-bg-color);border-color:var(--default-border-color) !important;cursor:pointer}.excalidraw .dropdown-select__language:hover{background-color:var(--island-bg-color)}.excalidraw .disable-zen-mode{border-radius:var(--border-radius-lg);background-color:var(--color-gray-20);border:1px solid var(--color-gray-30);padding:10px 20px}.excalidraw .disable-zen-mode:hover{background-color:var(--color-gray-30)}.excalidraw .scroll-back-to-content{border-radius:var(--border-radius-lg);background-color:var(--island-bg-color);color:var(--icon-fill-color);border:1px solid var(--default-border-color);padding:10px 20px;position:absolute;left:50%;bottom:30px;-webkit-transform:translateX(-50%);transform:translateX(-50%);pointer-events:all;font-family:inherit}.excalidraw .scroll-back-to-content:hover{background-color:var(--button-hover-bg)}.excalidraw .scroll-back-to-content:active{border:1px solid var(--color-primary-darkest)}.excalidraw .help-icon{display:flex;justify-content:center;align-items:center;padding:.625rem;width:var(--button-width, var(--default-button-size));height:var(--button-height, var(--default-button-size));box-sizing:border-box;border-width:1px;border-style:solid;border-color:var(--button-border, var(--default-border-color));border-radius:var(--border-radius-lg);cursor:pointer;background-color:var(--button-bg, var(--island-bg-color));color:var(--button-color, var(--text-primary-color));background-color:var(--island-bg-color);width:var(--lg-button-size);height:var(--lg-button-size)}.excalidraw .help-icon svg{width:var(--button-width, var(--lg-icon-size));height:var(--button-height, var(--lg-icon-size))}.excalidraw .help-icon:hover{background-color:var(--button-hover-bg, var(--island-bg-color));border-color:var(--button-hover-border, var(--button-border, var(--default-border-color)));color:var(--button-hover-color, var(--button-color, var(--text-primary-color, inherit)))}.excalidraw .help-icon:active{background-color:var(--button-active-bg, var(--island-bg-color));border-color:var(--button-active-border, var(--color-primary-darkest))}.excalidraw .help-icon.active{background-color:var(--button-selected-bg, var(--color-primary-light));border-color:var(--button-selected-border, var(--color-primary-light))}.excalidraw .help-icon.active:hover{background-color:var(--button-selected-hover-bg, var(--color-primary-light))}.excalidraw .help-icon.active svg{color:var(--button-color, var(--color-primary-darker))}.excalidraw .help-icon svg{width:var(--lg-icon-size);height:var(--lg-icon-size)}.excalidraw .reset-zoom-button{font-family:var(--ui-font)}.excalidraw .finalize-button{display:grid;grid-auto-flow:column;gap:.4em;margin-top:auto;margin-bottom:auto;-webkit-margin-start:.6em;margin-inline-start:.6em}.excalidraw .undo-redo-buttons,.excalidraw .eraser-buttons{display:grid;grid-auto-flow:column;margin-top:auto;margin-bottom:auto;-webkit-margin-start:.6em;margin-inline-start:.6em}.excalidraw--mobile.excalidraw aside{display:none}.excalidraw--mobile.excalidraw .scroll-back-to-content{bottom:calc(80px + var(--sab, 0));z-index:-1}:root[dir=rtl] .excalidraw .rtl-mirror{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.excalidraw .zen-mode-visibility{visibility:visible;opacity:1;height:auto;width:auto;transition:opacity .5s}.excalidraw .zen-mode-visibility.zen-mode-visibility--hidden{visibility:hidden;opacity:0;height:0;width:0;transition:opacity .5s}.excalidraw .disable-pointerEvents{pointer-events:none !important}.excalidraw.excalidraw--view-mode .App-menu{display:flex;justify-content:space-between}.excalidraw input[type=text],.excalidraw textarea:not(.excalidraw-wysiwyg){color:var(--text-primary-color);border:1.5px solid var(--input-border-color);padding:.75rem;white-space:nowrap;border-radius:var(--space-factor);background-color:var(--input-bg-color)}.excalidraw input[type=text]:not(:focus):hover,.excalidraw textarea:not(.excalidraw-wysiwyg):not(:focus):hover{background-color:var(--input-hover-bg-color)}.excalidraw input[type=text]:focus,.excalidraw textarea:not(.excalidraw-wysiwyg):focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}@media print{.excalidraw .App-bottom-bar,.excalidraw .FixedSideContainer,.excalidraw .layer-ui__wrapper{display:none}}.excalidraw ::-webkit-scrollbar{width:3px;height:3px}.excalidraw select::-webkit-scrollbar{width:10px}.excalidraw ::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:10px}.excalidraw ::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover)}.excalidraw ::-webkit-scrollbar-thumb:active{background:var(--scrollbar-thumb)}.excalidraw .mobile-misc-tools-container{position:absolute;top:calc(5rem - var(--editor-container-padding));right:calc(var(--editor-container-padding)*-1);display:flex;flex-direction:column;border:1px solid var(--sidebar-border-color);border-top-left-radius:var(--border-radius-lg);border-bottom-left-radius:var(--border-radius-lg);border-right:0;overflow:hidden;background-color:var(--island-bg-color)}.excalidraw .mobile-misc-tools-container .ToolIcon__icon{border-radius:0}.excalidraw .mobile-misc-tools-container .default-sidebar-trigger{border:0}.excalidraw .App-toolbar--mobile{overflow-x:auto;max-width:90vw}.excalidraw .App-toolbar--mobile .ToolIcon__keybinding{display:none}.excalidraw .UserList-Wrapper{margin:0;padding:0;border:none;text-align:left}.excalidraw .UserList-Wrapper legend{display:block;font-size:.75rem;font-weight:400;margin:0 0 .25rem;padding:0}.ErrorSplash.excalidraw{min-height:100vh;padding:20px 0;overflow:auto;display:flex;align-items:center;justify-content:center;-webkit-user-select:text;user-select:text}.ErrorSplash.excalidraw .ErrorSplash-messageContainer{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background-color:#ffe3e3;border:3px solid #c92a2a}.ErrorSplash.excalidraw .ErrorSplash-paragraph{margin:15px 0;max-width:600px}.ErrorSplash.excalidraw .ErrorSplash-paragraph.align-center{text-align:center}.ErrorSplash.excalidraw .bigger,.ErrorSplash.excalidraw .bigger button{font-size:1.1em}.ErrorSplash.excalidraw .smaller,.ErrorSplash.excalidraw .smaller button{font-size:.9em}.ErrorSplash.excalidraw .ErrorSplash-details{display:flex;flex-direction:column;align-items:flex-start}.ErrorSplash.excalidraw .ErrorSplash-details textarea{width:100%;margin:10px 0;font-family:"Cascadia";font-size:.8em}',""]),h.Z=S},6464:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,"",""]),v.locals={themeFilter:"invert(93%) hue-rotate(180deg)",rightSidebarWidth:"302px"},h.Z=v},5260:function(f,h,c){var g=c(8081),m=c.n(g),b=c(3645),v=c.n(b)()(m());v.push([f.id,":export{themeFilter:invert(93%) hue-rotate(180deg);rightSidebarWidth:302px}.excalidraw-hyperlinkContainer{display:flex;align-items:center;justify-content:space-between;position:absolute;box-shadow:0px 2px 4px 0 rgba(0,0,0,.3);z-index:100;background:var(--island-bg-color);border-radius:var(--border-radius-md);box-sizing:border-box;min-height:42px}.excalidraw-hyperlinkContainer-input,.excalidraw-hyperlinkContainer button{z-index:100}.excalidraw-hyperlinkContainer-input,.excalidraw-hyperlinkContainer-link{height:24px;padding:0 8px;line-height:24px;font-size:.9rem;font-weight:500;font-family:var(--ui-font)}.excalidraw-hyperlinkContainer-input{width:18rem;border:none;background-color:rgba(0,0,0,0);color:var(--text-primary-color);outline:none;border:none;box-shadow:none !important}.excalidraw-hyperlinkContainer-link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:15rem}.excalidraw-hyperlinkContainer button{color:#228be6;background-color:rgba(0,0,0,0) !important;font-weight:500}.excalidraw-hyperlinkContainer button.excalidraw-hyperlinkContainer--remove{color:#c92a2a}.excalidraw-hyperlinkContainer .d-none{display:none}.excalidraw-hyperlinkContainer--remove .ToolIcon__icon svg{color:#fa5252}.excalidraw-hyperlinkContainer .ToolIcon__icon{width:2rem;height:2rem}.excalidraw-hyperlinkContainer__buttons{flex:0 0 auto}",""]),h.Z=v},3645:function(f){f.exports=function(h){var c=[];return c.toString=function(){return this.map(function(g){var m="",b=g[5]!==void 0;return g[4]&&(m+="@supports (".concat(g[4],") {")),g[2]&&(m+="@media ".concat(g[2]," {")),b&&(m+="@layer".concat(g[5].length>0?" ".concat(g[5]):""," {")),m+=h(g),b&&(m+="}"),g[2]&&(m+="}"),g[4]&&(m+="}"),m}).join("")},c.i=function(g,m,b,v,w){typeof g=="string"&&(g=[[null,g,void 0]]);var _={};if(b)for(var k=0;k<this.length;k++){var y=this[k][0];y!=null&&(_[y]=!0)}for(var S=0;S<g.length;S++){var C=[].concat(g[S]);b&&_[C[0]]||(w!==void 0&&(C[5]===void 0||(C[1]="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {").concat(C[1],"}")),C[5]=w),m&&(C[2]&&(C[1]="@media ".concat(C[2]," {").concat(C[1],"}")),C[2]=m),v&&(C[4]?(C[1]="@supports (".concat(C[4],") {").concat(C[1],"}"),C[4]=v):C[4]="".concat(v)),c.push(C))}},c}},1667:function(f){f.exports=function(h,c){return c||(c={}),h&&(h=String(h.__esModule?h.default:h),/^['"].*['"]$/.test(h)&&(h=h.slice(1,-1)),c.hash&&(h+=c.hash),/["'() \t\n]|(%20)/.test(h)||c.needQuotes?'"'.concat(h.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):h)}},8081:function(f){f.exports=function(h){return h[1]}},202:function(f,h,c){c.d(h,{JQ:function(){return pe},vD:function(){return ee},y7:function(){return $}});var g=c(1930),m=c(7169),b=c(2335),v=c(1047),w=c(1935),_=c(5710),k=c(6906),y=c(1974),S=c(75),C=c(6340),I=c(7901);function A(ie,te){var Z=typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(!Z){if(Array.isArray(ie)||(Z=function(Y,E){if(Y){if(typeof Y=="string")return T(Y,E);var W=Object.prototype.toString.call(Y).slice(8,-1);if(W==="Object"&&Y.constructor&&(W=Y.constructor.name),W==="Map"||W==="Set")return Array.from(Y);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return T(Y,E)}}(ie))||te&&ie&&typeof ie.length=="number"){Z&&(ie=Z);var D=0,B=function(){};return{s:B,n:function(){return D>=ie.length?{done:!0}:{done:!1,value:ie[D++]}},e:function(Y){throw Y},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H,V=!0,R=!1;return{s:function(){Z=Z.call(ie)},n:function(){var Y=Z.next();return V=Y.done,Y},e:function(Y){R=!0,H=Y},f:function(){try{V||Z.return==null||Z.return()}finally{if(R)throw H}}}}function T(ie,te){(te==null||te>ie.length)&&(te=ie.length);for(var Z=0,D=new Array(te);Z<te;Z++)D[Z]=ie[Z];return D}function L(ie,te){var Z=Object.keys(ie);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(ie);te&&(D=D.filter(function(B){return Object.getOwnPropertyDescriptor(ie,B).enumerable})),Z.push.apply(Z,D)}return Z}function j(ie){for(var te=1;te<arguments.length;te++){var Z=arguments[te]!=null?arguments[te]:{};te%2?L(Object(Z),!0).forEach(function(D){(0,m.Z)(ie,D,Z[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(Z)):L(Object(Z)).forEach(function(D){Object.defineProperty(ie,D,Object.getOwnPropertyDescriptor(Z,D))})}return ie}var $=(0,I.z)({name:"unbindText",contextItemLabel:"labels.unbindText",trackEvent:{category:"element"},predicate:function(ie,te){return(0,S.eD)(ie,te).some(function(Z){return(0,y.Xo)(Z)})},perform:function(ie,te){return(0,S.eD)((0,v.Lm)(ie),te).forEach(function(Z){var D=(0,_.WJ)(Z);if(D){var B,H=(0,_.X1)(D.originalText,(0,C.mO)(D),D.lineHeight),V=H.width,R=H.height,Y=H.baseline,E=(0,k.eR)(Z.id);(0,k.kT)(Z.id);var W=(0,_.FE)(Z,D),F=W.x,z=W.y;(0,w.DR)(D,{containerId:null,width:V,height:R,baseline:Y,text:D.originalText,x:F,y:z}),(0,w.DR)(Z,{boundElements:(B=Z.boundElements)===null||B===void 0?void 0:B.filter(function(q){return q.id!==D.id}),height:E||Z.height})}}),{elements:ie,appState:te,commitToHistory:!0}}}),ee=(0,I.z)({name:"bindText",contextItemLabel:"labels.bindText",trackEvent:{category:"element"},predicate:function(ie,te){var Z=(0,S.eD)(ie,te);if(Z.length===2){var D,B=(0,v.iB)(Z[0])||(0,v.iB)(Z[1]);if((0,y.mG)(Z[0])?D=Z[0]:(0,y.mG)(Z[1])&&(D=Z[1]),B&&D&&(0,_.WJ)(D)===null)return!0}return!1},perform:function(ie,te){var Z,D,B=(0,S.eD)((0,v.Lm)(ie),te);(0,v.iB)(B[0])&&(0,y.mG)(B[1])?(Z=B[0],D=B[1]):(Z=B[1],D=B[0]),(0,w.DR)(Z,{containerId:D.id,verticalAlign:b.oX.MIDDLE,textAlign:b.I8.CENTER}),(0,w.DR)(D,{boundElements:(D.boundElements||[]).concat({type:"text",id:Z.id})});var H=D.height;return(0,_.oN)(Z,D),(0,k.h_)(D.id,H),{elements:Q(ie,D,Z),appState:j(j({},te),{},{selectedElementIds:(0,m.Z)({},D.id,!0)}),commitToHistory:!0}}}),Q=function(ie,te,Z){var D=ie.slice(),B=D.findIndex(function(V){return V.id===Z.id});D.splice(B,1);var H=D.findIndex(function(V){return V.id===te.id});return D.splice(H+1,0,Z),D},pe=(0,I.z)({name:"wrapTextInContainer",contextItemLabel:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:function(ie,te){var Z=(0,S.eD)(ie,te),D=Z.every(function(B){return(0,v.iB)(B)});return Z.length>0&&D},perform:function(ie,te){var Z,D=(0,S.eD)((0,v.Lm)(ie),te),B=ie.slice(),H={},V=A(D);try{var R=function(){var Y=Z.value;if((0,v.iB)(Y)){var E,W=(0,v.Up)({type:"rectangle",backgroundColor:te.currentItemBackgroundColor,boundElements:[].concat((0,g.Z)(Y.boundElements||[]),[{id:Y.id,type:"text"}]),angle:Y.angle,fillStyle:te.currentItemFillStyle,strokeColor:te.currentItemStrokeColor,roughness:te.currentItemRoughness,strokeWidth:te.currentItemStrokeWidth,strokeStyle:te.currentItemStrokeStyle,roundness:te.currentItemRoundness==="round"?{type:(0,y.QI)("rectangle")?b.a6.ADAPTIVE_RADIUS:b.a6.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:Y.x-b.gK,y:Y.y-b.gK,width:(0,_.NS)(Y.width,"rectangle"),height:(0,_.NS)(Y.height,"rectangle"),groupIds:Y.groupIds,frameId:Y.frameId});if((E=Y.boundElements)!==null&&E!==void 0&&E.length){var F=Y.boundElements.filter(function(z){return z.type==="arrow"}).map(function(z){return z.id});B.filter(function(z){return F.includes(z.id)}).forEach(function(z){var q,fe,ce=z.startBinding,U=z.endBinding;((q=ce)===null||q===void 0?void 0:q.elementId)===Y.id&&(ce=j(j({},ce),{},{elementId:W.id})),((fe=U)===null||fe===void 0?void 0:fe.elementId)===Y.id&&(U=j(j({},U),{},{elementId:W.id})),(ce||U)&&(0,w.DR)(z,{startBinding:ce,endBinding:U},!1)})}(0,w.DR)(Y,{containerId:W.id,verticalAlign:b.oX.MIDDLE,boundElements:null,textAlign:b.I8.CENTER},!1),(0,_.oN)(Y,W),B=function(z,q,fe){var ce=z.slice(),U=ce.findIndex(function(oe){return oe.id===q.id});ce.splice(U,1);var ve=ce.findIndex(function(oe){return oe.id===fe.id});return ce.splice(ve,0,q),ce}([].concat((0,g.Z)(B),[W]),W,Y),H[W.id]=!0}};for(V.s();!(Z=V.n()).done;)R()}catch(Y){V.e(Y)}finally{V.f()}return{elements:B,appState:j(j({},te),{},{selectedElementIds:H}),commitToHistory:!0}}})},2416:function(f,h,c){c.d(h,{CZ:function(){return H},Lo:function(){return B},Zp:function(){return Y},eF:function(){return E},md:function(){return R},mo:function(){return D}});var g=c(2577),m=c(7169),b=c(2508),v=c(3646),w=c(1319),_=c(2335),k=c(1047),y=c(8211),S=c(6066),C=c(75),I=c(2264),A=c(746),T=c(6340),L=c(7901),j=c(1894),$=c(1935),ee=c(8897),Q=c(56),pe=c(1868),ie=c(9980);function te(W,F){var z=Object.keys(W);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(W);F&&(q=q.filter(function(fe){return Object.getOwnPropertyDescriptor(W,fe).enumerable})),z.push.apply(z,q)}return z}function Z(W){for(var F=1;F<arguments.length;F++){var z=arguments[F]!=null?arguments[F]:{};F%2?te(Object(z),!0).forEach(function(q){(0,m.Z)(W,q,z[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(z)):te(Object(z)).forEach(function(q){Object.defineProperty(W,q,Object.getOwnPropertyDescriptor(z,q))})}return W}(0,L.z)({name:"changeViewBackgroundColor",trackEvent:!1,predicate:function(W,F,z,q){return!!q.props.UIOptions.canvasActions.changeViewBackgroundColor&&!F.viewModeEnabled},perform:function(W,F,z){return{appState:Z(Z({},F),z),commitToHistory:!!z.viewBackgroundColor}},PanelComponent:function(W){var F=W.elements,z=W.appState,q=W.updateData;return W.appProps,(0,ie.jsx)(b.z,{palette:null,topPicks:Q.ay,label:(0,y.t)("labels.canvasBackground"),type:"canvasBackground",color:z.viewBackgroundColor,onChange:function(fe){return q({viewBackgroundColor:fe})},"data-testid":"canvas-background-picker",elements:F,appState:z,updateData:q})}});var D=(0,L.z)({name:"clearCanvas",trackEvent:{category:"canvas"},predicate:function(W,F,z,q){return!!q.props.UIOptions.canvasActions.clearCanvas&&!F.viewModeEnabled},perform:function(W,F,z,q){return q.imageCache.clear(),{elements:W.map(function(fe){return(0,$.BE)(fe,{isDeleted:!0})}),appState:Z(Z({},(0,ee.im)()),{},{files:{},theme:F.theme,penMode:F.penMode,penDetected:F.penDetected,exportBackground:F.exportBackground,exportEmbedScene:F.exportEmbedScene,gridSize:F.gridSize,showStats:F.showStats,pasteDialog:F.pasteDialog,activeTool:F.activeTool.type==="image"?Z(Z({},F.activeTool),{},{type:"selection"}):F.activeTool}),commitToHistory:!0}}}),B=(0,L.z)({name:"zoomIn",viewMode:!0,trackEvent:{category:"canvas"},perform:function(W,F,z,q){return{appState:Z(Z({},F),(0,A.E)({viewportX:F.width/2+F.offsetLeft,viewportY:F.height/2+F.offsetTop,nextZoom:(0,C.j)(F.zoom.value+_.V4)},F)),commitToHistory:!1}},PanelComponent:function(W){var F=W.updateData;return(0,ie.jsx)(w.V,{type:"button",className:"zoom-in-button zoom-button",icon:v.Sd,title:"".concat((0,y.t)("buttons.zoomIn"),"  ").concat((0,T.uY)("CtrlOrCmd++")),"aria-label":(0,y.t)("buttons.zoomIn"),onClick:function(){F(null)}})},keyTest:function(W){return(W.code===S.aU.EQUAL||W.code===S.aU.NUM_ADD)&&(W[S.tW.CTRL_OR_CMD]||W.shiftKey)}}),H=(0,L.z)({name:"zoomOut",viewMode:!0,trackEvent:{category:"canvas"},perform:function(W,F,z,q){return{appState:Z(Z({},F),(0,A.E)({viewportX:F.width/2+F.offsetLeft,viewportY:F.height/2+F.offsetTop,nextZoom:(0,C.j)(F.zoom.value-_.V4)},F)),commitToHistory:!1}},PanelComponent:function(W){var F=W.updateData;return(0,ie.jsx)(w.V,{type:"button",className:"zoom-out-button zoom-button",icon:v.xL,title:"".concat((0,y.t)("buttons.zoomOut"),"  ").concat((0,T.uY)("CtrlOrCmd+-")),"aria-label":(0,y.t)("buttons.zoomOut"),onClick:function(){F(null)}})},keyTest:function(W){return(W.code===S.aU.MINUS||W.code===S.aU.NUM_SUBTRACT)&&(W[S.tW.CTRL_OR_CMD]||W.shiftKey)}}),V=((0,L.z)({name:"resetZoom",viewMode:!0,trackEvent:{category:"canvas"},perform:function(W,F,z,q){return{appState:Z(Z({},F),(0,A.E)({viewportX:F.width/2+F.offsetLeft,viewportY:F.height/2+F.offsetTop,nextZoom:(0,C.j)(1)},F)),commitToHistory:!1}},PanelComponent:function(W){var F=W.updateData,z=W.appState;return(0,ie.jsx)(j.u,{label:(0,y.t)("buttons.resetZoom"),style:{height:"100%"},children:(0,ie.jsxs)(w.V,{type:"button",className:"reset-zoom-button zoom-button",title:(0,y.t)("buttons.resetZoom"),"aria-label":(0,y.t)("buttons.resetZoom"),onClick:function(){F(null)},children:[(100*z.zoom.value).toFixed(0),"%"]})})},keyTest:function(W){return(W.code===S.aU.ZERO||W.code===S.aU.NUM_ZERO)&&(W[S.tW.CTRL_OR_CMD]||W.shiftKey)}}),function(W,F){var z=(0,g.Z)(W,4),q=z[0],fe=z[1],ce=z[2],U=z[3],ve=ce-q,oe=F.width/ve,re=U-fe,ae=F.height/re,me=Math.min(oe,ae),he=Math.floor(me/_.V4)*_.V4;return Math.min(Math.max(he,_.E0),1)}),R=function(W,F,z){var q=(0,k.Lm)(W),fe=(0,C.eD)(q,F),ce=z&&fe.length>0?(0,k.KP)((0,pe.aI)(fe)):(0,k.KP)((0,pe.aI)(q)),U={value:V(ce,{width:F.width,height:F.height})},ve=(0,g.Z)(ce,4),oe=ve[0],re=ve[1],ae=(oe+ve[2])/2,me=(re+ve[3])/2;return{appState:Z(Z(Z({},F),(0,I.s)({scenePoint:{x:ae,y:me},viewportDimensions:{width:F.width,height:F.height},zoom:U})),{},{zoom:U}),commitToHistory:!1}},Y=((0,L.z)({name:"zoomToSelection",trackEvent:{category:"canvas"},perform:function(W,F){return R(W,F,!0)},keyTest:function(W){return W.code===S.aU.TWO&&W.shiftKey&&!W.altKey&&!W[S.tW.CTRL_OR_CMD]}}),(0,L.z)({name:"zoomToFit",viewMode:!0,trackEvent:{category:"canvas"},perform:function(W,F){return R(W,F,!1)},keyTest:function(W){return W.code===S.aU.ONE&&W.shiftKey&&!W.altKey&&!W[S.tW.CTRL_OR_CMD]}}),(0,L.z)({name:"toggleTheme",viewMode:!0,trackEvent:{category:"canvas"},perform:function(W,F,z){return{appState:Z(Z({},F),{},{theme:z||(F.theme===_.C6.LIGHT?_.C6.DARK:_.C6.LIGHT)}),commitToHistory:!1}},keyTest:function(W){return W.altKey&&W.shiftKey&&W.code===S.aU.D},predicate:function(W,F,z,q){return!!q.props.UIOptions.canvasActions.toggleTheme}})),E=((0,L.z)({name:"toggleEraserTool",trackEvent:{category:"toolbar"},perform:function(W,F){var z;return z=(0,ee.EN)(F)?(0,T.Om)(F,Z(Z({},F.activeTool.lastActiveTool||{type:"selection"}),{},{lastActiveToolBeforeEraser:null})):(0,T.Om)(F,{type:"eraser",lastActiveToolBeforeEraser:F.activeTool}),{appState:Z(Z({},F),{},{selectedElementIds:{},selectedGroupIds:{},activeTool:z}),commitToHistory:!0}},keyTest:function(W){return W.key===S.tW.E}}),(0,L.z)({name:"toggleHandTool",trackEvent:{category:"toolbar"},perform:function(W,F,z,q){var fe;return(0,ee.l$)(F)?fe=(0,T.Om)(F,Z(Z({},F.activeTool.lastActiveTool||{type:"selection"}),{},{lastActiveToolBeforeEraser:null})):(fe=(0,T.Om)(F,{type:"hand",lastActiveToolBeforeEraser:F.activeTool}),(0,T.KJ)(q.canvas,_.oc.GRAB)),{appState:Z(Z({},F),{},{selectedElementIds:{},selectedGroupIds:{},activeTool:fe}),commitToHistory:!0}},keyTest:function(W){return W.key===S.tW.H}}))},4688:function(f,h,c){c.d(h,{FA:function(){return ie},ZM:function(){return pe},jK:function(){return te},uN:function(){return ee},yQ:function(){return Q},zp:function(){return Z}});var g=c(7169),m=c(8950),b=c(2975),v=c.n(b),w=c(6066),_=c(7901),k=c(6665),y=c(533),S=c(1868),C=c(9485),I=c(1047),A=c(8211);function T(D,B){var H=Object.keys(D);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(D);B&&(V=V.filter(function(R){return Object.getOwnPropertyDescriptor(D,R).enumerable})),H.push.apply(H,V)}return H}function L(D){for(var B=1;B<arguments.length;B++){var H=arguments[B]!=null?arguments[B]:{};B%2?T(Object(H),!0).forEach(function(V){(0,g.Z)(D,V,H[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(H)):T(Object(H)).forEach(function(V){Object.defineProperty(D,V,Object.getOwnPropertyDescriptor(H,V))})}return D}var j,$,ee=(0,_.z)({name:"copy",trackEvent:{category:"element"},perform:function(D,B,H,V){var R=(0,S.eD)(D,B,{includeBoundTextElement:!0,includeElementsInFrames:!0});return(0,k.vQ)(R,V.files),{commitToHistory:!1}},predicate:function(D,B,H,V){return V.device.isMobile&&!!navigator.clipboard},contextItemLabel:"labels.copy",keyTest:void 0}),Q=(0,_.z)({name:"paste",trackEvent:{category:"element"},perform:function(D,B,H,V){return V.pasteFromClipboard(null),{commitToHistory:!1}},predicate:function(D,B,H,V){return V.device.isMobile&&!!navigator.clipboard},contextItemLabel:"labels.paste",keyTest:void 0}),pe=(0,_.z)({name:"cut",trackEvent:{category:"element"},perform:function(D,B,H,V){return ee.perform(D,B,H,V),y.X.perform(D,B)},predicate:function(D,B,H,V){return V.device.isMobile&&!!navigator.clipboard},contextItemLabel:"labels.cut",keyTest:function(D){return D[w.tW.CTRL_OR_CMD]&&D.key===w.tW.X}}),ie=(0,_.z)({name:"copyAsSvg",trackEvent:{category:"element"},perform:(j=(0,m.Z)(v().mark(function D(B,H,V,R){var Y;return v().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(R.canvas){E.next=2;break}return E.abrupt("return",{commitToHistory:!1});case 2:return Y=(0,S.eD)((0,I.Lm)(B),H,{includeBoundTextElement:!0,includeElementsInFrames:!0}),E.prev=3,E.next=6,(0,C.p1)("clipboard-svg",Y.length?Y:(0,I.Lm)(B),H,R.files,H);case 6:return E.abrupt("return",{commitToHistory:!1});case 9:return E.prev=9,E.t0=E.catch(3),console.error(E.t0),E.abrupt("return",{appState:L(L({},H),{},{errorMessage:E.t0.message}),commitToHistory:!1});case 13:case"end":return E.stop()}},D,null,[[3,9]])})),function(D,B,H,V){return j.apply(this,arguments)}),predicate:function(D){return k.wx&&D.length>0},contextItemLabel:"labels.copyAsSvg"}),te=(0,_.z)({name:"copyAsPng",trackEvent:{category:"element"},perform:($=(0,m.Z)(v().mark(function D(B,H,V,R){var Y;return v().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(R.canvas){E.next=2;break}return E.abrupt("return",{commitToHistory:!1});case 2:return Y=(0,S.eD)((0,I.Lm)(B),H,{includeBoundTextElement:!0,includeElementsInFrames:!0}),E.prev=3,E.next=6,(0,C.p1)("clipboard",Y.length?Y:(0,I.Lm)(B),H,R.files,H);case 6:return E.abrupt("return",{appState:L(L({},H),{},{toast:{message:(0,A.t)("toast.copyToClipboardAsPng",{exportSelection:Y.length?(0,A.t)("toast.selection"):(0,A.t)("toast.canvas"),exportColorScheme:H.exportWithDarkMode?(0,A.t)("buttons.darkMode"):(0,A.t)("buttons.lightMode")})}}),commitToHistory:!1});case 9:return E.prev=9,E.t0=E.catch(3),console.error(E.t0),E.abrupt("return",{appState:L(L({},H),{},{errorMessage:E.t0.message}),commitToHistory:!1});case 13:case"end":return E.stop()}},D,null,[[3,9]])})),function(D,B,H,V){return $.apply(this,arguments)}),predicate:function(D){return k.vt&&D.length>0},contextItemLabel:"labels.copyAsPng",keyTest:function(D){return D.code===w.aU.C&&D.altKey&&D.shiftKey}}),Z=(0,_.z)({name:"copyText",trackEvent:{category:"element"},perform:function(D,B){var H=(0,S.eD)((0,I.Lm)(D),B,{includeBoundTextElement:!0}).reduce(function(V,R){return(0,I.iB)(R)&&V.push(R.text),V},[]).join(`

`);return(0,k.dd)(H),{commitToHistory:!1}},predicate:function(D,B){return k.wx&&(0,S.eD)(D,B,{includeBoundTextElement:!0}).some(I.iB)},contextItemLabel:"labels.copyText"})},533:function(f,h,c){c.d(h,{X:function(){return pe}});var g=c(7169),m=c(75),b=c(6066),v=c(1319),w=c(8211),_=c(7901),k=c(1047),y=c(1935),S=c(242),C=c(6938),I=c(8290),A=c(1974),T=c(6340),L=c(3646),j=c(9980);function $(ie,te){var Z=Object.keys(ie);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(ie);te&&(D=D.filter(function(B){return Object.getOwnPropertyDescriptor(ie,B).enumerable})),Z.push.apply(Z,D)}return Z}function ee(ie){for(var te=1;te<arguments.length;te++){var Z=arguments[te]!=null?arguments[te]:{};te%2?$(Object(Z),!0).forEach(function(D){(0,g.Z)(ie,D,Z[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ie,Object.getOwnPropertyDescriptors(Z)):$(Object(Z)).forEach(function(D){Object.defineProperty(ie,D,Object.getOwnPropertyDescriptor(Z,D))})}return ie}var Q=function(ie,te){if(ie.editingGroupId){var Z=(0,S.Fb)((0,k.Lm)(te),ie.editingGroupId);if(Z.length)return ee(ee({},ie),{},{selectedElementIds:(0,g.Z)({},Z[0].id,!0)})}return ie},pe=(0,_.z)({name:"deleteSelectedElements",trackEvent:{category:"element",action:"delete"},perform:function(ie,te){if(te.editingLinearElement){var Z=te.editingLinearElement,D=Z.elementId,B=Z.selectedPointsIndices,H=Z.startBindingElement,V=Z.endBindingElement,R=C._.getElement(D);if(!R||B==null)return!1;if(R.points.length<2){var Y=ie.map(function(q){return q.id===R.id?(0,y.BE)(q,{isDeleted:!0}):q});return{elements:Y,appState:ee(ee({},Q(te,Y)),{},{editingLinearElement:null}),commitToHistory:!1}}var E={startBindingElement:B!=null&&B.includes(0)?null:H,endBindingElement:B!=null&&B.includes(R.points.length-1)?null:V};return C._.deletePoints(R,B),{elements:ie,appState:ee(ee({},te),{},{editingLinearElement:ee(ee(ee({},te.editingLinearElement),E),{},{selectedPointsIndices:(B==null?void 0:B[0])>0?[B[0]-1]:[0]})}),commitToHistory:!0}}var W=function(q,fe){var ce=new Set((0,m.eD)(q.filter(function(U){return U.type==="frame"}),fe).map(function(U){return U.id}));return{elements:q.map(function(U){return fe.selectedElementIds[U.id]||U.frameId&&ce.has(U.frameId)||(0,A.Xh)(U)&&fe.selectedElementIds[U.containerId]?(0,y.BE)(U,{isDeleted:!0}):U}),appState:ee(ee({},fe),{},{selectedElementIds:{}})}}(ie,te),F=W.elements,z=W.appState;return(0,I.$q)(F,ie.filter(function(q){var fe=q.id;return te.selectedElementIds[fe]})),{elements:F,appState:ee(ee({},z=Q(z,F)),{},{activeTool:(0,T.Om)(te,{type:"selection"}),multiElement:null}),commitToHistory:(0,m.N)((0,k.Lm)(ie),te)}},contextItemLabel:"labels.delete",keyTest:function(ie,te,Z){return(ie.key===b.tW.BACKSPACE||ie.key===b.tW.DELETE)&&!ie[b.tW.CTRL_OR_CMD]},PanelComponent:function(ie){var te=ie.elements,Z=ie.appState,D=ie.updateData;return(0,j.jsx)(v.V,{type:"button",icon:L.XH,title:(0,w.t)("labels.delete"),"aria-label":(0,w.t)("labels.delete"),onClick:function(){return D(null)},visible:(0,m.N)((0,k.Lm)(te),Z)})}})},3248:function(f,h,c){c.d(h,{$:function(){return C},U:function(){return I}});var g=c(7169),m=c(1935),b=c(6066),v=c(75),w=c(6340),_=c(7901);function k(A,T){var L=Object.keys(A);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(A);T&&(j=j.filter(function($){return Object.getOwnPropertyDescriptor(A,$).enumerable})),L.push.apply(L,j)}return L}function y(A){for(var T=1;T<arguments.length;T++){var L=arguments[T]!=null?arguments[T]:{};T%2?k(Object(L),!0).forEach(function(j){(0,g.Z)(A,j,L[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(L)):k(Object(L)).forEach(function(j){Object.defineProperty(A,j,Object.getOwnPropertyDescriptor(L,j))})}return A}var S=function(A){return A.every(function(T){return!T.locked})},C=(0,_.z)({name:"toggleElementLock",trackEvent:{category:"element"},predicate:function(A,T){return!(0,v.eD)(A,T).some(function(L){return L.locked&&L.frameId})},perform:function(A,T){var L=(0,v.eD)(A,T,{includeBoundTextElement:!0,includeElementsInFrames:!0});if(!L.length)return!1;var j=S(L),$=(0,w.xn)(L);return{elements:A.map(function(ee){return $.has(ee.id)?(0,m.BE)(ee,{locked:j}):ee}),appState:y(y({},T),{},{selectedLinearElement:j?null:T.selectedLinearElement}),commitToHistory:!0}},contextItemLabel:function(A,T){var L=(0,v.eD)(A,T,{includeBoundTextElement:!1});return L.length===1&&L[0].type!=="frame"?L[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":S(L)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},keyTest:function(A,T,L){return A.key.toLocaleLowerCase()===b.tW.L&&A[b.tW.CTRL_OR_CMD]&&A.shiftKey&&(0,v.eD)(L,T,{includeBoundTextElement:!1}).length>0}}),I=(0,_.z)({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,predicate:function(A){return A.some(function(T){return T.locked})},perform:function(A,T){var L=A.filter(function(j){return j.locked});return{elements:A.map(function(j){return j.locked?(0,m.BE)(j,{locked:!1}):j}),appState:y(y({},T),{},{selectedElementIds:Object.fromEntries(L.map(function(j){return[j.id,!0]}))}),commitToHistory:!0}},contextItemLabel:"labels.elementLock.unlockAll"})},8671:function(f,h,c){c.d(h,{XA:function(){return Ne},Du:function(){return Me},sK:function(){return Pe},zX:function(){return xe},bJ:function(){return Be},_d:function(){return Se},mM:function(){return We},ns:function(){return Re}});var g=c(8950),m=c(2577),b=c(7169),v=c(2975),w=c.n(v),_=c(3646),k=c(487),y=c.n(k),S=c(631),C=c.n(S),I=c(2052),A=c.n(I),T=c(4010),L=c.n(T),j=c(1469),$=c.n(j),ee=c(9329),Q=c.n(ee),pe=c(6759),ie={};ie.styleTagTransform=Q(),ie.setAttributes=L(),ie.insert=A().bind(null,"head"),ie.domAPI=C(),ie.insertStyleElement=$(),y()(pe.Z,ie),pe.Z&&pe.Z.locals&&pe.Z.locals;var te=c(9787),Z=c(6340),D=c(532),B={};B.styleTagTransform=Q(),B.setAttributes=L(),B.insert=A().bind(null,"head"),B.domAPI=C(),B.insertStyleElement=$(),y()(D.Z,B),D.Z&&D.Z.locals&&D.Z.locals;var H=c(736),V=c(6066),R=c(9980),Y=function(_e){var ze=(0,H.J0)().id,Ve=(0,te.useState)(_e.value),ut=(0,m.Z)(Ve,2),Ie=ut[0],ot=ut[1];return(0,R.jsxs)("div",{className:"ProjectName",children:[(0,R.jsx)("label",{className:"ProjectName-label",htmlFor:"filename",children:"".concat(_e.label).concat(_e.isNameEditable?"":":")}),_e.isNameEditable?(0,R.jsx)("input",{type:"text",className:"TextInput",onBlur:function(Ye){_e.ignoreFocus||(0,Z.qz)(Ye.target);var Ke=Ye.target.value;Ke!==_e.value&&_e.onChange(Ke)},onKeyDown:function(Ye){if(Ye.key===V.tW.ENTER){if(Ye.preventDefault(),Ye.nativeEvent.isComposing||Ye.keyCode===229)return;Ye.currentTarget.blur()}},id:"".concat(ze,"-filename"),value:Ie,onChange:function(Ye){return ot(Ye.target.value)}}):(0,R.jsx)("span",{className:"TextInput TextInput--readonly",id:"".concat(ze,"-filename"),children:_e.value})]})},E=c(1319),W=c(1894),F=(c(5422),c(8211)),z=c(2335),q=function(_e){var ze=_e.title||(_e.value==="dark"?(0,F.t)("buttons.lightMode"):(0,F.t)("buttons.darkMode"));return(0,R.jsx)(E.V,{type:"icon",icon:_e.value===z.C6.LIGHT?fe.MOON:fe.SUN,title:ze,"aria-label":ze,onClick:function(){return _e.onChange(_e.value===z.C6.DARK?z.C6.LIGHT:z.C6.DARK)},"data-testid":"toggle-dark-mode"})},fe={SUN:(0,R.jsx)("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:(0,R.jsx)("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:(0,R.jsx)("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:(0,R.jsx)("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},ce=c(9485),U=c(1047),ve=c(434);function oe(_e,ze){var Ve=Object.keys(_e);if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(_e);ze&&(ut=ut.filter(function(Ie){return Object.getOwnPropertyDescriptor(_e,Ie).enumerable})),Ve.push.apply(Ve,ut)}return Ve}function re(_e){for(var ze=1;ze<arguments.length;ze++){var Ve=arguments[ze]!=null?arguments[ze]:{};ze%2?oe(Object(Ve),!0).forEach(function(ut){(0,b.Z)(_e,ut,Ve[ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Ve)):oe(Object(Ve)).forEach(function(ut){Object.defineProperty(_e,ut,Object.getOwnPropertyDescriptor(Ve,ut))})}return _e}var ae=function(){var _e=(0,g.Z)(w().mark(function ze(Ve,ut,Ie){var ot,Ye,Ke,tt,pt,St;return w().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(Ye=(ot=ut).exportBackground,Ke=ot.viewBackgroundColor,tt=ot.name,pt=ot.fileHandle,St=(0,ve.Qk)(pt),pt&&(0,ve.DQ)(St)){Kt.next=4;break}throw new Error("fileHandle should exist and should be of type svg or png when resaving");case 4:return ut=re(re({},ut),{},{exportEmbedScene:!0}),Kt.next=7,(0,ce.p1)(St,(0,U.Lm)(Ve),ut,Ie,{exportBackground:Ye,viewBackgroundColor:Ke,name:tt,fileHandle:pt});case 7:return Kt.abrupt("return",{fileHandle:pt});case 8:case"end":return Kt.stop()}},ze)}));return function(ze,Ve,ut){return _e.apply(this,arguments)}}(),me=c(7901),he=c(3807),se=c(4162),ge=c(75),X=c(313);function we(_e,ze){var Ve=Object.keys(_e);if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(_e);ze&&(ut=ut.filter(function(Ie){return Object.getOwnPropertyDescriptor(_e,Ie).enumerable})),Ve.push.apply(Ve,ut)}return Ve}function be(_e){for(var ze=1;ze<arguments.length;ze++){var Ve=arguments[ze]!=null?arguments[ze]:{};ze%2?we(Object(Ve),!0).forEach(function(ut){(0,b.Z)(_e,ut,Ve[ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(Ve)):we(Object(Ve)).forEach(function(ut){Object.defineProperty(_e,ut,Object.getOwnPropertyDescriptor(Ve,ut))})}return _e}var le,ye,ue,xe=(0,me.z)({name:"changeProjectName",trackEvent:!1,perform:function(_e,ze,Ve){return{appState:be(be({},ze),{},{name:Ve}),commitToHistory:!1}},PanelComponent:function(_e){var ze,Ve=_e.appState,ut=_e.updateData,Ie=_e.appProps,ot=_e.data;return(0,R.jsx)(Y,{label:(0,F.t)("labels.fileTitle"),value:Ve.name||"Unnamed",onChange:function(Ye){return ut(Ye)},isNameEditable:Ie.name===void 0&&!Ve.viewModeEnabled,ignoreFocus:(ze=ot==null?void 0:ot.ignoreFocus)!==null&&ze!==void 0&&ze})}}),Pe=(0,me.z)({name:"changeExportScale",trackEvent:{category:"export",action:"scale"},perform:function(_e,ze,Ve){return{appState:be(be({},ze),{},{exportScale:Ve}),commitToHistory:!1}},PanelComponent:function(_e){var ze=_e.elements,Ve=_e.appState,ut=_e.updateData,Ie=(0,U.Lm)(ze),ot=(0,ge.N)(Ie,Ve)?(0,ge.eD)(Ie,Ve):Ie;return(0,R.jsx)(R.Fragment,{children:z.ZB.map(function(Ye){var Ke=(0,se.Cg)(ot,z.qy,Ye),tt=(0,m.Z)(Ke,2),pt=tt[0],St=tt[1],Kt="".concat((0,F.t)("buttons.scale")," ").concat(Ye,"x (").concat(pt,"x").concat(St,")");return(0,R.jsx)(E.V,{size:"small",type:"radio",icon:"".concat(Ye,"x"),name:"export-canvas-scale",title:Kt,"aria-label":Kt,id:"export-canvas-scale",checked:Ye===Ve.exportScale,onChange:function(){return ut(Ye)}},Ye)})})}}),Ne=(0,me.z)({name:"changeExportBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:function(_e,ze,Ve){return{appState:be(be({},ze),{},{exportBackground:Ve}),commitToHistory:!1}},PanelComponent:function(_e){var ze=_e.appState,Ve=_e.updateData;return(0,R.jsx)(he.o,{checked:ze.exportBackground,onChange:function(ut){return Ve(ut)},children:(0,F.t)("labels.withBackground")})}}),Me=(0,me.z)({name:"changeExportEmbedScene",trackEvent:{category:"export",action:"embedScene"},perform:function(_e,ze,Ve){return{appState:be(be({},ze),{},{exportEmbedScene:Ve}),commitToHistory:!1}},PanelComponent:function(_e){var ze=_e.appState,Ve=_e.updateData;return(0,R.jsxs)(he.o,{checked:ze.exportEmbedScene,onChange:function(ut){return Ve(ut)},children:[(0,F.t)("labels.exportEmbedScene"),(0,R.jsx)(W.u,{label:(0,F.t)("labels.exportEmbedScene_details"),long:!0,children:(0,R.jsx)("div",{className:"excalidraw-tooltip-icon",children:_.Vl})})]})}}),Re=(0,me.z)({name:"saveToActiveFile",trackEvent:{category:"export"},predicate:function(_e,ze,Ve,ut){return!!ut.props.UIOptions.canvasActions.saveToActiveFile&&!!ze.fileHandle&&!ze.viewModeEnabled},perform:(le=(0,g.Z)(w().mark(function _e(ze,Ve,ut,Ie){var ot,Ye,Ke;return w().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(ot=!!Ve.fileHandle,tt.prev=1,!(0,ve.g8)(Ve.fileHandle)){tt.next=8;break}return tt.next=5,ae(ze,Ve,Ie.files);case 5:tt.t0=tt.sent,tt.next=11;break;case 8:return tt.next=10,(0,ce.Um)(ze,Ve,Ie.files);case 10:tt.t0=tt.sent;case 11:return Ye=tt.t0,Ke=Ye.fileHandle,tt.abrupt("return",{commitToHistory:!1,appState:be(be({},Ve),{},{fileHandle:Ke,toast:ot?{message:Ke!=null&&Ke.name?(0,F.t)("toast.fileSavedToFilename").replace("{filename}",'"'.concat(Ke.name,'"')):(0,F.t)("toast.fileSaved")}:null})});case 16:return tt.prev=16,tt.t1=tt.catch(1),(tt.t1===null||tt.t1===void 0?void 0:tt.t1.name)!=="AbortError"?console.error(tt.t1):console.warn(tt.t1),tt.abrupt("return",{commitToHistory:!1});case 20:case"end":return tt.stop()}},_e,null,[[1,16]])})),function(_e,ze,Ve,ut){return le.apply(this,arguments)}),keyTest:function(_e){return _e.key===V.tW.S&&_e[V.tW.CTRL_OR_CMD]&&!_e.shiftKey}}),We=(0,me.z)({name:"saveFileToDisk",viewMode:!0,trackEvent:{category:"export"},perform:(ye=(0,g.Z)(w().mark(function _e(ze,Ve,ut,Ie){var ot,Ye;return w().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.prev=0,Ke.next=3,(0,ce.Um)(ze,be(be({},Ve),{},{fileHandle:null}),Ie.files);case 3:return ot=Ke.sent,Ye=ot.fileHandle,Ke.abrupt("return",{commitToHistory:!1,appState:be(be({},Ve),{},{fileHandle:Ye})});case 8:return Ke.prev=8,Ke.t0=Ke.catch(0),(Ke.t0===null||Ke.t0===void 0?void 0:Ke.t0.name)!=="AbortError"?console.error(Ke.t0):console.warn(Ke.t0),Ke.abrupt("return",{commitToHistory:!1});case 12:case"end":return Ke.stop()}},_e,null,[[0,8]])})),function(_e,ze,Ve,ut){return ye.apply(this,arguments)}),keyTest:function(_e){return _e.key===V.tW.S&&_e.shiftKey&&_e[V.tW.CTRL_OR_CMD]},PanelComponent:function(_e){var ze=_e.updateData;return(0,R.jsx)(E.V,{type:"button",icon:_.po,title:(0,F.t)("buttons.saveAs"),"aria-label":(0,F.t)("buttons.saveAs"),showAriaLabel:(0,H.Fy)().isMobile,hidden:!X.kr,onClick:function(){return ze(null)},"data-testid":"save-as-button"})}}),Se=(0,me.z)({name:"loadScene",trackEvent:{category:"export"},predicate:function(_e,ze,Ve,ut){return!!ut.props.UIOptions.canvasActions.loadScene&&!ze.viewModeEnabled},perform:(ue=(0,g.Z)(w().mark(function _e(ze,Ve,ut,Ie){var ot,Ye,Ke,tt;return w().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.prev=0,pt.next=3,(0,ce.n8)(Ve,ze);case 3:return ot=pt.sent,Ye=ot.elements,Ke=ot.appState,tt=ot.files,pt.abrupt("return",{elements:Ye,appState:Ke,files:tt,commitToHistory:!0});case 10:if(pt.prev=10,pt.t0=pt.catch(0),(pt.t0===null||pt.t0===void 0?void 0:pt.t0.name)!=="AbortError"){pt.next=15;break}return console.warn(pt.t0),pt.abrupt("return",!1);case 15:return pt.abrupt("return",{elements:ze,appState:be(be({},Ve),{},{errorMessage:pt.t0.message}),files:Ie.files,commitToHistory:!1});case 16:case"end":return pt.stop()}},_e,null,[[0,10]])})),function(_e,ze,Ve,ut){return ue.apply(this,arguments)}),keyTest:function(_e){return _e[V.tW.CTRL_OR_CMD]&&_e.key===V.tW.O}}),Be=(0,me.z)({name:"exportWithDarkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:function(_e,ze,Ve){return{appState:be(be({},ze),{},{exportWithDarkMode:Ve}),commitToHistory:!1}},PanelComponent:function(_e){var ze=_e.appState,Ve=_e.updateData;return(0,R.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:(0,R.jsx)(q,{value:ze.exportWithDarkMode?z.C6.DARK:z.C6.LIGHT,onChange:function(ut){Ve(ut===z.C6.DARK)},title:(0,F.t)("labels.toggleExportColorScheme")})})}})},7306:function(f,h,c){c.d(h,{Tu:function(){return FX},Zq:function(){return ZX}});var g=c(2577),m=c(1930),b=c(7169),v=c(56),w=c(7047),_=c(9076),k=c(9980),y=function(x){return(0,k.jsx)("div",{className:"buttonList buttonListIcon",children:x.options.map(function(P){var M;return x.type==="button"?(0,k.jsx)("button",{onClick:function(N){return x.onClick(P.value,N)},className:(0,_.Z)({active:(M=P.active)!==null&&M!==void 0?M:x.value===P.value}),"data-testid":P.testId,title:P.text,children:P.icon},P.text):(0,k.jsxs)("label",{className:(0,_.Z)({active:x.value===P.value}),title:P.text,children:[(0,k.jsx)("input",{type:"radio",name:x.group,onChange:function(){return x.onChange(P.value)},checked:x.value===P.value,"data-testid":P.testId}),P.icon]},P.text)})})},S=c(2508),C=c(9787),I=c.n(C),A=c(2891),T=c(487),L=c.n(T),j=c(631),$=c.n(j),ee=c(2052),Q=c.n(ee),pe=c(4010),ie=c.n(pe),te=c(1469),Z=c.n(te),D=c(9329),B=c.n(D),H=c(9478),V={};V.styleTagTransform=B(),V.setAttributes=ie(),V.insert=Q().bind(null,"head"),V.domAPI=$(),V.insertStyleElement=Z(),L()(H.Z,V),H.Z&&H.Z.locals&&H.Z.locals;var R=c(6066),Y=c(8211);function E(x,P){var M=Object.keys(x);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(x);P&&(N=N.filter(function(G){return Object.getOwnPropertyDescriptor(x,G).enumerable})),M.push.apply(M,N)}return M}function W(x){for(var P=1;P<arguments.length;P++){var M=arguments[P]!=null?arguments[P]:{};P%2?E(Object(M),!0).forEach(function(N){(0,b.Z)(x,N,M[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(M)):E(Object(M)).forEach(function(N){Object.defineProperty(x,N,Object.getOwnPropertyDescriptor(M,N))})}return x}function F(x){var P=x.options,M=x.value,N=x.label,G=x.onChange,Ee=x.onClose,Ae=I().useRef(),Ze=I().useRef(),Ge=I().useRef(null);return I().useEffect(function(){Ze.current?Ze.current.focus():Ge.current&&Ge.current.focus()},[]),(0,k.jsx)("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":N,onKeyDown:function(it){var mt=P.find(function(Lt){return Lt.keyBinding===it.key.toLowerCase()});if(it.metaKey||it.altKey||it.ctrlKey||!mt)if(it.key===R.tW.TAB)setTimeout(function(){Ze.current!==document.activeElement&&Ee()},0);else if((0,R.Wl)(it.key)){var at=document.activeElement,bt=(0,Y.G3)().rtl,gt=Array.prototype.indexOf.call(Ge.current.children,at);if(gt!==-1){var It=P.length,At=gt;switch(it.key){case(bt?R.tW.ARROW_LEFT:R.tW.ARROW_RIGHT):case R.tW.ARROW_DOWN:At=(gt+1)%It;break;case(bt?R.tW.ARROW_RIGHT:R.tW.ARROW_LEFT):case R.tW.ARROW_UP:At=(It+gt-1)%It}Ge.current.children[At].focus()}it.preventDefault()}else it.key!==R.tW.ESCAPE&&it.key!==R.tW.ENTER||(it.preventDefault(),Ee());else{var jt=P.indexOf(mt);Ge.current.children[jt].focus(),it.preventDefault()}it.nativeEvent.stopImmediatePropagation(),it.stopPropagation()},children:(0,k.jsx)("div",{className:"picker-content",ref:Ge,children:P.map(function(it,mt){return(0,k.jsxs)("button",{className:(0,_.Z)("picker-option",{active:M===it.value}),onClick:function(at){at.currentTarget.focus(),G(it.value)},title:"".concat(it.text,"  ").concat(it.keyBinding.toUpperCase()),"aria-label":it.text||"none","aria-keyshortcuts":it.keyBinding,ref:function(at){at&&mt===0&&(Ae.current=at),at&&it.value===M&&(Ze.current=at)},onFocus:function(){G(it.value)},children:[it.icon,(0,k.jsx)("span",{className:"picker-keybinding",children:it.keyBinding})]},it.text)})})})}function z(x){var P,M=x.value,N=x.label,G=x.options,Ee=x.onChange,Ae=x.group,Ze=Ae===void 0?"":Ae,Ge=I().useState(!1),it=(0,g.Z)(Ge,2),mt=it[0],at=it[1],bt=I().useRef(null),gt=(0,Y.G3)().rtl;return(0,k.jsxs)("div",{children:[(0,k.jsx)("button",{name:Ze,className:mt?"active":"","aria-label":N,onClick:function(){return at(!mt)},ref:bt,children:(P=G.find(function(It){return It.value===M}))===null||P===void 0?void 0:P.icon}),(0,k.jsx)(I().Suspense,{fallback:"",children:mt?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(A.J,W(W({onCloseRequest:function(It){return It.target!==bt.current&&at(!1)}},gt?{right:5.5}:{left:-5.5}),{},{children:(0,k.jsx)(F,{options:G,value:M,label:N,onChange:Ee,onClose:function(){var It;at(!1),(It=bt.current)===null||It===void 0||It.focus()}})})),(0,k.jsx)("div",{className:"picker-triangle"})]}):null})]})}var q=c(3646),fe=c(2335),ce=c(1047),U=c(1935),ve=c(5710),oe=c(1974),re=c(6954),ae=c(75),me=c(8120),he=c(6340),se=c(7901),ge=c(451),X=c(9181),we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};function be(x){if(Array.isArray(x))return x}function le(x,P){(P==null||P>x.length)&&(P=x.length);for(var M=0,N=new Array(P);M<P;M++)N[M]=x[M];return N}function ye(x,P){if(x){if(typeof x=="string")return le(x,P);var M=Object.prototype.toString.call(x).slice(8,-1);return M==="Object"&&x.constructor&&(M=x.constructor.name),M==="Map"||M==="Set"?Array.from(x):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?le(x,P):void 0}}function ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xe(x,P){return be(x)||function(M,N){var G=M==null?null:typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(G!=null){var Ee,Ae,Ze,Ge,it=[],mt=!0,at=!1;try{if(Ze=(G=G.call(M)).next,N===0){if(Object(G)!==G)return;mt=!1}else for(;!(mt=(Ee=Ze.call(G)).done)&&(it.push(Ee.value),it.length!==N);mt=!0);}catch(bt){at=!0,Ae=bt}finally{try{if(!mt&&G.return!=null&&(Ge=G.return(),Object(Ge)!==Ge))return}finally{if(at)throw Ae}}return it}}(x,P)||ye(x,P)||ue()}function Pe(x){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Pe(x)}function Ne(x){var P=function(M,N){if(Pe(M)!=="object"||M===null)return M;var G=M[Symbol.toPrimitive];if(G!==void 0){var Ee=G.call(M,N||"default");if(Pe(Ee)!=="object")return Ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(M)}(x,"string");return Pe(P)==="symbol"?P:String(P)}function Me(x,P,M){return(P=Ne(P))in x?Object.defineProperty(x,P,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[P]=M,x}function Re(x,P){if(x==null)return{};var M,N,G=function(Ae,Ze){if(Ae==null)return{};var Ge,it,mt={},at=Object.keys(Ae);for(it=0;it<at.length;it++)Ge=at[it],Ze.indexOf(Ge)>=0||(mt[Ge]=Ae[Ge]);return mt}(x,P);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(x);for(N=0;N<Ee.length;N++)M=Ee[N],P.indexOf(M)>=0||Object.prototype.propertyIsEnumerable.call(x,M)&&(G[M]=x[M])}return G}var We=c(8920),Se=c.n(We);function Be(x,P){(function(N){return typeof N=="string"&&N.indexOf(".")!==-1&&parseFloat(N)===1})(x)&&(x="100%");var M=function(N){return typeof N=="string"&&N.indexOf("%")!==-1}(x);return x=P===360?x:Math.min(P,Math.max(0,parseFloat(x))),M&&(x=parseInt(String(x*P),10)/100),Math.abs(x-P)<1e-6?1:x=P===360?(x<0?x%P+P:x%P)/parseFloat(String(P)):x%P/parseFloat(String(P))}function _e(x){return Math.min(1,Math.max(0,x))}function ze(x){return x=parseFloat(x),(isNaN(x)||x<0||x>1)&&(x=1),x}function Ve(x){return x<=1?"".concat(100*Number(x),"%"):x}function ut(x){return x.length===1?"0"+x:String(x)}function Ie(x,P,M){x=Be(x,255),P=Be(P,255),M=Be(M,255);var N=Math.max(x,P,M),G=Math.min(x,P,M),Ee=0,Ae=0,Ze=(N+G)/2;if(N===G)Ae=0,Ee=0;else{var Ge=N-G;switch(Ae=Ze>.5?Ge/(2-N-G):Ge/(N+G),N){case x:Ee=(P-M)/Ge+(P<M?6:0);break;case P:Ee=(M-x)/Ge+2;break;case M:Ee=(x-P)/Ge+4}Ee/=6}return{h:Ee,s:Ae,l:Ze}}function ot(x,P,M){return M<0&&(M+=1),M>1&&(M-=1),M<.16666666666666666?x+6*M*(P-x):M<.5?P:M<.6666666666666666?x+(P-x)*(.6666666666666666-M)*6:x}function Ye(x,P,M){x=Be(x,255),P=Be(P,255),M=Be(M,255);var N=Math.max(x,P,M),G=Math.min(x,P,M),Ee=0,Ae=N,Ze=N-G,Ge=N===0?0:Ze/N;if(N===G)Ee=0;else{switch(N){case x:Ee=(P-M)/Ze+(P<M?6:0);break;case P:Ee=(M-x)/Ze+2;break;case M:Ee=(x-P)/Ze+4}Ee/=6}return{h:Ee,s:Ge,v:Ae}}function Ke(x,P,M,N){var G=[ut(Math.round(x).toString(16)),ut(Math.round(P).toString(16)),ut(Math.round(M).toString(16))];return N&&G[0].startsWith(G[0].charAt(1))&&G[1].startsWith(G[1].charAt(1))&&G[2].startsWith(G[2].charAt(1))?G[0].charAt(0)+G[1].charAt(0)+G[2].charAt(0):G.join("")}function tt(x){return Math.round(255*parseFloat(x)).toString(16)}function pt(x){return St(x)/255}function St(x){return parseInt(x,16)}var Kt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function sn(x){var P,M,N,G={r:0,g:0,b:0},Ee=1,Ae=null,Ze=null,Ge=null,it=!1,mt=!1;return typeof x=="string"&&(x=function(at){if((at=at.trim().toLowerCase()).length===0)return!1;var bt=!1;if(Kt[at])at=Kt[at],bt=!0;else if(at==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var gt=Fe.rgb.exec(at);return gt?{r:gt[1],g:gt[2],b:gt[3]}:(gt=Fe.rgba.exec(at))?{r:gt[1],g:gt[2],b:gt[3],a:gt[4]}:(gt=Fe.hsl.exec(at))?{h:gt[1],s:gt[2],l:gt[3]}:(gt=Fe.hsla.exec(at))?{h:gt[1],s:gt[2],l:gt[3],a:gt[4]}:(gt=Fe.hsv.exec(at))?{h:gt[1],s:gt[2],v:gt[3]}:(gt=Fe.hsva.exec(at))?{h:gt[1],s:gt[2],v:gt[3],a:gt[4]}:(gt=Fe.hex8.exec(at))?{r:St(gt[1]),g:St(gt[2]),b:St(gt[3]),a:pt(gt[4]),format:bt?"name":"hex8"}:(gt=Fe.hex6.exec(at))?{r:St(gt[1]),g:St(gt[2]),b:St(gt[3]),format:bt?"name":"hex"}:(gt=Fe.hex4.exec(at))?{r:St(gt[1]+gt[1]),g:St(gt[2]+gt[2]),b:St(gt[3]+gt[3]),a:pt(gt[4]+gt[4]),format:bt?"name":"hex8"}:(gt=Fe.hex3.exec(at))?{r:St(gt[1]+gt[1]),g:St(gt[2]+gt[2]),b:St(gt[3]+gt[3]),format:bt?"name":"hex"}:!1}(x)),typeof x=="object"&&(et(x.r)&&et(x.g)&&et(x.b)?(P=x.r,M=x.g,N=x.b,G={r:255*Be(P,255),g:255*Be(M,255),b:255*Be(N,255)},it=!0,mt=String(x.r).substr(-1)==="%"?"prgb":"rgb"):et(x.h)&&et(x.s)&&et(x.v)?(Ae=Ve(x.s),Ze=Ve(x.v),G=function(at,bt,gt){at=6*Be(at,360),bt=Be(bt,100),gt=Be(gt,100);var It=Math.floor(at),At=at-It,jt=gt*(1-bt),Lt=gt*(1-At*bt),$t=gt*(1-(1-At)*bt),hn=It%6;return{r:255*[gt,Lt,jt,jt,$t,gt][hn],g:255*[$t,gt,gt,Lt,jt,jt][hn],b:255*[jt,jt,$t,gt,gt,Lt][hn]}}(x.h,Ae,Ze),it=!0,mt="hsv"):et(x.h)&&et(x.s)&&et(x.l)&&(Ae=Ve(x.s),Ge=Ve(x.l),G=function(at,bt,gt){var It,At,jt;if(at=Be(at,360),bt=Be(bt,100),gt=Be(gt,100),bt===0)At=gt,jt=gt,It=gt;else{var Lt=gt<.5?gt*(1+bt):gt+bt-gt*bt,$t=2*gt-Lt;It=ot($t,Lt,at+.3333333333333333),At=ot($t,Lt,at),jt=ot($t,Lt,at-.3333333333333333)}return{r:255*It,g:255*At,b:255*jt}}(x.h,Ae,Ge),it=!0,mt="hsl"),Object.prototype.hasOwnProperty.call(x,"a")&&(Ee=x.a)),Ee=ze(Ee),{ok:it,format:x.format||mt,r:Math.min(255,Math.max(G.r,0)),g:Math.min(255,Math.max(G.g,0)),b:Math.min(255,Math.max(G.b,0)),a:Ee}}var nn="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Cn="[\\s|\\(]+(".concat(nn,")[,|\\s]+(").concat(nn,")[,|\\s]+(").concat(nn,")\\s*\\)?"),vn="[\\s|\\(]+(".concat(nn,")[,|\\s]+(").concat(nn,")[,|\\s]+(").concat(nn,")[,|\\s]+(").concat(nn,")\\s*\\)?"),Fe={CSS_UNIT:new RegExp(nn),rgb:new RegExp("rgb"+Cn),rgba:new RegExp("rgba"+vn),hsl:new RegExp("hsl"+Cn),hsla:new RegExp("hsla"+vn),hsv:new RegExp("hsv"+Cn),hsva:new RegExp("hsva"+vn),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function et(x){return!!Fe.CSS_UNIT.exec(String(x))}var st=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function ht(x){var P=Ye(x.r,x.g,x.b);return{h:360*P.h,s:P.s,v:P.v}}function _t(x){var P=x.r,M=x.g,N=x.b;return"#".concat(Ke(P,M,N,!1))}function Zt(x,P,M){var N=M/100;return{r:(P.r-x.r)*N+x.r,g:(P.g-x.g)*N+x.g,b:(P.b-x.b)*N+x.b}}function Yt(x,P,M){var N;return(N=Math.round(x.h)>=60&&Math.round(x.h)<=240?M?Math.round(x.h)-2*P:Math.round(x.h)+2*P:M?Math.round(x.h)+2*P:Math.round(x.h)-2*P)<0?N+=360:N>=360&&(N-=360),N}function bn(x,P,M){return x.h===0&&x.s===0?x.s:((N=M?x.s-.16*P:P===4?x.s+.16:x.s+.05*P)>1&&(N=1),M&&P===5&&N>.1&&(N=.1),N<.06&&(N=.06),Number(N.toFixed(2)));var N}function Wt(x,P,M){var N;return(N=M?x.v+.05*P:x.v-.15*P)>1&&(N=1),Number(N.toFixed(2))}function un(x){for(var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=[],N=sn(x),G=5;G>0;G-=1){var Ee=ht(N),Ae=_t(sn({h:Yt(Ee,G,!0),s:bn(Ee,G,!0),v:Wt(Ee,G,!0)}));M.push(Ae)}M.push(_t(N));for(var Ze=1;Ze<=4;Ze+=1){var Ge=ht(N),it=_t(sn({h:Yt(Ge,Ze),s:bn(Ge,Ze),v:Wt(Ge,Ze)}));M.push(it)}return P.theme==="dark"?st.map(function(mt){var at=mt.index,bt=mt.opacity;return _t(Zt(sn(P.backgroundColor||"#141414"),sn(M[at]),100*bt))}):M}var jn={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Hn={},vt={};Object.keys(jn).forEach(function(x){Hn[x]=un(jn[x]),Hn[x].primary=Hn[x][5],vt[x]=un(jn[x],{theme:"dark",backgroundColor:"#141414"}),vt[x].primary=vt[x][5]});var Nt=Hn.blue,Tt=(0,C.createContext)({});function cn(x,P){var M=Object.keys(x);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(x);P&&(N=N.filter(function(G){return Object.getOwnPropertyDescriptor(x,G).enumerable})),M.push.apply(M,N)}return M}function Ot(x){for(var P=1;P<arguments.length;P++){var M=arguments[P]!=null?arguments[P]:{};P%2?cn(Object(M),!0).forEach(function(N){Me(x,N,M[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(M)):cn(Object(M)).forEach(function(N){Object.defineProperty(x,N,Object.getOwnPropertyDescriptor(M,N))})}return x}var Ln=c(9022),Wn=c.n(Ln);function Rn(){return!(typeof window>"u"||!window.document||!window.document.createElement)}var zn="data-rc-order",Et="data-rc-priority",Dt="rc-util-key",Gt=new Map;function Jt(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=x.mark;return P?P.startsWith("data-")?P:"data-".concat(P):Dt}function $n(x){return x.attachTo?x.attachTo:document.querySelector("head")||document.body}function Kn(x){return x==="queue"?"prependQueue":x?"prepend":"append"}function wr(x){return Array.from((Gt.get(x)||x).children).filter(function(P){return P.tagName==="STYLE"})}function dr(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Rn())return null;var M=P.csp,N=P.prepend,G=P.priority,Ee=G===void 0?0:G,Ae=Kn(N),Ze=Ae==="prependQueue",Ge=document.createElement("style");Ge.setAttribute(zn,Ae),Ze&&Ee&&Ge.setAttribute(Et,"".concat(Ee)),M!=null&&M.nonce&&(Ge.nonce=M==null?void 0:M.nonce),Ge.innerHTML=x;var it=$n(P),mt=it.firstChild;if(N){if(Ze){var at=wr(it).filter(function(bt){if(!["prepend","prependQueue"].includes(bt.getAttribute(zn)))return!1;var gt=Number(bt.getAttribute(Et)||0);return Ee>=gt});if(at.length)return it.insertBefore(Ge,at[at.length-1].nextSibling),Ge}it.insertBefore(Ge,mt)}else it.appendChild(Ge);return Ge}function yn(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=$n(P);return wr(M).find(function(N){return N.getAttribute(Jt(P))===x})}function hr(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=yn(x,P);if(M){var N=$n(P);N.removeChild(M)}}function Er(x,P){var M=Gt.get(x);if(!M||!function(Ee,Ae){if(!Ee)return!1;if(Ee.contains)return Ee.contains(Ae);for(var Ze=Ae;Ze;){if(Ze===Ee)return!0;Ze=Ze.parentNode}return!1}(document,M)){var N=dr("",P),G=N.parentNode;Gt.set(x,G),x.removeChild(N)}}function Nn(x,P){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},N=$n(M);Er(N,M);var G=yn(P,M);if(G){var Ee,Ae,Ze;return(Ee=M.csp)!==null&&Ee!==void 0&&Ee.nonce&&G.nonce!==((Ae=M.csp)===null||Ae===void 0?void 0:Ae.nonce)&&(G.nonce=(Ze=M.csp)===null||Ze===void 0?void 0:Ze.nonce),G.innerHTML!==x&&(G.innerHTML=x),G}var Ge=dr(x,M);return Ge.setAttribute(Jt(M),P),Ge}function ar(x){var P;return x==null||(P=x.getRootNode)===null||P===void 0?void 0:P.call(x)}function Dr(x){return function(P){return ar(P)instanceof ShadowRoot}(x)?ar(x):null}var Ir={};function Vt(x,P){}function An(x,P){}function pn(x,P,M){P||Ir[M]||(x(!1,M),Ir[M]=!0)}function mn(x,P){pn(Vt,x,P)}mn.preMessage=function(x){},mn.resetWarned=function(){Ir={}},mn.noteOnce=function(x,P){pn(An,x,P)};var or=mn;function fr(x){return Pe(x)==="object"&&typeof x.name=="string"&&typeof x.theme=="string"&&(Pe(x.icon)==="object"||typeof x.icon=="function")}function Fn(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(x).reduce(function(P,M){var N=x[M];return M==="class"?(P.className=N,delete P.class):(delete P[M],P[Wn()(M)]=N),P},{})}function De(x,P,M){return M?I().createElement(x.tag,Ot(Ot({key:P},Fn(x.attrs)),M),(x.children||[]).map(function(N,G){return De(N,"".concat(P,"-").concat(x.tag,"-").concat(G))})):I().createElement(x.tag,Ot({key:P},Fn(x.attrs)),(x.children||[]).map(function(N,G){return De(N,"".concat(P,"-").concat(x.tag,"-").concat(G))}))}function Ue(x){return un(x)[0]}function qe(x){return x?Array.isArray(x)?x:[x]:[]}var dt=["icon","className","onClick","style","primaryColor","secondaryColor"],Ut={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},qt=function(x){var P,M,N,G,Ee,Ae,Ze,Ge=x.icon,it=x.className,mt=x.onClick,at=x.style,bt=x.primaryColor,gt=x.secondaryColor,It=Re(x,dt),At=C.useRef(),jt=Ut;if(bt&&(jt={primaryColor:bt,secondaryColor:gt||Ue(bt)}),P=At,M=(0,C.useContext)(Tt),N=M.csp,G=M.prefixCls,Ee=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,G&&(Ee=Ee.replace(/anticon/g,G)),(0,C.useEffect)(function(){var $t=Dr(P.current);Nn(Ee,"@ant-design-icons",{prepend:!0,csp:N,attachTo:$t})},[]),Ae=fr(Ge),Ze="icon should be icon definiton, but got ".concat(Ge),or(Ae,"[@ant-design/icons] ".concat(Ze)),!fr(Ge))return null;var Lt=Ge;return Lt&&typeof Lt.icon=="function"&&(Lt=Ot(Ot({},Lt),{},{icon:Lt.icon(jt.primaryColor,jt.secondaryColor)})),De(Lt.icon,"svg-".concat(Lt.name),Ot(Ot({className:it,onClick:mt,style:at,"data-icon":Lt.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},It),{},{ref:At}))};qt.displayName="IconReact",qt.getTwoToneColors=function(){return Ot({},Ut)},qt.setTwoToneColors=function(x){var P=x.primaryColor,M=x.secondaryColor;Ut.primaryColor=P,Ut.secondaryColor=M||Ue(P),Ut.calculated=!!M};var on=qt;function xn(x){var P=xe(qe(x),2),M=P[0],N=P[1];return on.setTwoToneColors({primaryColor:M,secondaryColor:N})}var tn=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];xn(Nt.primary);var tr=C.forwardRef(function(x,P){var M,N=x.className,G=x.icon,Ee=x.spin,Ae=x.rotate,Ze=x.tabIndex,Ge=x.onClick,it=x.twoToneColor,mt=Re(x,tn),at=C.useContext(Tt),bt=at.prefixCls,gt=bt===void 0?"anticon":bt,It=at.rootClassName,At=Se()(It,gt,(Me(M={},"".concat(gt,"-").concat(G.name),!!G.name),Me(M,"".concat(gt,"-spin"),!!Ee||G.name==="loading"),M),N),jt=Ze;jt===void 0&&Ge&&(jt=-1);var Lt=Ae?{msTransform:"rotate(".concat(Ae,"deg)"),transform:"rotate(".concat(Ae,"deg)")}:void 0,$t=xe(qe(it),2),hn=$t[0],kn=$t[1];return C.createElement("span",(0,X.Z)({role:"img","aria-label":G.name},mt,{ref:P,tabIndex:jt,onClick:Ge,className:At}),C.createElement(on,{icon:G,primaryColor:hn,secondaryColor:kn,style:Lt}))});tr.displayName="AntdIcon",tr.getTwoToneColor=function(){var x=on.getTwoToneColors();return x.calculated?[x.primaryColor,x.secondaryColor]:x.primaryColor},tr.setTwoToneColor=xn;var ir=tr,br=function(x,P){return C.createElement(ir,(0,X.Z)({},x,{ref:P,icon:we}))},Hr=C.forwardRef(br),Fr=c(5156),go=c.n(Fr),Wr=c(364);function Mr(x,P,M){var N=C.useRef({});return"value"in N.current&&!M(N.current.condition,P)||(N.current.value=x(),N.current.condition=P),N.current.value}function Ro(x,P){typeof x=="function"?x(P):Pe(x)==="object"&&x&&"current"in x&&(x.current=P)}function si(){for(var x=arguments.length,P=new Array(x),M=0;M<x;M++)P[M]=arguments[M];var N=P.filter(function(G){return G});return N.length<=1?N[0]:function(G){P.forEach(function(Ee){Ro(Ee,G)})}}function hi(){for(var x=arguments.length,P=new Array(x),M=0;M<x;M++)P[M]=arguments[M];return Mr(function(){return si.apply(void 0,P)},P,function(N,G){return N.length!==G.length||N.every(function(Ee,Ae){return Ee!==G[Ae]})})}function ti(x){var P,M,N=(0,Wr.isMemo)(x)?x.type.type:x.type;return!!(typeof N!="function"||(P=N.prototype)!==null&&P!==void 0&&P.render)&&!!(typeof x!="function"||(M=x.prototype)!==null&&M!==void 0&&M.render)}var ha=C.createContext(null);function fa(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function Go(x){return function(P){if(Array.isArray(P))return le(P)}(x)||fa(x)||ye(x)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Mo,xi=Rn()?C.useLayoutEffect:C.useEffect,ft=function(x,P){var M=C.useRef(!0);xi(function(){return x(M.current)},P),xi(function(){return M.current=!1,function(){M.current=!0}},[])},zt=function(x,P){ft(function(M){if(!M)return x()},P)},_n=ft,yr=[];function Xo(x){var P=x.match(/^(.*)px$/),M=Number(P==null?void 0:P[1]);return Number.isNaN(M)?function(N){if(typeof document>"u")return 0;if(N||Mo===void 0){var G=document.createElement("div");G.style.width="100%",G.style.height="200px";var Ee=document.createElement("div"),Ae=Ee.style;Ae.position="absolute",Ae.top="0",Ae.left="0",Ae.pointerEvents="none",Ae.visibility="hidden",Ae.width="200px",Ae.height="150px",Ae.overflow="hidden",Ee.appendChild(G),document.body.appendChild(Ee);var Ze=G.offsetWidth;Ee.style.overflow="scroll";var Ge=G.offsetWidth;Ze===Ge&&(Ge=Ee.clientWidth),document.body.removeChild(Ee),Mo=Ze-Ge}return Mo}():M}var Io="rc-util-locker-".concat(Date.now()),fi=0;function Bi(x){var P=!!x,M=xe(C.useState(function(){return fi+=1,"".concat(Io,"_").concat(fi)}),1)[0];_n(function(){if(P){var N=function(Ee){if(!(typeof document<"u"&&Ee&&Ee instanceof Element))return{width:0,height:0};var Ae=getComputedStyle(Ee,"::-webkit-scrollbar"),Ze=Ae.width,Ge=Ae.height;return{width:Xo(Ze),height:Xo(Ge)}}(document.body).width,G=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;Nn(`
html body {
  overflow-y: hidden;
  `.concat(G?"width: calc(100% - ".concat(N,"px);"):"",`
}`),M)}else hr(M);return function(){hr(M)}},[P,M])}var xa=!1,Pi=function(x){return x!==!1&&(Rn()&&x?typeof x=="string"?document.querySelector(x):typeof x=="function"?x():x:null)},wa=C.forwardRef(function(x,P){var M=x.open,N=x.autoLock,G=x.getContainer,Ee=(x.debug,x.autoDestroy),Ae=Ee===void 0||Ee,Ze=x.children,Ge=xe(C.useState(M),2),it=Ge[0],mt=Ge[1],at=it||M;C.useEffect(function(){(Ae||M)&&mt(M)},[M,Ae]);var bt=xe(C.useState(function(){return Pi(G)}),2),gt=bt[0],It=bt[1];C.useEffect(function(){var er=Pi(G);It(er??null)});var At=function(er,mr){var Gn=xe(C.useState(function(){return Rn()?document.createElement("div"):null}),1)[0],Qt=C.useRef(!1),Xt=C.useContext(ha),Ht=xe(C.useState(yr),2),Tn=Ht[0],fn=Ht[1],Vn=Xt||(Qt.current?void 0:function(xr){fn(function($r){return[xr].concat(Go($r))})});function rr(){Gn.parentElement||document.body.appendChild(Gn),Qt.current=!0}function _r(){var xr;(xr=Gn.parentElement)===null||xr===void 0||xr.removeChild(Gn),Qt.current=!1}return _n(function(){return er?Xt?Xt(rr):rr():_r(),_r},[er]),_n(function(){Tn.length&&(Tn.forEach(function(xr){return xr()}),fn(yr))},[Tn]),[Gn,Vn]}(at&&!gt),jt=xe(At,2),Lt=jt[0],$t=jt[1],hn=gt??Lt;Bi(N&&M&&Rn()&&(hn===Lt||hn===document.body));var kn=null;Ze&&ti(Ze)&&P&&(kn=Ze.ref);var On=hi(kn,P);if(!at||!Rn()||gt===void 0)return null;var Zn=hn===!1||xa,an=Ze;return P&&(an=C.cloneElement(Ze,{ref:On})),C.createElement(ha.Provider,{value:$t},Zn?an:(0,Fr.createPortal)(an,hn))}),Ha=wa;function wi(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=[];return I().Children.forEach(x,function(N){(N!=null||P.keepEmpty)&&(Array.isArray(N)?M=M.concat(wi(N)):(0,Wr.isFragment)(N)&&N.props?M=M.concat(wi(N.props.children,P)):M.push(N))}),M}function Fa(x){return x instanceof HTMLElement||x instanceof SVGElement}function Ia(x){return Fa(x)?x:x instanceof I().Component?go().findDOMNode(x):null}var Ys=function(){if(typeof Map<"u")return Map;function x(P,M){var N=-1;return P.some(function(G,Ee){return G[0]===M&&(N=Ee,!0)}),N}return function(){function P(){this.__entries__=[]}return Object.defineProperty(P.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),P.prototype.get=function(M){var N=x(this.__entries__,M),G=this.__entries__[N];return G&&G[1]},P.prototype.set=function(M,N){var G=x(this.__entries__,M);~G?this.__entries__[G][1]=N:this.__entries__.push([M,N])},P.prototype.delete=function(M){var N=this.__entries__,G=x(N,M);~G&&N.splice(G,1)},P.prototype.has=function(M){return!!~x(this.__entries__,M)},P.prototype.clear=function(){this.__entries__.splice(0)},P.prototype.forEach=function(M,N){N===void 0&&(N=null);for(var G=0,Ee=this.__entries__;G<Ee.length;G++){var Ae=Ee[G];M.call(N,Ae[1],Ae[0])}},P}()}(),Cr=typeof window<"u"&&typeof document<"u"&&window.document===document,pa=c.g!==void 0&&c.g.Math===Math?c.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),Yu=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pa):function(x){return setTimeout(function(){return x(Date.now())},1e3/60)},tu=["top","right","bottom","left","width","height","size","weight"],Gs=typeof MutationObserver<"u",rc=function(){function x(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(P,M){var N=!1,G=!1,Ee=0;function Ae(){N&&(N=!1,P()),G&&Ge()}function Ze(){Yu(Ae)}function Ge(){var it=Date.now();if(N){if(it-Ee<2)return;G=!0}else N=!0,G=!1,setTimeout(Ze,M);Ee=it}return Ge}(this.refresh.bind(this),20)}return x.prototype.addObserver=function(P){~this.observers_.indexOf(P)||this.observers_.push(P),this.connected_||this.connect_()},x.prototype.removeObserver=function(P){var M=this.observers_,N=M.indexOf(P);~N&&M.splice(N,1),!M.length&&this.connected_&&this.disconnect_()},x.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},x.prototype.updateObservers_=function(){var P=this.observers_.filter(function(M){return M.gatherActive(),M.hasActive()});return P.forEach(function(M){return M.broadcastActive()}),P.length>0},x.prototype.connect_=function(){Cr&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Gs?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},x.prototype.disconnect_=function(){Cr&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},x.prototype.onTransitionEnd_=function(P){var M=P.propertyName,N=M===void 0?"":M;tu.some(function(G){return!!~N.indexOf(G)})&&this.refresh()},x.getInstance=function(){return this.instance_||(this.instance_=new x),this.instance_},x.instance_=null,x}(),_p=function(x,P){for(var M=0,N=Object.keys(P);M<N.length;M++){var G=N[M];Object.defineProperty(x,G,{value:P[G],enumerable:!1,writable:!1,configurable:!0})}return x},oc=function(x){return x&&x.ownerDocument&&x.ownerDocument.defaultView||pa},bd=rf(0,0,0,0);function Gu(x){return parseFloat(x)||0}function tf(x){for(var P=[],M=1;M<arguments.length;M++)P[M-1]=arguments[M];return P.reduce(function(N,G){return N+Gu(x["border-"+G+"-width"])},0)}function nf(x){var P=x.clientWidth,M=x.clientHeight;if(!P&&!M)return bd;var N=oc(x).getComputedStyle(x),G=function(at){for(var bt={},gt=0,It=["top","right","bottom","left"];gt<It.length;gt++){var At=It[gt],jt=at["padding-"+At];bt[At]=Gu(jt)}return bt}(N),Ee=G.left+G.right,Ae=G.top+G.bottom,Ze=Gu(N.width),Ge=Gu(N.height);if(N.boxSizing==="border-box"&&(Math.round(Ze+Ee)!==P&&(Ze-=tf(N,"left","right")+Ee),Math.round(Ge+Ae)!==M&&(Ge-=tf(N,"top","bottom")+Ae)),!function(at){return at===oc(at).document.documentElement}(x)){var it=Math.round(Ze+Ee)-P,mt=Math.round(Ge+Ae)-M;Math.abs(it)!==1&&(Ze-=it),Math.abs(mt)!==1&&(Ge-=mt)}return rf(G.left,G.top,Ze,Ge)}var g0=typeof SVGGraphicsElement<"u"?function(x){return x instanceof oc(x).SVGGraphicsElement}:function(x){return x instanceof oc(x).SVGElement&&typeof x.getBBox=="function"};function m0(x){return Cr?g0(x)?function(P){var M=P.getBBox();return rf(0,0,M.width,M.height)}(x):nf(x):bd}function rf(x,P,M,N){return{x,y:P,width:M,height:N}}var v0=function(){function x(P){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=rf(0,0,0,0),this.target=P}return x.prototype.isActive=function(){var P=m0(this.target);return this.contentRect_=P,P.width!==this.broadcastWidth||P.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var P=this.contentRect_;return this.broadcastWidth=P.width,this.broadcastHeight=P.height,P},x}(),Xu=function(x,P){var M,N,G,Ee,Ae,Ze,Ge,it=(N=(M=P).x,G=M.y,Ee=M.width,Ae=M.height,Ze=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,Ge=Object.create(Ze.prototype),_p(Ge,{x:N,y:G,width:Ee,height:Ae,top:G,right:N+Ee,bottom:Ae+G,left:N}),Ge);_p(this,{target:x,contentRect:it})},nu=function(){function x(P,M,N){if(this.activeObservations_=[],this.observations_=new Ys,typeof P!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=P,this.controller_=M,this.callbackCtx_=N}return x.prototype.observe=function(P){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(P instanceof oc(P).Element))throw new TypeError('parameter 1 is not of type "Element".');var M=this.observations_;M.has(P)||(M.set(P,new v0(P)),this.controller_.addObserver(this),this.controller_.refresh())}},x.prototype.unobserve=function(P){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(P instanceof oc(P).Element))throw new TypeError('parameter 1 is not of type "Element".');var M=this.observations_;M.has(P)&&(M.delete(P),M.size||this.controller_.removeObserver(this))}},x.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},x.prototype.gatherActive=function(){var P=this;this.clearActive(),this.observations_.forEach(function(M){M.isActive()&&P.activeObservations_.push(M)})},x.prototype.broadcastActive=function(){if(this.hasActive()){var P=this.callbackCtx_,M=this.activeObservations_.map(function(N){return new Xu(N.target,N.broadcastRect())});this.callback_.call(P,M,P),this.clearActive()}},x.prototype.clearActive=function(){this.activeObservations_.splice(0)},x.prototype.hasActive=function(){return this.activeObservations_.length>0},x}(),gs=typeof WeakMap<"u"?new WeakMap:new Ys,Ep=function x(P){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var M=rc.getInstance(),N=new nu(P,M,this);gs.set(this,N)};["observe","unobserve","disconnect"].forEach(function(x){Ep.prototype[x]=function(){var P;return(P=gs.get(this))[x].apply(P,arguments)}});var t2=pa.ResizeObserver!==void 0?pa.ResizeObserver:Ep,$c=new Map,ru=new t2(function(x){x.forEach(function(P){var M,N=P.target;(M=$c.get(N))===null||M===void 0||M.forEach(function(G){return G(N)})})});function Xs(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}function Ml(x,P){for(var M=0;M<P.length;M++){var N=P[M];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,Ne(N.key),N)}}function ms(x,P,M){return P&&Ml(x.prototype,P),M&&Ml(x,M),Object.defineProperty(x,"prototype",{writable:!1}),x}function qu(x,P){return qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,N){return M.__proto__=N,M},qu(x,P)}function jc(x,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(P&&P.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),P&&qu(x,P)}function yd(x){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)},yd(x)}function ou(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function Pp(x,P){if(P&&(Pe(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ou(x)}function xd(x){var P=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var M,N=yd(x);if(P){var G=yd(this).constructor;M=Reflect.construct(N,arguments,G)}else M=N.apply(this,arguments);return Pp(this,M)}}var of=function(x){jc(M,x);var P=xd(M);function M(){return Xs(this,M),P.apply(this,arguments)}return ms(M,[{key:"render",value:function(){return this.props.children}}]),M}(C.Component),Rc=C.createContext(null);function ic(x,P){var M=x.children,N=x.disabled,G=C.useRef(null),Ee=C.useRef(null),Ae=C.useContext(Rc),Ze=typeof M=="function",Ge=Ze?M(G):M,it=C.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),mt=!Ze&&C.isValidElement(Ge)&&ti(Ge),at=mt?Ge.ref:null,bt=C.useMemo(function(){return si(at,G)},[at,G]),gt=function(){return Ia(G.current)||Ia(Ee.current)};C.useImperativeHandle(P,function(){return gt()});var It=C.useRef(x);It.current=x;var At=C.useCallback(function(jt){var Lt=It.current,$t=Lt.onResize,hn=Lt.data,kn=jt.getBoundingClientRect(),On=kn.width,Zn=kn.height,an=jt.offsetWidth,er=jt.offsetHeight,mr=Math.floor(On),Gn=Math.floor(Zn);if(it.current.width!==mr||it.current.height!==Gn||it.current.offsetWidth!==an||it.current.offsetHeight!==er){var Qt={width:mr,height:Gn,offsetWidth:an,offsetHeight:er};it.current=Qt;var Xt=an===Math.round(On)?On:an,Ht=er===Math.round(Zn)?Zn:er,Tn=Ot(Ot({},Qt),{},{offsetWidth:Xt,offsetHeight:Ht});Ae==null||Ae(Tn,jt,hn),$t&&Promise.resolve().then(function(){$t(Tn,jt)})}},[]);return C.useEffect(function(){var jt,Lt,$t=gt();return $t&&!N&&(jt=$t,Lt=At,$c.has(jt)||($c.set(jt,new Set),ru.observe(jt)),$c.get(jt).add(Lt)),function(){return function(hn,kn){$c.has(hn)&&($c.get(hn).delete(kn),$c.get(hn).size||(ru.unobserve(hn),$c.delete(hn)))}($t,At)}},[G.current,N]),C.createElement(of,{ref:Ee},mt?C.cloneElement(Ge,{ref:bt}):Ge)}var wd=C.forwardRef(ic);function n2(x,P){var M=x.children;return(typeof M=="function"?[M]:wi(M)).map(function(N,G){var Ee=(N==null?void 0:N.key)||"".concat("rc-observer-key","-").concat(G);return C.createElement(wd,(0,X.Z)({},x,{key:Ee,ref:G===0?P:void 0}),N)})}var Mp=C.forwardRef(n2);Mp.Collection=function(x){var P=x.children,M=x.onBatchResize,N=C.useRef(0),G=C.useRef([]),Ee=C.useContext(Rc),Ae=C.useCallback(function(Ze,Ge,it){N.current+=1;var mt=N.current;G.current.push({size:Ze,element:Ge,data:it}),Promise.resolve().then(function(){mt===N.current&&(M==null||M(G.current),G.current=[])}),Ee==null||Ee(Ze,Ge,it)},[M,Ee]);return C.createElement(Rc.Provider,{value:Ae},P)};var af=Mp;function cs(x){var P=C.useRef();P.current=x;var M=C.useCallback(function(){for(var N,G=arguments.length,Ee=new Array(G),Ae=0;Ae<G;Ae++)Ee[Ae]=arguments[Ae];return(N=P.current)===null||N===void 0?void 0:N.call.apply(N,[P].concat(Ee))},[]);return M}var Ip=0;function Ay(x){var P=xe(C.useState("ssr-id"),2),M=P[0],N=P[1],G=Ot({},C).useId,Ee=G==null?void 0:G();return C.useEffect(function(){if(!G){var Ae=Ip;Ip+=1,N("rc_unique_".concat(Ae))}},[]),x||Ee||M}var sf=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var x=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(x)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(x==null?void 0:x.substr(0,4))},Tp=C.createContext(null);function Cd(x){return x?Array.isArray(x)?x:[x]:[]}function r2(x,P,M,N){return C.useMemo(function(){var G=Cd(M??P),Ee=Cd(N??P),Ae=new Set(G),Ze=new Set(Ee);return x&&(Ae.has("hover")&&(Ae.delete("hover"),Ae.add("click")),Ze.has("hover")&&(Ze.delete("hover"),Ze.add("click"))),[Ae,Ze]},[x,P,M,N])}var iu=function(x){if(!x)return!1;if(x instanceof Element){if(x.offsetParent)return!0;if(x.getBBox){var P=x.getBBox(),M=P.width,N=P.height;if(M||N)return!0}if(x.getBoundingClientRect){var G=x.getBoundingClientRect(),Ee=G.width,Ae=G.height;if(Ee||Ae)return!0}}return!1};function au(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2?arguments[2]:void 0;return M?x[0]===P[0]:x[0]===P[0]&&x[1]===P[1]}function b0(x,P,M,N){for(var G=M.points,Ee=Object.keys(x),Ae=0;Ae<Ee.length;Ae+=1){var Ze,Ge=Ee[Ae];if(au((Ze=x[Ge])===null||Ze===void 0?void 0:Ze.points,G,N))return"".concat(P,"-placement-").concat(Ge)}return""}function Op(x,P,M,N){return P||(M?{motionName:"".concat(x,"-").concat(M)}:N?{motionName:N}:null)}function su(x){return x.ownerDocument.defaultView}function lf(x){for(var P=[],M=x==null?void 0:x.parentElement,N=["hidden","scroll","clip","auto"];M;){var G=su(M).getComputedStyle(M);[G.overflowX,G.overflowY,G.overflow].some(function(Ee){return N.includes(Ee)})&&P.push(M),M=M.parentElement}return P}function qs(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(x)?P:x}function Ju(x){return qs(parseFloat(x),0)}function y0(x,P){var M=Ot({},x);return(P||[]).forEach(function(N){if(!(N instanceof HTMLBodyElement)){var G=su(N).getComputedStyle(N),Ee=G.overflow,Ae=G.overflowClipMargin,Ze=G.borderTopWidth,Ge=G.borderBottomWidth,it=G.borderLeftWidth,mt=G.borderRightWidth,at=N.getBoundingClientRect(),bt=N.offsetHeight,gt=N.clientHeight,It=N.offsetWidth,At=N.clientWidth,jt=Ju(Ze),Lt=Ju(Ge),$t=Ju(it),hn=Ju(mt),kn=qs(Math.round(at.width/It*1e3)/1e3),On=qs(Math.round(at.height/bt*1e3)/1e3),Zn=(It-At-$t-hn)*kn,an=(bt-gt-jt-Lt)*On,er=jt*On,mr=Lt*On,Gn=$t*kn,Qt=hn*kn,Xt=0,Ht=0;if(Ee==="clip"){var Tn=Ju(Ae);Xt=Tn*kn,Ht=Tn*On}var fn=at.x+Gn-Xt,Vn=at.y+er-Ht,rr=fn+at.width+2*Xt-Gn-Qt-Zn,_r=Vn+at.height+2*Ht-er-mr-an;M.left=Math.max(M.left,fn),M.top=Math.max(M.top,Vn),M.right=Math.min(M.right,rr),M.bottom=Math.min(M.bottom,_r)}}),M}function Ap(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M="".concat(P),N=M.match(/^(.*)\%$/);return N?x*(parseFloat(N[1])/100):parseFloat(M)}function Il(x,P){var M=xe(P||[],2),N=M[0],G=M[1];return[Ap(x.width,N),Ap(x.height,G)]}function x0(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[x[0],x[1]]}function Sd(x,P){var M,N=P[0],G=P[1];return M=N==="t"?x.y:N==="b"?x.y+x.height:x.y+x.height/2,{x:G==="l"?x.x:G==="r"?x.x+x.width:x.x+x.width/2,y:M}}function ac(x,P){var M={t:"b",b:"t",l:"r",r:"l"};return x.map(function(N,G){return G===P?M[N]||"c":N}).join("")}function w0(x,P,M,N,G,Ee,Ae){var Ze=xe(C.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:G[N]||{}}),2),Ge=Ze[0],it=Ze[1],mt=C.useRef(0),at=C.useMemo(function(){return P?lf(P):[]},[P]),bt=C.useRef({});x||(bt.current={});var gt=cs(function(){if(P&&M&&x){let uc=function(Fp,P2){var Zp=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zr,c5=fn.x+Fp,d5=fn.y+P2,C7=c5+Br,eo=d5+Jr,ci=Math.max(c5,Zp.left),qa=Math.max(d5,Zp.top),fs=Math.min(C7,Zp.right),La=Math.min(eo,Zp.bottom);return Math.max(0,(fs-ci)*(La-qa))},l5=function(){jo=fn.y+Kr,ei=jo+Jr,oi=fn.x+Ti,Oi=oi+Br};var At,jt,Lt,$t=P,hn=$t.ownerDocument,kn=su($t).getComputedStyle($t),On=kn.width,Zn=kn.height,an=kn.position,er=$t.style.left,mr=$t.style.top,Gn=$t.style.right,Qt=$t.style.bottom,Xt=Ot(Ot({},G[N]),Ee),Ht=hn.createElement("div");if((At=$t.parentElement)===null||At===void 0||At.appendChild(Ht),Ht.style.left="".concat($t.offsetLeft,"px"),Ht.style.top="".concat($t.offsetTop,"px"),Ht.style.position=an,Ht.style.height="".concat($t.offsetHeight,"px"),Ht.style.width="".concat($t.offsetWidth,"px"),$t.style.left="0",$t.style.top="0",$t.style.right="auto",$t.style.bottom="auto",Array.isArray(M))Lt={x:M[0],y:M[1],width:0,height:0};else{var Tn=M.getBoundingClientRect();Lt={x:Tn.x,y:Tn.y,width:Tn.width,height:Tn.height}}var fn=$t.getBoundingClientRect(),Vn=hn.documentElement,rr=Vn.clientWidth,_r=Vn.clientHeight,xr=Vn.scrollWidth,$r=Vn.scrollHeight,Or=Vn.scrollTop,zr=Vn.scrollLeft,Jr=fn.height,Br=fn.width,ro=Lt.height,Qr=Lt.width,Ao={left:0,top:0,right:rr,bottom:_r},To={left:-zr,top:-Or,right:xr-zr,bottom:$r-Or},No=Xt.htmlRegion,Uo="visible",zo="visibleFirst";No!=="scroll"&&No!==zo&&(No=Uo);var Fo=No===zo,ni=y0(To,at),jr=y0(Ao,at),Zr=No===Uo?jr:ni,po=Fo?jr:Zr;$t.style.left="auto",$t.style.top="auto",$t.style.right="0",$t.style.bottom="0";var yo=$t.getBoundingClientRect();$t.style.left=er,$t.style.top=mr,$t.style.right=Gn,$t.style.bottom=Qt,(jt=$t.parentElement)===null||jt===void 0||jt.removeChild(Ht);var _o=qs(Math.round(Br/parseFloat(On)*1e3)/1e3),Xr=qs(Math.round(Jr/parseFloat(Zn)*1e3)/1e3);if(_o===0||Xr===0||Fa(M)&&!iu(M))return;var Ii=Xt.offset,li=Xt.targetOffset,Ua=xe(Il(fn,Ii),2),Qo=Ua[0],ga=Ua[1],ri=xe(Il(Lt,li),2),vs=ri[0],Si=ri[1];Lt.x-=vs,Lt.y-=Si;var us=xe(Xt.points||[],2),cc=us[0],Fi=x0(us[1]),Vo=x0(cc),$s=Sd(Lt,Fi),el=Sd(fn,Vo),tl=Ot({},Xt),Ti=$s.x-el.x+Qo,Kr=$s.y-el.y+ga,jo,ei,oi,Oi,is=uc(Ti,Kr),bs=uc(Ti,Kr,jr),yi=Sd(Lt,["t","l"]),Ai=Sd(fn,["t","l"]),Li=Sd(Lt,["b","r"]),Oa=Sd(fn,["b","r"]),ma=Xt.overflow||{},Wa=ma.adjustX,nl=ma.adjustY,Aa=ma.shiftX,hs=ma.shiftY,Hc=function(Fp){return typeof Fp=="boolean"?Fp:Fp>=0};l5();var va=Hc(nl),bf=Vo[0]===Fi[0];if(va&&Vo[0]==="t"&&(ei>po.bottom||bt.current.bt)){var js=Kr;bf?js-=Jr-ro:js=yi.y-Oa.y-ga;var ka=uc(Ti,js),yf=uc(Ti,js,jr);ka>is||ka===is&&(!Fo||yf>=bs)?(bt.current.bt=!0,Kr=js,ga=-ga,tl.points=[ac(Vo,0),ac(Fi,0)]):bt.current.bt=!1}if(va&&Vo[0]==="b"&&(jo<po.top||bt.current.tb)){var Fc=Kr;bf?Fc+=Jr-ro:Fc=Li.y-Ai.y-ga;var xf=uc(Ti,Fc),k2=uc(Ti,Fc,jr);xf>is||xf===is&&(!Fo||k2>=bs)?(bt.current.tb=!0,Kr=Fc,ga=-ga,tl.points=[ac(Vo,0),ac(Fi,0)]):bt.current.tb=!1}var Bp=Hc(Wa),ah=Vo[1]===Fi[1];if(Bp&&Vo[1]==="l"&&(Oi>po.right||bt.current.rl)){var Pd=Ti;ah?Pd-=Br-Qr:Pd=yi.x-Oa.x-Qo;var z0=uc(Pd,Kr),_2=uc(Pd,Kr,jr);z0>is||z0===is&&(!Fo||_2>=bs)?(bt.current.rl=!0,Ti=Pd,Qo=-Qo,tl.points=[ac(Vo,1),ac(Fi,1)]):bt.current.rl=!1}if(Bp&&Vo[1]==="r"&&(oi<po.left||bt.current.lr)){var Zc=Ti;ah?Zc+=Br-Qr:Zc=Li.x-Ai.x-Qo;var sh=uc(Zc,Kr),lh=uc(Zc,Kr,jr);sh>is||sh===is&&(!Fo||lh>=bs)?(bt.current.lr=!0,Ti=Zc,Qo=-Qo,tl.points=[ac(Vo,1),ac(Fi,1)]):bt.current.lr=!1}l5();var Uc=Aa===!0?0:Aa;typeof Uc=="number"&&(oi<jr.left&&(Ti-=oi-jr.left-Qo,Lt.x+Qr<jr.left+Uc&&(Ti+=Lt.x-jr.left+Qr-Uc)),Oi>jr.right&&(Ti-=Oi-jr.right-Qo,Lt.x>jr.right-Uc&&(Ti+=Lt.x-jr.right+Uc)));var dc=hs===!0?0:hs;typeof dc=="number"&&(jo<jr.top&&(Kr-=jo-jr.top-ga,Lt.y+ro<jr.top+dc&&(Kr+=Lt.y-jr.top+ro-dc)),ei>jr.bottom&&(Kr-=ei-jr.bottom-ga,Lt.y>jr.bottom-dc&&(Kr+=Lt.y-jr.bottom+dc)));var ch=fn.x+Ti,wf=ch+Br,Wc=fn.y+Kr,E2=Wc+Jr,Hp=Lt.x,Bo=Hp+Qr,Qi=Lt.y,ea=Qi+ro,Rs=(Math.max(ch,Hp)+Math.min(wf,Bo))/2-ch,rl=(Math.max(Wc,Qi)+Math.min(E2,ea))/2-Wc;Ae==null||Ae(P,tl);var $l=yo.right-fn.x-(Ti+fn.width),dh=yo.bottom-fn.y-(Kr+fn.height);it({ready:!0,offsetX:Ti/_o,offsetY:Kr/Xr,offsetR:$l/_o,offsetB:dh/Xr,arrowX:Rs/_o,arrowY:rl/Xr,scaleX:_o,scaleY:Xr,align:tl})}}),It=function(){it(function(At){return Ot(Ot({},At),{},{ready:!1})})};return _n(It,[N]),_n(function(){x||It()},[x]),[Ge.ready,Ge.offsetX,Ge.offsetY,Ge.offsetR,Ge.offsetB,Ge.arrowX,Ge.arrowY,Ge.scaleX,Ge.scaleY,Ge.align,function(){mt.current+=1;var At=mt.current;Promise.resolve().then(function(){mt.current===At&&gt()})}]}function qi(x,P,M,N,G){_n(function(){if(x&&P&&M){let mt=function(){N(),G()};var Ee=M,Ae=lf(P),Ze=lf(Ee),Ge=su(Ee),it=new Set([Ge].concat(Go(Ae),Go(Ze)));return it.forEach(function(at){at.addEventListener("scroll",mt,{passive:!0})}),Ge.addEventListener("resize",mt,{passive:!0}),N(),function(){it.forEach(function(at){at.removeEventListener("scroll",mt),Ge.removeEventListener("resize",mt)})}}},[x,P,M])}function lu(x){var P=C.useRef(!1),M=xe(C.useState(x),2),N=M[0],G=M[1];return C.useEffect(function(){return P.current=!1,function(){P.current=!0}},[]),[N,function(Ee,Ae){Ae&&P.current||G(Ee)}]}function cf(x){return x!==void 0}function Tl(x,P){var M=P||{},N=M.defaultValue,G=M.value,Ee=M.onChange,Ae=M.postState,Ze=xe(lu(function(){return cf(G)?G:cf(N)?typeof N=="function"?N():N:typeof x=="function"?x():x}),2),Ge=Ze[0],it=Ze[1],mt=G!==void 0?G:Ge,at=Ae?Ae(mt):mt,bt=cs(Ee),gt=xe(lu([mt]),2),It=gt[0],At=gt[1];return zt(function(){var jt=It[0];Ge!==jt&&bt(Ge,jt)},[It]),zt(function(){cf(G)||it(G)},[G]),[at,cs(function(jt,Lt){it(jt,Lt),At([mt],Lt)})]}function Ms(x,P){for(var M=x,N=0;N<P.length;N+=1){if(M==null)return;M=M[P[N]]}return M}function Lp(x,P,M,N){if(!P.length)return M;var G,Ee,Ae=be(G=P)||fa(G)||ye(G)||ue(),Ze=Ae[0],Ge=Ae.slice(1);return Ee=x||typeof Ze!="number"?Array.isArray(x)?Go(x):Ot({},x):[],N&&M===void 0&&Ge.length===1?delete Ee[Ze][Ge[0]]:Ee[Ze]=Lp(Ee[Ze],Ge,M,N),Ee}function df(x,P,M){var N=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return P.length&&N&&M===void 0&&!Ms(x,P.slice(0,-1))?x:Lp(x,P,M,N)}function o2(x){return Pe(x)==="object"&&x!==null&&Object.getPrototypeOf(x)===Object.prototype}function $p(x){return Array.isArray(x)?[]:{}}var i2=typeof Reflect>"u"?Object.keys:Reflect.ownKeys,Qu=function(x){return+setTimeout(x,16)},C0=function(x){return clearTimeout(x)};typeof window<"u"&&"requestAnimationFrame"in window&&(Qu=function(x){return window.requestAnimationFrame(x)},C0=function(x){return window.cancelAnimationFrame(x)});var uf=0,hf=new Map;function S0(x){hf.delete(x)}var jp=function(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,M=uf+=1;function N(G){if(G===0)S0(M),x();else{var Ee=Qu(function(){N(G-1)});hf.set(M,Ee)}}return N(P),M};jp.cancel=function(x){var P=hf.get(x);return S0(P),C0(P)};var En=jp;function k0(x,P,M,N,G,Ee,Ae,Ze){var Ge=C.useRef(x),it=C.useRef(!1);Ge.current!==x&&(it.current=!0,Ge.current=x),C.useEffect(function(){var mt=En(function(){it.current=!1});return function(){En.cancel(mt)}},[x]),C.useEffect(function(){if(P&&N&&(!G||Ee)){var mt=function(){var hn=!1;return[function(kn){var On=kn.target;hn=Ae(On)},function(kn){var On=kn.target;it.current||!Ge.current||hn||Ae(On)||Ze(!1)}]},at=xe(mt(),2),bt=at[0],gt=at[1],It=xe(mt(),2),At=It[0],jt=It[1],Lt=su(N);Lt.addEventListener("mousedown",bt,!0),Lt.addEventListener("click",gt,!0),Lt.addEventListener("contextmenu",gt,!0);var $t=Dr(M);return $t&&($t.addEventListener("mousedown",At,!0),$t.addEventListener("click",jt,!0),$t.addEventListener("contextmenu",jt,!0)),function(){Lt.removeEventListener("mousedown",bt,!0),Lt.removeEventListener("click",gt,!0),Lt.removeEventListener("contextmenu",gt,!0),$t&&($t.removeEventListener("mousedown",At,!0),$t.removeEventListener("click",jt,!0),$t.removeEventListener("contextmenu",jt,!0))}}},[P,M,N,G,Ee])}var _0=["children"],Rp=C.createContext({});function cu(x){var P=x.children,M=Re(x,_0);return C.createElement(Rp.Provider,{value:M},P)}var Dc=function(x){jc(M,x);var P=xd(M);function M(){return Xs(this,M),P.apply(this,arguments)}return ms(M,[{key:"render",value:function(){return this.props.children}}]),M}(C.Component),ff=Dc,Ol="none",du="appear",uu="enter",eh="leave",$e="none",Qe="prepare",nt="start",lt="active",Ct="end",Mt="prepared";function Bt(x,P){var M={};return M[x.toLowerCase()]=P.toLowerCase(),M["Webkit".concat(x)]="webkit".concat(P),M["Moz".concat(x)]="moz".concat(P),M["ms".concat(x)]="MS".concat(P),M["O".concat(x)]="o".concat(P.toLowerCase()),M}var Pt=function(x,P){var M={animationend:Bt("Animation","AnimationEnd"),transitionend:Bt("Transition","TransitionEnd")};return x&&("AnimationEvent"in P||delete M.animationend.animation,"TransitionEvent"in P||delete M.transitionend.transition),M}(Rn(),typeof window<"u"?window:{}),gn={};if(Rn()){var Bn=document.createElement("div");gn=Bn.style}var Pn={};function ln(x){if(Pn[x])return Pn[x];var P=Pt[x];if(P)for(var M=Object.keys(P),N=M.length,G=0;G<N;G+=1){var Ee=M[G];if(Object.prototype.hasOwnProperty.call(P,Ee)&&Ee in gn)return Pn[x]=P[Ee],Pn[x]}return""}var Xn=ln("animationend"),Mn=ln("transitionend"),Qn=!(!Xn||!Mn),Sn=Xn||"animationend",Yn=Mn||"transitionend";function kr(x,P){if(!x)return null;if(Pe(x)==="object"){var M=P.replace(/-\w/g,function(N){return N[1].toUpperCase()});return x[M]}return"".concat(x,"-").concat(P)}var Pr=Rn()?C.useLayoutEffect:C.useEffect,Sr=[Qe,nt,lt,Ct],nr=[Qe,Mt];function oo(x){return x===lt||x===Ct}var to=function(x,P,M){var N=xe(lu($e),2),G=N[0],Ee=N[1],Ae=function(){var at=C.useRef(null);function bt(){En.cancel(at.current)}return C.useEffect(function(){return function(){bt()}},[]),[function gt(It){var At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;bt();var jt=En(function(){At<=1?It({isCanceled:function(){return jt!==at.current}}):gt(It,At-1)});at.current=jt},bt]}(),Ze=xe(Ae,2),Ge=Ze[0],it=Ze[1],mt=P?nr:Sr;return Pr(function(){if(G!==$e&&G!==Ct){var at=mt.indexOf(G),bt=mt[at+1],gt=M(G);gt===!1?Ee(bt,!0):bt&&Ge(function(It){function At(){It.isCanceled()||Ee(bt,!0)}gt===!0?At():Promise.resolve(gt).then(At)})}},[x,G]),C.useEffect(function(){return function(){it()}},[]),[function(){Ee(Qe,!0)},G]};function bo(x,P,M,N){var G=N.motionEnter,Ee=G===void 0||G,Ae=N.motionAppear,Ze=Ae===void 0||Ae,Ge=N.motionLeave,it=Ge===void 0||Ge,mt=N.motionDeadline,at=N.motionLeaveImmediately,bt=N.onAppearPrepare,gt=N.onEnterPrepare,It=N.onLeavePrepare,At=N.onAppearStart,jt=N.onEnterStart,Lt=N.onLeaveStart,$t=N.onAppearActive,hn=N.onEnterActive,kn=N.onLeaveActive,On=N.onAppearEnd,Zn=N.onEnterEnd,an=N.onLeaveEnd,er=N.onVisibleChanged,mr=xe(lu(),2),Gn=mr[0],Qt=mr[1],Xt=xe(lu(Ol),2),Ht=Xt[0],Tn=Xt[1],fn=xe(lu(null),2),Vn=fn[0],rr=fn[1],_r=(0,C.useRef)(!1),xr=(0,C.useRef)(null);function $r(){return M()}var Or=(0,C.useRef)(!1);function zr(){Tn(Ol,!0),rr(null,!0)}function Jr(jr){var Zr=$r();if(!jr||jr.deadline||jr.target===Zr){var po,yo=Or.current;Ht===du&&yo?po=On==null?void 0:On(Zr,jr):Ht===uu&&yo?po=Zn==null?void 0:Zn(Zr,jr):Ht===eh&&yo&&(po=an==null?void 0:an(Zr,jr)),Ht!==Ol&&yo&&po!==!1&&zr()}}var Br=function(jr){var Zr=(0,C.useRef)(),po=(0,C.useRef)(jr);po.current=jr;var yo=C.useCallback(function(Xr){po.current(Xr)},[]);function _o(Xr){Xr&&(Xr.removeEventListener(Yn,yo),Xr.removeEventListener(Sn,yo))}return C.useEffect(function(){return function(){_o(Zr.current)}},[]),[function(Xr){Zr.current&&Zr.current!==Xr&&_o(Zr.current),Xr&&Xr!==Zr.current&&(Xr.addEventListener(Yn,yo),Xr.addEventListener(Sn,yo),Zr.current=Xr)},_o]}(Jr),ro=xe(Br,1)[0],Qr=function(jr){var Zr,po,yo;switch(jr){case du:return Me(Zr={},Qe,bt),Me(Zr,nt,At),Me(Zr,lt,$t),Zr;case uu:return Me(po={},Qe,gt),Me(po,nt,jt),Me(po,lt,hn),po;case eh:return Me(yo={},Qe,It),Me(yo,nt,Lt),Me(yo,lt,kn),yo;default:return{}}},Ao=C.useMemo(function(){return Qr(Ht)},[Ht]),To=xe(to(Ht,!x,function(jr){if(jr===Qe){var Zr=Ao.prepare;return!!Zr&&Zr($r())}var po;return Uo in Ao&&rr(((po=Ao[Uo])===null||po===void 0?void 0:po.call(Ao,$r(),null))||null),Uo===lt&&(ro($r()),mt>0&&(clearTimeout(xr.current),xr.current=setTimeout(function(){Jr({deadline:!0})},mt))),Uo===Mt&&zr(),!0}),2),No=To[0],Uo=To[1],zo=oo(Uo);Or.current=zo,Pr(function(){Qt(P);var jr,Zr=_r.current;_r.current=!0,!Zr&&P&&Ze&&(jr=du),Zr&&P&&Ee&&(jr=uu),(Zr&&!P&&it||!Zr&&at&&!P&&it)&&(jr=eh);var po=Qr(jr);jr&&(x||po.prepare)?(Tn(jr),No()):Tn(Ol)},[P]),(0,C.useEffect)(function(){(Ht===du&&!Ze||Ht===uu&&!Ee||Ht===eh&&!it)&&Tn(Ol)},[Ze,Ee,it]),(0,C.useEffect)(function(){return function(){_r.current=!1,clearTimeout(xr.current)}},[]);var Fo=C.useRef(!1);(0,C.useEffect)(function(){Gn&&(Fo.current=!0),Gn!==void 0&&Ht===Ol&&((Fo.current||Gn)&&(er==null||er(Gn)),Fo.current=!0)},[Gn,Ht]);var ni=Vn;return Ao.prepare&&Uo===nt&&(ni=Ot({transition:"none"},ni)),[Ht,Uo,ni,Gn??P]}var O=function(x){var P=x;Pe(x)==="object"&&(P=x.transitionSupport);var M=C.forwardRef(function(N,G){var Ee=N.visible,Ae=Ee===void 0||Ee,Ze=N.removeOnLeave,Ge=Ze===void 0||Ze,it=N.forceRender,mt=N.children,at=N.motionName,bt=N.leavedClassName,gt=N.eventProps,It=function(Ht,Tn){return!(!Ht.motionName||!P||Tn===!1)}(N,C.useContext(Rp).motion),At=(0,C.useRef)(),jt=(0,C.useRef)(),Lt=xe(bo(It,Ae,function(){try{return At.current instanceof HTMLElement?At.current:Ia(jt.current)}catch{return null}},N),4),$t=Lt[0],hn=Lt[1],kn=Lt[2],On=Lt[3],Zn=C.useRef(On);On&&(Zn.current=!0);var an,er=C.useCallback(function(Ht){At.current=Ht,Ro(G,Ht)},[G]),mr=Ot(Ot({},gt),{},{visible:Ae});if(mt)if($t===Ol)an=On?mt(Ot({},mr),er):!Ge&&Zn.current&&bt?mt(Ot(Ot({},mr),{},{className:bt}),er):it||!Ge&&!bt?mt(Ot(Ot({},mr),{},{style:{display:"none"}}),er):null;else{var Gn,Qt;hn===Qe?Qt="prepare":oo(hn)?Qt="active":hn===nt&&(Qt="start");var Xt=kr(at,"".concat($t,"-").concat(Qt));an=mt(Ot(Ot({},mr),{},{className:Se()(kr(at,$t),(Gn={},Me(Gn,Xt,Xt&&Qt),Me(Gn,at,typeof at=="string"),Gn)),style:kn}),er)}else an=null;return C.isValidElement(an)&&ti(an)&&(an.ref||(an=C.cloneElement(an,{ref:er}))),C.createElement(ff,{ref:jt},an)});return M.displayName="CSSMotion",M}(Qn),de="add",ke="keep",Oe="remove",He="removed";function Te(x){var P;return Ot(Ot({},P=x&&Pe(x)==="object"&&"key"in x?x:{key:x}),{},{key:String(P.key)})}function Ce(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x.map(Te)}function Xe(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=[],N=0,G=P.length,Ee=Ce(x),Ae=Ce(P);Ee.forEach(function(it){for(var mt=!1,at=N;at<G;at+=1){var bt=Ae[at];if(bt.key===it.key){N<at&&(M=M.concat(Ae.slice(N,at).map(function(gt){return Ot(Ot({},gt),{},{status:de})})),N=at),M.push(Ot(Ot({},bt),{},{status:ke})),N+=1,mt=!0;break}}mt||M.push(Ot(Ot({},it),{},{status:Oe}))}),N<G&&(M=M.concat(Ae.slice(N).map(function(it){return Ot(Ot({},it),{},{status:de})})));var Ze={};M.forEach(function(it){var mt=it.key;Ze[mt]=(Ze[mt]||0)+1});var Ge=Object.keys(Ze).filter(function(it){return Ze[it]>1});return Ge.forEach(function(it){(M=M.filter(function(mt){var at=mt.key,bt=mt.status;return at!==it||bt!==Oe})).forEach(function(mt){mt.key===it&&(mt.status=ke)})}),M}var Je=["component","children","onVisibleChanged","onAllRemoved"],ct=["status"],yt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];(function(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O,M=function(N){jc(Ee,N);var G=xd(Ee);function Ee(){var Ae;Xs(this,Ee);for(var Ze=arguments.length,Ge=new Array(Ze),it=0;it<Ze;it++)Ge[it]=arguments[it];return Me(ou(Ae=G.call.apply(G,[this].concat(Ge))),"state",{keyEntities:[]}),Me(ou(Ae),"removeKey",function(mt){var at=Ae.state.keyEntities.map(function(bt){return bt.key!==mt?bt:Ot(Ot({},bt),{},{status:He})});return Ae.setState({keyEntities:at}),at.filter(function(bt){return bt.status!==He}).length}),Ae}return ms(Ee,[{key:"render",value:function(){var Ae=this,Ze=this.state.keyEntities,Ge=this.props,it=Ge.component,mt=Ge.children,at=Ge.onVisibleChanged,bt=Ge.onAllRemoved,gt=Re(Ge,Je),It=it||C.Fragment,At={};return yt.forEach(function(jt){At[jt]=gt[jt],delete gt[jt]}),delete gt.keys,C.createElement(It,gt,Ze.map(function(jt){var Lt=jt.status,$t=Re(jt,ct),hn=Lt===de||Lt===ke;return C.createElement(P,(0,X.Z)({},At,{key:$t.key,visible:hn,eventProps:$t,onVisibleChanged:function(kn){at==null||at(kn,{key:$t.key}),kn||Ae.removeKey($t.key)===0&&bt&&bt()}}),mt)}))}}],[{key:"getDerivedStateFromProps",value:function(Ae,Ze){var Ge=Ae.keys,it=Ze.keyEntities,mt=Ce(Ge);return{keyEntities:Xe(it,mt).filter(function(at){var bt=it.find(function(gt){var It=gt.key;return at.key===It});return!bt||bt.status!==He||at.status!==Oe})}}}]),Ee}(C.Component);Me(M,"defaultProps",{component:"div"})})(Qn);var wt=O;function kt(x){var P=x.prefixCls,M=x.align,N=x.arrow,G=x.arrowPos,Ee=N||{},Ae=Ee.className,Ze=Ee.content,Ge=G.x,it=Ge===void 0?0:Ge,mt=G.y,at=mt===void 0?0:mt,bt=C.useRef();if(!M||!M.points)return null;var gt={position:"absolute"};if(M.autoArrow!==!1){var It=M.points[0],At=M.points[1],jt=It[0],Lt=It[1],$t=At[0],hn=At[1];jt!==$t&&["t","b"].includes(jt)?jt==="t"?gt.top=0:gt.bottom=0:gt.top=at,Lt!==hn&&["l","r"].includes(Lt)?Lt==="l"?gt.left=0:gt.right=0:gt.left=it}return C.createElement("div",{ref:bt,className:Se()("".concat(P,"-arrow"),Ae),style:gt},Ze)}function en(x){var P=x.prefixCls,M=x.open,N=x.zIndex,G=x.mask,Ee=x.motion;return G?C.createElement(wt,(0,X.Z)({},Ee,{motionAppear:!0,visible:M,removeOnLeave:!0}),function(Ae){var Ze=Ae.className;return C.createElement("div",{style:{zIndex:N},className:Se()("".concat(P,"-mask"),Ze)})}):null}var wn=C.memo(function(x){return x.children},function(x,P){return P.cache}),In=wn,qn=C.forwardRef(function(x,P){var M=x.popup,N=x.className,G=x.prefixCls,Ee=x.style,Ae=x.target,Ze=x.onVisibleChanged,Ge=x.open,it=x.keepDom,mt=x.onClick,at=x.mask,bt=x.arrow,gt=x.arrowPos,It=x.align,At=x.motion,jt=x.maskMotion,Lt=x.forceRender,$t=x.getPopupContainer,hn=x.autoDestroy,kn=x.portal,On=x.zIndex,Zn=x.onMouseEnter,an=x.onMouseLeave,er=x.onPointerEnter,mr=x.ready,Gn=x.offsetX,Qt=x.offsetY,Xt=x.offsetR,Ht=x.offsetB,Tn=x.onAlign,fn=x.onPrepare,Vn=x.stretch,rr=x.targetWidth,_r=x.targetHeight,xr=typeof M=="function"?M():M,$r=Ge||it,Or=($t==null?void 0:$t.length)>0,zr=xe(C.useState(!$t||!Or),2),Jr=zr[0],Br=zr[1];if(_n(function(){!Jr&&Or&&Ae&&Br(!0)},[Jr,Or,Ae]),!Jr)return null;var ro="auto",Qr={left:"-1000vw",top:"-1000vh",right:ro,bottom:ro};if(mr||!Ge){var Ao=It.points,To=It._experimental,No=To==null?void 0:To.dynamicInset,Uo=No&&Ao[0][1]==="r",zo=No&&Ao[0][0]==="b";Uo?(Qr.right=Xt,Qr.left=ro):(Qr.left=Gn,Qr.right=ro),zo?(Qr.bottom=Ht,Qr.top=ro):(Qr.top=Qt,Qr.bottom=ro)}var Fo={};return Vn&&(Vn.includes("height")&&_r?Fo.height=_r:Vn.includes("minHeight")&&_r&&(Fo.minHeight=_r),Vn.includes("width")&&rr?Fo.width=rr:Vn.includes("minWidth")&&rr&&(Fo.minWidth=rr)),Ge||(Fo.pointerEvents="none"),C.createElement(kn,{open:Lt||$r,getContainer:$t&&function(){return $t(Ae)},autoDestroy:hn},C.createElement(en,{prefixCls:G,open:Ge,zIndex:On,mask:at,motion:jt}),C.createElement(af,{onResize:Tn,disabled:!Ge},function(ni){return C.createElement(wt,(0,X.Z)({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:Lt,leavedClassName:"".concat(G,"-hidden")},At,{onAppearPrepare:fn,onEnterPrepare:fn,visible:Ge,onVisibleChanged:function(jr){var Zr;At==null||(Zr=At.onVisibleChanged)===null||Zr===void 0||Zr.call(At,jr),Ze(jr)}}),function(jr,Zr){var po=jr.className,yo=jr.style,_o=Se()(G,po,N);return C.createElement("div",{ref:si(ni,P,Zr),className:_o,style:Ot(Ot(Ot(Ot({"--arrow-x":"".concat(gt.x||0,"px"),"--arrow-y":"".concat(gt.y||0,"px")},Qr),Fo),yo),{},{boxSizing:"border-box",zIndex:On},Ee),onMouseEnter:Zn,onMouseLeave:an,onPointerEnter:er,onClick:mt},bt&&C.createElement(kt,{prefixCls:G,arrow:bt,arrowPos:gt,align:It}),C.createElement(In,{cache:!Ge},xr))})}))}),cr=qn,Nr=C.forwardRef(function(x,P){var M=x.children,N=x.getTriggerDOMNode,G=ti(M),Ee=C.useCallback(function(Ze){Ro(P,N?N(Ze):Ze)},[N]),Ae=hi(Ee,M.ref);return G?C.cloneElement(M,{ref:Ae}):M}),Jn=Nr,Lr=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"],qr=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ha,P=C.forwardRef(function(M,N){var G=M.prefixCls,Ee=G===void 0?"rc-trigger-popup":G,Ae=M.children,Ze=M.action,Ge=Ze===void 0?"hover":Ze,it=M.showAction,mt=M.hideAction,at=M.popupVisible,bt=M.defaultPopupVisible,gt=M.onPopupVisibleChange,It=M.afterPopupVisibleChange,At=M.mouseEnterDelay,jt=M.mouseLeaveDelay,Lt=jt===void 0?.1:jt,$t=M.focusDelay,hn=M.blurDelay,kn=M.mask,On=M.maskClosable,Zn=On===void 0||On,an=M.getPopupContainer,er=M.forceRender,mr=M.autoDestroy,Gn=M.destroyPopupOnHide,Qt=M.popup,Xt=M.popupClassName,Ht=M.popupStyle,Tn=M.popupPlacement,fn=M.builtinPlacements,Vn=fn===void 0?{}:fn,rr=M.popupAlign,_r=M.zIndex,xr=M.stretch,$r=M.getPopupClassNameFromAlign,Or=M.alignPoint,zr=M.onPopupClick,Jr=M.onPopupAlign,Br=M.arrow,ro=M.popupMotion,Qr=M.maskMotion,Ao=M.popupTransitionName,To=M.popupAnimation,No=M.maskTransitionName,Uo=M.maskAnimation,zo=M.className,Fo=M.getTriggerDOMNode,ni=Re(M,Lr),jr=mr||Gn||!1,Zr=xe(C.useState(!1),2),po=Zr[0],yo=Zr[1];_n(function(){yo(sf())},[]);var _o=C.useRef({}),Xr=C.useContext(Tp),Ii=C.useMemo(function(){return{registerSubPopup:function(eo,ci){_o.current[eo]=ci,Xr==null||Xr.registerSubPopup(eo,ci)}}},[Xr]),li=Ay(),Ua=xe(C.useState(null),2),Qo=Ua[0],ga=Ua[1],ri=cs(function(eo){Fa(eo)&&Qo!==eo&&ga(eo),Xr==null||Xr.registerSubPopup(li,eo)}),vs=xe(C.useState(null),2),Si=vs[0],us=vs[1],cc=cs(function(eo){Fa(eo)&&Si!==eo&&us(eo)}),Fi=C.Children.only(Ae),Vo=(Fi==null?void 0:Fi.props)||{},$s={},el=cs(function(eo){var ci,qa,fs=Si;return(fs==null?void 0:fs.contains(eo))||((ci=Dr(fs))===null||ci===void 0?void 0:ci.host)===eo||eo===fs||(Qo==null?void 0:Qo.contains(eo))||((qa=Dr(Qo))===null||qa===void 0?void 0:qa.host)===eo||eo===Qo||Object.values(_o.current).some(function(La){return(La==null?void 0:La.contains(eo))||eo===La})}),tl=Op(Ee,ro,To,Ao),Ti=Op(Ee,Qr,Uo,No),Kr=xe(C.useState(bt||!1),2),jo=Kr[0],ei=Kr[1],oi=at??jo,Oi=cs(function(eo){at===void 0&&ei(eo)});_n(function(){ei(at||!1)},[at]);var is=C.useRef(oi);is.current=oi;var bs=cs(function(eo){(0,Fr.flushSync)(function(){oi!==eo&&(Oi(eo),gt==null||gt(eo))})}),yi=C.useRef(),Ai=function(){clearTimeout(yi.current)},Li=function(eo){var ci=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ai(),ci===0?bs(eo):yi.current=setTimeout(function(){bs(eo)},1e3*ci)};C.useEffect(function(){return Ai},[]);var Oa=xe(C.useState(!1),2),ma=Oa[0],Wa=Oa[1];_n(function(eo){eo&&!oi||Wa(!0)},[oi]);var nl=xe(C.useState(null),2),Aa=nl[0],hs=nl[1],Hc=xe(C.useState([0,0]),2),va=Hc[0],bf=Hc[1],js=function(eo){bf([eo.clientX,eo.clientY])},ka=xe(w0(oi,Qo,Or?va:Si,Tn,Vn,rr,Jr),11),yf=ka[0],Fc=ka[1],xf=ka[2],k2=ka[3],Bp=ka[4],ah=ka[5],Pd=ka[6],z0=ka[7],_2=ka[8],Zc=ka[9],sh=ka[10],lh=xe(r2(po,Ge,it,mt),2),Uc=lh[0],dc=lh[1],ch=Uc.has("click"),wf=dc.has("click")||dc.has("contextMenu"),Wc=cs(function(){ma||sh()});qi(oi,Si,Qo,Wc,function(){is.current&&Or&&wf&&Li(!1)}),_n(function(){Wc()},[va,Tn]),_n(function(){!oi||Vn!=null&&Vn[Tn]||Wc()},[JSON.stringify(rr)]);var E2=C.useMemo(function(){var eo=b0(Vn,Ee,Zc,Or);return Se()(eo,$r==null?void 0:$r(Zc))},[Zc,$r,Vn,Ee,Or]);C.useImperativeHandle(N,function(){return{forceAlign:Wc}}),_n(function(){Aa&&(sh(),Aa(),hs(null))},[Aa]);var Hp=xe(C.useState(0),2),Bo=Hp[0],Qi=Hp[1],ea=xe(C.useState(0),2),Rs=ea[0],rl=ea[1];function $l(eo,ci,qa,fs){$s[eo]=function(La){var u5;fs==null||fs(La),Li(ci,qa);for(var S7=arguments.length,oI=new Array(S7>1?S7-1:0),h5=1;h5<S7;h5++)oI[h5-1]=arguments[h5];(u5=Vo[eo])===null||u5===void 0||u5.call.apply(u5,[Vo,La].concat(oI))}}(ch||wf)&&($s.onClick=function(eo){var ci;is.current&&wf?Li(!1):!is.current&&ch&&(js(eo),Li(!0));for(var qa=arguments.length,fs=new Array(qa>1?qa-1:0),La=1;La<qa;La++)fs[La-1]=arguments[La];(ci=Vo.onClick)===null||ci===void 0||ci.call.apply(ci,[Vo,eo].concat(fs))}),k0(oi,wf,Si,Qo,kn,Zn,el,Li);var dh,uc,l5=Uc.has("hover"),Fp=dc.has("hover");l5&&($l("onMouseEnter",!0,At,function(eo){js(eo)}),$l("onPointerEnter",!0,At,function(eo){js(eo)}),dh=function(){(oi||ma)&&Li(!0,At)},Or&&($s.onMouseMove=function(eo){var ci;(ci=Vo.onMouseMove)===null||ci===void 0||ci.call(Vo,eo)})),Fp&&($l("onMouseLeave",!1,Lt),$l("onPointerLeave",!1,Lt),uc=function(){Li(!1,Lt)}),Uc.has("focus")&&$l("onFocus",!0,$t),dc.has("focus")&&$l("onBlur",!1,hn),Uc.has("contextMenu")&&($s.onContextMenu=function(eo){var ci;is.current&&dc.has("contextMenu")?Li(!1):(js(eo),Li(!0)),eo.preventDefault();for(var qa=arguments.length,fs=new Array(qa>1?qa-1:0),La=1;La<qa;La++)fs[La-1]=arguments[La];(ci=Vo.onContextMenu)===null||ci===void 0||ci.call.apply(ci,[Vo,eo].concat(fs))}),zo&&($s.className=Se()(Vo.className,zo));var P2=Ot(Ot({},Vo),$s),Zp={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach(function(eo){ni[eo]&&(Zp[eo]=function(){for(var ci,qa=arguments.length,fs=new Array(qa),La=0;La<qa;La++)fs[La]=arguments[La];(ci=P2[eo])===null||ci===void 0||ci.call.apply(ci,[P2].concat(fs)),ni[eo].apply(ni,fs)})});var c5=C.cloneElement(Fi,Ot(Ot({},P2),Zp)),d5={x:ah,y:Pd},C7=Br?Ot({},Br!==!0?Br:{}):null;return C.createElement(C.Fragment,null,C.createElement(af,{disabled:!oi,ref:cc,onResize:function(eo,ci){if(Wc(),xr){var qa=ci.getBoundingClientRect();Qi(qa.width),rl(qa.height)}}},C.createElement(Jn,{getTriggerDOMNode:Fo},c5)),C.createElement(Tp.Provider,{value:Ii},C.createElement(cr,{portal:x,ref:ri,prefixCls:Ee,popup:Qt,className:Se()(Xt,E2),style:Ht,target:Si,onMouseEnter:dh,onMouseLeave:uc,onPointerEnter:dh,zIndex:_r,open:oi,keepDom:ma,onClick:zr,mask:kn,motion:tl,maskMotion:Ti,onVisibleChanged:function(eo){Wa(!1),sh(),It==null||It(eo)},onPrepare:function(){return new Promise(function(eo){hs(function(){return eo})})},forceRender:er,autoDestroy:jr,getPopupContainer:an,align:Zc,arrow:C7,arrowPos:d5,ready:yf,offsetX:Fc,offsetY:xf,offsetR:k2,offsetB:Bp,onAlign:Wc,stretch:xr,targetWidth:Bo/z0,targetHeight:Rs/_2})))});return P}(Ha),gr={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(x){var P=x.keyCode;if(x.altKey&&!x.ctrlKey||x.metaKey||P>=gr.F1&&P<=gr.F12)return!1;switch(P){case gr.ALT:case gr.CAPS_LOCK:case gr.CONTEXT_MENU:case gr.CTRL:case gr.DOWN:case gr.END:case gr.ESC:case gr.HOME:case gr.INSERT:case gr.LEFT:case gr.MAC_FF_META:case gr.META:case gr.NUMLOCK:case gr.NUM_CENTER:case gr.PAGE_DOWN:case gr.PAGE_UP:case gr.PAUSE:case gr.PRINT_SCREEN:case gr.RIGHT:case gr.SHIFT:case gr.UP:case gr.WIN_KEY:case gr.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(x){if(x>=gr.ZERO&&x<=gr.NINE||x>=gr.NUM_ZERO&&x<=gr.NUM_MULTIPLY||x>=gr.A&&x<=gr.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&x===0)return!0;switch(x){case gr.SPACE:case gr.QUESTION_MARK:case gr.NUM_PLUS:case gr.NUM_MINUS:case gr.NUM_PERIOD:case gr.NUM_DIVISION:case gr.SEMICOLON:case gr.DASH:case gr.EQUALS:case gr.COMMA:case gr.PERIOD:case gr.SLASH:case gr.APOSTROPHE:case gr.SINGLE_QUOTE:case gr.OPEN_SQUARE_BRACKET:case gr.BACKSLASH:case gr.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Vr=gr,co=Vr.ESC,qo=Vr.TAB,Wo=(0,C.forwardRef)(function(x,P){var M=x.overlay,N=x.arrow,G=x.prefixCls,Ee=(0,C.useMemo)(function(){return typeof M=="function"?M():M},[M]),Ae=si(P,Ee==null?void 0:Ee.ref);return I().createElement(I().Fragment,null,N&&I().createElement("div",{className:"".concat(G,"-arrow")}),I().cloneElement(Ee,{ref:ti(Ee)?Ae:void 0}))}),Ta={adjustX:1,adjustY:1},Ca=[0,0],Is={topLeft:{points:["bl","tl"],overflow:Ta,offset:[0,-4],targetOffset:Ca},top:{points:["bc","tc"],overflow:Ta,offset:[0,-4],targetOffset:Ca},topRight:{points:["br","tr"],overflow:Ta,offset:[0,-4],targetOffset:Ca},bottomLeft:{points:["tl","bl"],overflow:Ta,offset:[0,4],targetOffset:Ca},bottom:{points:["tc","bc"],overflow:Ta,offset:[0,4],targetOffset:Ca},bottomRight:{points:["tr","br"],overflow:Ta,offset:[0,4],targetOffset:Ca}},Ts=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function mi(x,P){var M,N=x.arrow,G=N!==void 0&&N,Ee=x.prefixCls,Ae=Ee===void 0?"rc-dropdown":Ee,Ze=x.transitionName,Ge=x.animation,it=x.align,mt=x.placement,at=mt===void 0?"bottomLeft":mt,bt=x.placements,gt=bt===void 0?Is:bt,It=x.getPopupContainer,At=x.showAction,jt=x.hideAction,Lt=x.overlayClassName,$t=x.overlayStyle,hn=x.visible,kn=x.trigger,On=kn===void 0?["hover"]:kn,Zn=x.autoFocus,an=x.overlay,er=x.children,mr=x.onVisibleChange,Gn=Re(x,Ts),Qt=xe(I().useState(),2),Xt=Qt[0],Ht=Qt[1],Tn="visible"in x?hn:Xt,fn=I().useRef(null),Vn=I().useRef(null),rr=I().useRef(null);I().useImperativeHandle(P,function(){return fn.current});var _r=function(ro){Ht(ro),mr==null||mr(ro)};(function(ro){var Qr=ro.visible,Ao=ro.triggerRef,To=ro.onVisibleChange,No=ro.autoFocus,Uo=ro.overlayRef,zo=C.useRef(!1),Fo=function(){var Zr,po;Qr&&((Zr=Ao.current)===null||Zr===void 0||(po=Zr.focus)===null||po===void 0||po.call(Zr),To==null||To(!1))},ni=function(){var Zr;return!((Zr=Uo.current)===null||Zr===void 0||!Zr.focus||(Uo.current.focus(),zo.current=!0,0))},jr=function(Zr){switch(Zr.keyCode){case co:Fo();break;case qo:var po=!1;zo.current||(po=ni()),po?Zr.preventDefault():Fo()}};C.useEffect(function(){return Qr?(window.addEventListener("keydown",jr),No&&En(ni,3),function(){window.removeEventListener("keydown",jr),zo.current=!1}):function(){zo.current=!1}},[Qr])})({visible:Tn,triggerRef:rr,onVisibleChange:_r,autoFocus:Zn,overlayRef:Vn});var xr,$r,Or,zr=function(){return I().createElement(Wo,{ref:Vn,overlay:an,prefixCls:Ae,arrow:G})},Jr=I().cloneElement(er,{className:Se()((M=er.props)===null||M===void 0?void 0:M.className,Tn&&(xr=x.openClassName,xr!==void 0?xr:"".concat(Ae,"-open"))),ref:ti(er)?si(rr,er.ref):void 0}),Br=jt;return Br||On.indexOf("contextMenu")===-1||(Br=["click"]),I().createElement(qr,(0,X.Z)({builtinPlacements:gt},Gn,{prefixCls:Ae,ref:fn,popupClassName:Se()(Lt,Me({},"".concat(Ae,"-show-arrow"),G)),popupStyle:$t,action:On,showAction:At,hideAction:Br,popupPlacement:at,popupAlign:it,popupTransitionName:Ze,popupAnimation:Ge,popupVisible:Tn,stretch:($r=x.minOverlayWidthMatchTrigger,Or=x.alignPoint,("minOverlayWidthMatchTrigger"in x?$r:!Or)?"minWidth":""),popup:typeof an=="function"?zr:zr(),onPopupVisibleChange:_r,onPopupClick:function(ro){var Qr=x.onOverlayClick;Ht(!1),Qr&&Qr(ro)},getPopupContainer:It}),Jr)}var Ci=I().forwardRef(mi);function Jo(x,P){var M=Ot({},x);return Array.isArray(P)&&P.forEach(function(N){delete M[N]}),M}const $o="anticon",Do=C.createContext({getPrefixCls:(x,P)=>P||(x?`ant-${x}`:"ant"),iconPrefixCls:$o});var Za=function(x){for(var P,M=0,N=0,G=x.length;G>=4;++N,G-=4)P=1540483477*(65535&(P=255&x.charCodeAt(N)|(255&x.charCodeAt(++N))<<8|(255&x.charCodeAt(++N))<<16|(255&x.charCodeAt(++N))<<24))+(59797*(P>>>16)<<16),M=1540483477*(65535&(P^=P>>>24))+(59797*(P>>>16)<<16)^1540483477*(65535&M)+(59797*(M>>>16)<<16);switch(G){case 3:M^=(255&x.charCodeAt(N+2))<<16;case 2:M^=(255&x.charCodeAt(N+1))<<8;case 1:M=1540483477*(65535&(M^=255&x.charCodeAt(N)))+(59797*(M>>>16)<<16)}return(((M=1540483477*(65535&(M^=M>>>13))+(59797*(M>>>16)<<16))^M>>>15)>>>0).toString(36)},vi=function(x,P){var M=arguments.length>2&&arguments[2]!==void 0&&arguments[2],N=new Set;function G(Ee,Ae){var Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Ge=N.has(Ee);if(or(!Ge,"Warning: There may be circular references"),Ge)return!1;if(Ee===Ae)return!0;if(M&&Ze>1)return!1;N.add(Ee);var it=Ze+1;if(Array.isArray(Ee)){if(!Array.isArray(Ae)||Ee.length!==Ae.length)return!1;for(var mt=0;mt<Ee.length;mt++)if(!G(Ee[mt],Ae[mt],it))return!1;return!0}if(Ee&&Ae&&Pe(Ee)==="object"&&Pe(Ae)==="object"){var at=Object.keys(Ee);return at.length===Object.keys(Ae).length&&at.every(function(bt){return G(Ee[bt],Ae[bt],it)})}return!1}return G(x,P)},Ho=function(){function x(P){Xs(this,x),Me(this,"instanceId",void 0),Me(this,"cache",new Map),this.instanceId=P}return ms(x,[{key:"get",value:function(P){return this.cache.get(P.join("%"))||null}},{key:"update",value:function(P,M){var N=P.join("%"),G=M(this.cache.get(N));G===null?this.cache.delete(N):this.cache.set(N,G)}}]),x}(),Ga=Ho,Os="data-token-hash",Xa="data-css-hash",Js="__cssinjs_instance__";function hu(){var x=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var P=document.body.querySelectorAll("style[".concat(Xa,"]"))||[],M=document.head.firstChild;Array.from(P).forEach(function(G){G[Js]=G[Js]||x,G[Js]===x&&document.head.insertBefore(G,M)});var N={};Array.from(document.querySelectorAll("style[".concat(Xa,"]"))).forEach(function(G){var Ee,Ae=G.getAttribute(Xa);N[Ae]?G[Js]===x&&((Ee=G.parentNode)===null||Ee===void 0||Ee.removeChild(G)):N[Ae]=!0})}return new Ga(x)}var a2=C.createContext({hashPriority:"low",cache:hu(),defaultCache:!0}),Nc=a2,Ji=function(){function x(){Xs(this,x),Me(this,"cache",void 0),Me(this,"keys",void 0),Me(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ms(x,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(P){var M,N,G=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ee={map:this.cache};return P.forEach(function(Ae){var Ze,Ge;Ee?Ee=(Ze=Ee)===null||Ze===void 0||(Ge=Ze.map)===null||Ge===void 0?void 0:Ge.get(Ae):Ee=void 0}),(M=Ee)!==null&&M!==void 0&&M.value&&G&&(Ee.value[1]=this.cacheCallTimes++),(N=Ee)===null||N===void 0?void 0:N.value}},{key:"get",value:function(P){var M;return(M=this.internalGet(P,!0))===null||M===void 0?void 0:M[0]}},{key:"has",value:function(P){return!!this.internalGet(P)}},{key:"set",value:function(P,M){var N=this;if(!this.has(P)){if(this.size()+1>x.MAX_CACHE_SIZE+x.MAX_CACHE_OFFSET){var G=this.keys.reduce(function(Ze,Ge){var it=xe(Ze,2)[1];return N.internalGet(Ge)[1]<it?[Ge,N.internalGet(Ge)[1]]:Ze},[this.keys[0],this.cacheCallTimes]),Ee=xe(G,1)[0];this.delete(Ee)}this.keys.push(P)}var Ae=this.cache;P.forEach(function(Ze,Ge){if(Ge===P.length-1)Ae.set(Ze,{value:[M,N.cacheCallTimes++]});else{var it=Ae.get(Ze);it?it.map||(it.map=new Map):Ae.set(Ze,{map:new Map}),Ae=Ae.get(Ze).map}})}},{key:"deleteByPath",value:function(P,M){var N,G=P.get(M[0]);if(M.length===1)return G.map?P.set(M[0],{map:G.map}):P.delete(M[0]),(N=G.value)===null||N===void 0?void 0:N[0];var Ee=this.deleteByPath(G.map,M.slice(1));return G.map&&G.map.size!==0||G.value||P.delete(M[0]),Ee}},{key:"delete",value:function(P){if(this.has(P))return this.keys=this.keys.filter(function(M){return!function(N,G){if(N.length!==G.length)return!1;for(var Ee=0;Ee<N.length;Ee++)if(N[Ee]!==G[Ee])return!1;return!0}(M,P)}),this.deleteByPath(this.cache,P)}}]),x}();Me(Ji,"MAX_CACHE_SIZE",20),Me(Ji,"MAX_CACHE_OFFSET",5);var bi=0,pf=function(){function x(P){Xs(this,x),Me(this,"derivatives",void 0),Me(this,"id",void 0),this.derivatives=Array.isArray(P)?P:[P],this.id=bi,P.length===0&&P.length,bi+=1}return ms(x,[{key:"getDerivativeToken",value:function(P){return this.derivatives.reduce(function(M,N){return N(P,M)},void 0)}}]),x}(),fu=new Ji;function kd(x){var P=Array.isArray(x)?x:[x];return fu.has(P)||fu.set(P,new pf(P)),fu.get(P)}function mo(x){var P="";return Object.keys(x).forEach(function(M){var N=x[M];P+=M,N instanceof pf?P+=N.id:N&&Pe(N)==="object"?P+=mo(N):P+=N}),P}function Mi(x,P){return Za("".concat(P,"_").concat(mo(x)))}var Sa="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),Al="_bAmBoO_";function th(x,P,M){if(Rn()){var N,G;Nn(x,Sa);var Ee=document.createElement("div");Ee.style.position="fixed",Ee.style.left="0",Ee.style.top="0",P==null||P(Ee),document.body.appendChild(Ee);var Ae=M?M(Ee):(N=getComputedStyle(Ee).content)===null||N===void 0?void 0:N.includes(Al);return(G=Ee.parentNode)===null||G===void 0||G.removeChild(Ee),hr(Sa),Ae}return!1}var As=void 0;function nh(){return As===void 0&&(As=th("@layer ".concat(Sa," { .").concat(Sa,' { content: "').concat(Al,'"!important; } }'),function(x){x.className=Sa})),As}var ds=Ot({},C).useInsertionEffect,E0=ds?function(x,P,M){return ds(function(){return x(),P()},M)}:function(x,P,M){C.useMemo(x,M),_n(function(){return P(!0)},M)},Lw=Ot({},C).useInsertionEffect!==void 0?function(x){var P=[],M=!1;return C.useEffect(function(){return M=!1,function(){M=!0,P.length&&P.forEach(function(N){return N()})}},x),function(N){M||P.push(N)}}:function(){return function(x){x()}};function iP(x,P,M,N,G){var Ee=C.useContext(Nc).cache,Ae=[x].concat(Go(P)),Ze=Ae.join("_"),Ge=Lw([Ze]),it=function(at){Ee.update(Ae,function(bt){var gt=xe(bt||[],2),It=gt[0],At=[It===void 0?0:It,gt[1]||M()];return at?at(At):At})};C.useMemo(function(){it()},[Ze]);var mt=Ee.get(Ae)[1];return E0(function(){G==null||G(mt)},function(at){return it(function(bt){var gt=xe(bt,2),It=gt[0],At=gt[1];return at&&It===0&&(G==null||G(mt)),[It+1,At]}),function(){Ee.update(Ae,function(bt){var gt=xe(bt||[],2),It=gt[0],At=It===void 0?0:It,jt=gt[1];return At-1===0?(Ge(function(){return N==null?void 0:N(jt,!1)}),null):[At-1,jt]})}},[Ze]),mt}var nK={},Dp=new Map;function rK(x){Dp.set(x,(Dp.get(x)||0)+1)}function oK(x,P){Dp.set(x,(Dp.get(x)||0)-1);var M=Array.from(Dp.keys()),N=M.filter(function(G){return(Dp.get(G)||0)<=0});M.length-N.length>0&&N.forEach(function(G){(function(Ee,Ae){typeof document<"u"&&document.querySelectorAll("style[".concat(Os,'="').concat(Ee,'"]')).forEach(function(Ze){var Ge;Ze[Js]===Ae&&((Ge=Ze.parentNode)===null||Ge===void 0||Ge.removeChild(Ze))})})(G,P),Dp.delete(G)})}var aP=function(x,P,M,N){var G=Ot(Ot({},M.getDerivativeToken(x)),P);return N&&(G=N(G)),G},iK={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sP="comm",lP="rule",cP="decl",aK=Math.abs,$w=String.fromCharCode;function dP(x){return x.trim()}function Ly(x,P,M){return x.replace(P,M)}function sK(x,P){return x.indexOf(P)}function s2(x,P){return 0|x.charCodeAt(P)}function l2(x,P,M){return x.slice(P,M)}function rh(x){return x.length}function $y(x,P){return P.push(x),x}function jw(x,P){for(var M="",N=0;N<x.length;N++)M+=P(x[N],N,x,P)||"";return M}function lK(x,P,M,N){switch(x.type){case"@layer":if(x.children.length)break;case"@import":case cP:return x.return=x.return||x.value;case sP:return"";case"@keyframes":return x.return=x.value+"{"+jw(x.children,N)+"}";case lP:if(!rh(x.value=x.props.join(",")))return""}return rh(M=jw(x.children,N))?x.return=x.value+"{"+M+"}":""}var jy=1,P0=1,uP=0,zc=0,os=0,M0="";function Rw(x,P,M,N,G,Ee,Ae,Ze){return{value:x,root:P,parent:M,type:N,props:G,children:Ee,line:jy,column:P0,length:Ae,return:"",siblings:Ze}}function cK(){return os=zc>0?s2(M0,--zc):0,P0--,os===10&&(P0=1,jy--),os}function _d(){return os=zc<uP?s2(M0,zc++):0,P0++,os===10&&(P0=1,jy++),os}function Np(){return s2(M0,zc)}function Ry(){return zc}function Dy(x,P){return l2(M0,x,P)}function Dw(x){switch(x){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dK(x){return jy=P0=1,uP=rh(M0=x),zc=0,[]}function uK(x){return M0="",x}function Nw(x){return dP(Dy(zc-1,zw(x===91?x+2:x===40?x+1:x)))}function hK(x){for(;(os=Np())&&os<33;)_d();return Dw(x)>2||Dw(os)>3?"":" "}function fK(x,P){for(;--P&&_d()&&!(os<48||os>102||os>57&&os<65||os>70&&os<97););return Dy(x,Ry()+(P<6&&Np()==32&&_d()==32))}function zw(x){for(;_d();)switch(os){case x:return zc;case 34:case 39:x!==34&&x!==39&&zw(os);break;case 40:x===41&&zw(x);break;case 92:_d()}return zc}function pK(x,P){for(;_d()&&x+os!==57&&(x+os!==84||Np()!==47););return"/*"+Dy(P,zc-1)+"*"+$w(x===47?x:_d())}function gK(x){for(;!Dw(Np());)_d();return Dy(x,zc)}function mK(x){return uK(Ny("",null,null,null,[""],x=dK(x),0,[0],x))}function Ny(x,P,M,N,G,Ee,Ae,Ze,Ge){for(var it=0,mt=0,at=Ae,bt=0,gt=0,It=0,At=1,jt=1,Lt=1,$t=0,hn="",kn=G,On=Ee,Zn=N,an=hn;jt;)switch(It=$t,$t=_d()){case 40:if(It!=108&&s2(an,at-1)==58){sK(an+=Ly(Nw($t),"&","&\f"),"&\f")!=-1&&(Lt=-1);break}case 34:case 39:case 91:an+=Nw($t);break;case 9:case 10:case 13:case 32:an+=hK(It);break;case 92:an+=fK(Ry()-1,7);continue;case 47:switch(Np()){case 42:case 47:$y(vK(pK(_d(),Ry()),P,M,Ge),Ge);break;default:an+="/"}break;case 123*At:Ze[it++]=rh(an)*Lt;case 125*At:case 59:case 0:switch($t){case 0:case 125:jt=0;case 59+mt:Lt==-1&&(an=Ly(an,/\f/g,"")),gt>0&&rh(an)-at&&$y(gt>32?fP(an+";",N,M,at-1,Ge):fP(Ly(an," ","")+";",N,M,at-2,Ge),Ge);break;case 59:an+=";";default:if($y(Zn=hP(an,P,M,it,mt,G,Ze,hn,kn=[],On=[],at,Ee),Ee),$t===123)if(mt===0)Ny(an,P,Zn,Zn,kn,Ee,at,Ze,On);else switch(bt===99&&s2(an,3)===110?100:bt){case 100:case 108:case 109:case 115:Ny(x,Zn,Zn,N&&$y(hP(x,Zn,Zn,0,0,G,Ze,hn,G,kn=[],at,On),On),G,On,at,Ze,N?kn:On);break;default:Ny(an,Zn,Zn,Zn,[""],On,0,Ze,On)}}it=mt=gt=0,At=Lt=1,hn=an="",at=Ae;break;case 58:at=1+rh(an),gt=It;default:if(At<1){if($t==123)--At;else if($t==125&&At++==0&&cK()==125)continue}switch(an+=$w($t),$t*At){case 38:Lt=mt>0?1:(an+="\f",-1);break;case 44:Ze[it++]=(rh(an)-1)*Lt,Lt=1;break;case 64:Np()===45&&(an+=Nw(_d())),bt=Np(),mt=at=rh(hn=an+=gK(Ry())),$t++;break;case 45:It===45&&rh(an)==2&&(At=0)}}return Ee}function hP(x,P,M,N,G,Ee,Ae,Ze,Ge,it,mt,at){for(var bt=G-1,gt=G===0?Ee:[""],It=function(On){return On.length}(gt),At=0,jt=0,Lt=0;At<N;++At)for(var $t=0,hn=l2(x,bt+1,bt=aK(jt=Ae[At])),kn=x;$t<It;++$t)(kn=dP(jt>0?gt[$t]+" "+hn:Ly(hn,/&\f/g,gt[$t])))&&(Ge[Lt++]=kn);return Rw(x,P,M,G===0?lP:Ze,Ge,it,mt,at)}function vK(x,P,M,N){return Rw(x,P,M,sP,$w(os),l2(x,2,-2),0,N)}function fP(x,P,M,N,G){return Rw(x,P,M,cP,l2(x,0,N),l2(x,N+1,-1),N,G)}var zp,pP="data-ant-cssinjs-cache-path",gP="_FILE_STYLE__",mP=!0;function bK(x){return function(){if(!zp&&(zp={},Rn())){var P=document.createElement("div");P.className=pP,P.style.position="fixed",P.style.visibility="hidden",P.style.top="-9999px",document.body.appendChild(P);var M=getComputedStyle(P).content||"";(M=M.replace(/^"/,"").replace(/"$/,"")).split(";").forEach(function(Ee){var Ae=xe(Ee.split(":"),2),Ze=Ae[0],Ge=Ae[1];zp[Ze]=Ge});var N,G=document.querySelector("style[".concat(pP,"]"));G&&(mP=!1,(N=G.parentNode)===null||N===void 0||N.removeChild(G)),document.body.removeChild(P)}}(),!!zp[x]}var vP=Rn(),bP="_multi_value_";function yP(x){return jw(mK(x),lK).replace(/\{%%%\:[^;];}/g,";")}function yK(x){return Pe(x)==="object"&&x&&("_skip_check_"in x||bP in x)}function xK(x,P,M){if(!P)return x;var N=".".concat(P),G=M==="low"?":where(".concat(N,")"):N;return x.split(",").map(function(Ee){var Ae,Ze=Ee.trim().split(/\s+/),Ge=Ze[0]||"",it=((Ae=Ge.match(/^\w+/))===null||Ae===void 0?void 0:Ae[0])||"";return[Ge="".concat(it).concat(G).concat(Ge.slice(it.length))].concat(Go(Ze.slice(1))).join(" ")}).join(",")}var wK=function x(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},G=N.root,Ee=N.injectHash,Ae=N.parentSelectors,Ze=M.hashId,Ge=M.layer,it=(M.path,M.hashPriority),mt=M.transformers,at=mt===void 0?[]:mt,bt=(M.linters,""),gt={};function It(hn){var kn=hn.getName(Ze);if(!gt[kn]){var On=xe(x(hn.style,M,{root:!1,parentSelectors:Ae}),1)[0];gt[kn]="@keyframes ".concat(hn.getName(Ze)).concat(On)}}function At(hn){var kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return hn.forEach(function(On){Array.isArray(On)?At(On,kn):On&&kn.push(On)}),kn}var jt=At(Array.isArray(P)?P:[P]);if(jt.forEach(function(hn){var kn=typeof hn!="string"||G?hn:{};if(typeof kn=="string")bt+="".concat(kn,`
`);else if(kn._keyframe)It(kn);else{var On=at.reduce(function(Zn,an){var er;return(an==null||(er=an.visit)===null||er===void 0?void 0:er.call(an,Zn))||Zn},kn);Object.keys(On).forEach(function(Zn){var an=On[Zn];if(Pe(an)!=="object"||!an||Zn==="animationName"&&an._keyframe||yK(an)){let Vn=function(rr,_r){var xr=rr.replace(/[A-Z]/g,function(Or){return"-".concat(Or.toLowerCase())}),$r=_r;iK[rr]||typeof $r!="number"||$r===0||($r="".concat($r,"px")),rr==="animationName"&&_r!=null&&_r._keyframe&&(It(_r),$r=_r.getName(Ze)),bt+="".concat(xr,":").concat($r,";")};var er,mr=(er=an==null?void 0:an.value)!==null&&er!==void 0?er:an;Pe(an)==="object"&&an!=null&&an[bP]&&Array.isArray(mr)?mr.forEach(function(rr){Vn(Zn,rr)}):Vn(Zn,mr)}else{var Gn=!1,Qt=Zn.trim(),Xt=!1;(G||Ee)&&Ze?Qt.startsWith("@")?Gn=!0:Qt=xK(Zn,Ze,it):!G||Ze||Qt!=="&"&&Qt!==""||(Qt="",Xt=!0);var Ht=xe(x(an,M,{root:Xt,injectHash:Gn,parentSelectors:[].concat(Go(Ae),[Qt])}),2),Tn=Ht[0],fn=Ht[1];gt=Ot(Ot({},gt),fn),bt+="".concat(Qt).concat(Tn)}})}}),G){if(Ge&&nh()){var Lt=Ge.split(","),$t=Lt[Lt.length-1].trim();bt="@layer ".concat($t," {").concat(bt,"}"),Lt.length>1&&(bt="@layer ".concat(Ge,"{%%%:%}").concat(bt))}}else bt="{".concat(bt,"}");return[bt,gt]};function CK(){return null}function Bw(x,P){var M=x.token,N=x.path,G=x.hashId,Ee=x.layer,Ae=x.nonce,Ze=x.clientOnly,Ge=x.order,it=Ge===void 0?0:Ge,mt=C.useContext(Nc),at=mt.autoClear,bt=(mt.mock,mt.defaultCache),gt=mt.hashPriority,It=mt.container,At=mt.ssrInline,jt=mt.transformers,Lt=mt.linters,$t=mt.cache,hn=M._tokenKey,kn=[hn].concat(Go(N)),On=vP,Zn=iP("style",kn,function(){var Qt=kn.join("|");if(bK(Qt)){var Xt=function(zr){var Jr=zp[zr],Br=null;if(Jr&&Rn())if(mP)Br=gP;else{var ro=document.querySelector("style[".concat(Xa,'="').concat(zp[zr],'"]'));ro?Br=ro.innerHTML:delete zp[zr]}return[Br,Jr]}(Qt),Ht=xe(Xt,2),Tn=Ht[0],fn=Ht[1];if(Tn)return[Tn,hn,fn,{},Ze,it]}var Vn=P(),rr=xe(wK(Vn,{hashId:G,hashPriority:gt,layer:Ee,path:N.join("-"),transformers:jt,linters:Lt}),2),_r=rr[0],xr=rr[1],$r=yP(_r),Or=function(zr,Jr){return Za("".concat(zr.join("%")).concat(Jr))}(kn,$r);return[$r,hn,Or,xr,Ze,it]},function(Qt,Xt){var Ht=xe(Qt,3)[2];(Xt||at)&&vP&&hr(Ht,{mark:Xa})},function(Qt){var Xt=xe(Qt,4),Ht=Xt[0],Tn=(Xt[1],Xt[2]),fn=Xt[3];if(On&&Ht!==gP){var Vn={mark:Xa,prepend:"queue",attachTo:It,priority:it},rr=typeof Ae=="function"?Ae():Ae;rr&&(Vn.csp={nonce:rr});var _r=Nn(Ht,Tn,Vn);_r[Js]=$t.instanceId,_r.setAttribute(Os,hn),Object.keys(fn).forEach(function(xr){Nn(yP(fn[xr]),"_effect-".concat(xr),Vn)})}}),an=xe(Zn,3),er=an[0],mr=an[1],Gn=an[2];return function(Qt){var Xt,Ht;return At&&!On&&bt?Xt=C.createElement("style",(0,X.Z)({},(Me(Ht={},Os,mr),Me(Ht,Xa,Gn),Ht),{dangerouslySetInnerHTML:{__html:er}})):Xt=C.createElement(CK,null),C.createElement(C.Fragment,null,Xt,Qt)}}var SK=function(){function x(P,M){Xs(this,x),Me(this,"name",void 0),Me(this,"style",void 0),Me(this,"_keyframe",!0),this.name=P,this.style=M}return ms(x,[{key:"getName",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return P?"".concat(P,"-").concat(this.name):this.name}}]),x}(),Ki=SK;function I0(x){return x.notSplit=!0,x}I0(["borderTop","borderBottom"]),I0(["borderTop"]),I0(["borderBottom"]),I0(["borderLeft","borderRight"]),I0(["borderLeft"]),I0(["borderRight"]);var kK=(0,C.createContext)(void 0),_K={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},xP={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};const wP={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},_K),timePickerLocale:Object.assign({},xP)},sc="${label} is not a valid ${type}";var zy={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:wP,TimePicker:xP,Calendar:wP,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:sc,method:sc,array:sc,object:sc,number:sc,date:sc,boolean:sc,integer:sc,float:sc,regexp:sc,email:sc,url:sc,hex:sc},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};Object.assign({},zy.Modal);let By=[];const CP=()=>By.reduce((x,P)=>Object.assign(Object.assign({},x),P),zy.Modal);var SP=(0,C.createContext)(void 0),EK=x=>{const{locale:P={},children:M,_ANT_MARK__:N}=x;C.useEffect(()=>function(Ae){if(Ae){const Ze=Object.assign({},Ae);return By.push(Ze),CP(),()=>{By=By.filter(Ge=>Ge!==Ze),CP()}}Object.assign({},zy.Modal)}(P&&P.Modal),[P]);const G=C.useMemo(()=>Object.assign(Object.assign({},P),{exist:!0}),[P]);return C.createElement(SP.Provider,{value:G},M)},kP=x=>{const{controlHeight:P}=x;return{controlHeightSM:.75*P,controlHeightXS:.5*P,controlHeightLG:1.25*P}};const Hw={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"};var c2=Object.assign(Object.assign({},Hw),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Ls=function(){function x(P,M){var N;if(P===void 0&&(P=""),M===void 0&&(M={}),P instanceof x)return P;typeof P=="number"&&(P=function(Ee){return{r:Ee>>16,g:(65280&Ee)>>8,b:255&Ee}}(P)),this.originalInput=P;var G=sn(P);this.originalInput=P,this.r=G.r,this.g=G.g,this.b=G.b,this.a=G.a,this.roundA=Math.round(100*this.a)/100,this.format=(N=M.format)!==null&&N!==void 0?N:G.format,this.gradientType=M.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=G.ok}return x.prototype.isDark=function(){return this.getBrightness()<128},x.prototype.isLight=function(){return!this.isDark()},x.prototype.getBrightness=function(){var P=this.toRgb();return(299*P.r+587*P.g+114*P.b)/1e3},x.prototype.getLuminance=function(){var P=this.toRgb(),M=P.r/255,N=P.g/255,G=P.b/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*(N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4))+.0722*(G<=.03928?G/12.92:Math.pow((G+.055)/1.055,2.4))},x.prototype.getAlpha=function(){return this.a},x.prototype.setAlpha=function(P){return this.a=ze(P),this.roundA=Math.round(100*this.a)/100,this},x.prototype.isMonochrome=function(){return this.toHsl().s===0},x.prototype.toHsv=function(){var P=Ye(this.r,this.g,this.b);return{h:360*P.h,s:P.s,v:P.v,a:this.a}},x.prototype.toHsvString=function(){var P=Ye(this.r,this.g,this.b),M=Math.round(360*P.h),N=Math.round(100*P.s),G=Math.round(100*P.v);return this.a===1?"hsv(".concat(M,", ").concat(N,"%, ").concat(G,"%)"):"hsva(".concat(M,", ").concat(N,"%, ").concat(G,"%, ").concat(this.roundA,")")},x.prototype.toHsl=function(){var P=Ie(this.r,this.g,this.b);return{h:360*P.h,s:P.s,l:P.l,a:this.a}},x.prototype.toHslString=function(){var P=Ie(this.r,this.g,this.b),M=Math.round(360*P.h),N=Math.round(100*P.s),G=Math.round(100*P.l);return this.a===1?"hsl(".concat(M,", ").concat(N,"%, ").concat(G,"%)"):"hsla(".concat(M,", ").concat(N,"%, ").concat(G,"%, ").concat(this.roundA,")")},x.prototype.toHex=function(P){return P===void 0&&(P=!1),Ke(this.r,this.g,this.b,P)},x.prototype.toHexString=function(P){return P===void 0&&(P=!1),"#"+this.toHex(P)},x.prototype.toHex8=function(P){return P===void 0&&(P=!1),function(M,N,G,Ee,Ae){var Ze=[ut(Math.round(M).toString(16)),ut(Math.round(N).toString(16)),ut(Math.round(G).toString(16)),ut(tt(Ee))];return Ae&&Ze[0].startsWith(Ze[0].charAt(1))&&Ze[1].startsWith(Ze[1].charAt(1))&&Ze[2].startsWith(Ze[2].charAt(1))&&Ze[3].startsWith(Ze[3].charAt(1))?Ze[0].charAt(0)+Ze[1].charAt(0)+Ze[2].charAt(0)+Ze[3].charAt(0):Ze.join("")}(this.r,this.g,this.b,this.a,P)},x.prototype.toHex8String=function(P){return P===void 0&&(P=!1),"#"+this.toHex8(P)},x.prototype.toHexShortString=function(P){return P===void 0&&(P=!1),this.a===1?this.toHexString(P):this.toHex8String(P)},x.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},x.prototype.toRgbString=function(){var P=Math.round(this.r),M=Math.round(this.g),N=Math.round(this.b);return this.a===1?"rgb(".concat(P,", ").concat(M,", ").concat(N,")"):"rgba(".concat(P,", ").concat(M,", ").concat(N,", ").concat(this.roundA,")")},x.prototype.toPercentageRgb=function(){var P=function(M){return"".concat(Math.round(100*Be(M,255)),"%")};return{r:P(this.r),g:P(this.g),b:P(this.b),a:this.a}},x.prototype.toPercentageRgbString=function(){var P=function(M){return Math.round(100*Be(M,255))};return this.a===1?"rgb(".concat(P(this.r),"%, ").concat(P(this.g),"%, ").concat(P(this.b),"%)"):"rgba(".concat(P(this.r),"%, ").concat(P(this.g),"%, ").concat(P(this.b),"%, ").concat(this.roundA,")")},x.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var P="#"+Ke(this.r,this.g,this.b,!1),M=0,N=Object.entries(Kt);M<N.length;M++){var G=N[M],Ee=G[0];if(P===G[1])return Ee}return!1},x.prototype.toString=function(P){var M=!!P;P=P??this.format;var N=!1,G=this.a<1&&this.a>=0;return M||!G||!P.startsWith("hex")&&P!=="name"?(P==="rgb"&&(N=this.toRgbString()),P==="prgb"&&(N=this.toPercentageRgbString()),P!=="hex"&&P!=="hex6"||(N=this.toHexString()),P==="hex3"&&(N=this.toHexString(!0)),P==="hex4"&&(N=this.toHex8String(!0)),P==="hex8"&&(N=this.toHex8String()),P==="name"&&(N=this.toName()),P==="hsl"&&(N=this.toHslString()),P==="hsv"&&(N=this.toHsvString()),N||this.toHexString()):P==="name"&&this.a===0?this.toName():this.toRgbString()},x.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},x.prototype.clone=function(){return new x(this.toString())},x.prototype.lighten=function(P){P===void 0&&(P=10);var M=this.toHsl();return M.l+=P/100,M.l=_e(M.l),new x(M)},x.prototype.brighten=function(P){P===void 0&&(P=10);var M=this.toRgb();return M.r=Math.max(0,Math.min(255,M.r-Math.round(-P/100*255))),M.g=Math.max(0,Math.min(255,M.g-Math.round(-P/100*255))),M.b=Math.max(0,Math.min(255,M.b-Math.round(-P/100*255))),new x(M)},x.prototype.darken=function(P){P===void 0&&(P=10);var M=this.toHsl();return M.l-=P/100,M.l=_e(M.l),new x(M)},x.prototype.tint=function(P){return P===void 0&&(P=10),this.mix("white",P)},x.prototype.shade=function(P){return P===void 0&&(P=10),this.mix("black",P)},x.prototype.desaturate=function(P){P===void 0&&(P=10);var M=this.toHsl();return M.s-=P/100,M.s=_e(M.s),new x(M)},x.prototype.saturate=function(P){P===void 0&&(P=10);var M=this.toHsl();return M.s+=P/100,M.s=_e(M.s),new x(M)},x.prototype.greyscale=function(){return this.desaturate(100)},x.prototype.spin=function(P){var M=this.toHsl(),N=(M.h+P)%360;return M.h=N<0?360+N:N,new x(M)},x.prototype.mix=function(P,M){M===void 0&&(M=50);var N=this.toRgb(),G=new x(P).toRgb(),Ee=M/100;return new x({r:(G.r-N.r)*Ee+N.r,g:(G.g-N.g)*Ee+N.g,b:(G.b-N.b)*Ee+N.b,a:(G.a-N.a)*Ee+N.a})},x.prototype.analogous=function(P,M){P===void 0&&(P=6),M===void 0&&(M=30);var N=this.toHsl(),G=360/M,Ee=[this];for(N.h=(N.h-(G*P>>1)+720)%360;--P;)N.h=(N.h+G)%360,Ee.push(new x(N));return Ee},x.prototype.complement=function(){var P=this.toHsl();return P.h=(P.h+180)%360,new x(P)},x.prototype.monochromatic=function(P){P===void 0&&(P=6);for(var M=this.toHsv(),N=M.h,G=M.s,Ee=M.v,Ae=[],Ze=1/P;P--;)Ae.push(new x({h:N,s:G,v:Ee})),Ee=(Ee+Ze)%1;return Ae},x.prototype.splitcomplement=function(){var P=this.toHsl(),M=P.h;return[this,new x({h:(M+72)%360,s:P.s,l:P.l}),new x({h:(M+216)%360,s:P.s,l:P.l})]},x.prototype.onBackground=function(P){var M=this.toRgb(),N=new x(P).toRgb(),G=M.a+N.a*(1-M.a);return new x({r:(M.r*M.a+N.r*N.a*(1-M.a))/G,g:(M.g*M.a+N.g*N.a*(1-M.a))/G,b:(M.b*M.a+N.b*N.a*(1-M.a))/G,a:G})},x.prototype.triad=function(){return this.polyad(3)},x.prototype.tetrad=function(){return this.polyad(4)},x.prototype.polyad=function(P){for(var M=this.toHsl(),N=M.h,G=[this],Ee=360/P,Ae=1;Ae<P;Ae++)G.push(new x({h:(N+Ae*Ee)%360,s:M.s,l:M.l}));return G},x.prototype.equals=function(P){return this.toRgbString()===new x(P).toRgbString()},x}();function _P(x,P){let{generateColorPalettes:M,generateNeutralColorPalettes:N}=P;const{colorSuccess:G,colorWarning:Ee,colorError:Ae,colorInfo:Ze,colorPrimary:Ge,colorBgBase:it,colorTextBase:mt}=x,at=M(Ge),bt=M(G),gt=M(Ee),It=M(Ae),At=M(Ze),jt=N(it,mt),Lt=M(x.colorLink||x.colorInfo);return Object.assign(Object.assign({},jt),{colorPrimaryBg:at[1],colorPrimaryBgHover:at[2],colorPrimaryBorder:at[3],colorPrimaryBorderHover:at[4],colorPrimaryHover:at[5],colorPrimary:at[6],colorPrimaryActive:at[7],colorPrimaryTextHover:at[8],colorPrimaryText:at[9],colorPrimaryTextActive:at[10],colorSuccessBg:bt[1],colorSuccessBgHover:bt[2],colorSuccessBorder:bt[3],colorSuccessBorderHover:bt[4],colorSuccessHover:bt[4],colorSuccess:bt[6],colorSuccessActive:bt[7],colorSuccessTextHover:bt[8],colorSuccessText:bt[9],colorSuccessTextActive:bt[10],colorErrorBg:It[1],colorErrorBgHover:It[2],colorErrorBorder:It[3],colorErrorBorderHover:It[4],colorErrorHover:It[5],colorError:It[6],colorErrorActive:It[7],colorErrorTextHover:It[8],colorErrorText:It[9],colorErrorTextActive:It[10],colorWarningBg:gt[1],colorWarningBgHover:gt[2],colorWarningBorder:gt[3],colorWarningBorderHover:gt[4],colorWarningHover:gt[4],colorWarning:gt[6],colorWarningActive:gt[7],colorWarningTextHover:gt[8],colorWarningText:gt[9],colorWarningTextActive:gt[10],colorInfoBg:At[1],colorInfoBgHover:At[2],colorInfoBorder:At[3],colorInfoBorderHover:At[4],colorInfoHover:At[4],colorInfo:At[6],colorInfoActive:At[7],colorInfoTextHover:At[8],colorInfoText:At[9],colorInfoTextActive:At[10],colorLinkHover:Lt[4],colorLink:Lt[6],colorLinkActive:Lt[7],colorBgMask:new Ls("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}var PK=x=>{let P=x,M=x,N=x,G=x;return x<6&&x>=5?P=x+1:x<16&&x>=6?P=x+2:x>=16&&(P=16),x<7&&x>=5?M=4:x<8&&x>=7?M=5:x<14&&x>=8?M=6:x<16&&x>=14?M=7:x>=16&&(M=8),x<6&&x>=2?N=1:x>=6&&(N=2),x>4&&x<8?G=4:x>=8&&(G=6),{borderRadius:x>16?16:x,borderRadiusXS:N,borderRadiusSM:M,borderRadiusLG:P,borderRadiusOuter:G}};const oh=(x,P)=>new Ls(x).setAlpha(P).toRgbString(),d2=(x,P)=>new Ls(x).darken(P).toHexString(),MK=x=>{const P=un(x);return{1:P[0],2:P[1],3:P[2],4:P[3],5:P[4],6:P[5],7:P[6],8:P[4],9:P[5],10:P[6]}},IK=(x,P)=>{const M=x||"#fff",N=P||"#000";return{colorBgBase:M,colorTextBase:N,colorText:oh(N,.88),colorTextSecondary:oh(N,.65),colorTextTertiary:oh(N,.45),colorTextQuaternary:oh(N,.25),colorFill:oh(N,.15),colorFillSecondary:oh(N,.06),colorFillTertiary:oh(N,.04),colorFillQuaternary:oh(N,.02),colorBgLayout:d2(M,4),colorBgContainer:d2(M,0),colorBgElevated:d2(M,0),colorBgSpotlight:oh(N,.85),colorBorder:d2(M,15),colorBorderSecondary:d2(M,6)}};var EP=x=>{const P=function(G){const Ee=new Array(10).fill(null).map((Ae,Ze)=>{const Ge=Ze-1,it=G*Math.pow(2.71828,Ge/5),mt=Ze>1?Math.floor(it):Math.ceil(it);return 2*Math.floor(mt/2)});return Ee[1]=G,Ee.map(Ae=>({size:Ae,lineHeight:(Ae+8)/Ae}))}(x),M=P.map(G=>G.size),N=P.map(G=>G.lineHeight);return{fontSizeSM:M[0],fontSize:M[1],fontSizeLG:M[2],fontSizeXL:M[3],fontSizeHeading1:M[6],fontSizeHeading2:M[5],fontSizeHeading3:M[4],fontSizeHeading4:M[3],fontSizeHeading5:M[2],lineHeight:N[1],lineHeightLG:N[2],lineHeightSM:N[0],lineHeightHeading1:N[6],lineHeightHeading2:N[5],lineHeightHeading3:N[4],lineHeightHeading4:N[3],lineHeightHeading5:N[2]}};function u2(x){const P=Object.keys(Hw).map(M=>{const N=un(x[M]);return new Array(10).fill(1).reduce((G,Ee,Ae)=>(G[`${M}-${Ae+1}`]=N[Ae],G[`${M}${Ae+1}`]=N[Ae],G),{})}).reduce((M,N)=>M=Object.assign(Object.assign({},M),N),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},x),P),_P(x,{generateColorPalettes:MK,generateNeutralColorPalettes:IK})),EP(x.fontSize)),function(M){const{sizeUnit:N,sizeStep:G}=M;return{sizeXXL:N*(G+8),sizeXL:N*(G+4),sizeLG:N*(G+2),sizeMD:N*(G+1),sizeMS:N*G,size:N*G,sizeSM:N*(G-1),sizeXS:N*(G-2),sizeXXS:N*(G-3)}}(x)),kP(x)),function(M){const{motionUnit:N,motionBase:G,borderRadius:Ee,lineWidth:Ae}=M;return Object.assign({motionDurationFast:`${(G+N).toFixed(1)}s`,motionDurationMid:`${(G+2*N).toFixed(1)}s`,motionDurationSlow:`${(G+3*N).toFixed(1)}s`,lineWidthBold:Ae+1},PK(Ee))}(x))}const PP=kd(u2),Hy={token:c2,hashed:!0},MP=I().createContext(Hy),TK=`-ant-${Date.now()}-${Math.random()}`;function OK(x,P){const M=function(N,G){const Ee={},Ae=(Ge,it)=>{let mt=Ge.clone();return mt=(it==null?void 0:it(mt))||mt,mt.toRgbString()},Ze=(Ge,it)=>{const mt=new Ls(Ge),at=un(mt.toRgbString());Ee[`${it}-color`]=Ae(mt),Ee[`${it}-color-disabled`]=at[1],Ee[`${it}-color-hover`]=at[4],Ee[`${it}-color-active`]=at[6],Ee[`${it}-color-outline`]=mt.clone().setAlpha(.2).toRgbString(),Ee[`${it}-color-deprecated-bg`]=at[0],Ee[`${it}-color-deprecated-border`]=at[2]};if(G.primaryColor){Ze(G.primaryColor,"primary");const Ge=new Ls(G.primaryColor),it=un(Ge.toRgbString());it.forEach((at,bt)=>{Ee[`primary-${bt+1}`]=at}),Ee["primary-color-deprecated-l-35"]=Ae(Ge,at=>at.lighten(35)),Ee["primary-color-deprecated-l-20"]=Ae(Ge,at=>at.lighten(20)),Ee["primary-color-deprecated-t-20"]=Ae(Ge,at=>at.tint(20)),Ee["primary-color-deprecated-t-50"]=Ae(Ge,at=>at.tint(50)),Ee["primary-color-deprecated-f-12"]=Ae(Ge,at=>at.setAlpha(.12*at.getAlpha()));const mt=new Ls(it[0]);Ee["primary-color-active-deprecated-f-30"]=Ae(mt,at=>at.setAlpha(.3*at.getAlpha())),Ee["primary-color-active-deprecated-d-02"]=Ae(mt,at=>at.darken(2))}return G.successColor&&Ze(G.successColor,"success"),G.warningColor&&Ze(G.warningColor,"warning"),G.errorColor&&Ze(G.errorColor,"error"),G.infoColor&&Ze(G.infoColor,"info"),`
  :root {
    ${Object.keys(Ee).map(Ge=>`--${N}-${Ge}: ${Ee[Ge]};`).join(`
`)}
  }
  `.trim()}(x,P);Rn()&&Nn(M,`${TK}-dynamic-theme`)}const Fw=C.createContext(!1),AK=x=>{let{children:P,disabled:M}=x;const N=C.useContext(Fw);return C.createElement(Fw.Provider,{value:M??N},P)};var IP=Fw;const Zw=C.createContext(void 0),LK=x=>{let{children:P,size:M}=x;const N=C.useContext(Zw);return C.createElement(Zw.Provider,{value:M||N},P)};var Fy=Zw,$K=function(){return{componentDisabled:(0,C.useContext)(IP),componentSize:(0,C.useContext)(Fy)}};function Uw(x){return x>=0&&x<=255}var Zy=function(x,P){const{r:M,g:N,b:G,a:Ee}=new Ls(x).toRgb();if(Ee<1)return x;const{r:Ae,g:Ze,b:Ge}=new Ls(P).toRgb();for(let it=.01;it<=1;it+=.01){const mt=Math.round((M-Ae*(1-it))/it),at=Math.round((N-Ze*(1-it))/it),bt=Math.round((G-Ge*(1-it))/it);if(Uw(mt)&&Uw(at)&&Uw(bt))return new Ls({r:mt,g:at,b:bt,a:Math.round(100*it)/100}).toRgbString()}return new Ls({r:M,g:N,b:G,a:1}).toRgbString()},jK=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};function TP(x){const{override:P}=x,M=jK(x,["override"]),N=Object.assign({},P);Object.keys(c2).forEach(Ze=>{delete N[Ze]});const G=Object.assign(Object.assign({},M),N),Ee=1200,Ae=1600;if(G.motion===!1){const Ze="0s";G.motionDurationFast=Ze,G.motionDurationMid=Ze,G.motionDurationSlow=Ze}return Object.assign(Object.assign(Object.assign({},G),{colorFillContent:G.colorFillSecondary,colorFillContentHover:G.colorFill,colorFillAlter:G.colorFillQuaternary,colorBgContainerDisabled:G.colorFillTertiary,colorBorderBg:G.colorBgContainer,colorSplit:Zy(G.colorBorderSecondary,G.colorBgContainer),colorTextPlaceholder:G.colorTextQuaternary,colorTextDisabled:G.colorTextQuaternary,colorTextHeading:G.colorText,colorTextLabel:G.colorTextSecondary,colorTextDescription:G.colorTextTertiary,colorTextLightSolid:G.colorWhite,colorHighlight:G.colorError,colorBgTextHover:G.colorFillSecondary,colorBgTextActive:G.colorFill,colorIcon:G.colorTextTertiary,colorIconHover:G.colorText,colorErrorOutline:Zy(G.colorErrorBg,G.colorBgContainer),colorWarningOutline:Zy(G.colorWarningBg,G.colorBgContainer),fontSizeIcon:G.fontSizeSM,lineWidthFocus:4*G.lineWidth,lineWidth:G.lineWidth,controlOutlineWidth:2*G.lineWidth,controlInteractiveSize:G.controlHeight/2,controlItemBgHover:G.colorFillTertiary,controlItemBgActive:G.colorPrimaryBg,controlItemBgActiveHover:G.colorPrimaryBgHover,controlItemBgActiveDisabled:G.colorFill,controlTmpOutline:G.colorFillQuaternary,controlOutline:Zy(G.colorPrimaryBg,G.colorBgContainer),lineType:G.lineType,borderRadius:G.borderRadius,borderRadiusXS:G.borderRadiusXS,borderRadiusSM:G.borderRadiusSM,borderRadiusLG:G.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:G.sizeXXS,paddingXS:G.sizeXS,paddingSM:G.sizeSM,padding:G.size,paddingMD:G.sizeMD,paddingLG:G.sizeLG,paddingXL:G.sizeXL,paddingContentHorizontalLG:G.sizeLG,paddingContentVerticalLG:G.sizeMS,paddingContentHorizontal:G.sizeMS,paddingContentVertical:G.sizeSM,paddingContentHorizontalSM:G.size,paddingContentVerticalSM:G.sizeXS,marginXXS:G.sizeXXS,marginXS:G.sizeXS,marginSM:G.sizeSM,margin:G.size,marginMD:G.sizeMD,marginLG:G.sizeLG,marginXL:G.sizeXL,marginXXL:G.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:Ee,screenXLMin:Ee,screenXLMax:1599,screenXXL:Ae,screenXXLMin:Ae,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ls("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ls("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ls("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),N)}var OP=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const AP=(x,P,M)=>{const N=M.getDerivativeToken(x),{override:G}=P,Ee=OP(P,["override"]);let Ae=Object.assign(Object.assign({},N),{override:G});return Ae=TP(Ae),Ee&&Object.entries(Ee).forEach(Ze=>{let[Ge,it]=Ze;const{theme:mt}=it,at=OP(it,["theme"]);let bt=at;mt&&(bt=AP(Object.assign(Object.assign({},Ae),at),{override:at},mt)),Ae[Ge]=bt}),Ae};function T0(){const{token:x,hashed:P,theme:M,components:N}=I().useContext(MP),G=`5.8.2-${P||""}`,Ee=M||PP,[Ae,Ze]=function(Ge,it){var mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},at=(0,C.useContext)(Nc).cache.instanceId,bt=mt.salt,gt=bt===void 0?"":bt,It=mt.override,At=It===void 0?nK:It,jt=mt.formatToken,Lt=mt.getComputedToken,$t=C.useMemo(function(){return Object.assign.apply(Object,[{}].concat(Go(it)))},[it]),hn=C.useMemo(function(){return mo($t)},[$t]),kn=C.useMemo(function(){return mo(At)},[At]),On=iP("token",[gt,Ge.id,hn,kn],function(){var Zn=Lt?Lt($t,At,Ge):aP($t,At,Ge,jt),an=Mi(Zn,gt);Zn._tokenKey=an,rK(an);var er="".concat("css","-").concat(Za(an));return Zn._hashId=er,[Zn,er]},function(Zn){oK(Zn[0]._tokenKey,at)});return On}(Ee,[c2,x],{salt:G,override:Object.assign({override:x},N),getComputedToken:AP});return[Ee,Ae,P?Ze:""]}function RK(x){const{children:P}=x,[,M]=T0(),{motion:N}=M,G=C.useRef(!1);return G.current=G.current||N===!1,G.current?C.createElement(cu,{motion:N},P):P}const DK={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Ww=x=>({boxSizing:"border-box",margin:0,padding:0,color:x.colorText,fontSize:x.fontSize,lineHeight:x.lineHeight,listStyle:"none",fontFamily:x.fontFamily}),NK=x=>({a:{color:x.colorLink,textDecoration:x.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${x.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:x.colorLinkHover},"&:active":{color:x.colorLinkActive},"&:active,\n  &:hover":{textDecoration:x.linkHoverDecoration,outline:0},"&:focus":{textDecoration:x.linkFocusDecoration,outline:0},"&[disabled]":{color:x.colorTextDisabled,cursor:"not-allowed"}}}),zK=(x,P)=>{const{fontFamily:M,fontSize:N}=x,G=`[class^="${P}"], [class*=" ${P}"]`;return{[G]:{fontFamily:M,fontSize:N,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[G]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},LP=x=>({outline:`${x.lineWidthFocus}px solid ${x.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),Vw=x=>({"&:focus-visible":Object.assign({},LP(x))});var BK=(x,P)=>{const[M,N]=T0();return Bw({theme:M,token:N,hashId:"",path:["ant-design-icons",x],nonce:()=>P==null?void 0:P.nonce},()=>[{[`.${x}`]:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{[`.${x} .${x}-icon`]:{display:"block"}})}])},HK=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const FK=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"];let $P;function ZK(){return $P||"ant"}const UK=x=>{const{children:P,csp:M,autoInsertSpaceInButton:N,alert:G,anchor:Ee,form:Ae,locale:Ze,componentSize:Ge,direction:it,space:mt,virtual:at,dropdownMatchSelectWidth:bt,popupMatchSelectWidth:gt,popupOverflow:It,legacyLocale:At,parentContext:jt,iconPrefixCls:Lt,theme:$t,componentDisabled:hn,segmented:kn,statistic:On,spin:Zn,calendar:an,carousel:er,cascader:mr,collapse:Gn,typography:Qt,checkbox:Xt,descriptions:Ht,divider:Tn,drawer:fn,skeleton:Vn,steps:rr,image:_r,layout:xr,list:$r,mentions:Or,modal:zr,progress:Jr,result:Br,slider:ro,breadcrumb:Qr,menu:Ao,pagination:To,input:No,empty:Uo,badge:zo,radio:Fo,rate:ni,switch:jr,transfer:Zr,avatar:po,message:yo,tag:_o,table:Xr,card:Ii,tabs:li,timeline:Ua,timePicker:Qo,upload:ga,notification:ri,tree:vs,colorPicker:Si,datePicker:us,wave:cc}=x,Fi=C.useCallback((yi,Ai)=>{const{prefixCls:Li}=x;if(Ai)return Ai;const Oa=Li||jt.getPrefixCls("");return yi?`${Oa}-${yi}`:Oa},[jt.getPrefixCls,x.prefixCls]),Vo=Lt||jt.iconPrefixCls||$o,$s=Vo!==jt.iconPrefixCls,el=M||jt.csp,tl=BK(Vo,el),Ti=function(yi,Ai){const Li=yi||{},Oa=Li.inherit!==!1&&Ai?Ai:Hy;return Mr(()=>{if(!yi)return Ai;const ma=Object.assign({},Oa.components);return Object.keys(yi.components||{}).forEach(Wa=>{ma[Wa]=Object.assign(Object.assign({},ma[Wa]),yi.components[Wa])}),Object.assign(Object.assign(Object.assign({},Oa),Li),{token:Object.assign(Object.assign({},Oa.token),Li.token),components:ma})},[Li,Oa],(ma,Wa)=>ma.some((nl,Aa)=>{const hs=Wa[Aa];return!vi(nl,hs,!0)}))}($t,jt.theme),Kr={csp:el,autoInsertSpaceInButton:N,alert:G,anchor:Ee,locale:Ze||At,direction:it,space:mt,virtual:at,popupMatchSelectWidth:gt??bt,popupOverflow:It,getPrefixCls:Fi,iconPrefixCls:Vo,theme:Ti,segmented:kn,statistic:On,spin:Zn,calendar:an,carousel:er,cascader:mr,collapse:Gn,typography:Qt,checkbox:Xt,descriptions:Ht,divider:Tn,drawer:fn,skeleton:Vn,steps:rr,image:_r,input:No,layout:xr,list:$r,mentions:Or,modal:zr,progress:Jr,result:Br,slider:ro,breadcrumb:Qr,menu:Ao,pagination:To,empty:Uo,badge:zo,radio:Fo,rate:ni,switch:jr,transfer:Zr,avatar:po,message:yo,tag:_o,table:Xr,card:Ii,tabs:li,timeline:Ua,timePicker:Qo,upload:ga,notification:ri,tree:vs,colorPicker:Si,datePicker:us,wave:cc},jo=Object.assign({},jt);Object.keys(Kr).forEach(yi=>{Kr[yi]!==void 0&&(jo[yi]=Kr[yi])}),FK.forEach(yi=>{const Ai=x[yi];Ai&&(jo[yi]=Ai)});const ei=Mr(()=>jo,jo,(yi,Ai)=>{const Li=Object.keys(yi),Oa=Object.keys(Ai);return Li.length!==Oa.length||Li.some(ma=>yi[ma]!==Ai[ma])}),oi=C.useMemo(()=>({prefixCls:Vo,csp:el}),[Vo,el]);let Oi=$s?tl(P):P;const is=C.useMemo(()=>{var yi,Ai,Li,Oa;return function(){for(var ma=arguments.length,Wa=new Array(ma),nl=0;nl<ma;nl++)Wa[nl]=arguments[nl];var Aa=$p(Wa[0]);return Wa.forEach(function(hs){(function Hc(va,bf){var js=new Set(bf),ka=Ms(hs,va),yf=Array.isArray(ka);if(yf||o2(ka)){if(!js.has(ka)){js.add(ka);var Fc=Ms(Aa,va);yf?Aa=df(Aa,va,[]):Fc&&Pe(Fc)==="object"||(Aa=df(Aa,va,$p(ka))),i2(ka).forEach(function(xf){Hc([].concat(Go(va),[xf]),js)})}}else Aa=df(Aa,va,ka)})([])}),Aa}(((yi=zy.Form)===null||yi===void 0?void 0:yi.defaultValidateMessages)||{},((Li=(Ai=ei.locale)===null||Ai===void 0?void 0:Ai.Form)===null||Li===void 0?void 0:Li.defaultValidateMessages)||{},((Oa=ei.form)===null||Oa===void 0?void 0:Oa.validateMessages)||{},(Ae==null?void 0:Ae.validateMessages)||{})},[ei,Ae==null?void 0:Ae.validateMessages]);Object.keys(is).length>0&&(Oi=C.createElement(kK.Provider,{value:is},P)),Ze&&(Oi=C.createElement(EK,{locale:Ze,_ANT_MARK__:"internalMark"},Oi)),(Vo||el)&&(Oi=C.createElement(Tt.Provider,{value:oi},Oi)),Ge&&(Oi=C.createElement(LK,{size:Ge},Oi)),Oi=C.createElement(RK,null,Oi);const bs=C.useMemo(()=>{const yi=Ti||{},{algorithm:Ai,token:Li,components:Oa}=yi,ma=HK(yi,["algorithm","token","components"]),Wa=Ai&&(!Array.isArray(Ai)||Ai.length>0)?kd(Ai):PP,nl={};return Object.entries(Oa||{}).forEach(Aa=>{let[hs,Hc]=Aa;const va=Object.assign({},Hc);"algorithm"in va&&(va.algorithm===!0?va.theme=Wa:(Array.isArray(va.algorithm)||typeof va.algorithm=="function")&&(va.theme=kd(va.algorithm)),delete va.algorithm),nl[hs]=va}),Object.assign(Object.assign({},ma),{theme:Wa,token:Object.assign(Object.assign({},c2),Li),components:nl})},[Ti]);return $t&&(Oi=C.createElement(MP.Provider,{value:bs},Oi)),hn!==void 0&&(Oi=C.createElement(AK,{disabled:hn},Oi)),C.createElement(Do.Provider,{value:ei},Oi)},O0=x=>{const P=C.useContext(Do),M=C.useContext(SP);return C.createElement(UK,Object.assign({parentContext:P,legacyLocale:M},x))};O0.ConfigContext=Do,O0.SizeContext=Fy,O0.config=x=>{let{prefixCls:P,iconPrefixCls:M,theme:N}=x;P!==void 0&&($P=P),N&&(function(G){return Object.keys(G).some(Ee=>Ee.endsWith("Color"))}(N)&&OK(ZK(),N))},O0.useConfig=$K,Object.defineProperty(O0,"SizeContext",{get:()=>Fy});var WK=O0;const VK=(x,P,M,N,G)=>{const Ee=x/2,Ae=Ee,Ze=1*M/Math.sqrt(2),Ge=Ee-M*(1-1/Math.sqrt(2)),it=Ee-P*(1/Math.sqrt(2)),mt=M*(Math.sqrt(2)-1)+P*(1/Math.sqrt(2)),at=2*Ee-it,bt=mt,gt=2*Ee-Ze,It=Ge,At=2*Ee-0,jt=Ae,Lt=Ee*Math.sqrt(2)+M*(Math.sqrt(2)-2),$t=M*(Math.sqrt(2)-1);return{pointerEvents:"none",width:x,height:x,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:x,height:x/2,background:N,clipPath:{_multi_value_:!0,value:[`polygon(${$t}px 100%, 50% ${$t}px, ${2*Ee-$t}px 100%, ${$t}px 100%)`,`path('M 0 ${Ae} A ${M} ${M} 0 0 0 ${Ze} ${Ge} L ${it} ${mt} A ${P} ${P} 0 0 1 ${at} ${bt} L ${gt} ${It} A ${M} ${M} 0 0 0 ${At} ${jt} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:Lt,height:Lt,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${P}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:G,zIndex:0,background:"transparent"}}};function Kw(x){const{contentRadius:P,limitVerticalRadius:M}=x,N=P>12?P+2:12;return{dropdownArrowOffset:N,dropdownArrowOffsetVertical:M?8:N}}function Uy(x,P){return x?P:{}}function jP(x,P){const{componentCls:M,sizePopupArrow:N,borderRadiusXS:G,borderRadiusOuter:Ee,boxShadowPopoverArrow:Ae}=x,{colorBg:Ze,contentRadius:Ge=x.borderRadiusLG,limitVerticalRadius:it,arrowDistance:mt=0,arrowPlacement:at={left:!0,right:!0,top:!0,bottom:!0}}=P,{dropdownArrowOffsetVertical:bt,dropdownArrowOffset:gt}=Kw({contentRadius:Ge,limitVerticalRadius:it});return{[M]:Object.assign(Object.assign(Object.assign(Object.assign({[`${M}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},VK(N,G,Ee,Ze,Ae)),{"&:before":{background:Ze}})]},Uy(!!at.top,{[[`&-placement-top ${M}-arrow`,`&-placement-topLeft ${M}-arrow`,`&-placement-topRight ${M}-arrow`].join(",")]:{bottom:mt,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${M}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${M}-arrow`]:{left:{_skip_check_:!0,value:gt}},[`&-placement-topRight ${M}-arrow`]:{right:{_skip_check_:!0,value:gt}}})),Uy(!!at.bottom,{[[`&-placement-bottom ${M}-arrow`,`&-placement-bottomLeft ${M}-arrow`,`&-placement-bottomRight ${M}-arrow`].join(",")]:{top:mt,transform:"translateY(-100%)"},[`&-placement-bottom ${M}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${M}-arrow`]:{left:{_skip_check_:!0,value:gt}},[`&-placement-bottomRight ${M}-arrow`]:{right:{_skip_check_:!0,value:gt}}})),Uy(!!at.left,{[[`&-placement-left ${M}-arrow`,`&-placement-leftTop ${M}-arrow`,`&-placement-leftBottom ${M}-arrow`].join(",")]:{right:{_skip_check_:!0,value:mt},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${M}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${M}-arrow`]:{top:bt},[`&-placement-leftBottom ${M}-arrow`]:{bottom:bt}})),Uy(!!at.right,{[[`&-placement-right ${M}-arrow`,`&-placement-rightTop ${M}-arrow`,`&-placement-rightBottom ${M}-arrow`].join(",")]:{left:{_skip_check_:!0,value:mt},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${M}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${M}-arrow`]:{top:bt},[`&-placement-rightBottom ${M}-arrow`]:{bottom:bt}}))}}const RP={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},KK={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},YK=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function DP(x){const{arrowWidth:P,autoAdjustOverflow:M,arrowPointAtCenter:N,offset:G,borderRadius:Ee,visibleFirst:Ae}=x,Ze=P/2,Ge={};return Object.keys(RP).forEach(it=>{const mt=N&&KK[it]||RP[it],at=Object.assign(Object.assign({},mt),{offset:[0,0]});switch(Ge[it]=at,YK.has(it)&&(at.autoArrow=!1),it){case"top":case"topLeft":case"topRight":at.offset[1]=-Ze-G;break;case"bottom":case"bottomLeft":case"bottomRight":at.offset[1]=Ze+G;break;case"left":case"leftTop":case"leftBottom":at.offset[0]=-Ze-G;break;case"right":case"rightTop":case"rightBottom":at.offset[0]=Ze+G}const bt=Kw({contentRadius:Ee,limitVerticalRadius:!0});if(N)switch(it){case"topLeft":case"bottomLeft":at.offset[0]=-bt.dropdownArrowOffset-Ze;break;case"topRight":case"bottomRight":at.offset[0]=bt.dropdownArrowOffset+Ze;break;case"leftTop":case"rightTop":at.offset[1]=-bt.dropdownArrowOffset-Ze;break;case"leftBottom":case"rightBottom":at.offset[1]=bt.dropdownArrowOffset+Ze}at.overflow=function(gt,It,At,jt){if(jt===!1)return{adjustX:!1,adjustY:!1};const Lt=jt&&typeof jt=="object"?jt:{},$t={};switch(gt){case"top":case"bottom":$t.shiftX=2*It.dropdownArrowOffset+At;break;case"left":case"right":$t.shiftY=2*It.dropdownArrowOffsetVertical+At}const hn=Object.assign(Object.assign({},$t),Lt);return hn.shiftX||(hn.adjustX=!0),hn.shiftY||(hn.adjustY=!0),hn}(it,bt,P,M),Ae&&(at.htmlRegion="visibleFirst")}),Ge}const{isValidElement:gf}=C;function NP(x){return x&&gf(x)&&x.type===C.Fragment}function mf(x,P){return function(M,N,G){return gf(M)?C.cloneElement(M,typeof G=="function"?G(M.props||{}):G):N}(x,x,P)}var GK=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],A0=void 0;function XK(x,P){var M=x.prefixCls,N=x.invalidate,G=x.item,Ee=x.renderItem,Ae=x.responsive,Ze=x.responsiveDisabled,Ge=x.registerSize,it=x.itemKey,mt=x.className,at=x.style,bt=x.children,gt=x.display,It=x.order,At=x.component,jt=At===void 0?"div":At,Lt=Re(x,GK),$t=Ae&&!gt;function hn(er){Ge(it,er)}C.useEffect(function(){return function(){hn(null)}},[]);var kn,On=Ee&&G!==A0?Ee(G):bt;N||(kn={opacity:$t?0:1,height:$t?0:A0,overflowY:$t?"hidden":A0,order:Ae?It:A0,pointerEvents:$t?"none":A0,position:$t?"absolute":A0});var Zn={};$t&&(Zn["aria-hidden"]=!0);var an=C.createElement(jt,(0,X.Z)({className:Se()(!N&&M,mt),style:Ot(Ot({},kn),at)},Zn,Lt,{ref:P}),On);return Ae&&(an=C.createElement(af,{onResize:function(er){hn(er.offsetWidth)},disabled:Ze},an)),an}var zP=C.forwardRef(XK);zP.displayName="Item";var Wy=zP;function qK(){var x=C.useRef(null);return function(P){x.current||(x.current=[],function(M){if(typeof MessageChannel>"u")En(M);else{var N=new MessageChannel;N.port1.onmessage=function(){return M()},N.port2.postMessage(void 0)}}(function(){(0,Fr.unstable_batchedUpdates)(function(){x.current.forEach(function(M){M()}),x.current=null})})),x.current.push(P)}}function h2(x,P){var M=xe(C.useState(P),2),N=M[0],G=M[1];return[N,cs(function(Ee){x(function(){G(Ee)})})]}var Vy=I().createContext(null),JK=["component"],QK=["className"],eY=["className"],tY=function(x,P){var M=C.useContext(Vy);if(!M){var N=x.component,G=N===void 0?"div":N,Ee=Re(x,JK);return C.createElement(G,(0,X.Z)({},Ee,{ref:P}))}var Ae=M.className,Ze=Re(M,QK),Ge=x.className,it=Re(x,eY);return C.createElement(Vy.Provider,{value:null},C.createElement(Wy,(0,X.Z)({ref:P,className:Se()(Ae,Ge)},Ze,it)))},BP=C.forwardRef(tY);BP.displayName="RawItem";var nY=BP,rY=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],HP="responsive",FP="invalidate";function oY(x){return"+ ".concat(x.length," ...")}function iY(x,P){var M=x.prefixCls,N=M===void 0?"rc-overflow":M,G=x.data,Ee=G===void 0?[]:G,Ae=x.renderItem,Ze=x.renderRawItem,Ge=x.itemKey,it=x.itemWidth,mt=it===void 0?10:it,at=x.ssr,bt=x.style,gt=x.className,It=x.maxCount,At=x.renderRest,jt=x.renderRawRest,Lt=x.suffix,$t=x.component,hn=$t===void 0?"div":$t,kn=x.itemComponent,On=x.onVisibleChange,Zn=Re(x,rY),an=at==="full",er=qK(),mr=xe(h2(er,null),2),Gn=mr[0],Qt=mr[1],Xt=Gn||0,Ht=xe(h2(er,new Map),2),Tn=Ht[0],fn=Ht[1],Vn=xe(h2(er,0),2),rr=Vn[0],_r=Vn[1],xr=xe(h2(er,0),2),$r=xr[0],Or=xr[1],zr=xe(h2(er,0),2),Jr=zr[0],Br=zr[1],ro=xe((0,C.useState)(null),2),Qr=ro[0],Ao=ro[1],To=xe((0,C.useState)(null),2),No=To[0],Uo=To[1],zo=C.useMemo(function(){return No===null&&an?Number.MAX_SAFE_INTEGER:No||0},[No,Gn]),Fo=xe((0,C.useState)(!1),2),ni=Fo[0],jr=Fo[1],Zr="".concat(N,"-item"),po=Math.max(rr,$r),yo=It===HP,_o=Ee.length&&yo,Xr=It===FP,Ii=_o||typeof It=="number"&&Ee.length>It,li=(0,C.useMemo)(function(){var Kr=Ee;return _o?Kr=Gn===null&&an?Ee:Ee.slice(0,Math.min(Ee.length,Xt/mt)):typeof It=="number"&&(Kr=Ee.slice(0,It)),Kr},[Ee,mt,Gn,It,_o]),Ua=(0,C.useMemo)(function(){return _o?Ee.slice(zo+1):Ee.slice(li.length)},[Ee,li,_o,zo]),Qo=(0,C.useCallback)(function(Kr,jo){var ei;return typeof Ge=="function"?Ge(Kr):(ei=Ge&&(Kr==null?void 0:Kr[Ge]))!==null&&ei!==void 0?ei:jo},[Ge]),ga=(0,C.useCallback)(Ae||function(Kr){return Kr},[Ae]);function ri(Kr,jo,ei){(No!==Kr||jo!==void 0&&jo!==Qr)&&(Uo(Kr),ei||(jr(Kr<Ee.length-1),On==null||On(Kr)),jo!==void 0&&Ao(jo))}function vs(Kr,jo){fn(function(ei){var oi=new Map(ei);return jo===null?oi.delete(Kr):oi.set(Kr,jo),oi})}function Si(Kr){return Tn.get(Qo(li[Kr],Kr))}_n(function(){if(Xt&&typeof po=="number"&&li){var Kr=Jr,jo=li.length,ei=jo-1;if(!jo)return void ri(0,null);for(var oi=0;oi<jo;oi+=1){var Oi=Si(oi);if(an&&(Oi=Oi||0),Oi===void 0){ri(oi-1,void 0,!0);break}if(Kr+=Oi,ei===0&&Kr<=Xt||oi===ei-1&&Kr+Si(ei)<=Xt){ri(ei,null);break}if(Kr+po>Xt){ri(oi-1,Kr-Oi-Jr+$r);break}}Lt&&Si(0)+Jr>Xt&&Ao(null)}},[Xt,Tn,$r,Jr,Qo,li]);var us=ni&&!!Ua.length,cc={};Qr!==null&&_o&&(cc={position:"absolute",left:Qr,top:0});var Fi,Vo={prefixCls:Zr,responsive:_o,component:kn,invalidate:Xr},$s=Ze?function(Kr,jo){var ei=Qo(Kr,jo);return C.createElement(Vy.Provider,{key:ei,value:Ot(Ot({},Vo),{},{order:jo,item:Kr,itemKey:ei,registerSize:vs,display:jo<=zo})},Ze(Kr,jo))}:function(Kr,jo){var ei=Qo(Kr,jo);return C.createElement(Wy,(0,X.Z)({},Vo,{order:jo,key:ei,item:Kr,renderItem:ga,itemKey:ei,registerSize:vs,display:jo<=zo}))},el={order:us?zo:Number.MAX_SAFE_INTEGER,className:"".concat(Zr,"-rest"),registerSize:function(Kr,jo){Or(jo),_r($r)},display:us};if(jt)jt&&(Fi=C.createElement(Vy.Provider,{value:Ot(Ot({},Vo),el)},jt(Ua)));else{var tl=At||oY;Fi=C.createElement(Wy,(0,X.Z)({},Vo,el),typeof tl=="function"?tl(Ua):tl)}var Ti=C.createElement(hn,(0,X.Z)({className:Se()(!Xr&&N,gt),style:bt,ref:P},Zn),li.map($s),Ii?Fi:null,Lt&&C.createElement(Wy,(0,X.Z)({},Vo,{responsive:yo,responsiveDisabled:!_o,order:zo,className:"".concat(Zr,"-suffix"),registerSize:function(Kr,jo){Br(jo)},display:!0,style:cc}),Lt));return yo&&(Ti=C.createElement(af,{onResize:function(Kr,jo){Qt(jo.clientWidth)},disabled:!_o},Ti)),Ti}var f2=C.forwardRef(iY);f2.displayName="Overflow",f2.Item=nY,f2.RESPONSIVE=HP,f2.INVALIDATE=FP;var p2=f2,ZP=C.createContext(null);function Yw(x,P){return x===void 0?null:"".concat(x,"-").concat(P)}function UP(x){return Yw(C.useContext(ZP),x)}var aY=["children","locked"],Ed=C.createContext(null);function g2(x){var P=x.children,M=x.locked,N=Re(x,aY),G=C.useContext(Ed),Ee=Mr(function(){return Ae=N,Ze=Ot({},G),Object.keys(Ae).forEach(function(Ge){var it=Ae[Ge];it!==void 0&&(Ze[Ge]=it)}),Ze;var Ae,Ze},[G,N],function(Ae,Ze){return!(M||Ae[0]===Ze[0]&&vi(Ae[1],Ze[1],!0))});return C.createElement(Ed.Provider,{value:Ee},P)}var sY=[],WP=C.createContext(null);function Ky(){return C.useContext(WP)}var VP=C.createContext(sY);function L0(x){var P=C.useContext(VP);return C.useMemo(function(){return x!==void 0?[].concat(Go(P),[x]):P},[P,x])}var KP=C.createContext(null),Gw=C.createContext({});function YP(x){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(iu(x)){var M=x.nodeName.toLowerCase(),N=["input","select","textarea","button"].includes(M)||x.isContentEditable||M==="a"&&!!x.getAttribute("href"),G=x.getAttribute("tabindex"),Ee=Number(G),Ae=null;return G&&!Number.isNaN(Ee)?Ae=Ee:N&&Ae===null&&(Ae=0),N&&x.disabled&&(Ae=null),Ae!==null&&(Ae>=0||P&&Ae<0)}return!1}function lY(x){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],M=Go(x.querySelectorAll("*")).filter(function(N){return YP(N,P)});return YP(x,P)&&M.unshift(x),M}var Xw=Vr.LEFT,qw=Vr.RIGHT,Jw=Vr.UP,Yy=Vr.DOWN,Gy=Vr.ENTER,GP=Vr.ESC,m2=Vr.HOME,v2=Vr.END,XP=[Jw,Yy,Xw,qw];function qP(x,P){return lY(x,!0).filter(function(M){return P.has(M)})}function JP(x,P,M){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!x)return null;var G=qP(x,P),Ee=G.length,Ae=G.findIndex(function(Ze){return M===Ze});return N<0?Ae===-1?Ae=Ee-1:Ae-=1:N>0&&(Ae+=1),G[Ae=(Ae+Ee)%Ee]}function cY(x,P,M,N,G,Ee,Ae,Ze,Ge,it){var mt=C.useRef(),at=C.useRef();at.current=P;var bt=function(){En.cancel(mt.current)};return C.useEffect(function(){return function(){bt()}},[]),function(gt){var It=gt.which;if([].concat(XP,[Gy,GP,m2,v2]).includes(It)){var At,jt,Lt,$t=function(){return At=new Set,jt=new Map,Lt=new Map,Ee().forEach(function(Ht){var Tn=document.querySelector("[data-menu-id='".concat(Yw(N,Ht),"']"));Tn&&(At.add(Tn),Lt.set(Tn,Ht),jt.set(Ht,Tn))}),At};$t();var hn=function(Ht,Tn){for(var fn=Ht||document.activeElement;fn;){if(Tn.has(fn))return fn;fn=fn.parentElement}return null}(jt.get(P),At),kn=Lt.get(hn),On=function(Ht,Tn,fn,Vn){var rr,_r,xr,$r,Or="prev",zr="next",Jr="children",Br="parent";if(Ht==="inline"&&Vn===Gy)return{inlineTrigger:!0};var ro=(Me(rr={},Jw,Or),Me(rr,Yy,zr),rr),Qr=(Me(_r={},Xw,fn?zr:Or),Me(_r,qw,fn?Or:zr),Me(_r,Yy,Jr),Me(_r,Gy,Jr),_r),Ao=(Me(xr={},Jw,Or),Me(xr,Yy,zr),Me(xr,Gy,Jr),Me(xr,GP,Br),Me(xr,Xw,fn?Jr:Br),Me(xr,qw,fn?Br:Jr),xr);switch(($r={inline:ro,horizontal:Qr,vertical:Ao,inlineSub:ro,horizontalSub:Ao,verticalSub:Ao}["".concat(Ht).concat(Tn?"":"Sub")])===null||$r===void 0?void 0:$r[Vn]){case Or:return{offset:-1,sibling:!0};case zr:return{offset:1,sibling:!0};case Br:return{offset:-1,sibling:!1};case Jr:return{offset:1,sibling:!1};default:return null}}(x,Ae(kn,!0).length===1,M,It);if(!On&&It!==m2&&It!==v2)return;(XP.includes(It)||[m2,v2].includes(It))&&gt.preventDefault();var Zn=function(Ht){if(Ht){var Tn=Ht,fn=Ht.querySelector("a");fn!=null&&fn.getAttribute("href")&&(Tn=fn);var Vn=Lt.get(Ht);Ze(Vn),bt(),mt.current=En(function(){at.current===Vn&&Tn.focus()})}};if([m2,v2].includes(It)||On.sibling||!hn){var an,er,mr=qP(an=hn&&x!=="inline"?function(Ht){for(var Tn=Ht;Tn;){if(Tn.getAttribute("data-menu-list"))return Tn;Tn=Tn.parentElement}return null}(hn):G.current,At);er=It===m2?mr[0]:It===v2?mr[mr.length-1]:JP(an,At,hn,On.offset),Zn(er)}else if(On.inlineTrigger)Ge(kn);else if(On.offset>0)Ge(kn,!0),bt(),mt.current=En(function(){$t();var Ht=hn.getAttribute("aria-controls"),Tn=JP(document.getElementById(Ht),At);Zn(Tn)},5);else if(On.offset<0){var Gn=Ae(kn,!0),Qt=Gn[Gn.length-2],Xt=jt.get(Qt);Ge(Qt,!1),Zn(Xt)}}it==null||it(gt)}}var Qw="__RC_UTIL_PATH_SPLIT__",QP=function(x){return x.join(Qw)},e7="rc-menu-more";function dY(){var x=xe(C.useState({}),2)[1],P=(0,C.useRef)(new Map),M=(0,C.useRef)(new Map),N=xe(C.useState([]),2),G=N[0],Ee=N[1],Ae=(0,C.useRef)(0),Ze=(0,C.useRef)(!1),Ge=(0,C.useCallback)(function(It,At){var jt=QP(At);M.current.set(jt,It),P.current.set(It,jt),Ae.current+=1;var Lt,$t=Ae.current;Lt=function(){$t===Ae.current&&(Ze.current||x({}))},Promise.resolve().then(Lt)},[]),it=(0,C.useCallback)(function(It,At){var jt=QP(At);M.current.delete(jt),P.current.delete(It)},[]),mt=(0,C.useCallback)(function(It){Ee(It)},[]),at=(0,C.useCallback)(function(It,At){var jt=P.current.get(It)||"",Lt=jt.split(Qw);return At&&G.includes(Lt[0])&&Lt.unshift(e7),Lt},[G]),bt=(0,C.useCallback)(function(It,At){return It.some(function(jt){return at(jt,!0).includes(At)})},[at]),gt=(0,C.useCallback)(function(It){var At="".concat(P.current.get(It)).concat(Qw),jt=new Set;return Go(M.current.keys()).forEach(function(Lt){Lt.startsWith(At)&&jt.add(M.current.get(Lt))}),jt},[]);return C.useEffect(function(){return function(){Ze.current=!0}},[]),{registerPath:Ge,unregisterPath:it,refreshOverflowKeys:mt,isSubPathKey:bt,getKeyPath:at,getKeys:function(){var It=Go(P.current.keys());return G.length&&It.push(e7),It},getSubPathKeys:gt}}function b2(x){var P=C.useRef(x);P.current=x;var M=C.useCallback(function(){for(var N,G=arguments.length,Ee=new Array(G),Ae=0;Ae<G;Ae++)Ee[Ae]=arguments[Ae];return(N=P.current)===null||N===void 0?void 0:N.call.apply(N,[P].concat(Ee))},[]);return x?M:void 0}var uY=Math.random().toFixed(5).toString().slice(2),eM=0;function tM(x,P,M,N){var G=C.useContext(Ed),Ee=G.activeKey,Ae=G.onActive,Ze=G.onInactive,Ge={active:Ee===x};return P||(Ge.onMouseEnter=function(it){M==null||M({key:x,domEvent:it}),Ae(x)},Ge.onMouseLeave=function(it){N==null||N({key:x,domEvent:it}),Ze(x)}),Ge}function nM(x){var P=C.useContext(Ed),M=P.mode,N=P.rtl,G=P.inlineIndent;return M!=="inline"?null:N?{paddingRight:x*G}:{paddingLeft:x*G}}function rM(x){var P=x.icon,M=x.props,N=x.children;return(typeof P=="function"?C.createElement(P,Ot({},M)):P)||N||null}var hY=["item"];function Xy(x){var P=x.item,M=Re(x,hY);return Object.defineProperty(M,"item",{get:function(){return or(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),P}}),M}var fY=["title","attribute","elementRef"],pY=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],gY=["active"],mY=function(x){jc(M,x);var P=xd(M);function M(){return Xs(this,M),P.apply(this,arguments)}return ms(M,[{key:"render",value:function(){var N=this.props,G=N.title,Ee=N.attribute,Ae=N.elementRef,Ze=Jo(Re(N,fY),["eventKey","popupClassName","popupOffset","onTitleClick"]);return or(!Ee,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),C.createElement(p2.Item,(0,X.Z)({},Ee,{title:typeof G=="string"?G:void 0},Ze,{ref:Ae}))}}]),M}(C.Component),vY=C.forwardRef(function(x,P){var M,N=x.style,G=x.className,Ee=x.eventKey,Ae=(x.warnKey,x.disabled),Ze=x.itemIcon,Ge=x.children,it=x.role,mt=x.onMouseEnter,at=x.onMouseLeave,bt=x.onClick,gt=x.onKeyDown,It=x.onFocus,At=Re(x,pY),jt=UP(Ee),Lt=C.useContext(Ed),$t=Lt.prefixCls,hn=Lt.onItemClick,kn=Lt.disabled,On=Lt.overflowDisabled,Zn=Lt.itemIcon,an=Lt.selectedKeys,er=Lt.onActive,mr=C.useContext(Gw)._internalRenderMenuItem,Gn="".concat($t,"-item"),Qt=C.useRef(),Xt=C.useRef(),Ht=kn||Ae,Tn=hi(P,Xt),fn=L0(Ee),Vn=function(ro){return{key:Ee,keyPath:Go(fn).reverse(),item:Qt.current,domEvent:ro}},rr=Ze||Zn,_r=tM(Ee,Ht,mt,at),xr=_r.active,$r=Re(_r,gY),Or=an.includes(Ee),zr=nM(fn.length),Jr={};x.role==="option"&&(Jr["aria-selected"]=Or);var Br=C.createElement(mY,(0,X.Z)({ref:Qt,elementRef:Tn,role:it===null?"none":it||"menuitem",tabIndex:Ae?null:-1,"data-menu-id":On&&jt?null:jt},At,$r,Jr,{component:"li","aria-disabled":Ae,style:Ot(Ot({},zr),N),className:Se()(Gn,(M={},Me(M,"".concat(Gn,"-active"),xr),Me(M,"".concat(Gn,"-selected"),Or),Me(M,"".concat(Gn,"-disabled"),Ht),M),G),onClick:function(ro){if(!Ht){var Qr=Vn(ro);bt==null||bt(Xy(Qr)),hn(Qr)}},onKeyDown:function(ro){if(gt==null||gt(ro),ro.which===Vr.ENTER){var Qr=Vn(ro);bt==null||bt(Xy(Qr)),hn(Qr)}},onFocus:function(ro){er(Ee),It==null||It(ro)}}),Ge,C.createElement(rM,{props:Ot(Ot({},x),{},{isSelected:Or}),icon:rr}));return mr&&(Br=mr(Br,x,{selected:Or})),Br});function bY(x,P){var M=x.eventKey,N=Ky(),G=L0(M);return C.useEffect(function(){if(N)return N.registerPath(M,G),function(){N.unregisterPath(M,G)}},[G]),N?null:C.createElement(vY,(0,X.Z)({},x,{ref:P}))}var qy=C.forwardRef(bY),yY=["className","children"],xY=function(x,P){var M=x.className,N=x.children,G=Re(x,yY),Ee=C.useContext(Ed),Ae=Ee.prefixCls,Ze=Ee.mode,Ge=Ee.rtl;return C.createElement("ul",(0,X.Z)({className:Se()(Ae,Ge&&"".concat(Ae,"-rtl"),"".concat(Ae,"-sub"),"".concat(Ae,"-").concat(Ze==="inline"?"inline":"vertical"),M),role:"menu"},G,{"data-menu-list":!0,ref:P}),N)},oM=C.forwardRef(xY);oM.displayName="SubMenuList";var iM=oM;function t7(x,P){return wi(x).map(function(M,N){if(C.isValidElement(M)){var G,Ee,Ae=M.key,Ze=(G=(Ee=M.props)===null||Ee===void 0?void 0:Ee.eventKey)!==null&&G!==void 0?G:Ae;Ze==null&&(Ze="tmp_key-".concat([].concat(Go(P),[N]).join("-")));var Ge={key:Ze,eventKey:Ze};return C.cloneElement(M,Ge)}return M})}var Qs={adjustX:1,adjustY:1},wY={topLeft:{points:["bl","tl"],overflow:Qs},topRight:{points:["br","tr"],overflow:Qs},bottomLeft:{points:["tl","bl"],overflow:Qs},bottomRight:{points:["tr","br"],overflow:Qs},leftTop:{points:["tr","tl"],overflow:Qs},leftBottom:{points:["br","bl"],overflow:Qs},rightTop:{points:["tl","tr"],overflow:Qs},rightBottom:{points:["bl","br"],overflow:Qs}},CY={topLeft:{points:["bl","tl"],overflow:Qs},topRight:{points:["br","tr"],overflow:Qs},bottomLeft:{points:["tl","bl"],overflow:Qs},bottomRight:{points:["tr","br"],overflow:Qs},rightTop:{points:["tr","tl"],overflow:Qs},rightBottom:{points:["br","bl"],overflow:Qs},leftTop:{points:["tl","tr"],overflow:Qs},leftBottom:{points:["bl","br"],overflow:Qs}};function aM(x,P,M){return P||(M?M[x]||M.other:void 0)}var SY={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function kY(x){var P=x.prefixCls,M=x.visible,N=x.children,G=x.popup,Ee=x.popupClassName,Ae=x.popupOffset,Ze=x.disabled,Ge=x.mode,it=x.onVisibleChange,mt=C.useContext(Ed),at=mt.getPopupContainer,bt=mt.rtl,gt=mt.subMenuOpenDelay,It=mt.subMenuCloseDelay,At=mt.builtinPlacements,jt=mt.triggerSubMenuAction,Lt=mt.forceSubMenuRender,$t=mt.rootClassName,hn=mt.motion,kn=mt.defaultMotions,On=xe(C.useState(!1),2),Zn=On[0],an=On[1],er=Ot(Ot({},bt?CY:wY),At),mr=SY[Ge],Gn=aM(Ge,hn,kn),Qt=C.useRef(Gn);Ge!=="inline"&&(Qt.current=Gn);var Xt=Ot(Ot({},Qt.current),{},{leavedClassName:"".concat(P,"-hidden"),removeOnLeave:!1,motionAppear:!0}),Ht=C.useRef();return C.useEffect(function(){return Ht.current=En(function(){an(M)}),function(){En.cancel(Ht.current)}},[M]),C.createElement(qr,{prefixCls:P,popupClassName:Se()("".concat(P,"-popup"),Me({},"".concat(P,"-rtl"),bt),Ee,$t),stretch:Ge==="horizontal"?"minWidth":null,getPopupContainer:at,builtinPlacements:er,popupPlacement:mr,popupVisible:Zn,popup:G,popupAlign:Ae&&{offset:Ae},action:Ze?[]:[jt],mouseEnterDelay:gt,mouseLeaveDelay:It,onPopupVisibleChange:it,forceRender:Lt,popupMotion:Xt},N)}function _Y(x){var P=x.id,M=x.open,N=x.keyPath,G=x.children,Ee="inline",Ae=C.useContext(Ed),Ze=Ae.prefixCls,Ge=Ae.forceSubMenuRender,it=Ae.motion,mt=Ae.defaultMotions,at=Ae.mode,bt=C.useRef(!1);bt.current=at===Ee;var gt=xe(C.useState(!bt.current),2),It=gt[0],At=gt[1],jt=!!bt.current&&M;C.useEffect(function(){bt.current&&At(!1)},[at]);var Lt=Ot({},aM(Ee,it,mt));N.length>1&&(Lt.motionAppear=!1);var $t=Lt.onVisibleChanged;return Lt.onVisibleChanged=function(hn){return bt.current||hn||At(!0),$t==null?void 0:$t(hn)},It?null:C.createElement(g2,{mode:Ee,locked:!bt.current},C.createElement(wt,(0,X.Z)({visible:jt},Lt,{forceRender:Ge,removeOnLeave:!1,leavedClassName:"".concat(Ze,"-hidden")}),function(hn){var kn=hn.className,On=hn.style;return C.createElement(iM,{id:P,className:kn,style:On},G)}))}var EY=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],PY=["active"],MY=function(x){var P,M=x.style,N=x.className,G=x.title,Ee=x.eventKey,Ae=(x.warnKey,x.disabled),Ze=x.internalPopupClose,Ge=x.children,it=x.itemIcon,mt=x.expandIcon,at=x.popupClassName,bt=x.popupOffset,gt=x.onClick,It=x.onMouseEnter,At=x.onMouseLeave,jt=x.onTitleClick,Lt=x.onTitleMouseEnter,$t=x.onTitleMouseLeave,hn=Re(x,EY),kn=UP(Ee),On=C.useContext(Ed),Zn=On.prefixCls,an=On.mode,er=On.openKeys,mr=On.disabled,Gn=On.overflowDisabled,Qt=On.activeKey,Xt=On.selectedKeys,Ht=On.itemIcon,Tn=On.expandIcon,fn=On.onItemClick,Vn=On.onOpenChange,rr=On.onActive,_r=C.useContext(Gw)._internalRenderSubMenuItem,xr=C.useContext(KP).isSubPathKey,$r=L0(),Or="".concat(Zn,"-submenu"),zr=mr||Ae,Jr=C.useRef(),Br=C.useRef(),ro=it||Ht,Qr=mt||Tn,Ao=er.includes(Ee),To=!Gn&&Ao,No=xr(Xt,Ee),Uo=tM(Ee,zr,Lt,$t),zo=Uo.active,Fo=Re(Uo,PY),ni=xe(C.useState(!1),2),jr=ni[0],Zr=ni[1],po=function(ri){zr||Zr(ri)},yo=C.useMemo(function(){return zo||an!=="inline"&&(jr||xr([Qt],Ee))},[an,zo,Qt,jr,Ee,xr]),_o=nM($r.length),Xr=b2(function(ri){gt==null||gt(Xy(ri)),fn(ri)}),Ii=kn&&"".concat(kn,"-popup"),li=C.createElement("div",(0,X.Z)({role:"menuitem",style:_o,className:"".concat(Or,"-title"),tabIndex:zr?null:-1,ref:Jr,title:typeof G=="string"?G:null,"data-menu-id":Gn&&kn?null:kn,"aria-expanded":To,"aria-haspopup":!0,"aria-controls":Ii,"aria-disabled":zr,onClick:function(ri){zr||(jt==null||jt({key:Ee,domEvent:ri}),an==="inline"&&Vn(Ee,!Ao))},onFocus:function(){rr(Ee)}},Fo),G,C.createElement(rM,{icon:an!=="horizontal"?Qr:null,props:Ot(Ot({},x),{},{isOpen:To,isSubMenu:!0})},C.createElement("i",{className:"".concat(Or,"-arrow")}))),Ua=C.useRef(an);if(an!=="inline"&&$r.length>1?Ua.current="vertical":Ua.current=an,!Gn){var Qo=Ua.current;li=C.createElement(kY,{mode:Qo,prefixCls:Or,visible:!Ze&&To&&an!=="inline",popupClassName:at,popupOffset:bt,popup:C.createElement(g2,{mode:Qo==="horizontal"?"vertical":Qo},C.createElement(iM,{id:Ii,ref:Br},Ge)),disabled:zr,onVisibleChange:function(ri){an!=="inline"&&Vn(Ee,ri)}},li)}var ga=C.createElement(p2.Item,(0,X.Z)({role:"none"},hn,{component:"li",style:M,className:Se()(Or,"".concat(Or,"-").concat(an),N,(P={},Me(P,"".concat(Or,"-open"),To),Me(P,"".concat(Or,"-active"),yo),Me(P,"".concat(Or,"-selected"),No),Me(P,"".concat(Or,"-disabled"),zr),P)),onMouseEnter:function(ri){po(!0),It==null||It({key:Ee,domEvent:ri})},onMouseLeave:function(ri){po(!1),At==null||At({key:Ee,domEvent:ri})}}),li,!Gn&&C.createElement(_Y,{id:Ii,open:To,keyPath:$r},Ge));return _r&&(ga=_r(ga,x,{selected:No,active:yo,open:To,disabled:zr})),C.createElement(g2,{onItemClick:Xr,mode:an==="horizontal"?"vertical":an,itemIcon:ro,expandIcon:Qr},ga)};function Jy(x){var P,M=x.eventKey,N=x.children,G=L0(M),Ee=t7(N,G),Ae=Ky();return C.useEffect(function(){if(Ae)return Ae.registerPath(M,G),function(){Ae.unregisterPath(M,G)}},[G]),P=Ae?Ee:C.createElement(MY,x,Ee),C.createElement(VP.Provider,{value:G},P)}var IY=["className","title","eventKey","children"],TY=["children"],OY=function(x){var P=x.className,M=x.title,N=(x.eventKey,x.children),G=Re(x,IY),Ee=C.useContext(Ed).prefixCls,Ae="".concat(Ee,"-item-group");return C.createElement("li",(0,X.Z)({role:"presentation"},G,{onClick:function(Ze){return Ze.stopPropagation()},className:Se()(Ae,P)}),C.createElement("div",{role:"presentation",className:"".concat(Ae,"-title"),title:typeof M=="string"?M:void 0},M),C.createElement("ul",{role:"group",className:"".concat(Ae,"-list")},N))};function Qy(x){var P=x.children,M=Re(x,TY),N=t7(P,L0(M.eventKey));return Ky()?N:C.createElement(OY,Jo(M,["warnKey"]),N)}function n7(x){var P=x.className,M=x.style,N=C.useContext(Ed).prefixCls;return Ky()?null:C.createElement("li",{className:Se()("".concat(N,"-item-divider"),P),style:M})}var AY=["label","children","key","type"];function r7(x){return(x||[]).map(function(P,M){if(P&&Pe(P)==="object"){var N=P,G=N.label,Ee=N.children,Ae=N.key,Ze=N.type,Ge=Re(N,AY),it=Ae??"tmp-".concat(M);return Ee||Ze==="group"?Ze==="group"?C.createElement(Qy,(0,X.Z)({key:it},Ge,{title:G}),r7(Ee)):C.createElement(Jy,(0,X.Z)({key:it},Ge,{title:G}),r7(Ee)):Ze==="divider"?C.createElement(n7,(0,X.Z)({key:it},Ge)):C.createElement(qy,(0,X.Z)({key:it},Ge),G)}return null}).filter(function(P){return P})}function LY(x,P,M){var N=x;return P&&(N=r7(P)),t7(N,M)}var $Y=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],$0=[],jY=C.forwardRef(function(x,P){var M,N,G=x,Ee=G.prefixCls,Ae=Ee===void 0?"rc-menu":Ee,Ze=G.rootClassName,Ge=G.style,it=G.className,mt=G.tabIndex,at=mt===void 0?0:mt,bt=G.items,gt=G.children,It=G.direction,At=G.id,jt=G.mode,Lt=jt===void 0?"vertical":jt,$t=G.inlineCollapsed,hn=G.disabled,kn=G.disabledOverflow,On=G.subMenuOpenDelay,Zn=On===void 0?.1:On,an=G.subMenuCloseDelay,er=an===void 0?.1:an,mr=G.forceSubMenuRender,Gn=G.defaultOpenKeys,Qt=G.openKeys,Xt=G.activeKey,Ht=G.defaultActiveFirst,Tn=G.selectable,fn=Tn===void 0||Tn,Vn=G.multiple,rr=Vn!==void 0&&Vn,_r=G.defaultSelectedKeys,xr=G.selectedKeys,$r=G.onSelect,Or=G.onDeselect,zr=G.inlineIndent,Jr=zr===void 0?24:zr,Br=G.motion,ro=G.defaultMotions,Qr=G.triggerSubMenuAction,Ao=Qr===void 0?"hover":Qr,To=G.builtinPlacements,No=G.itemIcon,Uo=G.expandIcon,zo=G.overflowedIndicator,Fo=zo===void 0?"...":zo,ni=G.overflowedIndicatorPopupClassName,jr=G.getPopupContainer,Zr=G.onClick,po=G.onOpenChange,yo=G.onKeyDown,_o=(G.openAnimation,G.openTransitionName,G._internalRenderMenuItem),Xr=G._internalRenderSubMenuItem,Ii=Re(G,$Y),li=C.useMemo(function(){return LY(gt,bt,$0)},[gt,bt]),Ua=xe(C.useState(!1),2),Qo=Ua[0],ga=Ua[1],ri=C.useRef(),vs=function(Bo){var Qi=xe(Tl(Bo,{value:Bo}),2),ea=Qi[0],Rs=Qi[1];return C.useEffect(function(){eM+=1;var rl="".concat(uY,"-").concat(eM);Rs("rc-menu-uuid-".concat(rl))},[]),ea}(At),Si=It==="rtl",us=Tl(Gn,{value:Qt,postState:function(Bo){return Bo||$0}}),cc=xe(us,2),Fi=cc[0],Vo=cc[1],$s=function(Bo){var Qi=arguments.length>1&&arguments[1]!==void 0&&arguments[1];function ea(){Vo(Bo),po==null||po(Bo)}Qi?(0,Fr.flushSync)(ea):ea()},el=xe(C.useState(Fi),2),tl=el[0],Ti=el[1],Kr=C.useRef(!1),jo=xe(C.useMemo(function(){return Lt!=="inline"&&Lt!=="vertical"||!$t?[Lt,!1]:["vertical",$t]},[Lt,$t]),2),ei=jo[0],oi=jo[1],Oi=ei==="inline",is=xe(C.useState(ei),2),bs=is[0],yi=is[1],Ai=xe(C.useState(oi),2),Li=Ai[0],Oa=Ai[1];C.useEffect(function(){yi(ei),Oa(oi),Kr.current&&(Oi?Vo(tl):$s($0))},[ei,oi]);var ma=xe(C.useState(0),2),Wa=ma[0],nl=ma[1],Aa=Wa>=li.length-1||bs!=="horizontal"||kn;C.useEffect(function(){Oi&&Ti(Fi)},[Fi]),C.useEffect(function(){return Kr.current=!0,function(){Kr.current=!1}},[]);var hs=dY(),Hc=hs.registerPath,va=hs.unregisterPath,bf=hs.refreshOverflowKeys,js=hs.isSubPathKey,ka=hs.getKeyPath,yf=hs.getKeys,Fc=hs.getSubPathKeys,xf=C.useMemo(function(){return{registerPath:Hc,unregisterPath:va}},[Hc,va]),k2=C.useMemo(function(){return{isSubPathKey:js}},[js]);C.useEffect(function(){bf(Aa?$0:li.slice(Wa+1).map(function(Bo){return Bo.key}))},[Wa,Aa]);var Bp=xe(Tl(Xt||Ht&&((M=li[0])===null||M===void 0?void 0:M.key),{value:Xt}),2),ah=Bp[0],Pd=Bp[1],z0=b2(function(Bo){Pd(Bo)}),_2=b2(function(){Pd(void 0)});(0,C.useImperativeHandle)(P,function(){return{list:ri.current,focus:function(Bo){var Qi,ea,Rs,rl,$l=ah??((Qi=li.find(function(dh){return!dh.props.disabled}))===null||Qi===void 0?void 0:Qi.key);$l&&((ea=ri.current)===null||ea===void 0||(Rs=ea.querySelector("li[data-menu-id='".concat(Yw(vs,$l),"']")))===null||Rs===void 0||(rl=Rs.focus)===null||rl===void 0||rl.call(Rs,Bo))}}});var Zc=Tl(_r||[],{value:xr,postState:function(Bo){return Array.isArray(Bo)?Bo:Bo==null?$0:[Bo]}}),sh=xe(Zc,2),lh=sh[0],Uc=sh[1],dc=b2(function(Bo){Zr==null||Zr(Xy(Bo)),function(Qi){if(fn){var ea,Rs=Qi.key,rl=lh.includes(Rs);ea=rr?rl?lh.filter(function(dh){return dh!==Rs}):[].concat(Go(lh),[Rs]):[Rs],Uc(ea);var $l=Ot(Ot({},Qi),{},{selectedKeys:ea});rl?Or==null||Or($l):$r==null||$r($l)}!rr&&Fi.length&&bs!=="inline"&&$s($0)}(Bo)}),ch=b2(function(Bo,Qi){var ea=Fi.filter(function(rl){return rl!==Bo});if(Qi)ea.push(Bo);else if(bs!=="inline"){var Rs=Fc(Bo);ea=ea.filter(function(rl){return!Rs.has(rl)})}vi(Fi,ea,!0)||$s(ea,!0)}),wf=cY(bs,ah,Si,vs,ri,yf,ka,Pd,function(Bo,Qi){var ea=Qi??!Fi.includes(Bo);ch(Bo,ea)},yo);C.useEffect(function(){ga(!0)},[]);var Wc=C.useMemo(function(){return{_internalRenderMenuItem:_o,_internalRenderSubMenuItem:Xr}},[_o,Xr]),E2=bs!=="horizontal"||kn?li:li.map(function(Bo,Qi){return C.createElement(g2,{key:Bo.key,overflowDisabled:Qi>Wa},Bo)}),Hp=C.createElement(p2,(0,X.Z)({id:At,ref:ri,prefixCls:"".concat(Ae,"-overflow"),component:"ul",itemComponent:qy,className:Se()(Ae,"".concat(Ae,"-root"),"".concat(Ae,"-").concat(bs),it,(N={},Me(N,"".concat(Ae,"-inline-collapsed"),Li),Me(N,"".concat(Ae,"-rtl"),Si),N),Ze),dir:It,style:Ge,role:"menu",tabIndex:at,data:E2,renderRawItem:function(Bo){return Bo},renderRawRest:function(Bo){var Qi=Bo.length,ea=Qi?li.slice(-Qi):null;return C.createElement(Jy,{eventKey:e7,title:Fo,disabled:Aa,internalPopupClose:Qi===0,popupClassName:ni},ea)},maxCount:bs!=="horizontal"||kn?p2.INVALIDATE:p2.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Bo){nl(Bo)},onKeyDown:wf},Ii));return C.createElement(Gw.Provider,{value:Wc},C.createElement(ZP.Provider,{value:vs},C.createElement(g2,{prefixCls:Ae,rootClassName:Ze,mode:bs,openKeys:Fi,rtl:Si,disabled:hn,motion:Qo?Br:null,defaultMotions:Qo?ro:null,activeKey:ah,onActive:z0,onInactive:_2,selectedKeys:lh,inlineIndent:Jr,subMenuOpenDelay:Zn,subMenuCloseDelay:er,forceSubMenuRender:mr,builtinPlacements:To,triggerSubMenuAction:Ao,getPopupContainer:jr,itemIcon:No,expandIcon:Uo,onItemClick:dc,onOpenChange:ch},C.createElement(KP.Provider,{value:k2},Hp),C.createElement("div",{style:{display:"none"},"aria-hidden":!0},C.createElement(WP.Provider,{value:xf},li)))))}),y2=jY;y2.Item=qy,y2.SubMenu=Jy,y2.ItemGroup=Qy,y2.Divider=n7;var RY=y2;const sM=C.createContext({});var DY=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M},lM=x=>{const{prefixCls:P,className:M,dashed:N}=x,G=DY(x,["prefixCls","className","dashed"]),{getPrefixCls:Ee}=C.useContext(Do),Ae=Ee("menu",P),Ze=Se()({[`${Ae}-item-divider-dashed`]:!!N},M);return C.createElement(n7,Object.assign({className:Ze},G))},j0={shiftX:64,adjustY:1},R0={adjustX:1,shiftY:!0},Bc=[0,0],NY={left:{points:["cr","cl"],overflow:R0,offset:[-4,0],targetOffset:Bc},right:{points:["cl","cr"],overflow:R0,offset:[4,0],targetOffset:Bc},top:{points:["bc","tc"],overflow:j0,offset:[0,-4],targetOffset:Bc},bottom:{points:["tc","bc"],overflow:j0,offset:[0,4],targetOffset:Bc},topLeft:{points:["bl","tl"],overflow:j0,offset:[0,-4],targetOffset:Bc},leftTop:{points:["tr","tl"],overflow:R0,offset:[-4,0],targetOffset:Bc},topRight:{points:["br","tr"],overflow:j0,offset:[0,-4],targetOffset:Bc},rightTop:{points:["tl","tr"],overflow:R0,offset:[4,0],targetOffset:Bc},bottomRight:{points:["tr","br"],overflow:j0,offset:[0,4],targetOffset:Bc},rightBottom:{points:["bl","br"],overflow:R0,offset:[4,0],targetOffset:Bc},bottomLeft:{points:["tl","bl"],overflow:j0,offset:[0,4],targetOffset:Bc},leftBottom:{points:["br","bl"],overflow:R0,offset:[-4,0],targetOffset:Bc}};function cM(x){var P=x.children,M=x.prefixCls,N=x.id,G=x.overlayInnerStyle,Ee=x.className,Ae=x.style;return C.createElement("div",{className:Se()("".concat(M,"-content"),Ee),style:Ae},C.createElement("div",{className:"".concat(M,"-inner"),id:N,role:"tooltip",style:G},typeof P=="function"?P():P))}var zY=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],BY=function(x,P){var M=x.overlayClassName,N=x.trigger,G=N===void 0?["hover"]:N,Ee=x.mouseEnterDelay,Ae=Ee===void 0?0:Ee,Ze=x.mouseLeaveDelay,Ge=Ze===void 0?.1:Ze,it=x.overlayStyle,mt=x.prefixCls,at=mt===void 0?"rc-tooltip":mt,bt=x.children,gt=x.onVisibleChange,It=x.afterVisibleChange,At=x.transitionName,jt=x.animation,Lt=x.motion,$t=x.placement,hn=$t===void 0?"right":$t,kn=x.align,On=kn===void 0?{}:kn,Zn=x.destroyTooltipOnHide,an=Zn!==void 0&&Zn,er=x.defaultVisible,mr=x.getTooltipContainer,Gn=x.overlayInnerStyle,Qt=(x.arrowContent,x.overlay),Xt=x.id,Ht=x.showArrow,Tn=Ht===void 0||Ht,fn=Re(x,zY),Vn=(0,C.useRef)(null);(0,C.useImperativeHandle)(P,function(){return Vn.current});var rr=Ot({},fn);return"visible"in x&&(rr.popupVisible=x.visible),C.createElement(qr,(0,X.Z)({popupClassName:M,prefixCls:at,popup:function(){return C.createElement(cM,{key:"content",prefixCls:at,id:Xt,overlayInnerStyle:Gn},Qt)},action:G,builtinPlacements:NY,popupPlacement:hn,ref:Vn,popupAlign:On,getPopupContainer:mr,onPopupVisibleChange:gt,afterPopupVisibleChange:It,popupTransitionName:At,popupAnimation:jt,popupMotion:Lt,defaultPopupVisible:er,autoDestroy:an,mouseLeaveDelay:Ge,popupStyle:it,mouseEnterDelay:Ae,arrow:Tn},rr),bt)},HY=(0,C.forwardRef)(BY);const o7=()=>({height:0,opacity:0}),dM=x=>{const{scrollHeight:P}=x;return{height:P,opacity:1}},FY=x=>({height:x?x.offsetHeight:0}),i7=(x,P)=>(P==null?void 0:P.deadline)===!0||P.propertyName==="height",ZY=(x,P,M)=>M!==void 0?M:`${x}-${P}`;var UY=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:o7,onEnterStart:o7,onAppearActive:dM,onEnterActive:dM,onLeaveStart:FY,onLeaveActive:o7,onAppearEnd:i7,onEnterEnd:i7,onLeaveEnd:i7,motionDeadline:500}},uM=x=>{const P=I().useContext(Fy);return I().useMemo(()=>x?typeof x=="string"?x??P:x instanceof Function?x(P):P:P,[x,P])};const hM=typeof CSSINJS_STATISTIC<"u";let a7=!0;function pu(){for(var x=arguments.length,P=new Array(x),M=0;M<x;M++)P[M]=arguments[M];if(!hM)return Object.assign.apply(Object,[{}].concat(P));a7=!1;const N={};return P.forEach(G=>{Object.keys(G).forEach(Ee=>{Object.defineProperty(N,Ee,{configurable:!0,enumerable:!0,get:()=>G[Ee]})})}),a7=!0,N}function WY(){}function D0(x,P,M,N){return G=>{const[Ee,Ae,Ze]=T0(),{getPrefixCls:Ge,iconPrefixCls:it,csp:mt}=(0,C.useContext)(Do),at=Ge(),bt={theme:Ee,token:Ae,hashId:Ze,nonce:()=>mt==null?void 0:mt.nonce,clientOnly:N==null?void 0:N.clientOnly,order:-999};return Bw(Object.assign(Object.assign({},bt),{clientOnly:!1,path:["Shared",at]}),()=>[{"&":NK(Ae)}]),[Bw(Object.assign(Object.assign({},bt),{path:[x,G,it]}),()=>{const{token:gt,flush:It}=function(kn){let On,Zn=kn,an=WY;return hM&&(On=new Set,Zn=new Proxy(kn,{get:(er,mr)=>(a7&&On.add(mr),er[mr])}),an=(er,mr)=>{Array.from(On)}),{token:Zn,keys:On,flush:an}}(Ae),At=Object.assign({},Ae[x]);if(N!=null&&N.deprecatedTokens){const{deprecatedTokens:kn}=N;kn.forEach(On=>{let[Zn,an]=On;var er;(At!=null&&At[Zn]||At!=null&&At[an])&&((er=At[an])!==null&&er!==void 0||(At[an]=At==null?void 0:At[Zn]))})}const jt=typeof M=="function"?M(pu(gt,At??{})):M,Lt=Object.assign(Object.assign({},jt),At),$t=pu(gt,{componentCls:`.${G}`,prefixCls:G,iconCls:`.${it}`,antCls:`.${at}`},Lt),hn=P($t,{hashId:Ze,prefixCls:G,rootPrefixCls:at,iconPrefixCls:it,overrideComponentToken:At});return It(x,Lt),[(N==null?void 0:N.resetStyle)===!1?null:zK(Ae,G),hn]}),Ze]}}var VY=x=>{const{componentCls:P}=x;return{[P]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};const KY=x=>{const{componentCls:P}=x;return{[P]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${P}-item:empty`]:{display:"none"}}}};var fM=D0("Space",x=>[KY(x),VY(x)],()=>({}),{resetStyle:!1}),pM=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const e5=C.createContext(null),gM=(x,P)=>{const M=C.useContext(e5),N=C.useMemo(()=>{if(!M)return"";const{compactDirection:G,isFirstItem:Ee,isLastItem:Ae}=M,Ze=G==="vertical"?"-vertical-":"-";return Se()(`${x}-compact${Ze}item`,{[`${x}-compact${Ze}first-item`]:Ee,[`${x}-compact${Ze}last-item`]:Ae,[`${x}-compact${Ze}item-rtl`]:P==="rtl"})},[x,P,M]);return{compactSize:M==null?void 0:M.compactSize,compactDirection:M==null?void 0:M.compactDirection,compactItemClassnames:N}},mM=x=>{let{children:P}=x;return C.createElement(e5.Provider,{value:null},P)},YY=x=>{var{children:P}=x,M=pM(x,["children"]);return C.createElement(e5.Provider,{value:M},P)};var GY=x=>{const{getPrefixCls:P,direction:M}=C.useContext(Do),{size:N,direction:G,block:Ee,prefixCls:Ae,className:Ze,rootClassName:Ge,children:it}=x,mt=pM(x,["size","direction","block","prefixCls","className","rootClassName","children"]),at=uM(hn=>N??hn),bt=P("space-compact",Ae),[gt,It]=fM(bt),At=Se()(bt,It,{[`${bt}-rtl`]:M==="rtl",[`${bt}-block`]:Ee,[`${bt}-vertical`]:G==="vertical"},Ze,Ge),jt=C.useContext(e5),Lt=wi(it),$t=C.useMemo(()=>Lt.map((hn,kn)=>{const On=hn&&hn.key||`${bt}-item-${kn}`;return C.createElement(YY,{key:On,compactSize:at,compactDirection:G,isFirstItem:kn===0&&(!jt||(jt==null?void 0:jt.isFirstItem)),isLastItem:kn===Lt.length-1&&(!jt||(jt==null?void 0:jt.isLastItem))},hn)}),[N,Lt,jt]);return Lt.length===0?null:gt(C.createElement("div",Object.assign({className:At},mt),$t))},XY=x=>{const P=x!=null&&x.algorithm?kd(x.algorithm):kd(u2),M=Object.assign(Object.assign({},c2),x==null?void 0:x.token);return aP(M,{override:x==null?void 0:x.token},P,TP)},qY=(x,P)=>{const M=P??u2(x),N=M.fontSizeSM,G=M.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},M),function(Ee){const{sizeUnit:Ae,sizeStep:Ze}=Ee,Ge=Ze-2;return{sizeXXL:Ae*(Ge+10),sizeXL:Ae*(Ge+6),sizeLG:Ae*(Ge+2),sizeMD:Ae*(Ge+2),sizeMS:Ae*(Ge+1),size:Ae*Ge,sizeSM:Ae*Ge,sizeXS:Ae*(Ge-1),sizeXXS:Ae*(Ge-1)}}(P??x)),EP(N)),{controlHeight:G}),kP(Object.assign(Object.assign({},M),{controlHeight:G})))};const vf=(x,P)=>new Ls(x).setAlpha(P).toRgbString(),N0=(x,P)=>new Ls(x).lighten(P).toHexString(),JY=x=>{const P=un(x,{theme:"dark"});return{1:P[0],2:P[1],3:P[2],4:P[3],5:P[6],6:P[5],7:P[4],8:P[6],9:P[5],10:P[4]}},QY=(x,P)=>{const M=x||"#000",N=P||"#fff";return{colorBgBase:M,colorTextBase:N,colorText:vf(N,.85),colorTextSecondary:vf(N,.65),colorTextTertiary:vf(N,.45),colorTextQuaternary:vf(N,.25),colorFill:vf(N,.18),colorFillSecondary:vf(N,.12),colorFillTertiary:vf(N,.08),colorFillQuaternary:vf(N,.04),colorBgElevated:N0(M,12),colorBgContainer:N0(M,8),colorBgLayout:N0(M,0),colorBgSpotlight:N0(M,26),colorBorder:N0(M,26),colorBorderSecondary:N0(M,19)}};var eG=(x,P)=>{const M=Object.keys(Hw).map(G=>{const Ee=un(x[G],{theme:"dark"});return new Array(10).fill(1).reduce((Ae,Ze,Ge)=>(Ae[`${G}-${Ge+1}`]=Ee[Ge],Ae[`${G}${Ge+1}`]=Ee[Ge],Ae),{})}).reduce((G,Ee)=>G=Object.assign(Object.assign({},G),Ee),{}),N=P??u2(x);return Object.assign(Object.assign(Object.assign({},N),M),_P(x,{generateColorPalettes:JY,generateNeutralColorPalettes:QY}))},vM={defaultConfig:Hy,defaultSeed:Hy.token,useToken:function(){const[x,P,M]=T0();return{theme:x,token:P,hashId:M}},defaultAlgorithm:u2,darkAlgorithm:eG,compactAlgorithm:qY,getDesignToken:XY};const tG=x=>({animationDuration:x,animationFillMode:"both"}),nG=x=>({animationDuration:x,animationFillMode:"both"}),s7=function(x,P,M,N){const Ee=arguments.length>4&&arguments[4]!==void 0&&arguments[4]?"&":"";return{[`
      ${Ee}${x}-enter,
      ${Ee}${x}-appear
    `]:Object.assign(Object.assign({},tG(N)),{animationPlayState:"paused"}),[`${Ee}${x}-leave`]:Object.assign(Object.assign({},nG(N)),{animationPlayState:"paused"}),[`
      ${Ee}${x}-enter${x}-enter-active,
      ${Ee}${x}-appear${x}-appear-active
    `]:{animationName:P,animationPlayState:"running"},[`${Ee}${x}-leave${x}-leave-active`]:{animationName:M,animationPlayState:"running",pointerEvents:"none"}}},rG=new Ki("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),oG=new Ki("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),bM=new Ki("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),yM=new Ki("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),iG=new Ki("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),aG=new Ki("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),sG={zoom:{inKeyframes:rG,outKeyframes:oG},"zoom-big":{inKeyframes:bM,outKeyframes:yM},"zoom-big-fast":{inKeyframes:bM,outKeyframes:yM},"zoom-left":{inKeyframes:new Ki("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new Ki("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new Ki("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new Ki("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:iG,outKeyframes:aG},"zoom-down":{inKeyframes:new Ki("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new Ki("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},l7=(x,P)=>{const{antCls:M}=x,N=`${M}-${P}`,{inKeyframes:G,outKeyframes:Ee}=sG[P];return[s7(N,G,Ee,P==="zoom-big-fast"?x.motionDurationFast:x.motionDurationMid),{[`
        ${N}-enter,
        ${N}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:x.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${N}-leave`]:{animationTimingFunction:x.motionEaseInOutCirc}}]},t5=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function lG(x,P){return t5.reduce((M,N)=>{const G=x[`${N}1`],Ee=x[`${N}3`],Ae=x[`${N}6`],Ze=x[`${N}7`];return Object.assign(Object.assign({},M),P(N,{lightColor:G,lightBorderColor:Ee,darkColor:Ae,textColor:Ze}))},{})}const cG=x=>{const{componentCls:P,tooltipMaxWidth:M,tooltipColor:N,tooltipBg:G,tooltipBorderRadius:Ee,zIndexPopup:Ae,controlHeight:Ze,boxShadowSecondary:Ge,paddingSM:it,paddingXS:mt,tooltipRadiusOuter:at}=x;return[{[P]:Object.assign(Object.assign(Object.assign(Object.assign({},Ww(x)),{position:"absolute",zIndex:Ae,display:"block",width:"max-content",maxWidth:M,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":G,[`${P}-inner`]:{minWidth:Ze,minHeight:Ze,padding:`${it/2}px ${mt}px`,color:N,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:G,borderRadius:Ee,boxShadow:Ge,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${P}-inner`]:{borderRadius:Math.min(Ee,8)}},[`${P}-content`]:{position:"relative"}}),lG(x,(bt,gt)=>{let{darkColor:It}=gt;return{[`&${P}-${bt}`]:{[`${P}-inner`]:{backgroundColor:It},[`${P}-arrow`]:{"--antd-arrow-background-color":It}}}})),{"&-rtl":{direction:"rtl"}})},jP(pu(x,{borderRadiusOuter:at}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:Ee,limitVerticalRadius:!0}),{[`${P}-pure`]:{position:"relative",maxWidth:"none",margin:x.sizePopupArrow}}]};var xM=(x,P)=>D0("Tooltip",N=>{if(P===!1)return[];const{borderRadius:G,colorTextLightSolid:Ee,colorBgDefault:Ae,borderRadiusOuter:Ze}=N,Ge=pu(N,{tooltipMaxWidth:250,tooltipColor:Ee,tooltipBorderRadius:G,tooltipBg:Ae,tooltipRadiusOuter:Ze>4?4:Ze});return[cG(Ge),l7(N,"zoom-big-fast")]},N=>{let{zIndexPopupBase:G,colorBgSpotlight:Ee}=N;return{zIndexPopup:G+70,colorBgDefault:Ee}},{resetStyle:!1})(x);const dG=t5.map(x=>`${x}-inverse`);function wM(x,P){const M=function(Ae){return arguments.length>1&&arguments[1]!==void 0&&!arguments[1]?t5.includes(Ae):[].concat(Go(dG),Go(t5)).includes(Ae)}(P),N=Se()({[`${x}-${P}`]:P&&M}),G={},Ee={};return P&&!M&&(G.background=P,Ee["--antd-arrow-background-color"]=P),{className:N,overlayStyle:G,arrowStyle:Ee}}var uG=x=>{const{prefixCls:P,className:M,placement:N="top",title:G,color:Ee,overlayInnerStyle:Ae}=x,{getPrefixCls:Ze}=C.useContext(Do),Ge=Ze("tooltip",P),[it,mt]=xM(Ge,!0),at=wM(Ge,Ee),bt=at.arrowStyle,gt=Object.assign(Object.assign({},Ae),at.overlayStyle),It=Se()(mt,Ge,`${Ge}-pure`,`${Ge}-placement-${N}`,M,at.className);return it(C.createElement("div",{className:It,style:bt},C.createElement("div",{className:`${Ge}-arrow`}),C.createElement(cM,Object.assign({},x,{className:mt,prefixCls:Ge,overlayInnerStyle:gt}),G)))},hG=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const{useToken:fG}=vM;function pG(x,P){const M=x.type;if((M.__ANT_BUTTON===!0||x.type==="button")&&x.props.disabled||M.__ANT_SWITCH===!0&&(x.props.disabled||x.props.loading)||M.__ANT_RADIO===!0&&x.props.disabled){const{picked:N,omitted:G}=((Ze,Ge)=>{const it={},mt=Object.assign({},Ze);return Ge.forEach(at=>{Ze&&at in Ze&&(it[at]=Ze[at],delete mt[at])}),{picked:it,omitted:mt}})(x.props.style,["position","left","right","top","bottom","float","display","zIndex"]),Ee=Object.assign(Object.assign({display:"inline-block"},N),{cursor:"not-allowed",width:x.props.block?"100%":void 0}),Ae=mf(x,{style:Object.assign(Object.assign({},G),{pointerEvents:"none"}),className:null});return C.createElement("span",{style:Ee,className:Se()(x.props.className,`${P}-disabled-compatible-wrapper`)},Ae)}return x}const CM=C.forwardRef((x,P)=>{var M,N;const{prefixCls:G,openClassName:Ee,getTooltipContainer:Ae,overlayClassName:Ze,color:Ge,overlayInnerStyle:it,children:mt,afterOpenChange:at,afterVisibleChange:bt,destroyTooltipOnHide:gt,arrow:It=!0,title:At,overlay:jt,builtinPlacements:Lt,arrowPointAtCenter:$t=!1,autoAdjustOverflow:hn=!0}=x,kn=!!It,{token:On}=fG(),{getPopupContainer:Zn,getPrefixCls:an,direction:er}=C.useContext(Do),mr=C.useRef(null),Gn=()=>{var yo;(yo=mr.current)===null||yo===void 0||yo.forceAlign()};C.useImperativeHandle(P,()=>({forceAlign:Gn,forcePopupAlign:()=>{Gn()}}));const[Qt,Xt]=Tl(!1,{value:(M=x.open)!==null&&M!==void 0?M:x.visible,defaultValue:(N=x.defaultOpen)!==null&&N!==void 0?N:x.defaultVisible}),Ht=!At&&!jt&&At!==0,Tn=C.useMemo(()=>{var yo,_o;let Xr=$t;return typeof It=="object"&&(Xr=(_o=(yo=It.pointAtCenter)!==null&&yo!==void 0?yo:It.arrowPointAtCenter)!==null&&_o!==void 0?_o:$t),Lt||DP({arrowPointAtCenter:Xr,autoAdjustOverflow:hn,arrowWidth:kn?On.sizePopupArrow:0,borderRadius:On.borderRadius,offset:On.marginXXS,visibleFirst:!0})},[$t,It,Lt,On]),fn=C.useMemo(()=>At===0?At:jt||At||"",[jt,At]),Vn=C.createElement(mM,null,typeof fn=="function"?fn():fn),{getPopupContainer:rr,placement:_r="top",mouseEnterDelay:xr=.1,mouseLeaveDelay:$r=.1,overlayStyle:Or,rootClassName:zr}=x,Jr=hG(x,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Br=an("tooltip",G),ro=an(),Qr=x["data-popover-inject"];let Ao=Qt;"open"in x||"visible"in x||!Ht||(Ao=!1);const To=pG(gf(mt)&&!NP(mt)?mt:C.createElement("span",null,mt),Br),No=To.props,Uo=No.className&&typeof No.className!="string"?No.className:Se()(No.className,Ee||`${Br}-open`),[zo,Fo]=xM(Br,!Qr),ni=wM(Br,Ge),jr=ni.arrowStyle,Zr=Object.assign(Object.assign({},it),ni.overlayStyle),po=Se()(Ze,{[`${Br}-rtl`]:er==="rtl"},ni.className,zr,Fo);return zo(C.createElement(HY,Object.assign({},Jr,{showArrow:kn,placement:_r,mouseEnterDelay:xr,mouseLeaveDelay:$r,prefixCls:Br,overlayClassName:po,overlayStyle:Object.assign(Object.assign({},jr),Or),getTooltipContainer:rr||Ae||Zn,ref:mr,builtinPlacements:Tn,overlay:Vn,visible:Ao,onVisibleChange:yo=>{var _o,Xr;Xt(!Ht&&yo),Ht||((_o=x.onOpenChange)===null||_o===void 0||_o.call(x,yo),(Xr=x.onVisibleChange)===null||Xr===void 0||Xr.call(x,yo))},afterVisibleChange:at??bt,overlayInnerStyle:Zr,arrowContent:C.createElement("span",{className:`${Br}-arrow-content`}),motion:{motionName:ZY(ro,"zoom-big-fast",x.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!gt}),Ao?mf(To,{className:Uo}):To))});CM._InternalPanelDoNotUseOrYouWillBeFired=uG;var gG=CM,n5=(0,C.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),SM=x=>{var P;const{className:M,children:N,icon:G,title:Ee,danger:Ae}=x,{prefixCls:Ze,firstLevel:Ge,direction:it,disableMenuItemTitleTooltip:mt,inlineCollapsed:at}=C.useContext(n5),{siderCollapsed:bt}=C.useContext(sM);let gt=Ee;Ee===void 0?gt=Ge?N:"":Ee===!1&&(gt="");const It={title:gt};bt||at||(It.title=null,It.open=!1);const At=wi(N).length;let jt=C.createElement(qy,Object.assign({},Jo(x,["title","icon","danger"]),{className:Se()({[`${Ze}-item-danger`]:Ae,[`${Ze}-item-only-child`]:(G?At+1:At)===1},M),title:typeof Ee=="string"?Ee:void 0}),mf(G,{className:Se()(gf(G)?(P=G.props)===null||P===void 0?void 0:P.className:"",`${Ze}-item-icon`)}),(Lt=>{const $t=C.createElement("span",{className:`${Ze}-title-content`},N);return(!G||gf(N)&&N.type==="span")&&N&&Lt&&Ge&&typeof N=="string"?C.createElement("div",{className:`${Ze}-inline-collapsed-noicon`},N.charAt(0)):$t})(at));return mt||(jt=C.createElement(gG,Object.assign({},It,{placement:it==="rtl"?"left":"right",overlayClassName:`${Ze}-inline-collapsed-tooltip`}),jt)),jt},kM=x=>{var P;const{popupClassName:M,icon:N,title:G,theme:Ee}=x,Ae=C.useContext(n5),{prefixCls:Ze,inlineCollapsed:Ge,theme:it}=Ae,mt=L0();let at;if(N){const gt=gf(G)&&G.type==="span";at=C.createElement(C.Fragment,null,mf(N,{className:Se()(gf(N)?(P=N.props)===null||P===void 0?void 0:P.className:"",`${Ze}-item-icon`)}),gt?G:C.createElement("span",{className:`${Ze}-title-content`},G))}else at=Ge&&!mt.length&&G&&typeof G=="string"?C.createElement("div",{className:`${Ze}-inline-collapsed-noicon`},G.charAt(0)):C.createElement("span",{className:`${Ze}-title-content`},G);const bt=C.useMemo(()=>Object.assign(Object.assign({},Ae),{firstLevel:!1}),[Ae]);return C.createElement(n5.Provider,{value:bt},C.createElement(Jy,Object.assign({},Jo(x,["icon"]),{title:at,popupClassName:Se()(Ze,M,`${Ze}-${Ee||it}`)})))},mG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},vG=function(x,P){return C.createElement(ir,(0,X.Z)({},x,{ref:P,icon:mG}))},_M=C.forwardRef(vG),bG=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const c7=C.createContext(null),yG=C.forwardRef((x,P)=>{const{children:M}=x,N=bG(x,["children"]),G=C.useContext(c7),Ee=C.useMemo(()=>Object.assign(Object.assign({},G),N),[G,N.prefixCls,N.mode,N.selectable]);return C.createElement(c7.Provider,{value:Ee},C.createElement(mM,null,C.cloneElement(M,{ref:P})))});var EM=c7,xG=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};function d7(x){return(x||[]).map((P,M)=>{if(P&&typeof P=="object"){const N=P,{label:G,children:Ee,key:Ae,type:Ze}=N,Ge=xG(N,["label","children","key","type"]),it=Ae??`tmp-${M}`;return Ee||Ze==="group"?Ze==="group"?C.createElement(Qy,Object.assign({key:it},Ge,{title:G}),d7(Ee)):C.createElement(kM,Object.assign({key:it},Ge,{title:G}),d7(Ee)):Ze==="divider"?C.createElement(lM,Object.assign({key:it},Ge)):C.createElement(SM,Object.assign({key:it},Ge),G)}return null}).filter(P=>P)}function wG(x){return C.useMemo(()=>x&&d7(x),[x])}var CG=x=>({[x.componentCls]:{[`${x.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${x.motionDurationMid} ${x.motionEaseInOut},
        opacity ${x.motionDurationMid} ${x.motionEaseInOut} !important`}},[`${x.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${x.motionDurationMid} ${x.motionEaseInOut},
        opacity ${x.motionDurationMid} ${x.motionEaseInOut} !important`}}});const PM=new Ki("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),MM=new Ki("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),IM=new Ki("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),TM=new Ki("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),SG=new Ki("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),kG=new Ki("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),_G=new Ki("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),EG=new Ki("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),PG={"slide-up":{inKeyframes:PM,outKeyframes:MM},"slide-down":{inKeyframes:IM,outKeyframes:TM},"slide-left":{inKeyframes:SG,outKeyframes:kG},"slide-right":{inKeyframes:_G,outKeyframes:EG}},r5=(x,P)=>{const{antCls:M}=x,N=`${M}-${P}`,{inKeyframes:G,outKeyframes:Ee}=PG[P];return[s7(N,G,Ee,x.motionDurationMid),{[`
      ${N}-enter,
      ${N}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:x.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${N}-leave`]:{animationTimingFunction:x.motionEaseInQuint}}]};var MG=x=>{const{componentCls:P,motionDurationSlow:M,horizontalLineHeight:N,colorSplit:G,lineWidth:Ee,lineType:Ae,itemPaddingInline:Ze}=x;return{[`${P}-horizontal`]:{lineHeight:N,border:0,borderBottom:`${Ee}px ${Ae} ${G}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${P}-item, ${P}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:Ze},[`> ${P}-item:hover,
        > ${P}-item-active,
        > ${P}-submenu ${P}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${P}-item, ${P}-submenu-title`]:{transition:[`border-color ${M}`,`background ${M}`].join(",")},[`${P}-submenu-arrow`]:{display:"none"}}}},IG=x=>{let{componentCls:P,menuArrowOffset:M}=x;return{[`${P}-rtl`]:{direction:"rtl"},[`${P}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${P}-rtl${P}-vertical,
    ${P}-submenu-rtl ${P}-vertical`]:{[`${P}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(-${M})`},"&::after":{transform:`rotate(45deg) translateY(${M})`}}}}};const OM=x=>Object.assign({},LP(x));var AM=(x,P)=>{const{componentCls:M,itemColor:N,itemSelectedColor:G,groupTitleColor:Ee,itemBg:Ae,subMenuItemBg:Ze,itemSelectedBg:Ge,activeBarHeight:it,activeBarWidth:mt,activeBarBorderWidth:at,motionDurationSlow:bt,motionEaseInOut:gt,motionEaseOut:It,itemPaddingInline:At,motionDurationMid:jt,itemHoverColor:Lt,lineType:$t,colorSplit:hn,itemDisabledColor:kn,dangerItemColor:On,dangerItemHoverColor:Zn,dangerItemSelectedColor:an,dangerItemActiveBg:er,dangerItemSelectedBg:mr,itemHoverBg:Gn,itemActiveBg:Qt,menuSubMenuBg:Xt,horizontalItemSelectedColor:Ht,horizontalItemSelectedBg:Tn,horizontalItemBorderRadius:fn,horizontalItemHoverBg:Vn,popupBg:rr}=x;return{[`${M}-${P}, ${M}-${P} > ${M}`]:{color:N,background:Ae,[`&${M}-root:focus-visible`]:Object.assign({},OM(x)),[`${M}-item-group-title`]:{color:Ee},[`${M}-submenu-selected`]:{[`> ${M}-submenu-title`]:{color:G}},[`${M}-item-disabled, ${M}-submenu-disabled`]:{color:`${kn} !important`},[`${M}-item:not(${M}-item-selected):not(${M}-submenu-selected)`]:{[`&:hover, > ${M}-submenu-title:hover`]:{color:Lt}},[`&:not(${M}-horizontal)`]:{[`${M}-item:not(${M}-item-selected)`]:{"&:hover":{backgroundColor:Gn},"&:active":{backgroundColor:Qt}},[`${M}-submenu-title`]:{"&:hover":{backgroundColor:Gn},"&:active":{backgroundColor:Qt}}},[`${M}-item-danger`]:{color:On,[`&${M}-item:hover`]:{[`&:not(${M}-item-selected):not(${M}-submenu-selected)`]:{color:Zn}},[`&${M}-item:active`]:{background:er}},[`${M}-item a`]:{"&, &:hover":{color:"inherit"}},[`${M}-item-selected`]:{color:G,[`&${M}-item-danger`]:{color:an},"a, a:hover":{color:"inherit"}},[`& ${M}-item-selected`]:{backgroundColor:Ge,[`&${M}-item-danger`]:{backgroundColor:mr}},[`${M}-item, ${M}-submenu-title`]:{[`&:not(${M}-item-disabled):focus-visible`]:Object.assign({},OM(x))},[`&${M}-submenu > ${M}`]:{backgroundColor:Xt},[`&${M}-popup > ${M}`]:{backgroundColor:rr},[`&${M}-horizontal`]:Object.assign(Object.assign({},P==="dark"?{borderBottom:0}:{}),{[`> ${M}-item, > ${M}-submenu`]:{top:at,marginTop:-at,marginBottom:0,borderRadius:fn,"&::after":{position:"absolute",insetInline:At,bottom:0,borderBottom:`${it}px solid transparent`,transition:`border-color ${bt} ${gt}`,content:'""'},"&:hover, &-active, &-open":{background:Vn,"&::after":{borderBottomWidth:it,borderBottomColor:Ht}},"&-selected":{color:Ht,backgroundColor:Tn,"&:hover":{backgroundColor:Tn},"&::after":{borderBottomWidth:it,borderBottomColor:Ht}}}}),[`&${M}-root`]:{[`&${M}-inline, &${M}-vertical`]:{borderInlineEnd:`${at}px ${$t} ${hn}`}},[`&${M}-inline`]:{[`${M}-sub${M}-inline`]:{background:Ze},[`${M}-item, ${M}-submenu-title`]:at&&mt?{width:`calc(100% + ${at}px)`}:{},[`${M}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${mt}px solid ${G}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${jt} ${It}`,`opacity ${jt} ${It}`].join(","),content:'""'},[`&${M}-item-danger`]:{"&::after":{borderInlineEndColor:an}}},[`${M}-selected, ${M}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${jt} ${gt}`,`opacity ${jt} ${gt}`].join(",")}}}}}};const LM=x=>{const{componentCls:P,itemHeight:M,itemMarginInline:N,padding:G,menuArrowSize:Ee,marginXS:Ae,itemMarginBlock:Ze}=x;return{[`${P}-item`]:{position:"relative",overflow:"hidden"},[`${P}-item, ${P}-submenu-title`]:{height:M,lineHeight:`${M}px`,paddingInline:G,overflow:"hidden",textOverflow:"ellipsis",marginInline:N,marginBlock:Ze,width:`calc(100% - ${2*N}px)`},[`> ${P}-item,
            > ${P}-submenu > ${P}-submenu-title`]:{height:M,lineHeight:`${M}px`},[`${P}-item-group-list ${P}-submenu-title,
            ${P}-submenu-title`]:{paddingInlineEnd:G+Ee+Ae}}};var TG=x=>{const{componentCls:P,iconCls:M,itemHeight:N,colorTextLightSolid:G,dropdownWidth:Ee,controlHeightLG:Ae,motionDurationMid:Ze,motionEaseOut:Ge,paddingXL:it,itemMarginInline:mt,fontSizeLG:at,motionDurationSlow:bt,paddingXS:gt,boxShadowSecondary:It,collapsedWidth:At,collapsedIconSize:jt}=x,Lt={height:N,lineHeight:`${N}px`,listStylePosition:"inside",listStyleType:"disc"};return[{[P]:{"&-inline, &-vertical":Object.assign({[`&${P}-root`]:{boxShadow:"none"}},LM(x))},[`${P}-submenu-popup`]:{[`${P}-vertical`]:Object.assign(Object.assign({},LM(x)),{boxShadow:It})}},{[`${P}-submenu-popup ${P}-vertical${P}-sub`]:{minWidth:Ee,maxHeight:`calc(100vh - ${2.5*Ae}px)`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${P}-inline`]:{width:"100%",[`&${P}-root`]:{[`${P}-item, ${P}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${bt}`,`background ${bt}`,`padding ${Ze} ${Ge}`].join(","),[`> ${P}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${P}-sub${P}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${P}-submenu > ${P}-submenu-title`]:Lt,[`& ${P}-item-group-title`]:{paddingInlineStart:it}},[`${P}-item`]:Lt}},{[`${P}-inline-collapsed`]:{width:At,[`&${P}-root`]:{[`${P}-item, ${P}-submenu ${P}-submenu-title`]:{[`> ${P}-inline-collapsed-noicon`]:{fontSize:at,textAlign:"center"}}},[`> ${P}-item,
          > ${P}-item-group > ${P}-item-group-list > ${P}-item,
          > ${P}-item-group > ${P}-item-group-list > ${P}-submenu > ${P}-submenu-title,
          > ${P}-submenu > ${P}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${at/2}px - ${mt}px)`,textOverflow:"clip",[`
            ${P}-submenu-arrow,
            ${P}-submenu-expand-icon
          `]:{opacity:0},[`${P}-item-icon, ${M}`]:{margin:0,fontSize:jt,lineHeight:`${N}px`,"+ span":{display:"inline-block",opacity:0}}},[`${P}-item-icon, ${M}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${P}-item-icon, ${M}`]:{display:"none"},"a, a:hover":{color:G}},[`${P}-item-group-title`]:Object.assign(Object.assign({},DK),{paddingInline:gt})}}]};const $M=x=>{const{componentCls:P,motionDurationSlow:M,motionDurationMid:N,motionEaseInOut:G,motionEaseOut:Ee,iconCls:Ae,iconSize:Ze,iconMarginInlineEnd:Ge}=x;return{[`${P}-item, ${P}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${M}`,`background ${M}`,`padding ${M} ${G}`].join(","),[`${P}-item-icon, ${Ae}`]:{minWidth:Ze,fontSize:Ze,transition:[`font-size ${N} ${Ee}`,`margin ${M} ${G}`,`color ${M}`].join(","),"+ span":{marginInlineStart:Ge,opacity:1,transition:[`opacity ${M} ${G}`,`margin ${M}`,`color ${M}`].join(",")}},[`${P}-item-icon`]:Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),[`&${P}-item-only-child`]:{[`> ${Ae}, > ${P}-item-icon`]:{marginInlineEnd:0}}},[`${P}-item-disabled, ${P}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${P}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},jM=x=>{const{componentCls:P,motionDurationSlow:M,motionEaseInOut:N,borderRadius:G,menuArrowSize:Ee,menuArrowOffset:Ae}=x;return{[`${P}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:x.margin,width:Ee,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${M} ${N}, opacity ${M}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:.6*Ee,height:.15*Ee,backgroundColor:"currentcolor",borderRadius:G,transition:[`background ${M} ${N}`,`transform ${M} ${N}`,`top ${M} ${N}`,`color ${M} ${N}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(-${Ae})`},"&::after":{transform:`rotate(-45deg) translateY(${Ae})`}}}}},OG=x=>{const{antCls:P,componentCls:M,fontSize:N,motionDurationSlow:G,motionDurationMid:Ee,motionEaseInOut:Ae,paddingXS:Ze,padding:Ge,colorSplit:it,lineWidth:mt,zIndexPopup:at,borderRadiusLG:bt,subMenuItemBorderRadius:gt,menuArrowSize:It,menuArrowOffset:At,lineType:jt,menuPanelMaskInset:Lt,groupTitleLineHeight:$t,groupTitleFontSize:hn}=x;return[{"":{[`${M}`]:Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{"&-hidden":{display:"none"}})},[`${M}-submenu-hidden`]:{display:"none"}},{[M]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ww(x)),{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),{marginBottom:0,paddingInlineStart:0,fontSize:N,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${G} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${M}-item`]:{flex:"none"}},[`${M}-item, ${M}-submenu, ${M}-submenu-title`]:{borderRadius:x.itemBorderRadius},[`${M}-item-group-title`]:{padding:`${Ze}px ${Ge}px`,fontSize:hn,lineHeight:$t,transition:`all ${G}`},[`&-horizontal ${M}-submenu`]:{transition:[`border-color ${G} ${Ae}`,`background ${G} ${Ae}`].join(",")},[`${M}-submenu, ${M}-submenu-inline`]:{transition:[`border-color ${G} ${Ae}`,`background ${G} ${Ae}`,`padding ${Ee} ${Ae}`].join(",")},[`${M}-submenu ${M}-sub`]:{cursor:"initial",transition:[`background ${G} ${Ae}`,`padding ${G} ${Ae}`].join(",")},[`${M}-title-content`]:{transition:`color ${G}`},[`${M}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${M}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:it,borderStyle:jt,borderWidth:0,borderTopWidth:mt,marginBlock:mt,padding:0,"&-dashed":{borderStyle:"dashed"}}}),$M(x)),{[`${M}-item-group`]:{[`${M}-item-group-list`]:{margin:0,padding:0,[`${M}-item, ${M}-submenu-title`]:{paddingInline:`${2*N}px ${Ge}px`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:at,borderRadius:bt,boxShadow:"none",transformOrigin:"0 0",[`&${M}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:`${Lt}px 0 0`,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:Lt},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:x.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:x.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:x.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:x.paddingXS},[`> ${M}`]:Object.assign(Object.assign(Object.assign({borderRadius:bt},$M(x)),jM(x)),{[`${M}-item, ${M}-submenu > ${M}-submenu-title`]:{borderRadius:gt},[`${M}-submenu-title::after`]:{transition:`transform ${G} ${Ae}`}})}}),jM(x)),{[`&-inline-collapsed ${M}-submenu-arrow,
        &-inline ${M}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${At})`},"&::after":{transform:`rotate(45deg) translateX(-${At})`}},[`${M}-submenu-open${M}-submenu-inline > ${M}-submenu-title > ${M}-submenu-arrow`]:{transform:`translateY(-${.2*It}px)`,"&::after":{transform:`rotate(-45deg) translateX(-${At})`},"&::before":{transform:`rotate(45deg) translateX(${At})`}}})},{[`${P}-layout-header`]:{[M]:{lineHeight:"inherit"}}}]};var AG=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M},LG=(0,C.forwardRef)((x,P)=>{var M,N;const G=C.useContext(EM),Ee=G||{},{getPrefixCls:Ae,getPopupContainer:Ze,direction:Ge,menu:it}=C.useContext(Do),mt=Ae(),{prefixCls:at,className:bt,style:gt,theme:It="light",expandIcon:At,_internalDisableMenuItemTitleTooltip:jt,inlineCollapsed:Lt,siderCollapsed:$t,items:hn,children:kn,rootClassName:On,mode:Zn,selectable:an,onClick:er,overflowedIndicatorPopupClassName:mr}=x,Gn=Jo(AG(x,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),["collapsedWidth"]),Qt=wG(hn)||kn;(M=Ee.validator)===null||M===void 0||M.call(Ee,{mode:Zn});const Xt=cs(function(){var Jr;er==null||er.apply(void 0,arguments),(Jr=Ee.onClick)===null||Jr===void 0||Jr.call(Ee)}),Ht=Ee.mode||Zn,Tn=an??Ee.selectable,fn=C.useMemo(()=>$t!==void 0?$t:Lt,[Lt,$t]),Vn={horizontal:{motionName:`${mt}-slide-up`},inline:UY(mt),other:{motionName:`${mt}-zoom-big`}},rr=Ae("menu",at||Ee.prefixCls),[_r,xr]=((Jr,Br)=>D0("Menu",Qr=>{if(Br===!1)return[];const{colorBgElevated:Ao,colorPrimary:To,colorTextLightSolid:No,controlHeightLG:Uo,fontSize:zo,darkItemColor:Fo,darkDangerItemColor:ni,darkItemBg:jr,darkSubMenuItemBg:Zr,darkItemSelectedColor:po,darkItemSelectedBg:yo,darkDangerItemSelectedBg:_o,darkItemHoverBg:Xr,darkGroupTitleColor:Ii,darkItemHoverColor:li,darkItemDisabledColor:Ua,darkDangerItemHoverColor:Qo,darkDangerItemSelectedColor:ga,darkDangerItemActiveBg:ri}=Qr,vs=zo/7*5,Si=pu(Qr,{menuArrowSize:vs,menuHorizontalHeight:1.15*Uo,menuArrowOffset:.25*vs+"px",menuPanelMaskInset:-7,menuSubMenuBg:Ao}),us=pu(Si,{itemColor:Fo,itemHoverColor:li,groupTitleColor:Ii,itemSelectedColor:po,itemBg:jr,popupBg:jr,subMenuItemBg:Zr,itemActiveBg:"transparent",itemSelectedBg:yo,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:Xr,itemDisabledColor:Ua,dangerItemColor:ni,dangerItemHoverColor:Qo,dangerItemSelectedColor:ga,dangerItemActiveBg:ri,dangerItemSelectedBg:_o,menuSubMenuBg:Zr,horizontalItemSelectedColor:No,horizontalItemSelectedBg:To});return[OG(Si),MG(Si),TG(Si),AM(Si,"light"),AM(us,"dark"),IG(Si),CG(Si),r5(Si,"slide-up"),r5(Si,"slide-down"),l7(Si,"zoom-big")]},Qr=>{const{colorPrimary:Ao,colorError:To,colorTextDisabled:No,colorErrorBg:Uo,colorText:zo,colorTextDescription:Fo,colorBgContainer:ni,colorFillAlter:jr,colorFillContent:Zr,lineWidth:po,lineWidthBold:yo,controlItemBgActive:_o,colorBgTextHover:Xr,controlHeightLG:Ii,lineHeight:li,colorBgElevated:Ua,marginXXS:Qo,padding:ga,fontSize:ri,controlHeightSM:vs,fontSizeLG:Si,colorTextLightSolid:us,colorErrorHover:cc}=Qr,Fi=new Ls(us).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:Qr.zIndexPopupBase+50,radiusItem:Qr.borderRadiusLG,itemBorderRadius:Qr.borderRadiusLG,radiusSubMenuItem:Qr.borderRadiusSM,subMenuItemBorderRadius:Qr.borderRadiusSM,colorItemText:zo,itemColor:zo,colorItemTextHover:zo,itemHoverColor:zo,colorItemTextHoverHorizontal:Ao,horizontalItemHoverColor:Ao,colorGroupTitle:Fo,groupTitleColor:Fo,colorItemTextSelected:Ao,itemSelectedColor:Ao,colorItemTextSelectedHorizontal:Ao,horizontalItemSelectedColor:Ao,colorItemBg:ni,itemBg:ni,colorItemBgHover:Xr,itemHoverBg:Xr,colorItemBgActive:Zr,itemActiveBg:_o,colorSubItemBg:jr,subMenuItemBg:jr,colorItemBgSelected:_o,itemSelectedBg:_o,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:0,colorActiveBarHeight:yo,activeBarHeight:yo,colorActiveBarBorderSize:po,activeBarBorderWidth:po,colorItemTextDisabled:No,itemDisabledColor:No,colorDangerItemText:To,dangerItemColor:To,colorDangerItemTextHover:To,dangerItemHoverColor:To,colorDangerItemTextSelected:To,dangerItemSelectedColor:To,colorDangerItemBgActive:Uo,dangerItemActiveBg:Uo,colorDangerItemBgSelected:Uo,dangerItemSelectedBg:Uo,itemMarginInline:Qr.marginXXS,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:Ii,groupTitleLineHeight:li,collapsedWidth:2*Ii,popupBg:Ua,itemMarginBlock:Qo,itemPaddingInline:ga,horizontalLineHeight:1.15*Ii+"px",iconSize:ri,iconMarginInlineEnd:vs-ri,collapsedIconSize:Si,groupTitleFontSize:ri,darkItemDisabledColor:new Ls(us).setAlpha(.25).toRgbString(),darkItemColor:Fi,darkDangerItemColor:To,darkItemBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:us,darkItemSelectedBg:Ao,darkDangerItemSelectedBg:To,darkItemHoverBg:"transparent",darkGroupTitleColor:Fi,darkItemHoverColor:us,darkDangerItemHoverColor:cc,darkDangerItemSelectedColor:us,darkDangerItemActiveBg:To}},{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]]})(Jr))(rr,!G),$r=Se()(`${rr}-${It}`,it==null?void 0:it.className,bt);let Or;if(typeof At=="function")Or=At;else{const Jr=At||Ee.expandIcon;Or=mf(Jr,{className:Se()(`${rr}-submenu-expand-icon`,gf(Jr)?(N=Jr.props)===null||N===void 0?void 0:N.className:"")})}const zr=C.useMemo(()=>({prefixCls:rr,inlineCollapsed:fn||!1,direction:Ge,firstLevel:!0,theme:It,mode:Ht,disableMenuItemTitleTooltip:jt}),[rr,fn,Ge,jt,It]);return _r(C.createElement(EM.Provider,{value:null},C.createElement(n5.Provider,{value:zr},C.createElement(RY,Object.assign({getPopupContainer:Ze,overflowedIndicator:C.createElement(_M,null),overflowedIndicatorPopupClassName:Se()(rr,`${rr}-${It}`,mr),mode:Ht,selectable:Tn,onClick:Xt},Gn,{inlineCollapsed:fn,style:Object.assign(Object.assign({},it==null?void 0:it.style),gt),className:$r,prefixCls:rr,direction:Ge,defaultMotions:Vn,expandIcon:Or,ref:P,rootClassName:Se()(On,xr)}),Qt))))});const x2=(0,C.forwardRef)((x,P)=>{const M=(0,C.useRef)(null),N=C.useContext(sM);return(0,C.useImperativeHandle)(P,()=>({menu:M.current,focus:G=>{var Ee;(Ee=M.current)===null||Ee===void 0||Ee.focus(G)}})),C.createElement(LG,Object.assign({ref:M},x,N))});x2.Item=SM,x2.SubMenu=kM,x2.Divider=lM,x2.ItemGroup=Qy;var $G=x2;const jG=new Ki("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),RG=new Ki("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),DG=new Ki("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),NG=new Ki("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),zG=new Ki("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),BG=new Ki("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),HG={"move-up":{inKeyframes:new Ki("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new Ki("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:jG,outKeyframes:RG},"move-left":{inKeyframes:DG,outKeyframes:NG},"move-right":{inKeyframes:zG,outKeyframes:BG}},RM=(x,P)=>{const{antCls:M}=x,N=`${M}-${P}`,{inKeyframes:G,outKeyframes:Ee}=HG[P];return[s7(N,G,Ee,x.motionDurationMid),{[`
        ${N}-enter,
        ${N}-appear
      `]:{opacity:0,animationTimingFunction:x.motionEaseOutCirc},[`${N}-leave`]:{animationTimingFunction:x.motionEaseInOutCirc}}]};var FG=x=>{const{componentCls:P,menuCls:M,colorError:N,colorTextLightSolid:G}=x,Ee=`${M}-item`;return{[`${P}, ${P}-menu-submenu`]:{[`${M} ${Ee}`]:{[`&${Ee}-danger:not(${Ee}-disabled)`]:{color:N,"&:hover":{color:G,backgroundColor:N}}}}}};const ZG=x=>{const{componentCls:P,menuCls:M,zIndexPopup:N,dropdownArrowDistance:G,sizePopupArrow:Ee,antCls:Ae,iconCls:Ze,motionDurationMid:Ge,dropdownPaddingVertical:it,fontSize:mt,dropdownEdgeChildPadding:at,colorTextDisabled:bt,fontSizeIcon:gt,controlPaddingHorizontal:It,colorBgElevated:At}=x;return[{[P]:Object.assign(Object.assign({},Ww(x)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:N,display:"block","&::before":{position:"absolute",insetBlock:Ee/2-G,zIndex:-9999,opacity:1e-4,content:'""'},[`&-trigger${Ae}-btn`]:{[`& > ${Ze}-down, & > ${Ae}-btn-icon > ${Ze}-down`]:{fontSize:gt}},[`${P}-wrap`]:{position:"relative",[`${Ae}-btn > ${Ze}-down`]:{fontSize:gt},[`${Ze}-down::before`]:{transition:`transform ${Ge}`}},[`${P}-wrap-open`]:{[`${Ze}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${Ae}-slide-down-enter${Ae}-slide-down-enter-active${P}-placement-bottomLeft,
          &${Ae}-slide-down-appear${Ae}-slide-down-appear-active${P}-placement-bottomLeft,
          &${Ae}-slide-down-enter${Ae}-slide-down-enter-active${P}-placement-bottom,
          &${Ae}-slide-down-appear${Ae}-slide-down-appear-active${P}-placement-bottom,
          &${Ae}-slide-down-enter${Ae}-slide-down-enter-active${P}-placement-bottomRight,
          &${Ae}-slide-down-appear${Ae}-slide-down-appear-active${P}-placement-bottomRight`]:{animationName:PM},[`&${Ae}-slide-up-enter${Ae}-slide-up-enter-active${P}-placement-topLeft,
          &${Ae}-slide-up-appear${Ae}-slide-up-appear-active${P}-placement-topLeft,
          &${Ae}-slide-up-enter${Ae}-slide-up-enter-active${P}-placement-top,
          &${Ae}-slide-up-appear${Ae}-slide-up-appear-active${P}-placement-top,
          &${Ae}-slide-up-enter${Ae}-slide-up-enter-active${P}-placement-topRight,
          &${Ae}-slide-up-appear${Ae}-slide-up-appear-active${P}-placement-topRight`]:{animationName:IM},[`&${Ae}-slide-down-leave${Ae}-slide-down-leave-active${P}-placement-bottomLeft,
          &${Ae}-slide-down-leave${Ae}-slide-down-leave-active${P}-placement-bottom,
          &${Ae}-slide-down-leave${Ae}-slide-down-leave-active${P}-placement-bottomRight`]:{animationName:MM},[`&${Ae}-slide-up-leave${Ae}-slide-up-leave-active${P}-placement-topLeft,
          &${Ae}-slide-up-leave${Ae}-slide-up-leave-active${P}-placement-top,
          &${Ae}-slide-up-leave${Ae}-slide-up-leave-active${P}-placement-topRight`]:{animationName:TM}})},jP(x,{colorBg:At,limitVerticalRadius:!0,arrowPlacement:{top:!0,bottom:!0}}),{[`${P} ${M}`]:{position:"relative",margin:0},[`${M}-submenu-popup`]:{position:"absolute",zIndex:N,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${P}, ${P}-menu-submenu`]:{[M]:Object.assign(Object.assign({padding:at,listStyleType:"none",backgroundColor:At,backgroundClip:"padding-box",borderRadius:x.borderRadiusLG,outline:"none",boxShadow:x.boxShadowSecondary},Vw(x)),{[`${M}-item-group-title`]:{padding:`${it}px ${It}px`,color:x.colorTextDescription,transition:`all ${Ge}`},[`${M}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${M}-item-icon`]:{minWidth:mt,marginInlineEnd:x.marginXS,fontSize:x.fontSizeSM},[`${M}-title-content`]:{flex:"auto","> a":{color:"inherit",transition:`all ${Ge}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}},[`${M}-item, ${M}-submenu-title`]:Object.assign(Object.assign({clear:"both",margin:0,padding:`${it}px ${It}px`,color:x.colorText,fontWeight:"normal",fontSize:mt,lineHeight:x.lineHeight,cursor:"pointer",transition:`all ${Ge}`,borderRadius:x.borderRadiusSM,"&:hover, &-active":{backgroundColor:x.controlItemBgHover}},Vw(x)),{"&-selected":{color:x.colorPrimary,backgroundColor:x.controlItemBgActive,"&:hover, &-active":{backgroundColor:x.controlItemBgActiveHover}},"&-disabled":{color:bt,cursor:"not-allowed","&:hover":{color:bt,backgroundColor:At,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${x.marginXXS}px 0`,overflow:"hidden",lineHeight:0,backgroundColor:x.colorSplit},[`${P}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:x.paddingXS,[`${P}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:x.colorTextDescription,fontSize:gt,fontStyle:"normal"}}}),[`${M}-item-group-list`]:{margin:`0 ${x.marginXS}px`,padding:0,listStyle:"none"},[`${M}-submenu-title`]:{paddingInlineEnd:It+x.fontSizeSM},[`${M}-submenu-vertical`]:{position:"relative"},[`${M}-submenu${M}-submenu-disabled ${P}-menu-submenu-title`]:{[`&, ${P}-menu-submenu-arrow-icon`]:{color:bt,backgroundColor:At,cursor:"not-allowed"}},[`${M}-submenu-selected ${P}-menu-submenu-title`]:{color:x.colorPrimary}})}},[r5(x,"slide-up"),r5(x,"slide-down"),RM(x,"move-up"),RM(x,"move-down"),l7(x,"zoom-big")]]};var DM=D0("Dropdown",(x,P)=>{let{rootPrefixCls:M}=P;const{marginXXS:N,sizePopupArrow:G,controlHeight:Ee,fontSize:Ae,lineHeight:Ze,paddingXXS:Ge,componentCls:it,borderRadiusLG:mt}=x,at=(Ee-Ae*Ze)/2,{dropdownArrowOffset:bt}=Kw({contentRadius:mt}),gt=pu(x,{menuCls:`${it}-menu`,rootPrefixCls:M,dropdownArrowDistance:G/2+N,dropdownArrowOffset:bt,dropdownPaddingVertical:at,dropdownEdgeChildPadding:Ge});return[ZG(gt),FG(gt)]},x=>({zIndexPopup:x.zIndexPopupBase+50}));const u7=x=>{const{menu:P,arrow:M,prefixCls:N,children:G,trigger:Ee,disabled:Ae,dropdownRender:Ze,getPopupContainer:Ge,overlayClassName:it,rootClassName:mt,open:at,onOpenChange:bt,visible:gt,onVisibleChange:It,mouseEnterDelay:At=.15,mouseLeaveDelay:jt=.1,autoAdjustOverflow:Lt=!0,placement:$t="",overlay:hn,transitionName:kn}=x,{getPopupContainer:On,getPrefixCls:Zn,direction:an}=C.useContext(Do),er=C.useMemo(()=>{const Br=Zn();return kn!==void 0?kn:$t.includes("top")?`${Br}-slide-down`:`${Br}-slide-up`},[Zn,$t,kn]),mr=C.useMemo(()=>$t?$t.includes("Center")?$t.slice(0,$t.indexOf("Center")):$t:an==="rtl"?"bottomRight":"bottomLeft",[$t,an]),Gn=Zn("dropdown",N),[Qt,Xt]=DM(Gn),{token:Ht}=vM.useToken(),Tn=C.Children.only(G),fn=mf(Tn,{className:Se()(`${Gn}-trigger`,{[`${Gn}-rtl`]:an==="rtl"},Tn.props.className),disabled:Ae}),Vn=Ae?[]:Ee;let rr;Vn&&Vn.includes("contextMenu")&&(rr=!0);const[_r,xr]=Tl(!1,{value:at??gt}),$r=cs(Br=>{bt==null||bt(Br),It==null||It(Br),xr(Br)}),Or=Se()(it,mt,Xt,{[`${Gn}-rtl`]:an==="rtl"}),zr=DP({arrowPointAtCenter:typeof M=="object"&&M.pointAtCenter,autoAdjustOverflow:Lt,offset:Ht.marginXXS,arrowWidth:M?Ht.sizePopupArrow:0,borderRadius:Ht.borderRadius}),Jr=C.useCallback(()=>{xr(!1)},[]);return Qt(C.createElement(Ci,Object.assign({alignPoint:rr},Jo(x,["rootClassName"]),{mouseEnterDelay:At,mouseLeaveDelay:jt,visible:_r,builtinPlacements:zr,arrow:!!M,overlayClassName:Or,prefixCls:Gn,getPopupContainer:Ge||On,transitionName:er,trigger:Vn,overlay:()=>{let Br;return Br=P!=null&&P.items?C.createElement($G,Object.assign({},P)):typeof hn=="function"?hn():hn,Ze&&(Br=Ze(Br)),Br=C.Children.only(typeof Br=="string"?C.createElement("span",null,Br):Br),C.createElement(yG,{prefixCls:`${Gn}-menu`,expandIcon:C.createElement("span",{className:`${Gn}-menu-submenu-arrow`},C.createElement(Hr,{className:`${Gn}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:Jr,validator:ro=>{}},Br)},placement:mr,onVisibleChange:$r}),fn))},UG=function(x,P,M,N){return function(G){const{prefixCls:Ee,style:Ae}=G,Ze=C.useRef(null),[Ge,it]=C.useState(0),[mt,at]=C.useState(0),[bt,gt]=Tl(!1,{value:G.open}),{getPrefixCls:It}=C.useContext(Do),At=It(P||"select",Ee);C.useEffect(()=>{if(gt(!0),typeof ResizeObserver<"u"){const Lt=new ResizeObserver(hn=>{const kn=hn[0].target;it(kn.offsetHeight+8),at(kn.offsetWidth)}),$t=setInterval(()=>{var hn;const kn=M?`.${M(At)}`:`.${At}-dropdown`,On=(hn=Ze.current)===null||hn===void 0?void 0:hn.querySelector(kn);On&&(clearInterval($t),Lt.observe(On))},10);return()=>{clearInterval($t),Lt.disconnect()}}},[]);let jt=Object.assign(Object.assign({},G),{style:Object.assign(Object.assign({},Ae),{margin:0}),open:bt,visible:bt,getPopupContainer:()=>Ze.current});return N&&(jt=N(jt)),C.createElement(WK,{theme:{token:{motion:!1}}},C.createElement("div",{ref:Ze,style:{paddingBottom:Ge,position:"relative",minWidth:mt}},C.createElement(x,Object.assign({},jt))))}}(u7,"dropdown",x=>x,function(x){return Object.assign(Object.assign({},x),{align:{overflow:{adjustX:!1,adjustY:!1}}})});u7._InternalPanelDoNotUseOrYouWillBeFired=x=>C.createElement(UG,Object.assign({},x),C.createElement("span",null));var NM=u7;const WG=x=>{const{componentCls:P,colorPrimary:M}=x;return{[P]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${M})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${x.motionEaseOutCirc}`,`opacity 2s ${x.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${x.motionEaseInOut}`,`opacity 0.35s ${x.motionEaseInOut}`].join(",")}}}}};var VG=D0("Wave",x=>[WG(x)]);function w2(){w2=function(){return x};var x={},P=Object.prototype,M=P.hasOwnProperty,N=Object.defineProperty||function(Qt,Xt,Ht){Qt[Xt]=Ht.value},G=typeof Symbol=="function"?Symbol:{},Ee=G.iterator||"@@iterator",Ae=G.asyncIterator||"@@asyncIterator",Ze=G.toStringTag||"@@toStringTag";function Ge(Qt,Xt,Ht){return Object.defineProperty(Qt,Xt,{value:Ht,enumerable:!0,configurable:!0,writable:!0}),Qt[Xt]}try{Ge({},"")}catch{Ge=function(Xt,Ht,Tn){return Xt[Ht]=Tn}}function it(Qt,Xt,Ht,Tn){var fn=Xt&&Xt.prototype instanceof bt?Xt:bt,Vn=Object.create(fn.prototype),rr=new mr(Tn||[]);return N(Vn,"_invoke",{value:On(Qt,Ht,rr)}),Vn}function mt(Qt,Xt,Ht){try{return{type:"normal",arg:Qt.call(Xt,Ht)}}catch(Tn){return{type:"throw",arg:Tn}}}x.wrap=it;var at={};function bt(){}function gt(){}function It(){}var At={};Ge(At,Ee,function(){return this});var jt=Object.getPrototypeOf,Lt=jt&&jt(jt(Gn([])));Lt&&Lt!==P&&M.call(Lt,Ee)&&(At=Lt);var $t=It.prototype=bt.prototype=Object.create(At);function hn(Qt){["next","throw","return"].forEach(function(Xt){Ge(Qt,Xt,function(Ht){return this._invoke(Xt,Ht)})})}function kn(Qt,Xt){function Ht(fn,Vn,rr,_r){var xr=mt(Qt[fn],Qt,Vn);if(xr.type!=="throw"){var $r=xr.arg,Or=$r.value;return Or&&Pe(Or)=="object"&&M.call(Or,"__await")?Xt.resolve(Or.__await).then(function(zr){Ht("next",zr,rr,_r)},function(zr){Ht("throw",zr,rr,_r)}):Xt.resolve(Or).then(function(zr){$r.value=zr,rr($r)},function(zr){return Ht("throw",zr,rr,_r)})}_r(xr.arg)}var Tn;N(this,"_invoke",{value:function(fn,Vn){function rr(){return new Xt(function(_r,xr){Ht(fn,Vn,_r,xr)})}return Tn=Tn?Tn.then(rr,rr):rr()}})}function On(Qt,Xt,Ht){var Tn="suspendedStart";return function(fn,Vn){if(Tn==="executing")throw new Error("Generator is already running");if(Tn==="completed"){if(fn==="throw")throw Vn;return{value:void 0,done:!0}}for(Ht.method=fn,Ht.arg=Vn;;){var rr=Ht.delegate;if(rr){var _r=Zn(rr,Ht);if(_r){if(_r===at)continue;return _r}}if(Ht.method==="next")Ht.sent=Ht._sent=Ht.arg;else if(Ht.method==="throw"){if(Tn==="suspendedStart")throw Tn="completed",Ht.arg;Ht.dispatchException(Ht.arg)}else Ht.method==="return"&&Ht.abrupt("return",Ht.arg);Tn="executing";var xr=mt(Qt,Xt,Ht);if(xr.type==="normal"){if(Tn=Ht.done?"completed":"suspendedYield",xr.arg===at)continue;return{value:xr.arg,done:Ht.done}}xr.type==="throw"&&(Tn="completed",Ht.method="throw",Ht.arg=xr.arg)}}}function Zn(Qt,Xt){var Ht=Xt.method,Tn=Qt.iterator[Ht];if(Tn===void 0)return Xt.delegate=null,Ht==="throw"&&Qt.iterator.return&&(Xt.method="return",Xt.arg=void 0,Zn(Qt,Xt),Xt.method==="throw")||Ht!=="return"&&(Xt.method="throw",Xt.arg=new TypeError("The iterator does not provide a '"+Ht+"' method")),at;var fn=mt(Tn,Qt.iterator,Xt.arg);if(fn.type==="throw")return Xt.method="throw",Xt.arg=fn.arg,Xt.delegate=null,at;var Vn=fn.arg;return Vn?Vn.done?(Xt[Qt.resultName]=Vn.value,Xt.next=Qt.nextLoc,Xt.method!=="return"&&(Xt.method="next",Xt.arg=void 0),Xt.delegate=null,at):Vn:(Xt.method="throw",Xt.arg=new TypeError("iterator result is not an object"),Xt.delegate=null,at)}function an(Qt){var Xt={tryLoc:Qt[0]};1 in Qt&&(Xt.catchLoc=Qt[1]),2 in Qt&&(Xt.finallyLoc=Qt[2],Xt.afterLoc=Qt[3]),this.tryEntries.push(Xt)}function er(Qt){var Xt=Qt.completion||{};Xt.type="normal",delete Xt.arg,Qt.completion=Xt}function mr(Qt){this.tryEntries=[{tryLoc:"root"}],Qt.forEach(an,this),this.reset(!0)}function Gn(Qt){if(Qt||Qt===""){var Xt=Qt[Ee];if(Xt)return Xt.call(Qt);if(typeof Qt.next=="function")return Qt;if(!isNaN(Qt.length)){var Ht=-1,Tn=function fn(){for(;++Ht<Qt.length;)if(M.call(Qt,Ht))return fn.value=Qt[Ht],fn.done=!1,fn;return fn.value=void 0,fn.done=!0,fn};return Tn.next=Tn}}throw new TypeError(Pe(Qt)+" is not iterable")}return gt.prototype=It,N($t,"constructor",{value:It,configurable:!0}),N(It,"constructor",{value:gt,configurable:!0}),gt.displayName=Ge(It,Ze,"GeneratorFunction"),x.isGeneratorFunction=function(Qt){var Xt=typeof Qt=="function"&&Qt.constructor;return!!Xt&&(Xt===gt||(Xt.displayName||Xt.name)==="GeneratorFunction")},x.mark=function(Qt){return Object.setPrototypeOf?Object.setPrototypeOf(Qt,It):(Qt.__proto__=It,Ge(Qt,Ze,"GeneratorFunction")),Qt.prototype=Object.create($t),Qt},x.awrap=function(Qt){return{__await:Qt}},hn(kn.prototype),Ge(kn.prototype,Ae,function(){return this}),x.AsyncIterator=kn,x.async=function(Qt,Xt,Ht,Tn,fn){fn===void 0&&(fn=Promise);var Vn=new kn(it(Qt,Xt,Ht,Tn),fn);return x.isGeneratorFunction(Xt)?Vn:Vn.next().then(function(rr){return rr.done?rr.value:Vn.next()})},hn($t),Ge($t,Ze,"Generator"),Ge($t,Ee,function(){return this}),Ge($t,"toString",function(){return"[object Generator]"}),x.keys=function(Qt){var Xt=Object(Qt),Ht=[];for(var Tn in Xt)Ht.push(Tn);return Ht.reverse(),function fn(){for(;Ht.length;){var Vn=Ht.pop();if(Vn in Xt)return fn.value=Vn,fn.done=!1,fn}return fn.done=!0,fn}},x.values=Gn,mr.prototype={constructor:mr,reset:function(Qt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(er),!Qt)for(var Xt in this)Xt.charAt(0)==="t"&&M.call(this,Xt)&&!isNaN(+Xt.slice(1))&&(this[Xt]=void 0)},stop:function(){this.done=!0;var Qt=this.tryEntries[0].completion;if(Qt.type==="throw")throw Qt.arg;return this.rval},dispatchException:function(Qt){if(this.done)throw Qt;var Xt=this;function Ht(xr,$r){return Vn.type="throw",Vn.arg=Qt,Xt.next=xr,$r&&(Xt.method="next",Xt.arg=void 0),!!$r}for(var Tn=this.tryEntries.length-1;Tn>=0;--Tn){var fn=this.tryEntries[Tn],Vn=fn.completion;if(fn.tryLoc==="root")return Ht("end");if(fn.tryLoc<=this.prev){var rr=M.call(fn,"catchLoc"),_r=M.call(fn,"finallyLoc");if(rr&&_r){if(this.prev<fn.catchLoc)return Ht(fn.catchLoc,!0);if(this.prev<fn.finallyLoc)return Ht(fn.finallyLoc)}else if(rr){if(this.prev<fn.catchLoc)return Ht(fn.catchLoc,!0)}else{if(!_r)throw new Error("try statement without catch or finally");if(this.prev<fn.finallyLoc)return Ht(fn.finallyLoc)}}}},abrupt:function(Qt,Xt){for(var Ht=this.tryEntries.length-1;Ht>=0;--Ht){var Tn=this.tryEntries[Ht];if(Tn.tryLoc<=this.prev&&M.call(Tn,"finallyLoc")&&this.prev<Tn.finallyLoc){var fn=Tn;break}}fn&&(Qt==="break"||Qt==="continue")&&fn.tryLoc<=Xt&&Xt<=fn.finallyLoc&&(fn=null);var Vn=fn?fn.completion:{};return Vn.type=Qt,Vn.arg=Xt,fn?(this.method="next",this.next=fn.finallyLoc,at):this.complete(Vn)},complete:function(Qt,Xt){if(Qt.type==="throw")throw Qt.arg;return Qt.type==="break"||Qt.type==="continue"?this.next=Qt.arg:Qt.type==="return"?(this.rval=this.arg=Qt.arg,this.method="return",this.next="end"):Qt.type==="normal"&&Xt&&(this.next=Xt),at},finish:function(Qt){for(var Xt=this.tryEntries.length-1;Xt>=0;--Xt){var Ht=this.tryEntries[Xt];if(Ht.finallyLoc===Qt)return this.complete(Ht.completion,Ht.afterLoc),er(Ht),at}},catch:function(Qt){for(var Xt=this.tryEntries.length-1;Xt>=0;--Xt){var Ht=this.tryEntries[Xt];if(Ht.tryLoc===Qt){var Tn=Ht.completion;if(Tn.type==="throw"){var fn=Tn.arg;er(Ht)}return fn}}throw new Error("illegal catch attempt")},delegateYield:function(Qt,Xt,Ht){return this.delegate={iterator:Gn(Qt),resultName:Xt,nextLoc:Ht},this.method==="next"&&(this.arg=void 0),at}},x}function zM(x,P,M,N,G,Ee,Ae){try{var Ze=x[Ee](Ae),Ge=Ze.value}catch(it){return void M(it)}Ze.done?P(Ge):Promise.resolve(Ge).then(N,G)}function BM(x){return function(){var P=this,M=arguments;return new Promise(function(N,G){var Ee=x.apply(P,M);function Ae(Ge){zM(Ee,N,G,Ae,Ze,"next",Ge)}function Ze(Ge){zM(Ee,N,G,Ae,Ze,"throw",Ge)}Ae(void 0)})}}var o5,C2=Ot({},Fr),KG=C2.version,YG=C2.render,GG=C2.unmountComponentAtNode;try{Number((KG||"").split(".")[0])>=18&&(o5=C2.createRoot)}catch{}function HM(x){var P=C2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;P&&Pe(P)==="object"&&(P.usingClientEntryPoint=x)}var i5="__rc_react_root__";function XG(x,P){o5?function(M,N){HM(!0);var G=N[i5]||o5(N);HM(!1),G.render(M),N[i5]=G}(x,P):function(M,N){YG(M,N)}(x,P)}function qG(x){return FM.apply(this,arguments)}function FM(){return(FM=BM(w2().mark(function x(P){return w2().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Promise.resolve().then(function(){var N;(N=P[i5])===null||N===void 0||N.unmount(),delete P[i5]}));case 1:case"end":return M.stop()}},x)}))).apply(this,arguments)}function JG(x){GG(x)}function ZM(){return(ZM=BM(w2().mark(function x(P){return w2().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(o5===void 0){M.next=2;break}return M.abrupt("return",qG(P));case 2:JG(P);case 3:case"end":return M.stop()}},x)}))).apply(this,arguments)}function h7(x){return x&&x!=="#fff"&&x!=="#ffffff"&&x!=="rgb(255, 255, 255)"&&x!=="rgba(255, 255, 255, 1)"&&function(P){const M=(P||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(M&&M[1]&&M[2]&&M[3]&&M[1]===M[2]&&M[2]===M[3])}(x)&&!/rgba\((?:\d*, ){3}0\)/.test(x)&&x!=="transparent"}const UM="ant-wave-target";function f7(x){return Number.isNaN(x)?0:x}const QG=x=>{const{className:P,target:M,component:N}=x,G=C.useRef(null),[Ee,Ae]=C.useState(null),[Ze,Ge]=C.useState([]),[it,mt]=C.useState(0),[at,bt]=C.useState(0),[gt,It]=C.useState(0),[At,jt]=C.useState(0),[Lt,$t]=C.useState(!1),hn={left:it,top:at,width:gt,height:At,borderRadius:Ze.map(Zn=>`${Zn}px`).join(" ")};function kn(){const Zn=getComputedStyle(M);Ae(function(Tn){const{borderTopColor:fn,borderColor:Vn,backgroundColor:rr}=getComputedStyle(Tn);return h7(fn)?fn:h7(Vn)?Vn:h7(rr)?rr:null}(M));const an=Zn.position==="static",{borderLeftWidth:er,borderTopWidth:mr}=Zn;mt(an?M.offsetLeft:f7(-parseFloat(er))),bt(an?M.offsetTop:f7(-parseFloat(mr))),It(M.offsetWidth),jt(M.offsetHeight);const{borderTopLeftRadius:Gn,borderTopRightRadius:Qt,borderBottomLeftRadius:Xt,borderBottomRightRadius:Ht}=Zn;Ge([Gn,Qt,Ht,Xt].map(Tn=>f7(parseFloat(Tn))))}if(Ee&&(hn["--wave-color"]=Ee),C.useEffect(()=>{if(M){const Zn=En(()=>{kn(),$t(!0)});let an;return typeof ResizeObserver<"u"&&(an=new ResizeObserver(kn),an.observe(M)),()=>{En.cancel(Zn),an==null||an.disconnect()}}},[]),!Lt)return null;const On=(N==="Checkbox"||N==="Radio")&&(M==null?void 0:M.classList.contains(UM));return C.createElement(wt,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(Zn,an)=>{var er;if(an.deadline||an.propertyName==="opacity"){const mr=(er=G.current)===null||er===void 0?void 0:er.parentElement;(function(Gn){return ZM.apply(this,arguments)})(mr).then(()=>{mr==null||mr.remove()})}return!1}},Zn=>{let{className:an}=Zn;return C.createElement("div",{ref:G,className:Se()(P,{"wave-quick":On},an),style:hn})})};var eX=(x,P)=>{var M;const{component:N}=P;if(N==="Checkbox"&&!(!((M=x.querySelector("input"))===null||M===void 0)&&M.checked))return;const G=document.createElement("div");G.style.position="absolute",G.style.left="0px",G.style.top="0px",x==null||x.insertBefore(G,x==null?void 0:x.firstChild),XG(C.createElement(QG,Object.assign({},P,{target:x})),G)},tX=x=>{const{children:P,disabled:M,component:N}=x,{getPrefixCls:G}=(0,C.useContext)(Do),Ee=(0,C.useRef)(null),Ae=G("wave"),[,Ze]=VG(Ae),Ge=function(it,mt,at){const{wave:bt}=C.useContext(Do),[,gt,It]=T0(),At=cs(Lt=>{const $t=it.current;if(bt!=null&&bt.disabled||!$t)return;const hn=$t.querySelector(`.${UM}`)||$t,{showEffect:kn}=bt||{};(kn||eX)(hn,{className:mt,token:gt,component:at,event:Lt,hashId:It})}),jt=C.useRef();return Lt=>{En.cancel(jt.current),jt.current=En(()=>{At(Lt)})}}(Ee,Se()(Ae,Ze),N);return I().useEffect(()=>{const it=Ee.current;if(!it||it.nodeType!==1||M)return;const mt=at=>{!iu(at.target)||!it.getAttribute||it.getAttribute("disabled")||it.disabled||it.className.includes("disabled")||it.className.includes("-leave")||Ge(at)};return it.addEventListener("click",mt,!0),()=>{it.removeEventListener("click",mt,!0)}},[M]),I().isValidElement(P)?mf(P,{ref:ti(P)?si(P.ref,Ee):Ee}):P??null},WM=(0,C.forwardRef)((x,P)=>{const{className:M,style:N,children:G,prefixCls:Ee}=x,Ae=Se()(`${Ee}-icon`,M);return I().createElement("span",{ref:P,className:Ae,style:N},G)}),nX={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},rX=function(x,P){return C.createElement(ir,(0,X.Z)({},x,{ref:P,icon:nX}))},oX=C.forwardRef(rX);const VM=(0,C.forwardRef)((x,P)=>{let{prefixCls:M,className:N,style:G,iconClassName:Ee}=x;const Ae=Se()(`${M}-loading-icon`,N);return I().createElement(WM,{prefixCls:M,className:Ae,style:G,ref:P},I().createElement(oX,{className:Ee}))}),p7=()=>({width:0,opacity:0,transform:"scale(0)"}),g7=x=>({width:x.scrollWidth,opacity:1,transform:"scale(1)"});var iX=x=>{const{prefixCls:P,loading:M,existIcon:N,className:G,style:Ee}=x,Ae=!!M;return N?I().createElement(VM,{prefixCls:P,className:G,style:Ee}):I().createElement(wt,{visible:Ae,motionName:`${P}-loading-icon-motion`,removeOnLeave:!0,onAppearStart:p7,onAppearActive:g7,onEnterStart:p7,onEnterActive:g7,onLeaveStart:g7,onLeaveActive:p7},(Ze,Ge)=>{let{className:it,style:mt}=Ze;return I().createElement(VM,{prefixCls:P,className:G,style:Object.assign(Object.assign({},Ee),mt),ref:Ge,iconClassName:it})})},aX=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const KM=C.createContext(void 0);var sX=x=>{const{getPrefixCls:P,direction:M}=C.useContext(Do),{prefixCls:N,size:G,className:Ee}=x,Ae=aX(x,["prefixCls","size","className"]),Ze=P("btn-group",N),[,,Ge]=T0();let it="";switch(G){case"large":it="lg";break;case"small":it="sm"}const mt=Se()(Ze,{[`${Ze}-${it}`]:it,[`${Ze}-rtl`]:M==="rtl"},Ee,Ge);return C.createElement(KM.Provider,{value:G},C.createElement("div",Object.assign({},Ae,{className:mt})))};const YM=/^[\u4e00-\u9fa5]{2}$/,m7=YM.test.bind(YM);function v7(x){return x==="text"||x==="link"}function lX(x,P){let M=!1;const N=[];return I().Children.forEach(x,G=>{const Ee=typeof G,Ae=Ee==="string"||Ee==="number";if(M&&Ae){const Ze=N.length-1,Ge=N[Ze];N[Ze]=`${Ge}${G}`}else N.push(G);M=Ae}),I().Children.map(N,G=>function(Ee,Ae){if(Ee==null)return;const Ze=Ae?" ":"";return typeof Ee!="string"&&typeof Ee!="number"&&typeof Ee.type=="string"&&m7(Ee.props.children)?mf(Ee,{children:Ee.props.children.split("").join(Ze)}):typeof Ee=="string"?m7(Ee)?I().createElement("span",null,Ee.split("").join(Ze)):I().createElement("span",null,Ee):NP(Ee)?I().createElement("span",null,Ee):Ee}(G,P))}function cX(x,P,M){const{focusElCls:N,focus:G,borderElCls:Ee}=M,Ae=Ee?"> *":"",Ze=["hover",G?"focus":null,"active"].filter(Boolean).map(Ge=>`&:${Ge} ${Ae}`).join(",");return{[`&-item:not(${P}-last-item)`]:{marginInlineEnd:-x.lineWidth},"&-item":Object.assign(Object.assign({[Ze]:{zIndex:2}},N?{[`&${N}`]:{zIndex:2}}:{}),{[`&[disabled] ${Ae}`]:{zIndex:0}})}}function dX(x,P,M){const{borderElCls:N}=M,G=N?`> ${N}`:"";return{[`&-item:not(${P}-first-item):not(${P}-last-item) ${G}`]:{borderRadius:0},[`&-item:not(${P}-last-item)${P}-first-item`]:{[`& ${G}, &${x}-sm ${G}, &${x}-lg ${G}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${P}-first-item)${P}-last-item`]:{[`& ${G}, &${x}-sm ${G}, &${x}-lg ${G}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function uX(x){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:M}=x,N=`${M}-compact`;return{[N]:Object.assign(Object.assign({},cX(x,N,P)),dX(M,N,P))}}function hX(x,P){return{[`&-item:not(${P}-last-item)`]:{marginBottom:-x.lineWidth},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function fX(x){const P=`${x.componentCls}-compact-vertical`;return{[P]:Object.assign(Object.assign({},hX(x,P)),(M=x.componentCls,N=P,{[`&-item:not(${N}-first-item):not(${N}-last-item)`]:{borderRadius:0},[`&-item${N}-first-item:not(${N}-last-item)`]:{[`&, &${M}-sm, &${M}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${N}-last-item:not(${N}-first-item)`]:{[`&, &${M}-sm, &${M}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}))};var M,N}const GM=(x,P)=>({[`> span, > ${x}`]:{"&:not(:last-child)":{[`&, & > ${x}`]:{"&:not(:disabled)":{borderInlineEndColor:P}}},"&:not(:first-child)":{[`&, & > ${x}`]:{"&:not(:disabled)":{borderInlineStartColor:P}}}}});var pX=x=>{const{componentCls:P,fontSize:M,lineWidth:N,colorPrimaryHover:G,colorErrorHover:Ee}=x;return{[`${P}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${P}`]:{"&:not(:last-child)":{[`&, & > ${P}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:-N,[`&, & > ${P}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[P]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${P}-icon-only`]:{fontSize:M}},GM(`${P}-primary`,G),GM(`${P}-danger`,Ee)]}};const gX=x=>{const{componentCls:P,iconCls:M,buttonFontWeight:N}=x;return{[P]:{outline:"none",position:"relative",display:"inline-block",fontWeight:N,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:`${x.lineWidth}px ${x.lineType} transparent`,cursor:"pointer",transition:`all ${x.motionDurationMid} ${x.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:x.lineHeight,color:x.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${P}-icon`]:{lineHeight:0},[`> ${M} + span, > span + ${M}`]:{marginInlineStart:x.marginXS},[`&:not(${P}-icon-only) > ${P}-icon`]:{[`&${P}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:x.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},Vw(x)),[`&-icon-only${P}-compact-item`]:{flex:"none"},[`&-compact-item${P}-primary`]:{[`&:not([disabled]) + ${P}-compact-item${P}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-x.lineWidth,insetInlineStart:-x.lineWidth,display:"inline-block",width:x.lineWidth,height:`calc(100% + ${2*x.lineWidth}px)`,backgroundColor:x.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${P}-primary`]:{[`&:not([disabled]) + ${P}-compact-vertical-item${P}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:-x.lineWidth,insetInlineStart:-x.lineWidth,display:"inline-block",width:`calc(100% + ${2*x.lineWidth}px)`,height:x.lineWidth,backgroundColor:x.colorPrimaryHover,content:'""'}}}}}}},ih=(x,P,M)=>({[`&:not(:disabled):not(${x}-disabled)`]:{"&:hover":P,"&:active":M}}),mX=x=>({minWidth:x.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),vX=x=>({borderRadius:x.controlHeight,paddingInlineStart:x.controlHeight/2,paddingInlineEnd:x.controlHeight/2}),bX=x=>({cursor:"not-allowed",borderColor:x.colorBorder,color:x.colorTextDisabled,backgroundColor:x.colorBgContainerDisabled,boxShadow:"none"}),S2=(x,P,M,N,G,Ee,Ae)=>({[`&${x}-background-ghost`]:Object.assign(Object.assign({color:P||void 0,backgroundColor:"transparent",borderColor:M||void 0,boxShadow:"none"},ih(x,Object.assign({backgroundColor:"transparent"},Ee),Object.assign({backgroundColor:"transparent"},Ae))),{"&:disabled":{cursor:"not-allowed",color:N||void 0,borderColor:G||void 0}})}),b7=x=>({[`&:disabled, &${x.componentCls}-disabled`]:Object.assign({},bX(x))}),XM=x=>Object.assign({},b7(x)),a5=x=>({[`&:disabled, &${x.componentCls}-disabled`]:{cursor:"not-allowed",color:x.colorTextDisabled}}),qM=x=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},XM(x)),{backgroundColor:x.colorBgContainer,borderColor:x.colorBorder,boxShadow:`0 ${x.controlOutlineWidth}px 0 ${x.controlTmpOutline}`}),ih(x.componentCls,{color:x.colorPrimaryHover,borderColor:x.colorPrimaryHover},{color:x.colorPrimaryActive,borderColor:x.colorPrimaryActive})),S2(x.componentCls,x.colorBgContainer,x.colorBgContainer,x.colorTextDisabled,x.colorBorder)),{[`&${x.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:x.colorError,borderColor:x.colorError},ih(x.componentCls,{color:x.colorErrorHover,borderColor:x.colorErrorBorderHover},{color:x.colorErrorActive,borderColor:x.colorErrorActive})),S2(x.componentCls,x.colorError,x.colorError,x.colorTextDisabled,x.colorBorder)),b7(x))}),yX=x=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},XM(x)),{color:x.colorTextLightSolid,backgroundColor:x.colorPrimary,boxShadow:`0 ${x.controlOutlineWidth}px 0 ${x.controlOutline}`}),ih(x.componentCls,{color:x.colorTextLightSolid,backgroundColor:x.colorPrimaryHover},{color:x.colorTextLightSolid,backgroundColor:x.colorPrimaryActive})),S2(x.componentCls,x.colorPrimary,x.colorPrimary,x.colorTextDisabled,x.colorBorder,{color:x.colorPrimaryHover,borderColor:x.colorPrimaryHover},{color:x.colorPrimaryActive,borderColor:x.colorPrimaryActive})),{[`&${x.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({backgroundColor:x.colorError,boxShadow:`0 ${x.controlOutlineWidth}px 0 ${x.colorErrorOutline}`},ih(x.componentCls,{backgroundColor:x.colorErrorHover},{backgroundColor:x.colorErrorActive})),S2(x.componentCls,x.colorError,x.colorError,x.colorTextDisabled,x.colorBorder,{color:x.colorErrorHover,borderColor:x.colorErrorHover},{color:x.colorErrorActive,borderColor:x.colorErrorActive})),b7(x))}),xX=x=>Object.assign(Object.assign({},qM(x)),{borderStyle:"dashed"}),wX=x=>Object.assign(Object.assign(Object.assign({color:x.colorLink},ih(x.componentCls,{color:x.colorLinkHover},{color:x.colorLinkActive})),a5(x)),{[`&${x.componentCls}-dangerous`]:Object.assign(Object.assign({color:x.colorError},ih(x.componentCls,{color:x.colorErrorHover},{color:x.colorErrorActive})),a5(x))}),CX=x=>Object.assign(Object.assign(Object.assign({},ih(x.componentCls,{color:x.colorText,backgroundColor:x.colorBgTextHover},{color:x.colorText,backgroundColor:x.colorBgTextActive})),a5(x)),{[`&${x.componentCls}-dangerous`]:Object.assign(Object.assign({color:x.colorError},a5(x)),ih(x.componentCls,{color:x.colorErrorHover,backgroundColor:x.colorErrorBg},{color:x.colorErrorHover,backgroundColor:x.colorErrorBg}))}),SX=x=>{const{componentCls:P}=x;return{[`${P}-default`]:qM(x),[`${P}-primary`]:yX(x),[`${P}-dashed`]:xX(x),[`${P}-link`]:wX(x),[`${P}-text`]:CX(x),[`${P}-ghost`]:S2(x.componentCls,x.colorBgContainer,x.colorBgContainer,x.colorTextDisabled,x.colorBorder)}},y7=function(x){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:M,controlHeight:N,fontSize:G,lineHeight:Ee,lineWidth:Ae,borderRadius:Ze,buttonPaddingHorizontal:Ge,iconCls:it}=x,mt=Math.max(0,(N-G*Ee)/2-Ae),at=Ge-Ae,bt=`${M}-icon-only`;return[{[`${M}${P}`]:{fontSize:G,height:N,padding:`${mt}px ${at}px`,borderRadius:Ze,[`&${bt}`]:{width:N,paddingInlineStart:0,paddingInlineEnd:0,[`&${M}-round`]:{width:"auto"},[it]:{fontSize:x.buttonIconOnlyFontSize}},[`&${M}-loading`]:{opacity:x.opacityLoading,cursor:"default"},[`${M}-loading-icon`]:{transition:`width ${x.motionDurationSlow} ${x.motionEaseInOut}, opacity ${x.motionDurationSlow} ${x.motionEaseInOut}`}}},{[`${M}${M}-circle${P}`]:mX(x)},{[`${M}${M}-round${P}`]:vX(x)}]},kX=x=>y7(x),_X=x=>{const P=pu(x,{controlHeight:x.controlHeightSM,padding:x.paddingXS,buttonPaddingHorizontal:8,borderRadius:x.borderRadiusSM,buttonIconOnlyFontSize:x.fontSizeLG-2});return y7(P,`${x.componentCls}-sm`)},EX=x=>{const P=pu(x,{controlHeight:x.controlHeightLG,fontSize:x.fontSizeLG,borderRadius:x.borderRadiusLG,buttonIconOnlyFontSize:x.fontSizeLG+2});return y7(P,`${x.componentCls}-lg`)},PX=x=>{const{componentCls:P}=x;return{[P]:{[`&${P}-block`]:{width:"100%"}}}};var MX=D0("Button",x=>{const{controlTmpOutline:P,paddingContentHorizontal:M}=x,N=pu(x,{colorOutlineDefault:P,buttonPaddingHorizontal:M,buttonIconOnlyFontSize:x.fontSizeLG,buttonFontWeight:400});return[gX(N),_X(N),kX(N),EX(N),PX(N),SX(N),pX(N),uX(x),fX(x)]}),IX=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const TX=(x,P)=>{var M,N;const{loading:G=!1,prefixCls:Ee,type:Ae="default",danger:Ze,shape:Ge="default",size:it,styles:mt,disabled:at,className:bt,rootClassName:gt,children:It,icon:At,ghost:jt=!1,block:Lt=!1,htmlType:$t="button",classNames:hn,style:kn={}}=x,On=IX(x,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:Zn,autoInsertSpaceInButton:an,direction:er,button:mr}=(0,C.useContext)(Do),Gn=Zn("btn",Ee),[Qt,Xt]=MX(Gn),Ht=(0,C.useContext)(IP),Tn=at??Ht,fn=(0,C.useContext)(KM),Vn=(0,C.useMemo)(()=>function(Xr){if(typeof Xr=="object"&&Xr){const Ii=Xr==null?void 0:Xr.delay;return{loading:!1,delay:Number.isNaN(Ii)||typeof Ii!="number"?0:Ii}}return{loading:!!Xr,delay:0}}(G),[G]),[rr,_r]=(0,C.useState)(Vn.loading),[xr,$r]=(0,C.useState)(!1),Or=si(P,(0,C.createRef)()),zr=C.Children.count(It)===1&&!At&&!v7(Ae);(0,C.useEffect)(()=>{let Xr=null;return Vn.delay>0?Xr=setTimeout(()=>{Xr=null,_r(!0)},Vn.delay):_r(Vn.loading),function(){Xr&&(clearTimeout(Xr),Xr=null)}},[Vn]),(0,C.useEffect)(()=>{if(!Or||!Or.current||an===!1)return;const Xr=Or.current.textContent;zr&&m7(Xr)?xr||$r(!0):xr&&$r(!1)},[Or]);const Jr=Xr=>{const{onClick:Ii}=x;rr||Tn?Xr.preventDefault():Ii==null||Ii(Xr)},Br=an!==!1,{compactSize:ro,compactItemClassnames:Qr}=gM(Gn,er),Ao={large:"lg",small:"sm",middle:void 0},To=uM(Xr=>{var Ii,li;return(li=(Ii=it??ro)!==null&&Ii!==void 0?Ii:fn)!==null&&li!==void 0?li:Xr}),No=To&&Ao[To]||"",Uo=rr?"loading":At,zo=Jo(On,["navigate"]),Fo=Se()(Gn,Xt,{[`${Gn}-${Ge}`]:Ge!=="default"&&Ge,[`${Gn}-${Ae}`]:Ae,[`${Gn}-${No}`]:No,[`${Gn}-icon-only`]:!It&&It!==0&&!!Uo,[`${Gn}-background-ghost`]:jt&&!v7(Ae),[`${Gn}-loading`]:rr,[`${Gn}-two-chinese-chars`]:xr&&Br&&!rr,[`${Gn}-block`]:Lt,[`${Gn}-dangerous`]:!!Ze,[`${Gn}-rtl`]:er==="rtl"},Qr,bt,gt,mr==null?void 0:mr.className),ni=Object.assign(Object.assign({},mr==null?void 0:mr.style),kn),jr=Se()(hn==null?void 0:hn.icon,(M=mr==null?void 0:mr.classNames)===null||M===void 0?void 0:M.icon),Zr=Object.assign(Object.assign({},(mt==null?void 0:mt.icon)||{}),((N=mr==null?void 0:mr.styles)===null||N===void 0?void 0:N.icon)||{}),po=At&&!rr?I().createElement(WM,{prefixCls:Gn,className:jr,style:Zr},At):I().createElement(iX,{existIcon:!!At,prefixCls:Gn,loading:!!rr}),yo=It||It===0?lX(It,zr&&Br):null;if(zo.href!==void 0)return Qt(I().createElement("a",Object.assign({},zo,{className:Se()(Fo,{[`${Gn}-disabled`]:Tn}),style:ni,onClick:Jr,ref:Or}),po,yo));let _o=I().createElement("button",Object.assign({},On,{type:$t,className:Fo,style:ni,onClick:Jr,disabled:Tn,ref:Or}),po,yo);return v7(Ae)||(_o=I().createElement(tX,{component:"Button",disabled:!!rr},_o)),Qt(_o)},x7=(0,C.forwardRef)(TX);x7.Group=sX,x7.__ANT_BUTTON=!0;var JM=x7;let s5;const OX=()=>{if(!Rn()||!window.document.documentElement)return!1;if(s5!==void 0)return s5;const x=document.createElement("div");x.style.display="flex",x.style.flexDirection="column",x.style.rowGap="1px",x.appendChild(document.createElement("div")),x.appendChild(document.createElement("div"));const P=document.createElement("div");return P.style.position="absolute",P.style.zIndex="-9999",P.appendChild(x),document.body.appendChild(P),s5=x.scrollHeight===1,document.body.removeChild(P),s5},QM=I().createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),AX=QM.Provider;var LX=x=>{let{className:P,direction:M,index:N,marginDirection:G,children:Ee,split:Ae,wrap:Ze,style:Ge}=x;const{horizontalSize:it,verticalSize:mt,latestIndex:at,supportFlexGap:bt}=C.useContext(QM);let gt={};return bt||(M==="vertical"?N<at&&(gt={marginBottom:it/(Ae?2:1)}):gt=Object.assign(Object.assign({},N<at&&{[G]:it/(Ae?2:1)}),Ze&&{paddingBottom:mt})),Ee==null?null:C.createElement(C.Fragment,null,C.createElement("div",{className:P,style:Object.assign(Object.assign({},gt),Ge)},Ee),N<at&&Ae&&C.createElement("span",{className:`${P}-split`,style:gt},Ae))},$X=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const jX={small:8,middle:16,large:24},eI=C.forwardRef((x,P)=>{var M,N;const{getPrefixCls:G,space:Ee,direction:Ae}=C.useContext(Do),{size:Ze=(Ee==null?void 0:Ee.size)||"small",align:Ge,className:it,rootClassName:mt,children:at,direction:bt="horizontal",prefixCls:gt,split:It,style:At,wrap:jt=!1,classNames:Lt,styles:$t}=x,hn=$X(x,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),kn=(()=>{const[xr,$r]=C.useState(!1);return C.useEffect(()=>{$r(OX())},[]),xr})(),[On,Zn]=C.useMemo(()=>(Array.isArray(Ze)?Ze:[Ze,Ze]).map(xr=>function($r){return typeof $r=="string"?jX[$r]:$r||0}(xr)),[Ze]),an=wi(at,{keepEmpty:!0}),er=Ge===void 0&&bt==="horizontal"?"center":Ge,mr=G("space",gt),[Gn,Qt]=fM(mr),Xt=Se()(mr,Ee==null?void 0:Ee.className,Qt,`${mr}-${bt}`,{[`${mr}-rtl`]:Ae==="rtl",[`${mr}-align-${er}`]:er},it,mt),Ht=Se()(`${mr}-item`,(M=Lt==null?void 0:Lt.item)!==null&&M!==void 0?M:(N=Ee==null?void 0:Ee.classNames)===null||N===void 0?void 0:N.item),Tn=Ae==="rtl"?"marginLeft":"marginRight";let fn=0;const Vn=an.map((xr,$r)=>{var Or,zr;xr!=null&&(fn=$r);const Jr=xr&&xr.key||`${Ht}-${$r}`;return C.createElement(LX,{className:Ht,key:Jr,direction:bt,index:$r,marginDirection:Tn,split:It,wrap:jt,style:(Or=$t==null?void 0:$t.item)!==null&&Or!==void 0?Or:(zr=Ee==null?void 0:Ee.styles)===null||zr===void 0?void 0:zr.item},xr)}),rr=C.useMemo(()=>({horizontalSize:On,verticalSize:Zn,latestIndex:fn,supportFlexGap:kn}),[On,Zn,fn,kn]);if(an.length===0)return null;const _r={};return jt&&(_r.flexWrap="wrap",kn||(_r.marginBottom=-Zn)),kn&&(_r.columnGap=On,_r.rowGap=Zn),Gn(C.createElement("div",Object.assign({ref:P,className:Xt,style:Object.assign(Object.assign(Object.assign({},_r),Ee==null?void 0:Ee.style),At)},hn),C.createElement(AX,{value:rr},Vn)))});eI.Compact=GY;var RX=eI,DX=function(x,P){var M={};for(var N in x)Object.prototype.hasOwnProperty.call(x,N)&&P.indexOf(N)<0&&(M[N]=x[N]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(N=Object.getOwnPropertySymbols(x);G<N.length;G++)P.indexOf(N[G])<0&&Object.prototype.propertyIsEnumerable.call(x,N[G])&&(M[N[G]]=x[N[G]])}return M};const tI=x=>{const{getPopupContainer:P,getPrefixCls:M,direction:N}=C.useContext(Do),{prefixCls:G,type:Ee="default",danger:Ae,disabled:Ze,loading:Ge,onClick:it,htmlType:mt,children:at,className:bt,menu:gt,arrow:It,autoFocus:At,overlay:jt,trigger:Lt,align:$t,open:hn,onOpenChange:kn,placement:On,getPopupContainer:Zn,href:an,icon:er=C.createElement(_M,null),title:mr,buttonsRender:Gn=Uo=>Uo,mouseEnterDelay:Qt,mouseLeaveDelay:Xt,overlayClassName:Ht,overlayStyle:Tn,destroyPopupOnHide:fn,dropdownRender:Vn}=x,rr=DX(x,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),_r=M("dropdown",G),xr=`${_r}-button`,[$r,Or]=DM(_r),zr={menu:gt,arrow:It,autoFocus:At,align:$t,disabled:Ze,trigger:Ze?[]:Lt,onOpenChange:kn,getPopupContainer:Zn||P,mouseEnterDelay:Qt,mouseLeaveDelay:Xt,overlayClassName:Ht,overlayStyle:Tn,destroyPopupOnHide:fn,dropdownRender:Vn},{compactSize:Jr,compactItemClassnames:Br}=gM(_r,N),ro=Se()(xr,Br,bt,Or);"overlay"in x&&(zr.overlay=jt),"open"in x&&(zr.open=hn),zr.placement="placement"in x?On:N==="rtl"?"bottomLeft":"bottomRight";const Qr=C.createElement(JM,{type:Ee,danger:Ae,disabled:Ze,loading:Ge,onClick:it,htmlType:mt,href:an,title:mr},at),Ao=C.createElement(JM,{type:Ee,danger:Ae,icon:er}),[To,No]=Gn([Qr,Ao]);return $r(C.createElement(RX.Compact,Object.assign({className:ro,size:Jr,block:!0},rr),To,C.createElement(NM,Object.assign({},zr),No)))};tI.__ANT_BUTTON=!0;var NX=tI;const nI=NM;nI.Button=NX;var zX=nI,BX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const HX=((x,P)=>{const M=(0,C.forwardRef)(({color:N="currentColor",size:G=24,strokeWidth:Ee=2,absoluteStrokeWidth:Ae,children:Ze,...Ge},it)=>{return(0,C.createElement)("svg",{ref:it,...BX,width:G,height:G,stroke:N,strokeWidth:Ae?24*Number(Ee)/Number(G):Ee,className:`lucide lucide-${mt=x,mt.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...Ge},[...P.map(([at,bt])=>(0,C.createElement)(at,bt)),...(Array.isArray(Ze)?Ze:[Ze])||[]]);var mt});return M.displayName=`${x}`,M})("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function rI(x,P){var M=Object.keys(x);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(x);P&&(N=N.filter(function(G){return Object.getOwnPropertyDescriptor(x,G).enumerable})),M.push.apply(M,N)}return M}function Hi(x){for(var P=1;P<arguments.length;P++){var M=arguments[P]!=null?arguments[P]:{};P%2?rI(Object(M),!0).forEach(function(N){(0,b.Z)(x,N,M[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(M)):rI(Object(M)).forEach(function(N){Object.defineProperty(x,N,Object.getOwnPropertyDescriptor(M,N))})}return x}var lc=function(x,P,M){var N=arguments.length>3&&arguments[3]!==void 0&&arguments[3],G=(0,he.xn)((0,ae.eD)(x,P,{includeBoundTextElement:N}));return x.map(function(Ee){var Ae;return G.get(Ee.id)||Ee.id===((Ae=P.editingElement)===null||Ae===void 0?void 0:Ae.id)?M(Ee):Ee})},Ll=function(x,P,M,N){var G,Ee,Ae=P.editingElement,Ze=(0,ce.Lm)(x);return(G=(Ee=Ae&&M(Ae))!==null&&Ee!==void 0?Ee:(0,ae.N)(Ze,P)?(0,ae.PR)(Ze,P,M):N)!==null&&G!==void 0?G:N},w7=function(x,P,M,N){var G=new Set;return{elements:lc(x,P,function(Ee){if((0,ce.iB)(Ee)){var Ae=M(Ee);G.add(Ae);var Ze=(0,U.BE)(Ee,{fontSize:Ae});return(0,ce.oN)(Ze,(0,ve.tl)(Ee)),Ge=Ee,it=Ze,Ze=(0,oe.Xh)(it)?it:(0,U.DR)(it,{x:Ge.textAlign==="left"?Ge.x:Ge.x+(Ge.width-it.width)/(Ge.textAlign==="center"?2:1),y:Ge.y+(Ge.height-it.height)/2},!1)}var Ge,it;return Ee},!0),appState:Hi(Hi({},P),{},{currentItemFontSize:G.size===1?(0,m.Z)(G)[0]:N??P.currentItemFontSize}),commitToHistory:!0}},FX=((0,se.z)({name:"changeStrokeColor",trackEvent:!1,perform:function(x,P,M){return Hi(Hi({},M.currentItemStrokeColor&&{elements:lc(x,P,function(N){return(0,me.PD)(N.type)?(0,U.BE)(N,{strokeColor:M.currentItemStrokeColor}):N},!0)}),{},{appState:Hi(Hi({},P),M),commitToHistory:!!M.currentItemStrokeColor})},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return x.appProps,(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{"aria-hidden":"true",children:(0,Y.t)("labels.stroke")}),(0,k.jsx)(S.z,{topPicks:v.fY,palette:v.Wk,type:"elementStroke",label:(0,Y.t)("labels.stroke"),color:Ll(P,M,function(G){return G.strokeColor},M.currentItemStrokeColor),onChange:function(G){return N({currentItemStrokeColor:G})},elements:P,appState:M,updateData:N})]})}}),(0,se.z)({name:"changeBackgroundColor",trackEvent:!1,perform:function(x,P,M){return Hi(Hi({},M.currentItemBackgroundColor&&{elements:lc(x,P,function(N){return(0,U.BE)(N,{backgroundColor:M.currentItemBackgroundColor})})}),{},{appState:Hi(Hi({},P),M),commitToHistory:!!M.currentItemBackgroundColor})},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return x.appProps,(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{"aria-hidden":"true",children:(0,Y.t)("labels.background")}),(0,k.jsx)(S.z,{topPicks:v.eq,palette:v.SF,type:"elementBackground",label:(0,Y.t)("labels.background"),color:Ll(P,M,function(G){return G.backgroundColor},M.currentItemBackgroundColor),onChange:function(G){return N({currentItemBackgroundColor:G})},elements:P,appState:M,updateData:N})]})}}),(0,se.z)({name:"changeFillStyle",trackEvent:!1,perform:function(x,P,M,N){return(0,w.L)("element","changeFillStyle","".concat(M," (").concat(N.device.isMobile?"mobile":"desktop",")")),{elements:lc(x,P,function(G){return(0,U.BE)(G,{fillStyle:M})}),appState:Hi(Hi({},P),{},{currentItemFillStyle:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData,G=(0,ae.eD)(P,M),Ee=G.length>0&&G.every(function(Ae){return Ae.fillStyle==="zigzag"});return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.fill")}),(0,k.jsx)(y,{type:"button",options:[{value:"hachure",text:"".concat(Ee?(0,Y.t)("labels.zigzag"):(0,Y.t)("labels.hachure")," (").concat((0,he.uY)("Alt-Click"),")"),icon:Ee?q.lF:q.a0,active:!!Ee||void 0},{value:"cross-hatch",text:(0,Y.t)("labels.crossHatch"),icon:q.np},{value:"solid",text:(0,Y.t)("labels.solid"),icon:q.X7}],value:Ll(P,M,function(Ae){return Ae.fillStyle},M.currentItemFillStyle),onClick:function(Ae,Ze){var Ge=Ze.altKey&&Ae==="hachure"&&G.every(function(it){return it.fillStyle==="hachure"})?"zigzag":Ae;N(Ge)}})]})}}),(0,se.z)({name:"changeStrokeWidth",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){return(0,U.BE)(N,{strokeWidth:M})}),appState:Hi(Hi({},P),{},{currentItemStrokeWidth:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.strokeWidth")}),(0,k.jsx)(y,{group:"stroke-width",options:[{value:1,text:(0,Y.t)("labels.thin"),icon:q.ZA},{value:2,text:(0,Y.t)("labels.bold"),icon:q.Wl},{value:4,text:(0,Y.t)("labels.extraBold"),icon:q.m9}],value:Ll(P,M,function(G){return G.strokeWidth},M.currentItemStrokeWidth),onChange:function(G){return N(G)}})]})}}),(0,se.z)({name:"changeSloppiness",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){return(0,U.BE)(N,{seed:(0,re.LU)(),roughness:M})}),appState:Hi(Hi({},P),{},{currentItemRoughness:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.sloppiness")}),(0,k.jsx)(y,{group:"sloppiness",options:[{value:0,text:(0,Y.t)("labels.architect"),icon:q.bf},{value:1,text:(0,Y.t)("labels.artist"),icon:q.kM},{value:2,text:(0,Y.t)("labels.cartoonist"),icon:q.W2}],value:Ll(P,M,function(G){return G.roughness},M.currentItemRoughness),onChange:function(G){return N(G)}})]})}}),(0,se.z)({name:"changeStrokeStyle",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){return(0,U.BE)(N,{strokeStyle:M})}),appState:Hi(Hi({},P),{},{currentItemStrokeStyle:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.strokeStyle")}),(0,k.jsx)(y,{group:"strokeStyle",options:[{value:"solid",text:(0,Y.t)("labels.strokeStyle_solid"),icon:q.ZA},{value:"dashed",text:(0,Y.t)("labels.strokeStyle_dashed"),icon:q.a5},{value:"dotted",text:(0,Y.t)("labels.strokeStyle_dotted"),icon:q.aT}],value:Ll(P,M,function(G){return G.strokeStyle},M.currentItemStrokeStyle),onChange:function(G){return N(G)}})]})}}),(0,se.z)({name:"changeOpacity",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){return(0,U.BE)(N,{opacity:M})},!0),appState:Hi(Hi({},P),{},{currentItemOpacity:M}),commitToHistory:!0}},PanelComponent:function(x){var P,M=x.elements,N=x.appState,G=x.updateData;return(0,k.jsxs)("label",{className:"control-label",children:[(0,Y.t)("labels.opacity"),(0,k.jsx)("input",{type:"range",min:"0",max:"100",step:"10",onChange:function(Ee){return G(+Ee.target.value)},value:(P=Ll(M,N,function(Ee){return Ee.opacity},N.currentItemOpacity))!==null&&P!==void 0?P:void 0})]})}}),(0,se.z)({name:"changeFontSize",trackEvent:!1,perform:function(x,P,M){return w7(x,P,function(){return M},M)},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.fontSize")}),(0,k.jsx)(y,{group:"font-size",options:[{value:16,text:(0,Y.t)("labels.small"),icon:q.q0,testId:"fontSize-small"},{value:20,text:(0,Y.t)("labels.medium"),icon:q.nq,testId:"fontSize-medium"},{value:28,text:(0,Y.t)("labels.large"),icon:q.tW,testId:"fontSize-large"},{value:36,text:(0,Y.t)("labels.veryLarge"),icon:q.OA,testId:"fontSize-veryLarge"}],value:Ll(P,M,function(G){if((0,ce.iB)(G))return G.fontSize;var Ee=(0,ve.WJ)(G);return Ee?Ee.fontSize:null},M.currentItemFontSize||fe.n5),onChange:function(G){return N(G)}})]})}}),(0,se.z)({name:"decreaseFontSize",trackEvent:!1,perform:function(x,P,M){return w7(x,P,function(N){return Math.round(1/1.1*N.fontSize)})},keyTest:function(x){return x[R.tW.CTRL_OR_CMD]&&x.shiftKey&&(x.key===R.tW.CHEVRON_LEFT||x.key===R.tW.COMMA)}})),ZX=(0,se.z)({name:"increaseFontSize",trackEvent:!1,perform:function(x,P,M){return w7(x,P,function(N){return Math.round(1.1*N.fontSize)})},keyTest:function(x){return x[R.tW.CTRL_OR_CMD]&&x.shiftKey&&(x.key===R.tW.CHEVRON_RIGHT||x.key===R.tW.PERIOD)}});(0,se.z)({name:"changeFontFamily",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){if((0,ce.iB)(N)){var G=(0,U.BE)(N,{fontFamily:M,lineHeight:(0,ve.PT)(M)});return(0,ce.oN)(G,(0,ve.tl)(N)),G}return N},!0),appState:Hi(Hi({},P),{},{currentItemFontFamily:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData,G=(0,ge.B)(),Ee=[{value:G[fe.Zj],text:(0,Y.t)("labels.handDrawn"),icon:q.Pm},{value:G.Helvetica,text:(0,Y.t)("labels.normal"),icon:q.vo},{value:G.Cascadia,text:(0,Y.t)("labels.code"),icon:q.z6}];return Object.entries(G).forEach(function(Ae){var Ze,Ge=(0,g.Z)(Ae,2),it=Ge[0],mt=Ge[1];typeof mt=="number"&&mt<4||Ee.push({value:mt,text:it,icon:(0,k.jsx)(zX,{trigger:["contextMenu"],menu:{items:[{key:"delete",icon:(0,k.jsx)(HX,{style:{width:12}}),label:(0,k.jsx)("span",{style:{fontSize:12},children:(0,Y.t)("labels.delete")}),onClick:function(){(0,ge.s)(it),window.location.reload()}}]},children:(0,k.jsx)("span",{children:(Ze=it.slice(0,2))===null||Ze===void 0?void 0:Ze.toUpperCase()})})})}),(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.fontFamily")}),(0,k.jsx)(y,{group:"font-family",options:Ee,value:Ll(P,M,function(Ae){if((0,ce.iB)(Ae))return Ae.fontFamily;var Ze=(0,ve.WJ)(Ae);return Ze?Ze.fontFamily:null},M.currentItemFontFamily||fe.rk),onChange:function(Ae){return N(Ae)}})]})}}),(0,se.z)({name:"changeTextAlign",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){if((0,ce.iB)(N)){var G=(0,U.BE)(N,{textAlign:M});return(0,ce.oN)(G,(0,ve.tl)(N)),G}return N},!0),appState:Hi(Hi({},P),{},{currentItemTextAlign:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.textAlign")}),(0,k.jsx)(y,{group:"text-align",options:[{value:"left",text:(0,Y.t)("labels.left"),icon:q.rr,testId:"align-left"},{value:"center",text:(0,Y.t)("labels.center"),icon:q.o3,testId:"align-horizontal-center"},{value:"right",text:(0,Y.t)("labels.right"),icon:q.oT,testId:"align-right"}],value:Ll(P,M,function(G){if((0,ce.iB)(G))return G.textAlign;var Ee=(0,ve.WJ)(G);return Ee?Ee.textAlign:null},M.currentItemTextAlign),onChange:function(G){return N(G)}})]})}}),(0,se.z)({name:"changeVerticalAlign",trackEvent:{category:"element"},perform:function(x,P,M){return{elements:lc(x,P,function(N){if((0,ce.iB)(N)){var G=(0,U.BE)(N,{verticalAlign:M});return(0,ce.oN)(G,(0,ve.tl)(N)),G}return N},!0),appState:Hi({},P),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData;return(0,k.jsx)("fieldset",{children:(0,k.jsx)(y,{group:"text-align",options:[{value:fe.oX.TOP,text:(0,Y.t)("labels.alignTop"),icon:(0,k.jsx)(q.EO,{theme:M.theme}),testId:"align-top"},{value:fe.oX.MIDDLE,text:(0,Y.t)("labels.centerVertically"),icon:(0,k.jsx)(q.P7,{theme:M.theme}),testId:"align-middle"},{value:fe.oX.BOTTOM,text:(0,Y.t)("labels.alignBottom"),icon:(0,k.jsx)(q.aA,{theme:M.theme}),testId:"align-bottom"}],value:Ll(P,M,function(G){if((0,ce.iB)(G)&&G.containerId)return G.verticalAlign;var Ee=(0,ve.WJ)(G);return Ee?Ee.verticalAlign:null},fe.oX.MIDDLE),onChange:function(G){return N(G)}})})}}),(0,se.z)({name:"changeRoundness",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){return(0,U.BE)(N,{roundness:M==="round"?{type:(0,oe.QI)(N.type)?fe.a6.ADAPTIVE_RADIUS:fe.a6.PROPORTIONAL_RADIUS}:null})}),appState:Hi(Hi({},P),{},{currentItemRoundness:M}),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData,G=(0,ae.Zs)((0,ce.Lm)(P),M).some(function(Ee){var Ae;return((Ae=Ee.roundness)===null||Ae===void 0?void 0:Ae.type)===fe.a6.LEGACY});return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.edges")}),(0,k.jsx)(y,{group:"edges",options:[{value:"sharp",text:(0,Y.t)("labels.sharp"),icon:q.wr},{value:"round",text:(0,Y.t)("labels.round"),icon:q.DS}],value:Ll(P,M,function(Ee){return G?null:Ee.roundness?"round":"sharp"},(0,ae.sh)(M.activeTool.type)&&M.currentItemRoundness||null),onChange:function(Ee){return N(Ee)}})]})}}),(0,se.z)({name:"changeArrowhead",trackEvent:!1,perform:function(x,P,M){return{elements:lc(x,P,function(N){if((0,oe.bt)(N)){var G=M.position,Ee=M.type;if(G==="start")return(0,U.BE)(N,{startArrowhead:Ee});if(G==="end")return(0,U.BE)(N,{endArrowhead:Ee})}return N}),appState:Hi(Hi({},P),{},(0,b.Z)({},M.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead",M.type)),commitToHistory:!0}},PanelComponent:function(x){var P=x.elements,M=x.appState,N=x.updateData,G=(0,Y.G3)().rtl;return(0,k.jsxs)("fieldset",{children:[(0,k.jsx)("legend",{children:(0,Y.t)("labels.arrowheads")}),(0,k.jsxs)("div",{className:"iconSelectList buttonList",children:[(0,k.jsx)(z,{label:"arrowhead_start",options:[{value:null,text:(0,Y.t)("labels.arrowhead_none"),icon:q.fr,keyBinding:"q"},{value:"arrow",text:(0,Y.t)("labels.arrowhead_arrow"),icon:(0,k.jsx)(q.il,{flip:!G}),keyBinding:"w"},{value:"bar",text:(0,Y.t)("labels.arrowhead_bar"),icon:(0,k.jsx)(q.m,{flip:!G}),keyBinding:"e"},{value:"dot",text:(0,Y.t)("labels.arrowhead_dot"),icon:(0,k.jsx)(q.tn,{flip:!G}),keyBinding:"r"},{value:"triangle",text:(0,Y.t)("labels.arrowhead_triangle"),icon:(0,k.jsx)(q.j8,{flip:!G}),keyBinding:"t"}],value:Ll(P,M,function(Ee){return(0,oe.bt)(Ee)&&(0,ae.Un)(Ee.type)?Ee.startArrowhead:M.currentItemStartArrowhead},M.currentItemStartArrowhead),onChange:function(Ee){return N({position:"start",type:Ee})}}),(0,k.jsx)(z,{label:"arrowhead_end",group:"arrowheads",options:[{value:null,text:(0,Y.t)("labels.arrowhead_none"),keyBinding:"q",icon:q.fr},{value:"arrow",text:(0,Y.t)("labels.arrowhead_arrow"),keyBinding:"w",icon:(0,k.jsx)(q.il,{flip:G})},{value:"bar",text:(0,Y.t)("labels.arrowhead_bar"),keyBinding:"e",icon:(0,k.jsx)(q.m,{flip:G})},{value:"dot",text:(0,Y.t)("labels.arrowhead_dot"),keyBinding:"r",icon:(0,k.jsx)(q.tn,{flip:G})},{value:"triangle",text:(0,Y.t)("labels.arrowhead_triangle"),icon:(0,k.jsx)(q.j8,{flip:G}),keyBinding:"t"}],value:Ll(P,M,function(Ee){return(0,oe.bt)(Ee)&&(0,ae.Un)(Ee.type)?Ee.endArrowhead:M.currentItemEndArrowhead},M.currentItemEndArrowhead),onChange:function(Ee){return N({position:"end",type:Ee})}})]})]})}})},4958:function(f,h,c){c.d(h,{u:function(){return _}});var g=c(7169),m=c(7901),b=c(6066);function v(k,y){var S=Object.keys(k);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(k);y&&(C=C.filter(function(I){return Object.getOwnPropertyDescriptor(k,I).enumerable})),S.push.apply(S,C)}return S}function w(k){for(var y=1;y<arguments.length;y++){var S=arguments[y]!=null?arguments[y]:{};y%2?v(Object(S),!0).forEach(function(C){(0,g.Z)(k,C,S[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(S)):v(Object(S)).forEach(function(C){Object.defineProperty(k,C,Object.getOwnPropertyDescriptor(S,C))})}return k}var _=(0,m.z)({name:"stats",viewMode:!0,trackEvent:{category:"menu"},perform:function(k,y){return{appState:w(w({},y),{},{showStats:!this.checked(y)}),commitToHistory:!1}},checked:function(k){return k.showStats},contextItemLabel:"stats.title",keyTest:function(k){return!k[b.tW.CTRL_OR_CMD]&&k.altKey&&k.code===b.aU.SLASH}})},1781:function(f,h,c){c.d(h,{FL:function(){return Nt},vD:function(){return An.vD},yA:function(){return I},BZ:function(){return T},mo:function(){return re.mo},uN:function(){return yn.uN},jK:function(){return yn.jK},FA:function(){return yn.FA},pw:function(){return xe},ZM:function(){return yn.ZM},X9:function(){return g.X},xF:function(){return ve},pL:function(){return we},jl:function(){return $n},kt:function(){return Kn},EQ:function(){return Ie},nz:function(){return pn.nz},_d:function(){return be._d},W3:function(){return Pe},mM:function(){return be.mM},ns:function(){return be.ns},Yy:function(){return Z},V:function(){return C},zi:function(){return A},jY:function(){return Re},$h:function(){return mn.$},Pb:function(){return Nn},Qs:function(){return Fn},u0:function(){return Vt.u},Zp:function(){return re.Zp},JN:function(){return Ir},y7:function(){return An.y7},s:function(){return ot},zp:function(){return yn.zp}});var g=c(533),m=c(7642),b=c(6066),v=c(8211),w=c(6340),_=c(7901),k=c(3646),y=c(2335),S=c(9980),C=(0,_.z)({name:"sendBackward",trackEvent:{category:"element"},perform:function(De,Ue){return{elements:(0,m.ux)(De,Ue),appState:Ue,commitToHistory:!0}},contextItemLabel:"labels.sendBackward",keyPriority:40,keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&!De.shiftKey&&De.code===b.aU.BRACKET_LEFT},PanelComponent:function(De){var Ue=De.updateData;return De.appState,(0,S.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(){return Ue(null)},title:"".concat((0,v.t)("labels.sendBackward"),"  ").concat((0,w.uY)("CtrlOrCmd+[")),children:k.Gc})}}),I=(0,_.z)({name:"bringForward",trackEvent:{category:"element"},perform:function(De,Ue){return{elements:(0,m.jY)(De,Ue),appState:Ue,commitToHistory:!0}},contextItemLabel:"labels.bringForward",keyPriority:40,keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&!De.shiftKey&&De.code===b.aU.BRACKET_RIGHT},PanelComponent:function(De){var Ue=De.updateData;return De.appState,(0,S.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(){return Ue(null)},title:"".concat((0,v.t)("labels.bringForward"),"  ").concat((0,w.uY)("CtrlOrCmd+]")),children:k.t5})}}),A=(0,_.z)({name:"sendToBack",trackEvent:{category:"element"},perform:function(De,Ue){return{elements:(0,m.yZ)(De,Ue),appState:Ue,commitToHistory:!0}},contextItemLabel:"labels.sendToBack",keyTest:function(De){return y.Um?De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.BRACKET_LEFT:De[b.tW.CTRL_OR_CMD]&&De.shiftKey&&De.code===b.aU.BRACKET_LEFT},PanelComponent:function(De){var Ue=De.updateData;return De.appState,(0,S.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(){return Ue(null)},title:"".concat((0,v.t)("labels.sendToBack"),"  ").concat(y.Um?(0,w.uY)("CtrlOrCmd+Alt+["):(0,w.uY)("CtrlOrCmd+Shift+[")),children:k.pw})}}),T=(0,_.z)({name:"bringToFront",trackEvent:{category:"element"},perform:function(De,Ue){return{elements:(0,m.rr)(De,Ue),appState:Ue,commitToHistory:!0}},contextItemLabel:"labels.bringToFront",keyTest:function(De){return y.Um?De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.BRACKET_RIGHT:De[b.tW.CTRL_OR_CMD]&&De.shiftKey&&De.code===b.aU.BRACKET_RIGHT},PanelComponent:function(De){var Ue=De.updateData;return De.appState,(0,S.jsx)("button",{type:"button",className:"zIndexButton",onClick:function(qe){return Ue(null)},title:"".concat((0,v.t)("labels.bringToFront"),"  ").concat(y.Um?(0,w.uY)("CtrlOrCmd+Alt+]"):(0,w.uY)("CtrlOrCmd+Shift+]")),children:k.IN})}}),L=c(7169),j=c(242),$=c(1047),ee=c(1974),Q=c(6938),pe=c(1868);function ie(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function te(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ie(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):ie(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var Z=(0,_.z)({name:"selectAll",trackEvent:{category:"canvas"},perform:function(De,Ue,qe,dt){if(Ue.editingLinearElement)return!1;var Ut=(0,pe.aI)(De.filter(function(qt){return!(qt.isDeleted||(0,$.iB)(qt)&&qt.containerId||qt.locked)})).reduce(function(qt,on){return qt[on.id]=!0,qt},{});return{appState:(0,j.bO)(te(te({},Ue),{},{selectedLinearElement:Object.keys(Ut).length===1&&(0,ee.bt)(De[0])?new Q._(De[0],dt.scene):null,editingGroupId:null,selectedElementIds:Ut}),(0,$.Lm)(De)),commitToHistory:!0}},contextItemLabel:"labels.selectAll",keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.key===b.tW.A}}),D=c(1930),B=c(75),H=c(1319),V=c(8290),R=c(5710);function Y(De,Ue){var qe=typeof Symbol<"u"&&De[Symbol.iterator]||De["@@iterator"];if(!qe){if(Array.isArray(De)||(qe=function(tn,tr){if(tn){if(typeof tn=="string")return E(tn,tr);var ir=Object.prototype.toString.call(tn).slice(8,-1);if(ir==="Object"&&tn.constructor&&(ir=tn.constructor.name),ir==="Map"||ir==="Set")return Array.from(tn);if(ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ir))return E(tn,tr)}}(De))||Ue&&De&&typeof De.length=="number"){qe&&(De=qe);var dt=0,Ut=function(){};return{s:Ut,n:function(){return dt>=De.length?{done:!0}:{done:!1,value:De[dt++]}},e:function(tn){throw tn},f:Ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qt,on=!0,xn=!1;return{s:function(){qe=qe.call(De)},n:function(){var tn=qe.next();return on=tn.done,tn},e:function(tn){xn=!0,qt=tn},f:function(){try{on||qe.return==null||qe.return()}finally{if(xn)throw qt}}}}function E(De,Ue){(Ue==null||Ue>De.length)&&(Ue=De.length);for(var qe=0,dt=new Array(Ue);qe<Ue;qe++)dt[qe]=De[qe];return dt}var W=function(De){var Ue=De.slice(),qe=new Set,dt=function qt(on){var xn,tn,tr,ir=(xn=on[0])===null||xn===void 0||(tn=xn.groupIds)===null||tn===void 0?void 0:tn.join(""),br=[on[0]],Hr=[],Fr=Y(on.slice(1));try{for(Fr.s();!(tr=Fr.n()).done;){var go,Wr=tr.value;((go=Wr.groupIds)===null||go===void 0?void 0:go.join(""))===ir?br.push(Wr):Hr.push(Wr)}}catch(Mr){Fr.e(Mr)}finally{Fr.f()}return Hr.length?[].concat(br,(0,D.Z)(qt(Hr))):br},Ut=new Map;return Ue.forEach(function(qt,on){var xn;if(!Ut.has(qt.id))if((xn=qt.groupIds)!==null&&xn!==void 0&&xn.length){var tn,tr=qt.groupIds[qt.groupIds.length-1],ir=Ue.slice(on).filter(function(Fr){var go,Wr=Fr==null||(go=Fr.groupIds)===null||go===void 0?void 0:go.some(function(Mr){return Mr===tr});return Wr&&Ut.set(Fr.id,!0),Wr}),br=Y(dt(ir));try{for(br.s();!(tn=br.n()).done;){var Hr=tn.value;qe.add(Hr)}}catch(Fr){br.e(Fr)}finally{br.f()}}else qe.add(qt)}),qe.size!==De.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),De):(0,D.Z)(qe)},F=function(De){var Ue=function(qe){var dt=(0,w.I4)(qe),Ut=qe.slice(),qt=new Set;return Ut.forEach(function(on,xn){var tn;if(on)if((tn=on.boundElements)!==null&&tn!==void 0&&tn.length)qt.add(on),Ut[xn]=null,on.boundElements.forEach(function(br){var Hr=dt.get(br.id);Hr&&br.type==="text"&&(qt.add(Hr[0]),Ut[Hr[1]]=null)});else if(on.type==="text"&&on.containerId){var tr,ir=dt.get(on.containerId);ir!=null&&(tr=ir[0].boundElements)!==null&&tr!==void 0&&tr.find(function(br){return br.id===on.id})||(qt.add(on),Ut[xn]=null)}else qt.add(on),Ut[xn]=null}),qt.size!==qe.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),qe):(0,D.Z)(qt)}(W(De));return Ue},z=c(9040);function q(De,Ue){var qe=typeof Symbol<"u"&&De[Symbol.iterator]||De["@@iterator"];if(!qe){if(Array.isArray(De)||(qe=function(tn,tr){if(tn){if(typeof tn=="string")return fe(tn,tr);var ir=Object.prototype.toString.call(tn).slice(8,-1);if(ir==="Object"&&tn.constructor&&(ir=tn.constructor.name),ir==="Map"||ir==="Set")return Array.from(tn);if(ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ir))return fe(tn,tr)}}(De))||Ue&&De&&typeof De.length=="number"){qe&&(De=qe);var dt=0,Ut=function(){};return{s:Ut,n:function(){return dt>=De.length?{done:!0}:{done:!1,value:De[dt++]}},e:function(tn){throw tn},f:Ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qt,on=!0,xn=!1;return{s:function(){qe=qe.call(De)},n:function(){var tn=qe.next();return on=tn.done,tn},e:function(tn){xn=!0,qt=tn},f:function(){try{on||qe.return==null||qe.return()}finally{if(xn)throw qt}}}}function fe(De,Ue){(Ue==null||Ue>De.length)&&(Ue=De.length);for(var qe=0,dt=new Array(Ue);qe<Ue;qe++)dt[qe]=De[qe];return dt}function ce(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function U(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ce(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):ce(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var ve=(0,_.z)({name:"duplicateSelection",trackEvent:{category:"element"},perform:function(De,Ue){if(Ue.editingLinearElement){var qe=Q._.duplicateSelectedPoints(Ue);return!!qe&&{elements:De,appState:qe.appState,commitToHistory:!0}}return U(U({},oe(De,Ue)),{},{commitToHistory:!0})},contextItemLabel:"labels.duplicateSelection",keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.key===b.tW.D},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{type:"button",icon:k.NA,title:"".concat((0,v.t)("labels.duplicateSelection"),"  ").concat((0,w.uY)("CtrlOrCmd+D")),"aria-label":(0,v.t)("labels.duplicateSelection"),onClick:function(){return dt(null)},visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),oe=function(De,Ue){for(var qe=F(De),dt=new Map,Ut=[],qt=[],on=new Map,xn=function(Mo){var xi=(0,$.Sy)(Ue.editingGroupId,dt,Mo,{x:Mo.x+y.k/2,y:Mo.y+y.k/2});return on.set(Mo.id,xi.id),qt.push(Mo),Ut.push(xi),xi},tn=(0,w.xn)((0,pe.eD)(qe,Ue,{includeBoundTextElement:!0,includeElementsInFrames:!0})),tr=new Map,ir=function(Mo){var xi,ft=q(Mo);try{for(ft.s();!(xi=ft.n()).done;){var zt=xi.value;tr.set(zt.id,!0)}}catch(_n){ft.e(_n)}finally{ft.f()}return Mo},br=[],Hr=-1;++Hr<qe.length;){var Fr=qe[Hr];if(!tr.get(Fr.id)){var go=(0,R.WJ)(Fr),Wr=(0,ee.He)(Fr);if(tn.get(Fr.id)){if(Fr.groupIds.length||go||Wr){var Mr=(0,j.yO)(Ue,Fr);if(Mr){var Ro=(0,j.Fb)(qe,Mr).flatMap(function(Mo){return(0,ee.He)(Mo)?[].concat((0,D.Z)((0,z.wO)(De,Mo.id)),[Mo]):[Mo]});br.push.apply(br,(0,D.Z)(ir([].concat((0,D.Z)(Ro),(0,D.Z)(Ro.map(function(Mo){return xn(Mo)}))))));continue}if(go){br.push.apply(br,(0,D.Z)(ir([Fr,go,xn(Fr),xn(go)])));continue}if(Wr){var si=(0,z.wO)(qe,Fr.id);br.push.apply(br,(0,D.Z)(ir([].concat((0,D.Z)(si),[Fr],(0,D.Z)(si.map(function(Mo){return xn(Mo)})),[xn(Fr)]))));continue}}Fr.frameId&&tn.has(Fr.frameId)||br.push.apply(br,(0,D.Z)(ir([Fr,xn(Fr)])))}else br.push.apply(br,(0,D.Z)(ir([Fr])))}}var hi=[],ti=new Map;for(Hr=br.length;--Hr>=0;){var ha=br[Hr];ti.get(ha.id)||(ti.set(ha.id,!0),hi.push(ha))}var fa=hi.reverse();(0,R.P7)(br,qt,on),(0,V.ek)(br,qt,on),(0,z.xr)(fa,qt,on);var Go=(0,pe.aI)(Ut);return{elements:fa,appState:(0,j.bO)(U(U({},Ue),{},{selectedGroupIds:{},selectedElementIds:Go.reduce(function(Mo,xi){return(0,ee.Xh)(xi)||(Mo[xi.id]=!0),Mo},{})}),(0,$.Lm)(fa))}},re=(c(7306),c(2416)),ae=c(2577),me=c(1935),he=c(6552),se=c(1564);function ge(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function X(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ge(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):ge(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var we=(0,_.z)({name:"finalize",trackEvent:!1,perform:function(De,Ue,qe,dt){var Ut,qt=dt.canvas,on=dt.focusContainer,xn=dt.scene;if(Ue.editingLinearElement){var tn=Ue.editingLinearElement,tr=tn.elementId,ir=tn.startBindingElement,br=tn.endBindingElement,Hr=Q._.getElement(tr);if(Hr)return(0,ee.Mn)(Hr)&&(0,V.HG)(Hr,ir,br),{elements:Hr.points.length<2||(0,$.QD)(Hr)?De.filter(function(ft){return ft.id!==Hr.id}):void 0,appState:X(X({},Ue),{},{cursorButton:"up",editingLinearElement:null}),commitToHistory:!0}}var Fr=De,go=Ue.pendingImageElementId&&xn.getElement(Ue.pendingImageElementId);go&&(0,me.DR)(go,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&on();var Wr,Mr=Ue.multiElement?Ue.multiElement:((Ut=Ue.editingElement)===null||Ut===void 0?void 0:Ut.type)==="freedraw"?Ue.editingElement:null;if(Mr){if(Mr.type!=="freedraw"&&Ue.lastPointerDownWith!=="touch"){var Ro=Mr.points,si=Mr.lastCommittedPoint;si&&Ro[Ro.length-1]===si||(0,me.DR)(Mr,{points:Mr.points.slice(0,-1)})}(0,$.QD)(Mr)&&(Fr=Fr.slice(0,-1));var hi=(0,he.g6)(Mr.points,Ue.zoom.value);if((Mr.type==="line"||Mr.type==="freedraw")&&hi){var ti=Mr.points,ha=ti[0];(0,me.DR)(Mr,{points:ti.map(function(ft,zt){return zt===ti.length-1?[ha[0],ha[1]]:ft})})}if((0,ee.Mn)(Mr)&&!hi&&Mr.points.length>1){var fa=Q._.getPointAtIndexGlobalCoordinates(Mr,-1),Go=(0,ae.Z)(fa,2),Mo=Go[0],xi=Go[1];(0,V.R)(Mr,Ue,se.Z.getScene(Mr),{x:Mo,y:xi})}Ue.activeTool.locked||Ue.activeTool.type==="freedraw"||(Ue.selectedElementIds[Mr.id]=!0)}return(Ue.activeTool.locked||Ue.activeTool.type==="freedraw")&&Mr||(0,w.z8)(qt),Wr=Ue.activeTool.type==="eraser"?(0,w.Om)(Ue,X(X({},Ue.activeTool.lastActiveTool||{type:"selection"}),{},{lastActiveToolBeforeEraser:null})):(0,w.Om)(Ue,{type:"selection"}),{elements:Fr,appState:X(X({},Ue),{},{cursorButton:"up",activeTool:(Ue.activeTool.locked||Ue.activeTool.type==="freedraw")&&Mr?Ue.activeTool:Wr,draggingElement:null,multiElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Mr&&!Ue.activeTool.locked&&Ue.activeTool.type!=="freedraw"?X(X({},Ue.selectedElementIds),{},(0,L.Z)({},Mr.id,!0)):Ue.selectedElementIds,selectedLinearElement:Mr&&(0,ee.bt)(Mr)?new Q._(Mr,xn):Ue.selectedLinearElement,pendingImageElementId:null}),commitToHistory:Ue.activeTool.type==="freedraw"}},keyTest:function(De,Ue){return De.key===b.tW.ESCAPE&&(Ue.editingLinearElement!==null||!Ue.draggingElement&&Ue.multiElement===null)||(De.key===b.tW.ESCAPE||De.key===b.tW.ENTER)&&Ue.multiElement!==null},PanelComponent:function(De){var Ue=De.appState,qe=De.updateData,dt=De.data;return(0,S.jsx)(H.V,{type:"button",icon:k.$c,title:(0,v.t)("buttons.done"),"aria-label":(0,v.t)("buttons.done"),onClick:qe,visible:Ue.multiElement!=null,size:(dt==null?void 0:dt.size)||"medium"})}}),be=c(8671);function le(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function ye(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?le(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):le(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var ue="{}",xe=(0,_.z)({name:"copyStyles",trackEvent:{category:"element"},perform:function(De,Ue){var qe=[],dt=De.find(function(qt){return Ue.selectedElementIds[qt.id]});if(qe.push(dt),dt&&(0,ee.Xo)(dt)){var Ut=(0,R.WJ)(dt);qe.push(Ut)}return dt&&(ue=JSON.stringify(qe)),{appState:ye(ye({},Ue),{},{toast:{message:(0,v.t)("toast.copyStyles")}}),commitToHistory:!1}},contextItemLabel:"labels.copyStyles",keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.C}}),Pe=(0,_.z)({name:"pasteStyles",trackEvent:{category:"element"},perform:function(De,Ue){var qe=JSON.parse(ue),dt=qe[0],Ut=qe[1];if(!(0,$.r2)(dt))return{elements:De,commitToHistory:!1};var qt=(0,B.eD)(De,Ue,{includeBoundTextElement:!0}),on=qt.map(function(xn){return xn.id});return{elements:De.map(function(xn){if(on.includes(xn.id)){var tn,tr,ir,br,Hr,Fr,go,Wr=dt;if((0,$.iB)(xn)&&xn.containerId&&(Wr=Ut),!Wr)return xn;var Mr=(0,me.BE)(xn,{backgroundColor:(tn=Wr)===null||tn===void 0?void 0:tn.backgroundColor,strokeWidth:(tr=Wr)===null||tr===void 0?void 0:tr.strokeWidth,strokeColor:(ir=Wr)===null||ir===void 0?void 0:ir.strokeColor,strokeStyle:(br=Wr)===null||br===void 0?void 0:br.strokeStyle,fillStyle:(Hr=Wr)===null||Hr===void 0?void 0:Hr.fillStyle,opacity:(Fr=Wr)===null||Fr===void 0?void 0:Fr.opacity,roughness:(go=Wr)===null||go===void 0?void 0:go.roughness,roundness:Wr.roundness?(0,ee.eK)(Wr.roundness.type,xn)?Wr.roundness:(0,ee.UQ)(xn):null});if((0,$.iB)(Mr)){var Ro,si,hi,ti=((Ro=Wr)===null||Ro===void 0?void 0:Ro.fontSize)||y.n5,ha=((si=Wr)===null||si===void 0?void 0:si.fontFamily)||y.rk,fa=null;(Mr=(0,me.BE)(Mr,{fontSize:ti,fontFamily:ha,textAlign:((hi=Wr)===null||hi===void 0?void 0:hi.textAlign)||y.Hg,lineHeight:Wr.lineHeight||(0,R.PT)(ha)})).containerId&&(fa=qt.find(function(Go){return(0,$.iB)(Mr)&&Go.id===Mr.containerId})||null),(0,$.oN)(Mr,fa)}return Mr.type==="arrow"&&(Mr=(0,me.BE)(Mr,{startArrowhead:Wr.startArrowhead,endArrowhead:Wr.endArrowhead})),(0,ee.He)(xn)&&(Mr=(0,me.BE)(Mr,{roundness:null,backgroundColor:"transparent"})),Mr}return xn}),commitToHistory:!0}},contextItemLabel:"labels.pasteStyles",keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.V}});function Ne(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function Me(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?Ne(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):Ne(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}(0,_.z)({name:"toggleCanvasMenu",trackEvent:{category:"menu"},perform:function(De,Ue){return{appState:Me(Me({},Ue),{},{openMenu:Ue.openMenu==="canvas"?null:"canvas"}),commitToHistory:!1}},PanelComponent:function(De){var Ue=De.appState,qe=De.updateData;return(0,S.jsx)(H.V,{type:"button",icon:k.RY,"aria-label":(0,v.t)("buttons.menu"),onClick:qe,selected:Ue.openMenu==="canvas"})}}),(0,_.z)({name:"toggleEditMenu",trackEvent:{category:"menu"},perform:function(De,Ue){return{appState:Me(Me({},Ue),{},{openMenu:Ue.openMenu==="shape"?null:"shape"}),commitToHistory:!1}},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{visible:(0,$.RT)(qe,(0,$.Lm)(Ue)),type:"button",icon:k.DG,"aria-label":(0,v.t)("buttons.edit"),onClick:dt,selected:qe.openMenu==="shape"})}}),(0,_.z)({name:"toggleFullScreen",viewMode:!0,trackEvent:{category:"canvas",predicate:function(De){return!(0,w.rB)()}},perform:function(){return(0,w.rB)()||(0,w.wo)(),(0,w.rB)()&&(0,w.Pr)(),{commitToHistory:!1}}});var Re=(0,_.z)({name:"toggleShortcuts",viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:function(De,Ue,qe,dt){var Ut=dt.focusContainer;return Ue.openDialog==="help"&&Ut(),{appState:Me(Me({},Ue),{},{openDialog:Ue.openDialog==="help"?null:"help"}),commitToHistory:!1}},keyTest:function(De){return De.key===b.tW.QUESTION_MARK}}),We=c(6655),Se=c(6954);function Be(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function _e(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?Be(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):Be(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}function ze(De,Ue){var qe=typeof Symbol<"u"&&De[Symbol.iterator]||De["@@iterator"];if(!qe){if(Array.isArray(De)||(qe=function(tn,tr){if(tn){if(typeof tn=="string")return Ve(tn,tr);var ir=Object.prototype.toString.call(tn).slice(8,-1);if(ir==="Object"&&tn.constructor&&(ir=tn.constructor.name),ir==="Map"||ir==="Set")return Array.from(tn);if(ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ir))return Ve(tn,tr)}}(De))||Ue&&De&&typeof De.length=="number"){qe&&(De=qe);var dt=0,Ut=function(){};return{s:Ut,n:function(){return dt>=De.length?{done:!0}:{done:!1,value:De[dt++]}},e:function(tn){throw tn},f:Ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qt,on=!0,xn=!1;return{s:function(){qe=qe.call(De)},n:function(){var tn=qe.next();return on=tn.done,tn},e:function(tn){xn=!0,qt=tn},f:function(){try{on||qe.return==null||qe.return()}finally{if(xn)throw qt}}}}function Ve(De,Ue){(Ue==null||Ue>De.length)&&(Ue=De.length);for(var qe=0,dt=new Array(Ue);qe<Ue;qe++)dt[qe]=De[qe];return dt}var ut=function(De,Ue){var qe=(0,B.eD)((0,$.Lm)(De),Ue,{includeBoundTextElement:!0});return qe.length>=2&&!function(dt){if(dt.length>=2){var Ut,qt=ze(dt[0].groupIds);try{var on=function(){var tn=Ut.value;if(dt.reduce(function(tr,ir){return tr&&(0,j.Nd)(ir,tn)},!0))return{v:!0}};for(qt.s();!(Ut=qt.n()).done;){var xn=on();if((0,We.Z)(xn)==="object")return xn.v}}catch(tn){qt.e(tn)}finally{qt.f()}}return!1}(qe)},Ie=(0,_.z)({name:"group",trackEvent:{category:"element"},perform:function(De,Ue,qe,dt){var Ut=(0,B.eD)((0,$.Lm)(De),Ue,{includeBoundTextElement:!0});if(Ut.length<2)return{appState:Ue,elements:De,commitToHistory:!1};var qt=(0,j.iJ)(Ue);if(qt.length===1){var on=qt[0],xn=new Set((0,j.Fb)(De,on).map(function(Ro){return Ro.id})),tn=new Set(Ut.map(function(Ro){return Ro.id}));if(new Set([].concat((0,D.Z)(Array.from(xn)),(0,D.Z)(Array.from(tn)))).size===xn.size)return{appState:Ue,elements:De,commitToHistory:!1}}var tr=(0,D.Z)(De);new Set(Ut.map(function(Ro){return Ro.frameId})).size>1&&(0,z.SH)(Ut).forEach(function(Ro,si){tr=(0,z.lz)(tr,Ro,Ue)});var ir=(0,Se.kb)(),br=(0,w.xn)(Ut);tr=tr.map(function(Ro){return br.get(Ro.id)?(0,me.BE)(Ro,{groupIds:(0,j.S_)(Ro.groupIds,ir,Ue.editingGroupId)}):Ro});var Hr=(0,j.Fb)(tr,ir),Fr=Hr[Hr.length-1],go=tr.lastIndexOf(Fr),Wr=tr.slice(go+1),Mr=tr.slice(0,go).filter(function(Ro){return!(0,j.Nd)(Ro,ir)});return tr=[].concat((0,D.Z)(Mr),(0,D.Z)(Hr),(0,D.Z)(Wr)),{appState:(0,j.F$)(ir,_e(_e({},Ue),{},{selectedGroupIds:{}}),(0,$.Lm)(tr)),elements:tr,commitToHistory:!0}},contextItemLabel:"labels.group",predicate:function(De,Ue){return ut(De,Ue)},keyTest:function(De){return!De.shiftKey&&De[b.tW.CTRL_OR_CMD]&&De.key===b.tW.G},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!ut(Ue,qe),type:"button",icon:(0,S.jsx)(k.BF,{theme:qe.theme}),onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.group"),"  ").concat((0,w.uY)("CtrlOrCmd+G")),"aria-label":(0,v.t)("labels.group"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),ot=(0,_.z)({name:"ungroup",trackEvent:{category:"element"},perform:function(De,Ue,qe,dt){if((0,j.iJ)(Ue).length===0)return{appState:Ue,elements:De,commitToHistory:!1};var Ut=(0,D.Z)(De),qt=(0,B.eD)(Ut,Ue).filter(function(tn){return tn.frameId}).map(function(tn){return dt.scene.getElement(tn.frameId)}),on=[];Ut=Ut.map(function(tn){(0,ee.Xh)(tn)&&on.push(tn.id);var tr=(0,j.h6)(tn.groupIds,Ue.selectedGroupIds);return tr.length===tn.groupIds.length?tn:(0,me.BE)(tn,{groupIds:tr})});var xn=(0,j.bO)(_e(_e({},Ue),{},{selectedGroupIds:{}}),(0,$.Lm)(Ut));return qt.forEach(function(tn){tn&&(Ut=(0,z.pr)(Ut,(0,z.ni)(Ut,tn,Ue),tn,Ue))}),on.forEach(function(tn){return xn.selectedElementIds[tn]=!1}),{appState:xn,elements:Ut,commitToHistory:!0}},keyTest:function(De){return De.shiftKey&&De[b.tW.CTRL_OR_CMD]&&De.key===b.tW.G.toUpperCase()},contextItemLabel:"labels.ungroup",predicate:function(De,Ue){return(0,j.iJ)(Ue).length>0},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{type:"button",hidden:(0,j.iJ)(qe).length===0,icon:(0,S.jsx)(k.RJ,{theme:qe.theme}),onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.ungroup"),"  ").concat((0,w.uY)("CtrlOrCmd+Shift+G")),"aria-label":(0,v.t)("labels.ungroup"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),Ye=c(8982),Ke=c(487),tt=c.n(Ke),pt=c(631),St=c.n(pt),Kt=c(2052),sn=c.n(Kt),nn=c(4010),Cn=c.n(nn),vn=c(1469),Fe=c.n(vn),et=c(9329),st=c.n(et),ht=c(3729),_t={};_t.styleTagTransform=st(),_t.setAttributes=Cn(),_t.insert=sn().bind(null,"head"),_t.domAPI=St(),_t.insertStyleElement=Fe(),tt()(ht.Z,_t),ht.Z&&ht.Z.locals&&ht.Z.locals;var Zt=c(9787),Yt=function(De){var Ue=De.color,qe=De.onClick,dt=De.name,Ut=De.src,qt=(0,Ye.l)(dt),on=(0,Zt.useState)(!1),xn=(0,ae.Z)(on,2),tn=xn[0],tr=xn[1],ir=!tn&&Ut,br=ir?void 0:{background:Ue};return(0,S.jsx)("div",{className:"Avatar",style:br,onClick:qe,children:ir?(0,S.jsx)("img",{className:"Avatar-img",src:Ut,alt:qt,referrerPolicy:"no-referrer",onError:function(){return tr(!0)}}):qt})},bn=c(2264);function Wt(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function un(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?Wt(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):Wt(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}(0,_.z)({name:"goToCollaborator",viewMode:!0,trackEvent:{category:"collab"},perform:function(De,Ue,qe){var dt=qe;return dt?{appState:un(un(un({},Ue),(0,bn.s)({scenePoint:dt,viewportDimensions:{width:Ue.width,height:Ue.height},zoom:Ue.zoom})),{},{openMenu:Ue.openMenu==="canvas"?null:Ue.openMenu}),commitToHistory:!1}:{appState:Ue,commitToHistory:!1}},PanelComponent:function(De){var Ue=De.updateData,qe=De.data,dt=(0,ae.Z)(qe,2),Ut=dt[0],qt=dt[1],on=(0,Ye.G)(Ut);return(0,S.jsx)(Yt,{color:on,onClick:function(){return Ue(qt.pointer)},name:qt.username||"",src:qt.avatarUrl})}});var jn=c(2791);function Hn(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function vt(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?Hn(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):Hn(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var Nt=(0,_.z)({name:"addToLibrary",trackEvent:{category:"element"},perform:function(De,Ue,qe,dt){var Ut=(0,B.eD)((0,$.Lm)(De),Ue,{includeBoundTextElement:!0,includeElementsInFrames:!0});return Ut.some(function(qt){return qt.type==="image"})?{commitToHistory:!1,appState:vt(vt({},Ue),{},{errorMessage:"Support for adding images to the library coming soon!"})}:dt.library.getLatestLibrary().then(function(qt){return dt.library.setLibrary([{id:(0,Se.kb)(),status:"unpublished",elements:Ut.map(jn.OL),created:Date.now()}].concat((0,D.Z)(qt)))}).then(function(){return{commitToHistory:!1,appState:vt(vt({},Ue),{},{toast:{message:(0,v.t)("toast.addedToLibrary")}})}}).catch(function(qt){return{commitToHistory:!1,appState:vt(vt({},Ue),{},{errorMessage:qt.message})}})},contextItemLabel:"labels.addToLibrary"}),Tt=c(8925);function cn(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function Ot(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?cn(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):cn(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var Ln=function(De,Ue,qe){var dt=qe.axis,Ut=qe.position,qt=(0,Tt.v2)(De),on=dt==="x"?["minX","maxX"]:["minY","maxY"],xn=(0,ae.Z)(on,2),tn=xn[0],tr=xn[1],ir={x:0,y:0};return Ot(Ot({},ir),{},Ut==="start"?(0,L.Z)({},dt,Ue[tn]-qt[tn]):Ut==="end"?(0,L.Z)({},dt,Ue[tr]-qt[tr]):(0,L.Z)({},dt,(Ue[tn]+Ue[tr])/2-(qt[tn]+qt[tr])/2))},Wn=function(De,Ue){var qe=(0,B.eD)((0,$.Lm)(De),Ue);return qe.length>1&&!qe.some(function(dt){return dt.type==="frame"})},Rn=function(De,Ue,qe){var dt=function(qt,on){var xn=(0,j.AI)(qt),tn=(0,Tt.v2)(qt);return xn.flatMap(function(tr){var ir=Ln(tr,tn,on);return tr.map(function(br){return(0,me.BE)(br,{x:br.x+ir.x,y:br.y+ir.y})})})}((0,B.eD)((0,$.Lm)(De),Ue),qe),Ut=(0,w.xn)(dt);return(0,z.Tq)(De.map(function(qt){return Ut.get(qt.id)||qt}),Ue)};(0,_.z)({name:"alignTop",trackEvent:{category:"element"},predicate:Wn,perform:function(De,Ue){return{appState:Ue,elements:Rn(De,Ue,{position:"start",axis:"y"}),commitToHistory:!0}},keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.shiftKey&&De.key===b.tW.ARROW_UP},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Wn(Ue,qe),type:"button",icon:k.Ct,onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.alignTop"),"  ").concat((0,w.uY)("CtrlOrCmd+Shift+Up")),"aria-label":(0,v.t)("labels.alignTop"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),(0,_.z)({name:"alignBottom",trackEvent:{category:"element"},predicate:Wn,perform:function(De,Ue){return{appState:Ue,elements:Rn(De,Ue,{position:"end",axis:"y"}),commitToHistory:!0}},keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.shiftKey&&De.key===b.tW.ARROW_DOWN},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Wn(Ue,qe),type:"button",icon:k.HL,onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.alignBottom"),"  ").concat((0,w.uY)("CtrlOrCmd+Shift+Down")),"aria-label":(0,v.t)("labels.alignBottom"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),(0,_.z)({name:"alignLeft",trackEvent:{category:"element"},predicate:Wn,perform:function(De,Ue){return{appState:Ue,elements:Rn(De,Ue,{position:"start",axis:"x"}),commitToHistory:!0}},keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.shiftKey&&De.key===b.tW.ARROW_LEFT},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Wn(Ue,qe),type:"button",icon:k.xs,onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.alignLeft"),"  ").concat((0,w.uY)("CtrlOrCmd+Shift+Left")),"aria-label":(0,v.t)("labels.alignLeft"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),(0,_.z)({name:"alignRight",trackEvent:{category:"element"},predicate:Wn,perform:function(De,Ue){return{appState:Ue,elements:Rn(De,Ue,{position:"end",axis:"x"}),commitToHistory:!0}},keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.shiftKey&&De.key===b.tW.ARROW_RIGHT},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Wn(Ue,qe),type:"button",icon:k.mh,onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.alignRight"),"  ").concat((0,w.uY)("CtrlOrCmd+Shift+Right")),"aria-label":(0,v.t)("labels.alignRight"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),(0,_.z)({name:"alignVerticallyCentered",trackEvent:{category:"element"},predicate:Wn,perform:function(De,Ue){return{appState:Ue,elements:Rn(De,Ue,{position:"center",axis:"y"}),commitToHistory:!0}},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Wn(Ue,qe),type:"button",icon:k.ST,onClick:function(){return dt(null)},title:(0,v.t)("labels.centerVertically"),"aria-label":(0,v.t)("labels.centerVertically"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),(0,_.z)({name:"alignHorizontallyCentered",trackEvent:{category:"element"},predicate:Wn,perform:function(De,Ue){return{appState:Ue,elements:Rn(De,Ue,{position:"center",axis:"x"}),commitToHistory:!0}},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Wn(Ue,qe),type:"button",icon:k.gK,onClick:function(){return dt(null)},title:(0,v.t)("labels.centerHorizontally"),"aria-label":(0,v.t)("labels.centerHorizontally"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}});function zn(De,Ue){var qe=typeof Symbol<"u"&&De[Symbol.iterator]||De["@@iterator"];if(!qe){if(Array.isArray(De)||(qe=function(tn,tr){if(tn){if(typeof tn=="string")return Et(tn,tr);var ir=Object.prototype.toString.call(tn).slice(8,-1);if(ir==="Object"&&tn.constructor&&(ir=tn.constructor.name),ir==="Map"||ir==="Set")return Array.from(tn);if(ir==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ir))return Et(tn,tr)}}(De))||Ue&&De&&typeof De.length=="number"){qe&&(De=qe);var dt=0,Ut=function(){};return{s:Ut,n:function(){return dt>=De.length?{done:!0}:{done:!1,value:De[dt++]}},e:function(tn){throw tn},f:Ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qt,on=!0,xn=!1;return{s:function(){qe=qe.call(De)},n:function(){var tn=qe.next();return on=tn.done,tn},e:function(tn){xn=!0,qt=tn},f:function(){try{on||qe.return==null||qe.return()}finally{if(xn)throw qt}}}}function Et(De,Ue){(Ue==null||Ue>De.length)&&(Ue=De.length);for(var qe=0,dt=new Array(Ue);qe<Ue;qe++)dt[qe]=De[qe];return dt}var Dt=function(De,Ue){var qe=(0,B.eD)((0,$.Lm)(De),Ue);return qe.length>1&&!qe.some(function(dt){return dt.type==="frame"})},Gt=function(De,Ue,qe){var dt=function(qt,on){var xn,tn=on.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],tr=(0,ae.Z)(tn,4),ir=tr[0],br=tr[1],Hr=tr[2],Fr=tr[3],go=(0,Tt.v2)(qt),Wr=(0,j.AI)(qt).map(function(Mo){return[Mo,(0,Tt.v2)(Mo)]}).sort(function(Mo,xi){return Mo[1][br]-xi[1][br]}),Mr=0,Ro=zn(Wr);try{for(Ro.s();!(xn=Ro.n()).done;)Mr+=xn.value[1][Fr]}catch(Mo){Ro.e(Mo)}finally{Ro.f()}var si=(go[Fr]-Mr)/(Wr.length-1);if(si<0){var hi=Wr.findIndex(function(Mo){return Mo[1][ir]===go[ir]}),ti=Wr.findIndex(function(Mo){return Mo[1][Hr]===go[Hr]}),ha=(Wr[ti][1][br]-Wr[hi][1][br])/(Wr.length-1),fa=Wr[hi][1][br];return Wr.flatMap(function(Mo,xi){var ft=(0,ae.Z)(Mo,2),zt=ft[0],_n=ft[1],yr={x:0,y:0};return xi!==hi&&xi!==ti&&(fa+=ha,yr[on.axis]=fa-_n[br]),zt.map(function(Xo){return(0,me.BE)(Xo,{x:Xo.x+yr.x,y:Xo.y+yr.y})})})}var Go=go[ir];return Wr.flatMap(function(Mo){var xi=(0,ae.Z)(Mo,2),ft=xi[0],zt=xi[1],_n={x:0,y:0};return _n[on.axis]=Go-zt[ir],Go+=si,Go+=zt[Fr],ft.map(function(yr){return(0,me.BE)(yr,{x:yr.x+_n.x,y:yr.y+_n.y})})})}((0,B.eD)((0,$.Lm)(De),Ue),qe),Ut=(0,w.xn)(dt);return(0,z.Tq)(De.map(function(qt){return Ut.get(qt.id)||qt}),Ue)},Jt=((0,_.z)({name:"distributeHorizontally",trackEvent:{category:"element"},perform:function(De,Ue){return{appState:Ue,elements:Gt(De,Ue,{space:"between",axis:"x"}),commitToHistory:!0}},keyTest:function(De){return!De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.H},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Dt(Ue,qe),type:"button",icon:k.uD,onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.distributeHorizontally"),"  ").concat((0,w.uY)("Alt+H")),"aria-label":(0,v.t)("labels.distributeHorizontally"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),(0,_.z)({name:"distributeVertically",trackEvent:{category:"element"},perform:function(De,Ue){return{appState:Ue,elements:Gt(De,Ue,{space:"between",axis:"y"}),commitToHistory:!0}},keyTest:function(De){return!De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.V},PanelComponent:function(De){var Ue=De.elements,qe=De.appState,dt=De.updateData;return(0,S.jsx)(H.V,{hidden:!Dt(Ue,qe),type:"button",icon:k.W5,onClick:function(){return dt(null)},title:"".concat((0,v.t)("labels.distributeVertically"),"  ").concat((0,w.uY)("Alt+V")),"aria-label":(0,v.t)("labels.distributeVertically"),visible:(0,B.N)((0,$.Lm)(Ue),qe)})}}),c(8634)),$n=(0,_.z)({name:"flipHorizontal",trackEvent:{category:"element"},perform:function(De,Ue){return{elements:(0,z.Tq)(wr(De,Ue,"horizontal"),Ue),appState:Ue,commitToHistory:!0}},keyTest:function(De){return De.shiftKey&&De.code===b.aU.H},contextItemLabel:"labels.flipHorizontal"}),Kn=(0,_.z)({name:"flipVertical",trackEvent:{category:"element"},perform:function(De,Ue){return{elements:(0,z.Tq)(wr(De,Ue,"vertical"),Ue),appState:Ue,commitToHistory:!0}},keyTest:function(De){return De.shiftKey&&De.code===b.aU.V&&!De[b.tW.CTRL_OR_CMD]},contextItemLabel:"labels.flipVertical"}),wr=function(De,Ue,qe){var dt=(0,B.eD)((0,$.Lm)(De),Ue,{includeElementsInFrames:!0}),Ut=dr(dt,Ue,qe),qt=(0,w.xn)(Ut);return De.map(function(on){return qt.get(on.id)||on})},dr=function(De,Ue,qe){var dt=(0,Tt.v2)(De),Ut=dt.minX,qt=dt.minY,on=dt.maxX,xn=dt.maxY;return(0,Jt.LM)({originalElements:(0,w.xn)(De)},De,"nw",!0,qe==="horizontal"?on:Ut,qe==="horizontal"?qt:xn),((0,V.N1)(Ue)?V.el:V.H)(De),De},yn=c(4688);function hr(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function Er(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?hr(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):hr(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var Nn=(0,_.z)({name:"gridMode",viewMode:!0,trackEvent:{category:"canvas",predicate:function(De){return!De.gridSize}},perform:function(De,Ue){return{appState:Er(Er({},Ue),{},{gridSize:this.checked(Ue)?null:y.k}),commitToHistory:!1}},checked:function(De){return De.gridSize!==null},predicate:function(De,Ue,qe){return qe.gridModeEnabled===void 0},contextItemLabel:"labels.showGrid",keyTest:function(De){return De[b.tW.CTRL_OR_CMD]&&De.code===b.aU.QUOTE}});function ar(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function Dr(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ar(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):ar(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var Ir=(0,_.z)({name:"zenMode",viewMode:!0,trackEvent:{category:"canvas",predicate:function(De){return!De.zenModeEnabled}},perform:function(De,Ue){return{appState:Dr(Dr({},Ue),{},{zenModeEnabled:!this.checked(Ue)}),commitToHistory:!1}},checked:function(De){return De.zenModeEnabled},predicate:function(De,Ue,qe){return qe.zenModeEnabled===void 0},contextItemLabel:"buttons.zenMode",keyTest:function(De){return!De[b.tW.CTRL_OR_CMD]&&De.altKey&&De.code===b.aU.Z}}),Vt=c(4958),An=c(202),pn=c(4929),mn=c(3248);function or(De,Ue){var qe=Object.keys(De);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(De);Ue&&(dt=dt.filter(function(Ut){return Object.getOwnPropertyDescriptor(De,Ut).enumerable})),qe.push.apply(qe,dt)}return qe}function fr(De){for(var Ue=1;Ue<arguments.length;Ue++){var qe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?or(Object(qe),!0).forEach(function(dt){(0,L.Z)(De,dt,qe[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(qe)):or(Object(qe)).forEach(function(dt){Object.defineProperty(De,dt,Object.getOwnPropertyDescriptor(qe,dt))})}return De}var Fn=(0,_.z)({name:"toggleLinearEditor",trackEvent:{category:"element"},predicate:function(De,Ue){var qe=(0,B.eD)(De,Ue);return!(qe.length!==1||!(0,ee.bt)(qe[0]))},perform:function(De,Ue,qe,dt){var Ut,qt=(0,B.eD)((0,$.Lm)(De),Ue,{includeBoundTextElement:!0})[0],on=((Ut=Ue.editingLinearElement)===null||Ut===void 0?void 0:Ut.elementId)===qt.id?null:new Q._(qt,dt.scene);return{appState:fr(fr({},Ue),{},{editingLinearElement:on}),commitToHistory:!1}},contextItemLabel:function(De,Ue){var qe,dt=(0,B.eD)((0,$.Lm)(De),Ue,{includeBoundTextElement:!0})[0];return((qe=Ue.editingLinearElement)===null||qe===void 0?void 0:qe.elementId)===dt.id?"labels.lineEditor.exit":"labels.lineEditor.edit"}})},7901:function(f,h,c){c.d(h,{N:function(){return g},z:function(){return m}});var g=[],m=function(b){return g=g.concat(b),b}},785:function(f,h,c){c.d(h,{C:function(){return w}});var g=c(2335),m=c(8211),b=c(6340),v={toggleTheme:[(0,b.uY)("Shift+Alt+D")],saveScene:[(0,b.uY)("CtrlOrCmd+S")],loadScene:[(0,b.uY)("CtrlOrCmd+O")],clearCanvas:[(0,b.uY)("CtrlOrCmd+Delete")],imageExport:[(0,b.uY)("CtrlOrCmd+Shift+E")],cut:[(0,b.uY)("CtrlOrCmd+X")],copy:[(0,b.uY)("CtrlOrCmd+C")],paste:[(0,b.uY)("CtrlOrCmd+V")],copyStyles:[(0,b.uY)("CtrlOrCmd+Alt+C")],pasteStyles:[(0,b.uY)("CtrlOrCmd+Alt+V")],selectAll:[(0,b.uY)("CtrlOrCmd+A")],deleteSelectedElements:[(0,b.uY)("Delete")],duplicateSelection:[(0,b.uY)("CtrlOrCmd+D"),(0,b.uY)("Alt+".concat((0,m.t)("helpDialog.drag")))],sendBackward:[(0,b.uY)("CtrlOrCmd+[")],bringForward:[(0,b.uY)("CtrlOrCmd+]")],sendToBack:[g.Um?(0,b.uY)("CtrlOrCmd+Alt+["):(0,b.uY)("CtrlOrCmd+Shift+[")],bringToFront:[g.Um?(0,b.uY)("CtrlOrCmd+Alt+]"):(0,b.uY)("CtrlOrCmd+Shift+]")],copyAsPng:[(0,b.uY)("Shift+Alt+C")],copyAsSvg:[],group:[(0,b.uY)("CtrlOrCmd+G")],ungroup:[(0,b.uY)("CtrlOrCmd+Shift+G")],gridMode:[(0,b.uY)("CtrlOrCmd+'")],zenMode:[(0,b.uY)("Alt+Z")],stats:[(0,b.uY)("Alt+/")],addToLibrary:[],flipHorizontal:[(0,b.uY)("Shift+H")],flipVertical:[(0,b.uY)("Shift+V")],viewMode:[(0,b.uY)("Alt+R")],hyperlink:[(0,b.uY)("CtrlOrCmd+K")],toggleElementLock:[(0,b.uY)("CtrlOrCmd+Shift+L")]},w=function(_){var k=v[_];return k&&k.length>0?k[0]:""}},7047:function(f,h,c){c.d(h,{L:function(){return g}});var g=function(m,b,v,w){try{if(typeof window>"u"||{REACT_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",REACT_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",REACT_APP_LIBRARY_URL:"https://libraries.excalidraw.com",REACT_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",REACT_APP_PORTAL_URL:"https://portal.excalidraw.com",REACT_APP_WS_SERVER_URL:"",REACT_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',REACT_APP_PLUS_APP:"https://app.excalidraw.com",REACT_APP_DISABLE_TRACKING:"",PKG_NAME:"revedraw",PKG_VERSION:"1.0.0-alpha.10",IS_EXCALIDRAW_NPM_PACKAGE:!0}.JEST_WORKER_ID||![].includes(m))return;window.sa_event&&window.sa_event(b,{category:m,label:v,value:w})}catch(_){console.error("error during analytics",_)}}},8897:function(f,h,c){c.d(h,{EN:function(){return I},eS:function(){return C},im:function(){return _},l$:function(){return A},s:function(){return S}});var g=c(56),m=c(2335),b=c(8211),v=c(6340),w=m.ZB.includes(devicePixelRatio)?devicePixelRatio:1,_=function(){return{showWelcomeScreen:!1,theme:m.C6.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:m.HN.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:m.HN.fillStyle,currentItemFontFamily:m.rk,currentItemFontSize:m.n5,currentItemOpacity:m.HN.opacity,currentItemRoughness:m.HN.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:m.HN.strokeColor,currentItemRoundness:"round",currentItemStrokeStyle:m.HN.strokeStyle,currentItemStrokeWidth:m.HN.strokeWidth,currentItemTextAlign:m.Hg,cursorButton:"up",draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:m.HN.locked,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:w,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:"".concat((0,b.t)("labels.untitled"),"-").concat((0,v.Fc)()),contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],shouldRenderFrames:!0,frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:g.HO.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null}},k={showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},draggingElement:{browser:!1,export:!1,server:!1},editingElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},showStats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},shouldRenderFrames:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1}},y=function(T,L){for(var j={},$=0,ee=Object.keys(T);$<ee.length;$++){var Q=ee[$],pe=k[Q];if(pe!=null&&pe[L]){var ie=T[Q];j[Q]=ie}}return j},S=function(T){return y(T,"export")},C=function(T){return y(T,"server")},I=function(T){return T.activeTool.type==="eraser"},A=function(T){return T.activeTool.type==="hand"}},5674:function(f,h,c){c.d(h,{dz:function(){return ie},i$:function(){return $},ps:function(){return H}});var g=c(1930),m=c(7169),b=c(2577),v=c(56),w=c(2335),_=c(1047),k=c(6954);function y(V,R){var Y=typeof Symbol<"u"&&V[Symbol.iterator]||V["@@iterator"];if(!Y){if(Array.isArray(V)||(Y=function(fe,ce){if(fe){if(typeof fe=="string")return S(fe,ce);var U=Object.prototype.toString.call(fe).slice(8,-1);if(U==="Object"&&fe.constructor&&(U=fe.constructor.name),U==="Map"||U==="Set")return Array.from(fe);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return S(fe,ce)}}(V))||R&&V&&typeof V.length=="number"){Y&&(V=Y);var E=0,W=function(){};return{s:W,n:function(){return E>=V.length?{done:!0}:{done:!1,value:V[E++]}},e:function(fe){throw fe},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F,z=!0,q=!1;return{s:function(){Y=Y.call(V)},n:function(){var fe=Y.next();return z=fe.done,fe},e:function(fe){q=!0,F=fe},f:function(){try{z||Y.return==null||Y.return()}finally{if(q)throw F}}}}function S(V,R){(R==null||R>V.length)&&(R=V.length);for(var Y=0,E=new Array(R);Y<R;Y++)E[Y]=V[Y];return E}function C(V,R){var Y=Object.keys(V);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(V);R&&(E=E.filter(function(W){return Object.getOwnPropertyDescriptor(V,W).enumerable})),Y.push.apply(Y,E)}return Y}function I(V){for(var R=1;R<arguments.length;R++){var Y=arguments[R]!=null?arguments[R]:{};R%2?C(Object(Y),!0).forEach(function(E){(0,m.Z)(V,E,Y[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(Y)):C(Object(Y)).forEach(function(E){Object.defineProperty(V,E,Object.getOwnPropertyDescriptor(Y,E))})}return V}var A=32,T=12,L=256,j="NOT_SPREADSHEET",$="VALID_SPREADSHEET",ee=function(V){var R=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(V);return R?parseFloat("".concat((R[1]||R[2])+R[3]).replace(/,/g,"")):null},Q=function(V,R){return V.slice(1).every(function(Y){return ee(Y[R])!==null})},pe=function(V){var R=V[0].length;if(R>2)return{type:j,reason:"More than 2 columns"};if(R===1){if(!Q(V,0))return{type:j,reason:"Value is not numeric"};var Y=ee(V[0][0])===null,E=(Y?V.slice(1):V).map(function(oe){return ee(oe[0])});return E.length<2?{type:j,reason:"Less than two rows"}:{type:$,spreadsheet:{title:Y?V[0][0]:null,labels:null,values:E}}}var W=Q(V,0),F=Q(V,1);if(!W&&!F)return{type:j,reason:"Value is not numeric"};var z=F?[0,1]:[1,0],q=(0,b.Z)(z,2),fe=q[0],ce=q[1],U=ee(V[0][ce])===null,ve=U?V.slice(1):V;return ve.length<2?{type:j,reason:"Less than 2 rows"}:{type:$,spreadsheet:{title:U?V[0][ce]:null,labels:ve.map(function(oe){return oe[fe]}),values:ve.map(function(oe){return ee(oe[ce])})}}},ie=function(V){var R=V.trim().split(`
`).map(function(F){return F.trim().split("	")});if(R.length&&R[0].length!==2&&(R=V.trim().split(`
`).map(function(F){return F.trim().split(",")})),R.length===0)return{type:j,reason:"No values"};var Y=R[0].length;if(!R.every(function(F){return F.length===Y}))return{type:j,reason:"All rows don't have same number of columns"};var E=pe(R);if(E.type!==$){var W=pe(function(F){for(var z=[],q=0;q<F[0].length;q++){for(var fe=[],ce=0;ce<F.length;ce++)fe.push(F[ce][q]);z.push(fe)}return z}(R));if(W.type===$)return W}return E},te=(0,v.sF)(v.C2),Z={fillStyle:"hachure",fontFamily:w.rk,fontSize:w.n5,opacity:100,roughness:1,strokeColor:v.HO.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:w.oX.MIDDLE,locked:!1},D=function(V){return{chartWidth:44*V.values.length+T,chartHeight:280}},B=function(V,R,Y,E,W,F){var z=D(V),q=z.chartWidth,fe=z.chartHeight,ce=V.title?(0,_.VL)(I(I({backgroundColor:W,groupIds:[E]},Z),{},{text:V.title,x:R+q/2,y:Y-L-24-w.n5,roundness:null,textAlign:"center"})):null,U=F?(0,_.Up)(I(I({backgroundColor:W,groupIds:[E]},Z),{},{type:"rectangle",x:R,y:Y-fe,width:q,height:fe,strokeColor:v.HO.black,fillStyle:"solid",opacity:6})):null;return[].concat((0,g.Z)(U?[U]:[]),(0,g.Z)(ce?[ce]:[]),(0,g.Z)(function(ve,oe,re,ae,me){var he;return((he=ve.labels)===null||he===void 0?void 0:he.map(function(se,ge){return(0,_.VL)(I(I({groupIds:[ae],backgroundColor:me},Z),{},{text:se.length>8?"".concat(se.slice(0,5),"..."):se,x:oe+44*ge+24,y:re+6,width:A,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))}))||[]}(V,R,Y,E,W)),(0,g.Z)(function(ve,oe,re,ae,me){var he=(0,_.VL)(I(I({groupIds:[ae],backgroundColor:me},Z),{},{x:oe-T,y:re-T,text:"0",textAlign:"right"}));return[he,(0,_.VL)(I(I({groupIds:[ae],backgroundColor:me},Z),{},{x:oe-T,y:re-L-he.height/2,text:Math.max.apply(Math,(0,g.Z)(ve.values)).toLocaleString(),textAlign:"right"}))]}(V,R,Y,E,W)),(0,g.Z)(function(ve,oe,re,ae,me){var he=D(ve),se=he.chartWidth,ge=he.chartHeight;return[(0,_.y8)(I(I({backgroundColor:me,groupIds:[ae]},Z),{},{type:"line",x:oe,y:re,startArrowhead:null,endArrowhead:null,width:se,points:[[0,0],[se,0]]})),(0,_.y8)(I(I({backgroundColor:me,groupIds:[ae]},Z),{},{type:"line",x:oe,y:re,startArrowhead:null,endArrowhead:null,height:ge,points:[[0,0],[0,-ge]]})),(0,_.y8)(I(I({backgroundColor:me,groupIds:[ae]},Z),{},{type:"line",x:oe,y:re-L-T,startArrowhead:null,endArrowhead:null,strokeStyle:"dotted",width:se,opacity:50,points:[[0,0],[se,0]]}))]}(V,R,Y,E,W)))},H=function(V,R,Y,E){return V==="line"?function(W,F,z){var q,fe=Math.max.apply(Math,(0,g.Z)(W.values)),ce=(0,k.kb)(),U=te[Math.floor(Math.random()*te.length)],ve=0,oe=[],re=y(W.values);try{for(re.s();!(q=re.n()).done;){var ae=q.value,me=44*ve,he=-ae/fe*L;oe.push([me,he]),ve++}}catch(ue){re.e(ue)}finally{re.f()}var se=Math.max.apply(Math,(0,g.Z)(oe.map(function(ue){return ue[0]}))),ge=Math.max.apply(Math,(0,g.Z)(oe.map(function(ue){return ue[1]}))),X=Math.min.apply(Math,(0,g.Z)(oe.map(function(ue){return ue[0]}))),we=Math.min.apply(Math,(0,g.Z)(oe.map(function(ue){return ue[1]}))),be=(0,_.y8)(I(I({backgroundColor:U,groupIds:[ce]},Z),{},{type:"line",x:F+T+16,y:z-T,startArrowhead:null,endArrowhead:null,height:ge-we,width:se-X,strokeWidth:2,points:oe})),le=W.values.map(function(ue,xe){var Pe=44*xe+6,Ne=-ue/fe*L+6;return(0,_.Up)(I(I({backgroundColor:U,groupIds:[ce]},Z),{},{fillStyle:"solid",strokeWidth:2,type:"ellipse",x:F+Pe+16,y:z+Ne-24,width:T,height:T}))}),ye=W.values.map(function(ue,xe){var Pe=44*xe+6,Ne=ue/fe*L+6+T;return(0,_.y8)(I(I({backgroundColor:U,groupIds:[ce]},Z),{},{type:"line",x:F+Pe+16+6,y:z-Ne,startArrowhead:null,endArrowhead:null,height:Ne,strokeStyle:"dotted",opacity:50,points:[[0,0],[0,Ne]]}))});return[].concat((0,g.Z)(B(W,F,z,ce,U,w.Vi.DEVELOPMENT==="production")),[be],(0,g.Z)(ye),(0,g.Z)(le))}(R,Y,E):function(W,F,z){var q=Math.max.apply(Math,(0,g.Z)(W.values)),fe=(0,k.kb)(),ce=te[Math.floor(Math.random()*te.length)],U=W.values.map(function(ve,oe){var re=ve/q*L;return(0,_.Up)(I(I({backgroundColor:ce,groupIds:[fe]},Z),{},{type:"rectangle",x:F+44*oe+T,y:z-re-T,width:A,height:re}))});return[].concat((0,g.Z)(U),(0,g.Z)(B(W,F,z,fe,ce,w.Vi.DEVELOPMENT==="production")))}(R,Y,E)}},8982:function(f,h,c){c.d(h,{G:function(){return g},l:function(){return m}});var g=function(b){var v=Math.abs(function(w){var _=0;if(w.length===0)return _;for(var k=0;k<w.length;k++)_=(_<<5)-_+w.charCodeAt(k);return _}(b));return"hsl(".concat(v%37*10,", ").concat(100,"%, ").concat(83,"%)")},m=function(b){var v,w=b==null||(v=b.trim())===null||v===void 0?void 0:v.codePointAt(0);return(w?String.fromCodePoint(w):"?").toUpperCase()}},6665:function(f,h,c){c.d(h,{dd:function(){return R},mQ:function(){return H},uR:function(){return V},vQ:function(){return te},vt:function(){return pe},wx:function(){return Q}});var g=c(7169),m=c(8950),b=c(2975),v=c.n(b),w=c(4162),_=c(5674),k=c(2335),y=c(1974),S=c(2791),C=c(1935),I=c(9040),A=c(6340);function T(E,W){var F=Object.keys(E);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(E);W&&(z=z.filter(function(q){return Object.getOwnPropertyDescriptor(E,q).enumerable})),F.push.apply(F,z)}return F}function L(E){for(var W=1;W<arguments.length;W++){var F=arguments[W]!=null?arguments[W]:{};W%2?T(Object(F),!0).forEach(function(z){(0,g.Z)(E,z,F[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(F)):T(Object(F)).forEach(function(z){Object.defineProperty(E,z,Object.getOwnPropertyDescriptor(F,z))})}return E}var j="",$=!1,ee="clipboard"in navigator&&"readText"in navigator.clipboard,Q="clipboard"in navigator&&"writeText"in navigator.clipboard,pe="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,ie=function(E){return!(![k.r8.excalidraw,k.r8.excalidrawClipboard].includes(E==null?void 0:E.type)||!Array.isArray(E.elements))},te=function(){var E=(0,m.Z)(v().mark(function W(F,z){var q,fe,ce,U,ve;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(q=new Set(F.filter(function(re){return re.type==="frame"})),fe=!1,ce=F.reduce(function(re,ae){return(0,y.wi)(ae)&&(fe=!0,z&&z[ae.fileId]&&(re[ae.fileId]=z[ae.fileId])),re},{}),fe&&!z&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object."),U={type:k.r8.excalidrawClipboard,elements:F.map(function(re){if((0,I.$Z)(re)&&!q.has((0,I.$Z)(re))){var ae=(0,S.OL)(re);return(0,C.DR)(ae,{frameId:null}),ae}return re}),files:z?ce:void 0},ve=JSON.stringify(U),!(0,A.h2)()){oe.next=8;break}return oe.abrupt("return",ve);case 8:return j=ve,oe.prev=9,$=!1,oe.next=13,R(ve);case 13:oe.next=19;break;case 15:oe.prev=15,oe.t0=oe.catch(9),$=!0,console.error(oe.t0);case 19:case"end":return oe.stop()}},W,null,[[9,15]])}));return function(W,F){return E.apply(this,arguments)}}(),Z=function(){if(!j)return{};try{return JSON.parse(j)}catch(E){return console.error(E),{}}},D=function(E){var W=(0,_.dz)(E);return W.type===_.i$?{spreadsheet:W.spreadsheet}:null},B=function(){var E=(0,m.Z)(v().mark(function W(F){var z,q;return v().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(fe.prev=0,!F){fe.next=5;break}fe.t0=(z=F.clipboardData)===null||z===void 0?void 0:z.getData("text/plain"),fe.next=11;break;case 5:if(fe.t1=ee,!fe.t1){fe.next=10;break}return fe.next=9,navigator.clipboard.readText();case 9:fe.t1=fe.sent;case 10:fe.t0=fe.t1;case 11:return q=fe.t0,fe.abrupt("return",(q||"").trim());case 15:return fe.prev=15,fe.t2=fe.catch(0),fe.abrupt("return","");case 18:case"end":return fe.stop()}},W,null,[[0,15]])}));return function(W){return E.apply(this,arguments)}}(),H=function(){var E=(0,m.Z)(v().mark(function W(F){var z,q,fe,ce,U,ve=arguments;return v().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return z=ve.length>1&&ve[1]!==void 0&&ve[1],oe.next=3,B(F);case 3:if((q=oe.sent)&&(z||!q.includes(w.oj))){oe.next=6;break}return oe.abrupt("return",Z());case 6:if(!(fe=!z&&D(q))){oe.next=9;break}return oe.abrupt("return",fe);case 9:if(ce=Z(),oe.prev=10,U=JSON.parse(q),!ie(U)){oe.next=14;break}return oe.abrupt("return",{elements:U.elements,files:U.files,text:z?JSON.stringify(U.elements,null,2):void 0});case 14:oe.next=18;break;case 16:oe.prev=16,oe.t0=oe.catch(10);case 18:return oe.abrupt("return",$&&ce.elements?L(L({},ce),{},{text:z?JSON.stringify(ce.elements,null,2):void 0}):{text:q});case 19:case"end":return oe.stop()}},W,null,[[10,16]])}));return function(W){return E.apply(this,arguments)}}(),V=function(){var E=(0,m.Z)(v().mark(function W(F){return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,navigator.clipboard.write([new window.ClipboardItem((0,g.Z)({},k.LO.png,F))]);case 3:case 21:z.next=24;break;case 5:if(z.prev=5,z.t0=z.catch(0),!(0,A.y8)(F)){z.next=23;break}return z.t1=navigator.clipboard,z.t2=window.ClipboardItem,z.t3=g.Z,z.t4={},z.t5=k.LO.png,z.next=15,F;case 15:return z.t6=z.sent,z.t7=(0,z.t3)(z.t4,z.t5,z.t6),z.t8=new z.t2(z.t7),z.t9=[z.t8],z.next=21,z.t1.write.call(z.t1,z.t9);case 23:throw z.t0;case 24:case"end":return z.stop()}},W,null,[[0,5]])}));return function(W){return E.apply(this,arguments)}}(),R=function(){var E=(0,m.Z)(v().mark(function W(F){var z;return v().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(z=!1,!Q){q.next=11;break}return q.prev=2,q.next=5,navigator.clipboard.writeText(F||"");case 5:z=!0,q.next=11;break;case 8:q.prev=8,q.t0=q.catch(2),console.error(q.t0);case 11:if(z||Y(F||" ")){q.next=13;break}throw new Error("couldn't copy");case 13:case"end":return q.stop()}},W,null,[[2,8]])}));return function(W){return E.apply(this,arguments)}}(),Y=function(E){var W=document.documentElement.getAttribute("dir")==="rtl",F=document.createElement("textarea");F.style.border="0",F.style.padding="0",F.style.margin="0",F.style.position="absolute",F.style[W?"right":"left"]="-9999px";var z=window.pageYOffset||document.documentElement.scrollTop;F.style.top="".concat(z,"px"),F.style.fontSize="12pt",F.setAttribute("readonly",""),F.value=E,document.body.appendChild(F);var q=!1;try{F.select(),F.setSelectionRange(0,F.value.length),q=document.execCommand("copy")}catch(fe){console.error(fe)}return F.remove(),q}},56:function(f,h,c){c.d(h,{C2:function(){return y},HO:function(){return T},Lx:function(){return _},SF:function(){return pe},Wk:function(){return Q},_T:function(){return C},ay:function(){return ee},dC:function(){return k},eq:function(){return $},fY:function(){return j},sF:function(){return ie},vq:function(){return te},z8:function(){return S}});var g=c(7169),m=c(9744);function b(Z,D){var B=Object.keys(Z);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Z);D&&(H=H.filter(function(V){return Object.getOwnPropertyDescriptor(Z,V).enumerable})),B.push.apply(B,H)}return B}function v(Z){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?b(Object(B),!0).forEach(function(H){(0,g.Z)(Z,H,B[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(B)):b(Object(B)).forEach(function(H){Object.defineProperty(Z,H,Object.getOwnPropertyDescriptor(B,H))})}return Z}var w,_=5,k=5,y=4,S=4,C=1,I=[0,2,4,6,8],A=function(Z,D){return D.map(function(B){return m[Z][B]})},T={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:A("gray",I),red:A("red",I),pink:A("pink",I),grape:A("grape",I),violet:A("violet",I),blue:A("blue",I),cyan:A("cyan",I),teal:A("teal",I),green:A("green",I),yellow:A("yellow",I),orange:A("orange",I),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},L=(w=T,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"].reduce(function(Z,D){return D in w&&(Z[D]=w[D]),Z},{})),j=[T.black,T.red[S],T.green[S],T.blue[S],T.yellow[S]],$=[T.transparent,T.red[C],T.green[C],T.blue[C],T.yellow[C]],ee=[T.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],Q=v({transparent:T.transparent,white:T.white,gray:T.gray,black:T.black,bronze:T.bronze},L),pe=v({transparent:T.transparent,white:T.white,gray:T.gray,black:T.black,bronze:T.bronze},L),ie=function(Z){return[T.cyan[Z],T.blue[Z],T.violet[Z],T.grape[Z],T.pink[Z],T.green[Z],T.teal[Z],T.yellow[Z],T.orange[Z],T.red[Z]]},te=function(Z,D,B){return"#".concat(((1<<24)+(Z<<16)+(D<<8)+B).toString(16).slice(1))}},6798:function(f,h,c){c.d(h,{o:function(){return C},w:function(){return S}});var g=c(2577),m=c(6274),b=c(1781),v=c(8211),w=c(9487),_=c(736),k=c(7046),y=c(9980),S=(0,m.cn)(null),C=function(){var I=(0,m.KO)(S,w.yE),A=(0,g.Z)(I,2),T=A[0],L=A[1],j=(0,_.eh)();return T&&T==="clearCanvas"?(0,y.jsx)(k.Z,{onConfirm:function(){j.executeAction(b.mo),L(null)},onCancel:function(){return L(null)},title:(0,v.t)("clearCanvasDialog.title"),children:(0,y.jsxs)("p",{className:"clear-canvas__content",children:[" ",(0,v.t)("alerts.clearReset")]})}):null}},736:function(f,h,c){c.d(h,{ZP:function(){return bo},qD:function(){return eh},hY:function(){return $e},Fy:function(){return Qe},eh:function(){return Bt},gF:function(){return Ct},J0:function(){return nt},bd:function(){return lt},n9:function(){return Mt}});var g=c(6655),m=c(2577),b=c(1930),v=c(8950),w=c(8821),_=c(5169),k=c(3173),y=c(2248),S=c(7245),C=c(2312),I=c(7169),A=c(2975),T=c.n(A),L=c(9787),j=c.n(L),$=c(5156),ee=c(6574),Q=c(9076),pe=c(7583),ie=c(1781),te=c(3646),Z=c(1319),D=c(8211),B=c(6066),H=c(1935),V=c(8290),R=c(6340),Y=c(2335),E=c(9980);function W(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function F(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?W(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):W(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var z=function(O,de,ke){var Oe=!1;if(!(de.multiElement||de.resizingElement||de.editingElement||de.draggingElement)){var He=ke();if(He===null)return{commitToHistory:Oe};var Te=(0,R.xn)(O),Ce=He.elements,Xe=(0,R.xn)(Ce),Je=O.filter(function(yt){return!Xe.has(yt.id)}),ct=Ce.map(function(yt){return(0,H.BE)(Te.get(yt.id)||yt,yt)}).concat(Je.map(function(yt){return(0,H.BE)(yt,{isDeleted:!0})}));return(0,V.$q)(ct,Je),{elements:ct,appState:F(F({},de),He.appState),commitToHistory:Oe,syncHistory:!0}}return{commitToHistory:Oe}},q=c(7047),fe=function(O,de,ke,Oe,He,Te){if(O.trackEvent)try{(0,g.Z)(O.trackEvent)==="object"&&(!O.trackEvent.predicate||O.trackEvent.predicate(ke,Oe,Te))&&(0,q.L)(O.trackEvent.category,O.trackEvent.action||O.name,"".concat(de," (").concat(He.device.isMobile?"mobile":"desktop",")"))}catch(Ce){console.error("error while logging action:",Ce)}},ce=function(){function O(de,ke,Oe,He){var Te=this;(0,w.Z)(this,O),this.actions={},this.renderAction=function(Ce,Xe){var Je=Te.app.props.UIOptions.canvasActions;if(Te.actions[Ce]&&"PanelComponent"in Te.actions[Ce]&&(!(Ce in Je)||Je[Ce])){var ct=Te.actions[Ce],yt=ct.PanelComponent;yt.displayName="PanelComponent";var wt=Te.getElementsIncludingDeleted(),kt=Te.getAppState();return(0,E.jsx)(yt,{elements:Te.getElementsIncludingDeleted(),appState:Te.getAppState(),updateData:function(en){fe(ct,"ui",kt,wt,Te.app,en),Te.updater(ct.perform(Te.getElementsIncludingDeleted(),Te.getAppState(),en,Te.app))},appProps:Te.app.props,data:Xe})}return null},this.isActionEnabled=function(Ce){var Xe=Te.getElementsIncludingDeleted(),Je=Te.getAppState();return!Ce.predicate||Ce.predicate(Xe,Je,Te.app.props,Te.app)},this.updater=function(Ce){if(!Ce||!("then"in Ce))return de(Ce);Ce.then(function(Xe){return de(Xe)})},this.getAppState=ke,this.getElementsIncludingDeleted=Oe,this.app=He}return(0,_.Z)(O,[{key:"registerAction",value:function(de){this.actions[de.name]=de}},{key:"registerAll",value:function(de){var ke=this;de.forEach(function(Oe){return ke.registerAction(Oe)})}},{key:"handleKeyDown",value:function(de){var ke=this,Oe=this.app.props.UIOptions.canvasActions,He=Object.values(this.actions).sort(function(Je,ct){return(ct.keyPriority||0)-(Je.keyPriority||0)}).filter(function(Je){return(!(Je.name in Oe)||Oe[Je.name])&&Je.keyTest&&Je.keyTest(de,ke.getAppState(),ke.getElementsIncludingDeleted())});if(He.length!==1)return He.length>1&&console.warn("Canceling as multiple actions match this shortcut",He),!1;var Te=He[0];if(this.getAppState().viewModeEnabled&&Te.viewMode!==!0)return!1;var Ce=this.getElementsIncludingDeleted(),Xe=this.getAppState();return fe(Te,"keyboard",Xe,Ce,this.app,null),de.preventDefault(),de.stopPropagation(),this.updater(He[0].perform(Ce,Xe,null,this.app)),!0}},{key:"executeAction",value:function(de){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"api",Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,He=this.getElementsIncludingDeleted(),Te=this.getAppState();fe(de,ke,Te,He,this.app,Oe),this.updater(de.perform(He,Te,Oe,this.app))}}]),O}(),U=c(7901),ve=c(8897),oe=c(6665),re=c(9485),ae=c(7053),me=c(679),he=c(1047),se=c(6938),ge=c(2791),X=c(1974),we=function(O){var de=Array.from(O.values());return{x:le(de,function(ke){return ke.x})/de.length,y:le(de,function(ke){return ke.y})/de.length}},be=function(O){var de=(0,m.Z)(O,2),ke=de[0],Oe=de[1];return Math.hypot(ke.x-Oe.x,ke.y-Oe.y)},le=function(O,de){return O.reduce(function(ke,Oe){return ke+de(Oe)},0)},ye=c(242);function ue(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function xe(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?ue(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):ue(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var Pe=function(O){return{selectedElementIds:O.selectedElementIds,selectedGroupIds:O.selectedGroupIds,viewBackgroundColor:O.viewBackgroundColor,editingLinearElement:O.editingLinearElement,editingGroupId:O.editingGroupId,name:O.name}},Ne=function(){function O(){var de=this;(0,w.Z)(this,O),this.elementCache=new Map,this.recording=!0,this.stateHistory=[],this.redoStack=[],this.lastEntry=null,this.generateEntry=function(ke,Oe){return de.dehydrateHistoryEntry({appState:Pe(ke),elements:Oe.reduce(function(He,Te){if((0,X.bt)(Te)&&ke.multiElement&&ke.multiElement.id===Te.id){if(ke.multiElement&&ke.multiElement.id===Te.id&&Te.points.length<2)return He;He.push(xe(xe({},Te),{},{points:Te.lastCommittedPoint!==Te.points[Te.points.length-1]?Te.points.slice(0,-1):Te.points}))}else He.push(Te);return He},[])})}}return(0,_.Z)(O,[{key:"hydrateHistoryEntry",value:function(de){var ke=this,Oe=de.appState,He=de.elements;return{appState:JSON.parse(Oe),elements:He.map(function(Te){var Ce,Xe=(Ce=ke.elementCache.get(Te.id))===null||Ce===void 0?void 0:Ce.get(Te.versionNonce);if(!Xe)throw new Error("Element not found: ".concat(Te.id,":").concat(Te.versionNonce));return Xe})}}},{key:"dehydrateHistoryEntry",value:function(de){var ke=this,Oe=de.appState,He=de.elements;return{appState:JSON.stringify(Oe),elements:He.map(function(Te){ke.elementCache.has(Te.id)||ke.elementCache.set(Te.id,new Map);var Ce=ke.elementCache.get(Te.id);return Ce.has(Te.versionNonce)||Ce.set(Te.versionNonce,(0,ge.OL)(Te)),{id:Te.id,versionNonce:Te.versionNonce}})}}},{key:"getSnapshotForTest",value:function(){var de=this;return{recording:this.recording,stateHistory:this.stateHistory.map(function(ke){return de.hydrateHistoryEntry(ke)}),redoStack:this.redoStack.map(function(ke){return de.hydrateHistoryEntry(ke)})}}},{key:"clear",value:function(){this.stateHistory.length=0,this.redoStack.length=0,this.lastEntry=null,this.elementCache.clear()}},{key:"shouldCreateEntry",value:function(de){var ke,Oe=this.lastEntry;if(!Oe||de.elements.length!==Oe.elements.length)return!0;for(var He=de.elements.length-1;He>-1;He--){var Te=de.elements[He],Ce=Oe.elements[He];if(!Te||!Ce||Te.id!==Ce.id||Te.versionNonce!==Ce.versionNonce)return!0}for(ke in de.appState){var Xe,Je;if(!(ke==="editingLinearElement"&&((Xe=de.appState[ke])===null||Xe===void 0?void 0:Xe.elementId)===((Je=Oe.appState[ke])===null||Je===void 0?void 0:Je.elementId))&&ke!=="selectedElementIds"&&ke!=="selectedGroupIds"&&de.appState[ke]!==Oe.appState[ke])return!0}return!1}},{key:"pushEntry",value:function(de,ke){var Oe=this.generateEntry(de,ke),He=this.hydrateHistoryEntry(Oe);if(He){if(!this.shouldCreateEntry(He))return;this.stateHistory.push(Oe),this.lastEntry=He,this.clearRedoStack()}}},{key:"clearRedoStack",value:function(){this.redoStack.splice(0,this.redoStack.length)}},{key:"redoOnce",value:function(){if(this.redoStack.length===0)return null;var de=this.redoStack.pop();return de!==void 0?(this.stateHistory.push(de),this.hydrateHistoryEntry(de)):null}},{key:"undoOnce",value:function(){if(this.stateHistory.length===1)return null;var de=this.stateHistory.pop(),ke=this.stateHistory[this.stateHistory.length-1];return de!==void 0?(this.redoStack.push(de),this.hydrateHistoryEntry(ke)):null}},{key:"setCurrentState",value:function(de,ke){this.lastEntry=this.hydrateHistoryEntry(this.generateEntry(de,ke))}},{key:"resumeRecording",value:function(){this.recording=!0}},{key:"record",value:function(de,ke){this.recording&&(this.pushEntry(de,ke),this.recording=!1)}}]),O}(),Me=c(6552),Re=c(3547),We=c(5317),Se=c(75),Be=c(1564),_e=c(746),ze=[{icon:te.zu,value:"selection",key:B.tW.V,numericKey:B.tW[1],fillable:!0},{icon:te.OW,value:"rectangle",key:B.tW.R,numericKey:B.tW[2],fillable:!0},{icon:te.nb,value:"diamond",key:B.tW.D,numericKey:B.tW[3],fillable:!0},{icon:te.Re,value:"ellipse",key:B.tW.O,numericKey:B.tW[4],fillable:!0},{icon:te.e0,value:"arrow",key:B.tW.A,numericKey:B.tW[5],fillable:!0},{icon:te.zb,value:"line",key:B.tW.L,numericKey:B.tW[6],fillable:!0},{icon:te.Pm,value:"freedraw",key:[B.tW.P,B.tW.X],numericKey:B.tW[7],fillable:!1},{icon:te.VL,value:"text",key:B.tW.T,numericKey:B.tW[8],fillable:!1},{icon:te.XB,value:"image",key:null,numericKey:B.tW[9],fillable:!1},{icon:te.$q,value:"eraser",key:B.tW.E,numericKey:B.tW[0],fillable:!1}],Ve=c(2891),ut=c(487),Ie=c.n(ut),ot=c(631),Ye=c.n(ot),Ke=c(2052),tt=c.n(Ke),pt=c(4010),St=c.n(pt),Kt=c(1469),sn=c.n(Kt),nn=c(9329),Cn=c.n(nn),vn=c(6578),Fe={};Fe.styleTagTransform=Cn(),Fe.setAttributes=St(),Fe.insert=tt().bind(null,"head"),Fe.domAPI=Ye(),Fe.insertStyleElement=sn(),Ie()(vn.Z,Fe),vn.Z&&vn.Z.locals&&vn.Z.locals;var et=c(785),st="separator",ht=j().memo(function(O){var de=O.actionManager,ke=O.items,Oe=O.top,He=O.left,Te=Ct(),Ce=Mt(),Xe=lt(),Je=ke.reduce(function(ct,yt){return!yt||yt!==st&&yt.predicate&&!yt.predicate(Xe,Te,de.app.props,de.app)||ct.push(yt),ct},[]);return(0,E.jsx)(Ve.J,{onCloseRequest:function(){return Ce({contextMenu:null})},top:Oe,left:He,fitInViewport:!0,offsetLeft:Te.offsetLeft,offsetTop:Te.offsetTop,viewportWidth:Te.width,viewportHeight:Te.height,children:(0,E.jsx)("ul",{className:"context-menu",onContextMenu:function(ct){return ct.preventDefault()},children:Je.map(function(ct,yt){var wt;if(ct===st)return Je[yt-1]&&Je[yt-1]!==st?(0,E.jsx)("hr",{className:"context-menu-item-separator"},yt):null;var kt=ct.name,en="";return ct.contextItemLabel&&(en=typeof ct.contextItemLabel=="function"?(0,D.t)(ct.contextItemLabel(Xe,Te)):(0,D.t)(ct.contextItemLabel)),(0,E.jsx)("li",{"data-testid":kt,onClick:function(){Ce({contextMenu:null},function(){de.executeAction(ct,"contextMenu")})},children:(0,E.jsxs)("button",{className:(0,Q.Z)("context-menu-item",{dangerous:kt==="deleteSelectedElements",checkmark:(wt=ct.checked)===null||wt===void 0?void 0:wt.call(ct,Te)}),children:[(0,E.jsx)("div",{className:"context-menu-item__label",children:en}),(0,E.jsx)("kbd",{className:"context-menu-item__shortcut",children:kt?(0,et.C)(kt):""})]})},yt)})})})}),_t=c(2726),Zt=c(7239),Yt=c(8120),bn=c(1894),Wt=c(5710),un=c(6086),jn={};jn.styleTagTransform=Cn(),jn.setAttributes=St(),jn.insert=tt().bind(null,"head"),jn.domAPI=Ye(),jn.insertStyleElement=sn(),Ie()(un.Z,jn),un.Z&&un.Z.locals&&un.Z.locals;var Hn=c(1510);function vt(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function Nt(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?vt(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):vt(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}function Tt(O,de){var ke=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(!ke){if(Array.isArray(O)||(ke=function(Je,ct){if(Je){if(typeof Je=="string")return cn(Je,ct);var yt=Object.prototype.toString.call(Je).slice(8,-1);if(yt==="Object"&&Je.constructor&&(yt=Je.constructor.name),yt==="Map"||yt==="Set")return Array.from(Je);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return cn(Je,ct)}}(O))||de&&O&&typeof O.length=="number"){ke&&(O=ke);var Oe=0,He=function(){};return{s:He,n:function(){return Oe>=O.length?{done:!0}:{done:!1,value:O[Oe++]}},e:function(Je){throw Je},f:He}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,Ce=!0,Xe=!1;return{s:function(){ke=ke.call(O)},n:function(){var Je=ke.next();return Ce=Je.done,Je},e:function(Je){Xe=!0,Te=Je},f:function(){try{Ce||ke.return==null||ke.return()}finally{if(Xe)throw Te}}}}function cn(O,de){(de==null||de>O.length)&&(de=O.length);for(var ke=0,Oe=new Array(de);ke<de;ke++)Oe[ke]=O[ke];return Oe}var Ot=function(O){var de,ke=O.appState,Oe=O.elements,He=O.renderAction,Te=(0,Se.Zs)((0,he.Lm)(Oe),ke),Ce=!1;Te.length===2&&((0,X.Xo)(Te[0])||(0,X.Xo)(Te[1]))&&(Ce=!0);var Xe,Je=!!ke.editingElement,ct=Qe(),yt=document.documentElement.getAttribute("dir")==="rtl",wt=(0,Se.$b)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.$b)(qn.type)&&!(0,R.Qm)(qn.backgroundColor)}),kt=(0,Se.$b)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.$b)(qn.type)}),en=Te.length===1||Ce,wn=((de=Te[0])===null||de===void 0?void 0:de.type)||null,In=Tt(Te);try{for(In.s();!(Xe=In.n()).done;)if(Xe.value.type!==wn){wn=null;break}}catch(qn){In.e(qn)}finally{In.f()}return(0,E.jsxs)("div",{className:"panelColumn",children:[(0,E.jsx)("div",{children:((0,Yt.PD)(ke.activeTool.type)&&ke.activeTool.type!=="image"&&wn!=="image"&&wn!=="frame"||Te.some(function(qn){return(0,Yt.PD)(qn.type)}))&&He("changeStrokeColor")}),kt&&(0,E.jsx)("div",{children:He("changeBackgroundColor")}),wt&&He("changeFillStyle"),((0,Se.Zd)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.Zd)(qn.type)}))&&He("changeStrokeWidth"),(ke.activeTool.type==="freedraw"||Te.some(function(qn){return qn.type==="freedraw"}))&&He("changeStrokeShape"),((0,Se.M9)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.M9)(qn.type)}))&&(0,E.jsxs)(E.Fragment,{children:[He("changeStrokeStyle"),He("changeSloppiness")]}),((0,Se.sh)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.sh)(qn.type)}))&&(0,E.jsx)(E.Fragment,{children:He("changeRoundness")}),((0,Se.bZ)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.bZ)(qn.type)}))&&(0,E.jsxs)(E.Fragment,{children:[He("changeFontSize"),He("changeFontFamily"),(0,Wt.aV)(Te)&&He("changeTextAlign")]}),(0,Wt.cn)(Te)&&He("changeVerticalAlign"),((0,Se.Un)(ke.activeTool.type)||Te.some(function(qn){return(0,Se.Un)(qn.type)}))&&(0,E.jsx)(E.Fragment,{children:He("changeArrowhead")}),He("changeOpacity"),(0,E.jsxs)("fieldset",{children:[(0,E.jsx)("legend",{children:(0,D.t)("labels.layers")}),(0,E.jsxs)("div",{className:"buttonList",children:[He("sendToBack"),He("sendBackward"),He("bringToFront"),He("bringForward")]})]}),Te.length>1&&!Ce&&(0,E.jsxs)("fieldset",{children:[(0,E.jsx)("legend",{children:(0,D.t)("labels.align")}),(0,E.jsxs)("div",{className:"buttonList",children:[yt?(0,E.jsxs)(E.Fragment,{children:[He("alignRight"),He("alignHorizontallyCentered"),He("alignLeft")]}):(0,E.jsxs)(E.Fragment,{children:[He("alignLeft"),He("alignHorizontallyCentered"),He("alignRight")]}),Te.length>2&&He("distributeHorizontally"),(0,E.jsx)("div",{style:{flexBasis:"100%",height:0}}),(0,E.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[He("alignTop"),He("alignVerticallyCentered"),He("alignBottom"),Te.length>2&&He("distributeVertically")]})]})]}),!Je&&Te.length>0&&(0,E.jsxs)("fieldset",{children:[(0,E.jsx)("legend",{children:(0,D.t)("labels.actions")}),(0,E.jsxs)("div",{className:"buttonList",children:[!ct.isMobile&&He("duplicateSelection"),!ct.isMobile&&He("deleteSelectedElements"),He("group"),He("ungroup"),en&&He("hyperlink")]})]})]})},Ln=function(O){var de=O.canvas,ke=O.activeTool,Oe=O.setAppState,He=O.onImageAction,Te=O.appState,Ce=(0,L.useState)(!1),Xe=(0,m.Z)(Ce,2),Je=Xe[0],ct=Xe[1],yt=Qe();return(0,E.jsxs)(E.Fragment,{children:[ze.map(function(wt,kt){var en=wt.value,wn=wt.icon,In=wt.key,qn=wt.numericKey,cr=wt.fillable,Nr=(0,D.t)("toolBar.".concat(en)),Jn=In&&(0,R.Oo)(typeof In=="string"?In:In[0]),Lr=Jn?"".concat(Jn," ").concat((0,D.t)("helpDialog.or")," ").concat(qn):"".concat(qn);return(0,E.jsx)(Z.V,{className:(0,Q.Z)("Shape",{fillable:cr}),type:"radio",icon:wn,checked:ke.type===en,name:"editor-current-shape",title:"".concat((0,R.Oo)(Nr),"  ").concat(Lr),keyBindingLabel:qn||Jn,"aria-label":(0,R.Oo)(Nr),"aria-keyshortcuts":Lr,"data-testid":"toolbar-".concat(en),onPointerDown:function(qr){var gr=qr.pointerType;Te.penDetected||gr!=="pen"||Oe({penDetected:!0,penMode:!0})},onChange:function(qr){var gr=qr.pointerType;Te.activeTool.type!==en&&(0,q.L)("toolbar",en,"ui");var Vr=(0,R.Om)(Te,{type:en});Oe({activeTool:Vr,multiElement:null,selectedElementIds:{}}),(0,R.Uk)(de,Nt(Nt({},Te),{},{activeTool:Vr})),en==="image"&&He({pointerType:gr})}},en)}),(0,E.jsx)("div",{className:"App-toolbar__divider"}),yt.isMobile?(0,E.jsx)(Z.V,{className:(0,Q.Z)("Shape",{fillable:!1}),type:"radio",icon:te.zl,checked:ke.type==="frame",name:"editor-current-shape",title:"".concat((0,R.Oo)((0,D.t)("toolBar.frame")),"  ").concat(B.tW.F.toLocaleUpperCase()),keyBindingLabel:B.tW.F.toLocaleUpperCase(),"aria-label":(0,R.Oo)((0,D.t)("toolBar.frame")),"aria-keyshortcuts":B.tW.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",onPointerDown:function(wt){var kt=wt.pointerType;Te.penDetected||kt!=="pen"||Oe({penDetected:!0,penMode:!0})},onChange:function(wt){wt.pointerType,(0,q.L)("toolbar","frame","ui");var kt=(0,R.Om)(Te,{type:"frame"});Oe({activeTool:kt,multiElement:null,selectedElementIds:{}})}}):(0,E.jsxs)(Hn.Z,{open:Je,children:[(0,E.jsx)(Hn.Z.Trigger,{className:"App-toolbar__extra-tools-trigger",onToggle:function(){return ct(!Je)},title:(0,D.t)("toolBar.extraTools"),children:te.dg}),(0,E.jsx)(Hn.Z.Content,{onClickOutside:function(){return ct(!1)},onSelect:function(){return ct(!1)},className:"App-toolbar__extra-tools-dropdown",children:(0,E.jsx)(Hn.Z.Item,{onSelect:function(){var wt=(0,R.Om)(Te,{type:"frame"});Oe({activeTool:wt,multiElement:null,selectedElementIds:{}})},icon:te.zl,shortcut:B.tW.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",children:(0,D.t)("toolBar.frame")})})]})]})},Wn=function(O){var de=O.renderAction;return O.zoom,(0,E.jsx)(Zt.Z.Col,{gap:1,className:"zoom-actions",children:(0,E.jsxs)(Zt.Z.Row,{align:"center",children:[de("zoomOut"),de("resetZoom"),de("zoomIn")]})})},Rn=function(O){var de=O.renderAction,ke=O.className;return(0,E.jsxs)("div",{className:"undo-redo-buttons ".concat(ke),children:[(0,E.jsx)("div",{className:"undo-button-container",children:(0,E.jsx)(bn.u,{label:(0,D.t)("buttons.undo"),children:de("undo")})}),(0,E.jsx)("div",{className:"redo-button-container",children:(0,E.jsxs)(bn.u,{label:(0,D.t)("buttons.redo"),children:[" ",de("redo")]})})]})},zn=function(O){var de=O.actionManager,ke=O.showExitZenModeBtn;return(0,E.jsx)("button",{className:(0,Q.Z)("disable-zen-mode",{"disable-zen-mode--visible":ke}),onClick:function(){return de.executeAction(ie.JN)},children:(0,D.t)("buttons.exitZenMode")})},Et=function(O){var de=O.renderAction,ke=O.className;return(0,E.jsx)("div",{className:"finalize-button ".concat(ke),children:de("finalize",{size:"small"})})},Dt=c(8396),Gt=function(O){var de=O.children,ke=O.onClose,Oe=(0,L.useState)(!!de),He=(0,m.Z)(Oe,2),Te=He[0],Ce=He[1],Xe=nt().container,Je=j().useCallback(function(){Ce(!1),ke&&ke(),Xe==null||Xe.focus()},[ke,Xe]);return(0,E.jsx)(E.Fragment,{children:Te&&(0,E.jsx)(Dt.V,{size:"small",onCloseRequest:Je,title:(0,D.t)("errorDialog.title"),children:(0,E.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:de})})})},Jt=c(8671),$n=c(434),Kn=c(313),wr=c(3024),dr=c(6217),yn={};yn.styleTagTransform=Cn(),yn.setAttributes=St(),yn.insert=tt().bind(null,"head"),yn.domAPI=Ye(),yn.insertStyleElement=sn(),Ie()(dr.Z,yn),dr.Z&&dr.Z.locals&&dr.Z.locals;var hr=function(O){var de=O.onChange,ke=O.value,Oe=O.choices,He=O.name;return(0,E.jsx)("div",{className:"RadioGroup",children:Oe.map(function(Te){return(0,E.jsxs)("div",{className:(0,Q.Z)("RadioGroup__choice",{active:Te.value===ke}),children:[(0,E.jsx)("input",{name:He,type:"radio",checked:Te.value===ke,onChange:function(){return de(Te.value)}}),Te.label]},Te.label)})})},Er=c(7802),Nn={};Nn.styleTagTransform=Cn(),Nn.setAttributes=St(),Nn.insert=tt().bind(null,"head"),Nn.domAPI=Ye(),Nn.insertStyleElement=sn(),Ie()(Er.Z,Nn),Er.Z&&Er.Z.locals&&Er.Z.locals;var ar=function(O){var de=O.title,ke=O.name,Oe=O.checked,He=O.onChange,Te=O.disabled,Ce=Te!==void 0&&Te;return(0,E.jsx)("div",{className:(0,Q.Z)("Switch",{toggled:Oe,disabled:Ce}),children:(0,E.jsx)("input",{name:ke,id:ke,title:de,type:"checkbox",checked:Oe,disabled:Ce,onChange:function(){return He(!Oe)},onKeyDown:function(Xe){Xe.key===" "&&He(!Oe)}})})},Dr=c(9706),Ir={};Ir.styleTagTransform=Cn(),Ir.setAttributes=St(),Ir.insert=tt().bind(null,"head"),Ir.domAPI=Ye(),Ir.insertStyleElement=sn(),Ie()(Dr.Z,Ir),Dr.Z&&Dr.Z.locals&&Dr.Z.locals;var Vt=c(8960),An={};An.styleTagTransform=Cn(),An.setAttributes=St(),An.insert=tt().bind(null,"head"),An.domAPI=Ye(),An.insertStyleElement=sn(),Ie()(Vt.Z,An),Vt.Z&&Vt.Z.locals&&Vt.Z.locals;var pn=(0,L.forwardRef)(function(O,de){var ke=O.children,Oe=O.startIcon,He=O.onClick,Te=O.label,Ce=O.variant,Xe=Ce===void 0?"filled":Ce,Je=O.color,ct=Je===void 0?"primary":Je,yt=O.size,wt=yt===void 0?"medium":yt,kt=O.fullWidth,en=O.className;return(0,E.jsxs)("button",{className:(0,Q.Z)("ExcButton","ExcButton--color-".concat(ct),"ExcButton--variant-".concat(Xe),"ExcButton--size-".concat(wt),{"ExcButton--fullWidth":kt},en),onClick:He,type:"button","aria-label":Te,ref:de,children:[Oe&&(0,E.jsx)("div",{className:"ExcButton__icon","aria-hidden":!0,children:Oe}),Xe!=="icon"&&(ke??Te)]})}),mn="filter"in document.createElement("canvas").getContext("2d"),or=function(){return(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{children:(0,D.t)("canvasError.cannotShowPreview")}),(0,E.jsx)("p",{children:(0,E.jsx)("span",{children:(0,D.t)("canvasError.canvasTooBig")})}),(0,E.jsxs)("em",{children:["(",(0,D.t)("canvasError.canvasTooBigTip"),")"]})]})},fr=function(O){var de=O.appState,ke=O.elements,Oe=O.files,He=O.actionManager,Te=O.onExportImage,Ce=$e(),Xe=(0,L.useState)(de.name),Je=(0,m.Z)(Xe,2),ct=Je[0],yt=Je[1],wt=(0,Se.N)(ke,de),kt=(0,L.useState)(wt),en=(0,m.Z)(kt,2),wn=en[0],In=en[1],qn=(0,L.useState)(de.exportBackground),cr=(0,m.Z)(qn,2),Nr=cr[0],Jn=cr[1],Lr=(0,L.useState)(de.exportWithDarkMode),qr=(0,m.Z)(Lr,2),gr=qr[0],Vr=qr[1],co=(0,L.useState)(de.exportEmbedScene),qo=(0,m.Z)(co,2),Wo=qo[0],Ta=qo[1],Ca=(0,L.useState)(de.exportScale),Is=(0,m.Z)(Ca,2),Ts=Is[0],mi=Is[1],Ci=(0,L.useRef)(null),Jo=(0,L.useState)(null),$o=(0,m.Z)(Jo,2),Do=$o[0],Za=$o[1],vi=wn?(0,Se.eD)(ke,de,{includeBoundTextElement:!0,includeElementsInFrames:!0}):ke;return(0,L.useEffect)(function(){var Ho=Ci.current;if(Ho){var Ga=Ho.offsetWidth,Os=Ho.offsetHeight;Ga&&(0,wr.NL)({elements:vi,appState:de,files:Oe,exportPadding:Y.qy,maxWidthOrHeight:Math.max(Ga,Os)}).then(function(Xa){return Za(null),(0,$n._c)(Xa).then(function(){Ho.replaceChildren(Xa)})}).catch(function(Xa){console.error(Xa),Za(Xa)})}},[de,Oe,vi]),(0,E.jsxs)("div",{className:"ImageExportModal",children:[(0,E.jsx)("h3",{children:(0,D.t)("imageExportDialog.header")}),(0,E.jsxs)("div",{className:"ImageExportModal__preview",children:[(0,E.jsx)("div",{className:"ImageExportModal__preview__canvas",ref:Ci,children:Do&&(0,E.jsx)(or,{})}),(0,E.jsx)("div",{className:"ImageExportModal__preview__filename",children:!Kn.kr&&(0,E.jsx)("input",{type:"text",className:"TextInput",value:ct,style:{width:"30ch"},disabled:Ce.name!==void 0||de.viewModeEnabled,onChange:function(Ho){yt(Ho.target.value),He.executeAction(Jt.zX,"ui",Ho.target.value)}})})]}),(0,E.jsxs)("div",{className:"ImageExportModal__settings",children:[(0,E.jsx)("h3",{children:(0,D.t)("imageExportDialog.header")}),wt&&(0,E.jsx)(Fn,{label:(0,D.t)("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:(0,E.jsx)(ar,{name:"exportOnlySelected",checked:wn,onChange:function(Ho){In(Ho)}})}),(0,E.jsx)(Fn,{label:(0,D.t)("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:(0,E.jsx)(ar,{name:"exportBackgroundSwitch",checked:Nr,onChange:function(Ho){Jn(Ho),He.executeAction(Jt.XA,"ui",Ho)}})}),mn&&(0,E.jsx)(Fn,{label:(0,D.t)("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:(0,E.jsx)(ar,{name:"exportDarkModeSwitch",checked:gr,onChange:function(Ho){Vr(Ho),He.executeAction(Jt.bJ,"ui",Ho)}})}),(0,E.jsx)(Fn,{label:(0,D.t)("imageExportDialog.label.embedScene"),tooltip:(0,D.t)("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:(0,E.jsx)(ar,{name:"exportEmbedSwitch",checked:Wo,onChange:function(Ho){Ta(Ho),He.executeAction(Jt.Du,"ui",Ho)}})}),(0,E.jsx)(Fn,{label:(0,D.t)("imageExportDialog.label.scale"),name:"exportScale",children:(0,E.jsx)(hr,{name:"exportScale",value:Ts,onChange:function(Ho){mi(Ho),He.executeAction(Jt.sK,"ui",Ho)},choices:Y.ZB.map(function(Ho){return{value:Ho,label:"".concat(Ho,"")}})})}),(0,E.jsxs)("div",{className:"ImageExportModal__settings__buttons",children:[(0,E.jsx)(pn,{className:"ImageExportModal__settings__buttons__button",label:(0,D.t)("imageExportDialog.title.exportToPng"),onClick:function(){return Te(Y.I_.png,vi)},startIcon:te.aL,children:(0,D.t)("imageExportDialog.button.exportToPng")}),(0,E.jsx)(pn,{className:"ImageExportModal__settings__buttons__button",label:(0,D.t)("imageExportDialog.title.exportToSvg"),onClick:function(){return Te(Y.I_.svg,vi)},startIcon:te.aL,children:(0,D.t)("imageExportDialog.button.exportToSvg")}),(oe.vt||Y.vU)&&(0,E.jsx)(pn,{className:"ImageExportModal__settings__buttons__button",label:(0,D.t)("imageExportDialog.title.copyPngToClipboard"),onClick:function(){return Te(Y.I_.clipboard,vi)},startIcon:te.UI,children:(0,D.t)("imageExportDialog.button.copyPngToClipboard")})]})]})]})},Fn=function(O){var de=O.label,ke=O.children,Oe=O.tooltip,He=O.name;return(0,E.jsxs)("div",{className:"ImageExportModal__settings__setting",title:de,children:[(0,E.jsxs)("label",{htmlFor:He,className:"ImageExportModal__settings__setting__label",children:[de,Oe&&(0,E.jsx)(bn.u,{label:Oe,long:!0,children:te.mv})]}),(0,E.jsx)("div",{className:"ImageExportModal__settings__setting__content",children:ke})]})},De=function(O){var de=O.elements,ke=O.appState,Oe=O.files,He=O.actionManager,Te=O.onExportImage,Ce=O.onCloseRequest;return ke.openDialog!=="imageExport"?null:(0,E.jsx)(Dt.V,{onCloseRequest:Ce,size:"wide",title:!1,children:(0,E.jsx)(fr,{elements:de,appState:ke,files:Oe,actionManager:He,onExportImage:Te})})},Ue=c(3195),qe={};qe.styleTagTransform=Cn(),qe.setAttributes=St(),qe.insert=tt().bind(null,"head"),qe.domAPI=Ye(),qe.insertStyleElement=sn(),Ie()(Ue.Z,qe),Ue.Z&&Ue.Z.locals&&Ue.Z.locals;var dt=function(O){var de=O.children,ke=O.side,Oe=O.className;return(0,E.jsx)("div",{className:(0,Q.Z)("FixedSideContainer","FixedSideContainer_side_".concat(ke),Oe),children:de})},Ut=c(1587),qt={};qt.styleTagTransform=Cn(),qt.setAttributes=St(),qt.insert=tt().bind(null,"head"),qt.domAPI=Ye(),qt.insertStyleElement=sn(),Ie()(Ut.Z,qt),Ut.Z&&Ut.Z.locals&&Ut.Z.locals;var on=function(O){var de=function(ke){var Oe=ke.appState,He=ke.elements,Te=ke.isMobile,Ce=ke.device,Xe=Oe.activeTool,Je=Oe.isResizing,ct=Oe.isRotating,yt=Oe.lastPointerDownWith,wt=Oe.multiElement!==null;if(Oe.openSidebar&&!Ce.canDeviceFitSidebar)return null;if((0,ve.EN)(Oe))return(0,D.t)("hints.eraserRevert");if(Xe.type==="arrow"||Xe.type==="line")return wt?(0,D.t)("hints.linearElementMulti"):(0,D.t)("hints.linearElement");if(Xe.type==="freedraw")return(0,D.t)("hints.freeDraw");if(Xe.type==="text")return(0,D.t)("hints.text");if(Oe.activeTool.type==="image"&&Oe.pendingImageElementId)return(0,D.t)("hints.placeImage");var kt=(0,Se.eD)(He,Oe);if(Je&&yt==="mouse"&&kt.length===1){var en=kt[0];return(0,X.bt)(en)&&en.points.length===2?(0,D.t)("hints.lockAngle"):(0,X.pC)(en)?(0,D.t)("hints.resizeImage"):(0,D.t)("hints.resize")}if(ct&&yt==="mouse")return(0,D.t)("hints.rotate");if(kt.length===1&&(0,X.iB)(kt[0]))return(0,D.t)("hints.text_selected");if(Oe.editingElement&&(0,X.iB)(Oe.editingElement))return(0,D.t)("hints.text_editing");if(Xe.type==="selection"){var wn;if(((wn=Oe.draggingElement)===null||wn===void 0?void 0:wn.type)==="selection"&&!Oe.editingElement&&!Oe.editingLinearElement)return(0,D.t)("hints.deepBoxSelect");if(!kt.length&&!Te)return(0,D.t)("hints.canvasPanning")}if(kt.length===1){if((0,X.bt)(kt[0]))return Oe.editingLinearElement?Oe.editingLinearElement.selectedPointsIndices?(0,D.t)("hints.lineEditor_pointSelected"):(0,D.t)("hints.lineEditor_nothingSelected"):(0,D.t)("hints.lineEditor_info");if((0,X.mG)(kt[0]))return(0,D.t)("hints.bindTextToElement")}return null}({appState:O.appState,elements:O.elements,isMobile:O.isMobile,device:O.device});return de?(de=(0,R.uY)(de),(0,E.jsx)("div",{className:"HintViewer",children:(0,E.jsx)("span",{children:de})})):null},xn=c(1881),tn=c(5440),tr=(c(5422),{CHECKED:te.FC,UNCHECKED:te._C}),ir=function(O){return(0,E.jsxs)("label",{className:(0,Q.Z)("ToolIcon ToolIcon__lock","ToolIcon_size_".concat("medium"),{"is-mobile":O.isMobile}),title:"".concat(O.title,"  Q"),children:[(0,E.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:O.name,onChange:O.onChange,checked:O.checked,"aria-label":O.title,"data-testid":"toolbar-lock"}),(0,E.jsx)("div",{className:"ToolIcon__icon",children:O.checked?tr.CHECKED:tr.UNCHECKED})]})},br=["heading","children"];function Hr(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function Fr(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?Hr(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):Hr(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var go=function(O){var de=O.heading,ke=O.children,Oe=(0,_t.Z)(O,br),He=nt().id,Te=(0,E.jsx)("h2",{className:"visually-hidden",id:"".concat(He,"-").concat(de,"-title"),children:(0,D.t)("headings.".concat(de))});return(0,E.jsx)("section",Fr(Fr({},Oe),{},{"aria-labelledby":"".concat(He,"-").concat(de,"-title"),children:typeof ke=="function"?ke(Te):(0,E.jsxs)(E.Fragment,{children:[Te,ke]})}))},Wr=c(756),Mr=function(O){return O.penDetected?(0,E.jsxs)("label",{className:(0,Q.Z)("ToolIcon ToolIcon__penMode","ToolIcon_size_".concat("medium"),{"is-mobile":O.isMobile}),title:"".concat(O.title),children:[(0,E.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:O.name,onChange:O.onChange,checked:O.checked,"aria-label":O.title}),(0,E.jsx)("div",{className:"ToolIcon__icon",children:te.tb})]}):null},Ro=c(8925),si=c(2681),hi={};hi.styleTagTransform=Cn(),hi.setAttributes=St(),hi.insert=tt().bind(null,"head"),hi.domAPI=Ye(),hi.insertStyleElement=sn(),Ie()(si.Z,hi),si.Z&&si.Z.locals&&si.Z.locals;var ti=function(O){var de,ke=(0,Ro.KP)(O.elements),Oe=(0,Se.Zs)(O.elements,O.appState),He=(0,Ro.KP)(Oe);return(0,E.jsx)("div",{className:"Stats",children:(0,E.jsxs)(xn.W,{padding:2,children:[(0,E.jsx)("div",{className:"close",onClick:O.onClose,children:te.Tw}),(0,E.jsx)("h3",{children:(0,D.t)("stats.title")}),(0,E.jsx)("table",{children:(0,E.jsxs)("tbody",{children:[(0,E.jsx)("tr",{children:(0,E.jsx)("th",{colSpan:2,children:(0,D.t)("stats.scene")})}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.elements")}),(0,E.jsx)("td",{children:O.elements.length})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.width")}),(0,E.jsx)("td",{children:Math.round(ke[2])-Math.round(ke[0])})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.height")}),(0,E.jsx)("td",{children:Math.round(ke[3])-Math.round(ke[1])})]}),Oe.length===1&&(0,E.jsx)("tr",{children:(0,E.jsx)("th",{colSpan:2,children:(0,D.t)("stats.element")})}),Oe.length>1&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("tr",{children:(0,E.jsx)("th",{colSpan:2,children:(0,D.t)("stats.selected")})}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.elements")}),(0,E.jsx)("td",{children:Oe.length})]})]}),Oe.length>0&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:"x"}),(0,E.jsx)("td",{children:Math.round(He[0])})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:"y"}),(0,E.jsx)("td",{children:Math.round(He[1])})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.width")}),(0,E.jsx)("td",{children:Math.round(He[2]-He[0])})]}),(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.height")}),(0,E.jsx)("td",{children:Math.round(He[3]-He[1])})]})]}),Oe.length===1&&(0,E.jsxs)("tr",{children:[(0,E.jsx)("td",{children:(0,D.t)("stats.angle")}),(0,E.jsx)("td",{children:"".concat(Math.round(180*Oe[0].angle/Math.PI),"")})]}),(de=O.renderCustomStats)===null||de===void 0?void 0:de.call(O,O.elements,O.appState)]})})]})})},ha=function(O){return(0,E.jsx)(Z.V,{className:(0,Q.Z)("Shape",{fillable:!1}),type:"radio",icon:te.Hk,name:"editor-current-shape",checked:O.checked,title:"".concat(O.title,"  H"),keyBindingLabel:O.isMobile?void 0:B.tW.H.toLocaleUpperCase(),"aria-label":"".concat(O.title,"  H"),"aria-keyshortcuts":B.tW.H,"data-testid":"toolbar-hand",onChange:function(){var de;return(de=O.onChange)===null||de===void 0?void 0:de.call(O)}})},fa=c(8690);function Go(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}var Mo=function(O){var de=O.appState,ke=O.elements,Oe=O.actionManager,He=O.setAppState,Te=O.onLockToggle,Ce=O.onHandToolToggle,Xe=O.onPenModeToggle,Je=O.canvas,ct=O.onImageAction,yt=O.renderTopRightUI,wt=O.renderCustomStats,kt=O.renderSidebars,en=O.device,wn=O.renderWelcomeScreen,In=(0,fa.R6)(),qn=In.WelcomeScreenCenterTunnel,cr=In.MainMenuTunnel,Nr=In.DefaultSidebarTriggerTunnel;return(0,E.jsxs)(E.Fragment,{children:[kt(),!de.viewModeEnabled&&(0,E.jsxs)(dt,{side:"top",className:"App-top-bar",children:[wn&&(0,E.jsx)(qn.Out,{}),(0,E.jsx)(go,{heading:"shapes",children:function(Jn){return(0,E.jsx)(Zt.Z.Col,{gap:4,align:"center",children:(0,E.jsxs)(Zt.Z.Row,{gap:1,className:"App-toolbar-container",children:[(0,E.jsxs)(xn.W,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[Jn,(0,E.jsx)(Zt.Z.Row,{gap:1,children:(0,E.jsx)(Ln,{appState:de,canvas:Je,activeTool:de.activeTool,setAppState:He,onImageAction:function(Lr){var qr=Lr.pointerType;ct({insertOnCanvasDirectly:qr!=="mouse"})}})})]}),yt&&yt(!0,de),(0,E.jsxs)("div",{className:"mobile-misc-tools-container",children:[!de.viewModeEnabled&&(0,E.jsx)(Nr.Out,{}),(0,E.jsx)(Mr,{checked:de.penMode,onChange:Xe,title:(0,D.t)("toolBar.penMode"),isMobile:!0,penDetected:de.penDetected}),(0,E.jsx)(ir,{checked:de.activeTool.locked,onChange:Te,title:(0,D.t)("toolBar.lock"),isMobile:!0}),(0,E.jsx)(ha,{checked:(0,ve.l$)(de),onChange:function(){return Ce()},title:(0,D.t)("toolBar.hand"),isMobile:!0})]})]})})}}),(0,E.jsx)(on,{appState:de,elements:ke,isMobile:!0,device:en})]}),!de.openMenu&&de.showStats&&(0,E.jsx)(ti,{appState:de,setAppState:He,elements:ke,onClose:function(){Oe.executeAction(ie.u0)},renderCustomStats:wt}),(0,E.jsx)("div",{className:"App-bottom-bar",style:{marginBottom:Wr.nn+2*Wr.WM,marginLeft:Wr.nn+2*Wr.WM,marginRight:Wr.nn+2*Wr.WM},children:(0,E.jsxs)(xn.W,{padding:0,children:[de.openMenu==="shape"&&!de.viewModeEnabled&&(0,he.RT)(de,ke)?(0,E.jsx)(go,{className:"App-mobile-menu",heading:"selectedShapeActions",children:(0,E.jsx)(Ot,{appState:de,elements:ke,renderAction:Oe.renderAction})}):null,(0,E.jsxs)("footer",{className:"App-toolbar",children:[de.viewModeEnabled?(0,E.jsx)("div",{className:"App-toolbar-content",children:(0,E.jsx)(cr.Out,{})}):(0,E.jsxs)("div",{className:"App-toolbar-content",children:[(0,E.jsx)(cr.Out,{}),Oe.renderAction("toggleEditMenu"),Oe.renderAction("undo"),Oe.renderAction("redo"),Oe.renderAction(de.multiElement?"finalize":"duplicateSelection"),Oe.renderAction("deleteSelectedElements")]}),de.scrolledOutside&&!de.openMenu&&!de.openSidebar&&(0,E.jsx)("button",{className:"scroll-back-to-content",onClick:function(){He(function(Jn){return function(Lr){for(var qr=1;qr<arguments.length;qr++){var gr=arguments[qr]!=null?arguments[qr]:{};qr%2?Go(Object(gr),!0).forEach(function(Vr){(0,I.Z)(Lr,Vr,gr[Vr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Lr,Object.getOwnPropertyDescriptors(gr)):Go(Object(gr)).forEach(function(Vr){Object.defineProperty(Lr,Vr,Object.getOwnPropertyDescriptor(gr,Vr))})}return Lr}({},(0,Se.W)(ke,Jn,Je))})},children:(0,D.t)("buttons.scrollBackToContent")})]})]})})]})},xi=c(9744),ft=c(5674),zt=c(4162),_n=c(8461),yr={};yr.styleTagTransform=Cn(),yr.setAttributes=St(),yr.insert=tt().bind(null,"head"),yr.domAPI=Ye(),yr.insertStyleElement=sn(),Ie()(_n.Z,yr),_n.Z&&_n.Z.locals&&_n.Z.locals;var Xo=function(O){var de=(0,L.useRef)(null),ke=(0,L.useState)(null),Oe=(0,m.Z)(ke,2),He=Oe[0],Te=Oe[1];return(0,L.useLayoutEffect)(function(){if(O.spreadsheet){var Ce,Xe=(0,ft.ps)(O.chartType,O.spreadsheet,0,0);Te(Xe);var Je=de.current;return(0,v.Z)(T().mark(function ct(){var yt;return T().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.next=2,(0,zt.$D)(Xe,{exportBackground:!1,viewBackgroundColor:xi.white},null);case 2:Ce=wt.sent,(yt=Ce.querySelector(".style-fonts"))===null||yt===void 0||yt.remove(),Je.replaceChildren(),Je.appendChild(Ce),O.selected&&Je.parentNode.focus();case 7:case"end":return wt.stop()}},ct)}))(),function(){Je.replaceChildren()}}},[O.spreadsheet,O.chartType,O.selected]),(0,E.jsx)("button",{className:"ChartPreview",onClick:function(){He&&O.onClick(O.chartType,He)},children:(0,E.jsx)("div",{ref:de})})},Io=function(O){var de=O.setAppState,ke=O.appState,Oe=O.onClose,He=eh().onInsertElements,Te=j().useCallback(function(){Oe&&Oe()},[Oe]),Ce=function(Xe,Je){He(Je),(0,q.L)("magic","chart",Xe),de({currentChartType:Xe,pasteDialog:{shown:!1,data:null}})};return(0,E.jsx)(Dt.V,{size:"small",onCloseRequest:Te,title:(0,D.t)("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:(0,E.jsxs)("div",{className:"container",children:[(0,E.jsx)(Xo,{chartType:"bar",spreadsheet:ke.pasteDialog.data,selected:ke.currentChartType==="bar",onClick:Ce}),(0,E.jsx)(Xo,{chartType:"line",spreadsheet:ke.pasteDialog.data,selected:ke.currentChartType==="line",onClick:Ce})]})})},fi=c(2978),Bi={};Bi.styleTagTransform=Cn(),Bi.setAttributes=St(),Bi.insert=tt().bind(null,"head"),Bi.domAPI=Ye(),Bi.insertStyleElement=sn(),Ie()(fi.Z,Bi),fi.Z&&fi.Z.locals&&fi.Z.locals;function xa(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}var Pi=T().mark(Ys);function wa(O,de){var ke=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(!ke){if(Array.isArray(O)||(ke=function(Je,ct){if(Je){if(typeof Je=="string")return Ha(Je,ct);var yt=Object.prototype.toString.call(Je).slice(8,-1);if(yt==="Object"&&Je.constructor&&(yt=Je.constructor.name),yt==="Map"||yt==="Set")return Array.from(Je);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return Ha(Je,ct)}}(O))||de&&O&&typeof O.length=="number"){ke&&(O=ke);var Oe=0,He=function(){};return{s:He,n:function(){return Oe>=O.length?{done:!0}:{done:!1,value:O[Oe++]}},e:function(Je){throw Je},f:He}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,Ce=!0,Xe=!1;return{s:function(){ke=ke.call(O)},n:function(){var Je=ke.next();return Ce=Je.done,Je},e:function(Je){Xe=!0,Te=Je},f:function(){try{Ce||ke.return==null||ke.return()}finally{if(Xe)throw Te}}}}function Ha(O,de){(de==null||de>O.length)&&(de=O.length);for(var ke=0,Oe=new Array(de);ke<de;ke++)Oe[ke]=O[ke];return Oe}var wi=function(){return(0,E.jsxs)("div",{className:"HelpDialog__header",children:[(0,E.jsxs)("a",{className:"HelpDialog__btn",href:"https://korbinzhao.deno.dev",target:"_blank",rel:"noopener noreferrer",children:[(0,D.t)("helpDialog.blog"),(0,E.jsx)("div",{className:"HelpDialog__link-icon",children:te.h0})]}),(0,E.jsxs)("a",{className:"HelpDialog__btn",href:"https://github.com/korbinzhao/excalidraw-cn/issues",target:"_blank",rel:"noopener noreferrer",children:[(0,D.t)("helpDialog.github"),(0,E.jsx)("div",{className:"HelpDialog__link-icon",children:te.h0})]})]})},Fa=function(O){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("h3",{children:O.title}),(0,E.jsx)("div",{className:"HelpDialog__islands-container",children:O.children})]})},Ia=function(O){return(0,E.jsxs)("div",{className:"HelpDialog__island ".concat(O.className),children:[(0,E.jsx)("h4",{className:"HelpDialog__island-title",children:O.caption}),(0,E.jsx)("div",{className:"HelpDialog__island-content",children:O.children})]})};function Ys(O,de){var ke,Oe,He,Te;return T().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:ke=!0,Oe=wa(O),Ce.prev=2,Oe.s();case 4:if((He=Oe.n()).done){Ce.next=14;break}if(Te=He.value,ke){Ce.next=9;break}return Ce.next=9,de;case 9:return ke=!1,Ce.next=12,Te;case 12:Ce.next=4;break;case 14:Ce.next=19;break;case 16:Ce.prev=16,Ce.t0=Ce.catch(2),Oe.e(Ce.t0);case 19:return Ce.prev=19,Oe.f(),Ce.finish(19);case 22:case"end":return Ce.stop()}},Pi,null,[[2,16,19,22]])}var Cr=function(O){var de=O.label,ke=O.shortcuts,Oe=O.isOr,He=Oe===void 0||Oe,Te=ke.map(function(Ce){return(Ce.endsWith("++")?[].concat((0,b.Z)(Ce.slice(0,-2).split("+")),["+"]):Ce.split("+")).map(function(Xe){return(0,E.jsx)(pa,{children:(Je=Xe,Je.replace(/\b[a-z]\b/,function(ct){return ct.toUpperCase()}))},Xe);var Je})});return(0,E.jsxs)("div",{className:"HelpDialog__shortcut",children:[(0,E.jsx)("div",{children:de}),(0,E.jsx)("div",{className:"HelpDialog__key-container",children:(0,b.Z)(Ys(Te,He?(0,D.t)("helpDialog.or"):null))})]})},pa=function(O){return(0,E.jsx)("kbd",function(de){for(var ke=1;ke<arguments.length;ke++){var Oe=arguments[ke]!=null?arguments[ke]:{};ke%2?xa(Object(Oe),!0).forEach(function(He){(0,I.Z)(de,He,Oe[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(Oe)):xa(Object(Oe)).forEach(function(He){Object.defineProperty(de,He,Object.getOwnPropertyDescriptor(Oe,He))})}return de}({className:"HelpDialog__key"},O))},Yu=function(O){var de=O.onClose,ke=j().useCallback(function(){de&&de()},[de]);return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(Dt.V,{onCloseRequest:ke,title:(0,D.t)("helpDialog.title"),className:"HelpDialog",children:[(0,E.jsx)(wi,{}),(0,E.jsxs)(Fa,{title:(0,D.t)("helpDialog.shortcuts"),children:[(0,E.jsxs)(Ia,{className:"HelpDialog__island--tools",caption:(0,D.t)("helpDialog.tools"),children:[(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.hand"),shortcuts:[B.tW.H]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.selection"),shortcuts:[B.tW.V,B.tW[1]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.rectangle"),shortcuts:[B.tW.R,B.tW[2]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.diamond"),shortcuts:[B.tW.D,B.tW[3]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.ellipse"),shortcuts:[B.tW.O,B.tW[4]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.arrow"),shortcuts:[B.tW.A,B.tW[5]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.line"),shortcuts:[B.tW.L,B.tW[6]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.freedraw"),shortcuts:[B.tW.P,B.tW[7]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.text"),shortcuts:[B.tW.T,B.tW[8]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.image"),shortcuts:[B.tW[9]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.eraser"),shortcuts:[B.tW.E,B.tW[0]]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.frame"),shortcuts:[B.tW.F]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.eyeDropper"),shortcuts:[B.tW.I,"Shift+S","Shift+G"]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.editLineArrowPoints"),shortcuts:[(0,R.uY)("CtrlOrCmd+Enter")]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.editText"),shortcuts:[(0,R.uY)("Enter")]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.textNewLine"),shortcuts:[(0,R.uY)("Enter"),(0,R.uY)("Shift+Enter")]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.textFinish"),shortcuts:[(0,R.uY)("Esc"),(0,R.uY)("CtrlOrCmd+Enter")]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.curvedArrow"),shortcuts:["A",(0,D.t)("helpDialog.click"),(0,D.t)("helpDialog.click"),(0,D.t)("helpDialog.click")],isOr:!1}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.curvedLine"),shortcuts:["L",(0,D.t)("helpDialog.click"),(0,D.t)("helpDialog.click"),(0,D.t)("helpDialog.click")],isOr:!1}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.lock"),shortcuts:[B.tW.Q]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.preventBinding"),shortcuts:[(0,R.uY)("CtrlOrCmd")]}),(0,E.jsx)(Cr,{label:(0,D.t)("toolBar.link"),shortcuts:[(0,R.uY)("CtrlOrCmd+K")]})]}),(0,E.jsxs)(Ia,{className:"HelpDialog__island--view",caption:(0,D.t)("helpDialog.view"),children:[(0,E.jsx)(Cr,{label:(0,D.t)("buttons.zoomIn"),shortcuts:[(0,R.uY)("CtrlOrCmd++")]}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.zoomOut"),shortcuts:[(0,R.uY)("CtrlOrCmd+-")]}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.resetZoom"),shortcuts:[(0,R.uY)("CtrlOrCmd+0")]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.fullScreen"),shortcuts:["F"]}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.zenMode"),shortcuts:[(0,R.uY)("Alt+Z")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.showGrid"),shortcuts:[(0,R.uY)("CtrlOrCmd+'")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.viewMode"),shortcuts:[(0,R.uY)("Alt+R")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.toggleTheme"),shortcuts:[(0,R.uY)("Alt+Shift+D")]}),(0,E.jsx)(Cr,{label:(0,D.t)("stats.title"),shortcuts:[(0,R.uY)("Alt+/")]})]}),(0,E.jsxs)(Ia,{className:"HelpDialog__island--editor",caption:(0,D.t)("helpDialog.editor"),children:[(0,E.jsx)(Cr,{label:(0,D.t)("labels.moveCanvas"),shortcuts:[(0,R.uY)("Space+".concat((0,D.t)("helpDialog.drag"))),(0,R.uY)("Wheel+".concat((0,D.t)("helpDialog.drag")))],isOr:!0}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.clearReset"),shortcuts:[(0,R.uY)("CtrlOrCmd+Delete")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.delete"),shortcuts:[(0,R.uY)("Delete")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.cut"),shortcuts:[(0,R.uY)("CtrlOrCmd+X")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.copy"),shortcuts:[(0,R.uY)("CtrlOrCmd+C")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.paste"),shortcuts:[(0,R.uY)("CtrlOrCmd+V")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.pasteAsPlaintext"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+V")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.selectAll"),shortcuts:[(0,R.uY)("CtrlOrCmd+A")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.multiSelect"),shortcuts:[(0,R.uY)("Shift+".concat((0,D.t)("helpDialog.click")))]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.deepSelect"),shortcuts:[(0,R.uY)("CtrlOrCmd+".concat((0,D.t)("helpDialog.click")))]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.deepBoxSelect"),shortcuts:[(0,R.uY)("CtrlOrCmd+".concat((0,D.t)("helpDialog.drag")))]}),(oe.vt||Y.vU)&&(0,E.jsx)(Cr,{label:(0,D.t)("labels.copyAsPng"),shortcuts:[(0,R.uY)("Shift+Alt+C")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.copyStyles"),shortcuts:[(0,R.uY)("CtrlOrCmd+Alt+C")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.pasteStyles"),shortcuts:[(0,R.uY)("CtrlOrCmd+Alt+V")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.sendToBack"),shortcuts:[Y.Um?(0,R.uY)("CtrlOrCmd+Alt+["):(0,R.uY)("CtrlOrCmd+Shift+[")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.bringToFront"),shortcuts:[Y.Um?(0,R.uY)("CtrlOrCmd+Alt+]"):(0,R.uY)("CtrlOrCmd+Shift+]")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.sendBackward"),shortcuts:[(0,R.uY)("CtrlOrCmd+[")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.bringForward"),shortcuts:[(0,R.uY)("CtrlOrCmd+]")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.alignTop"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+Up")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.alignBottom"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+Down")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.alignLeft"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+Left")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.alignRight"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+Right")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.duplicateSelection"),shortcuts:[(0,R.uY)("CtrlOrCmd+D"),(0,R.uY)("Alt+".concat((0,D.t)("helpDialog.drag")))]}),(0,E.jsx)(Cr,{label:(0,D.t)("helpDialog.toggleElementLock"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+L")]}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.undo"),shortcuts:[(0,R.uY)("CtrlOrCmd+Z")]}),(0,E.jsx)(Cr,{label:(0,D.t)("buttons.redo"),shortcuts:Y.ED?[(0,R.uY)("CtrlOrCmd+Y"),(0,R.uY)("CtrlOrCmd+Shift+Z")]:[(0,R.uY)("CtrlOrCmd+Shift+Z")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.group"),shortcuts:[(0,R.uY)("CtrlOrCmd+G")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.ungroup"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+G")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.flipHorizontal"),shortcuts:[(0,R.uY)("Shift+H")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.flipVertical"),shortcuts:[(0,R.uY)("Shift+V")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.showStroke"),shortcuts:[(0,R.uY)("S")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.showBackground"),shortcuts:[(0,R.uY)("G")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.decreaseFontSize"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+<")]}),(0,E.jsx)(Cr,{label:(0,D.t)("labels.increaseFontSize"),shortcuts:[(0,R.uY)("CtrlOrCmd+Shift+>")]})]})]})]})})},tu=c(6773),Gs=c(4241),rc={};rc.styleTagTransform=Cn(),rc.setAttributes=St(),rc.insert=tt().bind(null,"head"),rc.domAPI=Ye(),rc.insertStyleElement=sn(),Ie()(Gs.Z,rc),Gs.Z&&Gs.Z.locals&&Gs.Z.locals;var _p=function(O){var de,ke=O.children,Oe=O.color;return(0,E.jsx)("div",{className:"Card",style:(de={},(0,I.Z)(de,"--card-color",Oe==="primary"?"var(--color-primary)":xi[Oe][7]),(0,I.Z)(de,"--card-color-darker",Oe==="primary"?"var(--color-primary-darker)":xi[Oe][8]),(0,I.Z)(de,"--card-color-darkest",Oe==="primary"?"var(--color-primary-darkest)":xi[Oe][9]),de),children:ke})},oc=c(7955),bd={};bd.styleTagTransform=Cn(),bd.setAttributes=St(),bd.insert=tt().bind(null,"head"),bd.domAPI=Ye(),bd.insertStyleElement=sn(),Ie()(oc.Z,bd),oc.Z&&oc.Z.locals&&oc.Z.locals;var Gu=function(O){var de=O.elements,ke=O.appState,Oe=O.files,He=O.actionManager,Te=O.exportOpts,Ce=O.canvas,Xe=Te.onExportToBackend;return(0,E.jsx)("div",{className:"ExportDialog ExportDialog--json",children:(0,E.jsxs)("div",{className:"ExportDialog-cards",children:[Te.saveFileToDisk&&(0,E.jsxs)(_p,{color:"lime",children:[(0,E.jsx)("div",{className:"Card-icon",children:te.TP}),(0,E.jsx)("h2",{children:(0,D.t)("exportDialog.disk_title")}),(0,E.jsxs)("div",{className:"Card-details",children:[(0,D.t)("exportDialog.disk_details"),!Kn.kr&&He.renderAction("changeProjectName")]}),(0,E.jsx)(Z.V,{className:"Card-button",type:"button",title:(0,D.t)("exportDialog.disk_button"),"aria-label":(0,D.t)("exportDialog.disk_button"),showAriaLabel:!0,onClick:function(){He.executeAction(Jt.mM,"ui")}})]}),Xe&&(0,E.jsxs)(_p,{color:"pink",children:[(0,E.jsx)("div",{className:"Card-icon",children:te.xP}),(0,E.jsx)("h2",{children:(0,D.t)("exportDialog.link_title")}),(0,E.jsx)("div",{className:"Card-details",children:(0,D.t)("exportDialog.link_details")}),(0,E.jsx)(Z.V,{className:"Card-button",type:"button",title:(0,D.t)("exportDialog.link_button"),"aria-label":(0,D.t)("exportDialog.link_button"),showAriaLabel:!0,onClick:function(){Xe(de,ke,Oe,Ce),(0,q.L)("export","link","ui (".concat((0,R.$h)(),")"))}})]}),Te.renderCustomUI&&Te.renderCustomUI(de,ke,Oe,Ce)]})})},tf=function(O){var de=O.elements,ke=O.appState,Oe=O.files,He=O.actionManager,Te=O.exportOpts,Ce=O.canvas,Xe=O.setAppState,Je=j().useCallback(function(){Xe({openDialog:null})},[Xe]);return(0,E.jsx)(E.Fragment,{children:ke.openDialog==="jsonExport"&&(0,E.jsx)(Dt.V,{onCloseRequest:Je,title:(0,D.t)("buttons.export"),children:(0,E.jsx)(Gu,{elements:de,appState:ke,files:Oe,actionManager:He,onCloseRequest:Je,exportOpts:Te,canvas:Ce})})})},nf=c(4958),g0=function(O){return(0,E.jsx)("button",{className:"help-icon",onClick:O.onClick,type:"button",title:"".concat((0,D.t)("helpDialog.title"),"  ?"),"aria-label":(0,D.t)("helpDialog.title"),children:te.by})},m0=function(O){var de=O.appState,ke=O.actionManager,Oe=O.showExitZenModeBtn,He=O.renderWelcomeScreen,Te=(0,fa.R6)(),Ce=Te.FooterCenterTunnel,Xe=Te.WelcomeScreenHelpHintTunnel,Je=Qe(),ct=!de.viewModeEnabled&&de.multiElement&&Je.isTouchScreen;return(0,E.jsxs)("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[(0,E.jsx)("div",{className:(0,Q.Z)("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":de.zenModeEnabled}),children:(0,E.jsx)(Zt.Z.Col,{gap:2,children:(0,E.jsxs)(go,{heading:"canvasActions",children:[(0,E.jsx)(Wn,{renderAction:ke.renderAction,zoom:de.zoom}),!de.viewModeEnabled&&(0,E.jsx)(Rn,{renderAction:ke.renderAction,className:(0,Q.Z)("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":de.zenModeEnabled})}),ct&&(0,E.jsx)(Et,{renderAction:ke.renderAction,className:(0,Q.Z)("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":de.zenModeEnabled})})]})})}),(0,E.jsx)(Ce.Out,{}),(0,E.jsx)("div",{className:(0,Q.Z)("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right disable-pointerEvents":de.zenModeEnabled}),children:(0,E.jsxs)("div",{style:{position:"relative"},children:[He&&(0,E.jsx)(Xe.Out,{}),(0,E.jsx)(g0,{onClick:function(){return ke.executeAction(ie.jY)}})]})}),(0,E.jsx)(zn,{actionManager:ke,showExitZenModeBtn:Oe})]})},rf=m0;m0.displayName="Footer";var v0=c(585),Xu=c(9487),nu=c(6274),gs=c(6756),Ep=c(6798),t2=c(7145),$c=c(879),ru=function(O){var de=O.title,ke=O.children,Oe=O.actionLabel,He=O.onClick;return(0,E.jsxs)("div",{className:"OverwriteConfirm__Actions__Action",children:[(0,E.jsx)("h4",{children:de}),(0,E.jsx)("div",{className:"OverwriteConfirm__Actions__Action__content",children:ke}),(0,E.jsx)(pn,{variant:"outlined",color:"muted",label:Oe,size:"large",fullWidth:!0,onClick:He})]})},Xs=Object.assign(function(O){var de=O.children;return(0,E.jsx)("div",{className:"OverwriteConfirm__Actions",children:de})},{ExportToImage:function(){var O=(0,D.QT)().t,de=Bt(),ke=Mt();return(0,E.jsx)(ru,{title:O("overwriteConfirm.action.exportToImage.title"),actionLabel:O("overwriteConfirm.action.exportToImage.button"),onClick:function(){de.executeAction(Jt.Du,"ui",!0),ke({openDialog:"imageExport"})},children:O("overwriteConfirm.action.exportToImage.description")})},SaveToDisk:function(){var O=(0,D.QT)().t,de=Bt();return(0,E.jsx)(ru,{title:O("overwriteConfirm.action.saveToDisk.title"),actionLabel:O("overwriteConfirm.action.saveToDisk.button"),onClick:function(){de.executeAction(ie.mM,"ui")},children:O("overwriteConfirm.action.saveToDisk.description")})}}),Ml=c(9439),ms={};ms.styleTagTransform=Cn(),ms.setAttributes=St(),ms.insert=tt().bind(null,"head"),ms.domAPI=Ye(),ms.insertStyleElement=sn(),Ie()(Ml.Z,ms),Ml.Z&&Ml.Z.locals&&Ml.Z.locals;function qu(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function jc(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?qu(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):qu(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var yd=Object.assign((0,t2.$)("OverwriteConfirmDialog",function(O){var de=O.children,ke=(0,fa.R6)().OverwriteConfirmDialogTunnel,Oe=(0,nu.KO)($c.K,Xu.yE),He=(0,m.Z)(Oe,2),Te=He[0],Ce=He[1];return Te.active?(0,E.jsx)(ke.In,{children:(0,E.jsx)(Dt.V,{onCloseRequest:function(){Te.onClose(),Ce(function(Xe){return jc(jc({},Xe),{},{active:!1})})},title:!1,size:916,children:(0,E.jsxs)("div",{className:"OverwriteConfirm",children:[(0,E.jsx)("h3",{children:Te.title}),(0,E.jsxs)("div",{className:"OverwriteConfirm__Description OverwriteConfirm__Description--color-".concat(Te.color),children:[(0,E.jsx)("div",{className:"OverwriteConfirm__Description__icon",children:te.UT}),(0,E.jsx)("div",{children:Te.description}),(0,E.jsx)("div",{className:"OverwriteConfirm__Description__spacer"}),(0,E.jsx)(pn,{color:Te.color,size:"large",label:Te.actionLabel,onClick:function(){Te.onConfirm(),Ce(function(Xe){return jc(jc({},Xe),{},{active:!1})})}})]}),(0,E.jsx)(Xs,{children:de})]})})}):null}),{Actions:Xs,Action:ru}),ou=c(96),Pp=c(704),xd=c(3550),of=c(1434),Rc={};Rc.styleTagTransform=Cn(),Rc.setAttributes=St(),Rc.insert=tt().bind(null,"head"),Rc.domAPI=Ye(),Rc.insertStyleElement=sn(),Ie()(of.Z,Rc),of.Z&&of.Z.locals&&of.Z.locals;var ic=c(9144),wd={};wd.styleTagTransform=Cn(),wd.setAttributes=St(),wd.insert=tt().bind(null,"head"),wd.domAPI=Ye(),wd.insertStyleElement=sn(),Ie()(ic.Z,wd),ic.Z&&ic.Z.locals&&ic.Z.locals;var n2=["suggestedBindings","startBoundElement","cursorButton","scrollX","scrollY"],Mp=["canvas","appState"],af=["canvas","appState"];function cs(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}var Ip=function(O){var de=O.UIOptions;return(0,E.jsxs)(gs.Z,{__fallback:!0,children:[(0,E.jsx)(gs.Z.DefaultItems.LoadScene,{}),(0,E.jsx)(gs.Z.DefaultItems.SaveToActiveFile,{}),de.canvasActions.export&&(0,E.jsx)(gs.Z.DefaultItems.Export,{}),de.canvasActions.saveAsImage&&(0,E.jsx)(gs.Z.DefaultItems.SaveAsImage,{}),(0,E.jsx)(gs.Z.DefaultItems.Help,{}),(0,E.jsx)(gs.Z.DefaultItems.ClearCanvas,{}),(0,E.jsx)(gs.Z.Separator,{}),(0,E.jsx)(gs.Z.Group,{title:"Excalidraw links",children:(0,E.jsx)(gs.Z.DefaultItems.Socials,{})}),(0,E.jsx)(gs.Z.Separator,{}),(0,E.jsx)(gs.Z.DefaultItems.ToggleTheme,{}),(0,E.jsx)(gs.Z.DefaultItems.ChangeCanvasBackground,{})]})},Ay=function(){return(0,E.jsxs)(yd,{__fallback:!0,children:[(0,E.jsx)(yd.Actions.SaveToDisk,{}),(0,E.jsx)(yd.Actions.ExportToImage,{})]})},sf=function(O){var de,ke,Oe=O.actionManager,He=O.appState,Te=O.files,Ce=O.setAppState,Xe=O.elements,Je=O.canvas,ct=O.onLockToggle,yt=O.onHandToolToggle,wt=O.onPenModeToggle,kt=O.showExitZenModeBtn,en=O.renderTopRightUI,wn=O.renderCustomStats,In=O.UIOptions,qn=O.onImageAction,cr=O.onExportImage,Nr=O.renderWelcomeScreen,Jn=O.children,Lr=Qe(),qr=(0,fa.ZC)(),gr=(0,nu.KO)(xd.$,Xu.yE),Vr=(0,m.Z)(gr,2),co=Vr[0],qo=Vr[1],Wo=function(){return In.canvasActions.export?(0,E.jsx)(tf,{elements:Xe,appState:He,files:Te,actionManager:Oe,exportOpts:In.canvasActions.export,canvas:Je,setAppState:Ce}):null},Ta=function(){return In.canvasActions.saveAsImage?(0,E.jsx)(De,{elements:Xe,appState:He,files:Te,actionManager:Oe,onExportImage:cr,onCloseRequest:function(){return Ce({openDialog:null})}}):null},Ca=function(){return(0,E.jsx)(Pp.O,{__fallback:!0,onDock:function(mi){(0,q.L)("sidebar","toggleDock (".concat(mi?"dock":"undock",")"),"(".concat(Lr.isMobile?"mobile":"desktop",")"))}})},Is=(0,nu.Dv)(v0.t6,Xu.yE),Ts=(0,E.jsxs)(E.Fragment,{children:[Jn,(0,E.jsx)(Ip,{UIOptions:In}),(0,E.jsx)(Pp.O.Trigger,{__fallback:!0,icon:te.Vq,title:(0,R.Oo)((0,D.t)("toolBar.library")),onToggle:function(mi){mi&&(0,q.L)("sidebar","".concat(Y.Cc.name," (open)"),"button (".concat(Lr.isMobile?"mobile":"desktop",")"))},tab:Y.Cc.defaultTab,children:(0,D.t)("toolBar.library")}),(0,E.jsx)(Ay,{}),He.isLoading&&(0,E.jsx)(tn.z,{delay:250}),He.errorMessage&&(0,E.jsx)(Gt,{onClose:function(){return Ce({errorMessage:null})},children:He.errorMessage}),co&&!Lr.isMobile&&(0,E.jsx)(xd.p,{swapPreviewOnAlt:co.swapPreviewOnAlt,previewType:co.previewType,onCancel:function(){qo(null)},onSelect:function(mi,Ci){var Jo;qo(function($o){return $o!=null&&$o.keepOpenOnAlt&&Ci.altKey?$o:null}),co==null||(Jo=co.onSelect)===null||Jo===void 0||Jo.call(co,mi,Ci)}}),He.openDialog==="help"&&(0,E.jsx)(Yu,{onClose:function(){Ce({openDialog:null})}}),(0,E.jsx)(Ep.o,{}),(0,E.jsx)(qr.OverwriteConfirmDialogTunnel.Out,{}),Ta(),Wo(),He.pasteDialog.shown&&(0,E.jsx)(Io,{setAppState:Ce,appState:He,onClose:function(){return Ce({pasteDialog:{shown:!1,data:null}})}}),Lr.isMobile&&!co&&(0,E.jsx)(Mo,{appState:He,elements:Xe,actionManager:Oe,renderJSONExportDialog:Wo,renderImageExportDialog:Ta,setAppState:Ce,onLockToggle:ct,onHandToolToggle:yt,onPenModeToggle:wt,canvas:Je,onImageAction:qn,renderTopRightUI:en,renderCustomStats:wn,renderSidebars:Ca,device:Lr,renderWelcomeScreen:Nr}),!Lr.isMobile&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:(0,Q.Z)("layer-ui__wrapper",{"disable-pointerEvents":He.draggingElement||He.resizingElement||He.editingElement&&!(0,he.iB)(He.editingElement)}),style:He.openSidebar&&Is&&Lr.canDeviceFitSidebar?{width:"calc(100% - ".concat(Y.EE,"px)")}:{},children:[Nr&&(0,E.jsx)(qr.WelcomeScreenCenterTunnel.Out,{}),(ke=(0,he.RT)(He,Xe),(0,E.jsx)(dt,{side:"top",children:(0,E.jsxs)("div",{className:"App-menu App-menu_top",children:[(0,E.jsxs)(Zt.Z.Col,{gap:6,className:(0,Q.Z)("App-menu_top__left"),children:[(0,E.jsxs)("div",{style:{position:"relative"},children:[(0,E.jsx)(qr.MainMenuTunnel.Out,{}),Nr&&(0,E.jsx)(qr.WelcomeScreenMenuHintTunnel.Out,{})]}),ke&&(0,E.jsx)(go,{heading:"selectedShapeActions",className:(0,Q.Z)("selected-shape-actions zen-mode-transition",{"transition-left":He.zenModeEnabled}),children:(0,E.jsx)(xn.W,{className:Y.$C.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:"".concat(He.height-166,"px")},children:(0,E.jsx)(Ot,{appState:He,elements:Xe,renderAction:Oe.renderAction})})})]}),!He.viewModeEnabled&&(0,E.jsx)(go,{heading:"shapes",className:"shapes-section",children:function(mi){return(0,E.jsxs)("div",{style:{position:"relative"},children:[Nr&&(0,E.jsx)(qr.WelcomeScreenToolbarHintTunnel.Out,{}),(0,E.jsx)(Zt.Z.Col,{gap:4,align:"start",children:(0,E.jsx)(Zt.Z.Row,{gap:1,className:(0,Q.Z)("App-toolbar-container",{"zen-mode":He.zenModeEnabled}),children:(0,E.jsxs)(xn.W,{padding:1,className:(0,Q.Z)("App-toolbar",{"zen-mode":He.zenModeEnabled}),children:[(0,E.jsx)(on,{appState:He,elements:Xe,isMobile:Lr.isMobile,device:Lr}),mi,(0,E.jsxs)(Zt.Z.Row,{gap:1,children:[(0,E.jsx)(Mr,{zenModeEnabled:He.zenModeEnabled,checked:He.penMode,onChange:wt,title:(0,D.t)("toolBar.penMode"),penDetected:He.penDetected}),(0,E.jsx)(ir,{checked:He.activeTool.locked,onChange:ct,title:(0,D.t)("toolBar.lock")}),(0,E.jsx)("div",{className:"App-toolbar__divider"}),(0,E.jsx)(ha,{checked:(0,ve.l$)(He),onChange:function(){return yt()},title:(0,D.t)("toolBar.hand"),isMobile:!0}),(0,E.jsx)(Ln,{appState:He,canvas:Je,activeTool:He.activeTool,setAppState:Ce,onImageAction:function(Ci){var Jo=Ci.pointerType;qn({insertOnCanvasDirectly:Jo!=="mouse"})}})]})]})})})]})}}),(0,E.jsxs)("div",{className:(0,Q.Z)("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":He.zenModeEnabled}),children:[(0,E.jsx)(tu.Z,{collaborators:He.collaborators}),en==null?void 0:en(Lr.isMobile,He),!He.viewModeEnabled&&(!Is||((de=He.openSidebar)===null||de===void 0?void 0:de.name)!==Y.Cc.name)&&(0,E.jsx)(qr.DefaultSidebarTriggerTunnel.Out,{})]})]})})),(0,E.jsx)(rf,{appState:He,actionManager:Oe,showExitZenModeBtn:kt,renderWelcomeScreen:Nr}),He.showStats&&(0,E.jsx)(ti,{appState:He,setAppState:Ce,elements:Xe,onClose:function(){Oe.executeAction(nf.u)},renderCustomStats:wn}),He.scrolledOutside&&(0,E.jsx)("button",{className:"scroll-back-to-content",onClick:function(){Ce(function(mi){return function(Ci){for(var Jo=1;Jo<arguments.length;Jo++){var $o=arguments[Jo]!=null?arguments[Jo]:{};Jo%2?cs(Object($o),!0).forEach(function(Do){(0,I.Z)(Ci,Do,$o[Do])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ci,Object.getOwnPropertyDescriptors($o)):cs(Object($o)).forEach(function(Do){Object.defineProperty(Ci,Do,Object.getOwnPropertyDescriptor($o,Do))})}return Ci}({},(0,Se.W)(Xe,mi,Je))})},children:(0,D.t)("buttons.scrollBackToContent")})]}),Ca()]})]});return(0,E.jsx)(ou.k.Provider,{value:He,children:(0,E.jsx)(nu.zt,{scope:qr.jotaiScope,children:(0,E.jsx)(fa.A3.Provider,{value:qr,children:Ts})})})},Tp=function(O){return O.suggestedBindings,O.startBoundElement,O.cursorButton,O.scrollX,O.scrollY,(0,_t.Z)(O,n2)},Cd=function(O,de){if(O.children!==de.children)return!1;O.canvas;var ke=O.appState,Oe=(0,_t.Z)(O,Mp),He=(de.canvas,de.appState),Te=(0,_t.Z)(de,af);return(0,R.w8)(Tp(ke),Tp(He),{selectedElementIds:R.w8,selectedGroupIds:R.w8})&&(0,R.w8)(Oe,Te)},r2=j().memo(sf,Cd),iu=c(9650),au={};au.styleTagTransform=Cn(),au.setAttributes=St(),au.insert=tt().bind(null,"head"),au.domAPI=Ye(),au.insertStyleElement=sn(),Ie()(iu.Z,au),iu.Z&&iu.Z.locals&&iu.Z.locals;var b0=function(O){var de=O.message,ke=O.onClose,Oe=O.closable,He=Oe!==void 0&&Oe,Te=O.duration,Ce=Te===void 0?5e3:Te,Xe=(0,L.useRef)(0),Je=Ce!==1/0,ct=(0,L.useCallback)(function(){Je&&(Xe.current=window.setTimeout(function(){return ke()},Ce))},[ke,Ce,Je]);(0,L.useEffect)(function(){if(Je)return ct(),function(){return clearTimeout(Xe.current)}},[ct,de,Ce,Je]);var yt=Je?function(){return clearTimeout(Xe==null?void 0:Xe.current)}:void 0,wt=Je?ct:void 0;return(0,E.jsxs)("div",{className:"Toast",onMouseEnter:yt,onMouseLeave:wt,children:[(0,E.jsx)("p",{className:"Toast__message",children:de}),He&&(0,E.jsx)(Z.V,{icon:te.Tw,"aria-label":"close",type:"icon",onClick:ke,className:"close"})]})};function Op(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function su(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?Op(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):Op(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var lf=(0,U.z)({name:"viewMode",viewMode:!0,trackEvent:{category:"canvas",predicate:function(O){return!O.viewModeEnabled}},perform:function(O,de){return{appState:su(su({},de),{},{viewModeEnabled:!this.checked(de)}),commitToHistory:!1}},checked:function(O){return O.viewModeEnabled},predicate:function(O,de,ke){return ke.viewModeEnabled===void 0},contextItemLabel:"labels.viewMode",keyTest:function(O){return!O[B.tW.CTRL_OR_CMD]&&O.altKey&&O.code===B.aU.R}}),qs=c(5637),Ju=c(6810),y0=c.n(Ju),Ap=c(2325),Il=c(4929),x0=c(267),Sd=c(3248);function ac(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}var w0=(0,_.Z)(function O(de){var ke=this,Oe=de.scene,He=de.onSceneUpdated;(0,w.Z)(this,O),this.onFontsLoaded=function(Te){if(Te.every(function(Xe){var Je="".concat(Xe.family,"-").concat(Xe.style,"-").concat(Xe.weight);return!!O.loadedFontFaces.has(Je)||(O.loadedFontFaces.add(Je),!1)}))return!1;var Ce=!1;ke.scene.mapElements(function(Xe){return(0,he.iB)(Xe)&&!(0,X.Xh)(Xe)?((0,We.bI)(Xe),Ce=!0,(0,H.BE)(Xe,function(Je){for(var ct=1;ct<arguments.length;ct++){var yt=arguments[ct]!=null?arguments[ct]:{};ct%2?ac(Object(yt),!0).forEach(function(wt){(0,I.Z)(Je,wt,yt[wt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Je,Object.getOwnPropertyDescriptors(yt)):ac(Object(yt)).forEach(function(wt){Object.defineProperty(Je,wt,Object.getOwnPropertyDescriptor(yt,wt))})}return Je}({},(0,he.JZ)(Xe)))):Xe}),Ce&&ke.onSceneUpdated()},this.loadFontsForElements=function(){var Te=(0,v.Z)(T().mark(function Ce(Xe){var Je;return T().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.next=2,Promise.all((0,b.Z)(new Set(Xe.filter(function(yt){return(0,he.iB)(yt)}).map(function(yt){return yt.fontFamily}))).map(function(yt){var wt,kt,en,wn,In=(0,R.mO)({fontFamily:yt,fontSize:16});if((wt=document.fonts)===null||wt===void 0||(kt=wt.check)===null||kt===void 0||!kt.call(wt,In))return(en=document.fonts)===null||en===void 0||(wn=en.load)===null||wn===void 0?void 0:wn.call(en,In)}));case 2:Je=ct.sent,ke.onFontsLoaded(Je.flat().filter(Boolean));case 4:case"end":return ct.stop()}},Ce)}));return function(Ce){return Te.apply(this,arguments)}}(),this.scene=Oe,this.onSceneUpdated=He});w0.loadedFontFaces=new Set;var qi=c(9040),lu=c(1868),cf=c(4688);function Tl(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function Ms(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?Tl(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):Tl(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var Lp=function(O,de){var ke=(0,Se.eD)((0,he.Lm)(O),de);return ke.length===1&&ke[0].type==="frame"},df=(0,U.z)({name:"selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:function(O,de){var ke=(0,Se.eD)((0,he.Lm)(O),de)[0];if(ke&&ke.type==="frame"){var Oe=(0,qi.wO)((0,he.Lm)(O),ke.id).filter(function(He){return!(He.type==="text"&&He.containerId)});return{elements:O,appState:Ms(Ms({},de),{},{selectedElementIds:Oe.reduce(function(He,Te){return He[Te.id]=!0,He},{})}),commitToHistory:!1}}return{elements:O,appState:de,commitToHistory:!1}},contextItemLabel:"labels.selectAllElementsInFrame",predicate:function(O,de){return Lp(O,de)}}),o2=(0,U.z)({name:"removeAllElementsFromFrame",trackEvent:{category:"history"},perform:function(O,de){var ke=(0,Se.eD)((0,he.Lm)(O),de)[0];return ke&&ke.type==="frame"?{elements:(0,qi.yZ)(O,ke,de),appState:Ms(Ms({},de),{},{selectedElementIds:(0,I.Z)({},ke.id,!0)}),commitToHistory:!0}:{elements:O,appState:de,commitToHistory:!1}},contextItemLabel:"labels.removeAllElementsFromFrame",predicate:function(O,de){return Lp(O,de)}}),$p=((0,U.z)({name:"toggleFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:function(O,de){return{elements:O,appState:Ms(Ms({},de),{},{shouldRenderFrames:!de.shouldRenderFrames}),commitToHistory:!1}},contextItemLabel:"labels.toggleFrameRendering",checked:function(O){return O.shouldRenderFrames}}),(0,U.z)({name:"setFrameAsActiveTool",trackEvent:{category:"toolbar"},perform:function(O,de,ke,Oe){var He=(0,R.Om)(de,{type:"frame"});return(0,R.Uk)(Oe.canvas,Ms(Ms({},de),{},{activeTool:He})),{elements:O,appState:Ms(Ms({},de),{},{activeTool:(0,R.Om)(de,{type:"frame"})}),commitToHistory:!1}},keyTest:function(O){return!O[B.tW.CTRL_OR_CMD]&&!O.shiftKey&&!O.altKey&&O.key.toLocaleLowerCase()===B.tW.F}}),c(2416)),i2=c(202),Qu=c(2242),C0=function(){return(0,E.jsxs)("div",{"data-testid":"brave-measure-text-error",children:[(0,E.jsx)("p",{children:(0,E.jsx)(Qu.Z,{i18nKey:"errors.brave_measure_text_error.line1",bold:function(O){return(0,E.jsx)("span",{style:{fontWeight:600},children:O})}})}),(0,E.jsx)("p",{children:(0,E.jsx)(Qu.Z,{i18nKey:"errors.brave_measure_text_error.line2",bold:function(O){return(0,E.jsx)("span",{style:{fontWeight:600},children:O})}})}),(0,E.jsx)("p",{children:(0,E.jsx)(Qu.Z,{i18nKey:"errors.brave_measure_text_error.line3",link:function(O){return(0,E.jsx)("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:O})}})}),(0,E.jsx)("p",{children:(0,E.jsx)(Qu.Z,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:function(O){return(0,E.jsx)("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:O})},discordLink:function(O){return(0,E.jsxs)("a",{href:"https://discord.gg/UexuTaE",children:[O,"."]})}})})]})};function uf(O,de){var ke=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(!ke){if(Array.isArray(O)||(ke=function(Je,ct){if(Je){if(typeof Je=="string")return hf(Je,ct);var yt=Object.prototype.toString.call(Je).slice(8,-1);if(yt==="Object"&&Je.constructor&&(yt=Je.constructor.name),yt==="Map"||yt==="Set")return Array.from(Je);if(yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yt))return hf(Je,ct)}}(O))||de&&O&&typeof O.length=="number"){ke&&(O=ke);var Oe=0,He=function(){};return{s:He,n:function(){return Oe>=O.length?{done:!0}:{done:!1,value:O[Oe++]}},e:function(Je){throw Je},f:He}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Te,Ce=!0,Xe=!1;return{s:function(){ke=ke.call(O)},n:function(){var Je=ke.next();return Ce=Je.done,Je},e:function(Je){Xe=!0,Te=Je},f:function(){try{Ce||ke.return==null||ke.return()}finally{if(Xe)throw Te}}}}function hf(O,de){(de==null||de>O.length)&&(de=O.length);for(var ke=0,Oe=new Array(de);ke<de;ke++)Oe[ke]=O[ke];return Oe}function S0(O){var de=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var ke,Oe=(0,C.Z)(O);if(de){var He=(0,C.Z)(this).constructor;ke=Reflect.construct(Oe,arguments,He)}else ke=Oe.apply(this,arguments);return(0,S.Z)(this,ke)}}function jp(O,de){var ke=Object.keys(O);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(O);de&&(Oe=Oe.filter(function(He){return Object.getOwnPropertyDescriptor(O,He).enumerable})),ke.push.apply(ke,Oe)}return ke}function En(O){for(var de=1;de<arguments.length;de++){var ke=arguments[de]!=null?arguments[de]:{};de%2?jp(Object(ke),!0).forEach(function(Oe){(0,I.Z)(O,Oe,ke[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(ke)):jp(Object(ke)).forEach(function(Oe){Object.defineProperty(O,Oe,Object.getOwnPropertyDescriptor(ke,Oe))})}return O}var k0=j().createContext(null),_0=j().createContext(null),Rp={isSmScreen:!1,isMobile:!1,isTouchScreen:!1,canDeviceFitSidebar:!1,isLandscape:!1},cu=j().createContext(Rp);cu.displayName="DeviceContext";var Dc=j().createContext({container:null,id:null});Dc.displayName="ExcalidrawContainerContext";var ff=j().createContext([]);ff.displayName="ExcalidrawElementsContext";var Ol=j().createContext(En(En({},(0,ve.im)()),{},{width:0,height:0,offsetLeft:0,offsetTop:0}));Ol.displayName="ExcalidrawAppStateContext";var du=j().createContext(function(){console.warn("unitialized ExcalidrawSetAppStateContext context!")});du.displayName="ExcalidrawSetAppStateContext";var uu=j().createContext(null);uu.displayName="ExcalidrawActionManagerContext";var eh=function(){return(0,L.useContext)(k0)},$e=function(){return(0,L.useContext)(_0)},Qe=function(){return(0,L.useContext)(cu)},nt=function(){return(0,L.useContext)(Dc)},lt=function(){return(0,L.useContext)(ff)},Ct=function(){return(0,L.useContext)(Ol)},Mt=function(){return(0,L.useContext)(du)},Bt=function(){return(0,L.useContext)(uu)},Pt=!1,gn=0,Bn=!1,Pn=!1,ln=!1,Xn={horizontal:null,vertical:null},Mn=0,Qn=!1,Sn=!0,Yn=!1,kr=0,Pr=!1,Sr=null,nr={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},oo=function(O){(0,y.Z)(He,O);var de,ke,Oe=S0(He);function He(Te){var Ce;(0,w.Z)(this,He),Ce=Oe.call(this,Te),to.call((0,k.Z)(Ce));var Xe,Je=(0,ve.im)(),ct=Te.excalidrawRef,yt=Te.viewModeEnabled,wt=yt!==void 0&&yt,kt=Te.zenModeEnabled,en=kt!==void 0&&kt,wn=Te.gridModeEnabled,In=wn!==void 0&&wn,qn=Te.theme,cr=qn===void 0?Je.theme:qn,Nr=Te.name,Jn=Nr===void 0?Je.name:Nr;if(Ce.state=En(En(En({},Je),{},{theme:cr,isLoading:!0},Ce.getCanvasOffsets()),{},{viewModeEnabled:wt,zenModeEnabled:en,gridSize:In?Y.k:null,name:Jn,width:window.innerWidth,height:window.innerHeight,showHyperlinkPopup:!1,defaultSidebarDockedPreference:!1}),Ce.id=(0,pe.x0)(),Ce.library=new ae.ZP((0,k.Z)(Ce)),ct){var Lr,qr="current"in ct&&((Lr=ct.current)===null||Lr===void 0?void 0:Lr.readyPromise)||(0,R.PI)(),gr={ready:!0,readyPromise:qr,updateScene:Ce.updateScene,updateLibrary:Ce.library.updateLibrary,addFiles:Ce.addFiles,resetScene:Ce.resetScene,getSceneElementsIncludingDeleted:Ce.getSceneElementsIncludingDeleted,history:{clear:Ce.resetHistory},scrollToContent:Ce.scrollToContent,getSceneElements:Ce.getSceneElements,getAppState:function(){return Ce.state},getFiles:function(){return Ce.files},refresh:Ce.refresh,setToast:Ce.setToast,id:Ce.id,setActiveTool:Ce.setActiveTool,setCursor:Ce.setCursor,resetCursor:Ce.resetCursor,toggleFrameRendering:Ce.toggleFrameRendering,toggleSidebar:Ce.toggleSidebar};typeof ct=="function"?ct(gr):ct.current=gr,qr.resolve(gr)}return Ce.excalidrawContainerValue={container:Ce.excalidrawContainerRef.current,id:Ce.id},Ce.scene=new Be.Z,Ce.fonts=new w0({scene:Ce.scene,onSceneUpdated:Ce.onSceneUpdated}),Ce.history=new Ne,Ce.actionManager=new ce(Ce.syncActionResult,function(){return Ce.state},function(){return Ce.scene.getElementsIncludingDeleted()},(0,k.Z)(Ce)),Ce.actionManager.registerAll(U.N),Ce.actionManager.registerAction((Xe=Ce.history,{name:"undo",trackEvent:{category:"history"},perform:function(Vr,co){return z(Vr,co,function(){return Xe.undoOnce()})},keyTest:function(Vr){return Vr[B.tW.CTRL_OR_CMD]&&Vr.key.toLowerCase()===B.tW.Z&&!Vr.shiftKey},PanelComponent:function(Vr){var co=Vr.updateData,qo=Vr.data;return(0,E.jsx)(Z.V,{type:"button",icon:te.UE,"aria-label":(0,D.t)("buttons.undo"),onClick:co,size:(qo==null?void 0:qo.size)||"medium"})},commitToHistory:function(){return!1}})),Ce.actionManager.registerAction(function(Vr){return{name:"redo",trackEvent:{category:"history"},perform:function(co,qo){return z(co,qo,function(){return Vr.redoOnce()})},keyTest:function(co){return co[B.tW.CTRL_OR_CMD]&&co.shiftKey&&co.key.toLowerCase()===B.tW.Z||Y.ED&&co.ctrlKey&&!co.shiftKey&&co.key===B.tW.Y},PanelComponent:function(co){var qo=co.updateData,Wo=co.data;return(0,E.jsx)(Z.V,{type:"button",icon:te.zG,"aria-label":(0,D.t)("buttons.redo"),onClick:qo,size:(Wo==null?void 0:Wo.size)||"medium"})},commitToHistory:function(){return!1}}}(Ce.history)),Ce}return(0,_.Z)(He,[{key:"renderCanvas",value:function(){var Te=this,Ce=window.devicePixelRatio,Xe=this.state,Je=Xe.width,ct=Xe.height,yt=Je*Ce,wt=ct*Ce;return Xe.viewModeEnabled?(0,E.jsx)("canvas",{className:"excalidraw__canvas",style:{width:Je,height:ct,cursor:Y.oc.GRAB},width:yt,height:wt,ref:this.handleCanvasRef,onContextMenu:function(kt){return Te.handleCanvasContextMenu(kt)},onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,children:(0,D.t)("labels.drawingCanvas")}):(0,E.jsx)("canvas",{className:"excalidraw__canvas",style:{width:Je,height:ct},width:yt,height:wt,ref:this.handleCanvasRef,onContextMenu:function(kt){return Te.handleCanvasContextMenu(kt)},onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,children:(0,D.t)("labels.drawingCanvas")})}},{key:"render",value:function(){var Te,Ce=this,Xe=(0,Se.eD)(this.scene.getNonDeletedElements(),this.state),Je=this.props,ct=Je.renderTopRightUI,yt=Je.renderCustomStats;return(0,E.jsx)("div",{className:(0,Q.Z)("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled,"excalidraw--mobile":this.device.isMobile}),ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,children:(0,E.jsx)(k0.Provider,{value:this,children:(0,E.jsx)(_0.Provider,{value:this.props,children:(0,E.jsx)(Dc.Provider,{value:this.excalidrawContainerValue,children:(0,E.jsx)(cu.Provider,{value:this.device,children:(0,E.jsx)(du.Provider,{value:this.setAppState,children:(0,E.jsx)(Ol.Provider,{value:this.state,children:(0,E.jsx)(ff.Provider,{value:this.scene.getNonDeletedElements(),children:(0,E.jsxs)(uu.Provider,{value:this.actionManager,children:[(0,E.jsx)(r2,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:(0,D.G3)().code,renderTopRightUI:ct,renderCustomStats:yt,showExitZenModeBtn:((Te=this.props)===null||Te===void 0?void 0:Te.zenModeEnabled)===void 0&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onImageAction:this.onImageAction,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,children:this.props.children}),(0,E.jsx)("div",{className:"excalidraw-textEditorContainer"}),(0,E.jsx)("div",{className:"excalidraw-contextMenuContainer"}),(0,E.jsx)("div",{className:"excalidraw-eye-dropper-container"}),Xe.length===1&&!this.state.contextMenu&&this.state.showHyperlinkPopup&&(0,E.jsx)(Il.nW,{element:Xe[0],setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen},Xe[0].id),this.state.toast!==null&&(0,E.jsx)(b0,{message:this.state.toast.message,onClose:function(){return Ce.setToast(null)},duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&(0,E.jsx)(ht,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager}),(0,E.jsx)("main",{children:this.renderCanvas()}),this.renderFrameNames()]})})})})})})})})})}},{key:"componentDidMount",value:(ke=(0,v.Z)(T().mark(function Te(){var Ce,Xe,Je,ct,yt,wt,kt=this;return T().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,Y.Vi.TEST!=="production"&&Y.Vi.DEVELOPMENT!=="production"||(this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:function(){return kt.state}},setState:{configurable:!0,value:function(){return kt.setState.apply(kt,arguments)}},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history}})),this.scene.addCallback(this.onSceneUpdated),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.excalidrawContainerRef.current&&this.refreshDeviceState(this.excalidrawContainerRef.current),"ResizeObserver"in window&&(Ce=this.excalidrawContainerRef)!==null&&Ce!==void 0&&Ce.current?(this.resizeObserver=new ResizeObserver(function(){Sn=!1,kt.refreshDeviceState(kt.excalidrawContainerRef.current),kt.updateDOMRect()}),(Xe=this.resizeObserver)===null||Xe===void 0||Xe.observe(this.excalidrawContainerRef.current)):window.matchMedia&&(Je=window.matchMedia("(max-width: ".concat(Y.kV,"px), (max-height: ").concat(Y.Yx,"px) and (max-width: ").concat(Y.sS,"px)")),ct=window.matchMedia("(max-width: ".concat(Y.eF,"px)")),yt=window.matchMedia("(min-width: ".concat(this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Y.sk,"px)")),wt=function(){kt.excalidrawContainerRef.current.getBoundingClientRect(),kt.device=(0,R.v4)(kt.device,{isSmScreen:ct.matches,isMobile:Je.matches,canDeviceFitSidebar:yt.matches})},Je.addListener(wt),this.detachIsMobileMqHandler=function(){return Je.removeListener(wt)}),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),(0,Y.jP)()&&!(0,Wt.eB)()&&this.setState({errorMessage:(0,E.jsx)(C0,{})});case 11:case"end":return en.stop()}},Te,this)})),function(){return ke.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var Te;this.files={},this.imageCache.clear(),(Te=this.resizeObserver)===null||Te===void 0||Te.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.scene.destroy(),this.library.destroy(),clearTimeout(Mn),Mn=0}},{key:"removeEventListeners",value:function(){var Te,Ce,Xe,Je,ct;document.removeEventListener(Y.Ks.POINTER_UP,this.removePointer),document.removeEventListener(Y.Ks.COPY,this.onCopy),document.removeEventListener(Y.Ks.PASTE,this.pasteFromClipboard),document.removeEventListener(Y.Ks.CUT,this.onCut),(Te=this.excalidrawContainerRef.current)===null||Te===void 0||Te.removeEventListener(Y.Ks.WHEEL,this.onWheel),(Ce=this.nearestScrollableContainer)===null||Ce===void 0||Ce.removeEventListener(Y.Ks.SCROLL,this.onScroll),document.removeEventListener(Y.Ks.KEYDOWN,this.onKeyDown,!1),document.removeEventListener(Y.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition,!1),document.removeEventListener(Y.Ks.KEYUP,this.onKeyUp),window.removeEventListener(Y.Ks.RESIZE,this.onResize,!1),window.removeEventListener(Y.Ks.UNLOAD,this.onUnload,!1),window.removeEventListener(Y.Ks.BLUR,this.onBlur,!1),(Xe=this.excalidrawContainerRef.current)===null||Xe===void 0||Xe.removeEventListener(Y.Ks.DRAG_OVER,this.disableEvent,!1),(Je=this.excalidrawContainerRef.current)===null||Je===void 0||Je.removeEventListener(Y.Ks.DROP,this.disableEvent,!1),document.removeEventListener(Y.Ks.GESTURE_START,this.onGestureStart,!1),document.removeEventListener(Y.Ks.GESTURE_CHANGE,this.onGestureChange,!1),document.removeEventListener(Y.Ks.GESTURE_END,this.onGestureEnd,!1),(ct=this.detachIsMobileMqHandler)===null||ct===void 0||ct.call(this)}},{key:"addEventListeners",value:function(){var Te,Ce,Xe,Je,ct,yt=this;this.removeEventListeners(),document.addEventListener(Y.Ks.POINTER_UP,this.removePointer),document.addEventListener(Y.Ks.COPY,this.onCopy),(Te=this.excalidrawContainerRef.current)===null||Te===void 0||Te.addEventListener(Y.Ks.WHEEL,this.onWheel,{passive:!1}),this.props.handleKeyboardGlobally&&document.addEventListener(Y.Ks.KEYDOWN,this.onKeyDown,!1),document.addEventListener(Y.Ks.KEYUP,this.onKeyUp,{passive:!0}),document.addEventListener(Y.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition),(Ce=document.fonts)===null||Ce===void 0||(Xe=Ce.addEventListener)===null||Xe===void 0||Xe.call(Ce,"loadingdone",function(wt){var kt=wt.fontfaces;yt.fonts.onFontsLoaded(kt)}),document.addEventListener(Y.Ks.GESTURE_START,this.onGestureStart,!1),document.addEventListener(Y.Ks.GESTURE_CHANGE,this.onGestureChange,!1),document.addEventListener(Y.Ks.GESTURE_END,this.onGestureEnd,!1),this.state.viewModeEnabled||(document.addEventListener(Y.Ks.PASTE,this.pasteFromClipboard),document.addEventListener(Y.Ks.CUT,this.onCut),this.props.detectScroll&&(this.nearestScrollableContainer=(0,R.Ip)(this.excalidrawContainerRef.current),this.nearestScrollableContainer.addEventListener(Y.Ks.SCROLL,this.onScroll)),window.addEventListener(Y.Ks.RESIZE,this.onResize,!1),window.addEventListener(Y.Ks.UNLOAD,this.onUnload,!1),window.addEventListener(Y.Ks.BLUR,this.onBlur,!1),(Je=this.excalidrawContainerRef.current)===null||Je===void 0||Je.addEventListener(Y.Ks.DRAG_OVER,this.disableEvent,!1),(ct=this.excalidrawContainerRef.current)===null||ct===void 0||ct.addEventListener(Y.Ks.DROP,this.disableEvent,!1))}},{key:"componentDidUpdate",value:function(Te,Ce){var Xe,Je,ct,yt,wt=this;this.state.showWelcomeScreen||this.scene.getElementsIncludingDeleted().length||this.setState({showWelcomeScreen:!0}),this.excalidrawContainerRef.current&&Te.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshDeviceState(this.excalidrawContainerRef.current),(Ce.scrollX!==this.state.scrollX||Ce.scrollY!==this.state.scrollY)&&((ct=this.props)===null||ct===void 0||(yt=ct.onScrollChange)===null||yt===void 0||yt.call(ct,this.state.scrollX,this.state.scrollY)),Object.keys(this.state.selectedElementIds).length&&(0,ve.EN)(this.state)&&this.setState({activeTool:(0,R.Om)(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&Ce.theme!==this.state.theme&&(0,R.OF)(this.canvas,this.state.theme),Ce.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),Te.langCode!==this.props.langCode&&this.updateLanguage(),Te.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),Ce.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),Te.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),Te.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),Te.gridModeEnabled!==this.props.gridModeEnabled&&this.setState({gridSize:this.props.gridModeEnabled?Y.k:null}),this.props.name&&Te.name!==this.props.name&&this.setState({name:this.props.name}),(Xe=this.excalidrawContainerRef.current)===null||Xe===void 0||Xe.classList.toggle("theme--dark",this.state.theme==="dark"),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(function(){wt.state.editingLinearElement&&wt.actionManager.executeAction(ie.pL)}),(Je=this.state.editingElement)!==null&&Je!==void 0&&Je.isDeleted&&this.setState({editingElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});var kt,en,wn=Ce.multiElement;Ce.activeTool!==this.state.activeTool&&wn!=null&&(0,V.N1)(this.state)&&(0,X.Mn)(wn,!1)&&(0,V.R)(wn,this.state,this.scene,(0,R.AK)(se._.getPointAtIndexGlobalCoordinates(wn,-1))),this.renderScene(),this.history.record(this.state,this.scene.getElementsIncludingDeleted()),this.state.isLoading||(kt=(en=this.props).onChange)===null||kt===void 0||kt.call(en,this.scene.getElementsIncludingDeleted(),this.state,this.files)}},{key:"addTextFromPaste",value:function(Te){var Ce=this,Xe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Je=(0,R.dE)({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),ct=Je.x,yt=Je.y,wt={x:ct,y:yt,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:Te,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:this.state.currentItemTextAlign,verticalAlign:Y.hs,locked:!1},kt=10,en=yt,wn=Xe?[Te]:Te.split(`
`),In=wn.reduce(function(cr,Nr,Jn){var Lr=Nr.trim(),qr=(0,Wt.PT)(wt.fontFamily);if(Lr.length){var gr=Ce.getTopLayerFrameAtSceneCoords({x:ct,y:en}),Vr=(0,he.VL)(En(En({},wt),{},{x:ct,y:en,text:Lr,lineHeight:qr,frameId:gr?gr.id:null}));cr.push(Vr),en+=Vr.height+kt}else{var co;!((co=wn[Jn-1])===null||co===void 0)&&co.trim()&&(en+=(0,Wt.Rg)(wt.fontSize,qr)+kt)}return cr},[]);if(In.length!==0){var qn=In[0].frameId;qn?this.scene.insertElementsAtIndex(In,this.scene.getElementIndex(qn)):this.scene.replaceAllElements([].concat((0,b.Z)(this.scene.getElementsIncludingDeleted()),(0,b.Z)(In))),this.setState({selectedElementIds:Object.fromEntries(In.map(function(cr){return[cr.id,!0]}))}),!Xe&&In.length>1&&Pr===!1&&!this.device.isMobile&&(this.setToast({message:(0,D.t)("toast.pasteAsSingleElement",{shortcut:(0,R.uY)("CtrlOrCmd+Shift+V")}),duration:5e3}),Pr=!0),this.history.resumeRecording()}}},{key:"handleTextWysiwyg",value:function(Te,Ce){var Xe=this,Je=Ce.isExistingElement,ct=Je!==void 0&&Je,yt=function(wt,kt,en){Xe.scene.replaceAllElements((0,b.Z)(Xe.scene.getElementsIncludingDeleted().map(function(wn){return wn.id===Te.id&&(0,he.iB)(wn)?(0,he.N_)(wn,{text:wt,isDeleted:en,originalText:kt}):wn})))};(0,he.b_)({id:Te.id,canvas:this.canvas,getViewportCoords:function(wt,kt){var en=(0,R._i)({sceneX:wt,sceneY:kt},Xe.state),wn=en.x,In=en.y;return[wn-Xe.state.offsetLeft,In-Xe.state.offsetTop]},onChange:(0,R.tH)(function(wt){yt(wt,wt,!1),(0,he.qP)(Te)&&(0,V.Ww)(Te)}),onSubmit:(0,R.tH)(function(wt){var kt=wt.text,en=wt.viaKeyboard,wn=wt.originalText,In=!kt.trim();if(yt(kt,wn,In),!In&&en){var qn=Te.containerId?Te.containerId:Te.id;Xe.setState(function(cr){return{selectedElementIds:En(En({},cr.selectedElementIds),{},(0,I.Z)({},qn,!0))}})}In&&(0,V.$q)(Xe.scene.getNonDeletedElements(),[Te]),In&&!ct||Xe.history.resumeRecording(),Xe.setState({draggingElement:null,editingElement:null}),Xe.state.activeTool.locked&&(0,R.Uk)(Xe.canvas,Xe.state),Xe.focusContainer()}),element:Te,excalidrawContainer:this.excalidrawContainerRef.current,app:this}),this.deselectElements(),yt(Te.text,Te.originalText,!1)}},{key:"deselectElements",value:function(){this.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})}},{key:"getTextElementAtPosition",value:function(Te,Ce){var Xe=this.getElementAtPosition(Te,Ce,{includeBoundTextElement:!0});return Xe&&(0,he.iB)(Xe)&&!Xe.isDeleted?Xe:null}},{key:"getElementAtPosition",value:function(Te,Ce,Xe){var Je=this.getElementsAtPosition(Te,Ce,Xe==null?void 0:Xe.includeBoundTextElement,Xe==null?void 0:Xe.includeLockedElements);if(Je.length>1){if(Xe!=null&&Xe.preferSelected){for(var ct=Je.length-1;ct>-1;ct--)if(this.state.selectedElementIds[Je[ct].id])return Je[ct]}var yt=Je[Je.length-1];return(0,he.wB)(yt,this.state,this.frameNameBoundsCache,Te,Ce)?Je[Je.length-2]:yt}return Je.length===1?Je[0]:null}},{key:"getElementsAtPosition",value:function(Te,Ce){var Xe=this,Je=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ct=arguments.length>3&&arguments[3]!==void 0&&arguments[3],yt=Je&&ct?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(function(wt){return(ct||!wt.locked)&&(Je||!((0,he.iB)(wt)&&wt.containerId))});return(0,Se.CJ)(yt,function(wt){return(0,he.wX)(wt,Xe.state,Xe.frameNameBoundsCache,Te,Ce)}).filter(function(wt){var kt=(0,qi.$Z)(wt);return!kt||!Xe.state.shouldRenderFrames||(0,qi.Dn)({x:Te,y:Ce},kt)})}},{key:"handleHoverSelectedLinearElement",value:function(Te,Ce,Xe){var Je=se._.getElement(Te.elementId),ct=(0,Wt.WJ)(Je);if(Je)if(this.state.selectedLinearElement){var yt=-1,wt=null;(0,Ap.Qu)(Je,this.state,this.frameNameBoundsCache,[Ce,Xe])?(yt=se._.getPointIndexUnderCursor(Je,this.state.zoom,Ce,Xe),wt=se._.getSegmentMidpointHitCoords(Te,{x:Ce,y:Xe},this.state),yt>=0||wt?(0,R.KJ)(this.canvas,Y.oc.POINTER):(0,R.KJ)(this.canvas,Y.oc.MOVE)):((0,x0.oY)([Je],this.state)&&(0,he.wB)(Je,this.state,this.frameNameBoundsCache,Ce,Xe)||ct&&(0,he.wX)(ct,this.state,this.frameNameBoundsCache,Ce,Xe))&&(0,R.KJ)(this.canvas,Y.oc.MOVE),this.state.selectedLinearElement.hoverPointIndex!==yt&&this.setState({selectedLinearElement:En(En({},this.state.selectedLinearElement),{},{hoverPointIndex:yt})}),se._.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,wt)||this.setState({selectedLinearElement:En(En({},this.state.selectedLinearElement),{},{segmentMidPointHoveredCoords:wt})})}else(0,R.KJ)(this.canvas,Y.oc.AUTO)}},{key:"maybeCleanupAfterMissingPointerUp",value:function(Te){Sr!==null&&Sr(Te)}},{key:"updateGestureOnPointerDown",value:function(Te){nr.pointers.set(Te.pointerId,{x:Te.clientX,y:Te.clientY}),nr.pointers.size===2&&(nr.lastCenter=we(nr.pointers),nr.initialScale=this.state.zoom.value,nr.initialDistance=be(Array.from(nr.pointers.values())))}},{key:"initialPointerDownState",value:function(Te){var Ce=(0,R.dE)(Te,this.state),Xe=(0,Se.eD)(this.scene.getNonDeletedElements(),this.state),Je=(0,he.KP)(Xe),ct=(0,m.Z)(Je,4),yt=ct[0],wt=ct[1],kt=ct[2],en=ct[3];return{origin:Ce,withCmdOrCtrl:Te[B.tW.CTRL_OR_CMD],originInGrid:(0,R.AK)((0,Me.wC)(Ce.x,Ce.y,this.state.gridSize)),scrollbars:(0,Se._4)(Xn,Te.clientX-this.state.offsetLeft,Te.clientY-this.state.offsetTop),lastCoords:En({},Ce),originalElements:this.scene.getNonDeletedElements().reduce(function(wn,In){return wn.set(In.id,(0,ge.OL)(In)),wn},new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(kt+yt)/2,y:(en+wt)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(Ce,Xe)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1},elementIdsToErase:{}}}},{key:"handleDraggingScrollBar",value:function(Te,Ce){var Xe=this;if(!Ce.scrollbars.isOverEither||this.state.multiElement)return!1;ln=!0,Ce.lastCoords.x=Te.clientX,Ce.lastCoords.y=Te.clientY;var Je=(0,R.$9)(function(yt){yt.target instanceof HTMLElement&&Xe.handlePointerMoveOverScrollbars(yt,Ce)}),ct=(0,R.tH)(function(){ln=!1,(0,R.Uk)(Xe.canvas,Xe.state),Sr=null,Xe.setState({cursorButton:"up"}),Xe.savePointer(Te.clientX,Te.clientY,"up"),window.removeEventListener(Y.Ks.POINTER_MOVE,Je),window.removeEventListener(Y.Ks.POINTER_UP,ct),Je.flush()});return Sr=ct,window.addEventListener(Y.Ks.POINTER_MOVE,Je),window.addEventListener(Y.Ks.POINTER_UP,ct),!0}},{key:"isASelectedElement",value:function(Te){return Te!=null&&this.state.selectedElementIds[Te.id]}},{key:"isHittingCommonBoundingBoxOfSelectedElements",value:function(Te,Ce){if(Ce.length<2)return!1;var Xe=10/this.state.zoom.value,Je=(0,he.KP)(Ce),ct=(0,m.Z)(Je,4),yt=ct[0],wt=ct[1],kt=ct[2],en=ct[3];return Te.x>yt-Xe&&Te.x<kt+Xe&&Te.y>wt-Xe&&Te.y<en+Xe}},{key:"onKeyDownFromPointerDownHandler",value:function(Te){var Ce=this;return(0,R.tH)(function(Xe){Ce.maybeHandleResize(Te,Xe)||Ce.maybeDragNewGenericElement(Te,Xe)})}},{key:"onKeyUpFromPointerDownHandler",value:function(Te){var Ce=this;return(0,R.tH)(function(Xe){Xe.key===B.tW.ALT&&Xe.preventDefault(),Ce.maybeHandleResize(Te,Xe)||Ce.maybeDragNewGenericElement(Te,Xe)})}},{key:"onPointerMoveFromPointerDownHandler",value:function(Te){var Ce=this;return(0,R.$9)(function(Xe){var Je;if(Te.drag.offset===null&&(Te.drag.offset=(0,R.AK)((0,he.$V)((0,Se.eD)(Ce.scene.getNonDeletedElements(),Ce.state),Te.origin.x,Te.origin.y))),Xe.target instanceof HTMLElement&&!Ce.handlePointerMoveOverScrollbars(Xe,Te)){var ct=(0,R.dE)(Xe,Ce.state);if((0,ve.EN)(Ce.state))Ce.handleEraser(Xe,Te,ct);else{var yt=(0,Me.wC)(ct.x,ct.y,Ce.state.gridSize),wt=(0,m.Z)(yt,2),kt=wt[0],en=wt[1];if(Te.drag.hasOccurred||Ce.state.activeTool.type!=="arrow"&&Ce.state.activeTool.type!=="line"||!((0,Me.LW)(ct.x,ct.y,Te.origin.x,Te.origin.y)<Y.f)){if(Te.resize.isResizing&&(Te.lastCoords.x=ct.x,Te.lastCoords.y=ct.y,Ce.maybeHandleResize(Te,Xe)))return!0;if(Ce.state.selectedLinearElement){var wn=Ce.state.editingLinearElement||Ce.state.selectedLinearElement;if(se._.shouldAddMidpoint(Ce.state.selectedLinearElement,ct,Ce.state)){var In=se._.addMidpoint(Ce.state.selectedLinearElement,ct,Ce.state);return In?void(0,$.flushSync)(function(){Ce.state.selectedLinearElement&&Ce.setState({selectedLinearElement:En(En({},Ce.state.selectedLinearElement),{},{pointerDownState:In.pointerDownState,selectedPointsIndices:In.selectedPointsIndices})}),Ce.state.editingLinearElement&&Ce.setState({editingLinearElement:En(En({},Ce.state.editingLinearElement),{},{pointerDownState:In.pointerDownState,selectedPointsIndices:In.selectedPointsIndices})})}):void 0}if(wn.pointerDownState.segmentMidpoint.value!==null&&!wn.pointerDownState.segmentMidpoint.added)return;var qn=se._.handlePointDragging(Xe,Ce.state,ct.x,ct.y,function(ds,E0){Ce.maybeSuggestBindingsForLinearElementAtCoords(ds,E0)},wn);if(qn)return Te.lastCoords.x=ct.x,Te.lastCoords.y=ct.y,Te.drag.hasOccurred=!0,Ce.state.editingLinearElement&&!Ce.state.editingLinearElement.isDragging&&Ce.setState({editingLinearElement:En(En({},Ce.state.editingLinearElement),{},{isDragging:!0})}),void(Ce.state.selectedLinearElement.isDragging||Ce.setState({selectedLinearElement:En(En({},Ce.state.selectedLinearElement),{},{isDragging:!0})}))}var cr=Te.hit.allHitElements.some(function(ds){return Ce.isASelectedElement(ds)}),Nr=Ce.state.editingLinearElement&&Xe.shiftKey&&Ce.state.editingLinearElement.elementId===((Je=Te.hit.element)===null||Je===void 0?void 0:Je.id);if((cr||Te.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!Nr){var Jn=(0,Se.eD)(Ce.scene.getNonDeletedElements(),Ce.state);if(Jn.every(function(ds){return ds.locked}))return;var Lr=Jn.find(function(ds){return(0,X.He)(ds)}),qr=Ce.getTopLayerFrameAtSceneCoords(ct);if(Ce.setState({frameToHighlight:qr&&!Lr?qr:null}),Te.drag.hasOccurred=!0,Ce.setState({selectedElementsAreBeingDragged:!0}),Jn.length>0&&!Te.withCmdOrCtrl&&!Ce.state.editingElement){var gr=(0,Me.wC)(ct.x-Te.drag.offset.x,ct.y-Te.drag.offset.y,Ce.state.gridSize),Vr=(0,m.Z)(gr,2),co=Vr[0],qo=Vr[1],Wo=[Math.abs(ct.x-Te.origin.x),Math.abs(ct.y-Te.origin.y)],Ta=Wo[0],Ca=Wo[1],Is=Xe.shiftKey;if(!Ce.state.editingFrame&&(0,he.o8)(Te,Jn,co,qo,Is,Ta,Ca,Ce.state,Ce.scene),Ce.maybeSuggestBindingForAll(Jn),Xe.altKey&&!Te.hit.hasBeenDuplicated){Te.hit.hasBeenDuplicated=!0;var Ts,mi=[],Ci=[],Jo=new Map,$o=new Map,Do=Te.hit.element,Za=Ce.scene.getElementsIncludingDeleted(),vi=(0,Se.eD)(Za,Ce.state,{includeBoundTextElement:!0,includeElementsInFrames:!0}).map(function(ds){return ds.id}),Ho=uf(Za);try{for(Ho.s();!(Ts=Ho.n()).done;){var Ga=Ts.value;if(vi.includes(Ga.id)||Ga.id===(Do==null?void 0:Do.id)&&Te.hit.wasAddedToSelection){var Os=(0,he.Sy)(Ce.state.editingGroupId,Jo,Ga),Xa=(0,Me.wC)(Te.origin.x-Te.drag.offset.x,Te.origin.y-Te.drag.offset.y,Ce.state.gridSize),Js=(0,m.Z)(Xa,2),hu=Js[0],a2=Js[1];(0,H.DR)(Os,{x:Os.x+(hu-co),y:Os.y+(a2-qo)}),mi.push(Os),Ci.push(Ga),$o.set(Ga.id,Os.id)}else mi.push(Ga)}}catch(ds){Ho.e(ds)}finally{Ho.f()}var Nc=[].concat(mi,Ci);(0,Wt.P7)(mi,Ci,$o),(0,V.ek)(Nc,Ci,$o,"duplicatesServeAsOld"),(0,qi.xr)(Nc,Ci,$o),Ce.scene.replaceAllElements(Nc)}return}}var Ji=Ce.state.draggingElement;if(Ji){if(Ji.type==="freedraw"){var bi=Ji.points,pf=ct.x-Ji.x,fu=ct.y-Ji.y,kd=bi.length>0&&bi[bi.length-1];if(!(kd&&kd[0]===pf&&kd[1]===fu)){var mo=Ji.simulatePressure?Ji.pressures:[].concat((0,b.Z)(Ji.pressures),[Xe.pressure]);(0,H.DR)(Ji,{points:[].concat((0,b.Z)(bi),[[pf,fu]]),pressures:mo})}}else if((0,X.bt)(Ji)){Te.drag.hasOccurred=!0,Ce.setState({selectedElementsAreBeingDragged:!0});var Mi=Ji.points,Sa=kt-Ji.x,Al=en-Ji.y;if((0,B.Ge)(Xe)&&Mi.length===2){var th=(0,he.o4)(Ji.x,Ji.y,ct.x,ct.y);Sa=th.width,Al=th.height}Mi.length===1?(0,H.DR)(Ji,{points:[].concat((0,b.Z)(Mi),[[Sa,Al]])}):Mi.length===2&&(0,H.DR)(Ji,{points:[].concat((0,b.Z)(Mi.slice(0,-1)),[[Sa,Al]])}),(0,X.Mn)(Ji,!1)&&Ce.maybeSuggestBindingsForLinearElementAtCoords(Ji,[ct],Ce.state.startBoundElement)}else Te.lastCoords.x=ct.x,Te.lastCoords.y=ct.y,Ce.maybeDragNewGenericElement(Te,Xe);if(Ce.state.activeTool.type==="selection"){Te.boxSelection.hasOccurred=!0;var As=Ce.scene.getNonDeletedElements();if(Xe.shiftKey||Ce.state.editingLinearElement||!(0,Se.N)(As,Ce.state)||(Te.withCmdOrCtrl&&Te.hit.element?Ce.setState(function(ds){return(0,ye.bO)(En(En({},ds),{},{selectedElementIds:(0,I.Z)({},Te.hit.element.id,!0)}),Ce.scene.getNonDeletedElements())}):Ce.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})),Ce.state.editingLinearElement)se._.handleBoxSelection(Xe,Ce.state,Ce.setState.bind(Ce));else{var nh=(0,Se.Yp)(As,Ji);Ce.setState(function(ds){return(0,ye.bO)(En(En({},ds),{},{selectedElementIds:En(En(En({},ds.selectedElementIds),nh.reduce(function(E0,Lw){return E0[Lw.id]=!0,E0},{})),Te.hit.element?(0,I.Z)({},Te.hit.element.id,!nh.length):null),showHyperlinkPopup:!(nh.length!==1||!nh[0].link)&&"info",selectedLinearElement:nh.length===1&&(0,X.bt)(nh[0])?new se._(nh[0],Ce.scene):null}),Ce.scene.getNonDeletedElements())})}}}}}}})}},{key:"handlePointerMoveOverScrollbars",value:function(Te,Ce){if(Ce.scrollbars.isOverHorizontal){var Xe=Te.clientX,Je=Xe-Ce.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-Je/this.state.zoom.value}),Ce.lastCoords.x=Xe,!0}if(Ce.scrollbars.isOverVertical){var ct=Te.clientY,yt=ct-Ce.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-yt/this.state.zoom.value}),Ce.lastCoords.y=ct,!0}return!1}},{key:"onPointerUpFromPointerDownHandler",value:function(Te){var Ce=this;return(0,R.tH)(function(Xe){var Je;Te.eventListeners.onMove&&Te.eventListeners.onMove.flush();var ct,yt,wt=Ce.state,kt=wt.draggingElement,en=wt.resizingElement,wn=wt.multiElement,In=wt.activeTool,qn=wt.isResizing,cr=wt.isRotating;if(Ce.setState({isResizing:!1,isRotating:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",editingElement:wn||(0,he.iB)(Ce.state.editingElement)?Ce.state.editingElement:null}),Ce.savePointer(Xe.clientX,Xe.clientY,"up"),Ce.setState({selectedElementsAreBeingDragged:!1}),Ce.state.editingLinearElement)if(Te.boxSelection.hasOccurred||((ct=Te.hit)===null||ct===void 0||(yt=ct.element)===null||yt===void 0?void 0:yt.id)===Ce.state.editingLinearElement.elementId){var Nr=se._.handlePointerUp(Xe,Ce.state.editingLinearElement,Ce.state);Nr!==Ce.state.editingLinearElement&&Ce.setState({editingLinearElement:Nr,suggestedBindings:[]})}else Ce.actionManager.executeAction(ie.pL);else if(Ce.state.selectedLinearElement){var Jn,Lr;if(((Jn=Te.hit)===null||Jn===void 0||(Lr=Jn.element)===null||Lr===void 0?void 0:Lr.id)!==Ce.state.selectedLinearElement.elementId)(0,Se.eD)(Ce.scene.getNonDeletedElements(),Ce.state).length>1&&Ce.setState({selectedLinearElement:null});else{var qr=se._.handlePointerUp(Xe,Ce.state.selectedLinearElement,Ce.state),gr=qr.startBindingElement,Vr=qr.endBindingElement,co=Ce.scene.getElement(qr.elementId);(0,X.Mn)(co)&&(0,V.HG)(co,gr,Vr),qr!==Ce.state.selectedLinearElement&&Ce.setState({selectedLinearElement:En(En({},qr),{},{selectedPointsIndices:null}),suggestedBindings:[]})}}if(Sr=null,window.removeEventListener(Y.Ks.POINTER_MOVE,Te.eventListeners.onMove),window.removeEventListener(Y.Ks.POINTER_UP,Te.eventListeners.onUp),window.removeEventListener(Y.Ks.KEYDOWN,Te.eventListeners.onKeyDown),window.removeEventListener(Y.Ks.KEYUP,Te.eventListeners.onKeyUp),Ce.state.pendingImageElementId&&Ce.setState({pendingImageElementId:null}),(kt==null?void 0:kt.type)==="freedraw"){var qo=(0,R.dE)(Xe,Ce.state),Wo=kt.points,Ta=qo.x-kt.x,Ca=qo.y-kt.y;Ta===Wo[0][0]&&Ca===Wo[0][1]&&(Ca+=1e-4,Ta+=1e-4);var Is=kt.simulatePressure?[]:[].concat((0,b.Z)(kt.pressures),[Xe.pressure]);return(0,H.DR)(kt,{points:[].concat((0,b.Z)(Wo),[[Ta,Ca]]),pressures:Is,lastCommittedPoint:[Ta,Ca]}),void Ce.actionManager.executeAction(ie.pL)}if((0,X.pC)(kt)){var Ts=kt;try{Ce.initializeImageDimensions(Ts),Ce.setState({selectedElementIds:(0,I.Z)({},Ts.id,!0)},function(){Ce.actionManager.executeAction(ie.pL)})}catch(mo){console.error(mo),Ce.scene.replaceAllElements(Ce.scene.getElementsIncludingDeleted().filter(function(Mi){return Mi.id!==Ts.id})),Ce.actionManager.executeAction(ie.pL)}}else if((0,X.bt)(kt)){kt.points.length>1&&Ce.history.resumeRecording();var mi=(0,R.dE)(Xe,Ce.state);Te.drag.hasOccurred||!kt||wn?Te.drag.hasOccurred&&!wn&&((0,V.N1)(Ce.state)&&(0,X.Mn)(kt,!1)&&(0,V.R)(kt,Ce.state,Ce.scene,mi),Ce.setState({suggestedBindings:[],startBoundElement:null}),In.locked?Ce.setState(function(mo){return{draggingElement:null}}):((0,R.z8)(Ce.canvas),Ce.setState(function(mo){return{draggingElement:null,activeTool:(0,R.Om)(Ce.state,{type:"selection"}),selectedElementIds:En(En({},mo.selectedElementIds),{},(0,I.Z)({},kt.id,!0)),selectedLinearElement:new se._(kt,Ce.scene)}}))):((0,H.DR)(kt,{points:[].concat((0,b.Z)(kt.points),[[mi.x-kt.x,mi.y-kt.y]])}),Ce.setState({multiElement:kt,editingElement:Ce.state.draggingElement}))}else{if(In.type!=="selection"&&kt&&(0,he.QD)(kt))return Ce.scene.replaceAllElements(Ce.scene.getElementsIncludingDeleted().slice(0,-1)),void Ce.setState({draggingElement:null});if(kt){if(Te.drag.hasOccurred){var Ci=(0,R.dE)(Xe,Ce.state);if(Ce.state.selectedLinearElement&&Ce.state.selectedLinearElement.isDragging){var Jo=Ce.scene.getElement(Ce.state.selectedLinearElement.elementId);if(Jo!=null&&Jo.frameId){var $o=(0,qi.$Z)(Jo);$o&&Jo&&((0,qi.cO)(Jo,$o)||((0,H.DR)(Jo,{groupIds:[]}),Ce.scene.replaceAllElements((0,qi.lz)(Ce.scene.getElementsIncludingDeleted(),[Jo],Ce.state))))}}else{var Do=Ce.getTopLayerFrameAtSceneCoords(Ci),Za=(0,Se.eD)(Ce.scene.getNonDeletedElements(),Ce.state),vi=Ce.scene.getElementsIncludingDeleted(),Ho=function(mo){if(mo.length>0){var Mi,Sa=uf(mo);try{for(Sa.s();!(Mi=Sa.n()).done;){var Al=Mi.value,th=Al.groupIds.indexOf(Ce.state.editingGroupId);(0,H.DR)(Al,{groupIds:Al.groupIds.slice(0,th)},!1)}}catch(As){Sa.e(As)}finally{Sa.f()}vi.forEach(function(As){As.groupIds.length&&(0,ye.Fb)(vi,As.groupIds[As.groupIds.length-1]).length<2&&(0,H.DR)(As,{groupIds:[]},!1)}),Ce.setState({editingGroupId:null})}};if(Do&&!Ce.state.selectedElementIds[Do.id]){var Ga=Za.filter(function(mo){return mo.frameId!==Do.id&&(0,qi.Qs)(mo,vi,Ce.state)});Ce.state.editingGroupId&&Ho(Ga),vi=(0,qi.A_)(vi,Ga,Do)}else if(!Do&&Ce.state.editingGroupId){var Os=Za.filter(function(mo){return mo.frameId&&!(0,qi.Qs)(mo,vi,Ce.state)});Ho(Os)}vi=(0,qi.Tq)(Ce.scene.getElementsIncludingDeleted(),Ce.state),Ce.scene.replaceAllElements(vi)}}if(kt.type==="frame"){var Xa=(0,qi.fj)(Ce.scene.getElementsIncludingDeleted(),kt);Ce.scene.replaceAllElements((0,qi.A_)(Ce.scene.getElementsIncludingDeleted(),Xa,kt))}(0,H.DR)(kt,(0,he.Qp)(kt))}if(en&&Ce.history.resumeRecording(),en&&(0,he.QD)(en)&&Ce.scene.replaceAllElements(Ce.scene.getElementsIncludingDeleted().filter(function(mo){return mo.id!==en.id})),Te.resize.isResizing){var Js,hu=(0,qi.Tq)(Ce.scene.getElementsIncludingDeleted(),Ce.state),a2=(0,Se.eD)(Ce.scene.getElementsIncludingDeleted(),Ce.state).filter(function(mo){return mo.type==="frame"}),Nc=uf(a2);try{for(Nc.s();!(Js=Nc.n()).done;){var Ji=Js.value;hu=(0,qi.pr)(hu,(0,qi.ni)(Ce.scene.getElementsIncludingDeleted(),Ji,Ce.state),Ji,Ce.state)}}catch(mo){Nc.e(mo)}finally{Nc.f()}Ce.scene.replaceAllElements(hu)}var bi=Te.hit.element;if(((Je=Ce.state.selectedLinearElement)===null||Je===void 0?void 0:Je.elementId)!==(bi==null?void 0:bi.id)&&(0,X.bt)(bi)&&(0,Se.eD)(Ce.scene.getNonDeletedElements(),Ce.state).length===1&&Ce.setState({selectedLinearElement:new se._(bi,Ce.scene)}),(0,ve.EN)(Ce.state)){if((0,Me.LW)(Ce.lastPointerDown.clientX,Ce.lastPointerDown.clientY,Ce.lastPointerUp.clientX,Ce.lastPointerUp.clientY)===0){var pf=(0,R.dE)({clientX:Ce.lastPointerUp.clientX,clientY:Ce.lastPointerUp.clientY},Ce.state);Ce.getElementsAtPosition(pf.x,pf.y).forEach(function(mo){return Te.elementIdsToErase[mo.id]={erase:!0,opacity:mo.opacity}})}Ce.eraseElements(Te)}else{var fu;if(Object.keys(Te.elementIdsToErase).length&&Ce.restoreReadyToEraseElements(Te),bi&&!Te.drag.hasOccurred&&!Te.hit.wasAddedToSelection&&(!Ce.state.editingLinearElement||!Te.boxSelection.hasOccurred))if(Xe.shiftKey&&!Ce.state.editingLinearElement)if(Ce.state.selectedElementIds[bi.id])if((0,ye.zq)(Ce.state,bi)){var kd=bi.groupIds.flatMap(function(mo){return(0,ye.Fb)(Ce.scene.getNonDeletedElements(),mo)}).map(function(mo){return(0,I.Z)({},mo.id,!1)}).reduce(function(mo,Mi){return En(En({},mo),Mi)},{});Ce.setState(function(mo){return{selectedGroupIds:En(En({},mo.selectedElementIds),bi.groupIds.map(function(Mi){return(0,I.Z)({},Mi,!1)}).reduce(function(Mi,Sa){return En(En({},Mi),Sa)},{})),selectedElementIds:En(En({},mo.selectedElementIds),kd)}})}else(fu=Ce.state.selectedLinearElement)!==null&&fu!==void 0&&fu.isDragging||Ce.setState(function(mo){var Mi=En(En({},mo.selectedElementIds),{},(0,I.Z)({},bi.id,!1)),Sa=(0,Se.eD)(Ce.scene.getNonDeletedElements(),En(En({},mo),{},{selectedElementIds:Mi}));return(0,ye.bO)(En(En({},mo),{},{selectedElementIds:Mi,selectedLinearElement:Sa.length===1&&(0,X.bt)(Sa[0])?new se._(Sa[0],Ce.scene):mo.selectedLinearElement}),Ce.scene.getNonDeletedElements())});else bi.frameId&&Ce.state.selectedElementIds[bi.frameId]?Ce.setState(function(mo){var Mi,Sa,Al,th=En(En({},mo.selectedElementIds),{},(Mi={},(0,I.Z)(Mi,bi.id,!0),(0,I.Z)(Mi,bi.frameId,!1),Mi));return((Sa=(Al=Ce.scene.getElement(bi.frameId))===null||Al===void 0?void 0:Al.groupIds)!==null&&Sa!==void 0?Sa:[]).flatMap(function(As){return(0,ye.Fb)(Ce.scene.getNonDeletedElements(),As)}).forEach(function(As){return th[As.id]=!1}),(0,ye.bO)(En(En({},mo),{},{selectedElementIds:th,showHyperlinkPopup:!!bi.link&&"info"}),Ce.scene.getNonDeletedElements())}):Ce.setState(function(mo){return{selectedElementIds:En(En({},mo.selectedElementIds),{},(0,I.Z)({},bi.id,!0))}});else Ce.setState(function(mo){var Mi;return En({},(0,ye.bO)(En(En({},mo),{},{selectedElementIds:(0,I.Z)({},bi.id,!0),selectedLinearElement:(0,X.bt)(bi)&&((Mi=mo.selectedLinearElement)===null||Mi===void 0?void 0:Mi.elementId)!==bi.id?new se._(bi,Ce.scene):mo.selectedLinearElement}),Ce.scene.getNonDeletedElements()))});Te.drag.hasOccurred||Ce.state.isResizing||!(bi&&(0,he.wB)(bi,Ce.state,Ce.frameNameBoundsCache,Te.origin.x,Te.origin.y)||!bi&&Te.hit.hasHitCommonBoundingBoxOfSelectedElements)?(!In.locked&&In.type!=="freedraw"&&kt&&Ce.setState(function(mo){return{selectedElementIds:En(En({},mo.selectedElementIds),{},(0,I.Z)({},kt.id,!0))}}),(In.type!=="selection"||(0,Se.N)(Ce.scene.getNonDeletedElements(),Ce.state))&&Ce.history.resumeRecording(),(Te.drag.hasOccurred||qn||cr)&&((0,V.N1)(Ce.state)?V.el:V.H)((0,Se.eD)(Ce.scene.getNonDeletedElements(),Ce.state)),In.locked||In.type==="freedraw"?Ce.setState({draggingElement:null,suggestedBindings:[]}):((0,R.z8)(Ce.canvas),Ce.setState({draggingElement:null,suggestedBindings:[],activeTool:(0,R.Om)(Ce.state,{type:"selection"})}))):Ce.state.editingLinearElement?Ce.setState({editingLinearElement:null}):Ce.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})}}})}},{key:"maybeSuggestBindingForAll",value:function(Te){var Ce=(0,V.ZB)(Te);this.setState({suggestedBindings:Ce})}},{key:"clearSelection",value:function(Te){this.setState(function(Ce){return{selectedElementIds:{},selectedGroupIds:{},editingGroupId:Ce.editingGroupId&&Te!=null&&(0,ye.Nd)(Te,Ce.editingGroupId)?Ce.editingGroupId:null}}),this.setState({selectedElementIds:{},previousSelectedElementIds:this.state.selectedElementIds})}},{key:"getTextWysiwygSnappedToCenterPosition",value:function(Te,Ce,Xe,Je){if(Je){var ct=Je.x+Je.width/2,yt=Je.y+Je.height/2,wt=(0,Wt.TP)(Je,Xe);if(wt&&(ct=wt.x,yt=wt.y),Math.hypot(Te-ct,Ce-yt)<Y.wZ){var kt=(0,R._i)({sceneX:ct,sceneY:yt},Xe);return{viewportX:kt.x,viewportY:kt.y,elementCenterX:ct,elementCenterY:yt}}}}},{key:"getCanvasOffsets",value:function(){var Te;if((Te=this.excalidrawContainerRef)!==null&&Te!==void 0&&Te.current){var Ce=this.excalidrawContainerRef.current.getBoundingClientRect();return{offsetLeft:Ce.left,offsetTop:Ce.top}}return{offsetLeft:0,offsetTop:0}}},{key:"updateLanguage",value:(de=(0,v.Z)(T().mark(function Te(){var Ce,Xe=this;return T().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Ce=D.Mj.find(function(ct){return ct.code===Xe.props.langCode})||D.Fp,Je.next=3,(0,D.m0)(Ce);case 3:this.setAppState({});case 4:case"end":return Je.stop()}},Te,this)})),function(){return de.apply(this,arguments)})}],[{key:"resetTapTwice",value:function(){Pt=!1}}]),He}(j().Component);oo.defaultProps={UIOptions:Y.cW};var to=function(){var O=this;this.canvas=null,this.rc=null,this.unmounted=!1,this.device=Rp,this.excalidrawContainerRef=j().createRef(),this.files={},this.imageCache=new Map,this.lastPointerDown=null,this.lastPointerUp=null,this.lastViewportPosition={x:0,y:0},this.getFrameNameDOMId=function(de){return"".concat(O.id,"-frame-name-").concat(de.id)},this.frameNameBoundsCache={get:function(de){var ke=O.frameNameBoundsCache._cache.get(de.id);if(!ke||ke.zoom!==O.state.zoom.value||ke.versionNonce!==de.versionNonce){var Oe=document.getElementById(O.getFrameNameDOMId(de));if(Oe){var He=Oe.getBoundingClientRect(),Te=(0,R.dE)({clientX:He.x,clientY:He.y},O.state),Ce=(0,R.dE)({clientX:He.right,clientY:He.bottom},O.state);return ke={x:Te.x,y:Te.y,width:Ce.x-Te.x,height:Ce.y-Te.y,angle:0,zoom:O.state.zoom.value,versionNonce:de.versionNonce},O.frameNameBoundsCache._cache.set(de.id,ke),ke}return null}return ke},_cache:new Map},this.renderFrameNames=function(){if(!O.state.shouldRenderFrames)return null;var de=O.state.theme==="dark";return O.scene.getNonDeletedFrames().map(function(ke,Oe){if(!O.canvas||!(0,Re.Ic)(ke,O.canvas.width/window.devicePixelRatio,O.canvas.height/window.devicePixelRatio,{offsetLeft:O.state.offsetLeft,offsetTop:O.state.offsetTop,scrollX:O.state.scrollX,scrollY:O.state.scrollY,zoom:O.state.zoom}))return null;var He,Te=(0,R._i)({sceneX:ke.x,sceneY:ke.y},O.state),Ce=Te.x,Xe=Te.y,Je=(0,R._i)({sceneX:ke.x+ke.width,sceneY:ke.y+ke.height},O.state).x,ct=function(){var wt;((wt=ke.name)===null||wt===void 0?void 0:wt.trim())===""&&(0,H.DR)(ke,{name:null}),O.setState({editingFrame:null})};if(ke.id===O.state.editingFrame){var yt=ke.name==null?"Frame ".concat(Oe+1):ke.name;He=(0,E.jsx)("input",{autoFocus:!0,value:yt,onChange:function(wt){(0,H.DR)(ke,{name:wt.target.value})},onBlur:function(){return ct()},onKeyDown:function(wt){wt.key!==B.tW.ESCAPE&&wt.key!==B.tW.ENTER||ct()},style:{background:O.state.viewBackgroundColor,filter:de?Y.ZF:"none",zIndex:2,border:"none",display:"block",padding:"".concat(6,"px"),borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:"translateY(-".concat(6,"px)"),color:"var(--color-gray-80)",overflow:"hidden",maxWidth:"".concat(Math.min(Je-Ce-6,document.body.clientWidth-Ce-6),"px")},size:yt.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else He=ke.name==null||ke.name.trim()===""?"Frame ".concat(Oe+1):ke.name.trim();return(0,E.jsx)("div",{id:O.getFrameNameDOMId(ke),style:{position:"absolute",top:"".concat(Xe-20-O.state.offsetTop,"px"),left:"".concat(Ce-O.state.offsetLeft-(O.state.editingFrame===ke.id?6:0),"px"),zIndex:2,fontSize:"14px",color:de?"var(--color-gray-60)":"var(--color-gray-50)",width:"max-content",maxWidth:"".concat(Je-Ce+12,"px"),overflow:ke.id===O.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:Y.oc.MOVE,pointerEvents:O.state.viewModeEnabled?"none":"all"},onPointerDown:function(wt){return O.handleCanvasPointerDown(wt)},onWheel:function(wt){return O.handleWheel(wt)},onContextMenu:function(wt){O.handleCanvasContextMenu(wt)},onDoubleClick:function(){O.setState({editingFrame:ke.id})},children:He},ke.id)})},this.focusContainer=function(){var de;(de=O.excalidrawContainerRef.current)===null||de===void 0||de.focus()},this.getSceneElementsIncludingDeleted=function(){return O.scene.getElementsIncludingDeleted()},this.getSceneElements=function(){return O.scene.getNonDeletedElements()},this.onInsertElements=function(de){O.addElementsFromPasteOrLibrary({elements:de,position:"center",files:null})},this.onExportImage=function(){var de=(0,v.Z)(T().mark(function ke(Oe,He){var Te;return T().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return(0,q.L)("export",Oe,"ui"),Ce.next=3,(0,re.p1)(Oe,He,O.state,O.files,{exportBackground:O.state.exportBackground,name:O.state.name,viewBackgroundColor:O.state.viewBackgroundColor}).catch(R.FG).catch(function(Xe){console.error(Xe),O.setState({errorMessage:Xe.message})});case 3:Te=Ce.sent,O.state.exportEmbedScene&&Te&&(0,$n.g8)(Te)&&O.setState({fileHandle:Te});case 5:case"end":return Ce.stop()}},ke)}));return function(ke,Oe){return de.apply(this,arguments)}}(),this.openEyeDropper=function(de){var ke=de.type;Xu.e_.set(xd.$,{swapPreviewOnAlt:!0,previewType:ke==="stroke"?"strokeColor":"backgroundColor",onSelect:function(Oe,He){var Te=ke==="background"&&He.altKey||ke==="stroke"&&!He.altKey;(0,Se.eD)(O.scene.getElementsIncludingDeleted(),O.state).length&&O.state.activeTool.type==="selection"?O.updateScene({elements:O.scene.getElementsIncludingDeleted().map(function(Ce){return O.state.selectedElementIds[Ce.id]?(0,H.BE)(Ce,(0,I.Z)({},Te?"strokeColor":"backgroundColor",Oe)):Ce})}):Te?O.setState({currentItemStrokeColor:Oe}):O.setState({currentItemBackgroundColor:Oe})},keepOpenOnAlt:!1})},this.syncActionResult=(0,R.tH)(function(de){if(!O.unmounted&&de!==!1){var ke=null;if(de.elements&&(de.elements.forEach(function(Jn){var Lr;((Lr=O.state.editingElement)===null||Lr===void 0?void 0:Lr.id)===Jn.id&&O.state.editingElement!==Jn&&(0,he.qP)(Jn)&&(ke=Jn)}),O.scene.replaceAllElements(de.elements),de.commitToHistory&&O.history.resumeRecording()),de.files&&(O.files=de.replaceFiles?de.files:En(En({},O.files),de.files),O.addNewImagesToImageCache()),de.appState||ke||O.state.contextMenu){var Oe,He,Te,Ce,Xe,Je,ct,yt,wt,kt;de.commitToHistory&&O.history.resumeRecording();var en=(de==null||(Oe=de.appState)===null||Oe===void 0?void 0:Oe.viewModeEnabled)||!1,wn=(de==null||(He=de.appState)===null||He===void 0?void 0:He.zenModeEnabled)||!1,In=(de==null||(Te=de.appState)===null||Te===void 0?void 0:Te.gridSize)||null,qn=(de==null||(Ce=de.appState)===null||Ce===void 0?void 0:Ce.theme)||O.props.theme||Y.C6.LIGHT,cr=(Xe=de==null||(Je=de.appState)===null||Je===void 0?void 0:Je.name)!==null&&Xe!==void 0?Xe:O.state.name,Nr=(ct=de==null||(yt=de.appState)===null||yt===void 0?void 0:yt.errorMessage)!==null&&ct!==void 0?ct:O.state.errorMessage;O.props.viewModeEnabled!==void 0&&(en=O.props.viewModeEnabled),O.props.zenModeEnabled!==void 0&&(wn=O.props.zenModeEnabled),O.props.gridModeEnabled!==void 0&&(In=O.props.gridModeEnabled?Y.k:null),O.props.name!==void 0&&(cr=O.props.name),(kt=ke=ke||((wt=de.appState)===null||wt===void 0?void 0:wt.editingElement)||null)!==null&&kt!==void 0&&kt.isDeleted&&(ke=null),O.setState(function(Jn){return Object.assign(de.appState||{},{contextMenu:null,editingElement:ke,viewModeEnabled:en,zenModeEnabled:wn,gridSize:In,theme:qn,name:cr,errorMessage:Nr})},function(){de.syncHistory&&O.history.setCurrentState(O.state,O.scene.getElementsIncludingDeleted())})}}}),this.onBlur=(0,R.tH)(function(){Bn=!1,O.setState({isBindingEnabled:!0})}),this.onUnload=function(){O.onBlur()},this.disableEvent=function(de){de.preventDefault()},this.resetHistory=function(){O.history.clear()},this.resetScene=(0,R.tH)(function(de){O.scene.replaceAllElements([]),O.setState(function(ke){return En(En({},(0,ve.im)()),{},{isLoading:(de==null||!de.resetLoadingState)&&ke.isLoading,theme:O.state.theme})}),O.resetHistory()}),this.initializeScene=(0,v.Z)(T().mark(function de(){var ke,Oe,He,Te,Ce;return T().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(function(){var Je=(0,v.Z)(T().mark(function ct(yt){var wt,kt;return T().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:if(yt.files.length){en.next=2;break}return en.abrupt("return");case 2:return wt=yt.files[0],en.next=5,wt.getFile();case 5:kt=en.sent,O.loadFileToCanvas(new File([kt],kt.name||"",{type:kt.type}),wt);case 7:case"end":return en.stop()}},ct)}));return function(ct){return Je.apply(this,arguments)}}()),O.props.theme&&O.setState({theme:O.props.theme}),O.state.isLoading||O.setState({isLoading:!0}),He=null,Xe.prev=4,Xe.next=7,O.props.initialData;case 7:if(Xe.t0=Xe.sent,Xe.t0){Xe.next=10;break}Xe.t0=null;case 10:He=Xe.t0,(Te=He)!==null&&Te!==void 0&&Te.libraryItems&&O.library.updateLibrary({libraryItems:He.libraryItems,merge:!0}).catch(function(Je){console.error(Je)}),Xe.next=18;break;case 14:Xe.prev=14,Xe.t1=Xe.catch(4),console.error(Xe.t1),He={appState:{errorMessage:Xe.t1.message||"Encountered an error during importing or restoring scene data"}};case 18:(Ce=(0,me.nu)(He,null,null,{repairBindings:!0})).appState=En(En({},Ce.appState),{},{theme:O.props.theme||Ce.appState.theme,openSidebar:((ke=Ce.appState)===null||ke===void 0?void 0:ke.openSidebar)||O.state.openSidebar,activeTool:Ce.appState.activeTool.type==="image"?En(En({},Ce.appState.activeTool),{},{type:"selection"}):Ce.appState.activeTool,isLoading:!1,toast:O.state.toast}),(Oe=He)!==null&&Oe!==void 0&&Oe.scrollToContent&&(Ce.appState=En(En({},Ce.appState),(0,Se.W)(Ce.elements,En(En({},Ce.appState),{},{width:O.state.width,height:O.state.height,offsetTop:O.state.offsetTop,offsetLeft:O.state.offsetLeft}),null))),O.fonts.loadFontsForElements(Ce.elements),O.resetHistory(),O.syncActionResult(En(En({},Ce),{},{commitToHistory:!0}));case 24:case"end":return Xe.stop()}},de,null,[[4,14]])})),this.refreshDeviceState=function(de){var ke=de.getBoundingClientRect(),Oe=ke.width,He=ke.height,Te=O.props.UIOptions.dockedSidebarBreakpoint!=null?O.props.UIOptions.dockedSidebarBreakpoint:Y.sk;O.device=(0,R.v4)(O.device,{isLandscape:Oe>He,isSmScreen:Oe<Y.eF,isMobile:Oe<Y.kV||He<Y.Yx&&Oe<Y.sS,canDeviceFitSidebar:Oe>Te})},this.onResize=(0,R.tH)(function(){O.scene.getElementsIncludingDeleted().forEach(function(de){return(0,We.bI)(de)}),O.setState({})}),this.renderScene=function(){var de={},ke={},Oe={},He={},Te={};O.state.collaborators.forEach(function(Je,ct){if(Je.selectedElementIds)for(var yt=0,wt=Object.keys(Je.selectedElementIds);yt<wt.length;yt++){var kt=wt[yt];kt in Oe||(Oe[kt]=[]),Oe[kt].push(ct)}Je.pointer&&(Je.username&&(He[ct]=Je.username),Je.userState&&(Te[ct]=Je.userState),ke[ct]=(0,R._i)({sceneX:Je.pointer.x,sceneY:Je.pointer.y},O.state),de[ct]=Je.button)});var Ce=O.scene.getNonDeletedElements().filter(function(Je){return(!(0,X.pC)(Je)||O.state.pendingImageElementId!==Je.id)&&(!O.state.editingElement||O.state.editingElement.type!=="text"||Je.id!==O.state.editingElement.id)}),Xe=getComputedStyle(document.querySelector(".excalidraw")).getPropertyValue("--color-selection");(0,Re.Eu)({elements:Ce,appState:O.state,scale:window.devicePixelRatio,rc:O.rc,canvas:O.canvas,renderConfig:{selectionColor:Xe,scrollX:O.state.scrollX,scrollY:O.state.scrollY,viewBackgroundColor:O.state.viewBackgroundColor,zoom:O.state.zoom,remotePointerViewportCoords:ke,remotePointerButton:de,remoteSelectedElementIds:Oe,remotePointerUsernames:He,remotePointerUserStates:Te,shouldCacheIgnoreZoom:O.state.shouldCacheIgnoreZoom,theme:O.state.theme,imageCache:O.imageCache,isExporting:!1,renderScrollbars:!1},callback:function(Je){var ct=Je.atLeastOneVisibleElement,yt=Je.scrollBars;yt&&(Xn=yt);var wt=!(0,he.iB)(O.state.editingElement)&&!ct&&Ce.length>0;O.state.scrolledOutside!==wt&&O.setState({scrolledOutside:wt}),O.scheduleImageRefresh()}},Sn&&window.EXCALIDRAW_THROTTLE_RENDER===!0),Sn||(Sn=!0)},this.onScroll=(0,R.Ds)(function(){var de=O.getCanvasOffsets(),ke=de.offsetTop,Oe=de.offsetLeft;O.setState(function(He){return He.offsetLeft===Oe&&He.offsetTop===ke?null:{offsetTop:ke,offsetLeft:Oe}})},Y.HM),this.onCut=(0,R.tH)(function(de){var ke;!((ke=O.excalidrawContainerRef.current)===null||ke===void 0)&&ke.contains(document.activeElement)&&!(0,R.s)(de.target)&&(O.cutAll(),de.preventDefault(),de.stopPropagation())}),this.onCopy=(0,R.tH)(function(de){var ke;!((ke=O.excalidrawContainerRef.current)===null||ke===void 0)&&ke.contains(document.activeElement)&&!(0,R.s)(de.target)&&(O.copyAll(),de.preventDefault(),de.stopPropagation())}),this.cutAll=function(){O.actionManager.executeAction(ie.ZM,"keyboard")},this.copyAll=function(){O.actionManager.executeAction(ie.uN,"keyboard")},this.onTapStart=function(de){if(Y.Dt||de.preventDefault(),!Pt)return Pt=!0,clearTimeout(gn),void(gn=window.setTimeout(oo.resetTapTwice,Y.Gj));if(Pt&&de.touches.length===1){var ke=(0,m.Z)(de.touches,1)[0];O.handleCanvasDoubleClick({clientX:ke.clientX,clientY:ke.clientY}),Pt=!1,clearTimeout(gn)}Y.Dt&&de.preventDefault(),de.touches.length===2&&O.setState({selectedElementIds:{}})},this.onTapEnd=function(de){O.resetContextMenuTimer(),de.touches.length>0?O.setState({previousSelectedElementIds:{},selectedElementIds:O.state.previousSelectedElementIds}):nr.pointers.clear()},this.pasteFromClipboard=(0,R.tH)(function(){var de=(0,v.Z)(T().mark(function ke(Oe){var He,Te,Ce,Xe,Je,ct,yt,wt,kt,en,wn,In,qn;return T().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(Ce=!(!Yn||!Oe),Xe=document.activeElement,Je=(He=O.excalidrawContainerRef.current)===null||He===void 0?void 0:He.contains(Xe),!Oe||Je){cr.next=5;break}return cr.abrupt("return");case 5:if(ct=document.elementFromPoint(O.lastViewportPosition.x,O.lastViewportPosition.y),!Oe||ct instanceof HTMLCanvasElement&&!(0,R.s)(Xe)){cr.next=8;break}return cr.abrupt("return");case 8:return yt=Oe==null||(Te=Oe.clipboardData)===null||Te===void 0?void 0:Te.files[0],cr.next=11,(0,oe.mQ)(Oe,Ce);case 11:if(wt=cr.sent,yt||!wt.text||Ce||(kt=wt.text.trim()).startsWith("<svg")&&kt.endsWith("</svg>")&&(yt=(0,$n.Pn)(kt)),!(0,$n.Wr)(yt)||wt.spreadsheet){cr.next=20;break}return en=(0,R.dE)({clientX:O.lastViewportPosition.x,clientY:O.lastViewportPosition.y},O.state),wn=en.x,In=en.y,qn=O.createImageElement({sceneX:wn,sceneY:In}),O.insertImageElement(qn,yt),O.initializeImageDimensions(qn),O.setState({selectedElementIds:(0,I.Z)({},qn.id,!0)}),cr.abrupt("return");case 20:if(!O.props.onPaste){cr.next=32;break}return cr.prev=21,cr.next=24,O.props.onPaste(wt,Oe);case 24:if(cr.t0=cr.sent,cr.t0!==!1){cr.next=27;break}return cr.abrupt("return");case 27:cr.next=32;break;case 29:cr.prev=29,cr.t1=cr.catch(21),console.error(cr.t1);case 32:wt.errorMessage?O.setState({errorMessage:wt.errorMessage}):wt.spreadsheet&&!Ce?O.setState({pasteDialog:{data:wt.spreadsheet,shown:!0}}):wt.elements?O.addElementsFromPasteOrLibrary({elements:wt.elements,files:wt.files||null,position:"cursor",retainSeed:Ce}):wt.text&&O.addTextFromPaste(wt.text,Ce),O.setActiveTool({type:"selection"}),Oe==null||Oe.preventDefault();case 35:case"end":return cr.stop()}},ke,null,[[21,29]])}));return function(ke){return de.apply(this,arguments)}}()),this.addElementsFromPasteOrLibrary=function(de){var ke=(0,me.ET)(de.elements,null),Oe=(0,he.KP)(ke),He=(0,m.Z)(Oe,4),Te=He[0],Ce=He[1],Xe=He[2],Je=He[3],ct=(0,R.TE)(Te,Xe)/2,yt=(0,R.TE)(Ce,Je)/2,wt=(0,g.Z)(de.position)==="object"?de.position.clientX:de.position==="cursor"?O.lastViewportPosition.x:O.state.width/2+O.state.offsetLeft,kt=(0,g.Z)(de.position)==="object"?de.position.clientY:de.position==="cursor"?O.lastViewportPosition.y:O.state.height/2+O.state.offsetTop,en=(0,R.dE)({clientX:wt,clientY:kt},O.state),wn=en.x-ct,In=en.y-yt,qn=(0,Me.wC)(wn,In,O.state.gridSize),cr=(0,m.Z)(qn,2),Nr=cr[0],Jn=cr[1],Lr=(0,ge._N)(ke.map(function(Vr){return(0,H.BE)(Vr,{x:Vr.x+Nr-Te,y:Vr.y+Jn-Ce})}),{randomizeSeed:!de.retainSeed}),qr=[].concat((0,b.Z)(O.scene.getElementsIncludingDeleted()),(0,b.Z)(Lr));O.scene.replaceAllElements(qr),Lr.forEach(function(Vr){if((0,he.iB)(Vr)&&(0,X.Xh)(Vr)){var co=(0,Wt.tl)(Vr);(0,he.oN)(Vr,co)}}),de.files&&(O.files=En(En({},O.files),de.files)),O.history.resumeRecording();var gr=(0,lu.aI)(Lr);O.setState((0,ye.bO)(En(En({},O.state),{},{openSidebar:O.state.openSidebar&&O.device.canDeviceFitSidebar&&O.state.defaultSidebarDockedPreference?O.state.openSidebar:null,selectedElementIds:gr.reduce(function(Vr,co){return(0,X.Xh)(co)||(Vr[co.id]=!0),Vr},{}),selectedGroupIds:{}}),O.scene.getNonDeletedElements()),function(){de.files&&O.addNewImagesToImageCache()}),O.setActiveTool({type:"selection"})},this.setAppState=function(de,ke){O.setState(de,ke)},this.removePointer=function(de){Mn&&O.resetContextMenuTimer(),nr.pointers.delete(de.pointerId)},this.toggleLock=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ui";O.state.activeTool.locked||(0,q.L)("toolbar","toggleLock","".concat(de," (").concat(O.device.isMobile?"mobile":"desktop",")")),O.setState(function(ke){return{activeTool:En(En(En({},ke.activeTool),(0,R.Om)(O.state,ke.activeTool.locked?{type:"selection"}:ke.activeTool)),{},{locked:!ke.activeTool.locked})}})},this.toggleFrameRendering=function(){O.setState(function(de){return{shouldRenderFrames:!de.shouldRenderFrames}})},this.togglePenMode=function(){O.setState(function(de){return{penMode:!de.penMode}})},this.onHandToolToggle=function(){O.actionManager.executeAction($p.eF)},this.zoomCanvas=function(de){O.setState(En({},(0,_e.E)({viewportX:O.state.width/2+O.state.offsetLeft,viewportY:O.state.height/2+O.state.offsetTop,nextZoom:(0,Se.j)(de)},O.state)))},this.cancelInProgresAnimation=null,this.scrollToContent=function(){var de,ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O.scene.getNonDeletedElements(),Oe=arguments.length>1?arguments[1]:void 0;(de=O.cancelInProgresAnimation)===null||de===void 0||de.call(O);var He=Array.isArray(ke)?ke:[ke],Te=O.state.zoom,Ce=O.state.scrollX,Xe=O.state.scrollY;if(Oe!=null&&Oe.fitToContent){var Je=(0,$p.md)(He,O.state,!1),ct=Je.appState;Te=ct.zoom,Ce=ct.scrollX,Xe=ct.scrollY}else{var yt=(0,Se.W)(He,O.state,O.canvas);Ce=yt.scrollX,Xe=yt.scrollY}if(Oe!=null&&Oe.animate){var wt,kt=O.state.scrollX,en=O.state.scrollY;O.zoomCanvas(Te.value);var wn=(0,R.B4)([kt,en],[Ce,Xe],function(In,qn){return O.setState({scrollX:In,scrollY:qn})},{duration:(wt=Oe==null?void 0:Oe.duration)!==null&&wt!==void 0?wt:500});O.cancelInProgresAnimation=function(){wn(),O.cancelInProgresAnimation=null}}else O.setState({scrollX:Ce,scrollY:Xe,zoom:Te})},this.translateCanvas=function(de){var ke;(ke=O.cancelInProgresAnimation)===null||ke===void 0||ke.call(O),O.setState(de)},this.setToast=function(de){O.setState({toast:de})},this.restoreFileFromShare=(0,v.Z)(T().mark(function de(){var ke,Oe,He,Te;return T().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.prev=0,Ce.next=3,caches.open("web-share-target");case 3:return ke=Ce.sent,Ce.next=6,ke.match("shared-file");case 6:if(!(Oe=Ce.sent)){Ce.next=16;break}return Ce.next=10,Oe.blob();case 10:return He=Ce.sent,Te=new File([He],He.name||"",{type:He.type}),O.loadFileToCanvas(Te,null),Ce.next=15,ke.delete("shared-file");case 15:window.history.replaceState(null,Y.iC,window.location.pathname);case 16:Ce.next=21;break;case 18:Ce.prev=18,Ce.t0=Ce.catch(0),O.setState({errorMessage:Ce.t0.message});case 21:case"end":return Ce.stop()}},de,null,[[0,18]])})),this.addFiles=(0,R.tH)(function(de){var ke=de.reduce(function(Oe,He){return Oe.set(He.id,He),Oe},new Map);O.files=En(En({},O.files),Object.fromEntries(ke)),O.scene.getNonDeletedElements().forEach(function(Oe){(0,X.wi)(Oe)&&ke.has(Oe.fileId)&&(O.imageCache.delete(Oe.fileId),(0,We.bI)(Oe))}),O.scene.informMutation(),O.addNewImagesToImageCache()}),this.updateScene=(0,R.tH)(function(de){de.commitToHistory&&O.history.resumeRecording(),de.appState&&O.setState(de.appState),de.elements&&O.scene.replaceAllElements(de.elements),de.collaborators&&O.setState({collaborators:de.collaborators})}),this.onSceneUpdated=function(){O.setState({})},this.toggleSidebar=function(de){var ke,Oe,He=de.name,Te=de.tab,Ce=de.force;return Ce===void 0?ke=((Oe=O.state.openSidebar)===null||Oe===void 0?void 0:Oe.name)===He?null:He:ke=Ce?He:null,O.setState({openSidebar:ke?{name:ke,tab:Te}:null}),!!ke},this.updateCurrentCursorPosition=(0,R.tH)(function(de){O.lastViewportPosition.x=de.clientX,O.lastViewportPosition.y=de.clientY}),this.onKeyDown=(0,R.tH)(function(de){if("Proxy"in window&&(!de.shiftKey&&/^[A-Z]$/.test(de.key)||de.shiftKey&&/^[a-z]$/.test(de.key))&&(de=new Proxy(de,{get:function(Nr,Jn){var Lr=Nr[Jn];return typeof Lr=="function"?Lr.bind(Nr):Jn==="key"?de.shiftKey?Nr.key.toUpperCase():Nr.key.toLowerCase():Lr}})),de[B.tW.CTRL_OR_CMD]&&de.key.toLowerCase()===B.tW.V&&(Yn=de.shiftKey,clearTimeout(kr),kr=window.setTimeout(function(){Yn=!1},100)),!de[B.tW.CTRL_OR_CMD]||!(0,R.s)(de.target)||de.code!==B.aU.MINUS&&de.code!==B.aU.EQUAL){if(!((0,R.s)(de.target)&&de.key!==B.tW.ESCAPE||(0,B.Wl)(de.key)&&(0,R._Z)(de.target)))if(de.key!==B.tW.QUESTION_MARK){if(de.key.toLowerCase()===B.tW.E&&de.shiftKey&&de[B.tW.CTRL_OR_CMD])return de.preventDefault(),void O.setState({openDialog:"imageExport"});if(de.key===B.tW.PAGE_UP||de.key===B.tW.PAGE_DOWN){var ke=(de.shiftKey?O.state.width:O.state.height)/O.state.zoom.value;de.key===B.tW.PAGE_DOWN&&(ke=-ke),de.shiftKey?O.translateCanvas(function(Nr){return{scrollX:Nr.scrollX+ke}}):O.translateCanvas(function(Nr){return{scrollY:Nr.scrollY+ke}})}if(!O.actionManager.handleKeyDown(de)&&!O.state.viewModeEnabled){if(de[B.tW.CTRL_OR_CMD]&&O.state.isBindingEnabled&&O.setState({isBindingEnabled:!1}),(0,B.Wl)(de.key)){var Oe=O.state.gridSize&&(de.shiftKey?Y.$e:O.state.gridSize)||(de.shiftKey?Y.Iw:Y.$e),He=0,Te=0;de.key===B.tW.ARROW_LEFT?He=-Oe:de.key===B.tW.ARROW_RIGHT?He=Oe:de.key===B.tW.ARROW_UP?Te=-Oe:de.key===B.tW.ARROW_DOWN&&(Te=Oe);var Ce=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state,{includeBoundTextElement:!0,includeElementsInFrames:!0});Ce.forEach(function(Nr){(0,H.DR)(Nr,{x:Nr.x+He,y:Nr.y+Te}),(0,V.Ww)(Nr,{simultaneouslyUpdated:Ce})}),O.maybeSuggestBindingForAll(Ce),de.preventDefault()}else if(de.key===B.tW.ENTER){var Xe=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state);if(Xe.length===1){var Je=Xe[0];if(de[B.tW.CTRL_OR_CMD])(0,X.bt)(Je)&&(O.state.editingLinearElement&&O.state.editingLinearElement.elementId===Xe[0].id||(O.history.resumeRecording(),O.setState({editingLinearElement:new se._(Je,O.scene)})));else{if((0,he.iB)(Je)||(0,Wt.Zr)(Je)){var ct;(0,he.iB)(Je)||(ct=Je);var yt=(0,Wt.TP)(Je,O.state),wt=yt.x,kt=yt.y;return O.startTextEditing({sceneX:wt,sceneY:kt,container:ct}),void de.preventDefault()}(0,X.He)(Je)&&O.setState({editingFrame:Je.id})}}}else if(!de.ctrlKey&&!de.altKey&&!de.metaKey&&O.state.draggingElement===null){var en=function(Nr){var Jn=ze.find(function(Lr,qr){return Lr.numericKey!=null&&Nr===Lr.numericKey.toString()||Lr.key&&(typeof Lr.key=="string"?Lr.key===Nr:Lr.key.includes(Nr))});return(Jn==null?void 0:Jn.value)||null}(de.key);en?(O.state.activeTool.type!==en&&(0,q.L)("toolbar",en,"keyboard (".concat(O.device.isMobile?"mobile":"desktop",")")),O.setActiveTool({type:en}),de.stopPropagation()):de.key===B.tW.Q&&(O.toggleLock("keyboard"),de.stopPropagation())}if(de.key===B.tW.SPACE&&nr.pointers.size===0&&(Bn=!0,(0,R.KJ)(O.canvas,Y.oc.GRAB),de.preventDefault()),!(de.key!==B.tW.G&&de.key!==B.tW.S||de.altKey||de[B.tW.CTRL_OR_CMD])){var wn=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state);if(O.state.activeTool.type==="selection"&&!wn.length)return;de.key===B.tW.G&&((0,Se.$b)(O.state.activeTool.type)||wn.some(function(Nr){return(0,Se.$b)(Nr.type)}))&&(O.setState({openPopup:"elementBackground"}),de.stopPropagation()),de.key===B.tW.S&&(O.setState({openPopup:"elementStroke"}),de.stopPropagation())}!de[B.tW.CTRL_OR_CMD]||de.key!==B.tW.BACKSPACE&&de.key!==B.tW.DELETE||Xu.e_.set(Ep.w,"clearCanvas");var In=de.key.toLocaleLowerCase(),qn=In===B.tW.S&&de.shiftKey,cr=de.key===B.tW.I||In===B.tW.G&&de.shiftKey;(qn||cr)&&O.openEyeDropper({type:qn?"stroke":"background"})}}else O.setState({openDialog:"help"})}else de.preventDefault()}),this.onWheel=(0,R.tH)(function(de){de.target instanceof HTMLCanvasElement||!de.ctrlKey||de.preventDefault()}),this.onKeyUp=(0,R.tH)(function(de){if(de.key===B.tW.SPACE&&(O.state.viewModeEnabled?(0,R.KJ)(O.canvas,Y.oc.GRAB):O.state.activeTool.type==="selection"?(0,R.z8)(O.canvas):((0,R.Uk)(O.canvas,O.state),O.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})),Bn=!1),de[B.tW.CTRL_OR_CMD]||O.state.isBindingEnabled||O.setState({isBindingEnabled:!0}),(0,B.Wl)(de.key)){var ke=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state);(0,V.N1)(O.state)?(0,V.el)(ke):(0,V.H)(ke),O.setState({suggestedBindings:[]})}}),this.setActiveTool=function(de){var ke=(0,R.Om)(O.state,de);ke.type==="hand"?(0,R.KJ)(O.canvas,Y.oc.GRAB):Bn||(0,R.Uk)(O.canvas,O.state),(0,R.wO)(document.activeElement)&&O.focusContainer(),(0,X.dt)(ke.type)||O.setState({suggestedBindings:[]}),ke.type==="image"&&O.onImageAction(),ke.type!=="selection"?O.setState({activeTool:ke,selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}):O.setState({activeTool:ke})},this.setCursor=function(de){(0,R.KJ)(O.canvas,de)},this.resetCursor=function(){(0,R.z8)(O.canvas)},this.isTouchScreenMultiTouchGesture=function(){return nr.pointers.size>=2},this.onGestureStart=(0,R.tH)(function(de){de.preventDefault(),O.isTouchScreenMultiTouchGesture()&&O.setState({selectedElementIds:{}}),nr.initialScale=O.state.zoom.value}),this.onGestureChange=(0,R.tH)(function(de){if(de.preventDefault(),!O.isTouchScreenMultiTouchGesture()){var ke=nr.initialScale;ke&&O.setState(function(Oe){return En({},(0,_e.E)({viewportX:O.lastViewportPosition.x,viewportY:O.lastViewportPosition.y,nextZoom:(0,Se.j)(ke*de.scale)},Oe))})}}),this.onGestureEnd=(0,R.tH)(function(de){de.preventDefault(),O.isTouchScreenMultiTouchGesture()&&O.setState({previousSelectedElementIds:{},selectedElementIds:O.state.previousSelectedElementIds}),nr.initialScale=null}),this.startTextEditing=function(de){var ke,Oe,He,Te,Ce=de.sceneX,Xe=de.sceneY,Je=de.insertAtParentCenter,ct=Je===void 0||Je,yt=de.container,wt=!1,kt=ct&&O.getTextWysiwygSnappedToCenterPosition(Ce,Xe,O.state,yt);yt&&kt&&((0,Wt.WJ)(yt)||(wt=!0));var en=null,wn=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state),In=((ke=en=wn.length===1?(0,he.iB)(wn[0])?wn[0]:yt?(0,Wt.WJ)(wn[0]):O.getTextElementAtPosition(Ce,Xe):O.getTextElementAtPosition(Ce,Xe))===null||ke===void 0?void 0:ke.fontFamily)||O.state.currentItemFontFamily,qn=((Oe=en)===null||Oe===void 0?void 0:Oe.lineHeight)||(0,Wt.PT)(In),cr=O.state.currentItemFontSize;if(!en&&wt&&yt&&!(0,X.Yv)(yt)){var Nr={fontSize:cr,fontFamily:In},Jn=(0,Wt.AT)((0,R.mO)(Nr),qn),Lr=(0,Wt.w_)(cr,qn),qr=(0,Wt.HE)(yt),gr=Math.max(qr.height,Lr),Vr=Math.max(qr.width,Jn);(0,H.DR)(yt,{height:gr,width:Vr}),Ce=yt.x+Vr/2,Xe=yt.y+gr/2,kt&&(kt=O.getTextWysiwygSnappedToCenterPosition(Ce,Xe,O.state,yt))}var co=O.getTopLayerFrameAtSceneCoords({x:Ce,y:Xe}),qo=en||(0,he.VL)({x:kt?kt.elementCenterX:Ce,y:kt?kt.elementCenterY:Xe,strokeColor:O.state.currentItemStrokeColor,backgroundColor:O.state.currentItemBackgroundColor,fillStyle:O.state.currentItemFillStyle,strokeWidth:O.state.currentItemStrokeWidth,strokeStyle:O.state.currentItemStrokeStyle,roughness:O.state.currentItemRoughness,opacity:O.state.currentItemOpacity,text:"",fontSize:cr,fontFamily:In,textAlign:kt?"center":O.state.currentItemTextAlign,verticalAlign:kt?Y.oX.MIDDLE:Y.hs,containerId:wt?yt==null?void 0:yt.id:void 0,groupIds:(He=yt==null?void 0:yt.groupIds)!==null&&He!==void 0?He:[],lineHeight:qn,angle:(Te=yt==null?void 0:yt.angle)!==null&&Te!==void 0?Te:0,frameId:co?co.id:null});if(!en&&wt&&yt&&(0,H.DR)(yt,{boundElements:(yt.boundElements||[]).concat({type:"text",id:qo.id})}),O.setState({editingElement:qo}),!en)if(yt&&wt){var Wo=O.scene.getElementIndex(yt.id);O.scene.insertElementAtIndex(qo,Wo+1)}else O.scene.addNewElement(qo);O.setState({editingElement:qo}),O.handleTextWysiwyg(qo,{isExistingElement:!!en})},this.handleCanvasDoubleClick=function(de){if(!O.state.multiElement&&O.state.activeTool.type==="selection"){var ke=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state);if(ke.length===1&&(0,X.bt)(ke[0])){if(de[B.tW.CTRL_OR_CMD]&&(!O.state.editingLinearElement||O.state.editingLinearElement.elementId!==ke[0].id))return O.history.resumeRecording(),void O.setState({editingLinearElement:new se._(ke[0],O.scene)});if(O.state.editingLinearElement&&O.state.editingLinearElement.elementId===ke[0].id)return}(0,R.z8)(O.canvas);var Oe=(0,R.dE)(de,O.state),He=Oe.x,Te=Oe.y;if((0,ye.iJ)(O.state).length>0){var Ce=O.getElementAtPosition(He,Te),Xe=Ce&&(0,ye.YS)(Ce,O.state.selectedGroupIds);if(Xe)return void O.setState(function(yt){return(0,ye.bO)(En(En({},yt),{},{editingGroupId:Xe,selectedElementIds:(0,I.Z)({},Ce.id,!0),selectedGroupIds:{}}),O.scene.getNonDeletedElements())})}if((0,R.z8)(O.canvas),!de[B.tW.CTRL_OR_CMD]&&!O.state.viewModeEnabled){var Je=(0,Wt.OW)(O.scene.getNonDeletedElements(),O.state,He,Te);if(Je&&((0,X.Xo)(Je)||!(0,R.Qm)(Je.backgroundColor)||(0,Ap.Qu)(Je,O.state,O.frameNameBoundsCache,[He,Te]))){var ct=(0,Wt.TP)(Je,O.state);He=ct.x,Te=ct.y}O.startTextEditing({sceneX:He,sceneY:Te,insertAtParentCenter:!de.altKey,container:Je})}}},this.getElementLinkAtPosition=function(de,ke){var Oe=O.scene.getNonDeletedElements().slice().reverse(),He=1/0;return Oe.find(function(Te,Ce){return ke&&Te.id===ke.id&&(He=Ce),Te.link&&Ce<=He&&(0,Il.wq)(Te,O.state,[de.x,de.y],O.device.isMobile)})},this.redirectToLink=function(de,ke){var Oe=(0,Me.LW)(O.lastPointerDown.clientX,O.lastPointerDown.clientY,O.lastPointerUp.clientX,O.lastPointerUp.clientY);if(!(!O.hitLinkElement||ke&&Oe>Y.f||!ke&&Oe!==0)){var He=(0,R.dE)(O.lastPointerDown,O.state),Te=(0,Il.wq)(O.hitLinkElement,O.state,[He.x,He.y],O.device.isMobile),Ce=(0,R.dE)(O.lastPointerUp,O.state),Xe=(0,Il.wq)(O.hitLinkElement,O.state,[Ce.x,Ce.y],O.device.isMobile);if(Te&&Xe){var Je,ct,yt=O.hitLinkElement.link;if(yt&&(O.props.onLinkOpen&&(ct=(0,R.ag)(Y.Ks.EXCALIDRAW_LINK,de.nativeEvent),O.props.onLinkOpen(O.hitLinkElement,ct)),(Je=ct)===null||Je===void 0||!Je.defaultPrevented)){var wt=(0,Il.q$)(yt)?"_self":"_blank",kt=window.open(void 0,wt);kt&&(kt.opener=null,kt.location=(0,Il.$u)(yt))}}}},this.getTopLayerFrameAtSceneCoords=function(de){var ke=O.scene.getNonDeletedFrames().filter(function(Oe){return(0,qi.Dn)(de,Oe)});return ke.length?ke[ke.length-1]:null},this.handleCanvasPointerMove=function(de){O.savePointer(de.clientX,de.clientY,O.state.cursorButton),nr.pointers.has(de.pointerId)&&nr.pointers.set(de.pointerId,{x:de.clientX,y:de.clientY});var ke=nr.initialScale;if(nr.pointers.size===2&&nr.lastCenter&&ke&&nr.initialDistance){var Oe=we(nr.pointers),He=Oe.x-nr.lastCenter.x,Te=Oe.y-nr.lastCenter.y;nr.lastCenter=Oe;var Ce=be(Array.from(nr.pointers.values())),Xe=O.state.activeTool.type==="freedraw"&&O.state.penMode?1:Ce/nr.initialDistance,Je=Xe?(0,Se.j)(ke*Xe):O.state.zoom.value;O.setState(function(Ho){var Ga=(0,_e.E)({viewportX:Oe.x,viewportY:Oe.y,nextZoom:Je},Ho);O.translateCanvas({zoom:Ga.zoom,scrollX:Ga.scrollX+He/Je,scrollY:Ga.scrollY+Te/Je,shouldCacheIgnoreZoom:!0})}),O.resetShouldCacheIgnoreZoomDebounced()}else nr.lastCenter=nr.initialDistance=nr.initialScale=null;if(!(Bn||Pn||ln||(0,ve.l$)(O.state))){var ct=(0,Se._4)(Xn,de.clientX-O.state.offsetLeft,de.clientY-O.state.offsetTop).isOverEither;O.state.draggingElement||O.state.multiElement||(ct?(0,R.z8)(O.canvas):(0,R.Uk)(O.canvas,O.state));var yt=(0,R.dE)(de,O.state),wt=yt.x,kt=yt.y;if(O.state.editingLinearElement&&!O.state.editingLinearElement.isDragging){var en=se._.handlePointerMove(de,wt,kt,O.state);en&&en!==O.state.editingLinearElement&&(0,$.flushSync)(function(){O.setState({editingLinearElement:en})}),(en==null?void 0:en.lastUncommittedPoint)!=null?O.maybeSuggestBindingAtCursor(yt):(0,$.flushSync)(function(){O.setState({suggestedBindings:[]})})}if((0,X.Lx)(O.state.activeTool.type)){var wn=O.state.draggingElement;(0,X.Mn)(wn,!1)?O.maybeSuggestBindingsForLinearElementAtCoords(wn,[yt],O.state.startBoundElement):O.maybeSuggestBindingAtCursor(yt)}if(O.state.multiElement){var In=O.state.multiElement,qn=In.x,cr=In.y,Nr=In.points,Jn=In.lastCommittedPoint,Lr=Nr[Nr.length-1];if((0,R.Uk)(O.canvas,O.state),Lr===Jn)(0,Me.LW)(wt-qn,kt-cr,Lr[0],Lr[1])>=Y.qx?(0,H.DR)(In,{points:[].concat((0,b.Z)(Nr),[[wt-qn,kt-cr]])}):(0,R.KJ)(O.canvas,Y.oc.POINTER);else if(Nr.length>2&&Jn&&(0,Me.LW)(wt-qn,kt-cr,Jn[0],Jn[1])<Y.qx)(0,R.KJ)(O.canvas,Y.oc.POINTER),(0,H.DR)(In,{points:Nr.slice(0,-1)});else{var qr,gr=(0,Me.wC)(wt,kt,O.state.gridSize),Vr=(0,m.Z)(gr,2),co=Vr[0],qo=Vr[1],Wo=(qr=In==null?void 0:In.lastCommittedPoint)!==null&&qr!==void 0?qr:[0,0],Ta=(0,m.Z)(Wo,2),Ca=Ta[0],Is=Ta[1],Ts=co-qn-Ca,mi=qo-cr-Is;if((0,B.Ge)(de)){var Ci=(0,he.o4)(Ca+qn,Is+cr,co,qo);Ts=Ci.width,mi=Ci.height}(0,Me.g6)(Nr,O.state.zoom.value)&&(0,R.KJ)(O.canvas,Y.oc.POINTER),(0,H.DR)(In,{points:[].concat((0,b.Z)(Nr.slice(0,-1)),[[Ca+Ts,Is+mi]])})}}else if(!(de.buttons||O.state.activeTool.type!=="selection"&&O.state.activeTool.type!=="text"&&O.state.activeTool.type!=="eraser")){var Jo=O.scene.getNonDeletedElements(),$o=(0,Se.eD)(Jo,O.state);if($o.length!==1||ct||O.state.editingLinearElement){if($o.length>1&&!ct){var Do=(0,he.n2)((0,he.KP)($o),wt,kt,O.state.zoom,de.pointerType);if(Do)return void(0,R.KJ)(O.canvas,(0,he.Un)({transformHandleType:Do}))}}else{var Za=(0,he.jt)(Jo,O.state,wt,kt,O.state.zoom,de.pointerType);if(Za&&Za.transformHandleType)return void(0,R.KJ)(O.canvas,(0,he.Un)(Za))}var vi=O.getElementAtPosition(yt.x,yt.y);O.hitLinkElement=O.getElementLinkAtPosition(yt,vi),(0,ve.EN)(O.state)||(O.hitLinkElement&&!O.state.selectedElementIds[O.hitLinkElement.id]?((0,R.KJ)(O.canvas,Y.oc.POINTER),(0,Il.Pp)(O.hitLinkElement,O.state)):((0,Il.lV)(),vi&&vi.link&&O.state.selectedElementIds[vi.id]&&!O.state.contextMenu&&!O.state.showHyperlinkPopup?O.setState({showHyperlinkPopup:"info"}):O.state.activeTool.type==="text"?(0,R.KJ)(O.canvas,(0,he.iB)(vi)?Y.oc.TEXT:Y.oc.CROSSHAIR):O.state.viewModeEnabled?(0,R.KJ)(O.canvas,Y.oc.GRAB):ct?(0,R.KJ)(O.canvas,Y.oc.AUTO):O.state.selectedLinearElement?O.handleHoverSelectedLinearElement(O.state.selectedLinearElement,wt,kt):de[B.tW.CTRL_OR_CMD]?(0,R.KJ)(O.canvas,Y.oc.AUTO):!vi&&!O.isHittingCommonBoundingBoxOfSelectedElements(yt,$o)||vi!=null&&vi.locked||(0,R.KJ)(O.canvas,Y.oc.MOVE)))}}},this.handleEraser=function(de,ke,Oe){for(var He=function(wn){wn.forEach(function(In){In.locked||(Te.push(In.id),de.altKey?ke.elementIdsToErase[In.id]&&ke.elementIdsToErase[In.id].erase&&(ke.elementIdsToErase[In.id].erase=!1):ke.elementIdsToErase[In.id]||(ke.elementIdsToErase[In.id]={erase:!0,opacity:In.opacity}))})},Te=[],Ce=(0,Me.LW)(ke.lastCoords.x,ke.lastCoords.y,Oe.x,Oe.y),Xe=10/O.state.zoom.value,Je=En({},ke.lastCoords),ct=0;ct<=Ce&&(He(O.getElementsAtPosition(Je.x,Je.y)),ct!==Ce);){var yt=(ct=Math.min(ct+Xe,Ce))/Ce,wt=(1-yt)*Je.x+yt*Oe.x,kt=(1-yt)*Je.y+yt*Oe.y;Je.x=wt,Je.y=kt}var en=O.scene.getElementsIncludingDeleted().map(function(wn){var In=(0,X.Xh)(wn)&&Te.includes(wn.containerId)?wn.containerId:wn.id;if(Te.includes(In)){if(!de.altKey)return(0,H.BE)(wn,{opacity:Y.xY});if(ke.elementIdsToErase[In]&&ke.elementIdsToErase[In].erase===!1)return(0,H.BE)(wn,{opacity:ke.elementIdsToErase[In].opacity})}return wn});O.scene.replaceAllElements(en),ke.lastCoords.x=Oe.x,ke.lastCoords.y=Oe.y},this.handleTouchMove=function(de){Qn=!0},this.handleCanvasPointerDown=function(de){var ke,Oe;if(O.state.contextMenu&&O.setState({contextMenu:null}),O.updateGestureOnPointerDown(de),de.pointerType==="touch"&&O.state.draggingElement&&O.state.draggingElement.type==="freedraw"){var He=O.state.draggingElement;O.updateScene(En(En({},He.points.length<10?{elements:O.scene.getElementsIncludingDeleted().filter(function(In){return In.id!==He.id})}:{}),{},{appState:{draggingElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Object.keys(O.state.selectedElementIds).filter(function(In){return In!==He.id}).reduce(function(In,qn){return In[qn]=O.state.selectedElementIds[qn],In},{})}}))}else{var Te=document.getSelection();if(Te!=null&&Te.anchorNode&&Te.removeAllRanges(),O.maybeOpenContextMenuAfterPointerDownOnTouchDevices(de),O.maybeCleanupAfterMissingPointerUp(de),O.state.penDetected||de.pointerType!=="pen"||O.setState(function(In){return{penMode:!0,penDetected:!0}}),!O.device.isTouchScreen&&["pen","touch"].includes(de.pointerType)&&(O.device=(0,R.v4)(O.device,{isTouchScreen:!0})),!Pn&&(O.lastPointerDown=de,O.setState({lastPointerDownWith:de.pointerType,cursorButton:"down"}),O.savePointer(de.clientX,de.clientY,"down"),!O.handleCanvasPanUsingWheelOrSpaceDrag(de)&&!(de.button!==Y.Oh.MAIN&&de.button!==Y.Oh.TOUCH||nr.pointers.size>1))){var Ce=O.initialPointerDownState(de);if(O.setState({selectedElementsAreBeingDragged:!1}),!O.handleDraggingScrollBar(de,Ce)&&(O.clearSelectionIfNotUsingSelection(),O.updateBindingEnabledOnPointerMove(de),!O.handleSelectionOnPointerDown(de,Ce)&&(!O.state.penMode||de.pointerType!=="touch"||O.state.activeTool.type==="selection"||O.state.activeTool.type==="text"||O.state.activeTool.type==="image")))if(O.state.activeTool.type!=="text"){if(O.state.activeTool.type==="arrow"||O.state.activeTool.type==="line")O.handleLinearElementOnPointerDown(de,O.state.activeTool.type,Ce);else if(O.state.activeTool.type==="image"){(0,R.KJ)(O.canvas,Y.oc.CROSSHAIR);var Xe=O.state.pendingImageElementId&&O.scene.getElement(O.state.pendingImageElementId);if(!Xe)return;O.setState({draggingElement:Xe,editingElement:Xe,pendingImageElementId:null,multiElement:null});var Je=(0,R.dE)(de,O.state),ct=Je.x,yt=Je.y;(0,H.DR)(Xe,{x:ct,y:yt})}else O.state.activeTool.type==="freedraw"?O.handleFreeDrawElementOnPointerDown(de,O.state.activeTool.type,Ce):O.state.activeTool.type==="custom"?(0,R.KJ)(O.canvas,Y.oc.AUTO):O.state.activeTool.type==="frame"?O.createFrameElementOnPointerDown(Ce):O.state.activeTool.type!=="eraser"&&O.state.activeTool.type!=="hand"&&O.createGenericElementOnPointerDown(O.state.activeTool.type,Ce);(ke=O.props)===null||ke===void 0||(Oe=ke.onPointerDown)===null||Oe===void 0||Oe.call(ke,O.state.activeTool,Ce);var wt=O.onPointerMoveFromPointerDownHandler(Ce),kt=O.onPointerUpFromPointerDownHandler(Ce),en=O.onKeyDownFromPointerDownHandler(Ce),wn=O.onKeyUpFromPointerDownHandler(Ce);Sr=kt,O.state.viewModeEnabled||(window.addEventListener(Y.Ks.POINTER_MOVE,wt),window.addEventListener(Y.Ks.POINTER_UP,kt),window.addEventListener(Y.Ks.KEYDOWN,en),window.addEventListener(Y.Ks.KEYUP,wn),Ce.eventListeners.onMove=wt,Ce.eventListeners.onUp=kt,Ce.eventListeners.onKeyUp=wn,Ce.eventListeners.onKeyDown=en)}else O.handleTextOnPointerDown(de,Ce)}}},this.handleCanvasPointerUp=function(de){if(O.lastPointerUp=de,O.device.isTouchScreen){var ke=(0,R.dE)({clientX:de.clientX,clientY:de.clientY},O.state),Oe=O.getElementAtPosition(ke.x,ke.y);O.hitLinkElement=O.getElementLinkAtPosition(ke,Oe)}O.hitLinkElement&&!O.state.selectedElementIds[O.hitLinkElement.id]&&O.redirectToLink(de,O.device.isTouchScreen),O.removePointer(de)},this.maybeOpenContextMenuAfterPointerDownOnTouchDevices=function(de){de.pointerType==="touch"&&(Qn=!1,Mn?Qn=!0:Mn=window.setTimeout(function(){Mn=0,Qn||O.handleCanvasContextMenu(de)},Y.nM))},this.resetContextMenuTimer=function(){clearTimeout(Mn),Mn=0,Qn=!1},this.handleCanvasPanUsingWheelOrSpaceDrag=function(de){if(!(nr.pointers.size<=1&&(de.button===Y.Oh.WHEEL||de.button===Y.Oh.MAIN&&Bn||(0,ve.l$)(O.state)||O.state.viewModeEnabled))||(0,he.iB)(O.state.editingElement))return!1;Pn=!0,de.preventDefault();var ke=!1,Oe=/Linux/.test(window.navigator.platform);(0,R.KJ)(O.canvas,Y.oc.GRABBING);var He=de.clientX,Te=de.clientY,Ce=(0,R.$9)(function(Je){var ct=He-Je.clientX,yt=Te-Je.clientY;if(He=Je.clientX,Te=Je.clientY,Oe&&!ke&&(Math.abs(ct)>1||Math.abs(yt)>1)){ke=!0;var wt=function kt(en){document.body.removeEventListener(Y.Ks.PASTE,kt),en.stopPropagation()};document.body.addEventListener(Y.Ks.PASTE,wt),window.addEventListener(Y.Ks.POINTER_UP,function kt(){setTimeout(function(){document.body.removeEventListener(Y.Ks.PASTE,wt),window.removeEventListener(Y.Ks.POINTER_UP,kt)},100)})}O.translateCanvas({scrollX:O.state.scrollX-ct/O.state.zoom.value,scrollY:O.state.scrollY-yt/O.state.zoom.value})}),Xe=(0,R.tH)(Sr=function(){Sr=null,Pn=!1,Bn||(O.state.viewModeEnabled?(0,R.KJ)(O.canvas,Y.oc.GRAB):(0,R.Uk)(O.canvas,O.state)),O.setState({cursorButton:"up"}),O.savePointer(de.clientX,de.clientY,"up"),window.removeEventListener(Y.Ks.POINTER_MOVE,Ce),window.removeEventListener(Y.Ks.POINTER_UP,Xe),window.removeEventListener(Y.Ks.BLUR,Xe),Ce.flush()});return window.addEventListener(Y.Ks.BLUR,Xe),window.addEventListener(Y.Ks.POINTER_MOVE,Ce,{passive:!0}),window.addEventListener(Y.Ks.POINTER_UP,Xe),!0},this.clearSelectionIfNotUsingSelection=function(){O.state.activeTool.type!=="selection"&&O.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})},this.handleSelectionOnPointerDown=function(de,ke){if(O.state.activeTool.type==="selection"){var Oe=O.scene.getNonDeletedElements(),He=(0,Se.eD)(Oe,O.state);if(He.length!==1||O.state.editingLinearElement)He.length>1&&(ke.resize.handleType=(0,he.n2)((0,he.KP)(He),ke.origin.x,ke.origin.y,O.state.zoom,de.pointerType));else{var Te=(0,he.jt)(Oe,O.state,ke.origin.x,ke.origin.y,O.state.zoom,de.pointerType);Te!=null&&(O.setState({resizingElement:Te.element}),ke.resize.handleType=Te.transformHandleType)}if(ke.resize.handleType)ke.resize.isResizing=!0,ke.resize.offset=(0,R.AK)((0,he.xx)(ke.resize.handleType,He,ke.origin.x,ke.origin.y)),He.length===1&&(0,X.bt)(He[0])&&He[0].points.length===2&&(ke.resize.arrowDirection=(0,he.T)(ke.resize.handleType,He[0]));else{var Ce;if(O.state.selectedLinearElement){var Xe=O.state.editingLinearElement||O.state.selectedLinearElement,Je=se._.handlePointerDown(de,O.state,O.history,ke.origin,Xe);if(Je.hitElement&&(ke.hit.element=Je.hitElement),Je.linearElementEditor&&(O.setState({selectedLinearElement:Je.linearElementEditor}),O.state.editingLinearElement&&O.setState({editingLinearElement:Je.linearElementEditor})),Je.didAddPoint)return!0}if(ke.hit.element=(Ce=ke.hit.element)!==null&&Ce!==void 0?Ce:O.getElementAtPosition(ke.origin.x,ke.origin.y),ke.hit.element&&O.getElementLinkAtPosition({x:ke.origin.x,y:ke.origin.y},ke.hit.element))return!1;ke.hit.allHitElements=O.getElementsAtPosition(ke.origin.x,ke.origin.y);var ct=ke.hit.element,yt=ke.hit.allHitElements.some(function(wt){return O.isASelectedElement(wt)});if(ct!==null&&yt||de.shiftKey||ke.hit.hasHitCommonBoundingBoxOfSelectedElements||O.clearSelection(ct),O.state.editingLinearElement)O.setState({selectedElementIds:(0,I.Z)({},O.state.editingLinearElement.elementId,!0)});else if(ct!=null){if(de[B.tW.CTRL_OR_CMD])return O.state.selectedElementIds[ct.id]||(ke.hit.wasAddedToSelection=!0),O.setState(function(wt){return En(En({},(0,ye.iE)(wt,ct)),{},{previousSelectedElementIds:O.state.selectedElementIds})}),!1;O.state.selectedElementIds[ct.id]||(O.state.editingGroupId&&!(0,ye.Nd)(ct,O.state.editingGroupId)&&O.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}),yt||ke.hit.hasHitCommonBoundingBoxOfSelectedElements||(O.setState(function(wt){var kt=En(En({},wt.selectedElementIds),{},(0,I.Z)({},ct.id,!0)),en=[];if(Object.keys(wt.selectedElementIds).forEach(function(qn){var cr=O.scene.getElement(qn);cr&&en.push(cr)}),ct.type==="frame")(0,qi.wO)(en,ct.id).forEach(function(qn){kt[qn.id]=!1});else if(ct.frameId)kt[ct.frameId]&&(kt[ct.id]=!1);else{var wn=ct.groupIds,In=new Set(wn.flatMap(function(qn){return(0,ye.Fb)(O.scene.getNonDeletedElements(),qn)}).filter(function(qn){return qn.type==="frame"}).map(function(qn){return qn.id}));In.size>0&&en.forEach(function(qn){qn.frameId&&In.has(qn.frameId)&&(kt[qn.id]=!1,qn.groupIds.flatMap(function(cr){return(0,ye.Fb)(O.scene.getNonDeletedElements(),cr)}).forEach(function(cr){return kt[cr.id]=!1}))})}return(0,ye.bO)(En(En({},wt),{},{selectedElementIds:kt,showHyperlinkPopup:!!ct.link&&"info"}),O.scene.getNonDeletedElements())}),ke.hit.wasAddedToSelection=!0))}O.setState({previousSelectedElementIds:O.state.selectedElementIds})}}return!1},this.handleTextOnPointerDown=function(de,ke){if(!(0,he.iB)(O.state.editingElement)){var Oe=ke.origin.x,He=ke.origin.y,Te=O.getElementAtPosition(Oe,He,{includeBoundTextElement:!0}),Ce=(0,Wt.OW)(O.scene.getNonDeletedElements(),O.state,Oe,He);(0,X.Xo)(Te)&&(Ce=Te,Oe=Te.x+Te.width/2,He=Te.y+Te.height/2),O.startTextEditing({sceneX:Oe,sceneY:He,insertAtParentCenter:!de.altKey,container:Ce}),(0,R.z8)(O.canvas),O.state.activeTool.locked||O.setState({activeTool:(0,R.Om)(O.state,{type:"selection"})})}},this.handleFreeDrawElementOnPointerDown=function(de,ke,Oe){var He=(0,Me.wC)(Oe.origin.x,Oe.origin.y,null),Te=(0,m.Z)(He,2),Ce=Te[0],Xe=Te[1],Je=O.getTopLayerFrameAtSceneCoords({x:Ce,y:Xe}),ct=(0,ge.KE)({type:ke,x:Ce,y:Xe,strokeColor:O.state.currentItemStrokeColor,backgroundColor:O.state.currentItemBackgroundColor,fillStyle:O.state.currentItemFillStyle,strokeWidth:O.state.currentItemStrokeWidth,strokeStyle:O.state.currentItemStrokeStyle,roughness:O.state.currentItemRoughness,opacity:O.state.currentItemOpacity,roundness:null,simulatePressure:de.pressure===.5,locked:!1,frameId:Je?Je.id:null});O.setState(function(kt){return{selectedElementIds:En(En({},kt.selectedElementIds),{},(0,I.Z)({},ct.id,!1))}});var yt=ct.simulatePressure?ct.pressures:[].concat((0,b.Z)(ct.pressures),[de.pressure]);(0,H.DR)(ct,{points:[[0,0]],pressures:yt});var wt=(0,V.Y9)(Oe.origin,O.scene);O.scene.addNewElement(ct),O.setState({draggingElement:ct,editingElement:ct,startBoundElement:wt,suggestedBindings:[]})},this.createImageElement=function(de){var ke=de.sceneX,Oe=de.sceneY,He=(0,Me.wC)(ke,Oe,O.state.gridSize),Te=(0,m.Z)(He,2),Ce=Te[0],Xe=Te[1],Je=O.getTopLayerFrameAtSceneCoords({x:Ce,y:Xe});return(0,he.vw)({type:"image",x:Ce,y:Xe,strokeColor:O.state.currentItemStrokeColor,backgroundColor:O.state.currentItemBackgroundColor,fillStyle:O.state.currentItemFillStyle,strokeWidth:O.state.currentItemStrokeWidth,strokeStyle:O.state.currentItemStrokeStyle,roughness:O.state.currentItemRoughness,roundness:null,opacity:O.state.currentItemOpacity,locked:!1,frameId:Je?Je.id:null})},this.handleLinearElementOnPointerDown=function(de,ke,Oe){if(O.state.multiElement){var He=O.state.multiElement;if(He.type==="line"&&(0,Me.g6)(He.points,O.state.zoom.value))return(0,H.DR)(He,{lastCommittedPoint:He.points[He.points.length-1]}),void O.actionManager.executeAction(ie.pL);var Te=He.x,Ce=He.y,Xe=He.lastCommittedPoint;if(He.points.length>1&&Xe&&(0,Me.LW)(Oe.origin.x-Te,Oe.origin.y-Ce,Xe[0],Xe[1])<Y.qx)return void O.actionManager.executeAction(ie.pL);O.setState(function(gr){return{selectedElementIds:En(En({},gr.selectedElementIds),{},(0,I.Z)({},He.id,!0))}}),(0,H.DR)(He,{lastCommittedPoint:He.points[He.points.length-1]}),(0,R.KJ)(O.canvas,Y.oc.POINTER)}else{var Je=(0,Me.wC)(Oe.origin.x,Oe.origin.y,O.state.gridSize),ct=(0,m.Z)(Je,2),yt=ct[0],wt=ct[1],kt=O.getTopLayerFrameAtSceneCoords({x:yt,y:wt}),en=O.state,wn=en.currentItemStartArrowhead,In=en.currentItemEndArrowhead,qn=ke==="arrow"?[wn,In]:[null,null],cr=(0,m.Z)(qn,2),Nr=cr[0],Jn=cr[1],Lr=(0,he.y8)({type:ke,x:yt,y:wt,strokeColor:O.state.currentItemStrokeColor,backgroundColor:O.state.currentItemBackgroundColor,fillStyle:O.state.currentItemFillStyle,strokeWidth:O.state.currentItemStrokeWidth,strokeStyle:O.state.currentItemStrokeStyle,roughness:O.state.currentItemRoughness,opacity:O.state.currentItemOpacity,roundness:O.state.currentItemRoundness==="round"?{type:Y.a6.PROPORTIONAL_RADIUS}:null,startArrowhead:Nr,endArrowhead:Jn,locked:!1,frameId:kt?kt.id:null});O.setState(function(gr){return{selectedElementIds:En(En({},gr.selectedElementIds),{},(0,I.Z)({},Lr.id,!1))}}),(0,H.DR)(Lr,{points:[].concat((0,b.Z)(Lr.points),[[0,0]])});var qr=(0,V.Y9)(Oe.origin,O.scene);O.scene.addNewElement(Lr),O.setState({draggingElement:Lr,editingElement:Lr,startBoundElement:qr,suggestedBindings:[]})}},this.createGenericElementOnPointerDown=function(de,ke){var Oe=(0,Me.wC)(ke.origin.x,ke.origin.y,O.state.gridSize),He=(0,m.Z)(Oe,2),Te=He[0],Ce=He[1],Xe=O.getTopLayerFrameAtSceneCoords({x:Te,y:Ce}),Je=(0,he.Up)({type:de,x:Te,y:Ce,strokeColor:O.state.currentItemStrokeColor,backgroundColor:O.state.currentItemBackgroundColor,fillStyle:O.state.currentItemFillStyle,strokeWidth:O.state.currentItemStrokeWidth,strokeStyle:O.state.currentItemStrokeStyle,roughness:O.state.currentItemRoughness,opacity:O.state.currentItemOpacity,roundness:O.state.currentItemRoundness==="round"?{type:(0,X.QI)(de)?Y.a6.ADAPTIVE_RADIUS:Y.a6.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:Xe?Xe.id:null});Je.type==="selection"?O.setState({selectionElement:Je,draggingElement:Je}):(O.scene.addNewElement(Je),O.setState({multiElement:null,draggingElement:Je,editingElement:Je}))},this.createFrameElementOnPointerDown=function(de){var ke=(0,Me.wC)(de.origin.x,de.origin.y,O.state.gridSize),Oe=(0,m.Z)(ke,2),He=Oe[0],Te=Oe[1],Ce=(0,ge.M3)(En({x:He,y:Te,opacity:O.state.currentItemOpacity,locked:!1},Y.iG));O.scene.replaceAllElements([].concat((0,b.Z)(O.scene.getElementsIncludingDeleted()),[Ce])),O.setState({multiElement:null,draggingElement:Ce,editingElement:Ce})},this.restoreReadyToEraseElements=function(de){var ke=O.scene.getElementsIncludingDeleted().map(function(Oe){return de.elementIdsToErase[Oe.id]&&de.elementIdsToErase[Oe.id].erase?(0,H.BE)(Oe,{opacity:de.elementIdsToErase[Oe.id].opacity}):(0,X.Xh)(Oe)&&de.elementIdsToErase[Oe.containerId]&&de.elementIdsToErase[Oe.containerId].erase?(0,H.BE)(Oe,{opacity:de.elementIdsToErase[Oe.containerId].opacity}):Oe.frameId&&de.elementIdsToErase[Oe.frameId]&&de.elementIdsToErase[Oe.frameId].erase?(0,H.BE)(Oe,{opacity:de.elementIdsToErase[Oe.frameId].opacity}):Oe});O.scene.replaceAllElements(ke)},this.eraseElements=function(de){var ke=O.scene.getElementsIncludingDeleted().map(function(Oe){return de.elementIdsToErase[Oe.id]&&de.elementIdsToErase[Oe.id].erase||(0,X.Xh)(Oe)&&de.elementIdsToErase[Oe.containerId]&&de.elementIdsToErase[Oe.containerId].erase||Oe.frameId&&de.elementIdsToErase[Oe.frameId]&&de.elementIdsToErase[Oe.frameId].erase?(0,H.BE)(Oe,{isDeleted:!0}):Oe});O.history.resumeRecording(),O.scene.replaceAllElements(ke)},this.initializeImage=function(){var de=(0,v.Z)(T().mark(function ke(Oe){var He,Te,Ce,Xe,Je,ct,yt,wt,kt,en,wn,In,qn,cr,Nr;return T().wrap(function(Jn){for(;;)switch(Jn.prev=Jn.next){case 0:if(Xe=Oe.imageFile,Je=Oe.imageElement,ct=Oe.showCursorImagePreview,yt=ct!==void 0&&ct,(0,$n.Wr)(Xe)){Jn.next=3;break}throw new Error((0,D.t)("errors.unsupportedFileType"));case 3:if(wt=Xe.type,(0,R.KJ)(O.canvas,"wait"),wt!==Y.LO.svg){Jn.next=23;break}return Jn.prev=6,Jn.t0=$n.Pn,Jn.t1=qs.bp,Jn.next=11,Xe.text();case 11:return Jn.t2=Jn.sent,Jn.next=14,(0,Jn.t1)(Jn.t2);case 14:Jn.t3=Jn.sent,Jn.t4=Xe.name,Xe=(0,Jn.t0)(Jn.t3,Jn.t4),Jn.next=23;break;case 19:throw Jn.prev=19,Jn.t5=Jn.catch(6),console.warn(Jn.t5),new Error((0,D.t)("errors.svgImageInsertError"));case 23:return Jn.next=25,((He=(Te=O.props).generateIdForFile)===null||He===void 0?void 0:He.call(Te,Xe))||(0,$n.tW)(Xe);case 25:if(kt=Jn.sent){Jn.next=29;break}throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error((0,D.t)("errors.imageInsertError"));case 29:if((en=O.files[kt])!=null&&en.dataURL){Jn.next=42;break}return Jn.prev=31,Jn.next=34,(0,$n.Tu)(Xe,{maxWidthOrHeight:Y.h6});case 34:Xe=Jn.sent,Jn.next=40;break;case 37:Jn.prev=37,Jn.t6=Jn.catch(31),console.error("error trying to resing image file on insertion",Jn.t6);case 40:if(!(Xe.size>Y.$n)){Jn.next=42;break}throw new Error((0,D.t)("errors.fileTooBig",{maxSize:"".concat(Math.trunc(Y.$n/1024/1024),"MB")}));case 42:if(yt&&(In=(wn=O.files[kt])===null||wn===void 0?void 0:wn.dataURL,qn=In&&(0,$n.KG)(In),O.setImagePreviewCursor(qn||Xe)),Jn.t7=(Ce=O.files[kt])===null||Ce===void 0?void 0:Ce.dataURL,Jn.t7){Jn.next=48;break}return Jn.next=47,(0,$n.Sf)(Xe);case 47:Jn.t7=Jn.sent;case 48:return cr=Jn.t7,Nr=(0,H.DR)(Je,{fileId:kt},!1),Jn.abrupt("return",new Promise(function(){var Lr=(0,v.Z)(T().mark(function qr(gr,Vr){var co,qo;return T().wrap(function(Wo){for(;;)switch(Wo.prev=Wo.next){case 0:if(Wo.prev=0,O.files=En(En({},O.files),{},(0,I.Z)({},kt,{mimeType:wt,id:kt,dataURL:cr,created:Date.now(),lastRetrieved:Date.now()})),qo=O.imageCache.get(kt)){Wo.next=7;break}return O.addNewImagesToImageCache(),Wo.next=7,O.updateImageCache([Nr]);case 7:if(!((qo==null?void 0:qo.image)instanceof Promise)){Wo.next=10;break}return Wo.next=10,qo.image;case 10:O.state.pendingImageElementId!==Nr.id&&((co=O.state.draggingElement)===null||co===void 0?void 0:co.id)!==Nr.id&&O.initializeImageDimensions(Nr,!0),gr(Nr),Wo.next=18;break;case 14:Wo.prev=14,Wo.t0=Wo.catch(0),console.error(Wo.t0),Vr(new Error((0,D.t)("errors.imageInsertError")));case 18:return Wo.prev=18,yt||(0,R.z8)(O.canvas),Wo.finish(18);case 21:case"end":return Wo.stop()}},qr,null,[[0,14,18,21]])}));return function(qr,gr){return Lr.apply(this,arguments)}}()));case 51:case"end":return Jn.stop()}},ke,null,[[6,19],[31,37]])}));return function(ke){return de.apply(this,arguments)}}(),this.insertImageElement=function(){var de=(0,v.Z)(T().mark(function ke(Oe,He,Te){return T().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return O.scene.addNewElement(Oe),Ce.prev=1,Ce.next=4,O.initializeImage({imageFile:He,imageElement:Oe,showCursorImagePreview:Te});case 4:Ce.next=11;break;case 6:Ce.prev=6,Ce.t0=Ce.catch(1),(0,H.DR)(Oe,{isDeleted:!0}),O.actionManager.executeAction(ie.pL),O.setState({errorMessage:Ce.t0.message||(0,D.t)("errors.imageInsertError")});case 11:case"end":return Ce.stop()}},ke,null,[[1,6]])}));return function(ke,Oe,He){return de.apply(this,arguments)}}(),this.setImagePreviewCursor=function(){var de=(0,v.Z)(T().mark(function ke(Oe){var He,Te,Ce,Xe,Je,ct,yt;return T().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return He=96,wt.next=3,(0,$n.Tu)(Oe,{maxWidthOrHeight:He});case 3:return Te=wt.sent,wt.next=6,(0,$n.Sf)(Te);case 6:if(Ce=wt.sent,Oe.type!==Y.LO.svg){wt.next=20;break}return wt.next=10,(0,qs.PK)(Ce);case 10:Xe=wt.sent,Je=Math.min(Xe.height,He),(ct=Je*(Xe.width/Xe.height))>He&&(Je=(ct=He)*(Xe.height/Xe.width)),(yt=document.createElement("canvas")).height=Je,yt.width=ct,yt.getContext("2d").drawImage(Xe,0,0,ct,Je),Ce=yt.toDataURL(Y.LO.svg);case 20:O.state.pendingImageElementId&&(0,R.KJ)(O.canvas,"url(".concat(Ce,") 4 4, auto"));case 21:case"end":return wt.stop()}},ke)}));return function(ke){return de.apply(this,arguments)}}(),this.onImageAction=(0,v.Z)(T().mark(function de(){var ke,Oe,He,Te,Ce,Xe,Je,ct,yt,wt=arguments;return T().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return ke=wt.length>0&&wt[0]!==void 0?wt[0]:{insertOnCanvasDirectly:!1},Oe=ke.insertOnCanvasDirectly,kt.prev=1,He=O.state.width/2+O.state.offsetLeft,Te=O.state.height/2+O.state.offsetTop,Ce=(0,R.dE)({clientX:He,clientY:Te},O.state),Xe=Ce.x,Je=Ce.y,kt.next=7,(0,Kn.I$)({description:"Image",extensions:Object.keys(Y.KL)});case 7:ct=kt.sent,yt=O.createImageElement({sceneX:Xe,sceneY:Je}),Oe?(O.insertImageElement(yt,ct),O.initializeImageDimensions(yt),O.setState({selectedElementIds:(0,I.Z)({},yt.id,!0)},function(){O.actionManager.executeAction(ie.pL)})):O.setState({pendingImageElementId:yt.id},function(){O.insertImageElement(yt,ct,!0)}),kt.next=16;break;case 12:kt.prev=12,kt.t0=kt.catch(1),kt.t0.name!=="AbortError"?console.error(kt.t0):console.warn(kt.t0),O.setState({pendingImageElementId:null,editingElement:null,activeTool:(0,R.Om)(O.state,{type:"selection"})},function(){O.actionManager.executeAction(ie.pL)});case 16:case"end":return kt.stop()}},de,null,[[1,12]])})),this.initializeImageDimensions=function(de){var ke,Oe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],He=(0,X.wi)(de)&&((ke=O.imageCache.get(de.fileId))===null||ke===void 0?void 0:ke.image);if(!He||He instanceof Promise){if(de.width<Y.f/O.state.zoom.value&&de.height<Y.f/O.state.zoom.value){var Te=100/O.state.zoom.value;(0,H.DR)(de,{x:de.x-Te/2,y:de.y-Te/2,width:Te,height:Te})}}else if(Oe||de.width<Y.f/O.state.zoom.value&&de.height<Y.f/O.state.zoom.value){var Ce=Math.max(O.state.height-120,160),Xe=Math.min(Ce,Math.floor(.5*O.state.height)/O.state.zoom.value),Je=Math.min(He.naturalHeight,Xe),ct=Je*(He.naturalWidth/He.naturalHeight),yt=de.x+de.width/2-ct/2,wt=de.y+de.height/2-Je/2;(0,H.DR)(de,{x:yt,y:wt,width:ct,height:Je})}},this.updateImageCache=function(){var de=(0,v.Z)(T().mark(function ke(Oe){var He,Te,Ce,Xe,Je,ct,yt,wt=arguments;return T().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return He=wt.length>1&&wt[1]!==void 0?wt[1]:O.files,kt.next=3,(0,qs.Xx)({imageCache:O.imageCache,fileIds:Oe.map(function(en){return en.fileId}),files:He});case 3:if(Te=kt.sent,Ce=Te.updatedFiles,Xe=Te.erroredFiles,Ce.size||Xe.size){Je=uf(Oe);try{for(Je.s();!(ct=Je.n()).done;)yt=ct.value,Ce.has(yt.fileId)&&(0,We.bI)(yt)}catch(en){Je.e(en)}finally{Je.f()}}return Xe.size&&O.scene.replaceAllElements(O.scene.getElementsIncludingDeleted().map(function(en){return(0,X.wi)(en)&&Xe.has(en.fileId)?(0,H.BE)(en,{status:"error"}):en})),kt.abrupt("return",{updatedFiles:Ce,erroredFiles:Xe});case 9:case"end":return kt.stop()}},ke)}));return function(ke){return de.apply(this,arguments)}}(),this.addNewImagesToImageCache=(0,v.Z)(T().mark(function de(){var ke,Oe,He,Te,Ce=arguments;return T().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(ke=Ce.length>0&&Ce[0]!==void 0?Ce[0]:(0,qs.oA)(O.scene.getNonDeletedElements()),Oe=Ce.length>1&&Ce[1]!==void 0?Ce[1]:O.files,!(He=ke.filter(function(Je){return!Je.isDeleted&&!O.imageCache.has(Je.fileId)})).length){Xe.next=9;break}return Xe.next=6,O.updateImageCache(He,Oe);case 6:Te=Xe.sent,Te.updatedFiles.size&&O.scene.informMutation();case 9:case"end":return Xe.stop()}},de)})),this.scheduleImageRefresh=y0()(function(){O.addNewImagesToImageCache()},Y.LL),this.updateBindingEnabledOnPointerMove=function(de){var ke=(0,V.cz)(de);O.state.isBindingEnabled!==ke&&O.setState({isBindingEnabled:ke})},this.maybeSuggestBindingAtCursor=function(de){var ke=(0,V.Y9)(de,O.scene);O.setState({suggestedBindings:ke!=null?[ke]:[]})},this.maybeSuggestBindingsForLinearElementAtCoords=function(de,ke,Oe){if(ke.length){var He=ke.reduce(function(Te,Ce){var Xe=(0,V.Y9)(Ce,O.scene);return Xe==null||(0,V.DK)(de,Oe==null?void 0:Oe.id,Xe)||Te.push(Xe),Te},[]);O.setState({suggestedBindings:He})}},this.handleCanvasRef=function(de){var ke,Oe,He;de!==null?(O.canvas=de,O.rc=ee.Z.canvas(O.canvas),O.canvas.addEventListener(Y.Ks.WHEEL,O.handleWheel,{passive:!1}),O.canvas.addEventListener(Y.Ks.TOUCH_START,O.onTapStart),O.canvas.addEventListener(Y.Ks.TOUCH_END,O.onTapEnd)):((ke=O.canvas)===null||ke===void 0||ke.removeEventListener(Y.Ks.WHEEL,O.handleWheel),(Oe=O.canvas)===null||Oe===void 0||Oe.removeEventListener(Y.Ks.TOUCH_START,O.onTapStart),(He=O.canvas)===null||He===void 0||He.removeEventListener(Y.Ks.TOUCH_END,O.onTapEnd))},this.handleAppOnDrop=function(){var de=(0,v.Z)(T().mark(function ke(Oe){var He,Te,Ce,Xe,Je,ct,yt,wt,kt,en;return T().wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:return wn.next=2,(0,$n.bv)(Oe);case 2:if(He=wn.sent,Te=He.file,Ce=He.fileHandle,wn.prev=5,!(0,$n.Wr)(Te)){wn.next=26;break}if((Te==null?void 0:Te.type)!==Y.LO.png&&(Te==null?void 0:Te.type)!==Y.LO.svg){wn.next=20;break}return wn.prev=8,wn.next=11,(0,re.cT)(Te,O.state,O.scene.getElementsIncludingDeleted(),Ce);case 11:return Xe=wn.sent,O.syncActionResult(En(En({},Xe),{},{appState:En(En({},Xe.appState||O.state),{},{isLoading:!1}),replaceFiles:!0,commitToHistory:!0})),wn.abrupt("return");case 16:if(wn.prev=16,wn.t0=wn.catch(8),wn.t0.name==="EncodingError"){wn.next=20;break}throw wn.t0;case 20:return Je=(0,R.dE)(Oe,O.state),ct=Je.x,yt=Je.y,wt=O.createImageElement({sceneX:ct,sceneY:yt}),O.insertImageElement(wt,Te),O.initializeImageDimensions(wt),O.setState({selectedElementIds:(0,I.Z)({},wt.id,!0)}),wn.abrupt("return");case 26:wn.next=31;break;case 28:return wn.prev=28,wn.t1=wn.catch(5),wn.abrupt("return",O.setState({isLoading:!1,errorMessage:wn.t1.message}));case 31:if(!(kt=Oe.dataTransfer.getData(Y.LO.excalidrawlib))||typeof kt!="string"){wn.next=35;break}try{en=(0,$n.wf)(kt),O.addElementsFromPasteOrLibrary({elements:(0,ae.WV)(en),position:Oe,files:null})}catch(In){O.setState({errorMessage:In.message})}return wn.abrupt("return");case 35:if(!Te){wn.next=38;break}return wn.next=38,O.loadFileToCanvas(Te,Ce);case 38:case"end":return wn.stop()}},ke,null,[[5,28],[8,16]])}));return function(ke){return de.apply(this,arguments)}}(),this.loadFileToCanvas=function(){var de=(0,v.Z)(T().mark(function ke(Oe,He){var Te;return T().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,$n.gY)(Oe);case 2:return Oe=Ce.sent,Ce.prev=3,Ce.next=6,(0,$n.ZY)(Oe,O.state,O.scene.getElementsIncludingDeleted(),He);case 6:if((Te=Ce.sent).type!==Y.LO.excalidraw){Ce.next=12;break}O.setState({isLoading:!0}),O.syncActionResult(En(En({},Te.data),{},{appState:En(En({},Te.data.appState||O.state),{},{isLoading:!1}),replaceFiles:!0,commitToHistory:!0})),Ce.next=15;break;case 12:if(Te.type!==Y.LO.excalidrawlib){Ce.next=15;break}return Ce.next=15,O.library.updateLibrary({libraryItems:Oe,merge:!0,openLibraryMenu:!0}).catch(function(Xe){console.error(Xe),O.setState({errorMessage:(0,D.t)("errors.importLibraryError")})});case 15:Ce.next=20;break;case 17:Ce.prev=17,Ce.t0=Ce.catch(3),O.setState({isLoading:!1,errorMessage:Ce.t0.message});case 20:case"end":return Ce.stop()}},ke,null,[[3,17]])}));return function(ke,Oe){return de.apply(this,arguments)}}(),this.handleCanvasContextMenu=function(de){if(de.preventDefault(),de.nativeEvent.pointerType!=="touch"&&(de.nativeEvent.pointerType!=="pen"||de.button===Y.Oh.SECONDARY)||O.state.activeTool.type==="selection"){var ke=(0,R.dE)(de,O.state),Oe=ke.x,He=ke.y,Te=O.getElementAtPosition(Oe,He,{preferSelected:!0,includeLockedElements:!0}),Ce=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state),Xe=O.isHittingCommonBoundingBoxOfSelectedElements({x:Oe,y:He},Ce),Je=Te||Xe?"element":"canvas",ct=O.excalidrawContainerRef.current.getBoundingClientRect(),yt=ct.top,wt=ct.left,kt=de.clientX-wt,en=de.clientY-yt;(0,q.L)("contextMenu","openContextMenu",Je),O.setState(En(En({},Te&&!O.state.selectedElementIds[Te.id]?(0,ye.bO)(En(En({},O.state),{},{selectedElementIds:(0,I.Z)({},Te.id,!0),selectedLinearElement:(0,X.bt)(Te)?new se._(Te,O.scene):null}),O.scene.getNonDeletedElements()):O.state),{},{showHyperlinkPopup:!1}),function(){O.setState({contextMenu:{top:en,left:kt,items:O.getContextMenuItems(Je)}})})}},this.maybeDragNewGenericElement=function(de,ke){var Oe=O.state.draggingElement,He=de.lastCoords;if(Oe)if(Oe.type==="selection"&&O.state.activeTool.type!=="eraser")(0,he.EJ)(Oe,O.state.activeTool.type,de.origin.x,de.origin.y,He.x,He.y,(0,R.TE)(de.origin.x,He.x),(0,R.TE)(de.origin.y,He.y),(0,B.E0)(ke),(0,B.OA)(ke));else{var Te,Ce=(0,Me.wC)(He.x,He.y,O.state.gridSize),Xe=(0,m.Z)(Ce,2),Je=Xe[0],ct=Xe[1],yt=(0,X.wi)(Oe)&&((Te=O.imageCache.get(Oe.fileId))===null||Te===void 0?void 0:Te.image),wt=!yt||yt instanceof Promise?null:yt.width/yt.height;(0,he.EJ)(Oe,O.state.activeTool.type,de.originInGrid.x,de.originInGrid.y,Je,ct,(0,R.TE)(de.originInGrid.x,Je),(0,R.TE)(de.originInGrid.y,ct),(0,X.pC)(Oe)?!(0,B.E0)(ke):(0,B.E0)(ke),(0,B.OA)(ke),wt),O.maybeSuggestBindingForAll([Oe]),O.state.activeTool.type==="frame"&&O.setState({elementsToHighlight:(0,qi.ni)(O.scene.getNonDeletedElements(),Oe,O.state)})}},this.maybeHandleResize=function(de,ke){var Oe=(0,Se.eD)(O.scene.getNonDeletedElements(),O.state),He=Oe.filter(function(en){return en.type==="frame"}),Te=de.resize.handleType;if(He.length>0&&Te==="rotation")return!1;O.setState({isResizing:Te&&Te!=="rotation",isRotating:Te==="rotation"});var Ce=de.lastCoords,Xe=(0,Me.wC)(Ce.x-de.resize.offset.x,Ce.y-de.resize.offset.y,O.state.gridSize),Je=(0,m.Z)(Xe,2),ct=Je[0],yt=Je[1],wt=new Map;if(He.forEach(function(en){(0,qi.wO)(O.scene.getNonDeletedElements(),en.id).forEach(function(wn){wt.set(en.id+wn.id,{x:wn.x-en.x,y:wn.y-en.y})})}),(0,he.vY)(de,Te,Oe,de.resize.arrowDirection,(0,B.Ge)(ke),(0,B.OA)(ke),Oe.length===1&&(0,X.pC)(Oe[0])?!(0,B.E0)(ke):(0,B.E0)(ke),ct,yt,de.resize.center.x,de.resize.center.y)){O.maybeSuggestBindingForAll(Oe);var kt=new Set;return He.forEach(function(en){var wn=(0,qi.wO)(O.scene.getNonDeletedElements(),en.id);Te&&(Te.includes("w")&&wn.forEach(function(In){var qn,cr;(0,H.DR)(In,{x:en.x+(((qn=wt.get(en.id+In.id))===null||qn===void 0?void 0:qn.x)||0),y:en.y+(((cr=wt.get(en.id+In.id))===null||cr===void 0?void 0:cr.y)||0)})}),Te.includes("n")&&wn.forEach(function(In){var qn,cr;(0,H.DR)(In,{x:en.x+(((qn=wt.get(en.id+In.id))===null||qn===void 0?void 0:qn.x)||0),y:en.y+(((cr=wt.get(en.id+In.id))===null||cr===void 0?void 0:cr.y)||0)})})),(0,qi.ni)(O.scene.getNonDeletedElements(),en,O.state).forEach(function(In){return kt.add(In)})}),O.setState({elementsToHighlight:(0,b.Z)(kt)}),!0}return!1},this.getContextMenuItems=function(de){var ke=[];return ke.push(ie.jK,ie.FA),de==="canvas"?O.state.viewModeEnabled?[].concat(ke,[ie.Pb,ie.JN,lf,ie.u0]):[cf.yQ,st,ie.jK,ie.FA,ie.zp,st,ie.Yy,Sd.U,st,ie.Pb,ie.JN,lf,ie.u0]:(ke.push(ie.zp),O.state.viewModeEnabled?[ie.uN].concat(ke):[ie.ZM,ie.uN,cf.yQ,df,o2,st].concat(ke,[st,ie.pw,ie.W3,st,ie.EQ,ie.y7,ie.vD,i2.JQ,ie.s,st,ie.FL,st,ie.V,ie.yA,ie.zi,ie.BZ,st,ie.jl,ie.kt,st,ie.Qs,ie.nz,ie.xF,ie.$h,st,ie.X9]))},this.handleWheel=(0,R.tH)(function(de){if(de.preventDefault(),!Pn){var ke=de.deltaX,Oe=de.deltaY;if(de.metaKey||de.ctrlKey){var He=Math.sign(Oe),Te=100*Y.V4,Ce=Math.abs(Oe),Xe=Oe;Ce>Te&&(Xe=Te*He);var Je=O.state.zoom.value-Xe/100;return Je+=Math.log10(Math.max(1,O.state.zoom.value))*-He*Math.min(1,Ce/20),O.translateCanvas(function(ct){return En(En({},(0,_e.E)({viewportX:O.lastViewportPosition.x,viewportY:O.lastViewportPosition.y,nextZoom:(0,Se.j)(Je)},ct)),{},{shouldCacheIgnoreZoom:!0})}),void O.resetShouldCacheIgnoreZoomDebounced()}de.shiftKey?O.translateCanvas(function(ct){var yt=ct.zoom;return{scrollX:ct.scrollX-(Oe||ke)/yt.value}}):O.translateCanvas(function(ct){var yt=ct.zoom,wt=ct.scrollX,kt=ct.scrollY;return{scrollX:wt-ke/yt.value,scrollY:kt-Oe/yt.value}})}}),this.savePointer=function(de,ke,Oe){var He,Te;if(de&&ke){var Ce=(0,R.dE)({clientX:de,clientY:ke},O.state);isNaN(Ce.x)||isNaN(Ce.y),(He=(Te=O.props).onPointerUpdate)===null||He===void 0||He.call(Te,{pointer:Ce,button:Oe,pointersMap:nr.pointers})}},this.resetShouldCacheIgnoreZoomDebounced=(0,R.Ds)(function(){O.unmounted||O.setState({shouldCacheIgnoreZoom:!1})},300),this.updateDOMRect=function(de){var ke;if((ke=O.excalidrawContainerRef)!==null&&ke!==void 0&&ke.current){var Oe=O.excalidrawContainerRef.current.getBoundingClientRect(),He=Oe.width,Te=Oe.height,Ce=Oe.left,Xe=Oe.top,Je=O.state,ct=Je.width,yt=Je.height,wt=Je.offsetTop,kt=Je.offsetLeft;if(He===ct&&Te===yt&&Ce===kt&&Xe===wt)return void(de&&de());O.setState({width:He,height:Te,offsetLeft:Ce,offsetTop:Xe},function(){de&&de()})}},this.refresh=function(){O.setState(En({},O.getCanvasOffsets()))}};Y.Vi.TEST!=="production"&&Y.Vi.DEVELOPMENT!=="production"||(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get:function(){var O;return(O=this.app)===null||O===void 0?void 0:O.scene.getElementsIncludingDeleted()},set:function(O){var de;return(de=this.app)===null||de===void 0?void 0:de.scene.replaceAllElements(O)}}}));var bo=oo},7172:function(f,h,c){c.d(h,{z:function(){return D}});var g=c(7169),m=c(2726),b=c(9076),v=c(6340),w=c(487),_=c.n(w),k=c(631),y=c.n(k),S=c(2052),C=c.n(S),I=c(4010),A=c.n(I),T=c(1469),L=c.n(T),j=c(9329),$=c.n(j),ee=c(3137),Q={};Q.styleTagTransform=$(),Q.setAttributes=A(),Q.insert=C().bind(null,"head"),Q.domAPI=y(),Q.insertStyleElement=L(),_()(ee.Z,Q),ee.Z&&ee.Z.locals&&ee.Z.locals;var pe=c(9980),ie=["type","onSelect","selected","children","className"];function te(B,H){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(B);H&&(R=R.filter(function(Y){return Object.getOwnPropertyDescriptor(B,Y).enumerable})),V.push.apply(V,R)}return V}function Z(B){for(var H=1;H<arguments.length;H++){var V=arguments[H]!=null?arguments[H]:{};H%2?te(Object(V),!0).forEach(function(R){(0,g.Z)(B,R,V[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):te(Object(V)).forEach(function(R){Object.defineProperty(B,R,Object.getOwnPropertyDescriptor(V,R))})}return B}var D=function(B){var H=B.type,V=H===void 0?"button":H,R=B.onSelect,Y=B.selected,E=B.children,W=B.className,F=W===void 0?"":W,z=(0,m.Z)(B,ie);return(0,pe.jsx)("button",Z(Z({onClick:(0,v.Mj)(z.onClick,function(q){R()}),type:V,className:(0,b.Z)("excalidraw-button",F,{selected:Y})},z),{},{children:E}))}},3807:function(f,h,c){c.d(h,{o:function(){return Q}});var g=c(9076),m=c(3646),b=c(487),v=c.n(b),w=c(631),_=c.n(w),k=c(2052),y=c.n(k),S=c(4010),C=c.n(S),I=c(1469),A=c.n(I),T=c(9329),L=c.n(T),j=c(6029),$={};$.styleTagTransform=L(),$.setAttributes=C(),$.insert=y().bind(null,"head"),$.domAPI=_(),$.insertStyleElement=A(),v()(j.Z,$),j.Z&&j.Z.locals&&j.Z.locals;var ee=c(9980),Q=function(pe){var ie=pe.children,te=pe.checked,Z=pe.onChange,D=pe.className;return(0,ee.jsxs)("div",{className:(0,g.Z)("Checkbox",D,{"is-checked":te}),onClick:function(B){Z(!te,B),B.currentTarget.querySelector(".Checkbox-box").focus()},children:[(0,ee.jsx)("button",{className:"Checkbox-box",role:"checkbox","aria-checked":te,children:m.eQ}),(0,ee.jsx)("div",{className:"Checkbox-label",children:ie})]})}},2508:function(f,h,c){c.d(h,{z:function(){return eh},L:function(){return Ol}});var g=c(2577),m=c(6340),b=c(9076),v=c(56),w=c(9980),_=function($e){var Qe,nt=$e.onChange,lt=$e.type,Ct=$e.activeColor,Mt=$e.topPicks;return lt==="elementStroke"&&(Qe=v.fY),lt==="elementBackground"&&(Qe=v.eq),lt==="canvasBackground"&&(Qe=v.ay),Mt&&(Qe=Mt),Qe?(0,w.jsx)("div",{className:"color-picker__top-picks",children:Qe.map(function(Bt){return(0,w.jsx)("button",{className:(0,b.Z)("color-picker__button",{active:Bt===Ct,"is-transparent":Bt==="transparent"||!Bt}),style:{"--swatch-color":Bt},type:"button",title:Bt,onClick:function(){return nt(Bt)},children:(0,w.jsx)("div",{className:"color-picker__button-outline"})},Bt)})}):(console.error("Invalid type for TopPicks"),null)},k=c(9787),y=c.n(k),S=c(8211),C=c(6274),I=c(1930),A=function($e){for(var Qe=$e.palette,nt=$e.color,lt=0,Ct=Object.entries(Qe);lt<Ct.length;lt++){var Mt=(0,g.Z)(Ct[lt],2),Bt=Mt[0],Pt=Mt[1];if(Array.isArray(Pt)){var gn=Pt.indexOf(nt);if(gn>-1)return{colorName:Bt,shade:gn}}else if(Pt===nt)return{colorName:Bt,shade:null}}return null},T=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),L=function($e){var Qe=$e.color,nt=$e.palette;return!Object.values(nt).flat().includes(Qe)},j=(0,C.cn)(null),$=function($e,Qe,nt){return(299*$e+587*Qe+114*nt)/1e3>=160?"black":"white"},ee=function($e,Qe){if(Qe){var nt=new Option().style;if(nt.color=$e,nt.color){var lt=nt.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),Ct=parseInt(lt[0]),Mt=parseInt(lt[1]),Bt=parseInt(lt[2]);return $(Ct,Mt,Bt)}}if($e==="transparent")return"black";var Pt=parseInt($e.substring(1,3),16),gn=parseInt($e.substring(3,5),16),Bn=parseInt($e.substring(5,7),16);return $(Pt,gn,Bn)},Q=function($e){var Qe=$e.color,nt=$e.keyLabel,lt=$e.isCustomColor,Ct=lt!==void 0&&lt,Mt=$e.isShade,Bt=Mt!==void 0&&Mt;return(0,w.jsxs)("div",{className:"color-picker__button__hotkey-label",style:{color:ee(Qe,Ct)},children:[Bt&&"",nt]})},pe=function($e){var Qe=$e.hex,nt=$e.onChange,lt=$e.palette,Ct=A({color:Qe||"transparent",palette:lt}),Mt=(0,C.KO)(j),Bt=(0,g.Z)(Mt,2),Pt=Bt[0],gn=Bt[1],Bn=(0,k.useRef)(null);if((0,k.useEffect)(function(){Bn.current&&Pt==="shades"&&Bn.current.focus()},[Ct,Pt]),Ct){var Pn=Ct.colorName,ln=Ct.shade,Xn=lt[Pn];if(Array.isArray(Xn))return(0,w.jsx)("div",{className:"color-picker-content--default shades",children:Xn.map(function(Mn,Qn){return(0,w.jsxs)("button",{ref:Qn===ln&&Pt==="shades"?Bn:void 0,tabIndex:-1,type:"button",className:(0,b.Z)("color-picker__button color-picker__button--large",{active:Qn===ln}),"aria-label":"Shade",title:"".concat(Pn," - ").concat(Qn+1),style:Mn?{"--swatch-color":Mn}:void 0,onClick:function(){nt(Mn),gn("shades")},children:[(0,w.jsx)("div",{className:"color-picker__button-outline"}),(0,w.jsx)(Q,{color:Mn,keyLabel:Qn+1,isShade:!0})]},Qn)})})}return(0,w.jsxs)("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[(0,w.jsx)("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),(0,w.jsx)("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:(0,S.t)("colorPicker.noShades")})]})},ie=function($e){var Qe=$e.palette,nt=$e.color,lt=$e.onChange,Ct=($e.label,$e.activeShade),Mt=A({color:nt||"transparent",palette:Qe}),Bt=(0,C.KO)(j),Pt=(0,g.Z)(Bt,2),gn=Pt[0],Bn=Pt[1],Pn=(0,k.useRef)(null);return(0,k.useEffect)(function(){Pn.current&&gn==="baseColors"&&Pn.current.focus()},[Mt==null?void 0:Mt.colorName,gn]),(0,w.jsx)("div",{className:"color-picker-content--default",children:Object.entries(Qe).map(function(ln,Xn){var Mn=(0,g.Z)(ln,2),Qn=Mn[0],Sn=Mn[1],Yn=(Array.isArray(Sn)?Sn[Ct]:Sn)||"transparent",kr=T[Xn],Pr=(0,S.t)("colors.".concat(Qn.replace(/\d+/,"")),null,"");return(0,w.jsxs)("button",{ref:(Mt==null?void 0:Mt.colorName)===Qn?Pn:void 0,tabIndex:-1,type:"button",className:(0,b.Z)("color-picker__button color-picker__button--large",{active:(Mt==null?void 0:Mt.colorName)===Qn,"is-transparent":Yn==="transparent"||!Yn}),onClick:function(){lt(Yn),Bn("baseColors")},title:"".concat(Pr).concat(Yn.startsWith("#")?" ".concat(Yn):"","  ").concat(kr),"aria-label":"".concat(Pr,"  ").concat(kr),style:Yn?{"--swatch-color":Yn}:void 0,"data-testid":"color-".concat(Qn),children:[(0,w.jsx)("div",{className:"color-picker__button-outline"}),(0,w.jsx)(Q,{color:Yn,keyLabel:kr})]},Qn)})})},te=function($e){var Qe=$e.colors,nt=$e.color,lt=$e.onChange,Ct=$e.label,Mt=(0,C.KO)(j),Bt=(0,g.Z)(Mt,2),Pt=Bt[0],gn=Bt[1],Bn=(0,k.useRef)(null);return(0,k.useEffect)(function(){Bn.current&&Bn.current.focus()},[nt,Pt]),(0,w.jsx)("div",{className:"color-picker-content--default",children:Qe.map(function(Pn,ln){return(0,w.jsxs)("button",{ref:nt===Pn?Bn:void 0,tabIndex:-1,type:"button",className:(0,b.Z)("color-picker__button color-picker__button--large",{active:nt===Pn,"is-transparent":Pn==="transparent"||!Pn}),onClick:function(){lt(Pn),gn("custom")},title:Pn,"aria-label":Ct,style:{"--swatch-color":Pn},children:[(0,w.jsx)("div",{className:"color-picker__button-outline"}),(0,w.jsx)(Q,{color:Pn,keyLabel:ln+1,isCustomColor:!0})]},ln)})})},Z=c(6066),D=function($e,Qe,nt){var lt,Ct=Math.ceil(nt/v.dC);switch(Qe=(lt=Qe)!==null&&lt!==void 0?lt:-1,$e){case"ArrowLeft":var Mt=Qe-1;return Mt<0?nt-1:Mt;case"ArrowRight":return(Qe+1)%nt;case"ArrowDown":var Bt=Qe+v.dC;return Bt>=nt?Qe%v.dC:Bt;case"ArrowUp":var Pt=Qe-v.dC,gn=Pt<0?v.dC*Ct+Pt:Pt;return gn>=nt?void 0:gn}},B=function($e){var Qe=$e.event,nt=$e.activeColorPickerSection,lt=$e.palette,Ct=$e.color,Mt=$e.onChange,Bt=$e.customColors,Pt=$e.setActiveColorPickerSection,gn=($e.updateData,$e.activeShade),Bn=$e.onEyeDropperToggle,Pn=$e.onEscape;if(Qe[Z.tW.CTRL_OR_CMD])return!1;if(Qe.key===Z.tW.ESCAPE)return Pn(Qe),!0;if(Qe.key===Z.tW.ALT)return Bn(!0),!0;if(Qe.key===Z.tW.I)return Bn(),!0;var ln=A({color:Ct,palette:lt});if(Qe.key===Z.tW.TAB){var Xn={custom:!!Bt.length,baseColors:!0,shades:(ln==null?void 0:ln.shade)!=null,hex:!0},Mn=Object.entries(Xn).reduce(function(ke,Oe){var He=(0,g.Z)(Oe,2),Te=He[0];return He[1]&&ke.push(Te),ke},[]),Qn=Mn.indexOf(nt),Sn=Qe.shiftKey?-1:1,Yn=Mn[Qn+Sn>Mn.length-1?0:Qn+Sn<0?Mn.length-1:Qn+Sn];return Yn&&Pt(Yn),Yn==="custom"?Mt(Bt[0]):Yn==="baseColors"&&(Object.entries(lt).find(function(ke){var Oe=(0,g.Z)(ke,2),He=Oe[0],Te=Oe[1];return Array.isArray(Te)?Te.includes(Ct):Te===Ct?He:null})||Mt(v.HO.black)),Qe.preventDefault(),Qe.stopPropagation(),!0}if(function(ke){var Oe=ke.e,He=ke.colorObj,Te=ke.onChange,Ce=ke.palette,Xe=ke.customColors,Je=ke.setActiveColorPickerSection,ct=ke.activeShade;if((He==null?void 0:He.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(Oe.code)&&Oe.shiftKey){var yt=Number(Oe.code.slice(-1))-1;return Te(Ce[He.colorName][yt]),Je("shades"),!0}if(["1","2","3","4","5"].includes(Oe.key)&&Xe[Number(Oe.key)-1])return Te(Xe[Number(Oe.key)-1]),Je("custom"),!0;if(T.includes(Oe.key)){var wt=T.indexOf(Oe.key),kt=Ce[Object.keys(Ce)[wt]];return Te(Array.isArray(kt)?kt[ct]:kt),Je("baseColors"),!0}return!1}({e:Qe,colorObj:ln,onChange:Mt,palette:lt,customColors:Bt,setActiveColorPickerSection:Pt,activeShade:gn}))return!0;if(nt==="shades"&&ln){var kr=ln.shade,Pr=D(Qe.key,kr,v.dC);if(Pr!==void 0)return Mt(lt[ln.colorName][Pr]),!0}if(nt==="baseColors"&&ln){var Sr=ln.colorName,nr=Object.keys(lt),oo=nr.indexOf(Sr),to=D(Qe.key,oo,nr.length);if(to!==void 0){var bo=lt[nr[to]];return Mt(Array.isArray(bo)?bo[gn]:bo),!0}}if(nt==="custom"){var O=Bt.indexOf(Ct),de=D(Qe.key,O,Bt.length);if(de!==void 0)return Mt(Bt[de]),!0}return!1},H=function($e){var Qe=$e.children;return(0,w.jsx)("div",{className:"color-picker__heading",children:Qe})},V=c(2335),R=function($e){var Qe,nt=$e.color,lt=$e.onChange,Ct=$e.label,Mt=$e.type,Bt=$e.elements,Pt=$e.palette,gn=$e.updateData,Bn=$e.children,Pn=$e.onEyeDropperToggle,ln=$e.onEscape,Xn=y().useState(function(){return Mt==="canvasBackground"?[]:function(O,de,ke){var Oe={elementBackground:"backgroundColor",elementStroke:"strokeColor"},He=O.filter(function(Ce){if(Ce.isDeleted)return!1;var Xe=Ce[Oe[de]];return L({color:Xe,palette:ke})}),Te=new Map;return He.forEach(function(Ce){var Xe=Ce[Oe[de]];Te.has(Xe)?Te.set(Xe,Te.get(Xe)+1):Te.set(Xe,1)}),(0,I.Z)(Te.entries()).sort(function(Ce,Xe){return Xe[1]-Ce[1]}).map(function(Ce){return Ce[0]}).slice(0,v.Lx)}(Bt,Mt,Pt)}),Mn=(0,g.Z)(Xn,1)[0],Qn=(0,C.KO)(j),Sn=(0,g.Z)(Qn,2),Yn=Sn[0],kr=Sn[1],Pr=A({color:nt,palette:Pt});(0,k.useEffect)(function(){if(!Yn){var O=L({color:nt,palette:Pt}),de=O&&!Mn.includes(nt);kr(de?"hex":O?"custom":(Pr==null?void 0:Pr.shade)!=null?"shades":"baseColors")}},[Yn,nt,Pt,kr,Pr,Mn]);var Sr=(0,k.useState)((Qe=Pr==null?void 0:Pr.shade)!==null&&Qe!==void 0?Qe:Mt==="elementBackground"?v._T:v.z8),nr=(0,g.Z)(Sr,2),oo=nr[0],to=nr[1];(0,k.useEffect)(function(){(Pr==null?void 0:Pr.shade)!=null&&to(Pr.shade);var O=function(de){de.key===Z.tW.ALT&&Pn(!1)};return document.addEventListener(V.Ks.KEYUP,O,{capture:!0}),function(){document.removeEventListener(V.Ks.KEYUP,O,{capture:!0})}},[Pr,Pn]);var bo=y().useRef(null);return(0,w.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":(0,S.t)("labels.colorPicker"),children:(0,w.jsxs)("div",{ref:bo,onKeyDown:function(O){B({event:O,activeColorPickerSection:Yn,palette:Pt,color:nt,onChange:lt,onEyeDropperToggle:Pn,customColors:Mn,setActiveColorPickerSection:kr,updateData:gn,activeShade:oo,onEscape:ln})&&(O.preventDefault(),O.stopPropagation())},className:"color-picker-content",tabIndex:-1,children:[!!Mn.length&&(0,w.jsxs)("div",{children:[(0,w.jsx)(H,{children:(0,S.t)("colorPicker.mostUsedCustomColors")}),(0,w.jsx)(te,{colors:Mn,color:nt,label:(0,S.t)("colorPicker.mostUsedCustomColors"),onChange:lt})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(H,{children:(0,S.t)("colorPicker.colors")}),(0,w.jsx)(ie,{color:nt,label:Ct,palette:Pt,onChange:lt,activeShade:oo})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)(H,{children:(0,S.t)("colorPicker.shades")}),(0,w.jsx)(pe,{hex:nt,onChange:lt,palette:Pt})]}),Bn]})})},Y=c(9181),E=c(5612),W=c(4562),F=c(7879),z=c(7826),q=c(6713);const fe="dismissableLayer.update",ce="dismissableLayer.pointerDownOutside",U="dismissableLayer.focusOutside";let ve;const oe=(0,k.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),re=(0,k.forwardRef)(($e,Qe)=>{var nt;const{disableOutsidePointerEvents:lt=!1,onEscapeKeyDown:Ct,onPointerDownOutside:Mt,onFocusOutside:Bt,onInteractOutside:Pt,onDismiss:gn,...Bn}=$e,Pn=(0,k.useContext)(oe),[ln,Xn]=(0,k.useState)(null),Mn=(nt=ln==null?void 0:ln.ownerDocument)!==null&&nt!==void 0?nt:globalThis==null?void 0:globalThis.document,[,Qn]=(0,k.useState)({}),Sn=(0,W.e)(Qe,O=>Xn(O)),Yn=Array.from(Pn.layers),[kr]=[...Pn.layersWithOutsidePointerEventsDisabled].slice(-1),Pr=Yn.indexOf(kr),Sr=ln?Yn.indexOf(ln):-1,nr=Pn.layersWithOutsidePointerEventsDisabled.size>0,oo=Sr>=Pr,to=function(O,de=globalThis==null?void 0:globalThis.document){const ke=(0,q.W)(O),Oe=(0,k.useRef)(!1),He=(0,k.useRef)(()=>{});return(0,k.useEffect)(()=>{const Te=Xe=>{if(Xe.target&&!Oe.current){let ct=function(){me(ce,ke,Je,{discrete:!0})};const Je={originalEvent:Xe};Xe.pointerType==="touch"?(de.removeEventListener("click",He.current),He.current=ct,de.addEventListener("click",He.current,{once:!0})):ct()}Oe.current=!1},Ce=window.setTimeout(()=>{de.addEventListener("pointerdown",Te)},0);return()=>{window.clearTimeout(Ce),de.removeEventListener("pointerdown",Te),de.removeEventListener("click",He.current)}},[de,ke]),{onPointerDownCapture:()=>Oe.current=!0}}(O=>{const de=O.target,ke=[...Pn.branches].some(Oe=>Oe.contains(de));oo&&!ke&&(Mt==null||Mt(O),Pt==null||Pt(O),O.defaultPrevented||gn==null||gn())},Mn),bo=function(O,de=globalThis==null?void 0:globalThis.document){const ke=(0,q.W)(O),Oe=(0,k.useRef)(!1);return(0,k.useEffect)(()=>{const He=Te=>{Te.target&&!Oe.current&&me(U,ke,{originalEvent:Te},{discrete:!1})};return de.addEventListener("focusin",He),()=>de.removeEventListener("focusin",He)},[de,ke]),{onFocusCapture:()=>Oe.current=!0,onBlurCapture:()=>Oe.current=!1}}(O=>{const de=O.target;[...Pn.branches].some(ke=>ke.contains(de))||(Bt==null||Bt(O),Pt==null||Pt(O),O.defaultPrevented||gn==null||gn())},Mn);return function(O,de=globalThis==null?void 0:globalThis.document){const ke=(0,q.W)(O);(0,k.useEffect)(()=>{const Oe=He=>{He.key==="Escape"&&ke(He)};return de.addEventListener("keydown",Oe),()=>de.removeEventListener("keydown",Oe)},[ke,de])}(O=>{Sr===Pn.layers.size-1&&(Ct==null||Ct(O),!O.defaultPrevented&&gn&&(O.preventDefault(),gn()))},Mn),(0,k.useEffect)(()=>{if(ln)return lt&&(Pn.layersWithOutsidePointerEventsDisabled.size===0&&(ve=Mn.body.style.pointerEvents,Mn.body.style.pointerEvents="none"),Pn.layersWithOutsidePointerEventsDisabled.add(ln)),Pn.layers.add(ln),ae(),()=>{lt&&Pn.layersWithOutsidePointerEventsDisabled.size===1&&(Mn.body.style.pointerEvents=ve)}},[ln,Mn,lt,Pn]),(0,k.useEffect)(()=>()=>{ln&&(Pn.layers.delete(ln),Pn.layersWithOutsidePointerEventsDisabled.delete(ln),ae())},[ln,Pn]),(0,k.useEffect)(()=>{const O=()=>Qn({});return document.addEventListener(fe,O),()=>document.removeEventListener(fe,O)},[]),(0,k.createElement)(z.WV.div,(0,Y.Z)({},Bn,{ref:Sn,style:{pointerEvents:nr?oo?"auto":"none":void 0,...$e.style},onFocusCapture:(0,E.M)($e.onFocusCapture,bo.onFocusCapture),onBlurCapture:(0,E.M)($e.onBlurCapture,bo.onBlurCapture),onPointerDownCapture:(0,E.M)($e.onPointerDownCapture,to.onPointerDownCapture)}))});function ae(){const $e=new CustomEvent(fe);document.dispatchEvent($e)}function me($e,Qe,nt,{discrete:lt}){const Ct=nt.originalEvent.target,Mt=new CustomEvent($e,{bubbles:!1,cancelable:!0,detail:nt});Qe&&Ct.addEventListener($e,Qe,{once:!0}),lt?(0,z.jH)(Ct,Mt):Ct.dispatchEvent(Mt)}let he=0;function se(){(0,k.useEffect)(()=>{var $e,Qe;const nt=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",($e=nt[0])!==null&&$e!==void 0?$e:ge()),document.body.insertAdjacentElement("beforeend",(Qe=nt[1])!==null&&Qe!==void 0?Qe:ge()),he++,()=>{he===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(lt=>lt.remove()),he--}},[])}function ge(){const $e=document.createElement("span");return $e.setAttribute("data-radix-focus-guard",""),$e.tabIndex=0,$e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",$e}const X="focusScope.autoFocusOnMount",we="focusScope.autoFocusOnUnmount",be={bubbles:!1,cancelable:!0},le=(0,k.forwardRef)(($e,Qe)=>{const{loop:nt=!1,trapped:lt=!1,onMountAutoFocus:Ct,onUnmountAutoFocus:Mt,...Bt}=$e,[Pt,gn]=(0,k.useState)(null),Bn=(0,q.W)(Ct),Pn=(0,q.W)(Mt),ln=(0,k.useRef)(null),Xn=(0,W.e)(Qe,Sn=>gn(Sn)),Mn=(0,k.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,k.useEffect)(()=>{if(lt){let Sn=function(kr){if(Mn.paused||!Pt)return;const Pr=kr.target;Pt.contains(Pr)?ln.current=Pr:Pe(ln.current,{select:!0})},Yn=function(kr){!Mn.paused&&Pt&&(Pt.contains(kr.relatedTarget)||Pe(ln.current,{select:!0}))};return document.addEventListener("focusin",Sn),document.addEventListener("focusout",Yn),()=>{document.removeEventListener("focusin",Sn),document.removeEventListener("focusout",Yn)}}},[lt,Pt,Mn.paused]),(0,k.useEffect)(()=>{if(Pt){Ne.add(Mn);const Yn=document.activeElement;if(!Pt.contains(Yn)){const kr=new CustomEvent(X,be);Pt.addEventListener(X,Bn),Pt.dispatchEvent(kr),kr.defaultPrevented||(function(Pr,{select:Sr=!1}={}){const nr=document.activeElement;for(const oo of Pr)if(Pe(oo,{select:Sr}),document.activeElement!==nr)return}((Sn=ye(Pt),Sn.filter(Pr=>Pr.tagName!=="A")),{select:!0}),document.activeElement===Yn&&Pe(Pt))}return()=>{Pt.removeEventListener(X,Bn),setTimeout(()=>{const kr=new CustomEvent(we,be);Pt.addEventListener(we,Pn),Pt.dispatchEvent(kr),kr.defaultPrevented||Pe(Yn??document.body,{select:!0}),Pt.removeEventListener(we,Pn),Ne.remove(Mn)},0)}}var Sn},[Pt,Bn,Pn,Mn]);const Qn=(0,k.useCallback)(Sn=>{if(!nt&&!lt||Mn.paused)return;const Yn=Sn.key==="Tab"&&!Sn.altKey&&!Sn.ctrlKey&&!Sn.metaKey,kr=document.activeElement;if(Yn&&kr){const Pr=Sn.currentTarget,[Sr,nr]=function(oo){const to=ye(oo),bo=ue(to,oo),O=ue(to.reverse(),oo);return[bo,O]}(Pr);Sr&&nr?Sn.shiftKey||kr!==nr?Sn.shiftKey&&kr===Sr&&(Sn.preventDefault(),nt&&Pe(nr,{select:!0})):(Sn.preventDefault(),nt&&Pe(Sr,{select:!0})):kr===Pr&&Sn.preventDefault()}},[nt,lt,Mn.paused]);return(0,k.createElement)(z.WV.div,(0,Y.Z)({tabIndex:-1},Bt,{ref:Xn,onKeyDown:Qn}))});function ye($e){const Qe=[],nt=document.createTreeWalker($e,NodeFilter.SHOW_ELEMENT,{acceptNode:lt=>{const Ct=lt.tagName==="INPUT"&&lt.type==="hidden";return lt.disabled||lt.hidden||Ct?NodeFilter.FILTER_SKIP:lt.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;nt.nextNode();)Qe.push(nt.currentNode);return Qe}function ue($e,Qe){for(const nt of $e)if(!xe(nt,{upTo:Qe}))return nt}function xe($e,{upTo:Qe}){if(getComputedStyle($e).visibility==="hidden")return!0;for(;$e;){if(Qe!==void 0&&$e===Qe)return!1;if(getComputedStyle($e).display==="none")return!0;$e=$e.parentElement}return!1}function Pe($e,{select:Qe=!1}={}){if($e&&$e.focus){const nt=document.activeElement;$e.focus({preventScroll:!0}),$e!==nt&&function(lt){return lt instanceof HTMLInputElement&&"select"in lt}($e)&&Qe&&$e.select()}}const Ne=function(){let $e=[];return{add(Qe){const nt=$e[0];Qe!==nt&&(nt==null||nt.pause()),$e=Me($e,Qe),$e.unshift(Qe)},remove(Qe){var nt;$e=Me($e,Qe),(nt=$e[0])===null||nt===void 0||nt.resume()}}}();function Me($e,Qe){const nt=[...$e],lt=nt.indexOf(Qe);return lt!==-1&&nt.splice(lt,1),nt}var Re=c(7596);function We($e){return $e.split("-")[0]}function Se($e){return $e.split("-")[1]}function Be($e){return["top","bottom"].includes(We($e))?"x":"y"}function _e($e){return $e==="y"?"height":"width"}function ze($e,Qe,nt){let{reference:lt,floating:Ct}=$e;const Mt=lt.x+lt.width/2-Ct.width/2,Bt=lt.y+lt.height/2-Ct.height/2,Pt=Be(Qe),gn=_e(Pt),Bn=lt[gn]/2-Ct[gn]/2,Pn=Pt==="x";let ln;switch(We(Qe)){case"top":ln={x:Mt,y:lt.y-Ct.height};break;case"bottom":ln={x:Mt,y:lt.y+lt.height};break;case"right":ln={x:lt.x+lt.width,y:Bt};break;case"left":ln={x:lt.x-Ct.width,y:Bt};break;default:ln={x:lt.x,y:lt.y}}switch(Se(Qe)){case"start":ln[Pt]-=Bn*(nt&&Pn?-1:1);break;case"end":ln[Pt]+=Bn*(nt&&Pn?-1:1)}return ln}function Ve($e){return typeof $e!="number"?function(Qe){return{top:0,right:0,bottom:0,left:0,...Qe}}($e):{top:$e,right:$e,bottom:$e,left:$e}}function ut($e){return{...$e,top:$e.y,left:$e.x,right:$e.x+$e.width,bottom:$e.y+$e.height}}async function Ie($e,Qe){var nt;Qe===void 0&&(Qe={});const{x:lt,y:Ct,platform:Mt,rects:Bt,elements:Pt,strategy:gn}=$e,{boundary:Bn="clippingAncestors",rootBoundary:Pn="viewport",elementContext:ln="floating",altBoundary:Xn=!1,padding:Mn=0}=Qe,Qn=Ve(Mn),Sn=Pt[Xn?ln==="floating"?"reference":"floating":ln],Yn=ut(await Mt.getClippingRect({element:(nt=await(Mt.isElement==null?void 0:Mt.isElement(Sn)))==null||nt?Sn:Sn.contextElement||await(Mt.getDocumentElement==null?void 0:Mt.getDocumentElement(Pt.floating)),boundary:Bn,rootBoundary:Pn,strategy:gn})),kr=ut(Mt.convertOffsetParentRelativeRectToViewportRelativeRect?await Mt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:ln==="floating"?{...Bt.floating,x:lt,y:Ct}:Bt.reference,offsetParent:await(Mt.getOffsetParent==null?void 0:Mt.getOffsetParent(Pt.floating)),strategy:gn}):Bt[ln]);return{top:Yn.top-kr.top+Qn.top,bottom:kr.bottom-Yn.bottom+Qn.bottom,left:Yn.left-kr.left+Qn.left,right:kr.right-Yn.right+Qn.right}}const ot=Math.min,Ye=Math.max;function Ke($e,Qe,nt){return Ye($e,ot(Qe,nt))}const tt=$e=>({name:"arrow",options:$e,async fn(Qe){const{element:nt,padding:lt=0}=$e??{},{x:Ct,y:Mt,placement:Bt,rects:Pt,platform:gn}=Qe;if(nt==null)return{};const Bn=Ve(lt),Pn={x:Ct,y:Mt},ln=Be(Bt),Xn=Se(Bt),Mn=_e(ln),Qn=await gn.getDimensions(nt),Sn=ln==="y"?"top":"left",Yn=ln==="y"?"bottom":"right",kr=Pt.reference[Mn]+Pt.reference[ln]-Pn[ln]-Pt.floating[Mn],Pr=Pn[ln]-Pt.reference[ln],Sr=await(gn.getOffsetParent==null?void 0:gn.getOffsetParent(nt));let nr=Sr?ln==="y"?Sr.clientHeight||0:Sr.clientWidth||0:0;nr===0&&(nr=Pt.floating[Mn]);const oo=kr/2-Pr/2,to=Bn[Sn],bo=nr-Qn[Mn]-Bn[Yn],O=nr/2-Qn[Mn]/2+oo,de=Ke(to,O,bo),ke=(Xn==="start"?Bn[Sn]:Bn[Yn])>0&&O!==de&&Pt.reference[Mn]<=Pt.floating[Mn];return{[ln]:Pn[ln]-(ke?O<to?to-O:bo-O:0),data:{[ln]:de,centerOffset:O-de}}}}),pt={left:"right",right:"left",bottom:"top",top:"bottom"};function St($e){return $e.replace(/left|right|bottom|top/g,Qe=>pt[Qe])}function Kt($e,Qe,nt){nt===void 0&&(nt=!1);const lt=Se($e),Ct=Be($e),Mt=_e(Ct);let Bt=Ct==="x"?lt===(nt?"end":"start")?"right":"left":lt==="start"?"bottom":"top";return Qe.reference[Mt]>Qe.floating[Mt]&&(Bt=St(Bt)),{main:Bt,cross:St(Bt)}}const sn={start:"end",end:"start"};function nn($e){return $e.replace(/start|end/g,Qe=>sn[Qe])}const Cn=["top","right","bottom","left"],vn=(Cn.reduce(($e,Qe)=>$e.concat(Qe,Qe+"-start",Qe+"-end"),[]),function($e){return $e===void 0&&($e={}),{name:"flip",options:$e,async fn(Qe){var nt;const{placement:lt,middlewareData:Ct,rects:Mt,initialPlacement:Bt,platform:Pt,elements:gn}=Qe,{mainAxis:Bn=!0,crossAxis:Pn=!0,fallbackPlacements:ln,fallbackStrategy:Xn="bestFit",flipAlignment:Mn=!0,...Qn}=$e,Sn=We(lt),Yn=ln||(Sn!==Bt&&Mn?function(O){const de=St(O);return[nn(O),de,nn(de)]}(Bt):[St(Bt)]),kr=[Bt,...Yn],Pr=await Ie(Qe,Qn),Sr=[];let nr=((nt=Ct.flip)==null?void 0:nt.overflows)||[];if(Bn&&Sr.push(Pr[Sn]),Pn){const{main:O,cross:de}=Kt(lt,Mt,await(Pt.isRTL==null?void 0:Pt.isRTL(gn.floating)));Sr.push(Pr[O],Pr[de])}if(nr=[...nr,{placement:lt,overflows:Sr}],!Sr.every(O=>O<=0)){var oo,to;const O=((oo=(to=Ct.flip)==null?void 0:to.index)!=null?oo:0)+1,de=kr[O];if(de)return{data:{index:O,overflows:nr},reset:{placement:de}};let ke="bottom";switch(Xn){case"bestFit":{var bo;const Oe=(bo=nr.map(He=>[He,He.overflows.filter(Te=>Te>0).reduce((Te,Ce)=>Te+Ce,0)]).sort((He,Te)=>He[1]-Te[1])[0])==null?void 0:bo[0].placement;Oe&&(ke=Oe);break}case"initialPlacement":ke=Bt}if(lt!==ke)return{reset:{placement:ke}}}return{}}}});function Fe($e,Qe){return{top:$e.top-Qe.height,right:$e.right-Qe.width,bottom:$e.bottom-Qe.height,left:$e.left-Qe.width}}function et($e){return Cn.some(Qe=>$e[Qe]>=0)}const st=function($e){let{strategy:Qe="referenceHidden",...nt}=$e===void 0?{}:$e;return{name:"hide",async fn(lt){const{rects:Ct}=lt;switch(Qe){case"referenceHidden":{const Mt=Fe(await Ie(lt,{...nt,elementContext:"reference"}),Ct.reference);return{data:{referenceHiddenOffsets:Mt,referenceHidden:et(Mt)}}}case"escaped":{const Mt=Fe(await Ie(lt,{...nt,altBoundary:!0}),Ct.floating);return{data:{escapedOffsets:Mt,escaped:et(Mt)}}}default:return{}}}}},ht=function($e){return $e===void 0&&($e=0),{name:"offset",options:$e,async fn(Qe){const{x:nt,y:lt}=Qe,Ct=await async function(Mt,Bt){const{placement:Pt,platform:gn,elements:Bn}=Mt,Pn=await(gn.isRTL==null?void 0:gn.isRTL(Bn.floating)),ln=We(Pt),Xn=Se(Pt),Mn=Be(Pt)==="x",Qn=["left","top"].includes(ln)?-1:1,Sn=Pn&&Mn?-1:1,Yn=typeof Bt=="function"?Bt(Mt):Bt;let{mainAxis:kr,crossAxis:Pr,alignmentAxis:Sr}=typeof Yn=="number"?{mainAxis:Yn,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Yn};return Xn&&typeof Sr=="number"&&(Pr=Xn==="end"?-1*Sr:Sr),Mn?{x:Pr*Sn,y:kr*Qn}:{x:kr*Qn,y:Pr*Sn}}(Qe,$e);return{x:nt+Ct.x,y:lt+Ct.y,data:Ct}}}};function _t($e){return $e==="x"?"y":"x"}const Zt=function($e){return $e===void 0&&($e={}),{name:"shift",options:$e,async fn(Qe){const{x:nt,y:lt,placement:Ct}=Qe,{mainAxis:Mt=!0,crossAxis:Bt=!1,limiter:Pt={fn:Yn=>{let{x:kr,y:Pr}=Yn;return{x:kr,y:Pr}}},...gn}=$e,Bn={x:nt,y:lt},Pn=await Ie(Qe,gn),ln=Be(We(Ct)),Xn=_t(ln);let Mn=Bn[ln],Qn=Bn[Xn];if(Mt){const Yn=ln==="y"?"bottom":"right";Mn=Ke(Mn+Pn[ln==="y"?"top":"left"],Mn,Mn-Pn[Yn])}if(Bt){const Yn=Xn==="y"?"bottom":"right";Qn=Ke(Qn+Pn[Xn==="y"?"top":"left"],Qn,Qn-Pn[Yn])}const Sn=Pt.fn({...Qe,[ln]:Mn,[Xn]:Qn});return{...Sn,data:{x:Sn.x-nt,y:Sn.y-lt}}}}},Yt=function($e){return $e===void 0&&($e={}),{options:$e,fn(Qe){const{x:nt,y:lt,placement:Ct,rects:Mt,middlewareData:Bt}=Qe,{offset:Pt=0,mainAxis:gn=!0,crossAxis:Bn=!0}=$e,Pn={x:nt,y:lt},ln=Be(Ct),Xn=_t(ln);let Mn=Pn[ln],Qn=Pn[Xn];const Sn=typeof Pt=="function"?Pt({...Mt,placement:Ct}):Pt,Yn=typeof Sn=="number"?{mainAxis:Sn,crossAxis:0}:{mainAxis:0,crossAxis:0,...Sn};if(gn){const oo=ln==="y"?"height":"width",to=Mt.reference[ln]-Mt.floating[oo]+Yn.mainAxis,bo=Mt.reference[ln]+Mt.reference[oo]-Yn.mainAxis;Mn<to?Mn=to:Mn>bo&&(Mn=bo)}if(Bn){var kr,Pr,Sr,nr;const oo=ln==="y"?"width":"height",to=["top","left"].includes(We(Ct)),bo=Mt.reference[Xn]-Mt.floating[oo]+(to&&(kr=(Pr=Bt.offset)==null?void 0:Pr[Xn])!=null?kr:0)+(to?0:Yn.crossAxis),O=Mt.reference[Xn]+Mt.reference[oo]+(to?0:(Sr=(nr=Bt.offset)==null?void 0:nr[Xn])!=null?Sr:0)-(to?Yn.crossAxis:0);Qn<bo?Qn=bo:Qn>O&&(Qn=O)}return{[ln]:Mn,[Xn]:Qn}}}},bn=function($e){return $e===void 0&&($e={}),{name:"size",options:$e,async fn(Qe){const{placement:nt,rects:lt,platform:Ct,elements:Mt}=Qe,{apply:Bt,...Pt}=$e,gn=await Ie(Qe,Pt),Bn=We(nt),Pn=Se(nt);let ln,Xn;Bn==="top"||Bn==="bottom"?(ln=Bn,Xn=Pn===(await(Ct.isRTL==null?void 0:Ct.isRTL(Mt.floating))?"start":"end")?"left":"right"):(Xn=Bn,ln=Pn==="end"?"top":"bottom");const Mn=Ye(gn.left,0),Qn=Ye(gn.right,0),Sn=Ye(gn.top,0),Yn=Ye(gn.bottom,0),kr={availableHeight:lt.floating.height-(["left","right"].includes(nt)?2*(Sn!==0||Yn!==0?Sn+Yn:Ye(gn.top,gn.bottom)):gn[ln]),availableWidth:lt.floating.width-(["top","bottom"].includes(nt)?2*(Mn!==0||Qn!==0?Mn+Qn:Ye(gn.left,gn.right)):gn[Xn])},Pr=await Ct.getDimensions(Mt.floating);Bt==null||Bt({...Qe,...kr});const Sr=await Ct.getDimensions(Mt.floating);return Pr.width!==Sr.width||Pr.height!==Sr.height?{reset:{rects:!0}}:{}}}};function Wt($e){return $e&&$e.document&&$e.location&&$e.alert&&$e.setInterval}function un($e){if($e==null)return window;if(!Wt($e)){const Qe=$e.ownerDocument;return Qe&&Qe.defaultView||window}return $e}function jn($e){return un($e).getComputedStyle($e)}function Hn($e){return Wt($e)?"":$e?($e.nodeName||"").toLowerCase():""}function vt(){const $e=navigator.userAgentData;return $e!=null&&$e.brands?$e.brands.map(Qe=>Qe.brand+"/"+Qe.version).join(" "):navigator.userAgent}function Nt($e){return $e instanceof un($e).HTMLElement}function Tt($e){return $e instanceof un($e).Element}function cn($e){return typeof ShadowRoot<"u"&&($e instanceof un($e).ShadowRoot||$e instanceof ShadowRoot)}function Ot($e){const{overflow:Qe,overflowX:nt,overflowY:lt}=jn($e);return/auto|scroll|overlay|hidden/.test(Qe+lt+nt)}function Ln($e){return["table","td","th"].includes(Hn($e))}function Wn($e){const Qe=/firefox/i.test(vt()),nt=jn($e);return nt.transform!=="none"||nt.perspective!=="none"||nt.contain==="paint"||["transform","perspective"].includes(nt.willChange)||Qe&&nt.willChange==="filter"||Qe&&!!nt.filter&&nt.filter!=="none"}function Rn(){return!/^((?!chrome|android).)*safari/i.test(vt())}const zn=Math.min,Et=Math.max,Dt=Math.round;function Gt($e,Qe,nt){var lt,Ct,Mt,Bt;Qe===void 0&&(Qe=!1),nt===void 0&&(nt=!1);const Pt=$e.getBoundingClientRect();let gn=1,Bn=1;Qe&&Nt($e)&&(gn=$e.offsetWidth>0&&Dt(Pt.width)/$e.offsetWidth||1,Bn=$e.offsetHeight>0&&Dt(Pt.height)/$e.offsetHeight||1);const Pn=Tt($e)?un($e):window,ln=!Rn()&&nt,Xn=(Pt.left+(ln&&(lt=(Ct=Pn.visualViewport)==null?void 0:Ct.offsetLeft)!=null?lt:0))/gn,Mn=(Pt.top+(ln&&(Mt=(Bt=Pn.visualViewport)==null?void 0:Bt.offsetTop)!=null?Mt:0))/Bn,Qn=Pt.width/gn,Sn=Pt.height/Bn;return{width:Qn,height:Sn,top:Mn,right:Xn+Qn,bottom:Mn+Sn,left:Xn,x:Xn,y:Mn}}function Jt($e){return(Qe=$e,(Qe instanceof un(Qe).Node?$e.ownerDocument:$e.document)||window.document).documentElement;var Qe}function $n($e){return Tt($e)?{scrollLeft:$e.scrollLeft,scrollTop:$e.scrollTop}:{scrollLeft:$e.pageXOffset,scrollTop:$e.pageYOffset}}function Kn($e){return Gt(Jt($e)).left+$n($e).scrollLeft}function wr($e,Qe,nt){const lt=Nt(Qe),Ct=Jt(Qe),Mt=Gt($e,lt&&function(gn){const Bn=Gt(gn);return Dt(Bn.width)!==gn.offsetWidth||Dt(Bn.height)!==gn.offsetHeight}(Qe),nt==="fixed");let Bt={scrollLeft:0,scrollTop:0};const Pt={x:0,y:0};if(lt||!lt&&nt!=="fixed")if((Hn(Qe)!=="body"||Ot(Ct))&&(Bt=$n(Qe)),Nt(Qe)){const gn=Gt(Qe,!0);Pt.x=gn.x+Qe.clientLeft,Pt.y=gn.y+Qe.clientTop}else Ct&&(Pt.x=Kn(Ct));return{x:Mt.left+Bt.scrollLeft-Pt.x,y:Mt.top+Bt.scrollTop-Pt.y,width:Mt.width,height:Mt.height}}function dr($e){return Hn($e)==="html"?$e:$e.assignedSlot||$e.parentNode||(cn($e)?$e.host:null)||Jt($e)}function yn($e){return Nt($e)&&getComputedStyle($e).position!=="fixed"?$e.offsetParent:null}function hr($e){const Qe=un($e);let nt=yn($e);for(;nt&&Ln(nt)&&getComputedStyle(nt).position==="static";)nt=yn(nt);return nt&&(Hn(nt)==="html"||Hn(nt)==="body"&&getComputedStyle(nt).position==="static"&&!Wn(nt))?Qe:nt||function(lt){let Ct=dr(lt);for(cn(Ct)&&(Ct=Ct.host);Nt(Ct)&&!["html","body"].includes(Hn(Ct));){if(Wn(Ct))return Ct;Ct=Ct.parentNode}return null}($e)||Qe}function Er($e){if(Nt($e))return{width:$e.offsetWidth,height:$e.offsetHeight};const Qe=Gt($e);return{width:Qe.width,height:Qe.height}}function Nn($e){const Qe=dr($e);return["html","body","#document"].includes(Hn(Qe))?$e.ownerDocument.body:Nt(Qe)&&Ot(Qe)?Qe:Nn(Qe)}function ar($e,Qe){var nt;Qe===void 0&&(Qe=[]);const lt=Nn($e),Ct=lt===((nt=$e.ownerDocument)==null?void 0:nt.body),Mt=un(lt),Bt=Ct?[Mt].concat(Mt.visualViewport||[],Ot(lt)?lt:[]):lt,Pt=Qe.concat(Bt);return Ct?Pt:Pt.concat(ar(Bt))}function Dr($e,Qe,nt){return Qe==="viewport"?ut(function(lt,Ct){const Mt=un(lt),Bt=Jt(lt),Pt=Mt.visualViewport;let gn=Bt.clientWidth,Bn=Bt.clientHeight,Pn=0,ln=0;if(Pt){gn=Pt.width,Bn=Pt.height;const Xn=Rn();(Xn||!Xn&&Ct==="fixed")&&(Pn=Pt.offsetLeft,ln=Pt.offsetTop)}return{width:gn,height:Bn,x:Pn,y:ln}}($e,nt)):Tt(Qe)?function(lt,Ct){const Mt=Gt(lt,!1,Ct==="fixed"),Bt=Mt.top+lt.clientTop,Pt=Mt.left+lt.clientLeft;return{top:Bt,left:Pt,x:Pt,y:Bt,right:Pt+lt.clientWidth,bottom:Bt+lt.clientHeight,width:lt.clientWidth,height:lt.clientHeight}}(Qe,nt):ut(function(lt){var Ct;const Mt=Jt(lt),Bt=$n(lt),Pt=(Ct=lt.ownerDocument)==null?void 0:Ct.body,gn=Et(Mt.scrollWidth,Mt.clientWidth,Pt?Pt.scrollWidth:0,Pt?Pt.clientWidth:0),Bn=Et(Mt.scrollHeight,Mt.clientHeight,Pt?Pt.scrollHeight:0,Pt?Pt.clientHeight:0);let Pn=-Bt.scrollLeft+Kn(lt);const ln=-Bt.scrollTop;return jn(Pt||Mt).direction==="rtl"&&(Pn+=Et(Mt.clientWidth,Pt?Pt.clientWidth:0)-gn),{width:gn,height:Bn,x:Pn,y:ln}}(Jt($e)))}function Ir($e){const Qe=ar($e),nt=["absolute","fixed"].includes(jn($e).position)&&Nt($e)?hr($e):$e;return Tt(nt)?Qe.filter(lt=>Tt(lt)&&function(Ct,Mt){const Bt=Mt.getRootNode==null?void 0:Mt.getRootNode();if(Ct.contains(Mt))return!0;if(Bt&&cn(Bt)){let Pt=Mt;do{if(Pt&&Ct===Pt)return!0;Pt=Pt.parentNode||Pt.host}while(Pt)}return!1}(lt,nt)&&Hn(lt)!=="body"):[]}const Vt={getClippingRect:function($e){let{element:Qe,boundary:nt,rootBoundary:lt,strategy:Ct}=$e;const Mt=[...nt==="clippingAncestors"?Ir(Qe):[].concat(nt),lt],Bt=Mt[0],Pt=Mt.reduce((gn,Bn)=>{const Pn=Dr(Qe,Bn,Ct);return gn.top=Et(Pn.top,gn.top),gn.right=zn(Pn.right,gn.right),gn.bottom=zn(Pn.bottom,gn.bottom),gn.left=Et(Pn.left,gn.left),gn},Dr(Qe,Bt,Ct));return{width:Pt.right-Pt.left,height:Pt.bottom-Pt.top,x:Pt.left,y:Pt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function($e){let{rect:Qe,offsetParent:nt,strategy:lt}=$e;const Ct=Nt(nt),Mt=Jt(nt);if(nt===Mt)return Qe;let Bt={scrollLeft:0,scrollTop:0};const Pt={x:0,y:0};if((Ct||!Ct&&lt!=="fixed")&&((Hn(nt)!=="body"||Ot(Mt))&&(Bt=$n(nt)),Nt(nt))){const gn=Gt(nt,!0);Pt.x=gn.x+nt.clientLeft,Pt.y=gn.y+nt.clientTop}return{...Qe,x:Qe.x-Bt.scrollLeft+Pt.x,y:Qe.y-Bt.scrollTop+Pt.y}},isElement:Tt,getDimensions:Er,getOffsetParent:hr,getDocumentElement:Jt,getElementRects:$e=>{let{reference:Qe,floating:nt,strategy:lt}=$e;return{reference:wr(Qe,hr(nt),lt),floating:{...Er(nt),x:0,y:0}}},getClientRects:$e=>Array.from($e.getClientRects()),isRTL:$e=>jn($e).direction==="rtl"};function An($e,Qe,nt,lt){lt===void 0&&(lt={});const{ancestorScroll:Ct=!0,ancestorResize:Mt=!0,elementResize:Bt=!0,animationFrame:Pt=!1}=lt,gn=Ct&&!Pt,Bn=Mt&&!Pt,Pn=gn||Bn?[...Tt($e)?ar($e):[],...ar(Qe)]:[];Pn.forEach(Qn=>{gn&&Qn.addEventListener("scroll",nt,{passive:!0}),Bn&&Qn.addEventListener("resize",nt)});let ln,Xn=null;if(Bt){let Qn=!0;Xn=new ResizeObserver(()=>{Qn||nt(),Qn=!1}),Tt($e)&&!Pt&&Xn.observe($e),Xn.observe(Qe)}let Mn=Pt?Gt($e):null;return Pt&&function Qn(){const Sn=Gt($e);!Mn||Sn.x===Mn.x&&Sn.y===Mn.y&&Sn.width===Mn.width&&Sn.height===Mn.height||nt(),Mn=Sn,ln=requestAnimationFrame(Qn)}(),nt(),()=>{var Qn;Pn.forEach(Sn=>{gn&&Sn.removeEventListener("scroll",nt),Bn&&Sn.removeEventListener("resize",nt)}),(Qn=Xn)==null||Qn.disconnect(),Xn=null,Pt&&cancelAnimationFrame(ln)}}const pn=($e,Qe,nt)=>(async(lt,Ct,Mt)=>{const{placement:Bt="bottom",strategy:Pt="absolute",middleware:gn=[],platform:Bn}=Mt,Pn=await(Bn.isRTL==null?void 0:Bn.isRTL(Ct));let ln=await Bn.getElementRects({reference:lt,floating:Ct,strategy:Pt}),{x:Xn,y:Mn}=ze(ln,Bt,Pn),Qn=Bt,Sn={},Yn=0;for(let kr=0;kr<gn.length;kr++){const{name:Pr,fn:Sr}=gn[kr],{x:nr,y:oo,data:to,reset:bo}=await Sr({x:Xn,y:Mn,initialPlacement:Bt,placement:Qn,strategy:Pt,middlewareData:Sn,rects:ln,platform:Bn,elements:{reference:lt,floating:Ct}});Xn=nr??Xn,Mn=oo??Mn,Sn={...Sn,[Pr]:{...Sn[Pr],...to}},bo&&Yn<=50&&(Yn++,typeof bo=="object"&&(bo.placement&&(Qn=bo.placement),bo.rects&&(ln=bo.rects===!0?await Bn.getElementRects({reference:lt,floating:Ct,strategy:Pt}):bo.rects),{x:Xn,y:Mn}=ze(ln,Qn,Pn)),kr=-1)}return{x:Xn,y:Mn,placement:Qn,strategy:Pt,middlewareData:Sn}})($e,Qe,{platform:Vt,...nt});var mn=c(5156),or=c.n(mn),fr=typeof document<"u"?k.useLayoutEffect:k.useEffect;function Fn($e,Qe){if($e===Qe)return!0;if(typeof $e!=typeof Qe)return!1;if(typeof $e=="function"&&$e.toString()===Qe.toString())return!0;let nt,lt,Ct;if($e&&Qe&&typeof $e=="object"){if(Array.isArray($e)){if(nt=$e.length,nt!=Qe.length)return!1;for(lt=nt;lt--!=0;)if(!Fn($e[lt],Qe[lt]))return!1;return!0}if(Ct=Object.keys($e),nt=Ct.length,nt!==Object.keys(Qe).length)return!1;for(lt=nt;lt--!=0;)if(!Object.prototype.hasOwnProperty.call(Qe,Ct[lt]))return!1;for(lt=nt;lt--!=0;){const Mt=Ct[lt];if((Mt!=="_owner"||!$e.$$typeof)&&!Fn($e[Mt],Qe[Mt]))return!1}return!0}return $e!=$e&&Qe!=Qe}function De($e){let{middleware:Qe,placement:nt="bottom",strategy:lt="absolute",whileElementsMounted:Ct}=$e===void 0?{}:$e;const Mt=k.useRef(null),Bt=k.useRef(null),Pt=function(Sr){const nr=k.useRef(Sr);return fr(()=>{nr.current=Sr}),nr}(Ct),gn=k.useRef(null),[Bn,Pn]=k.useState({x:null,y:null,strategy:lt,placement:nt,middlewareData:{}}),[ln,Xn]=k.useState(Qe);Fn(ln==null?void 0:ln.map(Sr=>{let{options:nr}=Sr;return nr}),Qe==null?void 0:Qe.map(Sr=>{let{options:nr}=Sr;return nr}))||Xn(Qe);const Mn=k.useCallback(()=>{Mt.current&&Bt.current&&pn(Mt.current,Bt.current,{middleware:ln,placement:nt,strategy:lt}).then(Sr=>{Qn.current&&mn.flushSync(()=>{Pn(Sr)})})},[ln,nt,lt]);fr(()=>{Qn.current&&Mn()},[Mn]);const Qn=k.useRef(!1);fr(()=>(Qn.current=!0,()=>{Qn.current=!1}),[]);const Sn=k.useCallback(()=>{if(typeof gn.current=="function"&&(gn.current(),gn.current=null),Mt.current&&Bt.current)if(Pt.current){const Sr=Pt.current(Mt.current,Bt.current,Mn);gn.current=Sr}else Mn()},[Mn,Pt]),Yn=k.useCallback(Sr=>{Mt.current=Sr,Sn()},[Sn]),kr=k.useCallback(Sr=>{Bt.current=Sr,Sn()},[Sn]),Pr=k.useMemo(()=>({reference:Mt,floating:Bt}),[]);return k.useMemo(()=>({...Bn,update:Mn,refs:Pr,reference:Yn,floating:kr}),[Bn,Mn,Pr,Yn,kr])}const Ue=$e=>{const{element:Qe,padding:nt}=$e;return{name:"arrow",options:$e,fn(lt){return Ct=Qe,Object.prototype.hasOwnProperty.call(Ct,"current")?Qe.current!=null?tt({element:Qe.current,padding:nt}).fn(lt):{}:Qe?tt({element:Qe,padding:nt}).fn(lt):{};var Ct}}},qe=(0,k.forwardRef)(($e,Qe)=>{const{children:nt,width:lt=10,height:Ct=5,...Mt}=$e;return(0,k.createElement)(z.WV.svg,(0,Y.Z)({},Mt,{ref:Qe,width:lt,height:Ct,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),$e.asChild?nt:(0,k.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),dt=qe;var Ut=c(9041);const qt="Popper",[on,xn]=(0,F.b)(qt),[tn,tr]=on(qt),ir=$e=>{const{__scopePopper:Qe,children:nt}=$e,[lt,Ct]=(0,k.useState)(null);return(0,k.createElement)(tn,{scope:Qe,anchor:lt,onAnchorChange:Ct},nt)},br="PopperAnchor",Hr=(0,k.forwardRef)(($e,Qe)=>{const{__scopePopper:nt,virtualRef:lt,...Ct}=$e,Mt=tr(br,nt),Bt=(0,k.useRef)(null),Pt=(0,W.e)(Qe,Bt);return(0,k.useEffect)(()=>{Mt.onAnchorChange((lt==null?void 0:lt.current)||Bt.current)}),lt?null:(0,k.createElement)(z.WV.div,(0,Y.Z)({},Ct,{ref:Pt}))}),Fr="PopperContent",[go,Wr]=on(Fr),[Mr,Ro]=on(Fr,{hasParent:!1,positionUpdateFns:new Set}),si=(0,k.forwardRef)(($e,Qe)=>{var nt,lt,Ct,Mt,Bt,Pt,gn,Bn;const{__scopePopper:Pn,side:ln="bottom",sideOffset:Xn=0,align:Mn="center",alignOffset:Qn=0,arrowPadding:Sn=0,collisionBoundary:Yn=[],collisionPadding:kr=0,sticky:Pr="partial",hideWhenDetached:Sr=!1,avoidCollisions:nr=!0,onPlaced:oo,...to}=$e,bo=tr(Fr,Pn),[O,de]=(0,k.useState)(null),ke=(0,W.e)(Qe,$o=>de($o)),[Oe,He]=(0,k.useState)(null),Te=function($o){const[Do,Za]=(0,k.useState)(void 0);return(0,Ut.b)(()=>{if($o){Za({width:$o.offsetWidth,height:$o.offsetHeight});const vi=new ResizeObserver(Ho=>{if(!Array.isArray(Ho)||!Ho.length)return;const Ga=Ho[0];let Os,Xa;if("borderBoxSize"in Ga){const Js=Ga.borderBoxSize,hu=Array.isArray(Js)?Js[0]:Js;Os=hu.inlineSize,Xa=hu.blockSize}else Os=$o.offsetWidth,Xa=$o.offsetHeight;Za({width:Os,height:Xa})});return vi.observe($o,{box:"border-box"}),()=>vi.unobserve($o)}Za(void 0)},[$o]),Do}(Oe),Ce=(nt=Te==null?void 0:Te.width)!==null&&nt!==void 0?nt:0,Xe=(lt=Te==null?void 0:Te.height)!==null&&lt!==void 0?lt:0,Je=ln+(Mn!=="center"?"-"+Mn:""),ct=typeof kr=="number"?kr:{top:0,right:0,bottom:0,left:0,...kr},yt=Array.isArray(Yn)?Yn:[Yn],wt=yt.length>0,kt={padding:ct,boundary:yt.filter(Go),altBoundary:wt},{reference:en,floating:wn,strategy:In,x:qn,y:cr,placement:Nr,middlewareData:Jn,update:Lr}=De({strategy:"fixed",placement:Je,whileElementsMounted:An,middleware:[Mo(),ht({mainAxis:Xn+Xe,alignmentAxis:Qn}),nr?Zt({mainAxis:!0,crossAxis:!1,limiter:Pr==="partial"?Yt():void 0,...kt}):void 0,Oe?Ue({element:Oe,padding:Sn}):void 0,nr?vn({...kt}):void 0,bn({...kt,apply:({elements:$o,availableWidth:Do,availableHeight:Za})=>{$o.floating.style.setProperty("--radix-popper-available-width",`${Do}px`),$o.floating.style.setProperty("--radix-popper-available-height",`${Za}px`)}}),xi({arrowWidth:Ce,arrowHeight:Xe}),Sr?st({strategy:"referenceHidden"}):void 0].filter(fa)});(0,Ut.b)(()=>{en(bo.anchor)},[en,bo.anchor]);const qr=qn!==null&&cr!==null,[gr,Vr]=ft(Nr),co=(0,q.W)(oo);(0,Ut.b)(()=>{qr&&(co==null||co())},[qr,co]);const qo=(Ct=Jn.arrow)===null||Ct===void 0?void 0:Ct.x,Wo=(Mt=Jn.arrow)===null||Mt===void 0?void 0:Mt.y,Ta=((Bt=Jn.arrow)===null||Bt===void 0?void 0:Bt.centerOffset)!==0,[Ca,Is]=(0,k.useState)();(0,Ut.b)(()=>{O&&Is(window.getComputedStyle(O).zIndex)},[O]);const{hasParent:Ts,positionUpdateFns:mi}=Ro(Fr,Pn),Ci=!Ts;(0,k.useLayoutEffect)(()=>{if(!Ci)return mi.add(Lr),()=>{mi.delete(Lr)}},[Ci,mi,Lr]),(0,Ut.b)(()=>{Ci&&qr&&Array.from(mi).reverse().forEach($o=>requestAnimationFrame($o))},[Ci,qr,mi]);const Jo={"data-side":gr,"data-align":Vr,...to,ref:ke,style:{...to.style,animation:qr?void 0:"none",opacity:(Pt=Jn.hide)!==null&&Pt!==void 0&&Pt.referenceHidden?0:void 0}};return(0,k.createElement)("div",{ref:wn,"data-radix-popper-content-wrapper":"",style:{position:In,left:0,top:0,transform:qr?`translate3d(${Math.round(qn)}px, ${Math.round(cr)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Ca,"--radix-popper-transform-origin":[(gn=Jn.transformOrigin)===null||gn===void 0?void 0:gn.x,(Bn=Jn.transformOrigin)===null||Bn===void 0?void 0:Bn.y].join(" ")},dir:$e.dir},(0,k.createElement)(go,{scope:Pn,placedSide:gr,onArrowChange:He,arrowX:qo,arrowY:Wo,shouldHideArrow:Ta},Ci?(0,k.createElement)(Mr,{scope:Pn,hasParent:!0,positionUpdateFns:mi},(0,k.createElement)(z.WV.div,Jo)):(0,k.createElement)(z.WV.div,Jo)))}),hi="PopperArrow",ti={top:"bottom",right:"left",bottom:"top",left:"right"},ha=(0,k.forwardRef)(function($e,Qe){const{__scopePopper:nt,...lt}=$e,Ct=Wr(hi,nt),Mt=ti[Ct.placedSide];return(0,k.createElement)("span",{ref:Ct.onArrowChange,style:{position:"absolute",left:Ct.arrowX,top:Ct.arrowY,[Mt]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[Ct.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[Ct.placedSide],visibility:Ct.shouldHideArrow?"hidden":void 0}},(0,k.createElement)(dt,(0,Y.Z)({},lt,{ref:Qe,style:{...lt.style,display:"block"}})))});function fa($e){return $e!==void 0}function Go($e){return $e!==null}const Mo=()=>({name:"anchorCssProperties",fn($e){const{rects:Qe,elements:nt}=$e,{width:lt,height:Ct}=Qe.reference;return nt.floating.style.setProperty("--radix-popper-anchor-width",`${lt}px`),nt.floating.style.setProperty("--radix-popper-anchor-height",`${Ct}px`),{}}}),xi=$e=>({name:"transformOrigin",options:$e,fn(Qe){var nt,lt,Ct,Mt,Bt;const{placement:Pt,rects:gn,middlewareData:Bn}=Qe,Pn=((nt=Bn.arrow)===null||nt===void 0?void 0:nt.centerOffset)!==0,ln=Pn?0:$e.arrowWidth,Xn=Pn?0:$e.arrowHeight,[Mn,Qn]=ft(Pt),Sn={start:"0%",center:"50%",end:"100%"}[Qn],Yn=((lt=(Ct=Bn.arrow)===null||Ct===void 0?void 0:Ct.x)!==null&&lt!==void 0?lt:0)+ln/2,kr=((Mt=(Bt=Bn.arrow)===null||Bt===void 0?void 0:Bt.y)!==null&&Mt!==void 0?Mt:0)+Xn/2;let Pr="",Sr="";return Mn==="bottom"?(Pr=Pn?Sn:`${Yn}px`,Sr=-Xn+"px"):Mn==="top"?(Pr=Pn?Sn:`${Yn}px`,Sr=`${gn.floating.height+Xn}px`):Mn==="right"?(Pr=-Xn+"px",Sr=Pn?Sn:`${kr}px`):Mn==="left"&&(Pr=`${gn.floating.width+Xn}px`,Sr=Pn?Sn:`${kr}px`),{data:{x:Pr,y:Sr}}}});function ft($e){const[Qe,nt="center"]=$e.split("-");return[Qe,nt]}const zt=ir,_n=Hr,yr=si,Xo=ha,Io=(0,k.forwardRef)(($e,Qe)=>{var nt;const{container:lt=globalThis==null||(nt=globalThis.document)===null||nt===void 0?void 0:nt.body,...Ct}=$e;return lt?or().createPortal((0,k.createElement)(z.WV.div,(0,Y.Z)({},Ct,{ref:Qe})),lt):null});var fi=c(4840),Bi=c(2696),xa=c(9218),Pi=function($e){return typeof document>"u"?null:(Array.isArray($e)?$e[0]:$e).ownerDocument.body},wa=new WeakMap,Ha=new WeakMap,wi={},Fa=0,Ia=function($e){return $e&&($e.host||Ia($e.parentNode))},Ys=function($e,Qe,nt,lt){var Ct=function(ln,Xn){return Xn.map(function(Mn){if(ln.contains(Mn))return Mn;var Qn=Ia(Mn);return Qn&&ln.contains(Qn)?Qn:(console.error("aria-hidden",Mn,"in not contained inside",ln,". Doing nothing"),null)}).filter(function(Mn){return!!Mn})}(Qe,Array.isArray($e)?$e:[$e]);wi[nt]||(wi[nt]=new WeakMap);var Mt=wi[nt],Bt=[],Pt=new Set,gn=new Set(Ct),Bn=function(ln){ln&&!Pt.has(ln)&&(Pt.add(ln),Bn(ln.parentNode))};Ct.forEach(Bn);var Pn=function(ln){ln&&!gn.has(ln)&&Array.prototype.forEach.call(ln.children,function(Xn){if(Pt.has(Xn))Pn(Xn);else{var Mn=Xn.getAttribute(lt),Qn=Mn!==null&&Mn!=="false",Sn=(wa.get(Xn)||0)+1,Yn=(Mt.get(Xn)||0)+1;wa.set(Xn,Sn),Mt.set(Xn,Yn),Bt.push(Xn),Sn===1&&Qn&&Ha.set(Xn,!0),Yn===1&&Xn.setAttribute(nt,"true"),Qn||Xn.setAttribute(lt,"true")}})};return Pn(Qe),Pt.clear(),Fa++,function(){Bt.forEach(function(ln){var Xn=wa.get(ln)-1,Mn=Mt.get(ln)-1;wa.set(ln,Xn),Mt.set(ln,Mn),Xn||(Ha.has(ln)||ln.removeAttribute(lt),Ha.delete(ln)),Mn||ln.removeAttribute(nt)}),--Fa||(wa=new WeakMap,wa=new WeakMap,Ha=new WeakMap,wi={})}},Cr=function($e,Qe,nt){nt===void 0&&(nt="data-aria-hidden");var lt=Array.from(Array.isArray($e)?$e:[$e]),Ct=Qe||Pi($e);return Ct?(lt.push.apply(lt,Array.from(Ct.querySelectorAll("[aria-live]"))),Ys(lt,Ct,nt,"aria-hidden")):function(){return null}},pa=function(){return pa=Object.assign||function($e){for(var Qe,nt=1,lt=arguments.length;nt<lt;nt++)for(var Ct in Qe=arguments[nt])Object.prototype.hasOwnProperty.call(Qe,Ct)&&($e[Ct]=Qe[Ct]);return $e},pa.apply(this,arguments)};function Yu($e,Qe){var nt={};for(var lt in $e)Object.prototype.hasOwnProperty.call($e,lt)&&Qe.indexOf(lt)<0&&(nt[lt]=$e[lt]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function"){var Ct=0;for(lt=Object.getOwnPropertySymbols($e);Ct<lt.length;Ct++)Qe.indexOf(lt[Ct])<0&&Object.prototype.propertyIsEnumerable.call($e,lt[Ct])&&(nt[lt[Ct]]=$e[lt[Ct]])}return nt}function tu($e,Qe,nt){if(nt||arguments.length===2)for(var lt,Ct=0,Mt=Qe.length;Ct<Mt;Ct++)!lt&&Ct in Qe||(lt||(lt=Array.prototype.slice.call(Qe,0,Ct)),lt[Ct]=Qe[Ct]);return $e.concat(lt||Array.prototype.slice.call(Qe))}typeof SuppressedError=="function"&&SuppressedError;var Gs="right-scroll-bar-position",rc="width-before-scroll-bar";function _p($e,Qe){return nt=Qe||null,lt=function(Mt){return $e.forEach(function(Bt){return function(Pt,gn){return typeof Pt=="function"?Pt(gn):Pt&&(Pt.current=gn),Pt}(Bt,Mt)})},(Ct=(0,k.useState)(function(){return{value:nt,callback:lt,facade:{get current(){return Ct.value},set current(Mt){var Bt=Ct.value;Bt!==Mt&&(Ct.value=Mt,Ct.callback(Mt,Bt))}}}})[0]).callback=lt,Ct.facade;var nt,lt,Ct}function oc($e){return $e}function bd($e,Qe){Qe===void 0&&(Qe=oc);var nt=[],lt=!1,Ct={read:function(){if(lt)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return nt.length?nt[nt.length-1]:$e},useMedium:function(Mt){var Bt=Qe(Mt,lt);return nt.push(Bt),function(){nt=nt.filter(function(Pt){return Pt!==Bt})}},assignSyncMedium:function(Mt){for(lt=!0;nt.length;){var Bt=nt;nt=[],Bt.forEach(Mt)}nt={push:function(Pt){return Mt(Pt)},filter:function(){return nt}}},assignMedium:function(Mt){lt=!0;var Bt=[];if(nt.length){var Pt=nt;nt=[],Pt.forEach(Mt),Bt=nt}var gn=function(){var Pn=Bt;Bt=[],Pn.forEach(Mt)},Bn=function(){return Promise.resolve().then(gn)};Bn(),nt={push:function(Pn){Bt.push(Pn),Bn()},filter:function(Pn){return Bt=Bt.filter(Pn),nt}}}};return Ct}var Gu=function($e){$e===void 0&&($e={});var Qe=bd(null);return Qe.options=pa({async:!0,ssr:!1},$e),Qe}(),tf=function(){},nf=k.forwardRef(function($e,Qe){var nt=k.useRef(null),lt=k.useState({onScrollCapture:tf,onWheelCapture:tf,onTouchMoveCapture:tf}),Ct=lt[0],Mt=lt[1],Bt=$e.forwardProps,Pt=$e.children,gn=$e.className,Bn=$e.removeScrollBar,Pn=$e.enabled,ln=$e.shards,Xn=$e.sideCar,Mn=$e.noIsolation,Qn=$e.inert,Sn=$e.allowPinchZoom,Yn=$e.as,kr=Yn===void 0?"div":Yn,Pr=Yu($e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),Sr=Xn,nr=_p([nt,Qe]),oo=pa(pa({},Pr),Ct);return k.createElement(k.Fragment,null,Pn&&k.createElement(Sr,{sideCar:Gu,removeScrollBar:Bn,shards:ln,noIsolation:Mn,inert:Qn,setCallbacks:Mt,allowPinchZoom:!!Sn,lockRef:nt}),Bt?k.cloneElement(k.Children.only(Pt),pa(pa({},oo),{ref:nr})):k.createElement(kr,pa({},oo,{className:gn,ref:nr}),Pt))});nf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},nf.classNames={fullWidth:rc,zeroRight:Gs};var g0=function($e){var Qe=$e.sideCar,nt=Yu($e,["sideCar"]);if(!Qe)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var lt=Qe.read();if(!lt)throw new Error("Sidecar medium not found");return k.createElement(lt,pa({},nt))};g0.isSideCarExport=!0;function m0(){if(!document)return null;var $e=document.createElement("style");$e.type="text/css";var Qe=c.nc;return Qe&&$e.setAttribute("nonce",Qe),$e}var rf=function(){var $e=0,Qe=null;return{add:function(nt){var lt,Ct;$e==0&&(Qe=m0())&&(Ct=nt,(lt=Qe).styleSheet?lt.styleSheet.cssText=Ct:lt.appendChild(document.createTextNode(Ct)),function(Mt){(document.head||document.getElementsByTagName("head")[0]).appendChild(Mt)}(Qe)),$e++},remove:function(){!--$e&&Qe&&(Qe.parentNode&&Qe.parentNode.removeChild(Qe),Qe=null)}}},v0=function(){var $e,Qe=($e=rf(),function(nt,lt){k.useEffect(function(){return $e.add(nt),function(){$e.remove()}},[nt&&lt])});return function(nt){var lt=nt.styles,Ct=nt.dynamic;return Qe(lt,Ct),null}},Xu={left:0,top:0,right:0,gap:0},nu=function($e){return parseInt($e||"",10)||0},gs=function($e){if($e===void 0&&($e="margin"),typeof window>"u")return Xu;var Qe=function(Ct){var Mt=window.getComputedStyle(document.body),Bt=Mt[Ct==="padding"?"paddingLeft":"marginLeft"],Pt=Mt[Ct==="padding"?"paddingTop":"marginTop"],gn=Mt[Ct==="padding"?"paddingRight":"marginRight"];return[nu(Bt),nu(Pt),nu(gn)]}($e),nt=document.documentElement.clientWidth,lt=window.innerWidth;return{left:Qe[0],top:Qe[1],right:Qe[2],gap:Math.max(0,lt-nt+Qe[2]-Qe[0])}},Ep=v0(),t2=function($e,Qe,nt,lt){var Ct=$e.left,Mt=$e.top,Bt=$e.right,Pt=$e.gap;return nt===void 0&&(nt="margin"),`
  .`.concat("with-scroll-bars-hidden",` {
   overflow: hidden `).concat(lt,`;
   padding-right: `).concat(Pt,"px ").concat(lt,`;
  }
  body {
    overflow: hidden `).concat(lt,`;
    overscroll-behavior: contain;
    `).concat([Qe&&"position: relative ".concat(lt,";"),nt==="margin"&&`
    padding-left: `.concat(Ct,`px;
    padding-top: `).concat(Mt,`px;
    padding-right: `).concat(Bt,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Pt,"px ").concat(lt,`;
    `),nt==="padding"&&"padding-right: ".concat(Pt,"px ").concat(lt,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gs,` {
    right: `).concat(Pt,"px ").concat(lt,`;
  }
  
  .`).concat(rc,` {
    margin-right: `).concat(Pt,"px ").concat(lt,`;
  }
  
  .`).concat(Gs," .").concat(Gs,` {
    right: 0 `).concat(lt,`;
  }
  
  .`).concat(rc," .").concat(rc,` {
    margin-right: 0 `).concat(lt,`;
  }
  
  body {
    `).concat("--removed-body-scroll-bar-size",": ").concat(Pt,`px;
  }
`)},$c=function($e){var Qe=$e.noRelative,nt=$e.noImportant,lt=$e.gapMode,Ct=lt===void 0?"margin":lt,Mt=k.useMemo(function(){return gs(Ct)},[Ct]);return k.createElement(Ep,{styles:t2(Mt,!Qe,Ct,nt?"":"!important")})},ru=!1;if(typeof window<"u")try{var Xs=Object.defineProperty({},"passive",{get:function(){return ru=!0,!0}});window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{ru=!1}var Ml=!!ru&&{passive:!1},ms=function($e,Qe){var nt=window.getComputedStyle($e);return nt[Qe]!=="hidden"&&!(nt.overflowY===nt.overflowX&&!function(lt){return lt.tagName==="TEXTAREA"}($e)&&nt[Qe]==="visible")},qu=function($e,Qe){var nt=Qe;do{if(typeof ShadowRoot<"u"&&nt instanceof ShadowRoot&&(nt=nt.host),jc($e,nt)){var lt=yd($e,nt);if(lt[1]>lt[2])return!0}nt=nt.parentNode}while(nt&&nt!==document.body);return!1},jc=function($e,Qe){return $e==="v"?function(nt){return ms(nt,"overflowY")}(Qe):function(nt){return ms(nt,"overflowX")}(Qe)},yd=function($e,Qe){return $e==="v"?[(nt=Qe).scrollTop,nt.scrollHeight,nt.clientHeight]:function(lt){return[lt.scrollLeft,lt.scrollWidth,lt.clientWidth]}(Qe);var nt},ou=function($e){return"changedTouches"in $e?[$e.changedTouches[0].clientX,$e.changedTouches[0].clientY]:[0,0]},Pp=function($e){return[$e.deltaX,$e.deltaY]},xd=function($e){return $e&&"current"in $e?$e.current:$e},of=function($e){return`
  .block-interactivity-`.concat($e,` {pointer-events: none;}
  .allow-interactivity-`).concat($e,` {pointer-events: all;}
`)},Rc=0,ic=[],wd,n2=(wd=function($e){var Qe=k.useRef([]),nt=k.useRef([0,0]),lt=k.useRef(),Ct=k.useState(Rc++)[0],Mt=k.useState(function(){return v0()})[0],Bt=k.useRef($e);k.useEffect(function(){Bt.current=$e},[$e]),k.useEffect(function(){if($e.inert){document.body.classList.add("block-interactivity-".concat(Ct));var Sn=tu([$e.lockRef.current],($e.shards||[]).map(xd),!0).filter(Boolean);return Sn.forEach(function(Yn){return Yn.classList.add("allow-interactivity-".concat(Ct))}),function(){document.body.classList.remove("block-interactivity-".concat(Ct)),Sn.forEach(function(Yn){return Yn.classList.remove("allow-interactivity-".concat(Ct))})}}},[$e.inert,$e.lockRef.current,$e.shards]);var Pt=k.useCallback(function(Sn,Yn){if("touches"in Sn&&Sn.touches.length===2)return!Bt.current.allowPinchZoom;var kr,Pr=ou(Sn),Sr=nt.current,nr="deltaX"in Sn?Sn.deltaX:Sr[0]-Pr[0],oo="deltaY"in Sn?Sn.deltaY:Sr[1]-Pr[1],to=Sn.target,bo=Math.abs(nr)>Math.abs(oo)?"h":"v";if("touches"in Sn&&bo==="h"&&to.type==="range")return!1;var O=qu(bo,to);if(!O)return!0;if(O?kr=bo:(kr=bo==="v"?"h":"v",O=qu(bo,to)),!O)return!1;if(!lt.current&&"changedTouches"in Sn&&(nr||oo)&&(lt.current=kr),!kr)return!0;var de=lt.current||kr;return function(ke,Oe,He,Te,Ce){var Xe=function(Nr,Jn){return Nr==="h"&&Jn==="rtl"?-1:1}(ke,window.getComputedStyle(Oe).direction),Je=Xe*Te,ct=He.target,yt=Oe.contains(ct),wt=!1,kt=Je>0,en=0,wn=0;do{var In=yd(ke,ct),qn=In[0],cr=In[1]-In[2]-Xe*qn;(qn||cr)&&jc(ke,ct)&&(en+=cr,wn+=qn),ct=ct.parentNode}while(!yt&&ct!==document.body||yt&&(Oe.contains(ct)||Oe===ct));return(kt&&(Ce&&en===0||!Ce&&Je>en)||!kt&&(Ce&&wn===0||!Ce&&-Je>wn))&&(wt=!0),wt}(de,Yn,Sn,de==="h"?nr:oo,!0)},[]),gn=k.useCallback(function(Sn){var Yn=Sn;if(ic.length&&ic[ic.length-1]===Mt){var kr="deltaY"in Yn?Pp(Yn):ou(Yn),Pr=Qe.current.filter(function(nr){return nr.name===Yn.type&&nr.target===Yn.target&&function(oo,to){return oo[0]===to[0]&&oo[1]===to[1]}(nr.delta,kr)})[0];if(Pr&&Pr.should)Yn.cancelable&&Yn.preventDefault();else if(!Pr){var Sr=(Bt.current.shards||[]).map(xd).filter(Boolean).filter(function(nr){return nr.contains(Yn.target)});(Sr.length>0?Pt(Yn,Sr[0]):!Bt.current.noIsolation)&&Yn.cancelable&&Yn.preventDefault()}}},[]),Bn=k.useCallback(function(Sn,Yn,kr,Pr){var Sr={name:Sn,delta:Yn,target:kr,should:Pr};Qe.current.push(Sr),setTimeout(function(){Qe.current=Qe.current.filter(function(nr){return nr!==Sr})},1)},[]),Pn=k.useCallback(function(Sn){nt.current=ou(Sn),lt.current=void 0},[]),ln=k.useCallback(function(Sn){Bn(Sn.type,Pp(Sn),Sn.target,Pt(Sn,$e.lockRef.current))},[]),Xn=k.useCallback(function(Sn){Bn(Sn.type,ou(Sn),Sn.target,Pt(Sn,$e.lockRef.current))},[]);k.useEffect(function(){return ic.push(Mt),$e.setCallbacks({onScrollCapture:ln,onWheelCapture:ln,onTouchMoveCapture:Xn}),document.addEventListener("wheel",gn,Ml),document.addEventListener("touchmove",gn,Ml),document.addEventListener("touchstart",Pn,Ml),function(){ic=ic.filter(function(Sn){return Sn!==Mt}),document.removeEventListener("wheel",gn,Ml),document.removeEventListener("touchmove",gn,Ml),document.removeEventListener("touchstart",Pn,Ml)}},[]);var Mn=$e.removeScrollBar,Qn=$e.inert;return k.createElement(k.Fragment,null,Qn?k.createElement(Mt,{styles:of(Ct)}):null,Mn?k.createElement($c,{gapMode:"margin"}):null)},Gu.useMedium(wd),g0),Mp=k.forwardRef(function($e,Qe){return k.createElement(nf,pa({},$e,{ref:Qe,sideCar:n2}))});Mp.classNames=nf.classNames;var af=Mp;const cs="Popover",[Ip,Ay]=(0,F.b)(cs,[xn]),sf=xn(),[Tp,Cd]=Ip(cs),r2=$e=>{const{__scopePopover:Qe,children:nt,open:lt,defaultOpen:Ct,onOpenChange:Mt,modal:Bt=!1}=$e,Pt=sf(Qe),gn=(0,k.useRef)(null),[Bn,Pn]=(0,k.useState)(!1),[ln=!1,Xn]=(0,xa.T)({prop:lt,defaultProp:Ct,onChange:Mt});return(0,k.createElement)(zt,Pt,(0,k.createElement)(Tp,{scope:Qe,contentId:(0,Re.M)(),triggerRef:gn,open:ln,onOpenChange:Xn,onOpenToggle:(0,k.useCallback)(()=>Xn(Mn=>!Mn),[Xn]),hasCustomAnchor:Bn,onCustomAnchorAdd:(0,k.useCallback)(()=>Pn(!0),[]),onCustomAnchorRemove:(0,k.useCallback)(()=>Pn(!1),[]),modal:Bt},nt))},iu="PopoverTrigger",au=(0,k.forwardRef)(($e,Qe)=>{const{__scopePopover:nt,...lt}=$e,Ct=Cd(iu,nt),Mt=sf(nt),Bt=(0,W.e)(Qe,Ct.triggerRef),Pt=(0,k.createElement)(z.WV.button,(0,Y.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":Ct.open,"aria-controls":Ct.contentId,"data-state":Sd(Ct.open)},lt,{ref:Bt,onClick:(0,E.M)($e.onClick,Ct.onOpenToggle)}));return Ct.hasCustomAnchor?Pt:(0,k.createElement)(_n,(0,Y.Z)({asChild:!0},Mt),Pt)}),b0="PopoverPortal",[Op,su]=Ip(b0,{forceMount:void 0}),lf=$e=>{const{__scopePopover:Qe,forceMount:nt,children:lt,container:Ct}=$e,Mt=Cd(b0,Qe);return(0,k.createElement)(Op,{scope:Qe,forceMount:nt},(0,k.createElement)(fi.z,{present:nt||Mt.open},(0,k.createElement)(Io,{asChild:!0,container:Ct},lt)))},qs="PopoverContent",Ju=(0,k.forwardRef)(($e,Qe)=>{const nt=su(qs,$e.__scopePopover),{forceMount:lt=nt.forceMount,...Ct}=$e,Mt=Cd(qs,$e.__scopePopover);return(0,k.createElement)(fi.z,{present:lt||Mt.open},Mt.modal?(0,k.createElement)(y0,(0,Y.Z)({},Ct,{ref:Qe})):(0,k.createElement)(Ap,(0,Y.Z)({},Ct,{ref:Qe})))}),y0=(0,k.forwardRef)(($e,Qe)=>{const nt=Cd(qs,$e.__scopePopover),lt=(0,k.useRef)(null),Ct=(0,W.e)(Qe,lt),Mt=(0,k.useRef)(!1);return(0,k.useEffect)(()=>{const Bt=lt.current;if(Bt)return Cr(Bt)},[]),(0,k.createElement)(af,{as:Bi.g7,allowPinchZoom:!0},(0,k.createElement)(Il,(0,Y.Z)({},$e,{ref:Ct,trapFocus:nt.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,E.M)($e.onCloseAutoFocus,Bt=>{var Pt;Bt.preventDefault(),Mt.current||(Pt=nt.triggerRef.current)===null||Pt===void 0||Pt.focus()}),onPointerDownOutside:(0,E.M)($e.onPointerDownOutside,Bt=>{const Pt=Bt.detail.originalEvent,gn=Pt.button===0&&Pt.ctrlKey===!0,Bn=Pt.button===2||gn;Mt.current=Bn},{checkForDefaultPrevented:!1}),onFocusOutside:(0,E.M)($e.onFocusOutside,Bt=>Bt.preventDefault(),{checkForDefaultPrevented:!1})})))}),Ap=(0,k.forwardRef)(($e,Qe)=>{const nt=Cd(qs,$e.__scopePopover),lt=(0,k.useRef)(!1);return(0,k.createElement)(Il,(0,Y.Z)({},$e,{ref:Qe,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:Ct=>{var Mt,Bt;(Mt=$e.onCloseAutoFocus)===null||Mt===void 0||Mt.call($e,Ct),Ct.defaultPrevented||(lt.current||(Bt=nt.triggerRef.current)===null||Bt===void 0||Bt.focus(),Ct.preventDefault()),lt.current=!1},onInteractOutside:Ct=>{var Mt,Bt;(Mt=$e.onInteractOutside)===null||Mt===void 0||Mt.call($e,Ct),Ct.defaultPrevented||(lt.current=!0);const Pt=Ct.target;!((Bt=nt.triggerRef.current)===null||Bt===void 0)&&Bt.contains(Pt)&&Ct.preventDefault()}}))}),Il=(0,k.forwardRef)(($e,Qe)=>{const{__scopePopover:nt,trapFocus:lt,onOpenAutoFocus:Ct,onCloseAutoFocus:Mt,disableOutsidePointerEvents:Bt,onEscapeKeyDown:Pt,onPointerDownOutside:gn,onFocusOutside:Bn,onInteractOutside:Pn,...ln}=$e,Xn=Cd(qs,nt),Mn=sf(nt);return se(),(0,k.createElement)(le,{asChild:!0,loop:!0,trapped:lt,onMountAutoFocus:Ct,onUnmountAutoFocus:Mt},(0,k.createElement)(re,{asChild:!0,disableOutsidePointerEvents:Bt,onInteractOutside:Pn,onEscapeKeyDown:Pt,onPointerDownOutside:gn,onFocusOutside:Bn,onDismiss:()=>Xn.onOpenChange(!1)},(0,k.createElement)(yr,(0,Y.Z)({"data-state":Sd(Xn.open),role:"dialog",id:Xn.contentId},Mn,ln,{ref:Qe,style:{...ln.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"}}))))}),x0=(0,k.forwardRef)(($e,Qe)=>{const{__scopePopover:nt,...lt}=$e,Ct=sf(nt);return(0,k.createElement)(Xo,(0,Y.Z)({},Ct,lt,{ref:Qe}))});function Sd($e){return $e?"open":"closed"}const ac=r2,w0=au,qi=lf,lu=Ju,cf=x0;var Tl=c(736),Ms=c(9487),Lp=c(3646),df=c(3550),o2=function($e){var Qe=$e.color,nt=$e.onChange,lt=$e.label,Ct=(0,Tl.Fy)(),Mt=(0,k.useState)(Qe),Bt=(0,g.Z)(Mt,2),Pt=Bt[0],gn=Bt[1],Bn=(0,C.KO)(j),Pn=(0,g.Z)(Bn,2),ln=Pn[0],Xn=Pn[1];(0,k.useEffect)(function(){gn(Qe)},[Qe]);var Mn=(0,k.useCallback)(function(nr){var oo=nr.toLowerCase(),to=Ol(oo);to&&nt(to),gn(oo)},[nt]),Qn=(0,k.useRef)(null),Sn=(0,k.useRef)(null);(0,k.useEffect)(function(){Qn.current&&Qn.current.focus()},[ln]);var Yn=(0,C.KO)(df.$,Ms.yE),kr=(0,g.Z)(Yn,2),Pr=kr[0],Sr=kr[1];return(0,k.useEffect)(function(){return function(){Sr(null)}},[Sr]),(0,w.jsxs)("div",{className:"color-picker__input-label",children:[(0,w.jsx)("div",{className:"color-picker__input-hash",children:"#"}),(0,w.jsx)("input",{ref:ln==="hex"?Qn:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":lt,onChange:function(nr){Mn(nr.target.value)},value:(Pt||"").replace(/^#/,""),onBlur:function(){gn(Qe)},tabIndex:-1,onFocus:function(){return Xn("hex")},onKeyDown:function(nr){var oo;nr.key!==Z.tW.TAB&&(nr.key===Z.tW.ESCAPE&&((oo=Sn.current)===null||oo===void 0||oo.focus()),nr.stopPropagation())}}),!Ct.isMobile&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),(0,w.jsx)("div",{ref:Sn,className:(0,b.Z)("excalidraw-eye-dropper-trigger",{selected:Pr}),onClick:function(){return Sr(function(nr){return nr?null:{keepOpenOnAlt:!1,onSelect:function(oo){return nt(oo)}}})},title:"".concat((0,S.t)("labels.eyeDropper"),"  ").concat(Z.tW.I.toLocaleUpperCase()," or ").concat((0,m.uY)("Alt")," "),children:Lp.$W})]})]})},$p=c(487),i2=c.n($p),Qu=c(631),C0=c.n(Qu),uf=c(2052),hf=c.n(uf),S0=c(4010),jp=c.n(S0),En=c(1469),k0=c.n(En),_0=c(9329),Rp=c.n(_0),cu=c(4269),Dc={};Dc.styleTagTransform=Rp(),Dc.setAttributes=jp(),Dc.insert=hf().bind(null,"head"),Dc.domAPI=C0(),Dc.insertStyleElement=k0(),i2()(cu.Z,Dc),cu.Z&&cu.Z.locals&&cu.Z.locals;var ff=function($e){var Qe=new Option().style;return Qe.color=$e,!!Qe.color},Ol=function($e){return(0,m.Qm)($e)?$e:ff("#".concat($e))?"#".concat($e):ff($e)?$e:null},du=function($e){var Qe=$e.type,nt=$e.color,lt=$e.onChange,Ct=$e.label,Mt=$e.elements,Bt=$e.palette,Pt=Bt===void 0?v.HO:Bt,gn=$e.updateData,Bn=(0,C.KO)(j),Pn=(0,g.Z)(Bn,2)[1],ln=(0,C.KO)(df.$,Ms.yE),Xn=(0,g.Z)(ln,2),Mn=Xn[0],Qn=Xn[1],Sn=(0,Tl.J0)().container,Yn=(0,Tl.Fy)(),kr=Yn.isMobile,Pr=Yn.isLandscape,Sr=(0,w.jsxs)("div",{children:[(0,w.jsx)(H,{children:(0,S.t)("colorPicker.hexCode")}),(0,w.jsx)(o2,{color:nt,label:Ct,onChange:function(to){lt(to)}})]}),nr=(0,k.useRef)(null),oo=function(){var to,bo;(to=nr.current)===null||to===void 0||(bo=to.querySelector(".color-picker-content"))===null||bo===void 0||bo.focus()};return(0,w.jsx)(qi,{container:Sn,children:(0,w.jsxs)(lu,{ref:nr,className:"focus-visible-none","data-prevent-outside-click":!0,onFocusOutside:function(to){oo(),to.preventDefault()},onPointerDownOutside:function(to){Mn&&to.preventDefault()},onCloseAutoFocus:function(to){to.stopPropagation(),to.preventDefault(),Sn&&!(0,m.y1)(document.activeElement)&&Sn.focus(),gn({openPopup:null}),Pn(null)},side:kr&&!Pr?"bottom":"right",align:kr&&!Pr?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:9999,backgroundColor:"var(--popup-bg-color)",maxWidth:"208px",maxHeight:window.innerHeight,padding:"12px",borderRadius:"8px",boxSizing:"border-box",overflowY:"auto",boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702)"},children:[Pt?(0,w.jsx)(R,{palette:Pt,color:nt,onChange:function(to){lt(to)},onEyeDropperToggle:function(to){Qn(function(bo){return to?((bo=bo||{keepOpenOnAlt:!0,onSelect:lt}).keepOpenOnAlt=!0,bo):to===!1||bo?null:{keepOpenOnAlt:!1,onSelect:lt}})},onEscape:function(to){Mn?Qn(null):(0,m.s)(to.target)?oo():gn({openPopup:null})},label:Ct,type:Qe,elements:Mt,updateData:gn,children:Sr}):Sr,(0,w.jsx)(cf,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})},uu=function($e){var Qe=$e.label,nt=$e.color,lt=$e.type;return(0,w.jsx)(w0,{type:"button",className:(0,b.Z)("color-picker__button active-color",{"is-transparent":nt==="transparent"||!nt}),"aria-label":Qe,style:nt?{"--swatch-color":nt}:void 0,title:lt==="elementStroke"?(0,S.t)("labels.showStroke"):(0,S.t)("labels.showBackground"),children:(0,w.jsx)("div",{className:"color-picker__button-outline"})})},eh=function($e){var Qe=$e.type,nt=$e.color,lt=$e.onChange,Ct=$e.label,Mt=$e.elements,Bt=$e.palette,Pt=Bt===void 0?v.HO:Bt,gn=$e.topPicks,Bn=$e.updateData,Pn=$e.appState;return(0,w.jsx)("div",{children:(0,w.jsxs)("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[(0,w.jsx)(_,{activeColor:nt,onChange:lt,type:Qe,topPicks:gn}),(0,w.jsx)("div",{style:{width:1,height:"100%",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),(0,w.jsxs)(ac,{open:Pn.openPopup===Qe,onOpenChange:function(ln){Bn({openPopup:ln?Qe:null})},children:[(0,w.jsx)(uu,{color:nt,label:Ct,type:Qe}),Pn.openPopup===Qe&&(0,w.jsx)(du,{type:Qe,color:nt,onChange:lt,label:Ct,elements:Mt,palette:Pt,updateData:Bn})]})]})})}},7046:function(f,h,c){c.d(h,{Z:function(){return Y}});var g=c(7169),m=c(2726),b=c(8211),v=c(8396),w=c(487),_=c.n(w),k=c(631),y=c.n(k),S=c(2052),C=c.n(S),I=c(4010),A=c.n(I),T=c(1469),L=c.n(T),j=c(9329),$=c.n(j),ee=c(9393),Q={};Q.styleTagTransform=$(),Q.setAttributes=A(),Q.insert=C().bind(null,"head"),Q.domAPI=y(),Q.insertStyleElement=L(),_()(ee.Z,Q),ee.Z&&ee.Z.locals&&ee.Z.locals;var pe=c(6428),ie=c(6274),te=c(5448),Z=c(736),D=c(9487),B=c(9980),H=["onConfirm","onCancel","children","confirmText","cancelText","className"];function V(E,W){var F=Object.keys(E);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(E);W&&(z=z.filter(function(q){return Object.getOwnPropertyDescriptor(E,q).enumerable})),F.push.apply(F,z)}return F}function R(E){for(var W=1;W<arguments.length;W++){var F=arguments[W]!=null?arguments[W]:{};W%2?V(Object(F),!0).forEach(function(z){(0,g.Z)(E,z,F[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(F)):V(Object(F)).forEach(function(z){Object.defineProperty(E,z,Object.getOwnPropertyDescriptor(F,z))})}return E}var Y=function(E){var W=E.onConfirm,F=E.onCancel,z=E.children,q=E.confirmText,fe=q===void 0?(0,b.t)("buttons.confirm"):q,ce=E.cancelText,U=ce===void 0?(0,b.t)("buttons.cancel"):ce,ve=E.className,oe=ve===void 0?"":ve,re=(0,m.Z)(E,H),ae=(0,Z.n9)(),me=(0,ie.b9)(te.uh,D.yE),he=(0,Z.J0)().container;return(0,B.jsxs)(v.V,R(R({onCloseRequest:F,size:"small"},re),{},{className:"confirm-dialog ".concat(oe),children:[z,(0,B.jsxs)("div",{className:"confirm-dialog-buttons",children:[(0,B.jsx)(pe.Z,{label:U,onClick:function(){ae({openMenu:null}),me(!1),F(),he==null||he.focus()}}),(0,B.jsx)(pe.Z,{label:fe,onClick:function(){ae({openMenu:null}),me(!1),W(),he==null||he.focus()},actionType:"danger"})]})]}))}},704:function(f,h,c){c.d(h,{O:function(){return te}});var g=c(2726),m=c(7169),b=c(9076),v=c(2335),w=c(8690),_=c(96),k=c(8211),y=c(6340),S=c(736),C=c(7145),I=c(5448),A=c(585),T=c(9980),L=c(9787),j=["children"],$=["children","className","onDock","docked"];function ee(Z,D){var B=Object.keys(Z);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Z);D&&(H=H.filter(function(V){return Object.getOwnPropertyDescriptor(Z,V).enumerable})),B.push.apply(B,H)}return B}function Q(Z){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?ee(Object(B),!0).forEach(function(H){(0,m.Z)(Z,H,B[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(B)):ee(Object(B)).forEach(function(H){Object.defineProperty(Z,H,Object.getOwnPropertyDescriptor(B,H))})}return Z}var pe=(0,C.$)("DefaultSidebarTrigger",function(Z){var D=(0,w.R6)().DefaultSidebarTriggerTunnel;return(0,T.jsx)(D.In,{children:(0,T.jsx)(A.YE.Trigger,Q(Q({},Z),{},{className:"default-sidebar-trigger",name:v.Cc.name}))})});pe.displayName="DefaultSidebarTrigger";var ie=function(Z){var D=Z.children,B=(0,g.Z)(Z,j),H=(0,w.R6)().DefaultSidebarTabTriggersTunnel;return(0,T.jsx)(H.In,{children:(0,T.jsx)(A.YE.TabTriggers,Q(Q({},B),{},{children:D}))})};ie.displayName="DefaultTabTriggers";var te=Object.assign((0,C.$)("DefaultSidebar",function(Z){var D=Z.children,B=Z.className,H=Z.onDock,V=Z.docked,R=(0,g.Z)(Z,$),Y=(0,_.I)(),E=(0,S.n9)(),W=(0,w.R6)().DefaultSidebarTabTriggersTunnel;return(0,L.createElement)(A.YE,Q(Q({},R),{},{name:"default",key:"default",className:(0,b.Z)("default-sidebar",B),docked:V??Y.defaultSidebarDockedPreference,onDock:H===!1||!H&&V!=null?void 0:(0,y.Mj)(H,function(F){E({defaultSidebarDockedPreference:F})})}),(0,T.jsxs)(A.YE.Tabs,{children:[(0,T.jsxs)(A.YE.Header,{children:[R.__fallback&&(0,T.jsx)("div",{style:{color:"var(--color-primary)",fontSize:"1.2em",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",paddingRight:"1em"},children:(0,k.t)("toolBar.library")}),(0,T.jsx)(W.Out,{})]}),(0,T.jsx)(A.YE.Tab,{tab:v.tf,children:(0,T.jsx)(I.rY,{})}),D]}))}),{Trigger:pe,TabTriggers:ie})},8396:function(f,h,c){c.d(h,{V:function(){return fe}});var g=c(2577),m=c(9076),b=c(9787),v=c(8211),w=c(736),_=c(6066),k=c(487),y=c.n(k),S=c(631),C=c.n(S),I=c(2052),A=c.n(I),T=c(4010),L=c.n(T),j=c(1469),$=c.n(j),ee=c(9329),Q=c.n(ee),pe=c(9482),ie={};ie.styleTagTransform=Q(),ie.setAttributes=L(),ie.insert=A().bind(null,"head"),ie.domAPI=C(),ie.insertStyleElement=$(),y()(pe.Z,ie),pe.Z&&pe.Z.locals&&pe.Z.locals;var te=c(3646),Z=c(1881),D=c(6843),B={};B.styleTagTransform=Q(),B.setAttributes=L(),B.insert=A().bind(null,"head"),B.domAPI=C(),B.insertStyleElement=$(),y()(D.Z,B),D.Z&&D.Z.locals&&D.Z.locals;var H=c(5156),V=c(8101),R=c(9980),Y=function(ce){var U=ce.closeOnClickOutside,ve=U===void 0||U,oe=(0,V.F)({className:"excalidraw-modal-container"});return oe?(0,H.createPortal)((0,R.jsxs)("div",{className:(0,m.Z)("Modal",ce.className),role:"dialog","aria-modal":"true",onKeyDown:function(re){re.key===_.tW.ESCAPE&&(re.nativeEvent.stopImmediatePropagation(),re.stopPropagation(),ce.onCloseRequest())},"aria-labelledby":ce.labelledBy,"data-prevent-outside-click":!0,children:[(0,R.jsx)("div",{className:"Modal__background",onClick:ve?ce.onCloseRequest:void 0}),(0,R.jsx)("div",{className:"Modal__content",style:{"--max-width":"".concat(ce.maxWidth,"px")},tabIndex:0,children:ce.children})]}),oe):null},E=c(6340),W=c(6274),F=c(5448),z=c(9487);function q(ce){if(ce&&typeof ce=="number")return ce;switch(ce){case"small":return 550;case"wide":return 1024;default:return 800}}var fe=function(ce){var U=function(){var be=(0,b.useState)(null),le=(0,g.Z)(be,2),ye=le[0],ue=le[1];return[ye,(0,b.useCallback)(function(xe){return ue(xe)},[])]}(),ve=(0,g.Z)(U,2),oe=ve[0],re=ve[1],ae=(0,b.useState)(document.activeElement),me=(0,g.Z)(ae,1)[0],he=(0,w.J0)().id,se=(0,w.Fy)();(0,b.useEffect)(function(){if(oe){var be=(0,E.xp)(oe);be.length>0&&ce.autofocus!==!1&&(be[1]||be[0]).focus();var le=function(ye){if(ye.key===_.tW.TAB){var ue=(0,E.xp)(oe),xe=document.activeElement,Pe=ue.findIndex(function(Ne){return Ne===xe});Pe===0&&ye.shiftKey?(ue[ue.length-1].focus(),ye.preventDefault()):Pe!==ue.length-1||ye.shiftKey||(ue[0].focus(),ye.preventDefault())}};return oe.addEventListener("keydown",le),function(){return oe.removeEventListener("keydown",le)}}},[oe,ce.autofocus]);var ge=(0,w.n9)(),X=(0,W.b9)(F.uh,z.yE),we=function(){ge({openMenu:null}),X(!1),me.focus(),ce.onCloseRequest()};return(0,R.jsx)(Y,{className:(0,m.Z)("Dialog",ce.className),labelledBy:"dialog-title",maxWidth:q(ce.size),onCloseRequest:we,closeOnClickOutside:ce.closeOnClickOutside,children:(0,R.jsxs)(Z.W,{ref:re,children:[ce.title&&(0,R.jsx)("h2",{id:"".concat(he,"-dialog-title"),className:"Dialog__title",children:(0,R.jsx)("span",{className:"Dialog__titleContent",children:ce.title})}),(0,R.jsx)("button",{className:"Dialog__close",onClick:we,title:(0,v.t)("buttons.close"),"aria-label":(0,v.t)("buttons.close"),children:se.isMobile?te.op:te.Tw}),(0,R.jsx)("div",{className:"Dialog__content",children:ce.children})]})})}},6428:function(f,h,c){c.d(h,{Z:function(){return D}});var g=c(7169),m=c(2726),b=c(9076),v=c(487),w=c.n(v),_=c(631),k=c.n(_),y=c(2052),S=c.n(y),C=c(4010),I=c.n(C),A=c(1469),T=c.n(A),L=c(9329),j=c.n(L),$=c(6148),ee={};ee.styleTagTransform=j(),ee.setAttributes=I(),ee.insert=S().bind(null,"head"),ee.domAPI=k(),ee.insertStyleElement=T(),w()($.Z,ee),$.Z&&$.Z.locals&&$.Z.locals;var Q=c(5644),pe=c(9980),ie=["label","onClick","className","children","actionType","type","isLoading"];function te(B,H){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(B);H&&(R=R.filter(function(Y){return Object.getOwnPropertyDescriptor(B,Y).enumerable})),V.push.apply(V,R)}return V}function Z(B){for(var H=1;H<arguments.length;H++){var V=arguments[H]!=null?arguments[H]:{};H%2?te(Object(V),!0).forEach(function(R){(0,g.Z)(B,R,V[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):te(Object(V)).forEach(function(R){Object.defineProperty(B,R,Object.getOwnPropertyDescriptor(V,R))})}return B}var D=function(B){var H=B.label,V=B.onClick,R=B.className,Y=B.children,E=B.actionType,W=B.type,F=W===void 0?"button":W,z=B.isLoading,q=(0,m.Z)(B,ie),fe=E?"Dialog__action-button--".concat(E):"";return(0,pe.jsxs)("button",Z(Z({className:(0,b.Z)("Dialog__action-button",fe,R),type:F,"aria-label":H,onClick:V},q),{},{children:[Y&&(0,pe.jsx)("div",{style:z?{visibility:"hidden"}:{},children:Y}),(0,pe.jsx)("div",{style:z?{visibility:"hidden"}:{},children:H}),z&&(0,pe.jsx)("div",{style:{position:"absolute",inset:0},children:(0,pe.jsx)(Q.Z,{})})]}))}},3550:function(f,h,c){c.d(h,{p:function(){return fe},$:function(){return q}});var g=c(7169),m=c(6274),b=c(9787),v=c(5156),w=c(56),_=c(2335),k=c(96),y=c(1935),S=c(8101),C=c(60),I=c(6066),A=c(5317),T=c(75),L=c(1564),j=c(736),$=c(487),ee=c.n($),Q=c(631),pe=c.n(Q),ie=c(2052),te=c.n(ie),Z=c(4010),D=c.n(Z),B=c(1469),H=c.n(B),V=c(9329),R=c.n(V),Y=c(7522),E={};E.styleTagTransform=R(),E.setAttributes=D(),E.insert=te().bind(null,"head"),E.domAPI=pe(),E.insertStyleElement=H(),ee()(Y.Z,E),Y.Z&&Y.Z.locals&&Y.Z.locals;var W=c(9980);function F(ce,U){var ve=typeof Symbol<"u"&&ce[Symbol.iterator]||ce["@@iterator"];if(!ve){if(Array.isArray(ce)||(ve=function(se,ge){if(se){if(typeof se=="string")return z(se,ge);var X=Object.prototype.toString.call(se).slice(8,-1);if(X==="Object"&&se.constructor&&(X=se.constructor.name),X==="Map"||X==="Set")return Array.from(se);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return z(se,ge)}}(ce))||U&&ce&&typeof ce.length=="number"){ve&&(ce=ve);var oe=0,re=function(){};return{s:re,n:function(){return oe>=ce.length?{done:!0}:{done:!1,value:ce[oe++]}},e:function(se){throw se},f:re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae,me=!0,he=!1;return{s:function(){ve=ve.call(ce)},n:function(){var se=ve.next();return me=se.done,se},e:function(se){he=!0,ae=se},f:function(){try{me||ve.return==null||ve.return()}finally{if(he)throw ae}}}}function z(ce,U){(U==null||U>ce.length)&&(U=ce.length);for(var ve=0,oe=new Array(U);ve<U;ve++)oe[ve]=ce[ve];return oe}var q=(0,m.cn)(null),fe=function(ce){var U=ce.onCancel,ve=ce.onSelect,oe=ce.swapPreviewOnAlt,re=ce.previewType,ae=re===void 0?"backgroundColor":re,me=(0,S.F)({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),he=(0,k.I)(),se=(0,j.bd)(),ge=(0,j.qD)(),X=(0,T.eD)(se,he),we=(0,b.useRef)({selectedElements:X,app:ge});we.current.selectedElements=X,we.current.app=ge;var be=(0,j.J0)().container;(0,b.useEffect)(function(){var ye=le.current;if(ye&&ge.canvas&&me){var ue=w.HO.black,xe=!1,Pe=ge.canvas.getContext("2d"),Ne=function(Se){var Be=Se.clientX,_e=Se.clientY,ze=Se.altKey;ye.style.top="".concat(_e+20,"px"),ye.style.left="".concat(Be+20,"px");var Ve=Pe.getImageData(Be*window.devicePixelRatio-he.offsetLeft,_e*window.devicePixelRatio-he.offsetTop,1,1).data;if(ue=(0,w.vq)(Ve[0],Ve[1],Ve[2]),xe){var ut,Ie,ot=F(we.current.selectedElements);try{for(ot.s();!(Ie=ot.n()).done;){var Ye=Ie.value;(0,y.DR)(Ye,(0,g.Z)({},ze&&oe?ae==="strokeColor"?"backgroundColor":"strokeColor":ae,ue),!1),(0,A.bI)(Ye)}}catch(Ke){ot.e(Ke)}finally{ot.f()}(ut=L.Z.getScene(we.current.selectedElements[0]))===null||ut===void 0||ut.informMutation()}ye.style.background=ue},Me=function(Se){xe=!0,Se.stopImmediatePropagation()},Re=function(Se){xe=!1,be==null||be.focus(),Se.stopImmediatePropagation(),Se.preventDefault(),ve(ue,Se)},We=function(Se){Se.key===I.tW.ESCAPE&&(Se.preventDefault(),Se.stopImmediatePropagation(),U())};return me.tabIndex=-1,me.focus(),Ne({clientX:we.current.app.lastViewportPosition.x,clientY:we.current.app.lastViewportPosition.y,altKey:!1}),me.addEventListener(_.Ks.KEYDOWN,We),me.addEventListener(_.Ks.POINTER_DOWN,Me),me.addEventListener(_.Ks.POINTER_UP,Re),window.addEventListener("pointermove",Ne,{passive:!0}),window.addEventListener(_.Ks.BLUR,U),function(){xe=!1,me.removeEventListener(_.Ks.KEYDOWN,We),me.removeEventListener(_.Ks.POINTER_DOWN,Me),me.removeEventListener(_.Ks.POINTER_UP,Re),window.removeEventListener("pointermove",Ne),window.removeEventListener(_.Ks.BLUR,U)}}},[ge.canvas,me,U,ve,oe,ae,be,he.offsetLeft,he.offsetTop]);var le=(0,b.useRef)(null);return(0,C.O)(le,function(){U()},function(ye){return!!ye.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")}),me?(0,v.createPortal)((0,W.jsx)("div",{ref:le,className:"excalidraw-eye-dropper-preview"}),me):null}},1881:function(f,h,c){c.d(h,{W:function(){return Z}});var g=c(7169),m=c(487),b=c.n(m),v=c(631),w=c.n(v),_=c(2052),k=c.n(_),y=c(4010),S=c.n(y),C=c(1469),I=c.n(C),A=c(9329),T=c.n(A),L=c(7369),j={};j.styleTagTransform=T(),j.setAttributes=S(),j.insert=k().bind(null,"head"),j.domAPI=w(),j.insertStyleElement=I(),b()(L.Z,j),L.Z&&L.Z.locals&&L.Z.locals;var $=c(9787),ee=c.n($),Q=c(9076),pe=c(9980);function ie(D,B){var H=Object.keys(D);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(D);B&&(V=V.filter(function(R){return Object.getOwnPropertyDescriptor(D,R).enumerable})),H.push.apply(H,V)}return H}function te(D){for(var B=1;B<arguments.length;B++){var H=arguments[B]!=null?arguments[B]:{};B%2?ie(Object(H),!0).forEach(function(V){(0,g.Z)(D,V,H[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(H)):ie(Object(H)).forEach(function(V){Object.defineProperty(D,V,Object.getOwnPropertyDescriptor(H,V))})}return D}var Z=ee().forwardRef(function(D,B){var H=D.children,V=D.padding,R=D.className,Y=D.style;return(0,pe.jsx)("div",{className:(0,Q.Z)("Island",R),style:te({"--padding":V},Y),ref:B,children:H})})},5448:function(f,h,c){c.d(h,{rY:function(){return Hn},uh:function(){return Wt}});var g=c(1930),m=c(8950),b=c(2577),v=c(2975),w=c.n(v),_=c(9787),k=c.n(_),y=c(7053),S=c(8211),C=c(6954),I=c(7169),A=c(5523),T=c(6340),L=c(7239),j=c(2335),$=c(5644),ee=c(2791),Q=c(9980),pe=function(vt){var Nt=vt.theme,Tt=vt.id,cn=vt.libraryReturnUrl||window.location.origin+window.location.pathname;return(0,Q.jsx)("a",{className:"library-menu-browse-button",href:"".concat("https://libraries.excalidraw.com","?target=").concat(window.name||"_blank","&referrer=").concat(cn,"&useHash=true&token=").concat(Tt,"&theme=").concat(Nt,"&version=").concat(j.Kr.excalidrawLibrary),target:"_excalidraw_libraries",children:(0,S.t)("labels.libraries")})},ie=c(9076),te=function(vt){var Nt=vt.libraryReturnUrl,Tt=vt.theme,cn=vt.id,Ot=vt.style,Ln=vt.children,Wn=vt.className;return(0,Q.jsxs)("div",{className:(0,ie.Z)("library-menu-control-buttons",Wn),style:Ot,children:[(0,Q.jsx)(pe,{id:cn,libraryReturnUrl:Nt,theme:Tt}),Ln]})},Z=c(2242),D=c(9487),B=c(736),H=c(3646),V=c(1319),R=c(313),Y=c(6274),E=c(7046),W=c(9744),F=c(8396),z=c(3024),q=c(434),fe=c(6428),ce=c(487),U=c.n(ce),ve=c(631),oe=c.n(ve),re=c(2052),ae=c.n(re),me=c(4010),he=c.n(me),se=c(1469),ge=c.n(se),X=c(9329),we=c.n(X),be=c(7589),le={};le.styleTagTransform=we(),le.setAttributes=he(),le.insert=ae().bind(null,"head"),le.domAPI=oe(),le.insertStyleElement=ge(),U()(be.Z,le),be.Z&&be.Z.locals&&be.Z.locals;function ye(vt,Nt){var Tt=Object.keys(vt);if(Object.getOwnPropertySymbols){var cn=Object.getOwnPropertySymbols(vt);Nt&&(cn=cn.filter(function(Ot){return Object.getOwnPropertyDescriptor(vt,Ot).enumerable})),Tt.push.apply(Tt,cn)}return Tt}function ue(vt){for(var Nt=1;Nt<arguments.length;Nt++){var Tt=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?ye(Object(Tt),!0).forEach(function(cn){(0,I.Z)(vt,cn,Tt[cn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(Tt)):ye(Object(Tt)).forEach(function(cn){Object.defineProperty(vt,cn,Object.getOwnPropertyDescriptor(Tt,cn))})}return vt}function xe(vt,Nt){var Tt=typeof Symbol<"u"&&vt[Symbol.iterator]||vt["@@iterator"];if(!Tt){if(Array.isArray(vt)||(Tt=function(zn,Et){if(zn){if(typeof zn=="string")return Pe(zn,Et);var Dt=Object.prototype.toString.call(zn).slice(8,-1);if(Dt==="Object"&&zn.constructor&&(Dt=zn.constructor.name),Dt==="Map"||Dt==="Set")return Array.from(zn);if(Dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return Pe(zn,Et)}}(vt))||Nt&&vt&&typeof vt.length=="number"){Tt&&(vt=Tt);var cn=0,Ot=function(){};return{s:Ot,n:function(){return cn>=vt.length?{done:!0}:{done:!1,value:vt[cn++]}},e:function(zn){throw zn},f:Ot}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ln,Wn=!0,Rn=!1;return{s:function(){Tt=Tt.call(vt)},n:function(){var zn=Tt.next();return Wn=zn.done,zn},e:function(zn){Rn=!0,Ln=zn},f:function(){try{Wn||Tt.return==null||Tt.return()}finally{if(Rn)throw Ln}}}}function Pe(vt,Nt){(Nt==null||Nt>vt.length)&&(Nt=vt.length);for(var Tt=0,cn=new Array(Nt);Tt<Nt;Tt++)cn[Tt]=vt[Tt];return cn}var Ne="publish-library-data",Me=function(){var vt=(0,m.Z)(w().mark(function Nt(Tt){var cn,Ot,Ln,Wn,Rn,zn,Et,Dt,Gt,Jt,$n,Kn,wr,dr,yn,hr,Er;return w().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:cn=6,Ot=128,Ln=Math.round(Ot/16),Wn=Math.max(Math.round(Ot/64),2),Rn=(0,T.yo)(Tt,cn),(zn=document.createElement("canvas")).width=Rn[0].length*Ot+(Rn[0].length+1)*(2*Ln)-2*Ln,zn.height=Rn.length*Ot+(Rn.length+1)*(2*Ln)-2*Ln,(Et=zn.getContext("2d")).fillStyle=W.white,Et.fillRect(0,0,zn.width,zn.height),Dt=xe(Tt.entries()),Nn.prev=12,Dt.s();case 14:if((Gt=Dt.n()).done){Nn.next=28;break}return Jt=(0,b.Z)(Gt.value,2),$n=Jt[0],Kn=Jt[1],Nn.next=18,(0,z.NL)({elements:Kn.elements,files:null,maxWidthOrHeight:Ot});case 18:wr=Nn.sent,dr=wr.width,yn=wr.height,hr=Math.floor($n/cn)*(Ot+2*Ln),Er=$n%cn*(Ot+2*Ln),Et.drawImage(wr,Er+(Ot-dr)/2+Ln,hr+(Ot-yn)/2+Ln),Et.lineWidth=Wn,Et.strokeStyle=W.gray[4],Et.strokeRect(Er+Ln/2,hr+Ln/2,Ot+Ln,Ot+Ln);case 26:Nn.next=14;break;case 28:Nn.next=33;break;case 30:Nn.prev=30,Nn.t0=Nn.catch(12),Dt.e(Nn.t0);case 33:return Nn.prev=33,Dt.f(),Nn.finish(33);case 36:return Nn.t1=q.Tu,Nn.t2=File,Nn.next=40,(0,q._c)(zn);case 40:return Nn.t3=Nn.sent,Nn.t4=[Nn.t3],Nn.t5={type:j.LO.png},Nn.t6=new Nn.t2(Nn.t4,"preview",Nn.t5),Nn.t7={outputType:j.LO.jpg,maxWidthOrHeight:5e3},Nn.next=47,(0,Nn.t1)(Nn.t6,Nn.t7);case 47:return Nn.abrupt("return",Nn.sent);case 48:case"end":return Nn.stop()}},Nt,null,[[12,30,33,36]])}));return function(Nt){return vt.apply(this,arguments)}}(),Re=function(vt){var Nt=vt.libItem,Tt=vt.appState,cn=vt.index,Ot=vt.onChange,Ln=vt.onRemove,Wn=(0,_.useRef)(null),Rn=(0,_.useRef)(null);return(0,_.useEffect)(function(){var zn=Wn.current;zn&&(0,m.Z)(w().mark(function Et(){var Dt;return w().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Gt.next=2,(0,z.$D)({elements:Nt.elements,appState:ue(ue({},Tt),{},{viewBackgroundColor:W.white,exportBackground:!0}),files:null});case 2:Dt=Gt.sent,zn.innerHTML=Dt.outerHTML;case 4:case"end":return Gt.stop()}},Et)}))()},[Nt.elements,Tt]),(0,Q.jsxs)("div",{className:"single-library-item",children:[Nt.status==="published"&&(0,Q.jsx)("span",{className:"single-library-item-status",children:(0,S.t)("labels.statusPublished")}),(0,Q.jsx)("div",{ref:Wn,className:"single-library-item__svg"}),(0,Q.jsx)(V.V,{"aria-label":(0,S.t)("buttons.remove"),type:"button",icon:H.Tw,className:"single-library-item--remove",onClick:Ln.bind(null,Nt.id),title:(0,S.t)("buttons.remove")}),(0,Q.jsxs)("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[(0,Q.jsxs)("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[(0,Q.jsxs)("div",{style:{padding:"0.5em 0"},children:[(0,Q.jsx)("span",{style:{fontWeight:500,color:W.gray[6]},children:(0,S.t)("publishDialog.itemName")}),(0,Q.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,Q.jsx)("input",{type:"text",ref:Rn,style:{width:"80%",padding:"0.2rem"},defaultValue:Nt.name,placeholder:"Item name",onChange:function(zn){Ot(zn.target.value,cn)}})]}),(0,Q.jsx)("span",{className:"error",children:Nt.error})]})]})},We=function(vt){var Nt=vt.onClose,Tt=vt.libraryItems,cn=vt.appState,Ot=vt.onSuccess,Ln=vt.onError,Wn=vt.updateItemsInStorage,Rn=vt.onRemove,zn=(0,_.useState)({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),Et=(0,b.Z)(zn,2),Dt=Et[0],Gt=Et[1],Jt=(0,_.useState)(!1),$n=(0,b.Z)(Jt,2),Kn=$n[0],wr=$n[1];(0,_.useEffect)(function(){var pn=function(){try{var mn=localStorage.getItem(Ne);if(mn)return JSON.parse(mn)}catch(or){console.error(or)}return null}();pn&&Gt(pn)},[]);var dr=(0,_.useState)(Tt.slice()),yn=(0,b.Z)(dr,2),hr=yn[0],Er=yn[1];(0,_.useEffect)(function(){Er(Tt.slice())},[Tt]);var Nn,ar=function(pn){Gt(ue(ue({},Dt),{},(0,I.Z)({},pn.target.name,pn.target.value)))},Dr=function(){var pn=(0,m.Z)(w().mark(function mn(or){var fr,Fn,De,Ue,qe,dt,Ut;return w().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(or.preventDefault(),wr(!0),fr=[],Fn=!1,hr.forEach(function(on){var xn="";on.name||(xn=(0,S.t)("publishDialog.errors.required"),Fn=!0),fr.push(ue(ue({},on),{},{error:xn}))}),!Fn){qt.next=9;break}return Er(fr),wr(!1),qt.abrupt("return");case 9:return qt.next=11,Me(hr);case 11:De=qt.sent,Ue={type:j.r8.excalidrawLibrary,version:j.Kr.excalidrawLibrary,source:j.pb,libraryItems:hr},qe=JSON.stringify(Ue,null,2),dt=new Blob([qe],{type:"application/json"}),(Ut=new FormData).append("excalidrawLib",dt),Ut.append("previewImage",De),Ut.append("previewImageType",De.type),Ut.append("title",Dt.name),Ut.append("authorName",Dt.authorName),Ut.append("githubHandle",Dt.githubHandle),Ut.append("name",Dt.name),Ut.append("description",Dt.description),Ut.append("twitterHandle",Dt.twitterHandle),Ut.append("website",Dt.website),fetch("".concat("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries","/submit"),{method:"post",body:Ut}).then(function(on){return on.ok?on.json().then(function(xn){var tn=xn.url;localStorage.removeItem(Ne),Ot({url:tn,authorName:Dt.authorName,items:hr})}):on.json().catch(function(){throw new Error(on.statusText||"something went wrong")}).then(function(xn){throw new Error(xn.message||on.statusText||"something went wrong")})},function(on){console.error(on),Ln(on),wr(!1)}).catch(function(on){console.error(on),Ln(on),wr(!1)});case 27:case"end":return qt.stop()}},mn)}));return function(mn){return pn.apply(this,arguments)}}(),Ir=(0,_.useCallback)(function(){Wn(hr),function(pn){try{localStorage.setItem(Ne,JSON.stringify(pn))}catch(mn){console.error(mn)}}(Dt),Nt()},[hr,Nt,Wn,Dt]),Vt=!!Tt.length,An=Tt.some(function(pn){return pn.status==="published"});return(0,Q.jsx)(F.V,{onCloseRequest:Ir,title:(0,S.t)("publishDialog.title"),className:"publish-library",children:Vt?(0,Q.jsxs)("form",{onSubmit:Dr,children:[(0,Q.jsx)("div",{className:"publish-library-note",children:(0,Q.jsx)(Z.Z,{i18nKey:"publishDialog.noteDescription",link:function(pn){return(0,Q.jsx)("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:pn})}})}),(0,Q.jsx)("span",{className:"publish-library-note",children:(0,Q.jsx)(Z.Z,{i18nKey:"publishDialog.noteGuidelines",link:function(pn){return(0,Q.jsx)("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:pn})}})}),(0,Q.jsx)("div",{className:"publish-library-note",children:(0,S.t)("publishDialog.noteItems")}),An&&(0,Q.jsx)("span",{className:"publish-library-note publish-library-warning",children:(0,S.t)("publishDialog.republishWarning")}),(Nn=[],hr.forEach(function(pn,mn){Nn.push((0,Q.jsx)("div",{className:"single-library-item-wrapper",children:(0,Q.jsx)(Re,{libItem:pn,appState:cn,index:mn,onChange:function(or,fr){var Fn=hr.slice();Fn[fr].name=or,Er(Fn)},onRemove:Rn})},mn))}),(0,Q.jsx)("div",{className:"selected-library-items",children:Nn})),(0,Q.jsxs)("div",{className:"publish-library__fields",children:[(0,Q.jsxs)("label",{children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{children:(0,S.t)("publishDialog.libraryName")}),(0,Q.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,Q.jsx)("input",{type:"text",name:"name",required:!0,value:Dt.name,onChange:ar,placeholder:(0,S.t)("publishDialog.placeholder.libraryName")})]}),(0,Q.jsxs)("label",{style:{alignItems:"flex-start"},children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{children:(0,S.t)("publishDialog.libraryDesc")}),(0,Q.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,Q.jsx)("textarea",{name:"description",rows:4,required:!0,value:Dt.description,onChange:ar,placeholder:(0,S.t)("publishDialog.placeholder.libraryDesc")})]}),(0,Q.jsxs)("label",{children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{children:(0,S.t)("publishDialog.authorName")}),(0,Q.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,Q.jsx)("input",{type:"text",name:"authorName",required:!0,value:Dt.authorName,onChange:ar,placeholder:(0,S.t)("publishDialog.placeholder.authorName")})]}),(0,Q.jsxs)("label",{children:[(0,Q.jsx)("span",{children:(0,S.t)("publishDialog.githubUsername")}),(0,Q.jsx)("input",{type:"text",name:"githubHandle",value:Dt.githubHandle,onChange:ar,placeholder:(0,S.t)("publishDialog.placeholder.githubHandle")})]}),(0,Q.jsxs)("label",{children:[(0,Q.jsx)("span",{children:(0,S.t)("publishDialog.twitterUsername")}),(0,Q.jsx)("input",{type:"text",name:"twitterHandle",value:Dt.twitterHandle,onChange:ar,placeholder:(0,S.t)("publishDialog.placeholder.twitterHandle")})]}),(0,Q.jsxs)("label",{children:[(0,Q.jsx)("span",{children:(0,S.t)("publishDialog.website")}),(0,Q.jsx)("input",{type:"text",name:"website",pattern:"https?://.+",title:(0,S.t)("publishDialog.errors.website"),value:Dt.website,onChange:ar,placeholder:(0,S.t)("publishDialog.placeholder.website")})]}),(0,Q.jsx)("span",{className:"publish-library-note",children:(0,Q.jsx)(Z.Z,{i18nKey:"publishDialog.noteLicense",link:function(pn){return(0,Q.jsx)("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:pn})}})})]}),(0,Q.jsxs)("div",{className:"publish-library__buttons",children:[(0,Q.jsx)(fe.Z,{label:(0,S.t)("buttons.cancel"),onClick:Ir,"data-testid":"cancel-clear-canvas-button"}),(0,Q.jsx)(fe.Z,{type:"submit",label:(0,S.t)("buttons.submit"),actionType:"primary",isLoading:Kn})]})]}):(0,Q.jsx)("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:(0,S.t)("publishDialog.atleastOneLibItem")})})},Se=c(1510),Be=c(96),_e=c(6127),ze=function(vt,Nt){return vt.filter(function(Tt){return Nt.includes(Tt.id)})},Ve=function(vt){var Nt,Tt,cn=vt.setAppState,Ot=vt.selectedItems,Ln=vt.library,Wn=vt.onRemoveFromLibrary,Rn=vt.resetLibrary,zn=vt.onSelectItems,Et=vt.appState,Dt=vt.className,Gt=(0,Y.KO)(y.rF,D.yE),Jt=(0,b.Z)(Gt,1)[0],$n=(0,Y.KO)(Wt,D.yE),Kn=(0,b.Z)($n,2),wr=Kn[0],dr=Kn[1],yn=(0,_.useState)(!1),hr=(0,b.Z)(yn,2),Er=hr[0],Nn=hr[1],ar=!!Ot.length,Dr=ar?Jt.libraryItems.filter(function(Ut){return Ot.includes(Ut.id)}):Jt.libraryItems,Ir=ar?(0,S.t)("buttons.remove"):(0,S.t)("buttons.resetLibrary"),Vt=(0,_.useState)(!1),An=(0,b.Z)(Vt,2),pn=An[0],mn=An[1],or=(0,_.useState)(null),fr=(0,b.Z)(or,2),Fn=fr[0],De=fr[1],Ue=(0,_.useCallback)(function(){return(0,Q.jsxs)(F.V,{onCloseRequest:function(){return De(null)},title:(0,S.t)("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[(0,Q.jsx)("p",{children:(0,Q.jsx)(Z.Z,{i18nKey:"publishSuccessDialog.content",authorName:Fn.authorName,link:function(Ut){return(0,Q.jsx)("a",{href:Fn==null?void 0:Fn.url,target:"_blank",rel:"noopener noreferrer",children:Ut})}})}),(0,Q.jsx)(V.V,{type:"button",title:(0,S.t)("buttons.close"),"aria-label":(0,S.t)("buttons.close"),label:(0,S.t)("buttons.close"),onClick:function(){return De(null)},"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]})},[De,Fn]),qe=function(){var Ut=(0,m.Z)(w().mark(function qt(){return w().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.prev=0,on.next=3,Ln.updateLibrary({libraryItems:(0,R.I$)({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0});case 3:on.next=11;break;case 5:if(on.prev=5,on.t0=on.catch(0),(on.t0===null||on.t0===void 0?void 0:on.t0.name)!=="AbortError"){on.next=10;break}return console.warn(on.t0),on.abrupt("return");case 10:cn({errorMessage:(0,S.t)("errors.importLibraryError")});case 11:case"end":return on.stop()}},qt,null,[[0,5]])}));return function(){return Ut.apply(this,arguments)}}(),dt=function(){var Ut=(0,m.Z)(w().mark(function qt(){var on;return w().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:if(!ar){xn.next=4;break}xn.t0=Dr,xn.next=7;break;case 4:return xn.next=6,Ln.getLatestLibrary();case 6:xn.t0=xn.sent;case 7:on=xn.t0,(0,A.t1)(on).catch(T.FG).catch(function(tn){cn({errorMessage:tn.message})});case 9:case"end":return xn.stop()}},qt)}));return function(){return Ut.apply(this,arguments)}}();return(0,Q.jsxs)("div",{className:(0,ie.Z)("library-menu-dropdown-container",Dt),children:[(0,Q.jsxs)(Se.Z,{open:wr,children:[(0,Q.jsx)(Se.Z.Trigger,{onToggle:function(){return dr(!wr)},children:H.YA}),(0,Q.jsxs)(Se.Z.Content,{onClickOutside:function(){return dr(!1)},onSelect:function(){return dr(!1)},className:"library-menu",children:[!ar&&(0,Q.jsx)(Se.Z.Item,{onSelect:qe,icon:H.Tl,"data-testid":"lib-dropdown--load",children:(0,S.t)("buttons.load")}),!!Dr.length&&(0,Q.jsx)(Se.Z.Item,{onSelect:dt,icon:H.Hy,"data-testid":"lib-dropdown--export",children:(0,S.t)("buttons.export")}),!!Dr.length&&(0,Q.jsx)(Se.Z.Item,{onSelect:function(){return Nn(!0)},icon:H.XH,children:Ir}),ar&&(0,Q.jsx)(Se.Z.Item,{icon:H.Nw,onSelect:function(){return mn(!0)},"data-testid":"lib-dropdown--remove",children:(0,S.t)("buttons.publishLibrary")})]})]}),Ot.length>0&&(0,Q.jsx)("div",{className:"library-actions-counter",children:Ot.length}),Er&&(Nt=Ot.length?(0,S.t)("alerts.removeItemsFromsLibrary",{count:Ot.length}):(0,S.t)("alerts.resetLibrary"),Tt=Ot.length?(0,S.t)("confirmDialog.removeItemsFromLib"):(0,S.t)("confirmDialog.resetLibrary"),(0,Q.jsx)(E.Z,{onConfirm:function(){Ot.length?Wn():Rn(),Nn(!1)},onCancel:function(){Nn(!1)},title:Tt,children:(0,Q.jsx)("p",{children:Nt})})),pn&&(0,Q.jsx)(We,{onClose:function(){return mn(!1)},libraryItems:ze(Jt.libraryItems,Ot),appState:Et,onSuccess:function(Ut){return function(qt,on){mn(!1),De({url:qt.url,authorName:qt.authorName});var xn=on.slice();xn.forEach(function(tn){Ot.includes(tn.id)&&(tn.status="published")}),Ln.setLibrary(xn)}(Ut,Jt.libraryItems)},onError:function(Ut){return window.alert(Ut)},updateItemsInStorage:function(){return Ln.setLibrary(Jt.libraryItems)},onRemove:function(Ut){return zn(Ot.filter(function(qt){return qt!==Ut}))}}),Fn&&Ue()]})},ut=function(vt){var Nt=vt.selectedItems,Tt=vt.onSelectItems,cn=vt.className,Ot=(0,B.qD)().library,Ln=(0,_e.yT)(),Wn=Ln.clearLibraryCache,Rn=Ln.deleteItemsFromLibraryCache,zn=(0,Be.I)(),Et=(0,B.n9)(),Dt=(0,Y.KO)(y.rF,D.yE),Gt=(0,b.Z)(Dt,1)[0],Jt=function(){var $n=(0,m.Z)(w().mark(function Kn(wr){var dr;return w().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:dr=wr.filter(function(hr){return!Nt.includes(hr.id)}),Ot.setLibrary(dr).catch(function(){Et({errorMessage:(0,S.t)("alerts.errorRemovingFromLibrary")})}),Rn(Nt),Tt([]);case 4:case"end":return yn.stop()}},Kn)}));return function(Kn){return $n.apply(this,arguments)}}();return(0,Q.jsx)(Ve,{appState:zn,setAppState:Et,selectedItems:Nt,onSelectItems:Tt,library:Ot,onRemoveFromLibrary:function(){return Jt(Gt.libraryItems)},resetLibrary:function(){Ot.resetLibrary(),Wn()},className:cn})},Ie=c(2701),ot={};ot.styleTagTransform=we(),ot.setAttributes=he(),ot.insert=ae().bind(null,"head"),ot.domAPI=oe(),ot.insertStyleElement=ge(),U()(Ie.Z,ot),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;var Ye=c(3807),Ke=(0,_.memo)(function(vt){var Nt=vt.id,Tt=vt.elements,cn=vt.isPending,Ot=vt.onClick,Ln=vt.selected,Wn=vt.onToggle,Rn=vt.onDrag,zn=vt.svgCache,Et=(0,_.useRef)(null),Dt=(0,_e.mF)(Nt,Tt,zn);(0,_.useEffect)(function(){var yn=Et.current;if(yn)return Dt&&(yn.innerHTML=Dt.outerHTML),function(){yn.innerHTML=""}},[Dt]);var Gt=(0,_.useState)(!1),Jt=(0,b.Z)(Gt,2),$n=Jt[0],Kn=Jt[1],wr=(0,B.Fy)().isMobile,dr=cn&&(0,Q.jsx)("div",{className:"library-unit__adder",children:H.pO});return(0,Q.jsxs)("div",{className:(0,ie.Z)("library-unit",{"library-unit__active":Tt,"library-unit--hover":Tt&&$n,"library-unit--selected":Ln,"library-unit--skeleton":!Dt}),onMouseEnter:function(){return Kn(!0)},onMouseLeave:function(){return Kn(!1)},children:[(0,Q.jsx)("div",{className:(0,ie.Z)("library-unit__dragger",{"library-unit__pulse":!!cn}),ref:Et,draggable:!!Tt,onClick:Tt||cn?function(yn){Nt&&yn.shiftKey?Wn(Nt,yn):Ot(Nt)}:void 0,onDragStart:function(yn){Nt?(Kn(!1),Rn(Nt,yn)):yn.preventDefault()}}),dr,Nt&&Tt&&($n||wr||Ln)&&(0,Q.jsx)(Ye.o,{checked:Ln,onChange:function(yn,hr){return Wn(Nt,hr)},className:"library-unit__checkbox"})]})}),tt=function(){return(0,Q.jsx)("div",{className:"library-unit library-unit--skeleton"})},pt=k().useTransition||function(){return[!1,(0,_.useCallback)(function(vt){return vt()},[])]},St=function(vt){var Nt=vt.children;return(0,Q.jsx)("div",{className:"library-menu-items-container__grid",children:Nt})},Kt=(0,_.memo)(function(vt){var Nt=vt.items,Tt=vt.onItemSelectToggle,cn=vt.onItemDrag,Ot=vt.isItemSelected,Ln=vt.onClick,Wn=vt.svgCache,Rn=vt.itemsRenderedPerBatch,zn=pt(),Et=(0,b.Z)(zn,2)[1],Dt=(0,_.useState)(0),Gt=(0,b.Z)(Dt,2),Jt=Gt[0],$n=Gt[1];return(0,_.useEffect)(function(){Jt<Nt.length&&Et(function(){$n(Jt+Rn)})},[Jt,Nt.length,Et,Rn]),(0,Q.jsx)(Q.Fragment,{children:Nt.map(function(Kn,wr){var dr;return wr<Jt?(0,Q.jsx)(Ke,{elements:Kn==null?void 0:Kn.elements,isPending:!(Kn!=null&&Kn.id||Kn==null||!Kn.elements),onClick:Ln,svgCache:Wn,id:Kn==null?void 0:Kn.id,selected:Ot(Kn.id),onToggle:Tt,onDrag:cn},(dr=Kn==null?void 0:Kn.id)!==null&&dr!==void 0?dr:wr):(0,Q.jsx)(tt,{},wr)})})}),sn=c(6810),nn=c.n(sn),Cn=(0,Y.cn)(0),vn=c(5605),Fe={};Fe.styleTagTransform=we(),Fe.setAttributes=he(),Fe.insert=ae().bind(null,"head"),Fe.domAPI=oe(),Fe.insertStyleElement=ge(),U()(vn.Z,Fe),vn.Z&&vn.Z.locals&&vn.Z.locals;function et(vt,Nt){var Tt=Object.keys(vt);if(Object.getOwnPropertySymbols){var cn=Object.getOwnPropertySymbols(vt);Nt&&(cn=cn.filter(function(Ot){return Object.getOwnPropertyDescriptor(vt,Ot).enumerable})),Tt.push.apply(Tt,cn)}return Tt}function st(vt){for(var Nt=1;Nt<arguments.length;Nt++){var Tt=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?et(Object(Tt),!0).forEach(function(cn){(0,I.Z)(vt,cn,Tt[cn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(Tt)):et(Object(Tt)).forEach(function(cn){Object.defineProperty(vt,cn,Object.getOwnPropertyDescriptor(Tt,cn))})}return vt}function ht(vt){var Nt=vt.isLoading,Tt=vt.libraryItems,cn=vt.onAddToLibrary,Ot=vt.onInsertLibraryItems,Ln=vt.pendingElements,Wn=vt.theme,Rn=vt.id,zn=vt.libraryReturnUrl,Et=vt.onSelectItems,Dt=vt.selectedItems,Gt=(0,_.useRef)(null),Jt=function(fr){var Fn=(0,Y.KO)(Cn),De=(0,b.Z)(Fn,2),Ue=De[0],qe=De[1];return(0,_.useEffect)(function(){var dt=fr.current;if(dt){var Ut=nn()(function(){var qt=dt.scrollTop;qe(qt)},200);return dt.addEventListener("scroll",Ut),function(){Ut.cancel(),dt.removeEventListener("scroll",Ut)}}},[fr,qe]),Ue}(Gt);(0,_.useEffect)(function(){var fr;Jt>0&&((fr=Gt.current)===null||fr===void 0||fr.scrollTo(0,Jt))},[]);var $n=(0,_e.yT)().svgCache,Kn=(0,_.useMemo)(function(){return Tt.filter(function(fr){return fr.status!=="published"})},[Tt]),wr=(0,_.useMemo)(function(){return Tt.filter(function(fr){return fr.status==="published"})},[Tt]),dr=!Tt.length&&!Ln.length,yn=!Ln.length&&!Kn.length&&!wr.length,hr=(0,_.useState)(null),Er=(0,b.Z)(hr,2),Nn=Er[0],ar=Er[1],Dr=(0,_.useCallback)(function(fr,Fn){var De=!Dt.includes(fr),Ue=[].concat((0,g.Z)(Kn),(0,g.Z)(wr));if(De){if(Fn.shiftKey&&Nn){var qe=Ue.findIndex(function(on){return on.id===Nn}),dt=Ue.findIndex(function(on){return on.id===fr});if(qe===-1||dt===-1)return void Et([].concat((0,g.Z)(Dt),[fr]));var Ut=(0,T.xn)(Dt),qt=Ue.reduce(function(on,xn,tn){return(tn>=qe&&tn<=dt||Ut.has(xn.id))&&on.push(xn.id),on},[]);Et(qt)}else Et([].concat((0,g.Z)(Dt),[fr]));ar(fr)}else ar(null),Et(Dt.filter(function(on){return on!==fr}))},[Nn,Et,wr,Dt,Kn]),Ir=(0,_.useCallback)(function(fr){return(Dt.includes(fr)?Tt.filter(function(Fn){return Dt.includes(Fn.id)}):Tt.filter(function(Fn){return Fn.id===fr})).map(function(Fn){return st(st({},Fn),{},{elements:(0,ee._N)(Fn.elements,{randomizeSeed:!0})})})},[Tt,Dt]),Vt=(0,_.useCallback)(function(fr,Fn){Fn.dataTransfer.setData(j.LO.excalidrawlib,(0,A.NI)(Ir(fr)))},[Ir]),An=(0,_.useCallback)(function(fr){return!!fr&&Dt.includes(fr)},[Dt]),pn=(0,_.useCallback)(function(){cn(Ln)},[Ln,cn]),mn=(0,_.useCallback)(function(fr){fr&&Ot(Ir(fr))},[Ir,Ot]),or=$n.size>=Tt.length?64:17;return(0,Q.jsxs)("div",{className:"library-menu-items-container",style:Ln.length||Kn.length||wr.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!yn&&(0,Q.jsx)(ut,{selectedItems:Dt,onSelectItems:Et,className:"library-menu-dropdown-container--in-heading"}),(0,Q.jsxs)(L.Z.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:wr.length>0?1:"0 1 auto",marginBottom:0},ref:Gt,children:[(0,Q.jsxs)(Q.Fragment,{children:[!yn&&(0,Q.jsx)("div",{className:"library-menu-items-container__header",children:(0,S.t)("labels.personalLib")}),Nt&&(0,Q.jsx)("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:(0,Q.jsx)($.Z,{})}),Ln.length||Kn.length?(0,Q.jsxs)(St,{children:[Ln.length>0&&(0,Q.jsx)(Kt,{itemsRenderedPerBatch:or,items:[{id:null,elements:Ln}],onItemSelectToggle:Dr,onItemDrag:Vt,onClick:pn,isItemSelected:An,svgCache:$n}),(0,Q.jsx)(Kt,{itemsRenderedPerBatch:or,items:Kn,onItemSelectToggle:Dr,onItemDrag:Vt,onClick:mn,isItemSelected:An,svgCache:$n})]}):(0,Q.jsxs)("div",{className:"library-menu-items__no-items",children:[(0,Q.jsx)("div",{className:"library-menu-items__no-items__label",children:(0,S.t)("library.noItems")}),(0,Q.jsx)("div",{className:"library-menu-items__no-items__hint",children:wr.length>0?(0,S.t)("library.hint_emptyPrivateLibrary"):(0,S.t)("library.hint_emptyLibrary")})]})]}),(0,Q.jsxs)(Q.Fragment,{children:[(wr.length>0||Ln.length>0||Kn.length>0)&&(0,Q.jsx)("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:(0,S.t)("labels.excalidrawLib")}),wr.length>0?(0,Q.jsx)(St,{children:(0,Q.jsx)(Kt,{itemsRenderedPerBatch:or,items:wr,onItemSelectToggle:Dr,onItemDrag:Vt,onClick:mn,isItemSelected:An,svgCache:$n})}):Kn.length>0?(0,Q.jsx)("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:(0,S.t)("library.noItems")}):null]}),dr&&(0,Q.jsx)(te,{style:{padding:"16px 0",width:"100%"},id:Rn,libraryReturnUrl:zn,theme:Wn,children:(0,Q.jsx)(ut,{selectedItems:Dt,onSelectItems:Et})})]})]})}var _t=c(7047),Zt=c(75),Yt=c(8923),bn={};bn.styleTagTransform=we(),bn.setAttributes=he(),bn.insert=ae().bind(null,"head"),bn.domAPI=oe(),bn.insertStyleElement=ge(),U()(Yt.Z,bn),Yt.Z&&Yt.Z.locals&&Yt.Z.locals;var Wt=(0,Y.cn)(!1),un=function(vt){var Nt=vt.children;return(0,Q.jsx)("div",{className:"layer-ui__library",children:Nt})},jn=function(vt){var Nt=vt.onInsertLibraryItems,Tt=vt.pendingElements,cn=vt.onAddToLibrary,Ot=vt.setAppState,Ln=vt.libraryReturnUrl,Wn=vt.library,Rn=vt.id,zn=vt.theme,Et=vt.selectedItems,Dt=vt.onSelectItems,Gt=(0,Y.KO)(y.rF,D.yE),Jt=(0,b.Z)(Gt,1)[0],$n=(0,_.useCallback)(function(dr){var yn=function(){var hr=(0,m.Z)(w().mark(function Er(Nn,ar){var Dr;return w().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if((0,_t.L)("element","addToLibrary","ui"),!Nn.some(function(Vt){return Vt.type==="image"})){Ir.next=3;break}return Ir.abrupt("return",Ot({errorMessage:"Support for adding images to the library coming soon!"}));case 3:Dr=[{status:"unpublished",elements:Nn,id:(0,C.kb)(),created:Date.now()}].concat((0,g.Z)(ar)),cn(),Wn.setLibrary(Dr).catch(function(){Ot({errorMessage:(0,S.t)("alerts.errorAddingToLibrary")})});case 6:case"end":return Ir.stop()}},Er)}));return function(Er,Nn){return hr.apply(this,arguments)}}();yn(dr,Jt.libraryItems)},[cn,Wn,Ot,Jt.libraryItems]),Kn=(0,_.useMemo)(function(){return Jt.libraryItems},[Jt]);if(Jt.status==="loading"&&!Jt.isInitialized)return(0,Q.jsx)(un,{children:(0,Q.jsx)("div",{className:"layer-ui__library-message",children:(0,Q.jsxs)("div",{children:[(0,Q.jsx)($.Z,{size:"2em"}),(0,Q.jsx)("span",{children:(0,S.t)("labels.libraryLoadingMessage")})]})})});var wr=Jt.libraryItems.length>0||Tt.length>0;return(0,Q.jsxs)(un,{children:[(0,Q.jsx)(ht,{isLoading:Jt.status==="loading",libraryItems:Kn,onAddToLibrary:$n,onInsertLibraryItems:Nt,pendingElements:Tt,id:Rn,libraryReturnUrl:Ln,theme:zn,onSelectItems:Dt,selectedItems:Et}),wr&&(0,Q.jsx)(te,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:Rn,libraryReturnUrl:Ln,theme:zn})]})},Hn=function(){var vt=(0,B.qD)(),Nt=vt.library,Tt=vt.id,cn=vt.onInsertElements,Ot=(0,B.hY)(),Ln=(0,Be.I)(),Wn=(0,B.n9)(),Rn=(0,B.bd)(),zn=(0,_.useState)([]),Et=(0,b.Z)(zn,2),Dt=Et[0],Gt=Et[1],Jt=(0,_.useMemo)(function(){return Nt},[Nt]),$n=function(dr,yn){var hr=function(){return(0,Zt.eD)(yn,dr,{includeBoundTextElement:!0,includeElementsInFrames:!0})},Er=(0,_.useRef)(hr()),Nn=(0,_.useRef)(dr),ar=(0,_.useRef)(yn);return(0,T.w8)(dr.selectedElementIds,Nn.current.selectedElementIds)&&(0,T.w8)(yn,ar.current)||(Er.current=hr(),Nn.current=dr,ar.current=yn),Er.current}(Ln,Rn),Kn=(0,_.useCallback)(function(dr){cn((0,y.WV)(dr))},[cn]),wr=(0,_.useCallback)(function(){Wn({selectedElementIds:{},selectedGroupIds:{}})},[Wn]);return(0,Q.jsx)(jn,{pendingElements:$n,onInsertLibraryItems:Kn,onAddToLibrary:wr,setAppState:Wn,libraryReturnUrl:Ot.libraryReturnUrl,library:Jt,id:Tt,theme:Ln.theme,selectedItems:Dt,onSelectItems:Gt})}},5440:function(f,h,c){c.d(h,{z:function(){return y}});var g=c(2577),m=c(8211),b=c(9787),v=c(5644),w=c(9076),_=c(2335),k=c(9980),y=function(S){var C=S.delay,I=S.theme,A=(0,b.useState)(!!C),T=(0,g.Z)(A,2),L=T[0],j=T[1];return(0,b.useEffect)(function(){if(C){var $=setTimeout(function(){j(!1)},C);return function(){return clearTimeout($)}}},[C]),L?null:(0,k.jsxs)("div",{className:(0,w.Z)("LoadingMessage",{"LoadingMessage--dark":I===_.C6.DARK}),children:[(0,k.jsx)("div",{children:(0,k.jsx)(v.Z,{})}),(0,k.jsx)("div",{className:"LoadingMessage-text",children:(0,m.t)("labels.loadingScene")})]})}},879:function(f,h,c){c.d(h,{K:function(){return _},_:function(){return k}});var g=c(8950),m=c(2975),b=c.n(m),v=c(6274),w=c(9487),_=(0,v.cn)({active:!1});function k(S){return y.apply(this,arguments)}function y(){return(y=(0,g.Z)(b().mark(function S(C){var I,A,T,L;return b().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return I=C.title,A=C.description,T=C.actionLabel,L=C.color,j.abrupt("return",new Promise(function($){w.e_.set(_,{active:!0,onConfirm:function(){return $(!0)},onClose:function(){return $(!1)},onReject:function(){return $(!1)},title:I,description:A,actionLabel:T,color:L})}));case 2:case"end":return j.stop()}},S)}))).apply(this,arguments)}},2891:function(f,h,c){c.d(h,{J:function(){return ie}});var g=c(9787),m=c(487),b=c.n(m),v=c(631),w=c.n(v),_=c(2052),k=c.n(_),y=c(4010),S=c.n(y),C=c(1469),I=c.n(C),A=c(9329),T=c.n(A),L=c(9935),j={};j.styleTagTransform=T(),j.setAttributes=S(),j.insert=k().bind(null,"head"),j.domAPI=w(),j.insertStyleElement=I(),b()(L.Z,j),L.Z&&L.Z.locals&&L.Z.locals;var $=c(5156),ee=c(6340),Q=c(6066),pe=c(9980),ie=function(te){var Z=te.children,D=te.left,B=te.top,H=te.onCloseRequest,V=te.fitInViewport,R=V!==void 0&&V,Y=te.offsetLeft,E=Y===void 0?0:Y,W=te.offsetTop,F=W===void 0?0:W,z=te.viewportWidth,q=z===void 0?window.innerWidth:z,fe=te.viewportHeight,ce=fe===void 0?window.innerHeight:fe,U=(0,g.useRef)(null);(0,g.useEffect)(function(){var oe=U.current;if(oe){oe.contains(document.activeElement)||oe.focus();var re=function(ae){if(ae.key===Q.tW.TAB){var me=(0,ee.xp)(oe),he=document.activeElement,se=me.findIndex(function(be){return be===he});if(he===oe){var ge;ae.shiftKey?(ge=me[me.length-1])===null||ge===void 0||ge.focus():me[0].focus(),ae.preventDefault(),ae.stopImmediatePropagation()}else if(se===0&&ae.shiftKey){var X;(X=me[me.length-1])===null||X===void 0||X.focus(),ae.preventDefault(),ae.stopImmediatePropagation()}else if(se===me.length-1&&!ae.shiftKey){var we;(we=me[0])===null||we===void 0||we.focus(),ae.preventDefault(),ae.stopImmediatePropagation()}}};return oe.addEventListener("keydown",re),function(){return oe.removeEventListener("keydown",re)}}},[]);var ve=(0,g.useRef)(null);return(0,g.useLayoutEffect)(function(){if(R&&U.current&&B!=null&&D!=null){var oe,re,ae=U.current,me=ae.getBoundingClientRect(),he=me.width,se=me.height;if(((oe=ve.current)===null||oe===void 0?void 0:oe.top)===B&&((re=ve.current)===null||re===void 0?void 0:re.left)===D)return;ve.current={top:B,left:D},he>=q?(ae.style.width="".concat(q,"px"),ae.style.left="0px",ae.style.overflowX="scroll"):ae.style.left="".concat(D+he-E>q?q-he-10:D,"px"),se>=ce?(ae.style.height="".concat(ce-20,"px"),ae.style.top="10px",ae.style.overflowY="scroll"):ae.style.top="".concat(B+se-F>ce?ce-se:B,"px")}},[B,D,R,q,ce,E,F]),(0,g.useEffect)(function(){if(H){var oe=function(re){var ae;(ae=U.current)!==null&&ae!==void 0&&ae.contains(re.target)||(0,$.unstable_batchedUpdates)(function(){return H(re)})};return document.addEventListener("pointerdown",oe,!1),function(){return document.removeEventListener("pointerdown",oe,!1)}}},[H]),(0,pe.jsx)("div",{className:"popover",ref:U,tabIndex:-1,children:Z})}},585:function(f,h,c){c.d(h,{YE:function(){return Ir},t6:function(){return ar}});var g=c(2577),m=c(7169),b=c(2726),v=c(9787),w=c.n(v),_=c(1881),k=c(6274),y=c(9487),S=w().createContext({}),C=c(9076),I=c(8211),A=c(736),T=c(3646),L=c(1894),j=c(7172),$=c(9980),ee=function(Vt){var An=Vt.children,pn=Vt.className,mn=(0,A.Fy)(),or=(0,v.useContext)(S),fr=!(!mn.canDeviceFitSidebar||!or.shouldRenderDockButton);return(0,$.jsxs)("div",{className:(0,C.Z)("sidebar__header",pn),"data-testid":"sidebar-header",children:[An,(0,$.jsxs)("div",{className:"sidebar__header__buttons",children:[fr&&(0,$.jsx)(L.u,{label:(0,I.t)("labels.sidebarLock"),children:(0,$.jsx)(j.z,{onSelect:function(){var Fn;return(Fn=or.onDock)===null||Fn===void 0?void 0:Fn.call(or,!or.docked)},selected:!!or.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":(0,I.t)("labels.sidebarLock"),children:T.qQ})}),(0,$.jsx)(j.z,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:or.onCloseRequest,"aria-label":(0,I.t)("buttons.close"),children:T.Tw})]})]})};ee.displayName="SidebarHeader";var Q=c(6340),pe=c(6066),ie=c(2335),te=c(96),Z=c(487),D=c.n(Z),B=c(631),H=c.n(B),V=c(2052),R=c.n(V),Y=c(4010),E=c.n(Y),W=c(1469),F=c.n(W),z=c(9329),q=c.n(z),fe=c(7051),ce={};ce.styleTagTransform=q(),ce.setAttributes=E(),ce.insert=R().bind(null,"head"),ce.domAPI=H(),ce.insertStyleElement=F(),D()(fe.Z,ce),fe.Z&&fe.Z.locals&&fe.Z.locals;var U=function(Vt){var An,pn=Vt.name,mn=Vt.tab,or=Vt.icon,fr=Vt.title,Fn=Vt.children,De=Vt.onToggle,Ue=Vt.className,qe=Vt.style,dt=(0,A.n9)(),Ut=(0,te.I)();return(0,$.jsxs)("label",{title:fr,children:[(0,$.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:function(qt){var on;(on=document.querySelector(".layer-ui__wrapper"))===null||on===void 0||on.classList.remove("animate");var xn=qt.target.checked;dt({openSidebar:xn?{name:pn,tab:mn}:null}),De==null||De(xn)},checked:((An=Ut.openSidebar)===null||An===void 0?void 0:An.name)===pn,"aria-label":fr,"aria-keyshortcuts":"0"}),(0,$.jsxs)("div",{className:(0,C.Z)("sidebar-trigger",Ue),style:qe,children:[or&&(0,$.jsx)("div",{children:or}),Fn&&(0,$.jsx)("div",{className:"sidebar-trigger__label",children:Fn})]})]})};U.displayName="SidebarTrigger";var ve=c(9181),oe=c(5612),re=c(7879),ae=c(4562),me=c(2696),he=c(7596),se=c(7826),ge=c(6713),X=c(9218);const we=(0,v.createContext)(void 0);function be(Vt){const An=(0,v.useContext)(we);return Vt||An||"ltr"}const le="rovingFocusGroup.onEntryFocus",ye={bubbles:!1,cancelable:!0},ue="RovingFocusGroup",[xe,Pe,Ne]=function(Vt){const An=Vt+"CollectionProvider",[pn,mn]=(0,re.b)(An),[or,fr]=pn(An,{collectionRef:{current:null},itemMap:new Map}),Fn=qt=>{const{scope:on,children:xn}=qt,tn=w().useRef(null),tr=w().useRef(new Map).current;return w().createElement(or,{scope:on,itemMap:tr,collectionRef:tn},xn)},De=Vt+"CollectionSlot",Ue=w().forwardRef((qt,on)=>{const{scope:xn,children:tn}=qt,tr=fr(De,xn),ir=(0,ae.e)(on,tr.collectionRef);return w().createElement(me.g7,{ref:ir},tn)}),qe=Vt+"CollectionItemSlot",dt="data-radix-collection-item",Ut=w().forwardRef((qt,on)=>{const{scope:xn,children:tn,...tr}=qt,ir=w().useRef(null),br=(0,ae.e)(on,ir),Hr=fr(qe,xn);return w().useEffect(()=>(Hr.itemMap.set(ir,{ref:ir,...tr}),()=>{Hr.itemMap.delete(ir)})),w().createElement(me.g7,{[dt]:"",ref:br},tn)});return[{Provider:Fn,Slot:Ue,ItemSlot:Ut},function(qt){const on=fr(Vt+"CollectionConsumer",qt);return w().useCallback(()=>{const xn=on.collectionRef.current;if(!xn)return[];const tn=Array.from(xn.querySelectorAll(`[${dt}]`));return Array.from(on.itemMap.values()).sort((tr,ir)=>tn.indexOf(tr.ref.current)-tn.indexOf(ir.ref.current))},[on.collectionRef,on.itemMap])},mn]}(ue),[Me,Re]=(0,re.b)(ue,[Ne]),[We,Se]=Me(ue),Be=(0,v.forwardRef)((Vt,An)=>(0,v.createElement)(xe.Provider,{scope:Vt.__scopeRovingFocusGroup},(0,v.createElement)(xe.Slot,{scope:Vt.__scopeRovingFocusGroup},(0,v.createElement)(_e,(0,ve.Z)({},Vt,{ref:An}))))),_e=(0,v.forwardRef)((Vt,An)=>{const{__scopeRovingFocusGroup:pn,orientation:mn,loop:or=!1,dir:fr,currentTabStopId:Fn,defaultCurrentTabStopId:De,onCurrentTabStopIdChange:Ue,onEntryFocus:qe,...dt}=Vt,Ut=(0,v.useRef)(null),qt=(0,ae.e)(An,Ut),on=be(fr),[xn=null,tn]=(0,X.T)({prop:Fn,defaultProp:De,onChange:Ue}),[tr,ir]=(0,v.useState)(!1),br=(0,ge.W)(qe),Hr=Pe(pn),Fr=(0,v.useRef)(!1),[go,Wr]=(0,v.useState)(0);return(0,v.useEffect)(()=>{const Mr=Ut.current;if(Mr)return Mr.addEventListener(le,br),()=>Mr.removeEventListener(le,br)},[br]),(0,v.createElement)(We,{scope:pn,orientation:mn,dir:on,loop:or,currentTabStopId:xn,onItemFocus:(0,v.useCallback)(Mr=>tn(Mr),[tn]),onItemShiftTab:(0,v.useCallback)(()=>ir(!0),[]),onFocusableItemAdd:(0,v.useCallback)(()=>Wr(Mr=>Mr+1),[]),onFocusableItemRemove:(0,v.useCallback)(()=>Wr(Mr=>Mr-1),[])},(0,v.createElement)(se.WV.div,(0,ve.Z)({tabIndex:tr||go===0?-1:0,"data-orientation":mn},dt,{ref:qt,style:{outline:"none",...Vt.style},onMouseDown:(0,oe.M)(Vt.onMouseDown,()=>{Fr.current=!0}),onFocus:(0,oe.M)(Vt.onFocus,Mr=>{const Ro=!Fr.current;if(Mr.target===Mr.currentTarget&&Ro&&!tr){const si=new CustomEvent(le,ye);if(Mr.currentTarget.dispatchEvent(si),!si.defaultPrevented){const hi=Hr().filter(ti=>ti.focusable);Ie([hi.find(ti=>ti.active),hi.find(ti=>ti.id===xn),...hi].filter(Boolean).map(ti=>ti.ref.current))}}Fr.current=!1}),onBlur:(0,oe.M)(Vt.onBlur,()=>ir(!1))})))}),ze="RovingFocusGroupItem",Ve=(0,v.forwardRef)((Vt,An)=>{const{__scopeRovingFocusGroup:pn,focusable:mn=!0,active:or=!1,tabStopId:fr,...Fn}=Vt,De=(0,he.M)(),Ue=fr||De,qe=Se(ze,pn),dt=qe.currentTabStopId===Ue,Ut=Pe(pn),{onFocusableItemAdd:qt,onFocusableItemRemove:on}=qe;return(0,v.useEffect)(()=>{if(mn)return qt(),()=>on()},[mn,qt,on]),(0,v.createElement)(xe.ItemSlot,{scope:pn,id:Ue,focusable:mn,active:or},(0,v.createElement)(se.WV.span,(0,ve.Z)({tabIndex:dt?0:-1,"data-orientation":qe.orientation},Fn,{ref:An,onMouseDown:(0,oe.M)(Vt.onMouseDown,xn=>{mn?qe.onItemFocus(Ue):xn.preventDefault()}),onFocus:(0,oe.M)(Vt.onFocus,()=>qe.onItemFocus(Ue)),onKeyDown:(0,oe.M)(Vt.onKeyDown,xn=>{if(xn.key==="Tab"&&xn.shiftKey)return void qe.onItemShiftTab();if(xn.target!==xn.currentTarget)return;const tn=function(br,Hr,Fr){const go=function(Wr,Mr){return Mr!=="rtl"?Wr:Wr==="ArrowLeft"?"ArrowRight":Wr==="ArrowRight"?"ArrowLeft":Wr}(br.key,Fr);return Hr==="vertical"&&["ArrowLeft","ArrowRight"].includes(go)||Hr==="horizontal"&&["ArrowUp","ArrowDown"].includes(go)?void 0:ut[go]}(xn,qe.orientation,qe.dir);if(tn!==void 0){xn.preventDefault();let br=Ut().filter(Hr=>Hr.focusable).map(Hr=>Hr.ref.current);if(tn==="last")br.reverse();else if(tn==="prev"||tn==="next"){tn==="prev"&&br.reverse();const Hr=br.indexOf(xn.currentTarget);br=qe.loop?(ir=Hr+1,(tr=br).map((Fr,go)=>tr[(ir+go)%tr.length])):br.slice(Hr+1)}setTimeout(()=>Ie(br))}var tr,ir})})))}),ut={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ie(Vt){const An=document.activeElement;for(const pn of Vt)if(pn===An||(pn.focus(),document.activeElement!==An))return}const ot=Be,Ye=Ve;var Ke=c(4840);const tt="Tabs",[pt,St]=(0,re.b)(tt,[Re]),Kt=Re(),[sn,nn]=pt(tt),Cn=(0,v.forwardRef)((Vt,An)=>{const{__scopeTabs:pn,value:mn,onValueChange:or,defaultValue:fr,orientation:Fn="horizontal",dir:De,activationMode:Ue="automatic",...qe}=Vt,dt=be(De),[Ut,qt]=(0,X.T)({prop:mn,onChange:or,defaultProp:fr});return(0,v.createElement)(sn,{scope:pn,baseId:(0,he.M)(),value:Ut,onValueChange:qt,orientation:Fn,dir:dt,activationMode:Ue},(0,v.createElement)(se.WV.div,(0,ve.Z)({dir:dt,"data-orientation":Fn},qe,{ref:An})))}),vn="TabsList",Fe=(0,v.forwardRef)((Vt,An)=>{const{__scopeTabs:pn,loop:mn=!0,...or}=Vt,fr=nn(vn,pn),Fn=Kt(pn);return(0,v.createElement)(ot,(0,ve.Z)({asChild:!0},Fn,{orientation:fr.orientation,dir:fr.dir,loop:mn}),(0,v.createElement)(se.WV.div,(0,ve.Z)({role:"tablist","aria-orientation":fr.orientation},or,{ref:An})))}),et="TabsTrigger",st=(0,v.forwardRef)((Vt,An)=>{const{__scopeTabs:pn,value:mn,disabled:or=!1,...fr}=Vt,Fn=nn(et,pn),De=Kt(pn),Ue=Zt(Fn.baseId,mn),qe=Yt(Fn.baseId,mn),dt=mn===Fn.value;return(0,v.createElement)(Ye,(0,ve.Z)({asChild:!0},De,{focusable:!or,active:dt}),(0,v.createElement)(se.WV.button,(0,ve.Z)({type:"button",role:"tab","aria-selected":dt,"aria-controls":qe,"data-state":dt?"active":"inactive","data-disabled":or?"":void 0,disabled:or,id:Ue},fr,{ref:An,onMouseDown:(0,oe.M)(Vt.onMouseDown,Ut=>{or||Ut.button!==0||Ut.ctrlKey!==!1?Ut.preventDefault():Fn.onValueChange(mn)}),onKeyDown:(0,oe.M)(Vt.onKeyDown,Ut=>{[" ","Enter"].includes(Ut.key)&&Fn.onValueChange(mn)}),onFocus:(0,oe.M)(Vt.onFocus,()=>{const Ut=Fn.activationMode!=="manual";dt||or||!Ut||Fn.onValueChange(mn)})})))}),ht="TabsContent",_t=(0,v.forwardRef)((Vt,An)=>{const{__scopeTabs:pn,value:mn,forceMount:or,children:fr,...Fn}=Vt,De=nn(ht,pn),Ue=Zt(De.baseId,mn),qe=Yt(De.baseId,mn),dt=mn===De.value,Ut=(0,v.useRef)(dt);return(0,v.useEffect)(()=>{const qt=requestAnimationFrame(()=>Ut.current=!1);return()=>cancelAnimationFrame(qt)},[]),(0,v.createElement)(Ke.z,{present:or||dt},({present:qt})=>(0,v.createElement)(se.WV.div,(0,ve.Z)({"data-state":dt?"active":"inactive","data-orientation":De.orientation,role:"tabpanel","aria-labelledby":Ue,hidden:!qt,id:qe,tabIndex:0},Fn,{ref:An,style:{...Vt.style,animationDuration:Ut.current?"0s":void 0}}),qt&&fr))});function Zt(Vt,An){return`${Vt}-trigger-${An}`}function Yt(Vt,An){return`${Vt}-content-${An}`}const bn=Cn,Wt=Fe,un=st,jn=_t;var Hn=["children"];function vt(Vt,An){var pn=Object.keys(Vt);if(Object.getOwnPropertySymbols){var mn=Object.getOwnPropertySymbols(Vt);An&&(mn=mn.filter(function(or){return Object.getOwnPropertyDescriptor(Vt,or).enumerable})),pn.push.apply(pn,mn)}return pn}function Nt(Vt){for(var An=1;An<arguments.length;An++){var pn=arguments[An]!=null?arguments[An]:{};An%2?vt(Object(pn),!0).forEach(function(mn){(0,m.Z)(Vt,mn,pn[mn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(pn)):vt(Object(pn)).forEach(function(mn){Object.defineProperty(Vt,mn,Object.getOwnPropertyDescriptor(pn,mn))})}return Vt}var Tt=function(Vt){var An=Vt.children,pn=(0,b.Z)(Vt,Hn);return(0,$.jsx)(Wt,Nt(Nt({className:"sidebar-triggers"},pn),{},{children:An}))};Tt.displayName="SidebarTabTriggers";var cn=["children","tab","onSelect"];function Ot(Vt,An){var pn=Object.keys(Vt);if(Object.getOwnPropertySymbols){var mn=Object.getOwnPropertySymbols(Vt);An&&(mn=mn.filter(function(or){return Object.getOwnPropertyDescriptor(Vt,or).enumerable})),pn.push.apply(pn,mn)}return pn}function Ln(Vt){for(var An=1;An<arguments.length;An++){var pn=arguments[An]!=null?arguments[An]:{};An%2?Ot(Object(pn),!0).forEach(function(mn){(0,m.Z)(Vt,mn,pn[mn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(pn)):Ot(Object(pn)).forEach(function(mn){Object.defineProperty(Vt,mn,Object.getOwnPropertyDescriptor(pn,mn))})}return Vt}var Wn=function(Vt){var An=Vt.children,pn=Vt.tab,mn=Vt.onSelect,or=(0,b.Z)(Vt,cn);return(0,$.jsx)(un,{value:pn,asChild:!0,onSelect:mn,children:(0,$.jsx)("button",Ln(Ln({type:"button",className:"excalidraw-button sidebar-tab-trigger"},or),{},{children:An}))})};Wn.displayName="SidebarTabTrigger";var Rn=["children"];function zn(Vt,An){var pn=Object.keys(Vt);if(Object.getOwnPropertySymbols){var mn=Object.getOwnPropertySymbols(Vt);An&&(mn=mn.filter(function(or){return Object.getOwnPropertyDescriptor(Vt,or).enumerable})),pn.push.apply(pn,mn)}return pn}function Et(Vt){for(var An=1;An<arguments.length;An++){var pn=arguments[An]!=null?arguments[An]:{};An%2?zn(Object(pn),!0).forEach(function(mn){(0,m.Z)(Vt,mn,pn[mn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(pn)):zn(Object(pn)).forEach(function(mn){Object.defineProperty(Vt,mn,Object.getOwnPropertyDescriptor(pn,mn))})}return Vt}var Dt=function(Vt){var An=Vt.children,pn=(0,b.Z)(Vt,Rn),mn=(0,te.I)(),or=(0,A.n9)();if(!mn.openSidebar)return null;var fr=mn.openSidebar.name;return(0,$.jsx)(bn,Et(Et({className:"sidebar-tabs-root",value:mn.openSidebar.tab,onValueChange:function(Fn){return or(function(De){return Et(Et({},De),{},{openSidebar:Et(Et({},De.openSidebar),{},{name:fr,tab:Fn})})})}},pn),{},{children:An}))};Dt.displayName="SidebarTabs";var Gt=["tab","children"];function Jt(Vt,An){var pn=Object.keys(Vt);if(Object.getOwnPropertySymbols){var mn=Object.getOwnPropertySymbols(Vt);An&&(mn=mn.filter(function(or){return Object.getOwnPropertyDescriptor(Vt,or).enumerable})),pn.push.apply(pn,mn)}return pn}function $n(Vt){for(var An=1;An<arguments.length;An++){var pn=arguments[An]!=null?arguments[An]:{};An%2?Jt(Object(pn),!0).forEach(function(mn){(0,m.Z)(Vt,mn,pn[mn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(pn)):Jt(Object(pn)).forEach(function(mn){Object.defineProperty(Vt,mn,Object.getOwnPropertyDescriptor(pn,mn))})}return Vt}var Kn=function(Vt){var An=Vt.tab,pn=Vt.children,mn=(0,b.Z)(Vt,Gt);return(0,$.jsx)(jn,$n($n({},mn),{},{value:An,children:pn}))};Kn.displayName="SidebarTab";var wr=c(60),dr=c(8208),yn={};yn.styleTagTransform=q(),yn.setAttributes=E(),yn.insert=R().bind(null,"head"),yn.domAPI=H(),yn.insertStyleElement=F(),D()(dr.Z,yn),dr.Z&&dr.Z.locals&&dr.Z.locals;var hr=["name","children","onDock","docked","className"];function Er(Vt,An){var pn=Object.keys(Vt);if(Object.getOwnPropertySymbols){var mn=Object.getOwnPropertySymbols(Vt);An&&(mn=mn.filter(function(or){return Object.getOwnPropertyDescriptor(Vt,or).enumerable})),pn.push.apply(pn,mn)}return pn}function Nn(Vt){for(var An=1;An<arguments.length;An++){var pn=arguments[An]!=null?arguments[An]:{};An%2?Er(Object(pn),!0).forEach(function(mn){(0,m.Z)(Vt,mn,pn[mn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Vt,Object.getOwnPropertyDescriptors(pn)):Er(Object(pn)).forEach(function(mn){Object.defineProperty(Vt,mn,Object.getOwnPropertyDescriptor(pn,mn))})}return Vt}var ar=(0,k.cn)(!1),Dr=(0,v.forwardRef)(function(Vt,An){Vt.name;var pn=Vt.children,mn=Vt.onDock,or=Vt.docked,fr=Vt.className,Fn=(0,b.Z)(Vt,hr),De=(0,A.n9)(),Ue=(0,k.b9)(ar,y.yE);(0,v.useLayoutEffect)(function(){return Ue(!!or),function(){Ue(!1)}},[Ue,or]);var qe=(0,v.useRef)({});qe.current.onCloseRequest=function(){De({openSidebar:null})},qe.current.onDock=function(on){return mn==null?void 0:mn(on)},qe.current=(0,Q.v4)(qe.current,{docked:or,shouldRenderDockButton:!!mn&&or!=null});var dt=(0,v.useRef)(null);(0,v.useImperativeHandle)(An,function(){return dt.current});var Ut=(0,A.Fy)(),qt=(0,v.useCallback)(function(){document.querySelector(".Dialog")||De({openSidebar:null})},[De]);return(0,wr.O)(dt,(0,v.useCallback)(function(on){on.target.closest(".sidebar-trigger")||or&&Ut.canDeviceFitSidebar||qt()},[qt,or,Ut.canDeviceFitSidebar])),(0,v.useEffect)(function(){var on=function(xn){xn.key!==pe.tW.ESCAPE||or&&Ut.canDeviceFitSidebar||qt()};return document.addEventListener(ie.Ks.KEYDOWN,on),function(){document.removeEventListener(ie.Ks.KEYDOWN,on)}},[qt,or,Ut.canDeviceFitSidebar]),(0,$.jsx)(_.W,Nn(Nn({},Fn),{},{className:(0,C.Z)("sidebar",{"sidebar--docked":or},fr),ref:dt,children:(0,$.jsx)(S.Provider,{value:qe.current,children:pn})}))});Dr.displayName="SidebarInner";var Ir=Object.assign((0,v.forwardRef)(function(Vt,An){var pn,mn=(0,te.I)(),or=Vt.onStateChange,fr=(0,v.useRef)(mn.openSidebar);(0,v.useEffect)(function(){var dt,Ut,qt,on,xn;(!mn.openSidebar&&(fr==null||(dt=fr.current)===null||dt===void 0?void 0:dt.name)===Vt.name||((Ut=mn.openSidebar)===null||Ut===void 0?void 0:Ut.name)===Vt.name&&(fr==null||(qt=fr.current)===null||qt===void 0?void 0:qt.name)!==Vt.name||((on=fr.current)===null||on===void 0?void 0:on.name)===Vt.name)&&mn.openSidebar!==fr.current&&(or==null||or(((xn=mn.openSidebar)===null||xn===void 0?void 0:xn.name)!==Vt.name?null:mn.openSidebar)),fr.current=mn.openSidebar},[mn.openSidebar,or,Vt.name]);var Fn=(0,v.useState)(!1),De=(0,g.Z)(Fn,2),Ue=De[0],qe=De[1];return(0,v.useLayoutEffect)(function(){return qe(!0),function(){return qe(!1)}},[]),Ue&&((pn=mn.openSidebar)===null||pn===void 0?void 0:pn.name)===Vt.name?(0,v.createElement)(Dr,Nn(Nn({},Vt),{},{ref:An,key:Vt.name})):null}),{Header:ee,TabTriggers:Tt,TabTrigger:Wn,Tabs:Dt,Tab:Kn,Trigger:U});Ir.displayName="Sidebar"},5644:function(f,h,c){c.d(h,{Z:function(){return pe}});var g=c(7169),m=c(9787),b=c.n(m),v=c(487),w=c.n(v),_=c(631),k=c.n(_),y=c(2052),S=c.n(y),C=c(4010),I=c.n(C),A=c(1469),T=c.n(A),L=c(9329),j=c.n(L),$=c(5892),ee={};ee.styleTagTransform=j(),ee.setAttributes=I(),ee.insert=S().bind(null,"head"),ee.domAPI=k(),ee.insertStyleElement=T(),w()($.Z,ee),$.Z&&$.Z.locals&&$.Z.locals;var Q=c(9980),pe=function(ie){var te=ie.size,Z=te===void 0?"1em":te,D=ie.circleWidth,B=D===void 0?8:D,H=ie.synchronized,V=H!==void 0&&H,R=-b().useRef(Date.now()).current%1600;return(0,Q.jsx)("div",{className:"Spinner",children:(0,Q.jsx)("svg",{viewBox:"0 0 100 100",style:(0,g.Z)({width:Z,height:Z},"--spinner-delay",V?"".concat(R,"ms"):0),children:(0,Q.jsx)("circle",{cx:"50",cy:"50",r:50-B/2,strokeWidth:B,fill:"none",strokeMiterlimit:"10"})})})}},7239:function(f,h,c){c.d(h,{Z:function(){return te}});var g=c(7169),m=c(487),b=c.n(m),v=c(631),w=c.n(v),_=c(2052),k=c.n(_),y=c(4010),S=c.n(y),C=c(1469),I=c.n(C),A=c(9329),T=c.n(A),L=c(3874),j={};j.styleTagTransform=T(),j.setAttributes=S(),j.insert=k().bind(null,"head"),j.domAPI=w(),j.insertStyleElement=I(),b()(L.Z,j),L.Z&&L.Z.locals&&L.Z.locals;var $=c(9787),ee=c(9076),Q=c(9980);function pe(Z,D){var B=Object.keys(Z);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Z);D&&(H=H.filter(function(V){return Object.getOwnPropertyDescriptor(Z,V).enumerable})),B.push.apply(B,H)}return B}function ie(Z){for(var D=1;D<arguments.length;D++){var B=arguments[D]!=null?arguments[D]:{};D%2?pe(Object(B),!0).forEach(function(H){(0,g.Z)(Z,H,B[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(B)):pe(Object(B)).forEach(function(H){Object.defineProperty(Z,H,Object.getOwnPropertyDescriptor(B,H))})}return Z}var te={Row:(0,$.forwardRef)(function(Z,D){var B=Z.children,H=Z.gap,V=Z.align,R=Z.justifyContent,Y=Z.className,E=Z.style;return(0,Q.jsx)("div",{className:(0,ee.Z)("Stack Stack_horizontal",Y),style:ie({"--gap":H,alignItems:V,justifyContent:R},E),ref:D,children:B})}),Col:(0,$.forwardRef)(function(Z,D){var B=Z.children,H=Z.gap,V=Z.align,R=Z.justifyContent,Y=Z.className,E=Z.style;return(0,Q.jsx)("div",{className:(0,ee.Z)("Stack Stack_vertical",Y),style:ie({"--gap":H,justifyItems:V,justifyContent:R},E),ref:D,children:B})})}},1319:function(f,h,c){c.d(h,{V:function(){return A}});var g=c(8950),m=c(2577),b=c(2975),v=c.n(b),w=(c(5422),c(9787)),_=c.n(w),k=c(9076),y=c(736),S=c(6797),C=c(5644),I=c(9980),A=_().forwardRef(function(T,L){var j=(0,y.J0)().id,$=_().useRef(null);_().useImperativeHandle(L,function(){return $.current});var ee="ToolIcon_size_".concat(T.size),Q=(0,w.useState)(!1),pe=(0,m.Z)(Q,2),ie=pe[0],te=pe[1],Z=(0,w.useRef)(!0),D=function(){var V=(0,g.Z)(v().mark(function R(Y){var E,W;return v().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(W="onClick"in T&&((E=T.onClick)===null||E===void 0?void 0:E.call(T,Y)))||!("then"in W)){F.next=18;break}return F.prev=2,te(!0),F.next=6,W;case 6:F.next=15;break;case 8:if(F.prev=8,F.t0=F.catch(2),F.t0 instanceof S._){F.next=14;break}throw F.t0;case 14:console.warn(F.t0);case 15:return F.prev=15,Z.current&&te(!1),F.finish(15);case 18:case"end":return F.stop()}},R,null,[[2,8,15,18]])}));return function(R){return V.apply(this,arguments)}}();(0,w.useEffect)(function(){return function(){Z.current=!1}},[]);var B=(0,w.useRef)(null);if(T.type==="button"||T.type==="icon"||T.type==="submit"){var H=T.type==="icon"?"button":T.type;return(0,I.jsxs)("button",{className:(0,k.Z)("ToolIcon_type_button",ee,T.className,T.visible&&!T.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!T.hidden,"ToolIcon--selected":T.selected,"ToolIcon--plain":T.type==="icon"}),style:T.style,"data-testid":T["data-testid"],hidden:T.hidden,title:T.title,"aria-label":T["aria-label"],type:H,onClick:D,ref:$,disabled:ie||T.isLoading,children:[(T.icon||T.label)&&(0,I.jsxs)("div",{className:"ToolIcon__icon","aria-hidden":"true",children:[T.icon||T.label,T.keyBindingLabel&&(0,I.jsx)("span",{className:"ToolIcon__keybinding",children:T.keyBindingLabel}),T.isLoading&&(0,I.jsx)(C.Z,{})]}),T.showAriaLabel&&(0,I.jsxs)("div",{className:"ToolIcon__label",children:[T["aria-label"]," ",ie&&(0,I.jsx)(C.Z,{})]}),T.children]})}return(0,I.jsxs)("label",{className:(0,k.Z)("ToolIcon",T.className),title:T.title,onPointerDown:function(V){var R;B.current=V.pointerType||null,(R=T.onPointerDown)===null||R===void 0||R.call(T,{pointerType:V.pointerType||null})},onPointerUp:function(){requestAnimationFrame(function(){B.current=null})},children:[(0,I.jsx)("input",{className:"ToolIcon_type_radio ".concat(ee),type:"radio",name:T.name,"aria-label":T["aria-label"],"aria-keyshortcuts":T["aria-keyshortcuts"],"data-testid":T["data-testid"],id:"".concat(j,"-").concat(T.id),onChange:function(){var V;(V=T.onChange)===null||V===void 0||V.call(T,{pointerType:B.current})},checked:T.checked,ref:$}),(0,I.jsxs)("div",{className:"ToolIcon__icon",children:[T.icon,T.keyBindingLabel&&(0,I.jsx)("span",{className:"ToolIcon__keybinding",children:T.keyBindingLabel})]})]})});A.defaultProps={visible:!0,className:"",size:"medium"},A.displayName="ToolButton"},1894:function(f,h,c){c.d(h,{u:function(){return pe},bK:function(){return ee},Js:function(){return Q}});var g=c(487),m=c.n(g),b=c(631),v=c.n(b),w=c(2052),_=c.n(w),k=c(4010),y=c.n(k),S=c(1469),C=c.n(S),I=c(9329),A=c.n(I),T=c(6626),L={};L.styleTagTransform=A(),L.setAttributes=y(),L.insert=_().bind(null,"head"),L.domAPI=v(),L.insertStyleElement=C(),m()(T.Z,L),T.Z&&T.Z.locals&&T.Z.locals;var j=c(9787),$=c(9980),ee=function(){var ie=document.querySelector(".excalidraw-tooltip");if(ie)return ie;var te=document.createElement("div");return document.body.appendChild(te),te.classList.add("excalidraw-tooltip"),te},Q=function(ie,te){var Z,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bottom",B=ie.getBoundingClientRect(),H=window.innerWidth,V=window.innerHeight,R=5,Y=te.left+te.width/2-B.width/2;Y<0?Y=R:Y+B.width>=H&&(Y=H-B.width-R),D==="bottom"?(Z=te.top+te.height+R)+B.height>=V&&(Z=te.top-B.height-R):(Z=te.top-B.height-R)<0&&(Z=te.top+te.height+R),Object.assign(ie.style,{top:"".concat(Z,"px"),left:"".concat(Y,"px")})},pe=function(ie){var te=ie.children,Z=ie.label,D=ie.long,B=D!==void 0&&D,H=ie.style;return(0,j.useEffect)(function(){return function(){return ee().classList.remove("excalidraw-tooltip--visible")}},[]),(0,$.jsx)("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:function(V){return function(R,Y,E,W){Y.classList.add("excalidraw-tooltip--visible"),Y.style.minWidth=W?"50ch":"10ch",Y.style.maxWidth=W?"50ch":"15ch",Y.textContent=E;var F=R.getBoundingClientRect();Q(Y,F)}(V.currentTarget,ee(),Z,B)},onPointerLeave:function(){return ee().classList.remove("excalidraw-tooltip--visible")},style:H,children:te})}},2242:function(f,h,c){var g=c(2726),m=c(1930),b=c(9787),v=c.n(b),w=c(8211),_=["i18nKey","children"],k=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,y=/{{([\w-]+)}}/,S=/<([\w-]+)>/,C=/<\/([\w-]+)>/;h.Z=function(I){var A=I.i18nKey,T=(I.children,(0,g.Z)(I,_)),L=(0,w.QT)().t;return v().createElement.apply(v(),[v().Fragment,{}].concat((0,m.Z)(function(j,$){var ee=[{name:"",children:[]}];return j.split(k).filter(Boolean).forEach(function(Q){var pe=Q.match(S),ie=Q.match(C),te=Q.match(y);if(pe!==null){var Z=pe[1];$.hasOwnProperty(Z)?ee.push({name:Z,children:[]}):console.warn("Trans: missed to pass in prop ".concat(Z," for interpolating ").concat(j))}else if(ie!==null)if(ie[1]===ee[ee.length-1].name){var D=ee.pop(),B=v().createElement.apply(v(),[v().Fragment,{}].concat((0,m.Z)(D.children))),H=$[D.name];typeof H=="function"&&ee[ee.length-1].children.push(H(B))}else console.warn("Trans: unexpected end tag ".concat(Q," for interpolating ").concat(j));else if(te!==null){var V=te[1];$.hasOwnProperty(V)?ee[ee.length-1].children.push($[V]):console.warn("Trans: key ".concat(V," not in props for interpolating ").concat(j))}else ee[ee.length-1].children.push(Q)}),ee.length!==1&&console.warn("Trans: stack not empty for interpolating ".concat(j)),ee[0].children}(L(A),T))))}},6773:function(f,h,c){c.d(h,{Z:function(){return Z}});var g=c(2577),m=c(487),b=c.n(m),v=c(631),w=c.n(v),_=c(2052),k=c.n(_),y=c(4010),S=c.n(y),C=c(1469),I=c.n(C),A=c(9329),T=c.n(A),L=c(6359),j={};j.styleTagTransform=T(),j.setAttributes=S(),j.insert=k().bind(null,"head"),j.domAPI=w(),j.insertStyleElement=I(),b()(L.Z,j),L.Z&&L.Z.locals&&L.Z.locals;var $=c(9787),ee=c.n($),Q=c(9076),pe=c(1894),ie=c(736),te=c(9980),Z=function(D){var B=D.className,H=D.mobile,V=D.collaborators,R=(0,ie.eh)(),Y=new Map;V.forEach(function(W,F){Y.set(W.id||F,W)});var E=Y.size>0&&Array.from(Y).filter(function(W){var F=(0,g.Z)(W,2),z=(F[0],F[1]);return Object.keys(z).length!==0}).map(function(W){var F=(0,g.Z)(W,2),z=F[0],q=F[1],fe=R.renderAction("goToCollaborator",[z,q]);return H?(0,te.jsx)(pe.u,{label:q.username||"Unknown user",children:fe},z):(0,te.jsx)(ee().Fragment,{children:fe},z)});return(0,te.jsx)("div",{className:(0,Q.Z)("UserList",B,{UserList_mobile:H}),children:E})}},1510:function(f,h,c){c.d(h,{Z:function(){return ge}});var g=c(7169),m=c(2726),b=c(9076),v=c(736),w=c(9980),_=["className","children","onToggle","title"];function k(X,we){var be=Object.keys(X);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(X);we&&(le=le.filter(function(ye){return Object.getOwnPropertyDescriptor(X,ye).enumerable})),be.push.apply(be,le)}return be}function y(X){for(var we=1;we<arguments.length;we++){var be=arguments[we]!=null?arguments[we]:{};we%2?k(Object(be),!0).forEach(function(le){(0,g.Z)(X,le,be[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(be)):k(Object(be)).forEach(function(le){Object.defineProperty(X,le,Object.getOwnPropertyDescriptor(be,le))})}return X}var S=function(X){var we=X.className,be=we===void 0?"":we,le=X.children,ye=X.onToggle,ue=X.title,xe=(0,m.Z)(X,_),Pe=(0,v.Fy)(),Ne=(0,b.Z)("dropdown-menu-button ".concat(be),"zen-mode-transition",{"dropdown-menu-button--mobile":Pe.isMobile}).trim();return(0,w.jsx)("button",y(y({"data-prevent-outside-click":!0,className:Ne,onClick:ye,type:"button","data-testid":"dropdown-menu-button",title:ue},xe),{},{children:le}))},C=S;S.displayName="DropdownMenuTrigger";var I=c(2739),A=function(){return(0,w.jsx)("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}})},T=A;A.displayName="DropdownMenuSeparator";var L=function(X){var we=X.children,be=X.className,le=be===void 0?"":be,ye=X.style,ue=X.title;return(0,w.jsxs)("div",{className:"dropdown-menu-group ".concat(le),style:ye,children:[ue&&(0,w.jsx)("p",{className:"dropdown-menu-group-title",children:ue}),we]})},j=L;L.displayName="DropdownMenuGroup";var $=c(1881),ee=c(7239),Q=c(9787),pe=c.n(Q),ie=c(6772),te=c(60),Z=function(X){var we=X.children,be=X.onClickOutside,le=X.className,ye=le===void 0?"":le,ue=X.onSelect,xe=X.style,Pe=(0,v.Fy)(),Ne=(0,Q.useRef)(null);(0,te.O)(Ne,function(){be==null||be()});var Me=(0,b.Z)("dropdown-menu ".concat(ye),{"dropdown-menu--mobile":Pe.isMobile}).trim();return(0,w.jsx)(ie.N7.Provider,{value:{onSelect:ue},children:(0,w.jsx)("div",{ref:Ne,className:Me,style:xe,"data-testid":"dropdown-menu",children:Pe.isMobile?(0,w.jsx)(ee.Z.Col,{className:"dropdown-menu-container",children:we}):(0,w.jsx)($.W,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:we})})})};Z.displayName="DropdownMenuContent";var D=Z,B=c(4215),H=["children","className"];function V(X,we){var be=Object.keys(X);if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(X);we&&(le=le.filter(function(ye){return Object.getOwnPropertyDescriptor(X,ye).enumerable})),be.push.apply(be,le)}return be}function R(X){for(var we=1;we<arguments.length;we++){var be=arguments[we]!=null?arguments[we]:{};we%2?V(Object(be),!0).forEach(function(le){(0,g.Z)(X,le,be[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(be)):V(Object(be)).forEach(function(le){Object.defineProperty(X,le,Object.getOwnPropertyDescriptor(be,le))})}return X}var Y=function(X){var we=X.children,be=X.className,le=be===void 0?"":be,ye=(0,m.Z)(X,H);return(0,w.jsx)("div",R(R({},ye),{},{className:"dropdown-menu-item-base dropdown-menu-item-custom ".concat(le).trim(),children:we}))},E=c(487),W=c.n(E),F=c(631),z=c.n(F),q=c(2052),fe=c.n(q),ce=c(4010),U=c.n(ce),ve=c(1469),oe=c.n(ve),re=c(9329),ae=c.n(re),me=c(7399),he={};he.styleTagTransform=ae(),he.setAttributes=U(),he.insert=fe().bind(null,"head"),he.domAPI=z(),he.insertStyleElement=oe(),W()(me.Z,he),me.Z&&me.Z.locals&&me.Z.locals;var se=function(X){var we=X.children,be=X.open,le=function(ue){return pe().Children.toArray(ue).find(function(xe){return pe().isValidElement(xe)&&typeof xe.type!="string"&&(xe==null?void 0:xe.type.displayName)&&xe.type.displayName==="DropdownMenuTrigger"})||null}(we),ye=function(ue){return pe().Children.toArray(ue).find(function(xe){return pe().isValidElement(xe)&&typeof xe.type!="string"&&(xe==null?void 0:xe.type.displayName)&&xe.type.displayName==="DropdownMenuContent"})||null}(we);return(0,w.jsxs)(w.Fragment,{children:[le,be&&ye]})};se.Trigger=C,se.Content=D,se.Item=I.Z,se.ItemLink=B.Z,se.ItemCustom=Y,se.Group=j,se.Separator=T;var ge=se;se.displayName="DropdownMenu"},2739:function(f,h,c){var g=c(7169),m=c(2726),b=c(6772),v=c(4122),w=c(9980),_=["icon","onSelect","children","shortcut","className"];function k(C,I){var A=Object.keys(C);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(C);I&&(T=T.filter(function(L){return Object.getOwnPropertyDescriptor(C,L).enumerable})),A.push.apply(A,T)}return A}function y(C){for(var I=1;I<arguments.length;I++){var A=arguments[I]!=null?arguments[I]:{};I%2?k(Object(A),!0).forEach(function(T){(0,g.Z)(C,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(A)):k(Object(A)).forEach(function(T){Object.defineProperty(C,T,Object.getOwnPropertyDescriptor(A,T))})}return C}var S=function(C){var I,A=C.icon,T=C.onSelect,L=C.children,j=C.shortcut,$=C.className,ee=(0,m.Z)(C,_),Q=(0,b.qZ)(ee.onClick,T);return(0,w.jsx)("button",y(y({},ee),{},{onClick:Q,type:"button",className:(0,b.n)($),title:(I=ee.title)!==null&&I!==void 0?I:ee["aria-label"],children:(0,w.jsx)(v.Z,{icon:A,shortcut:j,children:L})}))};h.Z=S,S.displayName="DropdownMenuItem"},4122:function(f,h,c){var g=c(736),m=c(9980);h.Z=function(b){var v=b.icon,w=b.shortcut,_=b.children,k=(0,g.Fy)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"dropdown-menu-item__icon",children:v}),(0,m.jsx)("div",{className:"dropdown-menu-item__text",children:_}),w&&!k.isMobile&&(0,m.jsx)("div",{className:"dropdown-menu-item__shortcut",children:w})]})}},4215:function(f,h,c){var g=c(7169),m=c(2726),b=c(4122),v=c(6772),w=c(9980),_=["icon","shortcut","href","children","onSelect","className"];function k(C,I){var A=Object.keys(C);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(C);I&&(T=T.filter(function(L){return Object.getOwnPropertyDescriptor(C,L).enumerable})),A.push.apply(A,T)}return A}function y(C){for(var I=1;I<arguments.length;I++){var A=arguments[I]!=null?arguments[I]:{};I%2?k(Object(A),!0).forEach(function(T){(0,g.Z)(C,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(A)):k(Object(A)).forEach(function(T){Object.defineProperty(C,T,Object.getOwnPropertyDescriptor(A,T))})}return C}var S=function(C){var I,A=C.icon,T=C.shortcut,L=C.href,j=C.children,$=C.onSelect,ee=C.className,Q=ee===void 0?"":ee,pe=(0,m.Z)(C,_),ie=(0,v.qZ)(pe.onClick,$);return(0,w.jsx)("a",y(y({},pe),{},{href:L,target:"_blank",rel:"noreferrer",className:(0,v.n)(Q),title:(I=pe.title)!==null&&I!==void 0?I:pe["aria-label"],onClick:ie,children:(0,w.jsx)(b.Z,{icon:A,shortcut:T,children:j})}))};h.Z=S,S.displayName="DropdownMenuItemLink"},6772:function(f,h,c){c.d(h,{N7:function(){return w},n:function(){return _},qZ:function(){return k}});var g=c(9787),m=c.n(g),b=c(2335),v=c(6340),w=m().createContext({}),_=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return"dropdown-menu-item dropdown-menu-item-base ".concat(y).trim()},k=function(y,S){var C=(0,g.useContext)(w);return(0,v.Mj)(y,function(I){var A,T=new CustomEvent(b.Ks.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});S==null||S(T),T.defaultPrevented||(A=C.onSelect)===null||A===void 0||A.call(C,T)})}},7145:function(f,h,c){c.d(h,{$:function(){return y}});var g=c(7169),m=c(2577),b=c(6274),v=c(9787),w=c(8690),_=c(9980);function k(S,C){var I=Object.keys(S);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(S);C&&(A=A.filter(function(T){return Object.getOwnPropertyDescriptor(S,T).enumerable})),I.push.apply(I,A)}return I}var y=function(S,C){var I=(0,b.cn)(0),A=function(T){var L=(0,w.R6)().jotaiScope,j=(0,b.KO)(I,L),$=(0,m.Z)(j,2)[1],ee=(0,v.useRef)({preferHost:!1,counter:0});return(0,v.useLayoutEffect)(function(){var Q=ee.current;return $(function(pe){var ie=pe+1;return Q.counter=ie,ie}),function(){$(function(pe){var ie=pe-1;return Q.counter=ie,ie||(Q.preferHost=!1),ie})}},[$]),T.__fallback||(ee.current.preferHost=!0),!ee.current.counter&&T.__fallback&&ee.current.preferHost||ee.current.counter>1&&T.__fallback?null:(0,_.jsx)(C,function(Q){for(var pe=1;pe<arguments.length;pe++){var ie=arguments[pe]!=null?arguments[pe]:{};pe%2?k(Object(ie),!0).forEach(function(te){(0,g.Z)(Q,te,ie[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ie)):k(Object(ie)).forEach(function(te){Object.defineProperty(Q,te,Object.getOwnPropertyDescriptor(ie,te))})}return Q}({},T))};return A.displayName=S,A}},3646:function(f,h,c){c.d(h,{$W:function(){return mn},$c:function(){return We},$q:function(){return ce},BF:function(){return Fe},Ct:function(){return ot},DG:function(){return Ne},DJ:function(){return B},DS:function(){return cn},EO:function(){return hr},ET:function(){return we},FC:function(){return te},Gc:function(){return Ve},HL:function(){return Ye},Hk:function(){return Dr},Hy:function(){return se},IN:function(){return ut},J8:function(){return Me},NA:function(){return re},NW:function(){return me},Nw:function(){return ar},OA:function(){return Jt},OW:function(){return V},P7:function(){return Nn},Pm:function(){return z},RJ:function(){return et},RY:function(){return he},Re:function(){return Y},ST:function(){return Kt},Sd:function(){return U},TP:function(){return Re},Tl:function(){return Pe},Tw:function(){return Cn},UE:function(){return Se},UI:function(){return Vt},UT:function(){return pn},VL:function(){return q},Vl:function(){return _e},Vq:function(){return $},W2:function(){return Nt},W5:function(){return St},Wl:function(){return bn},X7:function(){return Zt},XB:function(){return fe},XH:function(){return oe},YA:function(){return Q},ZA:function(){return Yt},Zm:function(){return be},_C:function(){return ie},_U:function(){return D},a0:function(){return ht},a1:function(){return ue},a5:function(){return un},aA:function(){return Er},aL:function(){return Ir},aT:function(){return jn},bf:function(){return Hn},by:function(){return ge},dg:function(){return or},e0:function(){return E},eQ:function(){return le},fr:function(){return Ot},gK:function(){return sn},h0:function(){return X},il:function(){return Ln},j8:function(){return zn},jn:function(){return nn},kL:function(){return ae},kM:function(){return vt},lF:function(){return st},m:function(){return Rn},m9:function(){return Wt},mh:function(){return tt},mv:function(){return An},nb:function(){return R},np:function(){return _t},nq:function(){return Dt},o3:function(){return dr},oQ:function(){return Z},oT:function(){return yn},op:function(){return vn},pO:function(){return ee},po:function(){return xe},pw:function(){return Ie},q0:function(){return Et},qQ:function(){return pe},rr:function(){return wr},t5:function(){return ze},tW:function(){return Gt},tb:function(){return F},tn:function(){return Wn},uD:function(){return pt},vo:function(){return $n},wr:function(){return Tt},xL:function(){return ve},xP:function(){return ye},xs:function(){return Ke},z6:function(){return Kn},zG:function(){return Be},zb:function(){return W},zl:function(){return fr},zu:function(){return H}});var g=c(7169),m=c(2726),b=c(9787),v=c.n(b),w=c(9744),_=c(9076),k=c(2335),y=c(9980),S=["width","height","mirror","style"];function C(Fn,De){var Ue=Object.keys(Fn);if(Object.getOwnPropertySymbols){var qe=Object.getOwnPropertySymbols(Fn);De&&(qe=qe.filter(function(dt){return Object.getOwnPropertyDescriptor(Fn,dt).enumerable})),Ue.push.apply(Ue,qe)}return Ue}function I(Fn){for(var De=1;De<arguments.length;De++){var Ue=arguments[De]!=null?arguments[De]:{};De%2?C(Object(Ue),!0).forEach(function(qe){(0,g.Z)(Fn,qe,Ue[qe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Fn,Object.getOwnPropertyDescriptors(Ue)):C(Object(Ue)).forEach(function(qe){Object.defineProperty(Fn,qe,Object.getOwnPropertyDescriptor(Ue,qe))})}return Fn}var A=function(Fn){return Fn===k.C6.LIGHT?w.white:"#1e1e1e"},T=function(Fn){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:512,Ue=typeof De=="number"?{width:De}:De,qe=Ue.width,dt=qe===void 0?512:qe,Ut=Ue.height,qt=Ut===void 0?dt:Ut,on=Ue.mirror,xn=Ue.style,tn=(0,m.Z)(Ue,S);return(0,y.jsx)("svg",I(I({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 ".concat(dt," ").concat(qt),className:(0,_.Z)({"rtl-mirror":on}),style:xn},tn),{},{children:typeof Fn=="string"?(0,y.jsx)("path",{fill:"currentColor",d:Fn}):Fn}))},L={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},j={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},$=(T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("rect",{x:3,y:8,width:18,height:4,rx:1}),(0,y.jsx)("line",{x1:12,y1:8,x2:12,y2:21}),(0,y.jsx)("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),(0,y.jsx)("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),L),T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),(0,y.jsx)("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),(0,y.jsx)("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),(0,y.jsx)("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),(0,y.jsx)("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),L)),ee=T((0,y.jsxs)("svg",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,y.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),L),Q=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,y.jsx)("circle",{cx:"12",cy:"19",r:"1"}),(0,y.jsx)("circle",{cx:"12",cy:"5",r:"1"})]}),L),pe=T((0,y.jsxs)("svg",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),(0,y.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),(0,y.jsx)("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),L),ie=T((0,y.jsxs)("g",{children:[(0,y.jsx)("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,y.jsx)("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,y.jsx)("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:(0,y.jsx)("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),(0,y.jsx)("g",{mask:"url(#UnlockedIcon)",children:(0,y.jsx)("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),j),te=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),(0,y.jsx)("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),(0,y.jsx)("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),j),Z=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),D=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),B=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),H=(T((0,y.jsxs)("g",{fill:"currentColor",children:[(0,y.jsx)("path",{d:"M24.296 12.214c0 .112-.134.224-.291.224-.135 0-.516.629-.808 1.392-.897 2.335-9.867 20.096-9.89 19.534 0-.292-.134-.494-.359-.494-.313 0-.358.18-.224 1.055.135 1.01.045 1.236-3.14 7.432-1.793 3.525-3.722 7.208-4.282 8.196-.584 1.032-1.032 2.155-1.077 2.626-.067.809.022.92 1.973 2.605 1.122.988 2.557 2.223 3.185 2.784 2.826 2.582 4.149 3.615 4.508 3.547.538-.09 8.858-8.823 8.88-9.317 0-.225-.403-3.638-.897-7.59-.852-6.735-1.66-14.616-1.57-15.38.068-.47-.269-2.85-.516-3.884-.201-.808-.112-1.145 1.503-4.827.942-2.178 2.176-4.85 2.714-5.928.515-1.077.964-2.02.964-2.088 0-.067-.157-.112-.336-.112-.18 0-.337.09-.337.225Zm-5.158 16.772c.247 1.572.74 5.344 1.099 8.375.695 5.568 1.503 11.742 1.727 13.314.135.786.045.943-1.413 2.56-2.534 2.851-5.225 5.658-6.145 6.376l-.852.674-4.373-4.086c-4.037-3.728-4.373-4.11-4.127-4.558a5154.2 5154.2 0 0 1 2.535-4.626 727.864 727.864 0 0 0 3.678-6.78c.784-1.46 1.502-2.717 1.637-2.785.156-.09.201 2.178.156 7.006-.09 7.207-.067 7.23.651 7.072.09 0 .157-3.637.157-8.06V35.43l2.355-4.715c1.3-2.605 2.377-4.693 2.422-4.67.045.022.27 1.347.493 2.94ZM9.562 1.818C7.903 3.143 5.346 5.388 3.328 7.32L1.735 8.823l.292 1.976c.157 1.078.449 3.188.628 4.67.202 1.482.404 2.874.47 3.077.09.269 0 .404-.246.404-.426 0-.449-.113.718 3.592.286.952.577 1.903.875 2.851.044.158.224.225.425.158.202-.09.314-.27.247-.427-.067-.18.045-.36.224-.427.247-.09.225-.269-.157-.92-.605-1.01-2.152-9.633-2.242-12.416-.067-1.976-.067-1.999.762-3.121.808-1.1 2.67-2.762 5.54-4.873.807-.605 1.614-1.28 1.839-1.504.336-.404.493-.292 3.319 2.717 1.637 1.729 3.453 3.502 4.037 3.952l1.076.808-.83 1.75c-.448.944-2.265 4.581-4.059 8.04-3.745 7.274-2.983 6.578-7.333 6.645l-2.826.023-.942 1.077c-.987 1.146-1.121 1.572-.65 2.29.18.248.313.652.313.898 0 .405.157.472 1.055.517.56.023 1.076.09 1.144.157.067.068.156 1.46.224 3.098l.09 2.965-1.503 3.232C1.735 45.422.749 47.891.749 48.7c0 .427.09.786.18.786.224 0 .224-.022 9.35-19.085a4398.495 4398.495 0 0 1 8.927-18.546c.672-1.369 1.278-2.626 1.323-2.806.045-.202-1.503-1.751-3.97-3.93-2.22-1.975-4.171-3.772-4.35-3.974-.516-.628-1.279-.426-2.647.674ZM8.441 31.231c-.18.472-.65 1.46-1.031 2.2-.629 1.258-.696 1.303-.853.786-.09-.314-.157-1.235-.18-2.066-.022-1.639-.067-1.616 1.817-1.728L8.8 30.4l-.358.831Zm1.884-3.592c-1.032 1.998-1.077 2.02-3.903 2.155-2.489.135-2.533.112-2.533-.36 0-.269-.09-.628-.203-.808-.134-.202-.044-.56.27-1.055l.493-.763H6.69c1.234-.023 2.647-.113 3.14-.202.494-.09.92-.135.965-.113.045.023-.18.54-.471 1.146Zm-.09-20.477c-.404.292-.516.584-.516 1.325 0 .875.067 1.01.673 1.257.605.247.763.224 1.458-.247.92-.629.941-.786.269-1.796-.583-.876-1.166-1.033-1.884-.54Z"}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.703 11.793c.166-.291.501-.514.93-.514.38 0 .698.161.82.283.161.162.225.35.225.54a.822.822 0 0 1-.056.289c-.08.218-.5 1.106-.983 2.116-.535 1.071-1.76 3.727-2.699 5.895-.79 1.802-1.209 2.784-1.404 3.416-.142.461-.132.665-.058.961.264 1.103.6 3.647.53 4.132-.088.756.727 8.547 1.57 15.21.5 3.997.903 7.45.903 7.676l-.001.033c-.004.087-.041.288-.211.54-.24.354-.914 1.143-1.8 2.119-2.004 2.21-5.107 5.423-6.463 6.653-.322.292-.566.485-.696.56a.884.884 0 0 1-.289.111c-.194.037-.579-.007-1.11-.349-.707-.453-1.981-1.522-4-3.366-.627-.561-2.061-1.794-3.176-2.776-.81-.699-1.308-1.138-1.612-1.466-.32-.343-.47-.61-.549-.87-.078-.257-.085-.515-.055-.874.05-.52.521-1.769 1.166-2.91.559-.985 2.48-4.654 4.269-8.17 1.579-3.071 2.392-4.663 2.792-5.612.32-.759.329-1 .277-1.387-.085-.553-.092-.891-.052-1.092a.942.942 0 0 1 .274-.52c.164-.157.384-.261.704-.261.094 0 .184.011.27.033 1.924-3.44 8.554-16.632 9.316-18.616.276-.724.64-1.336.848-1.556a.965.965 0 0 1 .32-.228Zm-5.399 16.402c-.49.942-.971 1.888-1.446 2.837l-2.28 4.565v7.871c0 4.023-.06 7.404-.136 8.04-.067.552-.474.691-.654.722l.075-.008c-.317.07-.574.063-.778-.023-.234-.098-.5-.297-.63-.857-.156-.681-.158-2.462-.103-6.893.019-2.022.022-3.592.008-4.725-.156.276-.315.562-.467.843a737.624 737.624 0 0 1-3.682 6.79 3618.972 3618.972 0 0 0-2.462 4.493c.062.088.169.231.289.364.55.61 1.631 1.623 3.624 3.462l3.931 3.674.377-.298c.907-.709 3.554-3.479 6.055-6.293.425-.47.73-.814.946-1.084.175-.22.28-.36.319-.501.031-.117.002-.227-.024-.379l-.004-.02c-.224-1.572-1.032-7.753-1.728-13.33-.358-3.022-.85-6.782-1.096-8.349l-.002-.01c-.042-.301-.087-.603-.132-.891ZM9.118 1.264C9.91.628 10.537.27 11.028.144c.727-.186 1.27.003 1.713.53.186.209 2.107 1.972 4.287 3.912 2.02 1.783 3.434 3.16 3.897 3.743.326.41.322.756.296.873a1.046 1.046 0 0 1-.005.018c-.047.188-.669 1.512-1.374 2.947a4348.55 4348.55 0 0 0-8.923 18.54c-7.335 15.32-8.808 18.396-9.217 19.015-.235.355-.419.404-.525.437a.815.815 0 0 1-.249.036.745.745 0 0 1-.647-.363C.176 49.67.04 49.222.04 48.7c0-.286.09-.754.316-1.434.452-1.356 1.466-3.722 3.225-7.53l1.432-3.083-.084-2.787a72.902 72.902 0 0 0-.156-2.53 7.307 7.307 0 0 0-.539-.046c-.463-.024-.764-.062-.96-.124-.304-.096-.48-.252-.598-.438-.105-.165-.17-.374-.17-.663 0-.134-.081-.348-.178-.481l-.019-.028c-.293-.448-.406-.831-.373-1.234.04-.484.34-1.052 1.08-1.91l.759-.869c-.103-.325-.471-1.513-.854-2.787-.737-2.339-1.004-3.238-1.018-3.578-.016-.393.134-.59.27-.715a.721.721 0 0 1 .192-.125 89.87 89.87 0 0 1-.414-2.782 231.651 231.651 0 0 0-.625-4.652l-.292-1.976a.71.71 0 0 1 .215-.62l1.589-1.501C4.87 4.86 7.446 2.599 9.118 1.264Zm-1.833 33.75a.819.819 0 0 1-.406.208.73.73 0 0 1-.491-.063l.048 1.618v.009l.849-1.773Zm5.874.697c-.035.087-.07.175-.107.261a20.92 20.92 0 0 1-.36.798.688.688 0 0 1 .457.007l.01.004v-1.07Zm.72-1.892-.015.018a.745.745 0 0 1-.407.236c.02.195.027.378 0 .592l.422-.846ZM7.7 31.175c-.268.027-.489.055-.6.07-.006.056-.013.13-.016.194-.005.19 0 .42.004.694.003.111.006.225.011.338.232-.471.459-.956.6-1.296Zm2.12-1.456a2.04 2.04 0 0 1-.415.31c.064.104.099.222.104.341l.132-.277.18-.374Zm-.14-2.374c-.654.079-1.882.153-2.974.173h-1.87l-.281.435c-.09.141-.17.331-.203.414.102.21.189.508.226.788h.007c.364.006.928-.023 1.805-.07 1.243-.06 1.88-.052 2.315-.291.154-.086.266-.215.387-.393.176-.261.354-.605.587-1.056Zm2.136-1.784c-.157.16-.331.3-.52.422a.631.631 0 0 1 .182.281l.337-.703Zm7.205-1.478c-.222.442-.445.883-.667 1.32a.787.787 0 0 1 .61.007c.036.018.145.07.243.2-.032-.165-.067-.33-.105-.493-.088-.351-.137-.633-.08-1.034h-.001ZM11.415 2.546c-.358.319-1.039.879-1.725 1.394C6.903 5.989 5.087 7.59 4.301 8.662c-.28.38-.458.605-.556.852-.15.38-.103.798-.068 1.824.063 1.923.833 6.669 1.493 9.686.262 1.199.483 2.11.654 2.394.25.426.364.71.398.894a.923.923 0 0 1-.184.764l1.27-.01c.863-.014 1.523.003 2.056-.019.424-.017.75-.052 1.034-.187.336-.159.596-.458.921-.955.62-.948 1.373-2.515 2.705-5.103 1.789-3.448 3.6-7.076 4.047-8.015l.582-1.227-.62-.466c-.595-.458-2.45-2.263-4.12-4.027a59.654 59.654 0 0 0-2.498-2.52ZM5.81 24.876v-.001l-.013-.03.013.031Zm-.71-.835.027-.011a.55.55 0 0 0-.028.011Zm19.904-11.777v.01-.01Zm.002-.016v-.034.034ZM9.82 6.587c-.587.424-.81.823-.81 1.9 0 .787.12 1.157.344 1.42.158.186.388.339.77.494.352.144.603.207.838.209.347.002.688-.12 1.285-.525.707-.483.98-.864 1.036-1.238.052-.352-.09-.812-.574-1.54-.412-.619-.853-.95-1.29-1.072-.489-.139-1.016-.05-1.586.342l-.013.01Zm2.015 2.028a6.288 6.288 0 0 0-.306-.52c-.19-.284-.326-.488-.531-.5-.113-.007-.224.058-.352.146-.218.159-.218.34-.218.745 0 .198.02.419.028.504.047.025.133.068.204.097.133.054.222.102.312.103.04 0 .071-.027.12-.054a4.29 4.29 0 0 0 .358-.225c.147-.1.299-.223.385-.296ZM9.12 1.263l-.002.002.002-.002Z"})]}),{width:26,height:62,fill:"none"}),T((0,y.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),(0,y.jsx)("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25})),V=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),L),R=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),L),Y=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("circle",{cx:"12",cy:"12",r:"9"})]}),L),E=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,y.jsx)("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),(0,y.jsx)("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),L),W=T((0,y.jsx)("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),j),F=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),(0,y.jsx)("path",{d:"M16 7h4"}),(0,y.jsx)("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),L),z=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),(0,y.jsx)("path",{d:"m11.25 5.417 3.333 3.333"})]}),j),q=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),(0,y.jsx)("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),(0,y.jsx)("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),(0,y.jsx)("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),(0,y.jsx)("polyline",{points:"5 20 11 4 13 4 20 20"})]}),L),fe=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M12.5 6.667h.01"}),(0,y.jsx)("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),(0,y.jsx)("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),(0,y.jsx)("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),j),ce=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),(0,y.jsx)("path",{d:"M18 13.3l-6.3 -6.3"})]}),L),U=T((0,y.jsx)("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),j),ve=T((0,y.jsx)("path",{d:"M5 10h10",strokeWidth:"1.25"}),j),oe=T((0,y.jsx)("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),j),re=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),(0,y.jsx)("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),j),ae=T((0,y.jsx)("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),j),me=T((0,y.jsx)("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,y.jsx)("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),j),he=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),(0,y.jsx)("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),(0,y.jsx)("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),L),se=T((0,y.jsx)("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),j),ge=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,y.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),(0,y.jsx)("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),L),X=T((0,y.jsx)("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),j),we=T((0,y.jsx)("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),j),be=(T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),(0,y.jsx)("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),j),T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"})]}),L)),le=T((0,y.jsx)("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),ye=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),(0,y.jsx)("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),j),ue=T("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),xe=T("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),Pe=T((0,y.jsx)("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),j),Ne=(T("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512}),T("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z")),Me=T((0,y.jsxs)("g",{strokeWidth:"1.25",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M15 8h.01"}),(0,y.jsx)("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),(0,y.jsx)("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),(0,y.jsx)("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),(0,y.jsx)("path",{d:"M19 16v6"}),(0,y.jsx)("path",{d:"M22 19l-3 3l-3 -3"})]}),L),Re=T("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512}),We=(T("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),T("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),T("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z")),Se=(T("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"),T((0,y.jsx)("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),j)),Be=T((0,y.jsx)("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),j),_e=T("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),ze=(T((0,y.jsx)("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),j),T("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),(0,y.jsx)("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64}),T((0,y.jsx)("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024}),T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j)),Ve=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388",fill:"currentColor"}),(0,y.jsx)("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),ut=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Ie=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",children:[(0,y.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,y.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,y.jsx)("mask",{id:"SendToBackIcon",fill:"#fff",children:(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z"})}),(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z",fill:"currentColor"}),(0,y.jsx)("path",{d:"M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z",fill:"currentColor",mask:"url(#SendToBackIcon)"}),(0,y.jsx)("path",{d:"M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z",stroke:"currentColor",strokeWidth:"1.25"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),ot=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Ye=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Ke=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),tt=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),pt=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),St=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Kt=T((0,y.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),j),sn=T((0,y.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.25",children:[(0,y.jsx)("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,y.jsx)("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),j),nn=T((0,y.jsxs)("g",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,y.jsx)("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),(0,y.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),(0,y.jsx)("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),L),Cn=(T("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),T("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"),T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,y.jsx)("path",{d:"M15 5 5 15M5 5l10 10"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j)),vn=T("M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z",{width:320,height:512,style:{marginLeft:"-0.2rem"},mirror:!0}),Fe=(T("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0}),T("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),T("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512}),v().memo(function(Fn){var De=Fn.theme;return T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{d:"M25 26H111V111H25",fill:"var(--icon-fill-color)"}),(0,y.jsx)("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,y.jsx)("path",{d:"M100 100H160V160H100",fill:"var(--icon-fill-color)"}),(0,y.jsx)("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,y.jsxs)("g",{fill:A(De),stroke:"var(--icon-fill-color)",strokeWidth:"6",children:[(0,y.jsx)("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})})),et=v().memo(function(Fn){var De=Fn.theme;return T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{d:"M25 26H111V111H25",fill:"var(--icon-fill-color)"}),(0,y.jsx)("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,y.jsx)("path",{d:"M100 100H160V160H100",fill:"var(--icon-fill-color)"}),(0,y.jsx)("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:"var(--icon-fill-color)",strokeWidth:"2"}),(0,y.jsxs)("g",{fill:A(De),stroke:"var(--icon-fill-color)",strokeWidth:"6",children:[(0,y.jsx)("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),(0,y.jsx)("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})}),st=T((0,y.jsx)("g",{strokeWidth:1.25,children:(0,y.jsx)("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),j),ht=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,y.jsx)("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:(0,y.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),(0,y.jsx)("g",{mask:"url(#FillHachureIcon)",children:(0,y.jsx)("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),j),_t=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("g",{clipPath:"url(#a)",children:[(0,y.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,y.jsx)("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:(0,y.jsx)("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,y.jsx)("g",{mask:"url(#FillCrossHatchIcon)",children:(0,y.jsx)("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Zt=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("g",{clipPath:"url(#a)",children:(0,y.jsx)("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),I(I({},j),{},{fill:"currentColor"})),Yt=T((0,y.jsx)(y.Fragment,{children:(0,y.jsx)("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),j),bn=T((0,y.jsx)("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j),Wt=T((0,y.jsx)("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),j),un=T((0,y.jsxs)("g",{strokeWidth:"2",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M5 12h2"}),(0,y.jsx)("path",{d:"M17 12h2"}),(0,y.jsx)("path",{d:"M11 12h2"})]}),L),jn=T((0,y.jsxs)("g",{strokeWidth:"2",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M4 12v.01"}),(0,y.jsx)("path",{d:"M8 12v.01"}),(0,y.jsx)("path",{d:"M12 12v.01"}),(0,y.jsx)("path",{d:"M16 12v.01"}),(0,y.jsx)("path",{d:"M20 12v.01"})]}),L),Hn=T((0,y.jsx)("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),j),vt=T((0,y.jsx)("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),j),Nt=T((0,y.jsx)("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),j),Tt=T((0,y.jsxs)("svg",{strokeWidth:"1.5",children:[(0,y.jsx)("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),(0,y.jsx)("path",{d:"M13.3333 3.33331V3.34331"}),(0,y.jsx)("path",{d:"M16.6667 3.33331V3.34331"}),(0,y.jsx)("path",{d:"M16.6667 6.66669V6.67669"}),(0,y.jsx)("path",{d:"M16.6667 10V10.01"}),(0,y.jsx)("path",{d:"M3.33334 13.3333V13.3433"}),(0,y.jsx)("path",{d:"M16.6667 13.3333V13.3433"}),(0,y.jsx)("path",{d:"M3.33334 16.6667V16.6767"}),(0,y.jsx)("path",{d:"M6.66666 16.6667V16.6767"}),(0,y.jsx)("path",{d:"M10 16.6667V16.6767"}),(0,y.jsx)("path",{d:"M13.3333 16.6667V16.6767"}),(0,y.jsx)("path",{d:"M16.6667 16.6667V16.6767"})]}),j),cn=T((0,y.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),(0,y.jsx)("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),(0,y.jsx)("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),(0,y.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),(0,y.jsx)("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),(0,y.jsx)("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),(0,y.jsx)("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),(0,y.jsx)("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),(0,y.jsx)("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),(0,y.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),(0,y.jsx)("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),(0,y.jsx)("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),L),Ot=T((0,y.jsx)("path",{d:"M6 10H34",stroke:"currentColor",strokeWidth:2,fill:"none"}),{width:40,height:20}),Ln=v().memo(function(Fn){var De=Fn.flip,Ue=De!==void 0&&De;return T((0,y.jsxs)("g",{transform:Ue?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[(0,y.jsx)("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),(0,y.jsx)("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})}),Wn=v().memo(function(Fn){var De=Fn.flip,Ue=De!==void 0&&De;return T((0,y.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:Ue?"translate(40, 0) scale(-1, 1)":"",children:[(0,y.jsx)("path",{d:"M32 10L6 10",strokeWidth:2}),(0,y.jsx)("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})}),Rn=v().memo(function(Fn){var De=Fn.flip,Ue=De!==void 0&&De;return T((0,y.jsx)("g",{transform:Ue?"translate(40, 0) scale(-1, 1)":"",children:(0,y.jsx)("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})}),zn=v().memo(function(Fn){var De=Fn.flip,Ue=De!==void 0&&De;return T((0,y.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:Ue?"translate(40, 0) scale(-1, 1)":"",children:[(0,y.jsx)("path",{d:"M32 10L6 10",strokeWidth:2}),(0,y.jsx)("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})}),Et=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("g",{clipPath:"url(#a)",children:(0,y.jsx)("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Dt=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("g",{clipPath:"url(#a)",children:(0,y.jsx)("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Gt=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("g",{clipPath:"url(#a)",children:(0,y.jsx)("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),Jt=T((0,y.jsx)(y.Fragment,{children:(0,y.jsx)("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),j),$n=T((0,y.jsx)(y.Fragment,{children:(0,y.jsx)("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,y.jsx)("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),j),Kn=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,y.jsx)("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),(0,y.jsx)("defs",{children:(0,y.jsx)("clipPath",{id:"a",children:(0,y.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),j),wr=T((0,y.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,y.jsx)("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),(0,y.jsx)("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),L),dr=T((0,y.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,y.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),(0,y.jsx)("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),L),yn=T((0,y.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,y.jsx)("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),(0,y.jsx)("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),L),hr=v().memo(function(Fn){return Fn.theme,T((0,y.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),(0,y.jsx)("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),L)}),Er=v().memo(function(Fn){return Fn.theme,T((0,y.jsxs)("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),(0,y.jsx)("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),L)}),Nn=v().memo(function(Fn){return Fn.theme,T((0,y.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),(0,y.jsx)("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),(0,y.jsx)("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),L)}),ar=T((0,y.jsx)("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512}),Dr=(T((0,y.jsx)("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"})),T((0,y.jsxs)("g",{strokeWidth:1.25,children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),(0,y.jsx)("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),(0,y.jsx)("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),(0,y.jsx)("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),L)),Ir=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),(0,y.jsx)("path",{d:"M7 11l5 5l5 -5"}),(0,y.jsx)("path",{d:"M12 4l0 12"})]}),L),Vt=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),(0,y.jsx)("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),L),An=T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),(0,y.jsx)("path",{d:"M12 17l0 .01"}),(0,y.jsx)("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),L),pn=(T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M7 4v16l13 -8z"})]}),L),T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),L),T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M5 12l5 5l10 -10"})]}),L),T((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),(0,y.jsx)("path",{d:"M12 9v4"}),(0,y.jsx)("path",{d:"M12 17h.01"})]}),L)),mn=T((0,y.jsxs)("g",{strokeWidth:1.25,children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M11 7l6 6"}),(0,y.jsx)("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),L),or=T((0,y.jsxs)("g",{strokeWidth:1.5,children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M12 3l-4 7h8z"}),(0,y.jsx)("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),(0,y.jsx)("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),L),fr=T((0,y.jsxs)("g",{strokeWidth:1.5,children:[(0,y.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,y.jsx)("path",{d:"M4 7l16 0"}),(0,y.jsx)("path",{d:"M4 17l16 0"}),(0,y.jsx)("path",{d:"M7 4l0 16"}),(0,y.jsx)("path",{d:"M17 4l0 16"})]}),L)},6756:function(f,h,c){c.d(h,{Z:function(){return ye}});var g={};c.r(g),c.d(g,{ChangeCanvasBackground:function(){return me},ClearCanvas:function(){return re},Export:function(){return he},Help:function(){return oe},LiveCollaborationTrigger:function(){return ge},LoadScene:function(){return ce},SaveAsImage:function(){return ve},SaveToActiveFile:function(){return U},Socials:function(){return se},ToggleTheme:function(){return ae}});var m=c(736),b=c(1510),v=c(8950),w=c(2975),_=c.n(w),k=c(785),y=c(8211),S=c(3646),C=c(2739),I=c(4215),A=c(1781),T=c(487),L=c.n(T),j=c(631),$=c.n(j),ee=c(2052),Q=c.n(ee),pe=c(4010),ie=c.n(pe),te=c(1469),Z=c.n(te),D=c(9329),B=c.n(D),H=c(4343),V={};V.styleTagTransform=B(),V.setAttributes=ie(),V.insert=Q().bind(null,"head"),V.domAPI=$(),V.insertStyleElement=Z(),L()(H.Z,V),H.Z&&H.Z.locals&&H.Z.locals;var R=c(9076),Y=c(6274),E=c(6798),W=c(9487),F=c(96),z=c(879),q=c(2242),fe=c(9980),ce=function(){var ue=(0,y.QT)().t,xe=(0,m.eh)(),Pe=(0,m.bd)();if(!xe.isActionEnabled(A._d))return null;var Ne=function(){var Me=(0,v.Z)(_().mark(function Re(){return _().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(We.t0=!Pe.length,We.t0){We.next=5;break}return We.next=4,(0,z._)({title:ue("overwriteConfirm.modal.loadFromFile.title"),actionLabel:ue("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:(0,fe.jsx)(q.Z,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:function(Se){return(0,fe.jsx)("strong",{children:Se})},br:function(){return(0,fe.jsx)("br",{})}})});case 4:We.t0=We.sent;case 5:if(!We.t0){We.next=7;break}xe.executeAction(A._d);case 7:case"end":return We.stop()}},Re)}));return function(){return Me.apply(this,arguments)}}();return(0,fe.jsx)(C.Z,{icon:S.Tl,onSelect:Ne,"data-testid":"load-button",shortcut:(0,k.C)("loadScene"),"aria-label":ue("buttons.load"),children:ue("buttons.load")})};ce.displayName="LoadScene";var U=function(){var ue=(0,y.QT)().t,xe=(0,m.eh)();return xe.isActionEnabled(A.ns)?(0,fe.jsx)(C.Z,{shortcut:(0,k.C)("saveScene"),"data-testid":"save-button",onSelect:function(){return xe.executeAction(A.ns)},icon:S.a1,"aria-label":"".concat(ue("buttons.save")),children:"".concat(ue("buttons.save"))}):null};U.displayName="SaveToActiveFile";var ve=function(){var ue=(0,m.n9)(),xe=(0,y.QT)().t;return(0,fe.jsx)(C.Z,{icon:S.J8,"data-testid":"image-export-button",onSelect:function(){return ue({openDialog:"imageExport"})},shortcut:(0,k.C)("imageExport"),"aria-label":xe("buttons.exportImage"),children:xe("buttons.exportImage")})};ve.displayName="SaveAsImage";var oe=function(){var ue=(0,y.QT)().t,xe=(0,m.eh)();return(0,fe.jsx)(C.Z,{"data-testid":"help-menu-item",icon:S.by,onSelect:function(){return xe.executeAction(A.jY)},shortcut:"?","aria-label":ue("helpDialog.title"),children:ue("helpDialog.title")})};oe.displayName="Help";var re=function(){var ue=(0,y.QT)().t,xe=(0,Y.b9)(E.w,W.yE);return(0,m.eh)().isActionEnabled(A.mo)?(0,fe.jsx)(C.Z,{icon:S.XH,onSelect:function(){return xe("clearCanvas")},"data-testid":"clear-canvas-button","aria-label":ue("buttons.clearReset"),children:ue("buttons.clearReset")}):null};re.displayName="ClearCanvas";var ae=function(){var ue=(0,y.QT)().t,xe=(0,F.I)(),Pe=(0,m.eh)();return Pe.isActionEnabled(A.Zp)?(0,fe.jsx)(C.Z,{onSelect:function(Ne){return Ne.preventDefault(),Pe.executeAction(A.Zp)},icon:xe.theme==="dark"?S.NW:S.kL,"data-testid":"toggle-dark-mode",shortcut:(0,k.C)("toggleTheme"),"aria-label":xe.theme==="dark"?ue("buttons.lightMode"):ue("buttons.darkMode"),children:xe.theme==="dark"?ue("buttons.lightMode"):ue("buttons.darkMode")}):null};ae.displayName="ToggleTheme";var me=function(){var ue=(0,y.QT)().t,xe=(0,F.I)(),Pe=(0,m.eh)();return xe.viewModeEnabled?null:(0,fe.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,fe.jsx)("div",{style:{fontSize:".75rem",marginBottom:".5rem"},children:ue("labels.canvasBackground")}),(0,fe.jsx)("div",{style:{padding:"0 0.625rem"},children:Pe.renderAction("changeViewBackgroundColor")})]})};me.displayName="ChangeCanvasBackground";var he=function(){var ue=(0,y.QT)().t,xe=(0,m.n9)();return(0,fe.jsx)(C.Z,{icon:S.Hy,onSelect:function(){xe({openDialog:"jsonExport"})},"data-testid":"json-export-button","aria-label":ue("buttons.export"),children:ue("buttons.export")})};he.displayName="Export";var se=function(){return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(I.Z,{icon:S.ET,href:"https://github.com/korbinzhao/excalidraw-cn","aria-label":"GitHub",children:"GitHub"}),(0,fe.jsx)(I.Z,{icon:S.Zm,href:"https://twitter.com/korbinzhao","aria-label":"Twitter",children:"Twitter"})]})};se.displayName="Socials";var ge=function(ue){var xe=ue.onSelect,Pe=ue.isCollaborating,Ne=(0,y.QT)().t;return(0,fe.jsx)(C.Z,{"data-testid":"collab-button",icon:S.jn,className:(0,R.Z)({"active-collab":Pe}),onSelect:xe,children:Ne("labels.liveCollaboration")})};ge.displayName="LiveCollaborationTrigger";var X=c(6773),we=c(7145),be=c(6340),le=c(8690),ye=Object.assign((0,we.$)("MainMenu",function(ue){var xe=ue.children,Pe=ue.onSelect,Ne=(0,le.R6)().MainMenuTunnel,Me=(0,m.Fy)(),Re=(0,F.I)(),We=(0,m.n9)(),Se=Me.isMobile?void 0:function(){return We({openMenu:null})};return(0,fe.jsx)(Ne.In,{children:(0,fe.jsxs)(b.Z,{open:Re.openMenu==="canvas",children:[(0,fe.jsx)(b.Z.Trigger,{onToggle:function(){We({openMenu:Re.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",children:S.RY}),(0,fe.jsxs)(b.Z.Content,{onClickOutside:Se,onSelect:(0,be.Mj)(Pe,function(){We({openMenu:null})}),children:[xe,Me.isMobile&&Re.collaborators.size>0&&(0,fe.jsxs)("fieldset",{className:"UserList-Wrapper",children:[(0,fe.jsx)("legend",{children:(0,y.t)("labels.collaborators")}),(0,fe.jsx)(X.Z,{mobile:!0,collaborators:Re.collaborators})]})]})]})})}),{Trigger:b.Z.Trigger,Item:b.Z.Item,ItemLink:b.Z.ItemLink,ItemCustom:b.Z.ItemCustom,Group:b.Z.Group,Separator:b.Z.Separator,DefaultItems:g})},2335:function(f,h,c){c.d(h,{iC:function(){return R},gK:function(){return et},$C:function(){return ve},oc:function(){return fe},_9:function(){return Yt},HN:function(){return un},qy:function(){return sn},rk:function(){return se},n5:function(){return he},h6:function(){return nn},Rx:function(){return Zt},Cc:function(){return Hn},Hg:function(){return ge},cW:function(){return ut},hs:function(){return X},f:function(){return Y},xY:function(){return _t},Iw:function(){return W},$e:function(){return F},Vi:function(){return U},Ks:function(){return ie},r8:function(){return ue},I_:function(){return ye},ZB:function(){return Kt},pb:function(){return xe},iG:function(){return ae},k:function(){return we},Zj:function(){return oe},sA:function(){return Be},KL:function(){return be},LL:function(){return Pe},tf:function(){return jn},EE:function(){return pt},qx:function(){return E},$n:function(){return Cn},zK:function(){return St},LO:function(){return le},E0:function(){return Se},Yx:function(){return Ke},sS:function(){return Ye},kV:function(){return ot},sk:function(){return tt},eF:function(){return Ie},Oh:function(){return ce},WR:function(){return Wt},a6:function(){return bn},HM:function(){return Re},ay:function(){return q},hR:function(){return vn},Gj:function(){return Ne},I8:function(){return ht},wZ:function(){return z},C6:function(){return re},ZF:function(){return _e},nM:function(){return Me},ah:function(){return Ve},UO:function(){return ze},Kr:function(){return Fe},oX:function(){return st},_D:function(){return me},V4:function(){return We},Dt:function(){return D},jP:function(){return V},Um:function(){return te},vU:function(){return B},G6:function(){return H},ED:function(){return Z}});var g=c(7169),m=c(487),b=c.n(m),v=c(631),w=c.n(v),_=c(2052),k=c.n(_),y=c(4010),S=c.n(y),C=c(1469),I=c.n(C),A=c(9329),T=c.n(A),L=c(6464),j={};j.styleTagTransform=T(),j.setAttributes=S(),j.insert=k().bind(null,"head"),j.domAPI=w(),j.insertStyleElement=I(),b()(L.Z,j);var $=L.Z&&L.Z.locals?L.Z.locals:void 0,ee=c(56),Q=c(451);function pe(vt,Nt){var Tt=Object.keys(vt);if(Object.getOwnPropertySymbols){var cn=Object.getOwnPropertySymbols(vt);Nt&&(cn=cn.filter(function(Ot){return Object.getOwnPropertyDescriptor(vt,Ot).enumerable})),Tt.push.apply(Tt,cn)}return Tt}var ie,te=/Mac|iPod|iPhone|iPad/.test(navigator.platform),Z=/^Win/.test(navigator.platform),D=/\b(android)\b/i.test(navigator.userAgent),B="netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,H=navigator.userAgent.indexOf("Chrome")===-1&&navigator.userAgent.indexOf("Safari")!==-1,V=function(){var vt,Nt;return((vt=navigator.brave)===null||vt===void 0||(Nt=vt.isBrave)===null||Nt===void 0?void 0:Nt.name)==="isBrave"},R="Excalidraw",Y=10,E=8,W=5,F=1,z=30,q=Math.PI/12,fe={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},ce={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1};(function(vt){vt.COPY="copy",vt.PASTE="paste",vt.CUT="cut",vt.KEYDOWN="keydown",vt.KEYUP="keyup",vt.MOUSE_MOVE="mousemove",vt.RESIZE="resize",vt.UNLOAD="unload",vt.FOCUS="focus",vt.BLUR="blur",vt.DRAG_OVER="dragover",vt.DROP="drop",vt.GESTURE_END="gestureend",vt.BEFORE_UNLOAD="beforeunload",vt.GESTURE_START="gesturestart",vt.GESTURE_CHANGE="gesturechange",vt.POINTER_MOVE="pointermove",vt.POINTER_DOWN="pointerdown",vt.POINTER_UP="pointerup",vt.STATE_CHANGE="statechange",vt.WHEEL="wheel",vt.TOUCH_START="touchstart",vt.TOUCH_END="touchend",vt.HASHCHANGE="hashchange",vt.VISIBILITY_CHANGE="visibilitychange",vt.SCROLL="scroll",vt.EXCALIDRAW_LINK="excalidraw-link",vt.MENU_ITEM_SELECT="menu.itemSelect"})(ie||(ie={}));var U={TEST:"test",DEVELOPMENT:"development"},ve={SHAPE_ACTIONS_MENU:"App-menu__left"},oe="HanziPen SC, HanziPen Remote, Virgil, KaiTi",re={LIGHT:"light",DARK:"dark"},ae={strokeColor:"#bbb",strokeWidth:1,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8},me="Segoe UI Emoji",he=20,se=(0,Q.B)()[oe],ge="left",X="top",we=20,be={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},le=function(vt){for(var Nt=1;Nt<arguments.length;Nt++){var Tt=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?pe(Object(Tt),!0).forEach(function(cn){(0,g.Z)(vt,cn,Tt[cn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(Tt)):pe(Object(Tt)).forEach(function(cn){Object.defineProperty(vt,cn,Object.getOwnPropertyDescriptor(Tt,cn))})}return vt}({json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream"},be),ye={png:"png",svg:"svg",clipboard:"clipboard"},ue={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib"},xe=window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Pe=500,Ne=300,Me=500,Re=100,We=.1,Se=.1,Be=300,_e=$.themeFilter,ze={addLibrary:"addLibrary"},Ve={addLibrary:"addLibrary"},ut={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Ie=640,ot=730,Ye=1e3,Ke=500,tt=1229,pt=parseInt($.rightSidebarWidth),St=2,Kt=[1,2,3],sn=10,nn=1440,Cn=2097152,vn="http://www.w3.org/2000/svg",Fe={excalidraw:2,excalidrawLibrary:2},et=5,st={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},ht={LEFT:"left",CENTER:"center",RIGHT:"right"},_t=20,Zt=.25,Yt=32,bn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},Wt="__precedingElement__",un={strokeColor:ee.HO.black,backgroundColor:ee.HO.transparent,fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,locked:!1},jn="library",Hn={name:"default",defaultTab:jn}},8690:function(f,h,c){c.d(h,{A3:function(){return L},ZC:function(){return $},R6:function(){return j}});var g=c(9787),m=c.n(g);const b=ee=>{let Q;const pe=new Set,ie=(D,B)=>{const H=typeof D=="function"?D(Q):D;if(!Object.is(H,Q)){const V=Q;Q=B??typeof H!="object"?H:Object.assign({},Q,H),pe.forEach(R=>R(Q,V))}},te=()=>Q,Z={setState:ie,getState:te,subscribe:D=>(pe.add(D),()=>pe.delete(D)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),pe.clear()}};return Q=ee(ie,te,Z),Z},v=ee=>ee?b(ee):b;var w=c(4752);const{useSyncExternalStoreWithSelector:_}=w;let k=!1;const y=ee=>{typeof ee!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const Q=typeof ee=="function"?v(ee):ee,pe=(ie,te)=>function(Z,D=Z.getState,B){B&&!k&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),k=!0);const H=_(Z.subscribe,Z.getState,Z.getServerState||Z.getState,D,B);return(0,g.useDebugValue)(H),H}(Q,ie,te);return Object.assign(pe,Q),pe},S=ee=>ee?y(ee):y;var C,I;const A=typeof window<"u"&&((C=window.document)!=null&&C.createElement||((I=window.navigator)==null?void 0:I.product)==="ReactNative")?m().useLayoutEffect:m().useEffect;function T(){const ee=S(Q=>({current:new Array,version:0,set:Q}));return{In:({children:Q})=>{const pe=ee(te=>te.set),ie=ee(te=>te.version);return A(()=>{pe(te=>({version:te.version+1}))},[]),A(()=>(pe(({current:te})=>({current:[...te,Q]})),()=>pe(({current:te})=>({current:te.filter(Z=>Z!==Q)}))),[Q,ie]),null},Out:()=>{const Q=ee(pe=>pe.current);return m().createElement(m().Fragment,null,Q)}}}var L=m().createContext(null),j=function(){return m().useContext(L)},$=function(){return m().useMemo(function(){return{MainMenuTunnel:T(),WelcomeScreenMenuHintTunnel:T(),WelcomeScreenToolbarHintTunnel:T(),WelcomeScreenHelpHintTunnel:T(),WelcomeScreenCenterTunnel:T(),FooterCenterTunnel:T(),DefaultSidebarTriggerTunnel:T(),DefaultSidebarTabTriggersTunnel:T(),OverwriteConfirmDialogTunnel:T(),jotaiScope:Symbol()}},[])}},96:function(f,h,c){c.d(h,{I:function(){return v},k:function(){return b}});var g=c(9787),m=c.n(g),b=m().createContext(null),v=function(){return m().useContext(b)}},434:function(f,h,c){c.d(h,{DQ:function(){return Z},KG:function(){return z},Pn:function(){return fe},Qk:function(){return te},Sf:function(){return F},Tu:function(){return q},Wr:function(){return B},ZY:function(){return H},_c:function(){return E},bv:function(){return ce},cT:function(){return V},g8:function(){return D},gY:function(){return re},lV:function(){return Y},tW:function(){return W},vZ:function(){return ae},wf:function(){return R}});var g=c(1930),m=c(2577),b=c(7169),v=c(8950),w=c(2975),_=c.n(w),k=c(7583),y=c(8897),S=c(2335),C=c(1047),I=c(6797),A=c(8211),T=c(75),L=c(6340),j=c(313),$=c(5523),ee=c(679);function Q(me,he){var se=Object.keys(me);if(Object.getOwnPropertySymbols){var ge=Object.getOwnPropertySymbols(me);he&&(ge=ge.filter(function(X){return Object.getOwnPropertyDescriptor(me,X).enumerable})),se.push.apply(se,ge)}return se}function pe(me){for(var he=1;he<arguments.length;he++){var se=arguments[he]!=null?arguments[he]:{};he%2?Q(Object(se),!0).forEach(function(ge){(0,b.Z)(me,ge,se[ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(se)):Q(Object(se)).forEach(function(ge){Object.defineProperty(me,ge,Object.getOwnPropertyDescriptor(se,ge))})}return me}var ie=function(){var me=(0,v.Z)(_().mark(function he(se){var ge;return _().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(se.type!==S.LO.png){X.next=18;break}return X.prev=1,X.next=4,Promise.resolve().then(c.bind(c,673));case 4:return X.next=6,X.sent.decodePngMetadata(se);case 6:return X.abrupt("return",X.sent);case 9:if(X.prev=9,X.t0=X.catch(1),X.t0.message!=="INVALID"){X.next=15;break}throw new DOMException((0,A.t)("alerts.imageDoesNotContainScene"),"EncodingError");case 15:throw new DOMException((0,A.t)("alerts.cannotRestoreFromImage"),"EncodingError");case 16:X.next=43;break;case 18:if(!("text"in Blob)){X.next=24;break}return X.next=21,se.text();case 21:ge=X.sent,X.next=27;break;case 24:return X.next=26,new Promise(function(we){var be=new FileReader;be.readAsText(se,"utf8"),be.onloadend=function(){be.readyState===FileReader.DONE&&we(be.result)}});case 26:ge=X.sent;case 27:if(se.type!==S.LO.svg){X.next=43;break}return X.prev=28,X.next=31,Promise.resolve().then(c.bind(c,673));case 31:return X.next=33,X.sent.decodeSvgMetadata({svg:ge});case 33:return X.abrupt("return",X.sent);case 36:if(X.prev=36,X.t1=X.catch(28),X.t1.message!=="INVALID"){X.next=42;break}throw new DOMException((0,A.t)("alerts.imageDoesNotContainScene"),"EncodingError");case 42:throw new DOMException((0,A.t)("alerts.cannotRestoreFromImage"),"EncodingError");case 43:return X.abrupt("return",ge);case 44:case"end":return X.stop()}},he,null,[[1,9],[28,36]])}));return function(he){return me.apply(this,arguments)}}(),te=function(me){var he;return me&&((he=me.name.match(/\.(json|excalidraw|png|svg)$/))===null||he===void 0?void 0:he[1])||null},Z=function(me){return me==="png"||me==="svg"},D=function(me){var he=te(me);return he==="png"||he==="svg"},B=function(me){var he=(me||{}).type;return!!he&&Object.values(S.KL).includes(he)},H=function(){var me=(0,v.Z)(_().mark(function he(se,ge,X,we){var be,le;return _().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,ie(se);case 2:if(be=ye.sent,ye.prev=3,le=JSON.parse(be),!(0,$.dS)(le)){ye.next=9;break}return ye.abrupt("return",{type:S.LO.excalidraw,data:(0,ee.nu)({elements:(0,C._M)(le.elements||[]),appState:pe(pe({theme:ge==null?void 0:ge.theme,fileHandle:we||se.handle||null},(0,y.s)(le.appState||{})),ge?(0,T.W)(le.elements||[],ge,null):{}),files:le.files},ge,X,{repairBindings:!0,refreshDimensions:!1})});case 9:if(!(0,$.HT)(le)){ye.next=11;break}return ye.abrupt("return",{type:S.LO.excalidrawlib,data:le});case 11:throw new Error((0,A.t)("alerts.couldNotLoadInvalidFile"));case 14:throw ye.prev=14,ye.t0=ye.catch(3),console.error(ye.t0.message),new Error((0,A.t)("alerts.couldNotLoadInvalidFile"));case 18:case"end":return ye.stop()}},he,null,[[3,14]])}));return function(he,se,ge,X){return me.apply(this,arguments)}}(),V=function(){var me=(0,v.Z)(_().mark(function he(se,ge,X,we){var be;return _().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,H(se,ge,X,we);case 2:if((be=le.sent).type===S.LO.excalidraw){le.next=5;break}throw new Error((0,A.t)("alerts.couldNotLoadInvalidFile"));case 5:return le.abrupt("return",be.data);case 6:case"end":return le.stop()}},he)}));return function(he,se,ge,X){return me.apply(this,arguments)}}(),R=function(me){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unpublished",se=JSON.parse(me);if(!(0,$.HT)(se))throw new Error("Invalid library");var ge=se.libraryItems||se.library;return(0,ee.wJ)(ge,he)},Y=function(){var me=(0,v.Z)(_().mark(function he(se){var ge,X=arguments;return _().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return ge=X.length>1&&X[1]!==void 0?X[1]:"unpublished",we.t0=R,we.next=4,ie(se);case 4:return we.t1=we.sent,we.t2=ge,we.abrupt("return",(0,we.t0)(we.t1,we.t2));case 7:case"end":return we.stop()}},he)}));return function(he){return me.apply(this,arguments)}}(),E=function(){var me=(0,v.Z)(_().mark(function he(se){return _().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",new Promise(function(X,we){try{se.toBlob(function(be){if(!be)return we(new I.l((0,A.t)("canvasError.canvasTooBig"),"CANVAS_POSSIBLY_TOO_BIG"));X(be)})}catch(be){we(be)}}));case 1:case"end":return ge.stop()}},he)}));return function(he){return me.apply(this,arguments)}}(),W=function(){var me=(0,v.Z)(_().mark(function he(se){var ge;return _().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.prev=0,X.t0=window.crypto.subtle,X.next=4,ae(se);case 4:return X.t1=X.sent,X.next=7,X.t0.digest.call(X.t0,"SHA-1",X.t1);case 7:return ge=X.sent,X.abrupt("return",(0,L.G3)(new Uint8Array(ge)));case 11:return X.prev=11,X.t2=X.catch(0),console.error(X.t2),X.abrupt("return",(0,k.x0)(40));case 15:case"end":return X.stop()}},he,null,[[0,11]])}));return function(he){return me.apply(this,arguments)}}(),F=function(){var me=(0,v.Z)(_().mark(function he(se){return _().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",new Promise(function(X,we){var be=new FileReader;be.onload=function(){var le=be.result;X(le)},be.onerror=function(le){return we(le)},be.readAsDataURL(se)}));case 1:case"end":return ge.stop()}},he)}));return function(he){return me.apply(this,arguments)}}(),z=function(me){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",se=me.indexOf(","),ge=atob(me.slice(se+1)),X=me.slice(0,se).split(":")[1].split(";")[0],we=new ArrayBuffer(ge.length),be=new Uint8Array(we),le=0;le<ge.length;le++)be[le]=ge.charCodeAt(le);return new File([we],he,{type:X})},q=function(){var me=(0,v.Z)(_().mark(function he(se,ge){var X,we,be,le,ye,ue;return _().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(se.type!==S.LO.svg){xe.next=2;break}return xe.abrupt("return",se);case 2:return xe.next=4,Promise.all([c.e(4736).then(c.t.bind(c,6422,23)).then(function(Pe){return Pe.default}),c.e(4736).then(c.bind(c,9936)).then(function(Pe){return Pe.default})]);case 4:if(X=xe.sent,we=(0,m.Z)(X,2),be=we[0],le=we[1],ye=le({pica:be({features:["js","wasm"]})}),ge.outputType&&(ue=ge.outputType,ye._create_blob=function(Pe){return this.pica.toBlob(Pe.out_canvas,ue,.8).then(function(Ne){return Pe.out_blob=Ne,Pe})}),B(se)){xe.next=12;break}throw new Error((0,A.t)("errors.unsupportedFileType"));case 12:return xe.t0=File,xe.next=15,ye.toBlob(se,{max:ge.maxWidthOrHeight});case 15:return xe.t1=xe.sent,xe.t2=[xe.t1],xe.t3=se.name,xe.t4={type:ge.outputType||se.type},xe.abrupt("return",new xe.t0(xe.t2,xe.t3,xe.t4));case 20:case"end":return xe.stop()}},he)}));return function(he,se){return me.apply(this,arguments)}}(),fe=function(me){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new File([new TextEncoder().encode(me)],he,{type:S.LO.svg})},ce=function(){var me=(0,v.Z)(_().mark(function he(se){var ge,X;return _().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return ge=se.dataTransfer.files.item(0),we.next=3,U(se);case 3:if(X=we.sent,!ge){we.next=10;break}return we.next=7,re(ge);case 7:we.t0=we.sent,we.next=11;break;case 10:we.t0=null;case 11:return we.t1=we.t0,we.t2=X,we.abrupt("return",{file:we.t1,fileHandle:we.t2});case 14:case"end":return we.stop()}},he)}));return function(he){return me.apply(this,arguments)}}(),U=function(){var me=(0,v.Z)(_().mark(function he(se){var ge,X;return _().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(!j.kr){we.next=16;break}return we.prev=1,ge=se.dataTransfer.items[0],we.next=5,ge.getAsFileSystemHandle();case 5:if(we.t0=we.sent,we.t0){we.next=8;break}we.t0=null;case 8:return X=we.t0,we.abrupt("return",X);case 12:return we.prev=12,we.t1=we.catch(1),console.warn(we.t1.name,we.t1.message),we.abrupt("return",null);case 16:return we.abrupt("return",null);case 17:case"end":return we.stop()}},he,null,[[1,12]])}));return function(he){return me.apply(this,arguments)}}(),ve=function(me){var he=null,se="".concat((0,g.Z)(new Uint8Array(me).slice(0,8)).join(" ")," "),ge="255 216 255 ",X="71 73 70 56 57 97 ";return se==="137 80 78 71 13 10 26 10 "?he=S.LO.png:se.startsWith(ge)?he=S.LO.jpg:se.startsWith(X)&&(he=S.LO.gif),he},oe=function(me,he,se){return new File([me],se||"",{type:he})},re=function(){var me=(0,v.Z)(_().mark(function he(se){var ge,X,we,be,le,ye,ue,xe;return _().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(se.type){Pe.next=28;break}if((ge=se)===null||ge===void 0||(X=ge.name)===null||X===void 0||!X.endsWith(".excalidrawlib")){Pe.next=11;break}return Pe.t0=oe,Pe.next=5,ae(se);case 5:Pe.t1=Pe.sent,Pe.t2=S.LO.excalidrawlib,Pe.t3=se.name,se=(0,Pe.t0)(Pe.t1,Pe.t2,Pe.t3),Pe.next=26;break;case 11:if((we=se)===null||we===void 0||(be=we.name)===null||be===void 0||!be.endsWith(".excalidraw")){Pe.next=21;break}return Pe.t4=oe,Pe.next=15,ae(se);case 15:Pe.t5=Pe.sent,Pe.t6=S.LO.excalidraw,Pe.t7=se.name,se=(0,Pe.t4)(Pe.t5,Pe.t6,Pe.t7),Pe.next=26;break;case 21:return Pe.next=23,ae(se);case 23:le=Pe.sent,(ye=ve(le))&&(se=oe(le,ye,se.name));case 26:Pe.next=34;break;case 28:if(!B(se)){Pe.next=34;break}return Pe.next=31,ae(se);case 31:ue=Pe.sent,(xe=ve(ue))&&xe!==se.type&&(se=oe(ue,xe,se.name));case 34:return Pe.abrupt("return",se);case 35:case"end":return Pe.stop()}},he)}));return function(he){return me.apply(this,arguments)}}(),ae=function(me){return"arrayBuffer"in me?me.arrayBuffer():new Promise(function(he,se){var ge=new FileReader;ge.onload=function(X){var we;if((we=X.target)===null||we===void 0||!we.result)return se(new Error("Couldn't convert blob to ArrayBuffer"));he(X.target.result)},ge.readAsArrayBuffer(me)})}},313:function(f,h,c){c.d(h,{I$:function(){return y},NL:function(){return S},kr:function(){return m}});var g=c(1930);const m=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),b=m?c.e(4736).then(c.bind(c,632)):c.e(4736).then(c.bind(c,2357));m?c.e(4736).then(c.bind(c,6411)):c.e(4736).then(c.bind(c,1805));const v=m?c.e(4736).then(c.bind(c,9904)):c.e(4736).then(c.bind(c,893));var w=c(2335),_=c(6797),k=c(6340),y=function(C){var I,A,T,L=(I=C.extensions)===null||I===void 0?void 0:I.reduce(function($,ee){return $.push(w.LO[ee]),$},[]),j=(A=C.extensions)===null||A===void 0?void 0:A.reduce(function($,ee){return ee==="jpg"?$.concat(".jpg",".jpeg"):$.concat(".".concat(ee))},[]);return async function(...$){return(await b).default(...$)}({description:C.description,extensions:j,mimeTypes:L,multiple:(T=C.multiple)!==null&&T!==void 0&&T,legacySetup:function($,ee,Q){var pe=(0,k.Ds)(ee,500),ie=function(){te(),document.addEventListener(w.Ks.KEYUP,pe),document.addEventListener(w.Ks.POINTER_UP,pe),pe()},te=function(){var D;if((D=Q.files)!==null&&D!==void 0&&D.length){var B=C.multiple?(0,g.Z)(Q.files):Q.files[0];$(B)}};requestAnimationFrame(function(){window.addEventListener(w.Ks.FOCUS,ie)});var Z=window.setInterval(function(){te()},500);return function(D){clearInterval(Z),pe.cancel(),window.removeEventListener(w.Ks.FOCUS,ie),document.removeEventListener(w.Ks.KEYUP,pe),document.removeEventListener(w.Ks.POINTER_UP,pe),D&&(console.warn("Opening the file was canceled (legacy-fs)."),D(new _._))}}})},S=function(C,I){return async function(...A){return(await v).default(...A)}(C,{fileName:"".concat(I.name,".").concat(I.extension),description:I.description,extensions:[".".concat(I.extension)]},I.fileHandle)}},673:function(f,h,c){c.r(h),c.d(h,{decodePngMetadata:function(){return te},decodeSvgMetadata:function(){return D},encodePngMetadata:function(){return ie},encodeSvgMetadata:function(){return Z},getTEXtChunk:function(){return pe}});var g=c(8950),m=c(2975),b=c.n(m),v=c(2034),w=c.n(v),_=c(9175),k=c(3924),y=c.n(k),S=c(3666),C=c(2335),I=c(434),A=function(B){return new Promise(function(H,V){var R=typeof B=="string"?new Blob([new TextEncoder().encode(B)]):new Blob([B instanceof Uint8Array?B:new Uint8Array(B)]),Y=new FileReader;Y.onload=function(E){if(!E.target||typeof E.target.result!="string")return V(new Error("couldn't convert to byte string"));H(E.target.result)},Y.readAsBinaryString(R)})},T=function(B){for(var H=new ArrayBuffer(B.length),V=new Uint8Array(H),R=0,Y=B.length;R<Y;R++)V[R]=B.charCodeAt(R);return H},L=function(B){return new TextDecoder("utf-8").decode(T(B))},j=function(){var B=(0,g.Z)(b().mark(function H(V){var R=arguments;return b().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!(R.length>1&&R[1]!==void 0&&R[1])){Y.next=5;break}Y.t0=window.btoa(V),Y.next=10;break;case 5:return Y.t1=window,Y.next=8,A(V);case 8:Y.t2=Y.sent,Y.t0=Y.t1.btoa.call(Y.t1,Y.t2);case 10:return Y.abrupt("return",Y.t0);case 11:case"end":return Y.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),$=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y=arguments;return b().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return R=Y.length>1&&Y[1]!==void 0&&Y[1],E.abrupt("return",R?window.atob(V):L(window.atob(V)));case 2:case"end":return E.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),ee=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y;return b().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(R=V.text,V.compress===!1){E.next=11;break}return E.prev=2,E.next=5,A((0,S.deflate)(R));case 5:Y=E.sent,E.next=11;break;case 8:E.prev=8,E.t0=E.catch(2),console.error("encode: cannot deflate",E.t0);case 11:if(E.t1=!!Y,E.t2=Y,E.t2){E.next=17;break}return E.next=16,A(R);case 16:E.t2=E.sent;case 17:return E.t3=E.t2,E.abrupt("return",{version:"1",encoding:"bstring",compressed:E.t1,encoded:E.t3});case 19:case"end":return E.stop()}},H,null,[[2,8]])}));return function(H){return B.apply(this,arguments)}}(),Q=function(){var B=(0,g.Z)(b().mark(function H(V){var R;return b().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:Y.t0=V.encoding,Y.next=Y.t0==="bstring"?3:12;break;case 3:if(!V.compressed){Y.next=7;break}Y.t1=V.encoded,Y.next=10;break;case 7:return Y.next=9,L(V.encoded);case 9:Y.t1=Y.sent;case 10:return R=Y.t1,Y.abrupt("break",13);case 12:throw new Error('decode: unknown encoding "'.concat(V.encoding,'"'));case 13:if(!V.compressed){Y.next=15;break}return Y.abrupt("return",(0,S.inflate)(new Uint8Array(T(R)),{to:"string"}));case 15:return Y.abrupt("return",R);case 16:case"end":return Y.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),pe=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y;return b().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.t0=w(),E.t1=Uint8Array,E.next=4,(0,I.vZ)(V);case 4:if(E.t2=E.sent,E.t3=new E.t1(E.t2),R=(0,E.t0)(E.t3),!(Y=R.find(function(W){return W.name==="tEXt"}))){E.next=10;break}return E.abrupt("return",_.decode(Y.data));case 10:return E.abrupt("return",null);case 11:case"end":return E.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),ie=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y,E,W;return b().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return R=V.blob,Y=V.metadata,F.t0=w(),F.t1=Uint8Array,F.next=5,(0,I.vZ)(R);case 5:return F.t2=F.sent,F.t3=new F.t1(F.t2),E=(0,F.t0)(F.t3),F.t4=_,F.t5=C.LO.excalidraw,F.t6=JSON,F.next=13,ee({text:Y,compress:!0});case 13:return F.t7=F.sent,F.t8=F.t6.stringify.call(F.t6,F.t7),W=F.t4.encode.call(F.t4,F.t5,F.t8),E.splice(-1,0,W),F.abrupt("return",new Blob([y()(E)],{type:C.LO.png}));case 18:case"end":return F.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),te=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y;return b().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,pe(V);case 2:if(((R=E.sent)==null?void 0:R.keyword)!==C.LO.excalidraw){E.next=19;break}if(E.prev=4,"encoded"in(Y=JSON.parse(R.text))){E.next=10;break}if(!("type"in Y)||Y.type!==C.r8.excalidraw){E.next=9;break}return E.abrupt("return",R.text);case 9:throw new Error("FAILED");case 10:return E.next=12,Q(Y);case 12:return E.abrupt("return",E.sent);case 15:throw E.prev=15,E.t0=E.catch(4),console.error(E.t0),new Error("FAILED");case 19:throw new Error("INVALID");case 20:case"end":return E.stop()}},H,null,[[4,15]])}));return function(H){return B.apply(this,arguments)}}(),Z=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y,E;return b().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return R=V.text,W.t0=j,W.t1=JSON,W.next=5,ee({text:R});case 5:return W.t2=W.sent,W.t3=W.t1.stringify.call(W.t1,W.t2),W.next=9,(0,W.t0)(W.t3,!0);case 9:return Y=W.sent,E="",E+="<!-- payload-type:".concat(C.LO.excalidraw," -->"),E+="<!-- payload-version:2 -->",E+="<!-- payload-start -->",E+=Y,E+="<!-- payload-end -->",W.abrupt("return",E);case 17:case"end":return W.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),D=function(){var B=(0,g.Z)(b().mark(function H(V){var R,Y,E,W,F,z,q;return b().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(R=V.svg).includes("payload-type:".concat(C.LO.excalidraw))){fe.next=26;break}if(Y=R.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/)){fe.next=5;break}throw new Error("INVALID");case 5:return E=R.match(/<!-- payload-version:(\d+) -->/),W=(E==null?void 0:E[1])||"1",F=W!=="1",fe.prev=8,fe.next=11,$(Y[1],F);case 11:if(z=fe.sent,"encoded"in(q=JSON.parse(z))){fe.next=17;break}if(!("type"in q)||q.type!==C.r8.excalidraw){fe.next=16;break}return fe.abrupt("return",z);case 16:throw new Error("FAILED");case 17:return fe.next=19,Q(q);case 19:return fe.abrupt("return",fe.sent);case 22:throw fe.prev=22,fe.t0=fe.catch(8),console.error(fe.t0),new Error("FAILED");case 26:throw new Error("INVALID");case 27:case"end":return fe.stop()}},H,null,[[8,22]])}));return function(H){return B.apply(this,arguments)}}()},9485:function(f,h,c){c.d(h,{Um:function(){return C.Um},cT:function(){return y.cT},n8:function(){return C.n8},p1:function(){return I}});var g=c(8950),m=c(2975),b=c.n(m),v=c(6665),w=c(2335),_=c(8211),k=c(4162),y=c(434),S=c(313),C=c(5523),I=function(){var A=(0,g.Z)(b().mark(function T(L,j,$,ee,Q){var pe,ie,te,Z,D,B,H,V,R,Y,E;return b().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(pe=Q.exportBackground,ie=Q.exportPadding,te=ie===void 0?w.qy:ie,Z=Q.viewBackgroundColor,D=Q.name,B=Q.fileHandle,H=B===void 0?null:B,j.length!==0){W.next=3;break}throw new Error((0,_.t)("alerts.cannotExportEmptyCanvas"));case 3:if(L!=="svg"&&L!=="clipboard-svg"){W.next=17;break}return W.next=6,(0,k.$D)(j,{exportBackground:pe,exportWithDarkMode:$.exportWithDarkMode,viewBackgroundColor:Z,exportPadding:te,exportScale:$.exportScale,exportEmbedScene:$.exportEmbedScene&&L==="svg"},ee);case 6:if(V=W.sent,L!=="svg"){W.next=13;break}return W.next=10,(0,S.NL)(new Blob([V.outerHTML],{type:w.LO.svg}),{description:"Export to SVG",name:D,extension:$.exportEmbedScene?"excalidraw.svg":"svg",fileHandle:H});case 10:return W.abrupt("return",W.sent);case 13:if(L!=="clipboard-svg"){W.next=17;break}return W.next=16,(0,v.dd)(V.outerHTML);case 16:return W.abrupt("return");case 17:return W.next=19,(0,k.NL)(j,$,ee,{exportBackground:pe,viewBackgroundColor:Z,exportPadding:te});case 19:if((R=W.sent).style.display="none",document.body.appendChild(R),L!=="png"){W.next=38;break}return W.next=25,(0,y._c)(R);case 25:if(Y=W.sent,R.remove(),!$.exportEmbedScene){W.next=33;break}return W.next=30,Promise.resolve().then(c.bind(c,673));case 30:return W.next=32,W.sent.encodePngMetadata({blob:Y,metadata:(0,C.I_)(j,$,ee,"local")});case 32:Y=W.sent;case 33:return W.next=35,(0,S.NL)(Y,{description:"Export to PNG",name:D,extension:"png",fileHandle:H});case 35:return W.abrupt("return",W.sent);case 38:if(L!=="clipboard"){W.next=60;break}return W.prev=39,E=(0,y._c)(R),W.next=43,(0,v.uR)(E);case 43:W.next=55;break;case 45:if(W.prev=45,W.t0=W.catch(39),console.warn(W.t0),W.t0.name!=="CANVAS_POSSIBLY_TOO_BIG"){W.next=50;break}throw W.t0;case 50:if(!w.vU||W.t0.name!=="TypeError"){W.next=54;break}throw new Error("".concat((0,_.t)("alerts.couldNotCopyToClipboard"),`

`).concat((0,_.t)("hints.firefox_clipboard_write")));case 54:throw new Error((0,_.t)("alerts.couldNotCopyToClipboard"));case 55:return W.prev=55,R.remove(),W.finish(55);case 58:W.next=62;break;case 60:throw R.remove(),new Error("Unsupported export type");case 62:case"end":return W.stop()}},T,null,[[39,45,55,58]])}));return function(T,L,j,$,ee){return A.apply(this,arguments)}}()},5523:function(f,h,c){c.d(h,{HT:function(){return ee},I_:function(){return T},NI:function(){return Q},Um:function(){return L},dS:function(){return $},n8:function(){return j},t1:function(){return pe}});var g=c(6655),m=c(8950),b=c(2975),v=c.n(b),w=c(313),_=c(8897),k=c(2335),y=c(1047),S=c(434);function C(ie,te){var Z=typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(!Z){if(Array.isArray(ie)||(Z=function(Y,E){if(Y){if(typeof Y=="string")return I(Y,E);var W=Object.prototype.toString.call(Y).slice(8,-1);if(W==="Object"&&Y.constructor&&(W=Y.constructor.name),W==="Map"||W==="Set")return Array.from(Y);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return I(Y,E)}}(ie))||te&&ie&&typeof ie.length=="number"){Z&&(ie=Z);var D=0,B=function(){};return{s:B,n:function(){return D>=ie.length?{done:!0}:{done:!1,value:ie[D++]}},e:function(Y){throw Y},f:B}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H,V=!0,R=!1;return{s:function(){Z=Z.call(ie)},n:function(){var Y=Z.next();return V=Y.done,Y},e:function(Y){R=!0,H=Y},f:function(){try{V||Z.return==null||Z.return()}finally{if(R)throw H}}}}function I(ie,te){(te==null||te>ie.length)&&(te=ie.length);for(var Z=0,D=new Array(te);Z<te;Z++)D[Z]=ie[Z];return D}var A=function(ie,te){var Z,D={},B=C(ie);try{for(B.s();!(Z=B.n()).done;){var H=Z.value;!H.isDeleted&&"fileId"in H&&H.fileId&&te[H.fileId]&&(D[H.fileId]=te[H.fileId])}}catch(V){B.e(V)}finally{B.f()}return D},T=function(ie,te,Z,D){var B={type:k.r8.excalidraw,version:k.Kr.excalidraw,source:k.pb,elements:D==="local"?(0,y._M)(ie):(0,y.BQ)(ie),appState:D==="local"?(0,_.s)(te):(0,_.eS)(te),files:D==="local"?A(ie,Z):void 0};return JSON.stringify(B,null,2)},L=function(){var ie=(0,m.Z)(v().mark(function te(Z,D,B){var H,V,R;return v().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return H=T(Z,D,B,"local"),V=new Blob([H],{type:k.LO.excalidraw}),Y.next=4,(0,w.NL)(V,{name:D.name,extension:"excalidraw",description:"Excalidraw file",fileHandle:(0,S.g8)(D.fileHandle)?null:D.fileHandle});case 4:return R=Y.sent,Y.abrupt("return",{fileHandle:R});case 6:case"end":return Y.stop()}},te)}));return function(te,Z,D){return ie.apply(this,arguments)}}(),j=function(){var ie=(0,m.Z)(v().mark(function te(Z,D){var B;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,w.I$)({description:"Excalidraw files"});case 2:return B=H.sent,H.t0=S.cT,H.next=6,(0,S.gY)(B);case 6:return H.t1=H.sent,H.t2=Z,H.t3=D,H.t4=B.handle,H.abrupt("return",(0,H.t0)(H.t1,H.t2,H.t3,H.t4));case 11:case"end":return H.stop()}},te)}));return function(te,Z){return ie.apply(this,arguments)}}(),$=function(ie){return(ie==null?void 0:ie.type)===k.r8.excalidraw&&(!ie.elements||Array.isArray(ie.elements)&&(!ie.appState||(0,g.Z)(ie.appState)==="object"))},ee=function(ie){return(0,g.Z)(ie)==="object"&&ie&&ie.type===k.r8.excalidrawLibrary&&(ie.version===1||ie.version===2)},Q=function(ie){var te={type:k.r8.excalidrawLibrary,version:k.Kr.excalidrawLibrary,source:k.pb,libraryItems:ie};return JSON.stringify(te,null,2)},pe=function(){var ie=(0,m.Z)(v().mark(function te(Z){var D;return v().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return D=Q(Z),B.next=3,(0,w.NL)(new Blob([D],{type:k.LO.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"});case 3:case"end":return B.stop()}},te)}));return function(te){return ie.apply(this,arguments)}}()},7053:function(f,h,c){c.d(h,{Di:function(){return Y},WV:function(){return R},rF:function(){return Z},xS:function(){return E},zh:function(){return H}});var g=c(7169),m=c(8950),b=c(5169),v=c(8821),w=c(1930),_=c(2975),k=c.n(_),y=c(434),S=c(679),C=c(6274),I=c(9487),A=c(8925),T=c(6797),L=c(8211),j=c(9787),$=c(2335),ee=c(6127);function Q(W,F){var z=Object.keys(W);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(W);F&&(q=q.filter(function(fe){return Object.getOwnPropertyDescriptor(W,fe).enumerable})),z.push.apply(z,q)}return z}function pe(W){for(var F=1;F<arguments.length;F++){var z=arguments[F]!=null?arguments[F]:{};F%2?Q(Object(z),!0).forEach(function(q){(0,g.Z)(W,q,z[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(z)):Q(Object(z)).forEach(function(q){Object.defineProperty(W,q,Object.getOwnPropertyDescriptor(z,q))})}return W}function ie(W,F){var z=typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(!z){if(Array.isArray(W)||(z=function(oe,re){if(oe){if(typeof oe=="string")return te(oe,re);var ae=Object.prototype.toString.call(oe).slice(8,-1);if(ae==="Object"&&oe.constructor&&(ae=oe.constructor.name),ae==="Map"||ae==="Set")return Array.from(oe);if(ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return te(oe,re)}}(W))||F&&W&&typeof W.length=="number"){z&&(W=z);var q=0,fe=function(){};return{s:fe,n:function(){return q>=W.length?{done:!0}:{done:!1,value:W[q++]}},e:function(oe){throw oe},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ce,U=!0,ve=!1;return{s:function(){z=z.call(W)},n:function(){var oe=z.next();return U=oe.done,oe},e:function(oe){ve=!0,ce=oe},f:function(){try{U||z.return==null||z.return()}finally{if(ve)throw ce}}}}function te(W,F){(F==null||F>W.length)&&(F=W.length);for(var z=0,q=new Array(F);z<F;z++)q[z]=W[z];return q}var Z=(0,C.cn)({status:"loaded",isInitialized:!0,libraryItems:[]}),D=function(W){return JSON.parse(JSON.stringify(W))},B=function(W,F){return!W.find(function(z){return z.elements.length===F.elements.length&&z.elements.every(function(q,fe){return q.id===F.elements[fe].id&&q.versionNonce===F.elements[fe].versionNonce})})},H=function(W,F){var z,q=[],fe=ie(F);try{for(fe.s();!(z=fe.n()).done;){var ce=z.value;B(W,ce)&&q.push(ce)}}catch(U){fe.e(U)}finally{fe.f()}return[].concat(q,(0,w.Z)(W))},V=(0,b.Z)(function W(F){var z=this;(0,v.Z)(this,W),this.lastLibraryItems=[],this.isInitialized=!1,this.updateQueue=[],this.getLastUpdateTask=function(){return z.updateQueue[z.updateQueue.length-1]},this.notifyListeners=function(){if(z.updateQueue.length>0)I.e_.set(Z,{status:"loading",libraryItems:z.lastLibraryItems,isInitialized:z.isInitialized});else{z.isInitialized=!0,I.e_.set(Z,{status:"loaded",libraryItems:z.lastLibraryItems,isInitialized:z.isInitialized});try{var q,fe;(q=(fe=z.app.props).onLibraryChange)===null||q===void 0||q.call(fe,D(z.lastLibraryItems))}catch(ce){console.error(ce)}}},this.destroy=function(){z.isInitialized=!1,z.updateQueue=[],z.lastLibraryItems=[],I.e_.set(ee.YX,new Map)},this.resetLibrary=function(){return z.setLibrary([])},this.getLatestLibrary=function(){return new Promise(function(){var q=(0,m.Z)(k().mark(function fe(ce){var U;return k().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.prev=0,ve.next=3,z.getLastUpdateTask()||z.lastLibraryItems;case 3:U=ve.sent,z.updateQueue.length>0?ce(z.getLatestLibrary()):ce(D(U)),ve.next=10;break;case 7:return ve.prev=7,ve.t0=ve.catch(0),ve.abrupt("return",ce(z.lastLibraryItems));case 10:case"end":return ve.stop()}},fe,null,[[0,7]])}));return function(fe){return q.apply(this,arguments)}}())},this.updateLibrary=function(){var q=(0,m.Z)(k().mark(function fe(ce){var U,ve,oe,re,ae,me,he,se,ge;return k().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return U=ce.libraryItems,ve=ce.prompt,oe=ve!==void 0&&ve,re=ce.merge,ae=re!==void 0&&re,me=ce.openLibraryMenu,he=me!==void 0&&me,se=ce.defaultStatus,ge=se===void 0?"unpublished":se,he&&z.app.setState({openSidebar:{name:$.Cc.name,tab:$.tf}}),X.abrupt("return",z.setLibrary(function(){return new Promise(function(){var we=(0,m.Z)(k().mark(function be(le,ye){var ue,xe;return k().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.prev=0,Pe.next=3,typeof U!="function"||U instanceof Blob?U:U(z.lastLibraryItems);case 3:if(!((ue=Pe.sent)instanceof Blob)){Pe.next=10;break}return Pe.next=7,(0,y.lV)(ue,ge);case 7:xe=Pe.sent,Pe.next=11;break;case 10:xe=(0,S.wJ)(ue,ge);case 11:!oe||window.confirm((0,L.t)("alerts.confirmAddLibrary",{numShapes:xe.length}))?(oe&&z.app.focusContainer(),le(ae?H(z.lastLibraryItems,xe):xe)):ye(new T._),Pe.next=17;break;case 14:Pe.prev=14,Pe.t0=Pe.catch(0),ye(Pe.t0);case 17:case"end":return Pe.stop()}},be,null,[[0,14]])}));return function(be,le){return we.apply(this,arguments)}}())}));case 3:case"end":return X.stop()}},fe)}));return function(fe){return q.apply(this,arguments)}}(),this.setLibrary=function(q){var fe=new Promise(function(){var ce=(0,m.Z)(k().mark(function U(ve,oe){return k().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,z.getLastUpdateTask();case 3:return typeof q=="function"&&(q=q(z.lastLibraryItems)),re.t0=D,re.next=7,q;case 7:re.t1=re.sent,z.lastLibraryItems=(0,re.t0)(re.t1),ve(z.lastLibraryItems),re.next=15;break;case 12:re.prev=12,re.t2=re.catch(0),oe(re.t2);case 15:case"end":return re.stop()}},U,null,[[0,12]])}));return function(U,ve){return ce.apply(this,arguments)}}()).catch(function(ce){if(ce.name==="AbortError")return console.warn("Library update aborted by user"),z.lastLibraryItems;throw ce}).finally(function(){z.updateQueue=z.updateQueue.filter(function(ce){return ce!==fe}),z.notifyListeners()});return z.updateQueue.push(fe),z.notifyListeners(),fe},this.app=F});h.ZP=V;var R=function(W){var F,z=Math.ceil(Math.sqrt(W.length)),q=[],fe=0,ce=0,U=0,ve=0,oe=0,re=0,ae=0,me=ie(W);try{var he=function(){var se=F.value;oe&&oe%z==0&&(ce+=U+50,fe=0,re=0,ae++),re===0&&(U=function(xe){return W.slice(xe*z,xe*z+z).reduce(function(Pe,Ne){var Me=(0,A.v2)(Ne.elements).height;return Math.max(Pe,Me)},0)}(ae)),ve=function(xe){var Pe,Ne=0,Me=0,Re=0,We=ie(W);try{for(We.s();!(Pe=We.n()).done;){var Se=Pe.value;if(Ne%z==0&&(Me=0),Me===xe){var Be=(0,A.v2)(Se.elements).width;Re=Math.max(Re,Be)}Ne++,Me++}}catch(_e){We.e(_e)}finally{We.f()}return Re}(re);var ge=(0,A.v2)(se.elements),X=ge.minX,we=ge.minY,be=ge.width,le=ge.height,ye=(ve-be)/2,ue=(U-le)/2;q.push.apply(q,(0,w.Z)(se.elements.map(function(xe){return pe(pe({},xe),{},{x:xe.x+fe+ye-X,y:xe.y+ce+ue-we})}))),fe+=ve+50,oe++,re++};for(me.s();!(F=me.n()).done;)he()}catch(se){me.e(se)}finally{me.f()}return q},Y=function(){var W=new URLSearchParams(window.location.hash.slice(1)).get($.ah.addLibrary)||new URLSearchParams(window.location.search).get($.UO.addLibrary),F=W?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return W?{libraryUrl:W,idToken:F}:null},E=function(W){var F=W.excalidrawAPI,z=W.getInitialLibraryItems,q=(0,j.useRef)(z);(0,j.useEffect)(function(){if(F){var fe=function(){var ve=(0,m.Z)(k().mark(function oe(re){var ae,me,he,se,ge,X;return k().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return ae=re.libraryUrl,me=re.idToken,he=new Promise(function(){var be=(0,m.Z)(k().mark(function le(ye,ue){var xe,Pe;return k().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.prev=0,Ne.next=3,fetch(decodeURIComponent(ae));case 3:return xe=Ne.sent,Ne.next=6,xe.blob();case 6:Pe=Ne.sent,ye(Pe),Ne.next=13;break;case 10:Ne.prev=10,Ne.t0=Ne.catch(0),ue(Ne.t0);case 13:case"end":return Ne.stop()}},le,null,[[0,10]])}));return function(le,ye){return be.apply(this,arguments)}}()),se=me!==F.id,we.next=5,se&&document.hidden?new Promise(function(be){window.addEventListener("focus",function(){return be()},{once:!0})}):null;case 5:return we.prev=5,we.next=8,F.updateLibrary({libraryItems:he,prompt:se,merge:!0,defaultStatus:"published",openLibraryMenu:!0});case 8:we.next=13;break;case 10:throw we.prev=10,we.t0=we.catch(5),we.t0;case 13:return we.prev=13,window.location.hash.includes($.ah.addLibrary)?((ge=new URLSearchParams(window.location.hash.slice(1))).delete($.ah.addLibrary),window.history.replaceState({},$.iC,"#".concat(ge.toString()))):window.location.search.includes($.UO.addLibrary)&&((X=new URLSearchParams(window.location.search)).delete($.UO.addLibrary),window.history.replaceState({},$.iC,"?".concat(X.toString()))),we.finish(13);case 16:case"end":return we.stop()}},oe,null,[[5,10,13,16]])}));return function(oe){return ve.apply(this,arguments)}}(),ce=function(ve){ve.preventDefault();var oe=Y();oe&&(ve.stopImmediatePropagation(),window.history.replaceState({},"",ve.oldURL),fe(oe))};q.current&&F.updateLibrary({libraryItems:q.current()});var U=Y();return U&&fe(U),window.addEventListener($.Ks.HASHCHANGE,ce),function(){window.removeEventListener($.Ks.HASHCHANGE,ce)}}},[F])}},679:function(f,h,c){c.d(h,{ET:function(){return B},lY:function(){return R},nu:function(){return Y},wJ:function(){return W}});var g=c(2577),m=c(7169),b=c(1047),v=c(1974),w=c(6954),_=c(2335),k=c(8897),y=c(6938),S=c(1935),C=c(6340),I=c(5710),A=c(56),T=c(451);function L(F,z){var q=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!q){if(Array.isArray(F)||(q=function(re,ae){if(re){if(typeof re=="string")return j(re,ae);var me=Object.prototype.toString.call(re).slice(8,-1);if(me==="Object"&&re.constructor&&(me=re.constructor.name),me==="Map"||me==="Set")return Array.from(re);if(me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me))return j(re,ae)}}(F))||z&&F&&typeof F.length=="number"){q&&(F=q);var fe=0,ce=function(){};return{s:ce,n:function(){return fe>=F.length?{done:!0}:{done:!1,value:F[fe++]}},e:function(re){throw re},f:ce}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U,ve=!0,oe=!1;return{s:function(){q=q.call(F)},n:function(){var re=q.next();return ve=re.done,re},e:function(re){oe=!0,U=re},f:function(){try{ve||q.return==null||q.return()}finally{if(oe)throw U}}}}function j(F,z){(z==null||z>F.length)&&(z=F.length);for(var q=0,fe=new Array(z);q<z;q++)fe[q]=F[q];return fe}function $(F,z){var q=Object.keys(F);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(F);z&&(fe=fe.filter(function(ce){return Object.getOwnPropertyDescriptor(F,ce).enumerable})),q.push.apply(q,fe)}return q}function ee(F){for(var z=1;z<arguments.length;z++){var q=arguments[z]!=null?arguments[z]:{};z%2?$(Object(q),!0).forEach(function(fe){(0,m.Z)(F,fe,q[fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(q)):$(Object(q)).forEach(function(fe){Object.defineProperty(F,fe,Object.getOwnPropertyDescriptor(q,fe))})}return F}var Q={selection:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,hand:!0},pe=function(F){var z=(0,T.B)();return Object.keys(z).includes(F)?z[F]:_.rk},ie=function(F,z){var q,fe,ce,U,ve,oe,re,ae,me,he,se,ge,X,we,be,le={type:z.type||F.type,version:F.version||1,versionNonce:(q=F.versionNonce)!==null&&q!==void 0?q:0,isDeleted:(fe=F.isDeleted)!==null&&fe!==void 0&&fe,id:F.id||(0,w.kb)(),fillStyle:F.fillStyle||"hachure",strokeWidth:F.strokeWidth||1,strokeStyle:(ce=F.strokeStyle)!==null&&ce!==void 0?ce:"solid",roughness:(U=F.roughness)!==null&&U!==void 0?U:1,opacity:F.opacity==null?100:F.opacity,angle:F.angle||0,x:(ve=(oe=z.x)!==null&&oe!==void 0?oe:F.x)!==null&&ve!==void 0?ve:0,y:(re=(ae=z.y)!==null&&ae!==void 0?ae:F.y)!==null&&re!==void 0?re:0,strokeColor:F.strokeColor||A.HO.black,backgroundColor:F.backgroundColor||A.HO.transparent,width:F.width||0,height:F.height||0,seed:(me=F.seed)!==null&&me!==void 0?me:1,groupIds:(he=F.groupIds)!==null&&he!==void 0?he:[],frameId:(se=F.frameId)!==null&&se!==void 0?se:null,roundness:F.roundness?F.roundness:F.strokeSharpness==="round"?{type:(0,v.QI)(F.type)?_.a6.LEGACY:_.a6.PROPORTIONAL_RADIUS}:null,boundElements:F.boundElementIds?F.boundElementIds.map(function(ye){return{type:"arrow",id:ye}}):(ge=F.boundElements)!==null&&ge!==void 0?ge:[],updated:(X=F.updated)!==null&&X!==void 0?X:(0,C.C3)(),link:(we=F.link)!==null&&we!==void 0?we:null,locked:(be=F.locked)!==null&&be!==void 0&&be};return"customData"in F&&(le.customData=F.customData),_.WR in F&&(le[_.WR]=F[_.WR]),ee(ee(ee({},le),(0,b.Qp)(le)),z)},te=function(F,z){if(F.boundElements){var q=F.boundElements.slice(),fe=new Set;F.boundElements=q.reduce(function(ce,U){var ve=z.get(U.id);if(ve&&!fe.has(U.id)){if(fe.add(U.id),ve.isDeleted)return ce;ce.push(U),(0,v.iB)(ve)&&!ve.containerId&&(ve.containerId=F.id)}return ce},[])}},Z=function(F,z){var q=F.containerId?z.get(F.containerId):null;if(q){if(!F.isDeleted&&q.boundElements&&!q.boundElements.find(function(ce){return ce.id===F.id})){var fe=(q.boundElements||(q.boundElements=[])).slice();fe.push({type:"text",id:F.id}),q.boundElements=fe}}else F.containerId=null},D=function(F,z){F.frameId&&(z.get(F.frameId)||(F.frameId=null))},B=function(F,z,q){var fe=new Set,ce=z?(0,C.xn)(z):null,U=(F||[]).reduce(function(me,he){if(he.type!=="selection"&&!(0,b.QD)(he)){var se=function(X){var we,be,le,ye=arguments.length>1&&arguments[1]!==void 0&&arguments[1];switch(X.type){case"text":var ue=X.fontSize,xe=X.fontFamily;if("font"in X){var Pe=X.font.split(" "),Ne=(0,g.Z)(Pe,2),Me=Ne[0],Re=Ne[1];ue=parseFloat(Me),xe=pe(Re)}var We=(we=X.text)!==null&&we!==void 0?we:"",Se=X.lineHeight||(X.height?(0,I.$2)(X):(0,I.PT)(X.fontFamily)),Be=(0,I.R8)(X.text,(0,C.mO)(X),Se);return X=ie(X,{fontSize:ue,fontFamily:xe,text:We,textAlign:X.textAlign||_.Hg,verticalAlign:X.verticalAlign||_.hs,containerId:(be=X.containerId)!==null&&be!==void 0?be:null,originalText:X.originalText||We,lineHeight:Se,baseline:Be}),ye&&(X=ee(ee({},X),(0,b.JZ)(X))),X;case"freedraw":return ie(X,{points:X.points,lastCommittedPoint:null,simulatePressure:X.simulatePressure,pressures:X.pressures});case"image":return ie(X,{status:X.status||"pending",fileId:X.fileId,scale:X.scale||[1,1]});case"line":case"draw":case"arrow":var _e=X,ze=_e.startArrowhead,Ve=ze===void 0?null:ze,ut=_e.endArrowhead,Ie=ut===void 0?X.type==="arrow"?"arrow":null:ut,ot=X.x,Ye=X.y,Ke=!Array.isArray(X.points)||X.points.length<2?[[0,0],[X.width,X.height]]:X.points;if(Ke[0][0]!==0||Ke[0][1]!==0){var tt=y._.getNormalizedPoints(X);Ke=tt.points,ot=tt.x,Ye=tt.y}return ie(X,{type:X.type==="draw"?"line":X.type,startBinding:X.startBinding,endBinding:X.endBinding,lastCommittedPoint:null,startArrowhead:Ve,endArrowhead:Ie,points:Ke,x:ot,y:Ye});case"ellipse":case"rectangle":case"diamond":return ie(X,{});case"frame":return ie(X,{name:(le=X.name)!==null&&le!==void 0?le:null})}}(he,q==null?void 0:q.refreshDimensions);if(se){var ge=ce==null?void 0:ce.get(he.id);ge&&ge.version>se.version&&(se=(0,S.ZP)(se,ge.version)),fe.has(se.id)&&(se=ee(ee({},se),{},{id:(0,w.kb)()})),fe.add(se.id),me.push(se)}}return me},[]);if(q==null||!q.repairBindings)return U;var ve,oe=(0,C.xn)(U),re=L(U);try{for(re.s();!(ve=re.n()).done;){var ae=ve.value;ae.frameId&&D(ae,oe),(0,v.iB)(ae)&&ae.containerId?Z(ae,oe):ae.boundElements&&te(ae,oe)}}catch(me){re.e(me)}finally{re.f()}return U},H=function(F,z,q){var fe=z[F];return fe!==void 0?fe:q[F]},V={isSidebarDocked:function(F,z){var q;return["defaultSidebarDockedPreference",(q=F.isSidebarDocked)!==null&&q!==void 0?q:H("defaultSidebarDockedPreference",F,z)]}},R=function(F,z){var q,fe,ce,U;F=F||{};for(var ve=(0,k.im)(),oe={},re=0,ae=Object.keys(V);re<ae.length;re++){var me=ae[re];if(me in F){var he=V[me](F,ve),se=(0,g.Z)(he,2),ge=se[0],X=se[1];oe[ge]=X}}for(var we=0,be=Object.entries(ve);we<be.length;we++){var le=(0,g.Z)(be[we],2),ye=le[0],ue=le[1],xe=F[ye],Pe=z?z[ye]:void 0;oe[ye]=xe!==void 0?xe:Pe!==void 0?Pe:ue}return ee(ee({},oe),{},{cursorButton:(z==null?void 0:z.cursorButton)||"up",penDetected:(q=z==null?void 0:z.penDetected)!==null&&q!==void 0?q:!!F.penMode&&(fe=F.penDetected)!==null&&fe!==void 0&&fe,activeTool:ee(ee({},(0,C.Om)(ve,oe.activeTool.type&&Q[oe.activeTool.type]?oe.activeTool:{type:"selection"})),{},{lastActiveTool:null,locked:(ce=oe.activeTool.locked)!==null&&ce!==void 0&&ce}),zoom:typeof F.zoom=="number"?{value:F.zoom}:(U=F.zoom)!==null&&U!==void 0&&U.value?F.zoom:ve.zoom,openSidebar:typeof F.openSidebar=="string"?{name:_.Cc.name}:oe.openSidebar})},Y=function(F,z,q,fe){return{elements:B(F==null?void 0:F.elements,q,fe),appState:R(F==null?void 0:F.appState,z||null),files:(F==null?void 0:F.files)||{}}},E=function(F){var z=B((0,b.Lm)(F.elements),null);return z.length?ee(ee({},F),{},{elements:z}):null},W=function(){var F,z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1?arguments[1]:void 0,fe=[],ce=L(z);try{for(ce.s();!(F=ce.n()).done;){var U=F.value;if(Array.isArray(U)){var ve=E({status:q,elements:U,id:(0,w.kb)(),created:Date.now()});ve&&fe.push(ve)}else{var oe=U,re=E(ee(ee({},oe),{},{id:oe.id||(0,w.kb)(),status:oe.status||q,created:oe.created||Date.now()}));re&&fe.push(re)}}}catch(ae){ce.e(ae)}finally{ce.f()}return fe}},4929:function(f,h,c){c.d(h,{rj:function(){return oe},nW:function(){return ae},nz:function(){return ge},sw:function(){return we},lV:function(){return xe},q$:function(){return se},wq:function(){return be},$u:function(){return he},Pp:function(){return ye}});var g=c(7169),m=c(2577),b=c(6340),v=c(1935),w=c(7901),_=c(1319),k=c(3646),y=c(8211),S=c(9787),C=c(9076),I=c(6066),A=c(5317),T=c(6552),L=c(2335),j=c(1894),$=c(75),ee=c(2325),Q=c(1047),pe=c(487),ie=c.n(pe),te=c(631),Z=c.n(te),D=c(2052),B=c.n(D),H=c(4010),V=c.n(H),R=c(1469),Y=c.n(R),E=c(9329),W=c.n(E),F=c(5260),z={};z.styleTagTransform=W(),z.setAttributes=V(),z.insert=B().bind(null,"head"),z.domAPI=Z(),z.insertStyleElement=Y(),ie()(F.Z,z),F.Z&&F.Z.locals&&F.Z.locals;var q=c(7047),fe=c(736),ce=c(9980);function U(Ne,Me){var Re=Object.keys(Ne);if(Object.getOwnPropertySymbols){var We=Object.getOwnPropertySymbols(Ne);Me&&(We=We.filter(function(Se){return Object.getOwnPropertyDescriptor(Ne,Se).enumerable})),Re.push.apply(Re,We)}return Re}function ve(Ne){for(var Me=1;Me<arguments.length;Me++){var Re=arguments[Me]!=null?arguments[Me]:{};Me%2?U(Object(Re),!0).forEach(function(We){(0,g.Z)(Ne,We,Re[We])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ne,Object.getOwnPropertyDescriptors(Re)):U(Object(Re)).forEach(function(We){Object.defineProperty(Ne,We,Object.getOwnPropertyDescriptor(Re,We))})}return Ne}var oe=document.createElement("img");oe.src="data:".concat(L.LO.svg,", ").concat(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>'));var re=!1,ae=function(Ne){var Me=Ne.element,Re=Ne.setAppState,We=Ne.onLinkOpen,Se=(0,fe.gF)(),Be=Me.link||"",_e=(0,S.useState)(Be),ze=(0,m.Z)(_e,2),Ve=ze[0],ut=ze[1],Ie=(0,S.useRef)(null),ot=Se.showHyperlinkPopup==="editor"||!Be,Ye=(0,S.useCallback)(function(){if(Ie.current){var Kt=he(Ie.current.value);!Me.link&&Kt&&(0,q.L)("hyperlink","create"),(0,v.DR)(Me,{link:Kt}),Re({showHyperlinkPopup:"info"})}},[Me,Re]);(0,S.useLayoutEffect)(function(){return function(){Ye()}},[Ye]),(0,S.useEffect)(function(){var Kt=null,sn=function(nn){ot||(Kt&&clearTimeout(Kt),Pe(Me,Se,[nn.clientX,nn.clientY])&&(Kt=window.setTimeout(function(){Re({showHyperlinkPopup:!1})},500)))};return window.addEventListener(L.Ks.POINTER_MOVE,sn,!1),function(){window.removeEventListener(L.Ks.POINTER_MOVE,sn,!1),Kt&&clearTimeout(Kt)}},[Se,Me,ot,Re]);var Ke=(0,S.useCallback)(function(){(0,q.L)("hyperlink","delete"),(0,v.DR)(Me,{link:null}),ot&&(Ie.current.value=""),Re({showHyperlinkPopup:!1})},[Re,Me,ot]),tt=me(Me,Se),pt=tt.x,St=tt.y;return Se.draggingElement||Se.resizingElement||Se.isRotating||Se.openMenu?null:(0,ce.jsxs)("div",{className:"excalidraw-hyperlinkContainer",style:{top:"".concat(St,"px"),left:"".concat(pt,"px"),width:320,padding:5},children:[ot?(0,ce.jsx)("input",{className:(0,C.Z)("excalidraw-hyperlinkContainer-input"),placeholder:"Type or paste your link here",ref:Ie,value:Ve,onChange:function(Kt){return ut(Kt.target.value)},autoFocus:!0,onKeyDown:function(Kt){Kt.stopPropagation(),Kt[I.tW.CTRL_OR_CMD]&&Kt.key===I.tW.K&&Kt.preventDefault(),Kt.key!==I.tW.ENTER&&Kt.key!==I.tW.ESCAPE||Ye()}}):(0,ce.jsx)("a",{href:Me.link||"",className:(0,C.Z)("excalidraw-hyperlinkContainer-link",{"d-none":ot}),target:se(Me.link)?"_self":"_blank",onClick:function(Kt){if(Me.link&&We){var sn=(0,b.ag)(L.Ks.EXCALIDRAW_LINK,Kt.nativeEvent);We(Me,sn),sn.defaultPrevented&&Kt.preventDefault()}},rel:"noopener noreferrer",children:Me.link}),(0,ce.jsxs)("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!ot&&(0,ce.jsx)(_.V,{type:"button",title:(0,y.t)("buttons.edit"),"aria-label":(0,y.t)("buttons.edit"),label:(0,y.t)("buttons.edit"),onClick:function(){(0,q.L)("hyperlink","edit","popup-ui"),Re({showHyperlinkPopup:"editor"})},className:"excalidraw-hyperlinkContainer--edit",icon:k.Pm}),Be&&(0,ce.jsx)(_.V,{type:"button",title:(0,y.t)("buttons.remove"),"aria-label":(0,y.t)("buttons.remove"),label:(0,y.t)("buttons.remove"),onClick:Ke,className:"excalidraw-hyperlinkContainer--remove",icon:k.XH})]})]})},me=function(Ne,Me){var Re=(0,Q.qf)(Ne),We=(0,m.Z)(Re,2),Se=We[0],Be=We[1],_e=(0,b._i)({sceneX:Se+Ne.width/2,sceneY:Be},Me),ze=_e.x,Ve=_e.y;return{x:ze-Me.offsetLeft-160,y:Ve-Me.offsetTop-85}},he=function(Ne){return(Ne=Ne.trim())&&(Ne.includes("://")||/^[[\\/]/.test(Ne)||(Ne="https://".concat(Ne))),Ne},se=function(Ne){return!!(Ne!=null&&Ne.includes(location.origin)||Ne!=null&&Ne.startsWith("/"))},ge=(0,w.z)({name:"hyperlink",perform:function(Ne,Me){return Me.showHyperlinkPopup!=="editor"&&{elements:Ne,appState:ve(ve({},Me),{},{showHyperlinkPopup:"editor",openMenu:null}),commitToHistory:!0}},trackEvent:{category:"hyperlink",action:"click"},keyTest:function(Ne){return Ne[I.tW.CTRL_OR_CMD]&&Ne.key===I.tW.K},contextItemLabel:function(Ne,Me){return X(Ne,Me)},predicate:function(Ne,Me){return(0,$.eD)(Ne,Me).length===1},PanelComponent:function(Ne){var Me=Ne.elements,Re=Ne.appState,We=Ne.updateData,Se=(0,$.eD)(Me,Re);return(0,ce.jsx)(_.V,{type:"button",icon:k.xP,"aria-label":(0,y.t)(X(Me,Re)),title:"".concat((0,y.t)("labels.link.label")," - ").concat((0,b.uY)("CtrlOrCmd+K")),onClick:function(){return We(null)},selected:Se.length===1&&!!Se[0].link})}}),X=function(Ne,Me){return(0,$.eD)(Ne,Me)[0].link?"labels.link.edit":"labels.link.create"},we=function(Ne,Me,Re){var We=(0,m.Z)(Ne,4),Se=We[0],Be=We[1],_e=We[2],ze=We[3],Ve=A.Dn,ut=Ve/Re.zoom.value,Ie=Ve/Re.zoom.value,ot=Ve/Re.zoom.value,Ye=(Se+_e)/2,Ke=(Be+ze)/2,tt=(Ve-8)/(2*Re.zoom.value),pt=4/Re.zoom.value,St=_e+pt-tt,Kt=Be-pt-ot+tt,sn=(0,T.U1)(St+ut/2,Kt+Ie/2,Ye,Ke,Me),nn=(0,m.Z)(sn,2);return[nn[0]-ut/2,nn[1]-Ie/2,ut,Ie]},be=function(Ne,Me,Re,We){var Se=(0,m.Z)(Re,2),Be=Se[0],_e=Se[1];if(!Ne.link||Me.selectedElementIds[Ne.id])return!1;var ze=4/Me.zoom.value;if(!We&&Me.viewModeEnabled&&(0,ee.pX)(Ne,[Be,_e],ze,null))return!0;var Ve=(0,Q.qf)(Ne),ut=(0,m.Z)(Ve,4),Ie=ut[0],ot=ut[1],Ye=ut[2],Ke=ut[3],tt=we([Ie,ot,Ye,Ke],Ne.angle,Me),pt=(0,m.Z)(tt,4),St=pt[0],Kt=pt[1],sn=pt[2],nn=pt[3];return Be>St-ze&&Be<St+ze+sn&&_e>Kt-ze&&_e<Kt+nn+ze},le=null,ye=function(Ne,Me){le&&clearTimeout(le),le=window.setTimeout(function(){return ue(Ne,Me)},L.sA)},ue=function(Ne,Me){if(Ne.link){var Re=(0,j.bK)();Re.classList.add("excalidraw-tooltip--visible"),Re.style.maxWidth="20rem",Re.textContent=Ne.link;var We=(0,Q.qf)(Ne),Se=(0,m.Z)(We,4),Be=Se[0],_e=Se[1],ze=Se[2],Ve=Se[3],ut=we([Be,_e,ze,Ve],Ne.angle,Me),Ie=(0,m.Z)(ut,4),ot=Ie[0],Ye=Ie[1],Ke=Ie[2],tt=Ie[3],pt=(0,b._i)({sceneX:ot,sceneY:Ye},Me);(0,j.Js)(Re,{left:pt.x,top:pt.y,width:Ke,height:tt},"top"),(0,q.L)("hyperlink","tooltip","link-icon"),re=!0}},xe=function(){le&&clearTimeout(le),re&&(re=!1,(0,j.bK)().classList.remove("excalidraw-tooltip--visible"))},Pe=function(Ne,Me,Re){var We=(0,m.Z)(Re,2),Se=We[0],Be=We[1],_e=(0,b.dE)({clientX:Se,clientY:Be},Me),ze=_e.x,Ve=_e.y,ut=15/Me.zoom.value;if((0,ee.pX)(Ne,[ze,Ve],ut,null))return!1;var Ie=(0,Q.qf)(Ne),ot=(0,m.Z)(Ie,3),Ye=ot[0],Ke=ot[1],tt=ot[2];if(ze>=Ye&&ze<=tt&&Ve>=Ke-85&&Ve<=Ke)return!1;var pt=me(Ne,Me),St=pt.x,Kt=pt.y;return!(Se>=St-ut&&Se<=St+320+10+ut&&Be>=Kt-ut&&Be<=Kt+ut+10+42)}},8290:function(f,h,c){c.d(h,{$q:function(){return me},DK:function(){return D},H:function(){return B},HG:function(){return $},N1:function(){return L},R:function(){return ie},Ww:function(){return Y},Y9:function(){return V},ZB:function(){return q},cz:function(){return T},ek:function(){return re},el:function(){return Q}});var g=c(7169),m=c(2577),b=c(75),v=c(1974),w=c(2325),_=c(1935),k=c(1564),y=c(6938),S=c(6340),C=c(6066),I=c(5710);function A(ge,X){var we=Object.keys(ge);if(Object.getOwnPropertySymbols){var be=Object.getOwnPropertySymbols(ge);X&&(be=be.filter(function(le){return Object.getOwnPropertyDescriptor(ge,le).enumerable})),we.push.apply(we,be)}return we}var T=function(ge){return!ge[C.tW.CTRL_OR_CMD]},L=function(ge){return ge.isBindingEnabled},j=function(ge,X){var we=[];return X.forEach(function(be){var le=ge.getNonDeletedElement(be);le!=null&&we.push(le)}),we},$=function(ge,X,we){var be=new Set,le=new Set;ee(ge,X,we,"start",be,le),ee(ge,we,X,"end",be,le);var ye=Array.from(le).filter(function(ue){return!be.has(ue)});j(k.Z.getScene(ge),ye).forEach(function(ue){var xe;(0,_.DR)(ue,{boundElements:(xe=ue.boundElements)===null||xe===void 0?void 0:xe.filter(function(Pe){return Pe.type!=="arrow"||Pe.id!==ge.id})})})},ee=function(ge,X,we,be,le,ye){if(X!=="keep")if(X!=null)we!=null&&(we==="keep"?Z(ge,X,be):be!=="start"&&we.id===X.id)||(te(ge,X,be),le.add(X.id));else{var ue=H(ge,be);ue!=null&&ye.add(ue)}},Q=function(ge){ge.forEach(function(X){(0,v.Mn)(X)?$(X,ce(X,"start"),ce(X,"end")):(0,v.f0)(X)&&pe(X)})},pe=function(ge){ve(ge).forEach(function(X){var we=(0,m.Z)(X,2),be=we[0],le=we[1];return $(be,le==="end"?"keep":ge,le==="start"?"keep":ge)})},ie=function(ge,X,we,be){X.startBoundElement!=null&&te(ge,X.startBoundElement,"start");var le=V(be,we);le==null||Z(ge,le,"end")||te(ge,le,"end")},te=function(ge,X,we){(0,_.DR)(ge,(0,g.Z)({},we==="start"?"startBinding":"endBinding",function(be){for(var le=1;le<arguments.length;le++){var ye=arguments[le]!=null?arguments[le]:{};le%2?A(Object(ye),!0).forEach(function(ue){(0,g.Z)(be,ue,ye[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(ye)):A(Object(ye)).forEach(function(ue){Object.defineProperty(be,ue,Object.getOwnPropertyDescriptor(ye,ue))})}return be}({elementId:X.id},R(ge,X,we)))),(0,S.xn)(X.boundElements||[]).has(ge.id)||(0,_.DR)(X,{boundElements:(X.boundElements||[]).concat({id:ge.id,type:"arrow"})})},Z=function(ge,X,we){var be=ge[we==="start"?"endBinding":"startBinding"];return D(ge,be==null?void 0:be.elementId,X)},D=function(ge,X,we){return X===we.id&&ge.points.length<3},B=function(ge){ge.forEach(function(X){(0,v.Mn)(X)&&$(X,null,null)})},H=function(ge,X){var we=X==="start"?"startBinding":"endBinding",be=ge[we];return be==null?null:((0,_.DR)(ge,(0,g.Z)({},we,null)),be.elementId)},V=function(ge,X){return(0,b.QG)(X.getNonDeletedElements(),function(we){return(0,v.f0)(we,!1)&&(0,w.uu)(we,ge)})},R=function(ge,X,we){var be=we==="start"?-1:1,le=be===-1?0:ge.points.length-1,ye=le-be,ue=y._.getPointAtIndexGlobalCoordinates(ge,le),xe=y._.getPointAtIndexGlobalCoordinates(ge,ye);return{focus:(0,w.T_)(X,xe,ue),gap:Math.max(1,(0,w.oT)(X,ue))}},Y=function(ge,X){var we,be=((we=ge.boundElements)!==null&&we!==void 0?we:[]).filter(function(Pe){return Pe.type==="arrow"});if(be.length!==0){var le=X??{},ye=le.newSize,ue=le.simultaneouslyUpdated,xe=W(ue);j(k.Z.getScene(ge),be.map(function(Pe){return Pe.id})).forEach(function(Pe){if((0,v.bt)(Pe)){var Ne=ge;if(E(Pe,Ne)){var Me=z(Ne,Pe.startBinding,ye),Re=z(Ne,Pe.endBinding,ye);xe.has(Pe.id)?(0,_.DR)(Pe,{startBinding:Me,endBinding:Re}):(F(Pe,"start",Me,ge),F(Pe,"end",Re,ge),(0,I.WJ)(Pe)&&(0,I.RB)(Pe,!1))}}})}},E=function(ge,X){var we,be;return((we=ge.startBinding)===null||we===void 0?void 0:we.elementId)===X.id||((be=ge.endBinding)===null||be===void 0?void 0:be.elementId)===X.id},W=function(ge){return new Set((ge||[]).map(function(X){return X.id}))},F=function(ge,X,we,be){if(!(we==null||we.elementId!==be.id&&ge.points.length>2)){var le=k.Z.getScene(ge).getElement(we.elementId);if(le!=null){var ye,ue=X==="start"?-1:1,xe=ue===-1?0:ge.points.length-1,Pe=xe-ue,Ne=y._.getPointAtIndexGlobalCoordinates(ge,Pe),Me=(0,w.j_)(le,we.focus,Ne);if(we.gap===0)ye=Me;else{var Re=(0,w.MZ)(le,Ne,Me,we.gap);ye=Re.length===0?Me:Re[0]}y._.movePoints(ge,[{index:xe,point:y._.pointFromAbsoluteCoords(ge,ye)}],(0,g.Z)({},X==="start"?"startBinding":"endBinding",we))}}},z=function(ge,X,we){if(X==null||we==null)return X;var be=X.gap,le=X.focus,ye=X.elementId,ue=we.width,xe=we.height,Pe=ge.width,Ne=ge.height;return{elementId:ye,gap:Math.max(1,Math.min((0,w.fb)(ge,ue,xe),be*(ue<xe?ue/Pe:xe/Ne))),focus:le}},q=function(ge){var X=new Set(ge.map(function(we){return we.id}));return ge.flatMap(function(we){return(0,v.Mn)(we,!1)?fe(we).filter(function(be){return!X.has(be.id)}):(0,v.f0)(we,!1)?ve(we).filter(function(be){return!X.has(be[0].id)}):[]})},fe=function(ge){return[ce(ge,"start"),ce(ge,"end")].filter(function(X){return X!=null})},ce=function(ge,X){return V(U(ge,X),k.Z.getScene(ge))},U=function(ge,X){var we=X==="start"?0:-1;return(0,S.AK)(y._.getPointAtIndexGlobalCoordinates(ge,we))},ve=function(ge){return k.Z.getScene(ge).getNonDeletedElements().map(function(X){if(!(0,v.Mn)(X,!1))return null;var we=oe(X,"start",ge),be=oe(X,"end",ge);return we||be?[X,we&&be?"both":we?"start":"end",ge]:null}).filter(function(X){return X!=null})},oe=function(ge,X,we){return ge[X==="start"?"startBinding":"endBinding"]==null&&!Z(ge,we,X)&&(0,w.uu)(we,U(ge,X))},re=function(ge,X,we,be){var le=new Set,ye=new Set,ue=be==="duplicatesServeAsOld";X.forEach(function(xe){var Pe=xe.boundElements;if(Pe!=null&&Pe.length>0&&(Pe.forEach(function(Re){ue&&!we.has(Re.id)&&le.add(Re.id)}),ye.add(we.get(xe.id))),(0,v.Mn)(xe)){if(xe.startBinding!=null){var Ne=xe.startBinding.elementId;ue&&!we.has(Ne)&&ye.add(Ne)}if(xe.endBinding!=null){var Me=xe.endBinding.elementId;ue&&!we.has(Me)&&ye.add(Me)}xe.startBinding==null&&xe.endBinding==null||le.add(we.get(xe.id))}}),ge.filter(function(xe){var Pe=xe.id;return le.has(Pe)}).forEach(function(xe){var Pe=xe.startBinding,Ne=xe.endBinding;(0,_.DR)(xe,{startBinding:ae(Pe,we),endBinding:ae(Ne,we)})}),ge.filter(function(xe){var Pe=xe.id;return ye.has(Pe)}).forEach(function(xe){var Pe=xe.boundElements;Pe!=null&&Pe.length>0&&(0,_.DR)(xe,{boundElements:Pe.map(function(Ne){return we.has(Ne.id)?{id:we.get(Ne.id),type:Ne.type}:Ne})})})},ae=function(ge,X){var we;if(ge==null)return null;var be=ge.elementId;return{focus:ge.focus,gap:ge.gap,elementId:(we=X.get(be))!==null&&we!==void 0?we:be}},me=function(ge,X){var we=new Set(X.map(function(le){return le.id})),be=new Set;X.forEach(function(le){var ye;(0,v.f0)(le)?(ye=le.boundElements)===null||ye===void 0||ye.forEach(function(ue){we.has(ue.id)||be.add(ue.id)}):(0,v.Mn)(le)&&(le.startBinding&&be.add(le.startBinding.elementId),le.endBinding&&be.add(le.endBinding.elementId))}),ge.filter(function(le){var ye=le.id;return be.has(ye)}).forEach(function(le){(0,v.f0)(le)?(0,_.DR)(le,{boundElements:se(le.boundElements,we)}):(0,v.Mn)(le)&&(0,_.DR)(le,{startBinding:he(le.startBinding,we),endBinding:he(le.endBinding,we)})})},he=function(ge,X){return ge==null||X.has(ge.elementId)?null:ge},se=function(ge,X){return ge?ge.filter(function(we){return!X.has(we.id)}):null}},8925:function(f,h,c){c.d(h,{CM:function(){return pe},GJ:function(){return $},IX:function(){return Z},KP:function(){return Y},M$:function(){return ee},Pi:function(){return R},UC:function(){return Q},Ut:function(){return W},Y5:function(){return H},os:function(){return F},qf:function(){return j},v2:function(){return z},wC:function(){return E}});var g=c(1930),m=c(2577),b=c(8821),v=c(5169),w=c(6552),_=c(6574),k=c(5317),y=c(1974),S=c(5001),C=c(5710),I=c(6938);function A(q,fe){var ce=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!ce){if(Array.isArray(q)||(ce=function(me,he){if(me){if(typeof me=="string")return T(me,he);var se=Object.prototype.toString.call(me).slice(8,-1);if(se==="Object"&&me.constructor&&(se=me.constructor.name),se==="Map"||se==="Set")return Array.from(me);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return T(me,he)}}(q))||fe&&q&&typeof q.length=="number"){ce&&(q=ce);var U=0,ve=function(){};return{s:ve,n:function(){return U>=q.length?{done:!0}:{done:!1,value:q[U++]}},e:function(me){throw me},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe,re=!0,ae=!1;return{s:function(){ce=ce.call(q)},n:function(){var me=ce.next();return re=me.done,me},e:function(me){ae=!0,oe=me},f:function(){try{re||ce.return==null||ce.return()}finally{if(ae)throw oe}}}}function T(q,fe){(fe==null||fe>q.length)&&(fe=q.length);for(var ce=0,U=new Array(fe);ce<fe;ce++)U[ce]=q[ce];return U}var L=function(){function q(){(0,b.Z)(this,q)}return(0,v.Z)(q,null,[{key:"getBounds",value:function(fe){var ce=q.boundsCache.get(fe);if(ce!=null&&ce.version&&ce.version===fe.version)return ce.bounds;var U=q.calculateBounds(fe);return q.boundsCache.set(fe,{version:fe.version,bounds:U}),U}},{key:"calculateBounds",value:function(fe){var ce,U=j(fe),ve=(0,m.Z)(U,6),oe=ve[0],re=ve[1],ae=ve[2],me=ve[3],he=ve[4],se=ve[5];if((0,y.F9)(fe)){var ge=D(fe.points.map(function(Nt){var Tt=(0,m.Z)(Nt,2),cn=Tt[0],Ot=Tt[1];return(0,w.U1)(cn,Ot,he-fe.x,se-fe.y,fe.angle)})),X=(0,m.Z)(ge,4),we=X[0],be=X[1],le=X[2],ye=X[3];return[we+fe.x,be+fe.y,le+fe.x,ye+fe.y]}if((0,y.bt)(fe))ce=V(fe,he,se);else if(fe.type==="diamond"){var ue=(0,w.U1)(he,re,he,se,fe.angle),xe=(0,m.Z)(ue,2),Pe=xe[0],Ne=xe[1],Me=(0,w.U1)(he,me,he,se,fe.angle),Re=(0,m.Z)(Me,2),We=Re[0],Se=Re[1],Be=(0,w.U1)(oe,se,he,se,fe.angle),_e=(0,m.Z)(Be,2),ze=_e[0],Ve=_e[1],ut=(0,w.U1)(ae,se,he,se,fe.angle),Ie=(0,m.Z)(ut,2),ot=Ie[0],Ye=Ie[1];ce=[Math.min(Pe,We,ze,ot),Math.min(Ne,Se,Ve,Ye),Math.max(Pe,We,ze,ot),Math.max(Ne,Se,Ve,Ye)]}else if(fe.type==="ellipse"){var Ke=(ae-oe)/2,tt=(me-re)/2,pt=Math.cos(fe.angle),St=Math.sin(fe.angle),Kt=Math.hypot(Ke*pt,tt*St),sn=Math.hypot(tt*pt,Ke*St);ce=[he-Kt,se-sn,he+Kt,se+sn]}else{var nn=(0,w.U1)(oe,re,he,se,fe.angle),Cn=(0,m.Z)(nn,2),vn=Cn[0],Fe=Cn[1],et=(0,w.U1)(oe,me,he,se,fe.angle),st=(0,m.Z)(et,2),ht=st[0],_t=st[1],Zt=(0,w.U1)(ae,me,he,se,fe.angle),Yt=(0,m.Z)(Zt,2),bn=Yt[0],Wt=Yt[1],un=(0,w.U1)(ae,re,he,se,fe.angle),jn=(0,m.Z)(un,2),Hn=jn[0],vt=jn[1];ce=[Math.min(vn,ht,bn,Hn),Math.min(Fe,_t,Wt,vt),Math.max(vn,ht,bn,Hn),Math.max(Fe,_t,Wt,vt)]}return ce}}]),q}();L.boundsCache=new WeakMap;var j=function(q){var fe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if((0,y.F9)(q))return B(q);if((0,y.bt)(q))return I._.getElementAbsoluteCoords(q,fe);if((0,y.iB)(q)){var ce=(0,C.tl)(q);if((0,y.Yv)(ce)){var U=I._.getBoundTextElementPosition(ce,q);return[U.x,U.y,U.x+q.width,U.y+q.height,U.x+q.width/2,U.y+q.height/2]}}return[q.x,q.y,q.x+q.width,q.y+q.height,q.x+q.width/2,q.y+q.height/2]},$=function(q){var fe=j(q),ce=(0,m.Z)(fe,6),U=ce[0],ve=ce[1],oe=ce[2],re=ce[3],ae=ce[4],me=ce[5],he=[ae,me];if((0,y.bt)(q)||(0,y.F9)(q)){for(var se=[],ge=0;ge<q.points.length-1;)se.push([(0,w.xj)([q.points[ge][0]+q.x,q.points[ge][1]+q.y],he,q.angle),(0,w.xj)([q.points[ge+1][0]+q.x,q.points[ge+1][1]+q.y],he,q.angle)]),ge++;return se}var X=[[U,ve],[oe,ve],[U,re],[oe,re],[ae,ve],[ae,re],[U,me],[oe,me]].map(function(Re){return(0,w.xj)(Re,he,q.angle)}),we=(0,m.Z)(X,8),be=we[0],le=we[1],ye=we[2],ue=we[3],xe=we[4],Pe=we[5],Ne=we[6],Me=we[7];return q.type==="diamond"?[[xe,Ne],[xe,Me],[Pe,Ne],[Pe,Me]]:q.type==="ellipse"?[[xe,Ne],[xe,Me],[Pe,Ne],[Pe,Me],[xe,Ne],[xe,Me],[Pe,Ne],[Pe,Me]]:[[be,le],[ye,ue],[be,ye],[le,ue],[be,Me],[ye,Me],[le,Ne],[ue,Ne]]},ee=function(q){return[q.x,q.y,q.x+q.width,q.y+q.height,q.x+q.width/2,q.y+q.height/2]},Q=function(q){var fe=Math.floor(q.width/2)+1,ce=q.width,U=Math.floor(q.height/2)+1;return[fe,0,ce,U,fe,q.height,0,U]},pe=function(q){var fe,ce=A(q.sets);try{for(ce.s();!(fe=ce.n()).done;){var U=fe.value;if(U.type==="path")return U.ops}}catch(ve){ce.e(ve)}finally{ce.f()}return q.sets[0].ops},ie=function(q,fe,ce,U,ve){var oe=1-q;return Math.pow(oe,3)*fe+3*Math.pow(oe,2)*q*ce+3*oe*Math.pow(q,2)*U+Math.pow(q,3)*ve},te=function(q,fe,ce,U){var ve=fe-q,oe=ce-fe,re=3*ve-6*oe+3*(U-ce),ae=6*oe-6*ve,me=3*ve,he=ae*ae-4*re*me;if(!(he>=0))return!1;var se=null,ge=null,X=1/0,we=1/0;return re===0?X=we=-me/ae:(X=(-ae+Math.sqrt(he))/(2*re),we=(-ae-Math.sqrt(he))/(2*re)),X>=0&&X<=1&&(se=ie(X,q,fe,ce,U)),we>=0&&we<=1&&(ge=ie(we,q,fe,ce,U)),[se,ge]},Z=function(q,fe){var ce=[0,0],U=q.reduce(function(ve,oe){var re=oe.op,ae=oe.data;if(re==="move")ce=ae;else if(re==="bcurveTo"){var me=[ae[0],ae[1]],he=[ae[2],ae[3]],se=[ae[4],ae[5]],ge=fe?fe.apply(void 0,me):me,X=fe?fe.apply(void 0,he):he,we=fe?fe.apply(void 0,se):se,be=fe?fe.apply(void 0,(0,g.Z)(ce)):ce;ce=se;var le=function(Me,Re,We,Se){var Be=te(Me[0],Re[0],We[0],Se[0]),_e=te(Me[1],Re[1],We[1],Se[1]),ze=Math.min(Me[0],Se[0]),Ve=Math.max(Me[0],Se[0]);if(Be){var ut=Be.filter(function(Ke){return Ke!==null});ze=Math.min.apply(Math,[ze].concat((0,g.Z)(ut))),Ve=Math.max.apply(Math,[Ve].concat((0,g.Z)(ut)))}var Ie=Math.min(Me[1],Se[1]),ot=Math.max(Me[1],Se[1]);if(_e){var Ye=_e.filter(function(Ke){return Ke!==null});Ie=Math.min.apply(Math,[Ie].concat((0,g.Z)(Ye))),ot=Math.max.apply(Math,[ot].concat((0,g.Z)(Ye)))}return[ze,Ie,Ve,ot]}(be,ge,X,we),ye=(0,m.Z)(le,4),ue=ye[0],xe=ye[1],Pe=ye[2],Ne=ye[3];ve.minX=Math.min(ve.minX,ue),ve.minY=Math.min(ve.minY,xe),ve.maxX=Math.max(ve.maxX,Pe),ve.maxY=Math.max(ve.maxY,Ne)}return ve},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[U.minX,U.minY,U.maxX,U.maxY]},D=function(q){var fe,ce=1/0,U=1/0,ve=-1/0,oe=-1/0,re=A(q);try{for(re.s();!(fe=re.n()).done;){var ae=(0,m.Z)(fe.value,2),me=ae[0],he=ae[1];ce=Math.min(ce,me),U=Math.min(U,he),ve=Math.max(ve,me),oe=Math.max(oe,he)}}catch(se){re.e(se)}finally{re.f()}return[ce,U,ve,oe]},B=function(q){var fe=D(q.points),ce=(0,m.Z)(fe,4),U=ce[0],ve=ce[1],oe=ce[2],re=ce[3],ae=U+q.x,me=ve+q.y,he=oe+q.x,se=re+q.y;return[ae,me,he,se,(ae+he)/2,(me+se)/2]},H=function(q,fe,ce,U){var ve=pe(fe[0]);if(ve.length<1)return null;var oe=ce==="start"?1:ve.length-1,re=ve[oe].data,ae=[re[4],re[5]],me=[re[2],re[3]],he=[re[0],re[1]],se=ve[oe-1],ge=[0,0];se.op==="move"?ge=se.data:se.op==="bcurveTo"&&(ge=[se.data[4],se.data[5]]);var X=function(Wt,un){return Math.pow(1-Wt,3)*ae[un]+3*Wt*Math.pow(1-Wt,2)*me[un]+3*Math.pow(Wt,2)*(1-Wt)*he[un]+ge[un]*Math.pow(Wt,3)},we=ce==="start"?ge:ae,be=(0,m.Z)(we,2),le=be[0],ye=be[1],ue=[X(.3,0),X(.3,1)],xe=ue[0],Pe=ue[1],Ne=Math.hypot(le-xe,ye-Pe),Me=(le-xe)/Ne,Re=(ye-Pe)/Ne,We={arrow:30,bar:15,dot:15,triangle:15}[U],Se=0;if(U==="arrow"){var Be=(0,m.Z)(q.points[q.points.length-1],2),_e=Be[0],ze=Be[1],Ve=q.points.length>1?q.points[q.points.length-2]:[0,0],ut=(0,m.Z)(Ve,2),Ie=ut[0],ot=ut[1];Se=Math.hypot(_e-Ie,ze-ot)}else for(var Ye=0;Ye<q.points.length;Ye++){var Ke=q.points[Ye-1]||[0,0],tt=(0,m.Z)(Ke,2),pt=tt[0],St=tt[1],Kt=(0,m.Z)(q.points[Ye],2),sn=Kt[0],nn=Kt[1];Se+=Math.hypot(sn-pt,nn-St)}var Cn=Math.min(We,Se/2),vn=le-Me*Cn,Fe=ye-Re*Cn;if(U==="dot")return[le,ye,Math.hypot(Fe-ye,vn-le)+q.strokeWidth];var et={arrow:20,bar:90,triangle:25}[U],st=(0,w.U1)(vn,Fe,le,ye,-et*Math.PI/180),ht=(0,m.Z)(st,2),_t=ht[0],Zt=ht[1],Yt=(0,w.U1)(vn,Fe,le,ye,et*Math.PI/180),bn=(0,m.Z)(Yt,2);return[le,ye,_t,Zt,bn[0],bn[1]]},V=function(q,fe,ce){var U;if(q.points.length<2){var ve=(0,m.Z)(q.points[0],2),oe=ve[0],re=ve[1],ae=(0,w.U1)(q.x+oe,q.y+re,fe,ce,q.angle),me=(0,m.Z)(ae,2),he=me[0],se=me[1],ge=[he,se,he,se],X=(0,C.WJ)(q);if(X){var we=I._.getMinMaxXYWithBoundText(q,[he,se,he,se],X);ge=[we[0],we[1],we[2],we[3]]}return ge}var be=(U=(0,k.R2)(q))===null||U===void 0?void 0:U[0],le=be??function(Me){var Re=_.Z.generator(),We=(0,k.i)(Me);return Re[Me.roundness?"curve":We.fill?"polygon":"linearPath"](Me.points,We)}(q),ye=pe(le),ue=Z(ye,function(Me,Re){return(0,w.U1)(q.x+Me,q.y+Re,fe,ce,q.angle)}),xe=[ue[0],ue[1],ue[2],ue[3]],Pe=(0,C.WJ)(q);if(Pe){var Ne=I._.getMinMaxXYWithBoundText(q,xe,Pe);xe=[Ne[0],Ne[1],Ne[2],Ne[3]]}return xe},R=function(q){return L.getBounds(q)},Y=function(q){if(!q.length)return[0,0,0,0];var fe=1/0,ce=-1/0,U=1/0,ve=-1/0;return q.forEach(function(oe){var re=R(oe),ae=(0,m.Z)(re,4),me=ae[0],he=ae[1],se=ae[2],ge=ae[3];fe=Math.min(fe,me),U=Math.min(U,he),ce=Math.max(ce,se),ve=Math.max(ve,ge)}),[fe,U,ce,ve]},E=function(q,fe,ce,U){if(!(0,y.bt)(q)&&!(0,y.F9)(q))return[q.x,q.y,q.x+fe,q.y+ce];var ve,oe=(0,S.z)(0,fe,(0,S.z)(1,ce,q.points,U),U);if((0,y.F9)(q))ve=D(oe);else{var re=_.Z.generator(),ae=q.roundness?re.curve(oe,(0,k.i)(q)):re.linearPath(oe,(0,k.i)(q)),me=pe(ae);ve=Z(me)}var he=ve,se=(0,m.Z)(he,4),ge=se[0],X=se[1],we=se[2],be=se[3];return[ge+q.x,X+q.y,we+q.x,be+q.y]},W=function(q,fe){var ce=_.Z.generator(),U=q.roundness==null?ce.linearPath(fe,(0,k.i)(q)):ce.curve(fe,(0,k.i)(q)),ve=pe(U),oe=Z(ve),re=(0,m.Z)(oe,4),ae=re[0],me=re[1],he=re[2],se=re[3];return[ae+q.x,me+q.y,he+q.x,se+q.y]},F=function(q,fe){if(!q.length)return[0,0,0,0];var ce=1/0,U=q[0];return q.forEach(function(ve){var oe=R(ve),re=(0,m.Z)(oe,4),ae=re[0],me=re[1],he=re[2],se=re[3],ge=(0,w.LW)((ae+he)/2,(me+se)/2,fe.x,fe.y);ge<ce&&(ce=ge,U=ve)}),R(U)},z=function(q){var fe=Y(q),ce=(0,m.Z)(fe,4),U=ce[0],ve=ce[1],oe=ce[2],re=ce[3];return{minX:U,minY:ve,maxX:oe,maxY:re,width:oe-U,height:re-ve,midX:(U+oe)/2,midY:(ve+re)/2}}},2325:function(f,h,c){c.d(h,{uu:function(){return se},T_:function(){return ut},j_:function(){return Ie},oT:function(){return we},wX:function(){return oe},MZ:function(){return ot},wB:function(){return re},Qu:function(){return ae},pX:function(){return he},fb:function(){return ge}});var g=c(2577),m=function(Fe,et){return[0,0,0,0,et,Fe,1,0]},b=function(Fe,et){return[0,0,0,0,et,Fe,0,0]},v=function(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,st=[0,0,0,0,0,0,0,0];if(et<0||et>7)throw new Error("Expected `index` between 0 and 7, got `".concat(et,"`"));return Fe!==0&&(st[et]=Fe),st},w=function(Fe){return[Fe[0],Fe[1],Fe[2],Fe[3],-Fe[4],-Fe[5],-Fe[6],-Fe[7]]},_=function(Fe,et){return L(et)?[Fe[0]-et,Fe[1],Fe[2],Fe[3],Fe[4],Fe[5],Fe[6],Fe[7]]:[Fe[0]-et[0],Fe[1]-et[1],Fe[2]-et[2],Fe[3]-et[3],Fe[4]-et[4],Fe[5]-et[5],Fe[6]-et[6],Fe[7]-et[7]]},k=function(Fe,et){return L(et)?[Fe[0]*et,Fe[1]*et,Fe[2]*et,Fe[3]*et,Fe[4]*et,Fe[5]*et,Fe[6]*et,Fe[7]*et]:[y(Fe,et),et[1]*Fe[0]+et[0]*Fe[1]-et[4]*Fe[2]+et[5]*Fe[3]+et[2]*Fe[4]-et[3]*Fe[5]-et[7]*Fe[6]-et[6]*Fe[7],et[2]*Fe[0]+et[0]*Fe[2]-et[6]*Fe[3]+et[3]*Fe[6],et[3]*Fe[0]+et[6]*Fe[2]+et[0]*Fe[3]-et[2]*Fe[6],et[4]*Fe[0]+et[2]*Fe[1]-et[1]*Fe[2]+et[7]*Fe[3]+et[0]*Fe[4]+et[6]*Fe[5]-et[5]*Fe[6]+et[3]*Fe[7],et[5]*Fe[0]-et[3]*Fe[1]+et[7]*Fe[2]+et[1]*Fe[3]-et[6]*Fe[4]+et[0]*Fe[5]+et[4]*Fe[6]+et[2]*Fe[7],et[6]*Fe[0]+et[3]*Fe[2]-et[2]*Fe[3]+et[0]*Fe[6],et[7]*Fe[0]+et[6]*Fe[1]+et[5]*Fe[2]+et[4]*Fe[3]+et[3]*Fe[4]+et[2]*Fe[5]+et[1]*Fe[6]+et[0]*Fe[7]]},y=function(Fe,et){return et[0]*Fe[0]+et[2]*Fe[2]+et[3]*Fe[3]-et[6]*Fe[6]},S=function(Fe,et){return[C(Fe,et),Fe[1]*et[7]+Fe[4]*et[5]-Fe[5]*et[4]+Fe[7]*et[1],Fe[2]*et[7]-Fe[4]*et[6]+Fe[6]*et[4]+Fe[7]*et[2],Fe[3]*et[7]+Fe[5]*et[6]-Fe[6]*et[5]+Fe[7]*et[3],Fe[4]*et[7]+Fe[7]*et[4],Fe[5]*et[7]+Fe[7]*et[5],Fe[6]*et[7]+Fe[7]*et[6],Fe[7]*et[7]]},C=function(Fe,et){return Fe[0]*et[7]+Fe[1]*et[6]+Fe[2]*et[5]+Fe[3]*et[4]+Fe[4]*et[3]+Fe[5]*et[2]+Fe[6]*et[1]+Fe[7]*et[0]},I=function(Fe){return Math.sqrt(Math.abs(Fe[0]*Fe[0]-Fe[2]*Fe[2]-Fe[3]*Fe[3]+Fe[6]*Fe[6]))},A=function(Fe){var et=I(Fe);if(et===0||et===1)return Fe;var st=Fe[6]<0?-1:1;return k(Fe,st/et)},T=function(Fe){var et=function(st){return Math.sqrt(Math.abs(st[7]*st[7]-st[5]*st[5]-st[4]*st[4]+st[1]*st[1]))}(Fe);return et===0||et===1?Fe:k(Fe,1/et)},L=function(Fe){return typeof Fe=="number"},j=(v(1,1),v(1,2),v(1,3),v(1,4),v(1,5),v(1,6),v(1,7),function(Fe,et,st){return A([0,st,Fe,et,0,0,0,0])}),$=function(Fe,et){return A(S(et,Fe))},ee=function(Fe,et){return st=Fe,[(ht=et)[0]*st[0]+ht[2]*st[2]+ht[3]*st[3]-ht[6]*st[6],ht[1]*st[0]+ht[0]*st[1]-ht[4]*st[2]+ht[5]*st[3]+ht[2]*st[4]-ht[3]*st[5]-ht[7]*st[6]-ht[6]*st[7],ht[2]*st[0]+ht[0]*st[2]-ht[6]*st[3]+ht[3]*st[6],ht[3]*st[0]+ht[6]*st[2]+ht[0]*st[3]-ht[2]*st[6],ht[4]*st[0]+ht[7]*st[3]+ht[0]*st[4]+ht[3]*st[7],ht[5]*st[0]+ht[7]*st[2]+ht[0]*st[5]+ht[2]*st[7],ht[6]*st[0]+ht[0]*st[6],ht[7]*st[0]+ht[0]*st[7]];var st,ht},Q=function(Fe){var et=(0,g.Z)(Fe,2),st=et[0];return[0,0,0,0,et[1],st,1,0]},pe=function(Fe){return[Fe[5],Fe[4]]},ie=function(Fe){return[0,0,0,0,Math.abs(Fe[4]),Math.abs(Fe[5]),1,0]},te=function(Fe,et){return A((st=Fe,[(ht=et)[0]*st[0],ht[1]*st[0]+ht[0]*st[1],ht[2]*st[0]+ht[0]*st[2],ht[3]*st[0]+ht[0]*st[3],ht[4]*st[0]+ht[2]*st[1]-ht[1]*st[2]+ht[0]*st[4],ht[5]*st[0]-ht[3]*st[1]+ht[1]*st[3]+ht[0]*st[5],ht[6]*st[0]+ht[3]*st[2]-ht[2]*st[3]+ht[0]*st[6],ht[7]*st[0]+ht[6]*st[1]+ht[5]*st[2]+ht[4]*st[3]+ht[3]*st[4]+ht[2]*st[5]+ht[1]*st[6]]));var st,ht},Z=function(Fe,et){return I(S(Fe,et))},D=function(Fe,et){return C(Fe,et)},B=function(Fe){return[0,0,0,0,Fe[4],Fe[5],0,0]},H=function(Fe,et){return st=k(Fe,Math.sin(et/2)),ht=Math.cos(et/2),L(ht)?[st[0]+ht,st[1],st[2],st[3],st[4],st[5],st[6],st[7]]:[st[0]+ht[0],st[1]+ht[1],st[2]+ht[2],st[3]+ht[3],st[4]+ht[4],st[5]+ht[5],st[6]+ht[6],st[7]+ht[7]];var st,ht},V=function(Fe,et){return A(k(k(Fe,et),w(Fe)))},R=c(6552),Y=c(3190),E=c(8925),W=c(5317),F=c(1974),z=c(1047),q=c(6340),fe=c(267),ce=c(5710);function U(Fe,et){var st=typeof Symbol<"u"&&Fe[Symbol.iterator]||Fe["@@iterator"];if(!st){if(Array.isArray(Fe)||(st=function(Wt,un){if(Wt){if(typeof Wt=="string")return ve(Wt,un);var jn=Object.prototype.toString.call(Wt).slice(8,-1);if(jn==="Object"&&Wt.constructor&&(jn=Wt.constructor.name),jn==="Map"||jn==="Set")return Array.from(Wt);if(jn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(jn))return ve(Wt,un)}}(Fe))||et&&Fe&&typeof Fe.length=="number"){st&&(Fe=st);var ht=0,_t=function(){};return{s:_t,n:function(){return ht>=Fe.length?{done:!0}:{done:!1,value:Fe[ht++]}},e:function(Wt){throw Wt},f:_t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Zt,Yt=!0,bn=!1;return{s:function(){st=st.call(Fe)},n:function(){var Wt=st.next();return Yt=Wt.done,Wt},e:function(Wt){bn=!0,Zt=Wt},f:function(){try{Yt||st.return==null||st.return()}finally{if(bn)throw Zt}}}}function ve(Fe,et){(et==null||et>Fe.length)&&(et=Fe.length);for(var st=0,ht=new Array(et);st<et;st++)ht[st]=Fe[st];return ht}var oe=function Fe(et,st,ht,_t,Zt){var Yt=10/st.zoom.value,bn=[_t,Zt];if(me(st,et)&&(0,fe.oY)([et],st))return he(et,bn,Yt,ht);var Wt=(0,ce.WJ)(et);return Wt&&Fe(Wt,st,ht,_t,Zt)?!0:ae(et,st,ht,bn)},re=function(Fe,et,st,ht,_t){var Zt=10/et.zoom.value,Yt=(0,ce.WJ)(Fe);return(!Yt||!oe(Yt,et,st,ht,_t))&&!ae(Fe,et,st,[ht,_t])&&he(Fe,[ht,_t],Zt,st)},ae=function(Fe,et,st,ht){var _t=10/et.zoom.value,Zt=(0,z.iB)(Fe)?be:function(Yt){if(Yt.type==="arrow")return!1;if(Yt.type==="freedraw")return!0;var bn=!(0,q.Qm)(Yt.backgroundColor)||(0,F.Xo)(Yt);return Yt.type==="line"?bn&&(0,R.g6)(Yt.points):bn||(0,F.pC)(Yt)}(Fe)?le:ye;return X({element:Fe,point:ht,threshold:_t,check:Zt,frameNameBoundsCache:st})},me=function(Fe,et){return Fe.selectedElementIds[et.id]},he=function(Fe,et,st,ht){var _t=(0,g.Z)(et,2),Zt=_t[0],Yt=_t[1];if(Fe.type==="frame")return X({element:Fe,point:[Zt,Yt],threshold:st,check:le,frameNameBoundsCache:ht});var bn=(0,E.qf)(Fe),Wt=(0,g.Z)(bn,4),un=Wt[0],jn=Wt[1],Hn=Wt[2],vt=Wt[3],Nt=(un+Hn)/2,Tt=(jn+vt)/2,cn=(0,R.U1)(Zt,Yt,Nt,Tt,-Fe.angle),Ot=(0,g.Z)(cn,2),Ln=Ot[0],Wn=Ot[1];return Ln>un-st&&Ln<Hn+st&&Wn>jn-st&&Wn<vt+st},se=function(Fe,et){var st=et.x,ht=et.y,_t=ge(Fe,Fe.width,Fe.height);return X({element:Fe,point:[st,ht],threshold:_t,check:ue,frameNameBoundsCache:null})},ge=function(Fe,et,st){var ht=(Fe.type==="diamond"?1/Math.sqrt(2):1)*Math.min(et,st);return Math.max(16,Math.min(.25*ht,32))},X=function(Fe){switch(Fe.element.type){case"rectangle":case"image":case"text":case"diamond":case"ellipse":var et=we(Fe.element,Fe.point);return Fe.check(et,Fe.threshold);case"freedraw":return!!Fe.check(xe(Fe.element,Fe.point),Fe.threshold)&&We(Fe.element,Fe.point,Fe.threshold);case"arrow":case"line":return Se(Fe);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1;case"frame":var st;if(Fe.check(we(Fe.element,Fe.point),Fe.threshold))return!0;var ht=(st=Fe.frameNameBoundsCache)===null||st===void 0?void 0:st.get(Fe.element);return!!ht&&Fe.check(Pe(ht,Fe.point),Fe.threshold)}},we=function(Fe,et){switch(Fe.type){case"rectangle":case"image":case"text":case"frame":return xe(Fe,et);case"diamond":return Ne(Fe,et);case"ellipse":return Me(Fe,et)}},be=function(Fe,et){return Fe<0},le=function(Fe,et){return Fe<et},ye=function(Fe,et){return Math.abs(Fe)<et},ue=function(Fe,et){return 0<=Fe&&Fe<et},xe=function(Fe,et){var st=Be(Fe,et),ht=(0,g.Z)(st,4),_t=ht[1],Zt=ht[2],Yt=ht[3];return Math.max(D(_t,j(0,1,-Yt)),D(_t,j(1,0,-Zt)))},Pe=function(Fe,et){var st=_e(et,Fe),ht=(0,g.Z)(st,4),_t=ht[1],Zt=ht[2],Yt=ht[3];return Math.max(D(_t,j(0,1,-Yt)),D(_t,j(1,0,-Zt)))},Ne=function(Fe,et){var st=Be(Fe,et),ht=(0,g.Z)(st,4),_t=ht[1],Zt=ht[2],Yt=ht[3],bn=j(Yt,Zt,-Yt*Zt);return D(_t,bn)},Me=function(Fe,et){var st,ht=Re(Fe,et),_t=(0,g.Z)(ht,2),Zt=_t[0],Yt=_t[1];return st=Yt,-Math.sign(st[1])*D(Zt,Yt)},Re=function(Fe,et){var st=Be(Fe,et),ht=(0,g.Z)(st,4),_t=ht[1],Zt=ht[2],Yt=ht[3],bn=pe(_t),Wt=(0,g.Z)(bn,2),un=Wt[0],jn=Wt[1],Hn=.707,vt=.707,Nt=Zt,Tt=Yt;[0,1,2,3].forEach(function(Ln){var Wn=Nt*Hn,Rn=Tt*vt,zn=(Nt*Nt-Tt*Tt)*Math.pow(Hn,3)/Nt,Et=(Tt*Tt-Nt*Nt)*Math.pow(vt,3)/Tt,Dt=Wn-zn,Gt=Rn-Et,Jt=un-zn,$n=jn-Et,Kn=Math.hypot(Gt,Dt),wr=Math.hypot($n,Jt);Hn=Math.min(1,Math.max(0,(Jt*Kn/wr+zn)/Nt)),vt=Math.min(1,Math.max(0,($n*Kn/wr+Et)/Tt));var dr=Math.hypot(vt,Hn);Hn/=dr,vt/=dr});var cn,Ot=m(Nt*Hn,Tt*vt);return[_t,ee($(_t,cn=Ot),cn)]},We=function(Fe,et,st){var ht,_t;if(Fe.angle===0)ht=et[0]-Fe.x,_t=et[1]-Fe.y;else{var Zt=(0,E.qf)(Fe),Yt=(0,g.Z)(Zt,4),bn=Yt[0],Wt=Yt[1],un=Yt[2],jn=Yt[3],Hn=(0,R.xj)(et,[bn+(un-bn)/2,Wt+(jn-Wt)/2],-Fe.angle);ht=Hn[0]-Fe.x,_t=Hn[1]-Fe.y}var vt,Nt=(0,g.Z)(Fe.points,2),Tt=Nt[0],cn=Nt[1];if((0,R.LW)(Tt[0],Tt[1],ht,_t)<st||(0,R.LW)(cn[0],cn[1],ht,_t)<st)return!0;for(var Ot=0;Ot<Fe.points.length;Ot++){var Ln=[cn[0]-Tt[0],cn[1]-Tt[1]],Wn=Math.hypot(Ln[1],Ln[0]),Rn=[Ln[0]/Wn,Ln[1]/Wn],zn=[ht-Tt[0],_t-Tt[1]],Et=(zn[0]*Rn[0]+zn[1]*Rn[1])/Math.hypot(Rn[1],Rn[0]);vt=[Tt[0]+Rn[0]*Et,Tt[1]+Rn[1]*Et];var Dt=(0,R.LW)(vt[0],vt[1],Tt[0],Tt[1]),Gt=(0,R.LW)(vt[0],vt[1],cn[0],cn[1]);if(vt=Gt<Dt&&Dt>Wn?cn:Dt<Gt&&Gt>Wn?Tt:vt,Math.hypot(_t-vt[1],ht-vt[0])<st)return!0;Tt=cn,cn=Fe.points[Ot+1]}var Jt=(0,W.R2)(Fe);return!(!Jt||!Jt.sets.length)&&vn(Jt,ht,_t,st)},Se=function(Fe){var et=Fe.element,st=Fe.threshold;if(!(0,W.R2)(et))return!1;var ht=Be(Fe.element,Fe.point),_t=(0,g.Z)(ht,4),Zt=_t[0],Yt=_t[1],bn=_t[2],Wt=_t[3],un=j(0,1,-Wt),jn=j(1,0,-bn);if(!le(D(Yt,un),st)||!le(D(Yt,jn),st))return!1;var Hn=pe(Zt),vt=(0,g.Z)(Hn,2),Nt=vt[0],Tt=vt[1],cn=(0,W.R2)(et);return cn?Fe.check===le&&cn.some(function(Ot){return Cn(Ot,Nt,Tt,et.roundness?"round":"sharp")})?!0:cn.some(function(Ot){return vn(Ot,Nt,Tt,st)}):!1},Be=function(Fe,et){var st=Q(et),ht=(0,E.qf)(Fe),_t=(0,g.Z)(ht,4),Zt=_t[0],Yt=_t[1],bn=_t[2],Wt=_t[3],un=Ve(Zt,Yt,bn,Wt),jn=H(un,Fe.angle),Hn=V(jn,st),vt=_(Hn,B(un)),Nt=ie(vt),Tt=b(Fe.x,Fe.y);return[_(Hn,Tt),Nt,(bn-Zt)/2,(Wt-Yt)/2]},_e=function(Fe,et){var st=Q(Fe),ht=(0,E.M$)(et),_t=(0,g.Z)(ht,4),Zt=_t[0],Yt=_t[1],bn=_t[2],Wt=_t[3],un=Ve(Zt,Yt,bn,Wt),jn=H(un,et.angle),Hn=V(jn,st),vt=_(Hn,B(un)),Nt=ie(vt),Tt=b(et.x,et.y);return[_(Hn,Tt),Nt,(bn-Zt)/2,(Wt-Yt)/2]},ze=function(Fe){var et=(0,E.qf)(Fe),st=(0,g.Z)(et,4),ht=st[0],_t=st[1],Zt=st[2],Yt=st[3],bn=Ve(ht,_t,Zt,Yt),Wt=H(bn,Fe.angle),un=w(function(jn){return[1,0,0,0,-.5*jn[5],.5*jn[4],0,0]}(B(bn)));return k(un,Wt)},Ve=function(Fe,et,st,ht){return m((Fe+st)/2,(et+ht)/2)},ut=function(Fe,et,st){var ht=ze(Fe),_t=V(ht,Q(et)),Zt=V(ht,Q(st)),Yt=$(_t,Zt),bn=Fe.height/Fe.width,Wt=Fe.width/2,un=Fe.height/2,jn=Yt[2],Hn=Yt[3],vt=Yt[1],Nt=Math.abs(Hn),Tt=Math.abs(jn);switch(Fe.type){case"rectangle":case"image":case"text":case"frame":return vt/(Wt*(Tt+bn*Nt));case"diamond":return Nt<Tt?vt/(Tt*Wt):vt/(Nt*un);case"ellipse":return vt/(Wt*Math.sqrt(Math.pow(jn,2)+Math.pow(bn,2)*Math.pow(Hn,2)))}},Ie=function(Fe,et,st){if(et===0){var ht=(0,E.qf)(Fe),_t=(0,g.Z)(ht,4),Zt=_t[0],Yt=_t[1],bn=_t[2],Wt=_t[3],un=Ve(Zt,Yt,bn,Wt);return pe(un)}var jn,Hn=ze(Fe),vt=V(Hn,Q(st)),Nt=w(Hn);switch(Fe.type){case"rectangle":case"image":case"text":case"diamond":case"frame":jn=nn(Fe,et,vt);break;case"ellipse":jn=sn(Fe,et,vt)}return pe(V(Nt,jn))},ot=function(Fe,et,st){var ht=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,_t=ze(Fe),Zt=V(_t,Q(et)),Yt=V(_t,Q(st)),bn=$(Zt,Yt),Wt=w(_t),un=Ye(Fe,bn,Zt,ht);return un.map(function(jn){return pe(V(Wt,jn))})},Ye=function(Fe,et,st){var ht,_t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;switch(Fe.type){case"rectangle":case"image":case"text":case"diamond":case"frame":var Zt=Ke(Fe);ht=Zt.flatMap(function(bn,Wt){var un=[bn,Zt[(Wt+1)%4]];return tt(et,pt(un,_t))}).concat(Zt.flatMap(function(bn){return Kt(bn,_t,et)}));break;case"ellipse":ht=St(Fe,_t,et)}if(ht.length<2)return[];var Yt=ht.sort(function(bn,Wt){return Z(bn,st)-Z(Wt,st)});return[Yt[0],Yt[Yt.length-1]]},Ke=function(Fe){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,st=et*Fe.width/2,ht=et*Fe.height/2;switch(Fe.type){case"rectangle":case"image":case"text":case"frame":return[m(st,ht),m(st,-ht),m(-st,-ht),m(-st,ht)];case"diamond":return[m(0,ht),m(st,0),m(0,-ht),m(-st,0)]}},tt=function(Fe,et){var st=(0,g.Z)(et,2),ht=st[0],_t=st[1];return D(ht,Fe)*D(_t,Fe)>=0?[]:[te(Fe,$(ht,_t))]},pt=function(Fe,et){var st=(0,g.Z)(Fe,2),ht=st[0],_t=st[1],Zt=function(Yt,bn){var Wt=.5*bn;return[1,0,0,0,Wt*Yt[4],Wt*Yt[5],0,0]}(function(Yt,bn){return T([0,0,0,0,bn[4]-Yt[4],bn[5]-Yt[5],0,0])}(ht,_t),et);return[V(Zt,ht),V(Zt,_t)]},St=function(Fe,et,st){var ht=Fe.width/2+et,_t=Fe.height/2+et,Zt=st[2],Yt=st[3],bn=st[1],Wt=ht*ht*Zt*Zt+_t*_t*Yt*Yt,un=Wt-bn*bn;if(Wt===0||un<=0)return[];var jn=Math.sqrt(un),Hn=-ht*ht*Zt*bn,vt=-_t*_t*Yt*bn;return[m((Hn+ht*_t*Yt*jn)/Wt,(vt-ht*_t*Zt*jn)/Wt),m((Hn-ht*_t*Yt*jn)/Wt,(vt+ht*_t*Zt*jn)/Wt)]},Kt=function(Fe,et,st){if(et===0)return D(st,Fe)===0?[Fe]:[];var ht=st[2],_t=st[3],Zt=st[1],Yt=pe(Fe),bn=(0,g.Z)(Yt,2),Wt=bn[0],un=bn[1],jn=ht*ht+_t*_t,Hn=et*et*jn-Math.pow(ht*Wt+_t*un+Zt,2);if(jn===0||Hn<=0)return[];var vt=Math.sqrt(Hn),Nt=Wt*_t*_t-un*ht*_t-ht*Zt,Tt=un*ht*ht-Wt*ht*_t-_t*Zt;return[m((Nt+_t*vt)/jn,(Tt-ht*vt)/jn),m((Nt-_t*vt)/jn,(Tt+ht*vt)/jn)]},sn=function(Fe,et,st){var ht=Math.abs(et),_t=Fe.width*ht/2,Zt=Fe.height*ht/2,Yt=Math.sign(et),bn=pe(st),Wt=(0,g.Z)(bn,2),un=Wt[0],jn=Wt[1],Hn=jn===0?1e-4:jn,vt=Math.pow(un,2)*Math.pow(Zt,2)+Math.pow(Hn,2)*Math.pow(_t,2),Nt=(-un*Math.pow(Zt,2)+Yt*Hn*Math.sqrt(Math.max(0,vt-Math.pow(_t,2)*Math.pow(Zt,2))))/vt,Tt=(-Nt*un-1)/Hn;Tt===0&&(Tt=.01*(Object.is(Tt,-0)?-1:1));var cn=-Math.pow(_t,2)*Nt/(Math.pow(Tt,2)*Math.pow(Zt,2)+Math.pow(Nt,2)*Math.pow(_t,2));return m(cn,(-Nt*cn-1)/Tt)},nn=function(Fe,et,st){var ht=Math.abs(et),_t=Math.sign(et),Zt=Ke(Fe,ht),Yt=0,bn=null;return Zt.forEach(function(Wt){var un=_t*$(st,Wt)[1];un>Yt&&(Yt=un,bn=Wt)}),bn},Cn=function(Fe,et,st,ht){var _t,Zt=[],Yt=!1,bn=U((0,E.CM)(Fe));try{for(bn.s();!(_t=bn.n()).done;){var Wt=_t.value;Wt.op==="move"?(Yt=!Yt)&&Zt.push([Wt.data[0],Wt.data[1]]):Wt.op==="bcurveTo"?Yt&&(Zt.push([Wt.data[0],Wt.data[1]]),Zt.push([Wt.data[2],Wt.data[3]]),Zt.push([Wt.data[4],Wt.data[5]])):Wt.op==="lineTo"&&Yt&&Zt.push([Wt.data[0],Wt.data[1]])}}catch(jn){bn.e(jn)}finally{bn.f()}if(Zt.length>=4){if(ht==="sharp")return(0,R.c9)(Zt,et,st);var un=(0,Y.s)(Zt,10,5);return(0,R.c9)(un,et,st)}return!1},vn=function(Fe,et,st,ht){var _t=(0,E.CM)(Fe),Zt=[0,0];return _t.some(function(Yt,bn){var Wt=Yt.op,un=Yt.data;if(Wt==="move")Zt=un;else{if(Wt==="bcurveTo"){var jn=[un[0],un[1]],Hn=[un[2],un[3]],vt=[un[4],un[5]],Nt=Zt;Zt=vt;var Tt=function(cn,Ot,Ln,Wn,Rn,zn){for(var Et=(0,g.Z)(Rn,2),Dt=Et[0],Gt=Et[1],Jt=function(dr,yn){return Math.pow(1-dr,3)*Wn[yn]+3*dr*Math.pow(1-dr,2)*Ln[yn]+3*Math.pow(dr,2)*(1-dr)*Ot[yn]+cn[yn]*Math.pow(dr,3)},$n=0;$n<=1;){var Kn=Jt($n,0),wr=Jt($n,1);if(Math.sqrt(Math.pow(Kn-Dt,2)+Math.pow(wr-Gt,2))<zn)return!0;$n+=.01}return!1}(Nt,jn,Hn,vt,[et,st],ht);return Tt}if(Wt==="lineTo")return Cn(Fe,et,st,"sharp");Wt==="qcurveTo"&&console.warn("qcurveTo is not implemented yet")}return!1})}},5637:function(f,h,c){c.d(h,{PK:function(){return I},Xx:function(){return A},bp:function(){return L},oA:function(){return T}});var g=c(2577),m=c(7169),b=c(8950),v=c(2975),w=c.n(v),_=c(2335),k=c(8211),y=c(1974);function S(j,$){var ee=Object.keys(j);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(j);$&&(Q=Q.filter(function(pe){return Object.getOwnPropertyDescriptor(j,pe).enumerable})),ee.push.apply(ee,Q)}return ee}function C(j){for(var $=1;$<arguments.length;$++){var ee=arguments[$]!=null?arguments[$]:{};$%2?S(Object(ee),!0).forEach(function(Q){(0,m.Z)(j,Q,ee[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(ee)):S(Object(ee)).forEach(function(Q){Object.defineProperty(j,Q,Object.getOwnPropertyDescriptor(ee,Q))})}return j}var I=function(j){return new Promise(function($,ee){var Q=new Image;Q.onload=function(){$(Q)},Q.onerror=function(pe){ee(pe)},Q.src=j})},A=function(){var j=(0,b.Z)(w().mark(function $(ee){var Q,pe,ie,te,Z;return w().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return Q=ee.fileIds,pe=ee.files,ie=ee.imageCache,te=new Map,Z=new Map,D.next=5,Promise.all(Q.reduce(function(B,H){var V=pe[H];return V&&!te.has(H)?(te.set(H,!0),B.concat((0,b.Z)(w().mark(function R(){var Y,E,W;return w().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(F.prev=0,V.mimeType!==_.LO.binary){F.next=3;break}throw new Error("Only images can be added to ImageCache");case 3:return Y=I(V.dataURL),E={image:Y,mimeType:V.mimeType},ie.set(H,E),F.next=8,Y;case 8:W=F.sent,ie.set(H,C(C({},E),{},{image:W})),F.next=15;break;case 12:F.prev=12,F.t0=F.catch(0),Z.set(H,!0);case 15:case"end":return F.stop()}},R,null,[[0,12]])}))())):B},[]));case 5:return D.abrupt("return",{imageCache:ie,updatedFiles:te,erroredFiles:Z});case 6:case"end":return D.stop()}},$)}));return function($){return j.apply(this,arguments)}}(),T=function(j){return j.filter(function($){return(0,y.wi)($)})},L=function(){var j=(0,b.Z)(w().mark(function $(ee){var Q,pe,ie,te,Z,D,B;return w().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Q=new DOMParser().parseFromString(ee,_.LO.svg),pe=Q.querySelector("svg"),!Q.querySelector("parsererror")&&((V=pe)==null?void 0:V.nodeName.toLowerCase())==="svg"){H.next=7;break}throw new Error((0,k.t)("errors.invalidSVGString"));case 7:return pe.hasAttribute("xmlns")||pe.setAttribute("xmlns",_.hR),pe.hasAttribute("width")&&pe.hasAttribute("height")||(ie=pe.getAttribute("viewBox"),te=pe.getAttribute("width")||"50",Z=pe.getAttribute("height")||"50",ie&&(D=ie.match(/\d+ +\d+ +(\d+) +(\d+)/))&&(B=(0,g.Z)(D,3),te=B[1],Z=B[2]),pe.setAttribute("width",te),pe.setAttribute("height",Z)),H.abrupt("return",pe.outerHTML);case 10:case"end":return H.stop()}var V},$)}));return function($){return j.apply(this,arguments)}}()},1047:function(f,h,c){c.d(h,{ox:function(){return I.ox},BQ:function(){return ae},_M:function(){return me},EJ:function(){return Y},o8:function(){return H},Sy:function(){return S.Sy},os:function(){return C.os},KP:function(){return C.KP},Un:function(){return ie},$V:function(){return R},qf:function(){return C.qf},Pi:function(){return C.Pi},jt:function(){return ee},o4:function(){return k},Lm:function(){return U},Xf:function(){return ve},Qp:function(){return y},T:function(){return te.T},xx:function(){return te.xx},Uo:function(){return fe},n2:function(){return Q},PC:function(){return I.PC},kK:function(){return I.kK},n_:function(){return ce},wX:function(){return A.wX},r2:function(){return b.r2},He:function(){return b.He},wB:function(){return A.wB},QD:function(){return w},qP:function(){return oe},iB:function(){return b.iB},Up:function(){return S.Up},vw:function(){return S.vw},y8:function(){return S.y8},VL:function(){return S.VL},oN:function(){return D.oN},JZ:function(){return S.JZ},RT:function(){return F},b_:function(){return E.b_},vY:function(){return te.vY},N_:function(){return S.N_}});var g=c(7169),m=c(1935),b=c(1974),v=c(2335),w=function(he){return(0,b.bt)(he)||(0,b.F9)(he)?he.points.length<2:he.width===0&&he.height===0},_=function(he,se,ge){var X=Math.abs(se),we=Math.abs(ge);if(he==="line"||he==="arrow"||he==="freedraw"){var be=Math.round(Math.atan(we/X)/v.ay)*v.ay;be===0?ge=0:be===Math.PI/2?se=0:ge=X*Math.tan(be)*Math.sign(ge)||ge}else he!=="selection"&&(ge=X*Math.sign(ge));return{width:se,height:ge}},k=function(he,se,ge,X){var we=ge-he,be=X-se,le=Math.round(Math.atan(be/we)/v.ay)*v.ay;if(le===0)be=0;else if(le===Math.PI/2)we=0;else{var ye=Math.tan(le),ue=se-ye*he,xe=-1/ye,Pe=X-xe*ge;we=(-1*Pe- -1*ue)/(-1*ye- -1*xe)-he,be=(ue*xe-Pe*ye)/(-1*ye- -1*xe)-se}return{width:we,height:be}},y=function(he){var se={width:he.width,height:he.height,x:he.x,y:he.y};if(he.width<0){var ge=Math.abs(he.width);se.width=ge,se.x=he.x-ge}if(he.height<0){var X=Math.abs(he.height);se.height=X,se.y=he.y-X}return se},S=c(2791),C=c(8925),I=c(267),A=c(2325),T=c(2577),L=c(2726),j=["rotation"],$=function(he,se,ge){return se>=he[0]&&se<=he[0]+he[2]&&ge>=he[1]&&ge<=he[1]+he[3]},ee=function(he,se,ge,X,we,be){return he.reduce(function(le,ye){if(le)return le;var ue=function(xe,Pe,Ne,Me,Re,We){if(!Pe.selectedElementIds[xe.id])return!1;var Se=(0,I.PC)(xe,Re,We),Be=Se.rotation,_e=(0,L.Z)(Se,j);if(Be&&$(Be,Ne,Me))return"rotation";var ze=Object.keys(_e).filter(function(Ve){var ut=_e[Ve];return!!ut&&$(ut,Ne,Me)});return ze.length>0&&ze[0]}(ye,se,ge,X,we,be);return ue?{element:ye,transformHandleType:ue}:null},null)},Q=function(he,se,ge,X,we){var be=(0,T.Z)(he,4),le=be[0],ye=be[1],ue=be[2],xe=be[3],Pe=(0,I.kK)([le,ye,ue,xe,(le+ue)/2,(ye+xe)/2],0,X,we,I.ox);return Object.keys(Pe).find(function(Ne){var Me=Pe[Ne];return Me&&$(Me,se,ge)})||!1},pe=["ns","nesw","ew","nwse"],ie=function(he){var se=he.element,ge=he.transformHandleType,X=se&&Math.sign(se.height)*Math.sign(se.width)==-1,we=null;switch(ge){case"n":case"s":we="ns";break;case"w":case"e":we="ew";break;case"nw":case"se":we=X?"nesw":"nwse";break;case"ne":case"sw":we=X?"nwse":"nesw";break;case"rotation":return"grab"}return we&&se&&(we=function(be,le){var ye=pe.indexOf(be);if(ye>=0){var ue=Math.round(le/(Math.PI/4));be=pe[(ye+ue)%pe.length]}return be}(we,se.angle)),we?"".concat(we,"-resize"):""},te=c(8634),Z=c(8290),D=c(5710),B=c(242),H=function(he,se,ge,X){var we=arguments.length>4&&arguments[4]!==void 0&&arguments[4],be=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,le=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,ye=arguments.length>7?arguments[7]:void 0,ue=arguments.length>8?arguments[8]:void 0,xe=(0,C.KP)(se),Pe=(0,T.Z)(xe,2),Ne=Pe[0],Me=Pe[1],Re={x:ge-Ne,y:X-Me},We=new Set(se),Se=se.filter(function(_e){return(0,b.He)(_e)}).map(function(_e){return _e.id});if(Se.length>0){var Be=ue.getNonDeletedElements().filter(function(_e){return _e.frameId!==null}).filter(function(_e){return Se.includes(_e.frameId)});Be.forEach(function(_e){return We.add(_e)})}We.forEach(function(_e){if(V(we,be,le,he,_e,Re),!_e.groupIds.length||ye.editingGroupId&&!(0,B.zq)(ye,_e)){var ze=(0,D.WJ)(_e);!ze||ze.frameId&&Se.includes(ze.frameId)||V(we,be,le,he,ze,Re)}(0,Z.Ww)(_e,{simultaneouslyUpdated:Array.from(We)})})},V=function(he,se,ge,X,we,be){var le,ye;if(he){var ue=he&&se<ge,xe=he&&se>ge,Pe=X.originalElements.get(we.id);le=ue&&Pe?Pe.x:we.x+be.x,ye=xe&&Pe?Pe.y:we.y+be.y}else le=we.x+be.x,ye=we.y+be.y;(0,m.DR)(we,{x:le,y:ye})},R=function(he,se,ge){var X=(0,C.KP)(he),we=(0,T.Z)(X,2);return[se-we[0],ge-we[1]]},Y=function(he,se,ge,X,we,be,le,ye,ue,xe,Pe){if(ue&&he.type!=="selection")if(Pe)ye=le/Pe;else{if(Math.abs(be-X)>Math.abs(we-ge)){var Ne=_(se,ye,we<ge?-le:le);le=Ne.width,ye=Ne.height}else{var Me=_(se,le,be<X?-ye:ye);le=Me.width,ye=Me.height}ye<0&&(ye=-ye)}var Re=we<ge?ge-le:ge,We=be<X?X-ye:X;xe&&(Re=ge-(le+=le)/2,We=X-(ye+=ye)/2),le!==0&&ye!==0&&(0,m.DR)(he,{x:Re,y:We,width:le,height:ye})},E=c(6906),W=c(75),F=function(he,se){return!!(!he.viewModeEnabled&&he.activeTool.type!=="custom"&&(he.editingElement||he.activeTool.type!=="selection"&&he.activeTool.type!=="eraser"&&he.activeTool.type!=="hand")||(0,W.eD)(se,he).length)};function z(he,se){var ge=Object.keys(he);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(he);se&&(X=X.filter(function(we){return Object.getOwnPropertyDescriptor(he,we).enumerable})),ge.push.apply(ge,X)}return ge}function q(he){for(var se=1;se<arguments.length;se++){var ge=arguments[se]!=null?arguments[se]:{};se%2?z(Object(ge),!0).forEach(function(X){(0,g.Z)(he,X,ge[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(he,Object.getOwnPropertyDescriptors(ge)):z(Object(ge)).forEach(function(X){Object.defineProperty(he,X,Object.getOwnPropertyDescriptor(ge,X))})}return he}var fe=function(he){return he.reduce(function(se,ge){return se+ge.version},0)},ce=function(he){return he.filter(function(se){return!se.isDeleted&&!w(se)})},U=function(he){return he.filter(function(se){return!se.isDeleted})},ve=function(he){return he.filter(function(se){return!se.isDeleted})},oe=function(he){return!he.isDeleted},re=function(he){return U(he).map(function(se){return(0,b.dt)(se.type)?q(q({},se),{},{lastCommittedPoint:null}):se})},ae=function(he){return re(he)},me=function(he){return re(he)}},6938:function(f,h,c){c.d(h,{_:function(){return D}});var g=c(1930),m=c(7169),b=c(2577),v=c(8821),w=c(5169),_=c(6552),k=c(1047),y=c(8925),S=c(1935),C=c(1564),I=c(8290),A=c(6340),T=c(1974),L=c(6066),j=c(5710),$=c(5317),ee=c(2335);function Q(H,V){var R=typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(!R){if(Array.isArray(H)||(R=function(q,fe){if(q){if(typeof q=="string")return pe(q,fe);var ce=Object.prototype.toString.call(q).slice(8,-1);if(ce==="Object"&&q.constructor&&(ce=q.constructor.name),ce==="Map"||ce==="Set")return Array.from(q);if(ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return pe(q,fe)}}(H))||V&&H&&typeof H.length=="number"){R&&(H=R);var Y=0,E=function(){};return{s:E,n:function(){return Y>=H.length?{done:!0}:{done:!1,value:H[Y++]}},e:function(q){throw q},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var W,F=!0,z=!1;return{s:function(){R=R.call(H)},n:function(){var q=R.next();return F=q.done,q},e:function(q){z=!0,W=q},f:function(){try{F||R.return==null||R.return()}finally{if(z)throw W}}}}function pe(H,V){(V==null||V>H.length)&&(V=H.length);for(var R=0,Y=new Array(V);R<V;R++)Y[R]=H[R];return Y}function ie(H,V){var R=Object.keys(H);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(H);V&&(Y=Y.filter(function(E){return Object.getOwnPropertyDescriptor(H,E).enumerable})),R.push.apply(R,Y)}return R}function te(H){for(var V=1;V<arguments.length;V++){var R=arguments[V]!=null?arguments[V]:{};V%2?ie(Object(R),!0).forEach(function(Y){(0,m.Z)(H,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(R)):ie(Object(R)).forEach(function(Y){Object.defineProperty(H,Y,Object.getOwnPropertyDescriptor(R,Y))})}return H}var Z={version:null,points:[],zoom:null},D=function(){function H(V,R){(0,v.Z)(this,H),this.elementId=V.id,C.Z.mapElementToScene(this.elementId,R),H.normalizePoints(V),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null}return(0,w.Z)(H,null,[{key:"getElement",value:function(V){var R,Y=(R=C.Z.getScene(V))===null||R===void 0?void 0:R.getNonDeletedElement(V);return Y||null}},{key:"handleBoxSelection",value:function(V,R,Y){var E;if(!R.editingLinearElement||((E=R.draggingElement)===null||E===void 0?void 0:E.type)!=="selection")return!1;var W=R.editingLinearElement,F=W.selectedPointsIndices,z=W.elementId,q=H.getElement(z);if(!q)return!1;var fe=(0,k.qf)(R.draggingElement),ce=(0,b.Z)(fe,4),U=ce[0],ve=ce[1],oe=ce[2],re=ce[3],ae=H.getPointsGlobalCoordinates(q).reduce(function(me,he,se){return(he[0]>=U&&he[0]<=oe&&he[1]>=ve&&he[1]<=re||V.shiftKey&&F!=null&&F.includes(se))&&me.push(se),me},[]);Y({editingLinearElement:te(te({},W),{},{selectedPointsIndices:ae.length?ae:null})})}},{key:"handlePointDragging",value:function(V,R,Y,E,W,F){if(!F)return!1;var z=F.selectedPointsIndices,q=F.elementId,fe=H.getElement(q);if(!fe)return!1;var ce=fe.points[F.pointerDownState.lastClickedPoint];if(z&&ce){if((0,L.Ge)(V)&&z.length===1&&fe.points.length>1){var U=z[0],ve=fe.points[U===0?1:U-1],oe=H._getShiftLockedDelta(fe,ve,[Y,E],R.gridSize),re=(0,b.Z)(oe,2),ae=re[0],me=re[1];H.movePoints(fe,[{index:U,point:[ae+ve[0],me+ve[1]],isDragging:U===F.pointerDownState.lastClickedPoint}])}else{var he=H.createPointAt(fe,Y-F.pointerOffset.x,E-F.pointerOffset.y,R.gridSize),se=he[0]-ce[0],ge=he[1]-ce[1];H.movePoints(fe,z.map(function(be){return{index:be,point:be===F.pointerDownState.lastClickedPoint?H.createPointAt(fe,Y-F.pointerOffset.x,E-F.pointerOffset.y,R.gridSize):[fe.points[be][0]+se,fe.points[be][1]+ge],isDragging:be===F.pointerDownState.lastClickedPoint}})),(0,j.WJ)(fe)&&(0,j.RB)(fe,!1)}if((0,T.Mn)(fe,!1)){var X=[];z[0]===0&&X.push((0,A.AK)(H.getPointGlobalCoordinates(fe,fe.points[0])));var we=z[z.length-1];we===fe.points.length-1&&X.push((0,A.AK)(H.getPointGlobalCoordinates(fe,fe.points[we]))),X.length&&W(fe,X)}return!0}return!1}},{key:"handlePointerUp",value:function(V,R,Y){var E,W=R.elementId,F=R.selectedPointsIndices,z=R.isDragging,q=R.pointerDownState,fe=H.getElement(W);if(!fe)return R;var ce={};if(z&&F){var U,ve=Q(F);try{for(ve.s();!(U=ve.n()).done;){var oe=U.value;if(oe===0||oe===fe.points.length-1){(0,_.g6)(fe.points,Y.zoom.value)&&H.movePoints(fe,[{index:oe,point:oe===0?fe.points[fe.points.length-1]:fe.points[0]}]);var re=(0,I.N1)(Y)?(0,I.Y9)((0,A.AK)(H.getPointAtIndexGlobalCoordinates(fe,oe)),C.Z.getScene(fe)):null;ce[oe===0?"startBindingElement":"endBindingElement"]=re}}}catch(ae){ve.e(ae)}finally{ve.f()}}return te(te(te({},R),ce),{},{selectedPointsIndices:z||V.shiftKey?!z&&V.shiftKey&&(E=q.prevSelectedPointsIndices)!==null&&E!==void 0&&E.includes(q.lastClickedPoint)?F&&F.filter(function(ae){return ae!==q.lastClickedPoint}):F:F!=null&&F.includes(q.lastClickedPoint)?[q.lastClickedPoint]:F,isDragging:!1,pointerOffset:{x:0,y:0}})}},{key:"isSegmentTooShort",value:function(V,R,Y,E){var W=(0,_.LW)(R[0],R[1],Y[0],Y[1]);return V.points.length>2&&V.roundness&&(W=(0,_.eH)(V,Y)),W*E.value<4*H.POINT_HANDLE_SIZE}},{key:"getSegmentMidPoint",value:function(V,R,Y,E){var W=(0,_.H5)(R,Y);if(V.points.length>2&&V.roundness){var F=(0,_.yB)(V,V.points[E]);if(F){var z=(0,_.lk)(V,V.points[E],.5),q=(0,_.N_)(F[0],F[1],F[2],F[3],z),fe=(0,b.Z)(q,2),ce=fe[0],U=fe[1];W=H.getPointGlobalCoordinates(V,[ce,U])}}return W}},{key:"getSegmentMidPointIndex",value:function(V,R,Y){var E=H.getElement(V.elementId);if(!E)return-1;for(var W=H.getEditorMidPoints(E,R),F=0;F<W.length;){if(H.arePointsEqual(Y,W[F]))return F+1;F++}return-1}},{key:"handlePointerDown",value:function(V,R,Y,E,W){var F,z={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!W)return z;var q=W.elementId,fe=H.getElement(q);if(!fe)return z;var ce=H.getSegmentMidpointHitCoords(W,E,R),U=null;if(ce&&(U=H.getSegmentMidPointIndex(W,R,ce)),V.altKey&&R.editingLinearElement)return W.lastUncommittedPoint==null&&((0,S.DR)(fe,{points:[].concat((0,g.Z)(fe.points),[H.createPointAt(fe,E.x,E.y,R.gridSize)])}),z.didAddPoint=!0),Y.resumeRecording(),z.linearElementEditor=te(te({},W),{},{pointerDownState:{prevSelectedPointsIndices:W.selectedPointsIndices,lastClickedPoint:-1,origin:{x:E.x,y:E.y},segmentMidpoint:{value:ce,index:U,added:!1}},selectedPointsIndices:[fe.points.length-1],lastUncommittedPoint:null,endBindingElement:(0,I.Y9)(E,C.Z.getScene(fe))}),z.didAddPoint=!0,z;var ve=H.getPointIndexUnderCursor(fe,R.zoom,E.x,E.y);if(ve>=0||ce)z.hitElement=fe;else{var oe=W.startBindingElement,re=W.endBindingElement;(0,I.N1)(R)&&(0,T.Mn)(fe)&&(0,I.HG)(fe,oe,re)}var ae=(0,k.qf)(fe),me=(0,b.Z)(ae,4),he=me[0],se=me[1],ge=(he+me[2])/2,X=(se+me[3])/2,we=ve>-1&&(0,_.U1)(fe.x+fe.points[ve][0],fe.y+fe.points[ve][1],ge,X,fe.angle),be=ve>-1||V.shiftKey?V.shiftKey||(F=W.selectedPointsIndices)!==null&&F!==void 0&&F.includes(ve)?B([].concat((0,g.Z)(W.selectedPointsIndices||[]),[ve])):[ve]:null;return z.linearElementEditor=te(te({},W),{},{pointerDownState:{prevSelectedPointsIndices:W.selectedPointsIndices,lastClickedPoint:ve,origin:{x:E.x,y:E.y},segmentMidpoint:{value:ce,index:U,added:!1}},selectedPointsIndices:be,pointerOffset:we?{x:E.x-we[0],y:E.y-we[1]}:{x:0,y:0}}),z}},{key:"arePointsEqual",value:function(V,R){return!V&&!R||!(!V||!R)&&(0,_.Jj)(V,R)}},{key:"handlePointerMove",value:function(V,R,Y,E){if(!E.editingLinearElement)return null;var W=E.editingLinearElement,F=W.elementId,z=W.lastUncommittedPoint,q=H.getElement(F);if(!q)return E.editingLinearElement;var fe,ce=q.points,U=ce[ce.length-1];if(!V.altKey)return U===z&&H.deletePoints(q,[ce.length-1]),te(te({},E.editingLinearElement),{},{lastUncommittedPoint:null});if((0,L.Ge)(V)&&ce.length>=2){var ve=ce[ce.length-2],oe=H._getShiftLockedDelta(q,ve,[R,Y],E.gridSize),re=(0,b.Z)(oe,2),ae=re[0],me=re[1];fe=[ae+ve[0],me+ve[1]]}else fe=H.createPointAt(q,R-E.editingLinearElement.pointerOffset.x,Y-E.editingLinearElement.pointerOffset.y,E.gridSize);return U===z?H.movePoints(q,[{index:q.points.length-1,point:fe}]):H.addPoints(q,E,[{point:fe}]),te(te({},E.editingLinearElement),{},{lastUncommittedPoint:q.points[q.points.length-1]})}},{key:"getPointGlobalCoordinates",value:function(V,R){var Y=(0,k.qf)(V),E=(0,b.Z)(Y,4),W=E[0],F=E[1],z=(W+E[2])/2,q=(F+E[3])/2,fe=V.x,ce=V.y,U=(0,_.U1)(fe+R[0],ce+R[1],z,q,V.angle),ve=(0,b.Z)(U,2);return[fe=ve[0],ce=ve[1]]}},{key:"getPointsGlobalCoordinates",value:function(V){var R=(0,k.qf)(V),Y=(0,b.Z)(R,4),E=Y[0],W=Y[1],F=Y[2],z=Y[3],q=(E+F)/2,fe=(W+z)/2;return V.points.map(function(ce){var U=V.x,ve=V.y,oe=(0,_.U1)(U+ce[0],ve+ce[1],q,fe,V.angle),re=(0,b.Z)(oe,2);return[U=re[0],ve=re[1]]})}},{key:"getPointAtIndexGlobalCoordinates",value:function(V,R){var Y=R<0?V.points.length+R:R,E=(0,k.qf)(V),W=(0,b.Z)(E,4),F=W[0],z=W[1],q=(F+W[2])/2,fe=(z+W[3])/2,ce=V.points[Y],U=V.x,ve=V.y;return ce?(0,_.U1)(U+ce[0],ve+ce[1],q,fe,V.angle):(0,_.U1)(U,ve,q,fe,V.angle)}},{key:"pointFromAbsoluteCoords",value:function(V,R){var Y=(0,k.qf)(V),E=(0,b.Z)(Y,4),W=E[0],F=E[1],z=(W+E[2])/2,q=(F+E[3])/2,fe=(0,_.U1)(R[0],R[1],z,q,-V.angle),ce=(0,b.Z)(fe,2),U=ce[0],ve=ce[1];return[U-V.x,ve-V.y]}},{key:"getPointIndexUnderCursor",value:function(V,R,Y,E){for(var W=H.getPointsGlobalCoordinates(V),F=W.length;--F>-1;){var z=W[F];if((0,_.LW)(Y,E,z[0],z[1])*R.value<H.POINT_HANDLE_SIZE+1)return F}return-1}},{key:"createPointAt",value:function(V,R,Y,E){var W=(0,_.wC)(R,Y,E),F=(0,k.qf)(V),z=(0,b.Z)(F,4),q=z[0],fe=z[1],ce=(q+z[2])/2,U=(fe+z[3])/2,ve=(0,_.U1)(W[0],W[1],ce,U,-V.angle),oe=(0,b.Z)(ve,2),re=oe[0],ae=oe[1];return[re-V.x,ae-V.y]}},{key:"getNormalizedPoints",value:function(V){var R=V.points,Y=R[0][0],E=R[0][1];return{points:R.map(function(W,F){return[W[0]-Y,W[1]-E]}),x:V.x+Y,y:V.y+E}}},{key:"normalizePoints",value:function(V){(0,S.DR)(V,H.getNormalizedPoints(V))}},{key:"duplicateSelectedPoints",value:function(V){if(!V.editingLinearElement)return!1;var R=V.editingLinearElement,Y=R.selectedPointsIndices,E=R.elementId,W=H.getElement(E);if(!W||Y===null)return!1;var F=W.points,z=[],q=!1,fe=-1,ce=F.reduce(function(ve,oe,re){if(++fe,ve.push(oe),Y.includes(re)){var ae=F[re+1];ae||(q=!0),ve.push(ae?[(oe[0]+ae[0])/2,(oe[1]+ae[1])/2]:[oe[0],oe[1]]),z.push(fe+1),++fe}return ve},[]);if((0,S.DR)(W,{points:ce}),q){var U=W.points[W.points.length-1];H.movePoints(W,[{index:W.points.length-1,point:[U[0]+30,U[1]+30]}])}return{appState:te(te({},V),{},{editingLinearElement:te(te({},V.editingLinearElement),{},{selectedPointsIndices:z})})}}},{key:"deletePoints",value:function(V,R){var Y=0,E=0;if(R.includes(0)){var W=V.points.find(function(z,q){return!R.includes(q)});W&&(Y=W[0],E=W[1])}var F=V.points.reduce(function(z,q,fe){return R.includes(fe)||z.push(z.length?[q[0]-Y,q[1]-E]:[0,0]),z},[]);H._updatePoints(V,F,Y,E)}},{key:"addPoints",value:function(V,R,Y){var E=[].concat((0,g.Z)(V.points),(0,g.Z)(Y.map(function(W){return W.point})));H._updatePoints(V,E,0,0)}},{key:"movePoints",value:function(V,R,Y){var E=V.points,W=0,F=0,z=R.find(function(fe){return fe.index===0});z&&(W=z.point[0]+E[z.index][0],F=z.point[1]+E[z.index][1]);var q=E.map(function(fe,ce){var U=R.find(function(re){return re.index===ce});if(U){if(z)return fe;var ve=U.point[0]-E[U.index][0],oe=U.point[1]-E[U.index][1];return[fe[0]+ve,fe[1]+oe]}return W||F?[fe[0]-W,fe[1]-F]:fe});H._updatePoints(V,q,W,F,Y)}},{key:"shouldAddMidpoint",value:function(V,R,Y){if(!H.getElement(V.elementId))return!1;var E=V.pointerDownState.segmentMidpoint;if(E.added||E.value===null||E.index===null||V.pointerDownState.origin===null)return!1;var W=V.pointerDownState.origin,F=(0,_.LW)(W.x,W.y,R.x,R.y);return!(!Y.editingLinearElement&&F<ee.f/Y.zoom.value)}},{key:"addMidpoint",value:function(V,R,Y){var E=H.getElement(V.elementId);if(E){var W=V.pointerDownState.segmentMidpoint,F={pointerDownState:V.pointerDownState,selectedPointsIndices:V.selectedPointsIndices},z=H.createPointAt(E,R.x,R.y,Y.gridSize),q=[].concat((0,g.Z)(E.points.slice(0,W.index)),[z],(0,g.Z)(E.points.slice(W.index)));return(0,S.DR)(E,{points:q}),F.pointerDownState=te(te({},V.pointerDownState),{},{segmentMidpoint:te(te({},V.pointerDownState.segmentMidpoint),{},{added:!0}),lastClickedPoint:W.index}),F.selectedPointsIndices=[W.index],F}}},{key:"_updatePoints",value:function(V,R,Y,E,W){var F=(0,y.Ut)(V,R),z=(0,y.Ut)(V,V.points),q=(F[0]+F[2])/2,fe=(F[1]+F[3])/2,ce=(z[0]+z[2])/2-q,U=(z[1]+z[3])/2-fe,ve=(0,_.U1)(Y,E,ce,U,V.angle);(0,S.DR)(V,te(te({},W),{},{points:R,x:V.x+ve[0],y:V.y+ve[1]}))}},{key:"_getShiftLockedDelta",value:function(V,R,Y,E){var W=H.getPointGlobalCoordinates(V,R),F=(0,_.wC)(Y[0],Y[1],E),z=(0,b.Z)(F,2),q=z[0],fe=z[1],ce=(0,k.o4)(W[0],W[1],q,fe),U=ce.width,ve=ce.height;return(0,_.xj)([U,ve],[0,0],-V.angle)}}]),H}();D.POINT_HANDLE_SIZE=10,D.getEditorMidPoints=function(H,V){var R=(0,j.WJ)(H);return!V.editingLinearElement&&H.points.length>2&&!R?[]:(Z.version===H.version&&Z.zoom===V.zoom.value||D.updateEditorMidPointsCache(H,V),Z.points)},D.updateEditorMidPointsCache=function(H,V){for(var R=D.getPointsGlobalCoordinates(H),Y=0,E=[];Y<R.length-1;)if(D.isSegmentTooShort(H,H.points[Y],H.points[Y+1],V.zoom))E.push(null),Y++;else{var W=D.getSegmentMidPoint(H,R[Y],R[Y+1],Y+1);E.push(W),Y++}Z.points=E,Z.version=H.version,Z.zoom=V.zoom.value},D.getSegmentMidpointHitCoords=function(H,V,R){var Y=H.elementId,E=D.getElement(Y);if(!E||D.getPointIndexUnderCursor(E,R.zoom,V.x,V.y)>=0||D.getPointsGlobalCoordinates(E).length>=3&&!R.editingLinearElement)return null;var W=D.POINT_HANDLE_SIZE/R.zoom.value,F=H.segmentMidPointHoveredCoords;if(F&&(0,_.LW)(F[0],F[1],V.x,V.y)<=W)return F;for(var z=0,q=D.getEditorMidPoints(E,R);z<q.length;){if(q[z]!==null&&(0,_.LW)(q[z][0],q[z][1],V.x,V.y)<=W)return q[z];z++}return null},D.getBoundTextElementPosition=function(H,V){var R=D.getPointsGlobalCoordinates(H);R.length<2&&(0,S.DR)(V,{isDeleted:!0});var Y=0,E=0;if(H.points.length%2==1){var W=Math.floor(H.points.length/2),F=D.getPointGlobalCoordinates(H,H.points[W]);Y=F[0]-V.width/2,E=F[1]-V.height/2}else{var z=H.points.length/2-1,q=Z.points[z];H.points.length===2&&(q=(0,_.H5)(R[0],R[1])),q&&Z.version===H.version||(q=D.getSegmentMidPoint(H,R[z],R[z+1],z+1)),Y=q[0]-V.width/2,E=q[1]-V.height/2}return{x:Y,y:E}},D.getMinMaxXYWithBoundText=function(H,V,R){var Y=(0,b.Z)(V,4),E=Y[0],W=Y[1],F=Y[2],z=Y[3],q=(E+F)/2,fe=(W+z)/2,ce=D.getBoundTextElementPosition(H,R),U=ce.x,ve=ce.y,oe=U+R.width,re=ve+R.height,ae=(0,_.xj)([E,W],[q,fe],H.angle),me=(0,_.xj)([F,W],[q,fe],H.angle),he=(0,_.xj)([U,ve],[q,fe],-H.angle),se=(0,_.xj)([oe,ve],[q,fe],-H.angle),ge=(0,_.xj)([U,re],[q,fe],-H.angle),X=(0,_.xj)([oe,re],[q,fe],-H.angle);return ae[0]<me[0]&&ae[1]>=me[1]?(E=Math.min(E,ge[0]),F=Math.max(F,Math.max(se[0],X[0])),W=Math.min(W,he[1]),z=Math.max(z,X[1])):ae[0]>=me[0]&&ae[1]>me[1]?(E=Math.min(E,X[0]),F=Math.max(F,Math.max(he[0],se[0])),W=Math.min(W,ge[1]),z=Math.max(z,se[1])):ae[0]>=me[0]?(E=Math.min(E,se[0]),F=Math.max(F,ge[0]),W=Math.min(W,X[1]),z=Math.max(z,he[1])):ae[1]<=me[1]&&(E=Math.min(E,Math.min(se[0],he[0])),F=Math.max(F,X[0]),W=Math.min(W,se[1]),z=Math.max(z,ge[1])),[E,W,F,z,q,fe]},D.getElementAbsoluteCoords=function(H){var V,R,Y,E,W,F=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(H.points.length<2||!(0,$.R2)(H)){var z=H.points.reduce(function(le,ye){var ue=(0,b.Z)(ye,2),xe=ue[0],Pe=ue[1];return le.minY=Math.min(le.minY,Pe),le.minX=Math.min(le.minX,xe),le.maxX=Math.max(le.maxX,xe),le.maxY=Math.max(le.maxY,Pe),le},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),q=z.minX,fe=z.minY,ce=z.maxX,U=z.maxY;R=q+H.x,Y=fe+H.y,E=ce+H.x,W=U+H.y}else{var ve=(0,$.R2)(H),oe=(0,y.CM)(ve[0]),re=(0,y.IX)(oe),ae=(0,b.Z)(re,4),me=ae[0],he=ae[1],se=ae[2],ge=ae[3];R=me+H.x,Y=he+H.y,E=se+H.x,W=ge+H.y}var X=(R+E)/2,we=(Y+W)/2;if(V=[R,Y,E,W,X,we],!F)return V;var be=(0,j.WJ)(H);return be&&(V=D.getMinMaxXYWithBoundText(H,[R,Y,E,W],be)),V};var B=function(H){var V=(0,g.Z)(new Set(H.filter(function(R){return R!==null&&R!==-1})));return(V=V.sort(function(R,Y){return R-Y})).length?V:null}},1935:function(f,h,c){c.d(h,{BE:function(){return I},DR:function(){return C},ZP:function(){return A}});var g=c(6655),m=c(7169),b=c(5317),v=c(1564),w=c(5001),_=c(6954),k=c(6340);function y(T,L){var j=Object.keys(T);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(T);L&&($=$.filter(function(ee){return Object.getOwnPropertyDescriptor(T,ee).enumerable})),j.push.apply(j,$)}return j}function S(T){for(var L=1;L<arguments.length;L++){var j=arguments[L]!=null?arguments[L]:{};L%2?y(Object(j),!0).forEach(function($){(0,m.Z)(T,$,j[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(j)):y(Object(j)).forEach(function($){Object.defineProperty(T,$,Object.getOwnPropertyDescriptor(j,$))})}return T}var C=function(T,L){var j,$=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],ee=!1,Q=L,pe=Q.points,ie=Q.fileId;for(var te in pe!==void 0&&(L=S(S({},(0,w.k)(pe)),L)),L){var Z=L[te];if(Z!==void 0){if(T[te]===Z&&((0,g.Z)(Z)!=="object"||Z===null||te==="groupIds"||te==="scale"))continue;if(te==="scale"){var D=T[te],B=Z;if(D[0]===B[0]&&D[1]===B[1])continue}else if(te==="points"){var H=T[te],V=Z;if(H.length===V.length){for(var R=!1,Y=H.length;--Y;){var E=H[Y],W=V[Y];if(E[0]!==W[0]||E[1]!==W[1]){R=!0;break}}if(!R)continue}}T[te]=Z,ee=!0}}return ee&&(L.height===void 0&&L.width===void 0&&ie===void 0&&pe===void 0||(0,b.bI)(T),T.version++,T.versionNonce=(0,_.LU)(),T.updated=(0,k.C3)(),$&&((j=v.Z.getScene(T))===null||j===void 0||j.informMutation())),T},I=function(T,L){var j=!1;for(var $ in L){var ee=L[$];if(ee!==void 0){if(T[$]===ee&&((0,g.Z)(ee)!=="object"||ee===null))continue;j=!0}}return j?S(S(S({},T),L),{},{updated:(0,k.C3)(),version:T.version+1,versionNonce:(0,_.LU)()}):T},A=function(T,L){return T.version=(L??T.version)+1,T.versionNonce=(0,_.LU)(),T.updated=(0,k.C3)(),T}},2791:function(f,h,c){c.d(h,{JZ:function(){return H},KE:function(){return R},M3:function(){return te},N_:function(){return V},OL:function(){return F},Sy:function(){return q},Up:function(){return ie},VL:function(){return D},_N:function(){return fe},vw:function(){return E},y8:function(){return Y}});var g=c(6655),m=c(2577),b=c(7169),v=c(2726),w=c(6340),_=c(6954),k=c(1935),y=c(242),S=c(1047),C=c(6552),I=c(8925),A=c(5710),T=c(2335),L=["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","frameId","roundness","boundElements","link","locked"];function j(ce,U){var ve=typeof Symbol<"u"&&ce[Symbol.iterator]||ce["@@iterator"];if(!ve){if(Array.isArray(ce)||(ve=function(se,ge){if(se){if(typeof se=="string")return $(se,ge);var X=Object.prototype.toString.call(se).slice(8,-1);if(X==="Object"&&se.constructor&&(X=se.constructor.name),X==="Map"||X==="Set")return Array.from(se);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return $(se,ge)}}(ce))||U&&ce&&typeof ce.length=="number"){ve&&(ce=ve);var oe=0,re=function(){};return{s:re,n:function(){return oe>=ce.length?{done:!0}:{done:!1,value:ce[oe++]}},e:function(se){throw se},f:re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae,me=!0,he=!1;return{s:function(){ve=ve.call(ce)},n:function(){var se=ve.next();return me=se.done,se},e:function(se){he=!0,ae=se},f:function(){try{me||ve.return==null||ve.return()}finally{if(he)throw ae}}}}function $(ce,U){(U==null||U>ce.length)&&(U=ce.length);for(var ve=0,oe=new Array(U);ve<U;ve++)oe[ve]=ce[ve];return oe}function ee(ce,U){var ve=Object.keys(ce);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(ce);U&&(oe=oe.filter(function(re){return Object.getOwnPropertyDescriptor(ce,re).enumerable})),ve.push.apply(ve,oe)}return ve}function Q(ce){for(var U=1;U<arguments.length;U++){var ve=arguments[U]!=null?arguments[U]:{};U%2?ee(Object(ve),!0).forEach(function(oe){(0,b.Z)(ce,oe,ve[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(ve)):ee(Object(ve)).forEach(function(oe){Object.defineProperty(ce,oe,Object.getOwnPropertyDescriptor(ve,oe))})}return ce}var pe=function(ce,U){var ve,oe,re=U.x,ae=U.y,me=U.strokeColor,he=me===void 0?T.HN.strokeColor:me,se=U.backgroundColor,ge=se===void 0?T.HN.backgroundColor:se,X=U.fillStyle,we=X===void 0?T.HN.fillStyle:X,be=U.strokeWidth,le=be===void 0?T.HN.strokeWidth:be,ye=U.strokeStyle,ue=ye===void 0?T.HN.strokeStyle:ye,xe=U.roughness,Pe=xe===void 0?T.HN.roughness:xe,Ne=U.opacity,Me=Ne===void 0?T.HN.opacity:Ne,Re=U.width,We=Re===void 0?0:Re,Se=U.height,Be=Se===void 0?0:Se,_e=U.angle,ze=_e===void 0?0:_e,Ve=U.groupIds,ut=Ve===void 0?[]:Ve,Ie=U.frameId,ot=Ie===void 0?null:Ie,Ye=U.roundness,Ke=Ye===void 0?null:Ye,tt=U.boundElements,pt=tt===void 0?null:tt,St=U.link,Kt=St===void 0?null:St,sn=U.locked,nn=sn===void 0?T.HN.locked:sn,Cn=(0,v.Z)(U,L);return{id:Cn.id||(0,_.kb)(),type:ce,x:re,y:ae,width:We,height:Be,angle:ze,strokeColor:he,backgroundColor:ge,fillStyle:we,strokeWidth:le,strokeStyle:ue,roughness:Pe,opacity:Me,groupIds:ut,frameId:ot,roundness:Ke,seed:(ve=Cn.seed)!==null&&ve!==void 0?ve:(0,_.LU)(),version:Cn.version||1,versionNonce:(oe=Cn.versionNonce)!==null&&oe!==void 0?oe:0,isDeleted:!1,boundElements:pt,updated:(0,w.C3)(),link:Kt,locked:nn}},ie=function(ce){return pe(ce.type,ce)},te=function(ce){return(0,k.BE)(Q(Q({},pe("frame",ce)),{},{type:"frame",name:null}),{})},Z=function(ce,U){return{x:ce.textAlign==="center"?U.width/2:ce.textAlign==="right"?U.width:0,y:ce.verticalAlign==="middle"?U.height/2:0}},D=function(ce){var U=ce.fontFamily||T.rk,ve=ce.fontSize||T.n5,oe=ce.lineHeight||(0,A.PT)(U),re=(0,A.bG)(ce.text),ae=(0,A.X1)(re,(0,w.mO)({fontFamily:U,fontSize:ve}),oe),me=ce.textAlign||T.Hg,he=ce.verticalAlign||T.hs,se=Z({textAlign:me,verticalAlign:he},ae);return(0,k.BE)(Q(Q({},pe("text",ce)),{},{text:re,fontSize:ve,fontFamily:U,textAlign:me,verticalAlign:he,x:ce.x-se.x,y:ce.y-se.y,width:ae.width,height:ae.height,baseline:ae.baseline,containerId:ce.containerId||null,originalText:re,lineHeight:oe,isFrameName:ce.isFrameName||!1}),{})},B=function(ce,U){var ve,oe,re=(0,A.X1)(U,(0,w.mO)(ce),ce.lineHeight),ae=re.width,me=re.height,he=re.baseline,se=ce.textAlign,ge=ce.verticalAlign;if(se!=="center"||ge!==T.oX.MIDDLE||ce.containerId){var X=(0,S.qf)(ce),we=(0,m.Z)(X,4),be=we[0],le=we[1],ye=we[2],ue=we[3],xe=(0,I.wC)(ce,ae,me,!1),Pe=(0,m.Z)(xe,4),Ne=(be-Pe[0])/2,Me=(le-Pe[1])/2,Re=(ye-Pe[2])/2,We=(ue-Pe[3])/2,Se=(0,C.yq)({s:!0,e:se==="center"||se==="left",w:se==="center"||se==="right"},ce.x,ce.y,ce.angle,Ne,Me,Re,We),Be=(0,m.Z)(Se,2);ve=Be[0],oe=Be[1]}else{var _e=(0,A.X1)(ce.text,(0,w.mO)(ce),ce.lineHeight),ze=Z(ce,{width:ae-_e.width,height:me-_e.height});ve=ce.x-ze.x,oe=ce.y-ze.y}return{width:ae,height:me,baseline:he,x:Number.isFinite(ve)?ve:ce.x,y:Number.isFinite(oe)?oe:ce.y}},H=function(ce){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce.text;if(!ce.isDeleted){var ve=(0,A.tl)(ce);ve&&(U=(0,A.lD)(U,(0,w.mO)(ce),(0,A.iZ)(ve)));var oe=B(ce,U);return Q({text:U},oe)}},V=function(ce,U){U.text;var ve=U.isDeleted,oe=U.originalText;return(0,k.BE)(ce,Q({originalText:oe,isDeleted:ve??ce.isDeleted},H(ce,oe)))},R=function(ce){return Q(Q({},pe(ce.type,ce)),{},{points:ce.points||[],pressures:[],simulatePressure:ce.simulatePressure,lastCommittedPoint:null})},Y=function(ce){return Q(Q({},pe(ce.type,ce)),{},{points:ce.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:ce.startArrowhead,endArrowhead:ce.endArrowhead})},E=function(ce){var U,ve,oe;return Q(Q({},pe("image",ce)),{},{strokeColor:"transparent",status:(U=ce.status)!==null&&U!==void 0?U:"pending",fileId:(ve=ce.fileId)!==null&&ve!==void 0?ve:null,scale:(oe=ce.scale)!==null&&oe!==void 0?oe:[1,1]})},W=function ce(U){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(U==null||(0,g.Z)(U)!=="object")return U;var oe=Object.prototype.toString.call(U);if(oe==="[object Object]"){var re=typeof U.constructor=="function"?Object.create(Object.getPrototypeOf(U)):{};for(var ae in U)if(U.hasOwnProperty(ae)){if(ve===0&&(ae==="shape"||ae==="canvas"))continue;re[ae]=ce(U[ae],ve+1)}return re}if(Array.isArray(U)){for(var me=U.length,he=new Array(me);me--;)he[me]=ce(U[me],ve+1);return he}return U},F=function(ce){return W(ce)},z=function(ce){if((0,w.h2)()&&ce){var U,ve,oe="".concat(ce,"_copy");return(U=window.h)!==null&&U!==void 0&&(ve=U.app)!==null&&ve!==void 0&&ve.getSceneElementsIncludingDeleted().find(function(re){return re.id===oe})&&(oe+="_copy"),oe}return(0,_.kb)()},q=function(ce,U,ve,oe){var re=F(ve);return re.id=z(re.id),re.boundElements=null,re.updated=(0,w.C3)(),re.seed=(0,_.LU)(),re.groupIds=(0,y.Qy)(re.groupIds,ce,function(ae){return U.has(ae)||U.set(ae,z(ae)),U.get(ae)}),oe&&(re=Object.assign(re,oe)),re},fe=function(ce,U){var ve,oe=[],re=(0,w.xn)(ce),ae=new Map,me=function(ye){if(ae.has(ye))return ae.get(ye);if(re.has(ye)){var ue=z(ye);return ae.set(ye,ue),ue}return null},he=new Map,se=j(ce);try{for(se.s();!(ve=se.n()).done;){var ge=ve.value,X=W(ge);if(X.id=me(ge.id),U!=null&&U.randomizeSeed&&(X.seed=(0,_.LU)(),(0,k.ZP)(X)),X.groupIds&&(X.groupIds=X.groupIds.map(function(ye){return he.has(ye)||he.set(ye,z(ye)),he.get(ye)})),"containerId"in X&&X.containerId){var we=me(X.containerId);X.containerId=we}if("boundElements"in X&&X.boundElements&&(X.boundElements=X.boundElements.reduce(function(ye,ue){var xe=me(ue.id);return xe&&ye.push(Q(Q({},ue),{},{id:xe})),ye},[])),"endBinding"in X&&X.endBinding){var be=me(X.endBinding.elementId);X.endBinding=be?Q(Q({},X.endBinding),{},{elementId:be}):null}if("startBinding"in X&&X.startBinding){var le=me(X.startBinding.elementId);X.startBinding=le?Q(Q({},X.startBinding),{},{elementId:le}):null}X.frameId&&(X.frameId=me(X.frameId)),oe.push(X)}}catch(ye){se.e(ye)}finally{se.f()}return oe}},8634:function(f,h,c){c.d(h,{LM:function(){return Y},T:function(){return F},vY:function(){return Z},xx:function(){return W}});var g=c(2726),m=c(1930),b=c(7169),v=c(2577),w=c(2335),_=c(5001),k=c(6552),y=c(8925),S=c(1974),C=c(1935),I=c(6340),A=c(8290),T=c(1564),L=c(5710),j=c(6938),$=["element"];function ee(z,q){var fe=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!fe){if(Array.isArray(z)||(fe=function(ae,me){if(ae){if(typeof ae=="string")return Q(ae,me);var he=Object.prototype.toString.call(ae).slice(8,-1);if(he==="Object"&&ae.constructor&&(he=ae.constructor.name),he==="Map"||he==="Set")return Array.from(ae);if(he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return Q(ae,me)}}(z))||q&&z&&typeof z.length=="number"){fe&&(z=fe);var ce=0,U=function(){};return{s:U,n:function(){return ce>=z.length?{done:!0}:{done:!1,value:z[ce++]}},e:function(ae){throw ae},f:U}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ve,oe=!0,re=!1;return{s:function(){fe=fe.call(z)},n:function(){var ae=fe.next();return oe=ae.done,ae},e:function(ae){re=!0,ve=ae},f:function(){try{oe||fe.return==null||fe.return()}finally{if(re)throw ve}}}}function Q(z,q){(q==null||q>z.length)&&(q=z.length);for(var fe=0,ce=new Array(q);fe<q;fe++)ce[fe]=z[fe];return ce}function pe(z,q){var fe=Object.keys(z);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(z);q&&(ce=ce.filter(function(U){return Object.getOwnPropertyDescriptor(z,U).enumerable})),fe.push.apply(fe,ce)}return fe}function ie(z){for(var q=1;q<arguments.length;q++){var fe=arguments[q]!=null?arguments[q]:{};q%2?pe(Object(fe),!0).forEach(function(ce){(0,b.Z)(z,ce,fe[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(fe)):pe(Object(fe)).forEach(function(ce){Object.defineProperty(z,ce,Object.getOwnPropertyDescriptor(fe,ce))})}return z}var te=function(z){return z<0?z+2*Math.PI:z>=2*Math.PI?z-2*Math.PI:z},Z=function(z,q,fe,ce,U,ve,oe,re,ae,me,he){if(fe.length===1){var se=(0,v.Z)(fe,1)[0];return q==="rotation"?(D(se,re,ae,U,z.originalElements),(0,A.Ww)(se)):!(0,S.iB)(se)||q!=="nw"&&q!=="ne"&&q!=="sw"&&q!=="se"?q&&R(z.originalElements,oe,se,q,ve,re,ae):(V(se,q,ve,re,ae),(0,A.Ww)(se)),!0}if(fe.length>1){if(q==="rotation")return E(z,fe,re,ae,U,me,he),!0;if(q==="nw"||q==="ne"||q==="sw"||q==="se")return Y(z,fe,q,ve,re,ae),!0}return!1},D=function(z,q,fe,ce,U){var ve,oe=(0,y.qf)(z),re=(0,v.Z)(oe,4),ae=re[0],me=re[1],he=(ae+re[2])/2,se=(me+re[3])/2;(0,S.He)(z)?ve=0:(ve=5*Math.PI/2+Math.atan2(fe-se,q-he),ce&&(ve+=w.ay/2,ve-=ve%w.ay),ve=te(ve));var ge=(0,L.xB)(z);if((0,C.DR)(z,{angle:ve}),ge){var X,we=(X=T.Z.getScene(z))===null||X===void 0?void 0:X.getElement(ge);we&&!(0,S.Yv)(z)&&(0,C.DR)(we,{angle:ve})}},B=function(z,q,fe,ce){return(0,S.bt)(z)||(0,S.F9)(z)?{points:(0,_.z)(0,q,(0,_.z)(1,fe,z.points,ce),ce)}:{}},H=function(z,q,fe){var ce=z.width;if((0,S.Xh)(z)){var U=(0,L.tl)(z);U&&(ce=(0,L.iZ)(U))}var ve=z.fontSize*(q/ce);if(ve<1)return null;var oe=(0,L.X1)(z.text,(0,I.mO)({fontSize:ve,fontFamily:z.fontFamily}),z.lineHeight);return{size:ve,baseline:oe.baseline+(fe-oe.height)}},V=function(z,q,fe,ce,U){var ve,oe=(0,y.qf)(z),re=(0,v.Z)(oe,4),ae=re[0],me=re[1],he=re[2],se=re[3],ge=(ae+he)/2,X=(me+se)/2,we=(0,k.U1)(ce,U,ge,X,-z.angle),be=(0,v.Z)(we,2),le=be[0],ye=be[1];switch(q){case"se":ve=Math.max((le-ae)/(he-ae),(ye-me)/(se-me));break;case"nw":ve=Math.max((he-le)/(he-ae),(se-ye)/(se-me));break;case"ne":ve=Math.max((le-ae)/(he-ae),(se-ye)/(se-me));break;case"sw":ve=Math.max((he-le)/(he-ae),(ye-me)/(se-me))}if(ve>0){var ue=z.width*ve,xe=z.height*ve,Pe=H(z,ue,xe);if(Pe===null)return;var Ne=(0,y.wC)(z,ue,xe,!1),Me=(0,v.Z)(Ne,4),Re=(ae-Me[0])/2,We=(me-Me[1])/2,Se=(he-Me[2])/2,Be=(se-Me[3])/2,_e=(0,k.yq)(function(Ie,ot){return{n:/^(n|ne|nw)$/.test(Ie)||ot&&/^(s|se|sw)$/.test(Ie),s:/^(s|se|sw)$/.test(Ie)||ot&&/^(n|ne|nw)$/.test(Ie),w:/^(w|nw|sw)$/.test(Ie)||ot&&/^(e|ne|se)$/.test(Ie),e:/^(e|ne|se)$/.test(Ie)||ot&&/^(w|nw|sw)$/.test(Ie)}}(q,fe),z.x,z.y,z.angle,Re,We,Se,Be),ze=(0,v.Z)(_e,2),Ve=ze[0],ut=ze[1];(0,C.DR)(z,{fontSize:Pe.size,width:ue,height:xe,baseline:Pe.baseline,x:Ve,y:ut})}},R=function(z,q,fe,ce,U,ve,oe){var re=z.get(fe.id),ae=(0,y.wC)(re,re.width,re.height,!0),me=(0,v.Z)(ae,4),he=[me[0],me[1]],se=[me[2],me[3]],ge=(0,k.H5)(he,se),X=(0,k.xj)([ve,oe],ge,-re.angle),we=(0,y.wC)(fe,fe.width,fe.height,!0),be=(0,v.Z)(we,4),le=be[0],ye=be[1],ue=be[2]-le,xe=be[3]-ye,Pe=(se[0]-he[0])/ue,Ne=(se[1]-he[1])/xe,Me={},Re=(0,L.WJ)(fe);ce.includes("e")&&(Pe=(X[0]-he[0])/ue),ce.includes("s")&&(Ne=(X[1]-he[1])/xe),ce.includes("w")&&(Pe=(se[0]-X[0])/ue),ce.includes("n")&&(Ne=(se[1]-X[1])/xe);var We=re.width,Se=re.height,Be=fe.width*Pe,_e=fe.height*Ne;if(U&&(Be=2*Be-We,_e=2*_e-Se),q){var ze=Math.abs(Be)/We,Ve=Math.abs(_e)/Se;if(ce.length===1&&(_e*=ze,Be*=Ve),ce.length===2){var ut=Math.max(ze,Ve);Be=We*ut*Math.sign(Be),_e=Se*ut*Math.sign(_e)}}if(Re){var Ie=z.get(Re.id);if(Ie&&(Me={fontSize:Ie.fontSize,baseline:Ie.baseline}),q){var ot=ie(ie({},fe),{},{width:Be,height:_e}),Ye=H(Re,(0,L.iZ)(ot),(0,L.D9)(ot,Re));if(Ye===null)return;Me={fontSize:Ye.size,baseline:Ye.baseline}}else{var Ke=(0,L.AT)((0,I.mO)(Re),Re.lineHeight),tt=(0,L.w_)(Re.fontSize,Re.lineHeight);Be=Math.ceil(Math.max(Be,Ke)),_e=Math.ceil(Math.max(_e,tt))}}var pt=(0,y.wC)(re,Be,_e,!0),St=(0,v.Z)(pt,4),Kt=St[0],sn=St[1],nn=St[2],Cn=St[3],vn=nn-Kt,Fe=Cn-sn,et=[].concat(he);if(["n","w","nw"].includes(ce)&&(et=[se[0]-Math.abs(vn),se[1]-Math.abs(Fe)]),ce==="ne"){var st=[he[0],se[1]];et=[st[0],st[1]-Math.abs(Fe)]}if(ce==="sw"){var ht=[se[0],he[1]];et=[ht[0]-Math.abs(vn),ht[1]]}q&&(["s","n"].includes(ce)&&(et[0]=ge[0]-vn/2),["e","w"].includes(ce)&&(et[1]=ge[1]-Fe/2)),Be<0&&(ce.includes("e")&&(et[0]-=Math.abs(vn)),ce.includes("w")&&(et[0]+=Math.abs(vn))),_e<0&&(ce.includes("s")&&(et[1]-=Math.abs(Fe)),ce.includes("n")&&(et[1]+=Math.abs(Fe))),U&&(et[0]=ge[0]-Math.abs(vn)/2,et[1]=ge[1]-Math.abs(Fe)/2);var _t,Zt,Yt=re.angle,bn=(0,k.xj)(et,ge,Yt),Wt=[et[0]+Math.abs(vn)/2,et[1]+Math.abs(Fe)/2],un=(0,k.xj)(Wt,ge,Yt);et=(0,k.xj)(bn,un,-Yt),((0,S.bt)(fe)||(0,S.F9)(fe))&&(_t=(0,_.z)(1,_e,re.points,!0),Zt=(0,_.z)(0,Be,_t,!0));var jn=(0,m.Z)(et);jn[0]+=re.x-Kt,jn[1]+=re.y-sn;var Hn={width:Math.abs(Be),height:Math.abs(_e),x:jn[0],y:jn[1],points:Zt};"scale"in fe&&"scale"in re&&(0,C.DR)(fe,{scale:[(Math.sign(nn-re.x)||re.scale[0])*re.scale[0],(Math.sign(Cn-re.y)||re.scale[1])*re.scale[1]]}),Hn.width!==0&&Hn.height!==0&&Number.isFinite(Hn.x)&&Number.isFinite(Hn.y)&&((0,A.Ww)(fe,{newSize:{width:Hn.width,height:Hn.height}}),(0,C.DR)(fe,Hn),Re&&Me!=null&&(0,C.DR)(Re,{fontSize:Me.fontSize,baseline:Me.baseline}),(0,L.RB)(fe,ce))},Y=function(z,q,fe,ce,U,ve){var oe,re=q.reduce(function(Ln,Wn){var Rn=z.originalElements.get(Wn.id);return Rn&&Ln.push({orig:Rn,latest:Wn}),Ln},[]),ae=re.reduce(function(Ln,Wn){var Rn,zn=Wn.orig;if(!(0,S.bt)(zn))return Ln;var Et=(0,L.xB)(zn);if(!Et)return Ln;var Dt=(Rn=z.originalElements.get(Et))!==null&&Rn!==void 0?Rn:null;if(!(0,S.Xh)(Dt))return Ln;var Gt=j._.getBoundTextElementPosition(zn,Dt);return[].concat((0,m.Z)(Ln),[ie(ie({},Dt),Gt)])},[]),me=(0,y.v2)(re.map(function(Ln){return Ln.orig}).concat(ae)),he=me.minX,se=me.minY,ge=me.maxX,X=me.maxY,we=me.midX,be=me.midY,le=fe,ye=ce?[we,be]:{ne:[he,X],se:[he,se],sw:[ge,se],nw:[ge,X]}[le],ue=(0,v.Z)(ye,2),xe=ue[0],Pe=ue[1],Ne=Math.max(Math.abs(U-xe)/(ge-he)||0,Math.abs(ve-Pe)/(X-se)||0)*(ce?2:1);if(Ne!==0){var Me,Re={ne:[U>=xe,ve<=Pe],se:[U>=xe,ve>=Pe],sw:[U<=xe,ve>=Pe],nw:[U<=xe,ve<=Pe]}[le].map(function(Ln){return Ln?1:-1}),We=(0,v.Z)(Re,2),Se=We[0],Be=We[1],_e=Se<0,ze=Be<0,Ve=[],ut=ee(re);try{for(ut.s();!(Me=ut.n()).done;){var Ie=Me.value,ot=Ie.orig,Ye=Ie.latest;if(!(0,S.iB)(ot)||!(0,S.Xh)(ot)){var Ke=ot.width*Ne,tt=ot.height*Ne,pt=te(ot.angle*Se*Be),St=(0,S.bt)(ot)||(0,S.F9)(ot),Kt=ot.x-xe,sn=ot.y-Pe,nn=xe+Se*(Kt*Ne+(_e&&!St?Ke:0)),Cn=Pe+Be*(sn*Ne+(ze&&!St?tt:0)),vn=B(ot,Ke*Se,tt*Be,!1),Fe=ie({x:nn,y:Cn,width:Ke,height:tt,angle:pt},vn);(0,S.pC)(ot)&&re.length===1&&(Fe.scale=[ot.scale[0]*Se,ot.scale[1]*Be]),(0,S.bt)(ot)&&(_e||ze)&&function(){var Ln=(0,y.Ut)(ot,ot.points),Wn=(0,y.Ut)(ie(ie({},ot),{},{x:nn,y:Cn}),vn.points),Rn=[ot.x,ot.y],zn=[nn,Cn],Et=function(Dt){var Gt=Dt==="x"?0:1;return(Wn[Gt+2]-zn[Gt]-(Rn[Gt]-Ln[Gt])*Ne+(Ln[Gt+2]-Rn[Gt])*Ne-(zn[Gt]-Wn[Gt]))/2};_e&&(Fe.x-=Et("x")),ze&&(Fe.y-=Et("y"))}();var et=null,st=(0,L.WJ)(Ye);if(st||(0,S.iB)(ot)){var ht=ie(ie({},Ye),{},{width:Ke,height:tt}),_t=H(st??ot,st?(0,L.iZ)(ht):ht.width,st?(0,L.D9)(ht,st):ht.height);if(!_t)return;(0,S.iB)(ot)&&(Fe.fontSize=_t.size,Fe.baseline=_t.baseline),st&&(et={element:st,fontSize:_t.size,baseline:_t.baseline})}Ve.push({element:Ye,update:Fe,boundText:et})}}}catch(Ln){ut.e(Ln)}finally{ut.f()}for(var Zt=Ve.map(function(Ln){return Ln.element}),Yt=0,bn=Ve;Yt<bn.length;Yt++){var Wt=bn[Yt],un=Wt.element,jn=Wt.update,Hn=Wt.boundText,vt=jn.width,Nt=jn.height,Tt=jn.angle;if((0,C.DR)(un,jn,!1),(0,A.Ww)(un,{simultaneouslyUpdated:Zt,newSize:{width:vt,height:Nt}}),Hn){var cn=Hn.element,Ot=(0,g.Z)(Hn,$);(0,C.DR)(cn,ie(ie({},Ot),{},{angle:(0,S.bt)(un)?void 0:Tt}),!1),(0,L.RB)(un,fe)}}(oe=T.Z.getScene(Ve[0].element))===null||oe===void 0||oe.informMutation()}},E=function(z,q,fe,ce,U,ve,oe){var re,ae=5*Math.PI/2+Math.atan2(ce-oe,fe-ve);U&&(ae+=w.ay/2,ae-=ae%w.ay),q.filter(function(me){return me.type!=="frame"}).forEach(function(me){var he,se,ge=(0,y.qf)(me),X=(0,v.Z)(ge,4),we=X[0],be=X[1],le=(we+X[2])/2,ye=(be+X[3])/2,ue=(he=(se=z.originalElements.get(me.id))===null||se===void 0?void 0:se.angle)!==null&&he!==void 0?he:me.angle,xe=(0,k.U1)(le,ye,ve,oe,ae+ue-me.angle),Pe=(0,v.Z)(xe,2),Ne=Pe[0],Me=Pe[1];(0,C.DR)(me,{x:me.x+(Ne-le),y:me.y+(Me-ye),angle:te(ae+ue)},!1),(0,A.Ww)(me,{simultaneouslyUpdated:q});var Re=(0,L.WJ)(me);Re&&!(0,S.Yv)(me)&&(0,C.DR)(Re,{x:Re.x+(Ne-le),y:Re.y+(Me-ye),angle:te(ae+ue)},!1)}),(re=T.Z.getScene(q[0]))===null||re===void 0||re.informMutation()},W=function(z,q,fe,ce){var U=q.length===1?(0,y.qf)(q[0]):(0,y.KP)(q),ve=(0,v.Z)(U,4),oe=ve[0],re=ve[1],ae=ve[2],me=ve[3],he=(oe+ae)/2,se=(re+me)/2,ge=q.length===1?q[0].angle:0,X=(0,k.U1)(fe,ce,he,se,-ge),we=(0,v.Z)(X,2);switch(fe=we[0],ce=we[1],z){case"n":return(0,k.U1)(fe-(oe+ae)/2,ce-re,0,0,ge);case"s":return(0,k.U1)(fe-(oe+ae)/2,ce-me,0,0,ge);case"w":return(0,k.U1)(fe-oe,ce-(re+me)/2,0,0,ge);case"e":return(0,k.U1)(fe-ae,ce-(re+me)/2,0,0,ge);case"nw":return(0,k.U1)(fe-oe,ce-re,0,0,ge);case"ne":return(0,k.U1)(fe-ae,ce-re,0,0,ge);case"sw":return(0,k.U1)(fe-oe,ce-me,0,0,ge);case"se":return(0,k.U1)(fe-ae,ce-me,0,0,ge);default:return[0,0]}},F=function(z,q){var fe=(0,v.Z)(q.points,2),ce=(0,v.Z)(fe[1],2),U=ce[0],ve=ce[1];return z==="nw"&&(U<0||ve<0)||z==="ne"&&U>=0||z==="sw"&&U<=0||z==="se"&&(U>0||ve>0)?"end":"origin"}},5710:function(f,h,c){c.d(h,{$2:function(){return Y},AT:function(){return ve},D9:function(){return Ne},FE:function(){return H},HE:function(){return he},H_:function(){return X},NS:function(){return xe},OW:function(){return le},P7:function(){return D},PT:function(){return We},R8:function(){return R},RB:function(){return B},Rg:function(){return E},TP:function(){return se},WJ:function(){return ae},X1:function(){return V},Zr:function(){return ue},aV:function(){return be},bG:function(){return ie},cn:function(){return we},cw:function(){return ge},eB:function(){return Me},iZ:function(){return Pe},lD:function(){return fe},mY:function(){return z},oN:function(){return Z},tl:function(){return me},w_:function(){return W},xB:function(){return re}});var g,m=c(2577),b=c(1930),v=c(7169),w=c(6340),_=c(1935),k=c(2335),y=c(1564),S=c(1047),C=c(1974),I=c(6938),A=c(75),T=c(2325),L=c(6906);function j(Se,Be){var _e=Object.keys(Se);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(Se);Be&&(ze=ze.filter(function(Ve){return Object.getOwnPropertyDescriptor(Se,Ve).enumerable})),_e.push.apply(_e,ze)}return _e}function $(Se){for(var Be=1;Be<arguments.length;Be++){var _e=arguments[Be]!=null?arguments[Be]:{};Be%2?j(Object(_e),!0).forEach(function(ze){(0,v.Z)(Se,ze,_e[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(_e)):j(Object(_e)).forEach(function(ze){Object.defineProperty(Se,ze,Object.getOwnPropertyDescriptor(_e,ze))})}return Se}var ee,Q,pe=(0,c(451).B)(),ie=function(Se){return Se.replace(/\t/g,"        ").replace(/\r?\n|\r/g,`
`)},te=function(Se){return ie(Se).split(`
`)},Z=function(Se,Be){var _e=void 0,ze={x:Se.x,y:Se.y,text:Se.text,width:Se.width,height:Se.height,baseline:Se.baseline};ze.text=Se.text,Be&&(_e=Pe(Be),ze.text=fe(Se.originalText,(0,w.mO)(Se),_e));var Ve=V(ze.text,(0,w.mO)(Se),Se.lineHeight);if(ze.width=Ve.width,ze.height=Ve.height,ze.baseline=Ve.baseline,Be){var ut=he(Be),Ie=Ne(Be,Se),ot=ut.height;Ve.height>Ie&&(ot=xe(Ve.height,Be.type),(0,_.DR)(Be,{height:ot}),(0,L.h_)(Be.id,ot));var Ye=$($({},Se),ze),Ke=H(Be,Ye),tt=Ke.x,pt=Ke.y;ze.x=tt,ze.y=pt}(0,_.DR)(Se,ze)},D=function(Se,Be,_e){var ze=(0,w.xn)(Se);Be.forEach(function(Ve){var ut=_e.get(Ve.id),Ie=re(Ve);if(Ie){var ot=_e.get(Ie);if(ot){var Ye=ze.get(ut);Ye&&(0,_.DR)(Ye,{boundElements:(Ve.boundElements||[]).filter(function(tt){return tt.id!==ot&&tt.id!==Ie}).concat({type:"text",id:ot})});var Ke=ze.get(ot);Ke&&(0,S.iB)(Ke)&&(0,_.DR)(Ke,{containerId:Ye?ut:null})}}})},B=function(Se,Be){var _e=re(Se);if(_e){(0,L.kT)(Se.id);var ze=y.Z.getScene(Se).getElement(_e);if(ze&&ze.text){if(!Se)return;var Ve=(ze=y.Z.getScene(Se).getElement(_e)).text,ut=ze.height,Ie=ze.width,ot=he(Se),Ye=Pe(Se),Ke=Ne(Se,ze),tt=ot.height,pt=ze.baseline;if(Be!=="n"&&Be!=="s"){Ve&&(Ve=fe(ze.originalText,(0,w.mO)(ze),Ye));var St=V(Ve,(0,w.mO)(ze),ze.lineHeight);ut=St.height,Ie=St.width,pt=St.baseline}if(ut>Ke){var Kt=(tt=xe(ut,Se.type))-ot.height,sn=(0,C.Yv)(Se)||Be!=="ne"&&Be!=="nw"&&Be!=="n"?Se.y:Se.y-Kt;(0,_.DR)(Se,{height:tt,y:sn})}(0,_.DR)(ze,{text:Ve,width:Ie,height:ut,baseline:pt}),(0,C.Yv)(Se)||(0,_.DR)(ze,H(Se,ze))}}},H=function(Se,Be){if((0,C.Yv)(Se))return I._.getBoundTextElementPosition(Se,Be);var _e,ze=ge(Se),Ve=Ne(Se,Be),ut=Pe(Se);return _e=Be.verticalAlign===k.oX.TOP?ze.y:Be.verticalAlign===k.oX.BOTTOM?ze.y+(Ve-Be.height):ze.y+(Ve/2-Be.height/2),{x:Be.textAlign===k.I8.LEFT?ze.x:Be.textAlign===k.I8.RIGHT?ze.x+(ut-Be.width):ze.x+(ut/2-Be.width/2),y:_e}},V=function(Se,Be,_e){Se=Se.split(`
`).map(function(ut){return ut||" "}).join(`
`);var ze=parseFloat(Be),Ve=q(Se,ze,_e);return{width:z(Se,Be),height:Ve,baseline:R(Se,Be,_e)}},R=function(Se,Be,_e,ze){var Ve=document.createElement("div");Ve.style.position="absolute",Ve.style.whiteSpace="pre",Ve.style.font=Be,Ve.style.minHeight="1em",ze&&(Ve.style.overflow="hidden",Ve.style.wordBreak="break-word",Ve.style.whiteSpace="pre-wrap"),Ve.style.lineHeight=String(_e),Ve.innerText=Se,document.body.appendChild(Ve);var ut=document.createElement("span");ut.style.display="inline-block",ut.style.overflow="hidden",ut.style.width="1px",ut.style.height="1px",Ve.appendChild(ut);var Ie=ut.offsetTop+ut.offsetHeight,ot=Ve.offsetHeight;if(k.G6){var Ye=q(Se,parseFloat(Be),_e),Ke=parseFloat(Be),tt=q(Se,Math.round(Ke),_e);Ye>ot&&(Ie+=Ye-tt),ot>Ye&&(Ie-=tt-Ye)}return document.body.removeChild(Ve),Ie},Y=function(Se){var Be=te(Se.text).length;return Se.height/Be/Se.fontSize},E=function(Se,Be){return Se*Be},W=function(Se,Be){return E(Se,Be)+2*k.gK},F=function(Se,Be){ee||(ee=document.createElement("canvas"));var _e=ee.getContext("2d");_e.font=Be;var ze=_e.measureText(Se).width;return(0,w.h2)()?10*ze:ze},z=function(Se,Be){var _e=te(Se),ze=0;return _e.forEach(function(Ve){ze=Math.max(ze,F(Ve,Be))}),ze},q=function(Se,Be,_e){var ze=te(Se).length;return E(Be,_e)*ze},fe=function(Se,Be,_e){if(!Number.isFinite(_e)||_e<0)return Se;var ze=[],Ve=Se.split(`
`),ut=F(" ",Be),Ie="",ot=0,Ye=function(tt){tt.trim()&&ze.push(tt)},Ke=function(){Ie="",ot=0};return Ve.forEach(function(tt){if(z(tt,Be)<=_e)ze.push(tt);else{var pt=function(Fe){var et=Fe.split("-");return et.length>1&&et.forEach(function(st,ht){ht!==et.length-1&&(et[ht]=st+="-")}),et.join(" ").split(" ")}(tt);Ke();for(var St=0;St<pt.length;){var Kt=F(pt[St],Be);if(Kt===_e)Ye(pt[St]),St++;else if(Kt>_e){for(Ye(Ie),Ke();pt[St].length>0;){var sn=String.fromCodePoint(pt[St].codePointAt(0)),nn=ce.calculate(sn,Be);ot+=nn,pt[St]=pt[St].slice(sn.length),ot>=_e?(Ye(Ie),Ie=sn,ot=nn):Ie+=sn}ot+ut>=_e?(Ye(Ie),Ke()):Ie.endsWith("-")||(Ie+=" ",ot+=ut),St++}else for(;ot<_e&&St<pt.length;){var Cn=pt[St];if((ot=F(Ie+Cn,Be))>_e){Ye(Ie),Ke();break}St++;var vn=!Cn.endsWith("-");if(Ie+=Cn,vn&&(Ie+=" "),ot+ut>=_e){vn?ze.push(Ie.slice(0,-1)):ze.push(Ie),Ke();break}}}Ie.slice(-1)===" "&&(Ie=Ie.slice(0,-1),Ye(Ie))}}),ze.join(`
`)},ce=(Q={},{calculate:function(Se,Be){var _e=Se.charCodeAt(0);if(Q[Be]||(Q[Be]=[]),!Q[Be][_e]){var ze=F(Se,Be);Q[Be][_e]=ze}return Q[Be][_e]},getCache:function(Se){return Q[Se]}}),U="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),ve=function(Se,Be){var _e=oe(Se);return _e===0?V(U.split("").join(`
`),Se,Be).width+2*k.gK:_e+2*k.gK},oe=function(Se){var Be=ce.getCache(Se);if(!Be)return 0;var _e=Be.filter(function(ze){return ze!==void 0});return Math.max.apply(Math,(0,b.Z)(_e))},re=function(Se){var Be,_e,ze;return Se!=null&&(Be=Se.boundElements)!==null&&Be!==void 0&&Be.length&&(Se==null||(_e=Se.boundElements)===null||_e===void 0||(ze=_e.filter(function(Ve){return Ve.type==="text"})[0])===null||ze===void 0?void 0:ze.id)||null},ae=function(Se){if(!Se)return null;var Be,_e=re(Se);return _e&&((Be=y.Z.getScene(Se))===null||Be===void 0?void 0:Be.getElement(_e))||null},me=function(Se){return Se&&Se.containerId&&((Be=y.Z.getScene(Se))===null||Be===void 0?void 0:Be.getElement(Se.containerId))||null;var Be},he=function(Se){return(0,C.Yv)(Se)?{width:Math.max(Se.width,300),height:Se.height}:{width:Se.width,height:Se.height}},se=function(Se,Be){if(!(0,C.Yv)(Se))return{x:Se.x+Se.width/2,y:Se.y+Se.height/2};var _e=I._.getPointsGlobalCoordinates(Se);if(_e.length%2==1){var ze=Math.floor(Se.points.length/2),Ve=I._.getPointGlobalCoordinates(Se,Se.points[ze]);return{x:Ve[0],y:Ve[1]}}var ut=Se.points.length/2-1,Ie=I._.getEditorMidPoints(Se,Be)[ut];return Ie||(Ie=I._.getSegmentMidPoint(Se,_e[ut],_e[ut+1],ut+1)),{x:Ie[0],y:Ie[1]}},ge=function(Se){var Be=k.gK,_e=k.gK;return Se.type==="ellipse"&&(Be+=Se.width/2*(1-Math.sqrt(2)/2),_e+=Se.height/2*(1-Math.sqrt(2)/2)),Se.type==="diamond"&&(Be+=Se.width/4,_e+=Se.height/4),{x:Se.x+Be,y:Se.y+_e}},X=function(Se){var Be=me(Se);return!Be||(0,C.Yv)(Be)?Se.angle:Be.angle},we=function(Se){return Se.some(function(Be){if((0,C.Xh)(Be)){var _e=me(Be);return!(0,S.iB)(Be)||!(0,C.Yv)(_e)}return!1})},be=function(Se){return Se.some(function(Be){if((0,C.Xh)(Be)){var _e=me(Be);return!(0,S.iB)(Be)||!(0,C.Yv)(_e)}return(0,S.iB)(Be)})},le=function(Se,Be,_e,ze){var Ve=(0,A.eD)(Se,Be);if(Ve.length===1)return(0,C.mG)(Ve[0],!1)?Ve[0]:null;for(var ut=null,Ie=Se.length-1;Ie>=0;--Ie)if(!Se[Ie].isDeleted){var ot=(0,S.qf)(Se[Ie]),Ye=(0,m.Z)(ot,4),Ke=Ye[0],tt=Ye[1],pt=Ye[2],St=Ye[3];if((0,C.Yv)(Se[Ie])&&(0,T.Qu)(Se[Ie],Be,null,[_e,ze])){ut=Se[Ie];break}if(Ke<_e&&_e<pt&&tt<ze&&ze<St){ut=Se[Ie];break}}return(0,C.mG)(ut,!1)?ut:null},ye=new Set(["rectangle","ellipse","diamond","arrow"]),ue=function(Se){return ye.has(Se.type)},xe=function(Se,Be){Se=Math.ceil(Se);var _e=2*k.gK;return Be==="ellipse"?Math.round((Se+_e)/Math.sqrt(2)*2):Be==="arrow"?Se+8*_e:Be==="diamond"?2*(Se+_e):Se+_e},Pe=function(Se){var Be=he(Se).width;return(0,C.Yv)(Se)?Be-8*k.gK*2:Se.type==="ellipse"?Math.round(Be/2*Math.sqrt(2))-2*k.gK:Se.type==="diamond"?Math.round(Be/2)-2*k.gK:Be-2*k.gK},Ne=function(Se,Be){var _e=he(Se).height;return(0,C.Yv)(Se)?_e-8*k.gK*2<=0?Be.height:_e:Se.type==="ellipse"?Math.round(_e/2*Math.sqrt(2))-2*k.gK:Se.type==="diamond"?Math.round(_e/2)-2*k.gK:_e-2*k.gK},Me=function(){return z(U,(0,w.mO)({fontSize:k.n5,fontFamily:k.rk}))>0},Re=(g={},(0,v.Z)(g,pe[k.Zj],1.25),(0,v.Z)(g,pe.Helvetica,1.15),(0,v.Z)(g,pe.Cascadia,1.2),g),We=function(Se){return Se in Re?Re[Se]:Re[k.rk]}},6906:function(f,h,c){c.d(h,{b_:function(){return B},eR:function(){return D},h_:function(){return te},kT:function(){return Z}});var g=c(8950),m=c(7169),b=c(2577),v=c(2975),w=c.n(v),_=c(6066),k=c(6340),y=c(1564),S=c(1974),C=c(2335),I=c(1935),A=c(5710),T=c(7306),L=c(2416),j=c(6938),$=c(6665);function ee(H,V){var R=Object.keys(H);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(H);V&&(Y=Y.filter(function(E){return Object.getOwnPropertyDescriptor(H,E).enumerable})),R.push.apply(R,Y)}return R}function Q(H){for(var V=1;V<arguments.length;V++){var R=arguments[V]!=null?arguments[V]:{};V%2?ee(Object(R),!0).forEach(function(Y){(0,m.Z)(H,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(R)):ee(Object(R)).forEach(function(Y){Object.defineProperty(H,Y,Object.getOwnPropertyDescriptor(R,Y))})}return H}var pe=function(H,V,R,Y,E,W){var F=Y.zoom,z=180*R/Math.PI,q=H*(F.value-1)/2,fe=V*(F.value-1)/2;return H>E&&F.value!==1&&(q=E*(F.value-1)/2),V>W&&F.value!==1&&(fe=W*(F.value-1)/2),"translate(".concat(q,"px, ").concat(fe,"px) scale(").concat(F.value,") rotate(").concat(z,"deg)")},ie={},te=function(H,V){var R=ie[H]||(ie[H]={height:V});return R.height=V,R},Z=function(H){ie[H]&&delete ie[H]},D=function(H){var V,R;return(V=(R=ie[H])===null||R===void 0?void 0:R.height)!==null&&V!==void 0?V:null},B=function(H){var V=H.id,R=H.onChange,Y=H.onSubmit,E=H.getViewportCoords,W=H.element,F=H.canvas,z=H.excalidrawContainer,q=H.app,fe=function(){var Pe,Ne=q.state,Me=(Pe=y.Z.getScene(W))===null||Pe===void 0?void 0:Pe.getElement(V);if(Me){var Re=Me.textAlign,We=Me.verticalAlign;if(Me&&(0,S.iB)(Me)){var Se=Me.x,Be=Me.y,_e=(0,A.tl)(Me),ze=Me.width,Ve=Me.height,ut=Me.width,Ie=Me.height;if(_e&&Me.containerId){if((0,S.Yv)(_e)){var ot=j._.getBoundTextElementPosition(_e,Me);Se=ot.x,Be=ot.y}var Ye,Ke=function(Zt,Yt){if(!Yt.style.fontFamily||!Yt.style.fontSize)return!1;var bn=Yt.style.fontFamily.replace(/"/g,"");return(0,k.$g)({fontFamily:Zt.fontFamily})!==bn||"".concat(Zt.fontSize,"px")!==Yt.style.fontSize}(Me,ce),tt=(0,A.HE)(_e);if(Ke?Ye=te(_e.id,tt.height):(Ye=ie[_e.id])||(Ye=te(_e.id,tt.height)),ze=(0,A.iZ)(_e),Ve=(0,A.D9)(_e,Me),!(0,S.Yv)(_e)&&Ie>Ve){var pt=(0,A.NS)(Ie,_e.type);return void(0,I.DR)(_e,{height:pt})}if(!(0,S.Yv)(_e)&&tt.height>Ye.height&&Ie<Ve){var St=(0,A.NS)(Ie,_e.type);(0,I.DR)(_e,{height:St})}else Be=(0,A.FE)(_e,Me).y}var Kt=E(Se,Be),sn=(0,b.Z)(Kt,2),nn=sn[0],Cn=sn[1],vn=ce.selectionStart,Fe=ce.selectionEnd,et=ce.value.length;if(vn===Fe&&Fe!==et){var st=et-Fe;ce.selectionStart=ce.value.length-st,ce.selectionEnd=ce.value.length-st}_e?ut+=.5:(ze=(Ne.width-8-nn)/Ne.zoom.value,ut=Math.min(ut,ze));var ht=Me.lineHeight;C.G6&&(ht=(0,A.$2)(Q(Q({},Me),{},{fontSize:Math.round(Me.fontSize)})));var _t=(Ne.height-Cn)/Ne.zoom.value;Object.assign(ce.style,{font:(0,k.mO)(Me),lineHeight:ht,width:"".concat(ut,"px"),height:"".concat(Ie,"px"),left:"".concat(nn,"px"),top:"".concat(Cn,"px"),transform:pe(ut,Ie,(0,A.H_)(Me),Ne,ze,_t),textAlign:Re,verticalAlign:We,color:Me.strokeColor,opacity:Me.opacity/100,filter:"var(--theme-filter)",maxHeight:"".concat(_t,"px")}),ce.scrollTop=0,(0,k.h2)()&&(ce.style.fontFamily=(0,k.$g)(Me)),(0,I.DR)(Me,{x:Se,y:Be})}}},ce=document.createElement("textarea");ce.dir="auto",ce.tabIndex=0,ce.dataset.type="wysiwyg",ce.wrap="off",ce.classList.add("excalidraw-wysiwyg");var U="pre",ve="normal";(0,S.Xh)(W)&&(U="pre-wrap",ve="break-word"),Object.assign(ce.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:ve,whiteSpace:U,overflowWrap:"break-word",boxSizing:"content-box"}),ce.value=W.originalText,fe(),R&&(ce.onpaste=function(){var Pe=(0,g.Z)(w().mark(function Ne(Me){var Re,We,Se,Be,_e,ze;return w().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,(0,$.mQ)(Me,!0);case 2:if((Re=Ve.sent).text){Ve.next=5;break}return Ve.abrupt("return");case 5:if(We=(0,A.bG)(Re.text)){Ve.next=8;break}return Ve.abrupt("return");case 8:Se=(0,A.tl)(W),Be=(0,k.mO)({fontSize:q.state.currentItemFontSize,fontFamily:q.state.currentItemFontFamily}),Se&&(_e=(0,A.lD)("".concat(ce.value).concat(We),Be,(0,A.iZ)(Se)),ze=(0,A.mY)(_e,Be),ce.style.width="".concat(ze,"px"));case 11:case"end":return Ve.stop()}},Ne)}));return function(Ne){return Pe.apply(this,arguments)}}(),ce.oninput=function(){R((0,A.bG)(ce.value))}),ce.onkeydown=function(Pe){if(!Pe.shiftKey&&L.Lo.keyTest(Pe))Pe.preventDefault(),q.actionManager.executeAction(L.Lo),fe();else if(!Pe.shiftKey&&L.CZ.keyTest(Pe))Pe.preventDefault(),q.actionManager.executeAction(L.CZ),fe();else if(T.Tu.keyTest(Pe))q.actionManager.executeAction(T.Tu);else if(T.Zq.keyTest(Pe))q.actionManager.executeAction(T.Zq);else if(Pe.key===_.tW.ESCAPE)Pe.preventDefault(),ge=!0,X();else if(Pe.key===_.tW.ENTER&&Pe[_.tW.CTRL_OR_CMD]){if(Pe.preventDefault(),Pe.isComposing||Pe.keyCode===229)return;ge=!0,X()}else if(Pe.key===_.tW.TAB||Pe[_.tW.CTRL_OR_CMD]&&(Pe.code===_.aU.BRACKET_LEFT||Pe.code===_.aU.BRACKET_RIGHT)){if(Pe.preventDefault(),Pe.isComposing)return;Pe.shiftKey||Pe.code===_.aU.BRACKET_LEFT?me():ae(),ce.dispatchEvent(new Event("input"))}};var oe=" ".repeat(4),re=new RegExp("^ {1,".concat(4,"}")),ae=function(){var Pe=ce.selectionStart,Ne=ce.selectionEnd,Me=he(),Re=ce.value;Me.forEach(function(We){var Se=Re.slice(0,We),Be=Re.slice(We);Re="".concat(Se).concat(oe).concat(Be)}),ce.value=Re,ce.selectionStart=Pe+4,ce.selectionEnd=Ne+4*Me.length},me=function(){var Pe=ce.selectionStart,Ne=ce.selectionEnd,Me=he(),Re=[],We=ce.value;Me.forEach(function(Se){var Be=We.slice(Se,Se+4).match(re);if(Be){var _e=We.slice(0,Se),ze=We.slice(Se+Be[0].length);We="".concat(_e).concat(ze),Re.push(Se)}}),ce.value=We,Re.length&&(Pe>Re[Re.length-1]?ce.selectionStart=Math.max(Pe-4,Re[Re.length-1]):ce.selectionStart=Pe,ce.selectionEnd=Math.max(ce.selectionStart,Ne-4*Re.length))},he=function(){var Pe=ce.selectionStart,Ne=ce.selectionEnd,Me=ce.value,Re=Me.slice(0,Pe).match(/[^\n]*$/)[0].length;return Pe-=Re,Me.slice(Pe,Ne).split(`
`).reduce(function(We,Se,Be,_e){return We.concat(Be?We[Be-1]+_e[Be-1].length+1:Pe)},[]).reverse()},se=function(Pe){Pe.preventDefault(),Pe.stopPropagation()},ge=!1,X=function(){var Pe;we();var Ne=(Pe=y.Z.getScene(W))===null||Pe===void 0?void 0:Pe.getElement(W.id);if(Ne){var Me=ce.value,Re=(0,A.tl)(Ne);if(Re){if(Me=Ne.text,ce.value.trim()){var We=(0,A.xB)(Re);We&&We===W.id||(0,I.DR)(Re,{boundElements:(Re.boundElements||[]).concat({type:"text",id:W.id})})}else{var Se;(0,I.DR)(Re,{boundElements:(Se=Re.boundElements)===null||Se===void 0?void 0:Se.filter(function(Be){return!(0,S.iB)(Be)})})}(0,A.oN)(Ne,Re)}Y({text:Me,viaKeyboard:ge,originalText:ce.value})}},we=function(){ue||(ue=!0,ce.onblur=null,ce.oninput=null,ce.onkeydown=null,xe&&xe.disconnect(),window.removeEventListener("resize",fe),window.removeEventListener("wheel",se,!0),window.removeEventListener("pointerdown",le),window.removeEventListener("pointerup",be),window.removeEventListener("blur",X),ye(),ce.remove())},be=function Pe(Ne){window.removeEventListener("pointerup",Pe);var Me=Ne==null?void 0:Ne.target,Re=Me instanceof HTMLElement&&Me.classList.contains("active-color");setTimeout(function(){if(ce.onblur=X,Re){var We=new MutationObserver(function(Se,Be){Se.find(function(_e){var ze;return _e.removedNodes.length>0&&((ze=_e.removedNodes[0].dataset)===null||ze===void 0?void 0:ze.radixPopperContentWrapper)!==void 0})&&(setTimeout(function(){ce.focus()}),Be.disconnect())});We.observe(document.querySelector(".excalidraw-container"),{childList:!0})}Re||ce.focus()})},le=function(Pe){var Ne=Pe.target instanceof HTMLElement&&Pe.target.classList.contains("active-color");((Pe.target instanceof HTMLElement||Pe.target instanceof SVGElement)&&Pe.target.closest(".".concat(C.$C.SHAPE_ACTIONS_MENU))&&!(0,k.s)(Pe.target)||Ne)&&(ce.onblur=null,window.addEventListener("pointerup",be),window.addEventListener("blur",X))},ye=y.Z.getScene(W).addCallback(function(){var Pe;fe(),!((Pe=document.activeElement)===null||Pe===void 0||!Pe.closest(".color-picker-content"))||ce.focus()}),ue=!1;ce.select(),be();var xe=null;F&&"ResizeObserver"in window?(xe=new window.ResizeObserver(function(){fe()})).observe(F):window.addEventListener("resize",fe),window.addEventListener("pointerdown",le),window.addEventListener("wheel",se,{passive:!1,capture:!0}),z==null||z.querySelector(".excalidraw-textEditorContainer").appendChild(ce)}},267:function(f,h,c){c.d(h,{Fn:function(){return S},PC:function(){return j},kK:function(){return L},oY:function(){return $},ox:function(){return y}});var g=c(2577),m=c(8925),b=c(6552),v=c(1047),w=c(1974),_=c(3547),k={mouse:8,pen:16,touch:28},y={e:!0,s:!0,n:!0,w:!0},S={e:!0,s:!0,n:!0,w:!0,rotation:!0},C={e:!0,s:!0,n:!0,w:!0},I={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},A={e:!0,s:!0,n:!0,w:!0},T=function(ee,Q,pe,ie,te,Z,D){var B=(0,b.U1)(ee+pe/2,Q+ie/2,te,Z,D),H=(0,g.Z)(B,2);return[H[0]-pe/2,H[1]-ie/2,pe,ie]},L=function(ee,Q,pe,ie){var te=(0,g.Z)(ee,6),Z=te[0],D=te[1],B=te[2],H=te[3],V=te[4],R=te[5],Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:4,W=k[ie],F=W/pe.value,z=W/pe.value,q=W/pe.value,fe=W/pe.value,ce=B-Z,U=H-D,ve=E/pe.value,oe=(W-2*_.Lu)/(2*pe.value),re={nw:Y.nw?void 0:T(Z-ve-q+oe,D-ve-fe+oe,F,z,V,R,Q),ne:Y.ne?void 0:T(B+ve-oe,D-ve-fe+oe,F,z,V,R,Q),sw:Y.sw?void 0:T(Z-ve-q+oe,H+ve-oe,F,z,V,R,Q),se:Y.se?void 0:T(B+ve-oe,H+ve-oe,F,z,V,R,Q),rotation:Y.rotation?void 0:T(Z+ce/2-F/2,D-ve-fe+oe-16/pe.value,F,z,V,R,Q)},ae=5*k.mouse/pe.value;return Math.abs(ce)>ae&&(Y.n||(re.n=T(Z+ce/2-F/2,D-ve-fe+oe,F,z,V,R,Q)),Y.s||(re.s=T(Z+ce/2-F/2,H+ve-oe,F,z,V,R,Q))),Math.abs(U)>ae&&(Y.w||(re.w=T(Z-ve-q+oe,D+U/2-z/2,F,z,V,R,Q)),Y.e||(re.e=T(B+ve-oe,D+U/2-z/2,F,z,V,R,Q))),re},j=function(ee,Q){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"mouse";if(ee.locked)return{};var ie={};if(ee.type==="freedraw"||(0,w.bt)(ee)){if(ee.points.length===2){var te=(0,g.Z)(ee.points,2),Z=te[1];Z[0]===0||Z[1]===0?ie=A:Z[0]>0&&Z[1]<0?ie=I:Z[0]>0&&Z[1]>0?ie=A:Z[0]<0&&Z[1]>0?ie=I:Z[0]<0&&Z[1]<0&&(ie=A)}}else(0,v.iB)(ee)?ie=C:(0,w.He)(ee)&&(ie={rotation:!0});var D=(0,w.bt)(ee)?_.Lu+8:_.Lu;return L((0,m.qf)(ee,!0),ee.angle,Q,pe,ie,D)},$=function(ee,Q){if(Q.editingLinearElement)return!1;if(ee.length>1)return!0;var pe=ee[0];return!(0,w.bt)(pe)||pe.points.length>2}},1974:function(f,h,c){c.d(h,{F9:function(){return _},He:function(){return w},Lx:function(){return A},Mn:function(){return I},QI:function(){return Q},UQ:function(){return ie},Xh:function(){return ee},Xo:function(){return $},Yv:function(){return S},bt:function(){return y},dt:function(){return C},eK:function(){return pe},f0:function(){return T},iB:function(){return v},mG:function(){return L},pC:function(){return b},r2:function(){return j},wi:function(){return m}});var g=c(2335),m=function(te){return!!te&&te.type==="image"&&!!te.fileId},b=function(te){return!!te&&te.type==="image"},v=function(te){return te!=null&&te.type==="text"},w=function(te){return te!=null&&te.type==="frame"},_=function(te){return te!=null&&k(te.type)},k=function(te){return te==="freedraw"},y=function(te){return te!=null&&C(te.type)},S=function(te){return te!=null&&te.type==="arrow"},C=function(te){return te==="arrow"||te==="line"},I=function(te){var Z=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return te!=null&&(!te.locked||Z===!0)&&A(te.type)},A=function(te){return te==="arrow"},T=function(te){var Z=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(te==null||te.locked&&Z!==!0||te.type!=="rectangle"&&te.type!=="diamond"&&te.type!=="ellipse"&&te.type!=="image"&&(te.type!=="text"||te.containerId))},L=function(te){var Z=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return te!=null&&(!te.locked||Z===!0)&&(te.type==="rectangle"||te.type==="diamond"||te.type==="ellipse"||S(te))},j=function(te){return(te==null?void 0:te.type)==="text"||(te==null?void 0:te.type)==="diamond"||(te==null?void 0:te.type)==="rectangle"||(te==null?void 0:te.type)==="ellipse"||(te==null?void 0:te.type)==="arrow"||(te==null?void 0:te.type)==="freedraw"||(te==null?void 0:te.type)==="line"},$=function(te){var Z;return L(te)&&!((Z=te.boundElements)===null||Z===void 0||!Z.some(function(D){return D.type==="text"}))},ee=function(te){return te!==null&&"containerId"in te&&te.containerId!==null&&v(te)},Q=function(te){return te==="rectangle"},pe=function(te,Z){return!(te!==g.a6.ADAPTIVE_RADIUS&&te!==g.a6.LEGACY||!Q(Z.type))||te===g.a6.PROPORTIONAL_RADIUS&&((D=Z.type)==="line"||D==="arrow"||D==="diamond");var D},ie=function(te){return te.type==="arrow"||te.type==="line"||te.type==="diamond"?{type:g.a6.PROPORTIONAL_RADIUS}:te.type==="rectangle"?{type:g.a6.ADAPTIVE_RADIUS}:null}},6797:function(f,h,c){c.d(h,{_:function(){return A},l:function(){return I}});var g=c(5169),m=c(8821),b=c(2248),v=c(7245),w=c(2312),_=c(5901);function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(T,L,j){return y=k()?Reflect.construct.bind():function($,ee,Q){var pe=[null];pe.push.apply(pe,ee);var ie=new(Function.bind.apply($,pe));return Q&&(0,_.Z)(ie,Q.prototype),ie},y.apply(null,arguments)}function S(T){var L=typeof Map=="function"?new Map:void 0;return S=function(j){if(j===null||($=j,Function.toString.call($).indexOf("[native code]")===-1))return j;var $;if(typeof j!="function")throw new TypeError("Super expression must either be null or a function");if(L!==void 0){if(L.has(j))return L.get(j);L.set(j,ee)}function ee(){return y(j,arguments,(0,w.Z)(this).constructor)}return ee.prototype=Object.create(j.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),(0,_.Z)(ee,j)},S(T)}function C(T){var L=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var j,$=(0,w.Z)(T);if(L){var ee=(0,w.Z)(this).constructor;j=Reflect.construct($,arguments,ee)}else j=$.apply(this,arguments);return(0,v.Z)(this,j)}}var I=function(T){(0,b.Z)(j,T);var L=C(j);function j(){var $,ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Couldn't export canvas.",Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"CANVAS_ERROR";return(0,m.Z)(this,j),($=L.call(this)).name=Q,$.message=ee,$}return(0,g.Z)(j)}(S(Error)),A=function(T){(0,b.Z)(j,T);var L=C(j);function j(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Request Aborted";return(0,m.Z)(this,j),L.call(this,$,"AbortError")}return(0,g.Z)(j)}(S(DOMException))},9040:function(f,h,c){c.d(h,{$Z:function(){return W},A_:function(){return F},Dn:function(){return H},Qs:function(){return oe},SH:function(){return V},Tq:function(){return ce},cH:function(){return ve},cO:function(){return B},fj:function(){return E},lz:function(){return z},ni:function(){return Y},pr:function(){return fe},wO:function(){return R},xr:function(){return ee},yZ:function(){return q}});var g=c(1930),m=c(2577),b=c(5169),v=c(8821),w=c(1047),_=c(6552),k=c(5710),y=c(6340),S=c(1935),C=c(75),I=c(7642),A=c(242),T=c(1564),L=c(8925);function j(re,ae){var me=typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(!me){if(Array.isArray(re)||(me=function(be,le){if(be){if(typeof be=="string")return $(be,le);var ye=Object.prototype.toString.call(be).slice(8,-1);if(ye==="Object"&&be.constructor&&(ye=be.constructor.name),ye==="Map"||ye==="Set")return Array.from(be);if(ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye))return $(be,le)}}(re))||ae&&re&&typeof re.length=="number"){me&&(re=me);var he=0,se=function(){};return{s:se,n:function(){return he>=re.length?{done:!0}:{done:!1,value:re[he++]}},e:function(be){throw be},f:se}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ge,X=!0,we=!1;return{s:function(){me=me.call(re)},n:function(){var be=me.next();return X=be.done,be},e:function(be){we=!0,ge=be},f:function(){try{X||me.return==null||me.return()}finally{if(we)throw ge}}}}function $(re,ae){(ae==null||ae>re.length)&&(ae=re.length);for(var me=0,he=new Array(ae);me<ae;me++)he[me]=re[me];return he}var ee=function(re,ae,me){var he,se=(0,y.xn)(re),ge=j(ae);try{for(ge.s();!(he=ge.n()).done;){var X=he.value;if(X.frameId){var we=me.get(X.id),be=me.get(X.frameId);if(we){var le=se.get(we);le&&(0,S.DR)(le,{frameId:be??X.frameId},!1)}}}}catch(ye){ge.e(ye)}finally{ge.f()}},Q=(0,b.Z)(function re(ae,me){(0,v.Z)(this,re),this.x=ae,this.y=me}),pe=function(){function re(ae,me){(0,v.Z)(this,re),this.first=ae,this.second=me}return(0,b.Z)(re,[{key:"getBoundingBox",value:function(){return[new Q(Math.min(this.first.x,this.second.x),Math.min(this.first.y,this.second.y)),new Q(Math.max(this.first.x,this.second.x),Math.max(this.first.y,this.second.y))]}}]),re}(),ie=function(){function re(){(0,v.Z)(this,re)}return(0,b.Z)(re,null,[{key:"crossProduct",value:function(ae,me){return ae.x*me.y-me.x*ae.y}},{key:"doBoundingBoxesIntersect",value:function(ae,me){return ae[0].x<=me[1].x&&ae[1].x>=me[0].x&&ae[0].y<=me[1].y&&ae[1].y>=me[0].y}},{key:"isPointOnLine",value:function(ae,me){var he=new pe(new Q(0,0),new Q(ae.second.x-ae.first.x,ae.second.y-ae.first.y)),se=new Q(me.x-ae.first.x,me.y-ae.first.y),ge=this.crossProduct(he.second,se);return Math.abs(ge)<this.EPSILON}},{key:"isPointRightOfLine",value:function(ae,me){var he=new pe(new Q(0,0),new Q(ae.second.x-ae.first.x,ae.second.y-ae.first.y)),se=new Q(me.x-ae.first.x,me.y-ae.first.y);return this.crossProduct(he.second,se)<0}},{key:"lineSegmentTouchesOrCrossesLine",value:function(ae,me){return this.isPointOnLine(ae,me.first)||this.isPointOnLine(ae,me.second)||(this.isPointRightOfLine(ae,me.first)?!this.isPointRightOfLine(ae,me.second):this.isPointRightOfLine(ae,me.second))}},{key:"doLineSegmentsIntersect",value:function(ae,me){var he=new pe(new Q(ae[0][0],ae[0][1]),new Q(ae[1][0],ae[1][1])),se=new pe(new Q(me[0][0],me[0][1]),new Q(me[1][0],me[1][1])),ge=he.getBoundingBox(),X=se.getBoundingBox();return this.doBoundingBoxesIntersect(ge,X)&&this.lineSegmentTouchesOrCrossesLine(he,se)&&this.lineSegmentTouchesOrCrossesLine(se,he)}},{key:"isElementIntersectingFrame",value:function(ae,me){var he=this,se=(0,L.GJ)(me),ge=(0,L.GJ)(ae);return se.some(function(X){return ge.some(function(we){return he.doLineSegmentsIntersect(X,we)})})}}]),re}();ie.EPSILON=1e-6;var te=function(re,ae){return U((0,C.Yp)(re,ae,!1)).filter(function(me){return me.type!=="frame"&&!me.frameId||me.frameId===ae.id})},Z=function(re,ae,me){return(0,C.Yp)(re,ae).some(function(he){return he.id===me.id})},D=function(re,ae){var me=(0,w.qf)(ae),he=(0,m.Z)(me,4),se=he[0],ge=he[1],X=he[2],we=he[3],be=(0,w.KP)(re),le=(0,m.Z)(be,4),ye=le[0],ue=le[1],xe=le[2],Pe=le[3];return se<=ye&&ge<=ue&&X>=xe&&we>=Pe},B=function(re,ae){return D([re],ae)||ie.isElementIntersectingFrame(re,ae)||Z([ae],re,ae)},H=function(re,ae){var me=(0,w.qf)(ae),he=(0,m.Z)(me,4),se=he[0],ge=he[1],X=he[2],we=he[3];return(0,_.Ni)([se,ge],[re.x,re.y],[X,we])},V=function(re){var ae,me=new Map,he=j(re);try{for(he.s();!(ae=he.n()).done;){var se=ae.value,ge=(0,w.He)(se)?se.id:se.frameId;ge&&!me.has(ge)&&me.set(ge,R(re,ge))}}catch(X){he.e(X)}finally{he.f()}return me},R=function(re,ae){return re.filter(function(me){return me.frameId===ae})},Y=function(re,ae,me){var he,se=R(re,ae.id),ge=new Set(se),X=new Set([].concat((0,g.Z)(te(re,ae)),(0,g.Z)(se.filter(function(vn){return Z(re,vn,ae)})))),we=se.filter(function(vn){return!X.has(vn)}),be=new Set(Array.from(X).flatMap(function(vn){return vn.groupIds})),le=j(we);try{for(le.s();!(he=le.n()).done;){var ye=he.value;if(ie.isElementIntersectingFrame(ye,ae)){if(ye.groupIds.length>0){var ue,xe=j(ye.groupIds);try{for(xe.s();!(ue=xe.n()).done;){var Pe=ue.value;be.add(Pe)}}catch(vn){xe.e(vn)}finally{xe.f()}}}else ye.groupIds.length===0&&ge.delete(ye)}}catch(vn){le.e(vn)}finally{le.f()}var Ne,Me=j(we);try{for(Me.s();!(Ne=Me.n()).done;){var Re=Ne.value;if(Re.groupIds.length>0){var We,Se=!0,Be=j(Re.groupIds);try{for(Be.s();!(We=Be.n()).done;){var _e=We.value;be.has(_e)&&(Se=!1)}}catch(vn){Be.e(vn)}finally{Be.f()}Se&&ge.delete(Re)}}}catch(vn){Me.e(vn)}finally{Me.f()}var ze,Ve=Array.from(X).filter(function(vn){return vn.groupIds.length===0}),ut=j(Ve);try{for(ut.s();!(ze=ut.n()).done;){var Ie=ze.value;ge.add(Ie)}}catch(vn){ut.e(vn)}finally{ut.f()}for(var ot=Array.from(X).filter(function(vn){return vn.groupIds.length>0}),Ye=(0,A.yR)(ot,me),Ke=0,tt=Object.entries(Ye);Ke<tt.length;Ke++){var pt=(0,m.Z)(tt[Ke],2),St=pt[0];if(pt[1]){var Kt=(0,A.Fb)(re,St);if(D(Kt,ae)){var sn,nn=j(Kt);try{for(nn.s();!(sn=nn.n()).done;){var Cn=sn.value;ge.add(Cn)}}catch(vn){nn.e(vn)}finally{nn.f()}}}}return(0,g.Z)(ge).filter(function(vn){return!((0,w.iB)(vn)&&vn.containerId)})},E=function(re,ae){return U(re,te(re,ae))},W=function(re,ae){var me;return re.frameId?ae?ae.get(re.frameId)||null:((me=T.Z.getScene(re))===null||me===void 0?void 0:me.getElement(re.frameId))||null:null},F=function(re,ae,me){var he,se=[],ge=j(ae);try{for(ge.s();!(he=ge.n()).done;){var X=he.value;se.push(X);var we=(0,k.WJ)(X);we&&se.push(we)}}catch(Pe){ge.e(Pe)}finally{ge.f()}var be,le=re.slice(),ye=(0,y.cx)(le,function(Pe){return Pe.frameId===me.id}),ue=j(U(re,se));try{var xe=function(){var Pe=be.value;if(Pe.frameId!==me.id&&!(0,w.He)(Pe)){(0,S.DR)(Pe,{frameId:me.id},!1);var Ne=(0,y.cx)(le,function(Re){return Re.id===me.id}),Me=(0,y.cx)(le,function(Re){return Re.id===Pe.id});Me<ye?le=[].concat((0,g.Z)(le.slice(0,Me)),(0,g.Z)(le.slice(Me+1,ye)),[Pe],(0,g.Z)(le.slice(ye))):Me>Ne&&(le=[].concat((0,g.Z)(le.slice(0,Ne)),[Pe],(0,g.Z)(le.slice(Ne,Me)),(0,g.Z)(le.slice(Me+1))))}};for(ue.s();!(be=ue.n()).done;)xe()}catch(Pe){ue.e(Pe)}finally{ue.f()}return le},z=function(re,ae,me){var he,se=[],ge=j(ae);try{for(ge.s();!(he=ge.n()).done;){var X=he.value;if(X.frameId){se.push(X);var we=(0,k.WJ)(X);we&&se.push(we)}}}catch(ue){ge.e(ue)}finally{ge.f()}for(var be=0,le=se;be<le.length;be++){var ye=le[be];(0,S.DR)(ye,{frameId:null},!1)}return(0,I.jY)(re,me,Array.from(se))},q=function(re,ae,me){var he=R(re,ae.id);return z(re,he,me)},fe=function(re,ae,me,he){return F(q(re,me,he),ae,me)},ce=function(re,ae){var me=(0,C.eD)(re,ae),he=new Set(me);if(ae.editingGroupId){var se,ge=j(me);try{for(ge.s();!(se=ge.n()).done;){var X=se.value;X.groupIds.length===0?he.add(X):X.groupIds.flatMap(function(be){return(0,A.Fb)(re,be)}).forEach(function(be){return he.add(be)})}}catch(be){ge.e(be)}finally{ge.f()}}var we=new Set;return he.forEach(function(be){!be.frameId||(0,w.He)(be)||oe(be,re,ae)||we.add(be)}),we.size>0?z(re,(0,g.Z)(we),ae):re},U=function(re,ae){var me,he=new Set,se=j(ae||re);try{for(se.s();!(me=se.n()).done;){var ge=me.value,X=ge.groupIds[ge.groupIds.length-1];X&&he.add(X)}}catch(ue){se.e(ue)}finally{se.f()}var we,be=new Set,le=j(he);try{for(le.s();!(we=le.n()).done;){var ye=we.value;(0,A.Fb)(re,ye).some(function(ue){return(0,w.He)(ue)})&&be.add(ye)}}catch(ue){le.e(ue)}finally{le.f()}return(ae||re).filter(function(ue){return!be.has(ue.groupIds[ue.groupIds.length-1])})},ve=function(re,ae){var me=(0,w.iB)(re)&&(0,k.tl)(re)||re;return ae.selectedElementIds[me.id]&&ae.selectedElementsAreBeingDragged?ae.frameToHighlight:W(me)},oe=function(re,ae,me){var he=ve(re,me),se=(0,w.iB)(re)&&(0,k.tl)(re)||re;if(he){if(se.groupIds.length===0)return B(se,he);var ge=new Set(se.groupIds.flatMap(function(Pe){return(0,A.Fb)(ae,Pe)}));if(me.editingGroupId&&me.selectedElementsAreBeingDragged){var X=new Set((0,C.eD)(ae,me));if(me.frameToHighlight!==null)return!0;X.forEach(function(Pe){ge.delete(Pe)})}var we,be=j(ge);try{for(be.s();!(we=be.n()).done;){var le=we.value;if((0,w.He)(le))return!1}}catch(Pe){be.e(Pe)}finally{be.f()}var ye,ue=j(ge);try{for(ue.s();!(ye=ue.n()).done;){var xe=ye.value;if(B(xe,he))return!0}}catch(Pe){ue.e(Pe)}finally{ue.f()}}return!1}},242:function(f,h,c){c.d(h,{AI:function(){return D},F$:function(){return C},Fb:function(){return Q},Nd:function(){return ee},Qy:function(){return ie},S_:function(){return te},YS:function(){return pe},bO:function(){return L},h6:function(){return Z},iE:function(){return $},iJ:function(){return T},yO:function(){return A},yR:function(){return j},zq:function(){return I}});var g=c(1930),m=c(2577),b=c(7169),v=c(75),w=c(5710);function _(B,H){var V=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!V){if(Array.isArray(B)||(V=function(z,q){if(z){if(typeof z=="string")return k(z,q);var fe=Object.prototype.toString.call(z).slice(8,-1);if(fe==="Object"&&z.constructor&&(fe=z.constructor.name),fe==="Map"||fe==="Set")return Array.from(z);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return k(z,q)}}(B))||H&&B&&typeof B.length=="number"){V&&(B=V);var R=0,Y=function(){};return{s:Y,n:function(){return R>=B.length?{done:!0}:{done:!1,value:B[R++]}},e:function(z){throw z},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E,W=!0,F=!1;return{s:function(){V=V.call(B)},n:function(){var z=V.next();return W=z.done,z},e:function(z){F=!0,E=z},f:function(){try{W||V.return==null||V.return()}finally{if(F)throw E}}}}function k(B,H){(H==null||H>B.length)&&(H=B.length);for(var V=0,R=new Array(H);V<H;V++)R[V]=B[V];return R}function y(B,H){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(B);H&&(R=R.filter(function(Y){return Object.getOwnPropertyDescriptor(B,Y).enumerable})),V.push.apply(V,R)}return V}function S(B){for(var H=1;H<arguments.length;H++){var V=arguments[H]!=null?arguments[H]:{};H%2?y(Object(V),!0).forEach(function(R){(0,b.Z)(B,R,V[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):y(Object(V)).forEach(function(R){Object.defineProperty(B,R,Object.getOwnPropertyDescriptor(V,R))})}return B}var C=function(B,H,V){var R=V.filter(function(Y){return Y.groupIds.includes(B)});return R.length<2?H.selectedGroupIds[B]||H.editingGroupId===B?S(S({},H),{},{selectedGroupIds:S(S({},H.selectedGroupIds),{},(0,b.Z)({},B,!1)),editingGroupId:null}):H:S(S({},H),{},{selectedGroupIds:S(S({},H.selectedGroupIds),{},(0,b.Z)({},B,!0)),selectedElementIds:S(S({},H.selectedElementIds),Object.fromEntries(R.map(function(Y){return[Y.id,!0]})))})},I=function(B,H){return A(B,H)!=null},A=function(B,H){return H.groupIds.filter(function(V){return V!==B.editingGroupId}).find(function(V){return B.selectedGroupIds[V]})},T=function(B){return Object.entries(B.selectedGroupIds).filter(function(H){var V=(0,m.Z)(H,2);return V[0],V[1]}).map(function(H){var V=(0,m.Z)(H,2),R=V[0];return V[1],R})},L=function(B,H){var V=S(S({},B),{},{selectedGroupIds:{}}),R=(0,v.eD)(H,B);if(!R.length)return S(S({},V),{},{editingGroupId:null});var Y,E=_(R);try{for(E.s();!(Y=E.n()).done;){var W=Y.value.groupIds;if(B.editingGroupId){var F=W.indexOf(B.editingGroupId);F>-1&&(W=W.slice(0,F))}if(W.length>0){var z=W[W.length-1];V=C(z,V,H)}}}catch(q){E.e(q)}finally{E.f()}return V},j=function(B,H){var V,R=S(S({},H),{},{selectedGroupIds:{}}),Y=_(B);try{for(Y.s();!(V=Y.n()).done;){var E=V.value.groupIds;if(H.editingGroupId){var W=E.indexOf(H.editingGroupId);W>-1&&(E=E.slice(0,W))}if(E.length>0){var F=E[E.length-1];R=C(F,R,B)}}}catch(z){Y.e(z)}finally{Y.f()}return R.selectedGroupIds},$=function(B,H){return S(S({},B),{},{editingGroupId:H.groupIds.length?H.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:(0,b.Z)({},H.id,!0)})},ee=function(B,H){return B.groupIds.includes(H)},Q=function(B,H){return B.filter(function(V){return ee(V,H)})},pe=function(B,H){return B.groupIds.find(function(V){return H[V]})},ie=function(B,H,V){for(var R=(0,g.Z)(B),Y=H?B.indexOf(H):-1,E=Y>-1?Y:B.length,W=0;W<E;W++)R[W]=V(R[W]);return R},te=function(B,H,V){var R=(0,g.Z)(B),Y=V?R.indexOf(V):-1,E=Y>-1?Y:R.length;return R.splice(E,0,H),R},Z=function(B,H){return B.filter(function(V){return!H[V]})},D=function(B){var H=new Map;return B.forEach(function(V){var R=V.groupIds.length===0?V.id:V.groupIds[V.groupIds.length-1],Y=H.get(R)||[],E=(0,w.WJ)(V);E&&Y.push(E),H.set(R,[].concat((0,g.Z)(Y),[V]))}),Array.from(H.values())}},8101:function(f,h,c){c.d(h,{F:function(){return _}});var g=c(1930),m=c(2577),b=c(9787),v=c(736),w=c(96),_=function(k){var y=(0,b.useState)(null),S=(0,m.Z)(y,2),C=S[0],I=S[1],A=(0,v.Fy)(),T=(0,w.I)().theme,L=(0,b.useRef)(A.isMobile);L.current=A.isMobile;var j=(0,v.J0)().container;return(0,b.useLayoutEffect)(function(){C&&C.classList.toggle("excalidraw--mobile",A.isMobile)},[C,A.isMobile]),(0,b.useLayoutEffect)(function(){var $,ee,Q=k!=null&&k.parentSelector?j==null?void 0:j.querySelector(k.parentSelector):document.body;if(Q){var pe=document.createElement("div");return($=pe.classList).add.apply($,["excalidraw"].concat((0,g.Z)((k==null||(ee=k.className)===null||ee===void 0?void 0:ee.split(/\s+/))||[]))),pe.classList.toggle("excalidraw--mobile",L.current),pe.classList.toggle("theme--dark",T==="dark"),Q.appendChild(pe),I(pe),function(){Q.removeChild(pe)}}},[j,T,k==null?void 0:k.className,k==null?void 0:k.parentSelector]),C}},6127:function(f,h,c){c.d(h,{YX:function(){return C},mF:function(){return A},yT:function(){return T}});var g=c(2577),m=c(8950),b=c(2975),v=c.n(b),w=c(6274),_=c(9787),k=c(56),y=c(9487),S=c(3024),C=(0,w.cn)(new Map),I=function(){var L=(0,m.Z)(v().mark(function j($){return v().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,S.$D)({elements:$,appState:{exportBackground:!1,viewBackgroundColor:k.HO.white},files:null});case 2:return ee.abrupt("return",ee.sent);case 3:case"end":return ee.stop()}},j)}));return function(j){return L.apply(this,arguments)}}(),A=function(L,j,$){var ee=(0,_.useState)(),Q=(0,g.Z)(ee,2),pe=Q[0],ie=Q[1];return(0,_.useEffect)(function(){if(j)if(L){var te=$.get(L);te?ie(te):(0,m.Z)(v().mark(function Z(){var D,B;return v().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,I(j);case 2:B=H.sent,(D=B.querySelector(".style-fonts"))===null||D===void 0||D.remove(),B&&($.set(L,B),ie(B));case 5:case"end":return H.stop()}},Z)}))()}else(0,m.Z)(v().mark(function Z(){var D;return v().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,I(j);case 2:D=B.sent,ie(D);case 4:case"end":return B.stop()}},Z)}))()},[L,j,$,ie]),pe},T=function(){var L=(0,w.KO)(C,y.yE),j=(0,g.Z)(L,1)[0];return{clearLibraryCache:function(){return j.clear()},deleteItemsFromLibraryCache:function($){$.forEach(function(ee){return j.delete(ee)})},svgCache:j}}},60:function(f,h,c){c.d(h,{O:function(){return b}});var g=c(9787),m=c(2335);function b(v,w,_){(0,g.useEffect)(function(){function k(y){var S=y;if(v.current){var C=_==null?void 0:_(S,v.current);if(C!==!0){if(C===!1)return w(S);!v.current.contains(S.target)&&document.documentElement.contains(S.target)&&(S.target.closest("[data-radix-portal]")||S.target===document.documentElement&&document.body.style.pointerEvents==="none"||S.target.closest("[data-prevent-outside-click]")||w(S))}}}return document.addEventListener(m.Ks.POINTER_DOWN,k),document.addEventListener(m.Ks.TOUCH_START,k),function(){document.removeEventListener(m.Ks.POINTER_DOWN,k),document.removeEventListener(m.Ks.TOUCH_START,k)}},[v,w,_])}},8211:function(f,h,c){c.d(h,{Fp:function(){return C},G3:function(){return $},Mj:function(){return I},QT:function(){return ie},m0:function(){return j},t:function(){return Q}});var g=c(8950),m=c(1930),b=c(2975),v=c.n(b),w=c(1463),_=c(4451),k=c(2335),y=c(9487),S=c(6274),C={code:"en",label:"English"},I=[C].concat((0,m.Z)([{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].filter(function(te){return _[te.code]>=85}).sort(function(te,Z){return te.label>Z.label?1:-1}))),A="__test__";k.Vi.DEVELOPMENT==="production"&&I.unshift({code:A,label:"test language"},{code:"".concat(A,".rtl"),label:"test language (rtl)",rtl:!0});var T=C,L={},j=function(){var te=(0,g.Z)(v().mark(function Z(D){return v().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(T=D,document.documentElement.dir=T.rtl?"rtl":"ltr",document.documentElement.lang=T.code,!D.code.startsWith(A)){B.next=7;break}L={},B.next=17;break;case 7:return B.prev=7,B.next=10,c(940)("./".concat(T.code,".json"));case 10:L=B.sent,B.next=17;break;case 13:B.prev=13,B.t0=B.catch(7),console.error("Failed to load language ".concat(D.code,":"),B.t0.message),L=w;case 17:y.e_.set(pe,D.code);case 18:case"end":return B.stop()}},Z,null,[[7,13]])}));return function(Z){return te.apply(this,arguments)}}(),$=function(){return T},ee=function(te,Z){for(var D=0;D<Z.length;++D){var B=Z[D];if(te[B]===void 0)return;te=te[B]}if(typeof te=="string")return te},Q=function(te,Z,D){if(T.code.startsWith(A)){var B=Z?"".concat(te,"(").concat(JSON.stringify(Z).slice(1,-1),")"):te;return"[[".concat(B,"]]")}var H=te.split("."),V=ee(L,H)||ee(w,H)||D;if(V===void 0){var R="Can't find translation for ".concat(te);return console.warn(R),""}if(Z)for(var Y in Z)V=V.replace("{{".concat(Y,"}}"),String(Z[Y]));return V},pe=(0,S.cn)(C.code),ie=function(){var te=(0,S.Dv)(pe,y.yE);return{t:Q,langCode:te}}},9487:function(f,h,c){c.d(h,{e_:function(){return b},yE:function(){return m}});var g=c(6274),m=(c(9787),Symbol()),b=(0,g.Vv)()},6066:function(f,h,c){c.d(h,{E0:function(){return _},Ge:function(){return k},OA:function(){return w},Wl:function(){return v},aU:function(){return m},tW:function(){return b}});var g=c(2335),m={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",NINE:"Digit9",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",R:"KeyR"},b={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:g.Um?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SUBTRACT:"-",A:"a",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},v=function(y){return y===b.ARROW_LEFT||y===b.ARROW_RIGHT||y===b.ARROW_DOWN||y===b.ARROW_UP},w=function(y){return y.altKey},_=function(y){return y.shiftKey},k=function(y){return y.shiftKey}},6552:function(f,h,c){c.d(h,{EK:function(){return Z},H5:function(){return y},Jj:function(){return te},LW:function(){return k},N_:function(){return ee},Ni:function(){return I},U1:function(){return v},c9:function(){return C},eH:function(){return pe},g6:function(){return S},lk:function(){return ie},wC:function(){return L},xj:function(){return w},yB:function(){return $},yW:function(){return j},yq:function(){return _}});var g=c(2335),m=c(5317),b=c(8925),v=function(D,B,H,V,R){return[(D-H)*Math.cos(R)-(B-V)*Math.sin(R)+H,(D-H)*Math.sin(R)+(B-V)*Math.cos(R)+V]},w=function(D,B,H){return v(D[0],D[1],B[0],B[1],H)},_=function(D,B,H,V,R,Y,E,W){var F=Math.cos(V),z=Math.sin(V);return D.e&&D.w?B+=R+E:D.e?(B+=R*(1+F),H+=R*z,B+=E*(1-F),H+=E*-z):D.w&&(B+=R*(1-F),H+=R*-z,B+=E*(1+F),H+=E*z),D.n&&D.s?H+=Y+W:D.n?(B+=Y*z,H+=Y*(1-F),B+=W*-z,H+=W*(1+F)):D.s&&(B+=Y*-z,H+=Y*(1+F),B+=W*z,H+=W*(1-F)),[B,H]},k=function(D,B,H,V){var R=H-D,Y=V-B;return Math.hypot(R,Y)},y=function(D,B){return[(D[0]+B[0])/2,(D[1]+B[1])/2]},S=function(D){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(D.length>=3){var H=[D[0],D[D.length-1]],V=H[0],R=H[1],Y=k(V[0],V[1],R[0],R[1]);return Y<=g.qx/B}return!1},C=function(D,B,H){var V=D.length;if(V<3)return!1;for(var R=[Number.MAX_SAFE_INTEGER,H],Y=[B,H],E=0,W=0;W<V;W++){var F=D[W],z=D[(W+1)%V];if(T(F,z,Y,R)){if(A(F,Y,z)===0)return I(F,Y,z);E++}}return E%2==1},I=function(D,B,H){return B[0]<=Math.max(D[0],H[0])&&B[0]>=Math.min(D[0],H[0])&&B[1]<=Math.max(D[1],H[1])&&B[1]>=Math.min(D[1],H[1])},A=function(D,B,H){var V=(B[1]-D[1])*(H[0]-B[0])-(B[0]-D[0])*(H[1]-B[1]);return V===0?0:V>0?1:2},T=function(D,B,H,V){var R=A(D,B,H),Y=A(D,B,V),E=A(H,V,D),W=A(H,V,B);return R!==Y&&E!==W||!(R!==0||!I(D,H,B))||!(Y!==0||!I(D,V,B))||!(E!==0||!I(H,D,V))||!(W!==0||!I(H,B,V))},L=function(D,B,H){return H?[Math.round(D/H)*H,Math.round(B/H)*H]:[D,B]},j=function(D,B){var H,V,R;if(((H=B.roundness)===null||H===void 0?void 0:H.type)===g.a6.PROPORTIONAL_RADIUS||((V=B.roundness)===null||V===void 0?void 0:V.type)===g.a6.LEGACY)return D*g.Rx;if(((R=B.roundness)===null||R===void 0?void 0:R.type)===g.a6.ADAPTIVE_RADIUS){var Y,E,W=(Y=(E=B.roundness)===null||E===void 0?void 0:E.value)!==null&&Y!==void 0?Y:g._9;return D<=W/g.Rx?D*g.Rx:W}return 0},$=function(D,B){var H=(0,m.R2)(D);if(!H)return null;for(var V=(0,b.CM)(H[0]),R=[0,0],Y=0,E=1/0,W=null;Y<V.length;){var F=V[Y],z=F.op,q=F.data;if(z==="move"&&(R=q),z==="bcurveTo"){var fe=R,ce=[q[0],q[1]],U=[q[2],q[3]],ve=[q[4],q[5]],oe=k(ve[0],ve[1],B[0],B[1]);oe<E&&(E=oe,W=[fe,ce,U,ve]),R=ve}Y++}return W},ee=function(D,B,H,V,R){var Y=function(E,W){return Math.pow(1-E,3)*V[W]+3*E*Math.pow(1-E,2)*H[W]+3*Math.pow(E,2)*(1-E)*B[W]+D[W]*Math.pow(E,3)};return[Y(R,0),Y(R,1)]},Q=function(D,B){var H=[];H[0]=0;for(var V=function(E,W){var F=$(E,W);if(!F)return[];for(var z=[],q=1;q>0;){var fe=ee(F[0],F[1],F[2],F[3],q);z.push([fe[0],fe[1]]),q-=.05}return z.length&&te(z.at(-1),W)&&z.push([W[0],W[1]]),z}(D,B),R=0,Y=0;R<V.length-1;)Y+=k(V[R][0],V[R][1],V[R+1][0],V[R+1][1]),H.push(Y),R++;return H},pe=function(D,B){return Q(D,B).at(-1)},ie=function(D,B,H){for(var V=Q(D,B),R=V.length-1,Y=H*V.at(-1),E=0,W=R,F=0;E<W;)V[F=Math.floor(E+(W-E)/2)]<Y?E=F+1:W=F;return V[F]>Y&&F--,V[F]===Y?F/R:1-(F+(Y-V[F])/(V[F+1]-V[F]))/R},te=function(D,B){return D[0]===B[0]&&D[1]===B[1]},Z=function(D){return Math.round(D/Math.PI*1e4)%5e3==0}},3024:function(f,h,c){c.d(h,{$D:function(){return Z},Fl:function(){return te},I_:function(){return C.I_},N7:function(){return j.N7},NI:function(){return C.NI},NL:function(){return ie},ZY:function(){return L.ZY},cT:function(){return L.cT},i1:function(){return D},lV:function(){return L.lV},zh:function(){return $.zh}});var g=c(8950),m=c(7169),b=c(2975),v=c.n(b),w=c(4162),_=c(8897),k=c(679),y=c(2335),S=c(673),C=c(5523),I=c(6665),A=c(1564),T=c(2791),L=c(434),j=c(5317),$=c(7053);function ee(B,H){var V=Object.keys(B);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(B);H&&(R=R.filter(function(Y){return Object.getOwnPropertyDescriptor(B,Y).enumerable})),V.push.apply(V,R)}return V}function Q(B){for(var H=1;H<arguments.length;H++){var V=arguments[H]!=null?arguments[H]:{};H%2?ee(Object(V),!0).forEach(function(R){(0,m.Z)(B,R,V[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(V)):ee(Object(V)).forEach(function(R){Object.defineProperty(B,R,Object.getOwnPropertyDescriptor(V,R))})}return B}var pe=function(B){var H=new A.Z;return H.replaceAllElements((0,T._N)(B)),H.getNonDeletedElements()},ie=function(B){var H=B.elements,V=B.appState,R=B.files,Y=B.maxWidthOrHeight,E=B.getDimensions,W=B.exportPadding,F=(0,k.nu)({elements:H,appState:V},null,null),z=F.elements,q=F.appState,fe=q.exportBackground,ce=q.viewBackgroundColor;return(0,w.NL)(pe(z),Q(Q({},q),{},{offsetTop:0,offsetLeft:0,width:0,height:0}),R||{},{exportBackground:fe,exportPadding:W,viewBackgroundColor:ce},function(U,ve){var oe,re=document.createElement("canvas");if(Y){var ae;typeof E=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");var me=Math.max(U,ve),he=Y<me?Y/me:(ae=V==null?void 0:V.exportScale)!==null&&ae!==void 0?ae:1;return re.width=U*he,re.height=ve*he,{canvas:re,scale:he}}var se=(E==null?void 0:E(U,ve))||{width:U,height:ve};return re.width=se.width,re.height=se.height,{canvas:re,scale:(oe=se.scale)!==null&&oe!==void 0?oe:1}})},te=function(){var B=(0,g.Z)(v().mark(function H(V){var R,Y,E,W,F,z;return v().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return E=(Y=V).mimeType,W=E===void 0?y.LO.png:E,F=Y.quality,W===y.LO.png&&typeof F=="number"&&console.warn('"quality" will be ignored for "'.concat(y.LO.png,'" mimeType')),W==="image/jpg"&&(W=y.LO.jpg),W!==y.LO.jpg||(R=V.appState)!==null&&R!==void 0&&R.exportBackground||(console.warn('Defaulting "exportBackground" to "true" for "'.concat(y.LO.jpg,'" mimeType')),V=Q(Q({},V),{},{appState:Q(Q({},V.appState),{},{exportBackground:!0})})),q.next=6,ie(Q(Q({},V),{},{elements:pe(V.elements)}));case 6:return z=q.sent,F=F||(/image\/jpe?g/.test(W)?.92:.8),q.abrupt("return",new Promise(function(fe,ce){z.toBlob(function(){var U=(0,g.Z)(v().mark(function ve(oe){var re;return v().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(oe){ae.next=2;break}return ae.abrupt("return",ce(new Error("couldn't export to blob")));case 2:if(!oe||W!==y.LO.png||(re=V.appState)===null||re===void 0||!re.exportEmbedScene){ae.next=6;break}return ae.next=5,(0,S.encodePngMetadata)({blob:oe,metadata:(0,C.I_)(V.elements,V.appState,V.files||{},"local")});case 5:oe=ae.sent;case 6:fe(oe);case 7:case"end":return ae.stop()}},ve)}));return function(ve){return U.apply(this,arguments)}}(),W,F)}));case 9:case"end":return q.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),Z=function(){var B=(0,g.Z)(v().mark(function H(V){var R,Y,E,W,F,z,q,fe,ce,U;return v().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return R=V.elements,Y=V.appState,E=Y===void 0?(0,_.im)():Y,W=V.files,F=W===void 0?{}:W,z=V.exportPadding,q=(0,k.nu)({elements:R,appState:E},null,null),fe=q.elements,ce=q.appState,U=Q(Q({},ce),{},{exportPadding:z}),ve.abrupt("return",(0,w.$D)(pe(fe),U,F,{serializeAsJSON:function(){return(0,C.I_)(fe,U,F||{},"local")}}));case 4:case"end":return ve.stop()}},H)}));return function(H){return B.apply(this,arguments)}}(),D=function(){var B=(0,g.Z)(v().mark(function H(V){var R;return v().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(V.type!=="svg"){Y.next=8;break}return Y.next=3,Z(V);case 3:return R=Y.sent,Y.next=6,(0,I.dd)(R.outerHTML);case 6:case 11:case 16:Y.next=19;break;case 8:if(V.type!=="png"){Y.next=13;break}return Y.next=11,(0,I.uR)(te(V));case 13:if(V.type!=="json"){Y.next=18;break}return Y.next=16,(0,I.vQ)(V.elements,V.files);case 18:throw new Error("Invalid export type");case 19:case"end":return Y.stop()}},H)}));return function(H){return B.apply(this,arguments)}}()},5001:function(f,h,c){c.d(h,{k:function(){return m},z:function(){return b}});var g=c(1930),m=function(v){var w=v.map(function(k){return k[0]}),_=v.map(function(k){return k[1]});return{width:Math.max.apply(Math,(0,g.Z)(w))-Math.min.apply(Math,(0,g.Z)(w)),height:Math.max.apply(Math,(0,g.Z)(_))-Math.min.apply(Math,(0,g.Z)(_))}},b=function(v,w,_,k){var y=_.map(function($){return $[v]}),S=Math.max.apply(Math,(0,g.Z)(y)),C=Math.min.apply(Math,(0,g.Z)(y)),I=S-C,A=I===0?1:w/I,T=1/0,L=_.map(function($){var ee=$[v]*A,Q=(0,g.Z)($);return Q[v]=ee,ee<T&&(T=ee),Q});if(!k||L.length===2)return L;var j=C-T;return L.map(function($){return $.map(function(ee,Q){return Q===v?ee+j:ee})})}},6954:function(f,h,c){c.d(h,{LU:function(){return _},kb:function(){return k}});var g=c(5460),m=c(7583),b=c(6340),v=new g.k(Date.now()),w=0,_=function(){return Math.floor(v.next()*Math.pow(2,31))},k=function(){return(0,b.h2)()?"id".concat(w++):(0,m.x0)()}},5317:function(f,h,c){c.d(h,{Dn:function(){return me},i:function(){return ue},N7:function(){return ze},R2:function(){return be},bI:function(){return ye},lw:function(){return Me},Rg:function(){return Se}});var g=c(1930),m=c(7169),b=c(2577),v=c(1974),w=c(8925),_=c(6340),k=c(6552),y=c(6574),S=c(8897),C=c(2335);function I(Ie,ot,Ye,Ke=tt=>tt){return Ie*Ke(.5-ot*(.5-Ye))}function A(Ie,ot){return[Ie[0]+ot[0],Ie[1]+ot[1]]}function T(Ie,ot){return[Ie[0]-ot[0],Ie[1]-ot[1]]}function L(Ie,ot){return[Ie[0]*ot,Ie[1]*ot]}function j(Ie){return[Ie[1],-Ie[0]]}function $(Ie,ot){return Ie[0]*ot[0]+Ie[1]*ot[1]}function ee(Ie,ot){return Ie[0]===ot[0]&&Ie[1]===ot[1]}function Q(Ie,ot){return function(Ye){return Ye[0]*Ye[0]+Ye[1]*Ye[1]}(T(Ie,ot))}function pe(Ie){return function(ot,Ye){return[ot[0]/Ye,ot[1]/Ye]}(Ie,function(ot){return Math.hypot(ot[0],ot[1])}(Ie))}function ie(Ie,ot){return Math.hypot(Ie[1]-ot[1],Ie[0]-ot[0])}function te(Ie,ot,Ye){let Ke=Math.sin(Ye),tt=Math.cos(Ye),pt=Ie[0]-ot[0],St=Ie[1]-ot[1],Kt=pt*Ke+St*tt;return[pt*tt-St*Ke+ot[0],Kt+ot[1]]}function Z(Ie,ot,Ye){return A(Ie,L(T(ot,Ie),Ye))}function D(Ie,ot,Ye){return A(Ie,L(ot,Ye))}var{min:B,PI:H}=Math,V=H+1e-4;function R(Ie,ot={}){return function(Ye,Ke={}){let{size:tt=16,smoothing:pt=.5,thinning:St=.5,simulatePressure:Kt=!0,easing:sn=Gt=>Gt,start:nn={},end:Cn={},last:vn=!1}=Ke,{cap:Fe=!0,easing:et=Gt=>Gt*(2-Gt)}=nn,{cap:st=!0,easing:ht=Gt=>--Gt*Gt*Gt+1}=Cn;if(Ye.length===0||tt<=0)return[];let _t,Zt=Ye[Ye.length-1].runningLength,Yt=nn.taper===!1?0:nn.taper===!0?Math.max(tt,Zt):nn.taper,bn=Cn.taper===!1?0:Cn.taper===!0?Math.max(tt,Zt):Cn.taper,Wt=Math.pow(tt*pt,2),un=[],jn=[],Hn=Ye.slice(0,10).reduce((Gt,Jt)=>{let $n=Jt.pressure;if(Kt){let Kn=B(1,Jt.distance/tt),wr=B(1,1-Kn);$n=B(1,Gt+.275*Kn*(wr-Gt))}return(Gt+$n)/2},Ye[0].pressure),vt=I(tt,St,Ye[Ye.length-1].pressure,sn),Nt=Ye[0].vector,Tt=Ye[0].point,cn=Tt,Ot=Tt,Ln=cn,Wn=!1;for(let Gt=0;Gt<Ye.length;Gt++){let{pressure:Jt}=Ye[Gt],{point:$n,vector:Kn,distance:wr,runningLength:dr}=Ye[Gt];if(Gt<Ye.length-1&&Zt-dr<3)continue;if(St){if(Kt){let Ir=B(1,wr/tt),Vt=B(1,1-Ir);Jt=B(1,Hn+.275*Ir*(Vt-Hn))}vt=I(tt,St,Jt,sn)}else vt=tt/2;_t===void 0&&(_t=vt);let yn=dr<Yt?et(dr/Yt):1,hr=Zt-dr<bn?ht((Zt-dr)/bn):1;vt=Math.max(.01,vt*Math.min(yn,hr));let Er=(Gt<Ye.length-1?Ye[Gt+1]:Ye[Gt]).vector,Nn=Gt<Ye.length-1?$(Kn,Er):1,ar=Nn!==null&&Nn<0;if($(Kn,Nt)<0&&!Wn||ar){let Ir=L(j(Nt),vt);for(let Vt=.07692307692307693,An=0;An<=1;An+=Vt)Ot=te(T($n,Ir),$n,V*An),un.push(Ot),Ln=te(A($n,Ir),$n,V*-An),jn.push(Ln);Tt=Ot,cn=Ln,ar&&(Wn=!0);continue}if(Wn=!1,Gt===Ye.length-1){let Ir=L(j(Kn),vt);un.push(T($n,Ir)),jn.push(A($n,Ir));continue}let Dr=L(j(Z(Er,Kn,Nn)),vt);Ot=T($n,Dr),(Gt<=1||Q(Tt,Ot)>Wt)&&(un.push(Ot),Tt=Ot),Ln=A($n,Dr),(Gt<=1||Q(cn,Ln)>Wt)&&(jn.push(Ln),cn=Ln),Hn=Jt,Nt=Kn}let Rn=Ye[0].point.slice(0,2),zn=Ye.length>1?Ye[Ye.length-1].point.slice(0,2):A(Ye[0].point,[1,1]),Et=[],Dt=[];if(Ye.length===1){if(!Yt&&!bn||vn){let Gt=D(Rn,pe(j(T(Rn,zn))),-(_t||vt)),Jt=[];for(let $n=.07692307692307693,Kn=$n;Kn<=1;Kn+=$n)Jt.push(te(Gt,Rn,2*V*Kn));return Jt}}else{if(!(Yt||bn&&Ye.length===1))if(Fe)for(let Jt=.07692307692307693,$n=Jt;$n<=1;$n+=Jt){let Kn=te(jn[0],Rn,V*$n);Et.push(Kn)}else{let Jt=T(un[0],jn[0]),$n=L(Jt,.5),Kn=L(Jt,.51);Et.push(T(Rn,$n),T(Rn,Kn),A(Rn,Kn),A(Rn,$n))}let Gt=j(function(Jt){return[-Jt[0],-Jt[1]]}(Ye[Ye.length-1].vector));if(bn||Yt&&Ye.length===1)Dt.push(zn);else if(st){let Jt=D(zn,Gt,vt);for(let $n=.034482758620689655,Kn=$n;Kn<1;Kn+=$n)Dt.push(te(Jt,zn,3*V*Kn))}else Dt.push(A(zn,L(Gt,vt)),A(zn,L(Gt,.99*vt)),T(zn,L(Gt,.99*vt)),T(zn,L(Gt,vt)))}return un.concat(Dt,jn.reverse(),Et)}(function(Ye,Ke={}){var tt;let{streamline:pt=.5,size:St=16,last:Kt=!1}=Ke;if(Ye.length===0)return[];let sn=.15+.85*(1-pt),nn=Array.isArray(Ye[0])?Ye:Ye.map(({x:ht,y:_t,pressure:Zt=.5})=>[ht,_t,Zt]);if(nn.length===2){let ht=nn[1];nn=nn.slice(0,-1);for(let _t=1;_t<5;_t++)nn.push(Z(nn[0],ht,_t/4))}nn.length===1&&(nn=[...nn,[...A(nn[0],[1,1]),...nn[0].slice(2)]]);let Cn=[{point:[nn[0][0],nn[0][1]],pressure:nn[0][2]>=0?nn[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],vn=!1,Fe=0,et=Cn[0],st=nn.length-1;for(let ht=1;ht<nn.length;ht++){let _t=Kt&&ht===st?nn[ht].slice(0,2):Z(et.point,nn[ht],sn);if(ee(et.point,_t))continue;let Zt=ie(_t,et.point);if(Fe+=Zt,ht<st&&!vn){if(Fe<St)continue;vn=!0}et={point:_t,pressure:nn[ht][2]>=0?nn[ht][2]:.5,vector:pe(T(et.point,_t)),distance:Zt,runningLength:Fe},Cn.push(et)}return Cn[0].vector=((tt=Cn[1])==null?void 0:tt.vector)||[0,0],Cn}(Ie,ot),ot)}var Y=c(5710),E=c(6938),W=c(9040);function F(Ie,ot){var Ye=Object.keys(Ie);if(Object.getOwnPropertySymbols){var Ke=Object.getOwnPropertySymbols(Ie);ot&&(Ke=Ke.filter(function(tt){return Object.getOwnPropertyDescriptor(Ie,tt).enumerable})),Ye.push.apply(Ye,Ke)}return Ye}function z(Ie){for(var ot=1;ot<arguments.length;ot++){var Ye=arguments[ot]!=null?arguments[ot]:{};ot%2?F(Object(Ye),!0).forEach(function(Ke){(0,m.Z)(Ie,Ke,Ye[Ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(Ye)):F(Object(Ye)).forEach(function(Ke){Object.defineProperty(Ie,Ke,Object.getOwnPropertyDescriptor(Ye,Ke))})}return Ie}var q="invert(100%) hue-rotate(180deg) saturate(1.25)",fe=(0,S.im)(),ce=function(Ie,ot){return(0,v.wi)(Ie)&&!ot.imageCache.has(Ie.fileId)},U=function(Ie,ot){var Ye;return ot.theme==="dark"&&(0,v.wi)(Ie)&&!ce(Ie,ot)&&((Ye=ot.imageCache.get(Ie.fileId))===null||Ye===void 0?void 0:Ye.mimeType)!==C.LO.svg},ve=function(Ie){return[8,8+Ie]},oe=function(Ie){return[1.5,6+Ie]},re=function(Ie){return Ie.type==="freedraw"?12*Ie.strokeWidth:20},ae=function(Ie,ot,Ye){var Ke,tt,pt=document.createElement("canvas"),St=pt.getContext("2d"),Kt=re(Ie),sn=function(bn,Wt){var un=16777216,jn=32767,Hn=re(bn),vt=(0,w.qf)(bn),Nt=(0,b.Z)(vt,4),Tt=Nt[0],cn=Nt[1],Ot=Nt[2],Ln=Nt[3],Wn=(0,v.bt)(bn)||(0,v.F9)(bn)?(0,_.TE)(Tt,Ot):bn.width,Rn=(0,v.bt)(bn)||(0,v.F9)(bn)?(0,_.TE)(cn,Ln):bn.height,zn=Wn*window.devicePixelRatio+2*Hn,Et=Rn*window.devicePixelRatio+2*Hn,Dt=Wt.value;return(zn*Dt>jn||Et*Dt>jn)&&(Dt=Math.min(jn/zn,jn/Et)),zn*Et*Dt*Dt>un&&(Dt=Math.sqrt(un/(zn*Et))),{width:zn=Math.floor(zn*Dt),height:Et=Math.floor(Et*Dt),scale:Dt}}(Ie,ot),nn=sn.width,Cn=sn.height,vn=sn.scale;pt.width=nn,pt.height=Cn;var Fe=0,et=0;if((0,v.bt)(Ie)||(0,v.F9)(Ie)){var st=(0,w.qf)(Ie),ht=(0,b.Z)(st,2),_t=ht[0],Zt=ht[1];Fe=Ie.x>_t?(0,_.TE)(Ie.x,_t)*window.devicePixelRatio*vn:0,et=Ie.y>Zt?(0,_.TE)(Ie.y,Zt)*window.devicePixelRatio*vn:0,St.translate(Fe,et)}St.save(),St.translate(Kt*vn,Kt*vn),St.scale(window.devicePixelRatio*vn,window.devicePixelRatio*vn);var Yt=y.Z.canvas(pt);return U(Ie,Ye)&&(St.filter=q),ge(Ie,Yt,St,Ye),St.restore(),{element:Ie,canvas:pt,theme:Ye.theme,scale:vn,zoomValue:ot.value,canvasOffsetX:Fe,canvasOffsetY:et,boundTextElementVersion:((Ke=(0,Y.WJ)(Ie))===null||Ke===void 0?void 0:Ke.version)||null,containingFrameOpacity:((tt=(0,W.$Z)(Ie))===null||tt===void 0?void 0:tt.opacity)||100}},me=14,he=document.createElement("img");he.src="data:".concat(C.LO.svg,",").concat(encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>'));var se=document.createElement("img");se.src="data:".concat(C.LO.svg,",").concat(encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>'));var ge=function(Ie,ot,Ye,Ke){var tt,pt;switch(Ye.globalAlpha=((tt=(pt=(0,W.$Z)(Ie))===null||pt===void 0?void 0:pt.opacity)!==null&&tt!==void 0?tt:100)*Ie.opacity/1e4,Ie.type){case"rectangle":case"diamond":case"ellipse":Ye.lineJoin="round",Ye.lineCap="round",ot.draw(be(Ie));break;case"arrow":case"line":Ye.lineJoin="round",Ye.lineCap="round",be(Ie).forEach(function(Zt){ot.draw(Zt)});break;case"freedraw":Ye.save(),Ye.fillStyle=Ie.strokeColor;var St=function(Zt){return Be.get(Zt)}(Ie),Kt=be(Ie);Kt&&ot.draw(Kt),Ye.fillStyle=Ie.strokeColor,Ye.fill(St),Ye.restore();break;case"image":var sn,nn=(0,v.wi)(Ie)?(sn=Ke.imageCache.get(Ie.fileId))===null||sn===void 0?void 0:sn.image:void 0;nn==null||nn instanceof Promise?function(Zt,Yt,bn){Yt.fillStyle="#E7E7E7",Yt.fillRect(0,0,Zt.width,Zt.height);var Wt=Math.min(Zt.width,Zt.height),un=Math.min(Wt,Math.min(.4*Wt,100));Yt.drawImage(Zt.status==="error"?se:he,Zt.width/2-un/2,Zt.height/2-un/2,un,un)}(Ie,Ye,Ke.zoom.value):Ye.drawImage(nn,0,0,Ie.width,Ie.height);break;default:if(!(0,v.iB)(Ie))throw new Error("Unimplemented type ".concat(Ie.type));var Cn=(0,_.dZ)(Ie.text),vn=Cn&&!Ye.canvas.isConnected;vn&&document.body.appendChild(Ye.canvas),Ye.canvas.setAttribute("dir",Cn?"rtl":"ltr"),Ye.save(),Ye.font=(0,_.mO)(Ie),Ye.fillStyle=Ie.strokeColor,Ye.textAlign=Ie.textAlign;for(var Fe=Ie.text.replace(/\r\n?/g,`
`).split(`
`),et=Ie.textAlign==="center"?Ie.width/2:Ie.textAlign==="right"?Ie.width:0,st=(0,Y.Rg)(Ie.fontSize,Ie.lineHeight),ht=Ie.height-Ie.baseline,_t=0;_t<Fe.length;_t++)Ye.fillText(Fe[_t],et,(_t+1)*st-ht);Ye.restore(),vn&&Ye.canvas.remove()}Ye.globalAlpha=1},X=new WeakMap,we=new WeakMap,be=function(Ie){return we.get(Ie)},le=function(Ie,ot){return we.set(Ie,ot)},ye=function(Ie){return we.delete(Ie)},ue=function(Ie){var ot=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ye={seed:Ie.seed,strokeLineDash:Ie.strokeStyle==="dashed"?ve(Ie.strokeWidth):Ie.strokeStyle==="dotted"?oe(Ie.strokeWidth):void 0,disableMultiStroke:Ie.strokeStyle!=="solid",strokeWidth:Ie.strokeStyle!=="solid"?Ie.strokeWidth+.5:Ie.strokeWidth,fillWeight:Ie.strokeWidth/2,hachureGap:4*Ie.strokeWidth,roughness:Ie.roughness,stroke:Ie.strokeColor,preserveVertices:ot};switch(Ie.type){case"rectangle":case"diamond":case"ellipse":return Ye.fillStyle=Ie.fillStyle,Ye.fill=Ie.backgroundColor==="transparent"?void 0:Ie.backgroundColor,Ie.type==="ellipse"&&(Ye.curveFitting=1),Ye;case"line":case"freedraw":return(0,k.g6)(Ie.points)&&(Ye.fillStyle=Ie.fillStyle,Ye.fill=Ie.backgroundColor==="transparent"?void 0:Ie.backgroundColor),Ye;case"arrow":return Ye;default:throw new Error("Unimplemented type ".concat(Ie.type))}},xe=function(Ie,ot){var Ye=we.get(Ie);if(Ye===void 0)switch(X.delete(Ie),Ie.type){case"rectangle":if(Ie.roundness){var Ke=Ie.width,tt=Ie.height,pt=(0,k.yW)(Math.min(Ke,tt),Ie);Ye=ot.path("M ".concat(pt," 0 L ").concat(Ke-pt," 0 Q ").concat(Ke," 0, ").concat(Ke," ").concat(pt," L ").concat(Ke," ").concat(tt-pt," Q ").concat(Ke," ").concat(tt,", ").concat(Ke-pt," ").concat(tt," L ").concat(pt," ").concat(tt," Q 0 ").concat(tt,", 0 ").concat(tt-pt," L 0 ").concat(pt," Q 0 0, ").concat(pt," 0"),ue(Ie,!0))}else Ye=ot.rectangle(0,0,Ie.width,Ie.height,ue(Ie));le(Ie,Ye);break;case"diamond":var St=(0,w.UC)(Ie),Kt=(0,b.Z)(St,8),sn=Kt[0],nn=Kt[1],Cn=Kt[2],vn=Kt[3],Fe=Kt[4],et=Kt[5],st=Kt[6],ht=Kt[7];if(Ie.roundness){var _t=(0,k.yW)(Math.abs(sn-st),Ie),Zt=(0,k.yW)(Math.abs(vn-nn),Ie);Ye=ot.path("M ".concat(sn+_t," ").concat(nn+Zt," L ").concat(Cn-_t," ").concat(vn-Zt,`
            C `).concat(Cn," ").concat(vn,", ").concat(Cn," ").concat(vn,", ").concat(Cn-_t," ").concat(vn+Zt,`
            L `).concat(Fe+_t," ").concat(et-Zt,`
            C `).concat(Fe," ").concat(et,", ").concat(Fe," ").concat(et,", ").concat(Fe-_t," ").concat(et-Zt,`
            L `).concat(st+_t," ").concat(ht+Zt,`
            C `).concat(st," ").concat(ht,", ").concat(st," ").concat(ht,", ").concat(st+_t," ").concat(ht-Zt,`
            L `).concat(sn-_t," ").concat(nn+Zt,`
            C `).concat(sn," ").concat(nn,", ").concat(sn," ").concat(nn,", ").concat(sn+_t," ").concat(nn+Zt),ue(Ie,!0))}else Ye=ot.polygon([[sn,nn],[Cn,vn],[Fe,et],[st,ht]],ue(Ie));le(Ie,Ye);break;case"ellipse":Ye=ot.ellipse(Ie.width/2,Ie.height/2,Ie.width,Ie.height,ue(Ie)),le(Ie,Ye);break;case"line":case"arrow":var Yt=ue(Ie),bn=Ie.points.length?Ie.points:[[0,0]];if(Ye=Ie.roundness?[ot.curve(bn,Yt)]:Yt.fill?[ot.polygon(bn,Yt)]:[ot.linearPath(bn,Yt)],Ie.type==="arrow"){var Wt=Ie.startArrowhead,un=Wt===void 0?null:Wt,jn=Ie.endArrowhead,Hn=jn===void 0?"arrow":jn,vt=function(Ln,Wn,Rn,zn){var Et=(0,w.Y5)(Ln,Wn,Rn,zn);if(Et===null)return[];if(zn==="dot"){var Dt=(0,b.Z)(Et,3),Gt=Dt[0],Jt=Dt[1],$n=Dt[2];return[ot.circle(Gt,Jt,$n,z(z({},Yt),{},{fill:Ln.strokeColor,fillStyle:"solid",stroke:"none"}))]}if(zn==="triangle"){var Kn=(0,b.Z)(Et,6),wr=Kn[0],dr=Kn[1],yn=Kn[2],hr=Kn[3],Er=Kn[4],Nn=Kn[5];return delete Yt.strokeLineDash,[ot.polygon([[wr,dr],[yn,hr],[Er,Nn],[wr,dr]],z(z({},Yt),{},{fill:Ln.strokeColor,fillStyle:"solid"}))]}var ar=(0,b.Z)(Et,6),Dr=ar[0],Ir=ar[1],Vt=ar[2],An=ar[3],pn=ar[4],mn=ar[5];if(Ln.strokeStyle==="dotted"){var or=oe(Ln.strokeWidth-1);Yt.strokeLineDash=[or[0],or[1]-1]}else delete Yt.strokeLineDash;return[ot.line(Vt,An,Dr,Ir,Yt),ot.line(pn,mn,Dr,Ir,Yt)]};if(un!==null){var Nt,Tt=vt(Ie,Ye,"start",un);(Nt=Ye).push.apply(Nt,(0,g.Z)(Tt))}if(Hn!==null){var cn,Ot=vt(Ie,Ye,"end",Hn);(cn=Ye).push.apply(cn,(0,g.Z)(Ot))}}le(Ie,Ye);break;case"freedraw":_e(Ie),Ye=(0,k.g6)(Ie.points)?ot.polygon(Ie.points,z(z({},ue(Ie)),{},{stroke:"none"})):null,le(Ie,Ye);break;case"text":case"image":le(Ie,null)}},Pe=function(Ie,ot){var Ye,Ke,tt=ot?ot.zoom:fe.zoom,pt=X.get(Ie),St=pt&&pt.zoomValue!==tt.value&&!(ot!=null&&ot.shouldCacheIgnoreZoom),Kt=((Ye=(0,Y.WJ)(Ie))===null||Ye===void 0?void 0:Ye.version)||null,sn=((Ke=(0,W.$Z)(Ie))===null||Ke===void 0?void 0:Ke.opacity)||100;if(!pt||St||pt.theme!==ot.theme||pt.boundTextElementVersion!==Kt||pt.containingFrameOpacity!==sn){var nn=ae(Ie,tt,ot);return X.set(Ie,nn),nn}return pt},Ne=function(Ie,ot,Ye,Ke){var tt=Ie.element,pt=re(tt),St=Ie.scale,Kt=(0,w.qf)(tt),sn=(0,b.Z)(Kt,4),nn=sn[0],Cn=sn[1],vn=sn[2],Fe=sn[3];(0,v.F9)(tt)&&(nn=Math.floor(nn),vn=Math.ceil(vn),Cn=Math.floor(Cn),Fe=Math.ceil(Fe));var et=((nn+vn)/2+Ke.scrollX)*window.devicePixelRatio,st=((Cn+Fe)/2+Ke.scrollY)*window.devicePixelRatio;Ye.save(),Ye.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);var ht=(0,Y.WJ)(tt);if((0,v.Yv)(tt)&&ht){var _t=document.createElement("canvas"),Zt=_t.getContext("2d"),Yt=Math.max((0,_.TE)(nn,vn),(0,_.TE)(Cn,Fe));_t.width=Yt*window.devicePixelRatio*St+pt*Ie.scale*10,_t.height=Yt*window.devicePixelRatio*St+pt*Ie.scale*10;var bn=(_t.width-Ie.canvas.width)/2,Wt=(_t.height-Ie.canvas.height)/2;Zt.translate(_t.width/2,_t.height/2),Zt.rotate(tt.angle),Zt.drawImage(Ie.canvas,-Ie.canvas.width/2,-Ie.canvas.height/2,Ie.canvas.width,Ie.canvas.height);var un=(0,w.qf)(ht),jn=(0,b.Z)(un,6),Hn=jn[4],vt=jn[5];Zt.rotate(-tt.angle);var Nt=_t.width/2-(Hn-nn)*window.devicePixelRatio*St-bn-pt*St,Tt=_t.height/2-(vt-Cn)*window.devicePixelRatio*St-Wt-pt*St;Zt.translate(-Nt,-Tt),Zt.clearRect(-(ht.width/2+C.gK)*window.devicePixelRatio*St,-(ht.height/2+C.gK)*window.devicePixelRatio*St,(ht.width+2*C.gK)*window.devicePixelRatio*St,(ht.height+2*C.gK)*window.devicePixelRatio*St),Ye.translate(et,st),Ye.drawImage(_t,-(vn-nn)/2*window.devicePixelRatio-bn/St-pt,-(Fe-Cn)/2*window.devicePixelRatio-Wt/St-pt,_t.width/St,_t.height/St)}else if(Ye.translate(et,st),Ye.rotate(tt.angle),"scale"in Ie.element&&!ce(tt,Ke)&&Ye.scale(Ie.element.scale[0],Ie.element.scale[1]),Ye.translate(-et,-st),Ye.drawImage(Ie.canvas,(nn+Ke.scrollX)*window.devicePixelRatio-pt*Ie.scale/Ie.scale,(Cn+Ke.scrollY)*window.devicePixelRatio-pt*Ie.scale/Ie.scale,Ie.canvas.width/Ie.scale,Ie.canvas.height/Ie.scale),{REACT_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",REACT_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",REACT_APP_LIBRARY_URL:"https://libraries.excalidraw.com",REACT_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",REACT_APP_PORTAL_URL:"https://portal.excalidraw.com",REACT_APP_WS_SERVER_URL:"",REACT_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',REACT_APP_PLUS_APP:"https://app.excalidraw.com",REACT_APP_DISABLE_TRACKING:"",PKG_NAME:"revedraw",PKG_VERSION:"1.0.0-alpha.10",IS_EXCALIDRAW_NPM_PACKAGE:!0}.REACT_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX==="true"&&(0,v.Xo)(tt)){var cn=(0,Y.WJ)(tt),Ot=(0,Y.cw)(tt);Ye.strokeStyle="#c92a2a",Ye.lineWidth=3,Ye.strokeRect((Ot.x+Ke.scrollX)*window.devicePixelRatio,(Ot.y+Ke.scrollY)*window.devicePixelRatio,(0,Y.iZ)(tt)*window.devicePixelRatio,(0,Y.D9)(tt,cn)*window.devicePixelRatio)}Ye.restore()},Me=function(Ie,ot,Ye,Ke,tt){var pt=ot.generator;switch(Ie.type){case"selection":if(!Ke.isExporting){Ye.save(),Ye.translate(Ie.x+Ke.scrollX,Ie.y+Ke.scrollY),Ye.fillStyle="rgba(0, 0, 200, 0.04)";var St=.5/Ke.zoom.value;Ye.fillRect(St,St,Ie.width,Ie.height),Ye.lineWidth=1/Ke.zoom.value,Ye.strokeStyle=" rgb(105, 101, 219)",Ye.strokeRect(St,St,Ie.width,Ie.height),Ye.restore()}break;case"frame":!Ke.isExporting&&tt.shouldRenderFrames&&(Ye.save(),Ye.translate(Ie.x+Ke.scrollX,Ie.y+Ke.scrollY),Ye.fillStyle="rgba(0, 0, 200, 0.04)",Ye.lineWidth=2/Ke.zoom.value,Ye.strokeStyle=C.iG.strokeColor,C.iG.radius&&Ye.roundRect?(Ye.beginPath(),Ye.roundRect(0,0,Ie.width,Ie.height,C.iG.radius/Ke.zoom.value),Ye.stroke(),Ye.closePath()):Ye.strokeRect(0,0,Ie.width,Ie.height),Ye.restore());break;case"freedraw":if(xe(Ie,pt),Ke.isExporting){var Kt=(0,w.qf)(Ie),sn=(0,b.Z)(Kt,4),nn=sn[0],Cn=sn[1],vn=sn[2],Fe=sn[3],et=(nn+vn)/2+Ke.scrollX,st=(Cn+Fe)/2+Ke.scrollY,ht=(vn-nn)/2-(Ie.x-nn),_t=(Fe-Cn)/2-(Ie.y-Cn);Ye.save(),Ye.translate(et,st),Ye.rotate(Ie.angle),Ye.translate(-ht,-_t),ge(Ie,ot,Ye,Ke),Ye.restore()}else{var Zt=Pe(Ie,Ke);Ne(Zt,0,Ye,Ke)}break;case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":if(xe(Ie,pt),Ke.isExporting){var Yt=(0,w.qf)(Ie),bn=(0,b.Z)(Yt,4),Wt=bn[0],un=bn[1],jn=bn[2],Hn=bn[3],vt=(Wt+jn)/2+Ke.scrollX,Nt=(un+Hn)/2+Ke.scrollY,Tt=(jn-Wt)/2-(Ie.x-Wt),cn=(Hn-un)/2-(Ie.y-un);if((0,v.iB)(Ie)){var Ot=(0,Y.tl)(Ie);if((0,v.Yv)(Ot)){var Ln=E._.getBoundTextElementPosition(Ot,Ie);Tt=(jn-Wt)/2-(Ln.x-Wt),cn=(Hn-un)/2-(Ln.y-un)}}Ye.save(),Ye.translate(vt,Nt),U(Ie,Ke)&&(Ye.filter="none");var Wn=(0,Y.WJ)(Ie);if((0,v.Yv)(Ie)&&Wn){var Rn=document.createElement("canvas"),zn=Rn.getContext("2d"),Et=Math.max((0,_.TE)(Wt,jn),(0,_.TE)(un,Hn)),Dt=re(Ie);Rn.width=Et*tt.exportScale+10*Dt*tt.exportScale,Rn.height=Et*tt.exportScale+10*Dt*tt.exportScale,zn.translate(Rn.width/2,Rn.height/2),zn.scale(tt.exportScale,tt.exportScale),Tt=Ie.width/2-(Ie.x-Wt),cn=Ie.height/2-(Ie.y-un),zn.rotate(Ie.angle);var Gt=y.Z.canvas(Rn);zn.translate(-Tt,-cn),ge(Ie,Gt,zn,Ke),zn.translate(Tt,cn),zn.rotate(-Ie.angle);var Jt=(0,w.qf)(Wn),$n=(0,b.Z)(Jt,6),Kn=(Wt+jn)/2-$n[4],wr=(un+Hn)/2-$n[5];zn.translate(-Kn,-wr),zn.clearRect(-Wn.width/2,-Wn.height/2,Wn.width,Wn.height),Ye.scale(1/tt.exportScale,1/tt.exportScale),Ye.drawImage(Rn,-Rn.width/2,-Rn.height/2,Rn.width,Rn.height)}else Ye.rotate(Ie.angle),Ie.type==="image"&&Ye.scale(Ie.scale[0],Ie.scale[1]),Ye.translate(-Tt,-cn),ge(Ie,ot,Ye,Ke);Ye.restore()}else{var dr=Pe(Ie,Ke),yn=Ye.imageSmoothingEnabled;Ke!=null&&Ke.shouldCacheIgnoreZoom||Ie.angle&&!(0,k.EK)(Ie.angle)||(Ye.imageSmoothingEnabled=!1),Ne(dr,0,Ye,Ke),Ye.imageSmoothingEnabled=yn}break;default:throw new Error("Unimplemented type ".concat(Ie.type))}},Re=function(Ie,ot,Ye){if(Ye===void 0)return Ie.draw(ot);var Ke={sets:ot.sets,shape:ot.shape,options:z(z({},ot.options),{},{fixedDecimalPlaceDigits:Ye})};return Ie.draw(Ke)},We=function(Ie,ot,Ye,Ke){var tt=(0,W.$Z)(Ie);if(tt&&tt.id===Ke){var pt=ot.ownerDocument.createElementNS(C.hR,"g");return pt.setAttributeNS(C.hR,"clip-path","url(#".concat(tt.id,")")),Ye.forEach(function(St){return pt.appendChild(St)}),pt}return null},Se=function(Ie,ot,Ye,Ke,tt,pt,St,Kt){var sn,nn,Cn=(0,w.qf)(Ie),vn=(0,b.Z)(Cn,4),Fe=vn[0],et=vn[1],st=vn[2],ht=vn[3],_t=(st-Fe)/2-(Ie.x-Fe),Zt=(ht-et)/2-(Ie.y-et);if((0,v.iB)(Ie)){var Yt=(0,Y.tl)(Ie);if((0,v.Yv)(Yt)){var bn=(0,w.qf)(Yt),Wt=(0,b.Z)(bn,4),un=Wt[0],jn=Wt[1],Hn=Wt[2],vt=Wt[3],Nt=E._.getBoundTextElementPosition(Yt,Ie);_t=(Hn-un)/2-(Nt.x-un),Zt=(vt-jn)/2-(Nt.y-jn),tt=tt+Nt.x-Ie.x,pt=pt+Nt.y-Ie.y}}var Tt=180*Ie.angle/Math.PI,cn=ot.generator,Ot=Ye;if(Ie.link){var Ln=Ye.ownerDocument.createElementNS(C.hR,"a");Ln.setAttribute("href",Ie.link),Ot.appendChild(Ln),Ot=Ln}var Wn=((sn=(nn=(0,W.$Z)(Ie))===null||nn===void 0?void 0:nn.opacity)!==null&&sn!==void 0?sn:100)*Ie.opacity/1e4;switch(Ie.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":xe(Ie,cn);var Rn=Re(ot,be(Ie),C.zK);Wn!==1&&(Rn.setAttribute("stroke-opacity","".concat(Wn)),Rn.setAttribute("fill-opacity","".concat(Wn))),Rn.setAttribute("stroke-linecap","round"),Rn.setAttribute("transform","translate(".concat(tt||0," ").concat(pt||0,") rotate(").concat(Tt," ").concat(_t," ").concat(Zt,")"));var zn=We(Ie,Ot,[Rn],Kt);zn?Ot.appendChild(zn):Ot.appendChild(Rn);break;case"line":case"arrow":var Et=(0,Y.WJ)(Ie),Dt=Ye.ownerDocument.createElementNS(C.hR,"mask");if(Et){Dt.setAttribute("id","mask-".concat(Ie.id));var Gt=Ye.ownerDocument.createElementNS(C.hR,"rect");tt=tt||0,pt=pt||0,Gt.setAttribute("x","0"),Gt.setAttribute("y","0"),Gt.setAttribute("fill","#fff"),Gt.setAttribute("width","".concat(Ie.width+100+tt)),Gt.setAttribute("height","".concat(Ie.height+100+pt)),Dt.appendChild(Gt);var Jt=Ye.ownerDocument.createElementNS(C.hR,"rect"),$n=E._.getBoundTextElementPosition(Ie,Et),Kn=tt+$n.x-Ie.x,wr=pt+$n.y-Ie.y;Jt.setAttribute("x",Kn.toString()),Jt.setAttribute("y",wr.toString()),Jt.setAttribute("fill","#000"),Jt.setAttribute("width","".concat(Et.width)),Jt.setAttribute("height","".concat(Et.height)),Jt.setAttribute("opacity","1"),Dt.appendChild(Jt)}xe(Ie,cn);var dr=Ye.ownerDocument.createElementNS(C.hR,"g");Et&&dr.setAttribute("mask","url(#mask-".concat(Ie.id,")")),dr.setAttribute("stroke-linecap","round"),be(Ie).forEach(function(br){var Hr=Re(ot,br,C.zK);Wn!==1&&(Hr.setAttribute("stroke-opacity","".concat(Wn)),Hr.setAttribute("fill-opacity","".concat(Wn))),Hr.setAttribute("transform","translate(".concat(tt||0," ").concat(pt||0,") rotate(").concat(Tt," ").concat(_t," ").concat(Zt,")")),Ie.type==="line"&&(0,k.g6)(Ie.points)&&Ie.backgroundColor!=="transparent"&&Hr.setAttribute("fill-rule","evenodd"),dr.appendChild(Hr)});var yn=We(Ie,Ot,[dr,Dt],Kt);yn?Ot.appendChild(yn):(Ot.appendChild(dr),Ot.append(Dt));break;case"freedraw":xe(Ie,cn),_e(Ie);var hr=be(Ie),Er=hr?Re(ot,hr,C.zK):Ye.ownerDocument.createElementNS(C.hR,"g");Wn!==1&&(Er.setAttribute("stroke-opacity","".concat(Wn)),Er.setAttribute("fill-opacity","".concat(Wn))),Er.setAttribute("transform","translate(".concat(tt||0," ").concat(pt||0,") rotate(").concat(Tt," ").concat(_t," ").concat(Zt,")")),Er.setAttribute("stroke","none");var Nn=Ye.ownerDocument.createElementNS(C.hR,"path");Nn.setAttribute("fill",Ie.strokeColor),Nn.setAttribute("d",ze(Ie)),Er.appendChild(Nn);var ar=We(Ie,Ot,[Er],Kt);ar?Ot.appendChild(ar):Ot.appendChild(Er);break;case"image":var Dr=Math.round(Ie.width),Ir=Math.round(Ie.height),Vt=(0,v.wi)(Ie)&&Ke[Ie.fileId];if(Vt){var An="image-".concat(Vt.id),pn=Ye.querySelector("#".concat(An));if(!pn){(pn=Ye.ownerDocument.createElementNS(C.hR,"symbol")).id=An;var mn=Ye.ownerDocument.createElementNS(C.hR,"image");mn.setAttribute("width","100%"),mn.setAttribute("height","100%"),mn.setAttribute("href",Vt.dataURL),pn.appendChild(mn),Ot.prepend(pn)}var or=Ye.ownerDocument.createElementNS(C.hR,"use");if(or.setAttribute("href","#".concat(An)),St&&Vt.mimeType!==C.LO.svg&&or.setAttribute("filter",q),or.setAttribute("width","".concat(Dr)),or.setAttribute("height","".concat(Ir)),or.setAttribute("opacity","".concat(Wn)),Ie.scale[0]!==1||Ie.scale[1]!==1){var fr=Ie.scale[0]!==1?-Dr:0,Fn=Ie.scale[1]!==1?-Ir:0;or.setAttribute("transform","scale(".concat(Ie.scale[0],", ").concat(Ie.scale[1],") translate(").concat(fr," ").concat(Fn,")"))}var De=Ye.ownerDocument.createElementNS(C.hR,"g");De.appendChild(or),De.setAttribute("transform","translate(".concat(tt||0," ").concat(pt||0,") rotate(").concat(Tt," ").concat(_t," ").concat(Zt,")"));var Ue=We(Ie,Ot,[De],Kt);Ue?Ot.appendChild(Ue):Ot.appendChild(De)}break;case"frame":break;default:if(!(0,v.iB)(Ie))throw new Error("Unimplemented type ".concat(Ie.type));var qe=Ye.ownerDocument.createElementNS(C.hR,"g");Wn!==1&&(qe.setAttribute("stroke-opacity","".concat(Wn)),qe.setAttribute("fill-opacity","".concat(Wn))),qe.setAttribute("transform","translate(".concat(tt||0," ").concat(pt||0,") rotate(").concat(Tt," ").concat(_t," ").concat(Zt,")"));for(var dt=Ie.text.replace(/\r\n?/g,`
`).split(`
`),Ut=(0,Y.Rg)(Ie.fontSize,Ie.lineHeight),qt=Ie.textAlign==="center"?Ie.width/2:Ie.textAlign==="right"?Ie.width:0,on=(0,_.dZ)(Ie.text)?"rtl":"ltr",xn=Ie.textAlign==="center"?"middle":Ie.textAlign==="right"||on==="rtl"?"end":"start",tn=0;tn<dt.length;tn++){var tr=Ye.ownerDocument.createElementNS(C.hR,"text");tr.textContent=dt[tn],tr.setAttribute("x","".concat(qt)),tr.setAttribute("y","".concat(tn*Ut)),tr.setAttribute("font-family",(0,_.$g)(Ie)),tr.setAttribute("font-size","".concat(Ie.fontSize,"px")),tr.setAttribute("fill",Ie.strokeColor),tr.setAttribute("text-anchor",xn),tr.setAttribute("style","white-space: pre;"),tr.setAttribute("direction",on),tr.setAttribute("dominant-baseline","text-before-edge"),qe.appendChild(tr)}var ir=We(Ie,Ot,[qe],Kt);ir?Ot.appendChild(ir):Ot.appendChild(qe)}},Be=new WeakMap([]);function _e(Ie){var ot=ze(Ie),Ye=new Path2D(ot);return Be.set(Ie,Ye),Ye}function ze(Ie){return function(ot){if(!ot.length)return"";var Ye=ot.length-1;return ot.reduce(function(Ke,tt,pt,St){return pt===Ye?Ke.push(tt,Ve(tt,St[0]),"L",St[0],"Z"):Ke.push(tt,Ve(tt,St[pt+1])),Ke},["M",ot[0],"Q"]).join(" ").replace(ut,"$1")}(R(Ie.simulatePressure?Ie.points:Ie.points.length?Ie.points.map(function(ot,Ye){var Ke=(0,b.Z)(ot,2);return[Ke[0],Ke[1],Ie.pressures[Ye]]}):[[0,0,.5]],{simulatePressure:Ie.simulatePressure,size:4.25*Ie.strokeWidth,thinning:.6,smoothing:.5,streamline:.5,easing:function(ot){return Math.sin(ot*Math.PI/2)},last:!!Ie.lastCommittedPoint}))}function Ve(Ie,ot){return[(Ie[0]+ot[0])/2,(Ie[1]+ot[1])/2]}var ut=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g},3547:function(f,h,c){c.d(h,{Lu:function(){return B},Ic:function(){return me},Eu:function(){return z},M_:function(){return he}});var g,m=c(2577),b=c(1930),v=c(9744),w=c(1047),_=function(se,ge,X,we,be,le,ye){se.beginPath(),se.moveTo(ge+le,X),se.lineTo(ge+we-le,X),se.quadraticCurveTo(ge+we,X,ge+we,X+le),se.lineTo(ge+we,X+be-le),se.quadraticCurveTo(ge+we,X+be,ge+we-le,X+be),se.lineTo(ge+le,X+be),se.quadraticCurveTo(ge,X+be,ge,X+be-le),se.lineTo(ge,X+le),se.quadraticCurveTo(ge,X,ge+le,X),se.closePath(),se.fill(),ye&&(se.strokeStyle=ye),se.stroke()},k=c(756),y=c(1868),S=c(5317),C=c(8982),I=c(6938),A=c(242),T=c(2325),L=c(8290),j=c(267),$=c(6340);(function(se){se.ACTIVE="active",se.AWAY="away",se.IDLE="idle"})(g||(g={}));var ee=c(2335),Q=c(4929),pe=c(1974),ie=c(9040);c(2451);function te(se,ge){var X=typeof Symbol<"u"&&se[Symbol.iterator]||se["@@iterator"];if(!X){if(Array.isArray(se)||(X=function(xe,Pe){if(xe){if(typeof xe=="string")return Z(xe,Pe);var Ne=Object.prototype.toString.call(xe).slice(8,-1);if(Ne==="Object"&&xe.constructor&&(Ne=xe.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(xe);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return Z(xe,Pe)}}(se))||ge&&se&&typeof se.length=="number"){X&&(se=X);var we=0,be=function(){};return{s:be,n:function(){return we>=se.length?{done:!0}:{done:!1,value:se[we++]}},e:function(xe){throw xe},f:be}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,ye=!0,ue=!1;return{s:function(){X=X.call(se)},n:function(){var xe=X.next();return ye=xe.done,xe},e:function(xe){ue=!0,le=xe},f:function(){try{ye||X.return==null||X.return()}finally{if(ue)throw le}}}}function Z(se,ge){(ge==null||ge>se.length)&&(ge=se.length);for(var X=0,we=new Array(ge);X<ge;X++)we[X]=se[X];return we}var D,B=2,H=function(se,ge,X,we,be,le,ye,ue){var xe=arguments.length>8&&arguments[8]!==void 0&&arguments[8],Pe=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0;se.save(),se.translate(le,ye),se.rotate(ue),xe&&se.fillRect(ge-le,X-ye,we,be),Pe&&se.roundRect?(se.beginPath(),se.roundRect(ge-le,X-ye,we,be,Pe),se.stroke(),se.closePath()):se.strokeRect(ge-le,X-ye,we,be),se.restore()},V=function(se,ge,X,we){var be=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];se.beginPath(),se.arc(ge,X,we,0,2*Math.PI),se.fill(),be&&se.stroke()},R=function(se,ge,X,we,be){var le=arguments.length>5&&arguments[5]!==void 0&&arguments[5];se.strokeStyle="#5e5ad8",se.setLineDash([]),se.fillStyle="rgba(255, 255, 255, 0.9)",be?se.fillStyle="rgba(134, 131, 226, 0.9)":le&&(se.fillStyle="rgba(177, 151, 252, 0.7)"),V(se,X[0],X[1],we/ge.zoom.value,!le)},Y=function(se,ge,X,we){if(ge.selectedLinearElement){se.save(),se.translate(X.scrollX,X.scrollY),se.lineWidth=1/X.zoom.value;var be=I._.getPointsGlobalCoordinates(we),le=I._.POINT_HANDLE_SIZE,ye=ge.editingLinearElement?le:le/2;be.forEach(function(ue,xe){var Pe,Ne,Me=!((Pe=ge.editingLinearElement)===null||Pe===void 0||(Ne=Pe.selectedPointsIndices)===null||Ne===void 0||!Ne.includes(xe));R(se,X,ue,ye,Me)}),I._.getEditorMidPoints(we,ge).filter(function(ue){return ue!==null}).forEach(function(ue){var xe;ge!=null&&(xe=ge.selectedLinearElement)!==null&&xe!==void 0&&xe.segmentMidPointHoveredCoords&&I._.arePointsEqual(ue,ge.selectedLinearElement.segmentMidPointHoveredCoords)?ge.editingLinearElement?(R(se,X,ue,ye,!1),E(ue,se,X)):(E(ue,se,X),R(se,X,ue,ye,!1)):(ge.editingLinearElement||be.length===2)&&R(se,X,ue,le/2,!1,!0)}),se.restore()}},E=function(se,ge,X){ge.fillStyle="rgba(105, 101, 219, 0.4)",V(ge,se[0],se[1],I._.POINT_HANDLE_SIZE/X.zoom.value,!1)},W=function(se){var ge,X=se.elements,we=se.appState,be=se.scale,le=se.rc,ye=se.canvas,ue=se.renderConfig;if(ye===null)return{atLeastOneVisibleElement:!1};var xe=ue.renderScrollbars,Pe=xe!==void 0&&xe,Ne=ue.renderSelection,Me=Ne===void 0||Ne,Re=ue.renderGrid,We=Re===void 0||Re,Se=ue.isExporting,Be=ue.selectionColor||v.black,_e=ye.getContext("2d");_e.setTransform(1,0,0,1,0,0),_e.save(),_e.scale(be,be);var ze=ye.width/be,Ve=ye.height/be;Se&&ue.theme==="dark"&&(_e.filter=ee.ZF),typeof ue.viewBackgroundColor=="string"?((ue.viewBackgroundColor==="transparent"||ue.viewBackgroundColor.length===5||ue.viewBackgroundColor.length===9||/(hsla|rgba)\(/.test(ue.viewBackgroundColor))&&_e.clearRect(0,0,ze,Ve),_e.save(),_e.fillStyle=ue.viewBackgroundColor,_e.fillRect(0,0,ze,Ve),_e.restore()):_e.clearRect(0,0,ze,Ve),_e.save(),_e.scale(ue.zoom.value,ue.zoom.value),We&&we.gridSize&&function(yn,hr,Er,Nn,ar,Dr){yn.save(),yn.strokeStyle="rgba(0,0,0,0.1)",yn.beginPath();for(var Ir=Er;Ir<Er+ar+2*hr;Ir+=hr)yn.moveTo(Ir,Nn-hr),yn.lineTo(Ir,Nn+Dr+2*hr);for(var Vt=Nn;Vt<Nn+Dr+2*hr;Vt+=hr)yn.moveTo(Er-hr,Vt),yn.lineTo(Er+ar+2*hr,Vt);yn.stroke(),yn.restore()}(_e,we.gridSize,-Math.ceil(ue.zoom.value/we.gridSize)*we.gridSize+ue.scrollX%we.gridSize,-Math.ceil(ue.zoom.value/we.gridSize)*we.gridSize+ue.scrollY%we.gridSize,ze/ue.zoom.value,Ve/ue.zoom.value);var ut=X.filter(function(yn){return me(yn,ze,Ve,{zoom:ue.zoom,offsetLeft:we.offsetLeft,offsetTop:we.offsetTop,scrollX:ue.scrollX,scrollY:ue.scrollY})}),Ie=new Set;ut.forEach(function(yn){yn.groupIds.length>0&&we.frameToHighlight&&we.selectedElementIds[yn.id]&&((0,ie.cO)(yn,we.frameToHighlight)||yn.groupIds.find(function(hr){return Ie.has(hr)}))&&yn.groupIds.forEach(function(hr){return Ie.add(hr)})});var ot=void 0;if(ut.forEach(function(yn){try{var hr,Er;if((yn.frameId||!((hr=we.frameToHighlight)===null||hr===void 0)&&hr.id)&&(ue.isExporting&&(0,$.FQ)(X)||!ue.isExporting&&we.shouldRenderFrames)){_e.save();var Nn=(0,ie.cH)(yn,we);Nn&&(0,ie.Qs)(yn,X,we)&&function(ar,Dr,Ir){Dr.translate(ar.x+Ir.scrollX,ar.y+Ir.scrollY),Dr.beginPath(),Dr.roundRect&&!Ir.isExporting?Dr.roundRect(0,0,ar.width,ar.height,ee.iG.radius/Ir.zoom.value):Dr.rect(0,0,ar.width,ar.height),Dr.clip(),Dr.translate(-(ar.x+Ir.scrollX),-(ar.y+Ir.scrollY))}(Nn,_e,ue),(0,S.lw)(yn,le,_e,ue,we),_e.restore()}else(0,S.lw)(yn,le,_e,ue,we);((Er=we.editingLinearElement)===null||Er===void 0?void 0:Er.elementId)===yn.id&&yn&&(ot=yn),Se||ae(yn,_e,we)}catch(ar){console.error(ar)}}),ot&&Y(_e,we,ue,ot),we.selectionElement)try{(0,S.lw)(we.selectionElement,le,_e,ue,we)}catch(yn){console.error(yn)}(0,L.N1)(we)&&we.suggestedBindings.filter(function(yn){return yn!=null}).forEach(function(yn){ce(_e,ue,yn)}),we.frameToHighlight&&ve(_e,ue,we.frameToHighlight),we.elementsToHighlight&&oe(_e,ue,we.elementsToHighlight,we);var Ye,Ke=(0,y.eD)(X,we),tt=Ke.some(function(yn){return(0,pe.He)(yn)});if(Ke.length===1&&((ge=we.editingLinearElement)===null||ge===void 0?void 0:ge.elementId)===Ke[0].id&&Y(_e,we,ue,Ke[0]),we.selectedLinearElement&&we.selectedLinearElement.hoverPointIndex>=0&&function(yn,hr,Er){var Nn,ar,Dr=hr.selectedLinearElement,Ir=Dr.elementId,Vt=Dr.hoverPointIndex;if((Nn=hr.editingLinearElement)===null||Nn===void 0||(ar=Nn.selectedPointsIndices)===null||ar===void 0||!ar.includes(Vt)){var An=I._.getElement(Ir);if(An){var pn=I._.getPointAtIndexGlobalCoordinates(An,Vt);yn.save(),yn.translate(Er.scrollX,Er.scrollY),E(pn,yn,Er),yn.restore()}}}(_e,we,ue),Me&&!we.multiElement&&!we.editingLinearElement){var pt,St=(0,j.oY)(Ke,we),Kt=Ke.map(function(yn){return yn.id});if(Ke.length===1&&(0,pe.bt)(Ke[0])&&((pt=we.selectedLinearElement)===null||pt===void 0?void 0:pt.elementId)===Ke[0].id&&!Ke[0].locked&&Y(_e,we,ue,Ke[0]),St){var sn,nn=X.reduce(function(yn,hr){var Er=[];if(Kt.includes(hr.id)&&!(0,A.zq)(we,hr)&&Er.push(Be),ue.remoteSelectedElementIds[hr.id]&&Er.push.apply(Er,(0,b.Z)(ue.remoteSelectedElementIds[hr.id].map(function(or){return(0,C.G)(or)}))),Er.length){var Nn=(0,w.qf)(hr,!0),ar=(0,m.Z)(Nn,6),Dr=ar[0],Ir=ar[1],Vt=ar[2],An=ar[3],pn=ar[4],mn=ar[5];yn.push({angle:hr.angle,elementX1:Dr,elementY1:Ir,elementX2:Vt,elementY2:An,selectionColors:Er,dashed:!!ue.remoteSelectedElementIds[hr.id],cx:pn,cy:mn})}return yn},[]),Cn=function(yn){var hr=(0,A.Fb)(X,yn),Er=(0,w.KP)(hr),Nn=(0,m.Z)(Er,4),ar=Nn[0],Dr=Nn[1],Ir=Nn[2],Vt=Nn[3];nn.push({angle:0,elementX1:ar,elementX2:Ir,elementY1:Dr,elementY2:Vt,selectionColors:[v.black],dashed:!0,cx:ar+(Ir-ar)/2,cy:Dr+(Vt-Dr)/2})},vn=te((0,A.iJ)(we));try{for(vn.s();!(sn=vn.n()).done;)Cn(sn.value)}catch(yn){vn.e(yn)}finally{vn.f()}we.editingGroupId&&Cn(we.editingGroupId),nn.forEach(function(yn){return fe(_e,ue,yn)})}if(_e.save(),_e.translate(ue.scrollX,ue.scrollY),Ke.length===1){_e.fillStyle=v.white;var Fe=(0,w.PC)(Ke[0],ue.zoom,"mouse");!we.viewModeEnabled&&St&&q(_e,ue,Fe,Ke[0].angle)}else if(Ke.length>1&&!we.isRotating){var et=2*B/ue.zoom.value;_e.fillStyle=v.white;var st=(0,w.KP)(Ke),ht=(0,m.Z)(st,4),_t=ht[0],Zt=ht[1],Yt=ht[2],bn=ht[3],Wt=_e.getLineDash();_e.setLineDash([2/ue.zoom.value]);var un=_e.lineWidth;_e.lineWidth=1/ue.zoom.value,_e.strokeStyle=Be,H(_e,_t-et,Zt-et,Yt-_t+2*et,bn-Zt+2*et,(_t+Yt)/2,(Zt+bn)/2,0),_e.lineWidth=un,_e.setLineDash(Wt);var jn=(0,w.kK)([_t,Zt,Yt,bn,(_t+Yt)/2,(Zt+bn)/2],0,ue.zoom,"mouse",tt?j.Fn:w.ox);Ke.some(function(yn){return!yn.locked})&&q(_e,ue,jn,0)}_e.restore()}for(var Hn in _e.restore(),ue.remotePointerViewportCoords){var vt=ue.remotePointerViewportCoords[Hn],Nt=vt.x,Tt=vt.y;Nt-=we.offsetLeft,Tt-=we.offsetTop;var cn=Nt<0||Nt>ze-11||Tt<0||Tt>Ve-14;Nt=Math.max(Nt,0),Nt=Math.min(Nt,ze-11),Tt=Math.max(Tt,0),Tt=Math.min(Tt,Ve-14);var Ot=(0,C.G)(Hn);_e.save(),_e.strokeStyle=Ot,_e.fillStyle=Ot;var Ln=ue.remotePointerUserStates[Hn],Wn=cn||Ln===g.IDLE||Ln===g.AWAY;Wn&&(_e.globalAlpha=.3),ue.remotePointerButton&&ue.remotePointerButton[Hn]==="down"&&(_e.beginPath(),_e.arc(Nt,Tt,15,0,2*Math.PI,!1),_e.lineWidth=3,_e.strokeStyle="#ffffff88",_e.stroke(),_e.closePath(),_e.beginPath(),_e.arc(Nt,Tt,15,0,2*Math.PI,!1),_e.lineWidth=1,_e.strokeStyle=Ot,_e.stroke(),_e.closePath()),_e.fillStyle=v.white,_e.strokeStyle=v.white,_e.lineWidth=6,_e.lineJoin="round",_e.beginPath(),_e.moveTo(Nt,Tt),_e.lineTo(Nt+0,Tt+14),_e.lineTo(Nt+4,Tt+9),_e.lineTo(Nt+11,Tt+8),_e.closePath(),_e.stroke(),_e.fill(),_e.fillStyle=Ot,_e.strokeStyle=Ot,_e.lineWidth=2,_e.lineJoin="round",_e.beginPath(),Wn?(_e.moveTo(Nt-1,Tt-1),_e.lineTo(Nt-1,Tt+15),_e.lineTo(Nt+5,Tt+10),_e.lineTo(Nt+12,Tt+9),_e.closePath(),_e.fill()):(_e.moveTo(Nt,Tt),_e.lineTo(Nt+0,Tt+14),_e.lineTo(Nt+4,Tt+9),_e.lineTo(Nt+11,Tt+8),_e.closePath(),_e.fill(),_e.stroke());var Rn=ue.remotePointerUsernames[Hn]||"";if(!cn&&Rn){_e.font="600 12px sans-serif";var zn=Nt+5.5,Et=Tt+14+2,Dt=_e.measureText(Rn),Gt=Dt.actualBoundingBoxDescent+Dt.actualBoundingBoxAscent,Jt=Math.max(Gt,12),$n=zn-1,Kn=Et-1,wr=Dt.width+2+10+2,dr=Jt+2+6+2;_e.roundRect?(_e.beginPath(),_e.roundRect($n,Kn,wr,dr,8),_e.fillStyle=Ot,_e.fill(),_e.strokeStyle=v.white,_e.stroke()):_(_e,$n,Kn,wr,dr,8,v.white),_e.fillStyle=v.black,_e.fillText(Rn,zn+5+1,Et+3+Dt.actualBoundingBoxAscent+Math.floor((Jt-Gt)/2)+2)}_e.restore(),_e.closePath()}return Pe&&(Ye=(0,k.tJ)(X,ze,Ve,ue),_e.save(),_e.fillStyle=k.w1,_e.strokeStyle="rgba(255,255,255,0.8)",[Ye.horizontal,Ye.vertical].forEach(function(yn){yn&&_(_e,yn.x,yn.y,yn.width,yn.height,k.nn/2)}),_e.restore()),_e.restore(),{atLeastOneVisibleElement:ut.length>0,scrollBars:Ye}},F=(0,$.hR)(function(se){var ge,X=W(se);(ge=se.callback)===null||ge===void 0||ge.call(se,X)},{trailing:!0}),z=function(se,ge){var X;if(!ge){var we=W(se);return(X=se.callback)===null||X===void 0||X.call(se,we),we}F(se)},q=function(se,ge,X,we){Object.keys(X).forEach(function(be){var le=X[be];if(le!==void 0){var ye=(0,m.Z)(le,4),ue=ye[0],xe=ye[1],Pe=ye[2],Ne=ye[3];se.save(),se.lineWidth=1/ge.zoom.value,ge.selectionColor&&(se.strokeStyle=ge.selectionColor),be==="rotation"?V(se,ue+Pe/2,xe+Ne/2,Pe/2):se.roundRect?(se.beginPath(),se.roundRect(ue,xe,Pe,Ne,2/ge.zoom.value),se.fill(),se.stroke()):H(se,ue,xe,Pe,Ne,ue+Pe/2,xe+Ne/2,we,!0),se.restore()}})},fe=function(se,ge,X){var we=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2*B,be=X.angle,le=X.elementX1,ye=X.elementY1,ue=X.elementX2,xe=X.elementY2,Pe=X.selectionColors,Ne=X.cx,Me=X.cy,Re=X.dashed,We=ue-le,Se=xe-ye,Be=we/ge.zoom.value,_e=8/ge.zoom.value,ze=4/ge.zoom.value;se.save(),se.translate(ge.scrollX,ge.scrollY),se.lineWidth=1/ge.zoom.value;for(var Ve=Pe.length,ut=0;ut<Ve;++ut)se.strokeStyle=Pe[ut],Re&&se.setLineDash([_e,ze+(_e+ze)*(Ve-1)]),se.lineDashOffset=(_e+ze)*ut,H(se,le-Be,ye-Be,We+2*Be,Se+2*Be,Ne,Me,be);se.restore()},ce=function(se,ge,X){var we=Array.isArray(X)?re:U;se.save(),se.translate(ge.scrollX,ge.scrollY),we(se,X),se.restore()},U=function(se,ge){var X=(0,w.qf)(ge),we=(0,m.Z)(X,4),be=we[0],le=we[1],ye=we[2]-be,ue=we[3]-le,xe=(0,T.fb)(ge,ye,ue);se.strokeStyle="rgba(0,0,0,.05)",se.lineWidth=xe-4;var Pe=2+xe/2;switch(ge.type){case"rectangle":case"text":case"image":case"frame":H(se,be-Pe,le-Pe,ye+2*Pe,ue+2*Pe,be+ye/2,le+ue/2,ge.angle);break;case"diamond":var Ne=Math.hypot(ye,ue);(function(Me,Re,We,Se,Be,_e){Me.save(),Me.translate(Se,Be),Me.rotate(_e),Me.beginPath(),Me.moveTo(0,We/2),Me.lineTo(Re/2,0),Me.lineTo(0,-We/2),Me.lineTo(-Re/2,0),Me.closePath(),Me.stroke(),Me.restore()})(se,ye+2*(Pe*Ne/ue),ue+2*(Pe*Ne/ye),be+ye/2,le+ue/2,ge.angle);break;case"ellipse":(function(Me,Re,We,Se,Be,_e){Me.beginPath(),Me.ellipse(Se,Be,Re/2,We/2,_e,0,2*Math.PI),Me.stroke()})(se,ye+2*Pe,ue+2*Pe,be+ye/2,le+ue/2,ge.angle)}},ve=function(se,ge,X){var we=(0,w.qf)(X),be=(0,m.Z)(we,4),le=be[0],ye=be[1],ue=be[2]-le,xe=be[3]-ye;se.strokeStyle="rgb(0,118,255)",se.lineWidth=2*ee.iG.strokeWidth/ge.zoom.value,se.save(),se.translate(ge.scrollX,ge.scrollY),H(se,le,ye,ue,xe,le+ue/2,ye+xe/2,X.angle,!1,ee.iG.radius/ge.zoom.value),se.restore()},oe=function(se,ge,X,we){var be=X.filter(function(ue){return ue.groupIds.length===0}),le=X.filter(function(ue){return ue.groupIds.length>0}),ye=function(ue){var xe=(0,w.KP)(ue),Pe=(0,m.Z)(xe,4),Ne=Pe[0],Me=Pe[1],Re=Pe[2],We=Pe[3];return{angle:0,elementX1:Ne,elementX2:Re,elementY1:Me,elementY2:We,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:Ne+(Re-Ne)/2,cy:Me+(We-Me)/2}};Object.entries((0,A.yR)(le,we)).filter(function(ue){var xe=(0,m.Z)(ue,2);return xe[0],xe[1]}).map(function(ue){var xe=(0,m.Z)(ue,2),Pe=xe[0];return xe[1],Pe}).map(function(ue){return function(xe){var Pe=(0,A.Fb)(X,xe);return ye(Pe)}(ue)}).concat(be.map(function(ue){return ye([ue])})).forEach(function(ue){return fe(se,ge,ue)})},re=function(se,ge){var X=(0,m.Z)(ge,3),we=X[0],be=X[1],le=X[2],ye=(0,T.fb)(le,le.width,le.height);se.strokeStyle="rgba(0,0,0,0)",se.fillStyle="rgba(0,0,0,.05)",(be==="both"?[0,-1]:be==="start"?[0]:[-1]).forEach(function(ue){var xe=I._.getPointAtIndexGlobalCoordinates(we,ue),Pe=(0,m.Z)(xe,2),Ne=Pe[0],Me=Pe[1];V(se,Ne,Me,ye)})},ae=function(se,ge,X){if(se.link&&!X.selectedElementIds[se.id]){var we=(0,w.qf)(se),be=(0,m.Z)(we,4),le=be[0],ye=be[1],ue=be[2],xe=be[3],Pe=(0,Q.sw)([le,ye,ue,xe],se.angle,X),Ne=(0,m.Z)(Pe,4),Me=Ne[0],Re=Ne[1],We=Ne[2],Se=Ne[3],Be=Me+We/2,_e=Re+Se/2;if(ge.save(),ge.translate(X.scrollX+Be,X.scrollY+_e),ge.rotate(se.angle),D&&D.zoom===X.zoom.value)ge.drawImage(D,Me-Be,Re-_e,We,Se);else{(D=document.createElement("canvas")).zoom=X.zoom.value,D.width=We*window.devicePixelRatio*X.zoom.value,D.height=Se*window.devicePixelRatio*X.zoom.value;var ze=D.getContext("2d");ze.scale(window.devicePixelRatio*X.zoom.value,window.devicePixelRatio*X.zoom.value),ze.fillStyle="#fff",ze.fillRect(0,0,We,Se),ze.drawImage(Q.rj,0,0,We,Se),ze.restore(),ge.drawImage(D,Me-Be,Re-_e,We,Se)}ge.restore()}},me=function(se,ge,X,we){var be=(0,w.Pi)(se),le=(0,m.Z)(be,4),ye=le[0],ue=le[1],xe=le[2],Pe=le[3],Ne=(0,$.dE)({clientX:we.offsetLeft,clientY:we.offsetTop},we),Me=(0,$.dE)({clientX:we.offsetLeft+ge,clientY:we.offsetTop+X},we);return Ne.x<=xe&&Ne.y<=Pe&&Me.x>=ye&&Me.y>=ue},he=function(se,ge,X,we){var be=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},le=be.offsetX,ye=le===void 0?0:le,ue=be.offsetY,xe=ue===void 0?0:ue,Pe=be.exportWithDarkMode,Ne=Pe!==void 0&&Pe,Me=be.exportingFrameId,Re=Me===void 0?null:Me;X&&se.forEach(function(We){if(!We.isDeleted)try{(0,S.Rg)(We,ge,X,we,We.x+ye,We.y+xe,Ne,Re)}catch(Se){console.error(Se)}})}},1564:function(f,h,c){var g=c(1930),m=c(8821),b=c(5169),v=c(1047),w=c(1974),_=function(y){return typeof y=="string"},k=function(){function y(){var S=this;(0,m.Z)(this,y),this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.nonDeletedFrames=[],this.frames=[],this.elementsMap=new Map,this.addNewElement=function(C){C.frameId?S.insertElementAtIndex(C,S.getElementIndex(C.frameId)):S.replaceAllElements([].concat((0,g.Z)(S.elements),[C]))}}return(0,b.Z)(y,[{key:"getElementsIncludingDeleted",value:function(){return this.elements}},{key:"getNonDeletedElements",value:function(){return this.nonDeletedElements}},{key:"getFramesIncludingDeleted",value:function(){return this.frames}},{key:"getNonDeletedFrames",value:function(){return this.nonDeletedFrames}},{key:"getElement",value:function(S){return this.elementsMap.get(S)||null}},{key:"getNonDeletedElement",value:function(S){var C=this.getElement(S);return C&&(0,v.qP)(C)?C:null}},{key:"mapElements",value:function(S){var C=!1,I=this.elements.map(function(A){var T=S(A);return T!==A&&(C=!0),T});return C&&this.replaceAllElements(I),C}},{key:"replaceAllElements",value:function(S){var C=this;this.elements=S;var I=[];this.elementsMap.clear(),S.forEach(function(A){(0,w.He)(A)&&I.push(A),C.elementsMap.set(A.id,A),y.mapElementToScene(A,C)}),this.nonDeletedElements=(0,v.Lm)(this.elements),this.frames=I,this.nonDeletedFrames=(0,v.Xf)(this.frames),this.informMutation()}},{key:"informMutation",value:function(){for(var S=0,C=Array.from(this.callbacks);S<C.length;S++)(0,C[S])()}},{key:"addCallback",value:function(S){var C=this;if(this.callbacks.has(S))throw new Error;return this.callbacks.add(S),function(){if(!C.callbacks.has(S))throw new Error;C.callbacks.delete(S)}}},{key:"destroy",value:function(){var S=this;y.sceneMapById.forEach(function(C,I){C===S&&y.sceneMapById.delete(I)}),this.callbacks.clear()}},{key:"insertElementAtIndex",value:function(S,C){if(!Number.isFinite(C)||C<0)throw new Error("insertElementAtIndex can only be called with index >= 0");var I=[].concat((0,g.Z)(this.elements.slice(0,C)),[S],(0,g.Z)(this.elements.slice(C)));this.replaceAllElements(I)}},{key:"insertElementsAtIndex",value:function(S,C){if(!Number.isFinite(C)||C<0)throw new Error("insertElementAtIndex can only be called with index >= 0");var I=[].concat((0,g.Z)(this.elements.slice(0,C)),(0,g.Z)(S),(0,g.Z)(this.elements.slice(C)));this.replaceAllElements(I)}},{key:"getElementIndex",value:function(S){return this.elements.findIndex(function(C){return C.id===S})}}],[{key:"mapElementToScene",value:function(S,C){_(S)?this.sceneMapById.set(S,C):(this.sceneMapByElement.set(S,C),this.sceneMapById.set(S.id,C))}},{key:"getScene",value:function(S){return _(S)?this.sceneMapById.get(S)||null:this.sceneMapByElement.get(S)||null}}]),y}();k.sceneMapByElement=new WeakMap,k.sceneMapById=new Map,h.Z=k},8120:function(f,h,c){c.d(h,{$b:function(){return g},CJ:function(){return S},M9:function(){return v},PD:function(){return m},QG:function(){return y},Un:function(){return k},Zd:function(){return b},bZ:function(){return _},sh:function(){return w}});var g=function(C){return C==="rectangle"||C==="ellipse"||C==="diamond"||C==="line"||C==="freedraw"},m=function(C){return C!=="image"&&C!=="frame"},b=function(C){return C==="rectangle"||C==="ellipse"||C==="diamond"||C==="freedraw"||C==="arrow"||C==="line"},v=function(C){return C==="rectangle"||C==="ellipse"||C==="diamond"||C==="arrow"||C==="line"},w=function(C){return C==="rectangle"||C==="arrow"||C==="line"||C==="diamond"},_=function(C){return C==="text"},k=function(C){return C==="arrow"},y=function(C,I){for(var A=null,T=C.length-1;T>=0;--T){var L=C[T];if(!L.isDeleted&&I(L)){A=L;break}}return A},S=function(C,I){return C.filter(function(A){return!A.isDeleted&&I(A)})}},4162:function(f,h,c){c.d(h,{$D:function(){return $},Cg:function(){return Q},NL:function(){return j},oj:function(){return L}});var g=c(2577),m=c(8950),b=c(2975),v=c.n(b),w=c(6574),_=c(8925),k=c(3547),y=c(6340),S=c(2335),C=c(8897),I=c(5523),A=c(5637),T=c(1564),L="<!-- svg-source:excalidraw -->",j=function(){var pe=(0,m.Z)(v().mark(function ie(te,Z,D,B){var H,V,R,Y,E,W,F,z,q,fe,ce,U,ve,oe,re,ae,me,he,se,ge=arguments;return v().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return H=B.exportBackground,V=B.exportPadding,R=V===void 0?S.qy:V,Y=B.viewBackgroundColor,E=ge.length>4&&ge[4]!==void 0?ge[4]:function(we,be){var le=document.createElement("canvas");return le.width=we*Z.exportScale,le.height=be*Z.exportScale,{canvas:le,scale:Z.exportScale}},W=ee(te,R),F=(0,g.Z)(W,4),z=F[0],q=F[1],fe=F[2],ce=F[3],U=E(fe,ce),ve=U.canvas,oe=U.scale,re=oe===void 0?1:oe,ae=(0,C.im)(),X.next=7,(0,A.Xx)({imageCache:new Map,fileIds:(0,A.oA)(te).map(function(we){return we.fileId}),files:D});case 7:return me=X.sent,he=me.imageCache,se=(0,y.FQ)(te),(0,k.Eu)({elements:te,appState:Z,scale:re,rc:w.Z.canvas(ve),canvas:ve,renderConfig:{viewBackgroundColor:H?Y:null,scrollX:-z+(se?0:R),scrollY:-q+(se?0:R),zoom:ae.zoom,remotePointerViewportCoords:{},remoteSelectedElementIds:{},shouldCacheIgnoreZoom:!1,remotePointerUsernames:{},remotePointerUserStates:{},theme:Z.exportWithDarkMode?"dark":"light",imageCache:he,renderScrollbars:!1,renderSelection:!1,renderGrid:!1,isExporting:!0}}),X.abrupt("return",ve);case 12:case"end":return X.stop()}},ie)}));return function(ie,te,Z,D){return pe.apply(this,arguments)}}(),$=function(){var pe=(0,m.Z)(v().mark(function ie(te,Z,D,B){var H,V,R,Y,E,W,F,z,q,fe,ce,U,ve,oe,re,ae,me,he,se,ge,X,we,be,le,ye,ue,xe,Pe,Ne,Me,Re,We,Se,Be,_e;return v().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(R=Z.exportPadding,Y=R===void 0?S.qy:R,E=Z.viewBackgroundColor,W=Z.exportScale,F=W===void 0?1:W,z=Z.exportEmbedScene,q="",!z){ze.next=14;break}return ze.prev=3,ze.next=6,Promise.resolve().then(c.bind(c,673));case 6:return ze.next=8,ze.sent.encodeSvgMetadata({text:B!=null&&B.serializeAsJSON?B==null||(fe=B.serializeAsJSON)===null||fe===void 0?void 0:fe.call(B):(0,I.I_)(te,Z,D||{},"local")});case 8:q=ze.sent,ze.next=14;break;case 11:ze.prev=11,ze.t0=ze.catch(3),console.error(ze.t0);case 14:return ce=ee(te,Y),U=(0,g.Z)(ce,4),ve=U[0],oe=U[1],re=U[2],ae=U[3],(me=document.createElementNS(S.hR,"svg")).setAttribute("version","1.1"),me.setAttribute("xmlns",S.hR),me.setAttribute("viewBox","0 0 ".concat(re," ").concat(ae)),me.setAttribute("width","".concat(re*F)),me.setAttribute("height","".concat(ae*F)),Z.exportWithDarkMode&&me.setAttribute("filter",S.ZF),he="https://excalidraw.com/",he=window.EXCALIDRAW_ASSET_PATH||"https://unpkg.com/".concat("revedraw","@").concat("1.0.0-alpha.10"),(se=he)!==null&&se!==void 0&&se.startsWith("/")&&(he=he.replace("/","".concat(window.location.origin,"/"))),he="".concat(he,"/dist/excalidraw-assets/"),ge=((H=T.Z.getScene(te[0]))===null||H===void 0||(V=H.getNonDeletedElements())===null||V===void 0?void 0:V.length)===te.length,X=(0,y.FQ)(te),we=-ve+(X?0:Y),be=-oe+(X?0:Y),le=ge||!X?void 0:te.find(function(Ve){return Ve.type==="frame"}),ye="",le&&(ue=(0,_.qf)(le),xe=(0,g.Z)(ue,4),Pe=xe[0],Ne=xe[1],Me=xe[2],Re=xe[3],We=(Me-Pe)/2-(le.x-Pe),Se=(Re-Ne)/2-(le.y-Ne),ye="<clipPath id=".concat(le.id,`>
            <rect transform="translate(`).concat(le.x+we," ").concat(le.y+be,") rotate(").concat(le.angle," ").concat(We," ").concat(Se,`)"
          width="`).concat(le.width,`"
          height="`).concat(le.height,`"
          >
          </rect>
        </clipPath>`)),me.innerHTML=`
  `.concat(L,`
  `).concat(q,`
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("`).concat(he,`Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("`).concat(he,`Cascadia.woff2");
      }
    </style>
    `).concat(ye,`
  </defs>
  `),Z.exportBackground&&E&&((Be=me.ownerDocument.createElementNS(S.hR,"rect")).setAttribute("x","0"),Be.setAttribute("y","0"),Be.setAttribute("width","".concat(re)),Be.setAttribute("height","".concat(ae)),Be.setAttribute("fill",E),me.appendChild(Be)),_e=w.Z.svg(me),(0,k.M_)(te,_e,me,D||{},{offsetX:we,offsetY:be,exportWithDarkMode:Z.exportWithDarkMode,exportingFrameId:(le==null?void 0:le.id)||null}),ze.abrupt("return",me);case 36:case"end":return ze.stop()}},ie,null,[[3,11]])}));return function(ie,te,Z,D){return pe.apply(this,arguments)}}(),ee=function(pe,ie){var te,Z,D=((te=T.Z.getScene(pe[0]))===null||te===void 0||(Z=te.getNonDeletedElements())===null||Z===void 0?void 0:Z.length)===pe.length,B=(0,y.FQ)(pe);if(!D||B){var H=pe.filter(function(z){return z.type==="frame"}).reduce(function(z,q){return z[q.id]=!0,z},{});pe=pe.filter(function(z){var q;return!H[(q=z.frameId)!==null&&q!==void 0?q:""]})}var V=(0,_.KP)(pe),R=(0,g.Z)(V,4),Y=R[0],E=R[1],W=R[2],F=R[3];return[Y,E,(0,y.TE)(Y,W)+(B?0:2*ie),(0,y.TE)(E,F)+(B?0:2*ie)]},Q=function(pe,ie,te){var Z=ee(pe,ie).map(function(B){return Math.trunc(B*te)}),D=(0,g.Z)(Z,4);return[D[2],D[3]]}},75:function(f,h,c){c.d(h,{$b:function(){return v.$b},CJ:function(){return v.CJ},M9:function(){return v.M9},N:function(){return m.N},PR:function(){return m.PR},QG:function(){return v.QG},Un:function(){return v.Un},W:function(){return b.W},Yp:function(){return m.Yp},Zd:function(){return v.Zd},Zs:function(){return m.Zs},_4:function(){return g._4},bZ:function(){return v.bZ},eD:function(){return m.eD},j:function(){return w.j},sh:function(){return v.sh}});var g=c(756),m=c(1868),b=c(2264),v=c(8120),w=c(746)},2264:function(f,h,c){c.d(h,{W:function(){return w},s:function(){return v}});var g=c(2577),m=c(1047),b=c(6340),v=function(_){var k=_.scenePoint,y=_.viewportDimensions,S=_.zoom;return{scrollX:y.width/2/S.value-k.x,scrollY:y.height/2/S.value-k.y}},w=function(_,k,y){if(!(_=(0,m.n_)(_)).length)return{scrollX:0,scrollY:0};var S=(0,m.KP)(_),C=(0,g.Z)(S,4),I=C[0],A=C[1],T=C[2],L=C[3];if(function(ee,Q,pe){var ie=(0,g.Z)(pe,4),te=ie[0],Z=ie[1],D=ie[2],B=ie[3],H=(0,b._i)({sceneX:te,sceneY:Z},ee),V=H.x,R=H.y,Y=(0,b._i)({sceneX:D,sceneY:B},ee),E=Y.x,W=Y.y;return E-V>ee.width||W-R>ee.height}(k,0,[I,A,T,L])){var j=(0,m.os)(_,(0,b.dE)({clientX:k.scrollX,clientY:k.scrollY},k)),$=(0,g.Z)(j,4);I=$[0],A=$[1],T=$[2],L=$[3]}return v({scenePoint:{x:(I+T)/2,y:(A+L)/2},viewportDimensions:{width:k.width,height:k.height},zoom:k.zoom})}},756:function(f,h,c){c.d(h,{WM:function(){return w},_4:function(){return S},nn:function(){return _},tJ:function(){return y},w1:function(){return k}});var g=c(2577),m=c(1047),b=c(6340),v=c(8211),w=4,_=6,k="rgba(0,0,0,0.3)",y=function(C,I,A,T){var L=T.scrollX,j=T.scrollY,$=T.zoom;if(C.length===0)return{horizontal:null,vertical:null};var ee=(0,m.KP)(C),Q=(0,g.Z)(ee,4),pe=Q[0],ie=Q[1],te=Q[2],Z=Q[3],D=I/$.value,B=A/$.value,H=I-D,V=A-B,R={top:parseInt((0,b.IH)("sat"))||0,bottom:parseInt((0,b.IH)("sab"))||0,left:parseInt((0,b.IH)("sal"))||0,right:parseInt((0,b.IH)("sar"))||0},Y=(0,v.G3)().rtl,E=H/2-L+R.left,W=V/2-j+R.top,F=E+D-R.right,z=W+B-R.bottom,q=Math.min(pe,E),fe=Math.min(ie,W),ce=Math.max(te,F),U=Math.max(Z,z);return{horizontal:E===q&&F===ce?null:{x:Math.max(R.left,w)+(E-q)/(ce-q)*I,y:A-_-Math.max(w,R.bottom),width:(F-E)/(ce-q)*I-Math.max(2*w,R.left+R.right),height:_},vertical:W===fe&&z===U?null:{x:Y?Math.max(R.left,w):I-_-Math.max(R.right,w),y:(W-fe)/(U-fe)*A+Math.max(R.top,w),width:_,height:(z-W)/(U-fe)*A-Math.max(2*w,R.top+R.bottom)}}},S=function(C,I,A){var T=[C.horizontal,C.vertical].map(function(ee){return ee!=null&&ee.x<=I&&I<=ee.x+ee.width&&ee.y<=A&&A<=ee.y+ee.height}),L=(0,g.Z)(T,2),j=L[0],$=L[1];return{isOverEither:j||$,isOverHorizontal:j,isOverVertical:$}}},1868:function(f,h,c){c.d(h,{N:function(){return k},PR:function(){return y},Yp:function(){return _},Zs:function(){return C},aI:function(){return w},eD:function(){return S}});var g=c(2577),m=c(1047),b=c(1974),v=c(9040),w=function(I){var A=new Set;return I.forEach(function(T){T.type==="frame"&&A.add(T.id)}),I.filter(function(T){return!T.frameId||!A.has(T.frameId)})},_=function(I,A){var T=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],L=(0,m.qf)(A),j=(0,g.Z)(L,4),$=j[0],ee=j[1],Q=j[2],pe=j[3],ie=I.filter(function(te){var Z=(0,m.Pi)(te),D=(0,g.Z)(Z,4),B=D[0],H=D[1],V=D[2],R=D[3],Y=(0,v.$Z)(te);if(Y){var E=(0,m.Pi)(Y),W=(0,g.Z)(E,4),F=W[0],z=W[1],q=W[2],fe=W[3];B=Math.max(F,B),H=Math.max(z,H),V=Math.min(q,V),R=Math.min(fe,R)}return te.locked===!1&&te.type!=="selection"&&!(0,b.Xh)(te)&&$<=B&&ee<=H&&Q>=V&&pe>=R});return ie=(ie=T?w(ie):ie).filter(function(te){var Z=(0,v.$Z)(te);return!Z||(0,v.cO)(te,Z)})},k=function(I,A){return I.some(function(T){return A.selectedElementIds[T.id]})},y=function(I,A,T){var L=Array.from(new Set(S(I,A).map(function(j){return T(j)})));return L.length===1?L[0]:null},S=function(I,A,T){var L=I.filter(function($){return A.selectedElementIds[$.id]||T!=null&&T.includeBoundTextElement&&(0,b.Xh)($)&&A.selectedElementIds[$==null?void 0:$.containerId]?$:null});if(T!=null&&T.includeElementsInFrames){var j=[];return L.forEach(function($){$.type==="frame"&&(0,v.wO)(I,$.id).forEach(function(ee){return j.push(ee)}),j.push($)}),j}return L},C=function(I,A){return A.editingElement?[A.editingElement]:S(I,A,{includeBoundTextElement:!0})}},746:function(f,h,c){c.d(h,{E:function(){return b},j:function(){return m}});var g=c(2335),m=function(v){return Math.max(g.E0,Math.min(v,30))},b=function(v,w){var _=v.viewportX,k=v.viewportY,y=v.nextZoom,S=_-w.offsetLeft,C=k-w.offsetTop,I=w.zoom.value;return{scrollX:w.scrollX+(S-S/I)+-(S-S/y),scrollY:w.scrollY+(C-C/I)+-(C-C/y),zoom:{value:y}}}},6340:function(f,h,c){c.d(h,{$9:function(){return ue},$g:function(){return pe},$h:function(){return ze},AK:function(){return se},B4:function(){return V},C3:function(){return Me},Ds:function(){return te},FG:function(){return ge},FQ:function(){return Ye},Fc:function(){return T},G3:function(){return Ne},I4:function(){return We},IH:function(){return ae},Ip:function(){return xe},KJ:function(){return F},Mj:function(){return ot},OF:function(){return z},Om:function(){return E},Oo:function(){return L},PI:function(){return le},Pr:function(){return U},Qm:function(){return be},TE:function(){return Y},Uk:function(){return q},_Z:function(){return $},_i:function(){return re},ag:function(){return Be},cx:function(){return X},dE:function(){return oe},dZ:function(){return he},h2:function(){return Se},hR:function(){return Z},mO:function(){return ie},qr:function(){return we},qz:function(){return Pe},rB:function(){return fe},s:function(){return Q},tH:function(){return ye},uY:function(){return ve},v4:function(){return _e},w8:function(){return Ie},wO:function(){return j},wo:function(){return ce},xn:function(){return Re},xp:function(){return ut},y1:function(){return ee},y8:function(){return Ve},yo:function(){return R},z8:function(){return W}});var g=c(6655),m=c(7169),b=c(1930),v=c(2577),w=c(9744),_=c(56),k=c(2335),y=c(5156),S=c(8897),C=c(451);function I(Ke,tt){var pt=Object.keys(Ke);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(Ke);tt&&(St=St.filter(function(Kt){return Object.getOwnPropertyDescriptor(Ke,Kt).enumerable})),pt.push.apply(pt,St)}return pt}function A(Ke){for(var tt=1;tt<arguments.length;tt++){var pt=arguments[tt]!=null?arguments[tt]:{};tt%2?I(Object(pt),!0).forEach(function(St){(0,m.Z)(Ke,St,pt[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ke,Object.getOwnPropertyDescriptors(pt)):I(Object(pt)).forEach(function(St){Object.defineProperty(Ke,St,Object.getOwnPropertyDescriptor(pt,St))})}return Ke}var T=function(){var Ke=new Date,tt=Ke.getFullYear(),pt="".concat(Ke.getMonth()+1).padStart(2,"0"),St="".concat(Ke.getDate()).padStart(2,"0"),Kt="".concat(Ke.getHours()).padStart(2,"0"),sn="".concat(Ke.getMinutes()).padStart(2,"0");return"".concat(tt,"-").concat(pt,"-").concat(St,"-").concat(Kt).concat(sn)},L=function(Ke){return Ke.charAt(0).toUpperCase()+Ke.slice(1)},j=function(Ke){return Ke instanceof HTMLElement&&Ke.className.includes("ToolIcon")},$=function(Ke){return Ke instanceof HTMLElement&&Ke.dataset.type==="wysiwyg"||Ke instanceof HTMLBRElement||Ke instanceof HTMLInputElement||Ke instanceof HTMLTextAreaElement||Ke instanceof HTMLSelectElement},ee=function(Ke){return $(Ke)||Ke instanceof Element&&!!Ke.closest("label, button")},Q=function(Ke){return Ke instanceof HTMLElement&&Ke.dataset.type==="wysiwyg"||Ke instanceof HTMLBRElement||Ke instanceof HTMLTextAreaElement||Ke instanceof HTMLInputElement&&(Ke.type==="text"||Ke.type==="number")},pe=function(Ke){for(var tt=Ke.fontFamily,pt=(0,C.B)(),St=0,Kt=Object.entries(pt);St<Kt.length;St++){var sn=(0,v.Z)(Kt[St],2),nn=sn[0];if(sn[1]===tt)return"".concat(nn,", ").concat(k._D)}return k._D},ie=function(Ke){var tt=Ke.fontSize,pt=Ke.fontFamily;return"".concat(tt,"px ").concat(pe({fontFamily:pt}))},te=function(Ke,tt){var pt=0,St=null,Kt=function(){for(var sn=arguments.length,nn=new Array(sn),Cn=0;Cn<sn;Cn++)nn[Cn]=arguments[Cn];St=nn,clearTimeout(pt),pt=window.setTimeout(function(){St=null,Ke.apply(void 0,nn)},tt)};return Kt.flush=function(){if(clearTimeout(pt),St){var sn=St;St=null,Ke.apply(void 0,(0,b.Z)(sn))}},Kt.cancel=function(){St=null,clearTimeout(pt)},Kt},Z=function(Ke,tt){var pt=null,St=null,Kt=null,sn=function Cn(vn){pt=window.requestAnimationFrame(function(){pt=null,Ke.apply(void 0,(0,b.Z)(vn)),St=null,Kt&&(St=Kt,Kt=null,Cn(St))})},nn=function(){for(var Cn=arguments.length,vn=new Array(Cn),Fe=0;Fe<Cn;Fe++)vn[Fe]=arguments[Fe];St=vn,pt===null?sn(St):tt!=null&&tt.trailing&&(Kt=vn)};return nn.flush=function(){pt!==null&&(cancelAnimationFrame(pt),pt=null),St&&(Ke.apply(void 0,(0,b.Z)(Kt||St)),St=Kt=null)},nn.cancel=function(){St=Kt=null,pt!==null&&(cancelAnimationFrame(pt),pt=null)},nn};function D(Ke){return 1-Math.pow(1-Ke,4)}var B,H,V=function(Ke,tt,pt,St){var Kt,sn=!1,nn=0,Cn=(St==null?void 0:St.duration)||250,vn=(St==null?void 0:St.easeFn)||D;return nn=window.requestAnimationFrame(function Fe(et){if(!sn){Kt===void 0&&(Kt=et);var st=et-Kt;if(st<Cn){var ht=vn(st/Cn),_t=Ke.map(function(Zt,Yt){return(tt[Yt]-Zt)*ht+Zt});pt.apply(void 0,(0,b.Z)(_t)),nn=window.requestAnimationFrame(Fe)}else pt.apply(void 0,(0,b.Z)(tt))}}),function(){sn=!0,window.cancelAnimationFrame(nn)}},R=function(Ke,tt){if(!Ke.length||tt<1)return[];for(var pt=0,St=0,Kt=Array(Math.ceil(Ke.length/tt));pt<Ke.length;)Kt[St++]=Ke.slice(pt,pt+=tt);return Kt},Y=function(Ke,tt){return Math.abs(Ke-tt)},E=function(Ke,tt){return tt.type==="custom"?A(A({},Ke.activeTool),{},{type:"custom",customType:tt.customType}):A(A({},Ke.activeTool),{},{lastActiveTool:tt.lastActiveToolBeforeEraser===void 0?Ke.activeTool.lastActiveTool:tt.lastActiveToolBeforeEraser,type:tt.type,customType:null})},W=function(Ke){Ke&&(Ke.style.cursor="")},F=function(Ke,tt){Ke&&(Ke.style.cursor=tt)},z=function(Ke,tt){B&&B.theme===tt||function(){var pt=tt===k.C6.DARK;(B=document.createElement("canvas")).theme=tt,B.height=20,B.width=20;var St=B.getContext("2d");St.lineWidth=1,St.beginPath(),St.arc(B.width/2,B.height/2,5,0,2*Math.PI),St.fillStyle=pt?w.black:w.white,St.fill(),St.strokeStyle=pt?w.white:w.black,St.stroke(),H=B.toDataURL(k.LO.svg)}(),F(Ke,"url(".concat(H,") ").concat(10," ").concat(10,", auto"))},q=function(Ke,tt){Ke&&(tt.activeTool.type==="selection"?W(Ke):(0,S.l$)(tt)?Ke.style.cursor=k.oc.GRAB:(0,S.EN)(tt)?z(Ke,tt.theme):["image","custom"].includes(tt.activeTool.type)||(Ke.style.cursor=k.oc.CROSSHAIR))},fe=function(){var Ke;return((Ke=document.fullscreenElement)===null||Ke===void 0?void 0:Ke.nodeName)==="HTML"},ce=function(){return document.documentElement.requestFullscreen()},U=function(){return document.exitFullscreen()},ve=function(Ke){return Ke=Ke.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),k.Um?Ke.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):Ke.replace(/\bCtrlOrCmd\b/gi,"Ctrl")},oe=function(Ke,tt){var pt=Ke.clientX,St=Ke.clientY,Kt=tt.zoom,sn=tt.offsetLeft,nn=tt.offsetTop,Cn=tt.scrollX,vn=tt.scrollY;return{x:(pt-sn)/Kt.value-Cn,y:(St-nn)/Kt.value-vn}},re=function(Ke,tt){var pt=Ke.sceneX,St=Ke.sceneY,Kt=tt.zoom,sn=tt.offsetLeft,nn=tt.offsetTop,Cn=tt.scrollX,vn=tt.scrollY;return{x:(pt+Cn)*Kt.value+sn,y:(St+vn)*Kt.value+nn}},ae=function(Ke){return getComputedStyle(document.documentElement).getPropertyValue("--".concat(Ke))},me=new RegExp("^[^".concat("A-Za-z--------","]*[").concat("---","]")),he=function(Ke){return me.test(Ke)},se=function(Ke){var tt=(0,v.Z)(Ke,2);return{x:tt[0],y:tt[1]}},ge=function(Ke){if((Ke==null?void 0:Ke.name)!=="AbortError")throw Ke;console.warn(Ke)},X=function(Ke,tt){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;pt<0&&(pt=Ke.length+pt);for(var St=(pt=Math.min(Ke.length,Math.max(pt,0)))-1;++St<Ke.length;)if(tt(Ke[St],St,Ke))return St;return-1},we=function(Ke,tt){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ke.length-1;pt<0&&(pt=Ke.length+pt);for(var St=(pt=Math.min(Ke.length-1,Math.max(pt,0)))+1;--St>-1;)if(tt(Ke[St],St,Ke))return St;return-1},be=function(Ke){var tt=Ke.length===5&&Ke.substr(4,1)==="0",pt=Ke.length===9&&Ke.substr(7,2)==="00";return tt||pt||Ke===_.HO.transparent},le=function(){var Ke,tt,pt=new Promise(function(St,Kt){Ke=St,tt=Kt});return pt.resolve=Ke,pt.reject=tt,pt},ye=function(Ke){return function(tt){(0,y.unstable_batchedUpdates)(Ke,tt)}},ue=function(Ke){return Z(function(tt){(0,y.unstable_batchedUpdates)(Ke,tt)})},xe=function(Ke){for(var tt=Ke.parentElement;tt;){if(tt===document.body)return document;var pt=window.getComputedStyle(tt).overflowY;if(tt.scrollHeight>tt.clientHeight&&(pt==="auto"||pt==="scroll"||pt==="overlay"))return tt;tt=tt.parentElement}return document},Pe=function(Ke){for(var tt=Ke.parentElement;tt;){if(tt.tabIndex>-1)return void tt.focus();tt=tt.parentElement}},Ne=function(Ke){return Array.from(Ke).map(function(tt){return"0".concat(tt.toString(16)).slice(-2)}).join("")},Me=function(){return Se()?1:Date.now()},Re=function(Ke){return Ke.reduce(function(tt,pt){return tt.set(typeof pt=="string"?pt:pt.id,pt),tt},new Map)},We=function(Ke){return Ke.reduce(function(tt,pt,St){return tt.set(pt.id,[pt,St]),tt},new Map)},Se=function(){return!1},Be=function(Ke,tt){return new CustomEvent(Ke,{detail:{nativeEvent:tt},cancelable:!0})},_e=function(Ke,tt){var pt=!1;for(var St in tt){var Kt=tt[St];if(Kt!==void 0){if(Ke[St]===Kt&&((0,g.Z)(Kt)!=="object"||Kt===null))continue;pt=!0}}return pt?A(A({},Ke),tt):Ke},ze=function(){try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Ve=function(Ke){return!!Ke&&(0,g.Z)(Ke)==="object"&&"then"in Ke&&"catch"in Ke&&"finally"in Ke},ut=function(Ke){var tt=Ke==null?void 0:Ke.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return tt?Array.from(tt).filter(function(pt){return pt.tabIndex>-1&&!pt.disabled}):[]},Ie=function(Ke,tt,pt){var St=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Kt=Object.keys(Ke),sn=Object.keys(tt);return Kt.length===sn.length&&Kt.every(function(nn){var Cn=pt==null?void 0:pt[nn],vn=Cn?Cn(Ke[nn],tt[nn]):Ke[nn]===tt[nn];return!vn&&St&&console.info("%cisShallowEqual: ".concat(nn," not equal ->"),"color: #8B4000",Ke[nn],tt[nn]),vn})},ot=function(Ke,tt){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},St=pt.checkForDefaultPrevented,Kt=St===void 0||St;return function(sn){if(Ke==null||Ke(sn),!Kt||!sn.defaultPrevented)return tt==null?void 0:tt(sn)}},Ye=function(Ke){var tt=Ke.filter(function(pt){return pt.type==="frame"});return tt.length===1&&Ke.every(function(pt){return pt.type==="frame"||pt.frameId===tt[0].id})}},451:function(f,h,c){c.d(h,{B:function(){return b},s:function(){return v}});var g=c(2335),m="custom_fonts",b=function(){var w={Helvetica:2,Cascadia:3};w[g.Zj]=1;var _=Object.keys(w).length,k=localStorage.getItem(m),y=k?k.split(","):void 0;return y==null||y.forEach(function(S,C){S&&(w[S]="".concat(S,"_").concat(C+1+_))}),w},v=function(w){var _,k=(_=localStorage.getItem(m))===null||_===void 0?void 0:_.split(","),y=k==null?void 0:k.filter(function(S){return S!==w});localStorage.setItem(m,(y==null?void 0:y.join(","))||"")}},7642:function(f,h,c){c.d(h,{jY:function(){return ie},rr:function(){return Z},ux:function(){return pe},yZ:function(){return te}});var g=c(1930),m=c(1935),b=c(1974),v=c(9040),w=c(242),_=c(75),k=c(1564),y=c(6340);function S(D,B){var H=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!H){if(Array.isArray(D)||(H=function(F,z){if(F){if(typeof F=="string")return C(F,z);var q=Object.prototype.toString.call(F).slice(8,-1);if(q==="Object"&&F.constructor&&(q=F.constructor.name),q==="Map"||q==="Set")return Array.from(F);if(q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q))return C(F,z)}}(D))||B&&D&&typeof D.length=="number"){H&&(D=H);var V=0,R=function(){};return{s:R,n:function(){return V>=D.length?{done:!0}:{done:!1,value:D[V++]}},e:function(F){throw F},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y,E=!0,W=!1;return{s:function(){H=H.call(D)},n:function(){var F=H.next();return E=F.done,F},e:function(F){W=!0,Y=F},f:function(){try{E||H.return==null||H.return()}finally{if(W)throw Y}}}}function C(D,B){(B==null||B>D.length)&&(B=D.length);for(var H=0,V=new Array(B);H<B;H++)V[H]=D[H];return V}var I=function(D,B,H){for(var V=[],R=[],Y=null,E=-1,W=(0,y.xn)(H||(0,_.eD)(D,B,{includeBoundTextElement:!0}));++E<D.length;){var F=D[E];W.get(F.id)?(R.length&&(V=V.concat(R),R=[]),V.push(E),Y=E+1):F.isDeleted&&Y===E?(Y=E+1,R.push(E)):R=[]}return V},A=function(D,B,H){if("containerId"in D&&D.containerId){if(H!=="left")return B.indexOf(D);var V=k.Z.getScene(D).getElement(D.containerId);if(V)return B.indexOf(V)}else{var R,Y,E=(R=D.boundElements)===null||R===void 0||(Y=R.find(function(F){return F.type!=="arrow"}))===null||Y===void 0?void 0:Y.id;if(E){if(H==="left")return B.indexOf(D);var W=k.Z.getScene(D).getElement(E);if(W)return B.indexOf(W)}}},T=function(D,B){return B.reduce(function(H,V){var R=D[V];return H[R.id]=R,H},{})},L=function(D,B,H,V){var R,Y,E=I(D,B,V),W=T(D,E),F=(Y=0,(R=E).reduce(function(z,q,fe){return fe>0&&R[fe-1]!==q-1&&(Y=++Y),(z[Y]||(z[Y]=[])).push(q),z},[]));return H==="right"&&(F=F.reverse()),F.forEach(function(z,q){var fe=z[0],ce=z[z.length-1],U=H==="left"?fe:ce,ve=function(he,se,ge,X){var we,be=se[ge],le=function(Me){return!Me.isDeleted&&(!he.editingGroupId||Me.groupIds.includes(he.editingGroupId))},ye=X==="left"?(0,y.qr)(se,le,Math.max(0,ge-1)):(0,y.cx)(se,le,ge+1),ue=se[ye];if(!ue)return-1;if(he.editingGroupId){var xe;if((be==null?void 0:be.groupIds.join(""))===(ue==null?void 0:ue.groupIds.join("")))return(xe=A(ue,se,X))!==null&&xe!==void 0?xe:ye;if(ue==null||!ue.groupIds.includes(he.editingGroupId))return-1}if(!ue.groupIds.length)return(we=A(ue,se,X))!==null&&we!==void 0?we:ye;var Pe=he.editingGroupId?ue.groupIds[ue.groupIds.indexOf(he.editingGroupId)-1]:ue.groupIds[ue.groupIds.length-1],Ne=(0,w.Fb)(se,Pe);return Ne.length?X==="left"?se.indexOf(Ne[0]):se.indexOf(Ne[Ne.length-1]):ye}(B,D,U,H);if(ve!==-1&&U!==ve){var oe=H==="left"?D.slice(0,ve):D.slice(0,fe),re=D.slice(fe,ce+1),ae=H==="left"?D.slice(ve,fe):D.slice(ce+1,ve+1),me=H==="left"?D.slice(ce+1):D.slice(ve+1);D=H==="left"?[].concat((0,g.Z)(oe),(0,g.Z)(re),(0,g.Z)(ae),(0,g.Z)(me)):[].concat((0,g.Z)(oe),(0,g.Z)(ae),(0,g.Z)(re),(0,g.Z)(me))}}),D.map(function(z){return W[z.id]?(0,m.ZP)(z):z})},j=function(D,B,H,V){return Q(B,D,H,L,V)},$=function(D,B,H){var V,R,Y=I(D,B),E=T(D,Y),W=[];if(H==="left"){if(B.editingGroupId){var F=(0,w.Fb)(D,B.editingGroupId);if(!F.length)return D;V=D.indexOf(F[0])}else V=0;R=Y[Y.length-1]}else{if(B.editingGroupId){var z=(0,w.Fb)(D,B.editingGroupId);if(!z.length)return D;R=D.indexOf(z[z.length-1])}else R=D.length-1;V=Y[0]}for(var q=V;q<R+1;q++)Y.includes(q)||W.push(D[q]);var fe=Object.values(E).map(function(ve){return(0,m.ZP)(ve)}),ce=D.slice(0,V),U=D.slice(R+1);return H==="left"?[].concat((0,g.Z)(ce),(0,g.Z)(fe),W,(0,g.Z)(U)):[].concat((0,g.Z)(ce),W,(0,g.Z)(fe),(0,g.Z)(U))},ee=function(D,B,H,V){return Q(D,B,H,$,V)};function Q(D,B,H,V,R){var Y,E=(0,y.xn)(D),W=(0,v.SH)(D),F=D.filter(function(ce){return function(U){return!U.frameId}(ce)||ce.frameId&&!E.has(ce.frameId)}),z=S(W.keys());try{for(z.s();!(Y=z.n()).done;){var q=Y.value;E.has(q)||W.delete(q)}}catch(ce){z.e(ce)}finally{z.f()}F=V(F,B,H,R),W.forEach(function(ce,U){B.selectedElementIds[U]||W.set(U,V(ce,B,H,R))});var fe=[];return F.forEach(function(ce){var U;(0,b.He)(ce)?fe=[].concat((0,g.Z)(fe),(0,g.Z)((U=W.get(ce.id))!==null&&U!==void 0?U:[]),[ce]):fe=[].concat((0,g.Z)(fe),[ce])}),fe}var pe=function(D,B,H){return j(B,D,"left",H)},ie=function(D,B,H){return j(B,D,"right",H)},te=function(D,B,H){return ee(D,B,"left",H)},Z=function(D,B,H){return ee(D,B,"right",H)}},9669:function(f){f.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg=="},7984:function(f){f.exports='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>'},1639:function(f){f.exports='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path fill="%23ced4da" d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>'},9729:function(f,h,c){f.exports=c.p+"excalidraw-assets/Assistant-Bold.woff2"},1273:function(f,h,c){f.exports=c.p+"excalidraw-assets/Assistant-Medium.woff2"},8303:function(f,h,c){f.exports=c.p+"excalidraw-assets/Assistant-Regular.woff2"},9577:function(f,h,c){f.exports=c.p+"excalidraw-assets/Assistant-SemiBold.woff2"},3147:function(f,h,c){f.exports=c.p+"excalidraw-assets/Cascadia.woff2"},3940:function(f,h,c){f.exports=c.p+"excalidraw-assets/Virgil.woff2"},9787:function(f){f.exports=t},5156:function(f){f.exports=r},9649:function(f,h,c){var g=c(8114).default;function m(){f.exports=m=function(){return b},f.exports.__esModule=!0,f.exports.default=f.exports;var b={},v=Object.prototype,w=v.hasOwnProperty,_=Object.defineProperty||function(F,z,q){F[z]=q.value},k=typeof Symbol=="function"?Symbol:{},y=k.iterator||"@@iterator",S=k.asyncIterator||"@@asyncIterator",C=k.toStringTag||"@@toStringTag";function I(F,z,q){return Object.defineProperty(F,z,{value:q,enumerable:!0,configurable:!0,writable:!0}),F[z]}try{I({},"")}catch{I=function(z,q,fe){return z[q]=fe}}function A(F,z,q,fe){var ce=z&&z.prototype instanceof j?z:j,U=Object.create(ce.prototype),ve=new Y(fe||[]);return _(U,"_invoke",{value:B(F,q,ve)}),U}function T(F,z,q){try{return{type:"normal",arg:F.call(z,q)}}catch(fe){return{type:"throw",arg:fe}}}b.wrap=A;var L={};function j(){}function $(){}function ee(){}var Q={};I(Q,y,function(){return this});var pe=Object.getPrototypeOf,ie=pe&&pe(pe(E([])));ie&&ie!==v&&w.call(ie,y)&&(Q=ie);var te=ee.prototype=j.prototype=Object.create(Q);function Z(F){["next","throw","return"].forEach(function(z){I(F,z,function(q){return this._invoke(z,q)})})}function D(F,z){function q(ce,U,ve,oe){var re=T(F[ce],F,U);if(re.type!=="throw"){var ae=re.arg,me=ae.value;return me&&g(me)=="object"&&w.call(me,"__await")?z.resolve(me.__await).then(function(he){q("next",he,ve,oe)},function(he){q("throw",he,ve,oe)}):z.resolve(me).then(function(he){ae.value=he,ve(ae)},function(he){return q("throw",he,ve,oe)})}oe(re.arg)}var fe;_(this,"_invoke",{value:function(ce,U){function ve(){return new z(function(oe,re){q(ce,U,oe,re)})}return fe=fe?fe.then(ve,ve):ve()}})}function B(F,z,q){var fe="suspendedStart";return function(ce,U){if(fe==="executing")throw new Error("Generator is already running");if(fe==="completed"){if(ce==="throw")throw U;return W()}for(q.method=ce,q.arg=U;;){var ve=q.delegate;if(ve){var oe=H(ve,q);if(oe){if(oe===L)continue;return oe}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(fe==="suspendedStart")throw fe="completed",q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);fe="executing";var re=T(F,z,q);if(re.type==="normal"){if(fe=q.done?"completed":"suspendedYield",re.arg===L)continue;return{value:re.arg,done:q.done}}re.type==="throw"&&(fe="completed",q.method="throw",q.arg=re.arg)}}}function H(F,z){var q=z.method,fe=F.iterator[q];if(fe===void 0)return z.delegate=null,q==="throw"&&F.iterator.return&&(z.method="return",z.arg=void 0,H(F,z),z.method==="throw")||q!=="return"&&(z.method="throw",z.arg=new TypeError("The iterator does not provide a '"+q+"' method")),L;var ce=T(fe,F.iterator,z.arg);if(ce.type==="throw")return z.method="throw",z.arg=ce.arg,z.delegate=null,L;var U=ce.arg;return U?U.done?(z[F.resultName]=U.value,z.next=F.nextLoc,z.method!=="return"&&(z.method="next",z.arg=void 0),z.delegate=null,L):U:(z.method="throw",z.arg=new TypeError("iterator result is not an object"),z.delegate=null,L)}function V(F){var z={tryLoc:F[0]};1 in F&&(z.catchLoc=F[1]),2 in F&&(z.finallyLoc=F[2],z.afterLoc=F[3]),this.tryEntries.push(z)}function R(F){var z=F.completion||{};z.type="normal",delete z.arg,F.completion=z}function Y(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(V,this),this.reset(!0)}function E(F){if(F){var z=F[y];if(z)return z.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var q=-1,fe=function ce(){for(;++q<F.length;)if(w.call(F,q))return ce.value=F[q],ce.done=!1,ce;return ce.value=void 0,ce.done=!0,ce};return fe.next=fe}}return{next:W}}function W(){return{value:void 0,done:!0}}return $.prototype=ee,_(te,"constructor",{value:ee,configurable:!0}),_(ee,"constructor",{value:$,configurable:!0}),$.displayName=I(ee,C,"GeneratorFunction"),b.isGeneratorFunction=function(F){var z=typeof F=="function"&&F.constructor;return!!z&&(z===$||(z.displayName||z.name)==="GeneratorFunction")},b.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,ee):(F.__proto__=ee,I(F,C,"GeneratorFunction")),F.prototype=Object.create(te),F},b.awrap=function(F){return{__await:F}},Z(D.prototype),I(D.prototype,S,function(){return this}),b.AsyncIterator=D,b.async=function(F,z,q,fe,ce){ce===void 0&&(ce=Promise);var U=new D(A(F,z,q,fe),ce);return b.isGeneratorFunction(z)?U:U.next().then(function(ve){return ve.done?ve.value:U.next()})},Z(te),I(te,C,"Generator"),I(te,y,function(){return this}),I(te,"toString",function(){return"[object Generator]"}),b.keys=function(F){var z=Object(F),q=[];for(var fe in z)q.push(fe);return q.reverse(),function ce(){for(;q.length;){var U=q.pop();if(U in z)return ce.value=U,ce.done=!1,ce}return ce.done=!0,ce}},b.values=E,Y.prototype={constructor:Y,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!F)for(var z in this)z.charAt(0)==="t"&&w.call(this,z)&&!isNaN(+z.slice(1))&&(this[z]=void 0)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var z=this;function q(re,ae){return U.type="throw",U.arg=F,z.next=re,ae&&(z.method="next",z.arg=void 0),!!ae}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var ce=this.tryEntries[fe],U=ce.completion;if(ce.tryLoc==="root")return q("end");if(ce.tryLoc<=this.prev){var ve=w.call(ce,"catchLoc"),oe=w.call(ce,"finallyLoc");if(ve&&oe){if(this.prev<ce.catchLoc)return q(ce.catchLoc,!0);if(this.prev<ce.finallyLoc)return q(ce.finallyLoc)}else if(ve){if(this.prev<ce.catchLoc)return q(ce.catchLoc,!0)}else{if(!oe)throw new Error("try statement without catch or finally");if(this.prev<ce.finallyLoc)return q(ce.finallyLoc)}}}},abrupt:function(F,z){for(var q=this.tryEntries.length-1;q>=0;--q){var fe=this.tryEntries[q];if(fe.tryLoc<=this.prev&&w.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var ce=fe;break}}ce&&(F==="break"||F==="continue")&&ce.tryLoc<=z&&z<=ce.finallyLoc&&(ce=null);var U=ce?ce.completion:{};return U.type=F,U.arg=z,ce?(this.method="next",this.next=ce.finallyLoc,L):this.complete(U)},complete:function(F,z){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&z&&(this.next=z),L},finish:function(F){for(var z=this.tryEntries.length-1;z>=0;--z){var q=this.tryEntries[z];if(q.finallyLoc===F)return this.complete(q.completion,q.afterLoc),R(q),L}},catch:function(F){for(var z=this.tryEntries.length-1;z>=0;--z){var q=this.tryEntries[z];if(q.tryLoc===F){var fe=q.completion;if(fe.type==="throw"){var ce=fe.arg;R(q)}return ce}}throw new Error("illegal catch attempt")},delegateYield:function(F,z,q){return this.delegate={iterator:E(F),resultName:z,nextLoc:q},this.method==="next"&&(this.arg=void 0),L}},b}f.exports=m,f.exports.__esModule=!0,f.exports.default=f.exports},8114:function(f){function h(c){return f.exports=h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},f.exports.__esModule=!0,f.exports.default=f.exports,h(c)}f.exports=h,f.exports.__esModule=!0,f.exports.default=f.exports},2975:function(f,h,c){var g=c(9649)();f.exports=g;try{regeneratorRuntime=g}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}},9181:function(f,h,c){function g(){return g=Object.assign?Object.assign.bind():function(m){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(m[w]=v[w])}return m},g.apply(this,arguments)}c.d(h,{Z:function(){return g}})},6274:function(f,h,c){c.d(h,{zt:function(){return ie},cn:function(){return te},Vv:function(){return $},KO:function(){return B},Dv:function(){return Z},b9:function(){return D}});var g=c(9787);let m=0;const b=Symbol(),v=H=>!!H[b],w=H=>!H[b].c,_=H=>{var V;const{b:R,c:Y}=H[b];Y&&(Y(),(V=S.get(R))==null||V())},k=(H,V)=>{const R=H[b].o,Y=V[b].o;return R===Y||H===Y||v(R)&&k(R,V)},y=(H,V)=>{const R={b:H,o:V,c:null},Y=new Promise(E=>{R.c=()=>{R.c=null,E()},V.finally(R.c)});return Y[b]=R,Y},S=new WeakMap,C=H=>"init"in H,I="r",A="w",T="c",L="s",j=H=>{const V=new WeakMap,R=new WeakMap,Y=new Map;let E,W;if(E=new Set,W=new Set,H)for(const[Me,Re]of H){const We={v:Re,r:0,y:!0,d:new Map};Object.freeze(We),C(Me)||console.warn("Found initial value for derived atom which can cause unexpected behavior",Me),V.set(Me,We)}const F=new WeakMap,z=new WeakMap,q=Me=>{let Re=z.get(Me);return Re||(Re=new Map,z.set(Me,Re)),Re},fe=(Me,Re)=>{if(Me){const We=q(Me);let Se=We.get(Re);return Se||(Se=fe(Me.p,Re),Se&&"p"in Se&&w(Se.p)&&(Se=void 0),Se&&We.set(Re,Se)),Se}return V.get(Re)},ce=(Me,Re,We)=>{if(Object.freeze(We),Me)q(Me).set(Re,We);else{const Se=V.get(Re);V.set(Re,We),Y.has(Re)||Y.set(Re,Se)}},U=(Me,Re=new Map,We)=>{if(!We)return Re;const Se=new Map;let Be=!1;return We.forEach(_e=>{var ze;const Ve=((ze=fe(Me,_e))==null?void 0:ze.r)||0;Se.set(_e,Ve),Re.get(_e)!==Ve&&(Be=!0)}),Re.size!==Se.size||Be?Se:Re},ve=(Me,Re,We,Se,Be)=>{const _e=fe(Me,Re);if(_e){if(Be&&(!("p"in _e)||!k(_e.p,Be)))return _e;"p"in _e&&_(_e.p)}const ze={v:We,r:(_e==null?void 0:_e.r)||0,y:!0,d:U(Me,_e==null?void 0:_e.d,Se)};let Ve=!(_e!=null&&_e.y);return _e&&"v"in _e&&Object.is(_e.v,We)?ze.d===_e.d||ze.d.size===_e.d.size&&Array.from(ze.d.keys()).every(ut=>_e.d.has(ut))||(Ve=!0,Promise.resolve().then(()=>{ue(Me)})):(Ve=!0,++ze.r,ze.d.has(Re)&&(ze.d=new Map(ze.d).set(Re,ze.r))),_e&&!Ve?_e:(ce(Me,Re,ze),ze)},oe=(Me,Re,We,Se,Be)=>{const _e=fe(Me,Re);if(_e){if(Be&&(!("p"in _e)||!k(_e.p,Be)))return _e;"p"in _e&&_(_e.p)}const ze={e:We,r:((_e==null?void 0:_e.r)||0)+1,y:!0,d:U(Me,_e==null?void 0:_e.d,Se)};return ce(Me,Re,ze),ze},re=(Me,Re,We,Se)=>{const Be=fe(Me,Re);if(Be&&"p"in Be){if(k(Be.p,We)&&!w(Be.p))return Be.y?Be:{...Be,y:!0};_(Be.p)}((ze,Ve,ut)=>{let Ie=F.get(Ve);Ie||(Ie=new Map,F.set(Ve,Ie)),ut.then(()=>{Ie.get(ze)===ut&&(Ie.delete(ze),Ie.size||F.delete(Ve))}),Ie.set(ze,ut)})(Me,Re,We);const _e={p:We,r:((Be==null?void 0:Be.r)||0)+1,y:!0,d:U(Me,Be==null?void 0:Be.d,Se)};return ce(Me,Re,_e),_e},ae=(Me,Re,We,Se)=>{if(We instanceof Promise){const Be=y(We,We.then(_e=>{ve(Me,Re,_e,Se,Be)}).catch(_e=>{if(_e instanceof Promise)return v(_e)?_e.then(()=>{me(Me,Re,!0)}):_e;oe(Me,Re,_e,Se,Be)}));return re(Me,Re,Be,Se)}return ve(Me,Re,We,Se)},me=(Me,Re,We)=>{if(!We){const Be=fe(Me,Re);if(Be){if(Be.y&&"p"in Be&&!w(Be.p))return Be;if(Be.d.forEach((_e,ze)=>{if(ze!==Re)if(R.has(ze)){const Ve=fe(Me,ze);Ve&&!Ve.y&&me(Me,ze)}else me(Me,ze)}),Array.from(Be.d).every(([_e,ze])=>{const Ve=fe(Me,_e);return Ve&&!("p"in Ve)&&Ve.r===ze}))return Be.y?Be:{...Be,y:!0}}}const Se=new Set;try{const Be=Re.read(_e=>{Se.add(_e);const ze=_e===Re?fe(Me,_e):me(Me,_e);if(ze){if("e"in ze)throw ze.e;if("p"in ze)throw ze.p;return ze.v}if(C(_e))return _e.init;throw new Error("no atom init")});return ae(Me,Re,Be,Se)}catch(Be){if(Be instanceof Promise){const _e=v(Be)&&w(Be)?(ze=>y(ze[b].b,ze[b].o))(Be):y(Be,Be);return re(Me,Re,_e,Se)}return oe(Me,Re,Be,Se)}},he=(Me,Re)=>me(Re,Me),se=(Me,Re)=>!Re.l.size&&(!Re.t.size||Re.t.size===1&&Re.t.has(Me)),ge=(Me,Re)=>{const We=R.get(Re);We==null||We.t.forEach(Se=>{Se!==Re&&(((Be,_e)=>{const ze=fe(Be,_e);if(ze){const Ve={...ze,y:!1};ce(Be,_e,Ve)}else console.warn("[Bug] could not invalidate non existing atom",_e)})(Me,Se),ge(Me,Se))})},X=(Me,Re,We)=>{let Se=!0;const Be=(ze,Ve)=>{const ut=me(Me,ze);if("e"in ut)throw ut.e;if("p"in ut){if(Ve!=null&&Ve.unstable_promise)return ut.p.then(()=>{const Ie=fe(Me,ze);return Ie&&"p"in Ie&&Ie.p===ut.p?new Promise(ot=>setTimeout(ot)).then(()=>Be(ze,Ve)):Be(ze,Ve)});throw console.info("Reading pending atom state in write operation. We throw a promise for now.",ze),ut.p}if("v"in ut)return ut.v;throw console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",ze),new Error("no value found")},_e=Re.write(Be,(ze,Ve)=>{let ut;if(ze===Re){if(!C(ze))throw new Error("atom not writable");(ot=>{const Ye=new Set,Ke=F.get(ot);return Ke&&(F.delete(ot),Ke.forEach((tt,pt)=>{_(tt),Ye.add(pt)})),Ye})(ze).forEach(ot=>{ot!==Me&&ae(ot,ze,Ve)}),fe(Me,ze)!==ae(Me,ze,Ve)&&ge(Me,ze)}else ut=X(Me,ze,Ve);return Se||ue(Me),ut},We);return Se=!1,_e},we=(Me,Re,We)=>{const Se=X(We,Me,Re);return ue(We),Se},be=(Me,Re,We)=>{const Se={t:new Set(We&&[We]),l:new Set};if(R.set(Re,Se),W.add(Re),me(void 0,Re).d.forEach((Be,_e)=>{const ze=R.get(_e);ze?ze.t.add(Re):_e!==Re&&be(Me,_e,Re)}),(Be=>!!Be.write)(Re)&&Re.onMount){const Be=ze=>we(Re,ze,Me),_e=Re.onMount(Be);Me=void 0,_e&&(Se.u=_e)}return Se},le=(Me,Re)=>{var We;const Se=(We=R.get(Re))==null?void 0:We.u;Se&&Se(),R.delete(Re),W.delete(Re);const Be=fe(Me,Re);Be?("p"in Be&&_(Be.p),Be.d.forEach((_e,ze)=>{if(ze!==Re){const Ve=R.get(ze);Ve&&(Ve.t.delete(Re),se(ze,Ve)&&le(Me,ze))}})):console.warn("[Bug] could not find atom state to unmount",Re)},ye=(Me,Re,We,Se)=>{const Be=new Set(We.d.keys());Se==null||Se.forEach((_e,ze)=>{if(Be.has(ze))return void Be.delete(ze);const Ve=R.get(ze);Ve&&(Ve.t.delete(Re),se(ze,Ve)&&le(Me,ze))}),Be.forEach(_e=>{const ze=R.get(_e);ze?ze.t.add(Re):R.has(Re)&&be(Me,_e,Re)})},ue=Me=>{if(Me)q(Me).forEach((Re,We)=>{if(Re!==V.get(We)){const Se=R.get(We);Se==null||Se.l.forEach(Be=>Be(Me))}});else{for(;Y.size;){const Re=Array.from(Y);Y.clear(),Re.forEach(([We,Se])=>{const Be=fe(void 0,We);if(Be&&Be.d!==(Se==null?void 0:Se.d)&&ye(void 0,We,Be,Se==null?void 0:Se.d),Se&&!Se.y&&(Be==null?void 0:Be.y))return;const _e=R.get(We);_e==null||_e.l.forEach(ze=>ze())})}E.forEach(Re=>Re())}},xe=(Me,Re)=>{Re&&(We=>{q(We).forEach((Se,Be)=>{const _e=V.get(Be);(!_e||Se.r>_e.r||Se.y!==_e.y||Se.r===_e.r&&Se.d!==_e.d)&&(V.set(Be,Se),Se.d!==(_e==null?void 0:_e.d)&&ye(We,Be,Se,_e==null?void 0:_e.d))})})(Re),ue(void 0)},Pe=(Me,Re,We)=>{const Se=((_e,ze)=>{let Ve=R.get(ze);return Ve||(Ve=be(_e,ze)),Ve})(We,Me),Be=Se.l;return Be.add(Re),()=>{Be.delete(Re),((_e,ze)=>{const Ve=R.get(ze);Ve&&se(ze,Ve)&&le(_e,ze)})(We,Me)}},Ne=(Me,Re)=>{for(const[We,Se]of Me)C(We)&&(ae(Re,We,Se),ge(Re,We));ue(Re)};return{[I]:he,[A]:we,[T]:xe,[L]:Pe,h:Ne,n:Me=>(E.add(Me),()=>{E.delete(Me)}),l:()=>W.values(),a:Me=>V.get(Me),m:Me=>R.get(Me)}},$=H=>{const V=j(H),R=Y=>new Promise((E,W)=>{const F=V.r(Y);"e"in F?W(F.e):E("p"in F?F.p.then(()=>R(Y)):F.v)});return{get:Y=>{const E=V.r(Y);if("e"in E)throw E.e;if(!("p"in E))return E.v},asyncGet:R,set:(Y,E)=>V.w(Y,E),sub:(Y,E)=>V.s(Y,E),SECRET_INTERNAL_store:V}},ee=(H,V)=>({s:V?V(H).SECRET_INTERNAL_store:j(H)}),Q=new Map,pe=H=>(Q.has(H)||Q.set(H,(0,g.createContext)(ee())),Q.get(H)),ie=({children:H,initialValues:V,scope:R,unstable_createStore:Y,unstable_enableVersionedWrite:E})=>{const[W,F]=(0,g.useState)({});(0,g.useEffect)(()=>{const fe=z.current;fe.w&&(fe.s.c(null,W),delete W.p,fe.v=W)},[W]);const z=(0,g.useRef)();if(!z.current){const fe=ee(V,Y);if(E){let ce=0;fe.w=U=>{F(ve=>{const oe=ce?ve:{p:ve};return U(oe),oe})},fe.v=W,fe.r=U=>{++ce,U(),--ce}}z.current=fe}const q=pe(R);return(0,g.createElement)(q.Provider,{value:z.current},H)};function te(H,V){return function(R,Y){const E="atom"+ ++m,W={toString:()=>E};return typeof R=="function"?W.read=R:(W.init=R,W.read=F=>F(W),W.write=(F,z,q)=>z(W,typeof q=="function"?q(F(W)):q)),Y&&(W.write=Y),W}(H,V)}function Z(H,V){const R=pe(V),Y=(0,g.useContext)(R),{s:E,v:W}=Y,F=ve=>{const oe=E.r(H,ve);if(!oe.y)throw new Error("should not be invalidated");if("e"in oe)throw oe.e;if("p"in oe)throw oe.p;if("v"in oe)return oe.v;throw new Error("no atom value")},[[z,q,fe],ce]=(0,g.useReducer)((ve,oe)=>{const re=F(oe);return Object.is(ve[1],re)&&ve[2]===H?ve:[oe,re,H]},W,ve=>[ve,F(ve),H]);let U=q;return fe!==H&&(ce(z),U=F(z)),(0,g.useEffect)(()=>{const{v:ve}=Y;ve&&E.c(H,ve);const oe=E.s(H,ce,ve);return ce(ve),oe},[E,H,Y]),(0,g.useEffect)(()=>{E.c(H,z)}),(0,g.useDebugValue)(U),U}function D(H,V){const R=pe(V),{s:Y,w:E}=(0,g.useContext)(R);return(0,g.useCallback)(W=>{if(!("write"in H))throw new Error("not writable atom");const F=z=>Y.w(H,W,z);return E?E(F):F()},[Y,E,H])}function B(H,V){return"scope"in H&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),V=H.scope),[Z(H,V),D(H,V)]}},7583:function(f,h,c){c.d(h,{x0:function(){return g}});let g=(m=21)=>crypto.getRandomValues(new Uint8Array(m)).reduce((b,v)=>b+=(v&=63)<36?v.toString(36):v<62?(v-26).toString(36).toUpperCase():v>62?"-":"_","")},7017:function(f,h,c){function g(m,b){(b==null||b>m.length)&&(b=m.length);for(var v=0,w=new Array(b);v<b;v++)w[v]=m[v];return w}c.d(h,{Z:function(){return g}})},3173:function(f,h,c){function g(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}c.d(h,{Z:function(){return g}})},8950:function(f,h,c){function g(b,v,w,_,k,y,S){try{var C=b[y](S),I=C.value}catch(A){return void w(A)}C.done?v(I):Promise.resolve(I).then(_,k)}function m(b){return function(){var v=this,w=arguments;return new Promise(function(_,k){var y=b.apply(v,w);function S(I){g(y,_,k,S,C,"next",I)}function C(I){g(y,_,k,S,C,"throw",I)}S(void 0)})}}c.d(h,{Z:function(){return m}})},8821:function(f,h,c){function g(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}c.d(h,{Z:function(){return g}})},5169:function(f,h,c){c.d(h,{Z:function(){return b}});var g=c(3525);function m(v,w){for(var _=0;_<w.length;_++){var k=w[_];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(v,(0,g.Z)(k.key),k)}}function b(v,w,_){return w&&m(v.prototype,w),_&&m(v,_),Object.defineProperty(v,"prototype",{writable:!1}),v}},7169:function(f,h,c){c.d(h,{Z:function(){return m}});var g=c(3525);function m(b,v,w){return(v=(0,g.Z)(v))in b?Object.defineProperty(b,v,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[v]=w,b}},2312:function(f,h,c){function g(m){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},g(m)}c.d(h,{Z:function(){return g}})},2248:function(f,h,c){c.d(h,{Z:function(){return m}});var g=c(5901);function m(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),v&&(0,g.Z)(b,v)}},2726:function(f,h,c){function g(m,b){if(m==null)return{};var v,w,_=function(y,S){if(y==null)return{};var C,I,A={},T=Object.keys(y);for(I=0;I<T.length;I++)C=T[I],S.indexOf(C)>=0||(A[C]=y[C]);return A}(m,b);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(m);for(w=0;w<k.length;w++)v=k[w],b.indexOf(v)>=0||Object.prototype.propertyIsEnumerable.call(m,v)&&(_[v]=m[v])}return _}c.d(h,{Z:function(){return g}})},7245:function(f,h,c){c.d(h,{Z:function(){return b}});var g=c(6655),m=c(3173);function b(v,w){if(w&&((0,g.Z)(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(0,m.Z)(v)}},5901:function(f,h,c){function g(m,b){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,w){return v.__proto__=w,v},g(m,b)}c.d(h,{Z:function(){return g}})},2577:function(f,h,c){c.d(h,{Z:function(){return m}});var g=c(9139);function m(b,v){return function(w){if(Array.isArray(w))return w}(b)||function(w,_){var k=w==null?null:typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(k!=null){var y,S,C,I,A=[],T=!0,L=!1;try{if(C=(k=k.call(w)).next,_===0){if(Object(k)!==k)return;T=!1}else for(;!(T=(y=C.call(k)).done)&&(A.push(y.value),A.length!==_);T=!0);}catch(j){L=!0,S=j}finally{try{if(!T&&k.return!=null&&(I=k.return(),Object(I)!==I))return}finally{if(L)throw S}}return A}}(b,v)||(0,g.Z)(b,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},1930:function(f,h,c){c.d(h,{Z:function(){return b}});var g=c(7017),m=c(9139);function b(v){return function(w){if(Array.isArray(w))return(0,g.Z)(w)}(v)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(v)||(0,m.Z)(v)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},3525:function(f,h,c){c.d(h,{Z:function(){return m}});var g=c(6655);function m(b){var v=function(w,_){if((0,g.Z)(w)!=="object"||w===null)return w;var k=w[Symbol.toPrimitive];if(k!==void 0){var y=k.call(w,_||"default");if((0,g.Z)(y)!=="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(w)}(b,"string");return(0,g.Z)(v)==="symbol"?v:String(v)}},6655:function(f,h,c){function g(m){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},g(m)}c.d(h,{Z:function(){return g}})},9139:function(f,h,c){c.d(h,{Z:function(){return m}});var g=c(7017);function m(b,v){if(b){if(typeof b=="string")return(0,g.Z)(b,v);var w=Object.prototype.toString.call(b).slice(8,-1);return w==="Object"&&b.constructor&&(w=b.constructor.name),w==="Map"||w==="Set"?Array.from(b):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?(0,g.Z)(b,v):void 0}}},9744:function(f){f.exports=JSON.parse('{"white":"#ffffff","black":"#000000","gray":["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],"red":["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],"pink":["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],"grape":["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],"violet":["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],"indigo":["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],"blue":["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],"cyan":["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],"teal":["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],"green":["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],"lime":["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],"yellow":["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],"orange":["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}')},1463:function(f){f.exports=JSON.parse(`{"labels":{"paste":"Paste","pasteAsPlaintext":"Paste as plaintext","pasteCharts":"Paste charts","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","copyText":"Copy to clipboard as text","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","arrowhead_triangle":"Triangle","fontSize":"Font size","fontFamily":"Font family","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","zigzag":"Zigzag","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File name","colorPicker":"Color picker","canvasColors":"Used on canvas","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","liveCollaboration":"Live collaboration...","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","showGrid":"Show grid","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library","libraries":"Browse libraries","loadingScene":"Loading scene","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically","flipHorizontal":"Flip horizontal","flipVertical":"Flip vertical","viewMode":"View mode","share":"Share","showStroke":"Show stroke color picker","showBackground":"Show background color picker","toggleTheme":"Toggle theme","personalLib":"Personal Library","excalidrawLib":"Excalidraw Library","decreaseFontSize":"Decrease font size","increaseFontSize":"Increase font size","unbindText":"Unbind text","bindText":"Bind text to the container","createContainerFromText":"Wrap text in a container","link":{"edit":"Edit link","create":"Create link","label":"Link"},"lineEditor":{"edit":"Edit line","exit":"Exit line editor"},"elementLock":{"lock":"Lock","unlock":"Unlock","lockAll":"Lock all","unlockAll":"Unlock all"},"statusPublished":"Published","sidebarLock":"Keep sidebar open","selectAllElementsInFrame":"Select all elements in frame","removeAllElementsFromFrame":"Remove all elements from frame","eyeDropper":"Pick color from canvas"},"library":{"noItems":"No items added yet...","hint_emptyLibrary":"Select an item on canvas to add it here, or install a library from the public repository, below.","hint_emptyPrivateLibrary":"Select an item on canvas to add it here."},"buttons":{"clearReset":"Reset the canvas","exportJSON":"Export to file","exportImage":"Export image...","export":"Save to...","copyToClipboard":"Copy to clipboard","save":"Save to current file","saveAs":"Save as","load":"Open","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","resetLibrary":"Reset library","createNewRoom":"Create new room","fullScreen":"Full screen","darkMode":"Dark mode","lightMode":"Light mode","zenMode":"Zen mode","exitZenMode":"Exit zen mode","cancel":"Cancel","clear":"Clear","remove":"Remove","publishLibrary":"Publish","submit":"Submit","confirm":"Confirm"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn't create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn't create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn't load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn't copy to clipboard.","decryptFailed":"Couldn't decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","collabStopOverridePrompt":"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\\n\\n(If you want to keep your local drawing, simply close the browser tab instead.)","errorAddingToLibrary":"Couldn't add item to the library","errorRemovingFromLibrary":"Couldn't remove item from the library","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"This image does not seem to contain any scene data. Have you enabled scene embedding during export?","cannotRestoreFromImage":"Scene couldn't be restored from this image file","invalidSceneUrl":"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.","resetLibrary":"This will clear your library. Are you sure?","removeItemsFromsLibrary":"Delete {{count}} item(s) from library?","invalidEncryptionKey":"Encryption key must be of 22 characters. Live collaboration is disabled.","collabOfflineWarning":"No internet connection available.\\nYour changes will not be saved!"},"errors":{"unsupportedFileType":"Unsupported file type.","imageInsertError":"Couldn't insert image. Try again later...","fileTooBig":"File is too big. Maximum allowed size is {{maxSize}}.","svgImageInsertError":"Couldn't insert SVG image. The SVG markup looks invalid.","invalidSVGString":"Invalid SVG.","cannotResolveCollabServer":"Couldn't connect to the collab server. Please reload the page and try again.","importLibraryError":"Couldn't load library","collabSaveFailed":"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.","collabSaveFailed_sizeExceeded":"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.","brave_measure_text_error":{"line1":"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.","line2":"This could result in breaking the <bold>Text Elements</bold> in your drawings.","line3":"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.","line4":"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"}},"toolBar":{"selection":"Selection","image":"Insert image","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","freedraw":"Draw","text":"Text","library":"Library","lock":"Keep selected tool active after drawing","penMode":"Pen mode - prevent touch","link":"Add/ Update link for a selected shape","eraser":"Eraser","frame":"Frame tool","hand":"Hand (panning tool)","extraTools":"More tools"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"canvasPanning":"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool","linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you're finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","text_selected":"Double-click or press ENTER to edit text","text_editing":"Press Escape or CtrlOrCmd+ENTER to finish editing","linearElementMulti":"Click on last point or press Escape or Enter to finish","lockAngle":"You can constrain angle by holding SHIFT","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","resizeImage":"You can resize freely by holding SHIFT,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point(s),\\nCtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to edit (hold SHIFT to select multiple),\\nor hold Alt and click to add new points","placeImage":"Click to place the image, or click and drag to set its size manually","publishLibrary":"Publish your own library","bindTextToElement":"Press enter to add text","deepBoxSelect":"Hold CtrlOrCmd to deep select, and to prevent dragging","eraserRevert":"Hold Alt to revert the elements marked for deletion","firefox_clipboard_write":"This feature can likely be enabled by setting the \\"dom.events.asyncClipboard.clipboardItem\\" flag to \\"true\\". To change the browser flags in Firefox, visit the \\"about:config\\" page."},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain":"Encountered an error. Try <button>reloading the page</button>.","clearCanvasMessage":"If reloading doesn't work, try <button>clearing the canvas</button>.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry":"The error with identifier {{eventId}} was tracked on our system.","openIssueMessage":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don't worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.","shareTitle":"Join a live collaboration session on Excalidraw"},"errorDialog":{"title":"Error"},"exportDialog":{"disk_title":"Save to disk","disk_details":"Export the scene data to a file from which you can import later.","disk_button":"Save to file","link_title":"Shareable link","link_details":"Export as a read-only link.","link_button":"Export to Link","excalidrawplus_description":"Save the scene to your Excalidraw+ workspace.","excalidrawplus_button":"Export","excalidrawplus_exportError":"Couldn't export to Excalidraw+ at this moment..."},"helpDialog":{"blog":"Read our blog","click":"click","deepSelect":"Deep select","deepBoxSelect":"Deep select within box, and prevent dragging","curvedArrow":"Curved arrow","curvedLine":"Curved line","documentation":"Documentation","doubleClick":"double-click","drag":"drag","editor":"Editor","editLineArrowPoints":"Edit line/arrow points","editText":"Edit text / add label","github":"Found an issue? Submit","howto":"Follow our guides","or":"or","preventBinding":"Prevent arrow binding","tools":"Tools","shortcuts":"Keyboard shortcuts","textFinish":"Finish editing (text editor)","textNewLine":"Add new line (text editor)","title":"Help","view":"View","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection","toggleElementLock":"Lock/unlock selection","movePageUpDown":"Move page up/down","movePageLeftRight":"Move page left/right"},"clearCanvasDialog":{"title":"Clear canvas"},"publishDialog":{"title":"Publish library","itemName":"Item name","authorName":"Author name","githubUsername":"GitHub username","twitterUsername":"Twitter username","libraryName":"Library name","libraryDesc":"Library description","website":"Website","placeholder":{"authorName":"Your name or username","libraryName":"Name of your library","libraryDesc":"Description of your library to help people understand its usage","githubHandle":"GitHub handle (optional), so you can edit the library once submitted for review","twitterHandle":"Twitter username (optional), so we know who to credit when promoting over Twitter","website":"Link to your personal website or elsewhere (optional)"},"errors":{"required":"Required","website":"Enter a valid URL"},"noteDescription":"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.","noteGuidelines":"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.","noteLicense":"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.","noteItems":"Each library item must have its own name so it's filterable. The following library items will be included:","atleastOneLibItem":"Please select at least one library item to get started","republishWarning":"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},"publishSuccessDialog":{"title":"Library submitted","content":"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},"confirmDialog":{"resetLibrary":"Reset library","removeItemsFromLib":"Remove selected items from library"},"imageExportDialog":{"header":"Export image","label":{"withBackground":"Background","onlySelected":"Only selected","darkMode":"Dark mode","embedScene":"Embed scene","scale":"Scale","padding":"Padding"},"tooltip":{"embedScene":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size."},"title":{"exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyPngToClipboard":"Copy PNG to clipboard"},"button":{"exportToPng":"PNG","exportToSvg":"SVG","copyPngToClipboard":"Copy to clipboard"}},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.","link":"Blog post on end-to-end encryption in Excalidraw"},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","version":"Version","versionCopy":"Click to copy","versionNotAvailable":"Version not available","width":"Width"},"toast":{"addedToLibrary":"Added to library","copyStyles":"Copied styles.","copyToClipboard":"Copied to clipboard.","copyToClipboardAsPng":"Copied {{exportSelection}} to clipboard as PNG\\n({{exportColorScheme}})","fileSaved":"File saved.","fileSavedToFilename":"Saved to {filename}","canvas":"canvas","selection":"selection","pasteAsSingleElement":"Use {{shortcut}} to paste as a single element,\\nor paste into an existing text editor"},"colors":{"transparent":"Transparent","black":"Black","white":"White","red":"Red","pink":"Pink","grape":"Grape","violet":"Violet","gray":"Gray","blue":"Blue","cyan":"Cyan","teal":"Teal","green":"Green","yellow":"Yellow","orange":"Orange","bronze":"Bronze"},"welcomeScreen":{"app":{"center_heading":"All your data is saved locally in your browser.","center_heading_plus":"Did you want to go to the Excalidraw+ instead?","menuHint":"Export, preferences, languages, ..."},"defaults":{"menuHint":"Export, preferences, and more...","center_heading":"Diagrams. Made. Simple.","toolbarHint":"Pick a tool & Start drawing!","helpHint":"Shortcuts & help"}},"colorPicker":{"mostUsedCustomColors":"Most used custom colors","colors":"Colors","shades":"Shades","hexCode":"Hex code","noShades":"No shades available for this color"},"overwriteConfirm":{"action":{"exportToImage":{"title":"Export as image","button":"Export as image","description":"Export the scene data as an image from which you can import later."},"saveToDisk":{"title":"Save to disk","button":"Save to disk","description":"Export the scene data to a file from which you can import later."},"excalidrawPlus":{"title":"Excalidraw+","button":"Export to Excalidraw+","description":"Save the scene to your Excalidraw+ workspace."}},"modal":{"loadFromFile":{"title":"Load from file","button":"Load from file","description":"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},"shareableLink":{"title":"Load from link","button":"Replace my content","description":"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}}}`)},4451:function(f){f.exports=JSON.parse('{"ar-SA":79,"az-AZ":20,"bg-BG":54,"bn-BD":59,"ca-ES":87,"cs-CZ":98,"da-DK":33,"de-DE":100,"el-GR":92,"en":100,"es-ES":88,"eu-ES":100,"fa-IR":88,"fi-FI":87,"fr-FR":88,"gl-ES":88,"he-IL":86,"hi-IN":77,"hu-HU":76,"id-ID":94,"it-IT":98,"ja-JP":88,"kaa":18,"kab-KAB":87,"kk-KZ":21,"km-KH":94,"ko-KR":100,"ku-TR":100,"lt-LT":55,"lv-LV":88,"mr-IN":95,"my-MM":40,"nb-NO":100,"nl-NL":83,"nn-NO":76,"oc-FR":86,"pa-IN":89,"pl-PL":98,"pt-BR":98,"pt-PT":94,"ro-RO":98,"ru-RU":98,"si-LK":9,"sk-SK":98,"sl-SI":100,"sv-SE":100,"ta-IN":84,"th-TH":38,"tr-TR":86,"uk-UA":96,"vi-VN":56,"zh-CN":100,"zh-HK":25,"zh-TW":100}')}},d={};function u(f){var h=d[f];if(h!==void 0)return h.exports;var c=d[f]={id:f,exports:{}};return l[f](c,c.exports,u),c.exports}u.m=l,u.n=function(f){var h=f&&f.__esModule?function(){return f.default}:function(){return f};return u.d(h,{a:h}),h},i=Object.getPrototypeOf?function(f){return Object.getPrototypeOf(f)}:function(f){return f.__proto__},u.t=function(f,h){if(1&h&&(f=this(f)),8&h||typeof f=="object"&&f&&(4&h&&f.__esModule||16&h&&typeof f.then=="function"))return f;var c=Object.create(null);u.r(c);var g={};o=o||[null,i({}),i([]),i(i)];for(var m=2&h&&f;typeof m=="object"&&!~o.indexOf(m);m=i(m))Object.getOwnPropertyNames(m).forEach(function(b){g[b]=function(){return f[b]}});return g.default=function(){return f},u.d(c,g),c},u.d=function(f,h){for(var c in h)u.o(h,c)&&!u.o(f,c)&&Object.defineProperty(f,c,{enumerable:!0,get:h[c]})},u.f={},u.e=function(f){return Promise.all(Object.keys(u.f).reduce(function(h,c){return u.f[c](f,h),h},[]))},u.u=function(f){return"excalidraw-assets/"+{22:"locales/kk-KZ-json",537:"locales/th-TH-json",663:"locales/kaa-json",1204:"locales/ja-JP-json",1302:"locales/si-LK-json",1477:"locales/my-MM-json",1513:"locales/el-GR-json",1628:"locales/bg-BG-json",1690:"locales/oc-FR-json",1790:"locales/da-DK-json",2091:"locales/ar-SA-json",2312:"locales/he-IL-json",2359:"locales/nb-NO-json",2404:"locales/ta-IN-json",2943:"locales/gl-ES-json",3024:"locales/nl-NL-json",3031:"locales/ku-TR-json",3082:"locales/de-DE-json",3162:"locales/pa-IN-json",3397:"locales/mr-IN-json",3421:"locales/zh-TW-json",3512:"locales/fi-FI-json",3674:"locales/pl-PL-json",3682:"locales/fr-FR-json",3721:"locales/pt-BR-json",3808:"locales/id-ID-json",3885:"locales/nn-NO-json",4e3:"locales/vi-VN-json",4568:"locales/az-AZ-json",4680:"locales/zh-CN-json",4736:"vendor",4977:"locales/tr-TR-json",5089:"locales/ro-RO-json",5130:"locales/ca-ES-json",5330:"locales/fa-IR-json",5395:"locales/pt-PT-json",6071:"locales/sl-SI-json",6239:"locales/it-IT-json",6265:"locales/cs-CZ-json",6566:"locales/km-KH-json",6768:"locales/lv-LV-json",6844:"locales/ko-KR-json",7368:"locales/hu-HU-json",7429:"locales/bn-BD-json",7759:"locales/uk-UA-json",7920:"locales/zh-HK-json",8081:"locales/eu-ES-json",8124:"locales/ru-RU-json",8340:"locales/lt-LT-json",8534:"locales/sv-SE-json",8750:"locales/sk-SK-json",8759:"locales/es-ES-json",9551:"locales/kab-KAB-json",9828:"locales/hi-IN-json"}[f]+"-"+{22:"106d2a41c68f69765668",537:"4cbe42d56e0a6f261769",663:"b2f03ae2f239b9fae304",1204:"b7b0079dca8ece2551c7",1302:"674ece30d49390e45733",1477:"c3cff6d30b1e629f546f",1513:"8cc1609bd088ec4f197a",1628:"ff5ef83d3c2706367417",1690:"925326d13bc187dcd377",1790:"ac982a0c1e02b45f9500",2091:"b9c75e6743e089f51f9b",2312:"2e5cea590dd00f76b42f",2359:"75cfab63ad7c2ff45f19",2404:"f59f50c4b8f2b2fee8ca",2943:"8408403b5df17158e269",3024:"90ef39ed303967aeb9c2",3031:"a3503655beb63c1743c2",3082:"a3222d8a9ed4864ccedf",3162:"0fd029451b07248c5194",3397:"05294735c64b63223d8e",3421:"b2b9e4d00482e815833c",3512:"7250174bb3682c3ee602",3674:"9a1b0b7262cd86ab734f",3682:"f82759a1bc767e0889bd",3721:"62a1095dd13343b61194",3808:"0e69caf5d919807ed234",3885:"1a8db0d8c3717d895cc5",4e3:"cbbaff972778abc0e34b",4568:"32268e2c7ad89fce5d2c",4680:"de47299d5da27d69420d",4736:"c5889fc23d2199d3877c",4977:"eb07e9699c26fef02345",5089:"162b57c475da796d5a5b",5130:"d4a1f01f8c174c315974",5330:"abcad5d329ac9558750e",5395:"5ca3d3378a837f1c10fb",6071:"826580e1006547dbbd3b",6239:"a1526e95ebe4c2156ffb",6265:"ff1b9bbfe92356698245",6566:"920cbd8cb9ea3c2ce631",6768:"c811870330575e53285c",6844:"0381ef5256dd8e3cc1b5",7368:"1b5028b3a2676b3e7bde",7429:"f9b1344b2f5c0ab53ce8",7759:"a48bb2e866a11d396a35",7920:"19e6814bddb06e0dd6e3",8081:"f9efd2bf2555bceb526a",8124:"cfc347872e181d1335a7",8340:"9caac0d3530651221c75",8534:"84a855efd030e37f51ab",8750:"8edebc008b63305c87e1",8759:"f2467c6a875a9e288756",9551:"e8618205ea49417e5fb4",9828:"e22f4ad73126c2971850"}[f]+".js"},u.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),u.o=function(f,h){return Object.prototype.hasOwnProperty.call(f,h)},a={},s="ExcalidrawLib:",u.l=function(f,h,c,g){if(a[f])a[f].push(h);else{var m,b;if(c!==void 0)for(var v=document.getElementsByTagName("script"),w=0;w<v.length;w++){var _=v[w];if(_.getAttribute("src")==f||_.getAttribute("data-webpack")==s+c){m=_;break}}m||(b=!0,(m=document.createElement("script")).charset="utf-8",m.timeout=120,u.nc&&m.setAttribute("nonce",u.nc),m.setAttribute("data-webpack",s+c),m.src=f),a[f]=[h];var k=function(S,C){m.onerror=m.onload=null,clearTimeout(y);var I=a[f];if(delete a[f],m.parentNode&&m.parentNode.removeChild(m),I&&I.forEach(function(A){return A(C)}),S)return S(C)},y=setTimeout(k.bind(null,void 0,{type:"timeout",target:m}),12e4);m.onerror=k.bind(null,m.onerror),m.onload=k.bind(null,m.onload),b&&document.head.appendChild(m)}},u.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},u.p="",function(){u.b=document.baseURI||self.location.href;var f={1388:0};u.f.j=function(g,m){var b=u.o(f,g)?f[g]:void 0;if(b!==0)if(b)m.push(b[2]);else{var v=new Promise(function(k,y){b=f[g]=[k,y]});m.push(b[2]=v);var w=u.p+u.u(g),_=new Error;u.l(w,function(k){if(u.o(f,g)&&((b=f[g])!==0&&(f[g]=void 0),b)){var y=k&&(k.type==="load"?"missing":k.type),S=k&&k.target&&k.target.src;_.message="Loading chunk "+g+` failed.
(`+y+": "+S+")",_.name="ChunkLoadError",_.type=y,_.request=S,b[1](_)}},"chunk-"+g,g)}};var h=function(g,m){var b,v,w=m[0],_=m[1],k=m[2],y=0;if(w.some(function(S){return f[S]!==0})){for(b in _)u.o(_,b)&&(u.m[b]=_[b]);k&&k(u)}for(g&&g(m);y<w.length;y++)v=w[y],u.o(f,v)&&f[v]&&f[v][0](),f[v]=0},c=self.webpackChunkExcalidrawLib=self.webpackChunkExcalidrawLib||[];c.forEach(h.bind(null,0)),c.push=h.bind(null,c.push.bind(c))}(),u.nc=void 0;var p={};return function(){u.r(p),u.d(p,{Button:function(){return Kt.z},DefaultSidebar:function(){return Hn.O},Excalidraw:function(){return Rn},FONT_FAMILY:function(){return zn},Footer:function(){return he},LiveCollaborationTrigger:function(){return st},MIME_TYPES:function(){return f.LO},MainMenu:function(){return se.Z},Sidebar:function(){return jn.YE},THEME:function(){return f.C6},WelcomeScreen:function(){return St},bumpVersion:function(){return Wt.ZP},defaultLang:function(){return H.Fp},exportToBlob:function(){return Yt.Fl},exportToCanvas:function(){return Yt.NL},exportToClipboard:function(){return Yt.i1},exportToSvg:function(){return Yt.$D},getFreeDrawSvgPath:function(){return Yt.N7},getNonDeletedElements:function(){return _t.Lm},getSceneVersion:function(){return _t.Uo},isInvisiblySmallElement:function(){return _t.QD},isLinearElement:function(){return bn.bt},languages:function(){return H.Mj},loadFromBlob:function(){return Yt.cT},loadLibraryFromBlob:function(){return Yt.lV},loadSceneOrLibraryFromBlob:function(){return Yt.ZY},mergeLibraryItems:function(){return Yt.zh},mutateElement:function(){return Wt.DR},newElementWith:function(){return Wt.BE},parseLibraryTokensFromUrl:function(){return un.Di},restore:function(){return Zt.nu},restoreAppState:function(){return Zt.lY},restoreElements:function(){return Zt.ET},restoreLibraryItems:function(){return Zt.wJ},sceneCoordsToViewportCoords:function(){return E._i},serializeAsJSON:function(){return Yt.I_},serializeLibraryAsJSON:function(){return Yt.NI},useDevice:function(){return Y.Fy},useHandleLibrary:function(){return un.xS},useI18n:function(){return H.QT},viewportCoordsToSceneCoords:function(){return E.dE}});var f=u(2335);f.Vi.TEST!=="production"&&(u.p=window.EXCALIDRAW_ASSET_PATH||"https://unpkg.com/".concat("revedraw","@").concat("1.0.0-alpha.10","/dist/"));var h=function(){Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(Et){if((Et=Math.trunc(Et)||0)<0&&(Et+=this.length),!(Et<0||Et>=this.length))return this[Et]},writable:!0,enumerable:!1,configurable:!0})},c=u(487),g=u.n(c),m=u(631),b=u.n(m),v=u(2052),w=u.n(v),_=u(4010),k=u.n(_),y=u(1469),S=u.n(y),C=u(9329),I=u.n(C),A=u(4295),T={};T.styleTagTransform=I(),T.setAttributes=k(),T.insert=w().bind(null,"head"),T.domAPI=b(),T.insertStyleElement=S(),g()(A.Z,T),A.Z&&A.Z.locals&&A.Z.locals;var L=u(6479),j=u.n(L),$=u(9713),ee=u.n($),Q=u(9787),pe=u.n(Q),ie=u(8950),te=u(2577),Z=u(2975),D=u.n(Z),B=u(5440),H=u(8211),V=u(9980),R=function(Et){var Dt=(0,Q.useState)(!0),Gt=(0,te.Z)(Dt,2),Jt=Gt[0],$n=Gt[1];return(0,Q.useEffect)(function(){var Kn=function(){var dr=(0,ie.Z)(D().mark(function yn(){return D().wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,(0,H.m0)(wr);case 2:$n(!1);case 3:case"end":return hr.stop()}},yn)}));return function(){return dr.apply(this,arguments)}}(),wr=H.Mj.find(function(dr){return dr.code===Et.langCode})||H.Fp;Kn()},[Et.langCode]),Jt?(0,V.jsx)(B.z,{theme:Et.theme}):Et.children},Y=u(736),E=u(6340),W=u(9915),F={};F.styleTagTransform=I(),F.setAttributes=k(),F.insert=w().bind(null,"head"),F.domAPI=b(),F.insertStyleElement=S(),g()(W.Z,F),W.Z&&W.Z.locals&&W.Z.locals;var z=u(9310),q={};q.styleTagTransform=I(),q.setAttributes=k(),q.insert=w().bind(null,"head"),q.domAPI=b(),q.insertStyleElement=S(),g()(z.Z,q),z.Z&&z.Z.locals&&z.Z.locals;var fe=u(6274),ce=u(9487),U=u(9076),ve=u(8690),oe=u(8793),re={};re.styleTagTransform=I(),re.setAttributes=k(),re.insert=w().bind(null,"head"),re.domAPI=b(),re.insertStyleElement=S(),g()(oe.Z,re),oe.Z&&oe.Z.locals&&oe.Z.locals;var ae=u(96),me=function(Et){var Dt=Et.children,Gt=(0,ve.R6)().FooterCenterTunnel,Jt=(0,ae.I)();return(0,V.jsx)(Gt.In,{children:(0,V.jsx)("div",{className:(0,U.Z)("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":Jt.zenModeEnabled}),children:Dt})})},he=me;me.displayName="FooterCenter";var se=u(6756),ge=u(7169),X=u(2726),we=u(1781),be=u(785),le=u(3646),ye=["onSelect","children","icon","shortcut","className"],ue=["children","href","icon","shortcut","className"];function xe(Et,Dt){var Gt=Object.keys(Et);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(Et);Dt&&(Jt=Jt.filter(function($n){return Object.getOwnPropertyDescriptor(Et,$n).enumerable})),Gt.push.apply(Gt,Jt)}return Gt}function Pe(Et){for(var Dt=1;Dt<arguments.length;Dt++){var Gt=arguments[Dt]!=null?arguments[Dt]:{};Dt%2?xe(Object(Gt),!0).forEach(function(Jt){(0,ge.Z)(Et,Jt,Gt[Jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(Gt)):xe(Object(Gt)).forEach(function(Jt){Object.defineProperty(Et,Jt,Object.getOwnPropertyDescriptor(Gt,Jt))})}return Et}var Ne=function(Et){var Dt=Et.icon,Gt=Et.shortcut,Jt=Et.children,$n=(0,Y.Fy)();return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"welcome-screen-menu-item__icon",children:Dt}),(0,V.jsx)("div",{className:"welcome-screen-menu-item__text",children:Jt}),Gt&&!$n.isMobile&&(0,V.jsx)("div",{className:"welcome-screen-menu-item__shortcut",children:Gt})]})};Ne.displayName="WelcomeScreenMenuItemContent";var Me=function(Et){var Dt=Et.onSelect,Gt=Et.children,Jt=Et.icon,$n=Et.shortcut,Kn=Et.className,wr=Kn===void 0?"":Kn,dr=(0,X.Z)(Et,ye);return(0,V.jsx)("button",Pe(Pe({},dr),{},{type:"button",className:"welcome-screen-menu-item ".concat(wr),onClick:Dt,children:(0,V.jsx)(Ne,{icon:Jt,shortcut:$n,children:Gt})}))};Me.displayName="WelcomeScreenMenuItem";var Re=function(Et){var Dt=Et.children,Gt=Et.href,Jt=Et.icon,$n=Et.shortcut,Kn=Et.className,wr=Kn===void 0?"":Kn,dr=(0,X.Z)(Et,ue);return(0,V.jsx)("a",Pe(Pe({},dr),{},{className:"welcome-screen-menu-item ".concat(wr),href:Gt,target:"_blank",rel:"noreferrer",children:(0,V.jsx)(Ne,{icon:Jt,shortcut:$n,children:Dt})}))};Re.displayName="WelcomeScreenMenuItemLink";var We=function(Et){var Dt=Et.children,Gt=(0,ve.R6)().WelcomeScreenCenterTunnel;return(0,V.jsx)(Gt.In,{children:(0,V.jsx)("div",{className:"welcome-screen-center",children:Dt||(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Se,{}),(0,V.jsx)(Be,{children:(0,H.t)("welcomeScreen.defaults.center_heading")}),(0,V.jsxs)(_e,{children:[(0,V.jsx)(Ve,{}),(0,V.jsx)(ze,{})]})]})})})};We.displayName="Center";var Se=function(Et){var Dt=Et.children;return(0,V.jsx)("div",{className:"welcome-screen-center__logo virgil welcome-screen-decor",children:Dt||(0,V.jsx)(V.Fragment,{children:"Handraw"})})};Se.displayName="Logo";var Be=function(Et){var Dt=Et.children;return(0,V.jsx)("div",{className:"welcome-screen-center__heading welcome-screen-decor virgil",children:Dt})};Be.displayName="Heading";var _e=function(Et){var Dt=Et.children;return(0,V.jsx)("div",{className:"welcome-screen-menu",children:Dt})};_e.displayName="Menu";var ze=function(){var Et=(0,Y.eh)();return(0,V.jsx)(Me,{onSelect:function(){return Et.executeAction(we.jY)},shortcut:"?",icon:le.by,children:(0,H.t)("helpDialog.title")})};ze.displayName="MenuItemHelp";var Ve=function(){var Et=(0,ae.I)(),Dt=(0,Y.eh)();return Et.viewModeEnabled?null:(0,V.jsx)(Me,{onSelect:function(){return Dt.executeAction(we._d)},shortcut:(0,be.C)("loadScene"),icon:le.Tl,children:(0,H.t)("buttons.load")})};Ve.displayName="MenuItemLoadScene";var ut=function(Et){var Dt=Et.onSelect,Gt=(0,H.QT)().t;return(0,V.jsx)(Me,{shortcut:null,onSelect:Dt,icon:le.jn,children:Gt("labels.liveCollaboration")})};ut.displayName="MenuItemLiveCollaborationTrigger",We.Logo=Se,We.Heading=Be,We.Menu=_e,We.MenuItem=Me,We.MenuItemLink=Re,We.MenuItemHelp=ze,We.MenuItemLoadScene=Ve,We.MenuItemLiveCollaborationTrigger=ut;var Ie=function(Et){var Dt=Et.children,Gt=(0,ve.R6)().WelcomeScreenMenuHintTunnel;return(0,V.jsx)(Gt.In,{children:(0,V.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[le.oQ,(0,V.jsx)("div",{className:"welcome-screen-decor-hint__label",children:Dt||(0,H.t)("welcomeScreen.defaults.menuHint")})]})})};Ie.displayName="MenuHint";var ot=function(Et){var Dt=Et.children,Gt=(0,ve.R6)().WelcomeScreenToolbarHintTunnel;return(0,V.jsx)(Gt.In,{children:(0,V.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[(0,V.jsx)("div",{className:"welcome-screen-decor-hint__label",children:Dt||(0,H.t)("welcomeScreen.defaults.toolbarHint")}),le.DJ]})})};ot.displayName="ToolbarHint";var Ye=function(Et){var Dt=Et.children,Gt=(0,ve.R6)().WelcomeScreenHelpHintTunnel;return(0,V.jsx)(Gt.In,{children:(0,V.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[(0,V.jsx)("div",{children:Dt||(0,H.t)("welcomeScreen.defaults.helpHint")}),le._U]})})};Ye.displayName="HelpHint";var Ke=u(1569),tt={};tt.styleTagTransform=I(),tt.setAttributes=k(),tt.insert=w().bind(null,"head"),tt.domAPI=b(),tt.insertStyleElement=S(),g()(Ke.Z,tt),Ke.Z&&Ke.Z.locals&&Ke.Z.locals;var pt=function(Et){return(0,V.jsx)(V.Fragment,{children:Et.children||(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(We,{}),(0,V.jsx)(Ie,{}),(0,V.jsx)(ot,{}),(0,V.jsx)(Ye,{})]})})};pt.displayName="WelcomeScreen",pt.Center=We,pt.Hints={MenuHint:Ie,ToolbarHint:ot,HelpHint:Ye};var St=pt,Kt=u(7172),sn=u(3397),nn={};nn.styleTagTransform=I(),nn.setAttributes=k(),nn.insert=w().bind(null,"head"),nn.domAPI=b(),nn.insertStyleElement=S(),g()(sn.Z,nn),sn.Z&&sn.Z.locals&&sn.Z.locals;var Cn=["isCollaborating","onSelect"];function vn(Et,Dt){var Gt=Object.keys(Et);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(Et);Dt&&(Jt=Jt.filter(function($n){return Object.getOwnPropertyDescriptor(Et,$n).enumerable})),Gt.push.apply(Gt,Jt)}return Gt}function Fe(Et){for(var Dt=1;Dt<arguments.length;Dt++){var Gt=arguments[Dt]!=null?arguments[Dt]:{};Dt%2?vn(Object(Gt),!0).forEach(function(Jt){(0,ge.Z)(Et,Jt,Gt[Jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(Gt)):vn(Object(Gt)).forEach(function(Jt){Object.defineProperty(Et,Jt,Object.getOwnPropertyDescriptor(Gt,Jt))})}return Et}var et=function(Et){var Dt=Et.isCollaborating,Gt=Et.onSelect,Jt=(0,X.Z)(Et,Cn),$n=(0,ae.I)();return(0,V.jsxs)(Kt.z,Fe(Fe({},Jt),{},{className:(0,U.Z)("collab-button",{active:Dt}),type:"button",onSelect:Gt,style:{position:"relative"},title:(0,H.t)("labels.liveCollaboration"),children:[le.jn,$n.collaborators.size>0&&(0,V.jsx)("div",{className:"CollabButton-collaborators",children:$n.collaborators.size})]}))},st=et;et.displayName="LiveCollaborationTrigger";var ht=u(451),_t=u(1047),Zt=u(679),Yt=u(3024),bn=u(1974),Wt=u(1935),un=u(7053),jn=u(585),Hn=u(704),vt=["initialData","UIOptions"],Nt=["initialData","UIOptions"];function Tt(Et,Dt){var Gt=Object.keys(Et);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(Et);Dt&&(Jt=Jt.filter(function($n){return Object.getOwnPropertyDescriptor(Et,$n).enumerable})),Gt.push.apply(Gt,Jt)}return Gt}function cn(Et){for(var Dt=1;Dt<arguments.length;Dt++){var Gt=arguments[Dt]!=null?arguments[Dt]:{};Dt%2?Tt(Object(Gt),!0).forEach(function(Jt){ee()(Et,Jt,Gt[Jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(Gt)):Tt(Object(Gt)).forEach(function(Jt){Object.defineProperty(Et,Jt,Object.getOwnPropertyDescriptor(Gt,Jt))})}return Et}var Ot=function(Et){var Dt,Gt,Jt,$n=Et.onChange,Kn=Et.initialData,wr=Et.excalidrawRef,dr=Et.isCollaborating,yn=dr!==void 0&&dr,hr=Et.onPointerUpdate,Er=Et.renderTopRightUI,Nn=Et.langCode,ar=Nn===void 0?H.Fp.code:Nn,Dr=Et.viewModeEnabled,Ir=Et.zenModeEnabled,Vt=Et.gridModeEnabled,An=Et.libraryReturnUrl,pn=Et.theme,mn=Et.name,or=Et.renderCustomStats,fr=Et.onPaste,Fn=Et.detectScroll,De=Fn===void 0||Fn,Ue=Et.handleKeyboardGlobally,qe=Ue!==void 0&&Ue,dt=Et.onLibraryChange,Ut=Et.autoFocus,qt=Ut!==void 0&&Ut,on=Et.generateIdForFile,xn=Et.onLinkOpen,tn=Et.onPointerDown,tr=Et.onScrollChange,ir=Et.children,br=(Dt=Et.UIOptions)===null||Dt===void 0?void 0:Dt.canvasActions,Hr=cn(cn({},Et.UIOptions),{},{canvasActions:cn(cn({},f.cW.canvasActions),br)});return br!=null&&br.export&&(Hr.canvasActions.export.saveFileToDisk=(Gt=(Jt=br.export)===null||Jt===void 0?void 0:Jt.saveFileToDisk)!==null&&Gt!==void 0?Gt:f.cW.canvasActions.export.saveFileToDisk),Hr.canvasActions.toggleTheme===null&&pn===void 0&&(Hr.canvasActions.toggleTheme=!0),(0,Q.useEffect)(function(){var Fr=function(go){typeof go.scale=="number"&&go.scale!==1&&go.preventDefault()};return document.addEventListener("touchmove",Fr,{passive:!1}),function(){document.removeEventListener("touchmove",Fr)}},[]),(0,V.jsx)(fe.zt,{unstable_createStore:function(){return ce.e_},scope:ce.yE,children:(0,V.jsx)(R,{langCode:ar,theme:pn,children:(0,V.jsx)(Y.ZP,{onChange:$n,initialData:Kn,excalidrawRef:wr,isCollaborating:yn,onPointerUpdate:hr,renderTopRightUI:Er,langCode:ar,viewModeEnabled:Dr,zenModeEnabled:Ir,gridModeEnabled:Vt,libraryReturnUrl:An,theme:pn,name:mn,renderCustomStats:or,UIOptions:Hr,onPaste:fr,detectScroll:De,handleKeyboardGlobally:qe,onLibraryChange:dt,autoFocus:qt,generateIdForFile:on,onLinkOpen:xn,onPointerDown:tn,onScrollChange:tr,children:ir})})})},Ln=function(Et,Dt){if(Et.children!==Dt.children)return!1;Et.initialData;var Gt=Et.UIOptions,Jt=Gt===void 0?{}:Gt,$n=j()(Et,vt),Kn=(Dt.initialData,Dt.UIOptions),wr=Kn===void 0?{}:Kn,dr=j()(Dt,Nt),yn=Object.keys(Jt),hr=Object.keys(wr);return yn.length===hr.length&&yn.every(function(Er){return Er==="canvasActions"?Object.keys(Jt.canvasActions).every(function(Nn){var ar,Dr,Ir,Vt;return Nn==="export"&&Jt!=null&&(ar=Jt.canvasActions)!==null&&ar!==void 0&&ar.export&&wr!=null&&(Dr=wr.canvasActions)!==null&&Dr!==void 0&&Dr.export?Jt.canvasActions.export.saveFileToDisk===wr.canvasActions.export.saveFileToDisk:(Jt==null||(Ir=Jt.canvasActions)===null||Ir===void 0?void 0:Ir[Nn])===(wr==null||(Vt=wr.canvasActions)===null||Vt===void 0?void 0:Vt[Nn])}):Jt[Er]===wr[Er]})&&(0,E.w8)($n,dr)},Wn=(0,Q.forwardRef)(function(Et,Dt){return(0,V.jsx)(Ot,cn(cn({},Et),{},{excalidrawRef:Dt}))}),Rn=pe().memo(Wn,Ln);Rn.displayName="Excalidraw";var zn=(0,ht.B)();h()}(),p}()})})(lB);var Rue=lB.exports;sB.exports=Rue;var _i=sB.exports;function cB(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=cB(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function Due(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=cB(n))&&(r&&(r+=" "),r+=e);return r}function ub(n){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(n)}var Nue=["width","height","mirror","style"];function cO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function dO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cO(Object(t),!0).forEach(function(r){zue(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zue(n,e,t){return e=Bue(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bue(n){var e=Hue(n,"string");return ub(e)==="symbol"?e:String(e)}function Hue(n,e){if(ub(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(ub(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function LC(){return LC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LC.apply(this,arguments)}function Fue(n,e){if(n==null)return{};var t=Zue(n,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Zue(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}var Un=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:512,r=typeof t=="number"?{width:t}:t,o=r.width,i=o===void 0?512:o,a=r.height,s=a===void 0?i:a,l=r.mirror,d=r.style,u=Fue(r,Nue);return je.createElement("svg",LC({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 ".concat(i," ").concat(s),className:Due({"rtl-mirror":l}),style:d},u),typeof e=="string"?je.createElement("path",{fill:"currentColor",d:e}):e)},ii={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},ko={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("rect",{x:3,y:8,width:18,height:4,rx:1}),je.createElement("line",{x1:12,y1:8,x2:12,y2:21}),je.createElement("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),je.createElement("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})),ii);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),je.createElement("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),je.createElement("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),je.createElement("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),je.createElement("line",{x1:"21",y1:"6",x2:"21",y2:"19"})),ii);Un(je.createElement("svg",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),je.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),ii);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("circle",{cx:"12",cy:"12",r:"1"}),je.createElement("circle",{cx:"12",cy:"19",r:"1"}),je.createElement("circle",{cx:"12",cy:"5",r:"1"})),ii);Un(je.createElement("svg",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),je.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),je.createElement("line",{x1:"8",y1:"4",x2:"16",y2:"4"})),ii);Un(je.createElement("g",null,je.createElement("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),je.createElement("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),je.createElement("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9},je.createElement("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})),je.createElement("g",{mask:"url(#UnlockedIcon)"},je.createElement("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"}))),ko);Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),je.createElement("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),je.createElement("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})),ko);Un(je.createElement(je.Fragment,null,je.createElement("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),je.createElement("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),{width:41,height:94,fill:"none"});Un(je.createElement(je.Fragment,null,je.createElement("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),je.createElement("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),{width:85,height:71,fill:"none"});Un(je.createElement(je.Fragment,null,je.createElement("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),je.createElement("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),{width:38,height:78,fill:"none"});Un(je.createElement("g",{fill:"currentColor"},je.createElement("path",{d:"M24.296 12.214c0 .112-.134.224-.291.224-.135 0-.516.629-.808 1.392-.897 2.335-9.867 20.096-9.89 19.534 0-.292-.134-.494-.359-.494-.313 0-.358.18-.224 1.055.135 1.01.045 1.236-3.14 7.432-1.793 3.525-3.722 7.208-4.282 8.196-.584 1.032-1.032 2.155-1.077 2.626-.067.809.022.92 1.973 2.605 1.122.988 2.557 2.223 3.185 2.784 2.826 2.582 4.149 3.615 4.508 3.547.538-.09 8.858-8.823 8.88-9.317 0-.225-.403-3.638-.897-7.59-.852-6.735-1.66-14.616-1.57-15.38.068-.47-.269-2.85-.516-3.884-.201-.808-.112-1.145 1.503-4.827.942-2.178 2.176-4.85 2.714-5.928.515-1.077.964-2.02.964-2.088 0-.067-.157-.112-.336-.112-.18 0-.337.09-.337.225Zm-5.158 16.772c.247 1.572.74 5.344 1.099 8.375.695 5.568 1.503 11.742 1.727 13.314.135.786.045.943-1.413 2.56-2.534 2.851-5.225 5.658-6.145 6.376l-.852.674-4.373-4.086c-4.037-3.728-4.373-4.11-4.127-4.558a5154.2 5154.2 0 0 1 2.535-4.626 727.864 727.864 0 0 0 3.678-6.78c.784-1.46 1.502-2.717 1.637-2.785.156-.09.201 2.178.156 7.006-.09 7.207-.067 7.23.651 7.072.09 0 .157-3.637.157-8.06V35.43l2.355-4.715c1.3-2.605 2.377-4.693 2.422-4.67.045.022.27 1.347.493 2.94ZM9.562 1.818C7.903 3.143 5.346 5.388 3.328 7.32L1.735 8.823l.292 1.976c.157 1.078.449 3.188.628 4.67.202 1.482.404 2.874.47 3.077.09.269 0 .404-.246.404-.426 0-.449-.113.718 3.592.286.952.577 1.903.875 2.851.044.158.224.225.425.158.202-.09.314-.27.247-.427-.067-.18.045-.36.224-.427.247-.09.225-.269-.157-.92-.605-1.01-2.152-9.633-2.242-12.416-.067-1.976-.067-1.999.762-3.121.808-1.1 2.67-2.762 5.54-4.873.807-.605 1.614-1.28 1.839-1.504.336-.404.493-.292 3.319 2.717 1.637 1.729 3.453 3.502 4.037 3.952l1.076.808-.83 1.75c-.448.944-2.265 4.581-4.059 8.04-3.745 7.274-2.983 6.578-7.333 6.645l-2.826.023-.942 1.077c-.987 1.146-1.121 1.572-.65 2.29.18.248.313.652.313.898 0 .405.157.472 1.055.517.56.023 1.076.09 1.144.157.067.068.156 1.46.224 3.098l.09 2.965-1.503 3.232C1.735 45.422.749 47.891.749 48.7c0 .427.09.786.18.786.224 0 .224-.022 9.35-19.085a4398.495 4398.495 0 0 1 8.927-18.546c.672-1.369 1.278-2.626 1.323-2.806.045-.202-1.503-1.751-3.97-3.93-2.22-1.975-4.171-3.772-4.35-3.974-.516-.628-1.279-.426-2.647.674ZM8.441 31.231c-.18.472-.65 1.46-1.031 2.2-.629 1.258-.696 1.303-.853.786-.09-.314-.157-1.235-.18-2.066-.022-1.639-.067-1.616 1.817-1.728L8.8 30.4l-.358.831Zm1.884-3.592c-1.032 1.998-1.077 2.02-3.903 2.155-2.489.135-2.533.112-2.533-.36 0-.269-.09-.628-.203-.808-.134-.202-.044-.56.27-1.055l.493-.763H6.69c1.234-.023 2.647-.113 3.14-.202.494-.09.92-.135.965-.113.045.023-.18.54-.471 1.146Zm-.09-20.477c-.404.292-.516.584-.516 1.325 0 .875.067 1.01.673 1.257.605.247.763.224 1.458-.247.92-.629.941-.786.269-1.796-.583-.876-1.166-1.033-1.884-.54Z"}),je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.703 11.793c.166-.291.501-.514.93-.514.38 0 .698.161.82.283.161.162.225.35.225.54a.822.822 0 0 1-.056.289c-.08.218-.5 1.106-.983 2.116-.535 1.071-1.76 3.727-2.699 5.895-.79 1.802-1.209 2.784-1.404 3.416-.142.461-.132.665-.058.961.264 1.103.6 3.647.53 4.132-.088.756.727 8.547 1.57 15.21.5 3.997.903 7.45.903 7.676l-.001.033c-.004.087-.041.288-.211.54-.24.354-.914 1.143-1.8 2.119-2.004 2.21-5.107 5.423-6.463 6.653-.322.292-.566.485-.696.56a.884.884 0 0 1-.289.111c-.194.037-.579-.007-1.11-.349-.707-.453-1.981-1.522-4-3.366-.627-.561-2.061-1.794-3.176-2.776-.81-.699-1.308-1.138-1.612-1.466-.32-.343-.47-.61-.549-.87-.078-.257-.085-.515-.055-.874.05-.52.521-1.769 1.166-2.91.559-.985 2.48-4.654 4.269-8.17 1.579-3.071 2.392-4.663 2.792-5.612.32-.759.329-1 .277-1.387-.085-.553-.092-.891-.052-1.092a.942.942 0 0 1 .274-.52c.164-.157.384-.261.704-.261.094 0 .184.011.27.033 1.924-3.44 8.554-16.632 9.316-18.616.276-.724.64-1.336.848-1.556a.965.965 0 0 1 .32-.228Zm-5.399 16.402c-.49.942-.971 1.888-1.446 2.837l-2.28 4.565v7.871c0 4.023-.06 7.404-.136 8.04-.067.552-.474.691-.654.722l.075-.008c-.317.07-.574.063-.778-.023-.234-.098-.5-.297-.63-.857-.156-.681-.158-2.462-.103-6.893.019-2.022.022-3.592.008-4.725-.156.276-.315.562-.467.843a737.624 737.624 0 0 1-3.682 6.79 3618.972 3618.972 0 0 0-2.462 4.493c.062.088.169.231.289.364.55.61 1.631 1.623 3.624 3.462l3.931 3.674.377-.298c.907-.709 3.554-3.479 6.055-6.293.425-.47.73-.814.946-1.084.175-.22.28-.36.319-.501.031-.117.002-.227-.024-.379l-.004-.02c-.224-1.572-1.032-7.753-1.728-13.33-.358-3.022-.85-6.782-1.096-8.349l-.002-.01c-.042-.301-.087-.603-.132-.891ZM9.118 1.264C9.91.628 10.537.27 11.028.144c.727-.186 1.27.003 1.713.53.186.209 2.107 1.972 4.287 3.912 2.02 1.783 3.434 3.16 3.897 3.743.326.41.322.756.296.873a1.046 1.046 0 0 1-.005.018c-.047.188-.669 1.512-1.374 2.947a4348.55 4348.55 0 0 0-8.923 18.54c-7.335 15.32-8.808 18.396-9.217 19.015-.235.355-.419.404-.525.437a.815.815 0 0 1-.249.036.745.745 0 0 1-.647-.363C.176 49.67.04 49.222.04 48.7c0-.286.09-.754.316-1.434.452-1.356 1.466-3.722 3.225-7.53l1.432-3.083-.084-2.787a72.902 72.902 0 0 0-.156-2.53 7.307 7.307 0 0 0-.539-.046c-.463-.024-.764-.062-.96-.124-.304-.096-.48-.252-.598-.438-.105-.165-.17-.374-.17-.663 0-.134-.081-.348-.178-.481l-.019-.028c-.293-.448-.406-.831-.373-1.234.04-.484.34-1.052 1.08-1.91l.759-.869c-.103-.325-.471-1.513-.854-2.787-.737-2.339-1.004-3.238-1.018-3.578-.016-.393.134-.59.27-.715a.721.721 0 0 1 .192-.125 89.87 89.87 0 0 1-.414-2.782 231.651 231.651 0 0 0-.625-4.652l-.292-1.976a.71.71 0 0 1 .215-.62l1.589-1.501C4.87 4.86 7.446 2.599 9.118 1.264Zm-1.833 33.75a.819.819 0 0 1-.406.208.73.73 0 0 1-.491-.063l.048 1.618v.009l.849-1.773Zm5.874.697c-.035.087-.07.175-.107.261a20.92 20.92 0 0 1-.36.798.688.688 0 0 1 .457.007l.01.004v-1.07Zm.72-1.892-.015.018a.745.745 0 0 1-.407.236c.02.195.027.378 0 .592l.422-.846ZM7.7 31.175c-.268.027-.489.055-.6.07-.006.056-.013.13-.016.194-.005.19 0 .42.004.694.003.111.006.225.011.338.232-.471.459-.956.6-1.296Zm2.12-1.456a2.04 2.04 0 0 1-.415.31c.064.104.099.222.104.341l.132-.277.18-.374Zm-.14-2.374c-.654.079-1.882.153-2.974.173h-1.87l-.281.435c-.09.141-.17.331-.203.414.102.21.189.508.226.788h.007c.364.006.928-.023 1.805-.07 1.243-.06 1.88-.052 2.315-.291.154-.086.266-.215.387-.393.176-.261.354-.605.587-1.056Zm2.136-1.784c-.157.16-.331.3-.52.422a.631.631 0 0 1 .182.281l.337-.703Zm7.205-1.478c-.222.442-.445.883-.667 1.32a.787.787 0 0 1 .61.007c.036.018.145.07.243.2-.032-.165-.067-.33-.105-.493-.088-.351-.137-.633-.08-1.034h-.001ZM11.415 2.546c-.358.319-1.039.879-1.725 1.394C6.903 5.989 5.087 7.59 4.301 8.662c-.28.38-.458.605-.556.852-.15.38-.103.798-.068 1.824.063 1.923.833 6.669 1.493 9.686.262 1.199.483 2.11.654 2.394.25.426.364.71.398.894a.923.923 0 0 1-.184.764l1.27-.01c.863-.014 1.523.003 2.056-.019.424-.017.75-.052 1.034-.187.336-.159.596-.458.921-.955.62-.948 1.373-2.515 2.705-5.103 1.789-3.448 3.6-7.076 4.047-8.015l.582-1.227-.62-.466c-.595-.458-2.45-2.263-4.12-4.027a59.654 59.654 0 0 0-2.498-2.52ZM5.81 24.876v-.001l-.013-.03.013.031Zm-.71-.835.027-.011a.55.55 0 0 0-.028.011Zm19.904-11.777v.01-.01Zm.002-.016v-.034.034ZM9.82 6.587c-.587.424-.81.823-.81 1.9 0 .787.12 1.157.344 1.42.158.186.388.339.77.494.352.144.603.207.838.209.347.002.688-.12 1.285-.525.707-.483.98-.864 1.036-1.238.052-.352-.09-.812-.574-1.54-.412-.619-.853-.95-1.29-1.072-.489-.139-1.016-.05-1.586.342l-.013.01Zm2.015 2.028a6.288 6.288 0 0 0-.306-.52c-.19-.284-.326-.488-.531-.5-.113-.007-.224.058-.352.146-.218.159-.218.34-.218.745 0 .198.02.419.028.504.047.025.133.068.204.097.133.054.222.102.312.103.04 0 .071-.027.12-.054a4.29 4.29 0 0 0 .358-.225c.147-.1.299-.223.385-.296ZM9.12 1.263l-.002.002.002-.002Z"})),{width:26,height:62,fill:"none"});Un(je.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),je.createElement("path",{d:"M13.5 13.5l4.5 4.5"})),{fill:"none",width:22,height:22,strokeWidth:1.25});Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})),ii);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})),ii);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("circle",{cx:"12",cy:"12",r:"9"})),ii);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),je.createElement("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),je.createElement("line",{x1:"15",y1:"8",x2:"19",y2:"12"})),ii);Un(je.createElement("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),ko);Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),je.createElement("path",{d:"M16 7h4"}),je.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})),ii);Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),je.createElement("path",{d:"m11.25 5.417 3.333 3.333"})),ko);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),je.createElement("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),je.createElement("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),je.createElement("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),je.createElement("polyline",{points:"5 20 11 4 13 4 20 20"})),ii);Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{d:"M12.5 6.667h.01"}),je.createElement("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),je.createElement("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),je.createElement("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})),ko);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),je.createElement("path",{d:"M18 13.3l-6.3 -6.3"})),ii);Un(je.createElement("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),ko);Un(je.createElement("path",{d:"M5 10h10",strokeWidth:"1.25"}),ko);Un(je.createElement("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),ko);Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),je.createElement("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})),ko);Un(je.createElement("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),ko);Un(je.createElement("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})),ko);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),je.createElement("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),je.createElement("line",{x1:"4",y1:"18",x2:"20",y2:"18"})),ii);Un(je.createElement("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),ko);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("circle",{cx:"12",cy:"12",r:"9"}),je.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),je.createElement("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})),ii);Un(je.createElement("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),ko);var Uue=Un(je.createElement("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),ko);Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),je.createElement("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})),ko);var Wue=Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"})),ii);Un(je.createElement("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24});Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),je.createElement("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})),ko);Un("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512});Un("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512});Un(je.createElement("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),ko);Un("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});Un("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z");Un(je.createElement("g",{strokeWidth:"1.25"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M15 8h.01"}),je.createElement("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),je.createElement("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),je.createElement("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),je.createElement("path",{d:"M19 16v6"}),je.createElement("path",{d:"M22 19l-3 3l-3 -3"})),ii);Un("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});Un("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Un("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Un("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");Un("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");Un(je.createElement("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),ko);Un(je.createElement("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),ko);Un("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0});Un(je.createElement("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),ko);Un("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24});var Vue=Un(je.createElement(je.Fragment,null,je.createElement("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),je.createElement("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})),{width:64,height:64});Un(je.createElement("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z",fill:"currentColor"}),je.createElement("path",{d:"M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388",fill:"currentColor"}),je.createElement("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z",fill:"currentColor"}),je.createElement("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)"},je.createElement("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),je.createElement("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),je.createElement("mask",{id:"SendToBackIcon",fill:"#fff"},je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z"})),je.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z",fill:"currentColor"}),je.createElement("path",{d:"M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z",fill:"currentColor",mask:"url(#SendToBackIcon)"}),je.createElement("path",{d:"M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z",stroke:"currentColor",strokeWidth:"1.25"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement("g",{stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),je.createElement("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})),ko);Un(je.createElement("g",{stroke:"currentColor",strokeWidth:"1.25"},je.createElement("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),je.createElement("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),je.createElement("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})),ko);Un(je.createElement("g",{strokeWidth:"1.5"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("circle",{cx:"9",cy:"7",r:"4"}),je.createElement("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),je.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),je.createElement("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})),ii);Un("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");Un("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{d:"M15 5 5 15M5 5l10 10"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un("M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z",{width:320,height:512,style:{marginLeft:"-0.2rem"},mirror:!0});Un("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});Un("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});Un("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});Un(je.createElement("g",{strokeWidth:1.25},je.createElement("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})),ko);Un(je.createElement(je.Fragment,null,je.createElement("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),je.createElement("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16},je.createElement("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})),je.createElement("g",{mask:"url(#FillHachureIcon)"},je.createElement("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)"},je.createElement("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),je.createElement("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22},je.createElement("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})),je.createElement("g",{mask:"url(#FillCrossHatchIcon)"},je.createElement("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"}))),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)"},je.createElement("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),dO(dO({},ko),{},{fill:"currentColor"}));Un(je.createElement(je.Fragment,null,je.createElement("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})),ko);Un(je.createElement("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),ko);Un(je.createElement("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),ko);Un(je.createElement("g",{strokeWidth:"2"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M5 12h2"}),je.createElement("path",{d:"M17 12h2"}),je.createElement("path",{d:"M11 12h2"})),ii);Un(je.createElement("g",{strokeWidth:"2"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M4 12v.01"}),je.createElement("path",{d:"M8 12v.01"}),je.createElement("path",{d:"M12 12v.01"}),je.createElement("path",{d:"M16 12v.01"}),je.createElement("path",{d:"M20 12v.01"})),ii);Un(je.createElement("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),ko);Un(je.createElement("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),ko);Un(je.createElement("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),ko);Un(je.createElement("svg",{strokeWidth:"1.5"},je.createElement("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),je.createElement("path",{d:"M13.3333 3.33331V3.34331"}),je.createElement("path",{d:"M16.6667 3.33331V3.34331"}),je.createElement("path",{d:"M16.6667 6.66669V6.67669"}),je.createElement("path",{d:"M16.6667 10V10.01"}),je.createElement("path",{d:"M3.33334 13.3333V13.3433"}),je.createElement("path",{d:"M16.6667 13.3333V13.3433"}),je.createElement("path",{d:"M3.33334 16.6667V16.6767"}),je.createElement("path",{d:"M6.66666 16.6667V16.6767"}),je.createElement("path",{d:"M10 16.6667V16.6767"}),je.createElement("path",{d:"M13.3333 16.6667V16.6767"}),je.createElement("path",{d:"M16.6667 16.6667V16.6767"})),ko);Un(je.createElement("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),je.createElement("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),je.createElement("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),je.createElement("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),je.createElement("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),je.createElement("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),je.createElement("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),je.createElement("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),je.createElement("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),je.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),je.createElement("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),je.createElement("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})),ii);Un(je.createElement("path",{d:"M6 10H34",stroke:"currentColor",strokeWidth:2,fill:"none"}),{width:40,height:20});Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)"},je.createElement("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)"},je.createElement("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)"},je.createElement("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement(je.Fragment,null,je.createElement("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"}))),ko);Un(je.createElement(je.Fragment,null,je.createElement("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})),je.createElement("defs",null,je.createElement("clipPath",{id:"a"},je.createElement("path",{fill:"#fff",d:"M0 0h20v20H0z"})))),ko);Un(je.createElement("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),je.createElement("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),je.createElement("line",{x1:"4",y1:"16",x2:"16",y2:"16"})),ii);Un(je.createElement("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),je.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),je.createElement("line",{x1:"6",y1:"16",x2:"18",y2:"16"})),ii);Un(je.createElement("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),je.createElement("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),je.createElement("line",{x1:"8",y1:"16",x2:"20",y2:"16"})),ii);Un(je.createElement("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});Un(je.createElement("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));Un(je.createElement("g",{strokeWidth:1.25},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),je.createElement("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),je.createElement("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),je.createElement("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),je.createElement("path",{d:"M7 11l5 5l5 -5"}),je.createElement("path",{d:"M12 4l0 12"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),je.createElement("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),je.createElement("path",{d:"M12 17l0 .01"}),je.createElement("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M7 4v16l13 -8z"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M5 12l5 5l10 -10"})),ii);Un(je.createElement(je.Fragment,null,je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),je.createElement("path",{d:"M12 9v4"}),je.createElement("path",{d:"M12 17h.01"})),ii);Un(je.createElement("g",{strokeWidth:1.25},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M11 7l6 6"}),je.createElement("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})),ii);Un(je.createElement("g",{strokeWidth:1.5},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M12 3l-4 7h8z"}),je.createElement("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),je.createElement("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})),ii);Un(je.createElement("g",{strokeWidth:1.5},je.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),je.createElement("path",{d:"M4 7l16 0"}),je.createElement("path",{d:"M4 17l16 0"}),je.createElement("path",{d:"M7 4l0 16"}),je.createElement("path",{d:"M17 4l0 16"})),ii);var Kue=Un(je.createElement("g",null,je.createElement("path",{d:"M17 8h1a4 4 0 1 1 0 8h-1"}),je.createElement("path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"}),je.createElement("line",{x1:"6",x2:"6",y1:"2",y2:"4"}),je.createElement("line",{x1:"10",x2:"10",y1:"2",y2:"4"}),je.createElement("line",{x1:"14",x2:"14",y1:"2",y2:"4"})),ii);const c_={welcome:{github:"Give a Star to the Github repo",twitter:"Follow me on Twitter",homepage:"Visit the homepage for more",coffee:"Buy me a coffee / Feed my cat"}},Yue={welcome:{github:" Github Star ",twitter:"",homepage:"",coffee:"/"}},Gue={welcome:{github:" Github Star ",twitter:"",homepage:"",coffee:"/"}};var Xue=Array.isArray,d_=Xue,que=typeof la=="object"&&la&&la.Object===Object&&la,dB=que,Jue=dB,Que=typeof self=="object"&&self&&self.Object===Object&&self,ehe=Jue||Que||Function("return this")(),Uu=ehe,the=Uu,nhe=the.Symbol,Nx=nhe,uO=Nx,uB=Object.prototype,rhe=uB.hasOwnProperty,ohe=uB.toString,Z2=uO?uO.toStringTag:void 0;function ihe(n){var e=rhe.call(n,Z2),t=n[Z2];try{n[Z2]=void 0;var r=!0}catch{}var o=ohe.call(n);return r&&(e?n[Z2]=t:delete n[Z2]),o}var ahe=ihe,she=Object.prototype,lhe=she.toString;function che(n){return lhe.call(n)}var dhe=che,hO=Nx,uhe=ahe,hhe=dhe,fhe="[object Null]",phe="[object Undefined]",fO=hO?hO.toStringTag:void 0;function ghe(n){return n==null?n===void 0?phe:fhe:fO&&fO in Object(n)?uhe(n):hhe(n)}var zx=ghe;function mhe(n){return n!=null&&typeof n=="object"}var u_=mhe,vhe=zx,bhe=u_,yhe="[object Symbol]";function xhe(n){return typeof n=="symbol"||bhe(n)&&vhe(n)==yhe}var Bx=xhe,whe=d_,Che=Bx,She=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,khe=/^\w*$/;function _he(n,e){if(whe(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Che(n)?!0:khe.test(n)||!She.test(n)||e!=null&&n in Object(e)}var Ehe=_he;function Phe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Hx=Phe,Mhe=zx,Ihe=Hx,The="[object AsyncFunction]",Ohe="[object Function]",Ahe="[object GeneratorFunction]",Lhe="[object Proxy]";function $he(n){if(!Ihe(n))return!1;var e=Mhe(n);return e==Ohe||e==Ahe||e==The||e==Lhe}var jhe=$he,Rhe=Uu,Dhe=Rhe["__core-js_shared__"],Nhe=Dhe,r8=Nhe,pO=function(){var n=/[^.]+$/.exec(r8&&r8.keys&&r8.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function zhe(n){return!!pO&&pO in n}var Bhe=zhe,Hhe=Function.prototype,Fhe=Hhe.toString;function Zhe(n){if(n!=null){try{return Fhe.call(n)}catch{}try{return n+""}catch{}}return""}var hB=Zhe,Uhe=jhe,Whe=Bhe,Vhe=Hx,Khe=hB,Yhe=/[\\^$.*+?()[\]{}|]/g,Ghe=/^\[object .+?Constructor\]$/,Xhe=Function.prototype,qhe=Object.prototype,Jhe=Xhe.toString,Qhe=qhe.hasOwnProperty,efe=RegExp("^"+Jhe.call(Qhe).replace(Yhe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tfe(n){if(!Vhe(n)||Whe(n))return!1;var e=Uhe(n)?efe:Ghe;return e.test(Khe(n))}var nfe=tfe;function rfe(n,e){return n==null?void 0:n[e]}var ofe=rfe,ife=nfe,afe=ofe;function sfe(n,e){var t=afe(n,e);return ife(t)?t:void 0}var jm=sfe,lfe=jm,cfe=lfe(Object,"create"),Fx=cfe,gO=Fx;function dfe(){this.__data__=gO?gO(null):{},this.size=0}var ufe=dfe;function hfe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var ffe=hfe,pfe=Fx,gfe="__lodash_hash_undefined__",mfe=Object.prototype,vfe=mfe.hasOwnProperty;function bfe(n){var e=this.__data__;if(pfe){var t=e[n];return t===gfe?void 0:t}return vfe.call(e,n)?e[n]:void 0}var yfe=bfe,xfe=Fx,wfe=Object.prototype,Cfe=wfe.hasOwnProperty;function Sfe(n){var e=this.__data__;return xfe?e[n]!==void 0:Cfe.call(e,n)}var kfe=Sfe,_fe=Fx,Efe="__lodash_hash_undefined__";function Pfe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=_fe&&e===void 0?Efe:e,this}var Mfe=Pfe,Ife=ufe,Tfe=ffe,Ofe=yfe,Afe=kfe,Lfe=Mfe;function Rm(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Rm.prototype.clear=Ife;Rm.prototype.delete=Tfe;Rm.prototype.get=Ofe;Rm.prototype.has=Afe;Rm.prototype.set=Lfe;var $fe=Rm;function jfe(){this.__data__=[],this.size=0}var Rfe=jfe;function Dfe(n,e){return n===e||n!==n&&e!==e}var Nfe=Dfe,zfe=Nfe;function Bfe(n,e){for(var t=n.length;t--;)if(zfe(n[t][0],e))return t;return-1}var Zx=Bfe,Hfe=Zx,Ffe=Array.prototype,Zfe=Ffe.splice;function Ufe(n){var e=this.__data__,t=Hfe(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Zfe.call(e,t,1),--this.size,!0}var Wfe=Ufe,Vfe=Zx;function Kfe(n){var e=this.__data__,t=Vfe(e,n);return t<0?void 0:e[t][1]}var Yfe=Kfe,Gfe=Zx;function Xfe(n){return Gfe(this.__data__,n)>-1}var qfe=Xfe,Jfe=Zx;function Qfe(n,e){var t=this.__data__,r=Jfe(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var epe=Qfe,tpe=Rfe,npe=Wfe,rpe=Yfe,ope=qfe,ipe=epe;function Dm(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Dm.prototype.clear=tpe;Dm.prototype.delete=npe;Dm.prototype.get=rpe;Dm.prototype.has=ope;Dm.prototype.set=ipe;var Ux=Dm,ape=jm,spe=Uu,lpe=ape(spe,"Map"),h_=lpe,mO=$fe,cpe=Ux,dpe=h_;function upe(){this.size=0,this.__data__={hash:new mO,map:new(dpe||cpe),string:new mO}}var hpe=upe;function fpe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var ppe=fpe,gpe=ppe;function mpe(n,e){var t=n.__data__;return gpe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Wx=mpe,vpe=Wx;function bpe(n){var e=vpe(this,n).delete(n);return this.size-=e?1:0,e}var ype=bpe,xpe=Wx;function wpe(n){return xpe(this,n).get(n)}var Cpe=wpe,Spe=Wx;function kpe(n){return Spe(this,n).has(n)}var _pe=kpe,Epe=Wx;function Ppe(n,e){var t=Epe(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var Mpe=Ppe,Ipe=hpe,Tpe=ype,Ope=Cpe,Ape=_pe,Lpe=Mpe;function Nm(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Nm.prototype.clear=Ipe;Nm.prototype.delete=Tpe;Nm.prototype.get=Ope;Nm.prototype.has=Ape;Nm.prototype.set=Lpe;var f_=Nm,fB=f_,$pe="Expected a function";function p_(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError($pe);var t=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var a=n.apply(this,r);return t.cache=i.set(o,a)||i,a};return t.cache=new(p_.Cache||fB),t}p_.Cache=fB;var jpe=p_,Rpe=jpe,Dpe=500;function Npe(n){var e=Rpe(n,function(r){return t.size===Dpe&&t.clear(),r}),t=e.cache;return e}var zpe=Npe,Bpe=zpe,Hpe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fpe=/\\(\\)?/g,Zpe=Bpe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Hpe,function(t,r,o,i){e.push(o?i.replace(Fpe,"$1"):r||t)}),e}),Upe=Zpe;function Wpe(n,e){for(var t=-1,r=n==null?0:n.length,o=Array(r);++t<r;)o[t]=e(n[t],t,n);return o}var Vpe=Wpe,vO=Nx,Kpe=Vpe,Ype=d_,Gpe=Bx,Xpe=1/0,bO=vO?vO.prototype:void 0,yO=bO?bO.toString:void 0;function pB(n){if(typeof n=="string")return n;if(Ype(n))return Kpe(n,pB)+"";if(Gpe(n))return yO?yO.call(n):"";var e=n+"";return e=="0"&&1/n==-Xpe?"-0":e}var qpe=pB,Jpe=qpe;function Qpe(n){return n==null?"":Jpe(n)}var e1e=Qpe,t1e=d_,n1e=Ehe,r1e=Upe,o1e=e1e;function i1e(n,e){return t1e(n)?n:n1e(n,e)?[n]:r1e(o1e(n))}var a1e=i1e,s1e=Bx,l1e=1/0;function c1e(n){if(typeof n=="string"||s1e(n))return n;var e=n+"";return e=="0"&&1/n==-l1e?"-0":e}var d1e=c1e,u1e=a1e,h1e=d1e;function f1e(n,e){e=u1e(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[h1e(e[t++])];return t&&t==r?n:void 0}var p1e=f1e,g1e=p1e;function m1e(n,e,t){var r=n==null?void 0:g1e(n,e);return r===void 0?t:r}var v1e=m1e;const b1e=bm(v1e);function $C(n){"@babel/helpers - typeof";return $C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$C(n)}function jC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jC=function(){return n};var n={},e=Object.prototype,t=e.hasOwnProperty,r=Object.defineProperty||function(L,j,$){L[j]=$.value},o=typeof Symbol=="function"?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(L,j,$){return Object.defineProperty(L,j,{value:$,enumerable:!0,configurable:!0,writable:!0}),L[j]}try{l({},"")}catch{l=function($,ee,Q){return $[ee]=Q}}function d(L,j,$,ee){var Q=j&&j.prototype instanceof f?j:f,pe=Object.create(Q.prototype),ie=new I(ee||[]);return r(pe,"_invoke",{value:k(L,$,ie)}),pe}function u(L,j,$){try{return{type:"normal",arg:L.call(j,$)}}catch(ee){return{type:"throw",arg:ee}}}n.wrap=d;var p={};function f(){}function h(){}function c(){}var g={};l(g,i,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(A([])));b&&b!==e&&t.call(b,i)&&(g=b);var v=c.prototype=f.prototype=Object.create(g);function w(L){["next","throw","return"].forEach(function(j){l(L,j,function($){return this._invoke(j,$)})})}function _(L,j){function $(Q,pe,ie,te){var Z=u(L[Q],L,pe);if(Z.type!=="throw"){var D=Z.arg,B=D.value;return B&&$C(B)=="object"&&t.call(B,"__await")?j.resolve(B.__await).then(function(H){$("next",H,ie,te)},function(H){$("throw",H,ie,te)}):j.resolve(B).then(function(H){D.value=H,ie(D)},function(H){return $("throw",H,ie,te)})}te(Z.arg)}var ee;r(this,"_invoke",{value:function(pe,ie){function te(){return new j(function(Z,D){$(pe,ie,Z,D)})}return ee=ee?ee.then(te,te):te()}})}function k(L,j,$){var ee="suspendedStart";return function(Q,pe){if(ee==="executing")throw new Error("Generator is already running");if(ee==="completed"){if(Q==="throw")throw pe;return T()}for($.method=Q,$.arg=pe;;){var ie=$.delegate;if(ie){var te=y(ie,$);if(te){if(te===p)continue;return te}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(ee==="suspendedStart")throw ee="completed",$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);ee="executing";var Z=u(L,j,$);if(Z.type==="normal"){if(ee=$.done?"completed":"suspendedYield",Z.arg===p)continue;return{value:Z.arg,done:$.done}}Z.type==="throw"&&(ee="completed",$.method="throw",$.arg=Z.arg)}}}function y(L,j){var $=j.method,ee=L.iterator[$];if(ee===void 0)return j.delegate=null,$==="throw"&&L.iterator.return&&(j.method="return",j.arg=void 0,y(L,j),j.method==="throw")||$!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+$+"' method")),p;var Q=u(ee,L.iterator,j.arg);if(Q.type==="throw")return j.method="throw",j.arg=Q.arg,j.delegate=null,p;var pe=Q.arg;return pe?pe.done?(j[L.resultName]=pe.value,j.next=L.nextLoc,j.method!=="return"&&(j.method="next",j.arg=void 0),j.delegate=null,p):pe:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,p)}function S(L){var j={tryLoc:L[0]};1 in L&&(j.catchLoc=L[1]),2 in L&&(j.finallyLoc=L[2],j.afterLoc=L[3]),this.tryEntries.push(j)}function C(L){var j=L.completion||{};j.type="normal",delete j.arg,L.completion=j}function I(L){this.tryEntries=[{tryLoc:"root"}],L.forEach(S,this),this.reset(!0)}function A(L){if(L){var j=L[i];if(j)return j.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var $=-1,ee=function Q(){for(;++$<L.length;)if(t.call(L,$))return Q.value=L[$],Q.done=!1,Q;return Q.value=void 0,Q.done=!0,Q};return ee.next=ee}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=c,r(v,"constructor",{value:c,configurable:!0}),r(c,"constructor",{value:h,configurable:!0}),h.displayName=l(c,s,"GeneratorFunction"),n.isGeneratorFunction=function(L){var j=typeof L=="function"&&L.constructor;return!!j&&(j===h||(j.displayName||j.name)==="GeneratorFunction")},n.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,c):(L.__proto__=c,l(L,s,"GeneratorFunction")),L.prototype=Object.create(v),L},n.awrap=function(L){return{__await:L}},w(_.prototype),l(_.prototype,a,function(){return this}),n.AsyncIterator=_,n.async=function(L,j,$,ee,Q){Q===void 0&&(Q=Promise);var pe=new _(d(L,j,$,ee),Q);return n.isGeneratorFunction(j)?pe:pe.next().then(function(ie){return ie.done?ie.value:pe.next()})},w(v),l(v,s,"Generator"),l(v,i,function(){return this}),l(v,"toString",function(){return"[object Generator]"}),n.keys=function(L){var j=Object(L),$=[];for(var ee in j)$.push(ee);return $.reverse(),function Q(){for(;$.length;){var pe=$.pop();if(pe in j)return Q.value=pe,Q.done=!1,Q}return Q.done=!0,Q}},n.values=A,I.prototype={constructor:I,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!j)for(var $ in this)$.charAt(0)==="t"&&t.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=void 0)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var $=this;function ee(D,B){return ie.type="throw",ie.arg=j,$.next=D,B&&($.method="next",$.arg=void 0),!!B}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var pe=this.tryEntries[Q],ie=pe.completion;if(pe.tryLoc==="root")return ee("end");if(pe.tryLoc<=this.prev){var te=t.call(pe,"catchLoc"),Z=t.call(pe,"finallyLoc");if(te&&Z){if(this.prev<pe.catchLoc)return ee(pe.catchLoc,!0);if(this.prev<pe.finallyLoc)return ee(pe.finallyLoc)}else if(te){if(this.prev<pe.catchLoc)return ee(pe.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<pe.finallyLoc)return ee(pe.finallyLoc)}}}},abrupt:function(j,$){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var Q=this.tryEntries[ee];if(Q.tryLoc<=this.prev&&t.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var pe=Q;break}}pe&&(j==="break"||j==="continue")&&pe.tryLoc<=$&&$<=pe.finallyLoc&&(pe=null);var ie=pe?pe.completion:{};return ie.type=j,ie.arg=$,pe?(this.method="next",this.next=pe.finallyLoc,p):this.complete(ie)},complete:function(j,$){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&$&&(this.next=$),p},finish:function(j){for(var $=this.tryEntries.length-1;$>=0;--$){var ee=this.tryEntries[$];if(ee.finallyLoc===j)return this.complete(ee.completion,ee.afterLoc),C(ee),p}},catch:function(j){for(var $=this.tryEntries.length-1;$>=0;--$){var ee=this.tryEntries[$];if(ee.tryLoc===j){var Q=ee.completion;if(Q.type==="throw"){var pe=Q.arg;C(ee)}return pe}}throw new Error("illegal catch attempt")},delegateYield:function(j,$,ee){return this.delegate={iterator:A(j),resultName:$,nextLoc:ee},this.method==="next"&&(this.arg=void 0),p}},n}function xO(n,e,t,r,o,i,a){try{var s=n[i](a),l=s.value}catch(d){t(d);return}s.done?e(l):Promise.resolve(l).then(r,o)}function y1e(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(l){xO(i,r,o,a,s,"next",l)}function s(l){xO(i,r,o,a,s,"throw",l)}a(void 0)})}}var x1e={en:c_,"zh-CN":Yue,"zh-TW":Gue},gB=c_,w1e=function(){var n=y1e(jC().mark(function e(t){return jC().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:try{gB=x1e[t]||c_}catch(i){console.warn(i)}case 1:case"end":return o.stop()}},e)}));return function(t){return n.apply(this,arguments)}}(),L5=function(e){return b1e(gB,e)};function C1e(n){var e=n.langCode,t=_i.useI18n(),r=t.t;return ne.useEffect(function(){w1e(e)},[e]),je.createElement(_i.WelcomeScreen,null,je.createElement(_i.WelcomeScreen.Hints.MenuHint,null,r("welcomeScreen.app.menuHint")),je.createElement(_i.WelcomeScreen.Hints.ToolbarHint,null),je.createElement(_i.WelcomeScreen.Hints.HelpHint,null),je.createElement(_i.WelcomeScreen.Center,null,je.createElement(_i.WelcomeScreen.Center.Logo,null,"Revezone - revezone.com"),je.createElement(_i.WelcomeScreen.Center.Heading,null,r("welcomeScreen.app.center_heading")),je.createElement(_i.WelcomeScreen.Center.Menu,null,je.createElement(_i.WelcomeScreen.Center.MenuItemLoadScene,null),je.createElement(_i.WelcomeScreen.Center.MenuItemHelp,null),je.createElement(_i.WelcomeScreen.Center.MenuItemLink,{icon:Uue,"aria-label":"GitHub",href:"https://github.com/korbinzhao/excalidraw-cn"},L5("welcome.github")),je.createElement(_i.WelcomeScreen.Center.MenuItemLink,{icon:Wue,href:"https://twitter.com/korbinzhao","aria-label":"Twitter"},L5("welcome.twitter")),je.createElement(_i.WelcomeScreen.Center.MenuItemLink,{icon:Vue,href:"https://revezone.com","aria-label":"revezone.com"},L5("welcome.homepage")),je.createElement(_i.WelcomeScreen.Center.MenuItemLink,{icon:Kue,href:"https://afdian.net/a/wantian","aria-label":"Buy me a coffee"},L5("welcome.coffee")))))}var S1e=function(e,t){return t==="zh-CN"?e==="light"?"":"":t==="zh-TW"?e==="light"?"":"":e==="light"?"Light Mode":"Dark Mode"},k1e=Ux;function _1e(){this.__data__=new k1e,this.size=0}var E1e=_1e;function P1e(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var M1e=P1e;function I1e(n){return this.__data__.get(n)}var T1e=I1e;function O1e(n){return this.__data__.has(n)}var A1e=O1e,L1e=Ux,$1e=h_,j1e=f_,R1e=200;function D1e(n,e){var t=this.__data__;if(t instanceof L1e){var r=t.__data__;if(!$1e||r.length<R1e-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new j1e(r)}return t.set(n,e),this.size=t.size,this}var N1e=D1e,z1e=Ux,B1e=E1e,H1e=M1e,F1e=T1e,Z1e=A1e,U1e=N1e;function oy(n){var e=this.__data__=new z1e(n);this.size=e.size}oy.prototype.clear=B1e;oy.prototype.delete=H1e;oy.prototype.get=F1e;oy.prototype.has=Z1e;oy.prototype.set=U1e;var W1e="__lodash_hash_undefined__";function V1e(n){return this.__data__.set(n,W1e),this}var K1e=V1e;function Y1e(n){return this.__data__.has(n)}var G1e=Y1e,X1e=f_,q1e=K1e,J1e=G1e;function RC(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new X1e;++e<t;)this.add(n[e])}RC.prototype.add=RC.prototype.push=q1e;RC.prototype.has=J1e;var Q1e=Uu;Q1e.Uint8Array;function e0e(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var t0e=e0e,wO=Nx,CO=wO?wO.prototype:void 0;CO&&CO.valueOf;var n0e=zx,r0e=u_,o0e="[object Arguments]";function i0e(n){return r0e(n)&&n0e(n)==o0e}var a0e=i0e,SO=a0e,s0e=u_,mB=Object.prototype,l0e=mB.hasOwnProperty,c0e=mB.propertyIsEnumerable;SO(function(){return arguments}());var c4={exports:{}};function d0e(){return!1}var u0e=d0e;c4.exports;(function(n,e){var t=Uu,r=u0e,o=e&&!e.nodeType&&e,i=o&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===o,s=a?t.Buffer:void 0,l=s?s.isBuffer:void 0,d=l||r;n.exports=d})(c4,c4.exports);c4.exports;var d4={exports:{}};d4.exports;(function(n,e){var t=dB,r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,i=o&&o.exports===r,a=i&&t.process,s=function(){try{var l=o&&o.require&&o.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();n.exports=s})(d4,d4.exports);var h0e=d4.exports,kO=h0e;kO&&kO.isTypedArray;var f0e=jm,p0e=Uu,g0e=f0e(p0e,"DataView"),m0e=g0e,v0e=jm,b0e=Uu,y0e=v0e(b0e,"Promise"),x0e=y0e,w0e=jm,C0e=Uu,S0e=w0e(C0e,"Set"),vB=S0e,k0e=jm,_0e=Uu,E0e=k0e(_0e,"WeakMap"),P0e=E0e,DC=m0e,NC=h_,zC=x0e,BC=vB,HC=P0e,bB=zx,zm=hB,_O="[object Map]",M0e="[object Object]",EO="[object Promise]",PO="[object Set]",MO="[object WeakMap]",IO="[object DataView]",I0e=zm(DC),T0e=zm(NC),O0e=zm(zC),A0e=zm(BC),L0e=zm(HC),V0=bB;(DC&&V0(new DC(new ArrayBuffer(1)))!=IO||NC&&V0(new NC)!=_O||zC&&V0(zC.resolve())!=EO||BC&&V0(new BC)!=PO||HC&&V0(new HC)!=MO)&&(V0=function(n){var e=bB(n),t=e==M0e?n.constructor:void 0,r=t?zm(t):"";if(r)switch(r){case I0e:return IO;case T0e:return _O;case O0e:return EO;case A0e:return PO;case L0e:return MO}return e});function $0e(){}var j0e=$0e,o8=vB,R0e=j0e,D0e=t0e,N0e=1/0;o8&&1/D0e(new o8([,-0]))[1]==N0e;var yB="excalidraw_cn_library_items",z0e=function(){var e,t,r=new Promise(function(o,i){e=o,t=i});return r.resolve=e,r.reject=t,r},B0e=function(){return JSON.parse(localStorage.getItem(yB)||"[]")};function $5(n,e){return U0e(n)||Z0e(n,e)||F0e(n,e)||H0e()}function H0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F0e(n,e){if(n){if(typeof n=="string")return TO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return TO(n,e)}}function TO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Z0e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,o,i,a,s=[],l=!0,d=!1;try{if(i=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){d=!0,o=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}function U0e(n){if(Array.isArray(n))return n}function W0e(n){var e=n.dataSource,t=n.canvasName,r=n.customMenuItems,o=n.systemLangCode,i=n.getRef,a=n.onChange,s=n.onLinkOpen,l=n.onLangCodeChange,d=ne.useRef(null),u=ne.useState("light"),p=$5(u,2),f=p[0],h=p[1],c=ne.useState(o||"en"),g=$5(c,2),m=g[0],b=g[1],v=ne.useState(),w=$5(v,2),_=w[0],k=w[1],y=ne.useRef({promise:null});y.current.promise||(y.current.promise=z0e());var S=ne.useState(null),C=$5(S,2),I=C[0],A=C[1];_i.useHandleLibrary({excalidrawAPI:I}),ne.useEffect(function(){I&&(i==null||i(I))},[I]),ne.useEffect(function(){var ee;try{var Q,pe;ee=JSON.parse(e);var ie=ee,te=ie.theme,Z=ie.langCode,D=ie.libraryItems;te&&h(te),Z&&b(Z);var B=B0e(),H=B||D;k(H),ee.libraryItems=H,(Q=ee)!==null&&Q!==void 0&&(pe=Q.appState)!==null&&pe!==void 0&&pe.collaborators&&(ee.appState.collaborators=new Map(Object.entries(ee.appState.collaborators)))}catch(V){console.error(V)}y.current.promise.resolve(ee)},[e]),ne.useEffect(function(){l==null||l(m)},[m]);var T=ne.useCallback(function(ee){k(ee),localStorage.setItem(yB,JSON.stringify(ee)||"[]")},[]),L=function(Q){var pe;b(Q==null||(pe=Q.target)===null||pe===void 0?void 0:pe.value)},j=function(){var Q=f==="light"?"dark":"light";h(Q)},$=function(){return je.createElement(_i.MainMenu,null,je.createElement(_i.MainMenu.DefaultItems.LoadScene,null),je.createElement(_i.MainMenu.DefaultItems.SaveAsImage,null),je.createElement(_i.MainMenu.DefaultItems.Export,null),je.createElement(_i.MainMenu.DefaultItems.Help,null),je.createElement(_i.MainMenu.DefaultItems.ClearCanvas,null),je.createElement(je.Fragment,null,r),je.createElement(_i.MainMenu.Separator,null),je.createElement(_i.MainMenu.DefaultItems.Socials,null),je.createElement(_i.MainMenu.Separator,null),je.createElement(_i.MainMenu.ItemCustom,null,je.createElement("button",{className:"switch-theme",type:"button",onClick:j},S1e(f==="light"?"dark":"light",m))),je.createElement(_i.MainMenu.ItemCustom,null,je.createElement("select",{className:"language-select",name:"language",id:"language",value:m,onChange:L},_i.languages.filter(function(Q){return!Q.code.startsWith("__")}).map(function(Q){return je.createElement("option",{key:Q.code,value:Q.code},Q.label)}))),je.createElement(_i.MainMenu.ItemCustom,null,je.createElement(_i.MainMenu.DefaultItems.ChangeCanvasBackground,null)))};return je.createElement("div",{className:"excalidraw-cn-app theme-".concat(f),ref:d},je.createElement(_i.Excalidraw,{ref:function(Q){return A(Q)},initialData:y.current.promise,onChange:function(Q,pe,ie){a({elements:Q,appState:pe,theme:f,langCode:m,files:ie,libraryItems:_})},viewModeEnabled:!1,zenModeEnabled:!1,gridModeEnabled:!1,theme:f,langCode:m,name:t,onLinkOpen:s,onLibraryChange:T},$(),je.createElement(C1e,{langCode:m})))}var wu=function(){return wu=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wu.apply(this,arguments)};function xB(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function V0e(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i}function wB(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function CB(n){var e=ne.useRef(n);return e.current=n,e}var K0e=function(n){var e=CB(n);ne.useEffect(function(){return function(){e.current()}},[])},Y0e=Uu,G0e=function(){return Y0e.Date.now()},X0e=G0e,q0e=/\s/;function J0e(n){for(var e=n.length;e--&&q0e.test(n.charAt(e)););return e}var Q0e=J0e,ege=Q0e,tge=/^\s+/;function nge(n){return n&&n.slice(0,ege(n)+1).replace(tge,"")}var rge=nge,oge=rge,OO=Hx,ige=Bx,AO=NaN,age=/^[-+]0x[0-9a-f]+$/i,sge=/^0b[01]+$/i,lge=/^0o[0-7]+$/i,cge=parseInt;function dge(n){if(typeof n=="number")return n;if(ige(n))return AO;if(OO(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=OO(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=oge(n);var t=sge.test(n);return t||lge.test(n)?cge(n.slice(2),t?2:8):age.test(n)?AO:+n}var uge=dge,hge=Hx,i8=X0e,LO=uge,fge="Expected a function",pge=Math.max,gge=Math.min;function mge(n,e,t){var r,o,i,a,s,l,d=0,u=!1,p=!1,f=!0;if(typeof n!="function")throw new TypeError(fge);e=LO(e)||0,hge(t)&&(u=!!t.leading,p="maxWait"in t,i=p?pge(LO(t.maxWait)||0,e):i,f="trailing"in t?!!t.trailing:f);function h(y){var S=r,C=o;return r=o=void 0,d=y,a=n.apply(C,S),a}function c(y){return d=y,s=setTimeout(b,e),u?h(y):a}function g(y){var S=y-l,C=y-d,I=e-S;return p?gge(I,i-C):I}function m(y){var S=y-l,C=y-d;return l===void 0||S>=e||S<0||p&&C>=i}function b(){var y=i8();if(m(y))return v(y);s=setTimeout(b,g(y))}function v(y){return s=void 0,f&&r?h(y):(r=o=void 0,a)}function w(){s!==void 0&&clearTimeout(s),d=0,r=l=o=s=void 0}function _(){return s===void 0?a:v(i8())}function k(){var y=i8(),S=m(y);if(r=arguments,o=this,l=y,S){if(s===void 0)return c(l);if(p)return clearTimeout(s),s=setTimeout(b,e),h(l)}return s===void 0&&(s=setTimeout(b,e)),a}return k.cancel=w,k.flush=_,k}var vge=mge;const bge=bm(vge);function yge(){var n=(typeof global>"u"?"undefined":typeof global)=="object"&&global&&global.Object===Object&&global,e=typeof self=="object"&&self&&self.Object===Object&&self;return n||e}yge()||(global.Date=Date);function SB(n,e){var t,r=CB(n),o=(t=e==null?void 0:e.wait)!==null&&t!==void 0?t:1e3,i=ne.useMemo(function(){return bge(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return r.current.apply(r,wB([],V0e(a),!1))},o,e)},[]);return K0e(function(){i.cancel()}),{run:i,cancel:i.cancel,flush:i.flush}}const xge=bq();let $O=!0;function wge({file:n}){const[e,t]=ne.useState(),[,r]=ne.useState(),[o]=w6(yq),[i,a]=ne.useState(!0),{onLinkOpen:s}=aB(!0),{fileTree:l}=Xj(),d=ne.useCallback(g=>{var m,b;return(m=g.elements)==null||m.forEach(v=>{var w;v!=null&&v.isDeleted&&((w=g.files)==null||delete w[v.fileId])}),g.elements=(b=g.elements)==null?void 0:b.filter(v=>!v.isDeleted),g},[]),u=ne.useCallback(async g=>{t(void 0);let m=await aI.getBoard(g);m=d(m);const b=!m||typeof m=="string"?m:JSON.stringify(m);t(b)},[]),p=ne.useCallback(async()=>{const b=xge==="MacOS"?200:500;await u(n.id),setTimeout(()=>{a(!1),setTimeout(()=>{a(!0)},100)},b)},[n.id]);ne.useEffect(()=>{$O&&($O=!1,p())},[]),ne.useEffect(()=>{vq.on("switch_font_family",()=>{p()})},[]);const f=ne.useCallback(async g=>{const m={type:"excalidraw",version:2,source:window.location.href,...g};await aI.updateBoard(n.id,m,l)},[n.id,l]),{run:h,cancel:c}=SB(f,{wait:200});return ne.useEffect(()=>(u(n.id),()=>{c()}),[n.id]),e?K.jsx(K.Fragment,{children:i?K.jsx(W0e,{dataSource:e,canvasName:n.name,getRef:g=>r(g),systemLangCode:o,onChange:h,onLinkOpen:s}):null}):null}function Cge(){const{t:n}=xq();return K.jsxs("div",{className:"revezone-welcome-page relative w-full h-full flex pt-6 pb-10 justify-center text-slate-400",children:[K.jsxs("div",{className:"content w-2/3 overflow-scroll text-sm",children:[K.jsxs("div",{className:"reve-text-link mb-6",children:[K.jsx(wq,{size:"large",url:"https://revezone.com"}),K.jsx(Cq,{})]}),K.jsx("p",{className:"mb-6",children:n("welcome.productDesc")}),K.jsx("p",{className:"mb-6",children:n("publicBeta.description")}),K.jsx("p",{className:"mb-6 text-sm  text-slate-600",children:n("welcome.operationTip")}),K.jsxs("div",{className:"mb-6 text-sm",children:[K.jsx("h2",{className:"mb-2 text-base",children:n("welcome.operationGuide")}),K.jsx("p",{className:"mb-2",children:n("welcome.operationDetailDesc")})]})]}),K.jsxs("div",{className:"copyright absolute bottom-0 text-center w-full h-8 text-sm",children:["Copyright  2023"," ",K.jsx("a",{href:"https://twitter.com/TheReveZone",target:"_blank",rel:"noreferrer",children:"Revezone"}),". All rights reserved."]})]})}function Sge(){const[n,e]=ne.useState(!0);return ne.useEffect(()=>{setTimeout(()=>{e(!1)},200)},[]),n?null:K.jsx(Cge,{})}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".mind-elixir{--gap: 30px;--root-radius: 30px;--main-radius: 20px;--root-color: #ffffff;--root-bgcolor: #4c4f69;--main-color: #444446;--main-bgcolor: #ffffff;--topic-padding: 3px;--color: #777777;--bgcolor: #f6f6f6;--selected: #4dc4ff;--panel-color: #444446;--panel-bgcolor: #ffffff;--panel-border-color: #eaeaea;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif}.mind-elixir .hyper-link{text-decoration:none;margin-left:.3em}.map-container{-webkit-user-select:none;user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .selected{box-shadow:0 0 0 2px var(--selected)}.map-container .lhs{direction:rtl}.map-container .lhs me-tpc{direction:ltr}.map-container .map-canvas{height:20000px;width:20000px;position:relative;-webkit-user-select:none;user-select:none;transition:transform .3s;transform:scale(1);background-color:var(--bgcolor)}.map-container .map-canvas me-nodes{position:absolute;display:flex;justify-content:center;align-items:center;height:fit-content;width:fit-content}.map-container .map-canvas me-root{position:relative}.map-container .map-canvas me-root me-tpc{display:block;font-size:25px;line-height:1.2em;color:var(--root-color);padding:10px var(--gap);border-radius:var(--root-radius);white-space:pre-wrap;background-color:var(--root-bgcolor)}.map-container .map-canvas me-root me-tpc #input-box{padding:10px var(--gap)}.map-container me-main>me-wrapper{position:relative;margin:20px 65px}.map-container me-main>me-wrapper>me-parent{margin:var(--gap);padding:0}.map-container me-main>me-wrapper>me-parent>me-tpc{border-radius:var(--main-radius);background-color:var(--main-bgcolor);border:2px solid var(--main-color);color:var(--main-color);padding:8px var(--gap)}.map-container me-main>me-wrapper>me-parent>me-tpc #input-box{padding:8px var(--gap)}.map-container me-wrapper{display:block;pointer-events:none;width:fit-content}.map-container me-children,.map-container me-parent{display:inline-block;vertical-align:middle}.map-container me-parent{position:relative;cursor:pointer;padding:6px var(--gap);margin-top:10px}.map-container me-parent me-tpc{position:relative;display:block;border-radius:3px;color:var(--color);pointer-events:all;max-width:35em;white-space:pre-wrap;padding:var(--topic-padding);line-height:1.2em}.map-container me-parent me-tpc .insert-preview{position:absolute;width:100%;left:0;z-index:9}.map-container me-parent me-tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container me-parent me-tpc .before{height:14px;top:-14px}.map-container me-parent me-tpc .in{height:100%;top:0}.map-container me-parent me-tpc .after{height:14px;bottom:-14px}.map-container me-parent me-epd{position:absolute;height:18px;width:18px;opacity:.8;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NDcxNzI0MiIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNDgwaC0xMzguNjY2NjY3VjM0MS4zMzMzMzNjMC0xNy4wNjY2NjctMTQuOTMzMzMzLTMyLTMyLTMycy0zMiAxNC45MzMzMzMtMzIgMzJ2MTM4LjY2NjY2N0gzNDEuMzMzMzMzYy0xNy4wNjY2NjcgMC0zMiAxNC45MzMzMzMtMzIgMzJzMTQuOTMzMzMzIDMyIDMyIDMyaDEzOC42NjY2NjdWNjgyLjY2NjY2N2MwIDE3LjA2NjY2NyAxNC45MzMzMzMgMzIgMzIgMzJzMzItMTQuOTMzMzMzIDMyLTMydi0xMzguNjY2NjY3SDY4Mi42NjY2NjdjMTcuMDY2NjY3IDAgMzItMTQuOTMzMzMzIDMyLTMycy0xNC45MzMzMzMtMzItMzItMzJ6Ij48L3BhdGg+Cjwvc3ZnPg==);background-repeat:no-repeat;background-size:contain;background-position:center;pointer-events:all;z-index:9}.map-container me-parent me-epd.minus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdD0iMTY1NjY1NTU2NDk4NSIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+CiAgICA8cGF0aCBkPSJNNTEyIDc0LjY2NjY2N0MyNzAuOTMzMzMzIDc0LjY2NjY2NyA3NC42NjY2NjcgMjcwLjkzMzMzMyA3NC42NjY2NjcgNTEyUzI3MC45MzMzMzMgOTQ5LjMzMzMzMyA1MTIgOTQ5LjMzMzMzMyA5NDkuMzMzMzMzIDc1My4wNjY2NjcgOTQ5LjMzMzMzMyA1MTIgNzUzLjA2NjY2NyA3NC42NjY2NjcgNTEyIDc0LjY2NjY2N3oiIHN0cm9rZS13aWR0aD0iNTQiIHN0cm9rZT0nYmxhY2snIGZpbGw9J3doaXRlJyA+PC9wYXRoPgogICAgPHBhdGggZD0iTTY4Mi42NjY2NjcgNTQ0SDM0MS4zMzMzMzNjLTE3LjA2NjY2NyAwLTMyLTE0LjkzMzMzMy0zMi0zMnMxNC45MzMzMzMtMzIgMzItMzJoMzQxLjMzMzMzNGMxNy4wNjY2NjcgMCAzMiAxNC45MzMzMzMgMzIgMzJzLTE0LjkzMzMzMyAzMi0zMiAzMnoiPjwvcGF0aD4KPC9zdmc+)!important;transition:opacity .3s;opacity:0}.map-container me-parent me-epd.minus:hover{opacity:.8}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .lines,.map-container .summary,.map-container .subLines,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller,.map-container .summary{pointer-events:none}.map-container .topiclinks text,.map-container .linkcontroller text,.map-container .summary text{pointer-events:all}.map-container .topiclinks .selected,.map-container .linkcontroller .selected,.map-container .summary .selected{pointer-events:none}.map-container .lines,.map-container .subLines{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.map-container #input-box{position:absolute;top:0;left:0;padding:var(--topic-padding);color:var(--color);background-color:var(--bgcolor);width:max-content;max-width:35em;z-index:11;direction:ltr;-webkit-user-select:auto;user-select:auto;pointer-events:all}.map-container me-tpc>div,.map-container me-tpc>span,.map-container me-tpc>img{pointer-events:none}.map-container me-tpc>img{display:block;margin-bottom:8px;object-fit:cover}.map-container me-tpc>.text{display:inline-block}.map-container .circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#757575;border:2px solid #ffffff;cursor:pointer}.map-container .tags{direction:ltr}.map-container .tags span{display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:1.3em}.map-container .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .icons span{display:inline-block}.map-container .mind-elixir-ghost{position:fixed;top:-100%;left:-100%;box-sizing:content-box;opacity:.5;background-color:#f6f6f6;max-width:200px;width:fit-content;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:8px 16px;border-radius:6px;border:#666666 2px solid}.map-container .selection-area{background:#4f90f22d;border:1px solid #4f90f2}.mind-elixir .context-menu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}.mind-elixir .context-menu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:var(--panel-color);box-shadow:0 12px 15px #0003}.mind-elixir .context-menu .menu-list li{min-width:200px;overflow:hidden;white-space:nowrap;padding:10px 14px;background:var(--panel-bgcolor);border-bottom:1px solid var(--panel-border-color)}.mind-elixir .context-menu .menu-list li a{color:#333;text-decoration:none}.mind-elixir .context-menu .menu-list li.disabled{display:none;color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .context-menu .menu-list li:hover{cursor:pointer;filter:brightness(.9)}.mind-elixir .context-menu .menu-list li:first-child{border-radius:5px 5px 0 0}.mind-elixir .context-menu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}.mind-elixir .context-menu .menu-list li span:last-child{float:right}.mind-elixir .tips{position:absolute;bottom:20px;left:50%;transform:translate(-50%);color:var(--panel-color);font-weight:bolder}.mind-elixir .mobile-menu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}.mind-elixir .mobile-menu *{transition:color .4s,background-color .4s}.mind-elixir .mobile-menu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}.mind-elixir .mobile-menu div a{color:#333;text-decoration:none}.mind-elixir .mobile-menu div.disabled{color:#5e5e5e;background-color:#f7f7f7}.mind-elixir .mobile-menu div.disabled:hover{cursor:default;background-color:#f7f7f7}.mind-elixir .mobile-menu div:hover{cursor:pointer;background-color:#ecf0f1}.mind-elixir-toolbar{font-family:iconfont;position:absolute;color:var(--panel-color);background:var(--panel-bgcolor);padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}.mind-elixir-toolbar svg{display:inline-block}.mind-elixir-toolbar span:active{opacity:.5}.mind-elixir-toolbar.rb{right:20px;bottom:20px}.mind-elixir-toolbar.rb span+span{margin-left:10px}.mind-elixir-toolbar.lt{font-size:20px;left:20px;top:20px}.mind-elixir-toolbar.lt span{display:block}.mind-elixir-toolbar.lt span+span{margin-top:10px}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();(function(n){var e,t,r,o,i,a,s='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="" ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!n.__iconfont__svg__cssinject__){n.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(u){console&&console.log(u)}}function d(){i||(i=!0,r())}e=function(){var u,p,f,h;(h=document.createElement("div")).innerHTML=s,s=null,(f=h.getElementsByTagName("svg")[0])&&(f.setAttribute("aria-hidden","true"),f.style.position="absolute",f.style.width=0,f.style.height=0,f.style.overflow="hidden",u=f,(p=document.body).firstChild?(h=u,(f=p.firstChild).parentNode.insertBefore(h,f)):p.appendChild(u))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(e,0):(t=function(){document.removeEventListener("DOMContentLoaded",t,!1),e()},document.addEventListener("DOMContentLoaded",t,!1)):document.attachEvent&&(r=e,o=n.document,i=!1,(a=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(a,50)}d()})(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,d())})})(window);const Bd=0,n1=1,iy=2,bu=30,gu=8,kB={name:"Latte",palette:["#dd7878","#ea76cb","#8839ef","#e64553","#fe640b","#df8e1d","#40a02b","#209fb5","#1e66f5","#7287fd"],cssVar:{"--main-color":"#444446","--main-bgcolor":"#ffffff","--color":"#777777","--bgcolor":"#f6f6f6","--panel-color":"#444446","--panel-bgcolor":"#ffffff","--panel-border-color":"#eaeaea"}},_B={name:"Dark",palette:["#848FA0","#748BE9","#D2F9FE","#4145A5","#789AFA","#706CF4","#EF987F","#775DD5","#FCEECF","#DA7FBC"],cssVar:{"--main-color":"#ffffff","--main-bgcolor":"#4c4f69","--color":"#cccccc","--bgcolor":"#252526","--panel-color":"#ffffff","--panel-bgcolor":"#2d3748","--panel-border-color":"#696969"}};function u4(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const kge=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),h4=function(n,e){if(e.id===n)return e;if(e.children&&e.children.length){for(let t=0;t<e.children.length;t++){const r=h4(n,e.children[t]);if(r)return r}return null}else return null},Wu=(n,e)=>{if(n.parent=e,n.children)for(let t=0;t<n.children.length;t++)Wu(n.children[t],n)};function EB(n){if(n.id=ay(),n.children)for(let e=0;e<n.children.length;e++)EB(n.children[e])}const _ge=(n,e)=>{let t=Date.now();return function(...r){Date.now()-t>=e&&(n(...r),t=Date.now())}};function PB(n,e,t,r){const o=r-e,i=n-t;let a=Math.atan(Math.abs(o)/Math.abs(i))/3.14*180;i<0&&o>0&&(a=180-a),i<0&&o<0&&(a=180+a),i>0&&o<0&&(a=360-a);const s=15,l=30,d=a+l,u=a-l;return{x1:t+Math.cos(Math.PI*d/180)*s,y1:r-Math.sin(Math.PI*d/180)*s,x2:t+Math.cos(Math.PI*u/180)*s,y2:r-Math.sin(Math.PI*u/180)*s}}function ay(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}const Ege=function(){const n=ay();return{topic:this.newTopicName,id:n}};function Pge(n,e){let t=!0;for(;e.parent;){if(e.parent===n){t=!1;break}e=e.parent}return t}function MB(n){return JSON.parse(JSON.stringify(n,(e,t)=>{if(e!=="parent")return t}))}const Bm=(n,e)=>{let t=0,r=0;for(;e&&e!==n;)t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{offsetLeft:t,offsetTop:r}},ls=(n,e)=>{for(const t in e)n.setAttribute(t,e[t])},FC=n=>n?n.tagName==="ME-TPC":!1,Od={moved:!1,mousedown:!1,onMove(n,e){if(this.mousedown){this.moved=!0;const t=n.movementX,r=n.movementY;e.scrollTo(e.scrollLeft-t,e.scrollTop-r)}},clear(){this.moved=!1,this.mousedown=!1}};function Mge(n){n.map.addEventListener("click",e=>{var t,r;if(e.button!==0)return;if((t=n.helper1)!=null&&t.moved){n.helper1.clear();return}if((r=n.helper2)!=null&&r.moved){n.helper2.clear();return}if(Od.moved){Od.clear();return}n.unselectNode(),n.unselectNodes(),n.unselectSummary(),n.unselectLink();const o=e.target;if(o.tagName==="ME-EPD")n.expandNode(o.previousSibling);else if(n.editable)FC(o)?n.selectNode(o,!1,e):o.tagName==="text"?o.dataset.type==="custom-link"?n.selectLink(o.parentElement):n.selectSummary(o.parentElement):o.className==="circle"||n.hideLinkController&&n.hideLinkController();else return}),n.map.addEventListener("dblclick",e=>{if(e.preventDefault(),!n.editable)return;const t=e.target;FC(t)?n.beginEdit(t):t.tagName==="text"&&(t.dataset.type==="custom-link"?n.editCutsomLinkLabel(t.parentElement):n.editSummary(t.parentElement))}),n.map.addEventListener("mousemove",e=>{e.target.contentEditable!=="true"&&Od.onMove(e,n.container)}),n.map.addEventListener("mousedown",e=>{const t=n.mouseSelectionButton===0?2:0;e.button===t&&e.target.contentEditable!=="true"&&(Od.moved=!1,Od.mousedown=!0)}),n.map.addEventListener("mouseleave",e=>{const t=n.mouseSelectionButton===0?2:0;e.button===t&&Od.clear()}),n.map.addEventListener("mouseup",e=>{const t=n.mouseSelectionButton===0?2:0;e.button===t&&Od.clear()}),n.map.addEventListener("contextmenu",e=>{e.preventDefault()})}const Ige={create(){return{handlers:{},showHandler:function(){console.log(this.handlers)},addListener:function(n,e){this.handlers[n]===void 0&&(this.handlers[n]=[]),this.handlers[n].push(e)},fire:function(n,...e){if(this.handlers[n]instanceof Array){const t=this.handlers[n];for(let r=0;r<t.length;r++)t[r](...e)}},removeListener:function(n,e){if(!this.handlers[n])return;const t=this.handlers[n];if(!e)t.length=0;else if(t.length)for(let r=0;r<t.length;r++)t[r]===e&&this.handlers[n].splice(r,1)}}}},f4=document,Tge=function(){console.time("layout"),this.nodes.innerHTML="";const n=this.createTopic(this.nodeData);g_(n,this.nodeData),n.draggable=!1;const e=f4.createElement("me-root");e.appendChild(n);const t=this.nodeData.children||[];if(this.direction===iy){let r=0,o=0;t.map(i=>{i.direction===Bd?r+=1:i.direction===n1?o+=1:r<=o?(i.direction=Bd,r+=1):(i.direction=n1,o+=1)})}Oge(this,t,e),console.timeEnd("layout")},Oge=function(n,e,t){const r=f4.createElement("me-main");r.className="lhs";const o=f4.createElement("me-main");o.className="rhs";for(let i=0;i<e.length;i++){const a=e[i],{grp:s}=n.createWrapper(a);n.direction===iy?a.direction===Bd?r.appendChild(s):o.appendChild(s):n.direction===Bd?r.appendChild(s):o.appendChild(s)}n.nodes.appendChild(r),n.nodes.appendChild(t),n.nodes.appendChild(o),n.nodes.appendChild(n.lines)},Age=function(n,e){const t=f4.createElement("me-children");for(let r=0;r<e.length;r++){const o=e[r],{grp:i}=n.createWrapper(o);t.appendChild(i)}return t},xc=document,rs=(n,e)=>{const t=(e?e.mindElixirBox:xc).querySelector(`[data-nodeid=me${n}]`);if(!t)throw new Error(`FindEle: Node ${n} not found, maybe it's collapsed.`);return t},g_=function(n,e){if(n.innerHTML="",e.style&&(n.style.color=e.style.color||"",n.style.background=e.style.background||"",n.style.fontSize=e.style.fontSize+"px",n.style.fontWeight=e.style.fontWeight||"normal"),e.branchColor&&(n.style.borderColor=e.branchColor),e.image){const t=e.image;if(t.url&&t.width&&t.height){const r=xc.createElement("img");r.src=t.url,r.style.width=t.width+"px",r.style.height=t.height+"px",n.appendChild(r),n.image=r}else console.warn("image url/width/height are required")}else n.image&&(n.image=void 0);{const t=xc.createElement("span");t.className="text",t.textContent=e.topic,n.appendChild(t),n.text=t}if(e.hyperLink){const t=xc.createElement("a");t.className="hyper-link",t.target="_blank",t.innerText="",t.href=e.hyperLink,n.appendChild(t),n.linkContainer=t}else n.linkContainer&&(n.linkContainer=void 0);if(e.icons&&e.icons.length){const t=xc.createElement("span");t.className="icons",t.innerHTML=e.icons.map(r=>`<span>${u4(r)}</span>`).join(""),n.appendChild(t),n.icons=t}else n.icons&&(n.icons=void 0);if(e.tags&&e.tags.length){const t=xc.createElement("div");t.className="tags",t.innerHTML=e.tags.map(r=>`<span>${u4(r)}</span>`).join(""),n.appendChild(t),n.tags=t}else n.tags&&(n.tags=void 0)},Lge=function(n,e){const t=xc.createElement("me-wrapper"),{p:r,tpc:o}=this.createParent(n);if(t.appendChild(r),!e&&n.children&&n.children.length>0){const i=Vx(n.expanded);if(r.appendChild(i),n.expanded!==!1){const a=Age(this,n.children);t.appendChild(a)}}return{grp:t,top:r,tpc:o}},$ge=function(n){const e=xc.createElement("me-parent"),t=this.createTopic(n);return g_(t,n),e.appendChild(t),{p:e,tpc:t}},jge=function(n){const e=xc.createElement("me-children");return e.append(...n),e},Rge=function(n){const e=xc.createElement("me-tpc");return e.nodeObj=n,e.dataset.nodeid="me"+n.id,e.draggable=this.draggable,e};function IB(n){const e=xc.createRange();e.selectNodeContents(n);const t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))}const Dge=function(n){if(console.time("editTopic"),!n)return;const e=xc.createElement("div"),t=n.text.textContent;n.appendChild(e),e.id="input-box",e.textContent=t,e.contentEditable="true",e.spellcheck=!1,e.style.cssText=`min-width:${n.offsetWidth-8}px;`,this.direction===Bd&&(e.style.right="0"),e.focus(),IB(e),this.bus.fire("operation",{name:"beginEdit",obj:n.nodeObj}),e.addEventListener("keydown",r=>{r.stopPropagation();const o=r.key;if(o==="Enter"||o==="Tab"){if(r.shiftKey)return;r.preventDefault(),e==null||e.blur(),this.map.focus()}}),e.addEventListener("blur",()=>{var r;if(!e)return;const o=n.nodeObj,i=((r=e.textContent)==null?void 0:r.trim())||"";console.log(i),i===""?o.topic=t:o.topic=i,e.remove(),i!==t&&(n.text.textContent=o.topic,this.linkDiv(),this.bus.fire("operation",{name:"finishEdit",obj:o,origin:t}))}),console.timeEnd("editTopic")},Vx=function(n){const e=xc.createElement("me-epd");return e.expanded=n!==!1,e.className=n!==!1?"minus":"",e},f1=document,p1="http://www.w3.org/2000/svg",Nge=function(n,e){const t=f1.createElementNS(p1,"path");return t.setAttribute("d",n),t.setAttribute("stroke",e||"#666"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","3"),t},mv=function(n){const e=f1.createElementNS(p1,"svg");return e.setAttribute("class",n),e.setAttribute("overflow","visible"),e},jO=function(){const n=f1.createElementNS(p1,"line");return n.setAttribute("stroke","#bbb"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","2"),n},zge=function(n,e){const t=f1.createElementNS(p1,"path");return t.setAttribute("d",n),t.setAttribute("stroke",e||"#555"),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","square"),t.setAttribute("stroke-width","2"),t},Bge=function(n,e){const t={stroke:"rgb(235, 95, 82)",fill:"none","stroke-linecap":"cap","stroke-width":"2"},r=f1.createElementNS(p1,"g"),o=f1.createElementNS(p1,"path"),i=f1.createElementNS(p1,"path");return ls(i,{d:e,...t}),ls(o,{d:n,...t,"stroke-dasharray":"8,2"}),r.appendChild(o),r.appendChild(i),r},TB=function(n,e,t){if(console.time("editSummary"),!e)return;const r=document.createElement("div");n.nodes.appendChild(r);const o=e.innerHTML;r.id="input-box",r.textContent=o,r.contentEditable="true",r.spellcheck=!1;const i=e.getAttribute("x")+"px",a=e.getAttribute("y")+"px";r.style.cssText=`min-width:92px;position:absolute;left:${i};top:${a};`;const s=e.getAttribute("text-anchor");s==="end"?r.style.cssText+="transform: translate(-100%, -100%);":s==="middle"?r.style.cssText+="transform: translate(-50%, -100%);":r.style.cssText+="transform: translate(0, -100%);",r.focus(),IB(r),r.addEventListener("keydown",l=>{l.stopPropagation();const d=l.key;if(d==="Enter"||d==="Tab"){if(l.shiftKey)return;l.preventDefault(),r.blur(),n.map.focus()}}),r.addEventListener("blur",()=>{r&&t(r)}),console.timeEnd("editSummary")};let OB=LB;const Hge=function(n){console.time("linkDiv");const e=this.map.querySelector("me-root");this.nodes.style.top=`${1e4-this.nodes.offsetHeight/2}px`,this.nodes.style.left=`${1e4-e.offsetLeft-e.offsetWidth/2}px`;const t=this.map.querySelectorAll("me-main > me-wrapper");this.lines.innerHTML="",OB=this.subLinkStyle===2?Uge:LB;for(let r=0;r<t.length;r++){const o=t[r],i=o.querySelector("me-tpc"),a=o.firstChild,s=o.parentNode.className;let l=e.offsetLeft+e.offsetWidth/2;const d=e.offsetTop+e.offsetHeight/2;let u;const p=this.theme.palette,f=i.nodeObj.branchColor||p[r%p.length],{offsetLeft:h,offsetTop:c}=Bm(this.nodes,a);s==="lhs"?u=h+a.offsetWidth:u=h;const g=c+a.offsetHeight/2;let m="";if(this.mainLinkStyle===2)this.direction===iy&&(s==="lhs"?l=l-e.offsetWidth/6:l=l+e.offsetWidth/6),m=Fge({x1:l,y1:d,x2:u,y2:g});else{const v=(1-Math.abs(g-o.parentElement.offsetTop-o.parentElement.offsetHeight/2)/o.parentElement.offsetHeight)*.25*(e.offsetWidth/2);s==="lhs"?l=l-e.offsetWidth/10-v:l=l+e.offsetWidth/10+v,m=Zge({x1:l,y1:d,x2:u,y2:g})}this.lines.appendChild(Nge(m,f));const b=o.children[0].children[1];if(b&&(b.style.top=(b.parentNode.offsetHeight-b.offsetHeight)/2+"px",s==="lhs"?b.style.left="-10px":b.style.right="-10px"),!(n&&n!==o)&&o.childElementCount){const v=mv("subLines"),w=o.lastChild;w.tagName==="svg"&&w.remove(),o.appendChild(v);const _=o.firstChild,k=o.children[1].children,y=AB(k,_,s,!0);v.appendChild(zge(y,f))}}this.renderCustomLink(),this.renderSummary(),console.timeEnd("linkDiv")},AB=function(n,e,t,r){let o="";const i=e.offsetTop,a=e.offsetLeft,s=e.offsetWidth,l=e.offsetHeight;for(let d=0;d<n.length;d++){const u=n[d],p=u.firstChild,f=p.offsetTop,h=p.offsetLeft,c=p.offsetWidth,g=p.offsetHeight;o+=OB({pT:i,pL:a,pW:s,pH:l,cT:f,cL:h,cW:c,cH:g,direction:t,isFirst:r});const m=p.children[1];if(m){if(m.style.bottom=-(m.offsetHeight/2)+"px",t==="lhs"?m.style.left="10px":t==="rhs"&&(m.style.right="10px"),!m.expanded)continue}else continue;const b=u.children[1].children;b.length>0&&(o+=AB(b,p,t))}return o};function Fge({x1:n,y1:e,x2:t,y2:r}){return`M ${n} ${e} V ${r>e?r-20:r+20} C ${n} ${r} ${n} ${r} ${t>n?n+20:n-20} ${r} H ${t}`}function Zge({x1:n,y1:e,x2:t,y2:r}){return`M ${n} ${e} Q ${n} ${r} ${t} ${r}`}function Uge({pT:n,pL:e,pW:t,pH:r,cT:o,cL:i,cW:a,cH:s,direction:l,isFirst:d}){let u;d?u=n+r/2:u=n+r;const p=o+s;let f=0,h=0,c=0;return l==="lhs"?(f=e+bu,h=i,c=i+a):l==="rhs"&&(f=e+t-bu,h=i+a,c=i),p<u+50&&p>u-50?`M ${f} ${u} H ${c} V ${p} H ${h}`:p>=u?`M ${f} ${u} H ${c} V ${p-gu} A ${gu} ${gu} 0 0 ${f>h?1:0} ${f>h?c-gu:c+gu} ${p} H ${h}`:`M ${f} ${u} H ${c} V ${p+gu} A ${gu} ${gu} 0 0 ${f>h?0:1} ${f>h?c-gu:c+gu} ${p} H ${h}`}function LB({pT:n,pL:e,pW:t,pH:r,cT:o,cL:i,cW:a,cH:s,direction:l,isFirst:d}){let u=0,p=0;d?u=n+r/2:u=n+r;const f=o+s;let h=0,c=0,g=0;const m=Math.min(Math.abs(u-f)/800,1.2)*bu;return l==="lhs"?(g=e,h=g+bu,c=g-bu,p=i+bu,`M ${h} ${u} C ${g} ${u} ${g+m} ${f} ${c} ${f} H ${p}`):(g=e+t,h=g-bu,c=g+bu,p=i+a-bu,`M ${h} ${u} C ${g} ${u} ${g-m} ${f} ${c} ${f} H ${p}`)}const RO={addChild:"",addParent:"",addSibling:"",removeNode:"",focus:"",cancelFocus:"",moveUp:"",moveDown:"",link:"",clickTips:"",summary:""},DO={cn:RO,zh_CN:RO,zh_TW:{addChild:"",addParent:"",addSibling:"",removeNode:"",focus:"",cancelFocus:"",moveUp:"",moveDown:"",link:"",clickTips:"",summary:""},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",summary:"Summary"},ru:{addChild:"  ",addParent:"  ",addSibling:"   ",removeNode:" ",focus:" ",cancelFocus:"  ",moveUp:" ",moveDown:" ",link:"",clickTips:",    ",summary:""},ja:{addChild:"",addParent:"",addSibling:"",removeNode:"",focus:"",cancelFocus:"",moveUp:"",moveDown:"",link:"",clickTips:"",summary:""},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",summary:"Resumo"}};function Wge(n,e){const t=w=>{const _=document.createElement("div");return _.innerText=w,_.className="tips",_},r=(w,_,k)=>{const y=document.createElement("li");return y.id=w,y.innerHTML=`<span>${u4(_)}</span><span>${u4(k)}</span>`,y},o=DO[n.locale]?n.locale:"en",i=DO[o],a=r("cm-add_child",i.addChild,"tab"),s=r("cm-add_parent",i.addParent,""),l=r("cm-add_sibling",i.addSibling,"enter"),d=r("cm-remove_child",i.removeNode,"delete"),u=r("cm-fucus",i.focus,""),p=r("cm-unfucus",i.cancelFocus,""),f=r("cm-up",i.moveUp,"PgUp"),h=r("cm-down",i.moveDown,"Pgdn"),c=r("cm-down",i.link,""),g=r("cm-down",i.summary,""),m=document.createElement("ul");if(m.className="menu-list",m.appendChild(a),m.appendChild(s),m.appendChild(l),m.appendChild(d),(!e||e.focus)&&(m.appendChild(u),m.appendChild(p)),m.appendChild(f),m.appendChild(h),m.appendChild(g),(!e||e.link)&&m.appendChild(c),e&&e.extend)for(let w=0;w<e.extend.length;w++){const _=e.extend[w],k=r(_.name,_.name,_.key||"");m.appendChild(k),k.onclick=y=>{_.onclick(y)}}const b=document.createElement("div");b.className="context-menu",b.appendChild(m),b.hidden=!0,n.container.append(b);let v=!0;n.container.oncontextmenu=function(w){if(w.preventDefault(),!n.editable)return;const _=w.target;if(FC(_)){_.parentElement.tagName==="ME-ROOT"?v=!0:v=!1,v?(u.className="disabled",f.className="disabled",h.className="disabled",s.className="disabled",l.className="disabled",d.className="disabled"):(u.className="",f.className="",h.className="",s.className="",l.className="",d.className=""),n.currentNodes||n.selectNode(_),b.hidden=!1,Od.mousedown&&(Od.mousedown=!1),m.style.top="",m.style.bottom="",m.style.left="",m.style.right="";const k=m.getBoundingClientRect(),y=m.offsetHeight,S=m.offsetWidth,C=w.clientY-k.top,I=w.clientX-k.left;y+C>window.innerHeight?(m.style.top="",m.style.bottom="0px"):(m.style.bottom="",m.style.top=C+15+"px"),S+I>window.innerWidth?(m.style.left="",m.style.right="0px"):(m.style.right="",m.style.left=I+10+"px")}},b.onclick=w=>{w.target===b&&(b.hidden=!0)},a.onclick=()=>{n.addChild(),b.hidden=!0},s.onclick=()=>{n.insertParent(),b.hidden=!0},l.onclick=()=>{v||(n.insertSibling(),b.hidden=!0)},d.onclick=()=>{v||(n.removeNode(),b.hidden=!0)},u.onclick=()=>{v||(n.focusNode(n.currentNode),b.hidden=!0)},p.onclick=()=>{n.cancelFocus(),b.hidden=!0},f.onclick=()=>{v||(n.moveUpNode(),b.hidden=!0)},h.onclick=()=>{v||(n.moveDownNode(),b.hidden=!0)},c.onclick=()=>{b.hidden=!0;const w=n.currentNode,_=t(i.clickTips);n.container.appendChild(_),n.map.addEventListener("click",k=>{k.preventDefault(),_.remove();const y=k.target;y.parentElement.tagName==="ME-PARENT"||y.parentElement.tagName==="ME-ROOT"?n.createLink(w,y):console.log("link cancel")},{once:!0})},g.onclick=()=>{b.hidden=!0,n.createSummary(),n.unselectNodes()}}const Vge=n=>{const e=n.map.querySelectorAll(".lhs>me-wrapper>me-parent>me-tpc");n.selectNode(e[Math.ceil(e.length/2)-1])},Kge=n=>{const e=n.map.querySelectorAll(".rhs>me-wrapper>me-parent>me-tpc");n.selectNode(e[Math.ceil(e.length/2)-1])},NO=n=>{n.selectNode(n.map.querySelector("me-root>me-tpc"))};function Yge(n){const e={13:t=>{t.shiftKey?n.insertBefore():n.insertSibling()},9:()=>{n.addChild()},112:()=>{n.toCenter()},113:()=>{n.beginEdit()},38:t=>{if(t.altKey)n.moveUpNode();else{if(t.metaKey||t.ctrlKey)return n.initSide();n.selectPrevSibling()}},40:t=>{t.altKey?n.moveDownNode():n.selectNextSibling()},37:t=>{var r;if(t.metaKey||t.ctrlKey)return n.initLeft();if(!n.currentNode)return;const o=n.currentNode.nodeObj,i=n.currentNode.offsetParent.offsetParent.parentElement;n.currentNode.nodeObj.root?Vge(n):i.className==="rhs"?(r=o.parent)!=null&&r.root?NO(n):n.selectParent():i.className==="lhs"&&n.selectFirstChild()},39:t=>{var r;if(t.metaKey||t.ctrlKey)return n.initRight();if(!n.currentNode)return;const o=n.currentNode.nodeObj,i=n.currentNode.offsetParent.offsetParent.parentElement;o.root?Kge(n):i.className==="lhs"?(r=o.parent)!=null&&r.root?NO(n):n.selectParent():i.className==="rhs"&&n.selectFirstChild()},33(){n.moveUpNode()},34(){n.moveDownNode()},67:t=>{(t.metaKey||t.ctrlKey)&&(n.waitCopy=n.currentNode)},86:t=>{!n.waitCopy||!n.currentNode||(t.metaKey||t.ctrlKey)&&(n.copyNode(n.waitCopy,n.currentNode),n.waitCopy=null)},187:t=>{if(t.metaKey||t.ctrlKey){if(n.scaleVal>1.6)return;n.scale(n.scaleVal+=.2)}},189:t=>{if(t.metaKey||t.ctrlKey){if(n.scaleVal<.6)return;n.scale(n.scaleVal-=.2)}},48:t=>{(t.metaKey||t.ctrlKey)&&n.scale(1)}};n.map.onkeydown=t=>{if(t.preventDefault(),!!n.editable&&t.target===t.currentTarget)if(t.keyCode===8||t.keyCode===46)n.currentLink?n.removeLink():n.currentSummary?n.removeSummary(n.currentSummary.summaryObj.id):n.currentNode?n.removeNode():n.currentNodes&&n.removeNodes(n.currentNodes);else{const r=e[t.keyCode];r&&r(t)}}}function Gge(n,e){const t=(f,h)=>{const c=document.createElement("div");return c.id=f,c.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${h}"></use>
  </svg>`,c},r=t("cm-add_child","zijiedian"),o=t("cm-add_sibling","tongjijiedian-"),i=t("cm-remove_child","shanchu2"),a=t("cm-up","rising"),s=t("cm-down","falling"),l=t("cm-edit","edit"),d=document.createElement("ul");if(d.className="menu-list",e&&e.extend)for(let f=0;f<e.extend.length;f++){const h=e.extend[f],c=t(h.name,h.name);d.appendChild(c),c.onclick=g=>{h.onclick(g)}}const u=document.createElement("mmenu");u.className="mobile-menu",u.appendChild(r),u.appendChild(o),u.appendChild(i),u.appendChild(a),u.appendChild(s),u.appendChild(l),u.hidden=!0,n.container.append(u);let p=!0;n.bus.addListener("unselectNode",function(){u.hidden=!0}),n.bus.addListener("selectNode",function(f){u.hidden=!1,f.root?p=!0:p=!1}),u.onclick=f=>{f.target===u&&(u.hidden=!0)},r.onclick=()=>{n.addChild()},o.onclick=()=>{p||n.insertSibling()},i.onclick=()=>{p||n.removeNode()},a.onclick=f=>{p||n.moveUpNode()},s.onclick=f=>{p||n.moveDownNode()},l.onclick=f=>{n.beginEdit()}}const ZC=document,Xge=function(n,e){if(!e)return UC(n),n;const t=n.getElementsByClassName("insert-preview"),r=`insert-preview ${e} show`;if(t.length>0)t[0].className=r;else{const o=ZC.createElement("div");o.className=r,n.appendChild(o)}return n},UC=function(n){if(!n)return;const e=n.getElementsByClassName("insert-preview");for(const t of e||[])t.remove()},zO=function(n,e){const t=e.parentElement.parentElement.contains(n);return n&&n.tagName==="ME-TPC"&&n!==e&&!t&&n.nodeObj.root!==!0},qge=function(n){const e=document.createElement("div");return e.className="mind-elixir-ghost",n.map.appendChild(e),e};function Jge(n){let e=null,t=null,r=null;const o=qge(n),i=12;n.map.addEventListener("dragstart",a=>{var s;const l=a.target;if((l==null?void 0:l.tagName)!=="ME-TPC"){a.preventDefault();return}e=l,e.parentElement.parentElement.style.opacity="0.5",o.innerHTML=e.innerHTML,(s=a.dataTransfer)==null||s.setDragImage(o,0,0),Od.clear()}),n.map.addEventListener("dragend",async a=>{if(!e)return;e.parentElement.parentElement.style.opacity="1";const s=a.target;if(s.style.opacity="",!r)return;UC(r);const l=e.nodeObj;switch(t){case"before":n.moveNodeBefore(e,r),n.selectNode(rs(l.id));break;case"after":n.moveNodeAfter(e,r),n.selectNode(rs(l.id));break;case"in":n.moveNode(e,r);break}e=null}),n.map.addEventListener("dragover",_ge(function(a){if(!e)return;UC(r);const s=ZC.elementFromPoint(a.clientX,a.clientY-i);if(zO(s,e)){r=s;const l=s.getBoundingClientRect().y;a.clientY>l+s.clientHeight?t="after":a.clientY>l+s.clientHeight/2&&(t="in")}else{const l=ZC.elementFromPoint(a.clientX,a.clientY+i);if(zO(l,e)){r=l;const d=l.getBoundingClientRect().y;a.clientY<d?t="before":a.clientY<d+l.clientHeight/2&&(t="in")}else t=r=null}r&&Xge(r,t)},200))}const Qge=function(n){return["createSummary","removeSummary","finishEditSummary"].includes(n.name)?{type:"summary",value:n.obj.id}:["createCustomLink","removeCustomLink","finishEditCustomLinkLabel"].includes(n.name)?{type:"customLink",value:n.obj.id}:["removeNodes"].includes(n.name)?{type:"nodes",value:n.objs.map(e=>e.id)}:{type:"node",value:n.obj.id}};function eme(n){let e=[],t=-1,r=n.getData();n.bus.addListener("operation",o=>{if(o.name==="beginEdit")return;e=e.slice(0,t+1);const i=n.getData();e.push({prev:r,currentObject:Qge(o),next:i}),r=i,t=e.length-1}),n.undo=function(){if(t>-1){const o=e[t];r=o.prev,n.refresh(o.prev),o.currentObject.type==="node"&&n.selectNode(rs(o.currentObject.value)),t--,console.log("current",r)}},n.redo=function(){if(t<e.length-1){t++;const o=e[t];r=o.next,n.refresh(o.next),o.currentObject.type==="node"&&n.selectNode(rs(o.currentObject.value))}},n.map.addEventListener("keydown",o=>{(o.metaKey||o.ctrlKey)&&o.shiftKey&&o.key==="Z"?n.redo():(o.metaKey||o.ctrlKey)&&o.key==="z"&&n.undo()})}const r1=(n,e)=>{const t=document.createElement("span");return t.id=n,t.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${e}"></use>
  </svg>`,t};function tme(n){const e=document.createElement("div"),t=r1("fullscreen","full"),r=r1("toCenter","living"),o=r1("zoomout","move"),i=r1("zoomin","add"),a=document.createElement("span");return a.innerText="100%",e.appendChild(t),e.appendChild(r),e.appendChild(o),e.appendChild(i),e.className="mind-elixir-toolbar rb",t.onclick=()=>{n.container.requestFullscreen()},r.onclick=()=>{n.toCenter()},o.onclick=()=>{n.scaleVal<.6||n.scale(n.scaleVal-=.2)},i.onclick=()=>{n.scaleVal>1.6||n.scale(n.scaleVal+=.2)},e}function nme(n){const e=document.createElement("div"),t=r1("tbltl","left"),r=r1("tbltr","right"),o=r1("tblts","side");return e.appendChild(t),e.appendChild(r),e.appendChild(o),e.className="mind-elixir-toolbar lt",t.onclick=()=>{n.initLeft()},r.onclick=()=>{n.initRight()},o.onclick=()=>{n.initSide()},e}function rme(n){n.container.append(tme(n)),n.container.append(nme(n))}/*! @viselect/vanilla v3.3.1 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */var ome=Object.defineProperty,ime=(n,e,t)=>e in n?ome(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$a=(n,e,t)=>(ime(n,typeof e!="symbol"?e+"":e,t),t);class ame{constructor(){$a(this,"_listeners",new Map),$a(this,"on",this.addEventListener),$a(this,"off",this.removeEventListener),$a(this,"emit",this.dispatchEvent)}addEventListener(e,t){const r=this._listeners.get(e)??new Set;return this._listeners.set(e,r),r.add(t),this}removeEventListener(e,t){var r;return(r=this._listeners.get(e))==null||r.delete(t),this}dispatchEvent(e,...t){let r=!0;for(const o of this._listeners.get(e)??[])r=o(...t)!==!1&&r;return r}unbindAllListeners(){this._listeners.clear()}}const BO=(n,e="px")=>typeof n=="number"?n+e:n;function kf({style:n},e,t){if(typeof e=="object")for(const[r,o]of Object.entries(e))o!==void 0&&(n[r]=BO(o));else t!==void 0&&(n[e]=BO(t))}function $B(n){return(e,t,r,o={})=>{e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);for(const i of e)for(const a of t)i[n](a,r,{capture:!1,...o});return[e,t,r,o]}}const K0=$B("addEventListener"),_f=$B("removeEventListener"),j5=n=>{var e;const{clientX:t,clientY:r,target:o}=((e=n.touches)==null?void 0:e[0])??n;return{x:t,y:r,target:o}};function HO(n,e,t="touch"){switch(t){case"center":{const r=e.left+e.width/2,o=e.top+e.height/2;return r>=n.left&&r<=n.right&&o>=n.top&&o<=n.bottom}case"cover":return e.left>=n.left&&e.top>=n.top&&e.right<=n.right&&e.bottom<=n.bottom;case"touch":return n.right>=e.left&&n.left<=e.right&&n.bottom>=e.top&&n.top<=e.bottom}}function Y0(n,e=document){const t=Array.isArray(n)?n:[n];let r=[];for(let o=0,i=t.length;o<i;o++){const a=t[o];typeof a=="string"?r=r.concat(Array.from(e.querySelectorAll(a))):a instanceof Element&&r.push(a)}return r}const sme=()=>matchMedia("(hover: none), (pointer: coarse)").matches,lme=()=>"safari"in window,cme=n=>{let e,t=-1,r=!1;return{next(...o){e=o,r||(r=!0,t=requestAnimationFrame(()=>{n(...e),r=!1}))},cancel(){cancelAnimationFrame(t),r=!1}}},{abs:Vp,max:FO,min:ZO,ceil:UO}=Math;class jB extends ame{constructor(e){var t,r,o,i,a;super(),$a(this,"_options"),$a(this,"_selection",{stored:[],selected:[],touched:[],changed:{added:[],removed:[]}}),$a(this,"_area"),$a(this,"_clippingElement"),$a(this,"_targetElement"),$a(this,"_targetRect"),$a(this,"_selectables",[]),$a(this,"_latestElement"),$a(this,"_areaRect",new DOMRect),$a(this,"_areaLocation",{y1:0,x2:0,y2:0,x1:0}),$a(this,"_singleClick",!0),$a(this,"_frame"),$a(this,"_scrollAvailable",!0),$a(this,"_scrollingActive",!1),$a(this,"_scrollSpeed",{x:0,y:0}),$a(this,"_scrollDelta",{x:0,y:0}),$a(this,"disable",this._bindStartEvents.bind(this,!1)),$a(this,"enable",this._bindStartEvents),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...e,behaviour:{overlap:"invert",intersect:"touch",...e.behaviour,startThreshold:(t=e.behaviour)!=null&&t.startThreshold?typeof e.behaviour.startThreshold=="number"?e.behaviour.startThreshold:{x:10,y:10,...e.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(r=e.behaviour)==null?void 0:r.scrolling,startScrollMargins:{x:0,y:0,...(i=(o=e.behaviour)==null?void 0:o.scrolling)==null?void 0:i.startScrollMargins}}},features:{range:!0,touch:!0,...e.features,singleTap:{allow:!0,intersect:"native",...(a=e.features)==null?void 0:a.singleTap}}};for(const u of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[u]=="function"&&(this[u]=this[u].bind(this));const{document:s,selectionAreaClass:l,selectionContainerClass:d}=this._options;this._area=s.createElement("div"),this._clippingElement=s.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(l),d&&this._clippingElement.classList.add(d),kf(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),kf(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=cme(u=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",u),this._redrawSelectionArea()}),this.enable()}_bindStartEvents(e=!0){const{document:t,features:r}=this._options,o=e?K0:_f;o(t,"mousedown",this._onTapStart),r.touch&&o(t,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(e,t=!1){const{x:r,y:o,target:i}=j5(e),{_options:a}=this,{document:s}=this._options,l=i.getBoundingClientRect(),d=Y0(a.startAreas,a.document),u=Y0(a.boundaries,a.document);this._targetElement=u.find(h=>HO(h.getBoundingClientRect(),l));const p=e.composedPath();if(!this._targetElement||!d.find(h=>p.includes(h))||!u.find(h=>p.includes(h))||!t&&this._emitEvent("beforestart",e)===!1)return;this._areaLocation={x1:r,y1:o,x2:0,y2:0};const f=s.scrollingElement??s.body;this._scrollDelta={x:f.scrollLeft,y:f.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),K0(s,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),K0(s,["mouseup","touchcancel","touchend"],this._onTapStop),K0(s,"scroll",this._onScroll)}_onSingleTap(e){const{singleTap:{intersect:t},range:r}=this._options.features,o=j5(e);let i;if(t==="native")i=o.target;else if(t==="touch"){this.resolveSelectables();const{x:s,y:l}=o;i=this._selectables.find(d=>{const{right:u,left:p,top:f,bottom:h}=d.getBoundingClientRect();return s<u&&s>p&&l<h&&l>f})}if(!i)return;for(this.resolveSelectables();!this._selectables.includes(i);){if(!i.parentElement)return;i=i.parentElement}const{stored:a}=this._selection;if(this._emitEvent("start",e),e.shiftKey&&r&&this._latestElement){const s=this._latestElement,[l,d]=s.compareDocumentPosition(i)&4?[i,s]:[s,i],u=[...this._selectables.filter(p=>p.compareDocumentPosition(l)&4&&p.compareDocumentPosition(d)&2),l,d];this.select(u),this._latestElement=s}else a.includes(i)&&(a.length===1||e.ctrlKey||a.every(s=>this._selection.stored.includes(s)))?this.deselect(i):(this.select(i),this._latestElement=i);this._emitEvent("stop",e)}_delayedTapMove(e){const{container:t,document:r,behaviour:{startThreshold:o}}=this._options,{x1:i,y1:a}=this._areaLocation,{x:s,y:l}=j5(e);if(typeof o=="number"&&Vp(s+l-(i+a))>=o||typeof o=="object"&&Vp(s-i)>=o.x||Vp(l-a)>=o.y){if(_f(r,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",e)===!1){_f(r,["mouseup","touchcancel","touchend"],this._onTapStop);return}K0(r,["mousemove","touchmove"],this._onTapMove,{passive:!1}),kf(this._area,"display","block"),Y0(t,r)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(K0(r,"wheel",this._manualScroll,{passive:!1}),this._selectables=this._selectables.filter(d=>this._targetElement.contains(d))),this._setupSelectionArea(),this._emitEvent("start",e),this._onTapMove(e)}this._handleMoveEvent(e)}_setupSelectionArea(){const{_clippingElement:e,_targetElement:t,_area:r}=this,o=this._targetRect=t.getBoundingClientRect();this._scrollAvailable?(kf(e,{top:o.top,left:o.left,width:o.width,height:o.height}),kf(r,{marginTop:-o.top,marginLeft:-o.left})):(kf(e,{top:0,left:0,width:"100%",height:"100%"}),kf(r,{marginTop:0,marginLeft:0}))}_onTapMove(e){const{x:t,y:r}=j5(e),{_scrollSpeed:o,_areaLocation:i,_options:a,_frame:s}=this,{speedDivider:l}=a.behaviour.scrolling,d=this._targetElement;if(i.x2=t,i.y2=r,this._scrollAvailable&&!this._scrollingActive&&(o.y||o.x)){this._scrollingActive=!0;const u=()=>{if(!o.x&&!o.y){this._scrollingActive=!1;return}const{scrollTop:p,scrollLeft:f}=d;o.y&&(d.scrollTop+=UO(o.y/l),i.y1-=d.scrollTop-p),o.x&&(d.scrollLeft+=UO(o.x/l),i.x1-=d.scrollLeft-f),s.next(e),requestAnimationFrame(u)};requestAnimationFrame(u)}else s.next(e);this._handleMoveEvent(e)}_handleMoveEvent(e){const{features:t}=this._options;(t.touch&&sme()||this._scrollAvailable&&lme())&&e.preventDefault()}_onScroll(){const{_scrollDelta:e,_options:{document:t}}=this,{scrollTop:r,scrollLeft:o}=t.scrollingElement??t.body;this._areaLocation.x1+=e.x-o,this._areaLocation.y1+=e.y-r,e.x=o,e.y=r,this._setupSelectionArea(),this._frame.next(null)}_manualScroll(e){const{manualSpeed:t}=this._options.behaviour.scrolling,r=e.deltaY?e.deltaY>0?1:-1:0,o=e.deltaX?e.deltaX>0?1:-1:0;this._scrollSpeed.y+=r*t,this._scrollSpeed.x+=o*t,this._onTapMove(e),e.preventDefault()}_recalculateSelectionAreaRect(){const{_scrollSpeed:e,_areaLocation:t,_areaRect:r,_targetElement:o,_options:i}=this,{scrollTop:a,scrollHeight:s,clientHeight:l,scrollLeft:d,scrollWidth:u,clientWidth:p}=o,f=this._targetRect,{x1:h,y1:c}=t;let{x2:g,y2:m}=t;const{behaviour:{scrolling:{startScrollMargins:b}}}=i;g<f.left+b.x?(e.x=d?-Vp(f.left-g+b.x):0,g=g<f.left?f.left:g):g>f.right-b.x?(e.x=u-d-p?Vp(f.left+f.width-g-b.x):0,g=g>f.right?f.right:g):e.x=0,m<f.top+b.y?(e.y=a?-Vp(f.top-m+b.y):0,m=m<f.top?f.top:m):m>f.bottom-b.y?(e.y=s-a-l?Vp(f.top+f.height-m-b.y):0,m=m>f.bottom?f.bottom:m):e.y=0;const v=ZO(h,g),w=ZO(c,m),_=FO(h,g),k=FO(c,m);r.x=v,r.y=w,r.width=_-v,r.height=k-w}_redrawSelectionArea(){const{x:e,y:t,width:r,height:o}=this._areaRect,{style:i}=this._area;i.left=`${e}px`,i.top=`${t}px`,i.width=`${r}px`,i.height=`${o}px`}_onTapStop(e,t){var r;const{document:o,features:i}=this._options,{_singleClick:a}=this;_f(o,["mousemove","touchmove"],this._delayedTapMove),_f(o,["touchmove","mousemove"],this._onTapMove),_f(o,["mouseup","touchcancel","touchend"],this._onTapStop),_f(o,"scroll",this._onScroll),this._keepSelection(),e&&a&&i.singleTap.allow?this._onSingleTap(e):!a&&!t&&(this._updateElementSelection(),this._emitEvent("stop",e)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,this._scrollAvailable&&_f(o,"wheel",this._manualScroll,{passive:!0}),this._clippingElement.remove(),(r=this._frame)==null||r.cancel(),kf(this._area,"display","none")}_updateElementSelection(){const{_selectables:e,_options:t,_selection:r,_areaRect:o}=this,{stored:i,selected:a,touched:s}=r,{intersect:l,overlap:d}=t.behaviour,u=d==="invert",p=[],f=[],h=[];for(let g=0;g<e.length;g++){const m=e[g];if(HO(o,m.getBoundingClientRect(),l)){if(a.includes(m))i.includes(m)&&!s.includes(m)&&s.push(m);else if(u&&i.includes(m)){h.push(m);continue}else f.push(m);p.push(m)}}u&&f.push(...i.filter(g=>!a.includes(g)));const c=d==="keep";for(let g=0;g<a.length;g++){const m=a[g];!p.includes(m)&&!(c&&i.includes(m))&&h.push(m)}r.selected=p,r.changed={added:f,removed:h},this._latestElement=void 0}_emitEvent(e,t){return this.emit(e,{event:t,store:this._selection,selection:this})}_keepSelection(){const{_options:e,_selection:t}=this,{selected:r,changed:o,touched:i,stored:a}=t,s=r.filter(l=>!a.includes(l));switch(e.behaviour.overlap){case"drop":{t.stored=[...s,...a.filter(l=>!i.includes(l))];break}case"invert":{t.stored=[...s,...a.filter(l=>!o.removed.includes(l))];break}case"keep":{t.stored=[...a,...r.filter(l=>!a.includes(l))];break}}}trigger(e,t=!0){this._onTapStart(e,t)}resolveSelectables(){this._selectables=Y0(this._options.selectables,this._options.document)}clearSelection(e=!0,t=!1){const{selected:r,stored:o,changed:i}=this._selection;i.added=[],i.removed.push(...r,...e?o:[]),t||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection={stored:e?[]:o,selected:[],touched:[],changed:{added:[],removed:[]}}}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}cancel(e=!1){this._onTapStop(null,!e)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(e,t=!1){const{changed:r,selected:o,stored:i}=this._selection,a=Y0(e,this._options.document).filter(s=>!o.includes(s)&&!i.includes(s));return i.push(...a),o.push(...a),r.added.push(...a),r.removed=[],this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null)),a}deselect(e,t=!1){const{selected:r,stored:o,changed:i}=this._selection,a=Y0(e,this._options.document).filter(s=>r.includes(s)||o.includes(s));a.length&&(this._selection.stored=o.filter(s=>!a.includes(s)),this._selection.selected=r.filter(s=>!a.includes(s)),this._selection.changed.added=[],this._selection.changed.removed.push(...a.filter(s=>!i.removed.includes(s))),this._latestElement=void 0,t||(this._emitEvent("move",null),this._emitEvent("stop",null)))}}$a(jB,"version","3.3.1");function dme(n){const e=new jB({selectables:[".map-container me-tpc"],boundaries:[n.container],container:"body",behaviour:{scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:10,y:10}}}}).on("beforestart",({event:t})=>{if(t.button!==n.mouseSelectionButton||t.target.tagName==="ME-TPC"||t.target.id==="input-box"||t.target.className==="circle")return!1;const r=e.getSelectionArea();return r.style.background="#4f90f22d",r.style.border="1px solid #4f90f2",r.parentElement&&(r.parentElement.style.zIndex="9999"),!0}).on("start",({event:t})=>{!t.ctrlKey&&!t.metaKey&&(n.unselectNode(),n.unselectNodes(),n.unselectSummary(),n.unselectLink(),e.clearSelection(!0,!0))}).on("move",({store:{changed:{added:t,removed:r}}})=>{Od.moved=!0;for(const o of t)o.classList.add("selected");for(const o of r)o.classList.remove("selected")}).on("stop",({store:{stored:t}})=>{n.selectNodes(t)});n.selection=e}const ume=function(n,e=!0){this.theme=n;const t=this.theme.cssVar,r=Object.keys(t);for(let o=0;o<r.length;o++){const i=r[o];this.mindElixirBox.style.setProperty(i,t[i])}e&&this.refresh()};function RB(n){return{nodeData:n.isFocusMode?n.nodeDataBackup:n.nodeData,linkData:n.linkData,summaries:n.summaries,direction:n.direction,theme:n.theme}}const hme=function(n,e,t){if(n){if(console.time("selectNode"),typeof n=="string"){const r=rs(n);return r?this.selectNode(r):void 0}this.currentNode&&(this.currentNode.className=""),n.className="selected",n.scrollIntoView({block:"nearest",inline:"nearest"}),this.currentNode=n,e?this.bus.fire("selectNewNode",n.nodeObj):this.bus.fire("selectNode",n.nodeObj,t),console.timeEnd("selectNode")}},fme=function(){this.currentNode&&(this.currentNode.className=""),this.currentNode=null,this.bus.fire("unselectNode")},pme=function(n){if(n){console.time("selectNodes");for(const e of n)e.className="selected";this.currentNodes=n,this.bus.fire("selectNodes",n.map(e=>e.nodeObj)),console.timeEnd("selectNodes")}},gme=function(){if(this.currentNodes)for(const n of this.currentNodes)n.classList.remove("selected");this.currentNodes=null,this.bus.fire("unselectNodes")},mme=function(){if(!this.currentNode||this.currentNode.dataset.nodeid==="meroot")return!1;const n=this.currentNode.parentElement.parentElement.nextSibling;let e;if(n)e=n.firstChild.firstChild;else return!1;return this.selectNode(e),!0},vme=function(){if(!this.currentNode||this.currentNode.dataset.nodeid==="meroot")return!1;const n=this.currentNode.parentElement.parentElement.previousSibling;let e;if(n)e=n.firstChild.firstChild;else return!1;return this.selectNode(e),!0},bme=function(){if(!this.currentNode)return;const n=this.currentNode.parentElement.nextSibling;if(n&&n.firstChild){const e=n.firstChild.firstChild.firstChild;this.selectNode(e)}},yme=function(){if(!this.currentNode||this.currentNode.dataset.nodeid==="meroot")return;const n=this.currentNode.parentElement.parentElement.parentElement.previousSibling;if(n){const e=n.firstChild;this.selectNode(e)}},xme=function(){const n=RB(this);return JSON.stringify(n,(e,t)=>{if(!(e==="parent"&&typeof t!="string"))return t})},wme=function(){return JSON.parse(this.getDataString())},Cme=function(){const n=RB(this).nodeData;let e="# "+n.topic+`

`;function t(r,o){for(let i=0;i<r.length;i++)o<=6?e+="".padStart(o,"#")+" "+r[i].topic+`

`:e+="".padStart(o-7,"	")+"- "+r[i].topic+`
`,r[i].children&&t(r[i].children||[],o+1)}return t(n.children||[],2),e},Sme=function(){this.editable=!0},kme=function(){this.editable=!1},_me=function(n){this.scaleVal=n,this.map.style.transform="scale("+n+")"},Eme=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},Pme=function(n){n(this)},Mme=function(n){n.nodeObj.root||(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=n.nodeObj,this.nodeData.root=!0,this.initRight(),this.toCenter())},Ime=function(){this.isFocusMode=!1,this.tempDirection!==null&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.refresh(),this.toCenter())},Tme=function(){this.direction=0,this.refresh()},Ome=function(){this.direction=1,this.refresh()},Ame=function(){this.direction=2,this.refresh()},Lme=function(n){this.locale=n,this.refresh()},$me=function(n,e){const t=n.nodeObj;typeof e=="boolean"?t.expanded=e:t.expanded!==!1?t.expanded=!1:t.expanded=!0,this.layout(),this.linkDiv(),this.bus.fire("expandNode",t)},jme=function(n){n&&(n=JSON.parse(JSON.stringify(n)),this.nodeData=n.nodeData,this.linkData=n.linkData||{},this.summaries=n.summaries||[]),Wu(this.nodeData),this.layout(),this.linkDiv()},Rme=Object.freeze(Object.defineProperty({__proto__:null,cancelFocus:Ime,disableEdit:kme,enableEdit:Sme,expandNode:$me,focusNode:Mme,getData:wme,getDataMd:Cme,getDataString:xme,initLeft:Tme,initRight:Ome,initSide:Ame,install:Pme,refresh:jme,scale:_me,selectFirstChild:bme,selectNextSibling:mme,selectNode:hme,selectNodes:pme,selectParent:yme,selectPrevSibling:vme,setLocale:Lme,toCenter:Eme,unselectNode:fme,unselectNodes:gme},Symbol.toStringTag,{value:"Module"})),yp=n=>{var e;const t=(e=n.parent)==null?void 0:e.children,r=t.indexOf(n);return{siblings:t,index:r}};function Dme(n){const{siblings:e,index:t}=yp(n),r=e[t];t===0?(e[t]=e[e.length-1],e[e.length-1]=r):(e[t]=e[t-1],e[t-1]=r)}function Nme(n){const{siblings:e,index:t}=yp(n),r=e[t];t===e.length-1?(e[t]=e[0],e[0]=r):(e[t]=e[t+1],e[t+1]=r)}function sy(n){const{siblings:e,index:t}=yp(n);return e.splice(t,1),e.length}function zme(n,e){const{siblings:t,index:r}=yp(n);t.splice(r+1,0,e)}function Bme(n,e){const{siblings:t,index:r}=yp(n);t.splice(r,0,e)}function Hme(n,e){const{siblings:t,index:r}=yp(n);t[r]=e,e.children=[n]}function Fme(n,e){sy(n),e.children?e.children.push(n):e.children=[n]}function Zme(n,e){n.direction!==void 0&&(n.direction=e.direction),sy(n);const{siblings:t,index:r}=yp(e);t.splice(r,0,n)}function Ume(n,e){n.direction!==void 0&&(n.direction=e.direction),sy(n);const{siblings:t,index:r}=yp(e);t.splice(r+1,0,n)}const DB=function(n,e){var t,r;if(n===Bd)return Bd;if(n===n1)return n1;if(n===iy){const o=((t=document.querySelector(".lhs"))==null?void 0:t.childElementCount)||0,i=((r=document.querySelector(".rhs"))==null?void 0:r.childElementCount)||0;return o<=i?(e.direction=Bd,Bd):(e.direction=n1,n1)}},NB=function(n,e){var t,r;if(!n)return null;const o=n.nodeObj;o.expanded===!1&&(this.expandNode(n,!0),n=rs(o.id));const i=e||this.generateNewObj();o.children?o.children.push(i):o.children=[i],Wu(this.nodeData);const a=n.parentElement,{grp:s,top:l}=this.createWrapper(i);if(a.tagName==="ME-PARENT"){if(a.children[1])a.nextSibling.appendChild(s);else{const d=this.createChildren([s]);a.appendChild(Vx(!0)),a.insertAdjacentElement("afterend",d)}this.linkDiv(s.offsetParent)}else a.tagName==="ME-ROOT"&&(DB(this.direction,i)===Bd?(t=document.querySelector(".lhs"))==null||t.appendChild(s):(r=document.querySelector(".rhs"))==null||r.appendChild(s),this.linkDiv());return{newTop:l,newNodeObj:i}},zB=function(n,e){const t=n.parentNode;if(e===0){const r=t.parentNode.parentNode;r.tagName!=="ME-MAIN"&&r.previousSibling.children[1].remove()}t.parentNode.remove()},Kx=function(n){const e=n.parentElement.parentElement.lastElementChild;(e==null?void 0:e.tagName)==="svg"&&(e==null||e.remove())},Wme=function(n,e){console.log(e);const t=n.nodeObj,r=MB(t);r.style&&e.style&&(e.style=Object.assign(r.style,e.style));const o=Object.assign(t,e);g_(n,o),this.linkDiv(),this.bus.fire("operation",{name:"reshapeNode",obj:o,origin:r})},Vme=function(n,e){var t,r,o;const i=n||this.currentNode;if(!i)return;const a=i.nodeObj;if(a.root===!0){this.addChild();return}else if(((t=a.parent)==null?void 0:t.root)===!0&&((o=(r=a.parent)==null?void 0:r.children)==null?void 0:o.length)===1){this.addChild(rs(a.parent.id));return}const s=e||this.generateNewObj();zme(a,s),Wu(this.nodeData);const l=i.parentElement;console.time("insertSibling_DOM");const{grp:d,top:u}=this.createWrapper(s);l.parentNode.parentNode.insertBefore(d,l.parentNode.nextSibling),this.linkDiv(d.offsetParent),e||this.editTopic(u.firstChild),this.selectNode(u.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",obj:s})},Kme=function(n,e){const t=n||this.currentNode;if(!t)return;const r=t.nodeObj;if(r.root===!0){this.addChild();return}const o=e||this.generateNewObj();Bme(r,o),Wu(this.nodeData);const i=t.parentElement;console.time("insertSibling_DOM");const{grp:a,top:s}=this.createWrapper(o);i.parentNode.parentNode.insertBefore(a,i.parentNode),this.linkDiv(a.offsetParent),e||this.editTopic(s.firstChild),this.selectNode(s.firstChild,!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertBefore",obj:o})},Yme=function(n,e){const t=n||this.currentNode;if(!t)return;Kx(t);const r=t.nodeObj;if(r.root===!0)return;const o=e||this.generateNewObj();Hme(r,o),Wu(this.nodeData);const i=t.parentElement.parentElement;console.time("insertParent_DOM");const{grp:a,top:s}=this.createWrapper(o,!0);s.appendChild(Vx(!0)),i.insertAdjacentElement("afterend",a);const l=this.createChildren([i]);s.insertAdjacentElement("afterend",l),this.linkDiv(),e||this.editTopic(s.firstChild),this.selectNode(s.firstChild,!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:o})},Gme=function(n,e){console.time("addChild");const t=n||this.currentNode;if(!t)return;const r=NB.call(this,t,e);if(!r)return;const{newTop:o,newNodeObj:i}=r;this.bus.fire("operation",{name:"addChild",obj:i}),console.timeEnd("addChild"),e||this.editTopic(o.firstChild),this.selectNode(o.firstChild,!0)},Xme=function(n,e){console.time("copyNode");const t=MB(n.nodeObj);EB(t);const r=NB.call(this,e,t);if(!r)return;const{newNodeObj:o}=r;console.timeEnd("copyNode"),this.bus.fire("operation",{name:"copyNode",obj:o})},qme=function(n){const e=n||this.currentNode;if(!e)return;const t=e.nodeObj;Dme(t);const r=e.parentNode.parentNode;r.parentNode.insertBefore(r,r.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:t})},Jme=function(n){const e=n||this.currentNode;if(!e)return;const t=e.nodeObj;Nme(t);const r=e.parentNode.parentNode;r.nextSibling?r.nextSibling.insertAdjacentElement("afterend",r):r.parentNode.prepend(r),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:t})},Qme=function(n){var e;const t=n||this.currentNode;if(!t)return;const r=t.nodeObj;if(r.root===!0)throw new Error("Can not remove root node");const o=r.parent.children,i=o.findIndex(s=>s===r),a=sy(r);if(zB(t,a),o.length!==0){const s=o[i]||o[i-1];this.selectNode(rs(s.id))}else this.selectNode(rs(r.parent.id));this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:r,originIndex:i,originParentId:(e=r==null?void 0:r.parent)==null?void 0:e.id})},e2e=function(n){for(const e of n){const t=e.nodeObj;if(t.root===!0)continue;const r=sy(t);zB(e,r)}this.linkDiv(),this.bus.fire("operation",{name:"removeNodes",objs:n.map(e=>e.nodeObj)})},t2e=function(n,e){var t;const r=n.nodeObj,o=e.nodeObj,i=(t=r==null?void 0:r.parent)==null?void 0:t.id;if(o.expanded===!1&&(this.expandNode(e,!0),n=rs(r.id),e=rs(o.id)),!Pge(r,o)){console.warn("Invalid move");return}console.time("moveNode"),Fme(r,o),Wu(this.nodeData);const a=n.parentElement,s=e.parentElement;if(s.tagName==="ME-PARENT")if(Kx(n),s.children[1])s.nextSibling.appendChild(a.parentElement);else{const l=this.createChildren([a.parentElement]);s.appendChild(Vx(!0)),s.parentElement.insertBefore(l,s.nextSibling)}else s.tagName==="ME-ROOT"&&(DB(this.direction,r),s.nextSibling.appendChild(a.parentElement));this.linkDiv(),this.bus.fire("operation",{name:"moveNode",obj:r,toObj:o,originParentId:i}),console.timeEnd("moveNode")},n2e=function(n,e){var t;const r=n.nodeObj,o=e.nodeObj,i=(t=r.parent)==null?void 0:t.id;Zme(r,o),Wu(this.nodeData),Kx(n);const a=n.parentElement.parentNode;e.parentElement.parentNode.insertAdjacentElement("beforebegin",a),this.linkDiv(),this.bus.fire("operation",{name:"moveNodeBefore",obj:r,toObj:o,originParentId:i})},r2e=function(n,e){var t;const r=n.nodeObj,o=e.nodeObj,i=(t=r.parent)==null?void 0:t.id;Ume(r,o),Wu(this.nodeData),Kx(n);const a=n.parentElement.parentNode;e.parentElement.parentNode.insertAdjacentElement("afterend",a),this.linkDiv(),this.bus.fire("operation",{name:"moveNodeAfter",obj:r,toObj:o,originParentId:i})},o2e=function(n){const e=n||this.currentNode;e&&this.editTopic(e)},i2e=function(n,e){n.text.textContent=e,n.nodeObj.topic=e,this.linkDiv()},BB=Object.freeze(Object.defineProperty({__proto__:null,addChild:Gme,beginEdit:o2e,copyNode:Xme,insertBefore:Kme,insertParent:Yme,insertSibling:Vme,moveDownNode:Jme,moveNode:t2e,moveNodeAfter:r2e,moveNodeBefore:n2e,moveUpNode:qme,removeNode:Qme,removeNodes:e2e,reshapeNode:Wme,setNodeTopic:i2e},Symbol.toStringTag,{value:"Module"})),a2e=function(n){return{dom:n,moved:!1,mousedown:!1,handleMouseMove(e){this.mousedown&&(this.moved=!0,this.cb&&this.cb(e.movementX,e.movementY))},handleMouseDown(e){e.button===0&&(this.mousedown=!0)},handleClear(e){this.mousedown=!1},cb:null,init(e,t){this.cb=t,this.handleClear=this.handleClear.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("mouseleave",this.handleClear),e.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},destory(e){e.removeEventListener("mousemove",this.handleMouseMove),e.removeEventListener("mouseleave",this.handleClear),e.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},clear(){this.moved=!1,this.mousedown=!1}}},WO={create:a2e};function p4(n,e,t){const{offsetLeft:r,offsetTop:o}=Bm(n.nodes,e),i=e.offsetWidth,a=e.offsetHeight,s=r+i/2,l=o+a/2,d=s+t.x,u=l+t.y;return{w:i,h:a,cx:s,cy:l,ctrlX:d,ctrlY:u}}function yg(n){let e,t;const r=(n.cy-n.ctrlY)/(n.ctrlX-n.cx);return r>n.h/n.w||r<-n.h/n.w?n.cy-n.ctrlY<0?(e=n.cx-n.h/2/r,t=n.cy+n.h/2):(e=n.cx+n.h/2/r,t=n.cy-n.h/2):n.cx-n.ctrlX<0?(e=n.cx+n.w/2,t=n.cy-n.w*r/2):(e=n.cx-n.w/2,t=n.cy+n.w*r/2),{x:e,y:t}}const s2e=function(n,e,t,r){const o=document.createElementNS("http://www.w3.org/2000/svg","text");return ls(o,{"text-anchor":"middle",x:e+"",y:t+"",fill:r||"#666"}),o.dataset.type="custom-link",o.innerHTML=n,o},l2e=function(n,e,t,r){if(!n||!e)return;const o=performance.now(),i=p4(this,n,t.delta1),a=p4(this,e,t.delta2),{x:s,y:l}=yg(i),{ctrlX:d,ctrlY:u}=i,{ctrlX:p,ctrlY:f}=a,{x:h,y:c}=yg(a),g=PB(p,f,h,c),m=Bge(`M ${s} ${l} C ${d} ${u} ${p} ${f} ${h} ${c}`,`M ${g.x1} ${g.y1} L ${h} ${c} L ${g.x2} ${g.y2}`),b=s/8+d*3/8+p*3/8+h/8,v=l/8+u*3/8+f*3/8+c/8,w=s2e(t.label,b,v,this.theme.cssVar["--color"]);m.appendChild(w),m.linkObj=t,m.dataset.linkid=t.id,this.linkSvgGroup.appendChild(m),r||(this.linkData[t.id]=t,this.currentLink=m,this.showLinkController(t,i,a));const _=performance.now();console.log(`DrawCustomLink Execution time: ${_-o} ms`)},c2e=function(n,e){const t={id:ay(),label:"Custom Link",from:n.nodeObj.id,to:e.nodeObj.id,delta1:{x:0,y:-200},delta2:{x:0,y:-200}};this.drawCustomLink(n,e,t),this.bus.fire("operation",{name:"createCustomLink",obj:t})},d2e=function(n){let e;if(n?e=n:e=this.currentLink,!e)return;this.hideLinkController();const t=e.linkObj.id;delete this.linkData[t],e.remove(),this.bus.fire("operation",{name:"removeCustomLink",obj:{id:t}})},u2e=function(n){this.currentLink=n;const e=n.linkObj,t=rs(e.from),r=rs(e.to),o=p4(this,t,e.delta1),i=p4(this,r,e.delta2);this.showLinkController(e,o,i)},h2e=function(){this.currentLink=null,this.hideLinkController()},f2e=function(){this.linkController.style.display="none",this.P2.style.display="none",this.P3.style.display="none"},p2e=function(n,e,t){var r;this.linkController.style.display="initial",this.P2.style.display="initial",this.P3.style.display="initial",this.nodes.appendChild(this.linkController),this.nodes.appendChild(this.P2),this.nodes.appendChild(this.P3);let{x:o,y:i}=yg(e),{ctrlX:a,ctrlY:s}=e,{ctrlX:l,ctrlY:d}=t,{x:u,y:p}=yg(t);this.P2.style.cssText=`top:${s}px;left:${a}px;`,this.P3.style.cssText=`top:${d}px;left:${l}px;`,ls(this.line1,{x1:o+"",y1:i+"",x2:a+"",y2:s+""}),ls(this.line2,{x1:l+"",y1:d+"",x2:u+"",y2:p+""}),this.helper1&&(this.helper1.destory(this.map),(r=this.helper2)==null||r.destory(this.map)),this.helper1=WO.create(this.P2),this.helper2=WO.create(this.P3),this.helper1.init(this.map,(f,h)=>{var c;a=a+f/this.scaleVal,s=s+h/this.scaleVal;const g=yg({...e,ctrlX:a,ctrlY:s});o=g.x,i=g.y;const m=o/8+a*3/8+l*3/8+u/8,b=i/8+s*3/8+d*3/8+p/8;this.P2.style.top=s+"px",this.P2.style.left=a+"px",(c=this.currentLink)==null||c.children[0].setAttribute("d",`M ${o} ${i} C ${a} ${s} ${l} ${d} ${u} ${p}`),ls(this.currentLink.children[2],{x:m+"",y:b+""}),ls(this.line1,{x1:o+"",y1:i+"",x2:a+"",y2:s+""}),n.delta1.x=a-e.cx,n.delta1.y=s-e.cy}),this.helper2.init(this.map,(f,h)=>{var c,g;l=l+f/this.scaleVal,d=d+h/this.scaleVal;const m=yg({...t,ctrlX:l,ctrlY:d});u=m.x,p=m.y;const b=o/8+a*3/8+l*3/8+u/8,v=i/8+s*3/8+d*3/8+p/8,w=PB(l,d,u,p);this.P3.style.top=d+"px",this.P3.style.left=l+"px",(c=this.currentLink)==null||c.children[0].setAttribute("d",`M ${o} ${i} C ${a} ${s} ${l} ${d} ${u} ${p}`),(g=this.currentLink)==null||g.children[1].setAttribute("d",`M ${w.x1} ${w.y1} L ${u} ${p} L ${w.x2} ${w.y2}`),ls(this.currentLink.children[2],{x:b+"",y:v+""}),ls(this.line2,{x1:l+"",y1:d+"",x2:u+"",y2:p+""}),n.delta2.x=l-t.cx,n.delta2.y=d-t.cy})};function g2e(){this.linkSvgGroup.innerHTML="";for(const n in this.linkData){const e=this.linkData[n];try{this.drawCustomLink(rs(e.from),rs(e.to),e,!0)}catch{console.warn("Node may not be expanded")}}this.nodes.appendChild(this.linkSvgGroup)}function m2e(n){if(console.time("editSummary"),!n)return;const e=n.children[2];console.log(e,n),TB(this,e,t=>{var r;const o=n.linkObj,i=((r=t.textContent)==null?void 0:r.trim())||"";i===""?o.label=origin:o.label=i,t.remove(),i!==origin&&(e.innerHTML=o.label,this.linkDiv(),this.bus.fire("operation",{name:"finishEditCustomLinkLabel",obj:o}))}),console.timeEnd("editSummary")}function v2e(){for(const n in this.linkData){const e=this.linkData[n];(!h4(e.from,this.nodeData)||!h4(e.to,this.nodeData))&&delete this.linkData[e.id]}}const b2e=Object.freeze(Object.defineProperty({__proto__:null,createLink:c2e,drawCustomLink:l2e,editCutsomLinkLabel:m2e,hideLinkController:f2e,removeLink:d2e,renderCustomLink:g2e,selectLink:u2e,showLinkController:p2e,tidyCustomLink:v2e,unselectLink:h2e},Symbol.toStringTag,{value:"Module"})),y2e=function(n){var e,t;if(n.length===0)throw new Error("No selected node.");if(n.length===1){const u=n[0].nodeObj,p=n[0].nodeObj.parent;if(!p)throw new Error("Can not select root node.");const f=p.children.findIndex(h=>u===h);return{parent:p.id,start:f,end:f}}let r=0;const o=n.map(u=>{let p=u.nodeObj;const f=[];for(;p.parent;){const h=p.parent,c=h.children,g=c==null?void 0:c.indexOf(p);p=h,f.unshift({node:p,index:g})}return f.length>r&&(r=f.length),f});let i=0;e:for(;i<r;i++){const u=(e=o[0][i])==null?void 0:e.node;for(let p=1;p<o.length;p++)if(((t=o[p][i])==null?void 0:t.node)!==u)break e}if(!i)throw new Error("Can not select root node.");const a=o.map(u=>u[i-1].index).sort(),s=a[0]||0,l=a[a.length-1]||0,d=o[0][i-1].node;if(d.root)throw new Error("Please select nodes in the same main topic.");return{parent:d.id,start:s,end:l}},x2e=function(n){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.setAttribute("id",n),e},VO=function(n,e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return ls(t,{d:n,stroke:e||"#666",fill:"none","stroke-linecap":"round","stroke-width":"2"}),t},KO=function(n,e,t,r,o){const i=document.createElementNS("http://www.w3.org/2000/svg","text");return ls(i,{"text-anchor":r,x:e+"",y:t+"",fill:o||"#666"}),i.innerHTML=n,i},w2e=n=>rs(n).parentElement.parentElement,C2e=function({parent:n,start:e}){var t,r;const o=rs(n),i=o.nodeObj;let a;return i.root===!0?a=(t=rs(i.children[e].id).closest("me-main"))==null?void 0:t.className:a=(r=o.closest("me-main"))==null?void 0:r.className,a},HB=function(n,e){var t;const{id:r,text:o,parent:i,start:a,end:s}=e,l=n.nodes,d=rs(i).nodeObj,u=C2e(e);let p=1/0,f=0,h=0,c=0;for(let y=a;y<=s;y++){const S=(t=d.children)==null?void 0:t[y];if(!S)return console.warn("Child not found"),n.removeSummary(r),null;const C=w2e(S.id),{offsetLeft:I,offsetTop:A}=Bm(l,C);y===a&&(h=A),y===s&&(c=A+C.offsetHeight),I<p&&(p=I),C.offsetWidth+I>f&&(f=C.offsetWidth+I)}let g,m;const b=h+10,v=c+10,w=(b+v)/2,_=n.theme.cssVar["--color"];u==="lhs"?(g=VO(`M ${p+10} ${b} c -5 0 -10 5 -10 10 L ${p} ${v-10} c 0 5 5 10 10 10 M ${p} ${w} h -10`,_),m=KO(o,p-20,w+6,"end",_)):(g=VO(`M ${f-10} ${b} c 5 0 10 5 10 10 L ${f} ${v-10} c 0 5 -5 10 -10 10 M ${f} ${w} h 10`,_),m=KO(o,f+20,w+6,"start",_));const k=x2e("s-"+r);return k.appendChild(g),k.appendChild(m),k.summaryObj=e,n.summarySvg.appendChild(k),k},S2e=function(){let n=[];this.currentNode?n=[this.currentNode]:this.currentNodes&&(n=this.currentNodes);const{parent:e,start:t,end:r}=y2e(n),o={id:ay(),parent:e,start:t,end:r,text:"summary"},i=HB(this,o);this.summaries.push(o),this.editSummary(i),this.bus.fire("operation",{name:"createSummary",obj:o})},k2e=function(n){var e;const t=this.summaries.findIndex(r=>r.id===n);t>-1&&(this.summaries.splice(t,1),(e=document.querySelector("#s-"+n))==null||e.remove()),this.bus.fire("operation",{name:"removeSummary",obj:{id:n}})},_2e=function(n){const e=n.children[1].getBBox(),t=6,r=3,o=document.createElementNS("http://www.w3.org/2000/svg","rect");ls(o,{x:e.x-t+"",y:e.y-t+"",width:e.width+t*2+"",height:e.height+t*2+"",rx:r+"",stroke:this.theme.cssVar["--selected"]||"#4dc4ff","stroke-width":"2",fill:"none"}),o.classList.add("selected"),n.appendChild(o),this.currentSummary=n},E2e=function(){var n,e;(e=(n=this.currentSummary)==null?void 0:n.querySelector("rect"))==null||e.remove(),this.currentSummary=null},P2e=function(){this.summarySvg.innerHTML="",this.summaries.forEach(n=>{try{HB(this,n)}catch{console.warn("Node may not be expanded")}}),this.nodes.insertAdjacentElement("beforeend",this.summarySvg)},M2e=function(n){if(console.time("editSummary"),!n)return;const e=n.childNodes[1];TB(this,e,t=>{var r;const o=n.summaryObj,i=((r=t.textContent)==null?void 0:r.trim())||"";i===""?o.text=origin:o.text=i,t.remove(),i!==origin&&(e.innerHTML=o.text,this.linkDiv(),this.bus.fire("operation",{name:"finishEditSummary",obj:o}))}),console.timeEnd("editSummary")},I2e=Object.freeze(Object.defineProperty({__proto__:null,createSummary:S2e,editSummary:M2e,removeSummary:k2e,renderSummary:P2e,selectSummary:_2e,unselectSummary:E2e},Symbol.toStringTag,{value:"Module"}));function T2e(n,e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");return ls(t,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",height:n,width:e}),t}function O2e(n,e){return(parseInt(n)-parseInt(e))/2}function A2e(n,e,t,r){const o=document.createElementNS("http://www.w3.org/2000/svg","g");let i="";return n.text?i=n.text.textContent:i=n.childNodes[0].textContent,i.split(`
`).forEach((a,s)=>{const l=document.createElementNS("http://www.w3.org/2000/svg","text");ls(l,{x:t+parseInt(e.paddingLeft)+"",y:r+parseInt(e.paddingTop)+O2e(e.lineHeight,e.fontSize)*(s+1)+parseFloat(e.fontSize)*(s+1)+"","text-anchor":"start","font-family":e.fontFamily,"font-size":`${e.fontSize}`,"font-weight":`${e.fontWeight}`,fill:`${e.color}`}),l.innerHTML=a,o.appendChild(l)}),o}function L2e(n,e,t,r){let o="";n.text?o=n.text.textContent:o=n.childNodes[0].textContent;const i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");ls(i,{x:t+parseInt(e.paddingLeft)+"",y:r+parseInt(e.paddingTop)+"",width:e.width,height:e.height});const a=document.createElement("div");return ls(a,{xmlns:"http://www.w3.org/1999/xhtml",style:`font-family: ${e.fontFamily}; font-size: ${e.fontSize}; font-weight: ${e.fontWeight}; color: ${e.color}; white-space: pre-wrap;`}),a.innerHTML=o,i.appendChild(a),i}function a8(n,e,t=!1){const r=getComputedStyle(e),{offsetLeft:o,offsetTop:i}=Bm(n.nodes,e),a=document.createElementNS("http://www.w3.org/2000/svg","rect");ls(a,{x:o+"",y:i+"",rx:r.borderRadius,ry:r.borderRadius,width:r.width,height:r.height,fill:r.backgroundColor,stroke:r.borderColor,"stroke-width":r.borderWidth});const s=document.createElementNS("http://www.w3.org/2000/svg","g");s.appendChild(a);let l;return t?l=L2e(e,r,o,i):l=A2e(e,r,o,i),s.appendChild(l),s}function $2e(n,e){const t=getComputedStyle(e),{offsetLeft:r,offsetTop:o}=Bm(n.nodes,e),i=document.createElementNS("http://www.w3.org/2000/svg","a"),a=document.createElementNS("http://www.w3.org/2000/svg","text");return ls(a,{x:r+"",y:o+parseInt(t.fontSize)+"","text-anchor":"start","font-family":t.fontFamily,"font-size":`${t.fontSize}`,"font-weight":`${t.fontWeight}`,fill:`${t.color}`}),a.innerHTML=e.textContent,i.appendChild(a),i.setAttribute("href",e.href),i}const R5=100,j2e='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',FB=(n,e=!1)=>{var t,r,o;const i=n.nodes,a=i.offsetHeight+R5*2,s=i.offsetWidth+R5*2,l=T2e(a+"px",s+"px"),d=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=document.createElementNS("http://www.w3.org/2000/svg","rect");ls(u,{x:"0",y:"0",width:`${s}`,height:`${a}`,fill:n.theme.cssVar["--bgcolor"]}),l.appendChild(u),i.querySelectorAll(".subLines").forEach(c=>{const g=c.cloneNode(!0),{offsetLeft:m,offsetTop:b}=Bm(i,c.parentElement);g.setAttribute("x",`${m}`),g.setAttribute("y",`${b}`),d.appendChild(g)});const p=(t=i.querySelector(".lines"))==null?void 0:t.cloneNode(!0);p&&d.appendChild(p);const f=(r=i.querySelector(".topiclinks"))==null?void 0:r.cloneNode(!0);f&&d.appendChild(f);const h=(o=i.querySelector(".summary"))==null?void 0:o.cloneNode(!0);return h&&d.appendChild(h),i.querySelectorAll("me-tpc").forEach(c=>{d.appendChild(a8(n,c,!e))}),i.querySelectorAll(".tags > span").forEach(c=>{d.appendChild(a8(n,c))}),i.querySelectorAll(".icons > span").forEach(c=>{d.appendChild(a8(n,c))}),i.querySelectorAll(".hyper-link").forEach(c=>{d.appendChild($2e(n,c))}),ls(d,{x:R5+"",y:R5+"",overflow:"visible"}),l.appendChild(d),j2e+l.outerHTML};function R2e(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=o=>{e(o.target.result)},r.onerror=o=>{t(o)},r.readAsDataURL(n)})}const D2e=function(n=!1){const e=FB(this,n);return new Blob([e],{type:"image/svg+xml"})},N2e=async function(n=!1){const e=FB(this,n),t=new Blob([e],{type:"image/svg+xml"}),r=await R2e(t);return new Promise((o,i)=>{const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{const s=document.createElement("canvas");s.width=a.width,s.height=a.height,s.getContext("2d").drawImage(a,0,0),s.toBlob(o,"image/png",1)},a.src=r,a.onerror=i})},z2e=Object.freeze(Object.defineProperty({__proto__:null,exportPng:N2e,exportSvg:D2e},Symbol.toStringTag,{value:"Module"}));function B2e(n,e){return async function(...t){const r=this.before[e];r&&!await r.apply(this,t)||n.apply(this,t)}}const YO=Object.keys(BB),ZB={};for(let n=0;n<YO.length;n++){const e=YO[n];ZB[e]=B2e(BB[e],e)}const H2e={getObjById:h4,generateNewObj:Ege,layout:Tge,linkDiv:Hge,editTopic:Dge,createWrapper:Lge,createParent:$ge,createChildren:jge,createTopic:Rge,findEle:rs,changeTheme:ume,...Rme,...ZB,...b2e,...I2e,...z2e,init(n){if(!n||!n.nodeData)return new Error("MindElixir: `data` is required");n.direction!==void 0&&(this.direction=n.direction),this.changeTheme(n.theme||this.theme,!1),this.nodeData=n.nodeData,Wu(this.nodeData),this.linkData=n.linkData||{},this.summaries=n.summaries||[],this.tidyCustomLink(),this.toolBar&&rme(this),this.keypress&&Yge(this),this.editable&&dme(this),kge()&&this.mobileMenu?Gge(this):this.contextMenu&&Wge(this,this.contextMenuOption),this.draggable&&Jge(this),this.allowUndo&&eme(this),this.toCenter(),this.layout(),this.linkDiv()}},U2=document;function kc({el:n,direction:e,locale:t,draggable:r,editable:o,contextMenu:i,contextMenuOption:a,toolBar:s,keypress:l,mouseSelectionButton:d,before:u,newTopicName:p,allowUndo:f,mainLinkStyle:h,subLinkStyle:c,overflowHidden:g,mobileMenu:m,theme:b}){console.log("ME_version "+kc.version,this);let v=null;const w=Object.prototype.toString.call(n);if(w==="[object HTMLDivElement]"?v=n:w==="[object String]"&&(v=document.querySelector(n)),!v)throw new Error("MindElixir: el is not a valid element");v.className+=" mind-elixir",v.innerHTML="",v.style.setProperty("--gap",bu+"px"),this.mindElixirBox=v,this.before=u||{},this.locale=t||"en",this.contextMenuOption=a,this.contextMenu=i===void 0?!0:i,this.toolBar=s===void 0?!0:s,this.keypress=l===void 0?!0:l,this.mouseSelectionButton=d||0,this.mobileMenu=m||!1,this.direction=typeof e=="number"?e:1,this.draggable=r===void 0?!0:r,this.newTopicName=p||"new node",this.editable=o===void 0?!0:o,this.allowUndo=f===void 0?!1:f,this.currentNode=null,this.currentLink=null,this.scaleVal=1,this.tempDirection=null,this.mainLinkStyle=h||0,this.subLinkStyle=c||0,this.overflowHidden=g||!1,this.bus=Ige.create(),this.container=U2.createElement("div"),this.container.className="map-container";const _=window.matchMedia("(prefers-color-scheme: dark)");this.theme=b||(_.matches?_B:kB);const k=U2.createElement("div");k.className="map-canvas",this.map=k,this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.nodes=U2.createElement("me-nodes"),this.nodes.className="main-node-container",this.lines=mv("lines"),this.summarySvg=mv("summary"),this.linkController=mv("linkcontroller"),this.P2=U2.createElement("div"),this.P3=U2.createElement("div"),this.P2.className=this.P3.className="circle",this.P2.style.display=this.P3.style.display="none",this.line1=jO(),this.line2=jO(),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=mv("topiclinks"),this.map.appendChild(this.nodes),this.overflowHidden?this.container.style.overflow="hidden":Mge(this)}kc.prototype=H2e;kc.LEFT=Bd;kc.RIGHT=n1;kc.SIDE=iy;kc.THEME=kB;kc.DARK_THEME=_B;kc.version="3.3.2";kc.E=rs;kc.new=n=>({nodeData:{id:ay(),topic:n||"new topic",root:!0,children:[]},linkData:{}});function F2e(){const n=ne.useRef(null);return ne.useEffect(()=>{if(!n.current)return;const e={el:n.current,direction:kc.LEFT,draggable:!0,contextMenu:!0,toolBar:!0,nodeMenu:!0,keypress:!0,locale:"en",overflowHidden:!1,mainLinkStyle:2,contextMenuOption:{focus:!0,link:!0,extend:[{name:"Node edit",onclick:()=>{alert("extend menu")}}]},before:{insertSibling(){return!0},async addChild(){return!0}}},t=new kc(e),r=kc.new("new topic");t.init(r)},[]),K.jsx("div",{ref:n})}function ao(n,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(n==null||n(o),t===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function Z2e(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Yx(...n){return e=>n.forEach(t=>Z2e(t,e))}function Ma(...n){return ne.useCallback(Yx(...n),n)}function Wh(n,e=[]){let t=[];function r(i,a){const s=ne.createContext(a),l=t.length;t=[...t,a];function d(p){const{scope:f,children:h,...c}=p,g=(f==null?void 0:f[n][l])||s,m=ne.useMemo(()=>c,Object.values(c));return ne.createElement(g.Provider,{value:m},h)}function u(p,f){const h=(f==null?void 0:f[n][l])||s,c=ne.useContext(h);if(c)return c;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const o=()=>{const i=t.map(a=>ne.createContext(a));return function(s){const l=(s==null?void 0:s[n])||i;return ne.useMemo(()=>({[`__scope${n}`]:{...s,[n]:l}}),[s,l])}};return o.scopeName=n,[r,U2e(o,...e)]}function U2e(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const a=r.reduce((s,{useScope:l,scopeName:d})=>{const p=l(i)[`__scope${d}`];return{...s,...p}},{});return ne.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}const F1=globalThis!=null&&globalThis.document?ne.useLayoutEffect:()=>{},W2e=qj.useId||(()=>{});let V2e=0;function Bf(n){const[e,t]=ne.useState(W2e());return F1(()=>{n||t(r=>r??String(V2e++))},[n]),n||(e?`radix-${e}`:"")}function pl(n){const e=ne.useRef(n);return ne.useEffect(()=>{e.current=n}),ne.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function r0({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,o]=K2e({defaultProp:e,onChange:t}),i=n!==void 0,a=i?n:r,s=pl(t),l=ne.useCallback(d=>{if(i){const p=typeof d=="function"?d(n):d;p!==n&&s(p)}else o(d)},[i,n,o,s]);return[a,l]}function K2e({defaultProp:n,onChange:e}){const t=ne.useState(n),[r]=t,o=ne.useRef(r),i=pl(e);return ne.useEffect(()=>{o.current!==r&&(i(r),o.current=r)},[r,o,i]),t}const am=ne.forwardRef((n,e)=>{const{children:t,...r}=n,o=ne.Children.toArray(t),i=o.find(G2e);if(i){const a=i.props.children,s=o.map(l=>l===i?ne.Children.count(a)>1?ne.Children.only(null):ne.isValidElement(a)?a.props.children:null:l);return ne.createElement(WC,ur({},r,{ref:e}),ne.isValidElement(a)?ne.cloneElement(a,void 0,s):null)}return ne.createElement(WC,ur({},r,{ref:e}),t)});am.displayName="Slot";const WC=ne.forwardRef((n,e)=>{const{children:t,...r}=n;return ne.isValidElement(t)?ne.cloneElement(t,{...X2e(r,t.props),ref:e?Yx(e,t.ref):t.ref}):ne.Children.count(t)>1?ne.Children.only(null):null});WC.displayName="SlotClone";const Y2e=({children:n})=>ne.createElement(ne.Fragment,null,n);function G2e(n){return ne.isValidElement(n)&&n.type===Y2e}function X2e(n,e){const t={...e};for(const r in e){const o=n[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?t[r]=(...s)=>{i(...s),o(...s)}:o&&(t[r]=o):r==="style"?t[r]={...o,...i}:r==="className"&&(t[r]=[o,i].filter(Boolean).join(" "))}return{...n,...t}}const q2e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],oa=q2e.reduce((n,e)=>{const t=ne.forwardRef((r,o)=>{const{asChild:i,...a}=r,s=i?am:e;return ne.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),ne.createElement(s,ur({},a,{ref:o}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function m_(n,e){n&&up.flushSync(()=>n.dispatchEvent(e))}function J2e(n,e=globalThis==null?void 0:globalThis.document){const t=pl(n);ne.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const VC="dismissableLayer.update",Q2e="dismissableLayer.pointerDownOutside",eve="dismissableLayer.focusOutside";let GO;const UB=ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),v_=ne.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:l,...d}=n,u=ne.useContext(UB),[p,f]=ne.useState(null),h=(t=p==null?void 0:p.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,c]=ne.useState({}),g=Ma(e,C=>f(C)),m=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),w=p?m.indexOf(p):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,k=w>=v,y=nve(C=>{const I=C.target,A=[...u.branches].some(T=>T.contains(I));!k||A||(i==null||i(C),s==null||s(C),C.defaultPrevented||l==null||l())},h),S=rve(C=>{const I=C.target;[...u.branches].some(T=>T.contains(I))||(a==null||a(C),s==null||s(C),C.defaultPrevented||l==null||l())},h);return J2e(C=>{w===u.layers.size-1&&(o==null||o(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),ne.useEffect(()=>{if(p)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(GO=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(p)),u.layers.add(p),XO(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=GO)}},[p,h,r,u]),ne.useEffect(()=>()=>{p&&(u.layers.delete(p),u.layersWithOutsidePointerEventsDisabled.delete(p),XO())},[p,u]),ne.useEffect(()=>{const C=()=>c({});return document.addEventListener(VC,C),()=>document.removeEventListener(VC,C)},[]),ne.createElement(oa.div,ur({},d,{ref:g,style:{pointerEvents:_?k?"auto":"none":void 0,...n.style},onFocusCapture:ao(n.onFocusCapture,S.onFocusCapture),onBlurCapture:ao(n.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ao(n.onPointerDownCapture,y.onPointerDownCapture)}))}),tve=ne.forwardRef((n,e)=>{const t=ne.useContext(UB),r=ne.useRef(null),o=Ma(e,r);return ne.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),ne.createElement(oa.div,ur({},n,{ref:o}))});function nve(n,e=globalThis==null?void 0:globalThis.document){const t=pl(n),r=ne.useRef(!1),o=ne.useRef(()=>{});return ne.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let d=function(){WB(Q2e,t,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=d,e.addEventListener("click",o.current,{once:!0})):d()}else e.removeEventListener("click",o.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function rve(n,e=globalThis==null?void 0:globalThis.document){const t=pl(n),r=ne.useRef(!1);return ne.useEffect(()=>{const o=i=>{i.target&&!r.current&&WB(eve,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function XO(){const n=new CustomEvent(VC);document.dispatchEvent(n)}function WB(n,e,t,{discrete:r}){const o=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?m_(o,i):o.dispatchEvent(i)}const ove=v_,ive=tve,s8="focusScope.autoFocusOnMount",l8="focusScope.autoFocusOnUnmount",qO={bubbles:!1,cancelable:!0},VB=ne.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=n,[s,l]=ne.useState(null),d=pl(o),u=pl(i),p=ne.useRef(null),f=Ma(e,g=>l(g)),h=ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ne.useEffect(()=>{if(r){let g=function(w){if(h.paused||!s)return;const _=w.target;s.contains(_)?p.current=_:Mf(p.current,{select:!0})},m=function(w){if(h.paused||!s)return;const _=w.relatedTarget;_!==null&&(s.contains(_)||Mf(p.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&Mf(s)};document.addEventListener("focusin",g),document.addEventListener("focusout",m);const v=new MutationObserver(b);return s&&v.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",m),v.disconnect()}}},[r,s,h.paused]),ne.useEffect(()=>{if(s){QO.add(h);const g=document.activeElement;if(!s.contains(g)){const b=new CustomEvent(s8,qO);s.addEventListener(s8,d),s.dispatchEvent(b),b.defaultPrevented||(ave(uve(KB(s)),{select:!0}),document.activeElement===g&&Mf(s))}return()=>{s.removeEventListener(s8,d),setTimeout(()=>{const b=new CustomEvent(l8,qO);s.addEventListener(l8,u),s.dispatchEvent(b),b.defaultPrevented||Mf(g??document.body,{select:!0}),s.removeEventListener(l8,u),QO.remove(h)},0)}}},[s,d,u,h]);const c=ne.useCallback(g=>{if(!t&&!r||h.paused)return;const m=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(m&&b){const v=g.currentTarget,[w,_]=sve(v);w&&_?!g.shiftKey&&b===_?(g.preventDefault(),t&&Mf(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),t&&Mf(_,{select:!0})):b===v&&g.preventDefault()}},[t,r,h.paused]);return ne.createElement(oa.div,ur({tabIndex:-1},a,{ref:f,onKeyDown:c}))});function ave(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Mf(r,{select:e}),document.activeElement!==t)return}function sve(n){const e=KB(n),t=JO(e,n),r=JO(e.reverse(),n);return[t,r]}function KB(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function JO(n,e){for(const t of n)if(!lve(t,{upTo:e}))return t}function lve(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function cve(n){return n instanceof HTMLInputElement&&"select"in n}function Mf(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&cve(n)&&e&&n.select()}}const QO=dve();function dve(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=eA(n,e),n.unshift(e)},remove(e){var t;n=eA(n,e),(t=n[0])===null||t===void 0||t.resume()}}}function eA(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function uve(n){return n.filter(e=>e.tagName!=="A")}const b_=ne.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...o}=n;return r?Jj.createPortal(ne.createElement(oa.div,ur({},o,{ref:e})),r):null});function hve(n,e){return ne.useReducer((t,r)=>{const o=e[t][r];return o??t},n)}const Vh=n=>{const{present:e,children:t}=n,r=fve(e),o=typeof t=="function"?t({present:r.isPresent}):ne.Children.only(t),i=Ma(r.ref,o.ref);return typeof t=="function"||r.isPresent?ne.cloneElement(o,{ref:i}):null};Vh.displayName="Presence";function fve(n){const[e,t]=ne.useState(),r=ne.useRef({}),o=ne.useRef(n),i=ne.useRef("none"),a=n?"mounted":"unmounted",[s,l]=hve(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne.useEffect(()=>{const d=D5(r.current);i.current=s==="mounted"?d:"none"},[s]),F1(()=>{const d=r.current,u=o.current;if(u!==n){const f=i.current,h=D5(d);n?l("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,l]),F1(()=>{if(e){const d=p=>{const h=D5(r.current).includes(p.animationName);p.target===e&&h&&up.flushSync(()=>l("ANIMATION_END"))},u=p=>{p.target===e&&(i.current=D5(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:ne.useCallback(d=>{d&&(r.current=getComputedStyle(d)),t(d)},[])}}function D5(n){return(n==null?void 0:n.animationName)||"none"}let c8=0;function YB(){ne.useEffect(()=>{var n,e;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(n=t[0])!==null&&n!==void 0?n:tA()),document.body.insertAdjacentElement("beforeend",(e=t[1])!==null&&e!==void 0?e:tA()),c8++,()=>{c8===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),c8--}},[])}function tA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var A3="right-scroll-bar-position",L3="width-before-scroll-bar",pve="with-scroll-bars-hidden",gve="--removed-body-scroll-bar-size";function d8(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function mve(n,e){var t=ne.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var o=t.value;o!==r&&(t.value=r,t.callback(r,o))}}}})[0];return t.callback=e,t.facade}var nA=new WeakMap;function vve(n,e){var t=mve(e||null,function(r){return n.forEach(function(o){return d8(o,r)})});return ne.useLayoutEffect(function(){var r=nA.get(t);if(r){var o=new Set(r),i=new Set(n),a=t.current;o.forEach(function(s){i.has(s)||d8(s,null)}),i.forEach(function(s){o.has(s)||d8(s,a)})}nA.set(t,n)},[n]),t}function bve(n){return n}function yve(n,e){e===void 0&&(e=bve);var t=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(s){return i(s)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var s=t;t=[],s.forEach(i),a=t}var l=function(){var u=a;a=[],u.forEach(i)},d=function(){return Promise.resolve().then(l)};d(),t={push:function(u){a.push(u),d()},filter:function(u){return a=a.filter(u),t}}}};return o}function xve(n){n===void 0&&(n={});var e=yve(null);return e.options=wu({async:!0,ssr:!1},n),e}var GB=function(n){var e=n.sideCar,t=xB(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return ne.createElement(r,wu({},t))};GB.isSideCarExport=!0;function wve(n,e){return n.useMedium(e),GB}var XB=xve(),u8=function(){},Gx=ne.forwardRef(function(n,e){var t=ne.useRef(null),r=ne.useState({onScrollCapture:u8,onWheelCapture:u8,onTouchMoveCapture:u8}),o=r[0],i=r[1],a=n.forwardProps,s=n.children,l=n.className,d=n.removeScrollBar,u=n.enabled,p=n.shards,f=n.sideCar,h=n.noIsolation,c=n.inert,g=n.allowPinchZoom,m=n.as,b=m===void 0?"div":m,v=xB(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,_=vve([t,e]),k=wu(wu({},v),o);return ne.createElement(ne.Fragment,null,u&&ne.createElement(w,{sideCar:XB,removeScrollBar:d,shards:p,noIsolation:h,inert:c,setCallbacks:i,allowPinchZoom:!!g,lockRef:t}),a?ne.cloneElement(ne.Children.only(s),wu(wu({},k),{ref:_})):ne.createElement(b,wu({},k,{className:l,ref:_}),s))});Gx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gx.classNames={fullWidth:L3,zeroRight:A3};var Cve=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sve(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Cve();return e&&n.setAttribute("nonce",e),n}function kve(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function _ve(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Eve=function(){var n=0,e=null;return{add:function(t){n==0&&(e=Sve())&&(kve(e,t),_ve(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Pve=function(){var n=Eve();return function(e,t){ne.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},qB=function(){var n=Pve(),e=function(t){var r=t.styles,o=t.dynamic;return n(r,o),null};return e},Mve={left:0,top:0,right:0,gap:0},h8=function(n){return parseInt(n||"",10)||0},Ive=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],o=e[n==="padding"?"paddingRight":"marginRight"];return[h8(t),h8(r),h8(o)]},Tve=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return Mve;var e=Ive(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Ove=qB(),g4="data-scroll-locked",Ave=function(n,e,t,r){var o=n.left,i=n.top,a=n.right,s=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(pve,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(g4,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(A3,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(L3,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(A3," .").concat(A3,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(L3," .").concat(L3,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(g4,`] {
    `).concat(gve,": ").concat(s,`px;
  }
`)},Lve=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,o=r===void 0?"margin":r,i=ne.useMemo(function(){return Tve(o)},[o]);return ne.useEffect(function(){return document.body.setAttribute(g4,""),function(){document.body.removeAttribute(g4)}},[]),ne.createElement(Ove,{styles:Ave(i,!e,o,t?"":"!important")})},KC=!1;if(typeof window<"u")try{var N5=Object.defineProperty({},"passive",{get:function(){return KC=!0,!0}});window.addEventListener("test",N5,N5),window.removeEventListener("test",N5,N5)}catch{KC=!1}var G0=KC?{passive:!1}:!1,$ve=function(n){return n.tagName==="TEXTAREA"},JB=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!$ve(n)&&t[e]==="visible")},jve=function(n){return JB(n,"overflowY")},Rve=function(n){return JB(n,"overflowX")},rA=function(n,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var r=QB(n,t);if(r){var o=eH(n,t),i=o[1],a=o[2];if(i>a)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},Dve=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Nve=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},QB=function(n,e){return n==="v"?jve(e):Rve(e)},eH=function(n,e){return n==="v"?Dve(e):Nve(e)},zve=function(n,e){return n==="h"&&e==="rtl"?-1:1},Bve=function(n,e,t,r,o){var i=zve(n,window.getComputedStyle(e).direction),a=i*r,s=t.target,l=e.contains(s),d=!1,u=a>0,p=0,f=0;do{var h=eH(n,s),c=h[0],g=h[1],m=h[2],b=g-m-i*c;(c||b)&&QB(n,s)&&(p+=b,f+=c),s=s.parentNode}while(!l&&s!==document.body||l&&(e.contains(s)||e===s));return(u&&(o&&p===0||!o&&a>p)||!u&&(o&&f===0||!o&&-a>f))&&(d=!0),d},z5=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},oA=function(n){return[n.deltaX,n.deltaY]},iA=function(n){return n&&"current"in n?n.current:n},Hve=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Fve=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Zve=0,X0=[];function Uve(n){var e=ne.useRef([]),t=ne.useRef([0,0]),r=ne.useRef(),o=ne.useState(Zve++)[0],i=ne.useState(function(){return qB()})[0],a=ne.useRef(n);ne.useEffect(function(){a.current=n},[n]),ne.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(o));var g=wB([n.lockRef.current],(n.shards||[]).map(iA),!0).filter(Boolean);return g.forEach(function(m){return m.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(o))})}}},[n.inert,n.lockRef.current,n.shards]);var s=ne.useCallback(function(g,m){if("touches"in g&&g.touches.length===2)return!a.current.allowPinchZoom;var b=z5(g),v=t.current,w="deltaX"in g?g.deltaX:v[0]-b[0],_="deltaY"in g?g.deltaY:v[1]-b[1],k,y=g.target,S=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&S==="h"&&y.type==="range")return!1;var C=rA(S,y);if(!C)return!0;if(C?k=S:(k=S==="v"?"h":"v",C=rA(S,y)),!C)return!1;if(!r.current&&"changedTouches"in g&&(w||_)&&(r.current=k),!k)return!0;var I=r.current||k;return Bve(I,m,g,I==="h"?w:_,!0)},[]),l=ne.useCallback(function(g){var m=g;if(!(!X0.length||X0[X0.length-1]!==i)){var b="deltaY"in m?oA(m):z5(m),v=e.current.filter(function(k){return k.name===m.type&&k.target===m.target&&Hve(k.delta,b)})[0];if(v&&v.should){m.cancelable&&m.preventDefault();return}if(!v){var w=(a.current.shards||[]).map(iA).filter(Boolean).filter(function(k){return k.contains(m.target)}),_=w.length>0?s(m,w[0]):!a.current.noIsolation;_&&m.cancelable&&m.preventDefault()}}},[]),d=ne.useCallback(function(g,m,b,v){var w={name:g,delta:m,target:b,should:v};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),u=ne.useCallback(function(g){t.current=z5(g),r.current=void 0},[]),p=ne.useCallback(function(g){d(g.type,oA(g),g.target,s(g,n.lockRef.current))},[]),f=ne.useCallback(function(g){d(g.type,z5(g),g.target,s(g,n.lockRef.current))},[]);ne.useEffect(function(){return X0.push(i),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:f}),document.addEventListener("wheel",l,G0),document.addEventListener("touchmove",l,G0),document.addEventListener("touchstart",u,G0),function(){X0=X0.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,G0),document.removeEventListener("touchmove",l,G0),document.removeEventListener("touchstart",u,G0)}},[]);var h=n.removeScrollBar,c=n.inert;return ne.createElement(ne.Fragment,null,c?ne.createElement(i,{styles:Fve(o)}):null,h?ne.createElement(Lve,{gapMode:"margin"}):null)}const Wve=wve(XB,Uve);var tH=ne.forwardRef(function(n,e){return ne.createElement(Gx,wu({},n,{ref:e,sideCar:Wve}))});tH.classNames=Gx.classNames;const y_=tH;var Vve=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},q0=new WeakMap,B5=new WeakMap,H5={},f8=0,nH=function(n){return n&&(n.host||nH(n.parentNode))},Kve=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=nH(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Yve=function(n,e,t,r){var o=Kve(e,Array.isArray(n)?n:[n]);H5[t]||(H5[t]=new WeakMap);var i=H5[t],a=[],s=new Set,l=new Set(o),d=function(p){!p||s.has(p)||(s.add(p),d(p.parentNode))};o.forEach(d);var u=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(f){if(s.has(f))u(f);else{var h=f.getAttribute(r),c=h!==null&&h!=="false",g=(q0.get(f)||0)+1,m=(i.get(f)||0)+1;q0.set(f,g),i.set(f,m),a.push(f),g===1&&c&&B5.set(f,!0),m===1&&f.setAttribute(t,"true"),c||f.setAttribute(r,"true")}})};return u(e),s.clear(),f8++,function(){a.forEach(function(p){var f=q0.get(p)-1,h=i.get(p)-1;q0.set(p,f),i.set(p,h),f||(B5.has(p)||p.removeAttribute(r),B5.delete(p)),h||p.removeAttribute(t)}),f8--,f8||(q0=new WeakMap,q0=new WeakMap,B5=new WeakMap,H5={})}},x_=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),o=e||Vve(n);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),Yve(r,o,t,"aria-hidden")):function(){return null}};const rH="Dialog",[oH,YDe]=Wh(rH),[Gve,Kh]=oH(rH),Xve=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:i,modal:a=!0}=n,s=ne.useRef(null),l=ne.useRef(null),[d=!1,u]=r0({prop:r,defaultProp:o,onChange:i});return ne.createElement(Gve,{scope:e,triggerRef:s,contentRef:l,contentId:Bf(),titleId:Bf(),descriptionId:Bf(),open:d,onOpenChange:u,onOpenToggle:ne.useCallback(()=>u(p=>!p),[u]),modal:a},t)},iH="DialogPortal",[qve,aH]=oH(iH,{forceMount:void 0}),Jve=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=n,i=Kh(iH,e);return ne.createElement(qve,{scope:e,forceMount:t},ne.Children.map(r,a=>ne.createElement(Vh,{present:t||i.open},ne.createElement(b_,{asChild:!0,container:o},a))))},YC="DialogOverlay",Qve=ne.forwardRef((n,e)=>{const t=aH(YC,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,i=Kh(YC,n.__scopeDialog);return i.modal?ne.createElement(Vh,{present:r||i.open},ne.createElement(ebe,ur({},o,{ref:e}))):null}),ebe=ne.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=Kh(YC,t);return ne.createElement(y_,{as:am,allowPinchZoom:!0,shards:[o.contentRef]},ne.createElement(oa.div,ur({"data-state":lH(o.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),hb="DialogContent",tbe=ne.forwardRef((n,e)=>{const t=aH(hb,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,i=Kh(hb,n.__scopeDialog);return ne.createElement(Vh,{present:r||i.open},i.modal?ne.createElement(nbe,ur({},o,{ref:e})):ne.createElement(rbe,ur({},o,{ref:e})))}),nbe=ne.forwardRef((n,e)=>{const t=Kh(hb,n.__scopeDialog),r=ne.useRef(null),o=Ma(e,t.contentRef,r);return ne.useEffect(()=>{const i=r.current;if(i)return x_(i)},[]),ne.createElement(sH,ur({},n,{ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ao(n.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ao(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,s=a.button===0&&a.ctrlKey===!0;(a.button===2||s)&&i.preventDefault()}),onFocusOutside:ao(n.onFocusOutside,i=>i.preventDefault())}))}),rbe=ne.forwardRef((n,e)=>{const t=Kh(hb,n.__scopeDialog),r=ne.useRef(!1),o=ne.useRef(!1);return ne.createElement(sH,ur({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a;if((a=n.onCloseAutoFocus)===null||a===void 0||a.call(n,i),!i.defaultPrevented){var s;r.current||(s=t.triggerRef.current)===null||s===void 0||s.focus(),i.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:i=>{var a,s;(a=n.onInteractOutside)===null||a===void 0||a.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=i.target;((s=t.triggerRef.current)===null||s===void 0?void 0:s.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}}))}),sH=ne.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...a}=n,s=Kh(hb,t),l=ne.useRef(null),d=Ma(e,l);return YB(),ne.createElement(ne.Fragment,null,ne.createElement(VB,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i},ne.createElement(v_,ur({role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":lH(s.open)},a,{ref:d,onDismiss:()=>s.onOpenChange(!1)}))),!1)}),obe="DialogTitle",ibe=ne.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=Kh(obe,t);return ne.createElement(oa.h2,ur({id:o.titleId},r,{ref:e}))});const abe="DialogClose",sbe=ne.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=Kh(abe,t);return ne.createElement(oa.button,ur({type:"button"},r,{ref:e,onClick:ao(n.onClick,()=>o.onOpenChange(!1))}))});function lH(n){return n?"open":"closed"}const lbe=Xve,cbe=Jve,dbe=Qve,ube=tbe,aA=8;class cH{constructor(){J(this,"arraySize",0);J(this,"array",Array(aA));J(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(e){if(this.array)return this.array.indexOf(e)!==-1?!1:this.arraySize<aA?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0);if(this.set)return this.set.has(e)?!1:(this.set.add(e),!0);throw new Error("no set or array")}remove(e){if(this.array){const t=this.array.indexOf(e);return t===-1?!1:(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(e)?(this.set.delete(e),!0):!1;throw new Error("no set or array")}visit(e){if(this.array){for(let t=0;t<this.arraySize;t++){const r=this.array[t];typeof r<"u"&&e(r)}return}if(this.set){this.set.forEach(e);return}throw new Error("no set or array")}}function dH(n){return n&&typeof n=="object"&&"parents"in n}function uH(n){for(let e=0,t=n.parents.length;e<t;e++)if(n.parents[e].__unsafe__getWithoutCapture(),n.parents[e].lastChangedEpoch!==n.parentEpochs[e])return!0;return!1}const m4=(n,e)=>{if(n.children.remove(e)&&n.children.isEmpty&&dH(n))for(let t=0,r=n.parents.length;t<r;t++)m4(n.parents[t],n)},w_=(n,e)=>{if(n.children.add(e)&&dH(n))for(let t=0,r=n.parents.length;t<r;t++)w_(n.parents[t],n)};function hH(n,e){return n===e||Object.is(n,e)||!!(n&&e&&typeof n.equals=="function"&&n.equals(e))}const Sh=Object.freeze([]),sA=Symbol.for("__@tldraw/state__"),lA=globalThis;lA[sA]?console.error('Multiple versions of @tldraw/state detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of @tldraw/state is loaded.'):lA[sA]=!0;class hbe{constructor(e,t){J(this,"offset",0);J(this,"numNewParents",0);J(this,"maybeRemoved");this.below=e,this.child=t}}let ta=null;function fH(n){ta=new hbe(ta,n)}function pH(){const n=ta;if(ta=n.below,n.numNewParents>0||n.offset!==n.child.parents.length){for(let t=n.offset;t<n.child.parents.length;t++){const r=n.child.parents[t];n.child.parents.indexOf(r)>=n.offset&&m4(r,n.child)}if(n.child.parents.length=n.offset,n.child.parentEpochs.length=n.offset,ta!=null&&ta.maybeRemoved)for(let t=0;t<ta.maybeRemoved.length;t++){const r=ta.maybeRemoved[t];n.child.parents.indexOf(r)===-1&&m4(r,n.child)}}}function GC(n){if(ta){const e=ta.child.parents.indexOf(n);if(e<0&&(ta.numNewParents++,ta.child.isActivelyListening&&w_(n,ta.child)),e<0||e>=ta.offset){if(e!==ta.offset&&e>0){const t=ta.child.parents[ta.offset];ta.maybeRemoved?ta.maybeRemoved.indexOf(t)===-1&&ta.maybeRemoved.push(t):ta.maybeRemoved=[t]}ta.child.parents[ta.offset]=n,ta.child.parentEpochs[ta.offset]=n.lastChangedEpoch,ta.offset++}}}const _c=Symbol("RESET_VALUE");class gH{constructor(e){J(this,"index",0);J(this,"buffer");this.capacity=e,this.buffer=new Array(e)}pushEntry(e,t,r){if(r!==void 0){if(r===_c){this.clear();return}this.buffer[this.index]=[e,t,r],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(e){const{index:t,capacity:r,buffer:o}=this;for(let i=0;i<r;i++){const a=(t-1+r-i)%r,s=o[a];if(!s)return _c;const[l,d]=s;if(i===0&&e>=d)return[];if(l<=e&&e<d){const u=i+1,p=new Array(u);for(let f=0;f<u;f++)p[f]=o[(a+f)%r][2];return p}}return _c}}const o1=-1;let zs=o1+1,p8=!1;function fbe(){zs++}class pbe{constructor(e){J(this,"initialAtomValues",new Map);this.parent=e}get isRoot(){return this.parent===null}commit(){if(this.isRoot){const e=this.initialAtomValues;this.initialAtomValues=new Map,mH(e.keys())}else this.initialAtomValues.forEach((e,t)=>{this.parent.initialAtomValues.has(t)||this.parent.initialAtomValues.set(t,e)})}abort(){zs++,this.initialAtomValues.forEach((e,t)=>{var r;t.set(e),(r=t.historyBuffer)==null||r.clear()}),this.commit()}}function mH(n){if(p8)throw new Error("cannot change atoms during reaction cycle");try{p8=!0;const e=new Set,t=r=>{r.lastTraversedEpoch!==zs&&(r.lastTraversedEpoch=zs,"maybeScheduleEffect"in r?e.add(r):r.children.visit(t))};for(const r of n)r.children.visit(t);for(const r of e)r.maybeScheduleEffect()}finally{p8=!1}}function gbe(n,e){jf?jf.initialAtomValues.has(n)||jf.initialAtomValues.set(n,e):mH([n])}let jf=null;function mbe(n){const e=new pbe(jf);jf=e;try{let t=!1;const r=n(()=>t=!0);return t?e.abort():e.commit(),r}catch(t){throw e.abort(),t}finally{jf=jf.parent}}function jd(n){return jf?n():mbe(n)}class vbe{constructor(e,t,r){J(this,"isEqual");J(this,"computeDiff");J(this,"lastChangedEpoch",zs);J(this,"children",new cH);J(this,"historyBuffer");this.name=e,this.current=t,this.isEqual=(r==null?void 0:r.isEqual)??null,r&&(r.historyLength&&(this.historyBuffer=new gH(r.historyLength)),this.computeDiff=r.computeDiff)}__unsafe__getWithoutCapture(){return this.current}get value(){return GC(this),this.current}set(e,t){var o,i;if(((o=this.isEqual)==null?void 0:o.call(this,this.current,e))??hH(this.current,e))return this.current;fbe(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,zs,t??((i=this.computeDiff)==null?void 0:i.call(this,this.current,e,this.lastChangedEpoch,zs))??_c),this.lastChangedEpoch=zs;const r=this.current;return this.current=e,gbe(this,r),e}update(e){return this.set(e(this.current))}getDiffSince(e){var t;return GC(this),e>=this.lastChangedEpoch?Sh:((t=this.historyBuffer)==null?void 0:t.getChangesSince(e))??_c}}function Fl(n,e,t){return new vbe(n,e,t)}const XC=Symbol("UNINITIALIZED"),Tg=n=>n===XC;class qC{constructor(e,t){this.value=e,this.diff=t}}function vv(n,e){return new qC(n,e)}class vH{constructor(e,t,r){J(this,"lastChangedEpoch",o1);J(this,"lastTraversedEpoch",o1);J(this,"lastCheckedEpoch",o1);J(this,"parents",[]);J(this,"parentEpochs",[]);J(this,"children",new cH);J(this,"historyBuffer");J(this,"state",XC);J(this,"computeDiff");J(this,"isEqual");this.name=e,this.derive=t,r!=null&&r.historyLength&&(this.historyBuffer=new gH(r.historyLength)),this.computeDiff=r==null?void 0:r.computeDiff,this.isEqual=(r==null?void 0:r.isEqual)??hH}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(){var t;const e=this.lastChangedEpoch===o1;if(!e&&(this.lastCheckedEpoch===zs||!uH(this)))return this.lastCheckedEpoch=zs,this.state;try{fH(this);const r=this.derive(this.state,this.lastCheckedEpoch),o=r instanceof qC?r.value:r;if(this.state===XC||!this.isEqual(o,this.state)){if(this.historyBuffer&&!e){const i=r instanceof qC?r.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,zs,i??((t=this.computeDiff)==null?void 0:t.call(this,this.state,o,this.lastCheckedEpoch,zs))??_c)}this.lastChangedEpoch=zs,this.state=o}return this.lastCheckedEpoch=zs,this.state}finally{pH()}}get value(){const e=this.__unsafe__getWithoutCapture();return GC(this),e}getDiffSince(e){var t;return this.value,e>=this.lastChangedEpoch?Sh:((t=this.historyBuffer)==null?void 0:t.getChangesSince(e))??_c}}function cA(n={},e,t,r){const o=r.get,i=Symbol.for("__@tldraw/state__computed__"+t);return r.get=function(){let a=this[i];return a||(a=new vH(t,o.bind(this),n),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:a})),a.value},r}function pr(){if(arguments.length===1){const n=arguments[0];return(e,t,r)=>cA(n,e,t,r)}else return typeof arguments[0]=="string"?new vH(arguments[0],arguments[1],arguments[2]):cA(void 0,arguments[0],arguments[1],arguments[2])}class ly{constructor(e,t,r){J(this,"_isActivelyListening",!1);J(this,"lastTraversedEpoch",o1);J(this,"lastReactedEpoch",o1);J(this,"_scheduleCount",0);J(this,"parentEpochs",[]);J(this,"parents",[]);J(this,"_scheduleEffect");J(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=e,this.runEffect=t,this._scheduleEffect=r==null?void 0:r.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==zs){if(this.parents.length&&!uH(this)){this.lastReactedEpoch=zs;return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let e=0,t=this.parents.length;e<t;e++)w_(this.parents[e],this)}detach(){this._isActivelyListening=!1;for(let e=0,t=this.parents.length;e<t;e++)m4(this.parents[e],this)}execute(){try{fH(this);const e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=zs,e}finally{pH()}}}function cy(n,e,t){const r=new ly(n,e,t);return r.attach(),r.scheduleEffect(),()=>{r.detach()}}function bbe(n,e,t){const r=new ly(n,e,t);return{scheduler:r,start:o=>{const i=(o==null?void 0:o.force)??!1;r.attach(),i?r.scheduleEffect():r.maybeScheduleEffect()},stop:()=>{r.detach()}}}function Xx(n,e){const t=je.useRef(e);t.current=e;const[r,o,i]=je.useMemo(()=>{let a=null;const s=u=>(a=u,()=>{a=null}),l=new ly(`useStateTracking(${n})`,()=>{var u;return(u=t.current)==null?void 0:u.call(t)},{scheduleEffect(){a==null||a()}});return[l,s,()=>l.scheduleCount]},[n]);return je.useSyncExternalStore(o,i,i),je.useEffect(()=>(r.attach(),r.maybeScheduleEffect(),()=>{r.detach()}),[r]),r.execute()}const dA={apply(n,e,t){return Xx(n.displayName??n.name??"tracked(???)",()=>n.apply(e,t))}},ybe=Symbol.for("react.memo"),xbe=Symbol.for("react.forward_ref");function gi(n){let e=null;const t=n.$$typeof;return t===ybe&&(n=n.type,e=n.compare),t===xbe?ne.memo(ne.forwardRef(new Proxy(n.render,dA))):ne.memo(new Proxy(n,dA),e)}function bH(){const n=arguments[0],e=arguments[1],t=arguments.length===3?void 0:arguments[2],r=arguments.length===3?arguments[2]:arguments[3];return ne.useMemo(()=>pr(`useComputed(${n})`,e,t),r)}function g1(n,e,t=Sh){ne.useEffect(()=>{const r=new ly(n,e);return r.attach(),r.execute(),()=>{r.detach()}},t)}function sr(){const n=arguments,e=n.length===3?n[2]:[n[0]],t=n.length===3?n[0]:`useValue(${n[0].name})`,r=ne.useRef(!0);r.current=!0;const o=ne.useMemo(()=>n.length===1?n[0]:pr(t,()=>{if(r.current)return n[1]();try{return n[1]()}catch{return{}}}),e);try{const{subscribe:i,getSnapshot:a}=ne.useMemo(()=>({subscribe:s=>cy(`useValue(${t})`,()=>{o.value,s()}),getSnapshot:()=>o.value}),[o]);return ne.useSyncExternalStore(i,a,a)}finally{r.current=!1}}class $3{constructor(e){J(this,"nextValue");J(this,"diff");this.previousValue=e}get(){var r,o,i,a;const e=((o=(r=this.diff)==null?void 0:r.removed)==null?void 0:o.size)??0,t=((a=(i=this.diff)==null?void 0:i.added)==null?void 0:a.size)??0;if(!(e===0&&t===0))return{value:this.nextValue,diff:this.diff}}_add(e,t){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),this.diff??(this.diff={}),t?(r=this.diff.removed)==null||r.delete(e):((o=this.diff).added??(o.added=new Set),this.diff.added.add(e))}add(e){var o,i,a;const t=this.previousValue.has(e);if(t)return((i=(o=this.diff)==null?void 0:o.removed)==null?void 0:i.has(e))?this._add(e,t):void 0;(a=this.nextValue)!=null&&a.has(e)||this._add(e,t)}_remove(e,t){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),this.diff??(this.diff={}),t?((r=this.diff).removed??(r.removed=new Set),this.diff.removed.add(e)):(o=this.diff.added)==null||o.delete(e)}remove(e){var o,i,a,s;const t=this.previousValue.has(e);if(!t)return((i=(o=this.diff)==null?void 0:o.added)==null?void 0:i.has(e))?this._remove(e,t):void 0;(s=(a=this.diff)==null?void 0:a.removed)!=null&&s.has(e)||this._remove(e,t)}}function v4(n,e){const t=[];e:for(const r of n){for(const o of t)if(e?e(r,o):r===o)continue e;t.push(r)}return t}function Lo(n){return n.filter(e=>e!=null)}function zl(n){return n[n.length-1]}function wbe(n,e){let t,r=1/0;for(const o of n){const i=e(o);i<r&&(t=o,r=i)}return t}function yH(n){const e=(...t)=>{try{return n(...t)}catch(r){throw r instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(r,e),r}};return e}function C_(n,e){const t=e&&n&&typeof n=="object"&&e in n?n[e]:n;throw new Error(`Unknown switch case ${t}`)}const qx=yH((n,e)=>{if(!n)throw new Error(e||"Assertion Error")}),Cbe=yH((n,e)=>{if(n==null)throw new Error(e??"value must be defined");return n});function S_(n,e){let t;const r=(...o)=>(t||(t={},t.promise=new Promise((i,a)=>{t.resolve=i,t.reject=a})),clearTimeout(t.timeout),t.latestArgs=o,t.timeout=setTimeout(()=>{const i=t;t=void 0;try{i.resolve(n(...i.latestArgs))}catch(a){i.reject(a)}},e),t.promise);return r.cancel=()=>{t&&clearTimeout(t.timeout)},r}const uA=new WeakMap;function k_(n,e){if(typeof n!="object"||n===null)return;let t=uA.get(n);t||(t={tags:{},extras:{}},uA.set(n,t)),e.tags&&(t.tags={...t.tags,...e.tags}),e.extras&&(t.extras={...t.extras,...e.extras})}class Sbe{static async base64ToFile(e){return fetch(e).then(function(t){return t.arrayBuffer()})}static async fileToBase64(e){return await new Promise((t,r)=>{if(e){const o=new FileReader;o.readAsDataURL(e),o.onload=()=>t(o.result),o.onerror=i=>r(i),o.onabort=i=>r(i)}})}}function j3(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return e+""}let JC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(JC=new Int32Array(JC));const kbe=(n,e)=>{let t=e===0?0:~~e^-1;for(let r=0;r<n.length;r++)t=JC[(t^n[r])&255]^t>>>8;return t^-1},hA=4,fA=4;class Cu{static isPng(e,t){return e.getUint8(t+0)===137&&e.getUint8(t+1)===80&&e.getUint8(t+2)===78&&e.getUint8(t+3)===71&&e.getUint8(t+4)===13&&e.getUint8(t+5)===10&&e.getUint8(t+6)===26&&e.getUint8(t+7)===10}static getChunkType(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}static readChunks(e,t=0){const r={};if(!Cu.isPng(e,t))throw new Error("Not a PNG");for(t+=8;t<=e.buffer.byteLength;){const o=t,i=e.getInt32(t);t+=4;const a=Cu.getChunkType(e,t);if(a==="IDAT"&&r[a]){t+=i+hA+fA;continue}if(a==="IEND")break;r[a]={start:o,dataOffset:t+4,size:i},t+=i+hA+fA}return r}static parsePhys(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}static findChunk(e,t){return Cu.readChunks(e)[t]}static setPhysChunk(e,t=1,r){let o=46,i=0;const a=Cu.findChunk(e,"pHYs");a&&(o=a.start,i=a.size);const s=Cu.findChunk(e,"IDAT");s&&(o=s.start,i=0);const l=new ArrayBuffer(21),d=new DataView(l);d.setUint32(0,9),d.setUint8(4,112),d.setUint8(5,72),d.setUint8(6,89),d.setUint8(7,115);const u=2835.5;d.setInt32(8,u*t),d.setInt32(12,u*t),d.setInt8(16,1);const p=new Uint8Array(l.slice(4,17));d.setInt32(17,kbe(p));const f=e.buffer.slice(0,o),h=e.buffer.slice(o+i);return new Blob([f,l,h],r)}}class pA{static async getVideoSizeFromSrc(e){return await new Promise((t,r)=>{const o=document.createElement("video");o.onloadeddata=()=>t({w:o.videoWidth,h:o.videoHeight}),o.onerror=i=>{console.error(i),r(new Error("Could not get video size"))},o.crossOrigin="anonymous",o.src=e})}static async getImageSizeFromSrc(e){return await new Promise((t,r)=>{const o=new Image;o.onload=async()=>{try{const i=await Sbe.base64ToFile(e),a=new DataView(i);if(Cu.isPng(a,0)){const s=Cu.findChunk(a,"pHYs");if(s){const l=Cu.parsePhys(a,s.dataOffset);if(l.unit===0&&l.ppux===l.ppuy){const d=Math.round(l.ppux/2834.5);t({w:o.width/d,h:o.height/d});return}}}t({w:o.width,h:o.height})}catch(i){console.error(i),t({w:o.width,h:o.height})}},o.onerror=i=>{console.error(i),r(new Error("Could not get image size"))},o.crossOrigin="anonymous",o.src=e})}}function Hf(n=""){let e=0,t=0,r=0,o=0;function i(){const a=e^e<<11;return e=t,t=r,r=o,o^=(o>>>19^a^a>>>8)>>>0,o/4294967296*2}for(let a=0;a<n.length+64;a++)e^=n.charCodeAt(a)|0,i();return i}function b4(n,e,t,r=!1){const[o,i]=e,[a,s]=t,l=a+(n-o)/(i-o)*(s-a);return r?a<s?Math.max(Math.min(l,s),a):Math.max(Math.min(l,a),s):l}function Jx(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function m1(n,e){if(Jx(n,e))return n[e]}function hl(n){if(!n)return n;if(Array.isArray(n)){const e=[],t=n.length;for(let r=0;r<t;r++)e.push(hl(n[r]));return e}else if(typeof n=="object"){const e=Object.keys(n),t=e.length,r={};for(let o=0;o<t;o++){const i=e[o];r[i]=hl(n[i])}return r}return n}function gA(n){return Object.keys(n)}function Ka(n){return Object.values(n)}function kh(n){return Object.entries(n)}function xH(n){return Object.fromEntries(n)}function g8(n,e){const t={};let r=!1;for(const[o,i]of kh(n))e(o,i)?t[o]=i:r=!0;return r?t:n}function mA(n,e){const t={};for(const[r,o]of kh(n)){const i=e(r,o);t[r]=i}return t}const _be=()=>typeof process<"u"&&!1,y4=[],Ebe=()=>{const n=y4.splice(0,y4.length);for(const e of n)e()};let m8;function Pbe(){m8||(m8=requestAnimationFrame(()=>{m8=void 0,Ebe()}))}function Mbe(n){if(_be())return n();y4.includes(n)||(y4.push(n),Pbe())}function Ibe(n,e){return n.id>e.id?1:-1}const Tbe=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function QC(n){return Tbe.test(n)}function Obe(n){return n!==null}const Ff=typeof window<"u"&&window.structuredClone?window.structuredClone:n=>n&&JSON.parse(JSON.stringify(n));let wH=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");class __{constructor(e,t){J(this,"createDefaultProperties");J(this,"migrations");J(this,"validator");J(this,"scope");J(this,"isInstance",e=>(e==null?void 0:e.typeName)===this.typeName);this.typeName=e,this.createDefaultProperties=t.createDefaultProperties,this.migrations=t.migrations,this.validator=t.validator??{validate:r=>r},this.scope=t.scope??"document"}create(e){const t={...this.createDefaultProperties(),id:this.createId()};for(const[r,o]of Object.entries(e))o!==void 0&&(t[r]=o);return t.typeName=this.typeName,t}clone(e){return{...Ff(e),id:this.createId()}}createId(e){return this.typeName+":"+(e??wH())}createCustomId(e){return this.typeName+":"+e}parseId(e){if(!this.isId(e))throw new Error(`ID "${e}" is not a valid ID for type "${this.typeName}"`);return e.slice(this.typeName.length+1)}isId(e){if(!e)return!1;for(let t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return e[this.typeName.length]===":"}withDefaultProperties(e){return new __(this.typeName,{createDefaultProperties:e,migrations:this.migrations,validator:this.validator,scope:this.scope})}validate(e){return this.validator.validate(e)}}function Yh(n,e){return new __(n,{createDefaultProperties:()=>({}),migrations:e.migrations??{currentVersion:0,firstVersion:0,migrators:{}},validator:e.validator,scope:e.scope})}class vA{constructor(){J(this,"items",new WeakMap)}get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}var x4={exports:{}};x4.exports;(function(n,e){var t=200,r="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,s="[object Arguments]",l="[object Array]",d="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",f="[object Error]",h="[object Function]",c="[object GeneratorFunction]",g="[object Map]",m="[object Number]",b="[object Null]",v="[object Object]",w="[object Promise]",_="[object Proxy]",k="[object RegExp]",y="[object Set]",S="[object String]",C="[object Symbol]",I="[object Undefined]",A="[object WeakMap]",T="[object ArrayBuffer]",L="[object DataView]",j="[object Float32Array]",$="[object Float64Array]",ee="[object Int8Array]",Q="[object Int16Array]",pe="[object Int32Array]",ie="[object Uint8Array]",te="[object Uint8ClampedArray]",Z="[object Uint16Array]",D="[object Uint32Array]",B=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,R={};R[j]=R[$]=R[ee]=R[Q]=R[pe]=R[ie]=R[te]=R[Z]=R[D]=!0,R[s]=R[l]=R[T]=R[u]=R[L]=R[p]=R[f]=R[h]=R[g]=R[m]=R[v]=R[k]=R[y]=R[S]=R[A]=!1;var Y=typeof la=="object"&&la&&la.Object===Object&&la,E=typeof self=="object"&&self&&self.Object===Object&&self,W=Y||E||Function("return this")(),F=e&&!e.nodeType&&e,z=F&&!0&&n&&!n.nodeType&&n,q=z&&z.exports===F,fe=q&&Y.process,ce=function(){try{return fe&&fe.binding&&fe.binding("util")}catch{}}(),U=ce&&ce.isTypedArray;function ve(ft,zt){for(var _n=-1,yr=ft==null?0:ft.length,Xo=0,Io=[];++_n<yr;){var fi=ft[_n];zt(fi,_n,ft)&&(Io[Xo++]=fi)}return Io}function oe(ft,zt){for(var _n=-1,yr=zt.length,Xo=ft.length;++_n<yr;)ft[Xo+_n]=zt[_n];return ft}function re(ft,zt){for(var _n=-1,yr=ft==null?0:ft.length;++_n<yr;)if(zt(ft[_n],_n,ft))return!0;return!1}function ae(ft,zt){for(var _n=-1,yr=Array(ft);++_n<ft;)yr[_n]=zt(_n);return yr}function me(ft){return function(zt){return ft(zt)}}function he(ft,zt){return ft.has(zt)}function se(ft,zt){return ft==null?void 0:ft[zt]}function ge(ft){var zt=-1,_n=Array(ft.size);return ft.forEach(function(yr,Xo){_n[++zt]=[Xo,yr]}),_n}function X(ft,zt){return function(_n){return ft(zt(_n))}}function we(ft){var zt=-1,_n=Array(ft.size);return ft.forEach(function(yr){_n[++zt]=yr}),_n}var be=Array.prototype,le=Function.prototype,ye=Object.prototype,ue=W["__core-js_shared__"],xe=le.toString,Pe=ye.hasOwnProperty,Ne=function(){var ft=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return ft?"Symbol(src)_1."+ft:""}(),Me=ye.toString,Re=RegExp("^"+xe.call(Pe).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=q?W.Buffer:void 0,Se=W.Symbol,Be=W.Uint8Array,_e=ye.propertyIsEnumerable,ze=be.splice,Ve=Se?Se.toStringTag:void 0,ut=Object.getOwnPropertySymbols,Ie=We?We.isBuffer:void 0,ot=X(Object.keys,Object),Ye=qe(W,"DataView"),Ke=qe(W,"Map"),tt=qe(W,"Promise"),pt=qe(W,"Set"),St=qe(W,"WeakMap"),Kt=qe(Object,"create"),sn=br(Ye),nn=br(Ke),Cn=br(tt),vn=br(pt),Fe=br(St),et=Se?Se.prototype:void 0,st=et?et.valueOf:void 0;function ht(ft){var zt=-1,_n=ft==null?0:ft.length;for(this.clear();++zt<_n;){var yr=ft[zt];this.set(yr[0],yr[1])}}function _t(){this.__data__=Kt?Kt(null):{},this.size=0}function Zt(ft){var zt=this.has(ft)&&delete this.__data__[ft];return this.size-=zt?1:0,zt}function Yt(ft){var zt=this.__data__;if(Kt){var _n=zt[ft];return _n===r?void 0:_n}return Pe.call(zt,ft)?zt[ft]:void 0}function bn(ft){var zt=this.__data__;return Kt?zt[ft]!==void 0:Pe.call(zt,ft)}function Wt(ft,zt){var _n=this.__data__;return this.size+=this.has(ft)?0:1,_n[ft]=Kt&&zt===void 0?r:zt,this}ht.prototype.clear=_t,ht.prototype.delete=Zt,ht.prototype.get=Yt,ht.prototype.has=bn,ht.prototype.set=Wt;function un(ft){var zt=-1,_n=ft==null?0:ft.length;for(this.clear();++zt<_n;){var yr=ft[zt];this.set(yr[0],yr[1])}}function jn(){this.__data__=[],this.size=0}function Hn(ft){var zt=this.__data__,_n=Er(zt,ft);if(_n<0)return!1;var yr=zt.length-1;return _n==yr?zt.pop():ze.call(zt,_n,1),--this.size,!0}function vt(ft){var zt=this.__data__,_n=Er(zt,ft);return _n<0?void 0:zt[_n][1]}function Nt(ft){return Er(this.__data__,ft)>-1}function Tt(ft,zt){var _n=this.__data__,yr=Er(_n,ft);return yr<0?(++this.size,_n.push([ft,zt])):_n[yr][1]=zt,this}un.prototype.clear=jn,un.prototype.delete=Hn,un.prototype.get=vt,un.prototype.has=Nt,un.prototype.set=Tt;function cn(ft){var zt=-1,_n=ft==null?0:ft.length;for(this.clear();++zt<_n;){var yr=ft[zt];this.set(yr[0],yr[1])}}function Ot(){this.size=0,this.__data__={hash:new ht,map:new(Ke||un),string:new ht}}function Ln(ft){var zt=Ue(this,ft).delete(ft);return this.size-=zt?1:0,zt}function Wn(ft){return Ue(this,ft).get(ft)}function Rn(ft){return Ue(this,ft).has(ft)}function zn(ft,zt){var _n=Ue(this,ft),yr=_n.size;return _n.set(ft,zt),this.size+=_n.size==yr?0:1,this}cn.prototype.clear=Ot,cn.prototype.delete=Ln,cn.prototype.get=Wn,cn.prototype.has=Rn,cn.prototype.set=zn;function Et(ft){var zt=-1,_n=ft==null?0:ft.length;for(this.__data__=new cn;++zt<_n;)this.add(ft[zt])}function Dt(ft){return this.__data__.set(ft,r),this}function Gt(ft){return this.__data__.has(ft)}Et.prototype.add=Et.prototype.push=Dt,Et.prototype.has=Gt;function Jt(ft){var zt=this.__data__=new un(ft);this.size=zt.size}function $n(){this.__data__=new un,this.size=0}function Kn(ft){var zt=this.__data__,_n=zt.delete(ft);return this.size=zt.size,_n}function wr(ft){return this.__data__.get(ft)}function dr(ft){return this.__data__.has(ft)}function yn(ft,zt){var _n=this.__data__;if(_n instanceof un){var yr=_n.__data__;if(!Ke||yr.length<t-1)return yr.push([ft,zt]),this.size=++_n.size,this;_n=this.__data__=new cn(yr)}return _n.set(ft,zt),this.size=_n.size,this}Jt.prototype.clear=$n,Jt.prototype.delete=Kn,Jt.prototype.get=wr,Jt.prototype.has=dr,Jt.prototype.set=yn;function hr(ft,zt){var _n=go(ft),yr=!_n&&Fr(ft),Xo=!_n&&!yr&&Mr(ft),Io=!_n&&!yr&&!Xo&&fa(ft),fi=_n||yr||Xo||Io,Bi=fi?ae(ft.length,String):[],xa=Bi.length;for(var Pi in ft)(zt||Pe.call(ft,Pi))&&!(fi&&(Pi=="length"||Xo&&(Pi=="offset"||Pi=="parent")||Io&&(Pi=="buffer"||Pi=="byteLength"||Pi=="byteOffset")||on(Pi,xa)))&&Bi.push(Pi);return Bi}function Er(ft,zt){for(var _n=ft.length;_n--;)if(Hr(ft[_n][0],zt))return _n;return-1}function Nn(ft,zt,_n){var yr=zt(ft);return go(ft)?yr:oe(yr,_n(ft))}function ar(ft){return ft==null?ft===void 0?I:b:Ve&&Ve in Object(ft)?dt(ft):ir(ft)}function Dr(ft){return ha(ft)&&ar(ft)==s}function Ir(ft,zt,_n,yr,Xo){return ft===zt?!0:ft==null||zt==null||!ha(ft)&&!ha(zt)?ft!==ft&&zt!==zt:Vt(ft,zt,_n,yr,Ir,Xo)}function Vt(ft,zt,_n,yr,Xo,Io){var fi=go(ft),Bi=go(zt),xa=fi?l:qt(ft),Pi=Bi?l:qt(zt);xa=xa==s?v:xa,Pi=Pi==s?v:Pi;var wa=xa==v,Ha=Pi==v,wi=xa==Pi;if(wi&&Mr(ft)){if(!Mr(zt))return!1;fi=!0,wa=!1}if(wi&&!wa)return Io||(Io=new Jt),fi||fa(ft)?or(ft,zt,_n,yr,Xo,Io):fr(ft,zt,xa,_n,yr,Xo,Io);if(!(_n&o)){var Fa=wa&&Pe.call(ft,"__wrapped__"),Ia=Ha&&Pe.call(zt,"__wrapped__");if(Fa||Ia){var Ys=Fa?ft.value():ft,Cr=Ia?zt.value():zt;return Io||(Io=new Jt),Xo(Ys,Cr,_n,yr,Io)}}return wi?(Io||(Io=new Jt),Fn(ft,zt,_n,yr,Xo,Io)):!1}function An(ft){if(!ti(ft)||tn(ft))return!1;var zt=si(ft)?Re:H;return zt.test(br(ft))}function pn(ft){return ha(ft)&&hi(ft.length)&&!!R[ar(ft)]}function mn(ft){if(!tr(ft))return ot(ft);var zt=[];for(var _n in Object(ft))Pe.call(ft,_n)&&_n!="constructor"&&zt.push(_n);return zt}function or(ft,zt,_n,yr,Xo,Io){var fi=_n&o,Bi=ft.length,xa=zt.length;if(Bi!=xa&&!(fi&&xa>Bi))return!1;var Pi=Io.get(ft);if(Pi&&Io.get(zt))return Pi==zt;var wa=-1,Ha=!0,wi=_n&i?new Et:void 0;for(Io.set(ft,zt),Io.set(zt,ft);++wa<Bi;){var Fa=ft[wa],Ia=zt[wa];if(yr)var Ys=fi?yr(Ia,Fa,wa,zt,ft,Io):yr(Fa,Ia,wa,ft,zt,Io);if(Ys!==void 0){if(Ys)continue;Ha=!1;break}if(wi){if(!re(zt,function(Cr,pa){if(!he(wi,pa)&&(Fa===Cr||Xo(Fa,Cr,_n,yr,Io)))return wi.push(pa)})){Ha=!1;break}}else if(!(Fa===Ia||Xo(Fa,Ia,_n,yr,Io))){Ha=!1;break}}return Io.delete(ft),Io.delete(zt),Ha}function fr(ft,zt,_n,yr,Xo,Io,fi){switch(_n){case L:if(ft.byteLength!=zt.byteLength||ft.byteOffset!=zt.byteOffset)return!1;ft=ft.buffer,zt=zt.buffer;case T:return!(ft.byteLength!=zt.byteLength||!Io(new Be(ft),new Be(zt)));case u:case p:case m:return Hr(+ft,+zt);case f:return ft.name==zt.name&&ft.message==zt.message;case k:case S:return ft==zt+"";case g:var Bi=ge;case y:var xa=yr&o;if(Bi||(Bi=we),ft.size!=zt.size&&!xa)return!1;var Pi=fi.get(ft);if(Pi)return Pi==zt;yr|=i,fi.set(ft,zt);var wa=or(Bi(ft),Bi(zt),yr,Xo,Io,fi);return fi.delete(ft),wa;case C:if(st)return st.call(ft)==st.call(zt)}return!1}function Fn(ft,zt,_n,yr,Xo,Io){var fi=_n&o,Bi=De(ft),xa=Bi.length,Pi=De(zt),wa=Pi.length;if(xa!=wa&&!fi)return!1;for(var Ha=xa;Ha--;){var wi=Bi[Ha];if(!(fi?wi in zt:Pe.call(zt,wi)))return!1}var Fa=Io.get(ft);if(Fa&&Io.get(zt))return Fa==zt;var Ia=!0;Io.set(ft,zt),Io.set(zt,ft);for(var Ys=fi;++Ha<xa;){wi=Bi[Ha];var Cr=ft[wi],pa=zt[wi];if(yr)var Yu=fi?yr(pa,Cr,wi,zt,ft,Io):yr(Cr,pa,wi,ft,zt,Io);if(!(Yu===void 0?Cr===pa||Xo(Cr,pa,_n,yr,Io):Yu)){Ia=!1;break}Ys||(Ys=wi=="constructor")}if(Ia&&!Ys){var tu=ft.constructor,Gs=zt.constructor;tu!=Gs&&"constructor"in ft&&"constructor"in zt&&!(typeof tu=="function"&&tu instanceof tu&&typeof Gs=="function"&&Gs instanceof Gs)&&(Ia=!1)}return Io.delete(ft),Io.delete(zt),Ia}function De(ft){return Nn(ft,Go,Ut)}function Ue(ft,zt){var _n=ft.__data__;return xn(zt)?_n[typeof zt=="string"?"string":"hash"]:_n.map}function qe(ft,zt){var _n=se(ft,zt);return An(_n)?_n:void 0}function dt(ft){var zt=Pe.call(ft,Ve),_n=ft[Ve];try{ft[Ve]=void 0;var yr=!0}catch{}var Xo=Me.call(ft);return yr&&(zt?ft[Ve]=_n:delete ft[Ve]),Xo}var Ut=ut?function(ft){return ft==null?[]:(ft=Object(ft),ve(ut(ft),function(zt){return _e.call(ft,zt)}))}:Mo,qt=ar;(Ye&&qt(new Ye(new ArrayBuffer(1)))!=L||Ke&&qt(new Ke)!=g||tt&&qt(tt.resolve())!=w||pt&&qt(new pt)!=y||St&&qt(new St)!=A)&&(qt=function(ft){var zt=ar(ft),_n=zt==v?ft.constructor:void 0,yr=_n?br(_n):"";if(yr)switch(yr){case sn:return L;case nn:return g;case Cn:return w;case vn:return y;case Fe:return A}return zt});function on(ft,zt){return zt=zt??a,!!zt&&(typeof ft=="number"||V.test(ft))&&ft>-1&&ft%1==0&&ft<zt}function xn(ft){var zt=typeof ft;return zt=="string"||zt=="number"||zt=="symbol"||zt=="boolean"?ft!=="__proto__":ft===null}function tn(ft){return!!Ne&&Ne in ft}function tr(ft){var zt=ft&&ft.constructor,_n=typeof zt=="function"&&zt.prototype||ye;return ft===_n}function ir(ft){return Me.call(ft)}function br(ft){if(ft!=null){try{return xe.call(ft)}catch{}try{return ft+""}catch{}}return""}function Hr(ft,zt){return ft===zt||ft!==ft&&zt!==zt}var Fr=Dr(function(){return arguments}())?Dr:function(ft){return ha(ft)&&Pe.call(ft,"callee")&&!_e.call(ft,"callee")},go=Array.isArray;function Wr(ft){return ft!=null&&hi(ft.length)&&!si(ft)}var Mr=Ie||xi;function Ro(ft,zt){return Ir(ft,zt)}function si(ft){if(!ti(ft))return!1;var zt=ar(ft);return zt==h||zt==c||zt==d||zt==_}function hi(ft){return typeof ft=="number"&&ft>-1&&ft%1==0&&ft<=a}function ti(ft){var zt=typeof ft;return ft!=null&&(zt=="object"||zt=="function")}function ha(ft){return ft!=null&&typeof ft=="object"}var fa=U?me(U):pn;function Go(ft){return Wr(ft)?hr(ft):mn(ft)}function Mo(){return[]}function xi(){return!1}n.exports=Ro})(x4,x4.exports);var Abe=x4.exports;const Lbe=bm(Abe);function $be(n){if(n.length===0)return new Set;const e=n[0],t=n.slice(1),r=new Set;for(const o of e)t.every(i=>i.has(o))&&r.add(o);return r}function jbe(n,e){const t={};for(const r of e)n.has(r)||(t.added??(t.added=new Set),t.added.add(r));for(const r of n)e.has(r)||(t.removed??(t.removed=new Set),t.removed.add(r));return t.added||t.removed?t:void 0}function bA(n,e){for(const[t,r]of Object.entries(n)){const o=r,i=e[t];if("eq"in o&&i!==o.eq||"neq"in o&&i===o.neq||"gt"in o&&(typeof i!="number"||i<=o.gt))return!1}return!0}function yA(n,e,t){const r=Object.fromEntries(Object.keys(t).map(o=>[o,new Set]));for(const[o,i]of Object.entries(t))if("eq"in i){const s=n.index(e,o).value.get(i.eq);if(s)for(const l of s)r[o].add(l)}else if("neq"in i){const a=n.index(e,o);for(const[s,l]of a.value)if(s!==i.neq)for(const d of l)r[o].add(d)}else if("gt"in i){const a=n.index(e,o);for(const[s,l]of a.value)if(s>i.gt)for(const d of l)r[o].add(d)}return $be(Object.values(r))}class Rbe{constructor(e,t){J(this,"indexCache",new Map);J(this,"historyCache",new Map);this.atoms=e,this.history=t}filterHistory(e){if(this.historyCache.has(e))return this.historyCache.get(e);const t=pr("filterHistory:"+e,(r,o)=>{if(Tg(r))return this.history.value;const i=this.history.getDiffSince(o);if(i===_c)return this.history.value;const a={added:{},removed:{},updated:{}};let s=0,l=0,d=0;for(const u of i){for(const p of Ka(u.added))if(p.typeName===e)if(a.removed[p.id]){const f=a.removed[p.id];delete a.removed[p.id],l--,f!==p&&(a.updated[p.id]=[f,p],d++)}else a.added[p.id]=p,s++;for(const[p,f]of Ka(u.updated))f.typeName===e&&(a.added[f.id]?a.added[f.id]=f:a.updated[f.id]?a.updated[f.id]=[a.updated[f.id][0],f]:(a.updated[f.id]=[p,f],d++));for(const p of Ka(u.removed))p.typeName===e&&(a.added[p.id]?(delete a.added[p.id],s--):a.updated[p.id]?(a.removed[p.id]=a.updated[p.id][0],delete a.updated[p.id],d--,l++):(a.removed[p.id]=p,l++))}return s||l||d?vv(this.history.value,a):r},{historyLength:100});return this.historyCache.set(e,t),t}index(e,t){const r=e+":"+t;if(this.indexCache.has(r))return this.indexCache.get(r);const o=this.__uncached_createIndex(e,t);return this.indexCache.set(r,o),o}__uncached_createIndex(e,t){const r=this.filterHistory(e),o=()=>{r.value;const i=new Map;for(const a of Ka(this.atoms.value)){const s=a.value;if(s.typeName===e){const l=s[t];i.has(l)||i.set(l,new Set),i.get(l).add(s.id)}}return i};return pr("index:"+e+":"+t,(i,a)=>{if(Tg(i))return o();const s=r.getDiffSince(a);if(s===_c)return o();const l=new Map,d=(h,c)=>{let g=l.get(h);g||(g=new $3(i.get(h)??new Set)),g.add(c),l.set(h,g)},u=(h,c)=>{let g=l.get(h);g||(g=new $3(i.get(h)??new Set)),g.remove(c),l.set(h,g)};for(const h of s){for(const c of Ka(h.added))if(c.typeName===e){const g=c[t];d(g,c.id)}for(const[c,g]of Ka(h.updated))if(g.typeName===e){const m=c[t],b=g[t];m!==b&&(u(m,g.id),d(b,g.id))}for(const c of Ka(h.removed))if(c.typeName===e){const g=c[t];u(g,c.id)}}let p,f;for(const[h,c]of l){const g=c.get();g&&(p||(p=new Map(i)),f||(f=new Map),g.value.size===0?p.delete(h):p.set(h,g.value),f.set(h,g.diff))}return p&&f?vv(p,f):i},{historyLength:100})}record(e,t=()=>({}),r="record:"+e+(t?":"+t.toString():"")){const o=this.ids(e,t,r);return pr(r,()=>{var i;for(const a of o.value)return(i=this.atoms.value[a])==null?void 0:i.value})}records(e,t=()=>({}),r="records:"+e+(t?":"+t.toString():"")){const o=this.ids(e,t,"ids:"+r);return pr(r,()=>[...o.value].map(i=>{const a=this.atoms.value[i];if(!a)throw new Error("no atom found for record id: "+i);return a.value}))}ids(e,t=()=>({}),r="ids:"+e+(t?":"+t.toString():"")){const o=this.filterHistory(e),i=()=>{o.value;const l=t();return Object.keys(l).length===0?new Set(Ka(this.atoms.value).flatMap(d=>{const u=d.value;return u.typeName===e?u.id:[]})):yA(this,e,l)},a=l=>{const d=i(),u=jbe(l,d);return u?vv(d,u):l},s=pr("ids_query:"+r,t,{isEqual:Lbe});return pr("query:"+r,(l,d)=>{const u=s.value;if(Tg(l))return i();if(d<s.lastChangedEpoch)return a(l);const p=o.getDiffSince(d);if(p===_c)return a(l);const f=new $3(l);for(const c of p){for(const g of Ka(c.added))g.typeName===e&&bA(u,g)&&f.add(g.id);for(const[g,m]of Ka(c.updated))m.typeName===e&&(bA(u,m)?f.add(m.id):f.remove(m.id));for(const g of Ka(c.removed))g.typeName===e&&f.remove(g.id)}const h=f.get();return h?vv(h.value,h.diff):l},{historyLength:50})}exec(e,t){const r=yA(this,e,t);if(r.size===0)return Sh;const o=this.atoms.value;return[...r].map(i=>o[i].value)}}class CH{constructor(e){J(this,"id",wH());J(this,"atoms",Fl("store_atoms",{}));J(this,"history",Fl("history",0,{historyLength:1e3}));J(this,"query",new Rbe(this.atoms,this.history));J(this,"listeners",new Set);J(this,"historyAccumulator",new Nbe);J(this,"historyReactor");J(this,"schema");J(this,"props");J(this,"scopedTypes");J(this,"onBeforeCreate");J(this,"onAfterCreate");J(this,"onBeforeChange");J(this,"onAfterChange");J(this,"onBeforeDelete");J(this,"onAfterDelete");J(this,"_runCallbacks",!0);J(this,"put",(e,t)=>{jd(()=>{const r={},o={},i=this.atoms.__unsafe__getWithoutCapture();let a=null,s,l=!1;const d=this.onBeforeCreate&&this._runCallbacks?this.onBeforeCreate:null,u=this.onBeforeChange&&this._runCallbacks?this.onBeforeChange:null,p=this.isMergingRemoteChanges?"remote":"user";for(let f=0,h=e.length;f<h;f++){s=e[f];const c=(a??i)[s.id];if(c){u&&(s=u(c.value,s,p));const g=c.__unsafe__getWithoutCapture();s=this.schema.validateRecord(this,s,t??"updateRecord",g),c.set(s);const m=c.__unsafe__getWithoutCapture();g!==m&&(l=!0,r[s.id]=[g,m])}else d&&(s=d(s,p)),l=!0,s=this.schema.validateRecord(this,s,t??"createRecord",null),o[s.id]=s,a||(a={...i}),a[s.id]=Fl("atom:"+s.id,s)}if(a&&this.atoms.set(a),!!l&&(this.updateHistory({added:o,updated:r,removed:{}}),this._runCallbacks)){const{onAfterCreate:f,onAfterChange:h}=this;f&&Object.values(o).forEach(c=>{f(c,p)}),h&&Object.values(r).forEach(([c,g])=>{h(c,g,p)})}})});J(this,"remove",e=>{jd(()=>{const t=[],r=this.isMergingRemoteChanges?"remote":"user";if(this.onBeforeDelete&&this._runCallbacks)for(const i of e){const a=this.atoms.__unsafe__getWithoutCapture()[i];a&&this.onBeforeDelete(a.value,r)===!1&&t.push(i)}let o;if(this.atoms.update(i=>{let a;for(const s of e)t.includes(s)||s in i&&(a||(a={...i}),o||(o={}),delete a[s],o[s]=i[s].value);return a??i}),!!o&&(this.updateHistory({added:{},updated:{},removed:o}),this.onAfterDelete&&this._runCallbacks)){let i;for(let a=0,s=e.length;a<s;a++)i=o[e[a]],i&&this.onAfterDelete(i,r)}})});J(this,"get",e=>{var t;return(t=this.atoms.value[e])==null?void 0:t.value});J(this,"unsafeGetWithoutCapture",e=>{var t;return(t=this.atoms.value[e])==null?void 0:t.__unsafe__getWithoutCapture()});J(this,"serialize",(e="document")=>{const t={};for(const[r,o]of kh(this.atoms.value)){const i=o.value;(e==="all"||this.scopedTypes[e].has(i.typeName))&&(t[r]=i)}return t});J(this,"allRecords",()=>Ka(this.atoms.value).map(e=>e.value));J(this,"clear",()=>{this.remove(gA(this.atoms.value))});J(this,"update",(e,t)=>{const r=this.atoms.value[e];if(!r){console.error(`Record ${e} not found. This is probably an error`);return}this.put([t(r.__unsafe__getWithoutCapture())])});J(this,"has",e=>!!this.atoms.value[e]);J(this,"listen",(e,t)=>{this._flushHistory();const r={onHistory:e,filters:{source:(t==null?void 0:t.source)??"all",scope:(t==null?void 0:t.scope)??"all"}};return this.listeners.add(r),this.historyReactor.scheduler.isActivelyListening||this.historyReactor.start(),()=>{this.listeners.delete(r),this.listeners.size===0&&this.historyReactor.stop()}});J(this,"isMergingRemoteChanges",!1);J(this,"mergeRemoteChanges",e=>{if(this.isMergingRemoteChanges)return e();try{this.isMergingRemoteChanges=!0,jd(e)}finally{this.isMergingRemoteChanges=!1}});J(this,"createComputedCache",(e,t,r)=>{const o=new vA;return{get:i=>{const a=this.atoms.value[i];if(a)return o.get(a,()=>{const s=r?pr(a.name+":equals",()=>a.value,{isEqual:r}):a;return pr(e+":"+i,()=>t(s.value))}).value}}});J(this,"createSelectedComputedCache",(e,t,r)=>{const o=new vA;return{get:i=>{const a=this.atoms.value[i];if(!a)return;const s=pr(e+":"+i+":selector",()=>t(a.value));return o.get(a,()=>pr(e+":"+i,()=>r(s.value))).value}}});J(this,"getRecordType",e=>{const t=this.schema.types[e.typeName];if(!t)throw new Error(`Record type ${e.typeName} not found`);return t});J(this,"_integrityChecker");J(this,"_isPossiblyCorrupted",!1);const{initialData:t,schema:r}=e;this.schema=r,this.props=e.props,t&&this.atoms.set(xH(kh(t).map(([o,i])=>[o,Fl("atom:"+o,this.schema.validateRecord(this,i,"initialize",null))]))),this.historyReactor=bbe("Store.historyReactor",()=>{this.history.value,this._flushHistory()},{scheduleEffect:o=>Mbe(o)}),this.scopedTypes={document:new Set(Ka(this.schema.types).filter(o=>o.scope==="document").map(o=>o.typeName)),session:new Set(Ka(this.schema.types).filter(o=>o.scope==="session").map(o=>o.typeName)),presence:new Set(Ka(this.schema.types).filter(o=>o.scope==="presence").map(o=>o.typeName))}}_flushHistory(){if(this.historyAccumulator.hasChanges()){const e=this.historyAccumulator.flush();for(const{changes:t,source:r}of e){let o=null,i=null,a=null;for(const{onHistory:s,filters:l}of this.listeners)if(!(l.source!=="all"&&l.source!==r))if(l.scope!=="all")if(l.scope==="document"){if(i??(i=this.filterChangesByScope(t,"document")),!i)continue;s({changes:i,source:r})}else if(l.scope==="session"){if(o??(o=this.filterChangesByScope(t,"session")),!o)continue;s({changes:o,source:r})}else{if(a??(a=this.filterChangesByScope(t,"presence")),!a)continue;s({changes:a,source:r})}else s({changes:t,source:r})}}}filterChangesByScope(e,t){const r={added:g8(e.added,(o,i)=>this.scopedTypes[t].has(i.typeName)),updated:g8(e.updated,(o,i)=>this.scopedTypes[t].has(i[1].typeName)),removed:g8(e.removed,(o,i)=>this.scopedTypes[t].has(i.typeName))};return Object.keys(r.added).length===0&&Object.keys(r.updated).length===0&&Object.keys(r.removed).length===0?null:r}updateHistory(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,e)}validate(e){this.allRecords().forEach(t=>this.schema.validateRecord(this,t,e,null))}getSnapshot(e="document"){return{store:this.serialize(e),schema:this.schema.serialize()}}migrateSnapshot(e){const t=this.schema.migrateStoreSnapshot(e);if(t.type==="error")throw new Error(`Failed to migrate snapshot: ${t.reason}`);return{store:t.value,schema:this.schema.serialize()}}loadSnapshot(e){const t=this.schema.migrateStoreSnapshot(e);if(t.type==="error")throw new Error(`Failed to migrate snapshot: ${t.reason}`);jd(()=>{this.clear(),this.put(Object.values(t.value)),this.ensureStoreIsUsable()})}extractingChanges(e){const t=[],r=this.historyAccumulator.intercepting(o=>t.push(o.changes));try{return jd(e),Qx(t)}finally{r()}}applyDiff(e,t=!0){const r=this._runCallbacks;try{this._runCallbacks=t,jd(()=>{const o=Ka(e.added).concat(Ka(e.updated).map(([a,s])=>s)),i=gA(e.removed);o.length&&this.put(o),i.length&&this.remove(i)})}finally{this._runCallbacks=r}}ensureStoreIsUsable(){var e;this._integrityChecker??(this._integrityChecker=this.schema.createIntegrityChecker(this)),(e=this._integrityChecker)==null||e.call(this)}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}}function Qx(n){const e={added:{},removed:{},updated:{}};for(const t of n){for(const[r,o]of kh(t.added))if(e.removed[r]){const i=e.removed[r];delete e.removed[r],i!==o&&(e.updated[r]=[i,o])}else e.added[r]=o;for(const[r,[o,i]]of kh(t.updated)){if(e.added[r]){e.added[r]=i,delete e.updated[r],delete e.removed[r];continue}if(e.updated[r]){e.updated[r][1]=i,delete e.removed[r];continue}e.updated[r]=t.updated[r],delete e.removed[r]}for(const[r,o]of kh(t.removed))e.added[r]?delete e.added[r]:e.updated[r]?(e.removed[r]=e.updated[r][0],delete e.updated[r]):e.removed[r]=o}return e}function Dbe(n){const e=[];let t=n[0],r;for(let o=1,i=n.length;o<i;o++)r=n[o],t.source!==r.source?(e.push(t),t=r):t={source:t.source,changes:Qx([t.changes,r.changes])};return e.push(t),e}class Nbe{constructor(){J(this,"_history",[]);J(this,"_interceptors",new Set)}intercepting(e){return this._interceptors.add(e),()=>{this._interceptors.delete(e)}}add(e){this._history.push(e);for(const t of this._interceptors)t(e)}flush(){const e=Dbe(this._history);return this._history=[],e}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function zbe(n){return typeof n=="object"&&n!==null&&"id"in n&&"typeName"in n}function zi(n){const{currentVersion:e,firstVersion:t,migrators:r={},subTypeKey:o,subTypeMigrations:i}=n;if(typeof e=="number"&&typeof t=="number"){if(e===t)throw Error("Current version is equal to initial version.");if(e<t)throw Error("Current version is lower than initial version.")}return{firstVersion:t??0,currentVersion:e??0,migrators:r,subTypeKey:o,subTypeMigrations:i}}var bv=(n=>(n.IncompatibleSubtype="incompatible-subtype",n.UnknownType="unknown-type",n.TargetVersionTooNew="target-version-too-new",n.TargetVersionTooOld="target-version-too-old",n.MigrationError="migration-error",n.UnrecognizedSubtype="unrecognized-subtype",n))(bv||{});function F5({record:n,migrations:e,fromVersion:t,toVersion:r}){let o=t;if(!zbe(n))throw new Error("[migrateRecord] object is not a record");const{typeName:i,id:a,...s}=n;let l=s;for(;o<r;){const d=o+1,u=e.migrators[d];if(!u)return{type:"error",reason:"target-version-too-new"};l=u.up(l),o=d}for(;o>r;){const d=o-1,u=e.migrators[o];if(!u)return{type:"error",reason:"target-version-too-old"};l=u.down(l),o=d}return{type:"success",value:{...l,id:a,typeName:i}}}function E_({value:n,migrations:e,fromVersion:t,toVersion:r}){let o=t;for(;o<r;){const i=o+1,a=e.migrators[i];if(!a)return{type:"error",reason:"target-version-too-new"};n=a.up(n),o=i}for(;o>r;){const i=o-1,a=e.migrators[o];if(!a)return{type:"error",reason:"target-version-too-old"};n=a.down(n),o=i}return{type:"success",value:n}}class P_{constructor(e,t){this.types=e,this.options=t}static create(e,t){return new P_(e,t??{})}get currentStoreVersion(){var e;return((e=this.options.snapshotMigrations)==null?void 0:e.currentVersion)??0}validateRecord(e,t,r,o){try{const i=m1(this.types,t.typeName);if(!i)throw new Error(`Missing definition for record type ${t.typeName}`);return i.validate(t)}catch(i){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:r,recordBefore:o,error:i});throw i}}migratePersistedRecord(e,t,r="up"){var p;const o=m1(this.types,e.typeName),i=t.recordVersions[e.typeName];if(!i||!o)return{type:"error",reason:bv.UnknownType};const a=o.migrations.currentVersion,s=i.version;if(a!==s){const f=F5(r==="up"?{record:e,migrations:o.migrations,fromVersion:s,toVersion:a}:{record:e,migrations:o.migrations,fromVersion:a,toVersion:s});if(f.type==="error")return f;e=f.value}if(!o.migrations.subTypeKey)return{type:"success",value:e};const l=(p=o.migrations.subTypeMigrations)==null?void 0:p[e[o.migrations.subTypeKey]],d="subTypeVersions"in i?i.subTypeVersions[e[o.migrations.subTypeKey]]:void 0;if(l===void 0)return{type:"error",reason:bv.UnrecognizedSubtype};if(d===void 0)return{type:"error",reason:bv.IncompatibleSubtype};const u=F5(r==="up"?{record:e,migrations:l,fromVersion:d,toVersion:l.currentVersion}:{record:e,migrations:l,fromVersion:l.currentVersion,toVersion:d});return u.type==="error"?u:{type:"success",value:u.value}}migrateStoreSnapshot(e){let{store:t}=e;const r=this.options.snapshotMigrations;if(!r)return{type:"success",value:t};const o=r.currentVersion,i=e.schema.storeVersion??0;if(o<i)return{type:"error",reason:bv.TargetVersionTooOld};if(o>i){const s=E_({value:t,migrations:r,fromVersion:i,toVersion:o});if(s.type==="error")return s;t=s.value}const a=[];for(const s of Ka(t)){const l=this.migratePersistedRecord(s,e.schema);if(l.type==="error")return l;l.value&&l.value!==s&&a.push(l.value)}if(a.length){t={...t};for(const s of a)t[s.id]=s}return{type:"success",value:t}}createIntegrityChecker(e){var t,r;return((r=(t=this.options).createIntegrityChecker)==null?void 0:r.call(t,e))??void 0}serialize(){var e;return{schemaVersion:1,storeVersion:((e=this.options.snapshotMigrations)==null?void 0:e.currentVersion)??0,recordVersions:Object.fromEntries(Ka(this.types).map(t=>[t.typeName,t.migrations.subTypeKey&&t.migrations.subTypeMigrations?{version:t.migrations.currentVersion,subTypeKey:t.migrations.subTypeKey,subTypeVersions:t.migrations.subTypeMigrations?Object.fromEntries(Object.entries(t.migrations.subTypeMigrations).map(([r,o])=>[r,o.currentVersion])):void 0}:{version:t.migrations.currentVersion}]))}}serializeEarliestVersion(){var e;return{schemaVersion:1,storeVersion:((e=this.options.snapshotMigrations)==null?void 0:e.firstVersion)??0,recordVersions:Object.fromEntries(Ka(this.types).map(t=>[t.typeName,t.migrations.subTypeKey&&t.migrations.subTypeMigrations?{version:t.migrations.firstVersion,subTypeKey:t.migrations.subTypeKey,subTypeVersions:t.migrations.subTypeMigrations?Object.fromEntries(Object.entries(t.migrations.subTypeMigrations).map(([r,o])=>[r,o.firstVersion])):void 0}:{version:t.migrations.firstVersion}]))}}}const Bbe=(n,e)=>{if(n.schemaVersion>e.schemaVersion)return 1;if(n.schemaVersion<e.schemaVersion)return-1;if(n.storeVersion>e.storeVersion)return 1;if(n.storeVersion<e.storeVersion)return-1;for(const t of Object.keys(n.recordVersions)){const r=n.recordVersions[t],o=e.recordVersions[t];if(r.version>o.version)return 1;if(r.version<o.version)return-1;if("subTypeVersions"in r&&!("subTypeVersions"in o))return 1;if(!("subTypeVersions"in r)&&"subTypeVersions"in o)return-1;if(!(!("subTypeVersions"in r)||!("subTypeVersions"in o)))for(const i of Object.keys(r.subTypeVersions)){const a=r.subTypeVersions[i],s=o.subTypeVersions[i];if(a>s)return 1;if(a<s)return-1}}return 0};function Hbe(n){if(!n.length)return null;let e="";for(const t of n)typeof t=="number"?e+=`.${t}`:t.startsWith("(")?e.endsWith(")")?e=`${e.slice(0,-1)}, ${t.slice(1)}`:e+=t:e+=`.${t}`;return e.startsWith(".")?e.slice(1):e}class Pa extends Error{constructor(t,r=[]){const o=Hbe(r),i=t.split(`
`).map((a,s)=>s===0?a:`  ${a}`).join(`
`);super(r?`At ${o}: ${i}`:i);J(this,"name","ValidationError");this.rawMessage=t,this.path=r}}function Hm(n,e){try{return e()}catch(t){throw t instanceof Pa?new Pa(t.rawMessage,[n,...t.path]):new Pa(t.toString(),[n])}}function sm(n){if(n===null)return"null";if(Array.isArray(n))return"an array";const e=typeof n;switch(e){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${e}`;case"object":return`an ${e}`;case"undefined":return"undefined";default:C_(e)}}class _l{constructor(e){this.validationFn=e}validate(e){return this.validationFn(e)}nullable(){return Kbe(this)}optional(){return kH(this)}refine(e){return new _l(t=>e(this.validate(t)))}check(e,t){return typeof e=="string"?this.refine(r=>(Hm(`(check ${e})`,()=>t(r)),r)):this.refine(r=>(e(r),r))}}class Fbe extends _l{constructor(e){super(t=>{const r=Vbe.validate(t);for(let o=0;o<r.length;o++)Hm(o,()=>e.validate(r[o]));return r}),this.itemValidator=e}nonEmpty(){return this.check(e=>{if(e.length===0)throw new Pa("Expected a non-empty array")})}lengthGreaterThan1(){return this.check(e=>{if(e.length<=1)throw new Pa("Expected an array with length greater than 1")})}}class w4 extends _l{constructor(e,t=!1){super(r=>{if(typeof r!="object"||r===null)throw new Pa(`Expected object, got ${sm(r)}`);for(const[o,i]of Object.entries(e))Hm(o,()=>{i.validate(m1(r,o))});if(!t){for(const o of Object.keys(r))if(!Jx(e,o))throw new Pa("Unexpected property",[o])}return r}),this.config=e,this.shouldAllowUnknownProperties=t}allowUnknownProperties(){return new w4(this.config,!0)}extend(e){return new w4({...this.config,...e})}}class M_ extends _l{constructor(e,t,r){super(o=>{if(typeof o!="object"||o===null)throw new Pa(`Expected an object, got ${sm(o)}`,[]);const i=m1(o,e);if(typeof i!="string")throw new Pa(`Expected a string for key "${e}", got ${sm(i)}`);const a=Jx(t,i)?t[i]:void 0;return a===void 0?this.unknownValueValidation(o,i):Hm(`(${e} = ${i})`,()=>a.validate(o))}),this.key=e,this.config=t,this.unknownValueValidation=r}validateUnknownVariants(e){return new M_(this.key,this.config,e)}}class Zbe extends _l{constructor(e,t){super(r=>{if(typeof r!="object"||r===null)throw new Pa(`Expected object, got ${sm(r)}`);for(const[o,i]of Object.entries(r))Hm(o,()=>{e.validate(o),t.validate(i)});return r}),this.keyValidator=e,this.valueValidator=t}}function I_(n){return new _l(e=>{if(typeof e!==n)throw new Pa(`Expected ${n}, got ${sm(e)}`);return e})}const Ube=new _l(n=>n),Po=I_("string"),Oo=I_("number").check(n=>{if(Number.isNaN(n))throw new Pa("Expected a number, got NaN");if(!Number.isFinite(n))throw new Pa(`Expected a finite number, got ${n}`)}),T_=Oo.check(n=>{if(n<0)throw new Pa(`Expected a positive number, got ${n}`)}),Yl=Oo.check(n=>{if(n<=0)throw new Pa(`Expected a non-zero positive number, got ${n}`)}),SH=Oo.check(n=>{if(!Number.isInteger(n))throw new Pa(`Expected an integer, got ${n}`)}),Z5=SH.check(n=>{if(n<0)throw new Pa(`Expected a positive integer, got ${n}`)}),Wbe=SH.check(n=>{if(n<=0)throw new Pa(`Expected a non-zero positive integer, got ${n}`)}),pi=I_("boolean");function Gl(n){return new _l(e=>{if(e!==n)throw new Pa(`Expected ${n}, got ${JSON.stringify(e)}`);return n})}const Vbe=new _l(n=>{if(!Array.isArray(n))throw new Pa(`Expected an array, got ${sm(n)}`);return n});function Ec(n){return new Fbe(n)}function di(n){return new w4(n)}function eS(n){return n===null||typeof n=="number"||typeof n=="string"||typeof n=="boolean"?!0:Array.isArray(n)?n.every(eS):typeof n=="object"?Object.values(n).every(eS):!1}const $u=new _l(n=>{if(eS(n))return n;throw new Pa(`Expected json serializable value, got ${typeof n}`)});function tS(n,e){return new Zbe(n,e)}function O_(n,e){return new M_(n,e,(t,r)=>{throw new Pa(`Expected one of ${Object.keys(e).map(o=>JSON.stringify(o)).join(" or ")}, got ${JSON.stringify(r)}`,[n])})}function Gh(n,e){return new _l(t=>{const r=t&&typeof t=="object"&&"id"in t&&typeof t.id=="string"?`${n}(id = ${t.id})`:n;return Hm(r,()=>e.validate(t))})}function dy(n){return new _l(e=>{if(!n.has(e)){const t=Array.from(n,r=>JSON.stringify(r)).join(" or ");throw new Pa(`Expected ${t}, got ${e}`)}return e})}function kH(n){return new _l(e=>{if(e!==void 0)return n.validate(e)})}function Kbe(n){return new _l(e=>e===null?null:n.validate(e))}function _H(...n){return dy(new Set(n))}function Zd(n){return Po.refine(e=>{if(!e.startsWith(`${n}:`))throw new Error(`${n} ID must start with "${n}:"`);return e})}const ew=Zd("asset");function A_(n,e){return di({id:ew,typeName:Gl("asset"),type:Gl(n),props:e,meta:$u})}const Ybe=Gh("camera",di({typeName:Gl("camera"),id:Zd("camera"),x:Oo,y:Oo,z:Oo,meta:$u})),xA={AddMeta:1},Gbe=zi({currentVersion:xA.AddMeta,migrators:{[xA.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})}}}),sl=Yh("camera",{validator:Ybe,migrations:Gbe,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}})),fb=di({x:Oo,y:Oo,z:Oo.optional()}),Mv=di({x:Oo,y:Oo,w:Oo,h:Oo}),Xbe=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),EH=dy(Xbe),qbe=di({type:EH,rotation:Oo}),PH=Oo.check(n=>{if(n<0||n>1)throw new Pa("Opacity must be between 0 and 1")}),Jbe=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),Qbe=dy(Jbe),eye=new Set(["starting","paused","active","stopping"]),MH=di({points:Ec(fb),size:T_,color:Qbe,opacity:Oo,state:dy(eye),delay:Oo}),pb=Zd("page"),tye=Gh("page",di({typeName:Gl("page"),id:pb,name:Po,index:Po,meta:$u})),wA={AddMeta:1},nye=zi({currentVersion:wA.AddMeta,migrators:{[wA.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})}}}),zh=Yh("page",{validator:tye,migrations:nye,scope:"document"}).withDefaultProperties(()=>({meta:{}}));function Dl(n){return zh.isId(n)}Zd("instance");function rye(n){const e={};for(const[r,o]of n)e[r]=kH(o);const t=Gh("instance",di({typeName:Gl("instance"),id:Zd("instance"),currentPageId:pb,followingUserId:Po.nullable(),brush:Mv.nullable(),opacityForNextShape:PH,stylesForNextShape:di(e),cursor:qbe,scribble:MH.nullable(),isFocusMode:pi,isDebugMode:pi,isToolLocked:pi,exportBackground:pi,screenBounds:Mv,zoomBrush:Mv.nullable(),isPenMode:pi,isGridMode:pi,chatMessage:Po,isChatting:pi,highlightedUserIds:Ec(Po),canMoveCamera:pi,isFocused:pi,devicePixelRatio:Oo,isCoarsePointer:pi,openMenus:Ec(Po),isChangingStyle:pi,isReadonly:pi,meta:$u}));return Yh("instance",{migrations:oye,validator:t,scope:"session"}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribble:null,cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],canMoveCamera:!0,isFocused:!1,devicePixelRatio:typeof window>"u"?1:window.devicePixelRatio,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{}}))}const Ja={AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20},oye=zi({currentVersion:Ja.ReadOnlyReadonly,migrators:{[Ja.AddTransparentExportBgs]:{up:n=>({...n,exportBackground:!0}),down:({exportBackground:n,...e})=>e},[Ja.RemoveDialog]:{up:({dialog:n,...e})=>e,down:n=>({...n,dialog:null})},[Ja.AddToolLockMode]:{up:n=>({...n,isToolLocked:!1}),down:({isToolLocked:n,...e})=>e},[Ja.RemoveExtraPropsForNextShape]:{up:({propsForNextShape:n,...e})=>({...e,propsForNextShape:Object.fromEntries(Object.entries(n).filter(([t])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)))}),down:n=>n},[Ja.AddLabelColor]:{up:({propsForNextShape:n,...e})=>({...e,propsForNextShape:{...n,labelColor:"black"}}),down:n=>{const{labelColor:e,...t}=n.propsForNextShape;return{...n,propsForNextShape:{...t}}}},[Ja.AddFollowingUserId]:{up:n=>({...n,followingUserId:null}),down:({followingUserId:n,...e})=>e},[Ja.RemoveAlignJustify]:{up:n=>{let e=n.propsForNextShape.align;return e==="justify"&&(e="start"),{...n,propsForNextShape:{...n.propsForNextShape,align:e}}},down:n=>({...n})},[Ja.AddZoom]:{up:n=>({...n,zoomBrush:null}),down:({zoomBrush:n,...e})=>e},[Ja.AddVerticalAlign]:{up:n=>({...n,propsForNextShape:{...n.propsForNextShape,verticalAlign:"middle"}}),down:n=>{const{verticalAlign:e,...t}=n.propsForNextShape;return{...n,propsForNextShape:t}}},[Ja.AddScribbleDelay]:{up:n=>n.scribble!==null?{...n,scribble:{...n.scribble,delay:0}}:{...n},down:n=>{if(n.scribble!==null){const{delay:e,...t}=n.scribble;return{...n,scribble:t}}return{...n}}},[Ja.RemoveUserId]:{up:({userId:n,...e})=>e,down:n=>({...n,userId:"user:none"})},[Ja.AddIsPenModeAndIsGridMode]:{up:n=>({...n,isPenMode:!1,isGridMode:!1}),down:({isPenMode:n,isGridMode:e,...t})=>t},[Ja.HoistOpacity]:{up:({propsForNextShape:{opacity:n,...e},...t})=>({...t,opacityForNextShape:Number(n??"1"),propsForNextShape:e}),down:({opacityForNextShape:n,...e})=>({...e,propsForNextShape:{...e.propsForNextShape,opacity:n<.175?"0.1":n<.375?"0.25":n<.625?"0.5":n<.875?"0.75":"1"}})},[Ja.AddChat]:{up:n=>({...n,chatMessage:"",isChatting:!1}),down:({chatMessage:n,isChatting:e,...t})=>t},[Ja.AddHighlightedUserIds]:{up:n=>({...n,highlightedUserIds:[]}),down:({highlightedUserIds:n,...e})=>e},[Ja.ReplacePropsForNextShapeWithStylesForNextShape]:{up:({propsForNextShape:n,...e})=>({...e,stylesForNextShape:{}}),down:({stylesForNextShape:n,...e})=>({...e,propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}})},[Ja.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})},[Ja.RemoveCursorColor]:{up:n=>{const{color:e,...t}=n.cursor;return{...n,cursor:t}},down:n=>({...n,cursor:{...n.cursor,color:"black"}})},[Ja.AddLonelyProperties]:{up:n=>({...n,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1}),down:({canMoveCamera:n,isFocused:e,devicePixelRatio:t,isCoarsePointer:r,openMenus:o,isChangingStyle:i,isReadOnly:a,...s})=>({...s})},[Ja.ReadOnlyReadonly]:{up:({isReadOnly:n,...e})=>({...e,isReadonly:n}),down:({isReadonly:n,...e})=>({...e,isReadOnly:n})}}}),wl="instance:instance",iye=Po.refine(n=>{if(!n.startsWith("page:")&&!n.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return n}),Ad=Zd("shape");function aye(n,e,t){return di({id:Ad,typeName:Gl("shape"),x:Oo,y:Oo,rotation:Oo,index:Po,parentId:iye,type:Gl(n),isLocked:pi,opacity:PH,props:e?di(e):$u,meta:t?di(t):$u})}const sye=Gh("instance_page_state",di({typeName:Gl("instance_page_state"),id:Zd("instance_page_state"),pageId:pb,selectedShapeIds:Ec(Ad),hintingShapeIds:Ec(Ad),erasingShapeIds:Ec(Ad),hoveredShapeId:Ad.nullable(),editingShapeId:Ad.nullable(),croppingShapeId:Ad.nullable(),focusedGroupId:Ad.nullable(),meta:$u})),W2={AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4},lye=zi({currentVersion:W2.RenameProperties,migrators:{[W2.AddCroppingId]:{up(n){return{...n,croppingShapeId:null}},down({croppingShapeId:n,...e}){return e}},[W2.RemoveInstanceIdAndCameraId]:{up({instanceId:n,cameraId:e,...t}){return t},down(n){return{...n,instanceId:wl,cameraId:sl.createId("void")}}},[W2.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})},[W2.RenameProperties]:{up:n=>{const{selectedShapeIds:e,hintingShapeIds:t,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:i,croppingShapeId:a,focusedGroupId:s,...l}=n;return{selectedShapeIds:e,hintingShapeIds:t,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:i,croppingShapeId:a,focusedGroupId:s,...l}},down:n=>{const{selectedShapeIds:e,hintingShapeIds:t,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:i,croppingShapeId:a,focusedGroupId:s,...l}=n;return{selectedShapeIds:e,hintingShapeIds:t,erasingShapeIds:r,hoveredShapeId:o,editingShapeId:i,croppingShapeId:a,focusedGroupId:s,...l}}}}}),ll=Yh("instance_page_state",{migrations:lye,validator:sye,scope:"session"}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}})),cye=Gh("pointer",di({typeName:Gl("pointer"),id:Zd("pointer"),x:Oo,y:Oo,lastActivityTimestamp:Oo,meta:$u})),CA={AddMeta:1},dye=zi({currentVersion:CA.AddMeta,migrators:{[CA.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})}}}),L_=Yh("pointer",{validator:cye,migrations:dye,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),C4=L_.createId("pointer"),uye=Gh("instance_presence",di({typeName:Gl("instance_presence"),id:Zd("instance_presence"),userId:Po,userName:Po,lastActivityTimestamp:Oo,followingUserId:Po.nullable(),cursor:di({x:Oo,y:Oo,type:EH,rotation:Oo}),color:Po,camera:di({x:Oo,y:Oo,z:Oo}),screenBounds:Mv,selectedShapeIds:Ec(Zd("shape")),currentPageId:Zd("page"),brush:Mv.nullable(),scribble:MH.nullable(),chatMessage:Po,meta:$u})),J0={AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5},hye=zi({currentVersion:J0.RenameSelectedShapeIds,migrators:{[J0.AddScribbleDelay]:{up:n=>n.scribble!==null?{...n,scribble:{...n.scribble,delay:0}}:{...n},down:n=>{if(n.scribble!==null){const{delay:e,...t}=n.scribble;return{...n,scribble:t}}return{...n}}},[J0.RemoveInstanceId]:{up:({instanceId:n,...e})=>e,down:n=>({...n,instanceId:wl})},[J0.AddChatMessage]:{up:n=>({...n,chatMessage:""}),down:({chatMessage:n,...e})=>e},[J0.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})},[J0.RenameSelectedShapeIds]:{up:n=>{const{selectedShapeIds:e,...t}=n;return{selectedShapeIds:e,...t}},down:n=>{const{selectedShapeIds:e,...t}=n;return{selectedShapeIds:e,...t}}}}}),fye=Yh("instance_presence",{migrations:hye,validator:uye,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedShapeIds:[],brush:null,scribble:null,chatMessage:"",meta:{}})),pye=Gh("document",di({typeName:Gl("document"),id:Gl("document:document"),gridSize:Oo,name:Po,meta:$u})),v8={AddName:1,AddMeta:2},gye=zi({currentVersion:v8.AddMeta,migrators:{[v8.AddName]:{up:n=>({...n,name:""}),down:({name:n,...e})=>e},[v8.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})}}}),$_=Yh("document",{migrations:gye,validator:pye,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),nS=$_.createId("document");function mye(n,e){return n.index<e.index?-1:n.index>e.index?1:0}function SA(n){n.typeName==="asset"&&("src"in n&&(n.src="<redacted>"),"src"in n.props&&(n.props.src="<redacted>"))}const vye=({error:n,phase:e,record:t,recordBefore:r})=>{throw k_(n,{tags:{origin:"store.validateRecord",storePhase:e,isExistingValidationIssue:e==="initialize"},extras:{recordBefore:r?SA(Ff(r)):void 0,recordAfter:SA(Ff(t))}}),n};function bye(){return[zh.create({name:"Page 1",index:"a1",meta:{}})]}function yye(n){const e=n.query.ids("page"),t=()=>{if(!n.has(nS))return n.put([$_.create({id:nS,name:n.props.defaultName})]),t();if(!n.has(C4))return n.put([L_.create({id:C4})]),t();const r=e.value;if(r.size===0)return n.put(bye()),t();const o=()=>[...r].map(l=>n.get(l)).sort(mye)[0].id,i=n.get(wl);if(i){if(!r.has(i.currentPageId))return n.put([{...i,currentPageId:o()}]),t()}else return n.put([n.schema.types.instance.create({id:wl,currentPageId:o(),exportBackground:!0})]),t();const a=new Set,s=new Set;for(const l of r){const d=ll.createId(l);n.has(d)||a.add(d);const u=sl.createId(l);n.has(u)||s.add(u)}a.size>0&&n.put([...a].map(l=>ll.create({id:l,pageId:ll.parseId(l)}))),s.size>0&&n.put([...s].map(l=>sl.create({id:l})))};return t}const xye=A_("bookmark",di({title:Po,description:Po,image:Po,src:Po.nullable()})),wye=zi({}),Cye=A_("image",di({w:Oo,h:Oo,name:Po,isAnimated:pi,mimeType:Po.nullable(),src:Po.nullable()})),b8={AddIsAnimated:1,RenameWidthHeight:2},Sye=zi({currentVersion:b8.RenameWidthHeight,migrators:{[b8.AddIsAnimated]:{up:n=>({...n,props:{...n.props,isAnimated:!1}}),down:n=>{const{isAnimated:e,...t}=n.props;return{...n,props:t}}},[b8.RenameWidthHeight]:{up:n=>{const{width:e,height:t,...r}=n.props;return{...n,props:{w:e,h:t,...r}}},down:n=>{const{w:e,h:t,...r}=n.props;return{...n,props:{width:e,height:t,...r}}}}}}),kye=A_("video",di({w:Oo,h:Oo,name:Po,isAnimated:pi,mimeType:Po.nullable(),src:Po.nullable()})),y8={AddIsAnimated:1,RenameWidthHeight:2},_ye=zi({currentVersion:y8.RenameWidthHeight,migrators:{[y8.AddIsAnimated]:{up:n=>({...n,props:{...n.props,isAnimated:!1}}),down:n=>{const{isAnimated:e,...t}=n.props;return{...n,props:t}}},[y8.RenameWidthHeight]:{up:n=>{const{width:e,height:t,...r}=n.props;return{...n,props:{w:e,h:t,...r}}},down:n=>{const{w:e,h:t,...r}=n.props;return{...n,props:{width:e,height:t,...r}}}}}}),Eye=Gh("asset",O_("type",{image:Cye,video:kye,bookmark:xye})),kA={AddMeta:1},Pye=zi({subTypeKey:"type",subTypeMigrations:{image:Sye,video:_ye,bookmark:wye},currentVersion:kA.AddMeta,migrators:{[kA.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})}}}),i1=Yh("asset",{migrations:Pye,validator:Eye,scope:"document"}).withDefaultProperties(()=>({meta:{}}));let Mye=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");class ml{constructor(e,t,r){this.id=e,this.defaultValue=t,this.type=r}static define(e,t){const{defaultValue:r,type:o=Ube}=t;return new ml(e,r,o)}static defineEnum(e,t){const{defaultValue:r,values:o}=t;return new Iye(e,r,o)}validate(e){return this.type.validate(e)}}class Iye extends ml{constructor(e,t,r){super(e,t,_H(...r)),this.values=r}}const U5={AddIsLocked:1,HoistOpacity:2,AddMeta:3},x8=zi({currentVersion:U5.AddMeta,migrators:{[U5.AddIsLocked]:{up:n=>({...n,isLocked:!1}),down:n=>{const{isLocked:e,...t}=n;return{...t}}},[U5.HoistOpacity]:{up:({props:{opacity:n,...e},...t})=>({...t,opacity:Number(n??"1"),props:e}),down:({opacity:n,...e})=>({...e,props:{...e.props,opacity:n<.175?"0.1":n<.375?"0.25":n<.625?"0.5":n<.875?"0.75":"1"}})},[U5.AddMeta]:{up:n=>({...n,meta:{}}),down:({meta:n,...e})=>({...e})}}});function a1(n){return n?n.typeName==="shape":!1}function Xc(n){return n?n.startsWith("shape:"):!1}function da(n){return`shape:${n??Mye()}`}function IH(n){const e=new Map;for(const[t,r]of Object.entries(n))if(r instanceof ml){if(e.has(r))throw new Error(`Duplicate style prop ${r.id}. Each style prop can only be used once within a shape.`);e.set(r,t)}return e}function Tye(n){return Yh("shape",{migrations:zi({currentVersion:x8.currentVersion,firstVersion:x8.firstVersion,migrators:x8.migrators,subTypeKey:"type",subTypeMigrations:mA(n,(e,t)=>t.migrations??zi({}))}),scope:"document",validator:Gh("shape",O_("type",mA(n,(e,{props:t,meta:r})=>aye(e,t,r))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))}const V2={RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4},Oye=zi({currentVersion:V2.RemoveUserDocument,migrators:{[V2.RemoveCodeAndIconShapeTypes]:{up:n=>Object.fromEntries(Object.entries(n).filter(([e,t])=>t.typeName!=="shape"||t.type!=="icon"&&t.type!=="code")),down:n=>n},[V2.AddInstancePresenceType]:{up:n=>n,down:n=>Object.fromEntries(Object.entries(n).filter(([e,t])=>t.typeName!=="instance_presence"))},[V2.RemoveTLUserAndPresenceAndAddPointer]:{up:n=>Object.fromEntries(Object.entries(n).filter(([e,t])=>!t.typeName.match(/^(user|user_presence)$/))),down:n=>Object.fromEntries(Object.entries(n).filter(([e,t])=>t.typeName!=="pointer"))},[V2.RemoveUserDocument]:{up:n=>Object.fromEntries(Object.entries(n).filter(([e,t])=>!t.typeName.match("user_document"))),down:n=>n}}});function Aye({shapes:n}){const e=new Map;for(const o of Ka(n))for(const i of IH(o.props??{}).keys()){if(e.has(i.id)&&e.get(i.id)!==i)throw new Error(`Multiple StyleProp instances with the same id: ${i.id}`);e.set(i.id,i)}const t=Tye(n),r=rye(e);return P_.create({asset:i1,camera:sl,document:$_,instance:r,instance_page_state:ll,page:zh,shape:t,instance_presence:fye,pointer:L_},{snapshotMigrations:Oye,onValidationFailure:vye,createIntegrityChecker:yye})}const TH=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],S4={lightMode:{id:"light",text:"#000000",background:"rgb(249, 250, 251)",solid:"#fcfffe",black:{solid:"#1d1d1d",semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},blue:{solid:"#4263eb",semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#adb5bd",semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4dabf7",semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#40c057",semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#ff8787",semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e599f7",semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#f76707",semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#ffc078",semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}}},darkMode:{id:"dark",text:"#f8f9fa",background:"#212529",solid:"#28292e",black:{solid:"#e1e1e1",semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},blue:{solid:"#4156be",semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#3b7b5e",semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#93989f",semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#588fc9",semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#599f57",semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#c67877",semi:"#3b3235",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#b583c9",semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#bf612e",semi:"#3a2e2a",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#aa3c37",semi:"#36292b",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#873fa3",semi:"#31293c",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#cba371",semi:"#3c3934",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}}}};function Xl(n){return n.isDarkMode?S4.darkMode:S4.lightMode}const dd=ml.defineEnum("tldraw:color",{defaultValue:"black",values:TH}),OH=ml.defineEnum("tldraw:labelColor",{defaultValue:"black",values:TH}),Z1=ml.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),lm=ml.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),ju=ml.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),uy={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},Ru=ml.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),AH=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],k4=ml.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:AH}),_4=ml.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:AH}),_A=O_("type",{binding:di({type:Gl("binding"),boundShapeId:Ad,normalizedAnchor:fb,isExact:pi}),point:di({type:Gl("point"),x:Oo,y:Oo})}),Lye={labelColor:OH,color:dd,fill:lm,dash:Z1,size:Ru,arrowheadStart:k4,arrowheadEnd:_4,font:ju,start:_A,end:_A,bend:Oo,text:Po},EA={AddLabelColor:1},$ye=zi({currentVersion:EA.AddLabelColor,migrators:{[EA.AddLabelColor]:{up:n=>({...n,props:{...n.props,labelColor:"black"}}),down:n=>{const{labelColor:e,...t}=n.props;return{...n,props:t}}}}}),jye={w:Yl,h:Yl,assetId:ew.nullable(),url:Po},PA={NullAssetId:1},Rye=zi({currentVersion:PA.NullAssetId,migrators:{[PA.NullAssetId]:{up:n=>n.props.assetId===void 0?{...n,props:{...n.props,assetId:null}}:n,down:n=>{if(n.props.assetId===null){const{assetId:e,...t}=n.props;return{...n,props:t}}return n}}}}),LH=di({type:_H("free","straight"),points:Ec(fb)}),Dye={color:dd,fill:lm,dash:Z1,size:Ru,segments:Ec(LH),isComplete:pi,isClosed:pi,isPen:pi},MA={AddInPen:1},Nye=zi({currentVersion:MA.AddInPen,migrators:{[MA.AddInPen]:{up:n=>{const{points:e}=n.props.segments[0];if(e.length===0)return{...n,props:{...n.props,isPen:!1}};let t=!(e[0].z===0||e[0].z===.5);return e[1]&&(t=t&&!(e[1].z===0||e[1].z===.5)),{...n,props:{...n.props,isPen:t}}},down:n=>{const{isPen:e,...t}=n.props;return{...n,props:{...t}}}}}});var zye={};const IA=/(^\/r\/[^/]+\/?$)/,Yi=n=>{try{return new URL(n)}catch{return}},cm=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(IA))return n},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(IA))return n}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:n=>{if(n.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!n.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${n}`},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/embed\/?$/)){const t=e.searchParams.get("url");if(t)return t}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{if(n.includes("/maps/")){const e=n.match(/@(.*),(.*),(.*)z/);let t;if(e){const[,r,o,i]=e;t=`https://${new URL(n).host.replace("www.","")}/maps/embed/v1/view?key=${zye.NEXT_PUBLIC_GC_API_KEY}&center=${r},${o}&zoom=${i}`}else t="";return t}},fromEmbedUrl:n=>{const e=Yi(n);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom"),[o,i]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${o},${i},${r}z`}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=Yi(n),t=e&&e.pathname.match(/\/v\/([^/]+)\/?/);if(t)return`https://www.val.town/embed/${t[1]}`},fromEmbedUrl:n=>{const e=Yi(n),t=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(t)return`https://www.val.town/v/${t[1]}`}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=Yi(n),t=e&&e.pathname.match(/\/s\/([^/]+)\/?/);if(t)return`https://codesandbox.io/embed/${t[1]}`},fromEmbedUrl:n=>{const e=Yi(n),t=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(t)return`https://codesandbox.io/s/${t[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,t=n.match(e);if(t){const[r,o,i]=t;return`https://codepen.io/${o}/embed/${i}`}},fromEmbedUrl:n=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,t=n.match(e);if(t){const[r,o,i]=t;return`https://codepen.io/${o}/pen/${i}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:n=>{const e=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,t=n.match(e);if(t){const[r,o]=t;return`https://scratch.mit.edu/projects/embed/${o}`}},fromEmbedUrl:n=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,t=n.match(e);if(t){const[r,o]=t;return`https://scratch.mit.edu/projects/${o}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:n=>{const e=Yi(n);if(!e)return;const t=e.hostname.replace(/^www./,"");if(t==="youtu.be")return`https://www.youtube.com/embed/${e.pathname.split("/").filter(Boolean)[0]}`;if((t==="youtube.com"||t==="m.youtube.com")&&e.pathname.match(/^\/watch/))return`https://www.youtube.com/embed/${e.searchParams.get("v")}`},fromEmbedUrl:n=>{const e=Yi(n);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r)return`https://www.youtube.com/watch?v=${r[1]}`}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:n=>{const e=Yi(n),t=e==null?void 0:e.searchParams.get("cid");if(e!=null&&e.pathname.match(/\/calendar\/u\/0/)&&t){e.pathname="/calendar/embed";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("src",t),e.href}},fromEmbedUrl:n=>{const e=Yi(n),t=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&t){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("cid",t),e.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=Yi(n);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/pub\/?$/))){e.pathname=e.pathname.replace(/\/pub$/,"/embed");const t=Array.from(e.searchParams.keys());for(const r of t)e.searchParams.delete(r);return e.href}},fromEmbedUrl:n=>{const e=Yi(n);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const t=Array.from(e.searchParams.keys());for(const r of t)e.searchParams.delete(r);return e.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/\/([^/]+)\/([^/]+)/))return n.split("/").pop()?n:void 0},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/\/([^/]+)\/([^/]+)/))return n.split("/").pop()?n:void 0}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${n}?embed=true`},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/map\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/(artist|album)\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.hostname==="vimeo.com"&&e.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+e.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.hostname==="player.vimeo.com"){const t=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(t)return"https://vimeo.com/"+t[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:n=>{const e=Yi(n);if(e&&e.hash.match(/#room=/))return n},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.hash.match(/#room=/))return n}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}/embed${e.pathname}?cell=*`;if(e&&e.pathname.match(/^\/d\/([^/]+)\/?$/)){const t=e.pathname.replace(/^\/d/,"");return`${e.origin}/embed${t}?cell=*`}},fromEmbedUrl:n=>{const e=Yi(n);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}}],Bye={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},Hye={w:Yl,h:Yl,url:Po},K2={GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4},Fye=zi({currentVersion:K2.RemovePermissionOverrides,migrators:{[K2.GenOriginalUrlInEmbed]:{up:n=>{const e=n.props.url,t=new URL(e).host.replace("www.","");let r;for(const o of cm)if(o.hostnames.includes(t))try{r=o.fromEmbedUrl(e)}catch(i){console.warn(i)}return{...n,props:{...n.props,tmpOldUrl:n.props.url,url:r??""}}},down:n=>{let e=n.props.tmpOldUrl;if(!e||e===""){const o=n.props.url,i=new URL(o).host.replace("www.","");for(const a of cm)if(a.hostnames.includes(i))try{e=a.toEmbedUrl(o)}catch(s){console.warn(s)}}const{tmpOldUrl:t,...r}=n.props;return{...n,props:{...r,url:e??""}}}},[K2.RemoveDoesResize]:{up:n=>{const{doesResize:e,...t}=n.props;return{...n,props:{...t}}},down:n=>({...n,props:{...n.props,doesResize:!0}})},[K2.RemoveTmpOldUrl]:{up:n=>{const{tmpOldUrl:e,...t}=n.props;return{...n,props:{...t}}},down:n=>({...n,props:{...n.props}})},[K2.RemovePermissionOverrides]:{up:n=>{const{overridePermissions:e,...t}=n.props;return{...n,props:{...t}}},down:n=>({...n,props:{...n.props}})}}}),Zye={w:Yl,h:Yl,name:Po},Uye=zi({}),gb=ml.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),E4=ml.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),Pu=ml.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),Wye={geo:Pu,labelColor:OH,color:dd,fill:lm,dash:Z1,size:Ru,font:ju,align:gb,verticalAlign:E4,url:Po,w:Yl,h:Yl,growY:T_,text:Po},Ef={AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7},Vye=zi({currentVersion:Ef.AddCloud,migrators:{[Ef.AddUrlProp]:{up:n=>({...n,props:{...n.props,url:""}}),down:n=>{const{url:e,...t}=n.props;return{...n,props:t}}},[Ef.AddLabelColor]:{up:n=>({...n,props:{...n.props,labelColor:"black"}}),down:n=>{const{labelColor:e,...t}=n.props;return{...n,props:t}}},[Ef.RemoveJustify]:{up:n=>{let e=n.props.align;return e==="justify"&&(e="start"),{...n,props:{...n.props,align:e}}},down:n=>({...n})},[Ef.AddCheckBox]:{up:n=>({...n}),down:n=>({...n,props:{...n.props,geo:n.props.geo==="check-box"?"rectangle":n.props.geo}})},[Ef.AddVerticalAlign]:{up:n=>({...n,props:{...n.props,verticalAlign:"middle"}}),down:n=>{const{verticalAlign:e,...t}=n.props;return{...n,props:t}}},[Ef.MigrateLegacyAlign]:{up:n=>{let e;switch(n.props.align){case"start":e="start-legacy";break;case"end":e="end-legacy";break;default:e="middle-legacy";break}return{...n,props:{...n.props,align:e}}},down:n=>{let e;switch(n.props.align){case"start-legacy":e="start";break;case"end-legacy":e="end";break;case"middle-legacy":e="middle";break;default:e=n.props.align}return{...n,props:{...n.props,align:e}}}},[Ef.AddCloud]:{up:n=>n,down:n=>{if(n.props.geo==="cloud")return{...n,props:{...n.props,geo:"rectangle"}}}}}}),Kye={},Yye=zi({}),Gye={color:dd,size:Ru,segments:Ec(LH),isComplete:pi,isPen:pi},Xye=zi({}),qye=di({topLeft:fb,bottomRight:fb}),Jye={w:Yl,h:Yl,playing:pi,url:Po,assetId:ew.nullable(),crop:qye.nullable()},w8={AddUrlProp:1,AddCropProp:2},Qye=zi({currentVersion:w8.AddCropProp,migrators:{[w8.AddUrlProp]:{up:n=>({...n,props:{...n.props,url:""}}),down:n=>{const{url:e,...t}=n.props;return{...n,props:t}}},[w8.AddCropProp]:{up:n=>({...n,props:{...n.props,crop:null}}),down:n=>{const{crop:e,...t}=n.props;return{...n,props:t}}}}}),e5e=new Set(["vertex","virtual","create"]),t5e=di({id:Po,type:dy(e5e),canBind:pi.optional(),canSnap:pi.optional(),index:Po,x:Oo,y:Oo}),P4=ml.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),n5e={color:dd,dash:Z1,size:Ru,spline:P4,handles:tS(Po,t5e)},TA={AddSnapHandles:1},r5e=zi({currentVersion:TA.AddSnapHandles,migrators:{[TA.AddSnapHandles]:{up:n=>{const e=hl(n.props.handles);for(const t in e)e[t].canSnap=!0;return{...n,props:{...n.props,handles:e}}},down:n=>{const e=hl(n.props.handles);for(const t in e)delete e[t].canSnap;return{...n,props:{...n.props,handles:e}}}}}}),o5e={color:dd,size:Ru,font:ju,align:gb,verticalAlign:E4,growY:T_,url:Po,text:Po},Y2={AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4},i5e=zi({currentVersion:Y2.AddVerticalAlign,migrators:{[Y2.AddUrlProp]:{up:n=>({...n,props:{...n.props,url:""}}),down:n=>{const{url:e,...t}=n.props;return{...n,props:t}}},[Y2.RemoveJustify]:{up:n=>{let e=n.props.align;return e==="justify"&&(e="start"),{...n,props:{...n.props,align:e}}},down:n=>({...n})},[Y2.MigrateLegacyAlign]:{up:n=>{let e;switch(n.props.align){case"start":e="start-legacy";break;case"end":e="end-legacy";break;default:e="middle-legacy";break}return{...n,props:{...n.props,align:e}}},down:n=>{let e;switch(n.props.align){case"start-legacy":e="start";break;case"end-legacy":e="end";break;case"middle-legacy":e="middle";break;default:e=n.props.align}return{...n,props:{...n.props,align:e}}}},[Y2.AddVerticalAlign]:{up:n=>({...n,props:{...n.props,verticalAlign:"middle"}}),down:n=>{const{verticalAlign:e,...t}=n.props;return{...n,props:t}}}}}),a5e={color:dd,size:Ru,font:ju,align:gb,w:Yl,text:Po,scale:Yl,autoSize:pi},OA={RemoveJustify:1},s5e=zi({currentVersion:OA.RemoveJustify,migrators:{[OA.RemoveJustify]:{up:n=>{let e=n.props.align;return e==="justify"&&(e="start"),{...n,props:{...n.props,align:e}}},down:n=>({...n})}}}),l5e={w:Yl,h:Yl,time:Oo,playing:pi,url:Po,assetId:ew.nullable()},AA={AddUrlProp:1},c5e=zi({currentVersion:AA.AddUrlProp,migrators:{[AA.AddUrlProp]:{up:n=>({...n,props:{...n.props,url:""}}),down:n=>{const{url:e,...t}=n.props;return{...n,props:t}}}}}),mb=[{locale:"ar",label:""},{locale:"ca",label:"Catal"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"fa",label:""},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"he",label:""},{locale:"it",label:"Italiano"},{locale:"ja",label:""},{locale:"ko-kr",label:""},{locale:"ku",label:""},{locale:"hi-in",label:""},{locale:"hu",label:"Magyar"},{locale:"my",label:""},{locale:"ne",label:""},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:""},{locale:"th",label:""},{locale:"tr",label:"Trke"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ting Vit"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:" ()"}];function d5e(){const n=typeof window<"u"?window.navigator.languages??["en"]:["en"];return u5e(n)}function u5e(n){for(const e of n){const t=h5e(e);if(t)return t}return"en"}const LA={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function h5e(n){const e=mb.find(o=>o.locale===n.toLowerCase());if(e)return e.locale;const[t,r]=n.split(/[-_]/).map(o=>o.toLowerCase());if(r){const o=mb.find(i=>i.locale===t);if(o)return o.locale}return t in LA?LA[t]:null}var C8={};const j_={peopleMenu:$A("peopleMenu"),highlighterTool:$A("highlighterTool",{all:!0})},es={preventDefaultLogging:Vc("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureLogging:Vc("pointerCaptureLogging",{defaults:{all:!1}}),pointerCaptureTracking:Vc("pointerCaptureTracking",{defaults:{all:!1}}),pointerCaptureTrackingObject:Vc("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),elementRemovalLogging:Vc("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:Vc("debugSvg",{defaults:{all:!1}}),throwToBlob:Vc("throwToBlob",{defaults:{all:!1}}),logMessages:Vc("uiLog",{defaults:{all:[]}}),resetConnectionEveryPing:Vc("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:Vc("debugCursors",{defaults:{all:!1}}),forceSrgb:Vc("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:Vc("debugGeometry",{defaults:{all:!1}})};typeof window<"u"&&(window.tldrawLog=n=>{es.logMessages.set(es.logMessages.value.concat(n))});if(typeof Element<"u"){const n=Element.prototype.removeChild;cy("element removal logging",()=>{es.elementRemovalLogging.value?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),n.call(this,e)}:Element.prototype.removeChild=n})}function Vc(n,{defaults:e,shouldStoreForSession:t=!0}){return $H({name:n,defaults:e,shouldStoreForSession:t})}function $A(n,e={all:!0,production:!1}){return $H({name:n,defaults:e,shouldStoreForSession:!0})}function $H(n){const e=p5e(n),t=n.shouldStoreForSession?f5e(n.name):null,r=Fl(`debug:${n.name}`,t??e);return typeof window<"u"&&(n.shouldStoreForSession&&cy(`debug:${n.name}`,()=>{const o=r.value;try{o===e?window.sessionStorage.removeItem(`tldraw_debug:${n.name}`):window.sessionStorage.setItem(`tldraw_debug:${n.name}`,JSON.stringify(o))}catch{}}),Object.defineProperty(window,`tldraw${n.name.replace(/^[a-z]/,o=>o.toUpperCase())}`,{get(){return r.value},set(o){r.set(o)},configurable:!0})),Object.assign(r,n)}function f5e(n){try{return JSON.parse((window==null?void 0:window.sessionStorage.getItem(`tldraw_debug:${n}`))??"null")}catch{return null}}function S8(n){try{return n()}catch{return null}}function p5e(n){switch(S8(()=>C8.TLDRAW_ENV)??S8(()=>C8.VERCEL_PUBLIC_TLDRAW_ENV)??S8(()=>C8.NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return n.defaults.production??n.defaults.all;case"preview":case"staging":return n.defaults.staging??n.defaults.all;default:return n.defaults.development??n.defaults.all}}function M4(n){if(n instanceof HTMLElement)return n;if(n.parentElement)return M4(n.parentElement);throw Error("Could not find a parent element of an HTML type!")}function Zi(n){n.preventDefault(),es.preventDefaultLogging.value&&console.warn("preventDefault called on event:",n)}function hy(n,e){if(n.setPointerCapture(e.pointerId),es.pointerCaptureTracking.value){const t=es.pointerCaptureTrackingObject.value;t.set(n,(t.get(n)??0)+1)}es.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",n,e)}function tw(n,e){if(n.hasPointerCapture(e.pointerId)){if(n.releasePointerCapture(e.pointerId),es.pointerCaptureTracking.value){const t=es.pointerCaptureTrackingObject.value;t.get(n)===1?t.delete(n):t.has(n)?t.set(n,t.get(n)-1):console.warn("Release without capture")}es.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",n,e)}}const rd=n=>n.stopPropagation();function Sc(n){return n.isKilled=!0,{point:{x:n.clientX,y:n.clientY,z:n.pressure},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey,pointerId:n.pointerId,button:n.button,isPen:n.pointerType==="pen"}}const R_=je.createContext({}),Dn=()=>je.useContext(R_);function g5e(){const n=Dn();return ne.useMemo(function(){let r,o;function i(f){if(!f.isKilled){if(f.button===2){n.dispatch({type:"pointer",target:"canvas",name:"right_click",...Sc(f)});return}f.button!==0&&f.button!==1&&f.button!==5||(hy(f.currentTarget,f),n.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...Sc(f)}))}}function a(f){f.isKilled||f.clientX===r&&f.clientY===o||(r=f.clientX,o=f.clientY,n.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...Sc(f)}))}function s(f){f.isKilled||f.button!==0&&f.button!==1&&f.button!==2&&f.button!==5||(r=f.clientX,o=f.clientY,tw(f.currentTarget,f),n.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...Sc(f)}))}function l(f){f.isKilled=!0,document.body.click(),Zi(f)}function d(f){f.isKilled=!0,f.target.tagName!=="A"&&f.target.tagName!=="TEXTAREA"&&Zi(f)}function u(f){Zi(f)}async function p(f){var c,g;if(Zi(f),!((g=(c=f.dataTransfer)==null?void 0:c.files)!=null&&g.length))return;const h=Array.from(f.dataTransfer.files);await n.putExternalContent({type:"files",files:h,point:n.screenToPage({x:f.clientX,y:f.clientY}),ignoreParent:!1})}return{onPointerDown:i,onPointerMove:a,onPointerUp:s,onDragOver:u,onDrop:p,onTouchStart:l,onTouchEnd:d}},[n])}function m5e(){const n=Dn();ne.useEffect(()=>{if(n.environment.isFirefox&&!n.environment.isAndroid&&!n.environment.isIos){n.updateInstanceState({isCoarsePointer:!1});return}if(window.matchMedia){const e=window.matchMedia("(pointer: coarse)"),t=()=>{n.updateInstanceState({isCoarsePointer:!!e.matches})};if(t(),e)return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}},[n])}const jH=ne.createContext(null);function v5e({container:n,children:e}){return K.jsx(jH.Provider,{value:n,children:e})}function vl(){return Cbe(ne.useContext(jH),"useContainer used outside of <Tldraw />")}function b5e(){const n=Dn(),e=vl(),t=sr("isFocused",()=>n.instanceState.isFocused,[n]);ne.useEffect(()=>{if(typeof matchMedia===void 0)return;let r=null;const o=()=>{r!=null&&r();const i=`(resolution: ${window.devicePixelRatio}dppx)`,a=matchMedia(i);a.addEventListener("change",o),r=()=>{a.removeEventListener("change",o)},n.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return o(),()=>{r==null||r()}},[n]),ne.useEffect(()=>{if(!t)return;const r=s=>{if(s.altKey&&(n.isIn("zoom")||!n.root.path.value.endsWith(".idle"))&&!G2()&&Zi(s),s.isKilled)return;switch(s.isKilled=!0,s.key){case"=":case"-":case"0":{if(s.metaKey||s.ctrlKey){Zi(s);return}break}case"Tab":{if(G2()||n.isMenuOpen)return;break}case",":{if(!G2()&&(Zi(s),!n.inputs.keys.has("Comma"))){const{x:d,y:u,z:p}=n.inputs.currentScreenPoint;n.inputs.keys.add("Comma");const f={type:"pointer",name:"pointer_down",point:{x:d,y:u,z:p},shiftKey:s.shiftKey,altKey:s.altKey,ctrlKey:s.metaKey||s.ctrlKey,pointerId:0,button:0,isPen:n.instanceState.isPenMode,target:"canvas"};n.dispatch(f);return}break}case"Escape":{n.inputs.keys.has("Escape")||(n.inputs.keys.add("Escape"),n.cancel(),e.focus());return}default:if(G2()||n.isMenuOpen)return}const l={type:"keyboard",name:n.inputs.keys.has(s.code)?"key_repeat":"key_down",key:s.key,code:s.code,shiftKey:s.shiftKey,altKey:s.altKey,ctrlKey:s.metaKey||s.ctrlKey};n.dispatch(l)},o=s=>{var d;if(s.isKilled||(s.isKilled=!0,G2()||n.isMenuOpen))return;if(s.key===","&&((d=document.activeElement)!=null&&d.ELEMENT_NODE&&Zi(s),n.inputs.keys.has(s.code))){const{x:u,y:p,z:f}=n.inputs.currentScreenPoint;n.inputs.keys.delete(s.code);const h={type:"pointer",name:"pointer_up",point:{x:u,y:p,z:f},shiftKey:s.shiftKey,altKey:s.altKey,ctrlKey:s.metaKey||s.ctrlKey,pointerId:0,button:0,isPen:n.instanceState.isPenMode,target:"canvas"};n.dispatch(h);return}const l={type:"keyboard",name:"key_up",key:s.key,code:s.code,shiftKey:s.shiftKey,altKey:s.altKey,ctrlKey:s.metaKey||s.ctrlKey};n.dispatch(l)};function i(s){var l,d;if(e.contains(s.target)){const u=s.touches[0].pageX,p=s.touches[0].radiusX||0;(u-p<10||u+p>n.viewportScreenBounds.width-10)&&(((l=s.target)==null?void 0:l.tagName)==="BUTTON"&&((d=s.target)==null||d.click()),Zi(s))}}const a=s=>{e.contains(s.target)&&(s.ctrlKey||s.metaKey)&&Zi(s)};return e.addEventListener("touchstart",i,{passive:!1}),e.addEventListener("wheel",a,{passive:!1}),document.addEventListener("gesturestart",Zi),document.addEventListener("gesturechange",Zi),document.addEventListener("gestureend",Zi),e.addEventListener("keydown",r),e.addEventListener("keyup",o),()=>{e.removeEventListener("touchstart",i),e.removeEventListener("wheel",a),document.removeEventListener("gesturestart",Zi),document.removeEventListener("gesturechange",Zi),document.removeEventListener("gestureend",Zi),e.removeEventListener("keydown",r),e.removeEventListener("keyup",o)}},[n,e,t])}const y5e=["input","select","button","textarea"];function G2(){const{activeElement:n}=document;return!!(n&&(n.getAttribute("contenteditable")||y5e.indexOf(n.tagName.toLowerCase())>-1))}const x5e={error:null};class RH extends ne.Component{constructor(){super(...arguments);J(this,"state",x5e)}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t){var r,o;(o=(r=this.props).onError)==null||o.call(r,t)}render(){const{error:t}=this.state;if(t!==null){const{fallback:r}=this.props;return K.jsx(r,{error:t})}return this.props.children}}function vb({children:n,fallback:e,...t}){return e===null?K.jsx(K.Fragment,{children:n}):K.jsx(RH,{fallback:e,...t,children:n})}class w5e{constructor(e){this.shape=e}equals(e){var t,r,o,i;return((t=this.shape)==null?void 0:t.props)===((r=e==null?void 0:e.shape)==null?void 0:r.props)&&((o=this.shape)==null?void 0:o.meta)===((i=e==null?void 0:e.shape)==null?void 0:i.meta)}}const C5e=({shape:n,util:e})=>Xx("Indicator:"+n.type,()=>e.indicator(n)),S5e=({editor:n,id:e})=>{const t=sr("shape",()=>new w5e(n.store.get(e)),[n,e]),{ShapeIndicatorErrorFallback:r}=bl();return!t.shape||t.shape.isLocked?null:K.jsx(vb,{fallback:r,onError:o=>n.annotateError(o,{origin:"react.shapeIndicator",willCrashApp:!1}),children:K.jsx(C5e,{shape:t.shape,util:n.getShapeUtil(t.shape)},t.shape.id)})},k5e=({id:n,className:e,color:t,opacity:r})=>{const o=Dn(),i=sr("transform",()=>{const a=o.getShapePageTransform(n);return a?a.toCssString():""},[o,n]);return K.jsx("svg",{className:vo("tl-overlays__item",e),children:K.jsx("g",{className:"tl-shape-indicator",transform:i,stroke:t??"var(--color-selected)",opacity:r,children:K.jsx(S5e,{editor:o,id:n})})})},fy=ne.memo(k5e);function _5e(){return K.jsx("div",{className:"tl-background"})}function Fm(n,e,t,r,o,i){ne.useLayoutEffect(()=>{const a=n.current;if(!a||e===void 0)return;let s=`translate(${e}px, ${t}px)`;r!==void 0&&(s+=` scale(${r})`),o!==void 0&&(s+=` rotate(${o}rad)`),i&&(s+=` translate(${i.x}px, ${i.y}px)`),a.style.transform=s})}const ul={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>n*(2-n),easeInOutQuad:n=>n<.5?2*n*n:-1+(4-2*n)*n,easeInCubic:n=>n*n*n,easeOutCubic:n=>--n*n*n+1,easeInOutCubic:n=>n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1- --n*n*n*n,easeInOutQuart:n=>n<.5?8*n*n*n*n:1-8*--n*n*n*n,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1+--n*n*n*n*n,easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n,easeInSine:n=>1-Math.cos(n*Math.PI/2),easeOutSine:n=>Math.sin(n*Math.PI/2),easeInOutSine:n=>-(Math.cos(Math.PI*n)-1)/2,easeInExpo:n=>n<=0?0:Math.pow(2,10*n-10),easeOutExpo:n=>n>=1?1:1-Math.pow(2,-10*n),easeInOutExpo:n=>n<=0?0:n>=1?1:n<.5?Math.pow(2,20*n-10)/2:(2-Math.pow(2,-20*n+10))/2};class Le{constructor(e=0,t=0,r=1){this.x=e,this.y=t,this.z=r}get pressure(){return this.z}set(e=this.x,t=this.y,r=this.z){return this.x=e,this.y=t,this.z=r,this}setTo({x:e=0,y:t=0,z:r=1}){return this.x=e,this.y=t,this.z=r,this}rot(e){if(e===0)return this;const{x:t,y:r}=this,o=Math.sin(e),i=Math.cos(e);return this.x=t*i-r*o,this.y=t*o+r*i,this}rotWith(e,t){if(t===0)return this;const r=this.x-e.x,o=this.y-e.y,i=Math.sin(t),a=Math.cos(t);return this.x=e.x+(r*a-o*i),this.y=e.y+(r*i+o*a),this}clone(){const{x:e,y:t,z:r}=this;return new Le(e,t,r)}sub(e){return this.x-=e.x,this.y-=e.y,this}subXY(e,t){return this.x-=e,this.y-=t,this}subScalar(e){return this.x-=e,this.y-=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}addXY(e,t){return this.x+=e,this.y+=t,this}addScalar(e){return this.x+=e,this.y+=e,this}clamp(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),t!==void 0&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}div(e){return this.x/=e,this.y/=e,this}divV(e){return this.x/=e.x,this.y/=e.y,this}mul(e){return this.x*=e,this.y*=e,this}mulV(e){return this.x*=e.x,this.y*=e.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(e,t){const r=Le.Tan(e,this);return this.add(r.mul(t))}neg(){return this.x*=-1,this.y*=-1,this}cross(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}dpr(e){return Le.Dpr(this,e)}cpr(e){return Le.Cpr(this,e)}len2(){return Le.Len2(this)}len(){return Le.Len(this)}pry(e){return Le.Pry(this,e)}per(){const{x:e,y:t}=this;return this.x=t,this.y=-e,this}uni(){return Le.Uni(this)}tan(e){return Le.Tan(this,e)}dist(e){return Le.Dist(this,e)}distanceToLineSegment(e,t){return Le.DistanceToLineSegment(e,t,this)}slope(e){return Le.Slope(this,e)}snapToGrid(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}angle(e){return Le.Angle(this,e)}toAngle(){return Le.ToAngle(this)}lrp(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}equals(e){return Le.Equals(this,e)}equalsXY(e,t){return Le.EqualsXY(this,e,t)}norm(){const e=this.len();return this.x=e===0?0:this.x/e,this.y=e===0?0:this.y/e,this}toFixed(){return Le.ToFixed(this)}toString(){return Le.ToString(Le.ToFixed(this))}toJson(){return Le.ToJson(this)}toArray(){return Le.ToArray(this)}static Add(e,t){return new Le(e.x+t.x,e.y+t.y)}static AddXY(e,t,r){return new Le(e.x+t,e.y+r)}static Sub(e,t){return new Le(e.x-t.x,e.y-t.y)}static SubXY(e,t,r){return new Le(e.x-t,e.y-r)}static AddScalar(e,t){return new Le(e.x+t,e.y+t)}static SubScalar(e,t){return new Le(e.x-t,e.y-t)}static Div(e,t){return new Le(e.x/t,e.y/t)}static Mul(e,t){return new Le(e.x*t,e.y*t)}static DivV(e,t){return new Le(e.x/t.x,e.y/t.y)}static MulV(e,t){return new Le(e.x*t.x,e.y*t.y)}static Neg(e){return new Le(-e.x,-e.y)}static Per(e){return new Le(e.y,-e.x)}static Dist2(e,t){return Le.Sub(e,t).len2()}static Abs(e){return new Le(Math.abs(e.x),Math.abs(e.y))}static Dist(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}static Dpr(e,t){return e.x*t.x+e.y*t.y}static Cross(e,t){return new Le(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z)}static Cpr(e,t){return e.x*t.y-t.x*e.y}static Len2(e){return e.x*e.x+e.y*e.y}static Len(e){return Math.sqrt(Le.Len2(e))}static Pry(e,t){return Le.Dpr(e,t)/Le.Len(t)}static Uni(e){return Le.Div(e,Le.Len(e))}static Tan(e,t){return Le.Uni(Le.Sub(e,t))}static Min(e,t){return new Le(Math.min(e.x,t.x),Math.min(e.y,t.y))}static Max(e,t){return new Le(Math.max(e.x,t.x),Math.max(e.y,t.y))}static From({x:e,y:t,z:r=1}){return new Le(e,t,r)}static FromArray(e){return new Le(e[0],e[1])}static Rot(e,t=0){const r=Math.sin(t),o=Math.cos(t);return new Le(e.x*o-e.y*r,e.x*r+e.y*o)}static RotWith(e,t,r){const o=e.x-t.x,i=e.y-t.y,a=Math.sin(r),s=Math.cos(r);return new Le(t.x+(o*s-i*a),t.y+(o*a+i*s))}static NearestPointOnLineThroughPoint(e,t,r){return Le.Mul(t,Le.Sub(r,e).pry(t)).add(e)}static NearestPointOnLineSegment(e,t,r,o=!0){const i=Le.Tan(t,e),a=Le.Add(e,Le.Mul(i,Le.Sub(r,e).pry(i)));if(o){if(a.x<Math.min(e.x,t.x))return Le.Cast(e.x<t.x?e:t);if(a.x>Math.max(e.x,t.x))return Le.Cast(e.x>t.x?e:t);if(a.y<Math.min(e.y,t.y))return Le.Cast(e.y<t.y?e:t);if(a.y>Math.max(e.y,t.y))return Le.Cast(e.y>t.y?e:t)}return a}static DistanceToLineThroughPoint(e,t,r){return Le.Dist(r,Le.NearestPointOnLineThroughPoint(e,t,r))}static DistanceToLineSegment(e,t,r,o=!0){return Le.Dist(r,Le.NearestPointOnLineSegment(e,t,r,o))}static Snap(e,t=1){return new Le(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}static Cast(e){return e instanceof Le?e:Le.From(e)}static Slope(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}static Angle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static Lrp(e,t,r){return Le.Sub(t,e).mul(r).add(e)}static Med(e,t){return new Le((e.x+t.x)/2,(e.y+t.y)/2)}static Equals(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}static EqualsXY(e,t,r){return e.x===t&&e.y===r}static Clockwise(e,t,r){return(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y)<0}static Rescale(e,t){const r=Le.Len(e);return new Le(t*e.x/r,t*e.y/r)}static ScaleWithOrigin(e,t,r){return Le.Sub(e,r).mul(t).add(r)}static ToFixed(e,t=2){return new Le(+e.x.toFixed(t),+e.y.toFixed(t),+e.z.toFixed(t))}static Nudge(e,t,r){return Le.Add(e,Le.Tan(t,e).mul(r))}static ToString(e){return`${e.x}, ${e.y}`}static ToAngle(e){let t=Math.atan2(e.y,e.x);return t<0&&(t+=Math.PI*2),t}static FromAngle(e,t=1){return new Le(Math.cos(e)*t,Math.sin(e)*t)}static ToArray(e){return[e.x,e.y,e.z]}static ToJson(e){const{x:t,y:r,z:o}=e;return{x:t,y:r,z:o}}static Average(e){const t=e.length,r=new Le(0,0);for(let o=0;o<t;o++)r.add(e[o]);return r.div(t)}static Clamp(e,t,r){return r===void 0?new Le(Math.min(Math.max(e.x,t)),Math.min(Math.max(e.y,t))):new Le(Math.min(Math.max(e.x,t),r),Math.min(Math.max(e.y,t),r))}static PointsBetween(e,t,r=6){const o=[];for(let i=0;i<r;i++){const a=ul.easeInQuad(i/(r-1)),s=Le.Lrp(e,t,a);s.z=Math.min(1,.5+Math.abs(.5-E5e(a))*.65),o.push(s)}return o}static SnapToGrid(e,t=8){return new Le(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}}const E5e=n=>n<.5?2*n*n:-1+(4-2*n)*n,_a=class _a{constructor(e=0,t=0,r=0,o=0){J(this,"x",0);J(this,"y",0);J(this,"w",0);J(this,"h",0);this.x=e,this.y=t,this.w=r,this.h=o}get point(){return new Le(this.x,this.y)}set point(e){this.x=e.x,this.y=e.y}get minX(){return this.x}set minX(e){this.x=e}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get minY(){return this.y}set minY(e){this.y=e}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get width(){return this.w}set width(e){this.w=e}get height(){return this.h}set height(e){this.h=e}get aspectRatio(){return this.width/this.height}get center(){return new Le(this.midX,this.midY)}set center(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}get corners(){return[new Le(this.minX,this.minY),new Le(this.maxX,this.minY),new Le(this.maxX,this.maxY),new Le(this.minX,this.maxY)]}get snapPoints(){return[new Le(this.minX,this.minY),new Le(this.maxX,this.minY),new Le(this.maxX,this.maxY),new Le(this.minX,this.maxY),this.center]}get sides(){const{corners:e}=this;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}get size(){return new Le(this.w,this.h)}toFixed(){return this.x=W5(this.x),this.y=W5(this.y),this.w=W5(this.w),this.h=W5(this.h),this}setTo(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}set(e=0,t=0,r=0,o=0){return this.x=e,this.y=t,this.w=r,this.h=o,this}expand(e){const t=Math.min(this.minX,e.minX),r=Math.min(this.minY,e.minY),o=Math.max(this.maxX,e.maxX),i=Math.max(this.maxY,e.maxY);return this.x=t,this.y=r,this.w=o-t,this.h=i-r,this}expandBy(e){return this.x-=e,this.y-=e,this.w+=e*2,this.h+=e*2,this}scale(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}clone(){const{x:e,y:t,w:r,h:o}=this;return new _a(e,t,r,o)}translate(e){return this.x+=e.x,this.y+=e.y,this}snapToGrid(e){const t=Math.round(this.minX/e)*e,r=Math.round(this.minY/e)*e,o=Math.round(this.maxX/e)*e,i=Math.round(this.maxY/e)*e;this.minX=t,this.minY=r,this.width=Math.max(1,o-t),this.height=Math.max(1,i-r)}collides(e){return _a.Collides(this,e)}contains(e){return _a.Contains(this,e)}includes(e){return _a.Includes(this,e)}containsPoint(e,t=0){return _a.ContainsPoint(this,e,t)}getHandlePoint(e){switch(e){case"top_left":return new Le(this.minX,this.minY);case"top_right":return new Le(this.maxX,this.minY);case"bottom_left":return new Le(this.minX,this.maxY);case"bottom_right":return new Le(this.maxX,this.maxY);case"top":return new Le(this.midX,this.minY);case"right":return new Le(this.maxX,this.midY);case"bottom":return new Le(this.midX,this.maxY);case"left":return new Le(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(e,t,r){const{minX:o,minY:i,maxX:a,maxY:s}=this;let{minX:l,minY:d,maxX:u,maxY:p}=this;switch(e){case"left":case"top_left":case"bottom_left":{l+=t;break}case"right":case"top_right":case"bottom_right":{u+=t;break}}switch(e){case"top":case"top_left":case"top_right":{d+=r;break}case"bottom":case"bottom_left":case"bottom_right":{p+=r;break}}const f=(u-l)/(a-o),h=(p-d)/(s-i),c=f<0,g=h<0;if(c){const m=u;u=l,l=m}if(g){const m=p;p=d,d=m}this.minX=l,this.minY=d,this.width=Math.abs(u-l),this.height=Math.abs(p-d)}union(e){const t=Math.min(this.minX,e.x),r=Math.min(this.minY,e.y),o=Math.max(this.maxX,e.w+e.x),i=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=r,this.width=o-t,this.height=i-r,this}static From(e){return new _a(e.x,e.y,e.w,e.h)}static FromPoints(e){if(e.length===0)return new _a;let t=1/0,r=1/0,o=-1/0,i=-1/0,a;for(let s=0,l=e.length;s<l;s++)a=e[s],t=Math.min(a.x,t),r=Math.min(a.y,r),o=Math.max(a.x,o),i=Math.max(a.y,i);return new _a(t,r,o-t,i-r)}static Expand(e,t){const r=Math.min(t.minX,e.minX),o=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),a=Math.max(t.maxY,e.maxY);return new _a(r,o,i-r,a-o)}static ExpandBy(e,t){return new _a(e.minX-t,e.minY-t,e.width+t*2,e.height+t*2)}static Resize(e,t,r,o,i=!1){const{minX:a,minY:s,maxX:l,maxY:d}=e;let{minX:u,minY:p,maxX:f,maxY:h}=e;switch(t){case"left":case"top_left":case"bottom_left":{u+=r;break}case"right":case"top_right":case"bottom_right":{f+=r;break}}switch(t){case"top":case"top_left":case"top_right":{p+=o;break}case"bottom":case"bottom_left":case"bottom_right":{h+=o;break}}const c=(f-u)/(l-a),g=(h-p)/(d-s),m=c<0,b=g<0;if(i){const w=(l-a)/(d-s),_=Math.abs(f-u),k=Math.abs(h-p),y=_*(g<0?1:-1)*(1/w),S=k*(c<0?1:-1)*w,C=w<_/k;switch(t){case"top_left":{C?p=h+y:u=f+S;break}case"top_right":{C?p=h+y:f=u-S;break}case"bottom_right":{C?h=p-y:f=u-S;break}case"bottom_left":{C?h=p-y:u=f+S;break}case"bottom":case"top":{const I=(u+f)/2,A=k*w;u=I-A/2,f=I+A/2;break}case"left":case"right":{const I=(p+h)/2,A=_/w;p=I-A/2,h=I+A/2;break}}}if(m){const w=f;f=u,u=w}if(b){const w=h;h=p,p=w}const v=new _a(u,p,Math.abs(f-u),Math.abs(h-p));return{box:v,scaleX:+(v.width/e.width*(c>0?1:-1)).toFixed(5),scaleY:+(v.height/e.height*(g>0?1:-1)).toFixed(5)}}equals(e){return _a.Equals(this,e)}static Equals(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(e){return new _a(e.x,e.y,Math.max(1,e.w),Math.max(1,e.h))}};J(_a,"Collides",(e,t)=>!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)),J(_a,"Contains",(e,t)=>e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX),J(_a,"Includes",(e,t)=>_a.Collides(e,t)||_a.Contains(e,t)),J(_a,"ContainsPoint",(e,t,r=0)=>!(t.x<e.minX-r||t.y<e.minY-r||t.x>e.maxX+r||t.y>e.maxY+r)),J(_a,"Common",e=>{let t=1/0,r=1/0,o=-1/0,i=-1/0;for(let a=0;a<e.length;a++){const s=e[a];t=Math.min(t,s.minX),r=Math.min(r,s.minY),o=Math.max(o,s.maxX),i=Math.max(i,s.maxY)}return new _a(t,r,o-t,i-r)}),J(_a,"Sides",(e,t=0)=>{const{corners:r}=e;return[[r[0],r[1]],[r[1],r[2]],[r[2],r[3]],[r[3],r[0]]]});let uo=_a;function P5e(n){switch(n){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return n}}function M5e(n){switch(n){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return n}}function I5e(n){return n==="top_left"||n==="top_right"||n==="bottom_right"||n==="bottom_left"}function Jc(n){return`${Rt(n.x)},${Rt(n.y)} `}function Qc(n,e){return`${Rt((n.x+e.x)/2)},${Rt((n.y+e.y)/2)} `}const ji=Math.PI,Ri=ji/2,Ni=ji*2,jA=Math.PI/180,T5e=Math.sin;function Rd(n,e,t){return Math.max(e,typeof t<"u"?Math.min(n,t):n)}function W5(n,e=1e10){return n?Math.round(n*e)/e:0}function Iv(n,e,t=1e-6){return Math.abs(n-e)<=t}function bb(n,e){const t=Math.pow(n-e,2)/Math.pow(n+e,2);return ji*(n+e)*(1+3*t/(10+Math.sqrt(4-3*t)))}function Ud(n){return n=n%Ni,n<0?n=n+Ni:n===0&&(n=0),n}function O5e(n,e){return n=Ud(n),e=Ud(e),n>e&&(e+=Ni),e-n}function xh(n,e){const t=(e-n)%Ni;return 2*t%Ni-t}function Kp(n,e,t){return n+xh(n,e)*t}function DH(n,e){return xh(n,e)}function A5e(n,e,t){return DH(Le.Angle(n,e),Le.Angle(n,t))}function rS(n){return(Ni+n)%Ni}function I4(n,e){const t=Ni/e;let r=Math.floor((rS(n)+t/2)/t)*t%Ni;return r<ji&&(r+=Ni),r>ji&&(r-=Ni),r}function NH(n,e){return n===e||Iv(n%(Math.PI/2)-e%(Math.PI/2),0)}function L5e(n){return n*ji/180}function $5e(n){return n*180/ji}function V5(n,e,t,r){const o=A5e(n,t,r);return e*Ni*(o/Ni)}function If(n,e,t,r){return new Le(n+t*Math.cos(r),e+t*Math.sin(r))}function k8(n,e,t){const r=n/2,o=e/2,i=[];let a=1/0,s=1/0;for(let l=0;l<t;l++){const d=Ni/t,u=-Ri+l*d,p=r+r*Math.cos(u),f=o+o*Math.sin(u);p<a&&(a=p),f<s&&(s=f),i.push(new Le(p,f))}if(a!==0||s!==0)for(let l=0;l<i.length;l++){const d=i[l];d.x-=a,d.y-=s}return i}function X2(n,e,t,r){return n<r&&t<e}function Ld(n,e,t,r){const o=Math.max(n,t),i=Math.min(e,r);return o<=i?[o,i]:null}const j5e=(n,e,t)=>{const r=Ni/n/2,o=Math.floor(n/4)*2,i=n*2-o,a=0,s=Math.floor(n/2)*2,l=Math.cos(-Ri+o*r)*e/2,d=Math.cos(-Ri+i*r)*e/2,u=Math.sin(-Ri+a*r)*t/2,p=Math.sin(-Ri+s*r)*t/2;return new uo(0,0,l-d,p-u)};function RA(n,e,t){return(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y)}function Du(n,e){let t=0,r,o;for(let i=0;i<e.length;i++)r=e[i],o=e[(i+1)%e.length],r.y<=n.y?o.y>n.y&&RA(r,o,n)>0&&(t+=1):o.y<=n.y&&RA(r,o,n)<0&&(t-=1);return t!==0}function Rt(n){return+n.toFixed(4)}function T4(n){return+n.toFixed(2)}const DA=n=>Math.abs(n)<Number.MAX_SAFE_INTEGER,_8=({brush:n,color:e,opacity:t})=>{const r=ne.useRef(null);Fm(r,n.x,n.y);const o=Rt(Math.max(1,n.w)),i=Rt(Math.max(1,n.h));return K.jsx("svg",{className:"tl-overlays__item",ref:r,children:e?K.jsxs("g",{className:"tl-brush",opacity:t,children:[K.jsx("rect",{width:o,height:i,fill:e,opacity:.75}),K.jsx("rect",{width:o,height:i,fill:"none",stroke:e,opacity:.1})]}):K.jsx("rect",{className:"tl-brush tl-brush__default",width:o,height:i})})},R5e=({className:n,zoom:e,point:t,color:r,viewport:o,opacity:i=1})=>{const a=ne.useRef(null);return Fm(a,Rd(t.x,o.minX+5/e,o.maxX-5/e),Rd(t.y,o.minY+5/e,o.maxY-5/e),1/e,Le.Angle(o.center,t)),K.jsxs("svg",{ref:a,className:vo("tl-overlays__item",n),children:[K.jsx("use",{href:"#cursor_hint",color:r,strokeWidth:3,stroke:"var(--color-background)"}),K.jsx("use",{href:"#cursor_hint",color:r,opacity:i})]})},D5e=({className:n,zoom:e,point:t,color:r,name:o,chatMessage:i})=>{const a=ne.useRef(null);return Fm(a,t==null?void 0:t.x,t==null?void 0:t.y,1/e),t?K.jsxs("div",{ref:a,className:vo("tl-overlays__item",n),children:[K.jsx("svg",{className:"tl-cursor",children:K.jsx("use",{href:"#cursor",color:r})}),i?K.jsxs(K.Fragment,{children:[o&&K.jsx("div",{className:"tl-nametag-title",style:{color:r},children:o}),K.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:r},children:i})]}):o&&K.jsx("div",{className:"tl-nametag",style:{backgroundColor:r},children:o})]}):null},NA=ne.memo(D5e),D_={openWindow:(n,e)=>window.open(n,e,"noopener noreferrer"),refreshPage:()=>window.location.reload(),hardReset:async()=>{var n;return await((n=window.__tldraw__hardReset)==null?void 0:n.call(window))}};function zH(){D_.hardReset()}function N5e(){D_.refreshPage()}const z5e="https://github.com/tldraw/tldraw/issues/new";function B5e(){}const BH=({error:n,editor:e})=>{const t=ne.useRef(null),[r,o]=ne.useState(!1),[i,a]=ne.useState(!1),[s,l]=ne.useState(!1),d=n instanceof Error?n.message:String(n),u=n instanceof Error?n.stack:null,p=sr("isDarkMode",()=>{try{if(e)return e.user.isDarkMode}catch{}return null},[e]),[f,h]=ne.useState(null);ne.useLayoutEffect(()=>{var _;p!==null&&h(p);let v=(_=t.current)==null?void 0:_.parentElement,w=!1;for(;v;){if(v.classList.contains("tl-theme__dark")||v.classList.contains("tl-theme__light")){w=!0;break}v=v.parentElement}if(w){h(null);return}h(window.matchMedia("(prefers-color-scheme: dark)").matches)},[p]),ne.useEffect(()=>{if(i){const v=setTimeout(()=>{a(!1)},2e3);return()=>clearTimeout(v)}},[i]);const c=()=>{const v=document.createElement("textarea");v.value=u??d,document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove(),a(!0)},g=()=>{N5e()},m=async()=>{zH()},b=new URL(z5e);return b.searchParams.set("title",d),b.searchParams.set("labels","bug"),b.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${u??d}
\`\`\`

My browser: ${navigator.userAgent}`),K.jsxs("div",{ref:t,className:vo("tl-container tl-error-boundary",f===null?"":f?"tl-theme__dark":"tl-theme__light"),children:[K.jsx("div",{className:"tl-error-boundary__overlay"}),e&&K.jsx(RH,{onError:B5e,fallback:()=>null,children:K.jsx(R_.Provider,{value:e,children:K.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:K.jsx(Z_,{})})})}),K.jsx("div",{className:vo("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":r&&!s}),children:s?K.jsxs(K.Fragment,{children:[K.jsx("h2",{children:"Are you sure?"}),K.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),K.jsxs("div",{className:"tl-error-boundary__content__actions",children:[K.jsx("button",{onClick:()=>l(!1),children:"Cancel"}),K.jsx("button",{className:"tl-error-boundary__reset",onClick:m,children:"Reset data"})]})]}):K.jsxs(K.Fragment,{children:[K.jsx("h2",{children:"Something's gone wrong."}),K.jsxs("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",K.jsx("a",{href:b.toString(),children:"create a GitHub issue"})," or"," ",K.jsx("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),r&&K.jsxs("div",{className:"tl-error-boundary__content__error",children:[K.jsx("pre",{children:K.jsx("code",{children:u??d})}),K.jsx("button",{onClick:c,children:i?"Copied!":"Copy"})]}),K.jsxs("div",{className:"tl-error-boundary__content__actions",children:[K.jsx("button",{onClick:()=>o(!r),children:r?"Hide details":"Show details"}),K.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[K.jsx("button",{className:"tl-error-boundary__reset",onClick:()=>l(!0),children:"Reset data"}),K.jsx("button",{className:"tl-error-boundary__refresh",onClick:g,children:"Refresh Page"})]})]})]})})]})},uh=2e3,O4=40,vh=320,Q0=[.1,.25,.5,1,2,4,8],q2=.1,Of=8,H5e=.5,F5e=.1,Z5e=.2,U5e=.005,W5e=.05,V5e=450,K5e=200,oS=6,yb=4,Y5e=32,A4={};for(let n=1;n<=Math.ceil(Of);n++)A4[n+"_dark"]=`hash_pattern_zoom_${n}_dark`,A4[n+"_light"]=`hash_pattern_zoom_${n}_light`;const G5e={duration:0,easing:ul.easeInOutCubic},R3=.09,zA=[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],X5e=6e4,HH=3e3,q5e=1200,BA={CAMERA_MOVE:-10},J5e=64,Q5e=620,Jd=8,e3e=({x:n,y:e,z:t,size:r})=>K.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[K.jsx("defs",{children:zA.map(({min:o,mid:i,step:a},s)=>{const l=a*r*t,d=.5+n*t,u=.5+e*t,p=d>0?d%l:l+d%l,f=u>0?u%l:l+u%l,h=t<i?b4(t,[o,i],[0,1]):1;return K.jsx("pattern",{id:`grid-${a}`,width:l,height:l,patternUnits:"userSpaceOnUse",children:K.jsx("circle",{className:"tl-grid-dot",cx:p,cy:f,r:1,opacity:h})},`grid-pattern-${s}`)})}),zA.map(({step:o},i)=>K.jsx("rect",{width:"100%",height:"100%",fill:`url(#grid-${o})`},`grid-rect-${i}`))]}),t3e=({handle:n,isCoarse:e,className:t,zoom:r})=>{const o=(e?20:12)/r,i=(n.type==="create"&&e?3:4)/r;return K.jsxs("g",{className:vo("tl-handle",{"tl-handle__virtual":n.type==="virtual","tl-handle__create":n.type==="create"},t),children:[K.jsx("circle",{className:"tl-handle__bg",r:o}),K.jsx("circle",{className:"tl-handle__fg",r:i})]})},n3e=({children:n})=>K.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:n}),r3e=({shapeId:n})=>K.jsx(fy,{className:"tl-user-indicator__hovered",id:n});function dm(n,e=!0){const t=n.length;if(t<2)return"";let r=n[0],o=n[1];if(t===2)return`M${Jc(r)}L${Jc(o)}`;let i="";for(let a=2,s=t-1;a<s;a++)r=n[a],o=n[a+1],i+=Qc(r,o);return e?`M${Qc(n[0],n[1])}Q${Jc(n[1])}${Qc(n[1],n[2])}T${i}${Qc(n[t-1],n[0])}${Qc(n[0],n[1])}Z`:`M${Jc(n[0])}Q${Jc(n[1])}${Qc(n[1],n[2])}${n.length>3?"T":""}${i}L${Jc(n[t-1])}`}const HA=({scribble:n,zoom:e,color:t,opacity:r,className:o})=>n.points.length?K.jsx("svg",{className:o&&vo("tl-overlays__item",o),children:K.jsx("path",{className:"tl-scribble",d:dm(n.points,!1),stroke:t??`var(--color-${n.color})`,fill:"none",strokeWidth:8/e,opacity:r??n.opacity})}):null,FH=({bounds:n,rotation:e})=>{const t=ne.useRef(null);return Fm(t,n.x,n.y,1,e),ne.useLayoutEffect(()=>{const r=t.current;r&&(r.style.width=Rt(Math.max(1,n.width))+"px",r.style.height=Rt(Math.max(1,n.height))+"px")},[n.width,n.height]),K.jsx("div",{ref:t,className:"tl-selection__bg",draggable:!1})},o3e=({bounds:n,rotation:e})=>{const t=Dn(),r=ne.useRef(null),o=sr("only selected shape",()=>t.onlySelectedShape,[t]),i=o?t.getShapeUtil(o).expandSelectionOutlinePx(o):0;return Fm(r,n==null?void 0:n.x,n==null?void 0:n.y,1,e,{x:-i,y:-i}),n=n.clone().expandBy(i).zeroFix(),K.jsx("svg",{ref:r,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:K.jsx("rect",{className:vo("tl-selection__fg__outline"),width:Rt(n.width),height:Rt(n.height)})})},i3e=()=>K.jsx("div",{className:"tl-shape-error-boundary"}),a3e=()=>K.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"});function s3e({points:n,zoom:e}){const t=2.5/e,r=n.reduce((f,h)=>Math.min(f,h.x),1/0),o=n.reduce((f,h)=>Math.max(f,h.x),-1/0),i=n.reduce((f,h)=>Math.min(f,h.y),1/0),a=n.reduce((f,h)=>Math.max(f,h.y),-1/0),s=n.some(f=>f.x===r&&f.y===i);let l,d,u,p;return s?(l=r,d=i,u=o,p=a):(l=r,d=a,u=o,p=i),K.jsxs("g",{className:"tl-snap-line",children:[K.jsx("line",{x1:l,y1:d,x2:u,y2:p}),n.map((f,h)=>K.jsx("g",{transform:`translate(${f.x},${f.y})`,children:K.jsx("path",{className:"tl-snap-point",d:`M ${-t},${-t} L ${t},${t} M ${-t},${t} L ${t},${-t}`})},h))]})}function l3e({gaps:n,direction:e,zoom:t}){const r=3.5/t;let o=[-1/0,1/0],i=null;const a=e==="horizontal";for(const l of n){if(i=Ld(o[0],o[1],a?l.startEdge[0].y:l.startEdge[0].x,a?l.startEdge[1].y:l.startEdge[1].x),i)o=i;else continue;if(i=Ld(o[0],o[1],a?l.endEdge[0].y:l.endEdge[0].x,a?l.endEdge[1].y:l.endEdge[1].x),i)o=i;else continue}if(o===null)return null;const s=(o[0]+o[1])/2;return K.jsx("g",{className:"tl-snap-line",children:n.map(({startEdge:l,endEdge:d},u)=>K.jsx(ne.Fragment,{children:a?K.jsxs(K.Fragment,{children:[K.jsx("line",{x1:l[0].x,y1:s-2*r,x2:l[1].x,y2:s+2*r}),K.jsx("line",{x1:d[0].x,y1:s-2*r,x2:d[1].x,y2:s+2*r}),K.jsx("line",{x1:l[0].x,y1:s,x2:d[0].x,y2:s}),K.jsx("line",{x1:(l[0].x+d[0].x)/2,y1:s-r,x2:(l[0].x+d[0].x)/2,y2:s+r})]}):K.jsxs(K.Fragment,{children:[K.jsx("line",{x1:s-2*r,y1:l[0].y,x2:s+2*r,y2:l[1].y}),K.jsx("line",{x1:s-2*r,y1:d[0].y,x2:s+2*r,y2:d[1].y}),K.jsx("line",{x1:s,y1:l[0].y,x2:s,y2:d[0].y}),K.jsx("line",{x1:s-r,y1:(l[0].y+d[0].y)/2,x2:s+r,y2:(l[0].y+d[0].y)/2})]})},u))})}const c3e=({className:n,line:e,zoom:t})=>K.jsx("svg",{className:vo("tl-overlays__item",n),children:e.type==="points"?K.jsx(s3e,{...e,zoom:t}):e.type==="gaps"?K.jsx(l3e,{...e,zoom:t}):null}),d3e=()=>K.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",children:K.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[K.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),K.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:K.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}),u3e=()=>null,ZH=ne.createContext({});function h3e({overrides:n,children:e}){return K.jsx(ZH.Provider,{value:ne.useMemo(()=>({Background:_5e,SvgDefs:u3e,Brush:_8,ZoomBrush:_8,CollaboratorBrush:_8,Cursor:NA,CollaboratorCursor:NA,CollaboratorHint:R5e,CollaboratorShapeIndicator:fy,Grid:e3e,Scribble:HA,SnapLine:c3e,Handles:n3e,Handle:t3e,CollaboratorScribble:HA,ErrorFallback:BH,ShapeErrorFallback:i3e,ShapeIndicatorErrorFallback:a3e,Spinner:d3e,SelectionBackground:FH,SelectionForeground:o3e,HoveredShapeIndicator:r3e,...n}),[n]),children:e})}function bl(){return ne.useContext(ZH)}const f3e=["textarea","input"];function p3e(n){const e=Dn();ne.useEffect(()=>{const t=n.current;if(!t)return;const r=o=>{var i;if(o instanceof PointerEvent&&o.pointerType==="pen"){o.isKilled=!0;const{target:a}=o;if(f3e.includes((i=a.tagName)==null?void 0:i.toLocaleLowerCase())||e.isIn("select.editing_shape"))return;Zi(o)}};return t.addEventListener("touchstart",r),t.addEventListener("touchend",r),()=>{t.removeEventListener("touchstart",r),t.addEventListener("touchend",r)}},[e,n])}function g3e(n,e,t){return Math.max(e,Math.min(n,t))}const Us={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function FA(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function ZA(n,e,t,r=.15){return r===0?g3e(n,e,t):n<e?-FA(e-n,t-e,r)+e:n>t?+FA(n-t,t-e,r)+t:n}function m3e(n,[e,t],[r,o]){const[[i,a],[s,l]]=n;return[ZA(e,i,a,r),ZA(t,s,l,o)]}function v3e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function b3e(n){var e=v3e(n,"string");return typeof e=="symbol"?e:String(e)}function al(n,e,t){return e=b3e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function Na(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UA(Object(t),!0).forEach(function(r){al(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):UA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const UH={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function WA(n){return n?n[0].toUpperCase()+n.slice(1):""}const y3e=["enter","leave"];function x3e(n=!1,e){return n&&!y3e.includes(e)}function w3e(n,e="",t=!1){const r=UH[n],o=r&&r[e]||e;return"on"+WA(n)+WA(o)+(x3e(t,o)?"Capture":"")}const C3e=["gotpointercapture","lostpointercapture"];function S3e(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=C3e.includes(e)?"capturecapture":"capture",o=!!~e.indexOf(r);return o&&(e=e.replace("capture","")),{device:e,capture:o,passive:t}}function k3e(n,e=""){const t=UH[n],r=t&&t[e]||e;return n+r}function WH(n){return"touches"in n}function _3e(n){return WH(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function E3e(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function iS(n,e){try{const t=e.clientX-n.clientX,r=e.clientY-n.clientY,o=(e.clientX+n.clientX)/2,i=(e.clientY+n.clientY)/2,a=Math.hypot(t,r);return{angle:-(Math.atan2(t,r)*180)/Math.PI,distance:a,origin:[o,i]}}catch{}return null}function P3e(n){return E3e(n).map(e=>e.identifier)}function VA(n,e){const[t,r]=Array.from(n.touches).filter(o=>e.includes(o.identifier));return iS(t,r)}const KA=40,YA=800;function VH(n){let{deltaX:e,deltaY:t,deltaMode:r}=n;return r===1?(e*=KA,t*=KA):r===2&&(e*=YA,t*=YA),[e,t]}function M3e(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:o,ctrlKey:i}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:o,ctrlKey:i})}return e}function L4(n,...e){return typeof n=="function"?n(...e):n}function I3e(){}function T3e(...n){return n.length===0?I3e:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function GA(n,e){return Object.assign({},e,n||{})}const O3e=32;class KH{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:o}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=o,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?L4(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:o}=this;t.args=this.args;let i=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,M3e(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const y=t._delta.map(Math.abs);Us.addTo(t._distance,y)}this.axisIntent&&this.axisIntent(e);const[a,s]=t._movement,[l,d]=r.threshold,{_step:u,values:p}=t;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(a)>=l&&p[0]),u[1]===!1&&(u[1]=Math.abs(s)>=d&&p[1])):(u[0]===!1&&(u[0]=Math.abs(a)>=l&&Math.sign(a)*l),u[1]===!1&&(u[1]=Math.abs(s)>=d&&Math.sign(s)*d)),t.intentional=u[0]!==!1||u[1]!==!1,!t.intentional)return;const f=[0,0];if(r.hasCustomTransform){const[y,S]=p;f[0]=u[0]!==!1?y-u[0]:0,f[1]=u[1]!==!1?S-u[1]:0}else f[0]=u[0]!==!1?a-u[0]:0,f[1]=u[1]!==!1?s-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(f);const h=t.offset,c=t._active&&!t._blocked||t.active;c&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=o[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=L4(r.bounds,t)),this.setup&&this.setup()),t.movement=f,this.computeOffset()));const[g,m]=t.offset,[[b,v],[w,_]]=t._bounds;t.overflow=[g<b?-1:g>v?1:0,m<w?-1:m>_?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const k=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=m3e(t._bounds,t.offset,k),t.delta=Us.sub(t.offset,h),this.computeMovement(),c&&(!t.last||i>O3e)){t.delta=Us.sub(t.offset,h);const y=t.delta.map(Math.abs);Us.addTo(t.distance,y),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[y[0]/i,y[1]/i],t.timeDelta=i)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const o=this.handler(Na(Na(Na({},t),e),{},{[this.aliasKey]:e.values}));o!==void 0&&(e.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function A3e([n,e],t){const r=Math.abs(n),o=Math.abs(e);if(r>o&&r>t)return"x";if(o>r&&o>t)return"y"}class L3e extends KH{constructor(...e){super(...e),al(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Us.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Us.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const o=typeof r.axisThreshold=="object"?r.axisThreshold[_3e(e)]:r.axisThreshold;t.axis=A3e(t._movement,o)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const $3e=n=>n,XA=.15,YH={enabled(n=!0){return n},eventOptions(n,e,t){return Na(Na({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[XA,XA];case!1:return[0,0];default:return Us.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Us.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||$3e},threshold(n){return Us.toVector(n,0)}},j3e=0,py=Na(Na({},YH),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=j3e){return n},bounds(n={}){if(typeof n=="function")return i=>py.bounds(n(i));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:o=1/0}=n;return[[e,t],[r,o]]}}),gy=typeof window<"u"&&window.document&&window.document.createElement;function GH(){return gy&&"ontouchstart"in window}function R3e(){return GH()||gy&&window.navigator.maxTouchPoints>1}function D3e(){return gy&&"onpointerdown"in window}function N3e(){return gy&&"exitPointerLock"in window.document}function z3e(){try{return"constructor"in GestureEvent}catch{return!1}}const ed={isBrowser:gy,gesture:z3e(),touch:GH(),touchscreen:R3e(),pointer:D3e(),pointerLock:N3e()},B3e=250,H3e=180,F3e=.5,Z3e=50,U3e=250,W3e=10,qA={mouse:0,touch:0,pen:8};Na(Na({},py),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&ed.pointerLock,ed.touch&&t?"touch":this.pointerLock?"mouse":ed.pointer&&!o?"pointer":ed.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?B3e:void 0,!(!ed.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:o=void 0}){const i=Us.toVector(n,t?r:o?1:0);return this.filterTaps=t,this.tapsThreshold=r,i},swipe({velocity:n=F3e,distance:e=Z3e,duration:t=U3e}={}){return{velocity:this.transform(Us.toVector(n)),distance:this.transform(Us.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return H3e;case!1:return 0;default:return n}},axisThreshold(n){return n?Na(Na({},qA),n):qA},keyboardDisplacement(n=W3e){return n}});function XH(n){const[e,t]=n.overflow,[r,o]=n._delta,[i,a]=n._direction;(e<0&&r>0&&i<0||e>0&&r<0&&i>0)&&(n._movement[0]=n._movementBound[0]),(t<0&&o>0&&a<0||t>0&&o<0&&a>0)&&(n._movement[1]=n._movementBound[1])}const V3e=30,K3e=100;class Y3e extends KH{constructor(...e){super(...e),al(this,"ingKey","pinching"),al(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:r}=this.state;e==="wheel"?this.state.offset=Us.add(t,r):this.state.offset=[(1+t[0])*r[0],t[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,r]=e._movement;if(!e.axis){const o=Math.abs(t)*V3e-Math.abs(r);o<0?e.axis="angle":o>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,r=this.ctrl.touchIds;if(t._active&&t._touchIds.every(i=>r.has(i))||r.size<2)return;this.start(e),t._touchIds=Array.from(r).slice(0,2);const o=VA(e,t._touchIds);o&&this.pinchStart(e,o)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,r=t._pointerEvents,o=this.ctrl.pointerIds;if(t._active&&Array.from(r.keys()).every(a=>o.has(a))||(r.size<2&&r.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);const i=iS(...Array.from(r.values()));i&&this.pinchStart(e,i)}pinchStart(e,t){const r=this.state;r.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=VA(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const r=iS(...Array.from(t.values()));r&&this.pinchMove(e,r)}pinchMove(e,t){const r=this.state,o=r._values[1],i=t.angle-o;let a=0;Math.abs(i)>270&&(a+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*a]),r.origin=t.origin,r.turns=a,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(t=>!this.ctrl.touchIds.has(t))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const r=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Us.sub(t._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&(Array.isArray(t)?!t.find(r=>e[r]):!e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-VH(e)[1]/K3e*r.offset[0],0],Us.addTo(r._movement,r._delta),XH(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const G3e=Na(Na({},YH),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!ed.touch&&ed.gesture)return"gesture";if(ed.touch&&r)return"touch";if(ed.touchscreen){if(ed.pointer)return"pointer";if(ed.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const o=a=>{const s=GA(L4(t,a),{min:-1/0,max:1/0});return[s.min,s.max]},i=a=>{const s=GA(L4(r,a),{min:-1/0,max:1/0});return[s.min,s.max]};return typeof t!="function"&&typeof r!="function"?[o(),i()]:a=>[o(a),i(a)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Us.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Na(Na({},py),{},{mouseOnly:(n=!0)=>n});class X3e extends L3e{constructor(...e){super(...e),al(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=VH(e),Us.addTo(t._movement,t._delta),XH(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const q3e=py;Na(Na({},py),{},{mouseOnly:(n=!0)=>n});const N_=new Map,aS=new Map;function J3e(n){N_.set(n.key,n.engine),aS.set(n.key,n.resolver)}const Q3e={key:"pinch",engine:Y3e,resolver:G3e},e6e={key:"wheel",engine:X3e,resolver:q3e};function t6e(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function n6e(n,e){if(n==null)return{};var t=t6e(n,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const r6e={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ed.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},o6e=["target","eventOptions","window","enabled","transform"];function D3(n={},e){const t={};for(const[r,o]of Object.entries(e))switch(typeof o){case"function":t[r]=o.call(t,n[r],r,n);break;case"object":t[r]=D3(n[r],o);break;case"boolean":o&&(t[r]=n[r]);break}return t}function i6e(n,e,t={}){const r=n,{target:o,eventOptions:i,window:a,enabled:s,transform:l}=r,d=n6e(r,o6e);if(t.shared=D3({target:o,eventOptions:i,window:a,enabled:s,transform:l},r6e),e){const u=aS.get(e);t[e]=D3(Na({shared:t.shared},d),u)}else for(const u in d){const p=aS.get(u);p&&(t[u]=D3(Na({shared:t.shared},d[u]),p))}return t}class qH{constructor(e,t){al(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,o,i){const a=this._listeners,s=k3e(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},d=Na(Na({},l),i);e.addEventListener(s,o,d);const u=()=>{e.removeEventListener(s,o,d),a.delete(u)};return a.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class a6e{constructor(){al(this,"_timeouts",new Map)}add(e,t,r=140,...o){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...o))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class s6e{constructor(e){al(this,"gestures",new Set),al(this,"_targetEventStore",new qH(this)),al(this,"gestureEventStores",{}),al(this,"gestureTimeoutStores",{}),al(this,"handlers",{}),al(this,"config",{}),al(this,"pointerIds",new Set),al(this,"touchIds",new Set),al(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),l6e(this,e)}setEventIds(e){if(WH(e))return this.touchIds=new Set(P3e(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=i6e(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let o;if(!(t.target&&(o=t.target(),!o))){if(t.enabled){for(const a of this.gestures){const s=this.config[a],l=JA(r,s.eventOptions,!!o);if(s.enabled){const d=N_.get(a);new d(this,e,a).bind(l)}}const i=JA(r,t.eventOptions,!!o);for(const a in this.nativeHandlers)i(a,"",s=>this.nativeHandlers[a](Na(Na({},this.state.shared),{},{event:s,args:e})),void 0,!0)}for(const i in r)r[i]=T3e(...r[i]);if(!o)return r;for(const i in r){const{device:a,capture:s,passive:l}=S3e(i);this._targetEventStore.add(o,a,"",r[i],{capture:s,passive:l})}}}}function eg(n,e){n.gestures.add(e),n.gestureEventStores[e]=new qH(n,e),n.gestureTimeoutStores[e]=new a6e}function l6e(n,e){e.drag&&eg(n,"drag"),e.wheel&&eg(n,"wheel"),e.scroll&&eg(n,"scroll"),e.move&&eg(n,"move"),e.pinch&&eg(n,"pinch"),e.hover&&eg(n,"hover")}const JA=(n,e,t)=>(r,o,i,a={},s=!1)=>{var l,d;const u=(l=a.capture)!==null&&l!==void 0?l:e.capture,p=(d=a.passive)!==null&&d!==void 0?d:e.passive;let f=s?r:w3e(r,o,u);t&&p&&(f+="Passive"),n[f]=n[f]||[],n[f].push(i)},c6e=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function d6e(n){const e={},t={},r=new Set;for(let o in n)c6e.test(o)?(r.add(RegExp.lastMatch),t[o]=n[o]):e[o]=n[o];return[t,e,r]}function tg(n,e,t,r,o,i){if(!n.has(t)||!N_.has(r))return;const a=t+"Start",s=t+"End",l=d=>{let u;return d.first&&a in e&&e[a](d),t in e&&(u=e[t](d)),d.last&&s in e&&e[s](d),u};o[r]=l,i[r]=i[r]||{}}function u6e(n,e){const[t,r,o]=d6e(n),i={};return tg(o,t,"onDrag","drag",i,e),tg(o,t,"onWheel","wheel",i,e),tg(o,t,"onScroll","scroll",i,e),tg(o,t,"onPinch","pinch",i,e),tg(o,t,"onMove","move",i,e),tg(o,t,"onHover","hover",i,e),{handlers:i,config:e,nativeHandlers:r}}function h6e(n,e={},t,r){const o=je.useMemo(()=>new s6e(n),[]);if(o.applyHandlers(n,r),o.applyConfig(e,t),je.useEffect(o.effect.bind(o)),je.useEffect(()=>o.clean.bind(o),[]),e.target===void 0)return o.bind.bind(o)}function f6e(n){return n.forEach(J3e),function(t,r){const{handlers:o,nativeHandlers:i,config:a}=u6e(t,r||{});return h6e(o,a,void 0,i)}}var JH="Expected a function",QA=NaN,p6e="[object Symbol]",g6e=/^\s+|\s+$/g,m6e=/^[-+]0x[0-9a-f]+$/i,v6e=/^0b[01]+$/i,b6e=/^0o[0-7]+$/i,y6e=parseInt,x6e=typeof la=="object"&&la&&la.Object===Object&&la,w6e=typeof self=="object"&&self&&self.Object===Object&&self,C6e=x6e||w6e||Function("return this")(),S6e=Object.prototype,k6e=S6e.toString,_6e=Math.max,E6e=Math.min,E8=function(){return C6e.Date.now()};function P6e(n,e,t){var r,o,i,a,s,l,d=0,u=!1,p=!1,f=!0;if(typeof n!="function")throw new TypeError(JH);e=eL(e)||0,$4(t)&&(u=!!t.leading,p="maxWait"in t,i=p?_6e(eL(t.maxWait)||0,e):i,f="trailing"in t?!!t.trailing:f);function h(y){var S=r,C=o;return r=o=void 0,d=y,a=n.apply(C,S),a}function c(y){return d=y,s=setTimeout(b,e),u?h(y):a}function g(y){var S=y-l,C=y-d,I=e-S;return p?E6e(I,i-C):I}function m(y){var S=y-l,C=y-d;return l===void 0||S>=e||S<0||p&&C>=i}function b(){var y=E8();if(m(y))return v(y);s=setTimeout(b,g(y))}function v(y){return s=void 0,f&&r?h(y):(r=o=void 0,a)}function w(){s!==void 0&&clearTimeout(s),d=0,r=l=o=s=void 0}function _(){return s===void 0?a:v(E8())}function k(){var y=E8(),S=m(y);if(r=arguments,o=this,l=y,S){if(s===void 0)return c(l);if(p)return s=setTimeout(b,e),h(l)}return s===void 0&&(s=setTimeout(b,e)),a}return k.cancel=w,k.flush=_,k}function M6e(n,e,t){var r=!0,o=!0;if(typeof n!="function")throw new TypeError(JH);return $4(t)&&(r="leading"in t?!!t.leading:r,o="trailing"in t?!!t.trailing:o),P6e(n,e,{leading:r,maxWait:e,trailing:o})}function $4(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function I6e(n){return!!n&&typeof n=="object"}function T6e(n){return typeof n=="symbol"||I6e(n)&&k6e.call(n)==p6e}function eL(n){if(typeof n=="number")return n;if(T6e(n))return QA;if($4(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=$4(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(g6e,"");var t=v6e.test(n);return t||b6e.test(n)?y6e(n.slice(2),t?2:8):m6e.test(n)?QA:+n}var O6e=M6e;const QH=bm(O6e),tL=10,A6e=/Mac|iPod|iPhone|iPad/.test(typeof window>"u"?"node":window.navigator.platform);function eF(n){let{deltaY:e,deltaX:t}=n,r=0;if(n.ctrlKey||n.altKey||n.metaKey){const o=Math.sign(n.deltaY),i=Math.abs(n.deltaY);let a=e;i>tL&&(a=tL*o),r=a/100}else n.shiftKey&&!A6e&&(t=e,e=0);return{x:-t,y:-e,z:-r}}const L6e=f6e([e6e,Q3e]);let ng;const $6e=n=>ng===void 0?(ng=n,!1):n-ng>120&&n-ng<160?(ng=n,!0):(ng=n,!1);function j6e(n){const e=Dn(),t=ne.useMemo(()=>{let r=null;const o=({event:g})=>{if(!e.instanceState.isFocused||(r=null,$6e(Date.now())))return;if(e.editingShapeId){const v=e.getShape(e.editingShapeId);if(v&&e.getShapeUtil(v).canScroll(v)){const _=e.getShapePageBounds(e.editingShapeId);if(_!=null&&_.containsPoint(e.inputs.currentPagePoint))return}}Zi(g);const m=eF(g);if(m.x===0&&m.y===0)return;const b={type:"wheel",name:"wheel",delta:m,shiftKey:g.shiftKey,altKey:g.altKey,ctrlKey:g.metaKey||g.ctrlKey};e.dispatch(b)};let i=1,a=1,s=1,l=0;const d=new Le,u=new Le,p=g=>{const m=n.current;r=null;const{event:b,origin:v,da:w}=g;b instanceof WheelEvent||(b.target===m||m!=null&&m.contains(b.target))&&(u.x=v[0],u.y=v[1],d.x=v[0],d.y=v[1],i=w[0],a=e.zoomLevel,e.dispatch({type:"pinch",name:"pinch_start",point:{x:v[0],y:v[1],z:e.zoomLevel},delta:{x:0,y:0},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey}))},f=QH(g=>{if(r===null){const m=Math.abs(l-i),b=Le.Dist(d,u);g==="gesture"&&m||g==="touch"&&m>16?r="zooming":b>16&&(r="panning")}},32);return{onWheel:o,onPinchStart:p,onPinchEnd:g=>{const m=n.current,{event:b,origin:v,offset:w}=g;if(b instanceof WheelEvent||!(b.target===m||m!=null&&m.contains(b.target)))return;const _=w[0];r=null,requestAnimationFrame(()=>{e.dispatch({type:"pinch",name:"pinch_end",point:{x:v[0],y:v[1],z:_},delta:{x:v[0],y:v[1]},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey})})},onPinch:g=>{const m=n.current,{event:b,origin:v,offset:w,da:_}=g;if(b instanceof WheelEvent||!(b.target===m||m!=null&&m.contains(b.target)))return;const k=!("touches"in b);l=_[0],(k||l>64)&&(s=w[0]);const y=v[0]-u.x,S=v[1]-u.y;switch(u.x=v[0],u.y=v[1],f(k?"gesture":"touch"),r){case"zooming":{e.dispatch({type:"pinch",name:"pinch",point:{x:v[0],y:v[1],z:s},delta:{x:y,y:S},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey});break}case"panning":{e.dispatch({type:"pinch",name:"pinch",point:{x:v[0],y:v[1],z:a},delta:{x:y,y:S},shiftKey:b.shiftKey,altKey:b.altKey,ctrlKey:b.metaKey||b.ctrlKey});break}}}}},[e,n]);L6e(t,{target:n,eventOptions:{passive:!1},pinch:{from:()=>[e.zoomLevel,0],scaleBounds:()=>({from:e.zoomLevel,max:8,min:.05})}})}function P8(n,e,t){const r=n.getShape(e),o=n.getShapeHandles(r);return{shape:r,handle:o.find(i=>i.id===t)}}function R6e(n,e){const t=Dn();return ne.useMemo(()=>{const r=l=>{if(l.isKilled)return;const d=M4(l.currentTarget);hy(d,l);const{shape:u,handle:p}=P8(t,n,e);p&&t.dispatch({type:"pointer",target:"handle",handle:p,shape:u,name:"pointer_down",...Sc(l)})};let o,i;return{onPointerDown:r,onPointerMove:l=>{if(l.isKilled||l.clientX===o&&l.clientY===i)return;o=l.clientX,i=l.clientY;const{shape:d,handle:u}=P8(t,n,e);u&&t.dispatch({type:"pointer",target:"handle",handle:u,shape:d,name:"pointer_move",...Sc(l)})},onPointerUp:l=>{if(l.isKilled)return;const d=M4(l.currentTarget);tw(d,l);const{shape:u,handle:p}=P8(t,n,e);p&&t.dispatch({type:"pointer",target:"handle",handle:p,shape:u,name:"pointer_up",...Sc(l)})}}},[t,n,e])}function D6e(){const n=Dn();ne.useLayoutEffect(()=>{const e=QH(()=>{n.instanceState.isFocused&&n.updateViewportScreenBounds()},200,{trailing:!0});e();const t=setInterval(e,1e3);return window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{clearInterval(t),window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}})}const $i=class $i{constructor(e,t,r,o,i,a){J(this,"a",1);J(this,"b",0);J(this,"c",0);J(this,"d",1);J(this,"e",0);J(this,"f",0);this.a=e,this.b=t,this.c=r,this.d=o,this.e=i,this.f=a}equals(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(e){const t=e,{a:r,b:o,c:i,d:a,e:s,f:l}=this;return this.a=r*t.a+i*t.b,this.c=r*t.c+i*t.d,this.e=r*t.e+i*t.f+s,this.b=o*t.a+a*t.b,this.d=o*t.c+a*t.d,this.f=o*t.e+a*t.f+l,this}rotate(e,t,r){return e===0?this:t===void 0?this.multiply($i.Rotate(e)):this.translate(t,r).multiply($i.Rotate(e)).translate(-t,-r)}translate(e,t){return this.multiply($i.Translate(e,t))}scale(e,t){return this.multiply($i.Scale(e,t))}invert(){const{a:e,b:t,c:r,d:o,e:i,f:a}=this,s=e*o-t*r;return this.a=o/s,this.b=t/-s,this.c=r/-s,this.d=e/s,this.e=(o*i-r*a)/-s,this.f=(t*i-e*a)/s,this}applyToPoint(e){return $i.applyToPoint(this,e)}applyToPoints(e){return $i.applyToPoints(this,e)}rotation(){return $i.Rotation(this)}point(){return $i.Point(this)}decomposed(){return $i.Decompose(this)}toCssString(){return $i.toCssString(this)}setTo(e){return Object.assign(this,e),this}decompose(){return $i.Decompose(this)}clone(){return new $i(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new $i(1,0,0,1,0,0)}static Translate(e,t){return new $i(1,0,0,1,e,t)}static Rotate(e,t,r){if(e===0)return $i.Identity();const o=Math.cos(e),i=Math.sin(e),a=new $i(o,i,-i,o,0,0);return t===void 0?a:$i.Compose($i.Translate(t,r),a,$i.Translate(-t,-r))}static Multiply(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}static Inverse(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}static Absolute(e){const t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}static Compose(...e){const t=$i.Identity();for(let r=0,o=e.length;r<o;r++)t.multiply(e[r]);return t}static Point(e){return new Le(e.e,e.f)}static Rotation(e){let t;if(e.a!==0||e.c!==0){const r=Math.hypot(e.a,e.c);t=Math.acos(e.a/r)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const r=Math.hypot(e.b,e.d);t=Ri+Math.acos(e.b/r)*(e.d>0?-1:1)}else t=0;return rS(t)}static Decompose(e){let t,r,o;if(e.a!==0||e.c!==0){const i=Math.hypot(e.a,e.c);t=i,r=(e.a*e.d-e.b*e.c)/i,o=Math.acos(e.a/i)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const i=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/i,r=i,o=Ri+Math.acos(e.b/i)*(e.d>0?-1:1)}else t=0,r=0,o=0;return{x:e.e,y:e.f,scaleX:t,scaleY:r,rotation:rS(o)}}static Smooth(e,t=1e10){return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}static toCssString(e){return`matrix(${Rt(e.a)}, ${Rt(e.b)}, ${Rt(e.c)}, ${Rt(e.d)}, ${Rt(e.e)}, ${Rt(e.f)})`}static applyToPoint(e,t){return new Le(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}static applyToXY(e,t,r){return[e.a*t+e.c*r+e.e,e.b*t+e.d*r+e.f]}static applyToPoints(e,t){return t.map(r=>new Le(e.a*r.x+e.c*r.y+e.e,e.b*r.x+e.d*r.y+e.f,r.z))}static applyToBounds(e,t){return new uo(e.e+t.minX,e.f+t.minY,t.width,t.height)}static From(e){return new $i(e.a,e.b,e.c,e.d,e.e,e.f)}static Cast(e){return e instanceof $i?e:$i.From(e)}};J($i,"Scale",(e,t,r,o)=>{const i=new $i(e,0,0,0,t,0);return r===void 0?i:$i.Compose($i.Translate(r,o),i,$i.Translate(-r,-o))});let Yr=$i;function N6e(n=!0){const[e,t]=ne.useState(0),r=Dn();ne.useEffect(()=>{if(!n)return;const o=()=>t(i=>i+1);return r.on("tick",o),()=>{r.off("tick",o)}},[r,n])}const z6e=gi(function({showStroke:e=!0,showVertices:t=!0,showClosestPointOnOutline:r=!0}){const o=Dn();N6e(r);const{zoomLevel:i,renderingShapes:a,inputs:{currentPagePoint:s}}=o;return K.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:a.map(l=>{const d=o.getShape(l.id);if(d.type==="group")return null;const u=o.getShapeGeometry(d),p=o.getShapePageTransform(d),f=o.getPointInShapeSpace(d,s),h=u.nearestPoint(f),c=u.distanceToPoint(f),{vertices:g}=u;return K.jsxs("g",{transform:p.toCssString(),children:[e&&K.jsx("path",{stroke:"red",strokeWidth:2,fill:"none",opacity:.5,d:u.toSimpleSvgPath()}),t&&g.map((m,b)=>K.jsx("circle",{cx:m.x,cy:m.y,r:2,fill:`hsl(${b4(b,[0,g.length-1],[120,0])}, 100%, 50%)`,stroke:"black",strokeWidth:"1"},`v${b}`)),c>0&&r&&K.jsx("line",{x1:h.x,y1:h.y,x2:f.x,y2:f.y,strokeWidth:2,stroke:c<Jd/i?"red":"pink"})]},l.id+"_outline")})})});var B6e=200,z_="__lodash_hash_undefined__",H6e=1/0,F6e="[object Function]",Z6e="[object GeneratorFunction]",U6e=/[\\^$.*+?()[\]{}|]/g,W6e=/^\[object .+?Constructor\]$/,V6e=typeof la=="object"&&la&&la.Object===Object&&la,K6e=typeof self=="object"&&self&&self.Object===Object&&self,B_=V6e||K6e||Function("return this")();function Y6e(n,e){var t=n?n.length:0;return!!t&&q6e(n,e,0)>-1}function G6e(n,e,t){for(var r=-1,o=n?n.length:0;++r<o;)if(t(e,n[r]))return!0;return!1}function X6e(n,e,t,r){for(var o=n.length,i=t+(r?1:-1);r?i--:++i<o;)if(e(n[i],i,n))return i;return-1}function q6e(n,e,t){if(e!==e)return X6e(n,J6e,t);for(var r=t-1,o=n.length;++r<o;)if(n[r]===e)return r;return-1}function J6e(n){return n!==n}function Q6e(n,e){return n.has(e)}function e4e(n,e){return n==null?void 0:n[e]}function t4e(n){var e=!1;if(n!=null&&typeof n.toString!="function")try{e=!!(n+"")}catch{}return e}function tF(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var n4e=Array.prototype,r4e=Function.prototype,nF=Object.prototype,M8=B_["__core-js_shared__"],nL=function(){var n=/[^.]+$/.exec(M8&&M8.keys&&M8.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),rF=r4e.toString,H_=nF.hasOwnProperty,o4e=nF.toString,i4e=RegExp("^"+rF.call(H_).replace(U6e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),a4e=n4e.splice,s4e=F_(B_,"Map"),I8=F_(B_,"Set"),xb=F_(Object,"create");function U1(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function l4e(){this.__data__=xb?xb(null):{}}function c4e(n){return this.has(n)&&delete this.__data__[n]}function d4e(n){var e=this.__data__;if(xb){var t=e[n];return t===z_?void 0:t}return H_.call(e,n)?e[n]:void 0}function u4e(n){var e=this.__data__;return xb?e[n]!==void 0:H_.call(e,n)}function h4e(n,e){var t=this.__data__;return t[n]=xb&&e===void 0?z_:e,this}U1.prototype.clear=l4e;U1.prototype.delete=c4e;U1.prototype.get=d4e;U1.prototype.has=u4e;U1.prototype.set=h4e;function Zm(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function f4e(){this.__data__=[]}function p4e(n){var e=this.__data__,t=nw(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():a4e.call(e,t,1),!0}function g4e(n){var e=this.__data__,t=nw(e,n);return t<0?void 0:e[t][1]}function m4e(n){return nw(this.__data__,n)>-1}function v4e(n,e){var t=this.__data__,r=nw(t,n);return r<0?t.push([n,e]):t[r][1]=e,this}Zm.prototype.clear=f4e;Zm.prototype.delete=p4e;Zm.prototype.get=g4e;Zm.prototype.has=m4e;Zm.prototype.set=v4e;function Um(n){var e=-1,t=n?n.length:0;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function b4e(){this.__data__={hash:new U1,map:new(s4e||Zm),string:new U1}}function y4e(n){return rw(this,n).delete(n)}function x4e(n){return rw(this,n).get(n)}function w4e(n){return rw(this,n).has(n)}function C4e(n,e){return rw(this,n).set(n,e),this}Um.prototype.clear=b4e;Um.prototype.delete=y4e;Um.prototype.get=x4e;Um.prototype.has=w4e;Um.prototype.set=C4e;function j4(n){var e=-1,t=n?n.length:0;for(this.__data__=new Um;++e<t;)this.add(n[e])}function S4e(n){return this.__data__.set(n,z_),this}function k4e(n){return this.__data__.has(n)}j4.prototype.add=j4.prototype.push=S4e;j4.prototype.has=k4e;function nw(n,e){for(var t=n.length;t--;)if(A4e(n[t][0],e))return t;return-1}function _4e(n){if(!oF(n)||I4e(n))return!1;var e=L4e(n)||t4e(n)?i4e:W6e;return e.test(T4e(n))}function E4e(n,e,t){var r=-1,o=Y6e,i=n.length,a=!0,s=[],l=s;if(t)a=!1,o=G6e;else if(i>=B6e){var d=e?null:P4e(n);if(d)return tF(d);a=!1,o=Q6e,l=new j4}else l=e?[]:s;e:for(;++r<i;){var u=n[r],p=e?e(u):u;if(u=t||u!==0?u:0,a&&p===p){for(var f=l.length;f--;)if(l[f]===p)continue e;e&&l.push(p),s.push(u)}else o(l,p,t)||(l!==s&&l.push(p),s.push(u))}return s}var P4e=I8&&1/tF(new I8([,-0]))[1]==H6e?function(n){return new I8(n)}:$4e;function rw(n,e){var t=n.__data__;return M4e(e)?t[typeof e=="string"?"string":"hash"]:t.map}function F_(n,e){var t=e4e(n,e);return _4e(t)?t:void 0}function M4e(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function I4e(n){return!!nL&&nL in n}function T4e(n){if(n!=null){try{return rF.call(n)}catch{}try{return n+""}catch{}}return""}function O4e(n){return n&&n.length?E4e(n):[]}function A4e(n,e){return n===e||n!==n&&e!==e}function L4e(n){var e=oF(n)?o4e.call(n):"";return e==F6e||e==Z6e}function oF(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function $4e(){}var j4e=O4e;const R4e=bm(j4e);function iF(n){return R4e(n)}function D4e(){const n=Dn(),e=ne.useMemo(()=>n.store.query.records("instance_presence",()=>({userId:{neq:n.user.id}})),[n]),t=bH("userIds",()=>iF(e.value.map(r=>r.userId)).sort(),{isEqual:(r,o)=>{var i;return r.join(",")===((i=o.join)==null?void 0:i.call(o,","))}},[e]);return sr(t)}function aF(n){const e=Dn(),t=ne.useMemo(()=>e.store.query.records("instance_presence",()=>({userId:{eq:n}})),[e,n]);return sr(`latestPresence:${n}`,()=>t.value.slice().sort((o,i)=>i.lastActivityTimestamp-o.lastActivityTimestamp)[0],[])??null}const N4e=gi(function(){const e=D4e();return K.jsx(K.Fragment,{children:e.map(t=>K.jsx(z4e,{collaboratorId:t},t))})}),z4e=gi(function({collaboratorId:e}){const t=Dn(),r=aF(e),o=H4e(r);if(!(r&&r.currentPageId===t.currentPageId))return null;switch(o){case"inactive":{const{followingUserId:i,highlightedUserIds:a}=t.instanceState;if(!(i===r.userId||a.includes(r.userId)))return null;break}case"idle":{const{highlightedUserIds:i}=t.instanceState;if(r.followingUserId===t.user.id&&!(r.chatMessage||i.includes(r.userId)))return null;break}}return K.jsx(B4e,{latestPresence:r})}),B4e=gi(function({latestPresence:e}){const t=Dn(),{CollaboratorBrush:r,CollaboratorScribble:o,CollaboratorCursor:i,CollaboratorHint:a,CollaboratorShapeIndicator:s}=bl(),{viewportPageBounds:l,zoomLevel:d}=t,{userId:u,chatMessage:p,brush:f,scribble:h,selectedShapeIds:c,userName:g,cursor:m,color:b}=e,v=!(m.x<l.minX-12/d||m.y<l.minY-16/d||m.x>l.maxX-12/d||m.y>l.maxY-16/d);return K.jsxs(K.Fragment,{children:[f&&r?K.jsx(r,{className:"tl-collaborator__brush",brush:f,color:b,opacity:.1},u+"_brush"):null,v&&i?K.jsx(i,{className:"tl-collaborator__cursor",point:m,color:b,zoom:d,name:g!=="New User"?g:null,chatMessage:p},u+"_cursor"):a?K.jsx(a,{className:"tl-collaborator__cursor-hint",point:m,color:b,zoom:d,viewport:l},u+"_cursor_hint"):null,h&&o?K.jsx(o,{className:"tl-collaborator__scribble",scribble:h,color:b,zoom:d,opacity:h.color==="laser"?.5:.1},u+"_scribble"):null,s&&c.map(w=>K.jsx(s,{className:"tl-collaborator__shape-indicator",id:w,color:b,opacity:.5},u+"_"+w))]})});function rL(n){return n>X5e?"inactive":n>HH?"idle":"active"}function H4e(n){const e=ne.useRef((n==null?void 0:n.lastActivityTimestamp)??-1),[t,r]=ne.useState(()=>rL(Date.now()-e.current));return ne.useEffect(()=>{const o=setInterval(()=>{r(rL(Date.now()-e.current))},q5e);return()=>clearInterval(o)},[]),n&&(e.current=n.lastActivityTimestamp),t}function sF(n,e){return e===0?n:sF(e,n%e)}function lF(n){const e=n.toString().split(".")[1];if(!e)return 1;const t=Math.pow(10,e.length),r=parseInt(e,10);return t/sF(r,t)}function F4e(){const n=Dn(),e=vl();ne.useEffect(()=>cy("useDPRMultiple",()=>{const t=n.instanceState.devicePixelRatio;e.style.setProperty("--tl-dpr-multiple",lF(t).toString())}),[n,e])}const oL=gi(function({id:e,shape:t,util:r,index:o,backgroundIndex:i,opacity:a,isCulled:s}){const l=Dn(),{ShapeErrorFallback:d}=bl(),u=ne.useRef(null),p=ne.useRef(null),f=ne.useCallback((c,g)=>{var m,b;(m=u.current)==null||m.style.setProperty(c,g),(b=p.current)==null||b.style.setProperty(c,g)},[]);g1("set shape container transform position",()=>{if(!l.getShape(e))return;const g=l.getShapePageTransform(e),m=Yr.toCssString(g);f("transform",m)},[l,f]),g1("set shape container clip path",()=>{if(!l.getShape(e))return null;const g=l.getShapeClipPath(e);f("clip-path",g??"none")},[l,f]),g1("set shape height and width",()=>{const c=l.getShape(e);if(!c)return null;const g=l.getShapeGeometry(c).bounds,m=l.instanceState.devicePixelRatio,b=lF(m),v=g.w%b,w=v===0?g.w:g.w+(b-v),_=g.h%b,k=_===0?g.h:g.h+(b-_);f("width",Math.max(w,b)+"px"),f("height",Math.max(k,b)+"px")},[l]),ne.useLayoutEffect(()=>{var c,g;f("opacity",a+""),(c=u.current)==null||c.style.setProperty("z-index",o+""),(g=p.current)==null||g.style.setProperty("z-index",i+"")},[a,o,i,f]);const h=ne.useCallback(c=>{l.annotateError(c,{origin:"react.shape",willCrashApp:!1})},[l]);return t?K.jsxs(K.Fragment,{children:[r.backgroundComponent&&K.jsx("div",{ref:p,className:"tl-shape tl-shape-background","data-shape-type":t.type,draggable:!1,children:!s&&K.jsx(vb,{fallback:d,onError:h,children:K.jsx(U4e,{shape:t,util:r})})}),K.jsx("div",{ref:u,className:"tl-shape","data-shape-type":t.type,draggable:!1,children:s?K.jsx(W4e,{shape:t}):K.jsx(vb,{fallback:d,onError:h,children:K.jsx(Z4e,{shape:t,util:r})})})]}):null}),Z4e=ne.memo(function({shape:e,util:t}){return Xx("InnerShape:"+e.type,()=>t.component(e))},(n,e)=>n.shape.props===e.shape.props&&n.shape.meta===e.shape.meta),U4e=ne.memo(function({shape:e,util:t}){return Xx("InnerShape:"+e.type,()=>{var r;return(r=t.backgroundComponent)==null?void 0:r.call(t,e)})},(n,e)=>n.shape.props===e.shape.props&&n.shape.meta===e.shape.meta),W4e=ne.memo(function({shape:e}){const r=Dn().getShapeGeometry(e).bounds;return K.jsx("div",{className:"tl-shape__culled",style:{transform:`translate(${Rt(r.minX)}px, ${Rt(r.minY)}px)`,width:Math.max(1,Rt(r.width)),height:Math.max(1,Rt(r.height))}})},()=>!0),Z_=gi(function({className:e}){const t=Dn(),{Background:r,SvgDefs:o}=bl(),i=je.useRef(null),a=je.useRef(null),s=je.useRef(null);D6e(),b5e(),m5e(),j6e(i),p3e(i),g1("position layers",()=>{const u=a.current;if(!u)return;const p=s.current;if(!p)return;const{x:f,y:h,z:c}=t.camera,g=c>=1?b4(c,[1,8],[.125,.5],!0):b4(c,[.1,1],[-2,.125],!0),m=`scale(${Rt(c)}) translate(${Rt(f+g)}px,${Rt(h+g)}px)`;u.style.setProperty("transform",m),p.style.setProperty("transform",m)},[t]);const l=g5e(),d=sr("shapeSvgDefs",()=>{const u=new Map;for(const p of Ka(t.shapeUtils)){if(!p)return;const f=p.getCanvasSvgDefs();for(const{key:h,component:c}of f)u.has(h)||u.set(h,K.jsx(c,{},h))}return[...u.values()]},[t]);return je.useEffect(()=>{var u;(u=i.current)==null||u.focus()},[]),K.jsxs("div",{ref:i,draggable:!1,className:vo("tl-canvas",e),"data-testid":"canvas",...l,children:[r&&K.jsx(r,{}),K.jsx(V4e,{}),K.jsx(lxe,{}),K.jsx("svg",{className:"tl-svg-context",children:K.jsxs("defs",{children:[d,iL&&K.jsx(iL,{}),K.jsx(oxe,{}),K.jsx(ixe,{}),K.jsx(axe,{}),o&&K.jsx(o,{})]})}),K.jsxs("div",{ref:a,className:"tl-html-layer tl-shapes",draggable:!1,children:[K.jsx(dxe,{}),K.jsx(exe,{})]}),K.jsx("div",{className:"tl-fixed-layer tl-overlays",children:K.jsxs("div",{ref:s,className:"tl-html-layer",children:[es.debugGeometry.value&&K.jsx(z6e,{}),K.jsx(J4e,{}),K.jsx(Y4e,{}),K.jsx(K4e,{}),K.jsx(G4e,{}),K.jsx(txe,{}),K.jsx(nxe,{}),K.jsx(rxe,{}),K.jsx(X4e,{}),K.jsx(cxe,{}),K.jsx(N4e,{})]})})]})});function V4e(){const n=Dn(),e=sr("gridSize",()=>n.documentSettings.gridSize,[n]),{x:t,y:r,z:o}=sr("camera",()=>n.camera,[n]),i=sr("isGridMode",()=>n.instanceState.isGridMode,[n]),{Grid:a}=bl();return a&&i?K.jsx(a,{x:t,y:r,z:o,size:e}):null}function K4e(){const n=Dn(),e=sr("scribble",()=>n.instanceState.scribble,[n]),t=sr("zoomLevel",()=>n.zoomLevel,[n]),{Scribble:r}=bl();return r&&e?K.jsx(r,{className:"tl-user-scribble",scribble:e,zoom:t}):null}function Y4e(){const n=Dn(),e=sr("brush",()=>n.instanceState.brush,[n]),{Brush:t}=bl();return t&&e?K.jsx(t,{className:"tl-user-brush",brush:e}):null}function G4e(){const n=Dn(),e=sr("zoomBrush",()=>n.instanceState.zoomBrush,[n]),{ZoomBrush:t}=bl();return t&&e?K.jsx(t,{className:"tl-user-brush",brush:e}):null}function X4e(){const n=Dn(),e=sr("snapLines",()=>n.snaps.lines,[n]),t=sr("zoomLevel",()=>n.zoomLevel,[n]),{SnapLine:r}=bl();return r&&e.length>0?K.jsx(K.Fragment,{children:e.map(o=>K.jsx(r,{className:"tl-user-snapline",line:o,zoom:t},o.id))}):null}const q4e=48;function J4e(){const n=Dn(),{Handles:e}=bl(),t=sr("zoomLevel",()=>n.zoomLevel,[n]),r=sr("coarse pointer",()=>n.instanceState.isCoarsePointer,[n]),o=sr("onlySelectedShape",()=>n.onlySelectedShape,[n]),i=sr("isChangingStyle",()=>n.instanceState.isChangingStyle,[n]),a=sr("isChangingStyle",()=>n.instanceState.isReadonly,[n]),s=sr("handles",()=>n.onlySelectedShape?n.getShapeHandles(n.onlySelectedShape):void 0,[n]),l=sr("transform",()=>n.onlySelectedShape?n.getShapePageTransform(n.onlySelectedShape):void 0,[n]);if(!e||!o||i||a||!s||!l)return null;const d=[];for(let u=0,p=s[u];u<s.length;u++,p=s[u]){if(p.type!=="vertex"){const f=s[u-1],h=s[u+1];if(f&&h&&Math.hypot(f.y-h.y,f.x-h.x)<q4e/t)continue}d.push(p)}return d.sort(u=>u.type==="vertex"?1:-1),K.jsx(e,{children:K.jsx("g",{transform:Yr.toCssString(l),children:d.map(u=>K.jsx(Q4e,{shapeId:o.id,handle:u,zoom:t,isCoarse:r},u.id))})})}function Q4e({shapeId:n,handle:e,zoom:t,isCoarse:r}){const o=R6e(n,e.id),{Handle:i}=bl();return i?K.jsx("g",{"aria-label":"handle",transform:`translate(${e.x}, ${e.y})`,...o,children:K.jsx(i,{shapeId:n,handle:e,zoom:t,isCoarse:r})}):null}const exe=gi(function(){const e=Dn(),{renderingShapes:t}=e;return es.debugSvg.value?K.jsx(K.Fragment,{children:t.map(o=>K.jsxs(je.Fragment,{children:[K.jsx(oL,{...o}),K.jsx(sxe,{id:o.id})]},o.id+"_fragment"))}):K.jsx(K.Fragment,{children:t.map(o=>K.jsx(oL,{...o},o.id+"_shape"))})});function txe(){const n=Dn(),e=sr("selectedShapeIds",()=>n.currentPageState.selectedShapeIds,[n]);return sr("should display selected ids",()=>n.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!n.instanceState.isChangingStyle,[n])?K.jsx(K.Fragment,{children:e.map(r=>K.jsx(fy,{className:"tl-user-indicator__selected",id:r},r+"_indicator"))}):null}const nxe=function(){const e=Dn(),{HoveredShapeIndicator:t}=bl(),r=sr("hovered id",()=>e.currentPageState.hoveredShapeId,[e]);return!r||!t?null:K.jsx(t,{shapeId:r})},rxe=gi(function(){const e=Dn(),t=v4(e.hintingShapeIds);return t.length?K.jsx(K.Fragment,{children:t.map(r=>K.jsx(fy,{className:"tl-user-indicator__hint",id:r},r+"_hinting"))}):null});function iL(){return K.jsxs("g",{id:"cursor",children:[K.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[K.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),K.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),K.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[K.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),K.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),K.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[K.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),K.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function oxe(){return K.jsx("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function ixe(){return K.jsx("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:K.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function axe(){return K.jsxs("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[K.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),K.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}const sxe=gi(function({id:e}){const t=Dn(),r=t.getShape(e),[o,i]=je.useState(""),a=(r==null?void 0:r.parentId)===t.currentPageId;return je.useEffect(()=>{if(!a)return;let s=null;const l=cy("shape to svg",async()=>{const d=Math.random();s=d;const u=t.getShapePageBounds(e),p=await t.getSvg([e],{padding:0});p&&u&&s===d&&(p.style.setProperty("overflow","visible"),p.setAttribute("preserveAspectRatio","xMidYMin slice"),p.style.setProperty("transform",`translate(${u.x}px, ${u.y+u.h+12}px)`),p.style.setProperty("border","1px solid black"),i(p==null?void 0:p.outerHTML))});return()=>{s=null,l()}},[t,e,a]),a?K.jsx("div",{style:{paddingTop:12,position:"absolute"},children:K.jsx("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:o}})}):null}),lxe=gi(()=>{const n=es.logMessages.value;return K.jsx("div",{className:"debug__ui-logger",children:n.map((e,t)=>{const r=typeof e=="string"?e:JSON.stringify(e);return K.jsx("div",{className:"debug__ui-logger__line",children:r},t)})})});function cxe(){const n=Dn(),e=sr("selection rotation",()=>n.selectionRotation,[n]),t=sr("selection bounds",()=>n.selectionRotatedPageBounds,[n]),{SelectionForeground:r}=bl();return!t||!r?null:K.jsx(r,{bounds:t,rotation:e})}function dxe(){const n=Dn(),e=sr("selection rotation",()=>n.selectionRotation,[n]),t=sr("selection bounds",()=>n.selectionRotatedPageBounds,[n]),{SelectionBackground:r}=bl();return!t||!r?null:K.jsx(r,{bounds:t,rotation:e})}let uxe=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function ba(){return uxe()}const cF="TLDRAW_USER_DATA_v3",dF=di({id:Po,name:Po,locale:Po,color:Po,isDarkMode:pi,animationSpeed:Oo,isSnapMode:pi}),T8={AddAnimationSpeed:1,AddIsSnapMode:2},R4=zi({currentVersion:T8.AddIsSnapMode,migrators:{[T8.AddAnimationSpeed]:{up:n=>({...n,animationSpeed:1}),down:({animationSpeed:n,...e})=>e},[T8.AddIsSnapMode]:{up:n=>({...n,isSnapMode:!1}),down:({isSnapMode:n,...e})=>e}}}),aL=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function hxe(){return aL[Math.floor(Math.random()*aL.length)]}function K5(){return{id:ba(),locale:typeof window<"u"?d5e():"en",name:"New User",color:hxe(),isDarkMode:!1,animationSpeed:1,isSnapMode:!1}}function uF(n){if(n===null||typeof n!="object"||!("version"in n)||!("user"in n)||typeof n.version!="number")return K5();const e=E_({value:n.user,fromVersion:n.version,toVersion:R4.currentVersion??0,migrations:R4});if(e.type==="error")return K5();try{dF.validate(e.value)}catch{return K5()}return e.value}function fxe(){var e;const n=typeof window>"u"?null:JSON.parse(((e=window==null?void 0:window.localStorage)==null?void 0:e.getItem(cF))||"null")??null;return uF(n)}const my=Fl("globalUserData",fxe());function pxe(){typeof window<"u"&&window.localStorage&&window.localStorage.setItem(cF,JSON.stringify({version:R4.currentVersion,user:my.value}))}function gxe(n){dF.validate(n),my.set(n),pxe(),vxe()}const mxe=typeof process<"u"&&!1,Og=typeof BroadcastChannel<"u"&&!mxe?new BroadcastChannel("tldraw-user-sync"):null;Og==null||Og.addEventListener("message",n=>{const e=n.data;(e==null?void 0:e.type)===fF&&(e==null?void 0:e.origin)!==hF&&my.set(uF(e.data))});const hF=ba(),fF="tldraw-user-preferences-change";function vxe(){Og==null||Og.postMessage({type:fF,origin:hF,data:{user:my.value,version:R4.currentVersion}})}function bxe(){return my.value}function pF(n={}){return{derivePresenceState:n.derivePresenceState??(()=>pr("presence",()=>null)),userPreferences:n.userPreferences??pr("userPreferences",()=>bxe()),setUserPreferences:n.setUserPreferences??gxe}}var gF={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function o(l,d,u){this.fn=l,this.context=d,this.once=u||!1}function i(l,d,u,p,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new o(u,p||l,f),c=t?t+d:d;return l._events[c]?l._events[c].fn?l._events[c]=[l._events[c],h]:l._events[c].push(h):(l._events[c]=h,l._eventsCount++),l}function a(l,d){--l._eventsCount===0?l._events=new r:delete l._events[d]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var d=[],u,p;if(this._eventsCount===0)return d;for(p in u=this._events)e.call(u,p)&&d.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},s.prototype.listeners=function(d){var u=t?t+d:d,p=this._events[u];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,h=p.length,c=new Array(h);f<h;f++)c[f]=p[f].fn;return c},s.prototype.listenerCount=function(d){var u=t?t+d:d,p=this._events[u];return p?p.fn?1:p.length:0},s.prototype.emit=function(d,u,p,f,h,c){var g=t?t+d:d;if(!this._events[g])return!1;var m=this._events[g],b=arguments.length,v,w;if(m.fn){switch(m.once&&this.removeListener(d,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,p),!0;case 4:return m.fn.call(m.context,u,p,f),!0;case 5:return m.fn.call(m.context,u,p,f,h),!0;case 6:return m.fn.call(m.context,u,p,f,h,c),!0}for(w=1,v=new Array(b-1);w<b;w++)v[w-1]=arguments[w];m.fn.apply(m.context,v)}else{var _=m.length,k;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(d,m[w].fn,void 0,!0),b){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,u);break;case 3:m[w].fn.call(m[w].context,u,p);break;case 4:m[w].fn.call(m[w].context,u,p,f);break;default:if(!v)for(k=1,v=new Array(b-1);k<b;k++)v[k-1]=arguments[k];m[w].fn.apply(m[w].context,v)}}return!0},s.prototype.on=function(d,u,p){return i(this,d,u,p,!1)},s.prototype.once=function(d,u,p){return i(this,d,u,p,!0)},s.prototype.removeListener=function(d,u,p,f){var h=t?t+d:d;if(!this._events[h])return this;if(!u)return a(this,h),this;var c=this._events[h];if(c.fn)c.fn===u&&(!f||c.once)&&(!p||c.context===p)&&a(this,h);else{for(var g=0,m=[],b=c.length;g<b;g++)(c[g].fn!==u||f&&!c[g].once||p&&c[g].context!==p)&&m.push(c[g]);m.length?this._events[h]=m.length===1?m[0]:m:a(this,h)}return this},s.prototype.removeAllListeners=function(d){var u;return d?(u=t?t+d:d,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,n.exports=s})(gF);var yxe=gF.exports;function vc({children:n,className:e="",...t}){return K.jsx("svg",{...t,className:`tl-svg-container ${e}`,children:n})}class o0{constructor(e){J(this,"isFilled",!1);J(this,"isClosed",!0);J(this,"isLabel",!1);J(this,"isSnappable",!0);J(this,"_vertices");J(this,"_bounds");J(this,"_snapPoints");J(this,"_area");this.isFilled=e.isFilled,this.isClosed=e.isClosed,this.isSnappable=e.isSnappable??!1,this.isLabel=e.isLabel??!1}hitTestPoint(e,t=0,r=!1){return this.bounds.containsPoint(e,t)?this.distanceToPoint(e,r)<=t:!1}distanceToPoint(e,t=!1){const r=e.dist(this.nearestPoint(e));return this.isClosed&&(this.isFilled||t)&&Du(e,this.vertices)?-r:r}distanceToLineSegment(e,t){const r=this.nearestPointOnLineSegment(e,t),o=Le.DistanceToLineSegment(e,t,r);return this.isClosed&&this.isFilled&&Du(r,this.vertices)?-o:o}hitTestLineSegment(e,t,r=0){return this.distanceToLineSegment(e,t)<=r}nearestPointOnLineSegment(e,t){let r=1/0,o;for(let i=0;i<this.vertices.length;i++){const a=this.vertices[i],s=Le.DistanceToLineSegment(e,t,a);s<r&&(r=s,o=a)}if(!o)throw Error("nearest point not found");return o}isPointInBounds(e,t=0){const{bounds:r}=this;return!(e.x<r.minX-t||e.y<r.minY-t||e.x>r.maxX+t||e.y>r.maxY+t)}get vertices(){return this._vertices||(this._vertices=this.getVertices()),this._vertices}get outerVertices(){return this.vertices}getBounds(){return uo.FromPoints(this.vertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get snapPoints(){return this._snapPoints||(this._snapPoints=this.bounds.snapPoints),this._snapPoints}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:e}=this;let t=0;for(let r=0,o=e.length;r<o;r++){const i=e[r],a=e[(r+1)%o];t+=i.x*a.y-a.x*i.y}return t/2}toSimpleSvgPath(){let e="";const{vertices:t}=this,r=t.length;if(r===0)return e;e+=`M${t[0].x},${t[0].y}`;for(let o=1;o<r;o++)e+=`L${t[o].x},${t[o].y}`;return this.isClosed&&(e+="Z"),e}}class s1 extends o0{constructor(t){super({...t,isClosed:!0,isFilled:!1});J(this,"children");const{children:r}=t;if(r.length===0)throw Error("Group2d must have at least one child");this.children=r}getVertices(){return this.children.filter(t=>!t.isLabel).flatMap(t=>t.vertices)}nearestPoint(t){let r=1/0,o;const{children:i}=this;if(i.length===0)throw Error("no children");for(const a of i){const s=a.nearestPoint(t),l=s.dist(t);l<r&&(r=l,o=s)}if(!o)throw Error("nearest point not found");return o}distanceToPoint(t,r=!1){return Math.min(...this.children.map((o,i)=>o.distanceToPoint(t,r||i>0)))}hitTestPoint(t,r,o){return!!this.children.filter(i=>!i.isLabel).find(i=>i.hitTestPoint(t,r,o))}hitTestLineSegment(t,r,o){return!!this.children.filter(i=>!i.isLabel).find(i=>i.hitTestLineSegment(t,r,o))}getArea(){return this.children[0].area}toSimpleSvgPath(){let t="";for(const o of this.children)t+=o.toSimpleSvgPath();const r=uo.FromPoints(this.vertices).corners;for(let o=0,i=r.length;o<i;o++){const a=r[o],s=r[(o-1+i)%i],l=a.dist(s),d=r[(o+1)%i],u=a.dist(d),p=a.clone().lrp(s,4/l),f=a,h=a.clone().lrp(d,4/u);t+=`M${p.x},${p.y} L${f.x},${f.y} L${h.x},${h.y} `}return t}}function U_(n,e,t,r){const o=n.x-t.x,i=n.y-t.y,a=r.x-t.x,s=r.y-t.y,l=e.x-n.x,d=e.y-n.y,u=a*i-s*o,p=l*i-d*o,f=s*l-a*d;if(u===0||p===0||f===0)return null;if(f!==0){const h=u/f,c=p/f;if(0<=h&&h<=1&&0<=c&&c<=1)return Le.AddXY(n,h*l,h*d)}return null}function ow(n,e,t,r){const o=(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y),i=2*((e.x-n.x)*(n.x-t.x)+(e.y-n.y)*(n.y-t.y)),a=t.x*t.x+t.y*t.y+n.x*n.x+n.y*n.y-2*(t.x*n.x+t.y*n.y)-r*r,s=i*i-4*o*a;if(s<0||s===0)return null;const l=Math.sqrt(s),d=(-i+l)/(2*o),u=(-i-l)/(2*o);if((d<0||d>1)&&(u<0||u>1))return null;const p=[];return 0<=d&&d<=1&&p.push(Le.Lrp(n,e,d)),0<=u&&u<=1&&p.push(Le.Lrp(n,e,u)),p.length===0?null:p}function mF(n,e,t){const r=[];let o;for(let i=0,a=t.length-1;i<a;i++)o=U_(n,e,t[i],t[i+1]),o&&r.push(o);return r.length===0?null:r}function xxe(n,e,t){const r=[];let o;for(let i=1,a=t.length;i<a+1;i++)o=U_(n,e,t[i-1],t[i%t.length]),o&&r.push(o);return r.length===0?null:r}function wxe(n,e,t,r){let o=t.x-n.x,i=t.y-n.y;const a=Math.sqrt(o*o+i*i),s=(a*a-r*r+e*e)/(2*a),l=Math.sqrt(e*e-s*s);return o/=a,i/=a,[new Le(n.x+o*s-i*l,n.y+i*s+o*l),new Le(n.x+o*s+i*l,n.y+i*s-o*l)]}function sL(n,e,t){const r=[];let o,i,a;for(let s=0,l=t.length;s<l;s++)o=t[s],i=t[(s+1)%t.length],a=ow(o,i,n,e),a&&r.push(...a);return r.length===0?null:r}function lL(n,e,t){const r=[];let o,i,a;for(let s=1,l=t.length;s<l;s++)o=t[s-1],i=t[s],a=ow(o,i,n,e),a&&r.push(...a);return r.length===0?null:r}function Y5(n,e,t){return(t.y-n.y)*(e.x-n.x)>(e.y-n.y)*(t.x-n.x)}function vF(n,e,t,r){return Y5(n,t,r)!==Y5(e,t,r)&&Y5(n,e,t)!==Y5(n,e,r)}function sS(n,e){const t=[];let r,o,i,a;for(let s=0,l=n.length;s<l;s++)r=n[s],Du(r,e)&&t.push(r);for(let s=0,l=e.length;s<l;s++)r=e[s],Du(r,n)&&t.push(r);for(let s=0,l=n.length;s<l;s++){r=n[s],o=n[(s+1)%n.length];for(let d=0,u=e.length;d<u;d++){i=e[d],a=e[(d+1)%e.length];const p=U_(r,o,i,a);p!==null&&t.push(p)}}return t.length===0?null:Cxe(t)}function Cxe(n){const e=Le.Average(n);return n.sort((t,r)=>Le.Angle(e,t)-Le.Angle(e,r))}function Sxe(n,e){let t,r,o,i;for(let a=0,s=n.length;a<s;a++){t=n[a],r=n[(a+1)%s];for(let l=0,d=e.length;l<d;l++)if(o=e[l],i=e[(l+1)%d],vF(t,r,o,i))return!0}return!1}class D4 extends o0{constructor(t){super({...t,isClosed:!1,isFilled:!1});J(this,"start");J(this,"end");J(this,"d");J(this,"u");J(this,"length");const{start:r,end:o}=t;this.start=r,this.end=o,this.d=r.clone().sub(o),this.u=this.d.clone().uni(),this.length=this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(t){const{start:r,end:o,u:i}=this;if(r.equals(o))return r.clone();const a=r.clone().add(i.clone().mul(t.clone().sub(r).pry(i)));return a.x<Math.min(r.x,o.x)?r.x<o.x?r:o:a.x>Math.max(r.x,o.x)?r.x>o.x?r:o:a.y<Math.min(r.y,o.y)?r.y<o.y?r:o:a.y>Math.max(r.y,o.y)?r.y>o.y?r:o:a}hitTestLineSegment(t,r,o){return vF(t,r,this.start,this.end)}}class i0 extends o0{constructor(t){super({isClosed:!1,isFilled:!1,...t});J(this,"points");J(this,"_segments");J(this,"_length");const{points:r}=t;this.points=r}get segments(){if(!this._segments){this._segments=[];const{vertices:t}=this;for(let r=0,o=t.length-1;r<o;r++){const i=t[r],a=t[r+1];this._segments.push(new D4({start:i,end:a}))}this.isClosed&&this._segments.push(new D4({start:t[t.length-1],end:t[0]}))}return this._segments}get length(){return this._length||(this._length=this.segments.reduce((t,r)=>t+r.length,0)),this._length}getVertices(){return this.points}nearestPoint(t){let r,o=1/0;if(this.points.length===1)return this.points[0];for(const i of this.segments){const a=i.nearestPoint(t),s=a.dist(t);s<o&&(r=a,o=s)}if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(t,r,o){return this.segments.some(i=>i.hitTestLineSegment(t,r,o))}}class xs extends i0{constructor(e){super({...e}),this.isClosed=!0}}class tp extends xs{constructor(t){const{x:r=0,y:o=0,width:i,height:a}=t;super({...t,points:[new Le(r,o),new Le(r+i,o),new Le(r+i,o+a),new Le(r,o+a)]});J(this,"x");J(this,"y");J(this,"w");J(this,"h");this.x=r,this.y=o,this.w=i,this.h=a}getBounds(){return new uo(this.x,this.y,this.w,this.h)}}class Wd{constructor(e){J(this,"canSnap",()=>!0);J(this,"canScroll",()=>!1);J(this,"canUnmount",()=>!0);J(this,"canBind",(e,t)=>!0);J(this,"canEdit",()=>!1);J(this,"canResize",()=>!0);J(this,"canCrop",()=>!1);J(this,"hideResizeHandles",()=>!1);J(this,"hideRotateHandle",()=>!1);J(this,"hideSelectionBoundsBg",()=>!1);J(this,"hideSelectionBoundsFg",()=>!1);J(this,"isAspectRatioLocked",()=>!1);J(this,"onBeforeCreate");J(this,"onBeforeUpdate");J(this,"onDragShapesOver");J(this,"onDragShapesOut");J(this,"onDropShapesOver");J(this,"onResizeStart");J(this,"onResize");J(this,"onResizeEnd");J(this,"onTranslateStart");J(this,"onTranslate");J(this,"onTranslateEnd");J(this,"onRotateStart");J(this,"onRotate");J(this,"onRotateEnd");J(this,"onHandleChange");J(this,"onBindingChange");J(this,"onChildrenChange");J(this,"onDoubleClickHandle");J(this,"onDoubleClickEdge");J(this,"onDoubleClick");J(this,"onClick");J(this,"onEditEnd");this.editor=e}providesBackgroundForChildren(e){return!1}getOutlineSegments(e){return[this.editor.getShapeGeometry(e).vertices]}canReceiveNewChildrenOfType(e,t){return!1}canDropShapes(e,t){return!1}expandSelectionOutlinePx(e){return 0}getCanvasSvgDefs(){return[]}}J(Wd,"props"),J(Wd,"migrations"),J(Wd,"type");function kxe(n,e,t={}){const{closed:r=!1,snap:o=1,start:i="outset",end:a="outset",lengthRatio:s=2,style:l="dashed"}=t;let d=0,u=0,p=1,f=0,h=0;switch(l){case"dashed":{p=1,d=Math.min(e*s,n/4);break}case"dotted":{p=100,d=e/p;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(i==="outset"?(n+=d/2,h+=d/2):i==="skip"&&(n-=d,h-=d),a==="outset"?n+=d/2:a==="skip"&&(n-=d)),u=Math.floor(n/d/(2*p)),u-=u%o,u<3&&l==="dashed"?n/e<5?(d=n,u=1,f=0):(d=n*.333,f=n*.333):(u=Math.max(u,3),d=n/u/(2*p),r?(h=d/2,f=(n-u*d)/u):f=(n-u*d)/Math.max(1,u-1)),{strokeDasharray:[d,f].join(" "),strokeDashoffset:h.toString()}}function cL({bounds:n,zoomLevel:e,className:t}){return K.jsx("g",{className:t,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:n.sides.map((r,o)=>{const{strokeDasharray:i,strokeDashoffset:a}=kxe(r[0].dist(r[1]),1/e,{style:"dashed",lengthRatio:4});return K.jsx("line",{x1:r[0].x,y1:r[0].y,x2:r[1].x,y2:r[1].y,strokeDasharray:i,strokeDashoffset:a},o)})})}class N3 extends Wd{constructor(){super(...arguments);J(this,"hideSelectionBoundsFg",()=>!0);J(this,"canBind",()=>!1);J(this,"onChildrenChange",t=>{const r=this.editor.getSortedChildIdsForParent(t.id);if(r.length===0){this.editor.currentPageState.focusedGroupId===t.id&&this.editor.popFocusedGroupId(),this.editor.deleteShapes([t.id]);return}else if(r.length===1){this.editor.currentPageState.focusedGroupId===t.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(r,t.parentId),this.editor.deleteShapes([t.id]);return}})}getDefaultProps(){return{}}getGeometry(t){const r=this.editor.getSortedChildIdsForParent(t.id);return r.length===0?new tp({width:1,height:1,isFilled:!1}):new s1({children:r.map(o=>{const i=this.editor.getShape(o),a=this.editor.getShapeGeometry(o),s=this.editor.getShapeLocalTransform(i).applyToPoints(a.vertices);return a.isClosed?new xs({points:s,isFilled:!0}):new i0({points:s})})})}component(t){const{erasingShapeIds:r,currentPageState:{hintingShapeIds:o,focusedGroupId:i},zoomLevel:a}=this.editor,s=r.includes(t.id),l=o.length>0&&o.some(u=>u!==t.id&&this.editor.isShapeOfType(this.editor.getShape(u),"group"));if(!s&&(t.id!==i||l))return null;const d=this.editor.getShapeGeometry(t).bounds;return K.jsx(vc,{id:t.id,children:K.jsx(cL,{className:"tl-group",bounds:d,zoomLevel:a})})}indicator(t){const{camera:{z:r}}=this.editor,o=this.editor.getShapeGeometry(t).bounds;return K.jsx(cL,{className:"",bounds:o,zoomLevel:r})}}J(N3,"type","group"),J(N3,"props",Kye),J(N3,"migrations",Yye);const bF=[N3],_xe=new Set(bF.map(n=>n.type));function yF(n){const e=[...bF],t=new Set;for(const r of n){if(_xe.has(r.type))throw new Error(`Shape type "${r.type}" is a core shapes type and cannot be overridden`);if(t.has(r.type))throw new Error(`Shape type "${r.type}" is defined more than once`);e.push(r),t.add(r.type)}return e}function dL(n,e){if(!e)return!1;switch(n.type){case"mixed":return e.type==="mixed";case"shared":return e.type==="shared"&&n.value===e.value;default:throw C_(n)}}class Exe{constructor(e){J(this,"map");this.map=new Map(e)}get(e){return this.map.get(e)}getAsKnownValue(e){const t=this.get(e);if(t&&t.type!=="mixed")return t.value}get size(){return this.map.size}equals(e){if(this.size!==e.size)return!1;const t=new Set;for(const[r,o]of this){if(!dL(o,e.get(r)))return!1;t.add(r)}for(const[r,o]of e)if(!t.has(r)&&!dL(o,this.get(r)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class lS extends Exe{set(e,t){this.map.set(e,t)}applyValue(e,t){const r=this.get(e);if(!r){this.set(e,{type:"shared",value:t});return}switch(r.type){case"mixed":return;case"shared":r.value!==t&&this.set(e,{type:"mixed"});return;default:C_(r,"type")}}}class W_{constructor(){J(this,"items",new WeakMap)}get(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}access(e){return this.items.get(e)}set(e,t){this.items.set(e,t)}has(e){return this.items.has(e)}invalidate(e){this.items.delete(e)}bust(){this.items=new WeakMap}}function Pxe(n,e,t){return fetch(n).then(function(r){return r.arrayBuffer()}).then(function(r){return new File([r],e,{type:t})})}function Mxe(n,e){var o;let t=n;const r=new Set(e);for(;r.has(t);)t=(o=/^.*(\d+)$/.exec(t))!=null&&o[1]?t.replace(/(\d+)(?=\D?)$/,i=>(+i+1).toString()):`${t} 1`;return t}const wc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Ixe="a0",xF="A00000000000000000000000000";function wF(n){if(n>="a"&&n<="z")return n.charCodeAt(0)-97+2;if(n>="A"&&n<="Z")return 90-n.charCodeAt(0)+2;throw new Error("Invalid index key head: "+n)}function CF(n){if(n.length!==wF(n.charAt(0)))throw new Error("invalid integer part of index key: "+n)}function uL(n){if(n===void 0)throw Error("n is undefined")}function hL(n){CF(n);const[e,...t]=n.split("");let r=!0;for(let o=t.length-1;r&&o>=0;o--){const i=wc.indexOf(t[o])+1;i===wc.length?t[o]="0":(t[o]=wc.charAt(i),r=!1)}if(r){if(e==="Z")return"a0";if(e==="z")return;const o=String.fromCharCode(e.charCodeAt(0)+1);return o>"a"?t.push("0"):t.pop(),o+t.join("")}else return e+t.join("")}function Txe(n){CF(n);const[e,...t]=n.split("");let r=!0;for(let o=t.length-1;r&&o>=0;o--){const i=wc.indexOf(t[o])-1;i===-1?t[o]=wc.slice(-1):(t[o]=wc.charAt(i),r=!1)}if(r){if(e==="a")return"Z"+wc.slice(-1);if(e==="A")return;const o=String.fromCharCode(e.charCodeAt(0)-1);return o<"Z"?t.push(wc.slice(-1)):t.pop(),o+t.join("")}else return e+t.join("")}function xg(n,e){if(e!==void 0&&n>=e)throw new Error(n+" >= "+e);if(n.slice(-1)==="0"||e&&e.slice(-1)==="0")throw new Error("trailing zero");if(e){let o=0;for(;(n.charAt(o)||"0")===e.charAt(o);)o++;if(o>0)return e.slice(0,o)+xg(n.slice(o),e.slice(o))}const t=n?wc.indexOf(n.charAt(0)):0,r=e!==void 0?wc.indexOf(e.charAt(0)):wc.length;if(r-t>1){const o=Math.round(.5*(t+r));return wc.charAt(o)}else return e&&e.length>1?e.slice(0,1):wc.charAt(t)+xg(n.slice(1),void 0)}function yv(n){const e=wF(n.charAt(0));if(e>n.length)throw new Error("invalid index: "+n);return n.slice(0,e)}function fL(n){if(n===xF)throw new Error("invalid index: "+n);const e=yv(n);if(n.slice(e.length).slice(-1)==="0")throw new Error("invalid index: "+n)}function rg(n,e){if(n!==void 0&&fL(n),e!==void 0&&fL(e),n!==void 0&&e!==void 0&&n>=e)throw new Error(n+" >= "+e);if(n===void 0&&e===void 0)return Ixe;if(n===void 0){if(e===void 0)throw Error("b is undefined");const s=yv(e),l=e.slice(s.length);if(s===xF)return s+xg("",l);if(s<e)return s;const d=Txe(s);return uL(d),d}if(e===void 0){const s=yv(n),l=n.slice(s.length),d=hL(s);return d===void 0?s+xg(l,void 0):d}const t=yv(n),r=n.slice(t.length),o=yv(e),i=e.slice(o.length);if(t===o)return t+xg(r,i);const a=hL(t);return uL(a),a<e?a:t+xg(r,void 0)}function np(n,e,t){if(t===0)return[];if(t===1)return[rg(n,e)];if(e===void 0){let i=rg(n,e);const a=[i];for(let s=0;s<t-1;s++)i=rg(i,e),a.push(i);return a}if(n===void 0){let i=rg(n,e);const a=[i];for(let s=0;s<t-1;s++)i=rg(n,i),a.push(i);return a.reverse(),a}const r=Math.floor(t/2),o=rg(n,e);return[...np(n,o,r),o,...np(o,e,t-r-1)]}function um(n,e,t){return np(n,e,t)}function O8(n,e){return np(n,void 0,e)}function Tv(n,e){return np(n,e,1)[0]}function gh(n){return np(n,void 0,1)[0]}function Oxe(n){return np(void 0,n,1)[0]}function SF(n,e="a1"){return[e,...np(e,void 0,n)]}function cl(n,e){return n.index<e.index?-1:n.index>e.index?1:0}function G5(n,e,t){if(t.length===0)return[];const r=new Map;for(const i of Lo(t.map(a=>n.getShape(a)))){const{parentId:a}=i;r.has(a)||r.set(a,{children:Lo(n.getSortedChildIdsForParent(a).map(s=>n.getShape(s))),moving:new Set}),r.get(a).moving.add(i)}const o=[];switch(e){case"toBack":{r.forEach(({moving:i,children:a})=>Axe(i,a,o));break}case"toFront":{r.forEach(({moving:i,children:a})=>Lxe(i,a,o));break}case"forward":{r.forEach(({moving:i,children:a})=>$xe(i,a,o));break}case"backward":{r.forEach(({moving:i,children:a})=>jxe(i,a,o));break}}return o}function Axe(n,e,t){const r=e.length;if(n.size===r)return;let o,i;for(let a=0;a<r;a++){const s=e[a];if(n.has(s))o=s.index,n.delete(s);else{i=s.index;break}}if(n.size!==0){const a=um(o,i,n.size);t.push(...Array.from(n.values()).sort(cl).map((s,l)=>({...s,index:a[l]})))}}function Lxe(n,e,t){const r=e.length;if(n.size===r)return;let o,i;for(let a=r-1;a>-1;a--){const s=e[a];if(n.has(s))i=s.index,n.delete(s);else{o=s.index;break}}if(n.size!==0){const a=um(o,i,n.size);t.push(...Array.from(n.values()).sort(cl).map((s,l)=>({...s,index:a[l]})))}}function $xe(n,e,t){var i;const r=e.length;if(n.size===r)return;let o={name:"skipping"};for(let a=0;a<r;a++){const s=n.has(e[a]);switch(o.name){case"skipping":{if(!s)continue;o={name:"selecting",selectIndex:a};break}case"selecting":{if(s)continue;const{selectIndex:l}=o;um(e[a].index,(i=e[a+1])==null?void 0:i.index,a-l).forEach((d,u)=>t.push({...e[l+u],index:d})),o={name:"skipping"};break}}}}function jxe(n,e,t){var i;const r=e.length;if(n.size===r)return;let o={name:"skipping"};for(let a=r-1;a>-1;a--){const s=n.has(e[a]);switch(o.name){case"skipping":{if(!s)continue;o={name:"selecting",selectIndex:a};break}case"selecting":{if(s)continue;um((i=e[a-1])==null?void 0:i.index,e[a].index,o.selectIndex-a).forEach((l,d)=>{t.push({...e[a+d+1],index:l})}),o={name:"skipping"};break}}}}function kF({editor:n}){const{selectionRotation:e,selectionRotatedPageBounds:t,inputs:{originPagePoint:r},selectedShapes:o}=n;if(!t)return null;const i=t.center.clone().rotWith(t.point,e);return{selectionPageCenter:i,initialCursorAngle:i.angle(r),initialSelectionRotation:e,shapeSnapshots:o.map(a=>({shape:Ff(a),initialPagePoint:n.getShapePageTransform(a.id).point()}))}}function z3({delta:n,editor:e,snapshot:t,stage:r}){const{selectionPageCenter:o,shapeSnapshots:i}=t;e.updateShapes(i.map(({shape:s,initialPagePoint:l})=>{const d=Xc(s.parentId)?e.getShapePageTransform(s.parentId):Yr.Identity(),u=Le.RotWith(l,o,n),p=Yr.applyToPoint(Yr.Inverse(d),u),f=Ud(s.rotation+n);return{id:s.id,type:s.type,x:p.x,y:p.y,rotation:f}}));const a=[];i.forEach(({shape:s})=>{var p,f,h;const l=e.getShape(s.id);if(!l)return;const d=e.getShapeUtil(s);if(r==="start"||r==="one-off"){const c=(p=d.onRotateStart)==null?void 0:p.call(d,s);c&&a.push(c)}const u=(f=d.onRotate)==null?void 0:f.call(d,s,l);if(u&&a.push(u),r==="end"||r==="one-off"){const c=(h=d.onRotateEnd)==null?void 0:h.call(d,s,l);c&&a.push(c)}}),a.length>0&&e.updateShapes(a)}const Rxe=n=>{const{store:e}=n,t=e.query.filterHistory("shape"),r=e.query.records("shape",()=>({type:{eq:"arrow"}}));function o(){const i=r.value,a={};for(const s of i){const{start:l,end:d}=s.props;if(l.type==="binding"){const u=a[l.boundShapeId];u?u.push({arrowId:s.id,handleId:"start"}):a[l.boundShapeId]=[{arrowId:s.id,handleId:"start"}]}if(d.type==="binding"){const u=a[d.boundShapeId];u?u.push({arrowId:s.id,handleId:"end"}):a[d.boundShapeId]=[{arrowId:s.id,handleId:"end"}]}}return a}return pr("arrowBindingsIndex",(i,a)=>{if(Tg(i))return o();const s=i,l=t.getDiffSince(a);if(l===_c)return o();let d;function u(h){d||(d={...s}),d[h]?d[h]===s[h]&&(d[h]=[...d[h]]):d[h]=[]}function p(h,c,g){u(h),d[h]=d[h].filter(m=>m.arrowId!==c||m.handleId!==g),d[h].length===0&&delete d[h]}function f(h,c,g){u(h),d[h].push({arrowId:c,handleId:g})}for(const h of l){for(const c of Object.values(h.added))if(n.isShapeOfType(c,"arrow")){const{start:g,end:m}=c.props;g.type==="binding"&&f(g.boundShapeId,c.id,"start"),m.type==="binding"&&f(m.boundShapeId,c.id,"end")}for(const[c,g]of Object.values(h.updated))if(!(!n.isShapeOfType(c,"arrow")||!n.isShapeOfType(g,"arrow")))for(const m of["start","end"]){const b=c.props[m],v=g.props[m];b.type==="binding"&&v.type==="point"?p(b.boundShapeId,c.id,m):b.type==="point"&&v.type==="binding"?f(v.boundShapeId,g.id,m):b.type==="binding"&&v.type==="binding"&&b.boundShapeId!==v.boundShapeId&&(p(b.boundShapeId,c.id,m),f(v.boundShapeId,g.id,m))}for(const c of Object.values(h.removed))if(n.isShapeOfType(c,"arrow")){const{start:g,end:m}=c.props;g.type==="binding"&&p(g.boundShapeId,c.id,"start"),m.type==="binding"&&p(m.boundShapeId,c.id,"end")}}return d??s})},Dxe=n=>{const e=n.query.ids("shape");function t(){const r={},o=e.value,i=Array(o.size);return o.forEach(a=>i.push(n.get(a))),i.sort(cl),i.forEach(a=>{r[a.parentId]||(r[a.parentId]=[]),r[a.parentId].push(a.id)}),r}return pr("parentsToChildrenWithIndexes",(r,o)=>{if(Tg(r))return t();const i=n.history.getDiffSince(o);if(i===_c)return t();if(i.length===0)return r;let a=null;const s=u=>{a||(a={...r}),a[u]?a[u]===r[u]&&(a[u]=[...a[u]]):a[u]=[]},l=new Set;let d;for(let u=0,p=i.length;u<p;u++){d=i[u];for(const f of Object.values(d.added))a1(f)&&(s(f.parentId),a[f.parentId].push(f.id),l.add(a[f.parentId]));for(const[f,h]of Object.values(d.updated))if(a1(h)&&a1(f)){if(f.parentId!==h.parentId)s(f.parentId),s(h.parentId),a[f.parentId].splice(a[f.parentId].indexOf(h.id),1),a[h.parentId].push(h.id),l.add(a[h.parentId]);else if(f.index!==h.index){s(h.parentId);const c=a[h.parentId].indexOf(h.id);a[h.parentId][c]=h.id,l.add(a[h.parentId])}}for(const f of Object.values(d.removed))a1(f)&&(s(f.parentId),a[f.parentId].splice(a[f.parentId].indexOf(f.id),1))}for(const u of l){const p=u.map(f=>n.get(f));p.sort(cl),u.splice(0,u.length,...p.map(f=>f.id))}return a??r})},A8=(n,e,t)=>{for(;!Dl(t.parentId);){const r=n.get(t.parentId);if(!r)return!1;t=r}return t.parentId===e},Nxe=(n,e)=>{const t=n.query.ids("shape");let r=null;function o(){const i=e();return r=i,new Set([...t.value].filter(a=>A8(n,i,n.get(a))))}return pr("_shapeIdsInCurrentPage",(i,a)=>{if(Tg(i))return o();const s=e();if(s!==r)return o();const l=n.history.getDiffSince(a);if(l===_c)return o();const d=new $3(i);for(const p of l){for(const f of Object.values(p.added))a1(f)&&A8(n,s,f)&&d.add(f.id);for(const[f,h]of Object.values(p.updated))a1(h)&&(A8(n,s,h)?d.add(h.id):d.remove(h.id));for(const f of Object.keys(p.removed))Xc(f)&&d.remove(f)}const u=d.get();return u?vv(u.value,u.diff):i})},zxe=40;class Bxe{constructor(e){J(this,"_clickId","");J(this,"_clickTimeout");J(this,"_clickScreenPoint");J(this,"_previousScreenPoint");J(this,"_getClickTimeout",(e,t=ba())=>{this._clickId=t,clearTimeout(this._clickTimeout),this._clickTimeout=setTimeout(()=>{if(this._clickState===e&&this._clickId===t){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}}this._clickState="idle"}},e==="idle"||e==="pendingDouble"?V5e:K5e)});J(this,"_clickState","idle");J(this,"lastPointerInfo",{});J(this,"transformPointerDownEvent",e=>{if(!this._clickState)return e;switch(this._clickScreenPoint=Le.From(e.point),this._previousScreenPoint&&this._previousScreenPoint.dist(this._clickScreenPoint)>zxe&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"idle":return this._clickState="pendingDouble",this._clickTimeout=this._getClickTimeout(this._clickState),e;case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"quadruple_click",phase:"down"};case"pendingOverflow":return this._clickState="overflow",this._clickTimeout=this._getClickTimeout(this._clickState),e;default:return this._clickTimeout=this._getClickTimeout(this._clickState),e}});J(this,"transformPointerUpEvent",e=>{if(!this._clickState)return e;switch(this._clickScreenPoint=Le.From(e.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"};default:return e}});J(this,"cancelDoubleClickTimeout",()=>{this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"});J(this,"handleMove",()=>{this._clickState!=="idle"&&this._clickScreenPoint&&this._clickScreenPoint.dist(this.editor.inputs.currentScreenPoint)>(this.editor.instanceState.isCoarsePointer?oS:yb)&&this.cancelDoubleClickTimeout()});this.editor=e}get clickState(){return this._clickState}}class Hxe{constructor(e){J(this,"isSafari");J(this,"isIos");J(this,"isChromeForIos");J(this,"isFirefox");J(this,"isAndroid");this.editor=e,typeof window<"u"&&"navigator"in window?(this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),this.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),this.isFirefox=/firefox/i.test(navigator.userAgent),this.isAndroid=/android/i.test(navigator.userAgent)):(this.isSafari=!1,this.isIos=!1,this.isChromeForIos=!1,this.isFirefox=!1,this.isAndroid=!1)}}function Yp(n){if(n){let e=pL;for(;n.length;)e=e.push(n.pop());return e}return pL}class Fxe{constructor(){J(this,"length",0);J(this,"head",null);J(this,"tail",this)}push(e){return new V_(e,this)}toArray(){return Sh}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}const pL=new Fxe;class V_{constructor(e,t){J(this,"length");this.head=e,this.tail=t,this.length=t.length+1}push(e){return new V_(e,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let e=this;return{next(){if(e.length){const t=e.head;return e=e.tail,{value:t,done:!1}}else return{value:void 0,done:!0}}}}}class Zxe{constructor(e,t){J(this,"_undos",Fl("HistoryManager.undos",Yp()));J(this,"_redos",Fl("HistoryManager.redos",Yp()));J(this,"_batchDepth",0);J(this,"onBatchComplete",()=>{});J(this,"_commands",{});J(this,"createCommand",(e,t,r)=>{if(this._commands[e])throw new Error(`Duplicate command: ${e}`);this._commands[e]=r;const o=(...i)=>{if(!this._batchDepth)return this.batch(()=>o(...i)),this.ctx;const a=t(...i);if(!a)return this.ctx;const{data:s,ephemeral:l,squashing:d,preservesRedoStack:u}=a;if(this.ignoringUpdates((p,f)=>(r.do(s),{undos:p,redos:f})),!l){const p=this._undos.value.head;d&&p&&p.type==="command"&&p.name===e&&p.preservesRedoStack===u?this._undos.update(f=>f.tail.push({...p,id:ba(),data:r.squash(p.data,s)})):this._undos.update(f=>f.push({type:"command",name:e,data:s,id:ba(),preservesRedoStack:u})),a.preservesRedoStack||this._redos.set(Yp()),this.ctx.emit("change-history",{reason:"push"})}return this.ctx};return o});J(this,"batch",e=>{try{this._batchDepth++,this._batchDepth===1?jd(()=>{var r,o;const t=(r=this._undos.value.head)==null?void 0:r.id;e(),t!==((o=this._undos.value.head)==null?void 0:o.id)&&this.onBatchComplete()}):e()}catch(t){throw this.annotateError(t),t}finally{this._batchDepth--}return this});J(this,"ignoringUpdates",e=>{let t=this._undos.value,r=this._redos.value;this._undos.set(Yp()),this._redos.set(Yp());try{({undos:t,redos:r}=jd(()=>e(t,r)))}finally{this._undos.set(t),this._redos.set(r)}});J(this,"_undo",({pushToRedoStack:e,toMark:t=void 0})=>(this.ignoringUpdates((r,o)=>{var i;if(r.length===0)return{undos:r,redos:o};for(;((i=r.head)==null?void 0:i.type)==="STOP";){const a=r.head;if(r=r.tail,e&&(o=o.push(a)),a.id===t)return this.ctx.emit("change-history",e?{reason:"undo"}:{reason:"bail",markId:t}),{undos:r,redos:o}}if(r.length===0)return this.ctx.emit("change-history",e?{reason:"undo"}:{reason:"bail",markId:t}),{undos:r,redos:o};for(;r.head;){const a=r.head;if(r=r.tail,e&&(o=o.push(a)),a.type==="STOP"){if(a.onUndo&&(!t||a.id===t))return this.ctx.emit("change-history",e?{reason:"undo"}:{reason:"bail",markId:t}),{undos:r,redos:o}}else this._commands[a.name].undo(a.data)}return this.ctx.emit("change-history",e?{reason:"undo"}:{reason:"bail",markId:t}),{undos:r,redos:o}}),this));J(this,"undo",()=>(this._undo({pushToRedoStack:!0}),this));J(this,"redo",()=>(this.ignoringUpdates((e,t)=>{var r;if(t.length===0)return{undos:e,redos:t};for(;((r=t.head)==null?void 0:r.type)==="STOP";)e=e.push(t.head),t=t.tail;if(t.length===0)return this.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t};for(;t.head;){const o=t.head;if(e=e.push(t.head),t=t.tail,o.type==="STOP"){if(o.onRedo)break}else{const i=this._commands[o.name];i.redo?i.redo(o.data):i.do(o.data)}}return this.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t}}),this));J(this,"bail",()=>(this._undo({pushToRedoStack:!1}),this));J(this,"bailToMark",e=>(this._undo({pushToRedoStack:!1,toMark:e}),this));J(this,"mark",(e=ba(),t=!0,r=!0)=>{const o=this._undos.value.head;return o&&o.type==="STOP"&&o.id===e&&o.onUndo===t&&o.onRedo===r?o.id:(this._undos.update(i=>i.push({type:"STOP",id:e,onUndo:t,onRedo:r})),this.ctx.emit("mark-history",{id:e}),e)});this.ctx=e,this.annotateError=t}get numUndos(){return this._undos.value.length}get numRedos(){return this._redos.value.length}clear(){this._undos.set(Yp()),this._redos.set(Yp())}}class Uxe{constructor(e){J(this,"_beforeCreateHandlers",{});J(this,"_afterCreateHandlers",{});J(this,"_beforeChangeHandlers",{});J(this,"_afterChangeHandlers",{});J(this,"_beforeDeleteHandlers",{});J(this,"_afterDeleteHandlers",{});J(this,"_batchCompleteHandlers",[]);this.editor=e,e.store.onBeforeCreate=(r,o)=>{const i=this._beforeCreateHandlers[r.typeName];if(i){let a=r;for(const s of i)a=s(a,o);return a}return r},e.store.onAfterCreate=(r,o)=>{const i=this._afterCreateHandlers[r.typeName];if(i)for(const a of i)a(r,o)},e.store.onBeforeChange=(r,o,i)=>{const a=this._beforeChangeHandlers[o.typeName];if(a){let s=o;for(const l of a)s=l(r,s,i);return s}return o};let t=0;e.store.onAfterChange=(r,o,i)=>{if(t++,t>1e3)console.error("[CleanupManager.onAfterChange] Maximum update depth exceeded, bailing out.");else{const a=this._afterChangeHandlers[o.typeName];if(a)for(const s of a)s(r,o,i)}t--},e.store.onBeforeDelete=(r,o)=>{const i=this._beforeDeleteHandlers[r.typeName];if(i){for(const a of i)if(a(r,o)===!1)return!1}},e.store.onAfterDelete=(r,o)=>{const i=this._afterDeleteHandlers[r.typeName];if(i)for(const a of i)a(r,o)},e.history.onBatchComplete=()=>{this._batchCompleteHandlers.forEach(r=>r())}}registerBeforeCreateHandler(e,t){return this._beforeCreateHandlers[e]||(this._beforeCreateHandlers[e]=[]),this._beforeCreateHandlers[e].push(t),()=>Gp(this._beforeCreateHandlers[e],t)}registerAfterCreateHandler(e,t){return this._afterCreateHandlers[e]||(this._afterCreateHandlers[e]=[]),this._afterCreateHandlers[e].push(t),()=>Gp(this._afterCreateHandlers[e],t)}registerBeforeChangeHandler(e,t){return this._beforeChangeHandlers[e]||(this._beforeChangeHandlers[e]=[]),this._beforeChangeHandlers[e].push(t),()=>Gp(this._beforeChangeHandlers[e],t)}registerAfterChangeHandler(e,t){return this._afterChangeHandlers[e]||(this._afterChangeHandlers[e]=[]),this._afterChangeHandlers[e].push(t),()=>Gp(this._afterChangeHandlers[e],t)}registerBeforeDeleteHandler(e,t){return this._beforeDeleteHandlers[e]||(this._beforeDeleteHandlers[e]=[]),this._beforeDeleteHandlers[e].push(t),()=>Gp(this._beforeDeleteHandlers[e],t)}registerAfterDeleteHandler(e,t){return this._afterDeleteHandlers[e]||(this._afterDeleteHandlers[e]=[]),this._afterDeleteHandlers[e].push(t),()=>Gp(this._afterDeleteHandlers[e],t)}registerBatchCompleteHandler(e){return this._batchCompleteHandlers.push(e),()=>Gp(this._batchCompleteHandlers,e)}}function Gp(n,e){const t=n.indexOf(e);t>=0&&n.splice(t,1)}var Wxe=Object.defineProperty,Vxe=Object.getOwnPropertyDescriptor,a0=(n,e,t,r)=>{for(var o=r>1?void 0:r?Vxe(e,t):e,i=n.length-1,a;i>=0;i--)(a=n[i])&&(o=(r?a(e,t,o):a(o))||o);return r&&o&&Wxe(e,t,o),o};const xo=n=>Math.round(n*10**8)/10**8;function hh(n,e,t,r,o){const i=n.filter(s=>(r==="forward"?s.startNode.id===e:s.endNode.id===e)&&xo(s.length)===xo(t)&&Ld(s.breadthIntersection[0],s.breadthIntersection[1],o[0],o[1]));if(i.length===0)return[];const a=new Set;return i.forEach(s=>{const l=r==="forward"?s.endNode.id:s.startNode.id;if(!a.has(l)){a.add(l);const d=hh(n,l,t,r,Ld(s.breadthIntersection[0],s.breadthIntersection[1],o[0],o[1]));i.push(...d)}}),i}function Kxe(n){n.sort((e,t)=>t.gaps.length-e.gaps.length);for(let e=n.length-1;e>0;e--){const t=n[e];for(let r=e-1;r>=0;r--){const o=n[r];if(o.direction===t.direction&&t.gaps.every(i=>o.gaps.some(a=>xo(i.startEdge[0].x)===xo(a.startEdge[0].x)&&xo(i.startEdge[0].y)===xo(a.startEdge[0].y)&&xo(i.startEdge[1].x)===xo(a.startEdge[1].x)&&xo(i.startEdge[1].y)===xo(a.startEdge[1].y))&&o.gaps.some(a=>xo(i.endEdge[0].x)===xo(a.endEdge[0].x)&&xo(i.endEdge[0].y)===xo(a.endEdge[0].y)&&xo(i.endEdge[1].x)===xo(a.endEdge[1].x)&&xo(i.endEdge[1].y)===xo(a.endEdge[1].y)))){n.splice(e,1);break}}}}class xp{constructor(e){J(this,"_snapLines",Fl("snapLines",void 0));this.editor=e}get lines(){return this._snapLines.value??Sh}clear(){this.lines.length&&this._snapLines.set(void 0)}setLines(e){this._snapLines.set(e)}get snapPointsCache(){const{editor:e}=this;return e.store.createComputedCache("snapPoints",t=>{const r=e.getShapePageTransform(t.id);return r?this.editor.getShapeGeometry(t).snapPoints.map((i,a)=>{const{x:s,y:l}=Yr.applyToPoint(r,i);return{x:s,y:l,id:`${t.id}:${a}`}}):void 0})}get snapThreshold(){return 8/this.editor.zoomLevel}get snappableShapes(){const{editor:e}=this,{selectedShapeIds:t,renderingBounds:r}=e,o=[],i=a=>{const s=e.getSortedChildIdsForParent(a);for(const l of s){if(t.includes(l))continue;const d=e.getShape(l);if(!d||!e.getShapeUtil(d).canSnap(d))continue;const p=e.getShapePageBounds(l);if(p&&r.includes(p)){if(e.isShapeOfType(d,"group")){i(l);continue}o.push({id:l,pageBounds:p,isClosed:e.getShapeGeometry(d).isClosed})}}};return i(this.currentCommonAncestor??e.currentPageId),o}get currentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.selectedShapes)}get snappablePoints(){const{snappableShapes:e,snapPointsCache:t}=this,r=[];return e.forEach(o=>{const i=t.get(o.id);i&&r.push(...i)}),r}get visibleGaps(){const e=[],t=[];let r,o;const i=this.snappableShapes.sort((s,l)=>s.pageBounds.minX-l.pageBounds.minX);for(let s=0;s<i.length;s++){r=i[s];for(let l=s+1;l<i.length;l++)o=i[l],r.pageBounds.maxX<o.pageBounds.minX&&X2(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)&&e.push({startNode:r,endNode:o,startEdge:[new Le(r.pageBounds.maxX,r.pageBounds.minY),new Le(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new Le(o.pageBounds.minX,o.pageBounds.minY),new Le(o.pageBounds.minX,o.pageBounds.maxY)],length:o.pageBounds.minX-r.pageBounds.maxX,breadthIntersection:Ld(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)})}const a=i.sort((s,l)=>s.pageBounds.minY-l.pageBounds.minY);for(let s=0;s<a.length;s++){r=a[s];for(let l=s+1;l<a.length;l++)o=a[l],r.pageBounds.maxY<o.pageBounds.minY&&X2(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)&&t.push({startNode:r,endNode:o,startEdge:[new Le(r.pageBounds.minX,r.pageBounds.maxY),new Le(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new Le(o.pageBounds.minX,o.pageBounds.minY),new Le(o.pageBounds.maxX,o.pageBounds.minY)],length:o.pageBounds.minY-r.pageBounds.maxY,breadthIntersection:Ld(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)})}return{horizontal:e,vertical:t}}snapTranslate({lockedAxis:e,initialSelectionPageBounds:t,initialSelectionSnapPoints:r,dragDelta:o}){var m,b;const{snappablePoints:i,snapThreshold:a}=this,s=t.clone().translate(o),l=r.map(({x:v,y:w},_)=>({id:"selection:"+_,x:v+o.x,y:w+o.y})),d=i,u=[],p=[],f=new Le(a,a);this.collectPointSnaps({minOffset:f,nearestSnapsX:u,nearestSnapsY:p,otherNodeSnapPoints:d,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:s,nearestSnapsX:u,nearestSnapsY:p,minOffset:f});const h=new Le(e==="x"?0:((m=u[0])==null?void 0:m.nudge)??0,e==="y"?0:((b=p[0])==null?void 0:b.nudge)??0);f.x=0,f.y=0,u.length=0,p.length=0,l.forEach(v=>{v.x+=h.x,v.y+=h.y}),s.translate(h),this.collectPointSnaps({minOffset:f,nearestSnapsX:u,nearestSnapsY:p,otherNodeSnapPoints:d,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:s,nearestSnapsX:u,nearestSnapsY:p,minOffset:f});const c=this.getPointSnapLines({nearestSnapsX:u,nearestSnapsY:p}),g=this.getGapSnapLines({selectionPageBounds:s,nearestSnapsX:u,nearestSnapsY:p});return this._snapLines.set([...g,...c]),{nudge:h}}get outlinesInPageSpace(){return this.snappableShapes.map(({id:e,isClosed:t})=>{const r=hl(this.editor.getShapeGeometry(e).vertices);t&&r.push(r[0]);const o=this.editor.getShapePageTransform(e);if(!o)throw Error("No page transform");return Yr.applyToPoints(o,r)})}getSnappingHandleDelta({handlePoint:e,additionalSegments:t}){const{outlinesInPageSpace:r,snapThreshold:o}=this;let i=o,a=null,s,l,d,u;const p=[...r,...t];for(const f of p)for(let h=0;h<f.length-1;h++)s=f[h],l=f[h+1],d=Le.NearestPointOnLineSegment(s,l,e),u=Le.Dist(e,d),!isNaN(u)&&u<i&&(i=u,a=d);return a?(this._snapLines.set([{id:ba(),type:"points",points:[a]}]),Le.Sub(a,e)):null}snapResize({initialSelectionPageBounds:e,dragDelta:t,handle:r,isAspectRatioLocked:o,isResizingFromCenter:i}){var S,C;const{snapThreshold:a}=this,{box:s,scaleX:l,scaleY:d}=uo.Resize(e,r,i?t.x*2:t.x,i?t.y*2:t.y,o);let u=r;l<0&&(u=M5e(u)),d<0&&(u=P5e(u)),i&&(s.center=e.center);const p=u==="top"||u==="bottom",f=u==="left"||u==="right",h=gL(u,s),c=this.snappablePoints,g=[],m=[],b=new Le(a,a);this.collectPointSnaps({minOffset:b,nearestSnapsX:g,nearestSnapsY:m,otherNodeSnapPoints:c,selectionSnapPoints:h});const v=new Le(p?0:((S=g[0])==null?void 0:S.nudge)??0,f?0:((C=m[0])==null?void 0:C.nudge)??0);if(o&&I5e(u)&&v.len()!==0){const I=g.length&&m.length?Math.abs(v.x)<Math.abs(v.y)?"x":"y":g.length?"x":"y",A=e.aspectRatio;I==="x"?(m.length=0,v.y=v.x/A,(u==="bottom_left"||u==="top_right")&&(v.y=-v.y)):(g.length=0,v.x=v.y*A,(u==="bottom_left"||u==="top_right")&&(v.x=-v.x))}const w=Le.Add(t,v),{box:_}=uo.Resize(e,r,i?w.x*2:w.x,i?w.y*2:w.y,o);i&&(_.center=e.center);const k=gL("any",_);g.length=0,m.length=0,b.x=0,b.y=0,this.collectPointSnaps({minOffset:b,nearestSnapsX:g,nearestSnapsY:m,otherNodeSnapPoints:c,selectionSnapPoints:k});const y=this.getPointSnapLines({nearestSnapsX:g,nearestSnapsY:m});return this._snapLines.set([...y]),{nudge:v}}collectPointSnaps({selectionSnapPoints:e,otherNodeSnapPoints:t,minOffset:r,nearestSnapsX:o,nearestSnapsY:i}){for(const a of e)for(const s of t){const l=Le.Sub(a,s),d=Math.abs(l.x),u=Math.abs(l.y);xo(d)<=xo(r.x)&&(xo(d)<xo(r.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:a,otherPoint:s},nudge:s.x-a.x}),r.x=d),xo(u)<=xo(r.y)&&(xo(u)<xo(r.y)&&(i.length=0),i.push({type:"points",points:{thisPoint:a,otherPoint:s},nudge:s.y-a.y}),r.y=u)}}collectGapSnaps({selectionPageBounds:e,minOffset:t,nearestSnapsX:r,nearestSnapsY:o}){const{horizontal:i,vertical:a}=this.visibleGaps;for(const s of i){if(!X2(s.breadthIntersection[0],s.breadthIntersection[1],e.minY,e.maxY))continue;const d=s.startEdge[0].x+s.length/2-e.center.x;if(s.length>e.width&&xo(Math.abs(d))<=xo(t.x)){xo(Math.abs(d))<xo(t.x)&&(r.length=0),t.x=Math.abs(d);const b={type:"gap_center",gap:s,nudge:d},v=r.find(({type:_})=>_==="gap_center"),w=v&&Ld(s.breadthIntersection[0],s.breadthIntersection[1],v.gap.breadthIntersection[0],v.gap.breadthIntersection[1]);v&&v.gap.length>s.length&&w?r[r.indexOf(v)]=b:(!v||!w)&&r.push(b)}const p=s.startNode.pageBounds.minX-s.length,f=e.maxX,h=p-f;xo(Math.abs(h))<=xo(t.x)&&(xo(Math.abs(h))<xo(t.x)&&(r.length=0),t.x=Math.abs(h),r.push({type:"gap_duplicate",gap:s,protrusionDirection:"left",nudge:h}));const c=s.endNode.pageBounds.maxX+s.length,g=e.minX,m=c-g;xo(Math.abs(m))<=xo(t.x)&&(xo(Math.abs(m))<xo(t.x)&&(r.length=0),t.x=Math.abs(m),r.push({type:"gap_duplicate",gap:s,protrusionDirection:"right",nudge:m}))}for(const s of a){if(!X2(s.breadthIntersection[0],s.breadthIntersection[1],e.minX,e.maxX))continue;const d=s.startEdge[0].y+s.length/2-e.center.y;if(s.length>e.height&&xo(Math.abs(d))<=xo(t.y)){xo(Math.abs(d))<xo(t.y)&&(o.length=0),t.y=Math.abs(d);const b={type:"gap_center",gap:s,nudge:d},v=o.find(({type:_})=>_==="gap_center"),w=v&&X2(v.gap.breadthIntersection[0],v.gap.breadthIntersection[1],s.breadthIntersection[0],s.breadthIntersection[1]);v&&v.gap.length>s.length&&w?o[o.indexOf(v)]=b:(!v||!w)&&o.push(b);continue}const p=s.startNode.pageBounds.minY-s.length,f=e.maxY,h=p-f;xo(Math.abs(h))<=xo(t.y)&&(xo(Math.abs(h))<xo(t.y)&&(o.length=0),t.y=Math.abs(h),o.push({type:"gap_duplicate",gap:s,protrusionDirection:"top",nudge:h}));const c=s.endNode.pageBounds.maxY+s.length,g=e.minY,m=c-g;xo(Math.abs(m))<=xo(t.y)&&(xo(Math.abs(m))<xo(t.y)&&(o.length=0),t.y=Math.abs(m),o.push({type:"gap_duplicate",gap:s,protrusionDirection:"bottom",nudge:m}))}}getPointSnapLines({nearestSnapsX:e,nearestSnapsY:t}){const r={},o={};if(e.length>0){for(const i of e)if(i.type==="points"){const a=xo(i.points.otherPoint.x);r[a]||(r[a]=[]),r[a].push(i.points)}}if(t.length>0){for(const i of t)if(i.type==="points"){const a=xo(i.points.otherPoint.y);o[a]||(o[a]=[]),o[a].push(i.points)}}return Object.values(r).concat(Object.values(o)).map(i=>({id:ba(),type:"points",points:v4(i.map(a=>Le.From(a.otherPoint)).concat(i.map(a=>Le.From(a.thisPoint))),(a,s)=>a.equals(s))}))}getGapSnapLines({selectionPageBounds:e,nearestSnapsX:t,nearestSnapsY:r}){const{vertical:o,horizontal:i}=this.visibleGaps,a={top:e.sides[0],right:e.sides[1],bottom:[e.corners[3],e.corners[2]],left:[e.corners[0],e.corners[3]]},s=[];if(t.length>0)for(const l of t){if(l.type==="points")continue;const{gap:{breadthIntersection:d,startEdge:u,startNode:p,endNode:f,length:h,endEdge:c}}=l;switch(l.type){case"gap_center":{const g=(h-e.width)/2,m=Ld(d[0],d[1],e.minY,e.maxY);s.push({type:"gaps",direction:"horizontal",id:ba(),gaps:[...hh(i,p.id,g,"backward",m),{startEdge:u,endEdge:a.left},{startEdge:a.right,endEdge:c},...hh(i,f.id,g,"forward",m)]});break}case"gap_duplicate":{const g=Ld(d[0],d[1],e.minY,e.maxY);s.push({type:"gaps",direction:"horizontal",id:ba(),gaps:l.protrusionDirection==="left"?[{startEdge:a.right,endEdge:u.map(m=>m.clone().addXY(-p.pageBounds.width,0))},{startEdge:u,endEdge:c},...hh(i,f.id,h,"forward",g)]:[...hh(i,p.id,h,"backward",g),{startEdge:u,endEdge:c},{startEdge:c.map(m=>m.clone().addXY(l.gap.endNode.pageBounds.width,0)),endEdge:a.left}]});break}}}if(r.length>0)for(const l of r){if(l.type==="points")continue;const{gap:{breadthIntersection:d,startEdge:u,startNode:p,endNode:f,length:h,endEdge:c}}=l;switch(l.type){case"gap_center":{const g=(h-e.height)/2,m=Ld(d[0],d[1],e.minX,e.maxX);s.push({type:"gaps",direction:"vertical",id:ba(),gaps:[...hh(o,p.id,g,"backward",m),{startEdge:u,endEdge:a.top},{startEdge:a.bottom,endEdge:c},...hh(o,l.gap.endNode.id,g,"forward",m)]});break}case"gap_duplicate":{const g=Ld(d[0],d[1],e.minX,e.maxX);s.push({type:"gaps",direction:"vertical",id:ba(),gaps:l.protrusionDirection==="top"?[{startEdge:a.bottom,endEdge:u.map(m=>m.clone().addXY(0,-p.pageBounds.height))},{startEdge:u,endEdge:c},...hh(o,f.id,h,"forward",g)]:[...hh(o,p.id,h,"backward",g),{startEdge:u,endEdge:c},{startEdge:c.map(m=>m.clone().addXY(0,f.pageBounds.height)),endEdge:a.top}]})}break}}return Kxe(s),s}}a0([pr],xp.prototype,"snapPointsCache",1);a0([pr],xp.prototype,"snapThreshold",1);a0([pr],xp.prototype,"snappableShapes",1);a0([pr],xp.prototype,"currentCommonAncestor",1);a0([pr],xp.prototype,"snappablePoints",1);a0([pr],xp.prototype,"visibleGaps",1);a0([pr],xp.prototype,"outlinesInPageSpace",1);function gL(n,e){const{minX:t,maxX:r,minY:o,maxY:i}=e,a=[];switch(n){case"top":case"left":case"top_left":case"any":a.push({id:"top_left",handle:"top_left",x:t,y:o})}switch(n){case"top":case"right":case"top_right":case"any":a.push({id:"top_right",handle:"top_right",x:r,y:o})}switch(n){case"bottom":case"right":case"bottom_right":case"any":a.push({id:"bottom_right",handle:"bottom_right",x:r,y:i})}switch(n){case"bottom":case"left":case"bottom_left":case"any":a.push({id:"bottom_left",handle:"bottom_left",x:t,y:i})}return a}const Yxe=/\r?\n|\r/g;function Gxe(n){return n.replace(Yxe,`
`).split(`
`).map(e=>e||" ").join(`
`)}const Xxe={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},qxe=/\s/;class Jxe{constructor(e){J(this,"measureText",(e,t)=>{const r=this.getTextElement();r.setAttribute("dir","ltr"),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-style",t.fontStyle),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("font-size",t.fontSize+"px"),r.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),r.style.setProperty("width",t.width),r.style.setProperty("min-width",t.minWidth??null),r.style.setProperty("max-width",t.maxWidth),r.style.setProperty("padding",t.padding),r.textContent=Gxe(e);const o=r.getBoundingClientRect();return{x:0,y:0,w:o.width,h:o.height}});this.editor=e}getTextElement(){const e=document.querySelector(".tl-text-measure");e==null||e.remove();const t=document.createElement("div");return this.editor.getContainer().appendChild(t),t.id=`__textMeasure_${ba()}`,t.classList.add("tl-text"),t.classList.add("tl-text-measure"),t.tabIndex=-1,t}measureElementTextNodeSpans(e,{shouldTruncateToFirstLine:t=!1}={}){const r=[],o=e.getBoundingClientRect(),i=-o.left,a=-o.top,s=new Range,l=e.childNodes[0];let d=0,u=null,p=null,f=0,h=!1;for(const c of e.childNodes)if(c.nodeType===Node.TEXT_NODE)for(const g of c.textContent??""){s.setStart(l,d),s.setEnd(l,d+g.length);const m=s.getClientRects(),b=m[m.length-1],v=b.top+a,w=b.left+i,_=b.right+i,k=qxe.test(g);if(k!==p||v!==f||!u){if(u){if(t&&v!==f){h=!0;break}r.push(u)}u={box:{x:w,y:v,w:b.width,h:b.height},text:g}}else u.box.w=_-u.box.x,u.text+=g;p=k,f=v,d+=g.length}return u&&r.push(u),{spans:r,didTruncate:h}}measureTextSpans(e,t){const r=t.overflow==="truncate-ellipsis"||t.overflow==="truncate-clip",o=this.getTextElement(),i=Math.ceil(t.width-t.padding*2);o.style.setProperty("width",`${i}px`),o.style.setProperty("height","min-content"),o.style.setProperty("dir","ltr"),o.style.setProperty("font-size",`${t.fontSize}px`),o.style.setProperty("font-family",t.fontFamily),o.style.setProperty("font-weight",t.fontWeight),o.style.setProperty("line-height",`${t.lineHeight*t.fontSize}px`),o.style.setProperty("text-align",Xxe[t.textAlign]),r&&(o.style.setProperty("overflow-wrap","anywhere"),o.style.setProperty("word-break","break-all")),o.textContent=e;const{spans:a,didTruncate:s}=this.measureElementTextNodeSpans(o,{shouldTruncateToFirstLine:r});if(t.overflow==="truncate-ellipsis"&&s){o.textContent="";const l=Math.ceil(this.measureElementTextNodeSpans(o).spans[0].box.w);o.style.setProperty("width",`${i-l}px`),o.textContent=e;const d=this.measureElementTextNodeSpans(o,{shouldTruncateToFirstLine:!0}).spans,u=d[d.length-1];return d.push({text:"",box:{x:Math.min(u.box.x+u.box.w,t.width-t.padding-l),y:u.box.y,w:l,h:u.box.h}}),d}return o.remove(),a}}class Qxe{constructor(e){J(this,"raf");J(this,"isPaused",!0);J(this,"last",0);J(this,"t",0);J(this,"start",()=>{this.isPaused=!1,cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(this.tick),this.last=Date.now()});J(this,"tick",()=>{if(this.isPaused)return;const e=Date.now(),t=e-this.last;if(this.last=e,this.t+=t,this.editor.emit("frame",t),this.t<16){this.raf=requestAnimationFrame(this.tick);return}this.t-=16,this.updatePointerVelocity(t),this.editor.emit("tick",t),this.raf=requestAnimationFrame(this.tick)});J(this,"dispose",()=>{this.isPaused=!0,cancelAnimationFrame(this.raf)});J(this,"prevPoint",new Le);J(this,"updatePointerVelocity",e=>{const{prevPoint:t,editor:{inputs:{currentScreenPoint:r,pointerVelocity:o}}}=this;if(e===0)return;const i=Le.Sub(r,t);this.prevPoint=r.clone();const a=i.len(),s=a?i.div(a):new Le(0,0),l=o.clone().lrp(s.mul(a/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),o.equals(l)||(this.editor.inputs.pointerVelocity=l)});this.editor=e,this.editor.disposables.add(this.dispose),this.start()}}var ewe=Object.defineProperty,twe=Object.getOwnPropertyDescriptor,wp=(n,e,t,r)=>{for(var o=r>1?void 0:r?twe(e,t):e,i=n.length-1,a;i>=0;i--)(a=n[i])&&(o=(r?a(e,t,o):a(o))||o);return r&&o&&ewe(e,t,o),o};class Xh{constructor(e){J(this,"updateUserPreferences",e=>{this.user.setUserPreferences({...this.userPreferences,...e})});this.user=e}get userPreferences(){return this.user.userPreferences.value}get isDarkMode(){return this.userPreferences.isDarkMode}get animationSpeed(){return this.userPreferences.animationSpeed}get id(){return this.userPreferences.id}get name(){return this.userPreferences.name}get locale(){return this.userPreferences.locale}get color(){return this.userPreferences.color}get isSnapMode(){return this.userPreferences.isSnapMode}}wp([pr],Xh.prototype,"userPreferences",1);wp([pr],Xh.prototype,"isDarkMode",1);wp([pr],Xh.prototype,"animationSpeed",1);wp([pr],Xh.prototype,"id",1);wp([pr],Xh.prototype,"name",1);wp([pr],Xh.prototype,"locale",1);wp([pr],Xh.prototype,"color",1);wp([pr],Xh.prototype,"isSnapMode",1);function J2(n){return Math.abs(n.props.bend)<8}function N4(n,e){if(e.type==="point")return;const t=n.getShape(e.boundShapeId),r=n.getShapePageTransform(t),o=n.getShapeGeometry(t);return{shape:t,transform:r,isClosed:o.isClosed,isExact:e.isExact,didIntersect:!1,outline:o.outerVertices}}function mL(n,e,t){if(t.type==="point")return Le.From(t);const r=n.getShape(t.boundShapeId);if(r){const{point:o,size:i}=n.getShapeGeometry(r).bounds,a=Le.Add(o,Le.MulV(t.normalizedAnchor,i)),s=Yr.applyToPoint(n.getShapePageTransform(r),a);return Yr.applyToPoint(Yr.Inverse(e),s)}else return new Le(0,0)}function Nd(n,e){const t=n.getShapePageTransform(e),r=mL(n,t,e.props.start),o=mL(n,t,e.props.end);return{start:r,end:o}}const l1=48,z4=10,nwe=10,Rf={s:2,m:3.5,l:5,xl:10};function Ov(n,e){const{start:t,end:r,arrowheadStart:o,arrowheadEnd:i}=e.props,a=Nd(n,e),s=a.start.clone(),l=a.end.clone(),d=Le.Med(s,l),u=Le.Sub(l,s).uni(),p=N4(n,t),f=N4(n,r),h=n.getShapePageTransform(e);vL(l,a.start,h,f),vL(s,a.end,h,p);let c=l1;const g=p&&f&&p.shape===f.shape;p&&f&&!g&&!p.isExact&&!f.isExact&&(f.didIntersect&&!p.didIntersect?p.isClosed&&s.setTo(Le.Nudge(l,s,c)):f.didIntersect||f.isClosed&&l.setTo(Le.Nudge(s,l,c)));const m=Le.Sub(l,s).uni(),b=!Le.Equals(m,u);if(!g){if(p&&o!=="none"&&!p.isExact){const w=z4+Rf[e.props.size]/2+("size"in p.shape.props?Rf[p.shape.props.size]/2:0);c-=w,s.nudge(l,w*(b?-1:1))}if(f&&i!=="none"&&!f.isExact){const w=z4+Rf[e.props.size]/2+("size"in f.shape.props?Rf[f.shape.props.size]/2:0);c-=w,l.nudge(s,w*(b?-1:1))}}p&&f&&(b?l.setTo(Le.Add(s,m.mul(-c))):Le.Dist(s,l)<l1/2&&l.setTo(Le.Add(s,m.mul(l1/2)))),b?d.setTo(Le.Med(a.start,a.end)):d.setTo(Le.Med(s,l));const v=Le.Dist(s,l);return{isStraight:!0,start:{handle:a.start,point:s,arrowhead:e.props.arrowheadStart},end:{handle:a.end,point:l,arrowhead:e.props.arrowheadEnd},middle:d,isValid:v>0,length:v}}function vL(n,e,t,r){if(r===void 0||r.isExact)return;const o=Yr.applyToPoint(t,e),i=Yr.applyToPoint(t,n),a=Yr.applyToPoint(Yr.Inverse(r.transform),o),s=Yr.applyToPoint(Yr.Inverse(r.transform),i),l=r.isClosed,u=(l?xxe:mF)(a,s,r.outline);let p;if(u!==null&&(p=u.sort((c,g)=>Le.Dist(c,a)-Le.Dist(g,a))[0]??(l?void 0:s)),p===void 0)return;const f=Yr.applyToPoint(r.transform,p),h=Yr.applyToPoint(Yr.Inverse(t),f);n.setTo(h),r.didIntersect=!0}function rwe(n){return _F(n.start.handle,n.end.handle)}function L8(n){return _F(n.start.point,n.end.point)}function _F(n,e){return`M${n.x},${n.y}L${e.x},${e.y}`}function $8(n,e,t=0){const{arrowheadEnd:r,arrowheadStart:o}=e.props,i=e.props.bend+t;if(Math.abs(i)>Math.abs(e.props.bend*nwe))return Ov(n,e);const a=Nd(n,e),s=Le.Med(a.start,a.end),l=Le.Sub(a.end,a.start).uni(),d=Le.Add(s,l.per().mul(-i)),u=N4(n,e.props.start),p=N4(n,e.props.end),f=a.start.clone(),h=a.end.clone(),c=d.clone(),g=bL(f,h,c);if(g.length===0||g.size===0||!DA(g.length)||!DA(g.size))return Ov(n,e);const m=n.getShapePageTransform(e);if(u&&!u.isExact){const k=Yr.applyToPoint(m,f),y=Yr.applyToPoint(m,h),S=Yr.applyToPoint(m,g.center),C=Yr.Inverse(u.transform),I=Yr.applyToPoint(C,k),A=Yr.applyToPoint(C,y),T=Yr.applyToPoint(C,S),{isClosed:L}=u,j=L?sL:lL;let $,ee=j(T,g.radius,n.getShapeGeometry(u.shape).vertices);if(ee){ee=ee.filter(te=>+Le.Clockwise(I,te,A)===g.sweepFlag);const Q=Le.Angle(g.center,d),pe=Le.Angle(g.center,a.start),ie=Kp(Q,pe,.5);ee.sort((te,Z)=>Math.abs(xh(ie,T.angle(te)))-Math.abs(xh(ie,T.angle(Z)))),$=ee[0]??(L?void 0:I)}else $=L?void 0:I;if($&&(f.setTo(n.getPointInShapeSpace(e,Yr.applyToPoint(u.transform,$))),u.didIntersect=!0,o!=="none")){const Q=z4+Rf[e.props.size]/2+("size"in u.shape.props?Rf[u.shape.props.size]/2:0);f.setTo(If(g.center.x,g.center.y,g.radius,Kp(Le.Angle(g.center,f),Le.Angle(g.center,d),Q/Math.abs(V5(g.center,g.radius,f,d)))))}}if(p&&!p.isExact){const k=Yr.applyToPoint(m,f),y=Yr.applyToPoint(m,h),S=Yr.applyToPoint(m,g.center),C=Yr.Inverse(p.transform),I=Yr.applyToPoint(C,k),A=Yr.applyToPoint(C,y),T=Yr.applyToPoint(C,S),L=p.isClosed,j=L?sL:lL,$=Le.Angle(g.center,d),ee=Le.Angle(g.center,a.end),Q=Kp($,ee,.5);let pe,ie=j(T,g.radius,n.getShapeGeometry(p.shape).vertices);if(ie?(ie=ie.filter(te=>+Le.Clockwise(I,te,A)===g.sweepFlag),ie.sort((te,Z)=>Math.abs(xh(Q,T.angle(te)))-Math.abs(xh(Q,T.angle(Z)))),pe=ie[0]??(L?void 0:A)):pe=L?void 0:A,pe&&(h.setTo(n.getPointInShapeSpace(e,Yr.applyToPoint(p.transform,pe))),p.didIntersect=!0,r!=="none")){let te=z4+Rf[e.props.size]/2+("size"in p.shape.props?Rf[p.shape.props.size]/2:0);Le.Dist(f,h)<l1&&(te*=-2),h.setTo(If(g.center.x,g.center.y,g.radius,Kp(Le.Angle(g.center,h),Le.Angle(g.center,d),te/Math.abs(V5(g.center,g.radius,h,d)))))}}if(Math.abs(V5(g.center,g.radius,f,h))<l1/2&&(f.setTo(a.start),h.setTo(a.end)),u&&p&&u.shape!==p.shape&&!u.isExact&&!p.isExact){const k=Le.Angle(g.center,f),y=Le.Angle(g.center,h),S=g.sweepFlag?l1:-l1,C=V5(g.center,g.radius,h,f),{center:{x:I,y:A},radius:T}=g;u&&!u.didIntersect&&f.setTo(If(I,A,T,Kp(k,y,S/C))),p&&!p.didIntersect&&h.setTo(If(I,A,T,Kp(k,y,-S/C)))}let v=Kp(Le.Angle(g.center,f),Le.Angle(g.center,h),.5),w=If(g.center.x,g.center.y,g.radius,v);+Le.Clockwise(f,w,h)!==g.sweepFlag&&(v+=ji,w=If(g.center.x,g.center.y,g.radius,v)),c.setTo(w);const _=bL(f,h,c);return{isStraight:!1,start:{point:f,handle:a.start,arrowhead:e.props.arrowheadStart},end:{point:h,handle:a.end,arrowhead:e.props.arrowheadEnd},middle:c,handleArc:g,bodyArc:_,isValid:_.length!==0&&isFinite(_.center.x)&&isFinite(_.center.y)}}function owe(n){const{start:e,end:t,handleArc:{radius:r,largeArcFlag:o,sweepFlag:i}}=n;return`M${e.handle.x},${e.handle.y} A${r} ${r} 0 ${o} ${i} ${t.handle.x},${t.handle.y}`}function j8(n){const{start:e,end:t,bodyArc:{radius:r,largeArcFlag:o,sweepFlag:i}}=n;return`M${e.point.x},${e.point.y} A${r} ${r} 0 ${o} ${i} ${t.point.x},${t.point.y}`}function bL(n,e,t){const r=-2*(n.x*(e.y-t.y)-n.y*(e.x-t.x)+e.x*t.y-t.x*e.y),o={x:((n.x*n.x+n.y*n.y)*(t.y-e.y)+(e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y))/r,y:((n.x*n.x+n.y*n.y)*(e.x-t.x)+(e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x))/r},i=Le.Dist(o,n),a=+Le.Clockwise(n,t,e),s=Math.hypot(n.y-e.y,n.x-e.x),l=Math.hypot(e.y-t.y,e.x-t.x),d=Math.hypot(t.y-n.y,t.x-n.x),u=Math.acos((l*l+d*d-s*s)/(2*l*d))*2,p=+(ji>u),f=(Ni-u)*(a?1:-1),h=f*i;return{center:o,radius:i,size:f,length:h,largeArcFlag:p,sweepFlag:a}}const iwe={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"};var awe=Object.defineProperty,swe=Object.getOwnPropertyDescriptor,lwe=(n,e,t,r)=>{for(var o=r>1?void 0:r?swe(e,t):e,i=n.length-1,a;i>=0;i--)(a=n[i])&&(o=(r?a(e,t,o):a(o))||o);return r&&o&&awe(e,t,o),o};class no{constructor(e,t){J(this,"path");J(this,"id");J(this,"current");J(this,"type");J(this,"shapeType");J(this,"initial");J(this,"children");J(this,"parent");J(this,"isActive",!1);J(this,"_currentToolIdMask",Fl("curent tool id mask",void 0));J(this,"onWheel");J(this,"onPointerDown");J(this,"onPointerMove");J(this,"onPointerUp");J(this,"onDoubleClick");J(this,"onTripleClick");J(this,"onQuadrupleClick");J(this,"onRightClick");J(this,"onMiddleClick");J(this,"onKeyDown");J(this,"onKeyUp");J(this,"onKeyRepeat");J(this,"onCancel");J(this,"onComplete");J(this,"onInterrupt");J(this,"onEnter");J(this,"onExit");this.editor=e;const{id:r,children:o,initial:i}=this.constructor;this.id=r,this.current=Fl("toolState"+this.id,void 0),this.path=pr("toolPath"+this.id,()=>{const a=this.current.value;return this.id+(a?`.${a.path.value}`:"")}),this.parent=t??{},this.parent?o&&i?(this.type="branch",this.initial=i,this.children=Object.fromEntries(o().map(a=>[a.id,new a(this.editor,this)])),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",o&&i&&(this.initial=i,this.children=Object.fromEntries(o().map(a=>[a.id,new a(this.editor,this)])),this.current.set(this.children[this.initial])))}transition(e,t){var i;const r=e.split(".");let o=this;for(let a=0;a<r.length;a++){const s=r[a],l=o.current.value,d=(i=o.children)==null?void 0:i[s];if(!d)throw Error(`${o.id} - no child state exists with the id ${s}.`);if((l==null?void 0:l.id)!==d.id&&(l==null||l.exit(t,s),o.current.set(d),d.enter(t,(l==null?void 0:l.id)||"initial"),!d.isActive))break;o=d}return this}handleEvent(e){var o;const t=iwe[e.name],r=this.current.value;(o=this[t])==null||o.call(this,e),this.current.value===r&&this.isActive&&(r==null||r.handleEvent(e))}enter(e,t){var r;if(this.isActive=!0,(r=this.onEnter)==null||r.call(this,e,t),this.children&&this.initial&&this.isActive){const o=this.children[this.initial];this.current.set(o),o.enter(e,t)}}exit(e,t){var r,o;this.isActive=!1,(r=this.onExit)==null||r.call(this,e,t),this.isActive||(o=this.current.value)==null||o.exit(e,t)}get currentToolIdMask(){return this._currentToolIdMask.value}set currentToolIdMask(e){this._currentToolIdMask.set(e)}}J(no,"id"),J(no,"initial"),J(no,"children");lwe([pr],no.prototype,"currentToolIdMask",1);class B3 extends no{constructor(){super(...arguments);J(this,"onKeyDown",t=>{var r;switch(t.code){case"KeyZ":{if(!(t.shiftKey||t.ctrlKey)){const o=this.current.value;o&&((r=o.current.value)==null?void 0:r.id)==="idle"&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...t,onInteractionEnd:o.id})}break}}})}}J(B3,"id","root"),J(B3,"initial",""),J(B3,"children",()=>[]);var cwe=Object.defineProperty,dwe=Object.getOwnPropertyDescriptor,fo=(n,e,t,r)=>{for(var o=r>1?void 0:r?dwe(e,t):e,i=n.length-1,a;i>=0;i--)(a=n[i])&&(o=(r?a(e,t,o):a(o))||o);return r&&o&&cwe(e,t,o),o};class lo extends yxe.EventEmitter{constructor({store:t,user:r,shapeUtils:o,tools:i,getContainer:a,initialState:s}){super();J(this,"store");J(this,"root");J(this,"disposables",new Set);J(this,"_tickManager",new Qxe(this));J(this,"snaps");J(this,"user");J(this,"textMeasure");J(this,"environment");J(this,"getContainer");J(this,"sideEffects");J(this,"shapeUtils");J(this,"styleProps");J(this,"history",new Zxe(this,t=>{this.annotateError(t,{origin:"history.batch",willCrashApp:!0}),this.crash(t)}));J(this,"_crashingError",null);J(this,"_updateInstanceState",this.history.createCommand("updateInstanceState",(t,r)=>{const o=this.store.get(this.instanceState.id),i={...o,...t};return{data:{prev:o,next:i},ephemeral:!1,squashing:!1,...r}},{do:({next:t})=>{this.store.put([t])},undo:({prev:t})=>{this.store.put([t])},squash({prev:t},{next:r}){return{prev:t,next:r}}}));J(this,"_isChangingStyleTimeout",-1);J(this,"setCursor",t=>(this.updateInstanceState({cursor:{...this.instanceState.cursor,...t}},{ephemeral:!0}),this));J(this,"_setInstancePageState",this.history.createCommand("setInstancePageState",(t,r)=>({data:{prev:this.store.get(t.id??this.currentPageState.id),partial:t},...r}),{do:({prev:t,partial:r})=>{this.store.update(t.id,o=>({...o,...r}))},undo:({prev:t})=>{this.store.update(t.id,()=>t)}}));J(this,"_setSelectedShapes",this.history.createCommand("setSelectedShapes",(t,r)=>{const{selectedShapeIds:o}=this.currentPageState,i=new Set(o);return t.length===i.size&&t.every(a=>i.has(a))?null:{data:{selectedShapeIds:t,prevSelectedShapeIds:o},preservesRedoStack:!0,...r}},{do:({selectedShapeIds:t})=>{this.store.put([{...this.currentPageState,selectedShapeIds:t}])},undo:({prevSelectedShapeIds:t})=>{this.store.put([{...this.currentPageState,selectedShapeIds:t}])},squash({prevSelectedShapeIds:t},{selectedShapeIds:r}){return{selectedShapeIds:r,prevSelectedShapeIds:t}}}));J(this,"_setFocusedGroupId",this.history.createCommand("setFocusedGroupId",t=>{const r=this.currentPageState.focusedGroupId;if(r!==t)return{data:{prev:r,next:t},preservesRedoStack:!0,squashing:!0}},{do:({next:t})=>{this.store.update(this.currentPageState.id,r=>({...r,focusedGroupId:t}))},undo:({prev:t})=>{this.store.update(this.currentPageState.id,r=>({...r,focusedGroupId:t}))},squash({prev:t},{next:r}){return{prev:t,next:r}}}));J(this,"_viewportAnimation",null);J(this,"_willSetInitialBounds",!0);J(this,"_cameraState",Fl("camera state","idle"));J(this,"_cameraStateTimeoutRemaining",0);J(this,"_lastUpdateRenderingBoundsTimestamp",Date.now());J(this,"_decayCameraStateTimeout",t=>{this._cameraStateTimeoutRemaining-=t,this._cameraStateTimeoutRemaining<=0&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"),this.updateRenderingBounds())});J(this,"_tickCameraState",()=>{this._cameraStateTimeoutRemaining=J5e;const t=Date.now();this._cameraState.__unsafe__getWithoutCapture()==="idle"?(this._lastUpdateRenderingBoundsTimestamp=t,this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout)):t-this._lastUpdateRenderingBoundsTimestamp>Q5e&&this.updateRenderingBounds()});J(this,"_renderingBounds",Fl("rendering viewport",new uo));J(this,"_renderingBoundsExpanded",Fl("rendering viewport expanded",new uo));J(this,"renderingBoundsMargin",100);J(this,"_currentPageShapeIds");J(this,"_setCurrentPageId",this.history.createCommand("setCurrentPage",(t,r)=>{if(!this.store.has(t)){console.error("Tried to set the current page id to a page that doesn't exist.");return}return this.stopFollowingUser(),{data:{toId:t,fromId:this.currentPageId},squashing:!0,preservesRedoStack:!0,...r}},{do:({toId:t})=>{if(this.store.has(t)){if(!this.pageStates.find(r=>r.pageId===t)){const r=sl.create({id:sl.createId(t)});this.store.put([r,ll.create({id:ll.createId(t),pageId:t})])}this.store.put([{...this.instanceState,currentPageId:t}]),this.updateRenderingBounds()}},undo:({fromId:t})=>{this.store.has(t)&&(this.store.put([{...this.instanceState,currentPageId:t}]),this.updateRenderingBounds())},squash:({fromId:t},{toId:r})=>({toId:r,fromId:t})}));J(this,"_updatePage",this.history.createCommand("updatePage",(t,r)=>{if(this.instanceState.isReadonly)return null;const o=this.getPage(t.id);return o?{data:{prev:o,partial:t},...r}:null},{do:({partial:t})=>{this.store.update(t.id,r=>({...r,...t}))},undo:({prev:t,partial:r})=>{this.store.update(r.id,()=>t)},squash(t,r){return{prev:{...t.prev,...r.prev},partial:r.partial}}}));J(this,"_createPage",this.history.createCommand("createPage",t=>{if(this.instanceState.isReadonly||this.pages.length>=O4)return null;const{pages:r}=this,o=Mxe(t.name??"Page",r.map(d=>d.name));let i=t.index;(!i||r.some(d=>d.index===i))&&(i=gh(r[r.length-1].index));const a=zh.create({meta:{},...t,name:o,index:i}),s=sl.create({id:sl.createId(a.id)}),l=ll.create({id:ll.createId(a.id),pageId:a.id});return{data:{newPage:a,newTabPageState:l,newCamera:s}}},{do:({newPage:t,newTabPageState:r,newCamera:o})=>{this.store.put([t,o,r])},undo:({newPage:t,newTabPageState:r,newCamera:o})=>{this.pages.length!==1&&this.store.remove([r.id,t.id,o.id])}}));J(this,"_deletePage",this.history.createCommand("delete_page",t=>{if(this.instanceState.isReadonly)return null;const{pages:r}=this;if(r.length===1)return null;const o=this.getPage(t),i=this.pageStates.filter(a=>a.pageId===t);if(!o)return null;if(t===this.currentPageId){const a=r.findIndex(l=>l.id===t),s=r[a-1]??r[a+1];this.setCurrentPage(s.id)}return{data:{id:t,deletedPage:o,deletedPageStates:i}}},{do:({deletedPage:t,deletedPageStates:r})=>{const{pages:o}=this;if(o.length!==1){if(t.id===this.currentPageId){const i=o.findIndex(s=>s.id===t.id),a=o[i-1]??o[i+1];this.setCurrentPage(a.id)}this.store.remove(r.map(i=>i.id)),this.store.remove([t.id]),this.updateRenderingBounds()}},undo:({deletedPage:t,deletedPageStates:r})=>{this.store.put([t]),this.store.put(r),this.updateRenderingBounds()}}));J(this,"_createAssets",this.history.createCommand("createAssets",t=>this.instanceState.isReadonly||t.length<=0?null:{data:{assets:t}},{do:({assets:t})=>{this.store.put(t)},undo:({assets:t})=>{this.store.remove(t.map(r=>r.id))}}));J(this,"_updateAssets",this.history.createCommand("updateAssets",t=>this.instanceState.isReadonly||t.length<=0?void 0:{data:{snapshots:{},assets:t}},{do:({assets:t,snapshots:r})=>{this.store.put(t.map(o=>{const i=this.store.get(o.id);return r[o.id]=i,{...i,...o}}))},undo:({snapshots:t})=>{this.store.put(Object.values(t))}}));J(this,"_deleteAssets",this.history.createCommand("deleteAssets",t=>{if(this.instanceState.isReadonly||t.length<=0)return;const r=Lo(t.map(o=>this.store.get(o)));return{data:{ids:t,prev:r}}},{do:({ids:t})=>{this.store.remove(t)},undo:({prev:t})=>{this.store.put(t)}}));J(this,"_parentIdsToChildIds");J(this,"_childIdsCache",new W_);J(this,"_createShapes",this.history.createCommand("createShapes",t=>{if(this.instanceState.isReadonly||t.length<=0)return null;const{currentPageShapeIds:r}=this;if(t.length+r.size>uh){X5(this);return}return t.length===0?null:{data:{currentPageId:this.currentPageId,partials:t.map(i=>i.id?i:{...i,id:da()})}}},{do:({partials:t})=>{var s,l;const{focusedGroupId:r}=this,{currentPageShapesSorted:o}=this;t=t.map(d=>{var u;if(!d.parentId||!(this.store.has(d.parentId)||t.some(p=>p.id===d.parentId))){d={...d};const p=((u=o.findLast(f=>this.getShapeUtil(f).canReceiveNewChildrenOfType(f,d.type)&&this.isPointInShape(f,{x:d.x??0,y:d.y??0},{margin:0,hitInside:!0})))==null?void 0:u.id)??this.focusedGroupId;if(d.parentId=p,Xc(p)){const f=this.getPointInShapeSpace(this.getShape(p),{x:d.x??0,y:d.y??0});d.x=f.x,d.y=f.y,d.rotation=-this.getShapePageTransform(p).rotation()+(d.rotation??0)}d.parentId===d.id&&(d.parentId=r)}return d});const i=new Map,a=[];for(const d of t){const u=this.getShapeUtil(d);let p=d.index;if(!p){const g=d.parentId??r;i.has(g)||i.set(g,this.getHighestIndexForParent(g)),p=i.get(g),i.set(g,gh(p))}const f=u.getDefaultProps();for(const[g,m]of this.styleProps[d.type])f[m]=this.getStyleForNextShape(g);let h=this.store.schema.types.shape.create({...d,index:p,opacity:d.opacity??this.instanceState.opacityForNextShape,parentId:d.parentId??r,props:"props"in d?{...f,...d.props}:f});if(h.index===void 0)throw Error("no index!");const c=(l=(s=this.getShapeUtil(h)).onBeforeCreate)==null?void 0:l.call(s,h);c&&(h=c),a.push(h)}a.forEach(d=>{d.meta={...this.getInitialMetaForShape(d),...d.meta}}),this.store.put(a)},undo:({partials:t})=>{this.store.remove(t.map(r=>r.id))}}));J(this,"animatingShapes",new Map);J(this,"_updateShapes",this.history.createCommand("updateShapes",(t,r)=>{if(this.instanceState.isReadonly)return null;const o=Lo(t),i=Object.fromEntries(Lo(o.map(({id:l})=>this.getShape(l))).map(l=>[l.id,l]));if(o.length<=0)return null;const a=Lo(o.map(l=>{const d=i[l.id];if(!d)return null;let u=null;for(const[p,f]of Object.entries(l))if(f!==void 0)switch(p){case"id":case"type":continue;default:if(f!==d[p])if(u||(u={...d}),p==="props"){const h={...d.props};for(const[c,g]of Object.entries(f))g!==void 0&&(h[c]=g);u.props=h}else if(p==="meta"){const h={...d.meta};for(const[c,g]of Object.entries(f))g!==void 0&&(h[c]=g);u.meta=h}else u[p]=f}return u??d})),s=Object.fromEntries(a.map(l=>[l.id,l]));return{data:{snapshots:i,updates:s},...r}},{do:({updates:t})=>{var o,i;const r=Object.values(t);for(let a=0;a<r.length;a++){const s=r[a],l=this.store.get(s.id);if(!l)continue;const d=(i=(o=this.getShapeUtil(s)).onBeforeUpdate)==null?void 0:i.call(o,l,s);d&&(r[a]=d)}this.store.put(r)},undo:({snapshots:t})=>{this.store.put(Object.values(t))},squash(t,r){return{snapshots:{...r.snapshots,...t.snapshots},updates:{...t.updates,...r.updates}}}}));J(this,"_deleteShapes",this.history.createCommand("delete_shapes",t=>{if(this.instanceState.isReadonly||t.length===0)return null;const r=[...this.currentPageState.selectedShapeIds],o=new Set(t);for(const d of t)this.visitDescendants(d,u=>{o.add(u)});const i=[...o],a=this._arrowBindingsIndex.value,s=Lo(i.flatMap(d=>{const u=this.getShape(d),p=a[d];return p&&p.length>0?p.map(({arrowId:f})=>this.getShape(f)).concat(u):u})),l=r.filter(d=>!o.has(d));return{data:{deletedIds:i,snapshots:s,prevSelectedShapeIds:r,postSelectedShapeIds:l}}},{do:({deletedIds:t,postSelectedShapeIds:r})=>{this.store.remove(t),this.store.update(this.currentPageState.id,o=>({...o,selectedShapeIds:r}))},undo:({snapshots:t,prevSelectedShapeIds:r})=>{this.store.put(t),this.store.update(this.currentPageState.id,o=>({...o,selectedShapeIds:r}))}}));J(this,"_selectionSharedStyles",pr("_selectionSharedStyles",()=>{const{selectedShapes:t}=this,r=new lS;for(const o of t)this._extractSharedStyles(o,r);return r}));J(this,"externalAssetContentHandlers",{file:null,url:null});J(this,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null});J(this,"inputs",{originPagePoint:new Le,originScreenPoint:new Le,previousPagePoint:new Le,previousScreenPoint:new Le,currentPagePoint:new Le,currentScreenPoint:new Le,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new Le});J(this,"_clickManager",new Bxe(this));J(this,"_prevCursor","default");J(this,"_shiftKeyTimeout",-1);J(this,"_setShiftKeyTimeout",()=>{this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ShiftLeft"})});J(this,"_altKeyTimeout",-1);J(this,"_setAltKeyTimeout",()=>{this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"AltLeft"})});J(this,"_ctrlKeyTimeout",-1);J(this,"_setCtrlKeyTimeout",()=>{this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,code:"ControlLeft"})});J(this,"_restoreToolId","select");J(this,"_pinchStart",1);J(this,"_didPinch",!1);J(this,"_selectedShapeIdsAtPointerDown",[]);J(this,"capturedPointerId",null);J(this,"dispatch",t=>{if(this.crashingError)return this;const{inputs:r}=this,{type:o}=t;return this.batch(()=>{if(t.type==="misc"){(t.name==="cancel"||t.name==="complete")&&(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}))),this.root.handleEvent(t);return}t.shiftKey?(clearInterval(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,r.shiftKey=!0):!t.shiftKey&&r.shiftKey&&this._shiftKeyTimeout===-1&&(this._shiftKeyTimeout=setTimeout(this._setShiftKeyTimeout,150)),t.altKey?(clearInterval(this._altKeyTimeout),this._altKeyTimeout=-1,r.altKey=!0):!t.altKey&&r.altKey&&this._altKeyTimeout===-1&&(this._altKeyTimeout=setTimeout(this._setAltKeyTimeout,150)),t.ctrlKey?(clearInterval(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,r.ctrlKey=!0):!t.ctrlKey&&r.ctrlKey&&this._ctrlKeyTimeout===-1&&(this._ctrlKeyTimeout=setTimeout(this._setCtrlKeyTimeout,150));const{originPagePoint:i,originScreenPoint:a,currentPagePoint:s,currentScreenPoint:l}=r;switch(r.isPointing||(r.isDragging=!1),o){case"pinch":{if(!this.instanceState.canMoveCamera)return;switch(this._updateInputsFromEvent(t),t.name){case"pinch_start":{if(r.isPinching)return;r.isEditing||(this._pinchStart=this.camera.z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=this.selectedShapeIds),this._didPinch=!0,r.isPinching=!0,this.interrupt());return}case"pinch":{if(!r.isPinching)return;const{point:{x:d,y:u,z:p=1},delta:{x:f,y:h}}=t,{camera:{x:c,y:g,z:m}}=this,b=Math.min(Of,Math.max(q2,p));this.setCamera({x:c+f/m-d/m+d/b,y:g+h/m-u/m+u/b,z:b});return}case"pinch_end":{if(!r.isPinching)return this;r.isPinching=!1;const{_selectedShapeIdsAtPointerDown:d}=this;this.setSelectedShapes(this._selectedShapeIdsAtPointerDown,{squashing:!0}),this._selectedShapeIdsAtPointerDown=[];const{camera:{x:u,y:p,z:f}}=this;let h;if(f>.9&&f<1.05?h=1:f>.49&&f<.505&&(h=.5),f>this._pinchStart-.1&&f<this._pinchStart+.05&&(h=this._pinchStart),h!==void 0){const{x:c,y:g}=this.viewportScreenCenter;this.setCamera({x:u+(c/h-c)-(c/f-c),y:p+(g/h-g)-(g/f-g),z:h},{duration:100})}this._didPinch&&(this._didPinch=!1,requestAnimationFrame(()=>{this._didPinch||this.setSelectedShapes(d,{squashing:!0})}));return}}}case"wheel":{if(!this.instanceState.canMoveCamera)return;if(!this.isMenuOpen){if(r.ctrlKey){const{x:d,y:u}=this.inputs.currentScreenPoint,{x:p,y:f,z:h}=this.camera,c=Math.min(Of,Math.max(q2,h+(t.delta.z??0)*h));this.setCamera({x:p+(d/c-d)-(d/h-d),y:f+(u/c-u)-(u/h-u),z:c});return}this.pan(t.delta),!r.isDragging&&r.isPointing&&i.dist(s)>(this.instanceState.isCoarsePointer?oS:yb)/this.zoomLevel&&(r.isDragging=!0)}break}case"pointer":{if(r.isPinching)return;this._updateInputsFromEvent(t);const{isPen:d}=t;switch(t.name){case"pointer_down":{if(this._selectedShapeIdsAtPointerDown=this.selectedShapeIds,t.button===0&&(this.capturedPointerId=t.pointerId),r.buttons.add(t.button),r.isPointing=!0,r.isDragging=!1,this.instanceState.isPenMode){if(!d)return}else d&&this.updateInstanceState({isPenMode:!0});if(t.button===5?(this._restoreToolId=this.currentToolId,this.complete(),this.setCurrentTool("eraser")):t.button===1&&(this.inputs.isPanning||(this._prevCursor=this.instanceState.cursor.type),this.inputs.isPanning=!0),this.inputs.isPanning)return this.stopCameraAnimation(),this.updateInstanceState({cursor:{type:"grabbing",rotation:0}}),this;a.setTo(l),i.setTo(s);break}case"pointer_move":{if(!d&&this.instanceState.isPenMode)return;if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:u,previousScreenPoint:p}=this.inputs;this.pan(Le.Sub(u,p));return}!r.isDragging&&r.isPointing&&i.dist(s)>(this.instanceState.isCoarsePointer?oS:yb)/this.zoomLevel&&(r.isDragging=!0);break}case"pointer_up":{if(r.buttons.delete(t.button),r.isPointing=!1,r.isDragging=!1,this.isMenuOpen||!d&&this.instanceState.isPenMode)return;this.capturedPointerId===t.pointerId&&(this.capturedPointerId=null,t.button=0),r.isPanning?t.button===1?this.inputs.keys.has(" ")?(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:R3}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):(r.isPanning=!1,this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:R3}),this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}})):t.button===0&&(this.slideCamera({speed:Math.min(2,this.inputs.pointerVelocity.len()),direction:this.inputs.pointerVelocity,friction:R3}),this.updateInstanceState({cursor:{type:"grab",rotation:0}})):t.button===5&&(this.complete(),this.setCurrentTool(this._restoreToolId));break}}break}case"keyboard":{switch(t.key==="ShiftRight"&&(t.key="ShiftLeft"),t.key==="AltRight"&&(t.key="AltLeft"),t.code==="ControlRight"&&(t.code="ControlLeft"),t.name){case"key_down":{r.keys.add(t.code),!t.ctrlKey&&t.code==="Space"&&(this.inputs.isPanning||(this._prevCursor=this.instanceState.cursor.type),this.inputs.isPanning=!0,this.updateInstanceState({cursor:{type:this.inputs.isPointing?"grabbing":"grab",rotation:0}}));break}case"key_up":{r.keys.delete(t.code),t.code==="Space"&&!this.inputs.buttons.has(1)&&(this.inputs.isPanning=!1,this.updateInstanceState({cursor:{type:this._prevCursor,rotation:0}}));break}}break}}if(t.type==="pointer"&&(t.button===1?t.name="middle_click":t.button===2&&(t.name="right_click"),t.isPen===this.instanceState.isPenMode))switch(t.name){case"pointer_down":{const d=this._clickManager.transformPointerDownEvent(t);if(t.name!==d.name){this.root.handleEvent(t),this.emit("event",t),this.root.handleEvent(d),this.emit("event",d);return}break}case"pointer_up":{const d=this._clickManager.transformPointerUpEvent(t);if(t.name!==d.name){this.root.handleEvent(t),this.emit("event",t),this.root.handleEvent(d),this.emit("event",d);return}break}case"pointer_move":{this._clickManager.handleMove();break}}this.root.handleEvent(t),this.emit("event",t)}),this});this.store=t,this.snaps=new xp(this),this.user=new Xh(r??pF()),this.getContainer=a??(()=>document.body),this.textMeasure=new Jxe(this);class l extends B3{}J(l,"initial",s??""),this.root=new l(this),this.root.children={};const d=yF(o),u=new Set(Object.keys(t.schema.types.shape.migrations.subTypeMigrations));for(const w of d){if(!u.has(w.type))throw Error(`Editor and store have different shapes: "${w.type}" was passed into the editor but not the schema`);u.delete(w.type)}if(u.size>0)throw Error(`Editor and store have different shapes: "${[...u][0]}" is present in the store schema but not provided to the editor`);const p={},f={},h=new Map;for(const w of d){const _=new w(this);p[w.type]=_;const k=IH(w.props??{});f[w.type]=k;for(const y of k.keys())if(!h.has(y.id))h.set(y.id,y);else if(h.get(y.id)!==y)throw Error(`Multiple style props with id "${y.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=p,this.styleProps=f;for(const w of[...i]){if(Jx(this.root.children,w.id))throw Error(`Can't override tool with id "${w.id}"`);this.root.children[w.id]=new w(this,this.root)}this.environment=new Hxe(this);const c=new Set,g=w=>{const _=this.getShape(w);if(!_)return;const{start:k,end:y}=_.props,S=k.type==="binding"?this.getShape(k.boundShapeId):void 0,C=y.type==="binding"?this.getShape(y.boundShapeId):void 0,I=this.getAncestorPageId(_);if(!I)return;let A;if(S&&C)A=this.findCommonAncestor([S,C])??I;else if(S||C)A=I;else return;A&&A!==_.parentId&&this.reparentShapes([w],A);const T=this.getShape(w);if(!T)throw Error("no reparented arrow");const L=this.getShapeNearestSibling(T,S),j=this.getShapeNearestSibling(T,C);let $;if(L&&j)$=L.index>j.index?L:j;else if(L&&!j)$=L;else if(j&&!L)$=j;else return;let ee;const Q=this.getSortedChildIdsForParent($.parentId).map(pe=>this.getShape(pe)).filter(pe=>pe.index>$.index);if(Q.length){const pe=Q.find(ie=>ie.type!=="arrow");if(T.index>$.index&&(!pe||T.index<pe.index))return;ee=Tv($.index,Q[0].index)}else ee=gh($.index);ee!==T.index&&this.updateShapes([{id:w,type:"arrow",index:ee}])},m=(w,_)=>{const{x:k,y}=Nd(this,w)[_];this.store.put([{...w,props:{...w.props,[_]:{type:"point",x:k,y}}}])},b=w=>{for(const _ of["start","end"]){const k=w.props[_];if(k.type!=="binding")continue;const y=this.getShape(k.boundShapeId),S=this.getAncestorPageId(w)===this.getAncestorPageId(y);(!y||!S)&&m(w,_)}g(w.id)},v=(w,_)=>{let k=null;const y=w.selectedShapeIds.filter(I=>!_.has(I));y.length!==w.selectedShapeIds.length&&(k||(k={...w}),k.selectedShapeIds=y);const S=w.erasingShapeIds.filter(I=>!_.has(I));S.length!==w.erasingShapeIds.length&&(k||(k={...w}),k.erasingShapeIds=S),w.hoveredShapeId&&_.has(w.hoveredShapeId)&&(k||(k={...w}),k.hoveredShapeId=null),w.editingShapeId&&_.has(w.editingShapeId)&&(k||(k={...w}),k.editingShapeId=null);const C=w.hintingShapeIds.filter(I=>!_.has(I));return C.length!==w.hintingShapeIds.length&&(k||(k={...w}),k.hintingShapeIds=C),w.focusedGroupId&&_.has(w.focusedGroupId)&&(k||(k={...w}),k.focusedGroupId=null),k};if(this.sideEffects=new Uxe(this),this.sideEffects.registerBatchCompleteHandler(()=>{var w;for(const _ of c){c.delete(_);const k=this.getShape(_);if(!k)continue;const y=this.getShapeUtil(k),S=(w=y.onChildrenChange)==null?void 0:w.call(y,k);S!=null&&S.length&&this.updateShapes(S,{squashing:!0})}this.emit("update")}),this.sideEffects.registerBeforeDeleteHandler("shape",w=>{w.parentId&&Xc(w.parentId)&&c.add(w.parentId);const _=this._arrowBindingsIndex.value[w.id];if(_!=null&&_.length)for(const{arrowId:S,handleId:C}of _){const I=this.getShape(S);I&&m(I,C)}const k=new Set([w.id]),y=Lo(this.pageStates.map(S=>v(S,k)));y.length&&this.store.put(y)}),this.sideEffects.registerBeforeDeleteHandler("page",w=>{var S;if(this.instanceState.currentPageId!==w.id)return;const _=(S=this.pages.find(C=>C.id!==w.id))==null?void 0:S.id;if(!_)return;this.store.put([{...this.instanceState,currentPageId:_}]);const k=sl.createId(w.id),y=ll.createId(w.id);this.store.remove([k,y])}),this.sideEffects.registerAfterChangeHandler("shape",(w,_)=>{if(this.isShapeOfType(_,"arrow")&&b(_),w.parentId!==_.parentId){const k=y=>{const S=this._arrowBindingsIndex.value[y];if(S!=null&&S.length)for(const C of S)g(C.arrowId)};k(_.id),this.visitDescendants(_.id,k)}if(w.parentId!==_.parentId&&Dl(_.parentId)){const k=new Set([w.id]);this.visitDescendants(w.id,y=>{k.add(y)});for(const y of this.pageStates){if(y.pageId===_.parentId)continue;const S=v(y,k);S&&this.store.put([S])}}w.parentId&&Xc(w.parentId)&&c.add(w.parentId),_.parentId!==w.parentId&&Xc(_.parentId)&&c.add(_.parentId)}),this.sideEffects.registerAfterChangeHandler("instance_page_state",(w,_)=>{if((w==null?void 0:w.selectedShapeIds)!==(_==null?void 0:_.selectedShapeIds)){const k=_.selectedShapeIds.filter(S=>{var I,A;let C=(I=this.getShape(S))==null?void 0:I.parentId;for(;Xc(C);){if(_.selectedShapeIds.includes(C))return!1;C=(A=this.getShape(C))==null?void 0:A.parentId}return!0});let y=null;if(k.length>0){const S=this.findCommonAncestor(Lo(k.map(C=>this.getShape(C))),C=>this.isShapeOfType(C,"group"));S&&(y=S)}else _!=null&&_.focusedGroupId&&(y=_.focusedGroupId);(k.length!==_.selectedShapeIds.length||y!==_.focusedGroupId)&&this.store.put([{..._,selectedShapeIds:k,focusedGroupId:y??null}])}}),this.sideEffects.registerAfterCreateHandler("shape",w=>{this.isShapeOfType(w,"arrow")&&b(w)}),this.sideEffects.registerAfterCreateHandler("page",w=>{const _=sl.createId(w.id),k=ll.createId(w.id);this.store.has(_)||this.store.put([sl.create({id:_})]),this.store.has(k)||this.store.put([ll.create({id:k,pageId:w.id})])}),this._currentPageShapeIds=Nxe(this.store,()=>this.currentPageId),this._parentIdsToChildIds=Dxe(this.store),this.disposables.add(this.store.listen(w=>{this.emit("change",w)})),this.store.ensureStoreIsUsable(),this._setInstancePageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]},{ephemeral:!0}),s&&this.root.children[s]===void 0)throw Error(`No state found for initialState "${s}".`);this.root.enter(void 0,"initial"),this.instanceState.followingUserId&&this.stopFollowingUser(),this.updateRenderingBounds(),requestAnimationFrame(()=>{this._tickManager.start()})}dispose(){this.disposables.forEach(t=>t()),this.disposables.clear()}getShapeUtil(t){const r=typeof t=="string"?t:t.type,o=m1(this.shapeUtils,r);return qx(o,`No shape util found for type "${r}"`),o}undo(){return this.history.undo(),this}get canUndo(){return this.history.numUndos>0}redo(){return this.history.redo(),this}get canRedo(){return this.history.numRedos>0}mark(t,r,o){return this.history.mark(t,r,o),this}bail(){return this.history.bail(),this}bailToMark(t){return this.history.bailToMark(t),this}batch(t){return this.history.batch(t),this}get _arrowBindingsIndex(){return Rxe(this)}getArrowsBoundTo(t){return this._arrowBindingsIndex.value[t]||Sh}get arrowInfoCache(){return this.store.createComputedCache("arrow infoCache",t=>J2(t)?Ov(this,t):$8(this,t))}getArrowInfo(t){const r=typeof t=="string"?t:t.id;return this.arrowInfoCache.get(r)}annotateError(t,{origin:r,willCrashApp:o,tags:i,extras:a}){const s=this.createErrorAnnotations(r,o);return k_(t,{tags:{...s.tags,...i},extras:{...s.extras,...a}}),o&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(t,r){try{return{tags:{origin:t,willCrashApp:r},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingShapeId?this.getShape(this.editingShapeId):void 0,inputs:this.inputs}}}catch{return{tags:{origin:t,willCrashApp:r},extras:{}}}}get crashingError(){return this._crashingError}crash(t){return this._crashingError=t,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:t}),this}isIn(t){const r=t.split(".").reverse();let o=this.root;for(;r.length>0;){const i=r.pop();if(!i)return!0;const a=o.current.value;if((a==null?void 0:a.id)===i){if(r.length===0)return!0;o=a;continue}else return!1}return!1}isInAny(...t){return t.some(r=>this.isIn(r))}setCurrentTool(t,r={}){return this.root.transition(t,r),this}get currentTool(){return this.root.current.value}get currentToolId(){const{currentTool:t}=this;return t?t.currentToolIdMask??t.id:""}getStateDescendant(t){var i;const r=t.split(".").reverse();let o=this.root;for(;r.length>0;){const a=r.pop();if(!a)return o;const s=(i=o.children)==null?void 0:i[a];if(!s)return;o=s}return o}get documentSettings(){return this.store.get(nS)}updateDocumentSettings(t){return this.store.put([{...this.documentSettings,...t}]),this}get instanceState(){return this.store.get(wl)}updateInstanceState(t,r){return this._updateInstanceState(t,{ephemeral:!0,squashing:!0,...r}),t.isChangingStyle!==void 0&&(clearTimeout(this._isChangingStyleTimeout),t.isChangingStyle===!0&&(this._isChangingStyleTimeout=setTimeout(()=>{this.updateInstanceState({isChangingStyle:!1})},2e3))),this}get openMenus(){return this.instanceState.openMenus}addOpenMenu(t){const r=new Set(this.openMenus);return r.has(t)||(r.add(t),this.updateInstanceState({openMenus:[...r]})),this}deleteOpenMenu(t){const r=new Set(this.openMenus);return r.has(t)&&(r.delete(t),this.updateInstanceState({openMenus:[...r]})),this}get isMenuOpen(){return this.openMenus.length>0}get pageStates(){return this._pageStates.value}get _pageStates(){return this.store.query.records("instance_page_state")}get currentPageState(){return this.store.get(this._currentPageStateId)}get _currentPageStateId(){return ll.createId(this.currentPageId)}updateCurrentPageState(t,r){return this._setInstancePageState(t,r),this}get selectedShapeIds(){return this.currentPageState.selectedShapeIds}get selectedShapes(){const{selectedShapeIds:t}=this.currentPageState;return Lo(t.map(r=>this.store.get(r)))}setSelectedShapes(t,r){const o=t.map(i=>typeof i=="string"?i:i.id);return this._setSelectedShapes(o,r),this}isAncestorSelected(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null,o=this.getShape(r);if(!o)return!1;const{selectedShapeIds:i}=this;return!!this.findShapeAncestor(o,a=>i.includes(a.id))}select(...t){const r=typeof t[0]=="string"?t:t.map(o=>o.id);return this.setSelectedShapes(r),this}deselect(...t){const r=typeof t[0]=="string"?t:t.map(i=>i.id),{selectedShapeIds:o}=this;return o.length>0&&r.length>0&&this.setSelectedShapes(o.filter(i=>!r.includes(i))),this}selectAll(){const t=this.getSortedChildIdsForParent(this.currentPageId);return t.length<=0?this:(this.setSelectedShapes(this._getUnlockedShapeIds(t)),this)}selectNone(){return this.selectedShapeIds.length>0&&this.setSelectedShapes([]),this}get onlySelectedShape(){const{selectedShapes:t}=this;return t.length===1?t[0]:null}get selectionPageBounds(){const{currentPageState:{selectedShapeIds:t}}=this;return t.length===0?null:uo.Common(Lo(t.map(r=>this.getShapePageBounds(r))))}get selectionRotation(){const{selectedShapeIds:t}=this;if(t.length===0)return 0;if(t.length===1)return this.getShapePageTransform(this.selectedShapeIds[0]).rotation();const r=t.map(o=>this.getShapePageTransform(o).rotation());return r.every(o=>Math.abs(o-r[0])<Math.PI/180)?this.getShapePageTransform(t[0]).rotation():0}get selectionRotatedPageBounds(){const{selectedShapeIds:t}=this;if(t.length===0)return;const{selectionRotation:r}=this;if(r===0)return this.selectionPageBounds;if(t.length===1){const i=this.getShapeGeometry(t[0]).bounds.clone(),a=this.getShapePageTransform(t[0]);return i.point=a.applyToPoint(i.point),i}const o=uo.FromPoints(this.selectedShapeIds.flatMap(i=>{const a=this.getShapePageTransform(i);return a?a.applyToPoints(this.getShapeGeometry(i).vertices):[]}).map(i=>Le.Rot(i,-r)));return o.point=o.point.rot(r),o}get focusedGroupId(){return this.currentPageState.focusedGroupId??this.currentPageId}get focusedGroup(){const{focusedGroupId:t}=this;return t?this.getShape(t):void 0}setFocusedGroup(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(r!==null){const o=this.getShape(r);if(!o)throw Error(`Editor.setFocusedGroup: Shape with id ${r} does not exist`);if(!this.isShapeOfType(o,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${o.type}`)}return r===this.focusedGroupId?this:(this._setFocusedGroupId(r),this)}popFocusedGroupId(){const{focusedGroup:t}=this;if(t){const r=this.findShapeAncestor(t,o=>this.isShapeOfType(o,"group"));this.setFocusedGroup((r==null?void 0:r.id)??null),this.select(t.id)}else this.setFocusedGroup(null),this.selectNone();return this}get editingShapeId(){return this.currentPageState.editingShapeId}get editingShape(){const{editingShapeId:t}=this;return t?this.getShape(t):void 0}setEditingShape(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(r!==this.editingShapeId){if(r){const o=this.getShape(r);if(o&&this.getShapeUtil(o).canEdit(o))return this._setInstancePageState({editingShapeId:r}),this}this._setInstancePageState({editingShapeId:null})}return this}get hoveredShapeId(){return this.currentPageState.hoveredShapeId}get hoveredShape(){const{hoveredShapeId:t}=this;return t?this.getShape(t):void 0}setHoveredShape(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;return r===this.hoveredShapeId?this:(this.updateCurrentPageState({hoveredShapeId:r},{ephemeral:!0}),this)}get hintingShapeIds(){return this.currentPageState.hintingShapeIds}get hintingShapes(){const{hintingShapeIds:t}=this;return Lo(t.map(r=>this.getShape(r)))}setHintingShapes(t){const r=typeof t[0]=="string"?t:t.map(o=>o.id);return this.updateCurrentPageState({hintingShapeIds:v4(r)},{ephemeral:!0}),this}get erasingShapeIds(){return this.currentPageState.erasingShapeIds}get erasingShapes(){const{erasingShapeIds:t}=this;return Lo(t.map(r=>this.getShape(r)))}setErasingShapes(t){const r=typeof t[0]=="string"?t:t.map(i=>i.id);r.sort();const{erasingShapeIds:o}=this;if(r.length===o.length){for(let i=0;i<r.length;i++)if(r[i]!==o[i]){this._setInstancePageState({erasingShapeIds:r},{ephemeral:!0});break}}else this._setInstancePageState({erasingShapeIds:r},{ephemeral:!0});return this}get croppingShapeId(){return this.currentPageState.croppingShapeId}setCroppingShape(t){const r=typeof t=="string"?t:(t==null?void 0:t.id)??null;if(r!==this.croppingShapeId)if(!r)this.updateCurrentPageState({croppingShapeId:null});else{const o=this.getShape(r),i=this.getShapeUtil(o);o&&i.canCrop(o)&&this.updateCurrentPageState({croppingShapeId:r})}return this}get cameraId(){return sl.createId(this.currentPageId)}get camera(){return this.store.get(this.cameraId)}get zoomLevel(){return this.camera.z}_setCamera(t){const r=this.camera;return r.x===t.x&&r.y===t.y&&r.z===t.z?this:(this.batch(()=>{this.store.put([{...r,...t}]);const{currentScreenPoint:o}=this.inputs;this.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:o,pointerId:BA.CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,button:0,isPen:this.instanceState.isPenMode??!1}),this._tickCameraState()}),this)}setCamera(t,r){const o=Number.isFinite(t.x)?t.x:0,i=Number.isFinite(t.y)?t.y:0,a=Number.isFinite(t.z)?t.z:this.zoomLevel;if(this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),r){const{width:s,height:l}=this.viewportScreenBounds;return this._animateToViewport(new uo(-o,-i,s/a,l/a),r)}else this._setCamera({x:o,y:i,z:a});return this}centerOnPoint(t,r){if(!this.instanceState.canMoveCamera)return this;const{viewportPageBounds:{width:o,height:i},camera:a}=this;return this.setCamera({x:-(t.x-o/2),y:-(t.y-i/2),z:a.z},r),this}zoomToContent(){const t=this.selectionPageBounds??this.currentPageBounds;return t&&this.zoomToBounds(t,Math.min(1,this.zoomLevel),{duration:220}),this}zoomToFit(t){if(!this.instanceState.canMoveCamera)return this;const r=[...this.currentPageShapeIds];if(r.length<=0)return this;const o=uo.Common(Lo(r.map(i=>this.getShapePageBounds(i))));return this.zoomToBounds(o,void 0,t),this}resetZoom(t=this.viewportScreenCenter,r){if(!this.instanceState.canMoveCamera)return this;const{x:o,y:i,z:a}=this.camera,{x:s,y:l}=t;return this.setCamera({x:o+(s/1-s)-(s/a-s),y:i+(l/1-l)-(l/a-l),z:1},r),this}zoomIn(t=this.viewportScreenCenter,r){if(!this.instanceState.canMoveCamera)return this;const{x:o,y:i,z:a}=this.camera;let s=Of;for(let u=1;u<Q0.length;u++){const p=Q0[u-1],f=Q0[u];if(!(f-a<=(f-p)/2)){s=f;break}}const{x:l,y:d}=t;return this.setCamera({x:o+(l/s-l)-(l/a-l),y:i+(d/s-d)-(d/a-d),z:s},r),this}zoomOut(t=this.viewportScreenCenter,r){if(!this.instanceState.canMoveCamera)return this;const{x:o,y:i,z:a}=this.camera;let s=q2;for(let u=Q0.length-1;u>0;u--){const p=Q0[u-1],f=Q0[u];if(!(f-a>=(f-p)/2)){s=p;break}}const{x:l,y:d}=t;return this.setCamera({x:o+(l/s-l)-(l/a-l),y:i+(d/s-d)-(d/a-d),z:s},r),this}zoomToSelection(t){if(!this.instanceState.canMoveCamera)return this;const{selectionPageBounds:r}=this;return r?(this.zoomToBounds(r,Math.max(1,this.zoomLevel),t),this):this}panZoomIntoView(t,r){if(!this.instanceState.canMoveCamera)return this;if(t.length<=0)return this;const o=uo.Common(Lo(t.map(a=>this.getShapePageBounds(a)))),{viewportPageBounds:i}=this;if(i.h<o.h||i.w<o.w)return this.zoomToBounds(o,this.camera.z,r),this;{const a=this.viewportPageBounds.clone().expandBy(-32/this.zoomLevel);let s=0,l=0;a.maxY<o.maxY?l=a.maxY-o.maxY:a.minY>o.minY&&(l=a.minY-o.minY),a.maxX<o.maxX?s=a.maxX-o.maxX:a.minX>o.minX&&(s=a.minX-o.minX);const{camera:d}=this;this.setCamera({x:d.x+s,y:d.y+l,z:d.z},r)}return this}zoomToBounds(t,r,o){if(!this.instanceState.canMoveCamera)return this;const{viewportScreenBounds:i}=this,a=Math.min(256,i.width*.28);let s=Rd(Math.min((i.width-a)/t.width,(i.height-a)/t.height),q2,Of);return r!==void 0&&(s=Math.min(r,s)),this.setCamera({x:-t.minX+(i.width-t.width*s)/2/s,y:-t.minY+(i.height-t.height*s)/2/s,z:s},o),this}pan(t,r){if(!this.instanceState.canMoveCamera)return this;const{x:o,y:i,z:a}=this.camera;return this.setCamera({x:o+t.x/a,y:i+t.y/a,z:a},r),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(t){if(!this._viewportAnimation)return;const r=()=>{this.removeListener("tick",this._animateViewport),this.removeListener("stop-camera-animation",r),this._viewportAnimation=null};this.once("stop-camera-animation",r),this._viewportAnimation.elapsed+=t;const{elapsed:o,easing:i,duration:a,start:s,end:l}=this._viewportAnimation;if(o>a){this._setCamera({x:-l.x,y:-l.y,z:this.viewportScreenBounds.width/l.width}),r();return}const d=a-o,u=i(1-d/a),p=s.minX+(l.minX-s.minX)*u,f=s.minY+(l.minY-s.minY)*u,h=s.maxX+(l.maxX-s.maxX)*u;this._setCamera({x:-p,y:-f,z:this.viewportScreenBounds.width/(h-p)})}_animateToViewport(t,r={}){const{duration:o=0,easing:i=ul.easeInOutCubic}=r,{user:{animationSpeed:a},viewportPageBounds:s}=this;return this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),o===0||a===0?this._setCamera({x:-t.x,y:-t.y,z:this.viewportScreenBounds.width/t.width}):(this._viewportAnimation={elapsed:0,duration:o/a,easing:i,start:s.clone(),end:t.clone()},this.addListener("tick",this._animateViewport),this)}slideCamera(t={}){if(!this.instanceState.canMoveCamera)return this;this.stopCameraAnimation();const{animationSpeed:r}=this.user;if(r===0)return this;const{speed:o,friction:i,direction:a,speedThreshold:s=.01}=t;let l=Math.min(o,1);const d=()=>{this.removeListener("tick",u),this.removeListener("stop-camera-animation",d)};this.once("stop-camera-animation",d);const u=p=>{const{x:f,y:h,z:c}=this.camera,g=Le.Mul(a,l*p/c);l*=1-i,l<s?d():this._setCamera({x:f+g.x,y:h+g.y,z:c})};return this.addListener("tick",u),this}animateToUser(t){const o=[...this.store.query.records("instance_presence",()=>({userId:{eq:t}})).value].sort((i,a)=>i.lastActivityTimestamp-a.lastActivityTimestamp).pop();return o?(this.batch(()=>{this.instanceState.followingUserId!==null&&this.stopFollowingUser();const i=o.currentPageId===this.currentPageId;i||this.setCurrentPage(o.currentPageId);const a=i?{duration:500}:void 0;this.centerOnPoint(o.cursor,a);const{highlightedUserIds:s}=this.instanceState;this.updateInstanceState({highlightedUserIds:[...s,t]}),setTimeout(()=>{const l=[...this.instanceState.highlightedUserIds],d=l.indexOf(t);d<0||(l.splice(d,1),this.updateInstanceState({highlightedUserIds:l}))},HH)}),this):this}animateToShape(t,r=G5e){if(!this.instanceState.canMoveCamera)return this;const o=this.viewportScreenBounds.clone().expandBy(-32),i=o.width/o.height,a=this.getShapePageBounds(t);if(!a)return this;const s=a.width/a.height,l=a.clone(),d=a.width/o.width;return l.width+=(o.minX+o.maxX)*d,l.height+=(o.minY+o.maxY)*d,l.x-=o.minX*d,l.y-=o.minY*d,s>i?(l.height=a.width/i,l.y-=(l.height-a.height)/2):(l.width=a.height*i,l.x-=(l.width-a.width)/2),this._animateToViewport(l,r)}updateViewportScreenBounds(t=!1){const r=this.getContainer();if(!r)return this;const o=r.getBoundingClientRect(),i=new uo(o.left||o.x,o.top||o.y,Math.max(o.width,1),Math.max(o.height,1)),a=i.equals(this.viewportScreenBounds),{_willSetInitialBounds:s}=this;if(a)this._willSetInitialBounds=!1;else if(s)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:i.toJson()},{squashing:!0,ephemeral:!0});else if(t&&!this.instanceState.followingUserId){const l=this.viewportPageCenter;this.updateInstanceState({screenBounds:i.toJson()},{squashing:!0,ephemeral:!0}),this.centerOnPoint(l)}else this.updateInstanceState({screenBounds:i.toJson()},{squashing:!0,ephemeral:!0});return this._tickCameraState(),this.updateRenderingBounds(),this}get viewportScreenBounds(){const{x:t,y:r,w:o,h:i}=this.instanceState.screenBounds;return new uo(t,r,o,i)}get viewportScreenCenter(){return this.viewportScreenBounds.center}get viewportPageBounds(){const{w:t,h:r}=this.viewportScreenBounds,{x:o,y:i,z:a}=this.camera;return new uo(-o,-i,t/a,r/a)}get viewportPageCenter(){return this.viewportPageBounds.center}screenToPage(t){const{screenBounds:r}=this.store.unsafeGetWithoutCapture(wl),{x:o,y:i,z:a=1}=this.camera;return{x:(t.x-r.x)/a-o,y:(t.y-r.y)/a-i,z:t.z??.5}}pageToScreen(t){const{screenBounds:r}=this.store.unsafeGetWithoutCapture(wl),{x:o,y:i,z:a=1}=this.camera;return{x:(t.x+o)*a+r.x,y:(t.y+i)*a+r.y,z:t.z??.5}}startFollowingUser(t){const r=this.store.query.records("instance_presence",()=>({userId:{eq:t}})),o=this.user.id;if(o||console.warn("You should set the userId for the current instance before following a user"),r.value.some(l=>l.followingUserId===o))return this;jd(()=>{this.stopFollowingUser(),this.updateInstanceState({followingUserId:t},{ephemeral:!0})});const i=()=>{this.removeListener("frame",s),this.removeListener("stop-following",i)};let a=!1;const s=()=>{const l=[...r.value].sort((j,$)=>j.lastActivityTimestamp-$.lastActivityTimestamp).pop();if(!l){this.stopFollowingUser();return}const d=l.currentPageId===this.currentPageId,u=d?H5e:1;if(!d){this.stopFollowingUser(),this.setCurrentPage(l.currentPageId),this.startFollowingUser(t);return}const{center:p,width:f,height:h}=this.viewportPageBounds,c=uo.From(l.screenBounds),g=c.width/l.camera.z,m=c.height/l.camera.z,b=new Le(g/2-l.camera.x,m/2-l.camera.y),v=l.followingUserId===o,w=f+(g-f)*u,_=h+(m-h)*u,k=v?h/_:Math.min(f/w,h/_),y=Rd(this.camera.z*k,q2,Of),S=this.viewportScreenBounds.w/y,C=this.viewportScreenBounds.h/y,I=b.sub(p),A=Le.Add(p,Le.Mul(I,u)),T=Le.Sub(A,p).len(),L=Math.abs(y-this.camera.z);if(T<F5e&&L<U5e){a=!0;return}a&&T<Z5e&&L<W5e||(a=!1,this.stopCameraAnimation(),this._setCamera({x:-(A.x-S/2),y:-(A.y-C/2),z:y}))};return this.once("stop-following",i),this.addListener("frame",s),this}stopFollowingUser(){return this.updateInstanceState({followingUserId:null},{ephemeral:!0}),this.emit("stop-following"),this}get cameraState(){return this._cameraState.value}getUnorderedRenderingShapes(t){const r=[];let o=uh*2,i=uh;const a=this.editingShapeId,s=this.selectedShapeIds,l=this.erasingShapeIds,d=this.renderingBoundsExpanded,u=Number.isFinite(this.renderingBoundsMargin);let p,f,h,c,g,m;const b=(v,w,_)=>{if(p=this.getShape(v),!p)return;f=p.opacity*w,h=!1,c=!1,g=this.getShapeUtil(p),m=this.getShapeMaskedPageBounds(v),t&&(!_&&l.includes(v)&&(h=!0,f*=.32),c=u&&g.canUnmount(p)&&a!==v&&(m===void 0||!d.includes(m)&&!s.includes(v))),r.push({id:v,shape:p,util:g,index:o,backgroundIndex:i,opacity:f,isCulled:c,maskedPageBounds:m}),o+=1,i+=1;const k=this.getSortedChildIdsForParent(v);if(!k.length)return;let y=null;g.providesBackgroundForChildren(p)&&(y=i,i=o,o+=uh);for(const S of k)b(S,f,_||h);y!==null&&(i=y)};for(const v of this.getSortedChildIdsForParent(this.currentPageId))b(v,1,!1);return r}get renderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(Ibe)}get renderingBounds(){return this._renderingBounds.value}get renderingBoundsExpanded(){return this._renderingBoundsExpanded.value}updateRenderingBounds(){const{viewportPageBounds:t}=this;return t.equals(this._renderingBounds.__unsafe__getWithoutCapture())?this:(this._renderingBounds.set(t.clone()),Number.isFinite(this.renderingBoundsMargin)?this._renderingBoundsExpanded.set(t.clone().expandBy(this.renderingBoundsMargin/this.zoomLevel)):this._renderingBoundsExpanded.set(t),this)}get _pages(){return this.store.query.records("page")}get pages(){return this._pages.value.sort(cl)}get currentPage(){return this.getPage(this.currentPageId)}get currentPageId(){return this.instanceState.currentPageId}getPage(t){return this.store.get(typeof t=="string"?t:t.id)}get currentPageShapeIds(){return this._currentPageShapeIds.value}getPageShapeIds(t){const r=typeof t=="string"?t:t.id,o=this.store.query.exec("shape",{parentId:{eq:r}});return this.getShapeAndDescendantIds(o.map(i=>i.id))}setCurrentPage(t,r){const o=typeof t=="string"?t:t.id;return this._setCurrentPageId(o,r),this}updatePage(t,r){return this._updatePage(t,r),this}createPage(t){return this._createPage(t),this}deletePage(t){const r=typeof t=="string"?t:t.id;return this._deletePage(r),this}duplicatePage(t,r=zh.createId()){if(this.pages.length>=O4)return this;const o=typeof t=="string"?t:t.id,i=this.getPage(o);if(!i)return this;const a={...this.camera},s=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(i.id));return this.batch(()=>{var u;const{pages:l}=this,d=Tv(i.index,(u=l[l.indexOf(i)+1])==null?void 0:u.index);if(this.createPage({name:i.name+" Copy",id:r,index:d}),this.setCurrentPage(r),this.setCamera(a),s)return this.putContentOntoCurrentPage(s)}),this}renamePage(t,r,o){const i=typeof t=="string"?t:t.id;return this.instanceState.isReadonly?this:(this.updatePage({id:i,name:r},o),this)}get _assets(){return this.store.query.records("asset")}get assets(){return this._assets.value}createAssets(t){return this._createAssets(t),this}updateAssets(t){return this._updateAssets(t),this}deleteAssets(t){const r=typeof t[0]=="string"?t:t.map(o=>o.id);return this._deleteAssets(r),this}getAsset(t){return this.store.get(typeof t=="string"?t:t.id)}get _shapeGeometryCache(){return this.store.createComputedCache("bounds",t=>this.getShapeUtil(t).getGeometry(t),(t,r)=>t.props===r.props)}getShapeGeometry(t){return this._shapeGeometryCache.get(typeof t=="string"?t:t.id)}get _shapeOutlineSegmentsCache(){return this.store.createComputedCache("outline-segments",t=>this.getShapeUtil(t).getOutlineSegments(t))}getShapeOutlineSegments(t){return this._shapeOutlineSegmentsCache.get(typeof t=="string"?t:t.id)??Sh}get _shapeHandlesCache(){return this.store.createComputedCache("handles",t=>{var r,o;return(o=(r=this.getShapeUtil(t)).getHandles)==null?void 0:o.call(r,t)})}getShapeHandles(t){return this._shapeHandlesCache.get(typeof t=="string"?t:t.id)}getShapeLocalTransform(t){const r=typeof t=="string"?t:t.id,o=this.getShape(r);if(!o)throw Error("Editor.getTransform: shape not found");return Yr.Identity().translate(o.x,o.y).rotate(o.rotation)}get _shapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",t=>{if(Dl(t.parentId))return this.getShapeLocalTransform(t);const r=this._shapePageTransformCache.get(t.parentId)??Yr.Identity();return Yr.Compose(r,this.getShapeLocalTransform(t))})}getShapeParentTransform(t){const r=typeof t=="string"?t:t.id,o=this.getShape(r);return!o||Dl(o.parentId)?Yr.Identity():this._shapePageTransformCache.get(o.parentId)??Yr.Identity()}getShapePageTransform(t){const r=typeof t=="string"?t:this.getShape(t).id;return this._shapePageTransformCache.get(r)??Yr.Identity()}get _shapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",t=>{const r=this._shapePageTransformCache.get(t.id);return r?uo.FromPoints(Yr.applyToPoints(r,this.getShapeGeometry(t).vertices)):new uo})}getShapePageBounds(t){return this._shapePageBoundsCache.get(typeof t=="string"?t:t.id)}get _shapeClipPathCache(){return this.store.createComputedCache("clipPathCache",t=>{const r=this._shapeMaskCache.get(t.id);if(!r)return;const o=this._shapePageTransformCache.get(t.id);return o?r.length===0?"polygon(0px 0px, 0px 0px, 0px 0px)":`polygon(${Yr.applyToPoints(Yr.Inverse(o),r).map(a=>`${a.x}px ${a.y}px`).join(",")})`:void 0})}getShapeClipPath(t){return this._shapeClipPathCache.get(typeof t=="string"?t:t.id)}get _shapeMaskCache(){return this.store.createComputedCache("pageMaskCache",t=>{if(Dl(t.parentId))return;const r=this.getShapeAncestors(t.id).filter(i=>this.isShapeOfType(i,"frame"));return r.length===0?void 0:r.map(i=>this._shapePageTransformCache.get(i.id).applyToPoints(this.getShapeGeometry(i).vertices)).reduce((i,a)=>{if(!(a&&i))return;const s=sS(i,a);return s?s.map(Le.Cast):[]})})}getShapeMask(t){return this._shapeMaskCache.get(typeof t=="string"?t:t.id)}getShapeMaskedPageBounds(t){typeof t!="string"&&(t=t.id);const r=this._shapePageBoundsCache.get(t);if(!r)return;const o=this._shapeMaskCache.get(t);if(o){const i=sS(o,r.corners);return i?uo.FromPoints(i):void 0}return r}getShapeAncestors(t,r=[]){const o=typeof t=="string"?t:t.id,i=this.getShape(o);if(!i)return r;const a=i.parentId;if(Dl(a))return r.reverse(),r;const s=this.store.get(a);return s?(r.push(s),this.getShapeAncestors(s,r)):r}findShapeAncestor(t,r){const o=typeof t=="string"?t:t.id,i=this.getShape(o);if(!i)return;const a=i.parentId;if(Dl(a))return;const s=this.getShape(a);if(s)return r(s)?s:this.findShapeAncestor(s,r)}hasAncestor(t,r){const o=typeof t=="string"?t:t==null?void 0:t.id,i=o&&this.getShape(o);return i?i.parentId===r?!0:this.hasAncestor(this.getShapeParent(i),r):!1}findCommonAncestor(t,r){var d;if(t.length===0)return;const o=typeof t[0]=="string"?t:t.map(u=>u.id),i=Lo(o.map(u=>this.getShape(u)));if(i.length===1){const u=i[0].parentId;return Dl(u)?void 0:r?(d=this.findShapeAncestor(i[0],r))==null?void 0:d.id:u}const[a,...s]=i;let l=this.getShapeParent(a);for(;l;){if(r&&!r(l)){l=this.getShapeParent(l);continue}if(s.every(u=>this.hasAncestor(u,l.id)))return l.id;l=this.getShapeParent(l)}}isShapeOrAncestorLocked(t){const r=typeof t=="string"?this.getShape(t):t;return r===void 0?!1:r.isLocked?!0:this.isShapeOrAncestorLocked(this.getShapeParent(r))}get currentPageBounds(){let t;return this.currentPageShapeIds.forEach(r=>{const o=this.getShapeMaskedPageBounds(r);o&&(t?t=t.expand(o):t=o.clone())}),t}getSelectedShapeAtPoint(t){const{selectedShapeIds:r}=this;return this.currentPageShapesSorted.filter(o=>o.type!=="group"&&r.includes(o.id)).reverse().find(o=>this.isPointInShape(o,t,{hitInside:!0,margin:0}))}getShapeAtPoint(t,r={}){const{viewportPageBounds:o,zoomLevel:i,currentPageShapesSorted:a}=this,{filter:s,margin:l=0,hitLabels:d=!1,hitInside:u=!1,hitFrameInside:p=!1}=r;let f=1/0,h=null,c=1/0,g=null;const m=a.filter(b=>{if(this.isShapeOfType(b,"group"))return!1;const v=this.getShapeMask(b);return v&&!Du(t,v)?!1:s?s(b):!0});for(let b=m.length-1;b>=0;b--){const v=m[b],w=this.getShapeGeometry(v),_=w instanceof s1,k=this.getPointInShapeSpace(v,t);if((this.isShapeOfType(v,"arrow")||this.isShapeOfType(v,"geo")&&v.props.fill==="none")&&v.props.text.trim()){for(const S of w.children)if(S.isLabel&&S.isPointInBounds(k))return v}if(this.isShapeOfType(v,"frame")){const S=w.distanceToPoint(k,u);if(Math.abs(S)<=l)return g||v;if(w.hitTestPoint(k,0,!0))return g||h||(p?v:void 0);continue}let y;if(_){let S=1/0;for(const C of w.children){if(C.isLabel&&!d)continue;const I=C.distanceToPoint(k,u);I<S&&(S=I)}y=S}else y=w.distanceToPoint(k,u);if(w.isClosed){if(y<=l){if(w.isFilled||_&&w.children[0].isFilled)return g||v;if(this.getShapePageBounds(v).contains(o))continue;if(Math.abs(y)<l)Math.abs(y)<c&&(c=Math.abs(y),g=v);else if(!g){const{area:S}=w;S<f&&(f=S,h=v)}}}else if(y<Jd/i)return v}return g||h||void 0}getShapesAtPoint(t,r={}){return this.currentPageShapes.filter(o=>this.isPointInShape(o,t,r))}isPointInShape(t,r,o={}){const{hitInside:i=!1,margin:a=0}=o,s=typeof t=="string"?t:t.id,l=this.getShapeMask(s);return l&&!Du(r,l)?!1:this.getShapeGeometry(s).hitTestPoint(this.getPointInShapeSpace(t,r),a,i)}getPointInShapeSpace(t,r){const o=typeof t=="string"?t:t.id;return this._shapePageTransformCache.get(o).clone().invert().applyToPoint(r)}getPointInParentSpace(t,r){const o=typeof t=="string"?t:t.id,i=this.getShape(o);if(!i)return new Le(0,0);if(Dl(i.parentId))return Le.From(r);const a=this.getShapePageTransform(i.parentId);return a?a.clone().invert().applyToPoint(r):Le.From(r)}get currentPageShapes(){return Array.from(this.currentPageShapeIds,t=>this.store.get(t))}get currentPageShapesSorted(){const t=new Set(this.currentPageShapes.sort(cl)),r=[];function o(i){r.push(i),t.delete(i),t.forEach(a=>{a.parentId===i.id&&o(a)})}return t.forEach(i=>{const a=this.getShape(i.parentId);a1(a)||o(i)}),r}isShapeOfType(t,r){return(typeof t=="string"?this.getShape(t):t).type===r}getShape(t){const r=typeof t=="string"?t:t.id;if(Xc(r))return this.store.get(r)}getShapeParent(t){const r=typeof t=="string"?t:t==null?void 0:t.id;if(!r)return;const o=this.getShape(r);if(!(o===void 0||!Xc(o.parentId)))return this.store.get(o.parentId)}getShapeNearestSibling(t,r){return r?r.parentId===t.parentId?r:this.findShapeAncestor(r,i=>i.parentId===t.parentId):void 0}isShapeInPage(t,r=this.currentPageId){const o=typeof t=="string"?t:t.id,i=this.getShape(o);if(!i)return!1;let a=!1;if(i.parentId===r)a=!0;else{let s=this.getShape(i.parentId);e:for(;s;){if(s.parentId===r){a=!0;break e}s=this.getShape(s.parentId)}}return a}getAncestorPageId(t){const r=typeof t=="string"?t:t==null?void 0:t.id,o=r&&this.getShape(r);if(o)return Dl(o.parentId)?o.parentId:this.getAncestorPageId(this.getShape(o.parentId))}reparentShapes(t,r,o){const i=typeof t[0]=="string"?t:t.map(h=>h.id),a=[],s=Dl(r)?Yr.Identity():this.getShapePageTransform(r),l=s.rotation();let d=[];const u=Lo(this.getSortedChildIdsForParent(r).map(h=>this.getShape(h)));if(o){const h=u.find(c=>c.index===o);if(h){const c=u[u.indexOf(h)+1];c?d=um(o,c.index,i.length):d=O8(o,i.length)}else{const c=u.sort(cl).find(g=>g.index>o);c?d=um(o,c.index,i.length):d=O8(o,i.length)}}else{const h=u.length&&u[u.length-1];d=h?O8(h.index,i.length):SF(i.length)}const p=s.clone().invert();let f;for(let h=0;h<i.length;h++){f=i[h];const c=this.getShape(f);if(!c)continue;const g=this.getShapePageTransform(c);if(!g)continue;const m=g.point();if(!c||!m)continue;const b=p.applyToPoint(m),v=g.rotation()-l;a.push({id:c.id,type:c.type,parentId:r,x:b.x,y:b.y,rotation:v,index:d[h]})}return this.updateShapes(a),this}getHighestIndexForParent(t){const r=typeof t=="string"?t:t.id,o=this._parentIdsToChildIds.value[r];if(!o||o.length===0)return"a1";const i=this.getShape(o[o.length-1]);return gh(i.index)}getSortedChildIdsForParent(t){const r=typeof t=="string"?t:t.id,o=this._parentIdsToChildIds.value[r];return o?this._childIdsCache.get(o,()=>o):Sh}visitDescendants(t,r){const o=typeof t=="string"?t:t.id,i=this.getSortedChildIdsForParent(o);for(const a of i)r(a)!==!1&&this.visitDescendants(a,r);return this}getShapeAndDescendantIds(t){const r=new Set,o=[...t];for(;o.length>0;){const i=o.pop();if(!i)break;if(!r.has(i)){r.add(i);for(const a of this.getSortedChildIdsForParent(i))o.push(a)}}return r}getDroppingOverShape(t,r=[]){return this.currentPageShapesSorted.findLast(o=>{if(!this.getShapeUtil(o).canDropShapes(o,r)||r.find(a=>a.id===o.id||this.hasAncestor(o,a.id)))return!1;const i=this.getShapeMaskedPageBounds(o.id);if(i&&i.containsPoint(t)&&this.getShapeGeometry(o).hitTestPoint(this.getPointInShapeSpace(o,t),0,!0))return!0})}getOutermostSelectableShape(t,r){const o=typeof t=="string"?t:t.id,i=this.getShape(o);let a=i,s=i;const{focusedGroup:l}=this;for(;s;){if(this.isShapeOfType(s,"group")&&(l==null?void 0:l.id)!==s.id&&!this.hasAncestor(l,s.id)&&((r==null?void 0:r(s))??!0))a=s;else if((l==null?void 0:l.id)===s.id)break;s=this.getShapeParent(s)}return a}rotateShapesBy(t,r){if((typeof t[0]=="string"?t:t.map(a=>a.id)).length<=0)return this;const i=kF({editor:this});return i?(z3({delta:r,snapshot:i,editor:this,stage:"one-off"}),this):this}nudgeShapes(t,r,o){var s,l;const i=typeof t[0]=="string"?t:t.map(d=>d.id);if(i.length<=0)return this;const a=[];for(const d of i){const u=this.getShape(d);if(!u)throw Error(`Could not find a shape with the id ${d}.`);const p=Le.Cast(r),f=this.getShapeParentTransform(u);f&&p.rot(-f.rotation());const h=(l=(s=this.getShapeUtil(u)).onTranslateStart)==null?void 0:l.call(s,u);a.push(h?{...h,x:u.x+p.x,y:u.y+p.y}:{id:d,x:u.x+p.x,y:u.y+p.y,type:u.type})}return this.updateShapes(a,{squashing:!0,...o}),this}duplicateShapes(t,r){const o=typeof t[0]=="string"?t:t.map(u=>u.id);if(o.length<=0)return this;const i=new Set(o),a=[],s=[...o];for(;s.length>0;){const u=s.pop();if(!u)break;a.push(u),this.getSortedChildIdsForParent(u).forEach(p=>s.push(p))}a.reverse();const l=new Map(a.map(u=>[u,da()])),d=Lo(a.map(u=>{const p=this.getShape(u);if(!p)return null;const f=l.get(u);let h=0,c=0;if(r&&i.has(u)){const y=this.getShapeParentTransform(p),S=new Le(r.x,r.y).rot(-y.rotation());h=S.x,c=S.y}const g=p.parentId??this.currentPageId,m=this.getSortedChildIdsForParent(g),b=m.indexOf(p.id),v=m[b+1],w=v?this.getShape(v):null,_=w?Tv(p.index,w.index):gh(p.index);let k=hl(p);if(this.isShapeOfType(p,"arrow")&&this.isShapeOfType(k,"arrow")){const y=this.getArrowInfo(p);let S,C;if(p.props.start.type==="binding"&&(S=l.get(p.props.start.boundShapeId),!S))if(y!=null&&y.isValid){const{x:A,y:T}=y.start.point;k.props.start={type:"point",x:A,y:T}}else{const{start:A}=Nd(this,p);k.props.start={type:"point",x:A.x,y:A.y}}if(p.props.end.type==="binding"&&(C=l.get(p.props.end.boundShapeId),!C))if(y!=null&&y.isValid){const{x:A,y:T}=y.end.point;k.props.end={type:"point",x:A,y:T}}else{const{end:A}=Nd(this,p);k.props.start={type:"point",x:A.x,y:A.y}}const I=J2(k)?Ov(this,k):$8(this,k);if(y!=null&&y.isValid&&(I!=null&&I.isValid)&&!J2(p)){const A=Le.Med(y.start.handle,y.end.handle),T=Le.Dist(y.middle,A),L=Le.Dist(I.middle,A);k.props.bend<0?k.props.bend+=L-T:k.props.bend-=L-T}k.props.start.type==="binding"&&S&&(k.props.start.boundShapeId=S),k.props.end.type==="binding"&&C&&(k.props.end.boundShapeId=C)}return k={...k,id:f,x:p.x+h,y:p.y+c,index:_},k}));return d.forEach(u=>{Xc(u.parentId)&&l.has(u.parentId)&&(u.parentId=l.get(u.parentId))}),this.history.batch(()=>{const u=d.length+this.currentPageShapeIds.size>uh;u&&X5(this);const p=u?d.slice(0,uh-this.currentPageShapeIds.size):d,f=p.map(h=>h.id);if(this.createShapes(p),this.setSelectedShapes(f),r!==void 0){const{viewportPageBounds:h,selectionPageBounds:c}=this;c&&!h.contains(c)&&this.centerOnPoint(c.center,{duration:vh})}}),this}moveShapesToPage(t,r){const o=typeof t[0]=="string"?t:t.map(l=>l.id);if(o.length===0)return this;if(this.instanceState.isReadonly)return this;const{currentPageId:i}=this;if(r===i)return this;if(!this.store.has(r))return this;const a=this.getContentFromCurrentPage(o);if(!a)return this;if(this.getPageShapeIds(r).size+a.shapes.length>uh)return X5(this,r),this;const s=this.camera.z;return this.history.batch(()=>{this.deleteShapes(o),this.setCurrentPage(r),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(a,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.camera,z:s}),this.centerOnPoint(this.selectionRotatedPageBounds.center)}),this}toggleLock(t){const r=typeof t[0]=="string"?t:t.map(s=>s.id);if(this.instanceState.isReadonly||r.length===0)return this;let o=!0,i=!0;const a=[];for(const s of r){const l=this.getShape(s);l&&(a.push(l),l.isLocked?i=!1:o=!1)}return this.batch(()=>{i?(this.updateShapes(a.map(s=>({id:s.id,type:s.type,isLocked:!0}))),this.setSelectedShapes([])):o?this.updateShapes(a.map(s=>({id:s.id,type:s.type,isLocked:!1}))):this.updateShapes(a.map(s=>({id:s.id,type:s.type,isLocked:!0})))}),this}sendToBack(t){const r=typeof t[0]=="string"?t:t.map(i=>i.id),o=G5(this,"toBack",r);return o&&this.updateShapes(o),this}sendBackward(t){const r=typeof t[0]=="string"?t:t.map(i=>i.id),o=G5(this,"backward",r);return o&&this.updateShapes(o),this}bringForward(t){const r=typeof t[0]=="string"?t:t.map(i=>i.id),o=G5(this,"forward",r);return o&&this.updateShapes(o),this}bringToFront(t){const r=typeof t[0]=="string"?t:t.map(i=>i.id),o=G5(this,"toFront",r);return o&&this.updateShapes(o),this}flipShapes(t,r){const o=typeof t[0]=="string"?t:t.map(s=>s.id);if(this.instanceState.isReadonly)return this;let i=Lo(o.map(s=>this.getShape(s)));if(!i.length)return this;i=Lo(i.map(s=>this.isShapeOfType(s,"group")?this.getSortedChildIdsForParent(s.id).map(l=>this.getShape(l)):s).flat());const a=uo.Common(Lo(i.map(s=>this.getShapePageBounds(s)))).center;return this.batch(()=>{for(const s of i){const l=this.getShapeGeometry(s).bounds,d=this.getShapePageTransform(s.id);d&&this.resizeShape(s.id,{x:r==="horizontal"?-1:1,y:r==="vertical"?-1:1},{initialBounds:l,initialPageTransform:d,initialShape:s,mode:"scale_shape",scaleOrigin:a,scaleAxisRotation:0})}}),this}stackShapes(t,r,o){const i=typeof t[0]=="string"?t:t.map(m=>m.id);if(this.instanceState.isReadonly)return this;const a=Lo(i.map(m=>this.getShape(m)).filter(m=>!(!m||this.isShapeOfType(m,"arrow")&&(m.props.start.type==="binding"||m.props.end.type==="binding")))),s=a.length;if(o===0&&s<3||s<2)return this;const l=Object.fromEntries(a.map(m=>[m.id,this.getShapePageBounds(m)]));let d,u,p,f;r==="horizontal"?(d="x",u="minX",p="maxX",f="width"):(d="y",u="minY",p="maxY",f="height");let h;if(o===0){const m=[];a.sort((v,w)=>l[v.id][u]-l[w.id][u]);for(let v=0;v<s-1;v++){const w=a[v],_=a[v+1],k=l[w.id],S=l[_.id][u]-k[p],C=m.find(I=>I.gap===S);C?C.count++:m.push({gap:S,count:1})}let b=0;m.forEach(v=>{v.count>b&&(b=v.count,h=v.gap)}),b===1&&(h=Math.max(0,m.reduce((v,w)=>v+w.gap*w.count,0)/(s-1)))}else h=o;const c=[];let g=l[a[0].id][p];return a.forEach((m,b)=>{var y,S;if(b===0)return;const v={x:0,y:0};v[d]=g+h-l[m.id][d];const w=this.getShapeParent(m),_=w?Le.Rot(v,-this.getShapePageTransform(w).decompose().rotation):v,k=(S=(y=this.getShapeUtil(m)).onTranslateStart)==null?void 0:S.call(y,m);c.push(k?{...k,[d]:m[d]+_[d]}:{id:m.id,type:m.type,[d]:m[d]+_[d]}),g+=l[m.id][f]+h}),this.updateShapes(c),this}packShapes(t,r){var S,C;const o=typeof t[0]=="string"?t:t.map(I=>I.id);if(this.instanceState.isReadonly)return this;if(o.length<2)return this;const i=Lo(o.map(I=>this.getShape(I)).filter(I=>!(!I||this.isShapeOfType(I,"arrow")&&(I.props.start.type==="binding"||I.props.end.type==="binding")))),a={},s={};let l,d,u=0;for(let I=0;I<i.length;I++)l=i[I],d=this.getShapePageBounds(l),a[l.id]=d,s[l.id]=d.clone(),u+=d.width*d.height;const p=uo.Common(Lo(Object.values(a))),f=p.width;i.sort((I,A)=>a[A.id].height-a[I.id].height);const h=Math.max(Math.ceil(Math.sqrt(u/.95)),f),c=[new uo(p.x,p.y,h,1/0)];let g=0,m=0,b,v;for(let I=0;I<i.length;I++){l=i[I],d=s[l.id];for(let A=c.length-1;A>=0;A--)if(b=c[A],!(d.width>b.width||d.height>b.height)){d.x=b.x,d.y=b.y,m=Math.max(m,d.maxY),g=Math.max(g,d.maxX),d.width===b.width&&d.height===b.height?(v=c.pop(),A<c.length&&(c[A]=v)):d.height===b.height?(b.x+=d.width+r,b.width-=d.width+r):d.width===b.width?(b.y+=d.height+r,b.height-=d.height+r):(c.push(new uo(b.x+(d.width+r),b.y,b.width-(d.width+r),d.height)),b.y+=d.height+r,b.height-=d.height+r);break}}const w=uo.Common(Object.values(s)),_=Le.Sub(p.center,w.center);let k;const y=[];for(let I=0;I<i.length;I++){l=i[I],d=a[l.id],k=s[l.id];const A=Le.Sub(k.point,d.point).add(_),T=this.getShapeParentTransform(l);T&&A.rot(-T.rotation());const L={id:l.id,type:l.type,x:l.x+A.x,y:l.y+A.y},j=(C=(S=this.getShapeUtil(l)).onTranslateStart)==null?void 0:C.call(S,{...l,...L});j?y.push({...L,...j}):y.push(L)}return y.length&&this.updateShapes(y),this}alignShapes(t,r){const o=typeof t[0]=="string"?t:t.map(d=>d.id);if(this.instanceState.isReadonly)return this;if(o.length<2)return this;const i=Lo(o.map(d=>this.getShape(d))),a=Object.fromEntries(i.map(d=>[d.id,this.getShapePageBounds(d)])),s=uo.Common(Lo(Object.values(a))),l=[];return i.forEach(d=>{var g,m;const u=a[d.id];if(!u)return;const p={x:0,y:0};switch(r){case"top":{p.y=s.minY-u.minY;break}case"center-vertical":{p.y=s.midY-u.minY-u.height/2;break}case"bottom":{p.y=s.maxY-u.minY-u.height;break}case"left":{p.x=s.minX-u.minX;break}case"center-horizontal":{p.x=s.midX-u.minX-u.width/2;break}case"right":{p.x=s.maxX-u.minX-u.width;break}}const f=this.getShapeParent(d),h=f?Le.Rot(p,-this.getShapePageTransform(f).decompose().rotation):p,c=(m=(g=this.getShapeUtil(d)).onTranslateStart)==null?void 0:m.call(g,d);l.push(c?{...c,x:d.x+h.x,y:d.y+h.y}:{id:d.id,type:d.type,x:d.x+h.x,y:d.y+h.y})}),this.updateShapes(l),this}distributeShapes(t,r){const o=typeof t[0]=="string"?t:t.map(w=>w.id);if(this.instanceState.isReadonly)return this;if(o.length<3)return this;const i=o.length,a=Lo(o.map(w=>this.getShape(w))),s=Object.fromEntries(a.map(w=>[w.id,this.getShapePageBounds(w)]));let l,d,u,p,f;r==="horizontal"?(l="x",d="minX",u="maxX",p="midX",f="width"):(l="y",d="minY",u="maxY",p="midY",f="height");const h=[],c=a.sort((w,_)=>s[w.id][d]-s[_.id][d])[0],g=a.sort((w,_)=>s[_.id][u]-s[w.id][u])[0],m=s[c.id][p],b=(s[g.id][p]-m)/(i-1),v=m+b;return a.filter(w=>w!==c&&w!==g).sort((w,_)=>s[w.id][p]-s[_.id][p]).forEach((w,_)=>{var I,A;const k={x:0,y:0};k[l]=v+b*_-s[w.id][f]/2-s[w.id][l];const y=this.getShapeParent(w),S=y?Le.Rot(k,-this.getShapePageTransform(y).rotation()):k,C=(A=(I=this.getShapeUtil(w)).onTranslateStart)==null?void 0:A.call(I,w);h.push(C?{...C,[l]:w[l]+S[l]}:{id:w.id,type:w.type,[l]:w[l]+S[l]})}),this.updateShapes(h),this}stretchShapes(t,r){const o=typeof t[0]=="string"?t:t.map(d=>d.id);if(this.instanceState.isReadonly)return this;if(o.length<2)return this;const i=Lo(o.map(d=>this.getShape(d))),a=Object.fromEntries(o.map(d=>[d,this.getShapeGeometry(d).bounds])),s=Object.fromEntries(o.map(d=>[d,this.getShapePageBounds(d)])),l=uo.Common(Lo(Object.values(s)));switch(r){case"vertical":{this.batch(()=>{for(const d of i){if(this.getShapePageTransform(d).rotation()%Ni)continue;const p=a[d.id],f=s[d.id],h=new Le(0,l.minY-f.minY),c=this.getShapeParentTransform(d);c&&h.rot(-c.rotation());const{x:g,y:m}=Le.Add(h,d);this.updateShapes([{id:d.id,type:d.type,x:g,y:m}],{squashing:!0});const b=new Le(1,l.height/f.height);this.resizeShape(d.id,b,{initialBounds:p,scaleOrigin:new Le(f.center.x,l.minY),scaleAxisRotation:0})}});break}case"horizontal":{this.batch(()=>{for(const d of i){const u=a[d.id],p=s[d.id];if(this.getShapePageTransform(d).rotation()%Ni)continue;const h=new Le(l.minX-p.minX,0),c=this.getShapeParentTransform(d);c&&h.rot(-c.rotation());const{x:g,y:m}=Le.Add(h,d);this.updateShapes([{id:d.id,type:d.type,x:g,y:m}],{squashing:!0});const b=new Le(l.width/p.width,1);this.resizeShape(d.id,b,{initialBounds:u,scaleOrigin:new Le(l.minX,p.center.y),scaleAxisRotation:0})}});break}}return this}resizeShape(t,r,o={}){var h;const i=typeof t=="string"?t:t.id;if(this.instanceState.isReadonly)return this;Number.isFinite(r.x)||(r=new Le(1,r.y)),Number.isFinite(r.y)||(r=new Le(r.x,1));const a=o.initialShape??this.getShape(i);if(!a)return this;const s=o.scaleOrigin??((h=this.getShapePageBounds(i))==null?void 0:h.center);if(!s)return this;const l=o.initialPageTransform?Yr.Cast(o.initialPageTransform):this.getShapePageTransform(i);if(!l)return this;const d=l.rotation();if(d==null)return this;const u=o.scaleAxisRotation??d,p=o.initialBounds??this.getShapeGeometry(i).bounds;if(!p)return this;if(!NH(d,u))return this._resizeUnalignedShape(i,r,{...o,initialBounds:p,scaleOrigin:s,scaleAxisRotation:u,initialPageTransform:l,initialShape:a});const f=this.getShapeUtil(a);if(f.isAspectRatioLocked(a)&&(Math.abs(r.x)>Math.abs(r.y)?r=new Le(r.x,Math.sign(r.y)*Math.abs(r.x)):r=new Le(Math.sign(r.x)*Math.abs(r.y),r.y)),f.onResize&&f.canResize(a)){const c=this._scalePagePoint(Yr.applyToPoint(l,new Le(0,0)),s,r,u),g=this.getPointInParentSpace(a.id,c),m=new Le(r.x,r.y),b=Iv((d-u)%Math.PI,0);m.x=b?r.x:r.y,m.y=b?r.y:r.x;const v=Yr.applyToPoint(l,new Le),{x:w,y:_}=this.getPointInParentSpace(a.id,v);this.updateShapes([{id:i,type:a.type,x:g.x,y:g.y,...f.onResize({...a,x:w,y:_},{newPoint:g,handle:o.dragHandle??"bottom_right",mode:o.mode??"scale_shape",scaleX:m.x,scaleY:m.y,initialBounds:p,initialShape:a})}],{squashing:!0})}else{const c=Yr.applyToPoint(l,p.center),g=this._scalePagePoint(c,s,r,u),m=this.getPointInParentSpace(a.id,c),b=this.getPointInParentSpace(a.id,g),v=Le.Sub(b,m);this.updateShapes([{id:i,type:a.type,x:a.x+v.x,y:a.y+v.y}],{squashing:!0})}return this}_scalePagePoint(t,r,o,i){const a=Le.RotWith(t,r,-i).sub(r),s=Le.MulV(a,o);return Le.Add(s,r).rotWith(r,i)}_resizeUnalignedShape(t,r,o){const{type:i}=o.initialShape,a=new Le(r.x,r.y);if(Math.abs(r.x)>Math.abs(r.y)?a.x=Math.sign(r.x)*Math.abs(r.y):a.y=Math.sign(r.y)*Math.abs(r.x),this.resizeShape(t,a,{initialShape:o.initialShape,initialBounds:o.initialBounds}),Math.sign(r.x)*Math.sign(r.y)<0){let{rotation:b}=Yr.Decompose(o.initialPageTransform);b-=2*b,this.updateShapes([{id:t,type:i,rotation:b}],{squashing:!0})}const s=Yr.applyToPoint(o.initialPageTransform,o.initialBounds.center),l=this._scalePagePoint(s,o.scaleOrigin,r,o.scaleAxisRotation),d=this.getShapePageBounds(t),u=this.getShapePageTransform(t),p=d.center,f=u.point();if(!p||!f)return this;const h=Le.Sub(l,p),c=Le.Add(f,h),{x:g,y:m}=this.getPointInParentSpace(t,c);return this.updateShapes([{id:t,type:i,x:g,y:m}],{squashing:!0}),this}getInitialMetaForShape(t){return{}}createShape(t){return this._createShapes([t]),this}createShapes(t){if(!Array.isArray(t))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");return this._createShapes(t),this}animateShape(t,r){return this.animateShapes([t],r)}animateShapes(t,r={}){const{duration:o=500,easing:i=ul.linear}=r,a=ba();let s=o,l;const d=[];t.forEach(f=>{if(!f)return;const h={partial:f,values:[]},c=this.getShape(f.id);if(c){for(const g of["x","y","rotation"])f[g]!==void 0&&c[g]!==f[g]&&h.values.push({prop:g,from:c[g],to:f[g]});d.push(h),this.animatingShapes.set(c.id,a)}});let u;const p=f=>{if(s-=f,s<0){const{animatingShapes:c}=this,g=t.filter(m=>m&&c.get(m.id)===a);g.length&&this.updateShapes(g,{squashing:!1}),this.removeListener("tick",p);return}l=i(1-s/o);const{animatingShapes:h}=this;try{const c=[];for(let g=0;g<d.length;g++)u=d[g],h.get(u.partial.id)===a&&c.push({id:u.partial.id,type:u.partial.type,...u.values.reduce((m,{prop:b,from:v,to:w})=>(m[b]=v+(w-v)*l,m),{})});this._updateShapes(c,{squashing:!0})}catch{}};return this.addListener("tick",p),this}groupShapes(t,r=da()){var h;if(!Array.isArray(t))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.instanceState.isReadonly)return this;const o=typeof t[0]=="string"?t:t.map(c=>c.id);if(o.length<=1)return this;const i=Lo(this._getUnlockedShapeIds(o).map(c=>this.getShape(c))),a=i.sort(cl).map(c=>c.id),s=uo.Common(Lo(i.map(c=>this.getShapePageBounds(c)))),{x:l,y:d}=s.point,u=this.findCommonAncestor(i)??this.currentPageId;if(this.currentToolId!=="select")return this;this.isIn("select.idle")||this.cancel();const p=i.filter(c=>c.parentId===u).sort(cl),f=(h=p[p.length-1])==null?void 0:h.index;return this.batch(()=>{this.createShapes([{id:r,type:"group",parentId:u,index:f,x:l,y:d,opacity:1,props:{}}]),this.reparentShapes(a,r),this.select(r)}),this}ungroupShapes(t){const r=typeof t[0]=="string"?t:t.map(s=>s.id);if(this.instanceState.isReadonly)return this;if(r.length===0)return this;if(this.currentToolId!=="select")return this;this.isIn("select.idle")||this.cancel();const o=new Set,i=Lo(r.map(s=>this.getShape(s))),a=[];return i.forEach(s=>{this.isShapeOfType(s,"group")?a.push(s):o.add(s.id)}),a.length===0?this:(this.batch(()=>{let s;for(let l=0,d=a.length;l<d;l++){s=a[l];const u=this.getSortedChildIdsForParent(s.id);for(let p=0,f=u.length;p<f;p++)o.add(u[p]);this.reparentShapes(u,s.parentId,s.index)}this.deleteShapes(a.map(l=>l.id)),this.select(...o)}),this)}updateShape(t,r){return this.updateShapes([t],r),this}updateShapes(t,r){let o=Lo(t);return this.animatingShapes.size>0&&o.forEach(i=>this.animatingShapes.delete(i.id)),o=o.filter(i=>{const a=this.getShape(i.id);return!(!a||this.isShapeOrAncestorLocked(a)&&!Object.hasOwn(i,"isLocked"))}),this._updateShapes(o,r),this}_getUnlockedShapeIds(t){return t.filter(r=>{var o;return!((o=this.getShape(r))!=null&&o.isLocked)})}deleteShapes(t){if(!Array.isArray(t))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");return this._deleteShapes(this._getUnlockedShapeIds(typeof t[0]=="string"?t:t.map(r=>r.id))),this}deleteShape(t){return this.deleteShapes([typeof t=="string"?t:t.id]),this}_extractSharedStyles(t,r){if(this.isShapeOfType(t,"group")){const o=this._parentIdsToChildIds.value[t.id];if(!o)return;for(let i=0,a=o.length;i<a;i++)this._extractSharedStyles(this.getShape(o[i]),r)}else for(const[o,i]of this.styleProps[t.type])r.applyValue(o,m1(t.props,i))}getStyleForNextShape(t){const r=this.instanceState.stylesForNextShape[t.id];return r===void 0?t.defaultValue:r}getShapeStyleIfExists(t,r){const o=this.styleProps[t.type].get(r);if(o!==void 0)return m1(t.props,o)}get sharedStyles(){if(this.isIn("select")&&this.selectedShapeIds.length>0)return this._selectionSharedStyles.value;const t=this.root.current.value,r=new lS;if(t.shapeType)for(const o of this.styleProps[t.shapeType].keys())r.applyValue(o,this.getStyleForNextShape(o));return r}get sharedOpacity(){if(this.isIn("select")&&this.selectedShapeIds.length>0){const t=[],r=i=>{const a=this.getShape(i);if(a)if(this.isShapeOfType(a,"group"))for(const s of this.getSortedChildIdsForParent(a.id))r(s);else t.push(a)};for(const i of this.selectedShapeIds)r(i);let o=null;for(const i of t)if(o===null)o=i.opacity;else if(o!==i.opacity)return{type:"mixed"};if(o!==null)return{type:"shared",value:o}}return{type:"shared",value:this.instanceState.opacityForNextShape}}setOpacityForNextShapes(t,r){return this.updateInstanceState({opacityForNextShape:t},r),this}setOpacityForSelectedShapes(t,r){const{selectedShapes:o}=this;if(o.length>0){const i=[],a=s=>{if(this.isShapeOfType(s,"group")){const l=this.getSortedChildIdsForParent(s);for(const d of l)a(this.getShape(d))}else i.push(s)};for(const s of o)a(s);this.updateShapes(i.map(s=>({id:s.id,type:s.type,opacity:t})),r)}return this}setStyleForNextShapes(t,r,o){const{instanceState:{stylesForNextShape:i}}=this;return this.updateInstanceState({stylesForNextShape:{...i,[t.id]:r}},o),this}setStyleForSelectedShapes(t,r,o){const{selectedShapes:i}=this;if(i.length>0){const a=[],s=l=>{if(this.isShapeOfType(l,"group")){const d=this.getSortedChildIdsForParent(l.id);for(const u of d)s(this.getShape(u))}else{const d=this.getShapeUtil(l),u=this.styleProps[l.type].get(t);if(u){const p={id:l.id,type:l.type,props:{[u]:r}};a.push({util:d,originalShape:l,updatePartial:p})}}};for(const l of i)s(l);this.updateShapes(a.map(({updatePartial:l})=>l),o)}return this}registerExternalAssetHandler(t,r){return this.externalAssetContentHandlers[t]=r,this}async getAssetForExternalContent(t){var r,o;return await((o=(r=this.externalAssetContentHandlers)[t.type])==null?void 0:o.call(r,t))}registerExternalContentHandler(t,r){return this.externalContentHandlers[t]=r,this}async putExternalContent(t){var r,o;return(o=(r=this.externalContentHandlers)[t.type])==null?void 0:o.call(r,t)}getContentFromCurrentPage(t){const r=typeof t[0]=="string"?t:t.map(l=>l.id);if(!r||r.length===0)return;const o={};let i=v4(r.map(l=>this.getShape(l)).sort(cl).flatMap(l=>{const d=[l];return this.visitDescendants(l.id,u=>{d.push(this.getShape(u))}),d}));i=i.map(l=>{if(o[l.id]=this.getShapePageTransform(l.id),l=Ff(l),this.isShapeOfType(l,"arrow")){const d=l.props.start.type==="binding"?l.props.start.boundShapeId:void 0,u=l.props.end.type==="binding"?l.props.end.boundShapeId:void 0,p=this.getArrowInfo(l);if(l.props.start.type==="binding"&&!i.some(h=>h.id===d))if(p!=null&&p.isValid){const{x:h,y:c}=p.start.point;l.props.start={type:"point",x:h,y:c}}else{const{start:h}=Nd(this,l);l.props.start={type:"point",x:h.x,y:h.y}}if(l.props.end.type==="binding"&&!i.some(h=>h.id===u))if(p!=null&&p.isValid){const{x:h,y:c}=p.end.point;l.props.end={type:"point",x:h,y:c}}else{const{end:h}=Nd(this,l);l.props.end={type:"point",x:h.x,y:h.y}}const f=J2(l)?Ov(this,l):$8(this,l);if(p!=null&&p.isValid&&(f!=null&&f.isValid)&&!J2(l)){const h=Le.Med(p.start.handle,p.end.handle),c=Le.Dist(p.middle,h),g=Le.Dist(f.middle,h);l.props.bend<0?l.props.bend+=g-c:l.props.bend-=g-c}return l}return l});const a=[];i.forEach(l=>{if(i.find(d=>d.id===l.parentId)===void 0){const d=this.getShapePageTransform(l.id),u=d.point(),p=d.rotation();l.x=u.x,l.y=u.y,l.rotation=p,l.parentId=this.currentPageId,a.push(l.id)}});const s=new Set;return i.forEach(l=>{"assetId"in l.props&&l.props.assetId!==null&&s.add(l.props.assetId)}),{shapes:i,rootShapeIds:a,schema:this.store.schema.serialize(),assets:Lo(Array.from(s).map(l=>this.getAsset(l)))}}putContentOntoCurrentPage(t,r={}){if(this.instanceState.isReadonly)return this;if(!t.schema)throw Error(`Could not put content:
content is missing a schema.`);const{select:o=!1,preserveIds:i=!1,preservePosition:a=!1}=r;let{point:s=void 0}=r;const{currentPageId:l}=this,{assets:d,shapes:u,rootShapeIds:p}=t,f=new Map(u.map(k=>[k.id,da()]));let h=this.currentPageId,c=1/0,g=[];for(const k of this.selectedShapes){if(c===0)break;const y=this.isShapeOfType(k,"frame"),S=this.getShapeAncestors(k);y&&S.push(k);const C=y?S.length+1:S.length;if(C<c)c=C,g=S,h=y?k.id:k.parentId;else if(C===c){if(g.length!==S.length)throw Error(`Ancestors: ${g.length} !== ${S.length}`);if(g.length===0){h=l;break}else{h=l;for(let I=0;I<g.length&&S[I]===g[I];I++)h=S[I].id}}}let m=!1;if(!Dl(h)){const k=this.getShape(h);if(k){if(!this.viewportPageBounds.includes(this.getShapePageBounds(k)))h=l;else if(p.length===1){const y=u.find(S=>S.id===p[0]);this.isShapeOfType(k,"frame")&&this.isShapeOfType(y,"frame")&&y.props.w===(k==null?void 0:k.props.w)&&y.props.h===(k==null?void 0:k.props.h)&&(m=!0)}}else h=l}m||(m=f.has(h)),m&&(h=this.getShape(h).parentId);let b=this.getHighestIndexForParent(h);const v=[],w=u.map(k=>{let y;if(i)y=hl(k),f.set(k.id,k.id);else{const S=f.get(k.id);y=hl({...k,id:S})}if(p.includes(k.id)&&(y.parentId=l,v.push(y)),f.has(y.parentId)?y.parentId=f.get(k.parentId):(p.push(y.id),y.index=b,b=gh(b)),this.isShapeOfType(y,"arrow")){if(y.props.start.type==="binding"){const S=f.get(y.props.start.boundShapeId);y.props.start=S?{...y.props.start,boundShapeId:S}:{type:"point",x:0,y:0}}if(y.props.end.type==="binding"){const S=f.get(y.props.end.boundShapeId);y.props.end=S?{...y.props.end,boundShapeId:S}:{type:"point",x:0,y:0}}}return y});if(w.length+this.currentPageShapeIds.size>uh)return X5(this),this;let _=[];if(d){for(let y=0;y<d.length;y++){const S=d[y],C=this.store.schema.migratePersistedRecord(S,t.schema);if(C.type==="success")d[y]=C.value;else throw Error(`Could not put content:
could not migrate content for asset:
${S.id}
${S.type}
reason:${C.reason}`)}const k=[];_=d.filter(y=>!this.store.has(y.id)).map(y=>{var S;return(y.type==="image"||y.type==="video")&&(y.props.src&&((S=y.props.src)!=null&&S.startsWith("data:image"))?(k.push(Ff(y)),y.props.src=null):k.push(Ff(y))),y}),Promise.allSettled(k.map(async y=>{const S=await Pxe(y.props.src,y.props.name,y.props.mimeType??"image/png"),C=await this.getAssetForExternalContent({type:"file",file:S});return C?[y,C]:null})).then(y=>{this.updateAssets(Lo(y.map(S=>S.status==="fulfilled"&&S.value?{...S.value[1],id:S.value[0].id}:void 0)))})}for(let k=0;k<w.length;k++){const y=w[k],S=this.store.schema.migratePersistedRecord(y,t.schema);if(S.type==="success")w[k]=S.value;else throw Error(`Could not put content:
could not migrate content for shape:
${y.id}, ${y.type}
reason:${S.reason}`)}return this.batch(()=>{_.length>0&&this.createAssets(_),this.createShapes(w),o&&this.select(...v.map(I=>I.id)),h!==l&&this.reparentShapes(v.map(I=>I.id),h);const k=w.map(I=>this.getShape(I.id)),y=uo.Common(k.map(I=>this.getShapePageBounds(I)));if(s===void 0)if(Dl(h)){const{viewportPageBounds:I}=this;a||I.includes(uo.From(y))?s=y.center:s=I.center}else{const I=this.getShape(h);s=Yr.applyToPoint(this.getShapePageTransform(I),this.getShapeGeometry(I).bounds.center)}if(v.length===1){const I=v[0];if(this.isShapeOfType(I,"frame"))for(;this.getShapesAtPoint(s).some(A=>this.isShapeOfType(A,"frame")&&A.props.w===I.props.w&&A.props.h===I.props.h);)s.x+=y.w+16}const S=uo.Common(Lo(v.map(({id:I})=>this.getShapePageBounds(I)))).center,C=Le.Sub(s,S);this.updateShapes(v.map(({id:I})=>{const A=this.getShape(I),T=this.getShapeParentTransform(I).decompose().rotation,L=Le.Rot(C,-T);return{id:A.id,type:A.type,x:A.x+L.x,y:A.y+L.y}}))}),this}async getSvg(t,r={}){var k,y;const o=typeof t[0]=="string"?t:t.map(S=>S.id);if(o.length===0)return;if(!window.document)throw Error("No document");const{scale:i=1,background:a=!1,padding:s=Y5e,preserveAspectRatio:l=!1}=r,d=Xl({isDarkMode:this.user.isDarkMode}),u=this.getShapeAndDescendantIds(o),p=this.getUnorderedRenderingShapes(!1).filter(({id:S})=>u.has(S));let f=null;for(const{maskedPageBounds:S}of p)S&&(f?f.union(S):f=S.clone());if(!f)return;const h=o.length===1&&this.isShapeOfType(this.getShape(o[0]),"frame")?o[0]:null;h||f.expandBy(s);const c=f.width*i,g=f.height*i,m=window.document.createElementNS("http://www.w3.org/2000/svg","svg");l&&m.setAttribute("preserveAspectRatio",l),m.setAttribute("direction","ltr"),m.setAttribute("width",c+""),m.setAttribute("height",g+""),m.setAttribute("viewBox",`${f.minX} ${f.minY} ${f.width} ${f.height}`),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),a?h?m.style.setProperty("background",d.solid):m.style.setProperty("background-color",d.background):m.style.setProperty("background-color","transparent");try{(y=(k=document.body).focus)==null||y.call(k)}catch{}const b=window.document.createElementNS("http://www.w3.org/2000/svg","defs");m.append(b);const v=new Map,w={addExportDef:S=>{if(v.has(S.key))return;const C=(async()=>{const I=await S.getElement();if(!I)return;const A=document.createComment(`def: ${S.key}`);b.appendChild(A);for(const T of Array.isArray(I)?I:[I])b.appendChild(T)})();v.set(S.key,C)}},_=(await Promise.all(p.map(async({id:S,opacity:C,index:I,backgroundIndex:A})=>{var ie,te;if(S===h)return[];const T=this.getShape(S);if(this.isShapeOfType(T,"group"))return[];const L=this.getShapeUtil(T);let j=await((ie=L.toSvg)==null?void 0:ie.call(L,T,w)),$=await((te=L.toBackgroundSvg)==null?void 0:te.call(L,T,w));if(j){const Z=document.createElementNS("http://www.w3.org/2000/svg","g");Z.appendChild(j),j=Z}if($){const Z=document.createElementNS("http://www.w3.org/2000/svg","g");Z.appendChild($),$=Z}if(!j&&!$){const Z=this.getShapePageBounds(T),D=window.document.createElementNS("http://www.w3.org/2000/svg","rect");D.setAttribute("width",Z.width+""),D.setAttribute("height",Z.height+""),D.setAttribute("fill",d.solid),D.setAttribute("stroke",d.grey.pattern),D.setAttribute("stroke-width","1"),j=D}let ee=this.getShapePageTransform(T).toCssString();"scale"in T.props&&T.props.scale!==1&&(ee=`${ee} scale(${T.props.scale}, ${T.props.scale})`),j==null||j.setAttribute("transform",ee),$==null||$.setAttribute("transform",ee),j==null||j.setAttribute("opacity",C+""),$==null||$.setAttribute("opacity",C+"");const Q=this.getShapeMask(T.id);if(Q){const Z=document.createElementNS("http://www.w3.org/2000/svg","clipPath");b.appendChild(Z);const D=ba();Z.id=D;const B=document.createElementNS("http://www.w3.org/2000/svg","path");if(B.setAttribute("d",`M${Q.map(({x:H,y:V})=>`${H},${V}`).join("L")}Z`),Z.appendChild(B),j){const H=document.createElementNS("http://www.w3.org/2000/svg","g");H.setAttribute("clip-path",`url(#${D})`),H.appendChild(j),j=H}if($){const H=document.createElementNS("http://www.w3.org/2000/svg","g");H.setAttribute("clip-path",`url(#${D})`),H.appendChild($),$=H}}const pe=[];return j&&pe.push({zIndex:I,element:j}),$&&pe.push({zIndex:A,element:$}),pe}))).flat();await Promise.all(v.values());for(const{element:S}of _.sort((C,I)=>C.zIndex-I.zIndex))m.appendChild(S);return m}_updateInputsFromEvent(t){var c;const{previousScreenPoint:r,previousPagePoint:o,currentScreenPoint:i,currentPagePoint:a}=this.inputs,{screenBounds:s}=this.store.unsafeGetWithoutCapture(wl),{x:l,y:d,z:u}=t.point,{x:p,y:f,z:h}=this.camera;r.setTo(i),o.setTo(a),i.set(l,d),a.set((l-s.x)/h-p,(d-s.y)/h-f,u??.5),this.inputs.isPen=t.type==="pointer"&&t.isPen,t.name==="pointer_down"&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:C4,typeName:"pointer",x:a.x,y:a.y,lastActivityTimestamp:t.type==="pointer"&&t.pointerId===BA.CAMERA_MOVE?((c=this.store.get(C4))==null?void 0:c.lastActivityTimestamp)??Date.now():Date.now(),meta:{}}])}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}}fo([pr],lo.prototype,"canUndo",1);fo([pr],lo.prototype,"canRedo",1);fo([pr],lo.prototype,"_arrowBindingsIndex",1);fo([pr],lo.prototype,"arrowInfoCache",1);fo([pr],lo.prototype,"currentTool",1);fo([pr],lo.prototype,"currentToolId",1);fo([pr],lo.prototype,"documentSettings",1);fo([pr],lo.prototype,"instanceState",1);fo([pr],lo.prototype,"openMenus",1);fo([pr],lo.prototype,"isMenuOpen",1);fo([pr],lo.prototype,"pageStates",1);fo([pr],lo.prototype,"_pageStates",1);fo([pr],lo.prototype,"currentPageState",1);fo([pr],lo.prototype,"_currentPageStateId",1);fo([pr],lo.prototype,"selectedShapeIds",1);fo([pr],lo.prototype,"selectedShapes",1);fo([pr],lo.prototype,"onlySelectedShape",1);fo([pr],lo.prototype,"selectionPageBounds",1);fo([pr],lo.prototype,"selectionRotation",1);fo([pr],lo.prototype,"selectionRotatedPageBounds",1);fo([pr],lo.prototype,"focusedGroupId",1);fo([pr],lo.prototype,"focusedGroup",1);fo([pr],lo.prototype,"editingShapeId",1);fo([pr],lo.prototype,"editingShape",1);fo([pr],lo.prototype,"hoveredShapeId",1);fo([pr],lo.prototype,"hoveredShape",1);fo([pr],lo.prototype,"hintingShapeIds",1);fo([pr],lo.prototype,"hintingShapes",1);fo([pr],lo.prototype,"erasingShapeIds",1);fo([pr],lo.prototype,"erasingShapes",1);fo([pr],lo.prototype,"cameraId",1);fo([pr],lo.prototype,"camera",1);fo([pr],lo.prototype,"zoomLevel",1);fo([pr],lo.prototype,"viewportScreenBounds",1);fo([pr],lo.prototype,"viewportScreenCenter",1);fo([pr],lo.prototype,"viewportPageBounds",1);fo([pr],lo.prototype,"viewportPageCenter",1);fo([pr],lo.prototype,"cameraState",1);fo([pr],lo.prototype,"renderingShapes",1);fo([pr],lo.prototype,"renderingBounds",1);fo([pr],lo.prototype,"renderingBoundsExpanded",1);fo([pr],lo.prototype,"_pages",1);fo([pr],lo.prototype,"pages",1);fo([pr],lo.prototype,"_assets",1);fo([pr],lo.prototype,"_shapeGeometryCache",1);fo([pr],lo.prototype,"_shapeOutlineSegmentsCache",1);fo([pr],lo.prototype,"_shapeHandlesCache",1);fo([pr],lo.prototype,"_shapePageTransformCache",1);fo([pr],lo.prototype,"_shapePageBoundsCache",1);fo([pr],lo.prototype,"_shapeClipPathCache",1);fo([pr],lo.prototype,"_shapeMaskCache",1);fo([pr],lo.prototype,"currentPageBounds",1);fo([pr],lo.prototype,"currentPageShapes",1);fo([pr],lo.prototype,"currentPageShapesSorted",1);fo([pr({isEqual:(n,e)=>n.equals(e)})],lo.prototype,"sharedStyles",1);fo([pr],lo.prototype,"sharedOpacity",1);function X5(n,e=n.currentPageId){const t=n.getPage(e).name;n.emit("max-shapes",{name:t,pageId:e,count:uh})}function iw(){const n=Dn();return sr("isDarkMode",()=>n.user.isDarkMode,[n])}const uwe='<path d="m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z" fill="white"/><path d="m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z" fill="white"/><path d="m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z" fill="black"/><path d="m13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="black"/>',hwe='<path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="m21.5664 21.7344v-3.459"/><path d="m19.5508 21.7461-.016-3.473"/><path d="m17.5547 18.3047.021 3.426"/></g>',fwe='<path d="m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z" fill="white"/><path d="m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z" fill="%23231f1f"/>',pwe='<path d="m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z" fill="white"/><g fill="black"><path d="m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z"/><path d="m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g>',yL="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",xL="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",q5='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>',gwe='<path fill="white" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="black" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/>',mwe="<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",vwe='<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',bwe='<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',ywe='<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 16h-5.98v-1.98h5.98z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>';function Ds(n,e,t,r,o,i=16,a=16){const s=(-t-e)*(ji/180),l=Math.sin(s),d=Math.cos(s),u=1*d-1*l,p=1*l+1*d;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${o};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${u}' dy='${p}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${e+t} 16 16)${r?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+n.replaceAll('"',"'")+`</g></svg>") ${i} ${a}, pointer`}const xwe={none:()=>"none",default:(n,e,t)=>Ds(uwe,n,0,e,t,12,8),pointer:(n,e,t)=>Ds(hwe,n,0,e,t,14,10),cross:(n,e,t)=>Ds(fwe,n,0,e,t),move:(n,e,t)=>Ds(pwe,n,0,e,t),grab:(n,e,t)=>Ds(vwe,n,0,e,t),grabbing:(n,e,t)=>Ds(mwe,n,0,e,t),text:(n,e,t)=>Ds(gwe,n,0,e,t,4,10),"ew-resize":(n,e,t)=>Ds(xL,n,0,e,t),"ns-resize":(n,e,t)=>Ds(xL,n,90,e,t),"nesw-resize":(n,e,t)=>Ds(yL,n,0,e,t),"nwse-resize":(n,e,t)=>Ds(yL,n,90,e,t),"nwse-rotate":(n,e,t)=>Ds(q5,n,0,e,t),"nesw-rotate":(n,e,t)=>Ds(q5,n,90,e,t),"senw-rotate":(n,e,t)=>Ds(q5,n,180,e,t),"swne-rotate":(n,e,t)=>Ds(q5,n,270,e,t),"zoom-in":(n,e,t)=>Ds(bwe,n,0,e,t),"zoom-out":(n,e,t)=>Ds(ywe,n,0,e,t)};function pc(n,e=0,t="black"){return xwe[n]($5e(e),!1,t)}const wwe=["default","pointer","cross","move","grab","grabbing","text"];function Cwe(){const n=Dn(),e=vl(),t=iw();g1("useCursor",()=>{const{type:r,rotation:o}=n.instanceState.cursor;if(wwe.includes(r)){e.style.setProperty("--tl-cursor",`var(--tl-cursor-${r})`);return}e.style.setProperty("--tl-cursor",pc(r,o,t?"white":"black"))},[n,e,t])}function Swe(){const n=Dn(),e=vl(),t=iw(),r=sr(es.forceSrgb);je.useEffect(()=>{t?(e.setAttribute("data-color-mode","dark"),e.classList.remove("tl-theme__light"),e.classList.add("tl-theme__dark")):(e.setAttribute("data-color-mode","light"),e.classList.remove("tl-theme__dark"),e.classList.add("tl-theme__light")),r?e.classList.add("tl-theme__force-sRGB"):e.classList.remove("tl-theme__force-sRGB")},[n,e,r,t])}function kwe(n){const e=ne.useRef();return ne.useLayoutEffect(()=>{e.current=n}),ne.useDebugValue(n),ne.useCallback((...t)=>{const r=e.current;return qx(r,"fn does not exist"),r(...t)},[])}function _we(n){const e=Dn(),t=vl();ne.useLayoutEffect(()=>{if(!t)return;const r=S_(()=>{const{activeElement:o}=document,{isFocused:i}=e.instanceState,a=document.hasFocus()&&(t===o||t.contains(o));i!==a&&(e.updateInstanceState({isFocused:a}),e.updateViewportScreenBounds(),a||e.complete())},32);return t.addEventListener("focusin",r),t.addEventListener("focus",r),t.addEventListener("focusout",r),t.addEventListener("blur",r),()=>{t.removeEventListener("focusin",r),t.removeEventListener("focus",r),t.removeEventListener("focusout",r),t.removeEventListener("blur",r)}},[t,e]),ne.useLayoutEffect(()=>{n&&e.getContainer().focus()},[e,n])}function Ewe(){const[n,e]=ne.useState(0);ne.useEffect(()=>e(t=>t+1),[])}const Ag="TLDRAW_TAB_ID_v2",Bs=globalThis.window;function Pwe(){return Bs?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(Bs.navigator.platform)||Bs.navigator.userAgent.includes("Mac")&&"ontouchend"in document:!1}const B4=(Bs==null?void 0:Bs[Ag])??(Bs==null?void 0:Bs.sessionStorage[Ag])??"TLDRAW_INSTANCE_STATE_V1_"+ba();Bs&&(Bs[Ag]=B4,Pwe()?Bs.sessionStorage[Ag]=B4:delete Bs.sessionStorage[Ag]);Bs==null||Bs.addEventListener("beforeunload",()=>{Bs.sessionStorage[Ag]=B4});const Mwe={Initial:0},wb=Mwe.Initial,EF=di({version:Oo,currentPageId:pb,isFocusMode:pi,exportBackground:pi,isDebugMode:pi,isToolLocked:pi,isGridMode:pi,pageStates:Ec(di({pageId:pb,camera:di({x:Oo,y:Oo,z:Oo}),selectedShapeIds:Ec(Ad),focusedGroupId:Ad.nullable()}))}),Iwe=zi({currentVersion:wb});function Twe(n){if(!n||typeof n!="object")return console.warn("Invalid instance state"),null;if(!("version"in n)||typeof n.version!="number")return console.warn("No version in instance state"),null;const e=E_({value:n,fromVersion:n.version,toVersion:wb,migrations:Iwe});if(e.type==="error")return console.warn(e.reason),null;const t={...e.value,version:wb};try{EF.validate(t)}catch(r){return console.warn(r),null}return t}function Owe(n){const e=n.query.ids("page");return pr("sessionStateSnapshot",()=>{const t=n.get(wl);if(!t)return null;const r=[...e.value];return{version:wb,currentPageId:t.currentPageId,exportBackground:t.exportBackground,isFocusMode:t.isFocusMode,isDebugMode:t.isDebugMode,isToolLocked:t.isToolLocked,isGridMode:t.isGridMode,pageStates:r.map(o=>{const i=n.get(ll.createId(o)),a=n.get(sl.createId(o));return{pageId:o,camera:{x:(a==null?void 0:a.x)??0,y:(a==null?void 0:a.y)??0,z:(a==null?void 0:a.z)??1},selectedShapeIds:(i==null?void 0:i.selectedShapeIds)??[],focusedGroupId:(i==null?void 0:i.focusedGroupId)??null}})}})}function Awe(n,e){const t=Twe(e);if(!t)return;const r=n.allRecords().filter(a=>a.typeName==="instance_page_state"||a.typeName==="camera"),o={added:{},updated:{},removed:{...xH(r.map(a=>[a.id,a]))}};n.has(wl)&&(o.removed[wl]=n.get(wl));const i={removed:{},updated:{},added:{[wl]:n.schema.types.instance.create({id:wl,currentPageId:t.currentPageId,isDebugMode:t.isDebugMode,isFocusMode:t.isFocusMode,isToolLocked:t.isToolLocked,isGridMode:t.isGridMode,exportBackground:t.exportBackground})}};for(const a of t.pageStates){const s=sl.createId(a.pageId),l=ll.createId(a.pageId);i.added[s]=sl.create({id:sl.createId(a.pageId),x:a.camera.x,y:a.camera.y,z:a.camera.z}),i.added[l]=ll.create({id:ll.createId(a.pageId),pageId:a.pageId,selectedShapeIds:a.selectedShapeIds,focusedGroupId:a.focusedGroupId})}jd(()=>{n.applyDiff(Qx([o,i])),n.ensureStoreIsUsable()})}function Lwe(n){var o;const e=[];for(const i of Object.values(n))(o=i.typeName)!=null&&o.match(/^(instance.*|pointer|camera)$/)&&e.push(i);const t=e.filter(i=>i.typeName==="instance"&&i.id!==wl)[0];if(!t)return null;const r={version:wb,currentPageId:t.currentPageId,exportBackground:!!t.exportBackground,isFocusMode:!!t.isFocusMode,isDebugMode:!!t.isDebugMode,isToolLocked:!!t.isToolLocked,isGridMode:!1,pageStates:e.filter(i=>i.typeName==="instance_page_state"&&i.instanceId===t.id).map(i=>{const a=n[i.cameraId]??{x:0,y:0,z:1};return{pageId:i.pageId,camera:{x:a.x,y:a.y,z:a.z},selectedShapeIds:i.selectedShapeIds,focusedGroupId:i.focusedGroupId}})};try{return EF.validate(r),r}catch{return null}}function $we(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
 If your hard disk is full, try clearing up some space and then reload the page.`)}function jwe(){window.alert(`Oops! We could not access your browser's storageand the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)}const aw="TLDRAW_DOCUMENT_v2",PF="TLDRAW_DB_NAME_INDEX_v2",Wi={Records:"records",Schema:"schema",SessionState:"session_state"};async function sw(n,e){Bwe(n);const t=await Sq(n,3,{upgrade(r){r.objectStoreNames.contains(Wi.Records)||r.createObjectStore(Wi.Records),r.objectStoreNames.contains(Wi.Schema)||r.createObjectStore(Wi.Schema),r.objectStoreNames.contains(Wi.SessionState)||r.createObjectStore(Wi.SessionState)}});try{return await e(t)}finally{t.close()}}async function Rwe({persistenceKey:n,sessionId:e,didCancel:t}){const r=aw+n;if(K_().includes(r))return await zwe({persistenceKey:n,didCancel:t}),await sw(r,async o=>{var p,f;if(t!=null&&t())return;const i=o.transaction([Wi.Records,Wi.Schema,Wi.SessionState],"readonly"),a=i.objectStore(Wi.Records),s=i.objectStore(Wi.Schema),l=i.objectStore(Wi.SessionState);let d=e?(p=await l.get(e))==null?void 0:p.snapshot:null;d||(d=(f=(await l.getAll()).sort((c,g)=>c.updatedAt-g.updatedAt).pop())==null?void 0:f.snapshot);const u={records:await a.getAll(),schema:await s.get(Wi.Schema),sessionStateSnapshot:d};if(t!=null&&t()){i.abort();return}return await i.done,u})}async function Dwe({persistenceKey:n,schema:e,changes:t,sessionId:r,sessionStateSnapshot:o,didCancel:i}){const a=aw+n;await sw(a,async s=>{const l=s.transaction([Wi.Records,Wi.Schema,Wi.SessionState],"readwrite"),d=l.objectStore(Wi.Records),u=l.objectStore(Wi.Schema),p=l.objectStore(Wi.SessionState);for(const[f,h]of Object.entries(t.added))await d.put(h,f);for(const[f,h]of Object.values(t.updated))await d.put(h,h.id);for(const f of Object.keys(t.removed))await d.delete(f);if(u.put(e.serialize(),Wi.Schema),o&&r?p.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together"),i!=null&&i())return l.abort();await l.done})}async function Nwe({persistenceKey:n,schema:e,snapshot:t,sessionId:r,sessionStateSnapshot:o,didCancel:i}){const a=aw+n;await sw(a,async s=>{const l=s.transaction([Wi.Records,Wi.Schema,Wi.SessionState],"readwrite"),d=l.objectStore(Wi.Records),u=l.objectStore(Wi.Schema),p=l.objectStore(Wi.SessionState);await d.clear();for(const[f,h]of Object.entries(t))await d.put(h,f);if(u.put(e.serialize(),Wi.Schema),o&&r?p.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together"),i!=null&&i())return l.abort();await l.done})}async function zwe({persistenceKey:n,didCancel:e}){await sw(aw+n,async t=>{const r=t.transaction([Wi.SessionState],"readwrite"),o=r.objectStore(Wi.SessionState),i=(await o.getAll()).sort((s,l)=>s.updatedAt-l.updatedAt);if(i.length<10){await r.done;return}const a=i.slice(0,i.length-10);for(const{id:s}of a)await o.delete(s);if(e!=null&&e())return r.abort();await r.done})}function K_(){const n=JSON.parse((window==null?void 0:window.localStorage.getItem(PF))||"[]")??[];return Array.isArray(n)?n:[]}function Bwe(n){const e=new Set(K_());e.add(n),window==null||window.localStorage.setItem(PF,JSON.stringify([...e]))}const Hwe=350,Fwe=1e4,wL=Symbol("UPDATE_INSTANCE_STATE"),Zwe=n=>n;class Uwe{constructor(e){J(this,"onmessage")}postMessage(e){}close(){}}const Wwe=typeof BroadcastChannel>"u"?Uwe:BroadcastChannel;class Vwe{constructor(e,{persistenceKey:t,sessionId:r=B4,onLoad:o,onLoadError:i},a=new Wwe(`tldraw-tab-sync-${t}`)){J(this,"disposables",new Set);J(this,"diffQueue",[]);J(this,"didDispose",!1);J(this,"shouldDoFullDBWrite",!0);J(this,"isReloading",!1);J(this,"persistenceKey");J(this,"sessionId");J(this,"serializedSchema");J(this,"isDebugging",!1);J(this,"documentTypes");J(this,"$sessionStateSnapshot");J(this,"initTime",Date.now());J(this,"isPersisting",!1);J(this,"didLastWriteError",!1);J(this,"scheduledPersistTimeout",null);this.store=e,this.channel=a,typeof window<"u"&&(window.tlsync=this),this.persistenceKey=t,this.sessionId=r,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=Owe(this.store),this.disposables.add(e.listen(({changes:s})=>{this.diffQueue.push(s),this.channel.postMessage(Zwe({type:"diff",storeId:this.store.id,changes:s,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(e.listen(()=>{this.diffQueue.push(wL),this.schedulePersist()},{scope:"session"})),this.connect(o,i),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(s=>s.scope==="document").map(s=>s.typeName))}debug(...e){this.isDebugging&&console.debug(...e)}async connect(e,t){this.debug("connecting");let r;try{r=await Rwe({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:()=>this.didDispose})}catch(o){t(o),jwe(),typeof window<"u"&&window.location.reload();return}if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose)try{if(r){const o=Object.fromEntries(r.records.map(s=>[s.id,s])),i=r.sessionStateSnapshot??Lwe(o),a=this.store.schema.migrateStoreSnapshot({store:o,schema:r.schema??this.store.schema.serializeEarliestVersion()});if(a.type==="error"){console.error("failed to migrate store",a),t(new Error(`Failed to migrate store: ${a.reason}`));return}this.store.mergeRemoteChanges(()=>{this.store.put(Object.values(a.value).filter(s=>this.documentTypes.has(s.typeName)),"initialize")}),i&&Awe(this.store,i)}this.channel.onmessage=({data:o})=>{var s,l;this.debug("got message",o);const i=o,a=Bbe(this.serializedSchema,i.schema??this.store.schema.serializeEarliestVersion());if(a===-1){if(Date.now()-this.initTime<5e3){t(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,(l=(s=window==null?void 0:window.location)==null?void 0:s.reload)==null||l.call(s);return}else if(a===1){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}i.type==="diff"&&(this.debug("applying diff"),jd(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(i.changes),this.store.ensureStoreIsUsable()})}))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),e(this)}catch(o){if(this.debug("error loading data from store",o),this.didDispose)return;t(o);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(e=>e())}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),!this.scheduledPersistTimeout&&(this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?Fwe:Hwe))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),!this.isPersisting&&(this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist())}async doPersist(){qx(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start");const e=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await Nwe({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});else{const t=Qx(e.filter(r=>r!==wL));await Dwe({persistenceKey:this.persistenceKey,changes:t,schema:this.store.schema,didCancel:()=>this.didDispose,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value})}this.didLastWriteError=!1}catch(t){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",t),$we(),typeof window<"u"&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function cS({initialData:n,defaultName:e="",...t}){const r="schema"in t&&t.schema?t.schema:Aye({shapes:Kwe(yF("shapeUtils"in t&&t.shapeUtils?t.shapeUtils:[]))});return new CH({schema:r,initialData:n,props:{defaultName:e}})}function Kwe(n){return Object.fromEntries(n.map(e=>[e.type,{props:e.props,migrations:e.migrations}]))}function Ywe(n){const[e,t]=ne.useState(()=>{const o=cS(n);return n.snapshot&&o.loadSnapshot(n.snapshot),o}),r=ne.useRef(n);if(ne.useEffect(()=>void(r.current=n)),Object.keys(r.current).some(o=>r.current[o]!==n[o])){const o=cS(n);return n.snapshot&&o.loadSnapshot(n.snapshot),t(o),o}return e}function Gwe({persistenceKey:n,sessionId:e,...t}){const[r,o]=ne.useState(null),i=Ywe(t);return ne.useEffect(()=>{const a=ba();if(!n){o({id:a,storeWithStatus:{status:"not-synced",store:i}});return}o({id:a,storeWithStatus:{status:"loading"}});const s=d=>{o(u=>(u==null?void 0:u.id)===a?{id:a,storeWithStatus:d}:u)},l=new Vwe(i,{sessionId:e,persistenceKey:n,onLoad(){s({store:i,status:"synced-local"})},onLoadError(d){s({status:"error",error:d})}});return()=>{o(d=>(d==null?void 0:d.id)===a?null:d),l.close()}},[n,i,e]),(r==null?void 0:r.storeWithStatus)??{status:"loading"}}let MF=!1;if(typeof window<"u"){const n=window.navigator.userAgent,e=!!n.match(/iPad/i)||!!n.match(/iPhone/i),t=!!n.match(/WebKit/i);MF=e&&t&&!n.match(/CriOS/i)}function Xwe(){const n=Dn();ne.useEffect(()=>{if(!MF)return;function e(t){(t.target instanceof HTMLInputElement&&t.target.type==="text"||t.target instanceof HTMLTextAreaElement)&&n.complete()}return document.addEventListener("focusout",e),()=>document.removeEventListener("focusout",e)},[n])}function qwe(){const n=Dn(),e=vl();ne.useEffect(()=>{const t=i=>e.style.setProperty("--tl-zoom",i.toString()),r=S_(t,100),o=new ly("useZoomCss",()=>{n.currentPageShapeIds.size<300?t(n.zoomLevel):r(n.zoomLevel)});return o.attach(),o.execute(),()=>{o.detach()}},[n,e])}const Jwe=[],Qwe=[],e7e=ne.memo(function({store:e,components:t,className:r,user:o,...i}){const[a,s]=je.useState(null),l=ne.useMemo(()=>o??pF(),[o]),d=(t==null?void 0:t.ErrorFallback)===void 0?BH:t==null?void 0:t.ErrorFallback,u={...i,shapeUtils:i.shapeUtils??Jwe,tools:i.tools??Qwe};return K.jsx("div",{ref:s,draggable:!1,className:vo("tl-container tl-theme__light",r),tabIndex:0,children:K.jsx(vb,{fallback:d,onError:p=>k_(p,{tags:{origin:"react.tldraw-before-app"}}),children:a&&K.jsx(v5e,{container:a,children:K.jsx(h3e,{overrides:t,children:e?e instanceof CH?K.jsx(TF,{...u,store:e,user:l}):K.jsx(IF,{...u,store:e,user:l}):K.jsx(t7e,{...u,store:e,user:l})})})})})});function t7e(n){const{defaultName:e,snapshot:t,initialData:r,shapeUtils:o,persistenceKey:i,sessionId:a,user:s}=n,l=Gwe({shapeUtils:o,initialData:r,persistenceKey:i,sessionId:a,defaultName:e,snapshot:t});return K.jsx(IF,{...n,store:l,user:s})}const IF=ne.memo(function({store:e,user:t,...r}){const o=vl();switch(ne.useLayoutEffect(()=>{t.userPreferences.value.isDarkMode&&(o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"))},[o,t.userPreferences.value.isDarkMode]),e.status){case"error":throw e.error;case"loading":return K.jsx(OF,{children:"Connecting..."})}return K.jsx(TF,{...r,store:e.store,user:t})});function TF({onMount:n,children:e,store:t,tools:r,shapeUtils:o,autoFocus:i,user:a,initialState:s}){const{ErrorFallback:l}=bl(),d=vl(),[u,p]=ne.useState(null);ne.useLayoutEffect(()=>{const h=new lo({store:t,shapeUtils:o,tools:r,getContainer:()=>d,user:a,initialState:s});return window.app=h,window.editor=h,p(h),()=>{h.dispose()}},[d,o,r,t,a,s]);const f=ne.useSyncExternalStore(ne.useCallback(h=>u?(u.on("crash",h),()=>u.off("crash",h)):()=>{},[u]),()=>(u==null?void 0:u.crashingError)??null);return u?K.jsx(vb,{fallback:l,onError:h=>u.annotateError(h,{origin:"react.tldraw",willCrashApp:!0}),children:f?K.jsx(r7e,{crashingError:f}):K.jsx(R_.Provider,{value:u,children:K.jsx(n7e,{autoFocus:i,onMount:n,children:e})})}):null}function n7e({children:n,onMount:e,autoFocus:t=!1}){return qwe(),Cwe(),Swe(),Xwe(),Ewe(),_we(t),i7e(e),F4e(),n??K.jsx(Z_,{})}function r7e({crashingError:n}){throw n}function OF({children:n}){const{Spinner:e}=bl();return K.jsxs("div",{className:"tl-loading",children:[e?K.jsx(e,{}):null,n]})}function o7e({children:n}){return K.jsx("div",{className:"tl-loading",children:n})}function i7e(n){const e=Dn(),t=kwe(r=>{const o=n==null?void 0:n(r);return r.emit("mount"),window.tldrawReady=!0,o});je.useLayoutEffect(()=>{if(e)return t==null?void 0:t(e)},[e,t])}function hm({children:n,className:e="",...t}){return K.jsx("div",{...t,className:`tl-html-container ${e}`,children:n})}gi(function({x:e=0,y:t=0,rotation:r=0,...o}){const i=Dn(),a=ne.useRef(null);return ne.useLayoutEffect(()=>{const{x:s,y:l,z:d}=i.camera,u=a.current;u&&s!==void 0&&(u.style.transform=`translate(${s}px, ${l}px) scale(${d}) rotate(${r}rad) translate(${e}px, ${t}px)`)},[i.camera,e,t,r]),K.jsx("div",{ref:a,...o,className:vo("tl-positioned",o.className)})});function a7e(n,e,t={}){const{newPoint:r,handle:o,scaleX:i,scaleY:a}=e,{minWidth:s=1,maxWidth:l=1/0,minHeight:d=1,maxHeight:u=1/0}=t;let p=n.props.w*i,f=n.props.h*a;const h=new Le(0,0);if(p>0){if(p<s){switch(o){case"top_left":case"left":case"bottom_left":{h.x=p-s;break}case"top":case"bottom":{h.x=(p-s)/2;break}default:h.x=0}p=s}}else if(h.x=p,p=-p,p<s){switch(o){case"top_left":case"left":case"bottom_left":{h.x=-p;break}default:h.x=-s}p=s}if(f>0){if(f<d){switch(o){case"top_left":case"top":case"top_right":{h.y=f-d;break}case"right":case"left":{h.y=(f-d)/2;break}default:h.y=0}f=d}}else if(h.y=f,f=-f,f<d){switch(o){case"top_left":case"top":case"top_right":{h.y=-f;break}default:h.y=-d}f=d}const{x:c,y:g}=h.rot(n.rotation).add(r);return{x:c,y:g,props:{w:Math.min(l,p),h:Math.min(u,f)}}}class Wm extends Wd{constructor(){super(...arguments);J(this,"onResize",(t,r)=>a7e(t,r))}getGeometry(t){return new tp({width:t.props.w,height:t.props.h,isFilled:!0})}}function s7e(n,e,t){const r=e==="end"?n.end.point:n.start.point,o=e==="end"?n.start.point:n.end.point,i=n.isStraight?Le.Dist(o,r):Math.abs(n.bodyArc.length),a=Math.max(Math.min(i/5,t*3),t);let s;if(n.isStraight)s=Le.Nudge(r,o,a);else{const l=wxe(r,a,n.handleArc.center,n.handleArc.radius);s=e==="end"?n.handleArc.sweepFlag?l[0]:l[1]:n.handleArc.sweepFlag?l[1]:l[0]}return{point:r,int:s}}function l7e({point:n,int:e}){const t=Le.RotWith(e,n,ji/6),r=Le.RotWith(e,n,-ji/6);return`M ${t.x} ${t.y} L ${n.x} ${n.y} L ${r.x} ${r.y}`}function c7e({point:n,int:e}){const t=Le.RotWith(e,n,ji/6),r=Le.RotWith(e,n,-ji/6);return`M ${t.x} ${t.y} L ${n.x} ${n.y} L ${r.x} ${r.y} Z`}function d7e({point:n,int:e}){const t=Le.Sub(e,n).div(2),r=Le.Add(n,Le.Rot(t,Ri)),o=Le.Sub(n,Le.Rot(t,Ri));return`M ${r.x} ${r.y} L ${e.x} ${e.y} L ${o.x} ${o.y} Z`}function u7e({point:n,int:e}){const t=Le.Lrp(n,e,.45),r=Le.Dist(t,n);return`M ${t.x-r},${t.y}
  a ${r},${r} 0 1,0 ${r*2},0
  a ${r},${r} 0 1,0 -${r*2},0 `}function h7e({point:n,int:e}){const t=Le.Lrp(n,e,.75),r=Le.RotWith(t,n,ji/4),o=Le.RotWith(t,n,-ji/4),i=Le.Lrp(r,o,.5);return i.add(Le.Sub(i,n)),`M ${i.x} ${i.y} L ${r.x} ${r.y} ${n.x} ${n.y} L ${o.x} ${o.y} Z`}function f7e({int:n,point:e}){const t=Le.Lrp(e,n,.85),r=Le.Sub(t,e).div(2),o=Le.Add(e,Le.Rot(r,Ri)),i=Le.Sub(e,Le.Rot(r,Ri)),a=Le.Add(t,Le.Rot(r,Ri)),s=Le.Sub(t,Le.Rot(r,Ri));return`M ${o.x} ${o.y} L ${a.x} ${a.y} L ${s.x} ${s.y} L ${i.x} ${i.y} Z`}function p7e({int:n,point:e}){const t=Le.Sub(n,e).div(2),r=Le.Add(e,Le.Rot(t,Ri)),o=Le.Sub(e,Le.Rot(t,Ri));return`M ${r.x} ${r.y} L ${o.x} ${o.y}`}function og(n,e,t){const r=e==="end"?n.end.arrowhead:n.start.arrowhead;if(r==="none")return;const o=s7e(n,e,t);if(o){switch(r){case"bar":return p7e(o);case"square":return f7e(o);case"diamond":return h7e(o);case"dot":return u7e(o);case"inverted":return d7e(o);case"arrow":return l7e(o);case"triangle":return c7e(o)}return""}}var k9;let g7e=(k9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("pointing",t)});J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(k9,"id","idle"),k9);var _9;let m7e=(_9=class extends no{constructor(){super(...arguments);J(this,"markId","");J(this,"wasFocusedOnEnter",!1);J(this,"onEnter",()=>{const{isMenuOpen:t}=this.editor;this.wasFocusedOnEnter=!t});J(this,"onPointerMove",t=>{if(this.editor.inputs.isDragging){const{originPagePoint:r}=this.editor.inputs,o=this.parent.shapeType,i=da();this.markId=`creating:${i}`,this.editor.mark(this.markId),this.editor.createShapes([{id:i,type:o,x:r.x,y:r.y,props:{w:1,h:1}}]).select(i),this.editor.setCurrentTool("select.resizing",{...t,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id})}});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.cancel()})}complete(){const{originPagePoint:t}=this.editor.inputs;if(!this.wasFocusedOnEnter)return;this.editor.mark(this.markId);const r=this.parent.shapeType,o=da();this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:r,x:t.x,y:t.y}]);const i=this.editor.getShape(o),{w:a,h:s}=this.editor.getShapeUtil(i).getDefaultProps(),l=new Le(a/2,s/2),d=this.editor.getShapeParentTransform(i);d&&l.rot(-d.rotation()),this.editor.updateShapes([{id:o,type:r,x:i.x-l.x,y:i.y-l.y}]),this.editor.setSelectedShapes([o]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle",{})}},J(_9,"id","pointing"),_9);class H3 extends no{}J(H3,"id","box"),J(H3,"initial","idle"),J(H3,"children",()=>[g7e,m7e]);function CL(n){const e=Dn();return sr("isCropping",()=>e.croppingShapeId===n,[e,n])}function lw(n){const e=Dn();return sr("isEditing",()=>e.editingShapeId===n,[e,n])}function vu(n){const e=Dn();return ne.useMemo(function(){const o=d=>{if(d.isKilled||d.button!==0)return;const u=M4(d.currentTarget);function p(){u.removeEventListener("pointerup",p),tw(u,d)}hy(u,d),u.addEventListener("pointerup",p),e.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:n,...Sc(d)}),d.stopPropagation()};let i,a;function s(d){d.isKilled||d.button===0&&(d.clientX===i&&d.clientY===a||(i=d.clientX,a=d.clientY,e.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:n,...Sc(d)})))}return{onPointerDown:o,onPointerMove:s,onPointerUp:d=>{d.isKilled||d.button===0&&e.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:n,...Sc(d)})}}},[e,n])}const v7e=20,b7e=8;function Y_(n,e=v7e){return Math.max(b7e,Math.ceil(n/e))}class y7e extends o0{constructor(t){super({...t,isFilled:!1,isClosed:!1});J(this,"_center");J(this,"radius");J(this,"start");J(this,"end");J(this,"measure");J(this,"length");J(this,"angleStart");J(this,"angleEnd");const{center:r,radius:o,sweepFlag:i,largeArcFlag:a,start:s,end:l}=t;if(s.equals(l))throw Error("Arc must have different start and end points.");this.angleStart=Le.Angle(r,s),this.angleEnd=Le.Angle(r,l),this.measure=x7e(this.angleStart,this.angleEnd,i,a),this.length=this.measure*o,this.start=s,this.end=l,this._center=r,this.radius=o}nearestPoint(t){const{_center:r,measure:o,radius:i,angleEnd:a,angleStart:s,start:l,end:d}=this,u=SL(o,s,a,r.angle(t));if(u<=0)return l;if(u>=1)return d;const p=r.clone().add(t.clone().sub(r).uni().mul(i));let f=1/0,h;for(const c of[l,d,p])t.dist(c)<f&&(h=c,f=t.dist(c));if(!h)throw Error("nearest point not found");return h}hitTestLineSegment(t,r,o){const{_center:i,radius:a,measure:s,angleStart:l,angleEnd:d}=this,u=ow(t,r,i,a);return u===null?!1:u.some(p=>{const f=SL(s,l,d,i.angle(p));return f>=0&&f<=1})}getVertices(){const{_center:t,measure:r,length:o,radius:i,angleStart:a}=this,s=[];for(let l=0,d=Y_(Math.abs(o));l<d+1;l++){const u=l/d*r,p=a+u;s.push(t.clone().add(new Le(Math.cos(p),Math.sin(p)).mul(i)))}return s}}function SL(n,e,t,r){let o;if(Math.abs(n)>ji){o=xh(e,r);const i=xh(r,t);return Math.abs(o)<Math.abs(i)?o/n:(n-i)/n}else return o=xh(e,r),o/n}function x7e(n,e,t,r){const o=2*((e-n)%Ni)%Ni-(e-n)%Ni;return r?(Ni-Math.abs(o))*(t?1:-1):o}class AF extends o0{constructor(t){super({isClosed:!0,...t});J(this,"_center");J(this,"radius");J(this,"x");J(this,"y");this.config=t;const{x:r=0,y:o=0,radius:i}=t;this.x=r,this.y=o,this._center=new Le(i+r,i+o),this.radius=i}getBounds(){return new uo(this.x,this.y,this.radius*2,this.radius*2)}getVertices(){const{_center:t,radius:r}=this,o=Ni*r,i=[];for(let a=0,s=Y_(o);a<s;a++){const l=a/s*Ni;i.push(t.clone().add(Le.FromAngle(l).mul(r)))}return i}nearestPoint(t){const{_center:r,radius:o}=this;return r.clone().add(t.clone().sub(r).uni().mul(o))}hitTestLineSegment(t,r,o){const{_center:i,radius:a}=this;return ow(t,r,i,a)!==null}}class w7e extends i0{constructor(t){const{start:r,cp1:o,cp2:i,end:a}=t;super({...t,points:[r,a]});J(this,"a");J(this,"b");J(this,"c");J(this,"d");this.a=r,this.b=o,this.c=i,this.d=a}getVertices(){const t=[],{a:r,b:o,c:i,d:a}=this;for(let s=0,l=10;s<=l;s++){const d=s/l;t.push(new Le((1-d)*(1-d)*(1-d)*r.x+3*((1-d)*(1-d))*d*o.x+3*(1-d)*(d*d)*i.x+d*d*d*a.x,(1-d)*(1-d)*(1-d)*r.y+3*((1-d)*(1-d))*d*o.y+3*(1-d)*(d*d)*i.y+d*d*d*a.y))}return t}midPoint(){return C7e(this,.5)}nearestPoint(t){let r,o=1/0;for(const i of this.segments){const a=i.nearestPoint(t),s=a.dist(t);s<o&&(r=a,o=s)}if(!r)throw Error("nearest point not found");return r}}function C7e(n,e){const{a:t,b:r,c:o,d:i}=n;return new Le((1-e)*(1-e)*(1-e)*t.x+3*((1-e)*(1-e))*e*r.x+3*(1-e)*(e*e)*o.x+e*e*e*i.x,(1-e)*(1-e)*(1-e)*t.y+3*((1-e)*(1-e))*e*r.y+3*(1-e)*(e*e)*o.y+e*e*e*i.y)}class F3 extends o0{constructor(t){super({...t,isClosed:!1,isFilled:!1});J(this,"points");J(this,"_segments");J(this,"_length");const{points:r}=t;this.points=r}get segments(){if(!this._segments){this._segments=[];const{points:t}=this,r=t.length,o=r-2,i=1.25;for(let a=0;a<r-1;a++){const s=a===0?t[0]:t[a-1],l=t[a],d=t[a+1],u=a===o?d:t[a+2],p=l,f=a===0?s:new Le(l.x+(d.x-s.x)/6*i,l.y+(d.y-s.y)/6*i),h=a===o?d:new Le(d.x-(u.x-l.x)/6*i,d.y-(u.y-l.y)/6*i),c=d;this._segments.push(new w7e({start:p,cp1:f,cp2:h,end:c}))}}return this._segments}get length(){return this._length||(this._length=this.segments.reduce((t,r)=>t+r.length,0)),this._length}getVertices(){const t=this.segments.reduce((r,o)=>r.concat(o.vertices),[]);return t.push(this.points[this.points.length-1]),t}nearestPoint(t){let r,o=1/0;for(const i of this.segments){const a=i.nearestPoint(t),s=a.dist(t);s<o&&(r=a,o=s)}if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(t,r,o){return this.segments.some(i=>i.hitTestLineSegment(t,r,o))}}class LF extends o0{constructor(t){super({...t,isClosed:!0});J(this,"w");J(this,"h");J(this,"_edges");this.config=t;const{width:r,height:o}=t;this.w=r,this.h=o}get edges(){if(!this._edges){const{vertices:t}=this;this._edges=[];for(let r=0,o=t.length;r<o;r++){const i=t[r],a=t[(r+1)%o];this._edges.push(new D4({start:i,end:a}))}}return this._edges}getVertices(){const t=Math.max(1,this.w),r=Math.max(1,this.h),o=t/2,i=r/2,a=Math.pow(o-i,2)/Math.pow(o+i,2),s=ji*(o+i)*(1+3*a/(10+Math.sqrt(4-3*a))),l=Y_(s),d=Ni/l,u=Math.cos(d),p=Math.sin(d);let f=0,h=1,c=0,g=1;const m=Array(l);for(let b=0;b<l;b++)m[b]=new Le(o+o*h,i+i*f),c=p*h+u*f,g=u*h-p*f,f=c,h=g;return m}nearestPoint(t){let r,o=1/0;for(const i of this.edges){const a=i.nearestPoint(t),s=a.dist(t);s<o&&(r=a,o=s)}if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(t,r,o){return this.edges.some(i=>i.hitTestLineSegment(t,r,o))}getBounds(){return new uo(0,0,this.w,this.h)}}class S7e extends LF{constructor(e){super({...e}),this.config=e}getVertices(){const e=Math.max(1,this.w),t=Math.max(1,this.h),r=e/2,o=t/2,i=10,a=Array(i*2-2);if(t>e)for(let s=0;s<i-1;s++){const l=-ji+ji*s/(i-2),d=ji*s/(i-2);a[s]=new Le(r+r*Math.cos(l),r+r*Math.sin(l)),a[s+(i-1)]=new Le(r+r*Math.cos(d),t-r+r*Math.sin(d))}else for(let s=0;s<i-1;s++){const l=-Ri+ji*s/(i-2),d=Ri+ji*-s/(i-2);a[s]=new Le(e-o+o*Math.cos(l),t-o+o*Math.sin(l)),a[s+(i-1)]=new Le(o-o*Math.cos(d),t-o+o*Math.sin(d))}return a}}async function k7e({shouldReload:n=!0}={}){sessionStorage.clear(),await Promise.all(K_().map(e=>kq(e))),localStorage.clear(),n&&window.location.reload()}typeof window<"u"&&(window.__tldraw__hardReset=k7e);function _7e(n,e="_blank"){D_.openWindow(n,e)}var Q2=function(n){return n&&n.Math===Math&&n},nc=Q2(typeof globalThis=="object"&&globalThis)||Q2(typeof window=="object"&&window)||Q2(typeof self=="object"&&self)||Q2(typeof la=="object"&&la)||Q2(typeof la=="object"&&la)||function(){return this}()||Function("return this")(),G_={},El=function(n){try{return!!n()}catch{return!0}},E7e=El,Cp=!E7e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),P7e=El,cw=!P7e(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),M7e=cw,J5=Function.prototype.call,qh=M7e?J5.bind(J5):function(){return J5.apply(J5,arguments)},$F={},jF={}.propertyIsEnumerable,RF=Object.getOwnPropertyDescriptor,I7e=RF&&!jF.call({1:2},1);$F.f=I7e?function(e){var t=RF(this,e);return!!t&&t.enumerable}:jF;var DF=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},NF=cw,zF=Function.prototype,dS=zF.call,T7e=NF&&zF.bind.bind(dS,dS),Es=NF?T7e:function(n){return function(){return dS.apply(n,arguments)}},BF=Es,O7e=BF({}.toString),A7e=BF("".slice),Vm=function(n){return A7e(O7e(n),8,-1)},L7e=Es,$7e=El,j7e=Vm,R8=Object,R7e=L7e("".split),D7e=$7e(function(){return!R8("z").propertyIsEnumerable(0)})?function(n){return j7e(n)==="String"?R7e(n,""):R8(n)}:R8,dw=function(n){return n==null},N7e=dw,z7e=TypeError,Km=function(n){if(N7e(n))throw new z7e("Can't call method on "+n);return n},B7e=D7e,H7e=Km,uw=function(n){return B7e(H7e(n))},D8=typeof document=="object"&&document.all,Pl=typeof D8>"u"&&D8!==void 0?function(n){return typeof n=="function"||n===D8}:function(n){return typeof n=="function"},F7e=Pl,s0=function(n){return typeof n=="object"?n!==null:F7e(n)},N8=nc,Z7e=Pl,U7e=function(n){return Z7e(n)?n:void 0},hw=function(n,e){return arguments.length<2?U7e(N8[n]):N8[n]&&N8[n][e]},W7e=Es,HF=W7e({}.isPrototypeOf),V7e=typeof navigator<"u"&&String(navigator.userAgent)||"",FF=nc,z8=V7e,kL=FF.process,_L=FF.Deno,EL=kL&&kL.versions||_L&&_L.version,PL=EL&&EL.v8,Dd,H4;PL&&(Dd=PL.split("."),H4=Dd[0]>0&&Dd[0]<4?1:+(Dd[0]+Dd[1]));!H4&&z8&&(Dd=z8.match(/Edge\/(\d+)/),(!Dd||Dd[1]>=74)&&(Dd=z8.match(/Chrome\/(\d+)/),Dd&&(H4=+Dd[1])));var K7e=H4,ML=K7e,Y7e=El,G7e=nc,X7e=G7e.String,ZF=!!Object.getOwnPropertySymbols&&!Y7e(function(){var n=Symbol("symbol detection");return!X7e(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&ML&&ML<41}),q7e=ZF,UF=q7e&&!Symbol.sham&&typeof Symbol.iterator=="symbol",J7e=hw,Q7e=Pl,e8e=HF,t8e=UF,n8e=Object,WF=t8e?function(n){return typeof n=="symbol"}:function(n){var e=J7e("Symbol");return Q7e(e)&&e8e(e.prototype,n8e(n))},r8e=String,o8e=function(n){try{return r8e(n)}catch{return"Object"}},i8e=Pl,a8e=o8e,s8e=TypeError,X_=function(n){if(i8e(n))return n;throw new s8e(a8e(n)+" is not a function")},l8e=X_,c8e=dw,q_=function(n,e){var t=n[e];return c8e(t)?void 0:l8e(t)},B8=qh,H8=Pl,F8=s0,d8e=TypeError,u8e=function(n,e){var t,r;if(e==="string"&&H8(t=n.toString)&&!F8(r=B8(t,n))||H8(t=n.valueOf)&&!F8(r=B8(t,n))||e!=="string"&&H8(t=n.toString)&&!F8(r=B8(t,n)))return r;throw new d8e("Can't convert object to primitive value")},VF={exports:{}},IL=nc,h8e=Object.defineProperty,J_=function(n,e){try{h8e(IL,n,{value:e,configurable:!0,writable:!0})}catch{IL[n]=e}return e},f8e=nc,p8e=J_,TL="__core-js_shared__",OL=VF.exports=f8e[TL]||p8e(TL,{});(OL.versions||(OL.versions=[])).push({version:"3.36.0",mode:"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Q_=VF.exports,AL=Q_,eE=function(n,e){return AL[n]||(AL[n]=e||{})},g8e=Km,m8e=Object,vy=function(n){return m8e(g8e(n))},v8e=Es,b8e=vy,y8e=v8e({}.hasOwnProperty),Sp=Object.hasOwn||function(e,t){return y8e(b8e(e),t)},x8e=Es,w8e=0,C8e=Math.random(),S8e=x8e(1 .toString),KF=function(n){return"Symbol("+(n===void 0?"":n)+")_"+S8e(++w8e+C8e,36)},k8e=nc,_8e=eE,LL=Sp,E8e=KF,P8e=ZF,M8e=UF,wg=k8e.Symbol,Z8=_8e("wks"),I8e=M8e?wg.for||wg:wg&&wg.withoutSetter||E8e,Jh=function(n){return LL(Z8,n)||(Z8[n]=P8e&&LL(wg,n)?wg[n]:I8e("Symbol."+n)),Z8[n]},T8e=qh,$L=s0,jL=WF,O8e=q_,A8e=u8e,L8e=Jh,$8e=TypeError,j8e=L8e("toPrimitive"),R8e=function(n,e){if(!$L(n)||jL(n))return n;var t=O8e(n,j8e),r;if(t){if(e===void 0&&(e="default"),r=T8e(t,n,e),!$L(r)||jL(r))return r;throw new $8e("Can't convert object to primitive value")}return e===void 0&&(e="number"),A8e(n,e)},D8e=R8e,N8e=WF,YF=function(n){var e=D8e(n,"string");return N8e(e)?e:e+""},z8e=nc,RL=s0,uS=z8e.document,B8e=RL(uS)&&RL(uS.createElement),GF=function(n){return B8e?uS.createElement(n):{}},H8e=Cp,F8e=El,Z8e=GF,XF=!H8e&&!F8e(function(){return Object.defineProperty(Z8e("div"),"a",{get:function(){return 7}}).a!==7}),U8e=Cp,W8e=qh,V8e=$F,K8e=DF,Y8e=uw,G8e=YF,X8e=Sp,q8e=XF,DL=Object.getOwnPropertyDescriptor;G_.f=U8e?DL:function(e,t){if(e=Y8e(e),t=G8e(t),q8e)try{return DL(e,t)}catch{}if(X8e(e,t))return K8e(!W8e(V8e.f,e,t),e[t])};var Ym={},J8e=Cp,Q8e=El,qF=J8e&&Q8e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),e9e=s0,t9e=String,n9e=TypeError,l0=function(n){if(e9e(n))return n;throw new n9e(t9e(n)+" is not an object")},r9e=Cp,o9e=XF,i9e=qF,Q5=l0,NL=YF,a9e=TypeError,U8=Object.defineProperty,s9e=Object.getOwnPropertyDescriptor,W8="enumerable",V8="configurable",K8="writable";Ym.f=r9e?i9e?function(e,t,r){if(Q5(e),t=NL(t),Q5(r),typeof e=="function"&&t==="prototype"&&"value"in r&&K8 in r&&!r[K8]){var o=s9e(e,t);o&&o[K8]&&(e[t]=r.value,r={configurable:V8 in r?r[V8]:o[V8],enumerable:W8 in r?r[W8]:o[W8],writable:!1})}return U8(e,t,r)}:U8:function(e,t,r){if(Q5(e),t=NL(t),Q5(r),o9e)try{return U8(e,t,r)}catch{}if("get"in r||"set"in r)throw new a9e("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var l9e=Cp,c9e=Ym,d9e=DF,tE=l9e?function(n,e,t){return c9e.f(n,e,d9e(1,t))}:function(n,e,t){return n[e]=t,n},JF={exports:{}},hS=Cp,u9e=Sp,QF=Function.prototype,h9e=hS&&Object.getOwnPropertyDescriptor,nE=u9e(QF,"name"),f9e=nE&&(function(){}).name==="something",p9e=nE&&(!hS||hS&&h9e(QF,"name").configurable),g9e={EXISTS:nE,PROPER:f9e,CONFIGURABLE:p9e},m9e=Es,v9e=Pl,fS=Q_,b9e=m9e(Function.toString);v9e(fS.inspectSource)||(fS.inspectSource=function(n){return b9e(n)});var eZ=fS.inspectSource,y9e=nc,x9e=Pl,zL=y9e.WeakMap,w9e=x9e(zL)&&/native code/.test(String(zL)),C9e=eE,S9e=KF,BL=C9e("keys"),tZ=function(n){return BL[n]||(BL[n]=S9e(n))},rE={},k9e=w9e,nZ=nc,_9e=s0,E9e=tE,Y8=Sp,G8=Q_,P9e=tZ,M9e=rE,HL="Object already initialized",pS=nZ.TypeError,I9e=nZ.WeakMap,F4,Cb,Z4,T9e=function(n){return Z4(n)?Cb(n):F4(n,{})},O9e=function(n){return function(e){var t;if(!_9e(e)||(t=Cb(e)).type!==n)throw new pS("Incompatible receiver, "+n+" required");return t}};if(k9e||G8.state){var mu=G8.state||(G8.state=new I9e);mu.get=mu.get,mu.has=mu.has,mu.set=mu.set,F4=function(n,e){if(mu.has(n))throw new pS(HL);return e.facade=n,mu.set(n,e),e},Cb=function(n){return mu.get(n)||{}},Z4=function(n){return mu.has(n)}}else{var ig=P9e("state");M9e[ig]=!0,F4=function(n,e){if(Y8(n,ig))throw new pS(HL);return e.facade=n,E9e(n,ig,e),e},Cb=function(n){return Y8(n,ig)?n[ig]:{}},Z4=function(n){return Y8(n,ig)}}var rZ={set:F4,get:Cb,has:Z4,enforce:T9e,getterFor:O9e},oE=Es,A9e=El,L9e=Pl,e3=Sp,gS=Cp,$9e=g9e.CONFIGURABLE,j9e=eZ,oZ=rZ,R9e=oZ.enforce,D9e=oZ.get,FL=String,Z3=Object.defineProperty,N9e=oE("".slice),z9e=oE("".replace),B9e=oE([].join),H9e=gS&&!A9e(function(){return Z3(function(){},"length",{value:8}).length!==8}),F9e=String(String).split("String"),Z9e=JF.exports=function(n,e,t){N9e(FL(e),0,7)==="Symbol("&&(e="["+z9e(FL(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!e3(n,"name")||$9e&&n.name!==e)&&(gS?Z3(n,"name",{value:e,configurable:!0}):n.name=e),H9e&&t&&e3(t,"arity")&&n.length!==t.arity&&Z3(n,"length",{value:t.arity});try{t&&e3(t,"constructor")&&t.constructor?gS&&Z3(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var r=R9e(n);return e3(r,"source")||(r.source=B9e(F9e,typeof e=="string"?e:"")),n};Function.prototype.toString=Z9e(function(){return L9e(this)&&D9e(this).source||j9e(this)},"toString");var U9e=JF.exports,W9e=Pl,V9e=Ym,K9e=U9e,Y9e=J_,iZ=function(n,e,t,r){r||(r={});var o=r.enumerable,i=r.name!==void 0?r.name:e;if(W9e(t)&&K9e(t,i,r),r.global)o?n[e]=t:Y9e(e,t);else{try{r.unsafe?n[e]&&(o=!0):delete n[e]}catch{}o?n[e]=t:V9e.f(n,e,{value:t,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return n},aZ={},G9e=Math.ceil,X9e=Math.floor,q9e=Math.trunc||function(e){var t=+e;return(t>0?X9e:G9e)(t)},J9e=q9e,c0=function(n){var e=+n;return e!==e||e===0?0:J9e(e)},Q9e=c0,eCe=Math.max,tCe=Math.min,nCe=function(n,e){var t=Q9e(n);return t<0?eCe(t+e,0):tCe(t,e)},rCe=c0,oCe=Math.min,sZ=function(n){var e=rCe(n);return e>0?oCe(e,9007199254740991):0},iCe=sZ,by=function(n){return iCe(n.length)},aCe=uw,sCe=nCe,lCe=by,ZL=function(n){return function(e,t,r){var o=aCe(e),i=lCe(o);if(i===0)return!n&&-1;var a=sCe(r,i),s;if(n&&t!==t){for(;i>a;)if(s=o[a++],s!==s)return!0}else for(;i>a;a++)if((n||a in o)&&o[a]===t)return n||a||0;return!n&&-1}},cCe={includes:ZL(!0),indexOf:ZL(!1)},dCe=Es,X8=Sp,uCe=uw,hCe=cCe.indexOf,fCe=rE,UL=dCe([].push),lZ=function(n,e){var t=uCe(n),r=0,o=[],i;for(i in t)!X8(fCe,i)&&X8(t,i)&&UL(o,i);for(;e.length>r;)X8(t,i=e[r++])&&(~hCe(o,i)||UL(o,i));return o},iE=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pCe=lZ,gCe=iE,mCe=gCe.concat("length","prototype");aZ.f=Object.getOwnPropertyNames||function(e){return pCe(e,mCe)};var cZ={};cZ.f=Object.getOwnPropertySymbols;var vCe=hw,bCe=Es,yCe=aZ,xCe=cZ,wCe=l0,CCe=bCe([].concat),SCe=vCe("Reflect","ownKeys")||function(e){var t=yCe.f(wCe(e)),r=xCe.f;return r?CCe(t,r(e)):t},WL=Sp,kCe=SCe,_Ce=G_,ECe=Ym,PCe=function(n,e,t){for(var r=kCe(e),o=ECe.f,i=_Ce.f,a=0;a<r.length;a++){var s=r[a];!WL(n,s)&&!(t&&WL(t,s))&&o(n,s,i(e,s))}},MCe=El,ICe=Pl,TCe=/#|\.prototype\./,yy=function(n,e){var t=ACe[OCe(n)];return t===$Ce?!0:t===LCe?!1:ICe(e)?MCe(e):!!e},OCe=yy.normalize=function(n){return String(n).replace(TCe,".").toLowerCase()},ACe=yy.data={},LCe=yy.NATIVE="N",$Ce=yy.POLYFILL="P",jCe=yy,t3=nc,RCe=G_.f,DCe=tE,NCe=iZ,zCe=J_,BCe=PCe,HCe=jCe,Gm=function(n,e){var t=n.target,r=n.global,o=n.stat,i,a,s,l,d,u;if(r?a=t3:o?a=t3[t]||zCe(t,{}):a=t3[t]&&t3[t].prototype,a)for(s in e){if(d=e[s],n.dontCallGetSet?(u=RCe(a,s),l=u&&u.value):l=a[s],i=HCe(r?s:t+(o?".":"#")+s,n.forced),!i&&l!==void 0){if(typeof d==typeof l)continue;BCe(d,l)}(n.sham||l&&l.sham)&&DCe(d,"sham",!0),NCe(a,s,d,n)}},dZ={},FCe=lZ,ZCe=iE,UCe=Object.keys||function(e){return FCe(e,ZCe)},WCe=Cp,VCe=qF,KCe=Ym,YCe=l0,GCe=uw,XCe=UCe;dZ.f=WCe&&!VCe?Object.defineProperties:function(e,t){YCe(e);for(var r=GCe(t),o=XCe(t),i=o.length,a=0,s;i>a;)KCe.f(e,s=o[a++],r[s]);return e};var qCe=hw,JCe=qCe("document","documentElement"),QCe=l0,eSe=dZ,VL=iE,tSe=rE,nSe=JCe,rSe=GF,oSe=tZ,KL=">",YL="<",mS="prototype",vS="script",uZ=oSe("IE_PROTO"),q8=function(){},hZ=function(n){return YL+vS+KL+n+YL+"/"+vS+KL},GL=function(n){n.write(hZ("")),n.close();var e=n.parentWindow.Object;return n=null,e},iSe=function(){var n=rSe("iframe"),e="java"+vS+":",t;return n.style.display="none",nSe.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(hZ("document.F=Object")),t.close(),t.F},n3,U3=function(){try{n3=new ActiveXObject("htmlfile")}catch{}U3=typeof document<"u"?document.domain&&n3?GL(n3):iSe():GL(n3);for(var n=VL.length;n--;)delete U3[mS][VL[n]];return U3()};tSe[uZ]=!0;var fZ=Object.create||function(e,t){var r;return e!==null?(q8[mS]=QCe(e),r=new q8,q8[mS]=null,r[uZ]=e):r=U3(),t===void 0?r:eSe.f(r,t)},aSe=Jh,sSe=fZ,lSe=Ym.f,bS=aSe("unscopables"),yS=Array.prototype;yS[bS]===void 0&&lSe(yS,bS,{configurable:!0,value:sSe(null)});var aE=function(n){yS[bS][n]=!0},cSe=Gm,dSe=vy,uSe=by,hSe=c0,fSe=aE;cSe({target:"Array",proto:!0},{at:function(e){var t=dSe(this),r=uSe(t),o=hSe(e),i=o>=0?o:r+o;return i<0||i>=r?void 0:t[i]}});fSe("at");var pSe=nc,gSe=Es,xy=function(n,e){return gSe(pSe[n].prototype[e])},mSe=xy;mSe("Array","at");var vSe=Vm,pZ=Array.isArray||function(e){return vSe(e)==="Array"},bSe=TypeError,ySe=9007199254740991,xSe=function(n){if(n>ySe)throw bSe("Maximum allowed index exceeded");return n},wSe=Vm,CSe=Es,SSe=function(n){if(wSe(n)==="Function")return CSe(n)},XL=SSe,kSe=X_,_Se=cw,ESe=XL(XL.bind),PSe=function(n,e){return kSe(n),e===void 0?n:_Se?ESe(n,e):function(){return n.apply(e,arguments)}},MSe=pZ,ISe=by,TSe=xSe,OSe=PSe,gZ=function(n,e,t,r,o,i,a,s){for(var l=o,d=0,u=a?OSe(a,s):!1,p,f;d<r;)d in t&&(p=u?u(t[d],d,e):t[d],i>0&&MSe(p)?(f=ISe(p),l=gZ(n,e,p,f,l,i-1)-1):(TSe(l+1),n[l]=p),l++),d++;return l},mZ=gZ,ASe=Jh,LSe=ASe("toStringTag"),vZ={};vZ[LSe]="z";var $Se=String(vZ)==="[object z]",jSe=$Se,RSe=Pl,W3=Vm,DSe=Jh,NSe=DSe("toStringTag"),zSe=Object,BSe=W3(function(){return arguments}())==="Arguments",HSe=function(n,e){try{return n[e]}catch{}},bZ=jSe?W3:function(n){var e,t,r;return n===void 0?"Undefined":n===null?"Null":typeof(t=HSe(e=zSe(n),NSe))=="string"?t:BSe?W3(e):(r=W3(e))==="Object"&&RSe(e.callee)?"Arguments":r},FSe=Es,ZSe=El,yZ=Pl,USe=bZ,WSe=hw,VSe=eZ,xZ=function(){},wZ=WSe("Reflect","construct"),sE=/^\s*(?:class|function)\b/,KSe=FSe(sE.exec),YSe=!sE.test(xZ),ev=function(e){if(!yZ(e))return!1;try{return wZ(xZ,[],e),!0}catch{return!1}},CZ=function(e){if(!yZ(e))return!1;switch(USe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return YSe||!!KSe(sE,VSe(e))}catch{return!0}};CZ.sham=!0;var GSe=!wZ||ZSe(function(){var n;return ev(ev.call)||!ev(Object)||!ev(function(){n=!0})||n})?CZ:ev,qL=pZ,XSe=GSe,qSe=s0,JSe=Jh,QSe=JSe("species"),JL=Array,eke=function(n){var e;return qL(n)&&(e=n.constructor,XSe(e)&&(e===JL||qL(e.prototype))?e=void 0:qSe(e)&&(e=e[QSe],e===null&&(e=void 0))),e===void 0?JL:e},tke=eke,SZ=function(n,e){return new(tke(n))(e===0?0:e)},nke=Gm,rke=mZ,oke=vy,ike=by,ake=c0,ske=SZ;nke({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=oke(this),r=ike(t),o=ske(t,0);return o.length=rke(o,t,t,r,0,e===void 0?1:ake(e)),o}});var lke=aE;lke("flat");var cke=xy;cke("Array","flat");var dke=Gm,uke=mZ,hke=X_,fke=vy,pke=by,gke=SZ;dke({target:"Array",proto:!0},{flatMap:function(e){var t=fke(this),r=pke(t),o;return hke(e),o=gke(t,0),o.length=uke(o,t,t,r,0,1,e,arguments.length>1?arguments[1]:void 0),o}});var mke=aE;mke("flatMap");var vke=xy;vke("Array","flatMap");var bke=bZ,yke=String,wy=function(n){if(bke(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return yke(n)},xke=Gm,wke=Es,Cke=Km,Ske=c0,kke=wy,_ke=El,Eke=wke("".charAt),Pke=_ke(function(){return"".at(-2)!=="\uD842"});xke({target:"String",proto:!0,forced:Pke},{at:function(e){var t=kke(Cke(this)),r=t.length,o=Ske(e),i=o>=0?o:r+o;return i<0||i>=r?void 0:Eke(t,i)}});var Mke=xy;Mke("String","at");var Ike=l0,kZ=function(){var n=Ike(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},lE=El,Tke=nc,cE=Tke.RegExp,dE=lE(function(){var n=cE("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),Oke=dE||lE(function(){return!cE("a","y").sticky}),Ake=dE||lE(function(){var n=cE("^r","gy");return n.lastIndex=2,n.exec("str")!==null}),Lke={BROKEN_CARET:Ake,MISSED_STICKY:Oke,UNSUPPORTED_Y:dE},$ke=El,jke=nc,Rke=jke.RegExp,Dke=$ke(function(){var n=Rke(".","s");return!(n.dotAll&&n.test(`
`)&&n.flags==="s")}),Nke=El,zke=nc,Bke=zke.RegExp,Hke=Nke(function(){var n=Bke("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),Cg=qh,fw=Es,Fke=wy,Zke=kZ,Uke=Lke,Wke=eE,Vke=fZ,Kke=rZ.get,Yke=Dke,Gke=Hke,Xke=Wke("native-string-replace",String.prototype.replace),U4=RegExp.prototype.exec,xS=U4,qke=fw("".charAt),Jke=fw("".indexOf),Qke=fw("".replace),J8=fw("".slice),wS=function(){var n=/a/,e=/b*/g;return Cg(U4,n,"a"),Cg(U4,e,"a"),n.lastIndex!==0||e.lastIndex!==0}(),_Z=Uke.BROKEN_CARET,CS=/()??/.exec("")[1]!==void 0,e_e=wS||CS||_Z||Yke||Gke;e_e&&(xS=function(e){var t=this,r=Kke(t),o=Fke(e),i=r.raw,a,s,l,d,u,p,f;if(i)return i.lastIndex=t.lastIndex,a=Cg(xS,i,o),t.lastIndex=i.lastIndex,a;var h=r.groups,c=_Z&&t.sticky,g=Cg(Zke,t),m=t.source,b=0,v=o;if(c&&(g=Qke(g,"y",""),Jke(g,"g")===-1&&(g+="g"),v=J8(o,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&qke(o,t.lastIndex-1)!==`
`)&&(m="(?: "+m+")",v=" "+v,b++),s=new RegExp("^(?:"+m+")",g)),CS&&(s=new RegExp("^"+m+"$(?!\\s)",g)),wS&&(l=t.lastIndex),d=Cg(U4,c?s:t,v),c?d?(d.input=J8(d.input,b),d[0]=J8(d[0],b),d.index=t.lastIndex,t.lastIndex+=d[0].length):t.lastIndex=0:wS&&d&&(t.lastIndex=t.global?d.index+d[0].length:l),CS&&d&&d.length>1&&Cg(Xke,d[0],s,function(){for(u=1;u<arguments.length-2;u++)arguments[u]===void 0&&(d[u]=void 0)}),d&&h)for(d.groups=p=Vke(null),u=0;u<h.length;u++)f=h[u],p[f[0]]=d[f[1]];return d});var uE=xS,t_e=Gm,QL=uE;t_e({target:"RegExp",proto:!0,forced:/./.exec!==QL},{exec:QL});var n_e=cw,EZ=Function.prototype,e$=EZ.apply,t$=EZ.call,r_e=typeof Reflect=="object"&&Reflect.apply||(n_e?t$.bind(e$):function(){return t$.apply(e$,arguments)}),n$=qh,r$=iZ,o_e=uE,o$=El,PZ=Jh,i_e=tE,a_e=PZ("species"),Q8=RegExp.prototype,s_e=function(n,e,t,r){var o=PZ(n),i=!o$(function(){var d={};return d[o]=function(){return 7},""[n](d)!==7}),a=i&&!o$(function(){var d=!1,u=/a/;return n==="split"&&(u={},u.constructor={},u.constructor[a_e]=function(){return u},u.flags="",u[o]=/./[o]),u.exec=function(){return d=!0,null},u[o](""),!d});if(!i||!a||t){var s=/./[o],l=e(o,""[n],function(d,u,p,f,h){var c=u.exec;return c===o_e||c===Q8.exec?i&&!h?{done:!0,value:n$(s,u,p,f)}:{done:!0,value:n$(d,p,u,f)}:{done:!1}});r$(String.prototype,n,l[0]),r$(Q8,o,l[1])}r&&i_e(Q8[o],"sham",!0)},hE=Es,l_e=c0,c_e=wy,d_e=Km,u_e=hE("".charAt),i$=hE("".charCodeAt),h_e=hE("".slice),a$=function(n){return function(e,t){var r=c_e(d_e(e)),o=l_e(t),i=r.length,a,s;return o<0||o>=i?n?"":void 0:(a=i$(r,o),a<55296||a>56319||o+1===i||(s=i$(r,o+1))<56320||s>57343?n?u_e(r,o):a:n?h_e(r,o,o+2):(a-55296<<10)+(s-56320)+65536)}},f_e={codeAt:a$(!1),charAt:a$(!0)},p_e=f_e.charAt,g_e=function(n,e,t){return e+(t?p_e(n,e).length:1)},fE=Es,m_e=vy,v_e=Math.floor,e9=fE("".charAt),b_e=fE("".replace),t9=fE("".slice),y_e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x_e=/\$([$&'`]|\d{1,2})/g,MZ=function(n,e,t,r,o,i){var a=t+n.length,s=r.length,l=x_e;return o!==void 0&&(o=m_e(o),l=y_e),b_e(i,l,function(d,u){var p;switch(e9(u,0)){case"$":return"$";case"&":return n;case"`":return t9(e,0,t);case"'":return t9(e,a);case"<":p=o[t9(u,1,-1)];break;default:var f=+u;if(f===0)return d;if(f>s){var h=v_e(f/10);return h===0?d:h<=s?r[h-1]===void 0?e9(u,1):r[h-1]+e9(u,1):d}p=r[f-1]}return p===void 0?"":p})},s$=qh,w_e=l0,C_e=Pl,S_e=Vm,k_e=uE,__e=TypeError,E_e=function(n,e){var t=n.exec;if(C_e(t)){var r=s$(t,n,e);return r!==null&&w_e(r),r}if(S_e(n)==="RegExp")return s$(k_e,n,e);throw new __e("RegExp#exec called on incompatible receiver")},P_e=r_e,l$=qh,pw=Es,M_e=s_e,I_e=El,T_e=l0,O_e=Pl,A_e=dw,L_e=c0,$_e=sZ,ag=wy,j_e=Km,R_e=g_e,D_e=q_,N_e=MZ,z_e=E_e,B_e=Jh,SS=B_e("replace"),H_e=Math.max,F_e=Math.min,Z_e=pw([].concat),n9=pw([].push),c$=pw("".indexOf),d$=pw("".slice),U_e=function(n){return n===void 0?n:String(n)},W_e=function(){return"a".replace(/./,"$0")==="$0"}(),u$=function(){return/./[SS]?/./[SS]("a","$0")==="":!1}(),V_e=!I_e(function(){var n=/./;return n.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(n,"$<a>")!=="7"});M_e("replace",function(n,e,t){var r=u$?"$":"$0";return[function(i,a){var s=j_e(this),l=A_e(i)?void 0:D_e(i,SS);return l?l$(l,i,s,a):l$(e,ag(s),i,a)},function(o,i){var a=T_e(this),s=ag(o);if(typeof i=="string"&&c$(i,r)===-1&&c$(i,"$<")===-1){var l=t(e,a,s,i);if(l.done)return l.value}var d=O_e(i);d||(i=ag(i));var u=a.global,p;u&&(p=a.unicode,a.lastIndex=0);for(var f=[],h;h=z_e(a,s),!(h===null||(n9(f,h),!u));){var c=ag(h[0]);c===""&&(a.lastIndex=R_e(s,$_e(a.lastIndex),p))}for(var g="",m=0,b=0;b<f.length;b++){h=f[b];for(var v=ag(h[0]),w=H_e(F_e(L_e(h.index),s.length),0),_=[],k,y=1;y<h.length;y++)n9(_,U_e(h[y]));var S=h.groups;if(d){var C=Z_e([v],_,w,s);S!==void 0&&n9(C,S),k=ag(P_e(i,void 0,C))}else k=N_e(v,s,w,_,S,i);w>=m&&(g+=d$(s,m,w)+k,m=w+v.length)}return g+d$(s,m)}]},!V_e||!W_e||u$);var K_e=s0,Y_e=Vm,G_e=Jh,X_e=G_e("match"),q_e=function(n){var e;return K_e(n)&&((e=n[X_e])!==void 0?!!e:Y_e(n)==="RegExp")},J_e=qh,Q_e=Sp,eEe=HF,tEe=kZ,h$=RegExp.prototype,nEe=function(n){var e=n.flags;return e===void 0&&!("flags"in h$)&&!Q_e(n,"flags")&&eEe(h$,n)?J_e(tEe,n):e},rEe=Gm,oEe=qh,pE=Es,f$=Km,iEe=Pl,aEe=dw,sEe=q_e,tv=wy,lEe=q_,cEe=nEe,dEe=MZ,uEe=Jh,hEe=uEe("replace"),fEe=TypeError,r9=pE("".indexOf);pE("".replace);var p$=pE("".slice),pEe=Math.max;rEe({target:"String",proto:!0},{replaceAll:function(e,t){var r=f$(this),o,i,a,s,l,d,u,p,f,h=0,c=0,g="";if(!aEe(e)){if(o=sEe(e),o&&(i=tv(f$(cEe(e))),!~r9(i,"g")))throw new fEe("`.replaceAll` does not allow non-global regexes");if(a=lEe(e,hEe),a)return oEe(a,e,r,t)}for(s=tv(r),l=tv(e),d=iEe(t),d||(t=tv(t)),u=l.length,p=pEe(1,u),h=r9(s,l);h!==-1;)f=d?tv(t(l,h,s)):dEe(l,s,h,[],void 0,t),g+=p$(s,c,h)+f,c=h+u,h=h+p>s.length?-1:r9(s,l,h+p);return c<s.length&&(g+=p$(s,c)),g}});var gEe=xy;gEe("String","replaceAll");const IZ=ne.createContext(null);function mEe({assetUrls:n,children:e}){return K.jsx(IZ.Provider,{value:n,children:e})}function gE(){const n=ne.useContext(IZ);if(!n)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return n}const kS={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.cloud":"Cloud","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},sg={locale:"en",label:"English",messages:kS};async function vEe(n,e){if(!(await fetch(e.translations.en)).ok)return console.warn("No main translations found."),sg;if(n==="en")return sg;const r=mb.find(s=>s.locale===n);if(!r)return console.warn(`No translation found for locale ${n}`),sg;const i=await(await fetch(e.translations[r.locale])).json();if(!i)return console.warn(`No messages found for locale ${n}`),sg;const a=[];for(const s in sg)i[s]||a.push(s);return a.length>0,{locale:n,label:r.label,messages:{...sg.messages,...i}}}const TZ=ne.createContext({}),bEe=()=>ne.useContext(TZ),yEe=gi(function({overrides:e,children:t}){const o=Dn().user.locale,i=gE(),[a,s]=ne.useState(()=>e&&e.en?{locale:"en",label:"English",messages:{...kS,...e.en}}:{locale:"en",label:"English",messages:kS});return ne.useEffect(()=>{let l=!1;async function d(){const u=await vEe(o,i);u&&!l&&(e&&e[o]?s({...u,messages:{...u.messages,...e[o]}}):s(u))}return d(),()=>{l=!0}},[i,o,e]),K.jsx(TZ.Provider,{value:a,children:t})});function ai(){const n=bEe();return ne.useCallback(function(t){return n.messages[t]??t},[n])}function xEe(n){return K.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",...n,children:K.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[K.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),K.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:K.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const Vl=ne.memo(function({small:e,invertIcon:t,icon:r,color:o,className:i,...a}){const l=gE().icons[r],d=ne.useRef(null);return ne.useLayoutEffect(()=>{d!=null&&d.current&&(d.current.style.webkitMask=`url(${l}) center 100% / 100% no-repeat`)},[d,l]),K.jsx("div",{...a,ref:d,className:vo("tlui-icon",{"tlui-icon__small":e},i),style:{color:o,mask:`url(${l}) center 100% / 100% no-repeat`,transform:t?"scale(-1, 1)":void 0}})}),OZ=typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,AZ=OZ?"":"Ctrl",LZ=OZ?"":"Alt";function wEe(n){return n.split(",")[0].split("").map(e=>{const t=e.replace(/\$/g,AZ).replace(/\?/g,LZ).replace(/!/g,"");return t[0].toUpperCase()+t.slice(1)})}function Nu(n){return" "+n.split(",")[0].split("").map(e=>{const t=e.replace(/\$/g,AZ).replace(/\?/g,LZ).replace(/!/g,"");return t[0].toUpperCase()+t.slice(1)}).join("")}function gw({children:n}){return K.jsx("kbd",{className:"tlui-kbd",children:wEe(n).map((e,t)=>K.jsx("span",{children:e},t))})}const io=ne.forwardRef(function({label:e,icon:t,invertIcon:r,iconLeft:o,smallIcon:i,kbd:a,isChecked:s=!1,type:l="normal",children:d,spinner:u,...p},f){const h=ai(),c=e?h(e):"";return K.jsxs("button",{ref:f,draggable:!1,type:"button",...p,title:p.title??c,className:vo("tlui-button",`tlui-button__${l}`,p.className),children:[o&&K.jsx(Vl,{icon:o,className:"tlui-icon-left",small:!0}),d,e&&K.jsxs("span",{draggable:!1,children:[c,s&&K.jsx(Vl,{icon:"check"})]}),a&&K.jsx(gw,{children:a}),t&&!u&&K.jsx(Vl,{icon:t,small:!!e||i,invertIcon:r}),u&&K.jsx(xEe,{})]})});function mw({className:n,children:e}){return K.jsx("div",{className:vo("tlui-dialog__header",n),children:e})}function vw({className:n,children:e}){return K.jsx(ibe,{dir:"ltr",className:vo("tlui-dialog__header__title",n),children:e})}function bw(){return K.jsx("div",{className:"tlui-dialog__header__close",children:K.jsx(sbe,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:K.jsx(io,{"aria-label":"Close",onTouchEnd:n=>n.target.click(),children:K.jsx(Vl,{small:!0,icon:"cross-2"})})})})}function Sb({className:n,children:e,style:t}){return K.jsx("div",{className:vo("tlui-dialog__body",n),style:t,children:e})}function mE({className:n,children:e}){return K.jsx("div",{className:vo("tlui-dialog__footer",n),children:e})}function yw(n){const e=n+"CollectionProvider",[t,r]=Wh(e),[o,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=h=>{const{scope:c,children:g}=h,m=je.useRef(null),b=je.useRef(new Map).current;return je.createElement(o,{scope:c,itemMap:b,collectionRef:m},g)},s=n+"CollectionSlot",l=je.forwardRef((h,c)=>{const{scope:g,children:m}=h,b=i(s,g),v=Ma(c,b.collectionRef);return je.createElement(am,{ref:v},m)}),d=n+"CollectionItemSlot",u="data-radix-collection-item",p=je.forwardRef((h,c)=>{const{scope:g,children:m,...b}=h,v=je.useRef(null),w=Ma(c,v),_=i(d,g);return je.useEffect(()=>(_.itemMap.set(v,{ref:v,...b}),()=>void _.itemMap.delete(v))),je.createElement(am,{[u]:"",ref:w},m)});function f(h){const c=i(n+"CollectionConsumer",h);return je.useCallback(()=>{const m=c.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(c.itemMap.values()).sort((_,k)=>b.indexOf(_.ref.current)-b.indexOf(k.ref.current))},[c.collectionRef,c.itemMap])}return[{Provider:a,Slot:l,ItemSlot:p},f,r]}const CEe=ne.createContext(void 0);function vE(n){const e=ne.useContext(CEe);return n||e||"ltr"}const SEe=["top","right","bottom","left"],rp=Math.min,bc=Math.max,W4=Math.round,r3=Math.floor,op=n=>({x:n,y:n}),kEe={left:"right",right:"left",bottom:"top",top:"bottom"},_Ee={start:"end",end:"start"};function _S(n,e,t){return bc(n,rp(e,t))}function Bh(n,e){return typeof n=="function"?n(e):n}function Hh(n){return n.split("-")[0]}function Xm(n){return n.split("-")[1]}function bE(n){return n==="x"?"y":"x"}function yE(n){return n==="y"?"height":"width"}function qm(n){return["top","bottom"].includes(Hh(n))?"y":"x"}function xE(n){return bE(qm(n))}function EEe(n,e,t){t===void 0&&(t=!1);const r=Xm(n),o=xE(n),i=yE(o);let a=o==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=V4(a)),[a,V4(a)]}function PEe(n){const e=V4(n);return[ES(n),e,ES(e)]}function ES(n){return n.replace(/start|end/g,e=>_Ee[e])}function MEe(n,e,t){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?o:r:e?r:o;case"left":case"right":return e?i:a;default:return[]}}function IEe(n,e,t,r){const o=Xm(n);let i=MEe(Hh(n),t==="start",r);return o&&(i=i.map(a=>a+"-"+o),e&&(i=i.concat(i.map(ES)))),i}function V4(n){return n.replace(/left|right|bottom|top/g,e=>kEe[e])}function TEe(n){return{top:0,right:0,bottom:0,left:0,...n}}function $Z(n){return typeof n!="number"?TEe(n):{top:n,right:n,bottom:n,left:n}}function K4(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function g$(n,e,t){let{reference:r,floating:o}=n;const i=qm(e),a=xE(e),s=yE(a),l=Hh(e),d=i==="y",u=r.x+r.width/2-o.width/2,p=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let h;switch(l){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:p};break;case"left":h={x:r.x-o.width,y:p};break;default:h={x:r.x,y:r.y}}switch(Xm(e)){case"start":h[a]-=f*(t&&d?-1:1);break;case"end":h[a]+=f*(t&&d?-1:1);break}return h}const OEe=async(n,e,t)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=t,s=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:n,floating:e,strategy:o}),{x:u,y:p}=g$(d,r,l),f=r,h={},c=0;for(let g=0;g<s.length;g++){const{name:m,fn:b}=s[g],{x:v,y:w,data:_,reset:k}=await b({x:u,y:p,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:d,platform:a,elements:{reference:n,floating:e}});u=v??u,p=w??p,h={...h,[m]:{...h[m],..._}},k&&c<=50&&(c++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(d=k.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:o}):k.rects),{x:u,y:p}=g$(d,f,l)),g=-1)}return{x:u,y:p,placement:f,strategy:o,middlewareData:h}};async function kb(n,e){var t;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=n,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:f=!1,padding:h=0}=Bh(e,n),c=$Z(h),m=s[f?p==="floating"?"reference":"floating":p],b=K4(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(m)))==null||t?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:d,rootBoundary:u,strategy:l})),v=p==="floating"?{...a.floating,x:r,y:o}:a.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=K4(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:w,strategy:l}):v);return{top:(b.top-k.top+c.top)/_.y,bottom:(k.bottom-b.bottom+c.bottom)/_.y,left:(b.left-k.left+c.left)/_.x,right:(k.right-b.right+c.right)/_.x}}const AEe=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:l}=e,{element:d,padding:u=0}=Bh(n,e)||{};if(d==null)return{};const p=$Z(u),f={x:t,y:r},h=xE(o),c=yE(h),g=await a.getDimensions(d),m=h==="y",b=m?"top":"left",v=m?"bottom":"right",w=m?"clientHeight":"clientWidth",_=i.reference[c]+i.reference[h]-f[h]-i.floating[c],k=f[h]-i.reference[h],y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let S=y?y[w]:0;(!S||!await(a.isElement==null?void 0:a.isElement(y)))&&(S=s.floating[w]||i.floating[c]);const C=_/2-k/2,I=S/2-g[c]/2-1,A=rp(p[b],I),T=rp(p[v],I),L=A,j=S-g[c]-T,$=S/2-g[c]/2+C,ee=_S(L,$,j),Q=!l.arrow&&Xm(o)!=null&&$!==ee&&i.reference[c]/2-($<L?A:T)-g[c]/2<0,pe=Q?$<L?$-L:$-j:0;return{[h]:f[h]+pe,data:{[h]:ee,centerOffset:$-ee-pe,...Q&&{alignmentOffset:pe}},reset:Q}}}),LEe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:d}=e,{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:c="none",flipAlignment:g=!0,...m}=Bh(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const b=Hh(o),v=Hh(s)===s,w=await(l.isRTL==null?void 0:l.isRTL(d.floating)),_=f||(v||!g?[V4(s)]:PEe(s));!f&&c!=="none"&&_.push(...IEe(s,g,c,w));const k=[s,..._],y=await kb(e,m),S=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&S.push(y[b]),p){const L=EEe(o,a,w);S.push(y[L[0]],y[L[1]])}if(C=[...C,{placement:o,overflows:S}],!S.every(L=>L<=0)){var I,A;const L=(((I=i.flip)==null?void 0:I.index)||0)+1,j=k[L];if(j)return{data:{index:L,overflows:C},reset:{placement:j}};let $=(A=C.filter(ee=>ee.overflows[0]<=0).sort((ee,Q)=>ee.overflows[1]-Q.overflows[1])[0])==null?void 0:A.placement;if(!$)switch(h){case"bestFit":{var T;const ee=(T=C.map(Q=>[Q.placement,Q.overflows.filter(pe=>pe>0).reduce((pe,ie)=>pe+ie,0)]).sort((Q,pe)=>Q[1]-pe[1])[0])==null?void 0:T[0];ee&&($=ee);break}case"initialPlacement":$=s;break}if(o!==$)return{reset:{placement:$}}}return{}}}};function m$(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function v$(n){return SEe.some(e=>n[e]>=0)}const $Ee=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...o}=Bh(n,e);switch(r){case"referenceHidden":{const i=await kb(e,{...o,elementContext:"reference"}),a=m$(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:v$(a)}}}case"escaped":{const i=await kb(e,{...o,altBoundary:!0}),a=m$(i,t.floating);return{data:{escapedOffsets:a,escaped:v$(a)}}}default:return{}}}}};async function jEe(n,e){const{placement:t,platform:r,elements:o}=n,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=Hh(t),s=Xm(t),l=qm(t)==="y",d=["left","top"].includes(a)?-1:1,u=i&&l?-1:1,p=Bh(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:c}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return s&&typeof c=="number"&&(h=s==="end"?c*-1:c),l?{x:h*u,y:f*d}:{x:f*d,y:h*u}}const REe=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:o,y:i,placement:a,middlewareData:s}=e,l=await jEe(e,n);return a===((t=s.offset)==null?void 0:t.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},DEe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x:b,y:v}=m;return{x:b,y:v}}},...l}=Bh(n,e),d={x:t,y:r},u=await kb(e,l),p=qm(Hh(o)),f=bE(p);let h=d[f],c=d[p];if(i){const m=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=h+u[m],w=h-u[b];h=_S(v,h,w)}if(a){const m=p==="y"?"top":"left",b=p==="y"?"bottom":"right",v=c+u[m],w=c-u[b];c=_S(v,c,w)}const g=s.fn({...e,[f]:h,[p]:c});return{...g,data:{x:g.x-t,y:g.y-r}}}}},NEe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:o,rects:i,middlewareData:a}=e,{offset:s=0,mainAxis:l=!0,crossAxis:d=!0}=Bh(n,e),u={x:t,y:r},p=qm(o),f=bE(p);let h=u[f],c=u[p];const g=Bh(s,e),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",_=i.reference[f]-i.floating[w]+m.mainAxis,k=i.reference[f]+i.reference[w]-m.mainAxis;h<_?h=_:h>k&&(h=k)}if(d){var b,v;const w=f==="y"?"width":"height",_=["top","left"].includes(Hh(o)),k=i.reference[p]-i.floating[w]+(_&&((b=a.offset)==null?void 0:b[p])||0)+(_?0:m.crossAxis),y=i.reference[p]+i.reference[w]+(_?0:((v=a.offset)==null?void 0:v[p])||0)-(_?m.crossAxis:0);c<k?c=k:c>y&&(c=y)}return{[f]:h,[p]:c}}}},zEe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:o,elements:i}=e,{apply:a=()=>{},...s}=Bh(n,e),l=await kb(e,s),d=Hh(t),u=Xm(t),p=qm(t)==="y",{width:f,height:h}=r.floating;let c,g;d==="top"||d==="bottom"?(c=d,g=u===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(g=d,c=u==="end"?"top":"bottom");const m=h-l[c],b=f-l[g],v=!e.middlewareData.shift;let w=m,_=b;if(p){const y=f-l.left-l.right;_=u||v?rp(b,y):y}else{const y=h-l.top-l.bottom;w=u||v?rp(m,y):y}if(v&&!u){const y=bc(l.left,0),S=bc(l.right,0),C=bc(l.top,0),I=bc(l.bottom,0);p?_=f-2*(y!==0||S!==0?y+S:bc(l.left,l.right)):w=h-2*(C!==0||I!==0?C+I:bc(l.top,l.bottom))}await a({...e,availableWidth:_,availableHeight:w});const k=await o.getDimensions(i.floating);return f!==k.width||h!==k.height?{reset:{rects:!0}}:{}}}};function ip(n){return jZ(n)?(n.nodeName||"").toLowerCase():"#document"}function Pc(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Qh(n){var e;return(e=(jZ(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function jZ(n){return n instanceof Node||n instanceof Pc(n).Node}function Fh(n){return n instanceof Element||n instanceof Pc(n).Element}function zu(n){return n instanceof HTMLElement||n instanceof Pc(n).HTMLElement}function b$(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Pc(n).ShadowRoot}function Cy(n){const{overflow:e,overflowX:t,overflowY:r,display:o}=ud(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(o)}function BEe(n){return["table","td","th"].includes(ip(n))}function wE(n){const e=CE(),t=ud(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function HEe(n){let e=fm(n);for(;zu(e)&&!xw(e);){if(wE(e))return e;e=fm(e)}return null}function CE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xw(n){return["html","body","#document"].includes(ip(n))}function ud(n){return Pc(n).getComputedStyle(n)}function ww(n){return Fh(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function fm(n){if(ip(n)==="html")return n;const e=n.assignedSlot||n.parentNode||b$(n)&&n.host||Qh(n);return b$(e)?e.host:e}function RZ(n){const e=fm(n);return xw(e)?n.ownerDocument?n.ownerDocument.body:n.body:zu(e)&&Cy(e)?e:RZ(e)}function _b(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const o=RZ(n),i=o===((r=n.ownerDocument)==null?void 0:r.body),a=Pc(o);return i?e.concat(a,a.visualViewport||[],Cy(o)?o:[],a.frameElement&&t?_b(a.frameElement):[]):e.concat(o,_b(o,[],t))}function DZ(n){const e=ud(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=zu(n),i=o?n.offsetWidth:t,a=o?n.offsetHeight:r,s=W4(t)!==i||W4(r)!==a;return s&&(t=i,r=a),{width:t,height:r,$:s}}function SE(n){return Fh(n)?n:n.contextElement}function Lg(n){const e=SE(n);if(!zu(e))return op(1);const t=e.getBoundingClientRect(),{width:r,height:o,$:i}=DZ(e);let a=(i?W4(t.width):t.width)/r,s=(i?W4(t.height):t.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const FEe=op(0);function NZ(n){const e=Pc(n);return!CE()||!e.visualViewport?FEe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ZEe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Pc(n)?!1:e}function W1(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect(),i=SE(n);let a=op(1);e&&(r?Fh(r)&&(a=Lg(r)):a=Lg(n));const s=ZEe(i,t,r)?NZ(i):op(0);let l=(o.left+s.x)/a.x,d=(o.top+s.y)/a.y,u=o.width/a.x,p=o.height/a.y;if(i){const f=Pc(i),h=r&&Fh(r)?Pc(r):r;let c=f,g=c.frameElement;for(;g&&r&&h!==c;){const m=Lg(g),b=g.getBoundingClientRect(),v=ud(g),w=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*m.x,_=b.top+(g.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,d*=m.y,u*=m.x,p*=m.y,l+=w,d+=_,c=Pc(g),g=c.frameElement}}return K4({width:u,height:p,x:l,y:d})}const UEe=[":popover-open",":modal"];function zZ(n){return UEe.some(e=>{try{return n.matches(e)}catch{return!1}})}function WEe(n){let{elements:e,rect:t,offsetParent:r,strategy:o}=n;const i=o==="fixed",a=Qh(r),s=e?zZ(e.floating):!1;if(r===a||s&&i)return t;let l={scrollLeft:0,scrollTop:0},d=op(1);const u=op(0),p=zu(r);if((p||!p&&!i)&&((ip(r)!=="body"||Cy(a))&&(l=ww(r)),zu(r))){const f=W1(r);d=Lg(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-l.scrollLeft*d.x+u.x,y:t.y*d.y-l.scrollTop*d.y+u.y}}function VEe(n){return Array.from(n.getClientRects())}function BZ(n){return W1(Qh(n)).left+ww(n).scrollLeft}function KEe(n){const e=Qh(n),t=ww(n),r=n.ownerDocument.body,o=bc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=bc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+BZ(n);const s=-t.scrollTop;return ud(r).direction==="rtl"&&(a+=bc(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}function YEe(n,e){const t=Pc(n),r=Qh(n),o=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const d=CE();(!d||d&&e==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}function GEe(n,e){const t=W1(n,!0,e==="fixed"),r=t.top+n.clientTop,o=t.left+n.clientLeft,i=zu(n)?Lg(n):op(1),a=n.clientWidth*i.x,s=n.clientHeight*i.y,l=o*i.x,d=r*i.y;return{width:a,height:s,x:l,y:d}}function y$(n,e,t){let r;if(e==="viewport")r=YEe(n,t);else if(e==="document")r=KEe(Qh(n));else if(Fh(e))r=GEe(e,t);else{const o=NZ(n);r={...e,x:e.x-o.x,y:e.y-o.y}}return K4(r)}function HZ(n,e){const t=fm(n);return t===e||!Fh(t)||xw(t)?!1:ud(t).position==="fixed"||HZ(t,e)}function XEe(n,e){const t=e.get(n);if(t)return t;let r=_b(n,[],!1).filter(s=>Fh(s)&&ip(s)!=="body"),o=null;const i=ud(n).position==="fixed";let a=i?fm(n):n;for(;Fh(a)&&!xw(a);){const s=ud(a),l=wE(a);!l&&s.position==="fixed"&&(o=null),(i?!l&&!o:!l&&s.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Cy(a)&&!l&&HZ(n,a))?r=r.filter(u=>u!==a):o=s,a=fm(a)}return e.set(n,r),r}function qEe(n){let{element:e,boundary:t,rootBoundary:r,strategy:o}=n;const a=[...t==="clippingAncestors"?XEe(e,this._c):[].concat(t),r],s=a[0],l=a.reduce((d,u)=>{const p=y$(e,u,o);return d.top=bc(p.top,d.top),d.right=rp(p.right,d.right),d.bottom=rp(p.bottom,d.bottom),d.left=bc(p.left,d.left),d},y$(e,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function JEe(n){const{width:e,height:t}=DZ(n);return{width:e,height:t}}function QEe(n,e,t){const r=zu(e),o=Qh(e),i=t==="fixed",a=W1(n,!0,i,e);let s={scrollLeft:0,scrollTop:0};const l=op(0);if(r||!r&&!i)if((ip(e)!=="body"||Cy(o))&&(s=ww(e)),r){const p=W1(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else o&&(l.x=BZ(o));const d=a.left+s.scrollLeft-l.x,u=a.top+s.scrollTop-l.y;return{x:d,y:u,width:a.width,height:a.height}}function x$(n,e){return!zu(n)||ud(n).position==="fixed"?null:e?e(n):n.offsetParent}function FZ(n,e){const t=Pc(n);if(!zu(n)||zZ(n))return t;let r=x$(n,e);for(;r&&BEe(r)&&ud(r).position==="static";)r=x$(r,e);return r&&(ip(r)==="html"||ip(r)==="body"&&ud(r).position==="static"&&!wE(r))?t:r||HEe(n)||t}const ePe=async function(n){const e=this.getOffsetParent||FZ,t=this.getDimensions;return{reference:QEe(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,...await t(n.floating)}}};function tPe(n){return ud(n).direction==="rtl"}const nPe={convertOffsetParentRelativeRectToViewportRelativeRect:WEe,getDocumentElement:Qh,getClippingRect:qEe,getOffsetParent:FZ,getElementRects:ePe,getClientRects:VEe,getDimensions:JEe,getScale:Lg,isElement:Fh,isRTL:tPe};function rPe(n,e){let t=null,r;const o=Qh(n);function i(){var s;clearTimeout(r),(s=t)==null||s.disconnect(),t=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const{left:d,top:u,width:p,height:f}=n.getBoundingClientRect();if(s||e(),!p||!f)return;const h=r3(u),c=r3(o.clientWidth-(d+p)),g=r3(o.clientHeight-(u+f)),m=r3(d),v={rootMargin:-h+"px "+-c+"px "+-g+"px "+-m+"px",threshold:bc(0,rp(1,l))||1};let w=!0;function _(k){const y=k[0].intersectionRatio;if(y!==l){if(!w)return a();y?a(!1,y):r=setTimeout(()=>{a(!1,1e-7)},100)}w=!1}try{t=new IntersectionObserver(_,{...v,root:o.ownerDocument})}catch{t=new IntersectionObserver(_,v)}t.observe(n)}return a(!0),i}function oPe(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=SE(n),u=o||i?[...d?_b(d):[],..._b(e)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",t,{passive:!0}),i&&b.addEventListener("resize",t)});const p=d&&s?rPe(d,t):null;let f=-1,h=null;a&&(h=new ResizeObserver(b=>{let[v]=b;v&&v.target===d&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),t()}),d&&!l&&h.observe(d),h.observe(e));let c,g=l?W1(n):null;l&&m();function m(){const b=W1(n);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&t(),g=b,c=requestAnimationFrame(m)}return t(),()=>{var b;u.forEach(v=>{o&&v.removeEventListener("scroll",t),i&&v.removeEventListener("resize",t)}),p==null||p(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(c)}}const iPe=DEe,aPe=LEe,sPe=zEe,lPe=$Ee,w$=AEe,cPe=NEe,dPe=(n,e,t)=>{const r=new Map,o={platform:nPe,...t},i={...o.platform,_c:r};return OEe(n,e,{...o,platform:i})},uPe=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:o}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?w$({element:r.current,padding:o}).fn(t):{}:r?w$({element:r,padding:o}).fn(t):{}}}};var V3=typeof document<"u"?ne.useLayoutEffect:ne.useEffect;function Y4(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,o;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Y4(n[r],e[r]))return!1;return!0}if(o=Object.keys(n),t=o.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=t;r--!==0;){const i=o[r];if(!(i==="_owner"&&n.$$typeof)&&!Y4(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function ZZ(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function C$(n,e){const t=ZZ(n);return Math.round(e*t)/t}function S$(n){const e=ne.useRef(n);return V3(()=>{e.current=n}),e}function hPe(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:d}=n,[u,p]=ne.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=ne.useState(r);Y4(f,r)||h(r);const[c,g]=ne.useState(null),[m,b]=ne.useState(null),v=ne.useCallback(pe=>{pe!==y.current&&(y.current=pe,g(pe))},[]),w=ne.useCallback(pe=>{pe!==S.current&&(S.current=pe,b(pe))},[]),_=i||c,k=a||m,y=ne.useRef(null),S=ne.useRef(null),C=ne.useRef(u),I=l!=null,A=S$(l),T=S$(o),L=ne.useCallback(()=>{if(!y.current||!S.current)return;const pe={placement:e,strategy:t,middleware:f};T.current&&(pe.platform=T.current),dPe(y.current,S.current,pe).then(ie=>{const te={...ie,isPositioned:!0};j.current&&!Y4(C.current,te)&&(C.current=te,up.flushSync(()=>{p(te)}))})},[f,e,t,T]);V3(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,p(pe=>({...pe,isPositioned:!1})))},[d]);const j=ne.useRef(!1);V3(()=>(j.current=!0,()=>{j.current=!1}),[]),V3(()=>{if(_&&(y.current=_),k&&(S.current=k),_&&k){if(A.current)return A.current(_,k,L);L()}},[_,k,L,A,I]);const $=ne.useMemo(()=>({reference:y,floating:S,setReference:v,setFloating:w}),[v,w]),ee=ne.useMemo(()=>({reference:_,floating:k}),[_,k]),Q=ne.useMemo(()=>{const pe={position:t,left:0,top:0};if(!ee.floating)return pe;const ie=C$(ee.floating,u.x),te=C$(ee.floating,u.y);return s?{...pe,transform:"translate("+ie+"px, "+te+"px)",...ZZ(ee.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ie,top:te}},[t,s,ee.floating,u.x,u.y]);return ne.useMemo(()=>({...u,update:L,refs:$,elements:ee,floatingStyles:Q}),[u,L,$,ee,Q])}function UZ(n){const[e,t]=ne.useState(void 0);return F1(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let a,s;if("borderBoxSize"in i){const l=i.borderBoxSize,d=Array.isArray(l)?l[0]:l;a=d.inlineSize,s=d.blockSize}else a=n.offsetWidth,s=n.offsetHeight;t({width:a,height:s})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const WZ="Popper",[VZ,KZ]=Wh(WZ),[fPe,YZ]=VZ(WZ),pPe=n=>{const{__scopePopper:e,children:t}=n,[r,o]=ne.useState(null);return ne.createElement(fPe,{scope:e,anchor:r,onAnchorChange:o},t)},gPe="PopperAnchor",mPe=ne.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...o}=n,i=YZ(gPe,t),a=ne.useRef(null),s=Ma(e,a);return ne.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:ne.createElement(oa.div,ur({},o,{ref:s}))}),GZ="PopperContent",[vPe,qDe]=VZ(GZ),bPe=ne.forwardRef((n,e)=>{var t,r,o,i,a,s,l,d;const{__scopePopper:u,side:p="bottom",sideOffset:f=0,align:h="center",alignOffset:c=0,arrowPadding:g=0,avoidCollisions:m=!0,collisionBoundary:b=[],collisionPadding:v=0,sticky:w="partial",hideWhenDetached:_=!1,updatePositionStrategy:k="optimized",onPlaced:y,...S}=n,C=YZ(GZ,u),[I,A]=ne.useState(null),T=Ma(e,ve=>A(ve)),[L,j]=ne.useState(null),$=UZ(L),ee=(t=$==null?void 0:$.width)!==null&&t!==void 0?t:0,Q=(r=$==null?void 0:$.height)!==null&&r!==void 0?r:0,pe=p+(h!=="center"?"-"+h:""),ie=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},te=Array.isArray(b)?b:[b],Z=te.length>0,D={padding:ie,boundary:te.filter(yPe),altBoundary:Z},{refs:B,floatingStyles:H,placement:V,isPositioned:R,middlewareData:Y}=hPe({strategy:"fixed",placement:pe,whileElementsMounted:(...ve)=>oPe(...ve,{animationFrame:k==="always"}),elements:{reference:C.anchor},middleware:[REe({mainAxis:f+Q,alignmentAxis:c}),m&&iPe({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?cPe():void 0,...D}),m&&aPe({...D}),sPe({...D,apply:({elements:ve,rects:oe,availableWidth:re,availableHeight:ae})=>{const{width:me,height:he}=oe.reference,se=ve.floating.style;se.setProperty("--radix-popper-available-width",`${re}px`),se.setProperty("--radix-popper-available-height",`${ae}px`),se.setProperty("--radix-popper-anchor-width",`${me}px`),se.setProperty("--radix-popper-anchor-height",`${he}px`)}}),L&&uPe({element:L,padding:g}),xPe({arrowWidth:ee,arrowHeight:Q}),_&&lPe({strategy:"referenceHidden",...D})]}),[E,W]=XZ(V),F=pl(y);F1(()=>{R&&(F==null||F())},[R,F]);const z=(o=Y.arrow)===null||o===void 0?void 0:o.x,q=(i=Y.arrow)===null||i===void 0?void 0:i.y,fe=((a=Y.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[ce,U]=ne.useState();return F1(()=>{I&&U(window.getComputedStyle(I).zIndex)},[I]),ne.createElement("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:R?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(s=Y.transformOrigin)===null||s===void 0?void 0:s.x,(l=Y.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},ne.createElement(vPe,{scope:u,placedSide:E,onArrowChange:j,arrowX:z,arrowY:q,shouldHideArrow:fe},ne.createElement(oa.div,ur({"data-side":E,"data-align":W},S,{ref:T,style:{...S.style,animation:R?void 0:"none",opacity:(d=Y.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function yPe(n){return n!==null}const xPe=n=>({name:"transformOrigin",options:n,fn(e){var t,r,o,i,a;const{placement:s,rects:l,middlewareData:d}=e,p=((t=d.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,f=p?0:n.arrowWidth,h=p?0:n.arrowHeight,[c,g]=XZ(s),m={start:"0%",center:"50%",end:"100%"}[g],b=((r=(o=d.arrow)===null||o===void 0?void 0:o.x)!==null&&r!==void 0?r:0)+f/2,v=((i=(a=d.arrow)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0)+h/2;let w="",_="";return c==="bottom"?(w=p?m:`${b}px`,_=`${-h}px`):c==="top"?(w=p?m:`${b}px`,_=`${l.floating.height+h}px`):c==="right"?(w=`${-h}px`,_=p?m:`${v}px`):c==="left"&&(w=`${l.floating.width+h}px`,_=p?m:`${v}px`),{data:{x:w,y:_}}}});function XZ(n){const[e,t="center"]=n.split("-");return[e,t]}const qZ=pPe,wPe=mPe,CPe=bPe,o9="rovingFocusGroup.onEntryFocus",SPe={bubbles:!1,cancelable:!0},kE="RovingFocusGroup",[PS,JZ,kPe]=yw(kE),[_Pe,QZ]=Wh(kE,[kPe]),[EPe,PPe]=_Pe(kE),MPe=ne.forwardRef((n,e)=>ne.createElement(PS.Provider,{scope:n.__scopeRovingFocusGroup},ne.createElement(PS.Slot,{scope:n.__scopeRovingFocusGroup},ne.createElement(IPe,ur({},n,{ref:e}))))),IPe=ne.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:o=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:d,...u}=n,p=ne.useRef(null),f=Ma(e,p),h=vE(i),[c=null,g]=r0({prop:a,defaultProp:s,onChange:l}),[m,b]=ne.useState(!1),v=pl(d),w=JZ(t),_=ne.useRef(!1),[k,y]=ne.useState(0);return ne.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(o9,v),()=>S.removeEventListener(o9,v)},[v]),ne.createElement(EPe,{scope:t,orientation:r,dir:h,loop:o,currentTabStopId:c,onItemFocus:ne.useCallback(S=>g(S),[g]),onItemShiftTab:ne.useCallback(()=>b(!0),[]),onFocusableItemAdd:ne.useCallback(()=>y(S=>S+1),[]),onFocusableItemRemove:ne.useCallback(()=>y(S=>S-1),[])},ne.createElement(oa.div,ur({tabIndex:m||k===0?-1:0,"data-orientation":r},u,{ref:f,style:{outline:"none",...n.style},onMouseDown:ao(n.onMouseDown,()=>{_.current=!0}),onFocus:ao(n.onFocus,S=>{const C=!_.current;if(S.target===S.currentTarget&&C&&!m){const I=new CustomEvent(o9,SPe);if(S.currentTarget.dispatchEvent(I),!I.defaultPrevented){const A=w().filter(ee=>ee.focusable),T=A.find(ee=>ee.active),L=A.find(ee=>ee.id===c),$=[T,L,...A].filter(Boolean).map(ee=>ee.ref.current);eU($)}}_.current=!1}),onBlur:ao(n.onBlur,()=>b(!1))})))}),TPe="RovingFocusGroupItem",OPe=ne.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:o=!1,tabStopId:i,...a}=n,s=Bf(),l=i||s,d=PPe(TPe,t),u=d.currentTabStopId===l,p=JZ(t),{onFocusableItemAdd:f,onFocusableItemRemove:h}=d;return ne.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),ne.createElement(PS.ItemSlot,{scope:t,id:l,focusable:r,active:o},ne.createElement(oa.span,ur({tabIndex:u?0:-1,"data-orientation":d.orientation},a,{ref:e,onMouseDown:ao(n.onMouseDown,c=>{r?d.onItemFocus(l):c.preventDefault()}),onFocus:ao(n.onFocus,()=>d.onItemFocus(l)),onKeyDown:ao(n.onKeyDown,c=>{if(c.key==="Tab"&&c.shiftKey){d.onItemShiftTab();return}if(c.target!==c.currentTarget)return;const g=$Pe(c,d.orientation,d.dir);if(g!==void 0){c.preventDefault();let b=p().filter(v=>v.focusable).map(v=>v.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const v=b.indexOf(c.currentTarget);b=d.loop?jPe(b,v+1):b.slice(v+1)}setTimeout(()=>eU(b))}})})))}),APe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function LPe(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function $Pe(n,e,t){const r=LPe(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return APe[r]}function eU(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function jPe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}const RPe=MPe,DPe=OPe,MS=["Enter"," "],NPe=["ArrowDown","PageUp","Home"],tU=["ArrowUp","PageDown","End"],zPe=[...NPe,...tU],BPe={ltr:[...MS,"ArrowRight"],rtl:[...MS,"ArrowLeft"]},HPe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Cw="Menu",[Eb,FPe,ZPe]=yw(Cw),[d0,Sw]=Wh(Cw,[ZPe,KZ,QZ]),kw=KZ(),nU=QZ(),[rU,kp]=d0(Cw),[UPe,Sy]=d0(Cw),WPe=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:o,onOpenChange:i,modal:a=!0}=n,s=kw(e),[l,d]=ne.useState(null),u=ne.useRef(!1),p=pl(i),f=vE(o);return ne.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",c,{capture:!0,once:!0}),document.addEventListener("pointermove",c,{capture:!0,once:!0})},c=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",c,{capture:!0}),document.removeEventListener("pointermove",c,{capture:!0})}},[]),ne.createElement(qZ,s,ne.createElement(rU,{scope:e,open:t,onOpenChange:p,content:l,onContentChange:d},ne.createElement(UPe,{scope:e,onClose:ne.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:u,dir:f,modal:a},r)))},oU=ne.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,o=kw(t);return ne.createElement(wPe,ur({},o,r,{ref:e}))}),iU="MenuPortal",[VPe,aU]=d0(iU,{forceMount:void 0}),KPe=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:o}=n,i=kp(iU,e);return ne.createElement(VPe,{scope:e,forceMount:t},ne.createElement(Vh,{present:t||i.open},ne.createElement(b_,{asChild:!0,container:o},r)))},Vd="MenuContent",[YPe,_E]=d0(Vd),GPe=ne.forwardRef((n,e)=>{const t=aU(Vd,n.__scopeMenu),{forceMount:r=t.forceMount,...o}=n,i=kp(Vd,n.__scopeMenu),a=Sy(Vd,n.__scopeMenu);return ne.createElement(Eb.Provider,{scope:n.__scopeMenu},ne.createElement(Vh,{present:r||i.open},ne.createElement(Eb.Slot,{scope:n.__scopeMenu},a.modal?ne.createElement(XPe,ur({},o,{ref:e})):ne.createElement(qPe,ur({},o,{ref:e})))))}),XPe=ne.forwardRef((n,e)=>{const t=kp(Vd,n.__scopeMenu),r=ne.useRef(null),o=Ma(e,r);return ne.useEffect(()=>{const i=r.current;if(i)return x_(i)},[]),ne.createElement(EE,ur({},n,{ref:o,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:ao(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)}))}),qPe=ne.forwardRef((n,e)=>{const t=kp(Vd,n.__scopeMenu);return ne.createElement(EE,ur({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)}))}),EE=ne.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:f,onDismiss:h,disableOutsideScroll:c,...g}=n,m=kp(Vd,t),b=Sy(Vd,t),v=kw(t),w=nU(t),_=FPe(t),[k,y]=ne.useState(null),S=ne.useRef(null),C=Ma(e,S,m.onContentChange),I=ne.useRef(0),A=ne.useRef(""),T=ne.useRef(0),L=ne.useRef(null),j=ne.useRef("right"),$=ne.useRef(0),ee=c?y_:ne.Fragment,Q=c?{as:am,allowPinchZoom:!0}:void 0,pe=te=>{var Z,D;const B=A.current+te,H=_().filter(F=>!F.disabled),V=document.activeElement,R=(Z=H.find(F=>F.ref.current===V))===null||Z===void 0?void 0:Z.textValue,Y=H.map(F=>F.textValue),E=uMe(Y,B,R),W=(D=H.find(F=>F.textValue===E))===null||D===void 0?void 0:D.ref.current;(function F(z){A.current=z,window.clearTimeout(I.current),z!==""&&(I.current=window.setTimeout(()=>F(""),1e3))})(B),W&&setTimeout(()=>W.focus())};ne.useEffect(()=>()=>window.clearTimeout(I.current),[]),YB();const ie=ne.useCallback(te=>{var Z,D;return j.current===((Z=L.current)===null||Z===void 0?void 0:Z.side)&&fMe(te,(D=L.current)===null||D===void 0?void 0:D.area)},[]);return ne.createElement(YPe,{scope:t,searchRef:A,onItemEnter:ne.useCallback(te=>{ie(te)&&te.preventDefault()},[ie]),onItemLeave:ne.useCallback(te=>{var Z;ie(te)||((Z=S.current)===null||Z===void 0||Z.focus(),y(null))},[ie]),onTriggerLeave:ne.useCallback(te=>{ie(te)&&te.preventDefault()},[ie]),pointerGraceTimerRef:T,onPointerGraceIntentChange:ne.useCallback(te=>{L.current=te},[])},ne.createElement(ee,Q,ne.createElement(VB,{asChild:!0,trapped:o,onMountAutoFocus:ao(i,te=>{var Z;te.preventDefault(),(Z=S.current)===null||Z===void 0||Z.focus()}),onUnmountAutoFocus:a},ne.createElement(v_,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:f,onDismiss:h},ne.createElement(RPe,ur({asChild:!0},w,{dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:y,onEntryFocus:ao(l,te=>{b.isUsingKeyboardRef.current||te.preventDefault()})}),ne.createElement(CPe,ur({role:"menu","aria-orientation":"vertical","data-state":hU(m.open),"data-radix-menu-content":"",dir:b.dir},v,g,{ref:C,style:{outline:"none",...g.style},onKeyDown:ao(g.onKeyDown,te=>{const D=te.target.closest("[data-radix-menu-content]")===te.currentTarget,B=te.ctrlKey||te.altKey||te.metaKey,H=te.key.length===1;D&&(te.key==="Tab"&&te.preventDefault(),!B&&H&&pe(te.key));const V=S.current;if(te.target!==V||!zPe.includes(te.key))return;te.preventDefault();const Y=_().filter(E=>!E.disabled).map(E=>E.ref.current);tU.includes(te.key)&&Y.reverse(),cMe(Y)}),onBlur:ao(n.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(I.current),A.current="")}),onPointerMove:ao(n.onPointerMove,Pb(te=>{const Z=te.target,D=$.current!==te.clientX;if(te.currentTarget.contains(Z)&&D){const B=te.clientX>$.current?"right":"left";j.current=B,$.current=te.clientX}}))})))))))}),JPe=ne.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return ne.createElement(oa.div,ur({role:"group"},r,{ref:e}))}),IS="MenuItem",k$="menu.itemSelect",sU=ne.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...o}=n,i=ne.useRef(null),a=Sy(IS,n.__scopeMenu),s=_E(IS,n.__scopeMenu),l=Ma(e,i),d=ne.useRef(!1),u=()=>{const p=i.current;if(!t&&p){const f=new CustomEvent(k$,{bubbles:!0,cancelable:!0});p.addEventListener(k$,h=>r==null?void 0:r(h),{once:!0}),m_(p,f),f.defaultPrevented?d.current=!1:a.onClose()}};return ne.createElement(lU,ur({},o,{ref:l,disabled:t,onClick:ao(n.onClick,u),onPointerDown:p=>{var f;(f=n.onPointerDown)===null||f===void 0||f.call(n,p),d.current=!0},onPointerUp:ao(n.onPointerUp,p=>{var f;d.current||(f=p.currentTarget)===null||f===void 0||f.click()}),onKeyDown:ao(n.onKeyDown,p=>{const f=s.searchRef.current!=="";t||f&&p.key===" "||MS.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})}))}),lU=ne.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:o,...i}=n,a=_E(IS,t),s=nU(t),l=ne.useRef(null),d=Ma(e,l),[u,p]=ne.useState(!1),[f,h]=ne.useState("");return ne.useEffect(()=>{const c=l.current;if(c){var g;h(((g=c.textContent)!==null&&g!==void 0?g:"").trim())}},[i.children]),ne.createElement(Eb.ItemSlot,{scope:t,disabled:r,textValue:o??f},ne.createElement(DPe,ur({asChild:!0},s,{focusable:!r}),ne.createElement(oa.div,ur({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},i,{ref:d,onPointerMove:ao(n.onPointerMove,Pb(c=>{r?a.onItemLeave(c):(a.onItemEnter(c),c.defaultPrevented||c.currentTarget.focus())})),onPointerLeave:ao(n.onPointerLeave,Pb(c=>a.onItemLeave(c))),onFocus:ao(n.onFocus,()=>p(!0)),onBlur:ao(n.onBlur,()=>p(!1))}))))}),QPe=ne.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...o}=n;return ne.createElement(tMe,{scope:n.__scopeMenu,checked:t},ne.createElement(sU,ur({role:"menuitemcheckbox","aria-checked":G4(t)?"mixed":t},o,{ref:e,"data-state":fU(t),onSelect:ao(o.onSelect,()=>r==null?void 0:r(G4(t)?!0:!t),{checkForDefaultPrevented:!1})})))}),eMe="MenuRadioGroup";d0(eMe,{value:void 0,onValueChange:()=>{}});const cU="MenuItemIndicator",[tMe,nMe]=d0(cU,{checked:!1}),rMe=ne.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...o}=n,i=nMe(cU,t);return ne.createElement(Vh,{present:r||G4(i.checked)||i.checked===!0},ne.createElement(oa.span,ur({},o,{ref:e,"data-state":fU(i.checked)})))}),dU="MenuSub",[oMe,uU]=d0(dU),iMe=n=>{const{__scopeMenu:e,children:t,open:r=!1,onOpenChange:o}=n,i=kp(dU,e),a=kw(e),[s,l]=ne.useState(null),[d,u]=ne.useState(null),p=pl(o);return ne.useEffect(()=>(i.open===!1&&p(!1),()=>p(!1)),[i.open,p]),ne.createElement(qZ,a,ne.createElement(rU,{scope:e,open:r,onOpenChange:p,content:d,onContentChange:u},ne.createElement(oMe,{scope:e,contentId:Bf(),triggerId:Bf(),trigger:s,onTriggerChange:l},t)))},o3="MenuSubTrigger",aMe=ne.forwardRef((n,e)=>{const t=kp(o3,n.__scopeMenu),r=Sy(o3,n.__scopeMenu),o=uU(o3,n.__scopeMenu),i=_E(o3,n.__scopeMenu),a=ne.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=i,d={__scopeMenu:n.__scopeMenu},u=ne.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return ne.useEffect(()=>u,[u]),ne.useEffect(()=>{const p=s.current;return()=>{window.clearTimeout(p),l(null)}},[s,l]),ne.createElement(oU,ur({asChild:!0},d),ne.createElement(lU,ur({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":o.contentId,"data-state":hU(t.open)},n,{ref:Yx(e,o.onTriggerChange),onClick:p=>{var f;(f=n.onClick)===null||f===void 0||f.call(n,p),!(n.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:ao(n.onPointerMove,Pb(p=>{i.onItemEnter(p),!p.defaultPrevented&&!n.disabled&&!t.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:ao(n.onPointerLeave,Pb(p=>{var f;u();const h=(f=t.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var c;const g=(c=t.content)===null||c===void 0?void 0:c.dataset.side,m=g==="right",b=m?-5:5,v=h[m?"left":"right"],w=h[m?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+b,y:p.clientY},{x:v,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:v,y:h.bottom}],side:g}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ao(n.onKeyDown,p=>{const f=i.searchRef.current!=="";if(!(n.disabled||f&&p.key===" ")&&BPe[r.dir].includes(p.key)){var h;t.onOpenChange(!0),(h=t.content)===null||h===void 0||h.focus(),p.preventDefault()}})})))}),sMe="MenuSubContent",lMe=ne.forwardRef((n,e)=>{const t=aU(Vd,n.__scopeMenu),{forceMount:r=t.forceMount,...o}=n,i=kp(Vd,n.__scopeMenu),a=Sy(Vd,n.__scopeMenu),s=uU(sMe,n.__scopeMenu),l=ne.useRef(null),d=Ma(e,l);return ne.createElement(Eb.Provider,{scope:n.__scopeMenu},ne.createElement(Vh,{present:r||i.open},ne.createElement(Eb.Slot,{scope:n.__scopeMenu},ne.createElement(EE,ur({id:s.contentId,"aria-labelledby":s.triggerId},o,{ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var p;a.isUsingKeyboardRef.current&&((p=l.current)===null||p===void 0||p.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ao(n.onFocusOutside,u=>{u.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ao(n.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:ao(n.onKeyDown,u=>{const p=u.currentTarget.contains(u.target),f=HPe[a.dir].includes(u.key);if(p&&f){var h;i.onOpenChange(!1),(h=s.trigger)===null||h===void 0||h.focus(),u.preventDefault()}})})))))});function hU(n){return n?"open":"closed"}function G4(n){return n==="indeterminate"}function fU(n){return G4(n)?"indeterminate":n?"checked":"unchecked"}function cMe(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function dMe(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function uMe(n,e,t){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=dMe(n,Math.max(i,0));o.length===1&&(a=a.filter(d=>d!==t));const l=a.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return l!==t?l:void 0}function hMe(n,e){const{x:t,y:r}=n;let o=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const s=e[i].x,l=e[i].y,d=e[a].x,u=e[a].y;l>r!=u>r&&t<(d-s)*(r-l)/(u-l)+s&&(o=!o)}return o}function fMe(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return hMe(t,e)}function Pb(n){return e=>e.pointerType==="mouse"?n(e):void 0}const pU=WPe,gU=oU,mU=KPe,vU=GPe,bU=JPe,yU=sU,xU=QPe,pMe=rMe,wU=iMe,CU=aMe,SU=lMe,kU="DropdownMenu",[gMe,JDe]=Wh(kU,[Sw]),Qd=Sw(),[mMe,_U]=gMe(kU),vMe=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:o,defaultOpen:i,onOpenChange:a,modal:s=!0}=n,l=Qd(e),d=ne.useRef(null),[u=!1,p]=r0({prop:o,defaultProp:i,onChange:a});return ne.createElement(mMe,{scope:e,triggerId:Bf(),triggerRef:d,contentId:Bf(),open:u,onOpenChange:p,onOpenToggle:ne.useCallback(()=>p(f=>!f),[p]),modal:s},ne.createElement(pU,ur({},l,{open:u,onOpenChange:p,dir:r,modal:s}),t))},bMe="DropdownMenuTrigger",yMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...o}=n,i=_U(bMe,t),a=Qd(t);return ne.createElement(gU,ur({asChild:!0},a),ne.createElement(oa.button,ur({type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},o,{ref:Yx(e,i.triggerRef),onPointerDown:ao(n.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:ao(n.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})))}),xMe=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Qd(e);return ne.createElement(mU,ur({},r,t))},wMe="DropdownMenuContent",CMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=_U(wMe,t),i=Qd(t),a=ne.useRef(!1);return ne.createElement(vU,ur({id:o.contentId,"aria-labelledby":o.triggerId},i,r,{ref:e,onCloseAutoFocus:ao(n.onCloseAutoFocus,s=>{var l;a.current||(l=o.triggerRef.current)===null||l===void 0||l.focus(),a.current=!1,s.preventDefault()}),onInteractOutside:ao(n.onInteractOutside,s=>{const l=s.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;(!o.modal||u)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),SMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Qd(t);return ne.createElement(bU,ur({},o,r,{ref:e}))}),kMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Qd(t);return ne.createElement(yU,ur({},o,r,{ref:e}))}),_Me=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Qd(t);return ne.createElement(xU,ur({},o,r,{ref:e}))}),EMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Qd(t);return ne.createElement(pMe,ur({},o,r,{ref:e}))}),PMe=n=>{const{__scopeDropdownMenu:e,children:t,open:r,onOpenChange:o,defaultOpen:i}=n,a=Qd(e),[s=!1,l]=r0({prop:r,defaultProp:i,onChange:o});return ne.createElement(wU,ur({},a,{open:s,onOpenChange:l}),t)},MMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Qd(t);return ne.createElement(CU,ur({},o,r,{ref:e}))}),IMe=ne.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,o=Qd(t);return ne.createElement(SU,ur({},o,r,{ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),EU=vMe,Mb=yMe,PE=xMe,PU=CMe,TMe=SMe,pg=kMe,MU=_Me,OMe=EMe,AMe=PMe,LMe=MMe,$Me=IMe,IU=()=>{},TU=ne.createContext({});function jMe({onEvent:n,children:e}){return K.jsx(TU.Provider,{value:n??IU,children:e})}function Jm(){return ne.useContext(TU)??IU}function u0(n,e){const t=Dn(),r=ne.useRef(!1),o=Jm(),i=ne.useCallback(s=>{r.current=s,t.batch(()=>{s?(t.complete(),t.addOpenMenu(n)):(t.deleteOpenMenu(n),t.openMenus.forEach(l=>{l.startsWith(n)&&t.deleteOpenMenu(l)})),e==null||e(s)})},[t,n,e]);return ne.useEffect(()=>(r.current&&(o("open-menu",{source:"unknown",id:n}),t.addOpenMenu(n)),()=>{r.current&&(t.deleteOpenMenu(n),t.openMenus.forEach(s=>{s.startsWith(n)&&(o("close-menu",{source:"unknown",id:n}),t.deleteOpenMenu(s))}),r.current=!1)}),[t,n,o]),[sr("is menu open",()=>t.openMenus.includes(n),[t,n]),i]}function ap({id:n,children:e,modal:t=!1}){const[r,o]=u0(n);return K.jsx(EU,{open:r,dir:"ltr",modal:t,onOpenChange:o,children:e})}function ky({children:n,"data-testid":e}){return K.jsx(Mb,{dir:"ltr","data-testid":e,asChild:!0,onTouchEnd:t=>Zi(t),children:n})}function sp({side:n="bottom",align:e="start",sideOffset:t=8,alignOffset:r=8,children:o}){const i=vl();return K.jsx(PE,{dir:"ltr",container:i,children:K.jsx(PU,{className:"tlui-menu",align:e,sideOffset:t,side:n,alignOffset:r,collisionPadding:4,children:o})})}function ME({id:n,children:e}){const[t,r]=u0(n);return K.jsx(AMe,{open:t,onOpenChange:r,children:e})}function IE({label:n,"data-testid":e,"data-direction":t}){return K.jsx(LMe,{dir:"ltr","data-direction":t,"data-testid":e,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button tlui-menu__submenu__trigger",label:n,icon:"chevron-right"})})}function TE({alignOffset:n=0,sideOffset:e=5,children:t}){const r=vl();return K.jsx(PE,{container:r,dir:"ltr",children:K.jsx($Me,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:n,sideOffset:e,collisionPadding:4,children:t})})}function _h({children:n,size:e="medium"}){return K.jsx(TMe,{dir:"ltr",className:"tlui-menu__group","data-size":e,children:n})}function yc({noClose:n,...e}){return K.jsx(pg,{dir:"ltr",asChild:!0,onClick:n||e.isChecked!==void 0?Zi:void 0,children:K.jsx(io,{className:"tlui-menu__button",...e})})}function OU({children:n,onSelect:e,...t}){return K.jsxs(MU,{dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:r=>{e==null||e(r),Zi(r)},...t,children:[K.jsx("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:`scale(${t.checked?1:.5})`,opacity:t.checked?1:.5},children:K.jsx(Vl,{small:!0,icon:t.checked?"check":"checkbox-empty"})}),n]})}function RMe({children:n,onSelect:e,...t}){return K.jsxs(MU,{dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:r=>{e==null||e(r),Zi(r)},...t,children:[K.jsx(OMe,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:K.jsx(Vl,{icon:"check"})}),n]})}const DMe=({children:n})=>{const e=Dn();return sr("shouldDisplayHandles",()=>e.isInAny("select.idle","select.pointing_handle"),[e])?K.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:n}):null},NMe=({shapeId:n})=>{const e=Dn();return sr("show hovered",()=>e.isIn("select.editing_shape")?e.hoveredShapeId!==e.editingShapeId:e.isInAny("select.idle"),[e])?K.jsx(fy,{className:"tl-user-indicator__hovered",id:n}):null},{PI:zMe}=Math,lg=zMe+1e-4;function pm(n,e={}){const{size:t=16,smoothing:r=.5,start:o={},end:i={},last:a=!1}=e,{cap:s=!0}=o,{cap:l=!0}=i;if(n.length===0||t<=0)return[];const d=n[0],u=n[n.length-1],p=u.runningLength,f=o.taper===!1?0:o.taper===!0?Math.max(t,p):o.taper,h=i.taper===!1?0:i.taper===!0?Math.max(t,p):i.taper,c=Math.pow(t*r,2),g=[],m=[];let b=n[0].vector,v=n[0].point,w=v,_=v,k=w,y=!1,S;for(let j=0;j<n.length;j++){S=n[j];const{point:$,vector:ee}=n[j],Q=S.vector.dpr(b),pe=(j<n.length-1?n[j+1]:n[j]).vector,ie=j<n.length-1?pe.dpr(S.vector):1,te=Q<0&&!y,Z=ie!==null&&ie<.2;if(te||Z){if(ie>-.62&&p-S.runningLength>S.radius){const B=b.clone().mul(S.radius);b.clone().cpr(pe)<0?(_=Le.Add($,B),k=Le.Sub($,B)):(_=Le.Sub($,B),k=Le.Add($,B)),g.push(_),m.push(k)}else{const B=b.clone().mul(S.radius).per(),H=Le.Sub(S.input,B);for(let V=1/13,R=0;R<1;R+=V)_=Le.RotWith(H,S.input,lg*R),g.push(_),k=Le.RotWith(H,S.input,lg+lg*-R),m.push(k)}v=_,w=k,Z&&(y=!0);continue}if(y=!1,S===d||S===u){const B=Le.Per(ee).mul(S.radius);g.push(Le.Sub($,B)),m.push(Le.Add($,B));continue}const D=Le.Lrp(pe,ee,ie).per().mul(S.radius);_=Le.Sub($,D),(j<=1||Le.Dist2(v,_)>c)&&(g.push(_),v=_),k=Le.Add($,D),(j<=1||Le.Dist2(w,k)>c)&&(m.push(k),w=k),b=ee}const C=d.point,I=n.length>1?n[n.length-1].point:Le.AddXY(d.point,1,1);if(n.length===1&&(!(f||h)||a)){const j=Le.Add(C,Le.Sub(C,I).uni().per().mul(-d.radius)),$=[];for(let ee=1/13,Q=ee;Q<=1;Q+=ee)$.push(Le.RotWith(j,C,lg*2*Q));return $}const A=[];if(!(f||h&&n.length===1))if(s)for(let j=1/8,$=j;$<=1;$+=j){const ee=Le.RotWith(m[0],C,lg*$);A.push(ee)}else{const j=Le.Sub(g[0],m[0]),$=Le.Mul(j,.5),ee=Le.Mul(j,.51);A.push(Le.Sub(C,$),Le.Sub(C,ee),Le.Add(C,ee),Le.Add(C,$))}const T=[],L=u.vector.clone().per().neg();if(h||f&&n.length===1)T.push(I);else if(l){const j=Le.Add(I,Le.Mul(L,u.radius));for(let $=1/29,ee=$;ee<1;ee+=$)T.push(Le.RotWith(j,I,lg*3*ee))}else T.push(Le.Add(I,Le.Mul(L,u.radius)),Le.Add(I,Le.Mul(L,u.radius*.99)),Le.Sub(I,Le.Mul(L,u.radius*.99)),Le.Sub(I,Le.Mul(L,u.radius)));return g.concat(T,m.reverse(),A)}const BMe=.025,HMe=.01;function wh(n,e={}){var m;const{streamline:t=.5,size:r=16,simulatePressure:o=!1}=e;if(n.length===0)return[];const i=.15+(1-t)*.85;let a=n.map(Le.From),s=0;if(!o){let b=a[0];for(;b&&!(b.z>=BMe);)a.shift(),b=a[0]}if(!o){let b=a[a.length-1];for(;b&&!(b.z>=HMe);)a.pop(),b=a[a.length-1]}if(a.length===0)return[{point:Le.From(n[0]),input:Le.From(n[0]),pressure:o?.5:.15,vector:new Le(1,1),distance:0,runningLength:0,radius:1}];let l=a[1];for(;l&&!(Le.Dist(l,a[0])>r/3);)a[0].z=Math.max(a[0].z,l.z),a.splice(1,1),l=a[1];const d=a.pop();for(l=a[a.length-1];l&&!(Le.Dist(l,d)>r/3);)a.pop(),l=a[a.length-1],s++;a.push(d);const u=e.last||!e.simulatePressure||a.length>1&&Le.Dist(a[a.length-1],a[a.length-2])<r||s>0;if(a.length===2&&e.simulatePressure){const b=a[1];a=a.slice(0,-1);for(let v=1;v<5;v++){const w=Le.Lrp(a[0],b,v/4);w.z=(a[0].z+(b.z-a[0].z))*v/4,a.push(w)}}const p=[{point:a[0],input:a[0],pressure:o?.5:a[0].z,vector:new Le(1,1),distance:0,runningLength:0,radius:1}];let f=0,h=p[0],c,g;u&&t>0&&a.push(a[a.length-1].clone());for(let b=1,v=a.length;b<v;b++)c=!i||e.last&&b===v-1?a[b].clone():a[b].clone().lrp(h.point,1-i),!h.point.equals(c)&&(g=Le.Dist(c,h.point),f+=g,!(b<4&&f<r)&&(h={input:a[b],point:c,pressure:o?.5:a[b].z,vector:Le.Sub(h.point,c).uni(),distance:g,runningLength:f,radius:1},p.push(h)));if((m=p[1])!=null&&m.vector&&(p[0].vector=p[1].vector.clone()),f<1){const b=Math.max(.5,...p.map(v=>v.pressure));p.forEach(v=>v.pressure=b)}return p}const{min:Pf}=Math,i9=.275;function gm(n,e){const{size:t=16,thinning:r=.5,simulatePressure:o=!0,easing:i=m=>m,start:a={},end:s={}}=e,{easing:l=ul.easeOutQuad}=a,{easing:d=ul.easeOutCubic}=s,u=n[n.length-1].runningLength;let p,f=n[0].pressure,h;if(!o&&u<t){const m=n.reduce((b,v)=>Math.max(b,v.pressure),.5);return n.forEach(b=>{b.pressure=m,b.radius=t*i(.5-r*(.5-b.pressure))}),n}else{let m;for(let b=0,v=n.length;b<v&&(h=n[b],!(h.runningLength>t*5));b++){const w=Pf(1,h.distance/t);if(o){const _=Pf(1,1-w);m=Pf(1,f+(_-f)*(w*i9))}else m=Pf(1,f+(h.pressure-f)*.5);f=f+(m-f)*.5}for(let b=0;b<n.length;b++){if(h=n[b],r){let{pressure:v}=h;const w=Pf(1,h.distance/t);if(o){const _=Pf(1,1-w);v=Pf(1,f+(_-f)*(w*i9))}else v=Pf(1,f+(v-f)*(w*i9));h.radius=t*i(.5-r*(.5-v)),f=v}else h.radius=t/2;p===void 0&&(p=h.radius)}}const c=a.taper===!1?0:a.taper===!0?Math.max(t,u):a.taper,g=s.taper===!1?0:s.taper===!0?Math.max(t,u):s.taper;if(c||g)for(let m=0;m<n.length;m++){h=n[m];const{runningLength:b}=h,v=b<c?l(b/c):1,w=u-b<g?d((u-b)/g):1;h.radius=Math.max(.01,h.radius*Math.min(v,w))}return n}function FMe(n,e={}){return pm(gm(wh(n,e),e),e)}const _$=({scribble:n,zoom:e,color:t,opacity:r,className:o})=>{if(!n.points.length)return null;const i=FMe(n.points,{size:n.size/e,start:{taper:!0,easing:ul.linear},last:n.state==="stopping",simulatePressure:!1,streamline:.32});let a;if(i.length<4){const s=n.size/e/2,{x:l,y:d}=n.points[n.points.length-1];a=`M ${l-s},${d} a ${s},${s} 0 1,0 ${s*2},0 a ${s},${s} 0 1,0 ${-s*2},0`}else a=dm(i);return K.jsx("svg",{className:o&&vo("tl-overlays__item",o),children:K.jsx("path",{className:"tl-scribble",d:a,fill:t??`var(--color-${n.color})`,opacity:r??n.opacity})})},ZMe=({bounds:n,rotation:e})=>{const t=Dn();return sr("should display",()=>t.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing"),[t])?K.jsx(FH,{bounds:n,rotation:e}):null};function md(){const n=Dn();return sr("isReadonlyMode",()=>n.instanceState.isReadonly,[n])}function UMe({size:n,width:e,height:t,hideAlternateHandles:r}){const o=Rt(n/3),i=o/2;return K.jsxs("svg",{className:"tl-overlays__item",children:[K.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${Rt(0-i)},${Rt(n)} 
						${Rt(0-i)},${Rt(0-i)} 
						${Rt(n)},${Rt(0-i)}`,strokeWidth:o,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),K.jsx("line",{className:vo("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Rt(e/2-n),y1:Rt(0-i),x2:Rt(e/2+n),y2:Rt(0-i),strokeWidth:o,"data-testid":"selection.crop.top","aria-label":"top handle"}),K.jsx("polyline",{className:vo("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${Rt(e-n)},${Rt(0-i)} 
						${Rt(e+i)},${Rt(0-i)} 
						${Rt(e+i)},${Rt(n)}`,strokeWidth:o,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),K.jsx("line",{className:vo("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Rt(e+i),y1:Rt(t/2-n),x2:Rt(e+i),y2:Rt(t/2+n),strokeWidth:o,"data-testid":"selection.crop.right","aria-label":"right handle"}),K.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${Rt(e+i)},${Rt(t-n)} 
						${Rt(e+i)},${Rt(t+i)}
						${Rt(e-n)},${Rt(t+i)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),K.jsx("line",{className:vo("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Rt(e/2-n),y1:Rt(t+i),x2:Rt(e/2+n),y2:Rt(t+i),strokeWidth:o,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),K.jsx("polyline",{className:vo("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${Rt(0+n)},${Rt(t+i)} 
						${Rt(0-i)},${Rt(t+i)}
						${Rt(0-i)},${Rt(t-n)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),K.jsx("line",{className:vo("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Rt(0-i),y1:Rt(t/2-n),x2:Rt(0-i),y2:Rt(t/2+n),strokeWidth:o,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}const WMe=typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,VMe=gi(function({bounds:e,rotation:t}){const r=Dn(),o=ne.useRef(null),i=md(),a=vu("top"),s=vu("right"),l=vu("bottom"),d=vu("left"),u=vu("top_left"),p=vu("top_right"),f=vu("bottom_right"),h=vu("bottom_left"),c=!r.isMenuOpen&&r.instanceState.cursor.type==="default",g=r.instanceState.isCoarsePointer,m=r.selectedShapes,b=r.onlySelectedShape,v=b&&r.isShapeOrAncestorLocked(b),w=b?r.getShapeUtil(b).expandSelectionOutlinePx(b):0;if(Fm(o,e==null?void 0:e.x,e==null?void 0:e.y,1,r.selectionRotation,{x:-w,y:-w}),!e)return null;e=e.clone().expandBy(w).zeroFix();const _=r.zoomLevel,k=r.instanceState.isChangingStyle,y=e.width,S=e.height,C=8/_,I=y<C*2,A=S<C*2,T=y<C*4,L=S<C*4,j=y<C*5,$=S<C*5,ee=g?1.75:1,Q=6/_*ee,pe=(T?Q/2:Q)*(ee*.75),ie=(L?Q/2:Q)*(ee*.75),te=(b?!r.getShapeUtil(b).hideSelectionBoundsFg(b):!0)&&!k;let Z=te&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle")||te&&r.isIn("select.resizing")&&b&&r.isShapeOfType(b,"text");b&&Z&&WMe&&r.isShapeOfType(b,"embed")&&(Z=!1);const D=r.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!k&&!i,B=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!k&&!i,H=!g&&!(I||A)&&(B||D)&&(b?!r.getShapeUtil(b).hideRotateHandle(b):!0)&&!v,V=g&&(!T||!L)&&(B||D)&&(b?!r.getShapeUtil(b).hideRotateHandle(b):!0)&&!v,R=B&&(b?r.getShapeUtil(b).canResize(b)&&!r.getShapeUtil(b).hideResizeHandles(b):!0)&&!D&&!v,Y=I||A,E=I&&A,W=j||$,F=R||D,z=!H,q=!B||!V,fe=!B||!F,ce=!B||!F||Y,U=!B||!F||Y,ve=!B||!F||E&&!D;let oe=g;oe&&m.every(he=>r.getShapeUtil(he).isAspectRatioLocked(he))&&(oe=!1);let re=!0;D?re=W:R&&(re=Y||E||oe);const ae=Math.min(24/_,S-ie*3),me=B&&g&&b&&r.isShapeOfType(b,"text")&&ae*_>=4;return K.jsxs("svg",{ref:o,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:[Z&&K.jsx("rect",{className:vo("tl-selection__fg__outline"),width:Rt(y),height:Rt(S)}),K.jsx(i3,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:Q,corner:"top_left_rotate",cursor:c?pc("nwse-rotate",t):void 0,isHidden:z}),K.jsx(i3,{"data-testid":"selection.rotate.top-right",cx:y+Q*3,cy:0,targetSize:Q,corner:"top_right_rotate",cursor:c?pc("nesw-rotate",t):void 0,isHidden:z}),K.jsx(i3,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:S+Q*3,targetSize:Q,corner:"bottom_left_rotate",cursor:c?pc("swne-rotate",t):void 0,isHidden:z}),K.jsx(i3,{"data-testid":"selection.rotate.bottom-right",cx:y+Q*3,cy:S+Q*3,targetSize:Q,corner:"bottom_right_rotate",cursor:c?pc("senw-rotate",t):void 0,isHidden:z}),K.jsx(YMe,{"data-testid":"selection.rotate.mobile",cx:T?-Q*1.5:y/2,cy:T?S/2:-Q*1.5,size:C,isHidden:q}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":re}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:Rt(0-(L?ie*2:ie)),width:Rt(y),height:Rt(Math.max(1,ie*2)),style:c?{cursor:pc("ns-resize",t)}:void 0,...a}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":re}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:Rt(y-(T?0:pe)),y:0,height:Rt(S),width:Rt(Math.max(1,pe*2)),style:c?{cursor:pc("ew-resize",t)}:void 0,...s}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":re}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:Rt(S-(L?0:ie)),width:Rt(y),height:Rt(Math.max(1,ie*2)),style:c?{cursor:pc("ns-resize",t)}:void 0,...l}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":re}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:Rt(0-(T?pe*2:pe)),y:0,height:Rt(S),width:Rt(Math.max(1,pe*2)),style:c?{cursor:pc("ew-resize",t)}:void 0,...d}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":fe}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:Rt(0-(T?pe*2:pe*1.5)),y:Rt(0-(L?ie*2:ie*1.5)),width:Rt(pe*3),height:Rt(ie*3),style:c?{cursor:pc("nwse-resize",t)}:void 0,...u}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":ce}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:Rt(y-(T?0:pe*1.5)),y:Rt(0-(L?ie*2:ie*1.5)),width:Rt(pe*3),height:Rt(ie*3),style:c?{cursor:pc("nesw-resize",t)}:void 0,...p}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":ve}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:Rt(y-(T?pe:pe*1.5)),y:Rt(S-(L?ie:ie*1.5)),width:Rt(pe*3),height:Rt(ie*3),style:c?{cursor:pc("nwse-resize",t)}:void 0,...f}),K.jsx("rect",{className:vo("tl-transparent",{"tl-hidden":U}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:Rt(0-(T?pe*3:pe*1.5)),y:Rt(S-(L?0:ie*1.5)),width:Rt(pe*3),height:Rt(ie*3),style:c?{cursor:pc("nesw-resize",t)}:void 0,...h}),R&&K.jsxs(K.Fragment,{children:[K.jsx("rect",{"data-testid":"selection.resize.top-left",className:vo("tl-corner-handle",{"tl-hidden":fe}),"aria-label":"top_left handle",x:Rt(0-C/2),y:Rt(0-C/2),width:Rt(C),height:Rt(C)}),K.jsx("rect",{"data-testid":"selection.resize.top-right",className:vo("tl-corner-handle",{"tl-hidden":ce}),"aria-label":"top_right handle",x:Rt(y-C/2),y:Rt(0-C/2),width:Rt(C),height:Rt(C)}),K.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:vo("tl-corner-handle",{"tl-hidden":ve}),"aria-label":"bottom_right handle",x:Rt(y-C/2),y:Rt(S-C/2),width:Rt(C),height:Rt(C)}),K.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:vo("tl-corner-handle",{"tl-hidden":U}),"aria-label":"bottom_left handle",x:Rt(0-C/2),y:Rt(S-C/2),width:Rt(C),height:Rt(C)})]}),me&&K.jsxs(K.Fragment,{children:[K.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:Rt(0-C/4),y:Rt(S/2-ae/2),rx:C/4,width:Rt(C/2),height:Rt(ae)}),K.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:C/4,x:Rt(y-C/4),y:Rt(S/2-ae/2),width:Rt(C/2),height:Rt(ae)})]}),D&&K.jsx(UMe,{size:C,width:y,height:S,hideAlternateHandles:W})]})}),i3=function({cx:e,cy:t,targetSize:r,corner:o,cursor:i,isHidden:a,"data-testid":s}){const l=vu(o);return K.jsx("rect",{className:vo("tl-transparent","tl-rotate-corner",{"tl-hidden":a}),"data-testid":s,"aria-label":`${o} target`,pointerEvents:"all",x:Rt(e-r*3),y:Rt(t-r*3),width:Rt(Math.max(1,r*3)),height:Rt(Math.max(1,r*3)),cursor:i,...l})},KMe=Math.sqrt(Math.PI),YMe=function({cx:e,cy:t,size:r,isHidden:o,"data-testid":i}){const a=vu("mobile_rotate"),s=Dn(),l=sr("zoom level",()=>s.zoomLevel,[s]),d=Math.max(14*(1/l),20/Math.max(1,l));return K.jsxs("g",{children:[K.jsx("circle",{"data-testid":i,pointerEvents:"all",className:vo("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":o}),cx:e,cy:t,r:d,...a}),K.jsx("circle",{className:vo("tl-mobile-rotate__fg",{"tl-hidden":o}),cx:e,cy:t,r:r/KMe})]})},Ws={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px",maxWidth:"auto"},dl={s:2,m:3.5,l:5,xl:10},Df={s:18,m:24,l:36,xl:44},mm={s:18,m:22,l:26,xl:32},Tf={s:18,m:20,l:24,xl:28},Eh={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"};function E$(n,e){let t=0;for(;n[e+t];)t+=n[e+t]+1;return t+1}function GMe(n){return new TextDecoder("ascii").decode(n.slice(0,3))==="GIF"}function XMe(n){const e=new Uint8Array(n);let t,r,o=0,i=0;if(!GMe(n))return!1;for(t=e[10]&128,r=e[10]&7,o+=6,o+=7,o+=t?3*Math.pow(2,r+1):0;i<2&&o<e.length;)switch(e[o]){case 44:i+=1,t=e[o+9]&128,r=e[o+9]&7,o+=10,o+=t?3*Math.pow(2,r+1):0,o+=E$(e,o+1)+1;break;case 33:o+=2,o+=E$(e,o);break;case 59:o=e.length;break;default:o=e.length;break}return i>1}function qMe(n,e){const t=n.w/e.w,r=n.h/e.h;return t<=1&&r<=1?n:t>r?{w:n.w/t,h:n.h/t}:{w:n.w/r,h:n.h/r}}async function JMe(n,e,t){return await new Promise(r=>{const o=new Image;o.onload=()=>{const i=document.createElement("canvas"),a=i.getContext("2d");if(!a)return;i.width=e*2,i.height=t*2,a.drawImage(o,0,0,i.width,i.height);const s=i.toDataURL();r(s)},o.crossOrigin="anonymous",o.src=n})}async function QMe(n){return await new Promise((e,t)=>{const r=new FileReader;r.onerror=()=>t(r.error),r.onload=()=>{e(r.result?XMe(r.result):!1)},r.readAsArrayBuffer(n)})}function eIe(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function tIe(n){const e=new URL(n).host.replace("www.","");for(const t of cm)if(AU(t.hostnames,e)){const r=t.fromEmbedUrl(n);if(r)return{definition:t,url:r,embedUrl:n}}}const nIe=n=>n.split("*").map(e=>eIe(e)).join(".+"),AU=(n,e)=>!!n.find(t=>{const r=new RegExp(nIe(t));return e.match(r)});function rIe(n){const e=new URL(n).host.replace("www.","");for(const t of cm)if(AU(t.hostnames,e)){const r=t.toEmbedUrl(n);if(r)return{definition:t,embedUrl:r,url:n}}}function LU(n){return rIe(n)??tIe(n)}function bh(n){try{return LU(n)}catch(e){console.error(e)}}const Sg="  ",xl=class xl{static insertTextFirefox(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}static insert(e,t){const r=e.ownerDocument,o=r.activeElement;o!==e&&e.focus(),r.execCommand("insertText",!1,t)||xl.insertTextFirefox(e,t),o===r.body?e.blur():o instanceof HTMLElement&&o!==e&&o.focus()}static set(e,t){e.select(),xl.insert(e,t)}static getSelection(e){const{selectionStart:t,selectionEnd:r}=e;return e.value.slice(t||void 0,r||void 0)}static wrapSelection(e,t,r){const{selectionStart:o,selectionEnd:i}=e,a=xl.getSelection(e);xl.insert(e,t+a+(r??t)),e.selectionStart=(o||0)+t.length,e.selectionEnd=(i||0)+t.length}static replace(e,t,r){let o=0;e.value.replace(t,(...i)=>{const a=o+i[i.length-2],s=i[0].length;e.selectionStart=a,e.selectionEnd=a+s;const l=typeof r=="string"?r:r(...i);return xl.insert(e,l),e.selectionStart=a,o+=l.length-s,l})}static findLineEnd(e,t){const r=e.lastIndexOf(`
`,t-1)+1;return e.charAt(r)!=="	"?t:r+1}static indent(e){var s;const{selectionStart:t,selectionEnd:r,value:o}=e,i=o.slice(t,r),a=(s=/\n/g.exec(i))==null?void 0:s.length;if(a&&a>0){const l=o.lastIndexOf(`
`,t-1)+1,d=e.value.slice(l,r-1),u=d.replace(/^|\n/g,`$&${Sg}`),p=u.length-d.length;e.setSelectionRange(l,r-1),xl.insert(e,u),e.setSelectionRange(t+1,r+p)}else xl.insert(e,Sg)}static unindent(e){const{selectionStart:t,selectionEnd:r,value:o}=e,i=o.lastIndexOf(`
`,t-1)+1,a=xl.findLineEnd(o,r),s=e.value.slice(i,a),l=s.replace(/(^|\n)(\t| {1,2})/g,"$1"),d=s.length-l.length;e.setSelectionRange(i,a),xl.insert(e,l);const u=/\t| {1,2}/.exec(o.slice(i,t)),p=u?u[0].length:0,f=t-p;e.setSelectionRange(t-p,Math.max(f,r-d))}static indentCE(e){var l;const t=window.getSelection(),r=e.innerText,o=a3(e)??0,i=a3(e)??0,a=r.slice(o,i),s=(l=/\n/g.exec(a))==null?void 0:l.length;if(s&&s>0){const d=r.lastIndexOf(`
`,o-1)+1,u=r.slice(d,i-1),f=u.replace(/^|\n/g,`$&${Sg}`).length-u.length;t&&t.setBaseAndExtent(e,o+1,e,i+f)}else{const d=window.getSelection();e.innerText=r.slice(0,o)+Sg+r.slice(o),d==null||d.setBaseAndExtent(e,o+1,e,o+2)}}static unindentCE(e){const t=window.getSelection(),r=e.innerText,o=a3(e)??0,i=a3(e)??0,a=r.lastIndexOf(`
`,o-1)+1,s=xl.findLineEnd(r,i),l=r.slice(a,s),d=l.replace(/(^|\n)(\t| {1,2})/g,"$1"),u=l.length-d.length;if(t){t.setBaseAndExtent(e,a,e,s);const p=/\t| {1,2}/.exec(r.slice(a,o)),f=p?p[0].length:0,h=o-f;t.setBaseAndExtent(e,o-f,e,Math.max(h,i-u))}}static normalizeText(e){return e.replace(xl.fixNewLines,`
`)}static normalizeTextForDom(e){return e.replace(xl.fixNewLines,`
`).split(`
`).map(t=>t||" ").join(`
`)}};J(xl,"fixNewLines",/\r?\n|\r/g);let v1=xl;function a3(n){if(typeof window.getSelection>"u")return;const e=window.getSelection();if(!e)return;let t=0;if(e.rangeCount!==0){const r=e.getRangeAt(0),o=r.cloneRange();o.selectNodeContents(n),o.setEnd(r.endContainer,r.endOffset),t=o.toString().length}return t}const oIe=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function iIe(n){return oIe.test(n)}function aIe(n){return n.replace(/\t/g,Sg)}function sIe(n){const e=n.split(`
`);for(;e[0].trim().length===0;)e.shift();let t=1/0;for(const r of e)if(r.trim().length>0){const o=r.length-r.trimStart().length;t=Math.min(t,o)}return e.map(r=>r.slice(t)).join(`
`)}function lIe(n){return n.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function cIe(n){return lIe(sIe(aIe(n)))}const Av=(n,e)=>n.length<=e?n:n.substring(0,e-3)+"...";function dIe(n,{maxImageDimension:e,maxAssetSize:t,acceptedImageMimeTypes:r,acceptedVideoMimeTypes:o}){n.registerExternalAssetHandler("file",async({file:i})=>await new Promise((a,s)=>{!r.includes(i.type)&&!o.includes(i.type)&&(console.warn(`File type not allowed: ${i.type}`),s()),i.size>t&&(console.warn(`File size too big: ${(i.size/1024).toFixed()}kb > ${(t/1024).toFixed()}kb`),s());const l=new FileReader;l.onerror=()=>s(l.error),l.onload=async()=>{let d=l.result;i.type==="video/quicktime"&&d.includes("video/quicktime")&&(d=d.replace("video/quicktime","video/mp4"));const u=r.includes(i.type);let p,f;if(u?(p=await pA.getImageSizeFromSrc(d),f=i.type==="image/gif"&&await QMe(i)):(f=!0,p=await pA.getVideoSizeFromSrc(d)),isFinite(e)){const g=qMe(p,{w:e,h:e});p!==g&&(i.type==="image/jpeg"||i.type==="image/png")&&(d=await JMe(d,p.w,p.h)),p=g}const h=i1.createId(j3(d)),c=i1.create({id:h,type:u?"image":"video",typeName:"asset",props:{name:i.name,src:d,w:p.w,h:p.h,mimeType:i.type,isAnimated:f}});a(c)},l.readAsDataURL(i)})),n.registerExternalAssetHandler("url",async({url:i})=>{var s,l,d;let a;try{const p=await(await fetch(i,{method:"GET",mode:"no-cors"})).text(),f=new DOMParser().parseFromString(p,"text/html");a={image:((s=f.head.querySelector('meta[property="og:image"]'))==null?void 0:s.getAttribute("content"))??"",title:((l=f.head.querySelector('meta[property="og:title"]'))==null?void 0:l.getAttribute("content"))??Av(i,32),description:((d=f.head.querySelector('meta[property="og:description"]'))==null?void 0:d.getAttribute("content"))??""}}catch(u){console.error(u),a={image:"",title:Av(i,32),description:""}}return{id:i1.createId(j3(i)),typeName:"asset",type:"bookmark",props:{src:i,description:a.description,image:a.image,title:a.title},meta:{}}}),n.registerExternalContentHandler("svg-text",async({point:i,text:a})=>{const s=i??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.viewportPageCenter),l=new DOMParser().parseFromString(a,"image/svg+xml").querySelector("svg");if(!l)throw new Error("No <svg/> element present");let d=parseFloat(l.getAttribute("width")||"0"),u=parseFloat(l.getAttribute("height")||"0");if(!(d&&u)){document.body.appendChild(l);const f=l.getBoundingClientRect();document.body.removeChild(l),d=f.width,u=f.height}const p=await n.getAssetForExternalContent({type:"file",file:new File([a],"asset.svg",{type:"image/svg+xml"})});if(!p)throw Error("Could not create an asset");a9(n,[p],s)}),n.registerExternalContentHandler("embed",({point:i,url:a,embed:s})=>{const l=i??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.viewportPageCenter),{width:d,height:u}=s,p=da(),f={id:p,type:"embed",x:l.x-(d||450)/2,y:l.y-(u||450)/2,props:{w:d,h:u,url:a}};n.createShapes([f]).select(p)}),n.registerExternalContentHandler("files",async({point:i,files:a})=>{const s=i??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.viewportPageCenter),l=new Le(s.x,s.y),d=[];await Promise.all(a.map(async(u,p)=>{if(u.size>t)return console.warn(`File size too big: ${(u.size/1024).toFixed()}kb > ${(t/1024).toFixed()}kb`),null;if(!u.type)throw new Error("No mime type");if(!r.concat(o).includes(u.type))return console.warn(`${u.name} not loaded - Extension not allowed.`),null;try{const f=await n.getAssetForExternalContent({type:"file",file:u});if(!f)throw Error("Could not create an asset");d[p]=f}catch(f){return console.error(f),null}})),a9(n,Lo(d),l)}),n.registerExternalContentHandler("text",async({point:i,text:a})=>{const s=i??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.viewportPageCenter),l=n.getShapeUtil("text").getDefaultProps(),d=cIe(a);let u,p,f,h="middle";const c=d.split(`
`).length>1,g=iIe(d);c&&(h=c?g?"end":"start":"middle");const m=n.textMeasure.measureText(d,{...Ws,fontFamily:Eh[l.font],fontSize:Df[l.size],width:"fit-content"}),b=Math.min(c?n.viewportPageBounds.width*.9:920,Math.max(200,n.viewportPageBounds.width*.9));if(m.w>b){const v=n.textMeasure.measureText(d,{...Ws,fontFamily:Eh[l.font],fontSize:Df[l.size],width:b+"px"});u=v.w,p=v.h,f=!1,h=g?"end":"start"}else u=m.w,p=m.h,f=!0;s.y-p/2<n.viewportPageBounds.minY+40&&(s.y=n.viewportPageBounds.minY+40+p/2),n.createShapes([{id:da(),type:"text",x:s.x-u/2,y:s.y-p/2,props:{text:d,align:h,autoSize:f,w:u}}])}),n.registerExternalContentHandler("url",async({point:i,url:a})=>{const s=bh(a);if(s)return n.putExternalContent({type:"embed",url:s.url,point:i,embed:s.definition});const l=i??(n.inputs.shiftKey?n.inputs.currentPagePoint:n.viewportPageCenter),d=i1.createId(j3(a));let u=n.getAsset(d),p=!1;if(!u){p=!0;const f=await n.getAssetForExternalContent({type:"url",url:a});if(!f)throw Error("Could not create an asset");u=f}n.batch(()=>{p&&n.createAssets([u]),a9(n,[u],l)})})}async function a9(n,e,t){if(!e.length)return;const r=Le.From(t),o=[];for(const i of e)switch(i.type){case"bookmark":{o.push({id:da(),type:"bookmark",x:r.x-150,y:r.y-160,opacity:1,props:{assetId:i.id,url:i.props.src}}),r.x+=300;break}case"image":{o.push({id:da(),type:"image",x:r.x-i.props.w/2,y:r.y-i.props.h/2,opacity:1,props:{assetId:i.id,w:i.props.w,h:i.props.h}}),r.x+=i.props.w;break}case"video":o.push({id:da(),type:"video",x:r.x-i.props.w/2,y:r.y-i.props.h/2,opacity:1,props:{assetId:i.id,w:i.props.w,h:i.props.h}}),r.x+=i.props.w}n.batch(()=>{const i=e.filter(l=>!n.getAsset(l.id));i.length&&n.createAssets(i),n.createShapes(o).select(...o.map(l=>l.id));const{viewportPageBounds:a}=n;let{selectionPageBounds:s}=n;if(s){const l=s.center.sub(t);n.updateShapes(n.selectedShapes.map(d=>{const u=n.getShapeParentTransform(d).decompose().rotation,p=Le.Rot(l,-u);return{id:d.id,type:d.type,x:d.x-p.x,y:d.y-p.y}}))}s=n.selectionPageBounds,s&&!a.contains(s)&&n.zoomToSelection()})}var E9;let uIe=(E9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("pointing",t)});J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")});J(this,"onKeyUp",t=>{if(t.key==="Enter"){const{onlySelectedShape:r}=this.editor;r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),this.editor.root.current.value.transition("editing_shape",{...t,target:"shape",shape:r}))}})}},J(E9,"id","idle"),E9);var P9;let hIe=(P9=class extends no{constructor(){super(...arguments);J(this,"shape");J(this,"markId","");J(this,"onEnter",()=>{this.didTimeout=!1;const t=this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{filter:r=>!r.isLocked&&this.editor.getShapeUtil(r).canBind(r),margin:0,hitInside:!0});t?this.editor.setHintingShapes([t.id]):this.createArrowShape(),this.startPreciseTimeout()});J(this,"onExit",()=>{this.shape=void 0,this.editor.setHintingShapes([]),this.clearPreciseTimeout()});J(this,"onPointerMove",()=>{if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:this.editor.getShapeHandles(this.shape).find(t=>t.id==="end"),isCreating:!0,onInteractionEnd:"arrow"})}});J(this,"onPointerUp",()=>{this.cancel()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()});J(this,"preciseTimeout",-1);J(this,"didTimeout",!1)}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.editor.setHintingShapes([]),this.parent.transition("idle",{})}createArrowShape(){var d,u;const{originPagePoint:t}=this.editor.inputs,r=da();this.markId=`creating:${r}`,this.editor.mark(this.markId),this.editor.createShapes([{id:r,type:"arrow",x:t.x,y:t.y}]);const o=this.editor.getShape(r);if(!o)throw Error("expected shape");const i=this.editor.getShapeHandles(o);if(!i)throw Error("expected handles for arrow");const a=this.editor.getShapeUtil("arrow"),s=i.find(p=>p.id==="start"),l=(d=a.onHandleChange)==null?void 0:d.call(a,o,{handle:{...s,x:0,y:0},isPrecise:!0});if(l){const p=(u=l.props)==null?void 0:u.start;(p==null?void 0:p.type)==="binding"&&this.editor.setHintingShapes([p.boundShapeId]),this.editor.updateShapes([l],{squashing:!0})}this.shape=this.editor.getShape(r),this.editor.select(r)}updateArrowShapeEndHandle(){var o,i,a;const t=this.shape;if(!t)throw Error("expected shape");const r=this.editor.getShapeHandles(t);if(!r)throw Error("expected handles for arrow");{const s=this.editor.getShapeUtil("arrow"),l=this.editor.getPointInShapeSpace(t,this.editor.inputs.currentPagePoint),d=r.find(p=>p.id==="end"),u=(o=s.onHandleChange)==null?void 0:o.call(s,t,{handle:{...d,x:l.x,y:l.y},isPrecise:!1});if(u){const p=(i=u.props)==null?void 0:i.end;(p==null?void 0:p.type)==="binding"&&this.editor.setHintingShapes([p.boundShapeId]),this.editor.updateShapes([u],{squashing:!0})}}{const s=this.editor.getShapeUtil("arrow"),l=r.find(u=>u.id==="start"),d=(a=s.onHandleChange)==null?void 0:a.call(s,t,{handle:{...l,x:0,y:0},isPrecise:this.didTimeout});d&&this.editor.updateShapes([d],{squashing:!0})}this.shape=this.editor.getShape(t.id)}startPreciseTimeout(){this.preciseTimeout=window.setTimeout(()=>{this.isActive&&(this.didTimeout=!0)},320)}clearPreciseTimeout(){clearTimeout(this.preciseTimeout)}},J(P9,"id","pointing"),P9);class K3 extends no{constructor(){super(...arguments);J(this,"shapeType","arrow")}}J(K3,"id","arrow"),J(K3,"initial","idle"),J(K3,"children",()=>[uIe,hIe]);class OE extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"initialShape");J(this,"shapeType",this.parent.id==="highlight"?"highlight":"draw");J(this,"util",this.editor.getShapeUtil(this.shapeType));J(this,"isPen",!1);J(this,"segmentMode","free");J(this,"didJustShiftClickToExtendPreviousShapeLine",!1);J(this,"pagePointWhereCurrentSegmentChanged",{});J(this,"pagePointWhereNextSegmentChanged",null);J(this,"lastRecordedPoint",{});J(this,"mergeNextPoint",!1);J(this,"currentLineLength",0);J(this,"canDraw",!1);J(this,"markId",null);J(this,"onEnter",t=>{this.markId=null,this.info=t,this.canDraw=!this.editor.isMenuOpen,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.canDraw&&this.startShape()});J(this,"onPointerMove",()=>{const{editor:{inputs:t}}=this;this.isPen!==t.isPen&&this.cancel(),!this.canDraw&&t.isDragging&&(this.startShape(),this.canDraw=!0),this.canDraw&&(t.isPen?Le.Dist(t.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.zoomLevel?(this.lastRecordedPoint=t.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateShapes())});J(this,"onKeyDown",t=>{if(t.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateShapes()});J(this,"onKeyUp",t=>{if(t.key==="Shift")switch(this.editor.snaps.clear(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateShapes()});J(this,"onExit",()=>{this.editor.snaps.clear(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())})}canClose(){return this.shapeType!=="highlight"}getIsClosed(t,r){if(!this.canClose())return!1;const o=dl[r],i=t[0].points[0],a=t[t.length-1],s=a.points[a.points.length-1];return i!==s&&this.currentLineLength>o*4&&Le.Dist(i,s)<o*2}startShape(){const{inputs:{originPagePoint:t,isPen:r}}=this.editor;this.markId="draw start "+ba(),this.editor.mark(this.markId),this.isPen=r;const o=this.isPen?this.info.point.z*1.25:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){const a=this.editor.getShape(this.initialShape.id);if(a&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const s=zl(a.props.segments);if(!s)throw Error("Expected a previous segment!");const l=zl(s.points);if(!l)throw Error("Expected a previous point!");const{x:d,y:u}=this.editor.getPointInShapeSpace(a,t).toFixed(),p=this.isPen?this.info.point.z*1.25:.5,f={type:this.segmentMode,points:[{x:l.x,y:l.y,z:+p.toFixed(2)},{x:d,y:u,z:+p.toFixed(2)}]},h=Yr.applyToPoint(this.editor.getShapePageTransform(a.id),l);this.pagePointWhereCurrentSegmentChanged=h,this.pagePointWhereNextSegmentChanged=null;const c=[...a.props.segments,f];this.currentLineLength=this.getLineLength(c);const g={id:a.id,type:this.shapeType,props:{segments:c}};this.canClose()&&(g.props.isClosed=this.getIsClosed(c,a.props.size)),this.editor.updateShapes([g]);return}}this.pagePointWhereCurrentSegmentChanged=t.clone();const i=da();this.editor.createShapes([{id:i,type:this.shapeType,x:t.x,y:t.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+o.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(i)}updateShapes(){const{inputs:t}=this.editor,{initialShape:r}=this;if(!r)return;const{id:o,props:{size:i}}=r,a=this.editor.getShape(o);if(!a)return;const{segments:s}=a.props,{x:l,y:d,z:u}=this.editor.getPointInShapeSpace(a,t.currentPagePoint).toFixed(),p={x:l,y:d,z:this.isPen?+(u*1.25).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:f}=this;if(f===null)throw Error("We should have a point where the segment changed");if(Le.Dist(f,t.currentPagePoint)>yb){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const c=zl(s);if(!c)throw Error("Expected a previous segment!");const g=zl(c.points);if(!g)throw Error("Expected a previous last point!");let m;const b=this.editor.getPointInShapeSpace(a,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(c.type==="straight"){this.currentLineLength+=Le.Dist(g,b),m={type:"straight",points:[{...g},b]};const w=this.editor.getShapePageTransform(a);this.pagePointWhereCurrentSegmentChanged=Yr.applyToPoint(w,g)}else m={type:"straight",points:[b,p]};const v={id:o,type:this.shapeType,props:{segments:[...s,m]}};this.canClose()&&(v.props.isClosed=this.getIsClosed(s,i)),this.editor.updateShapes([v],{squashing:!0})}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:f}=this;if(f===null)throw Error("We should have a point where the segment changed");if(Le.Dist(f,t.currentPagePoint)>yb){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const c=s.slice(),g=c[c.length-1],m=zl(g.points);if(!m)throw Error("No previous point!");const b={type:"free",points:[...Le.PointsBetween(m,p,6).map(_=>_.toFixed().toJson())]},v=[...c,b];this.currentLineLength=this.getLineLength(v);const w={id:o,type:this.shapeType,props:{segments:v}};this.canClose()&&(w.props.isClosed=this.getIsClosed(v,i)),this.editor.updateShapes([w],{squashing:!0})}break}case"straight":{const f=s.slice(),h=f[f.length-1],{pagePointWhereCurrentSegmentChanged:c}=this,{currentPagePoint:g,ctrlKey:m}=this.editor.inputs;if(!c)throw Error("We should have a point where the segment changed");let b,v=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(v=!m,this.didJustShiftClickToExtendPreviousShapeLine=!1):v=!m;let w=this.editor.getPointInShapeSpace(a,g).toFixed().toJson(),_=!1,k;if((this.editor.user.isSnapMode?!m:m)&&f.length>2){let C,I=8/this.editor.zoomLevel;for(let A=0,T=s.length-2;A<T;A++){const L=s[A];if(!L)break;if(L.type==="free")continue;const j=L.points[0],$=zl(L.points);if(!(j&&$))continue;const ee=Le.NearestPointOnLineSegment(j,$,w),Q=Le.Dist(ee,w);if(Q<I){C=ee.toFixed().toJson(),I=Q,k=L;break}}C&&(_=!0,w=C)}if(_&&k){const C=this.editor.getShapePageTransform(a),I=k.points[0],A=zl(k.points);if(!A)throw Error("Expected a last point!");const T=Yr.applyToPoint(C,I),L=Yr.applyToPoint(C,A),j=Yr.applyToPoint(C,w);this.editor.snaps.setLines([{id:ba(),type:"points",points:[T,j,L]}])}else{if(this.editor.snaps.clear(),v){const C=Le.Angle(c,g),A=I4(C,24)-C;b=Le.RotWith(g,c,A)}else b=g;w=this.editor.getPointInShapeSpace(a,b).toFixed().toJson()}this.currentLineLength+=Le.Dist(h.points[0],w),f[f.length-1]={...h,type:"straight",points:[h.points[0],w]};const S={id:o,type:this.shapeType,props:{segments:f}};this.canClose()&&(S.props.isClosed=this.getIsClosed(s,i)),this.editor.updateShapes([S],{squashing:!0});break}case"free":{const f=s.slice(),h=f[f.length-1],c=[...h.points];if(c.length&&this.mergeNextPoint){const{z:m}=c[c.length-1];c[c.length-1]={x:p.x,y:p.y,z:m?Math.max(m,p.z):p.z}}else this.currentLineLength+=Le.Dist(c[c.length-1],p),c.push(p);f[f.length-1]={...h,points:c},this.currentLineLength=this.getLineLength(f);const g={id:o,type:this.shapeType,props:{segments:f}};if(this.canClose()&&(g.props.isClosed=this.getIsClosed(f,i)),this.editor.updateShapes([g],{squashing:!0}),c.length>500){this.editor.updateShapes([{id:o,type:this.shapeType,props:{isComplete:!0}}]);const{currentPagePoint:m}=this.editor.inputs,b=da();this.editor.createShapes([{id:b,type:this.shapeType,x:T4(m.x),y:T4(m.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(u*1.25).toFixed():.5}]}]}}]),this.initialShape=structuredClone(this.editor.getShape(b)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(t){let r=0;for(const o of t)for(let i=0;i<o.points.length-1;i++){const a=o.points[i],s=o.points[i+1];r+=Le.Sub(s,a).len2()}return Math.sqrt(r)}complete(){if(!this.canDraw){this.cancel();return}const{initialShape:t}=this;t&&(this.editor.updateShapes([{id:t.id,type:t.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}cancel(){this.parent.transition("idle",this.info)}}J(OE,"id","drawing");var M9;let $U=(M9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("drawing",t)});J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(M9,"id","idle"),M9);class Y3 extends no{constructor(){super(...arguments);J(this,"shapeType","draw");J(this,"onExit",()=>{const t=this.children.drawing;t.initialShape=void 0})}}J(Y3,"id","draw"),J(Y3,"initial","idle"),J(Y3,"children",()=>[$U,OE]);class TS extends H3{constructor(){super(...arguments);J(this,"shapeType","frame")}}J(TS,"id","frame"),J(TS,"initial","idle");var I9;let fIe=(I9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("pointing",t)});J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});J(this,"onKeyUp",t=>{if(t.key==="Enter"){const{onlySelectedShape:r}=this.editor;r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),this.editor.root.current.value.transition("editing_shape",{...t,target:"shape",shape:r}))}});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(I9,"id","idle"),I9);var T9;let pIe=(T9=class extends no{constructor(){super(...arguments);J(this,"markId","");J(this,"onPointerUp",()=>{this.complete()});J(this,"onPointerMove",t=>{if(this.editor.inputs.isDragging){const{originPagePoint:r}=this.editor.inputs,o=da();this.markId=`creating:${o}`,this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:"geo",x:r.x,y:r.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(Pu)}}]).select(o).setCurrentTool("select.resizing",{...t,target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.cancel()})}complete(){const{originPagePoint:t}=this.editor.inputs,r=da();this.markId=`creating:${r}`,this.editor.mark(this.markId),this.editor.createShapes([{id:r,type:"geo",x:t.x,y:t.y,props:{geo:this.editor.getStyleForNextShape(Pu),w:1,h:1}}]);const o=this.editor.getShape(r);if(!o)return;const i=o.props.geo==="star"?j5e(5,200,200):o.props.geo==="cloud"?new uo(0,0,300,180):new uo(0,0,200,200),a=i.center,s=this.editor.getShapeParentTransform(o);s&&a.rot(-s.rotation()),this.editor.select(r),this.editor.updateShapes([{id:o.id,type:"geo",x:o.x-a.x,y:o.y-a.y,props:{geo:this.editor.getStyleForNextShape(Pu),w:i.width,h:i.height}}]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle",{})}},J(T9,"id","pointing"),T9);class G3 extends no{constructor(){super(...arguments);J(this,"shapeType","geo")}}J(G3,"id","geo"),J(G3,"initial","idle"),J(G3,"children",()=>[fIe,pIe]);class X3 extends no{constructor(){super(...arguments);J(this,"shapeType","highlight");J(this,"onExit",()=>{const t=this.children.drawing;t.initialShape=void 0})}}J(X3,"id","highlight"),J(X3,"initial","idle"),J(X3,"children",()=>[$U,OE]);var O9;let gIe=(O9=class extends no{constructor(){super(...arguments);J(this,"shapeId","");J(this,"onEnter",t=>{this.shapeId=t.shapeId,this.editor.setCursor({type:"cross",rotation:0})});J(this,"onPointerDown",()=>{this.parent.transition("pointing",{shapeId:this.shapeId})});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(O9,"id","idle"),O9);var A9;let mIe=(A9=class extends no{constructor(){super(...arguments);J(this,"shape",{});J(this,"markId");J(this,"onEnter",t=>{const{inputs:r}=this.editor,{currentPagePoint:o}=r;this.markId=void 0;const i=t.shapeId&&this.editor.getShape(t.shapeId);if(i&&r.shiftKey){this.markId=`creating:${i.id}`,this.editor.mark(this.markId),this.shape=i;const a=this.editor.getShapeHandles(this.shape);if(!a)return;const s=a.filter(c=>c.type==="vertex").sort(cl),l=s[s.length-1],d=Yr.applyToPoint(this.editor.getShapeParentTransform(this.shape),new Le(this.shape.x,this.shape.y));let u,p,f;s.length===2&&s[1].x===1&&s[1].y===1?(u=s[1].index,p=s[1].id,f={...s[1],x:o.x-d.x,y:o.y-d.y}):(u=gh(l.index),p="handle:"+u,f={x:o.x-d.x,y:o.y-d.y,index:u,canBind:!1,type:"vertex",id:p});const h=Ff(this.shape.props.handles);h[f.id]=f,this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{handles:h}}])}else{const a=da();this.markId=`creating:${a}`,this.editor.mark(this.markId),this.editor.createShapes([{id:a,type:"line",x:o.x,y:o.y}]),this.editor.select(a),this.shape=this.editor.getShape(a)}});J(this,"onPointerMove",()=>{if(this.shape&&this.editor.inputs.isDragging){const t=this.editor.getShapeHandles(this.shape);if(!t)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,handle:zl(t),onInteractionEnd:"line"})}});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.parent.transition("idle",{}),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clear()})}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}},J(A9,"id","pointing"),A9);class q3 extends no{constructor(){super(...arguments);J(this,"shapeType","line")}}J(q3,"id","line"),J(q3,"initial","idle"),J(q3,"children",()=>[gIe,mIe]);var L9;let vIe=(L9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("pointing",t)});J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(L9,"id","idle"),L9);var $9;let bIe=($9=class extends no{constructor(){super(...arguments);J(this,"dragged",!1);J(this,"info",{});J(this,"wasFocusedOnEnter",!1);J(this,"markId","");J(this,"shape",{});J(this,"onEnter",()=>{this.wasFocusedOnEnter=!this.editor.isMenuOpen,this.wasFocusedOnEnter&&(this.shape=this.createShape())});J(this,"onPointerMove",t=>{this.editor.inputs.isDragging&&(this.wasFocusedOnEnter||(this.shape=this.createShape()),this.editor.setCurrentTool("select.translating",{...t,target:"shape",shape:this.shape,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"}))});J(this,"onPointerUp",()=>{this.complete()});J(this,"onInterrupt",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()})}complete(){this.wasFocusedOnEnter&&(this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape})))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}createShape(){const{inputs:{originPagePoint:t}}=this.editor,r=da();this.markId=`creating:${r}`,this.editor.mark(this.markId),this.editor.createShapes([{id:r,type:"note",x:t.x,y:t.y}]).select(r);const o=this.editor.getShape(r),i=this.editor.getShapeGeometry(o).bounds;return this.editor.updateShapes([{id:r,type:"note",x:o.x-i.width/2,y:o.y-i.height/2}]),this.editor.getShape(r)}},J($9,"id","pointing"),$9);class J3 extends no{constructor(){super(...arguments);J(this,"shapeType","note")}}J(J3,"id","note"),J(J3,"initial","idle"),J(J3,"children",()=>[vIe,bIe]);function Ib(n){const e=n.getShapeAtPoint(n.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:Jd/n.zoomLevel});if(!e)return n.setHoveredShape(null);let t;const r=n.getOutermostSelectableShape(e);return r===e||r.id===n.focusedGroupId||n.selectedShapeIds.includes(r.id)?t=e:t=r,n.setHoveredShape(t.id)}var j9;let yIe=(j9=class extends no{constructor(){super(...arguments);J(this,"onPointerMove",t=>{switch(t.target){case"shape":case"canvas":Ib(this.editor)}});J(this,"onPointerDown",t=>{const{hoveredShape:r}=this.editor,o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint);if(o&&this.editor.isShapeOfType(o,"text")){requestAnimationFrame(()=>{this.editor.setSelectedShapes([o.id]),this.editor.setEditingShape(o.id),this.editor.setCurrentTool("select.editing_shape",{...t,target:"shape",shape:o})});return}this.parent.transition("pointing",t)});J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})});J(this,"onKeyDown",t=>{if(t.key==="Enter"){const{onlySelectedShape:r}=this.editor;r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),this.editor.root.current.value.transition("editing_shape",{...t,target:"shape",shape:r}))}});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(j9,"id","idle"),j9);var R9;let xIe=(R9=class extends no{constructor(){super(...arguments);J(this,"shape");J(this,"markId","");J(this,"onExit",()=>{this.editor.setHintingShapes([])});J(this,"onPointerMove",t=>{if(this.editor.inputs.isDragging){const{inputs:{originPagePoint:r}}=this.editor,o=da();if(this.markId=`creating:${o}`,this.editor.mark(this.markId),this.editor.createShapes([{id:o,type:"text",x:r.x,y:r.y,props:{text:"",autoSize:!1,w:20}}]),this.editor.select(o),this.shape=this.editor.getShape(o),!this.shape)return;this.editor.setCurrentTool("select.resizing",{...t,target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"})}});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.cancel()});J(this,"onCancel",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}complete(){var i;this.editor.mark("creating text shape");const t=da(),{x:r,y:o}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:t,type:"text",x:r,y:o,props:{text:"",autoSize:!0}}]).select(t),this.editor.setEditingShape(t),this.editor.setCurrentTool("select"),(i=this.editor.root.current.value)==null||i.transition("editing_shape",{})}cancel(){this.parent.transition("idle",{}),this.editor.bailToMark(this.markId)}},J(R9,"id","pointing"),R9);class Q3 extends no{constructor(){super(...arguments);J(this,"shapeType","text")}}J(Q3,"id","text"),J(Q3,"initial","idle"),J(Q3,"children",()=>[yIe,xIe]);const wIe=[Q3,Y3,G3,J3,q3,TS,K3,X3];function Ps(){return Xl({isDarkMode:iw()})}const Qa=je.memo(function({theme:e,d:t,color:r,fill:o}){switch(o){case"none":return null;case"solid":return K.jsx("path",{fill:e[r].semi,d:t});case"semi":return K.jsx("path",{fill:e.solid,d:t});case"pattern":return K.jsx(CIe,{theme:e,color:r,fill:o,d:t})}}),CIe=function({d:e,color:t,theme:r}){const o=Dn(),i=sr("zoomLevel",()=>o.zoomLevel,[o]),a=Math.ceil(i),s=o.zoomLevel<=.18;return K.jsxs(K.Fragment,{children:[K.jsx("path",{fill:r[t].pattern,d:e}),K.jsx("path",{fill:s?r[t].semi:`url(#${A4[`${a}_${r.id}`]})`,d:e})]})};function Lc({d:n,color:e,fill:t,theme:r}){if(t==="none")return;if(t==="pattern"){const i=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",n),a.setAttribute("fill",r[e].pattern);const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",n),s.setAttribute("fill","url(#hash_pattern)"),i.appendChild(a),i.appendChild(s),i}const o=document.createElementNS("http://www.w3.org/2000/svg","path");switch(o.setAttribute("d",n),t){case"semi":{o.setAttribute("fill",r.solid);break}case"solid":{o.setAttribute("fill",r[e].semi);break}}return o}function eu(n,e){if(e){const t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.appendChild(e),t.appendChild(n),t}else return n}function SIe(n){return n.replace(/\s/g,"")}function _w(n,e,t){const{padding:r=0}=t,o=document.createElementNS("http://www.w3.org/2000/svg","text");if(o.setAttribute("font-size",t.fontSize+"px"),o.setAttribute("font-family",t.fontFamily),o.setAttribute("font-style",t.fontStyle),o.setAttribute("font-weight",t.fontWeight),o.setAttribute("line-height",t.lineHeight*t.fontSize+"px"),o.setAttribute("dominant-baseline","mathematical"),o.setAttribute("alignment-baseline","mathematical"),e.length===0)return o;const i=uo.From(e[0].box);for(const{box:d}of e)i.union(d);const a=r+(t.offsetX??0),s=(t.offsetY??0)+t.fontSize/2+(t.verticalTextAlign==="start"?r:t.verticalTextAlign==="end"?t.height-r-i.height:(Math.ceil(t.height)-i.height)/2);let l=null;for(const{text:d,box:u}of e){if(l!==null&&u.y>l){const c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttribute("alignment-baseline","mathematical"),c.setAttribute("x",a+"px"),c.setAttribute("y",u.y+s+"px"),c.textContent=`
`,o.appendChild(c)}const f=document.createElementNS("http://www.w3.org/2000/svg","tspan");f.setAttribute("alignment-baseline","mathematical"),f.setAttribute("x",u.x+a+"px"),f.setAttribute("y",u.y+s+"px");const h=SIe(d);f.textContent=h,o.appendChild(f),l=u.y}return t.stroke&&t.strokeWidth&&(o.setAttribute("stroke",t.stroke),o.setAttribute("stroke-width",t.strokeWidth+"px")),t.fill&&o.setAttribute("fill",t.fill),o}function Ew(n){return{key:`${ju.id}:${n}`,getElement:async()=>{const e=kIe(n);if(!e)return null;const t=e.$$_url,r=e.$$_fontface;if(!t||!r)return null;const o=await(await fetch(t)).blob(),i=await new Promise((l,d)=>{const u=new FileReader;u.onload=()=>l(u.result),u.onerror=d,u.readAsDataURL(o)}),a=r.replace(t,i),s=document.createElementNS("http://www.w3.org/2000/svg","style");return s.textContent=a,s}}}function kIe(n){const e=uy[n];for(const t of document.fonts)if(e.includes(t.family))return t;return null}function AE(n,e){return{key:`${ju.id}:${n}`,getElement:async()=>{if(n!=="pattern")return null;const t=8/12,r=document.createElement("div");return r.innerHTML=`
				<svg>
					<defs>
						<mask id="hash_pattern_mask">
							<rect x="0" y="0" width="8" height="8" fill="white" />
							<g
								strokeLinecap="round"
								stroke="black"
							>
								<line x1="${t*1}" y1="${t*3}" x2="${t*3}" y2="${t*1}" />
								<line x1="${t*5}" y1="${t*7}" x2="${t*7}" y2="${t*5}" />
								<line x1="${t*9}" y1="${t*11}" x2="${t*11}" y2="${t*9}" />
							</g>
						</mask>
						<pattern
							id="hash_pattern"
							width="8"
							height="8"
							patternUnits="userSpaceOnUse"
						>
							<rect x="0" y="0" width="8" height="8" fill="${e.solid}" mask="url(#hash_pattern_mask)" />
						</pattern>
					</defs>
				</svg>
			`,Array.from(r.querySelectorAll("defs > *"))}}}function LE(){return{key:`${ju.id}:pattern`,component:PIe}}const xv=8,P$=(n,e,t)=>new Promise((r,o)=>{const i=xv*e*n,a=document.createElement("canvas");a.width=i,a.height=i;const s=a.getContext("2d");if(!s)return;s.fillStyle=t?"#212529":"#f8f9fa",s.fillRect(0,0,i,i),s.globalCompositeOperation="destination-out",s.lineCap="round",s.lineWidth=1.25*e*n;const l=8/12,d=u=>u*e*n;s.beginPath(),s.moveTo(d(l*1),d(l*3)),s.lineTo(d(l*3),d(l*1)),s.moveTo(d(l*5),d(l*7)),s.lineTo(d(l*7),d(l*5)),s.moveTo(d(l*9),d(l*11)),s.lineTo(d(l*11),d(l*9)),s.stroke(),a.toBlob(u=>{!u||es.throwToBlob.value?o():r(u)})}),M$=(n,e)=>{const t=document.createElement("canvas");t.width=n[0],t.height=n[1];const r=t.getContext("2d");return r?(e(r),t.toDataURL()):""},_Ie=()=>{const n=[];for(let e=1;e<=Math.ceil(Of);e++){const t=M$([1,1],o=>{o.fillStyle=S4.lightMode.black.semi,o.fillRect(0,0,1,1)}),r=M$([1,1],o=>{o.fillStyle=S4.darkMode.black.semi,o.fillRect(0,0,1,1)});n.push({zoom:e,url:t,darkMode:!1}),n.push({zoom:e,url:r,darkMode:!0})}return n};function EIe(){const e=Dn().instanceState.devicePixelRatio,[t,r]=ne.useState(!1),o=ne.useMemo(()=>_Ie(),[]),[i,a]=ne.useState(o);return ne.useEffect(()=>{const l=[];for(let u=1;u<=Math.ceil(Of);u++)l.push(P$(e,u,!1).then(p=>({zoom:u,url:URL.createObjectURL(p),darkMode:!1}))),l.push(P$(e,u,!0).then(p=>({zoom:u,url:URL.createObjectURL(p),darkMode:!0})));let d=!1;return Promise.all(l).then(u=>{d||(a(u),r(!0))}),()=>{d=!0,r(!1)}},[e]),{defs:K.jsx(K.Fragment,{children:i.map(l=>{const d=l.zoom+(l.darkMode?"_dark":"_light");return K.jsx("pattern",{id:A4[d],width:xv,height:xv,patternUnits:"userSpaceOnUse",children:K.jsx("image",{href:l.url,width:xv,height:xv})},d)})}),isReady:t}}function PIe(){const n=Dn(),e=ne.useRef(null),{defs:t,isReady:r}=EIe();return ne.useEffect(()=>{if(r&&n.environment.isSafari){const o=jU(e.current);o&&requestAnimationFrame(()=>{o.style.display="none",requestAnimationFrame(()=>{o.style.display=""})})}},[n,r]),K.jsx("g",{ref:e,children:t})}function jU(n){return n.classList.contains("tl-html-layer")?n:n.parentElement?jU(n.parentElement):null}function fl(n,e,t={}){const{closed:r=!1,snap:o=1,start:i="outset",end:a="outset",lengthRatio:s=2,style:l="dashed"}=t;let d=0,u=0,p=1,f=0,h=0;switch(l){case"dashed":{p=1,d=Math.min(e*s,n/4);break}case"dotted":{p=100,d=e/p;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(i==="outset"?(n+=d/2,h+=d/2):i==="skip"&&(n-=d,h-=d),a==="outset"?n+=d/2:a==="skip"&&(n-=d)),u=Math.floor(n/d/(2*p)),u-=u%o,u<3&&l==="dashed"?n/e<5?(d=n,u=1,f=0):(d=n*.333,f=n*.333):(u=Math.max(u,3),d=n/u/(2*p),r?(h=d/2,f=(n-u*d)/u):f=(n-u*d)/Math.max(1,u-1)),{strokeDasharray:[d,f].join(" "),strokeDashoffset:h.toString()}}function $E(n,e,t){const r=Dn(),o=ne.useRef(null),i=ne.useRef(!1),a=ne.useRef(),s=sr("isEditing",()=>r.editingShapeId===n,[r,n]),l=sr("is editing same shape type",()=>{const{editingShape:m}=r;return m&&m.type===e},[e,n]);ne.useEffect(()=>{const m=o.current;m&&s&&document.activeElement!==m&&m.focus()},[s]);const d=ne.useCallback(()=>{const m=i.current;i.current=!1,requestAnimationFrame(()=>{const b=o.current;if(!b)return;const v=r.getShape(n);v&&(b.value=v.props.text,b.value.length&&!m&&b.select())})},[r,n]),u=ne.useCallback(()=>{const m=a.current;requestAnimationFrame(()=>{var w;const b=o.current,{editingShapeId:v}=r;if(b&&v){if(v===n)if(m)if(!m.length)b.focus();else{i.current=!0,b.focus();const _=window.getSelection();_&&m.forEach(k=>_.addRange(k))}else b.focus()}else(w=window.getSelection())==null||w.removeAllRanges(),r.complete()})},[r,n]),p=ne.useCallback(m=>{if(s)switch((m.ctrlKey||m.metaKey)&&rd(m),m.key){case"Enter":{(m.ctrlKey||m.metaKey)&&r.complete();break}case"Tab":{Zi(m),m.shiftKey?v1.unindent(m.currentTarget):v1.indent(m.currentTarget);break}}},[r,s]),f=ne.useCallback(m=>{if(!s)return;let b=v1.normalizeText(m.currentTarget.value);const v=b.replace(/\t/g,Sg);if(v!==b){const w=m.currentTarget.selectionStart;m.currentTarget.value=v,m.currentTarget.selectionStart=w+(v.length-b.length),m.currentTarget.selectionEnd=w+(v.length-b.length),b=v}r.updateShapes([{id:n,type:e,props:{text:b}}])},[r,n,e,s]),h=t.trim().length===0;ne.useEffect(()=>{if(!s)return;if(o.current){let b=function(){var w,_;const v=(w=window.getSelection)==null?void 0:w.call(window);if(v&&v.type!=="None"){const k=[];if(v)for(let y=0;y<v.rangeCount;y++)k.push((_=v.getRangeAt)==null?void 0:_.call(v,y));a.current=k}};return document.addEventListener("selectionchange",b),()=>{document.removeEventListener("selectionchange",b)}}},[s]);const c=ne.useCallback(m=>{const{editingShape:b}=r;b&&(i.current=e===b.type),r.dispatch({...Sc(m),type:"pointer",name:"pointer_down",target:"shape",shape:r.getShape(n)}),rd(m)},[r,n,e]);return{rInput:o,isEditing:s,isEditingSameShapeType:l,handleFocus:d,handleBlur:u,handleKeyDown:p,handleChange:f,handleInputPointerDown:c,handleDoubleClick:rd,isEmpty:h}}const MIe=ne.memo(function({id:e,text:t,size:r,font:o,position:i,width:a,labelColor:s}){const{rInput:l,isEditing:d,handleFocus:u,handleBlur:p,handleKeyDown:f,handleChange:h,isEmpty:c,handleInputPointerDown:g}=$E(e,"arrow",t);return!d&&c?null:K.jsx("div",{className:"tl-arrow-label","data-font":o,"data-align":"center","data-hastext":!c,"data-isediting":d,style:{textAlign:"center",fontSize:Tf[r],lineHeight:Tf[r]*Ws.lineHeight+"px",transform:`translate(${i.x}px, ${i.y}px)`,color:s},children:K.jsxs("div",{className:"tl-arrow-label__inner",children:[K.jsx("p",{style:{width:a||"9px"},children:t?v1.normalizeTextForDom(t):" "}),d&&K.jsx("textarea",{ref:l,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:t,onFocus:u,onChange:h,onKeyDown:f,onBlur:p,onContextMenu:rd,onPointerDown:g})]})})});let IIe=0;class e6 extends Wd{constructor(){super(...arguments);J(this,"canEdit",()=>!0);J(this,"canBind",()=>!1);J(this,"canSnap",()=>!1);J(this,"hideResizeHandles",()=>!0);J(this,"hideRotateHandle",()=>!0);J(this,"hideSelectionBoundsBg",()=>!0);J(this,"hideSelectionBoundsFg",()=>!0);J(this,"onHandleChange",(t,{handle:r,isPrecise:o})=>{const i=r.id;if(i==="middle"){const{start:g,end:m}=Nd(this.editor,t),b=Le.Sub(m,g),v=Le.Per(b),w=Le.Med(m,g),_=Le.Sub(w,v),k=Le.Add(w,v),y=Le.NearestPointOnLineSegment(_,k,r,!1);let S=Le.Dist(y,w);return Le.Clockwise(y,m,w)&&(S*=-1),{id:t.id,type:t.type,props:{bend:S}}}const a=hl(t),l=this.editor.getShapePageTransform(a.id).applyToPoint(r);if(this.editor.inputs.ctrlKey)return a.props[i]={type:"point",x:r.x,y:r.y},a;const d=this.editor.getShapePageTransform(t.id).applyToPoint(r),u=this.editor.getShapeAtPoint(d,{hitInside:!0,hitFrameInside:!0,margin:0,filter:g=>!g.isLocked&&this.editor.getShapeUtil(g).canBind(g)});if(!u)return a.props[i]={type:"point",x:r.x,y:r.y},a;const p=this.editor.getShapeGeometry(u),f=uo.ZeroFix(p.bounds),h=this.editor.getPointInShapeSpace(u,l);let c=o;if(!c){const g=a.props[i];(g.type==="point"||g.type==="binding"&&u.id!==g.boundShapeId)&&(c=this.editor.inputs.pointerVelocity.len()<.5)}if(c&&(c=Le.Dist(h,f.center)>Math.max(4,Math.min(Math.min(f.width,f.height)*.15,16))/this.editor.zoomLevel),!o){p.isClosed||(c=!0);const g=a.props[i==="start"?"end":"start"];g.type==="binding"&&u.id===g.boundShapeId&&Le.Equals(g.normalizedAnchor,{x:.5,y:.5})&&(c=!0)}return a.props[i]={type:"binding",boundShapeId:u.id,normalizedAnchor:c?{x:(h.x-f.minX)/f.width,y:(h.y-f.minY)/f.height}:{x:.5,y:.5},isExact:this.editor.inputs.altKey},a.props.start.type==="binding"&&a.props.end.type==="binding"&&a.props.start.boundShapeId===a.props.end.boundShapeId&&Le.Equals(a.props.start.normalizedAnchor,a.props.end.normalizedAnchor)&&(a.props.end.normalizedAnchor.x+=.05),a});J(this,"onTranslateStart",t=>{const r=t.props.start.type==="binding"?t.props.start.boundShapeId:null,o=t.props.end.type==="binding"?t.props.end.boundShapeId:null,{selectedShapeIds:i}=this.editor;if(r&&(i.includes(r)||this.editor.isAncestorSelected(r))||o&&(i.includes(o)||this.editor.isAncestorSelected(o)))return;const{start:a,end:s}=Nd(this.editor,t);return{id:t.id,type:t.type,props:{...t.props,start:{type:"point",x:a.x,y:a.y},end:{type:"point",x:s.x,y:s.y}}}});J(this,"onResize",(t,r)=>{const{scaleX:o,scaleY:i}=r,a=Nd(this.editor,t),{start:s,end:l}=hl(t.props);let{bend:d}=t.props;s.type==="point"&&(s.x=a.start.x*o,s.y=a.start.y*i),l.type==="point"&&(l.x=a.end.x*o,l.y=a.end.y*i);const u=Math.abs(o),p=Math.abs(i);return o<0&&i>=0?(d!==0&&(d*=-1,d*=Math.max(u,p)),s.type==="binding"&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x),l.type==="binding"&&(l.normalizedAnchor.x=1-l.normalizedAnchor.x)):o>=0&&i<0?(d!==0&&(d*=-1,d*=Math.max(u,p)),s.type==="binding"&&(s.normalizedAnchor.y=1-s.normalizedAnchor.y),l.type==="binding"&&(l.normalizedAnchor.y=1-l.normalizedAnchor.y)):o>=0&&i>=0?d!==0&&(d*=Math.max(u,p)):o<0&&i<0&&(d!==0&&(d*=Math.max(u,p)),s.type==="binding"&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x,s.normalizedAnchor.y=1-s.normalizedAnchor.y),l.type==="binding"&&(l.normalizedAnchor.x=1-l.normalizedAnchor.x,l.normalizedAnchor.y=1-l.normalizedAnchor.y)),{props:{start:s,end:l,bend:d}}});J(this,"onDoubleClickHandle",(t,r)=>{switch(r.id){case"start":return{id:t.id,type:t.type,props:{...t.props,arrowheadStart:t.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:t.id,type:t.type,props:{...t.props,arrowheadEnd:t.props.arrowheadEnd==="none"?"arrow":"none"}}}});J(this,"onEditEnd",t=>{const{id:r,type:o,props:{text:i}}=t;i.trimEnd()!==t.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:i.trimEnd()}}])})}getDefaultProps(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}getGeometry(t){const r=this.editor.getArrowInfo(t),o=r.isStraight?new D4({start:Le.From(r.start.point),end:Le.From(r.end.point)}):new y7e({center:Le.Cast(r.handleArc.center),radius:r.handleArc.radius,start:Le.Cast(r.start.point),end:Le.Cast(r.end.point),sweepFlag:r.bodyArc.sweepFlag,largeArcFlag:r.bodyArc.largeArcFlag});let i;if(t.props.text.trim()){const a=o.bounds,{w:s,h:l}=this.editor.textMeasure.measureText(t.props.text,{...Ws,fontFamily:Eh[t.props.font],fontSize:Tf[t.props.size],width:"fit-content"});let d=s,u=l;if(a.width>a.height){d=Math.max(Math.min(s,64),Math.min(a.width-64,s));const{w:p,h:f}=this.editor.textMeasure.measureText(t.props.text,{...Ws,fontFamily:Eh[t.props.font],fontSize:Tf[t.props.size],width:d+"px"});d=p,u=f}if(d>16*Tf[t.props.size]){d=16*Tf[t.props.size];const{w:p,h:f}=this.editor.textMeasure.measureText(t.props.text,{...Ws,fontFamily:Eh[t.props.font],fontSize:Tf[t.props.size],width:d+"px"});d=p,u=f}i=new tp({x:r.middle.x-d/2-4.25,y:r.middle.y-u/2-4.25,width:d+8.5,height:u+8.5,isFilled:!0,isLabel:!0})}return new s1({children:i?[o,i]:[o],isSnappable:!1})}getHandles(t){const r=this.editor.getArrowInfo(t);return[{id:"start",type:"vertex",index:"a0",x:r.start.handle.x,y:r.start.handle.y,canBind:!0},{id:"middle",type:"virtual",index:"a2",x:r.middle.x,y:r.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:r.end.handle.x,y:r.end.handle.y,canBind:!0}]}component(t){const r=Ps(),o=this.editor.onlySelectedShape,i=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.editor.instanceState.isReadonly,a=this.editor.getArrowInfo(t),s=uo.ZeroFix(this.editor.getShapeGeometry(t).bounds),l=je.useMemo(()=>this.editor.environment.isSafari?IIe+=1:0,[t]);if(!(a!=null&&a.isValid))return null;const d=dl[t.props.size],u=a.start.arrowhead&&og(a,"start",d),p=a.end.arrowhead&&og(a,"end",d),f=a.isStraight?L8(a):j8(a);let h=null;if(o===t&&i){const{strokeDasharray:k,strokeDashoffset:y}=fl(a.isStraight?Le.Dist(a.start.handle,a.end.handle):Math.abs(a.handleArc.length),2,{end:"skip",start:"skip",lengthRatio:2.5});h=t.props.start.type==="binding"||t.props.end.type==="binding"?K.jsx("path",{className:"tl-arrow-hint",d:a.isStraight?rwe(a):owe(a),strokeDasharray:k,strokeDashoffset:y,strokeWidth:2,markerStart:t.props.start.type==="binding"?t.props.start.isExact?"":O$(t.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:t.props.end.type==="binding"?t.props.end.isExact?"":O$(t.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}const{strokeDasharray:c,strokeDashoffset:g}=fl(a.isStraight?a.length:Math.abs(a.bodyArc.length),d,{style:t.props.dash}),m=t.props.text.trim()?this.editor.getShapeGeometry(t).children[1]:null,b=!(a.start.arrowhead==="none"||a.start.arrowhead==="arrow"),v=!(a.end.arrowhead==="none"||a.end.arrowhead==="arrow"),w=(t.id+"_clip_"+l).replace(":","_");return K.jsxs(K.Fragment,{children:[K.jsxs(vc,{id:t.id,style:{minWidth:50,minHeight:50},children:[K.jsx("defs",{children:K.jsxs("mask",{id:w,children:[K.jsx("rect",{x:Rt(-100+s.minX),y:Rt(-100+s.minY),width:Rt(s.width+200),height:Rt(s.height+200),fill:"white"}),m&&K.jsx("rect",{x:m.x,y:m.y,width:m.w,height:m.h,fill:"black",rx:4,ry:4}),u&&b&&K.jsx("path",{d:u,fill:a.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),p&&v&&K.jsx("path",{d:p,fill:a.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),K.jsxs("g",{fill:"none",stroke:r[t.props.color].solid,strokeWidth:d,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[h,K.jsxs("g",{mask:`url(#${w})`,children:[K.jsx("rect",{x:Rt(s.minX-100),y:Rt(s.minY-100),width:Rt(s.width+200),height:Rt(s.height+200),opacity:0}),K.jsx("path",{d:f,strokeDasharray:c,strokeDashoffset:g})]}),u&&b&&t.props.fill!=="none"&&K.jsx(Qa,{theme:r,d:u,color:t.props.color,fill:t.props.fill}),p&&v&&t.props.fill!=="none"&&K.jsx(Qa,{theme:r,d:p,color:t.props.color,fill:t.props.fill}),u&&K.jsx("path",{d:u}),p&&K.jsx("path",{d:p})]})]}),K.jsx(MIe,{id:t.id,text:t.props.text,font:t.props.font,size:t.props.size,position:a.middle,width:(m==null?void 0:m.w)??0,labelColor:r[t.props.labelColor].solid})]})}indicator(t){const{start:r,end:o}=Nd(this.editor,t),i=this.editor.getArrowInfo(t),a=this.editor.getShapeGeometry(t),s=a.bounds,l=t.props.text.trim()?a.children[1]:null;if(!i||Le.Equals(r,o))return null;const d=dl[t.props.size],u=i.start.arrowhead&&og(i,"start",d),p=i.end.arrowhead&&og(i,"end",d),f=i.isStraight?L8(i):j8(i),h=u&&i.start.arrowhead!=="arrow"||p&&i.end.arrowhead!=="arrow"||!!l,c=(t.id+"_clip").replace(":","_");return lw(t.id)&&l?K.jsx("rect",{x:Rt(l.x),y:Rt(l.y),width:l.w,height:l.h,rx:3.5,ry:3.5}):K.jsxs("g",{children:[h&&K.jsx("defs",{children:K.jsxs("mask",{id:c,children:[K.jsx("rect",{x:s.minX-100,y:s.minY-100,width:s.w+200,height:s.h+200,fill:"white"}),l&&K.jsx("rect",{x:Rt(l.x),y:Rt(l.y),width:l.w,height:l.h,fill:"black",rx:3.5,ry:3.5}),u&&K.jsx("path",{d:u,fill:i.start.arrowhead==="arrow"?"none":"black",stroke:"none"}),p&&K.jsx("path",{d:p,fill:i.end.arrowhead==="arrow"?"none":"black",stroke:"none"})]})}),K.jsxs("g",{...h?{mask:`url(#${c})`}:void 0,children:[h&&K.jsx("rect",{x:s.minX-100,y:s.minY-100,width:s.width+200,height:s.height+200,opacity:0}),K.jsx("path",{d:f})]}),u&&K.jsx("path",{d:u}),p&&K.jsx("path",{d:p}),l&&K.jsx("rect",{x:Rt(l.x),y:Rt(l.y),width:l.w,height:l.h,rx:3.5,ry:3.5})]})}toSvg(t,r){const o=Xl({isDarkMode:this.editor.user.isDarkMode});r.addExportDef(AE(t.props.fill,o));const i=o[t.props.color].solid,a=this.editor.getArrowInfo(t),s=dl[t.props.size],l=document.createElementNS("http://www.w3.org/2000/svg","g");if(!a)return l;const d=a.start.arrowhead&&og(a,"start",s),u=a.end.arrowhead&&og(a,"end",s),p=this.editor.getShapeGeometry(t),f=p.bounds,h=t.props.text.trim()?p.children[1]:null,c=(t.id+"_clip").replace(":","_");if(d||u||h){const _=document.createElementNS("http://www.w3.org/2000/svg","defs"),k=document.createElementNS("http://www.w3.org/2000/svg","mask");k.id=c;const y=document.createElementNS("http://www.w3.org/2000/svg","rect");if(y.setAttribute("x",f.minX-100+""),y.setAttribute("y",f.minY-100+""),y.setAttribute("width",f.width+200+""),y.setAttribute("height",f.height+200+""),y.setAttribute("fill","white"),k.appendChild(y),d&&k.appendChild(I$(d,a.start.arrowhead)),u&&k.appendChild(I$(u,a.end.arrowhead)),h){const S=document.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("x",h.x+""),S.setAttribute("y",h.y+""),S.setAttribute("width",h.w+""),S.setAttribute("height",h.h+""),S.setAttribute("fill","black"),k.appendChild(S)}_.appendChild(k),l.appendChild(_)}const g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttribute("mask",`url(#${c})`),l.appendChild(g);const m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("x","-100"),m.setAttribute("y","-100"),m.setAttribute("width",f.width+200+""),m.setAttribute("height",f.height+200+""),m.setAttribute("fill","transparent"),m.setAttribute("stroke","none"),g.appendChild(m);const b=TIe(a.isStraight?L8(a):j8(a),i,s),{strokeDasharray:v,strokeDashoffset:w}=fl(a.isStraight?a.length:Math.abs(a.bodyArc.length),s,{style:t.props.dash});if(b.setAttribute("stroke-dasharray",v),b.setAttribute("stroke-dashoffset",w),g.appendChild(b),d&&l.appendChild(T$(d,t.props.color,s,t.props.arrowheadStart==="arrow"?"none":t.props.fill,o)),u&&l.appendChild(T$(u,t.props.color,s,t.props.arrowheadEnd==="arrow"?"none":t.props.fill,o)),h){r.addExportDef(Ew(t.props.font));const _={fontSize:Tf[t.props.size],lineHeight:Ws.lineHeight,fontFamily:uy[t.props.font],padding:0,textAlign:"middle",width:h.w-8,verticalTextAlign:"middle",height:h.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},k=_w(this.editor,this.editor.textMeasure.measureTextSpans(t.props.text,_),_);k.setAttribute("fill",o[t.props.labelColor].solid),Array.from(k.children).forEach(C=>{const I=parseFloat(C.getAttribute("x")||"0"),A=parseFloat(C.getAttribute("y")||"0");C.setAttribute("x",I+4+h.x+"px"),C.setAttribute("y",A+h.y+"px")});const S=k.cloneNode(!0);S.setAttribute("stroke-width","2"),S.setAttribute("fill",o.background),S.setAttribute("stroke",o.background),l.appendChild(S),l.appendChild(k)}return l}getCanvasSvgDefs(){return[LE()]}}J(e6,"type","arrow"),J(e6,"props",Lye),J(e6,"migrations",$ye);function I$(n,e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",n),t.setAttribute("fill",e==="arrow"?"none":"black"),t.setAttribute("stroke","none"),t}function TIe(n,e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",n),r.setAttribute("fill","none"),r.setAttribute("stroke",e),r.setAttribute("stroke-width",t+""),r}function T$(n,e,t,r,o){const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",n),i.setAttribute("fill","none"),i.setAttribute("stroke",o[e].solid),i.setAttribute("stroke-width",t+"");const a=Lc({d:n,fill:r,color:e,theme:o});if(a){const s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.appendChild(a),s.appendChild(i),s}else return i}function O$(n){return n.x!==.5||n.y!==.5}const OIe=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function jE(n){return OIe.map(t=>{const{offsetX:r,offsetY:o,blur:i,spread:a,color:s}=t,l=new Le(r,o),{x:d,y:u}=l.rot(-n);return`${d}px ${u}px ${i}px ${a}px ${s}`}).join(", ")}const A$="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function _y({url:n,zoomLevel:e}){return K.jsx("a",{className:vo("tl-hyperlink-button",{"tl-hyperlink-button__hidden":e<.32}),href:n,target:"_blank",rel:"noopener noreferrer",onPointerDown:rd,onPointerUp:rd,title:n,draggable:!1,children:K.jsx("div",{className:"tl-hyperlink-button__icon",style:{mask:`url("${A$}") center 100% / 100% no-repeat`,WebkitMask:`url("${A$}") center 100% / 100% no-repeat`}})})}class t6 extends Wm{constructor(){super(...arguments);J(this,"canResize",()=>!1);J(this,"hideSelectionBoundsFg",()=>!0);J(this,"onBeforeCreate",t=>{L$(this.editor,t)});J(this,"onBeforeUpdate",(t,r)=>{if(t.props.url!==r.props.url)if(QC(r.props.url))L$(this.editor,r);else return{...r,props:{...r.props,url:t.props.url}}})}getDefaultProps(){return{url:"",w:300,h:320,assetId:null}}component(t){const r=t.props.assetId?this.editor.getAsset(t.props.assetId):null,o=this.editor.getShapePageTransform(t).rotation(),i=AIe(t);return K.jsx(hm,{children:K.jsxs("div",{className:"tl-bookmark__container",style:{boxShadow:jE(o)},children:[K.jsxs("div",{className:"tl-bookmark__image_container",children:[r!=null&&r.props.image?K.jsx("img",{className:"tl-bookmark__image",draggable:!1,src:r==null?void 0:r.props.image,alt:(r==null?void 0:r.props.title)||""}):K.jsx("div",{className:"tl-bookmark__placeholder"}),K.jsx(_y,{url:t.props.url,zoomLevel:this.editor.zoomLevel})]}),K.jsxs("div",{className:"tl-bookmark__copy_container",children:[(r==null?void 0:r.props.title)&&K.jsx("h2",{className:"tl-bookmark__heading",children:Av((r==null?void 0:r.props.title)||"",54)}),(r==null?void 0:r.props.description)&&K.jsx("p",{className:"tl-bookmark__description",children:Av((r==null?void 0:r.props.description)||"",128)}),K.jsx("a",{className:"tl-bookmark__link",href:t.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:rd,onPointerUp:rd,onClick:rd,children:Av(i,45)})]})]})})}indicator(t){return K.jsx("rect",{width:Rt(t.props.w),height:Rt(t.props.h),rx:"8",ry:"8"})}}J(t6,"type","bookmark"),J(t6,"props",jye),J(t6,"migrations",Rye);const AIe=n=>{try{const e=new URL(n.props.url),t=e.pathname.replace(/\/*$/,"");return`${e.hostname}${t}`}catch{return n.props.url}};function L$(n,e){const{url:t}=e.props,r=i1.createId(j3(t));n.getAsset(r)?e.props.assetId!==r&&n.updateShapes([{id:e.id,type:e.type,props:{assetId:r}}]):(n.updateShapes([{id:e.id,type:e.type,props:{assetId:null}}]),LIe(n,e))}const LIe=S_(async(n,e)=>{const{url:t}=e.props,r=await n.getAssetForExternalContent({type:"url",url:t});r&&n.batch(()=>{n.createAssets([r]),n.updateShapes([{id:e.id,type:e.type,props:{assetId:r.id}}])})},500);function b1(n,e=!1){const t=n.length;if(t<2)return"";let r=n[0].point,o=n[1].point;if(t===2)return`M${Jc(r)}L${Jc(o)}`;let i="";for(let a=2,s=t-1;a<s;a++)r=n[a].point,o=n[a+1].point,i+=Qc(r,o);return e?`M${Qc(n[0].point,n[1].point)}Q${Jc(n[1].point)}${Qc(n[1].point,n[2].point)}T${i}${Qc(n[t-1].point,n[0].point)}${Qc(n[0].point,n[1].point)}Z`:`M${Jc(n[0].point)}Q${Jc(n[1].point)}${Qc(n[1].point,n[2].point)}${n.length>3?"T":""}${i}L${Jc(n[t-1].point)}`}function X4(){const n=Dn();return sr("zoom",()=>n.zoomLevel<.35,[n])}const $Ie=n=>n*.65+T5e(n*ji/2)*.35,jIe=n=>({size:1+n,thinning:.5,streamline:.62+(1+n)/8*.06,smoothing:.62,easing:ul.easeOutSine,simulatePressure:!0}),RIe=n=>({size:1+n*1.2,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:$Ie}),$$=n=>({size:1+n,thinning:0,streamline:.62+(1+n)/8*.06,smoothing:.62,simulatePressure:!1,easing:ul.linear});function OS({strokeWidth:n,showAsComplete:e}){return{size:1+n,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:ul.easeOutSine,last:e}}function s3(n,e,t,r){return{...r?$$(e):n.dash==="draw"?n.isPen?RIe(e):jIe(e):$$(e),last:n.isComplete||t}}function kg(n){const e=[];for(const t of n)if(t.type==="free"||t.points.length<2)e.push(...t.points.map(Le.Cast));else{const r=Math.max(4,Math.floor(Le.Dist(t.points[0],t.points[1])/16));e.push(...Le.PointsBetween(t.points[0],t.points[1],r))}return e}function j$(n,e){return{draw:"none",solid:"none",dotted:`0.1 ${e*2}`,dashed:`${e*2} ${e*2}`}[n.props.dash]}class n6 extends Wd{constructor(){super(...arguments);J(this,"hideResizeHandles",t=>l9(t));J(this,"hideRotateHandle",t=>l9(t));J(this,"hideSelectionBoundsFg",t=>l9(t));J(this,"onResize",(t,r)=>{const{scaleX:o,scaleY:i}=r,a=[];for(const s of t.props.segments)a.push({...s,points:s.points.map(({x:l,y:d,z:u})=>({x:T4(o*l),y:T4(i*d),z:u}))});return{props:{segments:a}}})}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}getGeometry(t){const r=kg(t.props.segments),o=dl[t.props.size];if(t.props.segments.length===1){const a=uo.FromPoints(r);if(a.width<o*2&&a.height<o*2)return new AF({x:-o,y:-o,radius:o,isFilled:!0})}const i=wh(r,s3(t.props,o,!0,!0)).map(a=>a.point);return t.props.isClosed?new xs({points:i,isFilled:t.props.fill!=="none"}):new i0({points:i})}component(t){var f;const r=Ps(),o=X4(),i=dl[t.props.size],a=kg(t.props.segments),s=t.props.isComplete||((f=zl(t.props.segments))==null?void 0:f.type)==="straight";let l=i;!o&&!t.props.isPen&&t.props.dash==="draw"&&a.length===1&&(l+=Hf(t.id)()*(i/6));const d=s3(t.props,l,s,o),u=wh(a,d),p=u.length>1?b1(u,t.props.isClosed):s9(a[0],l);if(!o&&t.props.dash==="draw"||u.length<2){gm(u,d);const h=pm(u,d);return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{theme:r,fill:t.props.isClosed?t.props.fill:"none",color:t.props.color,d:p}),K.jsx("path",{d:dm(h,!0),strokeLinecap:"round",fill:r[t.props.color].solid})]})}return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{theme:r,color:t.props.color,fill:t.props.isClosed?t.props.fill:"none",d:p}),K.jsx("path",{d:p,strokeLinecap:"round",fill:"none",stroke:r[t.props.color].solid,strokeWidth:i,strokeDasharray:j$(t,i),strokeDashoffset:"0"})]})}indicator(t){var p;const r=X4(),o=dl[t.props.size],i=kg(t.props.segments);let a=o;!r&&!t.props.isPen&&t.props.dash==="draw"&&i.length===1&&(a+=Hf(t.id)()*(o/6));const s=t.props.isComplete||((p=zl(t.props.segments))==null?void 0:p.type)==="straight",l=s3(t.props,a,s,!0),d=wh(i,l),u=d.length>1?b1(d,t.props.isClosed):s9(i[0],a);return K.jsx("path",{d:u})}toSvg(t,r){var g;const o=Xl({isDarkMode:this.editor.user.isDarkMode});r.addExportDef(AE(t.props.fill,o));const{color:i}=t.props,a=dl[t.props.size],s=kg(t.props.segments),l=t.props.isComplete||((g=zl(t.props.segments))==null?void 0:g.type)==="straight";let d=a;!t.props.isPen&&t.props.dash==="draw"&&s.length===1&&(d+=Hf(t.id)()*(a/6));const u=s3(t.props,d,l,!1),p=wh(s,u),f=p.length>1?b1(p,t.props.isClosed):s9(s[0],d);let h;if(t.props.dash==="draw"||p.length<2){gm(p,u);const m=pm(p,u),b=document.createElementNS("http://www.w3.org/2000/svg","path");b.setAttribute("d",dm(m,!0)),b.setAttribute("fill",o[i].solid),b.setAttribute("stroke-linecap","round"),h=b}else{const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d",f),m.setAttribute("stroke",o[i].solid),m.setAttribute("fill","none"),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-width",a.toString()),m.setAttribute("stroke-dasharray",j$(t,a)),m.setAttribute("stroke-dashoffset","0"),h=m}const c=Lc({fill:t.props.isClosed?t.props.fill:"none",d:f,color:t.props.color,theme:o});if(c){const m=document.createElementNS("http://www.w3.org/2000/svg","g");return m.appendChild(c),m.appendChild(h),m}return h}getCanvasSvgDefs(){return[LE()]}expandSelectionOutlinePx(t){const r=t.props.dash==="draw"?1.6:1;return dl[t.props.size]*r/2}}J(n6,"type","draw"),J(n6,"props",Dye),J(n6,"migrations",Nye);function s9(n,e){const t=(e+1)*.5;return`M ${n.x} ${n.y} m -${t}, 0 a ${t},${t} 0 1,0 ${t*2},0 a ${t},${t} 0 1,0 -${t*2},0`}function l9(n){return n.props.segments.length===1&&n.props.segments[0].points.length<2}function DIe(n,e,t={}){const{newPoint:r,handle:o,scaleX:i,scaleY:a}=e,{minWidth:s=1,maxWidth:l=1/0,minHeight:d=1,maxHeight:u=1/0}=t;let p=n.props.w*i,f=n.props.h*a;const h=new Le(0,0);if(p>0){if(p<s){switch(o){case"top_left":case"left":case"bottom_left":{h.x=p-s;break}case"top":case"bottom":{h.x=(p-s)/2;break}default:h.x=0}p=s}}else if(h.x=p,p=-p,p<s){switch(o){case"top_left":case"left":case"bottom_left":{h.x=-p;break}default:h.x=-s}p=s}if(f>0){if(f<d){switch(o){case"top_left":case"top":case"top_right":{h.y=f-d;break}case"right":case"left":{h.y=(f-d)/2;break}default:h.y=0}f=d}}else if(h.y=f,f=-f,f<d){switch(o){case"top_left":case"top":case"top_right":{h.y=-f;break}default:h.y=-d}f=d}const{x:c,y:g}=h.rot(n.rotation).add(r);return{x:c,y:g,props:{w:Math.min(l,p),h:Math.min(u,f)}}}const NIe=n=>Object.entries(n).filter(([e,t])=>t).map(([e])=>e).join(" ");class r6 extends Wm{constructor(){super(...arguments);J(this,"hideSelectionBoundsFg",t=>!this.canResize(t));J(this,"canEdit",()=>!0);J(this,"canUnmount",t=>{var r,o;return!!((o=(r=bh(t.props.url))==null?void 0:r.definition)!=null&&o.canUnmount)});J(this,"canResize",t=>{var r,o;return!!((o=(r=bh(t.props.url))==null?void 0:r.definition)!=null&&o.doesResize)});J(this,"isAspectRatioLocked",t=>{const r=bh(t.props.url);return(r==null?void 0:r.definition.isAspectRatioLocked)??!1});J(this,"onResize",(t,r)=>{const o=this.isAspectRatioLocked(t),i=bh(t.props.url);let a=(i==null?void 0:i.definition.minWidth)??200,s=(i==null?void 0:i.definition.minHeight)??200;if(o){const l=t.props.w/t.props.h;l>1?a*=l:s/=l}return DIe(t,r,{minWidth:a,minHeight:s})})}getDefaultProps(){return{w:300,h:300,url:""}}component(t){const{w:r,h:o,url:i}=t.props,a=lw(t.id),s=ne.useMemo(()=>LU(i),[i]),l=sr("is hovering",()=>{const{editingShapeId:f,hoveredShapeId:h}=this.editor.currentPageState;if(f&&h!==f){const c=this.editor.getShape(f);if(c&&this.editor.isShapeOfType(c,"embed"))return!0}return!1},[]),d=this.editor.getShapePageTransform(t).rotation(),u=a||l;if((s==null?void 0:s.definition.type)==="github_gist"){const f=s.url.split("/").pop();if(!f)throw Error("No gist id!");return K.jsx(hm,{className:"tl-embed-container",id:t.id,children:K.jsx(zIe,{id:f,width:Rt(r),height:Rt(o),isInteractive:u,pageRotation:d})})}const p=NIe({...Bye,...(s==null?void 0:s.definition.overridePermissions)??{}});return K.jsx(hm,{className:"tl-embed-container",id:t.id,children:s!=null&&s.definition?K.jsx("iframe",{className:`tl-embed tl-embed-${t.id}`,sandbox:p,src:s.embedUrl,width:Rt(r),height:Rt(o),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:u?"auto":"none",zIndex:u?"":"-1",boxShadow:jE(d),borderRadius:(s==null?void 0:s.definition.overrideOutlineRadius)??8,background:s==null?void 0:s.definition.backgroundColor}}):null})}indicator(t){const r=ne.useMemo(()=>bh(t.props.url),[t.props.url]);return K.jsx("rect",{width:Rt(t.props.w),height:Rt(t.props.h),rx:(r==null?void 0:r.definition.overrideOutlineRadius)??8,ry:(r==null?void 0:r.definition.overrideOutlineRadius)??8})}}J(r6,"type","embed"),J(r6,"props",Hye),J(r6,"migrations",Fye);function zIe({id:n,file:e,isInteractive:t,width:r,height:o,style:i,pageRotation:a}){return K.jsx("iframe",{className:"tl-embed",draggable:!1,width:Rt(r),height:Rt(o),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:{...i,pointerEvents:t?"all":"none",zIndex:t?"":"-1",boxShadow:jE(a)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${n}.js${e?`?file=${e}`:""}`}><\/script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})}const BIe=ne.forwardRef(({id:n,name:e,isEditing:t},r)=>{const o=Dn(),i=ne.useCallback(l=>{l.key==="Enter"&&!l.nativeEvent.isComposing&&(l.stopPropagation(),l.currentTarget.blur(),o.setEditingShape(null))},[o]),a=ne.useCallback(l=>{const d=o.getShape(n);if(!d)return;const u=d.props.name,p=l.currentTarget.value.trim();u!==p&&o.updateShapes([{id:n,type:"frame",props:{name:p}}],{squashing:!0})},[n,o]),s=ne.useCallback(l=>{const d=o.getShape(n);if(!d)return;const u=d.props.name,p=l.currentTarget.value;u!==p&&o.updateShapes([{id:n,type:"frame",props:{name:p}}],{squashing:!0})},[n,o]);return K.jsxs("div",{className:`tl-frame-label ${t?"tl-frame-label__editing":""}`,children:[K.jsx("input",{className:"tl-frame-name-input",ref:r,style:{display:t?void 0:"none"},value:e,autoFocus:!0,onKeyDown:i,onBlur:a,onChange:s}),RU(e,"Frame")+""]})}),HIe=function({id:e,name:t,width:r,height:o}){const i=Dn(),a=Ud(i.getShapePageTransform(e).rotation()),s=lw(e),l=ne.useRef(null),d=ne.useCallback(c=>{const g=Sc(c);i.dispatch({type:"pointer",name:"pointer_down",target:"shape",shape:i.getShape(e),...g}),c.preventDefault()},[i,e]);ne.useEffect(()=>{const c=l.current;c&&s&&(c.focus(),c.select(),requestAnimationFrame(()=>{document.activeElement!==c&&(c.focus(),c.select())}))},[l,s]);const p=((a+Math.PI/4)*(2/Math.PI)+4)%4,f=["top","left","bottom","right"][Math.floor(p)];let h;switch(f){case"top":h="";break;case"right":h=`translate(${Rt(r)}px, 0px) rotate(90deg)`;break;case"bottom":h=`translate(${Rt(r)}px, ${Rt(o)}px) rotate(180deg)`;break;case"left":h=`translate(0px, ${Rt(o)}px) rotate(270deg)`;break}return K.jsx("div",{className:"tl-frame-heading",style:{overflow:s?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${Math.ceil(f==="top"||f==="bottom"?r:o)}px + var(--space-5))`,bottom:Math.ceil(o),transform:`${h} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`},onPointerDown:d,children:K.jsx("div",{className:"tl-frame-heading-hit-area",children:K.jsx(BIe,{ref:l,id:e,name:t,isEditing:s})})})};function RU(n,e){return n.match(/^\s*$/)?e:n}class o6 extends Wm{constructor(){super(...arguments);J(this,"canBind",()=>!0);J(this,"canEdit",()=>!0);J(this,"canReceiveNewChildrenOfType",(t,r)=>!t.isLocked);J(this,"canDropShapes",(t,r)=>!t.isLocked);J(this,"onDragShapesOver",(t,r)=>r.every(o=>o.parentId===t.id)?{shouldHint:!1}:(this.editor.reparentShapes(r.map(o=>o.id),t.id),{shouldHint:!0}));J(this,"onDragShapesOut",(t,r)=>{const o=this.editor.getShape(t.parentId);o&&this.editor.isShapeOfType(o,"group")?this.editor.reparentShapes(r,o.id):this.editor.reparentShapes(r,this.editor.currentPageId)});J(this,"onResizeEnd",t=>{const r=this.editor.getShapePageBounds(t),o=this.editor.getSortedChildIdsForParent(t.id),i=[];for(const a of o){const s=this.editor.getShapePageBounds(a);r.includes(s)||i.push(a)}i.length>0&&this.editor.reparentShapes(i,this.editor.currentPageId)})}getDefaultProps(){return{w:160*2,h:90*2,name:""}}getGeometry(t){return new tp({width:t.props.w,height:t.props.h,isFilled:!1})}component(t){const r=this.editor.getShapeGeometry(t).bounds,o=Ps();return K.jsxs(K.Fragment,{children:[K.jsx(vc,{children:K.jsx("rect",{className:"tl-frame__body",width:r.width,height:r.height,fill:o.solid,stroke:o.text})}),K.jsx(HIe,{id:t.id,name:t.props.name,width:r.width,height:r.height})]})}toSvg(t){const r=Xl({isDarkMode:this.editor.user.isDarkMode}),o=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("width",t.props.w.toString()),i.setAttribute("height",t.props.h.toString()),i.setAttribute("fill",r.solid),i.setAttribute("stroke",r.black.solid),i.setAttribute("stroke-width","1"),i.setAttribute("rx","1"),i.setAttribute("ry","1"),o.appendChild(i);const l=((Ud(this.editor.getShapePageTransform(t.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4,d=["top","left","bottom","right"][Math.floor(l)];let u;switch(d){case"top":u="";break;case"right":u=`translate(${Rt(t.props.w)}px, 0px) rotate(90deg)`;break;case"bottom":u=`translate(${Rt(t.props.w)}px, ${Rt(t.props.h)}px) rotate(180deg)`;break;case"left":u=`translate(0px, ${Rt(t.props.h)}px) rotate(270deg)`;break;default:u=""}const p={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:t.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},f=this.editor.textMeasure.measureTextSpans(RU(t.props.name,"Frame")+"",p),h=f[0],c=zl(f),g=c.box.w+c.box.x-h.box.x,m=_w(this.editor,f,{offsetY:-p.height-2,...p});m.style.setProperty("transform",u);const b=document.createElementNS("http://www.w3.org/2000/svg","rect");return b.setAttribute("x","-8px"),b.setAttribute("y",-p.height-4+"px"),b.setAttribute("width",g+16+"px"),b.setAttribute("height",`${p.height}px`),b.setAttribute("rx","4px"),b.setAttribute("ry","4px"),b.setAttribute("fill",r.background),o.appendChild(b),o.appendChild(m),o}indicator(t){const r=this.editor.getShapeGeometry(t).bounds;return K.jsx("rect",{width:Rt(r.width),height:Rt(r.height),className:"tl-frame-indicator"})}providesBackgroundForChildren(){return!0}}J(o6,"type","frame"),J(o6,"props",Zye),J(o6,"migrations",Uye);function FIe(n,e,t,r){if((n==="start-legacy"||n==="end-legacy")&&t.length!==0){const o=uo.From(t[0].box);for(const{box:i}of t)o.union(i);if(n==="start-legacy")return(r-2*e-o.width)/2;if(n==="end-legacy")return-(r-2*e-o.width)/2}}function ZIe(n){return n==="start-legacy"||n==="middle-legacy"||n==="end-legacy"}const DU=je.memo(function({id:e,type:t,text:r,size:o,labelColor:i,font:a,align:s,verticalAlign:l,wrap:d,bounds:u}){const{rInput:p,isEmpty:f,isEditing:h,isEditingSameShapeType:c,handleFocus:g,handleChange:m,handleKeyDown:b,handleBlur:v,handleInputPointerDown:w,handleDoubleClick:_}=$E(e,t,r),k=h||c,y=v1.normalizeTextForDom(r),S=y.trim().length>0,C=ZIe(s),I=Ps();return!k&&!S?null:K.jsx("div",{className:"tl-text-label","data-font":a,"data-align":s,"data-hastext":!f,"data-isediting":h,"data-textwrap":!!d,style:{justifyContent:s==="middle"||C?"center":s,alignItems:l==="middle"?"center":l,...u?{top:u.minY,left:u.minX,width:u.width,height:u.height,position:"absolute"}:{}},children:f&&!k?null:K.jsxs("div",{className:"tl-text-label__inner",style:{fontSize:mm[o],lineHeight:mm[o]*Ws.lineHeight+"px",minHeight:Ws.lineHeight+32,minWidth:0,color:I[i].solid},children:[K.jsx("div",{className:"tl-text tl-text-content",dir:"ltr",children:y}),k&&K.jsx("textarea",{ref:p,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:h,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:g,onChange:m,onKeyDown:b,onBlur:v,onContextMenu:rd,onPointerDown:w,onDoubleClick:_})]})})});function NU({bounds:n,editor:e,font:t,shape:r}){const i={fontSize:mm[r.props.size],fontFamily:t,textAlign:r.props.align,verticalTextAlign:r.props.verticalAlign,width:Math.ceil(n.width),height:Math.ceil(n.height),padding:16,lineHeight:Ws.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},a=e.textMeasure.measureTextSpans(r.props.text,i),s=FIe(r.props.align,16,a,n.width);return s&&(i.offsetX=s),_w(e,a,i)}function ol(n){return`${Rt(n.x)},${Rt(n.y)} `}function zU(n=""){let e=0,t=0,r=0,o=0;function i(){const a=e^e<<11;return e=t,t=r,r=o,o^=(o>>>19^a^a>>>8)>>>0,o/4294967296*2}for(let a=0;a<n.length+64;a++)e^=n.charCodeAt(a)|0,i();return i}function Tb(n){let e="M";const t=n.length;let r,o,i;for(let a=0,s=t;a<s;a+=3)r=n[a],o=n[a+1],i=n[a+2],e+=`${ol(r)}L${ol(o)}Q${ol(i)}`;return e+=`${ol(n[0])}`,e}function Ob(n,e,t,r,o){const i=[],a=zU(n);let s=e[0],l;const d=e.length;for(let u=0,p=d*o;u<p;u++){l=Le.AddXY(e[(u+1)%d],a()*t,a()*t);const f=Le.Sub(l,s),h=Le.Len(f),c=Le.Div(f,h).mul(Math.min(h/4,r));i.push(Le.Add(s,c),Le.Add(l,c.neg()),l),s=l}return i}function c9(n,e,t){let r=`M ${ol(e[0])}L`,o=`M ${ol(e[0])}L`;const i=t/3,a=t*2,s=zU(n);let l=e[0],d,u=e[0],p;const f=e.length;for(let h=0,c=f-1;h<c;h++){d=e[h+1],p=Le.AddXY(e[h+1],s()*i,s()*i);const g=Le.Sub(d,l),m=Le.Len(g),b=Le.Div(g,m).mul(Math.min(m/4,a)),v=Le.Add(l,b),w=Le.Add(d,b.neg()),_=Le.Sub(p,u),k=Le.Len(_),y=Le.Div(_,k).mul(Math.min(k/4,a)),S=Le.Add(u,y),C=Le.Add(p,y.neg());h===c-1?(r+=`${ol(v)}L ${ol(d)}`,o+=`${ol(S)}L ${ol(p)}`):(r+=`${ol(v)}L ${ol(w)}Q ${ol(d)}`,o+=`${ol(S)}L ${ol(C)}Q ${ol(p)}`,l=d,u=p)}return[r,r+o]}function R$(n,e){const t=Math.min(n,e)/2,r=Math.max(n,e)-t*2;return Math.PI*(t*2)+2*r}function UIe(n,e,t){const r=Math.min(n,e)/2,o=Math.max(n,e)-r*2,a=(Math.PI*(r*2)+2*o)/t,s=n>e?[{type:"straight",start:new Le(r,0),delta:new Le(1,0)},{type:"arc",center:new Le(n-r,r),startAngle:-ji/2},{type:"straight",start:new Le(n-r,e),delta:new Le(-1,0)},{type:"arc",center:new Le(r,r),startAngle:ji/2}]:[{type:"straight",start:new Le(n,r),delta:new Le(0,1)},{type:"arc",center:new Le(r,e-r),startAngle:0},{type:"straight",start:new Le(0,e-r),delta:new Le(0,-1)},{type:"arc",center:new Le(r,r),startAngle:ji}];let l=0;const d=[];for(let u=0;u<t;u++){const p=s[0];p.type==="straight"?d.push(Le.Add(p.start,Le.Mul(p.delta,l))):d.push(If(p.center.x,p.center.y,r,p.startAngle+l/r)),l+=a;let f=p.type==="straight"?o:ji*r;for(;l>f;)l-=f,s.push(s.shift()),f=s[0].type==="straight"?o:ji*r}return d}const WIe=(n,e,t,r,o)=>{switch(n){case"s":return e;case"m":return t;case"l":return r;case"xl":return o}};function Ey(n,e,t,r){const o=Hf(t),i=R$(n,e),a=Math.max(Math.ceil(i/WIe(r,50,70,100,130)),6),s=i/a*.2,l=Math.max(n-s*2,1),d=Math.max(e-s*2,1),u=(n-l)/2,p=(e-d)/2,f=R$(l,d)/a,h=UIe(l,d,a).map(b=>b.addXY(u,p)),c=s*.3,g=h.slice(0);for(let b=0;b<Math.floor(a/2);b++)g[b]=Le.AddXY(g[b],o()*c,o()*c),g[a-b-1]=Le.AddXY(g[a-b-1],o()*c,o()*c);const m=[];for(let b=0;b<g.length;b++){const v=b===g.length-1?0:b+1,w=g[b],_=g[v],k=h[b],y=h[v],S=Le.Average([k,y]),C=Le.Angle(k,y)-Math.PI/2,I=Le.Dist(k,y),A=f-I,L=Le.Dist(w,_)/I,j=(Math.max(u,p)+A)*L,$=Le.Add(S,Le.FromAngle(C,j));$.x<0?$.x=0:$.x>n&&($.x=n),$.y<0?$.y=0:$.y>e&&($.y=e);const ee=BU(w,_,$),Q=Le.Dist(ee,w);m.push({leftPoint:w.clone(),rightPoint:_.clone(),arcPoint:$,center:ee,radius:Q})}return m}function BU(n,e,t){const r=n.x*(e.y-t.y)-n.y*(e.x-t.x)+e.x*t.y-t.x*e.y,o=(n.x*n.x+n.y*n.y)*(t.y-e.y)+(e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y),i=(n.x*n.x+n.y*n.y)*(e.x-t.x)+(e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x),a=-o/(2*r),s=-i/(2*r);return!Number.isFinite(a)||!Number.isFinite(s)?Le.Average([n,e,t]):new Le(a,s)}function VIe(n,e,t,r){const o=[],i=Ey(n,e,t,r);for(const{center:a,radius:s,leftPoint:l,rightPoint:d}of i)o.push(...KIe(l,d,a,s,10));return o}function Py(n,e,t,r){const o=Ey(n,e,t,r);let i=`M${Rt(o[0].leftPoint.x)},${Rt(o[0].leftPoint.y)}`;for(const{rightPoint:a,radius:s}of o)i+=` A${Rt(s)},${Rt(s)} 0 0,1 ${Rt(a.x)},${Rt(a.y)}`;return i+=" Z",i}function HU(n,e,t,r){const o=Hf(t),i=p=>{const f=r==="s"?.5:r==="m"?.7:r==="l"?.9:1.6;return p+o()*f*2},a=p=>new Le(i(p.x),i(p.y)),s=Ey(n,e,t,r);let l=`M${Rt(s[0].leftPoint.x)},${Rt(s[0].leftPoint.y)}`,d=a(s[0].leftPoint),u=`M${Rt(d.x)},${Rt(d.y)}`;for(const{rightPoint:p,radius:f,arcPoint:h}of s){l+=` A${Rt(f)},${Rt(f)} 0 0,1 ${Rt(p.x)},${Rt(p.y)}`;const c=a(p),g=a(h),m=BU(d,c,g),b=Math.abs(Le.Dist(m,d));u+=` A${Rt(b)},${Rt(b)} 0 0,1 ${Rt(c.x)},${Rt(c.y)}`,d=c}return l+u+" Z"}function KIe(n,e,t,r,o){const i=[],a=Le.Angle(t,n),s=Le.Angle(t,e),l=O5e(a,s);for(let d=0;d<o;d++){const u=d/(o-1),p=a+l*u,f=If(t.x,t.y,r,p);i.push(f)}return i}const YIe=ne.memo(function({dash:e,fill:t,color:r,strokeWidth:o,w:i,h:a,id:s,size:l}){const d=Ps(),u=Py(i,a,s,l),p=Ey(i,a,s,l);return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:d,d:u,fill:t,color:r}),K.jsx("g",{strokeWidth:o,stroke:d[r].solid,fill:"none",pointerEvents:"all",children:p.map(({leftPoint:f,rightPoint:h,center:c,radius:g},m)=>{const b=Ud(Ud(Le.Angle(c,h))-Ud(Le.Angle(c,f))),v=g*b,{strokeDasharray:w,strokeDashoffset:_}=fl(v,o,{style:e,start:"outset",end:"outset"});return K.jsx("path",{d:`M${f.x},${f.y}A${g},${g},0,0,1,${h.x},${h.y}`,strokeDasharray:w,strokeDashoffset:_},m)})})]})});function GIe({dash:n,fill:e,color:t,theme:r,strokeWidth:o,w:i,h:a,id:s,size:l}){const d=Py(i,a,s,l),u=Ey(i,a,s,l),p=document.createElementNS("http://www.w3.org/2000/svg","g");p.setAttribute("stroke-width",o.toString()),p.setAttribute("stroke",r[t].solid),p.setAttribute("fill","none");for(const{leftPoint:h,rightPoint:c,center:g,radius:m}of u){const b=Ud(Ud(Le.Angle(g,c))-Ud(Le.Angle(g,h))),v=m*b,{strokeDasharray:w,strokeDashoffset:_}=fl(v,o,{style:n,start:"outset",end:"outset"}),k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",`M${h.x},${h.y}A${m},${m},0,0,1,${c.x},${c.y}`),k.setAttribute("stroke-dasharray",w.toString()),k.setAttribute("stroke-dashoffset",_.toString()),p.appendChild(k)}const f=Lc({d,fill:e,color:t,theme:r});return eu(p,f)}const XIe=ne.memo(function({w:e,h:t,strokeWidth:r,dash:o,color:i,fill:a}){const s=Ps(),l=e/2,d=t/2,u=Math.max(0,l),p=Math.max(0,d),f=bb(u,p),{strokeDasharray:h,strokeDashoffset:c}=fl(f<64?f*2:f,r,{style:o,snap:4,closed:!0}),g=`M${l-u},${d}a${u},${p},0,1,1,${u*2},0a${u},${p},0,1,1,-${u*2},0`;return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:s,d:g,color:i,fill:a}),K.jsx("path",{d:g,strokeWidth:r,width:Rt(e),height:Rt(t),fill:"none",stroke:s[i].solid,strokeDasharray:h,strokeDashoffset:c,pointerEvents:"all"})]})});function qIe({w:n,h:e,strokeWidth:t,dash:r,color:o,theme:i,fill:a}){const s=n/2,l=e/2,d=Math.max(0,s-t/2),u=Math.max(0,l-t/2),p=bb(d,u),{strokeDasharray:f,strokeDashoffset:h}=fl(p<64?p*2:p,t,{style:r,snap:4,closed:!0}),c=`M${s-d},${l}a${d},${u},0,1,1,${d*2},0a${d},${u},0,1,1,-${d*2},0`,g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("d",c),g.setAttribute("stroke-width",t.toString()),g.setAttribute("width",n.toString()),g.setAttribute("height",e.toString()),g.setAttribute("fill","none"),g.setAttribute("stroke",i[o].solid),g.setAttribute("stroke-dasharray",f),g.setAttribute("stroke-dashoffset",h);const m=Lc({d:c,fill:a,color:o,theme:i});return eu(g,m)}function FU(n,e){if(e>n){const r=n/2;return`
    M0,${r}
    a${r},${r},0,1,1,${r*2},0
    L${n},${e-r}
    a${r},${r},0,1,1,-${r*2},0
    Z`}const t=e/2;return`
    M${t},0
    L${n-t},0
    a${t},${t},0,1,1,0,${t*2}
    L${t},${e}
    a${t},${t},0,1,1,0,${-t*2}
    Z`}function ZU(n,e){if(n>e){const r=e/2;return bb(r,r)+(n-r*2)*2}const t=n/2;return bb(t,t)+(e-t*2)*2}const JIe=ne.memo(function({w:e,h:t,strokeWidth:r,dash:o,color:i,fill:a}){const s=Ps(),l=FU(e,t),d=ZU(e,t),{strokeDasharray:u,strokeDashoffset:p}=fl(d<64?d*2:d,r,{style:o,snap:4,start:"outset",end:"outset",closed:!0});return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:s,d:l,color:i,fill:a}),K.jsx("path",{d:l,strokeWidth:r,width:Rt(e),height:Rt(t),fill:"none",stroke:s[i].solid,strokeDasharray:u,strokeDashoffset:p,pointerEvents:"all"})]})});function D$({w:n,h:e,strokeWidth:t,dash:r,color:o,theme:i,fill:a}){const s=FU(n,e),l=ZU(n,e),{strokeDasharray:d,strokeDashoffset:u}=fl(l<64?l*2:l,t,{style:r,snap:4,closed:!0}),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",s),p.setAttribute("stroke-width",t.toString()),p.setAttribute("width",n.toString()),p.setAttribute("height",e.toString()),p.setAttribute("fill","none"),p.setAttribute("stroke",i[o].solid),p.setAttribute("stroke-dasharray",d),p.setAttribute("stroke-dashoffset",u);const f=Lc({d:s,fill:a,color:o,theme:i});return eu(p,f)}const QIe=ne.memo(function({dash:e,fill:t,color:r,strokeWidth:o,outline:i,lines:a}){const s=Ps(),l="M"+i[0]+"L"+i.slice(1)+"Z";return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:s,d:l,fill:t,color:r}),K.jsxs("g",{strokeWidth:o,stroke:s[r].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(i.length)).map((d,u)=>{const p=i[u],f=i[(u+1)%i.length],h=Le.Dist(p,f),{strokeDasharray:c,strokeDashoffset:g}=fl(h,o,{style:e,start:"outset",end:"outset"});return K.jsx("line",{x1:p.x,y1:p.y,x2:f.x,y2:f.y,strokeDasharray:c,strokeDashoffset:g},u)}),a&&a.map(([d,u],p)=>{const f=Le.Dist(d,u),{strokeDasharray:h,strokeDashoffset:c}=fl(f,o,{style:e,start:"skip",end:"outset",snap:e==="dotted"?4:void 0});return K.jsx("path",{d:`M${d.x},${d.y}L${u.x},${u.y}`,stroke:s[r].solid,strokeWidth:o,fill:"none",strokeDasharray:h,strokeDashoffset:c},`line_fg_${p}`)})]})]})});function eTe({dash:n,fill:e,color:t,theme:r,strokeWidth:o,outline:i,lines:a}){const s=document.createElementNS("http://www.w3.org/2000/svg","g");if(s.setAttribute("stroke-width",o.toString()),s.setAttribute("stroke",r[t].solid),s.setAttribute("fill","none"),Array.from(Array(i.length)).forEach((d,u)=>{const p=i[u],f=i[(u+1)%i.length],h=Le.Dist(p,f),{strokeDasharray:c,strokeDashoffset:g}=fl(h,o,{style:n}),m=document.createElementNS("http://www.w3.org/2000/svg","line");m.setAttribute("x1",p.x.toString()),m.setAttribute("y1",p.y.toString()),m.setAttribute("x2",f.x.toString()),m.setAttribute("y2",f.y.toString()),m.setAttribute("stroke-dasharray",c.toString()),m.setAttribute("stroke-dashoffset",g.toString()),s.appendChild(m)}),a)for(const[d,u]of a){const p=Le.Dist(d,u),{strokeDasharray:f,strokeDashoffset:h}=fl(p,o,{style:n,start:"skip",end:"skip",snap:n==="dotted"?4:2}),c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1",d.x.toString()),c.setAttribute("y1",d.y.toString()),c.setAttribute("x2",u.x.toString()),c.setAttribute("y2",u.y.toString()),c.setAttribute("stroke-dasharray",f.toString()),c.setAttribute("stroke-dashoffset",h.toString()),s.appendChild(c)}const l=Lc({d:"M"+i[0]+"L"+i.slice(1)+"Z",fill:e,color:t,theme:r});return eu(s,l)}const tTe=ne.memo(function({fill:e,color:t,strokeWidth:r,w:o,h:i,id:a,size:s}){const l=Ps(),d=HU(o,i,a,s);return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:l,d,fill:e,color:t}),K.jsx("path",{d,stroke:l[t].solid,strokeWidth:r,fill:"none"})]})});function nTe({fill:n,color:e,strokeWidth:t,theme:r,w:o,h:i,id:a,size:s}){const l=HU(o,i,a,s),d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",l),d.setAttribute("stroke-width",t.toString()),d.setAttribute("stroke",r[e].solid),d.setAttribute("fill","none");const u=Lc({d:l,fill:n,color:e,theme:r});return eu(d,u)}ne.memo(function({id:e,w:t,h:r,strokeWidth:o,fill:i,color:a}){const s=Ps(),l=RE(e,t,r,o),d=VU(e,t,r,o);return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:s,d:l,color:a,fill:i}),K.jsx("path",{d,fill:s[a].solid,strokeWidth:0,pointerEvents:"all"})]})});function rTe({id:n,w:e,h:t,strokeWidth:r,fill:o,color:i,theme:a}){const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",VU(n,e,t,r)),s.setAttribute("fill",a[i].solid);const l=Lc({d:RE(n,e,t,r),fill:o,color:i,theme:a});return eu(s,l)}function UU(n){return{size:1+n,thinning:.25,end:{taper:n},start:{taper:n},streamline:0,smoothing:1,simulatePressure:!1}}function WU(n,e,t,r){const o=Hf(n),i=e/2,a=t/2,s=bb(i,a),l=[],d=Ni*o(),u=Ni+Ri/2+Math.abs(o())*Ri,p=Math.max(16,s/10);for(let f=0;f<p;f++){const h=f/(p-1),c=d+h*u,g=Math.cos(c),m=Math.sin(c);l.push(new Le(i*g+e*.5+.05*o(),a*m+t/2+.05*o(),Math.min(1,.5+Math.abs(.5-(o()>0?ul.easeInOutSine(h):ul.easeInExpo(h)))/2)))}return wh(l,UU(r))}function VU(n,e,t,r){const o=UU(r);return dm(pm(gm(WU(n,e,t,r),o),o))}function RE(n,e,t,r){return b1(WU(n,e,t,r))}const oTe=ne.memo(function({id:e,outline:t,lines:r,fill:o,color:i,strokeWidth:a}){const s=Ps(),l=Ob(e,t,a/3,a*2,2);let d=Tb(l);if(r)for(const[f,h]of r)d+=`M${f.x},${f.y}L${h.x},${h.y}`;const u=Ob(e,t,0,a*2,1),p=Tb(u);return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{d:p,fill:o,color:i,theme:s}),K.jsx("path",{d,stroke:s[i].solid,strokeWidth:a,fill:"none"})]})});function iTe({id:n,outline:e,lines:t,fill:r,color:o,theme:i,strokeWidth:a}){const s=Ob(n,e,a/3,a*2,2);let l=Tb(s);if(t)for(const[h,c]of t)l+=`M${h.x},${h.y}L${c.x},${c.y}`;const d=Ob(n,e,0,a*2,1),u=Tb(d),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",l),p.setAttribute("fill","none"),p.setAttribute("stroke",i[o].solid),p.setAttribute("stroke-width",a.toString());const f=Lc({d:u,fill:r,color:o,theme:i});return eu(p,f)}const aTe=ne.memo(function({fill:e,color:t,strokeWidth:r,w:o,h:i,id:a,size:s}){const l=Ps(),d=Py(o,i,a,s);return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{theme:l,d,fill:e,color:t}),K.jsx("path",{d,stroke:l[t].solid,strokeWidth:r,fill:"none"})]})});function sTe({fill:n,color:e,strokeWidth:t,theme:r,w:o,h:i,id:a,size:s}){const l=Py(o,i,a,s),d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",l),d.setAttribute("stroke-width",t.toString()),d.setAttribute("stroke",r[e].solid),d.setAttribute("fill","none");const u=Lc({d:l,fill:n,color:e,theme:r});return eu(d,u)}const N$=ne.memo(function({w:e,h:t,strokeWidth:r,fill:o,color:i}){const a=Ps(),s=e/2,l=t/2,d=Math.max(0,s),u=Math.max(0,l),p=`M${s-d},${l}a${d},${u},0,1,1,${d*2},0a${d},${u},0,1,1,-${d*2},0`;return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{d:p,color:i,fill:o,theme:a}),K.jsx("path",{d:p,stroke:a[i].solid,strokeWidth:r,fill:"none"})]})});function lTe({w:n,h:e,strokeWidth:t,fill:r,color:o,theme:i}){const a=n/2,s=e/2,l=Math.max(0,a),d=Math.max(0,s),u=`M${a-l},${s}a${l},${d},0,1,1,${l*2},0a${l},${d},0,1,1,-${l*2},0`,p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",u),p.setAttribute("stroke-width",t.toString()),p.setAttribute("width",n.toString()),p.setAttribute("height",e.toString()),p.setAttribute("fill","none"),p.setAttribute("stroke",i[o].solid);const f=Lc({d:u,fill:r,color:o,theme:i});return eu(p,f)}const z$=ne.memo(function({w:e,h:t,strokeWidth:r,fill:o,color:i}){const a=Ps(),s=DE(e,t);return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{d:s,color:i,fill:o,theme:a}),K.jsx("path",{d:s,stroke:a[i].solid,strokeWidth:r,fill:"none"})]})});function cTe({w:n,h:e,strokeWidth:t,fill:r,color:o,theme:i}){const a=DE(n,e),s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",a),s.setAttribute("stroke-width",t.toString()),s.setAttribute("width",n.toString()),s.setAttribute("height",e.toString()),s.setAttribute("fill","none"),s.setAttribute("stroke",i[o].solid);const l=Lc({d:a,fill:r,color:o,theme:i});return eu(s,l)}function DE(n,e){let t;if(e>n){const r=n/2;t=`
    M0,${r}
    a${r},${r},0,1,1,${r*2},0
    L${n},${e-r}
    a${r},${r},0,1,1,-${r*2},0
    Z`}else{const r=e/2;t=`
    M${r},0
    L${n-r},0
    a${r},${r},0,1,1,0,${r*2}
    L${r},${e}
    a${r},${r},0,1,1,0,${-r*2}
    Z`}return t}const dTe=ne.memo(function({outline:e,lines:t,fill:r,color:o,strokeWidth:i}){const a=Ps();let s="M"+e[0]+"L"+e.slice(1)+"Z";if(t)for(const[l,d]of t)s+=`M${l.x},${l.y}L${d.x},${d.y}`;return K.jsxs(K.Fragment,{children:[K.jsx(Qa,{d:s,fill:r,color:o,theme:a}),K.jsx("path",{d:s,stroke:a[o].solid,strokeWidth:i,fill:"none"})]})});function uTe({outline:n,lines:e,fill:t,color:r,strokeWidth:o,theme:i}){const a="M"+n[0]+"L"+n.slice(1)+"Z",s=a;let l=a;if(e)for(const[p,f]of e)l+=`M${p.x},${p.y}L${f.x},${f.y}`;const d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("d",l),d.setAttribute("stroke-width",o.toString()),d.setAttribute("stroke",i[r].solid),d.setAttribute("fill","none");const u=Lc({d:s,fill:t,color:r,theme:i});return eu(d,u)}const d9=16,Kc=17*3;class i6 extends Wm{constructor(){super(...arguments);J(this,"canEdit",()=>!0);J(this,"onEditEnd",t=>{const{id:r,type:o,props:{text:i}}=t;i.trimEnd()!==t.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:i.trimEnd()}}])});J(this,"onResize",(t,{handle:r,newPoint:o,scaleX:i,scaleY:a,initialShape:s})=>{let l=s.props.w*i,d=(s.props.h+s.props.growY)*a,u=0,p=0;if(t.props.text.trim()){let g=Math.max(Math.abs(l),Kc),m=Math.max(Math.abs(d),Kc);g<Kc&&m===Kc&&(g=Kc),g===Kc&&m<Kc&&(m=Kc);const b=l3(this.editor,{...t,props:{...t.props,w:g,h:m}}),v=Math.max(Math.abs(l),b.w)*Math.sign(l),w=Math.max(Math.abs(d),b.h)*Math.sign(d);u=Math.abs(v)-Math.abs(l),p=Math.abs(w)-Math.abs(d),l=v,d=w}const f=new Le(0,0);i<0&&(f.x+=l),(r==="left"||r==="top_left"||r==="bottom_left")&&(f.x+=i<0?u:-u),a<0&&(f.y+=d),(r==="top"||r==="top_left"||r==="top_right")&&(f.y+=a<0?p:-p);const{x:h,y:c}=f.rot(t.rotation).add(o);return{x:h,y:c,props:{w:Math.max(Math.abs(l),1),h:Math.max(Math.abs(d),1),growY:0}}});J(this,"onBeforeCreate",t=>{if(!t.props.text)return t.props.growY?{...t,props:{...t.props,growY:0}}:void 0;const r=t.props.h,o=l3(this.editor,t).h;let i=null;if(o>r?i=o-r:t.props.growY&&(i=0),i!==null)return{...t,props:{...t.props,growY:i}}});J(this,"onBeforeUpdate",(t,r)=>{const o=t.props.text.trimEnd(),i=r.props.text.trimEnd();if(o===i&&t.props.font===r.props.font&&t.props.size===r.props.size)return;if(o&&!i)return{...r,props:{...r.props,growY:0}};const a=t.props.w,s=t.props.h,l=l3(this.editor,r),d=l.w,u=l.h;if(!o&&i&&i.length===1){let f=Math.max(a,d),h=Math.max(s,u);return t.props.w<Kc&&t.props.h<Kc&&(f=Math.max(f,Kc),h=Math.max(h,Kc),f=Math.max(f,h),h=Math.max(f,h)),{...r,props:{...r.props,w:f,h,growY:0}}}let p=null;if(u>s?p=u-s:t.props.growY&&(p=0),p!==null)return{...r,props:{...r.props,growY:p,w:Math.max(r.props.w,d)}};if(d>t.props.w)return{...r,props:{...r.props,w:d}}});J(this,"onDoubleClick",t=>{if(this.editor.inputs.altKey)switch(t.props.geo){case"rectangle":return{...t,props:{geo:"check-box"}};case"check-box":return{...t,props:{geo:"rectangle"}}}})}getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}getGeometry(t){const r=Math.max(1,t.props.w),o=Math.max(1,t.props.h+t.props.growY),i=r/2,a=o/2,s=dl[t.props.size],l=t.props.fill!=="none";let d;switch(t.props.geo){case"cloud":{d=new xs({points:VIe(r,o,t.id,t.props.size),isFilled:l});break}case"triangle":{d=new xs({points:[new Le(i,0),new Le(r,o),new Le(0,o)],isFilled:l});break}case"diamond":{d=new xs({points:[new Le(i,0),new Le(r,a),new Le(i,o),new Le(0,a)],isFilled:l});break}case"pentagon":{d=new xs({points:k8(r,o,5),isFilled:l});break}case"hexagon":{d=new xs({points:k8(r,o,6),isFilled:l});break}case"octagon":{d=new xs({points:k8(r,o,8),isFilled:l});break}case"ellipse":{d=new LF({width:r,height:o,isFilled:l});break}case"oval":{d=new S7e({width:r,height:o,isFilled:l});break}case"star":{const m=Ni/5/2,b=Math.floor(5/4)*2,v=5*2-b,w=0,_=Math.floor(5/2)*2,k=Math.cos(-Ri+b*m)*r/2,y=Math.cos(-Ri+v*m)*r/2,S=Math.sin(-Ri+w*m)*o/2,C=Math.sin(-Ri+_*m)*o/2,I=r-Math.abs(k-y),A=o-Math.abs(C-S),T=r/2+y-(r/2-k),L=o/2+S-(o/2-C),j=1,$=(r-T)/2,ee=(o-L)/2,Q=(r+I)/2,pe=(o+A)/2,ie=Q*j/2,te=pe*j/2;d=new xs({points:Array.from(Array(5*2)).map((Z,D)=>{const B=-Ri+D*m;return new Le($+(D%2?ie:Q)*Math.cos(B),ee+(D%2?te:pe)*Math.sin(B))}),isFilled:l});break}case"rhombus":{const g=Math.min(r*.38,o*.38);d=new xs({points:[new Le(g,0),new Le(r,0),new Le(r-g,o),new Le(0,o)],isFilled:l});break}case"rhombus-2":{const g=Math.min(r*.38,o*.38);d=new xs({points:[new Le(0,0),new Le(r-g,0),new Le(r,o),new Le(g,o)],isFilled:l});break}case"trapezoid":{const g=Math.min(r*.38,o*.38);d=new xs({points:[new Le(g,0),new Le(r-g,0),new Le(r,o),new Le(0,o)],isFilled:l});break}case"arrow-right":{const g=Math.min(r,o)*.38,m=o*.16;d=new xs({points:[new Le(0,m),new Le(r-g,m),new Le(r-g,0),new Le(r,o/2),new Le(r-g,o),new Le(r-g,o-m),new Le(0,o-m)],isFilled:l});break}case"arrow-left":{const g=Math.min(r,o)*.38,m=o*.16;d=new xs({points:[new Le(g,0),new Le(g,m),new Le(r,m),new Le(r,o-m),new Le(g,o-m),new Le(g,o),new Le(0,o/2)],isFilled:l});break}case"arrow-up":{const g=r*.16,m=Math.min(r,o)*.38;d=new xs({points:[new Le(r/2,0),new Le(r,m),new Le(r-g,m),new Le(r-g,o),new Le(g,o),new Le(g,m),new Le(0,m)],isFilled:l});break}case"arrow-down":{const g=r*.16,m=Math.min(r,o)*.38;d=new xs({points:[new Le(g,0),new Le(r-g,0),new Le(r-g,o-m),new Le(r,o-m),new Le(r/2,o),new Le(0,o-m),new Le(g,o-m)],isFilled:l});break}case"check-box":case"x-box":case"rectangle":{d=new tp({width:r,height:o,isFilled:l,isSnappable:!0});break}}const u=l3(this.editor,t),p=Math.min(r,Math.max(u.w,Math.min(32,Math.max(1,r-8)))),f=Math.min(o,Math.max(u.h,Math.min(32,Math.max(1,r-8)))),h=c3(t.props,s),c=h?h.map(g=>new i0({points:g})):[];return new s1({children:[d,new tp({x:t.props.align==="start"?0:t.props.align==="end"?r-p:(r-p)/2,y:t.props.verticalAlign==="start"?0:t.props.verticalAlign==="end"?o-f:(o-f)/2,width:p,height:f,isFilled:!0,isSnappable:!1,isLabel:!0}),...c],isSnappable:!1})}component(t){const{id:r,type:o,props:i}=t,a=dl[i.size],{w:s,color:l,labelColor:d,fill:u,dash:p,growY:f,font:h,align:c,verticalAlign:g,size:m,text:b}=i,v=()=>{const w=i.h+f;switch(i.geo){case"cloud":{if(p==="solid")return K.jsx(aTe,{color:l,fill:u,strokeWidth:a,w:s,h:w,id:r,size:m});if(p==="dashed"||p==="dotted")return K.jsx(YIe,{color:l,fill:u,strokeWidth:a,w:s,h:w,id:r,size:m,dash:p});if(p==="draw")return K.jsx(tTe,{color:l,fill:u,strokeWidth:a,w:s,h:w,id:r,size:m});break}case"ellipse":{if(p==="solid")return K.jsx(N$,{strokeWidth:a,w:s,h:w,color:l,fill:u});if(p==="dashed"||p==="dotted")return K.jsx(XIe,{id:r,strokeWidth:a,w:s,h:w,dash:p,color:l,fill:u});if(p==="draw")return K.jsx(N$,{strokeWidth:a,w:s,h:w,color:l,fill:u});break}case"oval":{if(p==="solid")return K.jsx(z$,{strokeWidth:a,w:s,h:w,color:l,fill:u});if(p==="dashed"||p==="dotted")return K.jsx(JIe,{id:r,strokeWidth:a,w:s,h:w,dash:p,color:l,fill:u});if(p==="draw")return K.jsx(z$,{strokeWidth:a,w:s,h:w,color:l,fill:u});break}default:{const _=this.editor.getShapeGeometry(t),k=_ instanceof s1?_.children[0].vertices:_.vertices,y=c3(t.props,a);if(p==="solid")return K.jsx(dTe,{fill:u,color:l,strokeWidth:a,outline:k,lines:y});if(p==="dashed"||p==="dotted")return K.jsx(QIe,{dash:p,fill:u,color:l,strokeWidth:a,outline:k,lines:y});if(p==="draw")return K.jsx(oTe,{id:r,fill:u,color:l,strokeWidth:a,outline:k,lines:y})}}};return K.jsxs(K.Fragment,{children:[K.jsx(vc,{id:r,children:v()}),K.jsx(DU,{id:r,type:o,font:h,fill:u,size:m,align:c,verticalAlign:g,text:b,labelColor:d,wrap:!0,bounds:i.geo==="cloud"?this.getGeometry(t).bounds:void 0}),t.props.url&&K.jsx(_y,{url:t.props.url,zoomLevel:this.editor.zoomLevel})]})}indicator(t){const{id:r,props:o}=t,{w:i,size:a}=o,s=o.h+o.growY,l=dl[a];switch(o.geo){case"ellipse":return o.dash==="draw"?K.jsx("path",{d:RE(r,i,s,l)}):K.jsx("ellipse",{cx:i/2,cy:s/2,rx:i/2,ry:s/2});case"oval":return K.jsx("path",{d:DE(i,s)});case"cloud":return K.jsx("path",{d:Py(i,s,r,a)});default:{const d=this.editor.getShapeGeometry(t),u=d instanceof s1?d.children[0].vertices:d.vertices;let p;if(o.dash==="draw"){const h=Ob(r,u,0,l*2,1);p=Tb(h)}else p="M"+u[0]+"L"+u.slice(1)+"Z";const f=c3(t.props,l);if(f)for(const[h,c]of f)p+=`M${h.x},${h.y}L${c.x},${c.y}`;return K.jsx("path",{d:p})}}}toSvg(t,r){const{id:o,props:i}=t,a=dl[i.size],s=Xl({isDarkMode:this.editor.user.isDarkMode});r.addExportDef(AE(t.props.fill,s));let l;switch(i.geo){case"ellipse":{switch(i.dash){case"draw":l=rTe({id:o,w:i.w,h:i.h,color:i.color,fill:i.fill,strokeWidth:a,theme:s});break;case"solid":l=lTe({strokeWidth:a,w:i.w,h:i.h,color:i.color,fill:i.fill,theme:s});break;default:l=qIe({id:o,strokeWidth:a,w:i.w,h:i.h,dash:i.dash,color:i.color,fill:i.fill,theme:s});break}break}case"oval":{switch(i.dash){case"draw":l=D$({id:o,strokeWidth:a,w:i.w,h:i.h,dash:i.dash,color:i.color,fill:i.fill,theme:s});break;case"solid":l=cTe({strokeWidth:a,w:i.w,h:i.h,color:i.color,fill:i.fill,theme:s});break;default:l=D$({id:o,strokeWidth:a,w:i.w,h:i.h,dash:i.dash,color:i.color,fill:i.fill,theme:s})}break}case"cloud":{switch(i.dash){case"draw":l=nTe({id:o,strokeWidth:a,w:i.w,h:i.h,color:i.color,fill:i.fill,size:i.size,theme:s});break;case"solid":l=sTe({strokeWidth:a,w:i.w,h:i.h,color:i.color,fill:i.fill,size:i.size,id:o,theme:s});break;default:l=GIe({id:o,strokeWidth:a,w:i.w,h:i.h,dash:i.dash,color:i.color,fill:i.fill,theme:s,size:i.size})}break}default:{const d=this.editor.getShapeGeometry(t),u=d instanceof s1?d.children[0].vertices:d.vertices,p=c3(t.props,a);switch(i.dash){case"draw":l=iTe({id:o,fill:i.fill,color:i.color,strokeWidth:a,outline:u,lines:p,theme:s});break;case"solid":l=uTe({fill:i.fill,color:i.color,strokeWidth:a,outline:u,lines:p,theme:s});break;default:l=eTe({dash:i.dash,fill:i.fill,color:i.color,strokeWidth:a,outline:u,lines:p,theme:s});break}break}}if(i.text){const d=this.editor.getShapeGeometry(t).bounds;r.addExportDef(Ew(t.props.font));const u=NU({editor:this.editor,shape:t,font:uy[t.props.font],bounds:d}),p=u.cloneNode(!0);p.setAttribute("fill",s[t.props.labelColor].solid),p.setAttribute("stroke","none");const f=u.cloneNode(!0);f.setAttribute("stroke-width","2"),f.setAttribute("fill",s.background),f.setAttribute("stroke",s.background);const h=document.createElementNS("http://www.w3.org/2000/svg","g");if(h.append(f),h.append(p),l.nodeName==="g")return l.appendChild(h),l;{const c=document.createElementNS("http://www.w3.org/2000/svg","g");return c.appendChild(l),c.appendChild(h),c}}return l}getCanvasSvgDefs(){return[LE()]}}J(i6,"type","geo"),J(i6,"props",Wye),J(i6,"migrations",Vye);function l3(n,e){const t=e.props.text.trimEnd();if(!t)return{w:0,h:0};const r=n.textMeasure.measureText("w",{...Ws,fontFamily:Eh[e.props.font],fontSize:mm[e.props.size],width:"fit-content",maxWidth:"100px"}),o={s:2,m:3.5,l:5,xl:10},i=n.textMeasure.measureText(t,{...Ws,fontFamily:Eh[e.props.font],fontSize:mm[e.props.size],width:"fit-content",minWidth:r.w+"px",maxWidth:Math.max(0,Math.ceil(r.w+o[e.props.size]),Math.ceil(e.props.w-d9*2))+"px"});return{w:i.w+d9*2,h:i.h+d9*2}}function c3(n,e){switch(n.geo){case"x-box":return hTe(n.w,n.h,e,n.dash);case"check-box":return fTe(n.w,n.h);default:return}}function hTe(n,e,t,r){const o=r==="draw"?.62:0;if(r==="dashed")return[[new Le(0,0),new Le(n/2,e/2)],[new Le(n,e),new Le(n/2,e/2)],[new Le(0,e),new Le(n/2,e/2)],[new Le(n,0),new Le(n/2,e/2)]];const i=s=>Math.max(0,Math.min(n,s)),a=s=>Math.max(0,Math.min(e,s));return[[new Le(i(t*o),a(t*o)),new Le(i(n-t*o),a(e-t*o))],[new Le(i(t*o),a(e-t*o)),new Le(i(n-t*o),a(t*o))]]}function fTe(n,e){const t=Math.min(n,e)*.82,r=(n-t)/2,o=(e-t)/2,i=s=>Math.max(0,Math.min(n,s)),a=s=>Math.max(0,Math.min(e,s));return[[new Le(i(r+t*.25),a(o+t*.52)),new Le(i(r+t*.45),a(o+t*.82))],[new Le(i(r+t*.45),a(o+t*.82)),new Le(i(r+t*.82),a(o+t*.22))]]}function pTe(){const[n,e]=ne.useState(!1);return ne.useEffect(()=>{const r=CSS.supports("color","color(display-p3 1 1 1)"),o=matchMedia("(color-gamut: p3)");e(r&&o.matches);const i=()=>e(r&&o.matches);return o.addEventListener("change",i),()=>o.removeEventListener("change",i)},[]),sr(es.forceSrgb)||!n?"srgb":"p3"}const B$=.35,H$=.82;class a6 extends Wd{constructor(){super(...arguments);J(this,"hideResizeHandles",t=>d3(t));J(this,"hideRotateHandle",t=>d3(t));J(this,"hideSelectionBoundsFg",t=>d3(t));J(this,"onResize",(t,r)=>{const{scaleX:o,scaleY:i}=r,a=[];for(const s of t.props.segments)a.push({...s,points:s.points.map(({x:l,y:d,z:u})=>({x:o*l,y:i*d,z:u}))});return{props:{segments:a}}})}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}getGeometry(t){const r=cg(t);if(d3(t))return new AF({x:-r/2,y:-r/2,radius:r/2,isFilled:!0});const{strokePoints:o,sw:i}=KU(t,r,!0),a=OS({strokeWidth:i,showAsComplete:!0});return gm(o,a),new xs({points:pm(o,a),isFilled:!0})}component(t){return K.jsx(F$,{strokeWidth:cg(t),shape:t,opacity:B$})}backgroundComponent(t){return K.jsx(F$,{strokeWidth:cg(t),shape:t,opacity:H$})}indicator(t){var p;const r=X4(),o=cg(t),i=kg(t.props.segments);let a=o;!r&&!t.props.isPen&&i.length===1&&(a+=Hf(t.id)()*(o/6));const s=t.props.isComplete||((p=zl(t.props.segments))==null?void 0:p.type)==="straight",l=OS({strokeWidth:o,showAsComplete:s}),d=wh(i,l);let u;return d.length<2?u=mTe(i[0],a):u=b1(d,!1),K.jsx("path",{d:u})}toSvg(t){const r=Xl({isDarkMode:this.editor.user.isDarkMode});return Z$(cg(t),t,B$,r)}toBackgroundSvg(t){const r=Xl({isDarkMode:this.editor.user.isDarkMode});return Z$(cg(t),t,H$,r)}}J(a6,"type","highlight"),J(a6,"props",Gye),J(a6,"migrations",Xye);function gTe(n){return`M ${n.x} ${n.y} m -${.1}, 0 a ${.1},${.1} 0 1,0 ${.1*2},0 a ${.1},${.1} 0 1,0 -${.1*2},0`}function mTe(n,e){const t=e/2;return`M ${n.x} ${n.y} m -${t}, 0 a ${t},${t} 0 1,0 ${t*2},0 a ${t},${t} 0 1,0 -${t*2},0`}function KU(n,e,t){var l;const r=kg(n.props.segments),o=n.props.isComplete||((l=zl(n.props.segments))==null?void 0:l.type)==="straight";let i=e;!t&&!n.props.isPen&&r.length===1&&(i+=Hf(n.id)()*(e/6));const a=OS({strokeWidth:i,showAsComplete:o});return{strokePoints:wh(r,a),sw:i}}function YU(n,e,t){const{strokePoints:r,sw:o}=KU(n,e,t);return{solidStrokePath:r.length>1?b1(r,!1):gTe(n.props.segments[0].points[0]),sw:o}}function F$({strokeWidth:n,shape:e,opacity:t}){const r=Ps(),o=X4(),{solidStrokePath:i,sw:a}=YU(e,n,o),s=pTe(),l=r[e.props.color].highlight[s];return K.jsx(vc,{id:e.id,style:{opacity:t},children:K.jsx("path",{d:i,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:l,strokeWidth:a})})}function Z$(n,e,t,r){const{solidStrokePath:o,sw:i}=YU(e,n,!1),a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",o),a.setAttribute("fill","none"),a.setAttribute("stroke",r[e.props.color].highlight.srgb),a.setAttribute("stroke-width",`${i}`),a.setAttribute("opacity",`${t}`),a}function cg(n){return Df[n.props.size]*1.12}function d3(n){return n.props.segments.length===1&&n.props.segments[0].points.length<2}function GU(){const[n,e]=ne.useState(!1);return ne.useEffect(()=>{const t=window.matchMedia("(prefers-reduced-motion: reduce)"),r=()=>{e(t.matches)};return r(),t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[]),n}const vTe=async n=>new Promise((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=()=>t(new Error("Failed to load image")),r.crossOrigin="anonymous",r.src=n}),bTe=async n=>{const e=await vTe(n),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");if(r)return r.drawImage(e,0,0),t.toDataURL()};async function yTe(n){const t=await(await fetch(n)).blob();return new Promise((r,o)=>{const i=new FileReader;i.onloadend=()=>r(i.result),i.onerror=o,i.readAsDataURL(t)})}class s6 extends Wm{constructor(){super(...arguments);J(this,"isAspectRatioLocked",()=>!0);J(this,"canCrop",()=>!0);J(this,"onDoubleClick",t=>{const r=t.props.assetId?this.editor.getAsset(t.props.assetId):void 0;!r||!(r.props.src&&"mimeType"in r.props&&r.props.mimeType==="image/gif")||this.editor.updateShapes([{type:"image",id:t.id,props:{playing:!t.props.playing}}])});J(this,"onDoubleClickEdge",t=>{const r=t.props;if(!r||this.editor.croppingShapeId!==t.id)return;const o=hl(r.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},i=1/(o.bottomRight.x-o.topLeft.x)*t.props.w,a=1/(o.bottomRight.y-o.topLeft.y)*t.props.h,s=new Le(o.topLeft.x*i,o.topLeft.y*a).rot(t.rotation),l={id:t.id,type:t.type,x:t.x-s.x,y:t.y-s.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:i,h:a}};this.editor.updateShapes([l])})}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}component(t){var f,h;const r=U$(t),o=CL(t.id),i=GU(),[a,s]=ne.useState(""),l=t.props.assetId?this.editor.getAsset(t.props.assetId):void 0;if((l==null?void 0:l.type)==="bookmark")throw Error("Bookmark assets can't be rendered as images");const u=sr("onlySelectedShape",()=>{var c;return t.id===((c=this.editor.onlySelectedShape)==null?void 0:c.id)},[this.editor])&&o&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),p=i&&(((f=l==null?void 0:l.props.mimeType)==null?void 0:f.includes("video"))||((h=l==null?void 0:l.props.mimeType)==null?void 0:h.includes("gif")));return ne.useEffect(()=>{if(l!=null&&l.props.src&&"mimeType"in l.props&&(l==null?void 0:l.props.mimeType)==="image/gif"){let c=!1;return(async()=>{const m=await bTe(l.props.src);c||m&&s(m)})(),()=>{c=!0}}},[i,l==null?void 0:l.props]),K.jsxs(K.Fragment,{children:[(l==null?void 0:l.props.src)&&u&&K.jsx("div",{style:r,children:K.jsx("div",{className:`tl-image tl-image-${t.id}-crop`,style:{opacity:.1,backgroundImage:`url(${!t.props.playing||p?a:l.props.src})`},draggable:!1})}),K.jsx(hm,{id:t.id,style:{overflow:"hidden"},children:K.jsxs("div",{className:"tl-image-container",style:r,children:[l!=null&&l.props.src?K.jsx("div",{className:`tl-image tl-image-${t.id}`,style:{backgroundImage:`url(${!t.props.playing||p?a:l.props.src})`},draggable:!1}):null,(l==null?void 0:l.props.isAnimated)&&!t.props.playing&&K.jsx("div",{className:"tl-image__tg",children:"GIF"})]})}),"url"in t.props&&t.props.url&&K.jsx(_y,{url:t.props.url,zoomLevel:this.editor.zoomLevel})]})}indicator(t){return CL(t.id)?null:K.jsx("rect",{width:Rt(t.props.w),height:Rt(t.props.h)})}async toSvg(t){const r=document.createElementNS("http://www.w3.org/2000/svg","g"),o=t.props.assetId?this.editor.getAsset(t.props.assetId):null;let i=(o==null?void 0:o.props.src)||"";i&&i.startsWith("http")&&(i=await yTe(i)||"");const a=document.createElementNS("http://www.w3.org/2000/svg","image");a.setAttributeNS("http://www.w3.org/1999/xlink","href",i);const s=U$(t),l=t.props.crop;if(s&&l){const{transform:d,width:u,height:p}=s,f=[new Le(l.topLeft.x*u,l.topLeft.y*p),new Le(l.bottomRight.x*u,l.topLeft.y*p),new Le(l.bottomRight.x*u,l.bottomRight.y*p),new Le(l.topLeft.x*u,l.bottomRight.y*p)],h=document.createElementNS("http://www.w3.org/2000/svg","g");h.style.clipPath=`polygon(${f.map(c=>`${c.x}px ${c.y}px`).join(",")})`,a.setAttribute("width",u.toString()),a.setAttribute("height",p.toString()),a.style.transform=d,h.appendChild(a),r.appendChild(h)}else a.setAttribute("width",t.props.w.toString()),a.setAttribute("height",t.props.h.toString()),r.appendChild(a);return r}}J(s6,"type","image"),J(s6,"props",Jye),J(s6,"migrations",Qye);function U$(n){const e=n.props.crop,t=e==null?void 0:e.topLeft;if(!t)return;const r=1/(e.bottomRight.x-e.topLeft.x)*n.props.w,o=1/(e.bottomRight.y-e.topLeft.y)*n.props.h,i=-t.x*r,a=-t.y*o;return{transform:`translate(${i}px, ${a}px)`,width:r,height:o}}function AS(n,e){const{start:t,end:r}=n;return e?`M${Rt(t.x)},${Rt(t.y)} L${Rt(r.x)},${Rt(r.y)} `:`${Rt(r.x)},${Rt(r.y)} `}function LS(n,e){const{a:t,b:r,c:o,d:i}=n;return Le.Equals(t,i)?"":`${e?`M${Rt(t.x)},${Rt(t.y)}`:""}C${Rt(r.x)},${Rt(r.y)} ${Rt(o.x)},${Rt(o.y)} ${Rt(i.x)},${Rt(i.y)}`}function XU(n,e){let t=n.segments.reduce((r,o,i)=>r+LS(o,i===0),"");return e&&(t+="Z"),t}function xTe(n,e){let t=n.segments.reduce((r,o,i)=>r+AS(o,i===0),"");return e&&(t+="Z"),t}function qU(n,e=!1){return n instanceof i0?xTe(n,e):XU(n,e)}function JU(n){return{size:n,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function QU(n,e,t){const r=e.vertices,o=JU(t);return wh(r,o)}function wTe(n,e,t){const r=JU(t);return pm(gm(QU(n,e,t),r),r)}function W$(n,e,t){const r=wTe(n,e,t);return dm(r)}function CTe(n,e,t){if(n.props.dash==="draw"){const r=QU(n,e,t);return b1(r)}return qU(e)}const STe=new W_;class l6 extends Wd{constructor(){super(...arguments);J(this,"hideResizeHandles",()=>!0);J(this,"hideRotateHandle",()=>!0);J(this,"hideSelectionBoundsFg",()=>!0);J(this,"hideSelectionBoundsBg",()=>!0);J(this,"onResize",(t,r)=>{const{scaleX:o,scaleY:i}=r,a=hl(t.props.handles);return Object.values(t.props.handles).forEach(({id:s,x:l,y:d})=>{a[s].x=l*o,a[s].y=d*i}),{props:{handles:a}}});J(this,"onHandleChange",(t,{handle:r})=>{const o=hl(t);switch(r.id){case"start":case"end":{o.props.handles[r.id]={...o.props.handles[r.id],x:r.x,y:r.y};break}default:{const i="handle:"+r.index,a=t.props.handles[i];a?o.props.handles[i]={...a,x:r.x,y:r.y}:o.props.handles[i]={id:i,type:"vertex",canBind:!1,index:r.index,x:r.x,y:r.y};break}}return o})}getDefaultProps(){return{dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,canSnap:!0,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,canSnap:!0,index:"a2",x:0,y:0}}}}getGeometry(t){return nv(t)}getHandles(t){return STe.get(t.props,()=>{const r=t.props.handles,o=nv(t),i=Object.values(r).sort(cl),a=i.slice();for(let s=0;s<o.segments.length;s++){const d=o.segments[s].midPoint(),u=Tv(i[s].index,i[s+1].index);a.push({id:`mid-${s}`,type:"create",index:u,x:d.x,y:d.y})}return a.sort(cl)})}getOutlineSegments(t){return this.editor.getShapeGeometry(t).segments.map(o=>o.vertices)}component(t){const r=Ps(),o=nv(t),i=dl[t.props.size],{dash:a,color:s}=t.props;if(t.props.spline==="line"){if(a==="solid"){const l=o.points,d="M"+l[0]+"L"+l.slice(1);return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{d,fill:"none",color:s,theme:r}),K.jsx("path",{d,stroke:r[s].solid,strokeWidth:i,fill:"none"})]})}if(a==="dashed"||a==="dotted"){const l=o.points,d="M"+l[0]+"L"+l.slice(1);return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{d,fill:"none",color:s,theme:r}),K.jsx("g",{stroke:r[s].solid,strokeWidth:i,children:o.segments.map((u,p)=>{const{strokeDasharray:f,strokeDashoffset:h}=fl(u.length,i,{style:a,start:p>0?"outset":"none",end:p<o.segments.length-1?"outset":"none"});return K.jsx("path",{strokeDasharray:f,strokeDashoffset:h,d:AS(u,!0),fill:"none"},p)})})]})}if(a==="draw"){const l=o.points,[d,u]=c9(t.id,l,i);return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{d,fill:"none",color:s,theme:r}),K.jsx("path",{d:u,stroke:r[s].solid,strokeWidth:i,fill:"none"})]})}}if(t.props.spline==="cubic"){const l=qU(o);if(a==="solid")return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{d:l,fill:"none",color:s,theme:r}),K.jsx("path",{strokeWidth:i,stroke:r[s].solid,fill:"none",d:l})]});if(a==="dashed"||a==="dotted")return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{d:l,fill:"none",color:s,theme:r}),K.jsx("g",{stroke:r[s].solid,strokeWidth:i,children:o.segments.map((d,u)=>{const{strokeDasharray:p,strokeDashoffset:f}=fl(d.length,i,{style:a,start:u>0?"outset":"none",end:u<o.segments.length-1?"outset":"none"});return K.jsx("path",{strokeDasharray:p,strokeDashoffset:f,d:LS(d,!0),fill:"none"},u)})})]});if(a==="draw")return K.jsxs(vc,{id:t.id,children:[K.jsx(Qa,{d:l,fill:"none",color:s,theme:r}),K.jsx("path",{d:W$(t,o,i),strokeWidth:1,stroke:r[s].solid,fill:r[s].solid})]})}}indicator(t){const r=dl[t.props.size],o=nv(t),{dash:i}=t.props;let a;if(t.props.spline==="line"){const s=o.points;if(i==="solid"||i==="dotted"||i==="dashed")a="M"+s[0]+"L"+s.slice(1);else{const[l]=c9(t.id,s,r);a=l}}else a=CTe(t,o,r);return K.jsx("path",{d:a})}toSvg(t){const o=Xl({isDarkMode:this.editor.user.isDarkMode})[t.props.color].solid,i=nv(t),a=dl[t.props.size];switch(t.props.dash){case"draw":{let s;if(i instanceof F3)s=W$(t,i,a);else{const[d,u]=c9(t.id,i.points,a);s=u}const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("stroke-width",a+"px"),l.setAttribute("stroke",o),l.setAttribute("fill","none"),l.setAttribute("d",s),l}case"solid":{let s;if(i instanceof F3)s=XU(i,!1);else{const d=i.points;s="M"+d[0]+"L"+d.slice(1)}const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("stroke-width",a+"px"),l.setAttribute("stroke",o),l.setAttribute("fill","none"),l.setAttribute("d",s),l}default:{const{segments:s}=i,l=document.createElementNS("http://www.w3.org/2000/svg","g");l.setAttribute("stroke",o),l.setAttribute("stroke-width",a.toString());const d=i instanceof F3?LS:AS;return s.forEach((u,p)=>{const f=document.createElementNS("http://www.w3.org/2000/svg","path"),{strokeDasharray:h,strokeDashoffset:c}=fl(u.length,a,{style:t.props.dash,start:p>0?"outset":"none",end:p<s.length-1?"outset":"none"});f.setAttribute("stroke-dasharray",h.toString()),f.setAttribute("stroke-dashoffset",c.toString()),f.setAttribute("d",d(u,!0)),f.setAttribute("fill","none"),l.appendChild(f)}),l}}}}J(l6,"type","line"),J(l6,"props",n5e),J(l6,"migrations",r5e);function nv(n){const{spline:e,handles:t}=n.props,r=Object.values(t).sort(cl).map(Le.From);switch(e){case"cubic":return new F3({points:r});case"line":return new i0({points:r})}}const mh=200;class c6 extends Wd{constructor(){super(...arguments);J(this,"canEdit",()=>!0);J(this,"hideResizeHandles",()=>!0);J(this,"hideSelectionBoundsFg",()=>!0);J(this,"onBeforeCreate",t=>V$(this.editor,t,t.props.growY));J(this,"onBeforeUpdate",(t,r)=>{if(!(t.props.text===r.props.text&&t.props.font===r.props.font&&t.props.size===r.props.size))return V$(this.editor,r,t.props.growY)});J(this,"onEditEnd",t=>{const{id:r,type:o,props:{text:i}}=t;i.trimEnd()!==t.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:i.trimEnd()}}])})}getDefaultProps(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}getHeight(t){return mh+t.props.growY}getGeometry(t){const r=this.getHeight(t);return new tp({width:mh,height:r,isFilled:!0})}component(t){const{id:r,type:o,props:{color:i,font:a,size:s,align:l,text:d,verticalAlign:u}}=t,p=Ps(),f=i==="black"?"yellow":i;return K.jsxs(K.Fragment,{children:[K.jsx("div",{style:{position:"absolute",width:mh,height:this.getHeight(t)},children:K.jsxs("div",{className:"tl-note__container",style:{color:p[f].solid,backgroundColor:p[f].solid},children:[K.jsx("div",{className:"tl-note__scrim"}),K.jsx(DU,{id:r,type:o,font:a,size:s,align:l,verticalAlign:u,text:d,labelColor:"black",wrap:!0})]})}),"url"in t.props&&t.props.url&&K.jsx(_y,{url:t.props.url,zoomLevel:this.editor.zoomLevel})]})}indicator(t){return K.jsx("rect",{rx:"7",width:Rt(mh),height:Rt(this.getHeight(t))})}toSvg(t,r){r.addExportDef(Ew(t.props.font));const o=Xl({isDarkMode:this.editor.user.isDarkMode}),i=this.editor.getShapeGeometry(t).bounds,a=document.createElementNS("http://www.w3.org/2000/svg","g"),s=t.props.color==="black"?"yellow":t.props.color,l=document.createElementNS("http://www.w3.org/2000/svg","rect");l.setAttribute("rx","10"),l.setAttribute("width",mh.toString()),l.setAttribute("height",i.height.toString()),l.setAttribute("fill",o[s].solid),l.setAttribute("stroke",o[s].solid),l.setAttribute("stroke-width","1"),a.appendChild(l);const d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("rx","10"),d.setAttribute("width",mh.toString()),d.setAttribute("height",i.height.toString()),d.setAttribute("fill",o.background),d.setAttribute("opacity",".28"),a.appendChild(d);const u=NU({editor:this.editor,shape:t,font:uy[t.props.font],bounds:i});return u.setAttribute("fill",o.text),u.setAttribute("stroke","none"),a.appendChild(u),a}}J(c6,"type","note"),J(c6,"props",o5e),J(c6,"migrations",i5e);function V$(n,e,t=0){const i=n.textMeasure.measureText(e.props.text,{...Ws,fontFamily:Eh[e.props.font],fontSize:mm[e.props.size],width:mh-34+"px"}).h+17*2;let a=null;if(i>mh?a=i-mh:t&&(a=0),a!==null)return{...e,props:{...e.props,growY:a}}}function kTe(n,{initialBounds:e,scaleX:t,scaleY:r,newPoint:o}){const i=Math.max(.01,Math.min(Math.abs(t),Math.abs(r))),a=new Le(0,0);t<0&&(a.x=-(e.width*i)),r<0&&(a.y=-(e.height*i));const{x:s,y:l}=Le.Add(o,a.rot(n.rotation));return{x:s,y:l,props:{scale:i*n.props.scale}}}const _Te=new W_;class d6 extends Wd{constructor(){super(...arguments);J(this,"canEdit",()=>!0);J(this,"isAspectRatioLocked",()=>!0);J(this,"onResize",(t,r)=>{const{initialBounds:o,initialShape:i,scaleX:a,handle:s}=r;if(r.mode==="scale_shape"||s!=="right"&&s!=="left")return{id:t.id,type:t.type,...kTe(t,r)};{const l=o.width;let d=l*a;const u=new Le(0,0);d=Math.max(1,Math.abs(d)),s==="left"?(u.x=l-d,a<0&&(u.x+=d)):a<0&&(u.x-=d);const{x:p,y:f}=u.rot(t.rotation).add(i);return{id:t.id,type:t.type,x:p,y:f,props:{w:d/i.props.scale,autoSize:!1}}}});J(this,"onBeforeCreate",t=>{if(!t.props.autoSize||t.props.text.trim())return;const r=this.getMinDimensions(t);return{...t,x:t.x-r.width/2,y:t.y-r.height/2}});J(this,"onEditEnd",t=>{const{id:r,type:o,props:{text:i}}=t,a=t.props.text.trimEnd();a.length===0?this.editor.deleteShapes([t.id]):a!==t.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:i.trimEnd()}}])});J(this,"onBeforeUpdate",(t,r)=>{if(!r.props.autoSize)return;const o=t.props.size!==r.props.size||t.props.align!==r.props.align||t.props.font!==r.props.font||t.props.scale!==1&&r.props.scale===1,i=t.props.text!==r.props.text;if(!o&&!i)return;const a=this.getMinDimensions(t),s=K$(this.editor,r.props),l=a.width*t.props.scale,d=a.height*t.props.scale,u=s.width*r.props.scale,p=s.height*r.props.scale;let f;switch(r.props.align){case"middle":{f=new Le((u-l)/2,i?0:(p-d)/2);break}case"end":{f=new Le(u-l,i?0:(p-d)/2);break}default:{if(i)break;f=new Le(0,(p-d)/2);break}}if(f){f.rot(r.rotation);const{x:h,y:c}=r;return{...r,x:h-f.x,y:c-f.y,props:{...r.props,w:u}}}else return{...r,props:{...r.props,w:u}}});J(this,"onDoubleClickEdge",t=>{if(!t.props.autoSize)return{id:t.id,type:t.type,props:{autoSize:!0}};if(t.props.scale!==1)return{id:t.id,type:t.type,props:{scale:1}}})}getDefaultProps(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}getMinDimensions(t){return _Te.get(t.props,r=>K$(this.editor,r))}getGeometry(t){const{scale:r}=t.props,{width:o,height:i}=this.getMinDimensions(t);return new tp({width:o*r,height:i*r,isFilled:!0})}component(t){const{id:r,type:o,props:{text:i,color:a}}=t,s=Xl({isDarkMode:this.editor.user.isDarkMode}),{width:l,height:d}=this.getMinDimensions(t),{rInput:u,isEmpty:p,isEditing:f,isEditingSameShapeType:h,handleFocus:c,handleChange:g,handleKeyDown:m,handleBlur:b,handleInputPointerDown:v}=$E(r,o,i),w=sr("zoomLevel",()=>this.editor.zoomLevel,[this.editor]);return K.jsx(hm,{id:t.id,children:K.jsxs("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":t.props.font,"data-align":t.props.align,"data-hastext":!p,"data-isediting":f,"data-textwrap":!0,style:{outline:f?`${1.5/w/t.props.scale}px solid var(--color-selected)`:"",fontSize:Df[t.props.size],lineHeight:Df[t.props.size]*Ws.lineHeight+"px",transform:`scale(${t.props.scale})`,transformOrigin:"top left",width:Math.max(1,l),height:Math.max(Df[t.props.size]*Ws.lineHeight,d),color:s[a].solid},children:[K.jsx("div",{className:"tl-text tl-text-content",dir:"ltr",children:i}),f||h?K.jsx("textarea",{ref:u,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:f,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:i,onFocus:c,onChange:g,onKeyDown:m,onBlur:b,onTouchEnd:rd,onContextMenu:rd,onPointerDown:v}):null]})})}indicator(t){const r=this.editor.getShapeGeometry(t).bounds;return K.jsx("rect",{width:Rt(r.width),height:Rt(r.height)})}toSvg(t,r){r.addExportDef(Ew(t.props.font));const o=Xl({isDarkMode:this.editor.user.isDarkMode}),i=this.editor.getShapeGeometry(t).bounds,a=t.props.text,s=i.width/(t.props.scale??1),l=i.height/(t.props.scale??1),d={fontSize:Df[t.props.size],fontFamily:uy[t.props.font],textAlign:t.props.align,verticalTextAlign:"middle",width:s,height:l,padding:0,lineHeight:Ws.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},u=o[t.props.color].solid,p=document.createElementNS("http://www.w3.org/2000/svg","g"),f=_w(this.editor,this.editor.textMeasure.measureTextSpans(a,d),{...d,stroke:o.background,strokeWidth:2,fill:o.background,padding:0}),h=f.cloneNode(!0);return h.setAttribute("fill",u),h.setAttribute("stroke","none"),p.append(f),p.append(h),p}}J(d6,"type","text"),J(d6,"props",a5e),J(d6,"migrations",s5e);function K$(n,e){const{font:t,text:r,autoSize:o,size:i,w:a}=e,s=16,l=Df[i],d=o?"fit-content":Math.floor(Math.max(s,a))+"px",u=n.textMeasure.measureText(r,{...Ws,fontFamily:Eh[t],fontSize:l,width:d});return o&&(u.w+=1),{width:Math.max(s,u.w),height:Math.max(l,u.h)}}class u6 extends Wm{constructor(){super(...arguments);J(this,"canEdit",()=>!0);J(this,"isAspectRatioLocked",()=>!0)}getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}component(t){return K.jsx(PTe,{shape:t,videoUtil:this})}indicator(t){return K.jsx("rect",{width:Rt(t.props.w),height:Rt(t.props.h)})}toSvg(t){const r=document.createElementNS("http://www.w3.org/2000/svg","g"),o=document.createElementNS("http://www.w3.org/2000/svg","image");return o.setAttributeNS("http://www.w3.org/1999/xlink","href",ETe(t.id)),o.setAttribute("width",t.props.w.toString()),o.setAttribute("height",t.props.h.toString()),r.appendChild(o),r}}J(u6,"type","video"),J(u6,"props",l5e),J(u6,"migrations",c5e);function ETe(n){const e=n.split(":")[1],t=document.querySelector(`.tl-video-shape-${e}`);if(t){const r=document.createElement("canvas");return r.width=t.videoWidth,r.height=t.videoHeight,r.getContext("2d").drawImage(t,0,0),r.toDataURL("image/png")}else throw new Error("Video with id "+e+" not found")}const PTe=gi(function(e){const{shape:t,videoUtil:r}=e,o=r.editor.getShapeGeometry(t).bounds.w*r.editor.zoomLevel>=110,i=t.props.assetId?r.editor.getAsset(t.props.assetId):null,{time:a,playing:s}=t.props,l=lw(t.id),d=GU(),u=je.useRef(null),p=je.useCallback(b=>{const v=b.currentTarget;r.editor.updateShapes([{type:"video",id:t.id,props:{playing:!0,time:v.currentTime}}])},[t.id,r.editor]),f=je.useCallback(b=>{const v=b.currentTarget;r.editor.updateShapes([{type:"video",id:t.id,props:{playing:!1,time:v.currentTime}}])},[t.id,r.editor]),h=je.useCallback(b=>{const v=b.currentTarget;l&&r.editor.updateShapes([{type:"video",id:t.id,props:{time:v.currentTime}}])},[l,t.id,r.editor]),[c,g]=je.useState(!1),m=je.useCallback(b=>{const v=b.currentTarget;a!==v.currentTime&&(v.currentTime=a),s||v.pause(),g(!0)},[s,a]);return je.useEffect(()=>{const b=u.current;b&&(c&&!l&&a!==b.currentTime&&(b.currentTime=a),l&&document.activeElement!==b&&b.focus())},[l,c,a]),je.useEffect(()=>{if(d){const b=u.current;b.pause(),b.currentTime=0}},[u,d]),K.jsxs(K.Fragment,{children:[K.jsx(hm,{id:t.id,children:K.jsx("div",{className:"tl-counter-scaled",children:i!=null&&i.props.src?K.jsx("video",{ref:u,style:l?{pointerEvents:"all"}:void 0,className:`tl-video tl-video-shape-${t.id.split(":")[1]}`,width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:l&&o,onPlay:p,onPause:f,onTimeUpdate:h,onLoadedData:m,hidden:!c,children:K.jsx("source",{src:i.props.src})}):null})}),"url"in t.props&&t.props.url&&K.jsx(_y,{url:t.props.url,zoomLevel:r.editor.zoomLevel})]})}),eW=[d6,t6,n6,i6,c6,l6,o6,e6,a6,r6,s6,u6];function MTe(n){return n.sideEffects.registerAfterChangeHandler("instance_page_state",(e,t)=>{if(e.croppingShapeId!==t.croppingShapeId){const r=n.isInAny("select.crop","select.pointing_crop_handle","select.cropping");!e.croppingShapeId&&t.croppingShapeId?r||n.setCurrentTool("select.crop.idle"):e.croppingShapeId&&!t.croppingShapeId&&r&&n.setCurrentTool("select.idle")}e.editingShapeId!==t.editingShapeId&&(!e.editingShapeId&&t.editingShapeId?n.isIn("select.editing_shape")||n.setCurrentTool("select.editing_shape"):e.editingShapeId&&!t.editingShapeId&&n.isIn("select.editing_shape")&&n.setCurrentTool("select.idle"))})}class NE{constructor(e){J(this,"state");J(this,"points");J(this,"size");J(this,"color");J(this,"opacity");J(this,"delay");J(this,"timeoutMs",0);J(this,"delayRemaining",0);J(this,"onUpdate");J(this,"onComplete");J(this,"prev",null);J(this,"next",null);J(this,"resume",()=>{this.state="active"});J(this,"pause",()=>{this.state="starting"});J(this,"stop",()=>{this.delayRemaining=Math.min(this.delayRemaining,200),this.state="stopping"});J(this,"addPoint",(e,t)=>{const{prev:r}=this,o={x:e,y:t,z:.5};r&&Le.Dist(r,o)<1||(this.next=o)});J(this,"tick",e=>{this.timeoutMs+=e,this.delayRemaining>0&&(this.delayRemaining=Math.max(0,this.delayRemaining-e)),this.timeoutMs>=16&&(this.timeoutMs=0);const{timeoutMs:t,state:r,prev:o,next:i,points:a}=this;switch(r){case"active":{i&&i!==o?(this.prev=i,a.push(i),this.delayRemaining===0&&a.length>8&&a.shift(),this.updateScribble()):t===0&&(a.length>1?(a.shift(),this.updateScribble()):this.delayRemaining=this.delay);break}case"stopping":{if(this.delayRemaining===0&&t===0){if(a.length===1){this.state="paused",this.onComplete();return}this.size*=.9,a.shift(),this.updateScribble()}break}}});const{size:t=20,color:r="accent",opacity:o=.8,delay:i=0,onComplete:a,onUpdate:s}=e;this.onUpdate=s,this.onComplete=a,this.size=t,this.color=r,this.delay=i,this.opacity=o,this.points=[],this.state="starting",this.prev=null,this.next=null,this.delayRemaining=this.delay,this.resume()}getScribble(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,delay:this.delay,points:[...this.points]}}updateScribble(){this.onUpdate(this.getScribble())}}class tW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"scribble",{});J(this,"markId","");J(this,"excludedShapeIds",new Set);J(this,"onEnter",t=>{this.markId="erase scribble begin",this.editor.mark(this.markId),this.info=t;const{originPagePoint:r}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.currentPageShapes.filter(o=>{if(this.editor.isShapeOrAncestorLocked(o)||this.editor.isShapeOfType(o,"group")||this.editor.isShapeOfType(o,"frame")){const i=this.editor.getPointInShapeSpace(o,r);return this.editor.getShapeGeometry(o).bounds.containsPoint(i)}return!1}).map(o=>o.id)),this.startScribble(),this.update()});J(this,"startScribble",()=>{var t;this.scribble.tick&&this.editor.off("tick",(t=this.scribble)==null?void 0:t.tick),this.scribble=new NE({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"muted-1",size:12}),this.editor.on("tick",this.scribble.tick)});J(this,"pushPointToScribble",()=>{const{x:t,y:r}=this.editor.inputs.currentPagePoint;this.scribble.addPoint(t,r)});J(this,"onScribbleUpdate",t=>{this.editor.updateInstanceState({scribble:t})});J(this,"onScribbleComplete",()=>{this.editor.off("tick",this.scribble.tick),this.editor.updateInstanceState({scribble:null})});J(this,"onExit",()=>{this.scribble.stop()});J(this,"onPointerMove",()=>{this.update()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()})}update(){const{zoomLevel:t,currentPageShapes:r,erasingShapeIds:o,inputs:{currentPagePoint:i,previousPagePoint:a}}=this.editor,{excludedShapeIds:s}=this;this.pushPointToScribble();const l=new Set(o);for(const d of r){if(this.editor.isShapeOfType(d,"group"))continue;const u=this.editor.getShapeMask(d.id);if(u&&!Du(i,u))continue;const p=this.editor.getShapeGeometry(d),f=this.editor.getPointInShapeSpace(d,a),h=this.editor.getPointInShapeSpace(d,i);p.hitTestLineSegment(f,h,Jd/t)&&l.add(this.editor.getOutermostSelectableShape(d).id)}this.editor.setErasingShapes([...l].filter(d=>!s.has(d)))}complete(){this.editor.deleteShapes(this.editor.currentPageState.erasingShapeIds),this.editor.setErasingShapes([]),this.parent.transition("idle",{})}cancel(){this.editor.setErasingShapes([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}J(tW,"id","erasing");var D9;let ITe=(D9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("pointing",t)});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(D9,"id","idle"),D9);var N9;let TTe=(N9=class extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{const{inputs:{currentPagePoint:t},currentPageShapesSorted:r,zoomLevel:o}=this.editor,i=new Set,a=i.size;for(let s=r.length,l=s-1;l>=0;l--){const d=r[l];if(!this.editor.isShapeOfType(d,"group")&&this.editor.isPointInShape(d,t,{hitInside:!1,margin:Jd/o})){const u=this.editor.getOutermostSelectableShape(d);if(this.editor.isShapeOfType(u,"frame")&&i.size>a)break;i.add(u.id)}}this.editor.setErasingShapes([...i])});J(this,"onPointerMove",t=>{this.editor.inputs.isDragging&&this.parent.transition("erasing",t)});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.cancel()})}complete(){const{erasingShapeIds:t}=this.editor;t.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(t)),this.editor.setErasingShapes([]),this.parent.transition("idle",{})}cancel(){this.editor.setErasingShapes([]),this.parent.transition("idle",{})}},J(N9,"id","pointing"),N9);class h6 extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})})}}J(h6,"id","eraser"),J(h6,"initial","idle"),J(h6,"children",()=>[ITe,TTe,tW]);class nW extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.update()});J(this,"onPointerMove",()=>{this.update()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()})}update(){const{currentScreenPoint:t,previousScreenPoint:r}=this.editor.inputs,o=Le.Sub(t,r);(Math.abs(o.x)>0||Math.abs(o.y)>0)&&this.editor.pan(o)}complete(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:R3}),this.parent.transition("idle",{})}}J(nW,"id","dragging");var z9;let OTe=(z9=class extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.editor.setCursor({type:"grab",rotation:0})});J(this,"onPointerDown",t=>{this.parent.transition("pointing",t)});J(this,"onCancel",()=>{this.editor.setCurrentTool("select")})}},J(z9,"id","idle"),z9);var B9;let ATe=(B9=class extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.editor.stopCameraAnimation(),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})});J(this,"onPointerMove",t=>{this.editor.inputs.isDragging&&this.parent.transition("dragging",t)});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.complete()})}complete(){this.parent.transition("idle",{})}},J(B9,"id","pointing"),B9);class f6 extends no{constructor(){super(...arguments);J(this,"onDoubleClick",t=>{if(t.phase==="settle"){const{currentScreenPoint:r}=this.editor.inputs;this.editor.zoomIn(r,{duration:220,easing:ul.easeOutQuint})}});J(this,"onTripleClick",t=>{if(t.phase==="settle"){const{currentScreenPoint:r}=this.editor.inputs;this.editor.zoomOut(r,{duration:320,easing:ul.easeOutQuint})}});J(this,"onQuadrupleClick",t=>{if(t.phase==="settle"){const{zoomLevel:r,inputs:{currentScreenPoint:o}}=this.editor;r===1?this.editor.zoomToFit({duration:400,easing:ul.easeOutQuint}):this.editor.resetZoom(o,{duration:320,easing:ul.easeOutQuint})}})}}J(f6,"id","hand"),J(f6,"initial","idle"),J(f6,"children",()=>[OTe,ATe,nW]);var H9;let LTe=(H9=class extends no{constructor(){super(...arguments);J(this,"onPointerDown",t=>{this.parent.transition("lasering",t)})}},J(H9,"id","idle"),H9);class rW extends no{constructor(){super(...arguments);J(this,"scribble",{});J(this,"onEnter",()=>{this.startScribble(),this.pushPointToScribble()});J(this,"onExit",()=>{this.scribble.stop()});J(this,"onPointerMove",()=>{this.pushPointToScribble()});J(this,"onPointerUp",()=>{this.complete()});J(this,"startScribble",()=>{var t;this.scribble.tick&&this.editor.off("tick",(t=this.scribble)==null?void 0:t.tick),this.scribble=new NE({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"laser",opacity:.7,size:4,delay:1200}),this.editor.on("tick",this.scribble.tick)});J(this,"pushPointToScribble",()=>{const{x:t,y:r}=this.editor.inputs.currentPagePoint;this.scribble.addPoint(t,r)});J(this,"onScribbleUpdate",t=>{this.editor.updateInstanceState({scribble:t})});J(this,"onScribbleComplete",()=>{this.editor.off("tick",this.scribble.tick),this.editor.updateInstanceState({scribble:null})});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()})}complete(){this.parent.transition("idle",{})}cancel(){this.parent.transition("idle",{})}}J(rW,"id","lasering");class p6 extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.editor.setCursor({type:"cross",rotation:0})})}}J(p6,"id","laser"),J(p6,"initial","idle"),J(p6,"children",()=>[LTe,rW]);class oW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"brush",new uo);J(this,"initialSelectedShapeIds",[]);J(this,"excludedShapeIds",new Set);J(this,"initialStartShape",null);J(this,"onEnter",t=>{const{altKey:r,currentPagePoint:o}=this.editor.inputs;if(r){this.parent.transition("scribble_brushing",t);return}this.excludedShapeIds=new Set(this.editor.currentPageShapes.filter(i=>this.editor.isShapeOfType(i,"group")||this.editor.isShapeOrAncestorLocked(i)).map(i=>i.id)),this.info=t,this.initialSelectedShapeIds=this.editor.selectedShapeIds.slice(),this.initialStartShape=this.editor.getShapesAtPoint(o)[0],this.onPointerMove()});J(this,"onExit",()=>{this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null})});J(this,"onPointerMove",()=>{this.hitTestShapes()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",t=>{this.editor.setSelectedShapes(this.initialSelectedShapeIds,{squashing:!0}),this.parent.transition("idle",t)});J(this,"onKeyDown",t=>{this.editor.inputs.altKey?this.parent.transition("scribble_brushing",t):this.hitTestShapes()});J(this,"onKeyUp",()=>{this.hitTestShapes()});J(this,"onInterrupt",()=>{this.editor.updateInstanceState({brush:null})})}complete(){this.parent.transition("idle",{})}hitTestShapes(){const{zoomLevel:t,currentPageId:r,currentPageShapes:o,inputs:{originPagePoint:i,currentPagePoint:a,shiftKey:s,ctrlKey:l}}=this.editor;this.brush.setTo(uo.FromPoints([i,a]));const d=new Set(s?this.initialSelectedShapeIds:[]);let u,p,f,h,c,g;const{corners:m}=this.brush,{excludedShapeIds:b}=this;e:for(let v=0,w=o.length;v<w;v++){if(f=o[v],b.has(f.id)||d.has(f.id)||(h=this.editor.getShapePageBounds(f),!h))continue e;if(this.brush.contains(h)){this.handleHit(f,a,r,d,m);continue e}if(l||this.editor.isShapeOfType(f,"frame"))continue e;if(this.brush.collides(h)){const _=this.editor.getShapeGeometry(f);if(c=this.editor.getShapePageTransform(f),!c)continue e;g=c.clone().invert().applyToPoints(m);t:for(let k=0;k<g.length;k++)if(u=g[k],p=g[(k+1)%g.length],_.hitTestLineSegment(u,p,Jd/t)){this.handleHit(f,a,r,d,m);break t}}}this.editor.updateInstanceState({brush:{...this.brush.toJson()}}),this.editor.setSelectedShapes(Array.from(d),{squashing:!0})}handleHit(t,r,o,i,a){if(t.parentId===o){i.add(t.id);return}const s=this.editor.getOutermostSelectableShape(t),l=this.editor.getShapeMask(s.id);l&&!Sxe(l,a)&&!Du(r,l)||i.add(s.id)}}J(oW,"id","brushing");function zE(n){const{zoomLevel:e,inputs:{currentPagePoint:t}}=n;return n.getShapeAtPoint(t,{hitInside:!1,hitLabels:!1,margin:Jd/e})??n.getSelectedShapeAtPoint(t)}function iW(n,e,t){if(!e)throw Error("Needs to translate a cropped shape!");const{crop:r}=e.props;if(!r)return;const o=n.inputs.shiftKey?Math.abs(t.x)<Math.abs(t.y)?"x":"y":null;o==="x"?t.x=0:o==="y"&&(t.y=0),t.rot(-e.rotation);const i=1/(r.bottomRight.x-r.topLeft.x)*e.props.w,a=1/(r.bottomRight.y-r.topLeft.y)*e.props.h,s=r.bottomRight.y-r.topLeft.y,l=r.bottomRight.x-r.topLeft.x,d=hl(r);return d.topLeft.x=Math.min(1-l,Math.max(0,d.topLeft.x-t.x/i)),d.topLeft.y=Math.min(1-s,Math.max(0,d.topLeft.y-t.y/a)),d.bottomRight.x=d.topLeft.x+l,d.bottomRight.y=d.topLeft.y+s,{id:e.id,type:e.type,props:{crop:d}}}var F9;let $Te=(F9=class extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0});const{onlySelectedShape:t}=this.editor;this.editor.on("change-history",this.cleanupCroppingState),t&&(this.editor.mark("crop"),this.editor.setCroppingShape(t.id))});J(this,"onExit",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.off("change-history",this.cleanupCroppingState)});J(this,"onCancel",()=>{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})});J(this,"onPointerDown",t=>{var r;if(!this.editor.isMenuOpen){if(t.ctrlKey){this.cancel(),this.editor.root.handleEvent(t);return}switch(t.target){case"canvas":{const o=zE(this.editor);if(o&&!this.editor.isShapeOfType(o,"group")){this.onPointerDown({...t,shape:o,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(t);break}case"shape":{if(t.shape.id===this.editor.croppingShapeId){this.editor.setCurrentTool("select.crop.pointing_crop",t);return}else(r=this.editor.getShapeUtil(t.shape))!=null&&r.canCrop(t.shape)?(this.editor.setCroppingShape(t.shape.id),this.editor.setSelectedShapes([t.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",t)):(this.cancel(),this.editor.root.handleEvent(t));break}case"selection":{switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...t,onInteractionEnd:"select.crop"});break}case"top":case"right":case"bottom":case"left":{this.editor.setCurrentTool("select.pointing_crop_handle",{...t,onInteractionEnd:"select.crop"});break}case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.pointing_crop_handle",{...t,onInteractionEnd:"select.crop"});break}default:this.cancel()}break}}}});J(this,"onDoubleClick",t=>{var i;if(this.editor.inputs.shiftKey||t.phase!=="up"||!this.editor.croppingShapeId)return;const r=this.editor.getShape(this.editor.croppingShapeId);if(!r)return;const o=this.editor.getShapeUtil(r);o&&t.target==="selection"&&((i=o.onDoubleClickEdge)==null||i.call(o,r))});J(this,"onKeyDown",()=>{this.nudgeCroppingImage(!1)});J(this,"onKeyRepeat",()=>{this.nudgeCroppingImage(!0)});J(this,"onKeyUp",t=>{switch(t.code){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}});J(this,"cleanupCroppingState",()=>{this.editor.croppingShapeId||this.editor.setCurrentTool("select.idle",{})})}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(t=!1){const{editor:{inputs:{keys:r}}}=this,o=r.has("ShiftLeft"),i=new Le(0,0);if(r.has("ArrowLeft")&&(i.x+=1),r.has("ArrowRight")&&(i.x-=1),r.has("ArrowUp")&&(i.y+=1),r.has("ArrowDown")&&(i.y-=1),i.equals(new Le(0,0)))return;o&&i.mul(10);const a=this.editor.getShape(this.editor.croppingShapeId);if(!a)return;const s=iW(this.editor,a,i);s&&(t||this.editor.mark("translate crop"),this.editor.updateShapes([s]))}},J(F9,"id","idle"),F9);class aW extends no{constructor(){super(...arguments);J(this,"onCancel",()=>{this.editor.setCurrentTool("select.crop.idle",{})});J(this,"onPointerMove",t=>{this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",t)});J(this,"onPointerUp",t=>{this.editor.setCurrentTool("select.crop.idle",t)})}}J(aW,"id","pointing_crop");class sW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"markId","translating crop");J(this,"snapshot",{});J(this,"onEnter",t=>{this.info=t,this.snapshot=this.createSnapshot(),this.editor.mark(this.markId),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()});J(this,"onExit",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});J(this,"onPointerMove",()=>{this.updateShapes()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onKeyDown",t=>{switch(t.key){case"Alt":case"Shift":{this.updateShapes();return}}});J(this,"onKeyUp",t=>{switch(t.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}})}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.onlySelectedShape}}updateShapes(){const t=this.snapshot.shape;if(!t)return;const{originPagePoint:r,currentPagePoint:o}=this.editor.inputs,i=o.clone().sub(r),a=iW(this.editor,t,i);a&&this.editor.updateShapes([a],{squashing:!0})}}J(sW,"id","translating_crop");class g6 extends no{}J(g6,"id","crop"),J(g6,"initial","idle"),J(g6,"children",()=>[$Te,sW,aW]);const Yc=8,vm={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class lW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t,this.updateCursor()});J(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("resizing",this.info)});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){const t=this.editor.selectedShapes,r=vm[this.info.handle];this.editor.updateInstanceState({cursor:{type:r,rotation:t.length===1?t[0].rotation:0}})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}J(lW,"id","pointing_resize_handle");class cW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"markId","");J(this,"snapshot",{});J(this,"onEnter",t=>{this.info=t,this.markId="cropping",this.editor.mark(this.markId),this.snapshot=this.createSnapshot(),this.updateShapes()});J(this,"onPointerMove",()=>{this.updateShapes()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"getDefaultCrop",()=>({topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}))}updateCursor(){const t=this.editor.selectedShapes[0];if(!t)return;const r=vm[this.info.handle];this.editor.updateInstanceState({cursor:{type:r,rotation:t.rotation}})}updateShapes(){const{shape:t,cursorHandleOffset:r}=this.snapshot;if(!t||!this.editor.getShapeUtil("image"))return;const i=t.props,a=this.editor.inputs.currentPagePoint.clone().sub(r),s=this.editor.inputs.originPagePoint.clone().sub(r),l=a.clone().sub(s).rot(-t.rotation),d=i.crop??this.getDefaultCrop(),u=hl(d),p=new Le(t.x,t.y),f=new Le(0,0),h=1/(d.bottomRight.x-d.topLeft.x)*i.w,c=1/(d.bottomRight.y-d.topLeft.y)*i.h;let g=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":{if(c<Yc)break;g=!0,u.topLeft.y=u.topLeft.y+l.y/c,c*(u.bottomRight.y-u.topLeft.y)<Yc?(u.topLeft.y=u.bottomRight.y-Yc/c,f.y=(u.topLeft.y-d.topLeft.y)*c):u.topLeft.y<=0?(u.topLeft.y=0,f.y=(u.topLeft.y-d.topLeft.y)*c):f.y=l.y;break}case"bottom":case"bottom_left":case"bottom_right":{if(c<Yc)break;g=!0,u.bottomRight.y=Math.min(1,u.bottomRight.y+l.y/c),c*(u.bottomRight.y-u.topLeft.y)<Yc&&(u.bottomRight.y=u.topLeft.y+Yc/c);break}}switch(this.info.handle){case"left":case"top_left":case"bottom_left":{if(h<Yc)break;g=!0,u.topLeft.x=u.topLeft.x+l.x/h,h*(u.bottomRight.x-u.topLeft.x)<Yc?(u.topLeft.x=u.bottomRight.x-Yc/h,f.x=(u.topLeft.x-d.topLeft.x)*h):u.topLeft.x<=0?(u.topLeft.x=0,f.x=(u.topLeft.x-d.topLeft.x)*h):f.x=l.x;break}case"right":case"top_right":case"bottom_right":{if(h<Yc)break;g=!0,u.bottomRight.x=Math.min(1,u.bottomRight.x+l.x/h),h*(u.bottomRight.x-u.topLeft.x)<Yc&&(u.bottomRight.x=u.topLeft.x+Yc/h);break}}if(!g)return;p.add(f.rot(t.rotation));const m={id:t.id,type:t.type,x:p.x,y:p.y,props:{crop:u,w:(u.bottomRight.x-u.topLeft.x)*h,h:(u.bottomRight.y-u.topLeft.y)*c}};this.editor.updateShapes([m],{squashing:!0}),this.updateCursor()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))}createSnapshot(){const{selectionRotation:t,inputs:{originPagePoint:r}}=this.editor,o=this.editor.onlySelectedShape,i=this.editor.selectionRotatedPageBounds,a=Le.RotWith(i.getHandlePoint(this.info.handle),i.point,t),s=Le.Sub(r,a);return{shape:o,cursorHandleOffset:s}}}J(cW,"id","cropping");class dW extends no{constructor(){super(...arguments);J(this,"shapeId","");J(this,"initialHandle",{});J(this,"initialAdjacentHandle",null);J(this,"initialPagePoint",{});J(this,"markId","");J(this,"initialPageTransform");J(this,"initialPageRotation");J(this,"info",{});J(this,"isPrecise",!1);J(this,"isPreciseId",null);J(this,"pointingId",null);J(this,"onEnter",t=>{const{shape:r,isCreating:o,handle:i}=t;this.info=t,this.parent.currentToolIdMask=t.onInteractionEnd,this.shapeId=r.id,this.markId=o?`creating:${r.id}`:"dragging handle",o||this.editor.mark(this.markId),this.initialHandle=hl(i),this.initialPageTransform=this.editor.getShapePageTransform(r),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.updateInstanceState({cursor:{type:o?"cross":"grabbing",rotation:0}},{ephemeral:!0});const a=this.editor.getShapeHandles(r).sort(cl),s=a.findIndex(d=>d.id===t.handle.id);this.initialAdjacentHandle=null;for(let d=s+1;d<a.length;d++){const u=a[d];if(u.type==="vertex"&&u.id!=="middle"&&u.id!==t.handle.id){this.initialAdjacentHandle=u;break}}if(!this.initialAdjacentHandle)for(let d=a.length-1;d>=0;d--){const u=a[d];if(u.type==="vertex"&&u.id!=="middle"&&u.id!==t.handle.id){this.initialAdjacentHandle=u;break}}const l=r.props[t.handle.id];this.isPrecise=!1,(l==null?void 0:l.type)==="binding"?(this.editor.setHintingShapes([l.boundShapeId]),this.isPrecise=!Le.Equals(l.normalizedAnchor,{x:.5,y:.5}),this.isPrecise?this.isPreciseId=l.boundShapeId:this.resetExactTimeout()):this.editor.setHintingShapes([]),this.update(),this.editor.select(this.shapeId)});J(this,"exactTimeout",-1);J(this,"onPointerMove",()=>{this.update()});J(this,"onKeyDown",()=>{this.update()});J(this,"onKeyUp",()=>{this.update()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onExit",()=>{this.parent.currentToolIdMask=void 0,this.editor.setHintingShapes([]),this.editor.snaps.clear(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})})}resetExactTimeout(){this.exactTimeout!==-1&&this.clearExactTimeout(),this.exactTimeout=setTimeout(()=>{this.isActive&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1},750)}clearExactTimeout(){this.exactTimeout!==-1&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}complete(){this.editor.snaps.clear();const{onInteractionEnd:t}=this.info;if(this.editor.instanceState.isToolLocked&&t){this.editor.setCurrentTool(t,{shapeId:this.shapeId});return}this.parent.transition("idle",{})}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clear();const{onInteractionEnd:t}=this.info;if(t){this.editor.setCurrentTool(t,{shapeId:this.shapeId});return}this.parent.transition("idle",{})}update(){var k;const{editor:t,shapeId:r,initialPagePoint:o}=this,{initialHandle:i,initialPageRotation:a,initialAdjacentHandle:s}=this,{user:{isSnapMode:l},hintingShapeIds:d,snaps:u,inputs:{currentPagePoint:p,shiftKey:f,ctrlKey:h,altKey:c,pointerVelocity:g}}=t,m=t.getShape(r);if(!m)return;const b=t.getShapeUtil(m);let v=p.clone().sub(o).rot(-a).add(i);if(f&&s&&i.id!=="middle"){const y=Le.Angle(s,v),C=I4(y,24)-y;v=Le.RotWith(v,s,C)}if(t.snaps.clear(),i.canSnap&&(l?!h:h)){const y=t.getShapePageTransform(m.id);if(!y)throw Error("Expected a page transform");const S=t.getShapeHandles(m).filter(({type:A})=>A==="vertex").sort(cl).findIndex(({index:A})=>i.index===A),C=b.getOutlineSegments(m).map(A=>Yr.applyToPoints(y,A)).filter((A,T)=>T!==S-1&&T!==S),I=u.getSnappingHandleDelta({additionalSegments:C,handlePoint:Yr.applyToPoint(y,v)});I&&(I.rot(-t.getShapeParentTransform(m).rotation()),v.add(I))}const w=(k=b.onHandleChange)==null?void 0:k.call(b,m,{handle:{...i,x:v.x,y:v.y},isPrecise:this.isPrecise||c}),_={...m,...w};if(i.canBind){const y=_.props[i.id];(y==null?void 0:y.type)==="binding"?d[0]!==y.boundShapeId&&(t.setHintingShapes([y.boundShapeId]),this.pointingId=y.boundShapeId,this.isPrecise=g.len()<.5||c,this.isPreciseId=this.isPrecise?y.boundShapeId:null,this.resetExactTimeout()):d.length>0&&(t.setHintingShapes([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}w&&t.updateShapes([_],{squashing:!0})}}J(dW,"id","dragging_handle");class uW extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{const{editingShape:t}=this.editor;if(!t)throw Error("Entered editing state without an editing shape");Ib(this.editor),this.editor.select(t)});J(this,"onExit",()=>{var i;const{editingShapeId:t}=this.editor.currentPageState;if(!t)return;this.editor.setEditingShape(null);const r=this.editor.getShape(t),o=this.editor.getShapeUtil(r);(i=o.onEditEnd)==null||i.call(o,r)});J(this,"onPointerMove",t=>{switch(t.target){case"shape":case"canvas":{Ib(this.editor);return}}});J(this,"onPointerDown",t=>{switch(t.target){case"canvas":{const r=zE(this.editor);if(r){this.onPointerDown({...t,shape:r,target:"shape"});return}break}case"shape":{const{shape:r}=t,{editingShape:o}=this.editor;if(!o)throw Error("Expected an editing shape!");if(r.type===o.type)if(this.editor.isShapeOfType(r,"geo")||this.editor.isShapeOfType(r,"arrow")){const a=this.editor.getShapeUtil(r).getGeometry(r).children[1];if(a){const s=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint);if(a.bounds.containsPoint(s)){if(r.id===o.id)return;this.editor.setEditingShape(r),this.editor.select(r);return}}}else{r.id===o.id||(this.editor.setEditingShape(r),this.editor.select(r));return}break}}this.parent.transition("idle",t),this.editor.root.handleEvent(t)});J(this,"onComplete",t=>{this.parent.transition("idle",t)});J(this,"onCancel",t=>{this.parent.transition("idle",t)})}}J(uW,"id","editing_shape");function Y$(n){const{onlySelectedShape:e}=n;return!!(e&&!n.isShapeOrAncestorLocked(e)&&n.getShapeUtil(e).canCrop(e))}function q4(n){const{selectedShapeIds:e}=n,{shiftKey:t,altKey:r,currentPagePoint:o}=n.inputs,i=n.getShapeAtPoint(o,{hitInside:!1,margin:Jd/n.zoomLevel,hitLabels:!0});if(i){const a=n.getOutermostSelectableShape(i);if(t&&!r)n.cancelDoubleClick(),e.includes(a.id)?(n.mark("deselecting shape"),n.deselect(a)):(n.mark("shift selecting shape"),n.setSelectedShapes([...e,a.id]));else{let s;a===i||a.id===n.focusedGroupId||e.includes(a.id)?s=i:s=a,s&&!e.includes(s.id)&&(n.mark("selecting shape"),n.select(s.id))}}else{if(t)return;{e.length>0&&(n.mark("selecting none"),n.selectNone());const{focusedGroupId:a}=n;if(Xc(a)){const s=n.getShape(a);n.isPointInShape(s,o,{margin:0,hitInside:!0})||n.setFocusedGroup(null)}}}}var Z9;let jTe=(Z9=class extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{this.parent.currentToolIdMask=void 0,Ib(this.editor),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});J(this,"onPointerMove",()=>{Ib(this.editor)});J(this,"onPointerDown",t=>{if(this.editor.isMenuOpen)return;const r=t.ctrlKey&&Y$(this.editor);if(t.ctrlKey&&!r){if(t.target==="shape"&&this.isDarwin&&this.editor.inputs.keys.has("ControlLeft")&&!this.editor.isShapeOrAncestorLocked(t.shape)){this.parent.transition("pointing_shape",t);return}this.parent.transition("brushing",t);return}switch(t.target){case"canvas":{const o=zE(this.editor);if(o){this.onPointerDown({...t,shape:o,target:"shape"});return}const{onlySelectedShape:i,selectedShapeIds:a,inputs:{currentPagePoint:s}}=this.editor;if((a.length>1||i&&!this.editor.getShapeUtil(i).hideSelectionBoundsBg(i))&&zTe(this.editor,s)){this.onPointerDown({...t,target:"selection"});return}this.parent.transition("pointing_canvas",t);break}case"shape":{if(this.editor.isShapeOrAncestorLocked(t.shape))break;this.parent.transition("pointing_shape",t);break}case"handle":{if(this.editor.instanceState.isReadonly)break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",t):this.parent.transition("pointing_handle",t);break}case"selection":{switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.parent.transition("pointing_rotate_handle",t);break}case"top":case"right":case"bottom":case"left":{r?this.parent.transition("pointing_crop_handle",t):this.parent.transition("pointing_resize_handle",t);break}case"top_left":case"top_right":case"bottom_left":case"bottom_right":{r?this.parent.transition("pointing_crop_handle",t):this.parent.transition("pointing_resize_handle",t);break}default:{const{hoveredShape:o}=this.editor;if(o&&!this.editor.selectedShapeIds.includes(o.id)){this.onPointerDown({...t,shape:o,target:"shape"});return}this.parent.transition("pointing_selection",t)}}break}}});J(this,"onDoubleClick",t=>{var r,o,i,a;if(!(this.editor.inputs.shiftKey||t.phase!=="up"))switch(t.target){case"canvas":{const{hoveredShape:s}=this.editor,l=s&&!this.editor.isShapeOfType(s,"group")?s:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:Jd/this.editor.zoomLevel,hitInside:!1}),{focusedGroupId:d}=this.editor;if(l){if(this.editor.isShapeOfType(l,"group")){q4(this.editor);return}else{const u=this.editor.getShape(l.parentId);if(u&&this.editor.isShapeOfType(u,"group")&&!(d&&u.id===d)){q4(this.editor);return}}this.onDoubleClick({...t,shape:l,target:"shape"});return}if(!this.editor.inputs.shiftKey){if(this.editor.instanceState.isReadonly)break;this.handleDoubleClickOnCanvas(t)}break}case"selection":{if(this.editor.instanceState.isReadonly)break;const{onlySelectedShape:s}=this.editor;if(s){const l=this.editor.getShapeUtil(s);if(t.handle==="right"||t.handle==="left"||t.handle==="top"||t.handle==="bottom"){const d=(r=l.onDoubleClickEdge)==null?void 0:r.call(l,s);if(d){this.editor.mark("double click edge"),this.editor.updateShapes([d]);return}}if(l.canCrop(s)&&!this.editor.isShapeOrAncestorLocked(s)){this.parent.transition("crop",t);return}this.shouldStartEditingShape(s)&&this.startEditingShape(s,t)}break}case"shape":{const{shape:s}=t,l=this.editor.getShapeUtil(s);if(s.type!=="video"&&s.type!=="embed"&&this.editor.instanceState.isReadonly)break;if(l.onDoubleClick){const d=(o=l.onDoubleClick)==null?void 0:o.call(l,s);if(d){this.editor.updateShapes([d]);return}else if(l.canCrop(s)&&!this.editor.isShapeOrAncestorLocked(s)){this.editor.mark("select and crop"),this.editor.select((i=t.shape)==null?void 0:i.id),this.parent.transition("crop",t);return}}this.shouldStartEditingShape(s)?this.startEditingShape(s,t):this.handleDoubleClickOnCanvas(t);break}case"handle":{if(this.editor.instanceState.isReadonly)break;const{shape:s,handle:l}=t,d=this.editor.getShapeUtil(s),u=(a=d.onDoubleClickHandle)==null?void 0:a.call(d,s,l);u?this.editor.updateShapes([u]):this.shouldStartEditingShape(s)&&this.startEditingShape(s,t)}}});J(this,"onRightClick",t=>{switch(t.target){case"canvas":{const{hoveredShape:r}=this.editor,o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint);if(o){this.onRightClick({...t,shape:o,target:"shape"});return}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:r}=this.editor.currentPageState,{shape:o}=t,i=this.editor.getOutermostSelectableShape(o,a=>!r.includes(a.id));r.includes(i.id)||(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([i.id]));break}}});J(this,"onCancel",()=>{this.editor.focusedGroupId!==this.editor.currentPageId&&this.editor.selectedShapeIds.length>0?this.editor.popFocusedGroupId():(this.editor.mark("clearing selection"),this.editor.selectNone())});J(this,"onKeyDown",t=>{switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!1);break}}});J(this,"onKeyRepeat",t=>{switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{this.nudgeSelectedShapes(!0);break}}});J(this,"onKeyUp",t=>{if(this.editor.instanceState.isReadonly)switch(t.code){case"Enter":{const{onlySelectedShape:r}=this.editor;if(r&&this.shouldStartEditingShape()){this.startEditingShape(r,{...t,target:"shape",shape:r});return}break}}else switch(t.code){case"Enter":{const{selectedShapes:r}=this.editor;if(r.every(i=>this.editor.isShapeOfType(i,"group"))){this.editor.setSelectedShapes(r.flatMap(i=>this.editor.getSortedChildIdsForParent(i.id)));return}const{onlySelectedShape:o}=this.editor;if(o&&this.shouldStartEditingShape(o)){this.startEditingShape(o,{...t,target:"shape",shape:o});return}Y$(this.editor)&&this.parent.transition("crop",t);break}}});J(this,"isDarwin",window.navigator.userAgent.toLowerCase().indexOf("mac")>-1)}shouldStartEditingShape(t=this.editor.onlySelectedShape){return!t||this.editor.isShapeOrAncestorLocked(t)&&t.type!=="embed"?!1:this.editor.getShapeUtil(t).canEdit(t)}startEditingShape(t,r){this.editor.isShapeOrAncestorLocked(t)&&t.type!=="embed"||(this.editor.mark("editing shape"),this.editor.setEditingShape(t.id),this.parent.transition("editing_shape",r))}handleDoubleClickOnCanvas(t){this.editor.mark("creating text shape");const r=da(),{x:o,y:i}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:r,type:"text",x:o,y:i,props:{text:"",autoSize:!0}}]),this.editor.getShape(r)&&(this.editor.setEditingShape(r),this.editor.select(r),this.parent.transition("editing_shape",t))}nudgeSelectedShapes(t=!1){const{editor:{inputs:{keys:r}}}=this,o=r.has("ShiftLeft"),i=new Le(0,0);if(r.has("ArrowLeft")&&(i.x-=1),r.has("ArrowRight")&&(i.x+=1),r.has("ArrowUp")&&(i.y-=1),r.has("ArrowDown")&&(i.y+=1),i.equals(new Le(0,0)))return;t||this.editor.mark("nudge shapes");const{gridSize:a}=this.editor.documentSettings,s=this.editor.instanceState.isGridMode?o?a*NTe:a:o?RTe:DTe;this.editor.nudgeShapes(this.editor.selectedShapeIds,i.mul(s))}},J(Z9,"id","idle"),Z9);const RTe=10,DTe=1,NTe=5;function zTe(n,e){const{selectionRotatedPageBounds:t}=n;if(!t)return!1;const{selectionRotation:r}=n;return r?Du(e,t.corners.map(o=>Le.RotWith(o,t.point,r))):t.containsPoint(e)}class hW extends no{constructor(){super(...arguments);J(this,"onEnter",()=>{const{inputs:t}=this.editor;t.shiftKey||this.editor.selectedShapeIds.length>0&&(this.editor.mark("selecting none"),this.editor.selectNone())});J(this,"onPointerMove",t=>{this.editor.inputs.isDragging&&this.parent.transition("brushing",t)});J(this,"onPointerUp",()=>{q4(this.editor),this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onInterrupt",()=>{this.parent.transition("idle",{})})}complete(){this.parent.transition("idle",{})}}J(hW,"id","pointing_canvas");class fW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t,this.parent.currentToolIdMask=t.onInteractionEnd;const r=this.editor.selectedShapes[0];r&&(this.updateCursor(r),this.editor.setCroppingShape(r.id))});J(this,"onExit",()=>{this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.parent.currentToolIdMask=void 0});J(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})});J(this,"onPointerUp",()=>{this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}updateCursor(t){const r=vm[this.info.handle];this.editor.updateInstanceState({cursor:{type:r,rotation:t.rotation}})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.parent.transition("idle",{}))}}J(fW,"id","pointing_crop_handle");class pW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t;const r=t.shape.props[t.handle.id];(r==null?void 0:r.type)==="binding"&&this.editor.setHintingShapes([r.boundShapeId]),this.editor.updateInstanceState({cursor:{type:"grabbing",rotation:0}},{ephemeral:!0})});J(this,"onExit",()=>{this.editor.setHintingShapes([]),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});J(this,"onPointerUp",()=>{this.parent.transition("idle",this.info)});J(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("dragging_handle",this.info)});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}cancel(){this.parent.transition("idle",{})}}J(pW,"id","pointing_handle");class gW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.parent.currentToolIdMask=t.onInteractionEnd,this.info=t,this.updateCursor()});J(this,"onExit",()=>{this.parent.currentToolIdMask=void 0,this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0})});J(this,"onPointerMove",()=>{const{isDragging:t}=this.editor.inputs;t&&this.parent.transition("rotating",this.info)});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}updateCursor(){const{selectionRotation:t}=this.editor;this.editor.updateInstanceState({cursor:{type:vm[this.info.handle],rotation:t}})}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}J(gW,"id","pointing_rotate_handle");class mW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t});J(this,"onPointerUp",t=>{q4(this.editor),this.parent.transition("idle",t)});J(this,"onPointerMove",t=>{if(this.editor.inputs.isDragging){if(this.editor.instanceState.isReadonly)return;this.parent.transition("translating",t)}});J(this,"onDoubleClick",t=>{var i,a;const{hoveredShape:r}=this.editor,o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0});if(o){this.parent.transition("idle",{}),(a=(i=this.parent).onDoubleClick)==null||a.call(i,{...t,target:"shape",shape:this.editor.getShape(o)});return}});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}cancel(){this.parent.transition("idle",{})}}J(mW,"id","pointing_selection");class vW extends no{constructor(){super(...arguments);J(this,"hitShape",{});J(this,"hitShapeForPointerUp",{});J(this,"didSelectOnEnter",!1);J(this,"onEnter",t=>{const{selectedShapeIds:r,focusedGroupId:o,selectionRotatedPageBounds:i,inputs:{currentPagePoint:a,shiftKey:s,altKey:l}}=this.editor;this.hitShape=t.shape;const d=this.editor.getOutermostSelectableShape(t.shape);if(this.editor.getShapeUtil(t.shape).onClick||d.id===o||r.includes(d.id)||this.editor.isAncestorSelected(d.id)||r.length>1&&(i!=null&&i.containsPoint(a))){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=d;return}this.didSelectOnEnter=!0,s&&!l?(this.editor.cancelDoubleClick(),r.includes(d.id)||(this.editor.mark("shift selecting shape"),this.editor.setSelectedShapes([...r,d.id]))):(this.editor.mark("selecting shape"),this.editor.setSelectedShapes([d.id]))});J(this,"onPointerUp",t=>{var u;const{zoomLevel:r,focusedGroupId:o,selectedShapeIds:i,inputs:{currentPagePoint:a,shiftKey:s}}=this.editor,l=this.editor.getShapeAtPoint(a,{margin:Jd/r,hitInside:!0})??this.hitShape,d=l?this.editor.getOutermostSelectableShape(l):this.hitShapeForPointerUp;if(d){const p=this.editor.getShapeUtil(d);if(p.onClick){const f=(u=p.onClick)==null?void 0:u.call(p,d);if(f){this.editor.mark("shape on click"),this.editor.updateShapes([f]),this.parent.transition("idle",t);return}}if(d.id===o){i.length>0?(this.editor.mark("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),this.parent.transition("idle",t);return}}if(!this.didSelectOnEnter){const p=this.editor.getOutermostSelectableShape(l,f=>!i.includes(f.id));if(i.includes(p.id))if(s)this.editor.mark("deselecting on pointer up"),this.editor.deselect(d);else if(i.includes(d.id)){if(i.length===1&&(this.editor.isShapeOfType(d,"geo")||this.editor.isShapeOfType(d,"arrow"))){const h=this.editor.getShapeGeometry(d).children[1];if(h){const c=this.editor.getPointInShapeSpace(d,a);if(h.hitTestPoint(c)){this.editor.batch(()=>{this.editor.mark("editing on pointer up"),this.editor.select(d.id),this.editor.setEditingShape(d.id),this.editor.setCurrentTool("select.editing_shape")});return}}}this.editor.mark("selecting on pointer up"),this.editor.select(d.id)}else this.editor.mark("selecting on pointer up"),this.editor.select(d);else if(s){const f=this.editor.getShapeAncestors(p);this.editor.mark("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.selectedShapeIds.filter(h=>!f.find(c=>c.id===h)),p.id])}else this.editor.mark("selecting on pointer up"),this.editor.setSelectedShapes([p.id])}this.parent.transition("idle",t)});J(this,"onPointerMove",t=>{if(this.editor.inputs.isDragging){if(this.editor.instanceState.isReadonly)return;this.parent.transition("translating",t)}});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.cancel()});J(this,"onInterrupt",()=>{this.cancel()})}cancel(){this.parent.transition("idle",{})}}J(vW,"id","pointing_shape");class bW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"markId","");J(this,"creationCursorOffset",{x:0,y:0});J(this,"editAfterComplete",!1);J(this,"snapshot",{});J(this,"onEnter",t=>{const{isCreating:r=!1,editAfterComplete:o=!1,creationCursorOffset:i={x:0,y:0}}=t;this.info=t,this.parent.currentToolIdMask=t.onInteractionEnd,this.editAfterComplete=o,this.creationCursorOffset=i,t.isCreating&&this.editor.updateInstanceState({cursor:{type:"cross",rotation:0}},{ephemeral:!0}),this.snapshot=this._createSnapshot(),this.markId=r?`creating:${this.editor.onlySelectedShape.id}`:"starting resizing",r||this.editor.mark(this.markId),this.handleResizeStart(),this.updateShapes()});J(this,"onPointerMove",()=>{this.updateShapes()});J(this,"onKeyDown",()=>{this.updateShapes()});J(this,"onKeyUp",()=>{this.updateShapes()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"onExit",()=>{this.parent.currentToolIdMask=void 0,this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.editor.snaps.clear()});J(this,"_createSnapshot",()=>{const{selectedShapeIds:t,selectionRotation:r,inputs:{originPagePoint:o}}=this.editor,i=this.editor.selectionRotatedPageBounds,a=Le.RotWith(i.getHandlePoint(this.info.handle),i.point,r),s=Le.Sub(o,a),l=new Map;t.forEach(u=>{const p=this.editor.getShape(u);if(p){if(l.set(p.id,this._createShapeSnapshot(p)),this.editor.isShapeOfType(p,"frame")&&t.length===1)return;this.editor.visitDescendants(p.id,f=>{const h=this.editor.getShape(f);if(h&&(l.set(h.id,this._createShapeSnapshot(h)),this.editor.isShapeOfType(h,"frame")))return!1})}});const d=![...l.values()].some(u=>!NH(u.pageRotation,r)||u.isAspectRatioLocked);return{shapeSnapshots:l,selectionBounds:i,cursorHandleOffset:s,selectionRotation:r,selectedShapeIds:t,canShapesDeform:d,initialSelectionPageBounds:this.editor.selectionPageBounds}});J(this,"_createShapeSnapshot",t=>{const r=this.editor.getShapePageTransform(t),o=this.editor.getShapeUtil(t);return{shape:t,bounds:this.editor.getShapeGeometry(t).bounds,pageTransform:r,pageRotation:Yr.Decompose(r).rotation,isAspectRatioLocked:o.isAspectRatioLocked(t)}})}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}complete(){if(this.handleResizeEnd(),this.editAfterComplete&&this.editor.onlySelectedShape){this.editor.setEditingShape(this.editor.onlySelectedShape.id),this.editor.setCurrentTool("select.editing_shape");return}if(this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd){this.editor.setCurrentTool(this.info.onInteractionEnd,{});return}this.parent.transition("idle",{})}handleResizeStart(){const{shapeSnapshots:t}=this.snapshot,r=[];t.forEach(({shape:o})=>{var s;const i=this.editor.getShapeUtil(o),a=(s=i.onResizeStart)==null?void 0:s.call(i,o);a&&r.push(a)}),r.length>0&&this.editor.updateShapes(r)}handleResizeEnd(){const{shapeSnapshots:t}=this.snapshot,r=[];t.forEach(({shape:o})=>{var l;const i=this.editor.getShape(o.id),a=this.editor.getShapeUtil(o),s=(l=a.onResizeEnd)==null?void 0:l.call(a,o,i);s&&r.push(s)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{altKey:t,shiftKey:r}=this.editor.inputs,{shapeSnapshots:o,selectionBounds:i,cursorHandleOffset:a,selectedShapeIds:s,selectionRotation:l,canShapesDeform:d}=this.snapshot,u=r||!d,{ctrlKey:p}=this.editor.inputs,f=this.editor.inputs.currentPagePoint.clone().sub(a).sub(this.creationCursorOffset),h=this.editor.inputs.originPagePoint.clone().sub(a);if(this.editor.instanceState.isGridMode&&!p){const{gridSize:S}=this.editor.documentSettings;f.snapToGrid(S)}const c=this.info.handle,g=G$(c,Math.PI);if(this.editor.snaps.clear(),(this.editor.user.isSnapMode?!p:p)&&l%Ri===0){const{nudge:S}=this.editor.snaps.snapResize({dragDelta:Le.Sub(f,h),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:G$(c,l),isAspectRatioLocked:u,isResizingFromCenter:t});f.add(S)}const b=Le.RotWith(t?i.center:i.getHandlePoint(g),i.point,l),v=Le.Sub(f,b).rot(-l),w=Le.Sub(h,b).rot(-l),_=Le.DivV(v,w);Number.isFinite(_.x)||(_.x=1),Number.isFinite(_.y)||(_.y=1);const k=c==="top"||c==="bottom",y=c==="left"||c==="right";u?y?_.y=Math.abs(_.x):k?_.x=Math.abs(_.y):Math.abs(_.x)>Math.abs(_.y)?_.y=Math.abs(_.x)*(_.y<0?-1:1):_.x=Math.abs(_.y)*(_.x<0?-1:1):(k&&(_.x=1),y&&(_.y=1)),this.info.isCreating||this.updateCursor({dragHandle:c,isFlippedX:_.x<0,isFlippedY:_.y<0,rotation:l});for(const S of o.keys()){const C=o.get(S);this.editor.resizeShape(S,_,{initialShape:C.shape,initialBounds:C.bounds,initialPageTransform:C.pageTransform,dragHandle:c,mode:s.length===1&&S===s[0]?"resize_bounds":"scale_shape",scaleOrigin:b,scaleAxisRotation:l})}}updateCursor({dragHandle:t,isFlippedX:r,isFlippedY:o,rotation:i}){const a={...this.editor.instanceState.cursor};switch(t){case"top_left":case"bottom_right":{a.type="nwse-resize",r!==o&&(a.type="nesw-resize");break}case"top_right":case"bottom_left":{a.type="nesw-resize",r!==o&&(a.type="nwse-resize");break}}a.rotation=i,this.editor.setCursor(a)}}J(bW,"id","resizing");const u9=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function G$(n,e){e=e%Ni;const t=Math.round(e/(ji/4)),r=u9.indexOf(n);return u9[(r+t)%u9.length]}class yW extends no{constructor(){super(...arguments);J(this,"snapshot",{});J(this,"info",{});J(this,"markId","");J(this,"onEnter",t=>{this.info=t,this.parent.currentToolIdMask=t.onInteractionEnd,this.markId="rotate start",this.editor.mark(this.markId);const r=kF({editor:this.editor});if(!r)return this.parent.transition("idle",this.info);this.snapshot=r,this.handleStart()});J(this,"onExit",()=>{this.editor.setCursor({type:"default",rotation:0}),this.parent.currentToolIdMask=void 0,this.snapshot={}});J(this,"onPointerMove",()=>{this.update()});J(this,"onKeyDown",()=>{this.update()});J(this,"onKeyUp",()=>{this.update()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"update",()=>{const t=this._getRotationFromPointerPosition({snapToNearestDegree:!1});z3({editor:this.editor,delta:t,snapshot:this.snapshot,stage:"update"}),this.editor.updateInstanceState({cursor:{type:vm[this.info.handle],rotation:t+this.snapshot.initialSelectionRotation}})});J(this,"cancel",()=>{this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)});J(this,"complete",()=>{z3({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)})}handleStart(){const t=this._getRotationFromPointerPosition({snapToNearestDegree:!1});z3({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.updateInstanceState({cursor:{type:vm[this.info.handle],rotation:t+this.snapshot.initialSelectionRotation}})}_getRotationFromPointerPosition({snapToNearestDegree:t}){const{selectionRotatedPageBounds:r,selectionRotation:o,inputs:{shiftKey:i,currentPagePoint:a}}=this.editor,{initialCursorAngle:s,initialSelectionRotation:l}=this.snapshot;if(!r)return l;const u=r.center.clone().rotWith(r.point,o).angle(a)-s;let p=l+u;if(i)p=I4(p,24);else if(t&&(p=Math.round(p/jA)*jA,this.editor.instanceState.isCoarsePointer)){const f=I4(p,4),h=DH(p,f);Math.abs(h)<L5e(5)&&(p=f)}return p-l}}J(yW,"id","rotating");class xW extends no{constructor(){super(...arguments);J(this,"hits",new Set);J(this,"size",0);J(this,"scribble",{});J(this,"initialSelectedShapeIds",new Set);J(this,"newlySelectedShapeIds",new Set);J(this,"onEnter",()=>{this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.selectedShapeIds:[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear(),this.startScribble(),this.updateScribbleSelection(!0),requestAnimationFrame(()=>{this.editor.updateInstanceState({brush:null})})});J(this,"onExit",()=>{this.scribble.stop()});J(this,"onPointerMove",()=>{this.updateScribbleSelection(!0)});J(this,"onPointerUp",()=>{this.complete()});J(this,"onKeyDown",()=>{this.updateScribbleSelection(!1)});J(this,"onKeyUp",()=>{this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing",{})});J(this,"onCancel",()=>{this.cancel()});J(this,"onComplete",()=>{this.complete()});J(this,"startScribble",()=>{var t;this.scribble.tick&&this.editor.off("tick",(t=this.scribble)==null?void 0:t.tick),this.scribble=new NE({onUpdate:this.onScribbleUpdate,onComplete:this.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),this.editor.on("tick",this.scribble.tick)});J(this,"pushPointToScribble",()=>{const{x:t,y:r}=this.editor.inputs.currentPagePoint;this.scribble.addPoint(t,r)});J(this,"onScribbleUpdate",t=>{this.editor.updateInstanceState({scribble:t})});J(this,"onScribbleComplete",()=>{this.editor.off("tick",this.scribble.tick),this.editor.updateInstanceState({scribble:null})})}updateScribbleSelection(t){const{zoomLevel:r,currentPageShapes:o,inputs:{shiftKey:i,originPagePoint:a,previousPagePoint:s,currentPagePoint:l}}=this.editor,{newlySelectedShapeIds:d,initialSelectedShapeIds:u}=this;t&&this.pushPointToScribble();const p=o;let f,h,c,g;for(let m=0,b=p.length;m<b;m++)if(f=p[m],h=this.editor.getShapeGeometry(f),!(this.editor.isShapeOfType(f,"group")||d.has(f.id)||this.editor.isShapeOfType(f,"frame")&&h.hitTestPoint(this.editor.getPointInShapeSpace(f,a),0,!1)||this.editor.isShapeOrAncestorLocked(f))&&(c=this.editor.getPointInShapeSpace(f,s),g=this.editor.getPointInShapeSpace(f,l),h.hitTestLineSegment(c,g,Jd/r))){const v=this.editor.getOutermostSelectableShape(f),w=this.editor.getShapeMask(v.id);if(w&&mF(s,l,w)!==null&&!Du(l,w))continue;d.add(v.id)}this.editor.setSelectedShapes([...new Set(i?[...d,...u]:[...d])],{squashing:!0})}complete(){this.parent.transition("idle",{})}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds],{squashing:!0}),this.parent.transition("idle",{})}}J(xW,"id","scribble_brushing");const X$=100;class BTe{constructor(e){J(this,"prevDroppingShapeId",null);J(this,"droppingNodeTimer",null);J(this,"first",!0);J(this,"dispose",()=>{this.clear()});this.editor=e,e.disposables.add(this.dispose)}updateDroppingNode(e,t){var r;this.first&&(this.prevDroppingShapeId=((r=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,e))==null?void 0:r.id)??null,this.first=!1),this.droppingNodeTimer===null?this.setDragTimer(e,X$*10,t):this.editor.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,X$,t))}setDragTimer(e,t,r){this.droppingNodeTimer=setTimeout(()=>{this.editor.batch(()=>{this.handleDrag(this.editor.inputs.currentPagePoint,e,r)}),this.droppingNodeTimer=null},t)}handleDrag(e,t,r){var l,d,u,p,f;t=Lo(t.map(h=>this.editor.getShape(h.id)));const o=((l=this.editor.getDroppingOverShape(e,t))==null?void 0:l.id)??null;if(o===this.prevDroppingShapeId)return;const{prevDroppingShapeId:i}=this,a=i&&this.editor.getShape(i),s=o&&this.editor.getShape(o);if(a&&((u=(d=this.editor.getShapeUtil(a)).onDragShapesOut)==null||u.call(d,a,t)),s){const h=(f=(p=this.editor.getShapeUtil(s)).onDragShapesOver)==null?void 0:f.call(p,s,t);h&&h.shouldHint&&this.editor.setHintingShapes([s.id])}else this.editor.setHintingShapes([]);r==null||r(),this.prevDroppingShapeId=o}dropShapes(e){var r,o;const{prevDroppingShapeId:t}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,e),t){const i=this.editor.getShape(t);if(!i)return;(o=(r=this.editor.getShapeUtil(i)).onDropShapesOver)==null||o.call(r,i,e)}}clear(){this.prevDroppingShapeId=null,this.droppingNodeTimer!==null&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}}class wW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"selectionSnapshot",{});J(this,"snapshot",{});J(this,"markId","");J(this,"isCloning",!1);J(this,"isCreating",!1);J(this,"editAfterComplete",!1);J(this,"dragAndDropManager",new BTe(this.editor));J(this,"onEnter",t=>{const{isCreating:r=!1,editAfterComplete:o=!1}=t;if(this.info=t,this.parent.currentToolIdMask=t.onInteractionEnd,this.isCreating=r,this.editAfterComplete=o,this.markId=r?`creating:${this.editor.onlySelectedShape.id}`:"translating",this.editor.mark(this.markId),this.isCloning=!1,this.info=t,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=q$(this.editor),!this.isCreating&&this.editor.inputs.altKey){this.startCloning();return}this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes(),this.editor.on("tick",this.updateParent)});J(this,"onExit",()=>{this.parent.currentToolIdMask=void 0,this.editor.off("tick",this.updateParent),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clear(),this.editor.updateInstanceState({cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.dragAndDropManager.clear()});J(this,"onPointerMove",()=>{this.updateShapes()});J(this,"onKeyDown",()=>{if(this.editor.inputs.altKey&&!this.isCloning){this.startCloning();return}this.updateShapes()});J(this,"onKeyUp",()=>{if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onComplete",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()});J(this,"updateParent",()=>{const{snapshot:t}=this;this.dragAndDropManager.updateDroppingNode(t.movingShapes,this.updateParentTransforms)});J(this,"updateParentTransforms",()=>{const{editor:t,snapshot:{shapeSnapshots:r}}=this;r.forEach(o=>{const i=t.getShape(o.shape.id);if(!i)return null;const a=Dl(i.parentId)?null:Yr.Inverse(t.getShapePageTransform(i.parentId));o.parentTransform=a})})}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.editor.duplicateShapes(Array.from(this.editor.selectedShapeIds)),this.snapshot=q$(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId="translating",this.editor.mark(this.markId),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd)this.editor.setCurrentTool(this.info.onInteractionEnd);else if(this.editAfterComplete){const t=this.editor.onlySelectedShape;t&&(this.editor.setEditingShape(t.id),this.editor.setCurrentTool("select.editing_shape"))}else this.parent.transition("idle",{})}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:t}=this.snapshot,r=[];t.forEach(o=>{var s;const i=this.editor.getShapeUtil(o),a=(s=i.onTranslateStart)==null?void 0:s.call(i,o);a&&r.push(a)}),r.length>0&&this.editor.updateShapes(r),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:t}=this.snapshot,r=[];t.forEach(o=>{var l;const i=this.editor.getShape(o.id),a=this.editor.getShapeUtil(o),s=(l=a.onTranslateEnd)==null?void 0:l.call(a,o,i);s&&r.push(s)}),r.length>0&&this.editor.updateShapes(r)}handleChange(){const{movingShapes:t}=this.snapshot,r=[];t.forEach(o=>{var l;const i=this.editor.getShape(o.id),a=this.editor.getShapeUtil(o),s=(l=a.onTranslate)==null?void 0:l.call(a,o,i);s&&r.push(s)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{snapshot:t}=this;this.dragAndDropManager.updateDroppingNode(t.movingShapes,this.updateParentTransforms),HTe({editor:this.editor,shapeSnapshots:t.shapeSnapshots,averagePagePoint:t.averagePagePoint,initialSelectionPageBounds:t.initialPageBounds,initialSelectionSnapPoints:t.initialSnapPoints}),this.handleChange()}}J(wW,"id","translating");function q$(n){const e=[],t=[],r=Lo(n.selectedShapeIds.map(o=>{const i=n.getShape(o);if(!i)return null;e.push(i);const a=n.getShapePageTransform(o).point();if(!a)return null;t.push(a);const s=zh.isId(i.parentId)?null:Yr.Inverse(n.getShapePageTransform(i.parentId));return{shape:i,pagePoint:a,parentTransform:s}}));return{averagePagePoint:Le.Average(t),movingShapes:e,shapeSnapshots:r,initialPageBounds:n.selectionPageBounds,initialSnapPoints:n.selectedShapeIds.length===1?n.snaps.snapPointsCache.get(n.selectedShapeIds[0]):n.selectionPageBounds?n.selectionPageBounds.snapPoints.map((o,i)=>({id:"selection:"+i,x:o.x,y:o.y})):[]}}function HTe({editor:n,shapeSnapshots:e,averagePagePoint:t,initialSelectionPageBounds:r,initialSelectionSnapPoints:o}){const{inputs:i,instanceState:{isGridMode:a},documentSettings:{gridSize:s}}=n,l=Le.Sub(i.currentPagePoint,i.originPagePoint),d=n.inputs.shiftKey?Math.abs(l.x)<Math.abs(l.y)?"x":"y":null;if(d==="x"?l.x=0:d==="y"&&(l.y=0),n.snaps.clear(),(n.user.isSnapMode?!i.ctrlKey:i.ctrlKey)&&n.inputs.pointerVelocity.len()<.5){const{nudge:h}=n.snaps.snapTranslate({dragDelta:l,initialSelectionPageBounds:r,lockedAxis:d,initialSelectionSnapPoints:o});l.add(h)}const p=Le.Add(t,l);a&&!i.ctrlKey&&p.snapToGrid(s);const f=Le.Sub(p,t);n.updateShapes(Lo(e.map(({shape:h,pagePoint:c,parentTransform:g})=>{const m=Le.Add(c,f),b=g?Yr.applyToPoint(g,m):m;return{id:h.id,type:h.type,x:b.x,y:b.y}})),{squashing:!0})}class m6 extends no{constructor(){super(...arguments);J(this,"onExit",()=>{this.editor.currentPageState.editingShapeId&&this.editor.setEditingShape(null)})}}J(m6,"id","select"),J(m6,"initial","idle"),J(m6,"children",()=>[g6,cW,jTe,hW,vW,wW,oW,xW,fW,mW,lW,uW,bW,yW,gW,pW,dW]);class CW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t});J(this,"onPointerDown",()=>{this.parent.transition("pointing",this.info)})}}J(CW,"id","idle");class SW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t});J(this,"onPointerUp",()=>{this.complete()});J(this,"onPointerMove",()=>{this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)});J(this,"onCancel",()=>{this.cancel()})}complete(){const{currentScreenPoint:t}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(t,{duration:220}):this.editor.zoomIn(t,{duration:220}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}J(SW,"id","pointing");class kW extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"zoomBrush",new uo);J(this,"onEnter",t=>{this.info=t,this.update()});J(this,"onExit",()=>{this.editor.updateInstanceState({zoomBrush:null})});J(this,"onPointerMove",()=>{this.update()});J(this,"onPointerUp",()=>{this.complete()});J(this,"onCancel",()=>{this.cancel()})}update(){const{inputs:{originPagePoint:t,currentPagePoint:r}}=this.editor;this.zoomBrush.setTo(uo.FromPoints([t,r])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:t}=this,r=8/this.editor.zoomLevel;if(t.width<r&&t.height<r){const o=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(o,{duration:220}):this.editor.zoomIn(o,{duration:220})}else{const o=this.editor.inputs.altKey?this.editor.zoomLevel/2:void 0;this.editor.zoomToBounds(t,o,{duration:220})}this.parent.transition("idle",this.info)}}J(kW,"id","zoom_brushing");class v6 extends no{constructor(){super(...arguments);J(this,"info",{});J(this,"onEnter",t=>{this.info=t,this.currentToolIdMask=t.onInteractionEnd,this.updateCursor()});J(this,"onExit",()=>{this.currentToolIdMask=void 0,this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}},{ephemeral:!0}),this.currentToolIdMask=void 0});J(this,"onKeyDown",()=>{this.updateCursor()});J(this,"onKeyUp",t=>{this.updateCursor(),t.code==="KeyZ"&&this.complete()});J(this,"onInterrupt",()=>{this.complete()})}complete(){this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select"?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select",{})}updateCursor(){this.editor.inputs.altKey?this.editor.updateInstanceState({cursor:{type:"zoom-out",rotation:0}},{ephemeral:!0}):this.editor.updateInstanceState({cursor:{type:"zoom-in",rotation:0}},{ephemeral:!0})}}J(v6,"id","zoom"),J(v6,"initial","idle"),J(v6,"children",()=>[CW,kW,SW]);const FTe=[h6,f6,p6,v6,m6],_W=ne.forwardRef((n,e)=>ne.createElement(oa.span,ur({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),EW="ToastProvider",[BE,ZTe,UTe]=yw("Toast"),[PW,vNe]=Wh("Toast",[UTe]),[WTe,Pw]=PW(EW),MW=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:i=50,children:a}=n,[s,l]=ne.useState(null),[d,u]=ne.useState(0),p=ne.useRef(!1),f=ne.useRef(!1);return ne.createElement(BE.Provider,{scope:e},ne.createElement(WTe,{scope:e,label:t,duration:r,swipeDirection:o,swipeThreshold:i,toastCount:d,viewport:s,onViewportChange:l,onToastAdd:ne.useCallback(()=>u(h=>h+1),[]),onToastRemove:ne.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:f},a))};MW.propTypes={label(n){if(n.label&&typeof n.label=="string"&&!n.label.trim()){const e=`Invalid prop \`label\` supplied to \`${EW}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const VTe="ToastViewport",KTe=["F8"],$S="toast.viewportPause",jS="toast.viewportResume",YTe=ne.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=KTe,label:o="Notifications ({hotkey})",...i}=n,a=Pw(VTe,t),s=ZTe(t),l=ne.useRef(null),d=ne.useRef(null),u=ne.useRef(null),p=ne.useRef(null),f=Ma(e,p,a.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),c=a.toastCount>0;ne.useEffect(()=>{const m=b=>{var v;r.every(_=>b[_]||b.code===_)&&((v=p.current)===null||v===void 0||v.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[r]),ne.useEffect(()=>{const m=l.current,b=p.current;if(c&&m&&b){const v=()=>{if(!a.isClosePausedRef.current){const y=new CustomEvent($S);b.dispatchEvent(y),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const y=new CustomEvent(jS);b.dispatchEvent(y),a.isClosePausedRef.current=!1}},_=y=>{!m.contains(y.relatedTarget)&&w()},k=()=>{m.contains(document.activeElement)||w()};return m.addEventListener("focusin",v),m.addEventListener("focusout",_),m.addEventListener("pointermove",v),m.addEventListener("pointerleave",k),window.addEventListener("blur",v),window.addEventListener("focus",w),()=>{m.removeEventListener("focusin",v),m.removeEventListener("focusout",_),m.removeEventListener("pointermove",v),m.removeEventListener("pointerleave",k),window.removeEventListener("blur",v),window.removeEventListener("focus",w)}}},[c,a.isClosePausedRef]);const g=ne.useCallback(({tabbingDirection:m})=>{const v=s().map(w=>{const _=w.ref.current,k=[_,...dOe(_)];return m==="forwards"?k:k.reverse()});return(m==="forwards"?v.reverse():v).flat()},[s]);return ne.useEffect(()=>{const m=p.current;if(m){const b=v=>{const w=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!w){const C=document.activeElement,I=v.shiftKey;if(v.target===m&&I){var k;(k=d.current)===null||k===void 0||k.focus();return}const L=g({tabbingDirection:I?"backwards":"forwards"}),j=L.findIndex($=>$===C);if(h9(L.slice(j+1)))v.preventDefault();else{var y,S;I?(y=d.current)===null||y===void 0||y.focus():(S=u.current)===null||S===void 0||S.focus()}}};return m.addEventListener("keydown",b),()=>m.removeEventListener("keydown",b)}},[s,g]),ne.createElement(ive,{ref:l,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:c?void 0:"none"}},c&&ne.createElement(J$,{ref:d,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"forwards"});h9(m)}}),ne.createElement(BE.Slot,{scope:t},ne.createElement(oa.ol,ur({tabIndex:-1},i,{ref:f}))),c&&ne.createElement(J$,{ref:u,onFocusFromOutsideViewport:()=>{const m=g({tabbingDirection:"backwards"});h9(m)}}))}),GTe="ToastFocusProxy",J$=ne.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...o}=n,i=Pw(GTe,t);return ne.createElement(_W,ur({"aria-hidden":!0,tabIndex:0},o,{ref:e,style:{position:"fixed"},onFocus:a=>{var s;const l=a.relatedTarget;!((s=i.viewport)!==null&&s!==void 0&&s.contains(l))&&r()}}))}),Mw="Toast",XTe="toast.swipeStart",qTe="toast.swipeMove",JTe="toast.swipeCancel",QTe="toast.swipeEnd",eOe=ne.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:o,onOpenChange:i,...a}=n,[s=!0,l]=r0({prop:r,defaultProp:o,onChange:i});return ne.createElement(Vh,{present:t||s},ne.createElement(IW,ur({open:s},a,{ref:e,onClose:()=>l(!1),onPause:pl(n.onPause),onResume:pl(n.onResume),onSwipeStart:ao(n.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ao(n.onSwipeMove,d=>{const{x:u,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:ao(n.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ao(n.onSwipeEnd,d=>{const{x:u,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),l(!1)})})))}),[tOe,nOe]=PW(Mw,{onClose(){}}),IW=ne.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:o,open:i,onClose:a,onEscapeKeyDown:s,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:p,onSwipeCancel:f,onSwipeEnd:h,...c}=n,g=Pw(Mw,t),[m,b]=ne.useState(null),v=Ma(e,$=>b($)),w=ne.useRef(null),_=ne.useRef(null),k=o||g.duration,y=ne.useRef(0),S=ne.useRef(k),C=ne.useRef(0),{onToastAdd:I,onToastRemove:A}=g,T=pl(()=>{var $;(m==null?void 0:m.contains(document.activeElement))&&(($=g.viewport)===null||$===void 0||$.focus()),a()}),L=ne.useCallback($=>{!$||$===1/0||(window.clearTimeout(C.current),y.current=new Date().getTime(),C.current=window.setTimeout(T,$))},[T]);ne.useEffect(()=>{const $=g.viewport;if($){const ee=()=>{L(S.current),d==null||d()},Q=()=>{const pe=new Date().getTime()-y.current;S.current=S.current-pe,window.clearTimeout(C.current),l==null||l()};return $.addEventListener($S,Q),$.addEventListener(jS,ee),()=>{$.removeEventListener($S,Q),$.removeEventListener(jS,ee)}}},[g.viewport,k,l,d,L]),ne.useEffect(()=>{i&&!g.isClosePausedRef.current&&L(k)},[i,k,g.isClosePausedRef,L]),ne.useEffect(()=>(I(),()=>A()),[I,A]);const j=ne.useMemo(()=>m?LW(m):null,[m]);return g.viewport?ne.createElement(ne.Fragment,null,j&&ne.createElement(rOe,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},j),ne.createElement(tOe,{scope:t,onClose:T},up.createPortal(ne.createElement(BE.ItemSlot,{scope:t},ne.createElement(ove,{asChild:!0,onEscapeKeyDown:ao(s,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1})},ne.createElement(oa.li,ur({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection},c,{ref:v,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ao(n.onKeyDown,$=>{$.key==="Escape"&&(s==null||s($.nativeEvent),$.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:ao(n.onPointerDown,$=>{$.button===0&&(w.current={x:$.clientX,y:$.clientY})}),onPointerMove:ao(n.onPointerMove,$=>{if(!w.current)return;const ee=$.clientX-w.current.x,Q=$.clientY-w.current.y,pe=!!_.current,ie=["left","right"].includes(g.swipeDirection),te=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Z=ie?te(0,ee):0,D=ie?0:te(0,Q),B=$.pointerType==="touch"?10:2,H={x:Z,y:D},V={originalEvent:$,delta:H};pe?(_.current=H,u3(qTe,p,V,{discrete:!1})):Q$(H,g.swipeDirection,B)?(_.current=H,u3(XTe,u,V,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(ee)>B||Math.abs(Q)>B)&&(w.current=null)}),onPointerUp:ao(n.onPointerUp,$=>{const ee=_.current,Q=$.target;if(Q.hasPointerCapture($.pointerId)&&Q.releasePointerCapture($.pointerId),_.current=null,w.current=null,ee){const pe=$.currentTarget,ie={originalEvent:$,delta:ee};Q$(ee,g.swipeDirection,g.swipeThreshold)?u3(QTe,h,ie,{discrete:!0}):u3(JTe,f,ie,{discrete:!0}),pe.addEventListener("click",te=>te.preventDefault(),{once:!0})}})})))),g.viewport))):null});IW.propTypes={type(n){if(n.type&&!["foreground","background"].includes(n.type)){const e=`Invalid prop \`type\` supplied to \`${Mw}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const rOe=n=>{const{__scopeToast:e,children:t,...r}=n,o=Pw(Mw,e),[i,a]=ne.useState(!1),[s,l]=ne.useState(!1);return lOe(()=>a(!0)),ne.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),s?null:ne.createElement(b_,{asChild:!0},ne.createElement(_W,r,i&&ne.createElement(ne.Fragment,null,o.label," ",t)))},oOe=ne.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return ne.createElement(oa.div,ur({},r,{ref:e}))}),iOe=ne.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return ne.createElement(oa.div,ur({},r,{ref:e}))}),aOe="ToastAction",TW=ne.forwardRef((n,e)=>{const{altText:t,...r}=n;return t?ne.createElement(AW,{altText:t,asChild:!0},ne.createElement(OW,ur({},r,{ref:e}))):null});TW.propTypes={altText(n){return n.altText?null:new Error(`Missing prop \`altText\` expected on \`${aOe}\``)}};const sOe="ToastClose",OW=ne.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,o=nOe(sOe,t);return ne.createElement(AW,{asChild:!0},ne.createElement(oa.button,ur({type:"button"},r,{ref:e,onClick:ao(n.onClick,o.onClose)})))}),AW=ne.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...o}=n;return ne.createElement(oa.div,ur({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},o,{ref:e}))});function LW(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),cOe(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!o)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...LW(r))}}),e}function u3(n,e,t,{discrete:r}){const o=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?m_(o,i):o.dispatchEvent(i)}const Q$=(n,e,t=0)=>{const r=Math.abs(n.x),o=Math.abs(n.y),i=r>o;return e==="left"||e==="right"?i&&r>t:!i&&o>t};function lOe(n=()=>{}){const e=pl(n);F1(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function cOe(n){return n.nodeType===n.ELEMENT_NODE}function dOe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function h9(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}const uOe=eOe,hOe=oOe,fOe=iOe,pOe=TW,ej=OW,c1="2.0.0-canary.84788cded670";let RS={fonts:{draw:`https://unpkg.com/@tldraw/assets@${c1}/fonts/Shantell_Sans-Normal-SemiBold.woff2`,serif:`https://unpkg.com/@tldraw/assets@${c1}/fonts/IBMPlexSerif-Medium.woff2`,sansSerif:`https://unpkg.com/@tldraw/assets@${c1}/fonts/IBMPlexSans-Medium.woff2`,monospace:`https://unpkg.com/@tldraw/assets@${c1}/fonts/IBMPlexMono-Medium.woff2`}};function gOe(n){return ne.useMemo(()=>n?{fonts:{...RS.fonts,...n==null?void 0:n.fonts}}:RS,[n])}const mOe=["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"];let rv={...RS,icons:Object.fromEntries(mOe.map(n=>[n,`https://unpkg.com/@tldraw/assets@${c1}/icons/icon/${n}.svg`])),translations:Object.fromEntries(mb.map(n=>[n.locale,`https://unpkg.com/@tldraw/assets@${c1}/translations/${n.locale}.json`])),embedIcons:Object.fromEntries(cm.map(n=>[n.type,`https://unpkg.com/@tldraw/assets@${c1}/embed-icons/${n.type}.png`]))};function vOe(n){return n?{fonts:Object.assign({...rv.fonts},{...n==null?void 0:n.fonts}),icons:Object.assign({...rv.icons},{...n==null?void 0:n.icons}),embedIcons:Object.assign({...rv.embedIcons},{...n==null?void 0:n.embedIcons}),translations:Object.assign({...rv.translations},{...n==null?void 0:n.translations})}:rv}const HE=ne.forwardRef(function({className:e,label:t,icon:r,iconLeft:o,autoselect:i=!1,autofocus:a=!1,defaultValue:s,placeholder:l,onComplete:d,onValueChange:u,onCancel:p,onBlur:f,shouldManuallyMaintainScrollPositionWhenFocused:h=!1,children:c,value:g},m){const b=Dn(),v=ne.useRef(null);ne.useImperativeHandle(m,()=>v.current);const w=ai(),_=ne.useRef(s??""),k=ne.useRef(s??""),[y,S]=ne.useState(!1),C=ne.useCallback(L=>{S(!0);const j=L.currentTarget;k.current=j.value,requestAnimationFrame(()=>{i&&j.select()})},[i]),I=ne.useCallback(L=>{const j=L.currentTarget.value;k.current=j,u==null||u(j)},[u]),A=ne.useCallback(L=>{switch(L.key){case"Enter":{L.currentTarget.blur(),L.stopPropagation(),d==null||d(L.currentTarget.value);break}case"Escape":{L.currentTarget.value=_.current,L.currentTarget.blur(),L.stopPropagation(),p==null||p(L.currentTarget.value);break}}},[d,p]),T=ne.useCallback(L=>{S(!1);const j=L.currentTarget.value;f==null||f(j)},[f]);return ne.useEffect(()=>{if(!b.environment.isIos)return;const L=window.visualViewport;if(y&&h&&L){const j=()=>{var $;($=v.current)==null||$.scrollIntoView({block:"center"})};return L.addEventListener("resize",j),L.addEventListener("scroll",j),requestAnimationFrame(()=>{var $;($=v.current)==null||$.scrollIntoView({block:"center"})}),()=>{L.removeEventListener("resize",j),L.removeEventListener("scroll",j)}}},[b,y,h]),K.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[c,t&&K.jsx("label",{children:w(t)}),o&&K.jsx(Vl,{icon:o,className:"tlui-icon-left",small:!0}),K.jsx("input",{ref:v,className:vo("tlui-input",e),type:"text",defaultValue:s,onKeyUp:A,onChange:I,onFocus:C,onBlur:T,autoFocus:a,placeholder:l,value:g}),r&&K.jsx(Vl,{icon:r,small:!!t})]})});function tj(n){return QC(n)?{isValid:!0,hasProtocol:!0}:QC("https://"+n)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const bOe=gi(function({onClose:e}){const r=Dn().onlySelectedShape;return r&&"url"in r.props&&typeof r.props.url=="string"?K.jsx(yOe,{onClose:e,selectedShape:r}):null}),yOe=gi(function({onClose:e,selectedShape:t}){const r=Dn(),o=ai(),i=ne.useRef(null);ne.useEffect(()=>{requestAnimationFrame(()=>{var c;return(c=i.current)==null?void 0:c.focus()})},[]);const a=ne.useRef(t.props.url),[s,l]=ne.useState(()=>{const c=tj(t.props.url),g=c.isValid===!0?c.hasProtocol?t.props.url:"https://"+t.props.url:"https://";return{actual:g,safe:g,valid:!0}}),d=ne.useCallback(c=>{const g=c.replace(/https?:\/\/(https?:\/\/)/,(v,w)=>w),m=tj(g),b=m.isValid===!0?m.hasProtocol?g:"https://"+g:"https://";l({actual:g,safe:b,valid:m.isValid})},[]),u=ne.useCallback(()=>{const{onlySelectedShape:c}=r;c&&(r.updateShapes([{id:c.id,type:c.type,props:{url:""}}]),e())},[r,e]),p=ne.useCallback(()=>{const{onlySelectedShape:c}=r;c&&(c&&"url"in c.props&&c.props.url!==s.safe&&r.updateShapes([{id:c.id,type:c.type,props:{url:s.safe}}]),e())},[r,e,s]),f=ne.useCallback(()=>{e()},[e]);if(!t)return e(),null;const h=a.current&&!s.valid;return K.jsxs(K.Fragment,{children:[K.jsxs(mw,{children:[K.jsx(vw,{children:o("edit-link-dialog.title")}),K.jsx(bw,{})]}),K.jsx(Sb,{children:K.jsxs("div",{className:"tlui-edit-link-dialog",children:[K.jsx(HE,{ref:i,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:s.actual,onValueChange:d,onComplete:p,onCancel:f}),K.jsx("div",{children:s.valid?o("edit-link-dialog.detail"):o("edit-link-dialog.invalid-url")})]})}),K.jsxs(mE,{className:"tlui-dialog__footer__actions",children:[K.jsx(io,{onClick:f,onTouchEnd:f,children:o("edit-link-dialog.cancel")}),h?K.jsx(io,{type:"danger",onTouchEnd:u,onClick:u,children:o("edit-link-dialog.clear")}):K.jsx(io,{type:"primary",disabled:!s.valid,onTouchEnd:p,onClick:p,children:o("edit-link-dialog.save")})]})]})}),$W=gi(function({onClose:e}){const t=Dn(),r=ai(),o=gE(),[i,a]=ne.useState(null),[s,l]=ne.useState(""),[d,u]=ne.useState(null),[p,f]=ne.useState(!1),h=ne.useRef(-1);return K.jsxs(K.Fragment,{children:[K.jsxs(mw,{children:[K.jsx(vw,{children:i?`${r("embed-dialog.title")}  ${i.title}`:r("embed-dialog.title")}),K.jsx(bw,{})]}),i?K.jsxs(K.Fragment,{children:[K.jsxs(Sb,{className:"tlui-embed-dialog__enter",children:[K.jsx(HE,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:c=>{l(c);const g=bh(c);u(g&&g.definition.type===i.type?g:null),f(!1),clearTimeout(h.current),h.current=setTimeout(()=>f(!g),320)}}),s===""?K.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[K.jsx("span",{children:r("embed-dialog.instruction")})," ",i.instructionLink&&K.jsxs("a",{target:"_blank",rel:"noopener noreferrer",href:i.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",K.jsx(Vl,{icon:"external-link",small:!0})]})]}):K.jsx("div",{className:"tlui-embed-dialog__warning",children:p?r("embed-dialog.invalid-url"):""})]}),K.jsxs(mE,{className:"tlui-dialog__footer__actions",children:[K.jsx(io,{onClick:()=>{a(null),u(null),l("")},label:"embed-dialog.back"}),K.jsx("div",{className:"tlui-embed__spacer"}),K.jsx(io,{label:"embed-dialog.cancel",onClick:e}),K.jsx(io,{type:"primary",disabled:!d,label:"embed-dialog.create",onClick:()=>{d&&(t.putExternalContent({type:"embed",url:s,point:t.viewportPageCenter,embed:d.definition}),e())}})]})]}):K.jsxs(K.Fragment,{children:[K.jsx(Sb,{className:"tlui-embed-dialog__list",children:cm.map(c=>K.jsxs("button",{className:"tlui-embed-dialog__item",onClick:()=>a(c),children:[K.jsx("div",{className:"tlui-embed-dialog__item__image",children:K.jsx("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:`url(${o.embedIcons[c.type]})`}})}),K.jsx("div",{className:"tlui-embed-dialog__item__title",children:c.title})]},c.type))}),K.jsx("div",{className:"tlui-dialog__scrim"})]})]})});var FE={exports:{}};FE.exports;(function(n){var e=function(){var t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function a(l,d){if(!i[l]){i[l]={};for(var u=0;u<l.length;u++)i[l][l.charAt(u)]=u}return i[l][d]}var s={compressToBase64:function(l){if(l==null)return"";var d=s._compress(l,6,function(u){return r.charAt(u)});switch(d.length%4){default:case 0:return d;case 1:return d+"===";case 2:return d+"==";case 3:return d+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:s._decompress(l.length,32,function(d){return a(r,l.charAt(d))})},compressToUTF16:function(l){return l==null?"":s._compress(l,15,function(d){return t(d+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:s._decompress(l.length,16384,function(d){return l.charCodeAt(d)-32})},compressToUint8Array:function(l){for(var d=s.compress(l),u=new Uint8Array(d.length*2),p=0,f=d.length;p<f;p++){var h=d.charCodeAt(p);u[p*2]=h>>>8,u[p*2+1]=h%256}return u},decompressFromUint8Array:function(l){if(l==null)return s.decompress(l);for(var d=new Array(l.length/2),u=0,p=d.length;u<p;u++)d[u]=l[u*2]*256+l[u*2+1];var f=[];return d.forEach(function(h){f.push(t(h))}),s.decompress(f.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":s._compress(l,6,function(d){return o.charAt(d)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),s._decompress(l.length,32,function(d){return a(o,l.charAt(d))}))},compress:function(l){return s._compress(l,16,function(d){return t(d)})},_compress:function(l,d,u){if(l==null)return"";var p,f,h={},c={},g="",m="",b="",v=2,w=3,_=2,k=[],y=0,S=0,C;for(C=0;C<l.length;C+=1)if(g=l.charAt(C),Object.prototype.hasOwnProperty.call(h,g)||(h[g]=w++,c[g]=!0),m=b+g,Object.prototype.hasOwnProperty.call(h,m))b=m;else{if(Object.prototype.hasOwnProperty.call(c,b)){if(b.charCodeAt(0)<256){for(p=0;p<_;p++)y=y<<1,S==d-1?(S=0,k.push(u(y)),y=0):S++;for(f=b.charCodeAt(0),p=0;p<8;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1}else{for(f=1,p=0;p<_;p++)y=y<<1|f,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=0;for(f=b.charCodeAt(0),p=0;p<16;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1}v--,v==0&&(v=Math.pow(2,_),_++),delete c[b]}else for(f=h[b],p=0;p<_;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1;v--,v==0&&(v=Math.pow(2,_),_++),h[m]=w++,b=String(g)}if(b!==""){if(Object.prototype.hasOwnProperty.call(c,b)){if(b.charCodeAt(0)<256){for(p=0;p<_;p++)y=y<<1,S==d-1?(S=0,k.push(u(y)),y=0):S++;for(f=b.charCodeAt(0),p=0;p<8;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1}else{for(f=1,p=0;p<_;p++)y=y<<1|f,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=0;for(f=b.charCodeAt(0),p=0;p<16;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1}v--,v==0&&(v=Math.pow(2,_),_++),delete c[b]}else for(f=h[b],p=0;p<_;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1;v--,v==0&&(v=Math.pow(2,_),_++)}for(f=2,p=0;p<_;p++)y=y<<1|f&1,S==d-1?(S=0,k.push(u(y)),y=0):S++,f=f>>1;for(;;)if(y=y<<1,S==d-1){k.push(u(y));break}else S++;return k.join("")},decompress:function(l){return l==null?"":l==""?null:s._decompress(l.length,32768,function(d){return l.charCodeAt(d)})},_decompress:function(l,d,u){var p=[],f=4,h=4,c=3,g="",m=[],b,v,w,_,k,y,S,C={val:u(0),position:d,index:1};for(b=0;b<3;b+=1)p[b]=b;for(w=0,k=Math.pow(2,2),y=1;y!=k;)_=C.val&C.position,C.position>>=1,C.position==0&&(C.position=d,C.val=u(C.index++)),w|=(_>0?1:0)*y,y<<=1;switch(w){case 0:for(w=0,k=Math.pow(2,8),y=1;y!=k;)_=C.val&C.position,C.position>>=1,C.position==0&&(C.position=d,C.val=u(C.index++)),w|=(_>0?1:0)*y,y<<=1;S=t(w);break;case 1:for(w=0,k=Math.pow(2,16),y=1;y!=k;)_=C.val&C.position,C.position>>=1,C.position==0&&(C.position=d,C.val=u(C.index++)),w|=(_>0?1:0)*y,y<<=1;S=t(w);break;case 2:return""}for(p[3]=S,v=S,m.push(S);;){if(C.index>l)return"";for(w=0,k=Math.pow(2,c),y=1;y!=k;)_=C.val&C.position,C.position>>=1,C.position==0&&(C.position=d,C.val=u(C.index++)),w|=(_>0?1:0)*y,y<<=1;switch(S=w){case 0:for(w=0,k=Math.pow(2,8),y=1;y!=k;)_=C.val&C.position,C.position>>=1,C.position==0&&(C.position=d,C.val=u(C.index++)),w|=(_>0?1:0)*y,y<<=1;p[h++]=t(w),S=h-1,f--;break;case 1:for(w=0,k=Math.pow(2,16),y=1;y!=k;)_=C.val&C.position,C.position>>=1,C.position==0&&(C.position=d,C.val=u(C.index++)),w|=(_>0?1:0)*y,y<<=1;p[h++]=t(w),S=h-1,f--;break;case 2:return m.join("")}if(f==0&&(f=Math.pow(2,c),c++),p[S])g=p[S];else if(S===h)g=v+v.charAt(0);else return null;m.push(g),p[h++]=v+g.charAt(0),f--,v=g,f==0&&(f=Math.pow(2,c),c++)}}};return s}();n!=null?n.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(FE);var jW=FE.exports;async function xOe(n,e,t){var b,v,w;const{elements:r,files:o}=e,i={shapes:[],rootShapeIds:[],assets:[],schema:n.store.schema.serialize()},a=new Map,s=new Map,{currentPageId:l}=n,d=new Map,u=[],p=new Set;r.forEach(_=>{if(d.set(_.id,da()),_.boundElements!==null)for(const k of _.boundElements)k.type==="text"&&p.add(k.id)});let f="a1";for(const _ of r){if(p.has(_.id))continue;const k=d.get(_.id),y={id:k,typeName:"shape",parentId:l,index:f,x:_.x,y:_.y,rotation:0,isLocked:_.locked,opacity:wOe(_.opacity),meta:{}};switch(_.angle!==0&&s.set(k,_.angle),_.groupIds&&_.groupIds.length>0?a.has(_.groupIds[0])?(b=a.get(_.groupIds[0]))==null||b.push(k):a.set(_.groupIds[0],[k]):u.push(k),_.type){case"rectangle":case"ellipse":case"diamond":{let S="",C="middle";if(_.boundElements!==null){for(const A of _.boundElements)if(A.type==="text"){const T=r.find(L=>L.id===A.id);T&&(S=T.text,C=nj[T.textAlign])}}const I=_.backgroundColor==="transparent"?_.strokeColor:_.backgroundColor;i.shapes.push({...y,type:"geo",props:{geo:_.type,url:_.link??"",w:_.width,h:_.height,size:h3[_.strokeWidth]??"draw",color:ov[I]??"black",text:S,align:C,dash:f3(_),fill:MOe(_)}});break}case"freedraw":{i.shapes.push({...y,type:"draw",props:{dash:f3(_),size:h3[_.strokeWidth],color:ov[_.strokeColor]??"black",segments:[{type:"free",points:_.points.map(([S,C,I=.5])=>({x:S,y:C,z:I}))}]}});break}case"line":{const S=_.points[0],C=_.points[_.points.length-1],I=SF(_.points.length);i.shapes.push({...y,type:"line",props:{dash:f3(_),size:h3[_.strokeWidth],color:ov[_.strokeColor]??"black",spline:_.roundness?"cubic":"line",handles:{start:{id:"start",type:"vertex",index:I[0],x:S[0],y:S[1]},end:{id:"end",type:"vertex",index:I[I.length-1],x:C[0],y:C[1]},...Object.fromEntries(_.points.slice(1,-1).map(([A,T],L)=>{const j=ba();return[j,{id:j,type:"vertex",index:I[L+1],x:A,y:T}]}))}}});break}case"arrow":{let S="";if(_.boundElements!==null){for(const L of _.boundElements)if(L.type==="text"){const j=r.find($=>$.id===L.id);j&&(S=j.text)}}const C=_.points[0],I=_.points[_.points.length-1],A=d.get((v=_.startBinding)==null?void 0:v.elementId),T=d.get((w=_.endBinding)==null?void 0:w.elementId);i.shapes.push({...y,type:"arrow",props:{text:S,bend:POe(_,C,I),dash:f3(_),size:h3[_.strokeWidth]??"m",color:ov[_.strokeColor]??"black",start:A?{type:"binding",boundShapeId:A,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:C[0],y:C[1]},end:T?{type:"binding",boundShapeId:T,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:I[0],y:I[1]},arrowheadEnd:rj[_.endArrowhead]??"none",arrowheadStart:rj[_.startArrowhead]??"none"}});break}case"text":{const{size:S,scale:C}=SOe(_.fontSize);i.shapes.push({...y,type:"text",props:{size:S,scale:C,font:kOe[_.fontFamily]??"draw",color:ov[_.strokeColor]??"black",text:_.text,align:nj[_.textAlign]}});break}case"image":{const S=o[_.fileId];if(!S)break;const C=i1.createId();i.assets.push({id:C,typeName:"asset",type:"image",props:{w:_.width,h:_.height,name:_.id??"Untitled",isAnimated:!1,mimeType:S.mimeType,src:S.dataURL},meta:{}}),i.shapes.push({...y,type:"image",props:{w:_.width,h:_.height,assetId:C}})}}f=gh(f)}const h=t??(n.inputs.shiftKey?n.inputs.currentPagePoint:void 0);n.mark("paste"),n.putContentOntoCurrentPage(i,{point:h,select:!1,preserveIds:!0});for(const _ of a.values())if(_.length>1){n.groupShapes(_);const k=n.getShape(_[0]);k!=null&&k.parentId&&Xc(k.parentId)&&u.push(k.parentId)}for(const[_,k]of s)n.select(_),n.rotateShapesBy([_],k);const c=Lo(u.map(_=>n.getShape(_))),g=uo.Common(c.map(_=>n.getShapePageBounds(_))),m=n.viewportPageBounds.center;n.updateShapes(c.map(_=>{const k={x:(_.x??0)-(g.x+g.w/2),y:(_.y??0)-(g.y+g.h/2)};return{id:_.id,type:_.type,x:m.x+k.x,y:m.y+k.y}})),n.setSelectedShapes(u)}const wOe=n=>{const e=n/100;return e<.2?.1:e<.4?.25:e<.6?.5:e<.8?.75:1},h3={1:"s",2:"m",3:"l",4:"xl"},COe={16:"s",20:"m",28:"l",36:"xl"};function SOe(n){const e=COe[n];return e?{size:e,scale:1}:n<16?{size:"s",scale:n/16}:n>36?{size:"xl",scale:n/36}:{size:"m",scale:1}}const kOe={1:"draw",2:"sans",3:"mono"},ov={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},_Oe={solid:"draw",dashed:"dashed",dotted:"dotted"},EOe={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},nj={left:"start",center:"middle",right:"end"},rj={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function POe(n,e,t){let r=0;if(n.points.length>2){const o=new Le(e[0],e[1]),i=new Le(t[0],t[1]),a=new Le(n.points[1][0],n.points[1][1]),s=Le.Sub(i,o),l=Le.Per(s),d=Le.Med(i,o),u=Le.Sub(d,l),p=Le.Add(d,l),f=Le.NearestPointOnLineSegment(u,p,a,!1);r=Le.Dist(f,d),Le.Clockwise(f,i,d)&&(r*=-1)}return r}const f3=n=>{let e=_Oe[n.strokeStyle]??"draw";return e==="draw"&&n.roughness===0&&(e="solid"),e},MOe=n=>n.backgroundColor==="transparent"?"none":EOe[n.fillStyle]??"solid";async function RW(n,e,t,r){const i=(await Promise.all(e.map(async a=>await(await fetch(a)).blob()))).map(a=>new File([a],"tldrawFile",{type:a.type}));n.mark("paste"),await n.putExternalContent({type:"files",files:i,point:t,ignoreParent:!1,sources:r}),e.forEach(a=>URL.revokeObjectURL(a))}function IOe(n,e,t){const r=t??(n.inputs.shiftKey?n.inputs.currentPagePoint:void 0);n.mark("paste"),n.putContentOntoCurrentPage(e,{point:r,select:!0})}async function DS(n,e,t,r){var o;try{if((o=(await fetch(e)).headers.get("content-type"))!=null&&o.match(/^image\//)){n.mark("paste"),RW(n,[e]);return}}catch(i){i.message!=="Failed to fetch"&&console.error(i)}return n.mark("paste"),await n.putExternalContent({type:"url",point:t,url:e,sources:r})}function TOe(n){const e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=n.trim(),e.body.textContent||e.body.innerText||""}const OOe=n=>{try{const e=new URL(n);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},AOe=n=>{const e=n.split(/[\n\s]/);for(const t of e)try{const r=new URL(t);if(!(r.protocol==="http:"||r.protocol==="https:"))return}catch{return}return iF(e)},LOe=n=>/^<svg/.test(n),$Oe=["input","select","textarea"];function b6(n){const{activeElement:e}=document;return n.isMenuOpen||e&&(e.getAttribute("contenteditable")||$Oe.indexOf(e.tagName.toLowerCase())>-1)}async function f9(n){return new Promise((e,t)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const o=r.result;e(o)}),r.addEventListener("error",()=>{t(r.error)}),r.readAsText(n)})}const jOe=n=>n.types.find(e=>e.match(/^image\//)),p9=(n,e,t,r)=>{const o=AOe(e);if(o)for(const i of o)DS(n,i,t);else OOe(e)?DS(n,e,t):LOe(e)?(n.mark("paste"),n.putExternalContent({type:"svg-text",text:e,point:t,sources:r})):(n.mark("paste"),n.putExternalContent({type:"text",text:e,point:t,sources:r}))},ROe=async(n,e,t)=>{if(n.editingShapeId!==null)return;if(!e)throw Error("No clipboard data");const r=[];for(const o of Object.values(e.items))switch(o.kind){case"file":{r.push({type:"file",source:new Promise(i=>i(o.getAsFile()))});break}case"string":{o.type==="text/html"?r.push({type:"html",source:new Promise(i=>o.getAsString(i))}):o.type==="text/plain"?r.push({type:"text",source:new Promise(i=>o.getAsString(i))}):r.push({type:o.type,source:new Promise(i=>o.getAsString(i))});break}}NW(n,r,t)},DW=async(n,e,t)=>{const r=[];for(const o of e){if(jOe(o))for(const i of o.types)i.match(/^image\//)&&r.push({type:"blob",source:o.getType(i)});o.types.includes("text/html")&&r.push({type:"html",source:new Promise(i=>o.getType("text/html").then(a=>f9(a).then(i)))}),o.types.includes("text/uri-list")&&r.push({type:"url",source:new Promise(i=>o.getType("text/uri-list").then(a=>f9(a).then(i)))}),o.types.includes("text/plain")&&r.push({type:"text",source:new Promise(i=>o.getType("text/plain").then(a=>f9(a).then(i)))})}return await NW(n,r,t)};async function NW(n,e,t){const r=e.filter(i=>(i.type==="file"||i.type==="blob")&&i.source!==null);if(r.length){const a=(await Promise.all(r.map(s=>s.source))).filter(Boolean).map(s=>URL.createObjectURL(s));return await RW(n,a,t)}const o=await Promise.all(e.filter(i=>i.type!=="file").map(i=>new Promise(a=>{const s=i;if(s.type==="file"){a({type:"error",data:null,reason:"unexpected file"});return}s.source.then(l=>{var u;const d=(u=l.match(/<tldraw[^>]*>(.*)<\/tldraw>/))==null?void 0:u[1];if(d)try{const p=jW.decompressFromBase64(d);if(p===null){a({type:"error",data:p,reason:"found tldraw data comment but could not parse base64"});return}else{const f=JSON.parse(p);if(f.type!=="application/tldraw"&&a({type:"error",data:f,reason:`found tldraw data comment but JSON was of a different type: ${f.type}`}),typeof f.data=="string"){a({type:"error",data:f,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}a({type:"tldraw",data:f.data});return}}catch{a({type:"error",data:d,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(s.type==="html"){a({type:"text",data:l,subtype:"html"});return}if(s.type==="url"){a({type:"text",data:l,subtype:"url"});return}try{const p=JSON.parse(l);if(p.type==="excalidraw/clipboard"){a({type:"excalidraw",data:p});return}else{a({type:"text",data:l,subtype:"json"});return}}catch{a({type:"text",data:l,subtype:"text"});return}}a({type:"error",data:l,reason:"unhandled case"})})})));for(const i of o)if(i.type==="tldraw"){IOe(n,i.data,t);return}for(const i of o)if(i.type==="excalidraw"){xOe(n,i.data,t);return}for(const i of o)if(i.type==="text"&&i.subtype==="html"){const s=new DOMParser().parseFromString(i.data,"text/html").querySelector("body");if(s&&Array.from(s.children).filter(d=>d.nodeType===1).length===1&&s.firstElementChild&&s.firstElementChild.tagName==="A"&&s.firstElementChild.hasAttribute("href")&&s.firstElementChild.getAttribute("href")!==""){const d=s.firstElementChild.getAttribute("href");p9(n,d,t,o);return}if(!o.some(d=>d.type==="text"&&d.subtype!=="html")&&i.data.trim()){p9(n,TOe(i.data),t,o);return}}for(const i of o)if(i.type==="text"&&i.subtype==="url"){DS(n,i.data,t,o);return}for(const i of o)if(i.type==="text"&&i.subtype==="text"&&i.data.trim()){p9(n,i.data,t,o);return}}const J4=n=>{var r;const e=n.getContentFromCurrentPage(n.selectedShapeIds);if(!e){navigator&&navigator.clipboard&&navigator.clipboard.writeText("");return}const t=jW.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:e}));if(!(typeof navigator>"u")){const o=e.shapes.map(i=>n.isShapeOfType(i,"text")||n.isShapeOfType(i,"geo")||n.isShapeOfType(i,"arrow")?i.props.text:n.isShapeOfType(i,"bookmark")||n.isShapeOfType(i,"embed")?i.props.url:null).filter(Obe);if((r=navigator.clipboard)!=null&&r.write){const i=new Blob([`<tldraw>${t}</tldraw>`],{type:"text/html"});let a=o.join(" ");a===""&&(a=" "),navigator.clipboard.write([new ClipboardItem({"text/html":i,"text/plain":new Blob([a],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<tldraw>${t}</tldraw>`)}};function DOe(){const n=Dn(),e=Jm(),t=ne.useCallback(function(a){n.selectedShapeIds.length!==0&&(J4(n),e("copy",{source:a}))},[n,e]),r=ne.useCallback(function(a){n.selectedShapeIds.length!==0&&(J4(n),n.deleteShapes(n.selectedShapeIds),e("cut",{source:a}))},[n,e]),o=ne.useCallback(async function(a,s,l){n.editingShapeId!==null||b6(n)||(Array.isArray(a)&&a[0]instanceof ClipboardItem?(DW(n,a,l),e("paste",{source:"menu"})):navigator.clipboard.read().then(d=>{o(d,s,l)}))},[n,e]);return{copy:t,cut:r,paste:o}}function NOe(){const n=Dn(),e=Jm(),t=sr("editor.isFocused",()=>n.instanceState.isFocused,[n]);ne.useEffect(()=>{if(!t)return;const r=()=>{n.selectedShapeIds.length===0||n.editingShapeId!==null||b6(n)||(J4(n),e("copy",{source:"kbd"}))};function o(){n.selectedShapeIds.length===0||n.editingShapeId!==null||b6(n)||(J4(n),n.deleteShapes(n.selectedShapeIds),e("cut",{source:"kbd"}))}let i=!1;const a=l=>{l.button===1&&(i=!0,requestAnimationFrame(()=>{i=!1}))},s=l=>{if(i){l.stopPropagation();return}n.editingShapeId!==null||b6(n)||(l.clipboardData&&!n.inputs.shiftKey?ROe(n,l.clipboardData):navigator.clipboard.read().then(d=>{Array.isArray(d)&&d[0]instanceof ClipboardItem&&DW(n,d,n.inputs.currentPagePoint)}),e("paste",{source:"kbd"}))};return document.addEventListener("copy",r),document.addEventListener("cut",o),document.addEventListener("paste",s),document.addEventListener("pointerup",a),()=>{document.removeEventListener("copy",r),document.removeEventListener("cut",o),document.removeEventListener("paste",s),document.removeEventListener("pointerup",a)}},[n,e,t])}/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function zOe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,o,i,a,s=[],l=!0,d=!1;try{if(i=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){d=!0,o=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}function oj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function gc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oj(Object(t),!0).forEach(function(r){BOe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oj(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function BOe(n,e,t){return e=GOe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HOe(n,e){if(n==null)return{};var t={},r=Object.keys(n),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function FOe(n,e){if(n==null)return{};var t=HOe(n,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ij(n,e){return UOe(n)||zOe(n,e)||zW(n,e)||KOe()}function p3(n){return ZOe(n)||WOe(n)||zW(n)||VOe()}function ZOe(n){if(Array.isArray(n))return NS(n)}function UOe(n){if(Array.isArray(n))return n}function WOe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zW(n,e){if(n){if(typeof n=="string")return NS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NS(n,e)}}function NS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function VOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YOe(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GOe(n){var e=YOe(n,"string");return typeof e=="symbol"?e:String(e)}function Lv(n){var e=n.sizes.shift(),t=Math.max(Math.ceil(e[0]),1),r=Math.max(Math.ceil(e[1]),1),o=[t-1,r-1,1,1],i=Date.now(),a=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,s,l;a?(s=new OffscreenCanvas(1,1),l=new OffscreenCanvas(t,r)):(s=document.createElement("canvas"),s.width=1,s.height=1,l=document.createElement("canvas"),l.width=t,l.height=r);var d=s.getContext("2d"),u=l.getContext("2d");u&&(u.fillRect.apply(u,o),d.drawImage(l,t-1,r-1,1,1,0,0,1,1));var p=d&&d.getImageData(0,0,1,1).data[3]!==0,f=Date.now()-i;return[s,l].forEach(function(h){h.height=0,h.width=0}),a?(postMessage({width:t,height:r,benchmark:f,isTestPass:p}),!p&&n.sizes.length&&Lv(n)):p?n.onSuccess(t,r,f):(n.onError(t,r,f),n.sizes.length&&Lv(n)),p}var g9={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},XOe=["onError","onSuccess"],_g={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},iv={};function m9(n){var e=n.width===n.height,t=n.height===1,r=n.width===1,o=[];if(!n.width||!n.height)n.sizes.forEach(function(u){var p=e||t?u:1,f=e||r?u:1;o.push([p,f])});else for(var i=n.min||_g.min,a=n.step||_g.step,s=Math.max(n.width,n.height);s>=i;){var l=e||t?s:1,d=e||r?s:1;o.push([l,d]),s-=a}return o}function g3(n){var e=window&&"HTMLCanvasElement"in window,t=window&&"OffscreenCanvas"in window,r=Date.now(),o=n.onError,i=n.onSuccess,a=FOe(n,XOe),s=null;if(!e)return!1;if(n.useWorker&&t){var l=`
            var canvasTest = `.concat(Lv.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),d=new Blob([l],{type:"application/javascript"}),u=URL.createObjectURL(d);s=new Worker(u),URL.revokeObjectURL(u),s.onmessage=function(p){var f=p.data,h=f.width,c=f.height,g=f.benchmark,m=f.isTestPass;m?(iv[r].onSuccess(h,c,g),delete iv[r]):iv[r].onError(h,c,g)}}if(n.usePromise)return new Promise(function(p,f){var h=gc(gc({},n),{},{onError:function(b,v,w){var _;if(n.sizes.length===0)_=!0;else{var k=n.sizes.slice(-1),y=ij(k,1),S=ij(y[0],2),C=S[0],I=S[1];_=b===C&&v===I}o(b,v,w),_&&f({width:b,height:v,benchmark:w})},onSuccess:function(b,v,w){i(b,v,w),p({width:b,height:v,benchmark:w})}});if(s){var c=h.onError,g=h.onSuccess;iv[r]={onError:c,onSuccess:g},s.postMessage(a)}else Lv(h)});if(s)iv[r]={onError:o,onSuccess:i},s.postMessage(a);else return Lv(n)}var v9={maxArea:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=m9({width:e.max,height:e.max,min:e.min,step:e.step,sizes:p3(g9.area)}),r=gc(gc(gc({},_g),e),{},{sizes:t});return g3(r)},maxHeight:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=m9({width:1,height:e.max,min:e.min,step:e.step,sizes:p3(g9.height)}),r=gc(gc(gc({},_g),e),{},{sizes:t});return g3(r)},maxWidth:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=m9({width:e.max,height:1,min:e.min,step:e.step,sizes:p3(g9.width)}),r=gc(gc(gc({},_g),e),{},{sizes:t});return g3(r)},test:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=gc(gc({},_g),e);return t.sizes=p3(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),g3(t)}};let b9=null;function qOe(){return b9||(b9=JOe()),b9}async function JOe(){const n=await v9.maxWidth({usePromise:!0}),e=await v9.maxHeight({usePromise:!0}),t=await v9.maxArea({usePromise:!0});return{maxWidth:n.width,maxHeight:e.height,maxArea:t.width*t.height}}function BW(n){const e=n.cloneNode(!0);return n.setAttribute("width",+n.getAttribute("width")+""),n.setAttribute("height",+n.getAttribute("height")+""),new XMLSerializer().serializeToString(e).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}async function HW(n,e){const{type:t,quality:r,scale:o}=e,i=+n.getAttribute("width"),a=+n.getAttribute("height");let s=i*o,l=a*o;const d=await FW(n),u=await qOe();if(i>u.maxWidth&&(s=u.maxWidth,l=s/i*a),a>u.maxHeight&&(l=u.maxHeight,s=l/a*i),s*l>u.maxArea){const g=Math.sqrt(u.maxArea/(s*l));s*=g,l*=g}s=Math.floor(s),l=Math.floor(l);const p=s/i,f=await new Promise(g=>{const m=new Image;m.crossOrigin="anonymous",m.onload=async()=>{await new Promise(w=>setTimeout(w,250));const b=document.createElement("canvas"),v=b.getContext("2d");b.width=s,b.height=l,v.imageSmoothingEnabled=!0,v.imageSmoothingQuality="high",v.drawImage(m,0,0,s,l),URL.revokeObjectURL(d),g(b)},m.onerror=()=>{g(null)},m.src=d});if(!f)return null;const h=await new Promise(g=>f.toBlob(m=>{(!m||es.throwToBlob.value)&&g(null),g(m)},"image/"+t,r));if(!h)return null;const c=new DataView(await h.arrayBuffer());return Cu.setPhysChunk(c,p,{type:"image/"+t})}async function FW(n){const e=n.cloneNode(!0);e.setAttribute("encoding",'UTF-8"');const t=new FileReader,r=Array.from(e.querySelectorAll("image"));for(const o of r){const i=o.getAttribute("xlink:href");if(i&&!i.startsWith("data:")){const a=await(await fetch(i)).blob(),s=await new Promise((l,d)=>{t.onload=()=>l(t.result),t.onerror=()=>d(t.error),t.readAsDataURL(a)});o.setAttribute("xlink:href",s)}}return QOe(e)}function QOe(n){const e=new XMLSerializer().serializeToString(n);return`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(e)))}`}function y9(n,e){const t=document.createElement("a");t.href=n,t.download=e,t.click()}const ZW=ne.createContext({});function eAe({children:n}){const[e,t]=ne.useState([]),r=ne.useCallback(a=>{const s=a.id??ba();return t(l=>[...l.filter(d=>d.id!==a.id),{...a,id:s}]),s},[]),o=ne.useCallback(a=>(t(s=>s.filter(l=>l.id!==a)),a),[]),i=ne.useCallback(()=>{t(()=>[])},[]);return K.jsx(ZW.Provider,{value:{toasts:e,addToast:r,removeToast:o,clearToasts:i},children:n})}function Vu(){const n=ne.useContext(ZW);if(!n)throw new Error("useToasts must be used within a ToastsProvider");return n}function tAe(){const n=Dn(),{addToast:e}=Vu(),t=ai();return ne.useCallback(function(o=n.selectedShapeIds,i="svg"){if(o.length===0&&(o=[...n.currentPageShapeIds]),o.length!==0)switch(i){case"svg":{window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":nAe(n,o)})]):aj(async()=>BW(await ZE(n,o))));break}case"jpeg":case"png":{const a=i==="jpeg"?"image/jpeg":"image/png",s=rAe(n,o,i).then(l=>{if(l){if(window.navigator.clipboard)return l;throw new Error("Copy not supported")}else throw e({id:"copy-fail",icon:"warning-triangle",title:t("toast.error.copy-fail.title"),description:t("toast.error.copy-fail.desc")}),new Error("Copy not possible")});window.navigator.clipboard.write([new ClipboardItem({[a]:s})]).catch(l=>{l.toString().match(/^TypeError: DOMString not supported/)||console.error(l),s.then(d=>{window.navigator.clipboard.write([new ClipboardItem({[a]:d})])})});break}case"json":{const a=n.getContentFromCurrentPage(o);if(window.navigator.clipboard){const s=JSON.stringify(a);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([s],{type:"text/plain"})})]):aj(async()=>s)}break}default:throw new Error(`Copy type ${i} not supported.`)}},[n,e,t])}async function ZE(n,e){const t=await n.getSvg(e,{scale:1,background:n.instanceState.exportBackground});if(!t)throw new Error("Could not construct SVG.");return t}async function nAe(n,e){return new Blob([BW(await ZE(n,e))],{type:"text/plain"})}async function rAe(n,e,t){return await HW(await ZE(n,e),{type:t,quality:1,scale:2})}async function aj(n){navigator&&navigator.clipboard&&navigator.clipboard.writeText(await n())}const UW=ne.createContext({});function oAe({children:n}){const e=Dn(),t=Jm(),[r,o]=ne.useState([]),i=ne.useCallback(d=>{const u=d.id??ba();return o(p=>[...p.filter(f=>f.id!==d.id),{...d,id:u}]),t("open-menu",{source:"dialog",id:u}),e.addOpenMenu(u),u},[e,t]),a=ne.useCallback((d,u)=>(o(p=>p.map(f=>f.id===d?{...f,...u}:f)),t("open-menu",{source:"dialog",id:d}),e.addOpenMenu(d),d),[e,t]),s=ne.useCallback(d=>(o(u=>u.filter(p=>{var f;return p.id===d?((f=p.onClose)==null||f.call(p),!1):!0})),t("close-menu",{source:"dialog",id:d}),e.deleteOpenMenu(d),d),[e,t]),l=ne.useCallback(()=>{o(d=>(d.forEach(u=>{var p;(p=u.onClose)==null||p.call(u),t("close-menu",{source:"dialog",id:u.id}),e.deleteOpenMenu(u.id)}),[]))},[e,t]);return K.jsx(UW.Provider,{value:{dialogs:r,addDialog:i,removeDialog:s,clearDialogs:l,updateDialog:a},children:n})}function h0(){const n=ne.useContext(UW);if(!n)throw new Error("useDialogs must be used within a DialogsProvider");return n}function iAe(){const n=Dn(),{addToast:e}=Vu(),t=ai();return ne.useCallback(async function(o=n.selectedShapeIds,i="png"){if(o.length===0&&(o=[...n.currentPageShapeIds]),o.length===0)return;const a=await n.getSvg(o,{scale:1,background:n.instanceState.exportBackground});if(!a)throw new Error("Could not construct SVG.");let s="shapes";if(o.length===1){const l=n.getShape(o[0]);n.isShapeOfType(l,"frame")?s=l.props.name??"frame":s=l.id.replace(/:/,"_")}switch(i){case"svg":{const l=await FW(a);y9(l,`${s||"shapes"}.svg`);return}case"webp":case"png":{const l=await HW(a,{type:i,quality:1,scale:2});if(!l){e({id:"export-fail",title:t("toast.error.export-fail.title"),description:t("toast.error.export-fail.desc")});return}const d=URL.createObjectURL(l);y9(d,`${s||"shapes"}.${i}`),URL.revokeObjectURL(d);return}case"json":{const l=n.getContentFromCurrentPage(o),d=URL.createObjectURL(new Blob([JSON.stringify(l,null,4)],{type:"application/json"}));y9(d,`${s||"shapes"}.json`),URL.revokeObjectURL(d);return}default:throw new Error(`Export type ${i} not supported.`)}},[n,e,t])}function WW(){const n=Dn(),e=ne.useRef();return ne.useEffect(()=>{const t=window.document.createElement("input");t.type="file",t.accept="image/jpeg,image/png,image/gif,image/svg+xml,video/mp4,video/quicktime",t.multiple=!0,e.current=t;async function r(o){const i=o.target.files;!i||i.length===0||(await n.putExternalContent({type:"files",files:Array.from(i),point:n.viewportPageBounds.center,ignoreParent:!1}),t.value="")}return t.addEventListener("change",r),()=>{e.current=void 0,t.removeEventListener("change",r)}},[n]),ne.useCallback(()=>{var t;(t=e.current)==null||t.click()},[e])}function aAe(){const n=Dn(),e=ne.useRef(null),t=ne.useRef(null);return ne.useCallback(async function(){const o=document.createElement("div"),i=document.createElement("style"),a=(b,v)=>{b&&(b.innerHTML=""),v&&document.head.contains(v)&&document.head.removeChild(v),b&&document.body.contains(b)&&document.body.removeChild(b)};a(e.current,t.current),e.current=o,t.current=i;const s=`tl-print-surface-${ba()}`;o.className=s,i.innerHTML=`
			.${s} {
				display: none;
			}

			.${s} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.${s} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${s}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${s}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${s}__item__header {
					display: none;
				}

				.${s}__item__footer {
					display: none;
					text-align: right;
				}

				.${s}__item__footer__hide {
					display: none;
				}

				
			}

		`;const l=()=>{document.head.appendChild(i),document.body.appendChild(o)},d=()=>{n.once("change-history",()=>{a(o,i)})};window.addEventListener("beforeprint",l),window.addEventListener("afterprint",d);function u(b,v,w){try{o.innerHTML+=`<div class="${s}__item">
        <div class="${s}__item__header">
          ${b.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${s}__item__main">
          ${w.outerHTML}
        </div>
        <div class="${s}__item__footer ${s}__item__footer__${v?"":"hide"}">
          ${v??""}
        </div>
      </div>`}catch(_){console.error(_)}}function p(){n.environment.isChromeForIos?(l(),window.print()):n.environment.isSafari?(l(),document.execCommand("print",!1)):window.print()}const{pages:f,currentPageId:h,selectedShapeIds:c}=n,m={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(n.selectedShapeIds.length>0){const b=await n.getSvg(c,m);if(b){const v=f.find(w=>w.id===h);u(`tldraw  ${v==null?void 0:v.name}`,null,b),p()}}else{const b=n.currentPage,v=await n.getSvg(n.getSortedChildIdsForParent(b.id),m);v&&(u(`tldraw  ${b.name}`,null,v),p())}window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",d)},[n])}const VW=ne.createContext({});function sAe(n){return Object.fromEntries(n.map(e=>[e.id,e]))}function lAe({overrides:n,children:e}){const t=Dn(),{addDialog:r,clearDialogs:o}=h0(),{clearToasts:i}=Vu(),a=WW(),s=aAe(),{cut:l,copy:d,paste:u}=DOe(),p=tAe(),f=iAe(),h=Jm(),c=ne.useMemo(()=>{function g(){return t.isIn("select")||(t.complete(),t.setCurrentTool("select")),!1}function m(){return t.selectedShapeIds.length>0}const b=sAe([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect(v){m()&&(g()||(h("edit-link",{source:v}),t.mark("edit-link"),r({component:bOe})))}},{id:"insert-embed",label:"action.insert-embed",readonlyOk:!1,kbd:"$i",onSelect(v){h("insert-embed",{source:v}),r({component:$W})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect(v){h("insert-media",{source:v}),a()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect(v){h("undo",{source:v}),t.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect(v){h("redo",{source:v}),t.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect(v){h("export-as",{format:"svg",source:v}),f(t.selectedShapeIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect(v){h("export-as",{format:"png",source:v}),f(t.selectedShapeIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect(v){h("export-as",{format:"json",source:v}),f(t.selectedShapeIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect(v){h("copy-as",{format:"svg",source:v}),p(t.selectedShapeIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect(v){h("copy-as",{format:"png",source:v}),p(t.selectedShapeIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect(v){h("copy-as",{format:"json",source:v}),p(t.selectedShapeIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect(v){m()&&(g()||(h("toggle-auto-size",{source:v}),t.mark("toggling auto size"),t.updateShapes(t.selectedShapes.filter(w=>t.isShapeOfType(w,"text")&&w.props.autoSize===!1).map(w=>({id:w.id,type:w.type,props:{...w.props,w:8,autoSize:!0}})))))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(v){h("open-embed-link",{source:v});const w=t.selectedShapeIds,_="No embed shapes selected";if(w.length!==1){console.error(_);return}const k=t.getShape(w[0]);if(!k||!t.isShapeOfType(k,"embed")){console.error(_);return}_7e(k.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(v){var w,_;if(((w=t.root.current.value)==null?void 0:w.id)!=="zoom"&&(h("zoom-tool",{source:v}),!(t.inputs.shiftKey||t.inputs.ctrlKey))){const k=t.root.current.value;k&&((_=k.current.value)==null?void 0:_.id)==="idle"&&t.setCurrentTool("zoom",{onInteractionEnd:k.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect(v){m()&&(g()||t.batch(()=>{h("convert-to-bookmark",{source:v});const w=t.selectedShapes,_=[],k=[];for(const y of w){if(!y||!t.isShapeOfType(y,"embed")||!y.props.url)continue;const S=new Le(y.x,y.y);S.rot(-y.rotation),S.add(new Le(y.props.w/2-300/2,y.props.h/2-320/2)),S.rot(y.rotation);const C={id:da(),type:"bookmark",rotation:y.rotation,x:S.x,y:S.y,opacity:1,props:{url:y.props.url}};_.push(C),k.push(y.id)}t.mark("convert shapes to bookmark"),t.deleteShapes(k),t.createShapes(_)}))}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect(v){m()&&(g()||(h("convert-to-embed",{source:v}),t.batch(()=>{const w=t.selectedShapeIds,_=Lo(w.map(S=>t.getShape(S))),k=[],y=[];for(const S of _){if(!t.isShapeOfType(S,"bookmark"))continue;const{url:C}=S.props,I=bh(S.props.url);if(!I||!I.definition)continue;const{width:A,height:T}=I.definition,L=new Le(S.x,S.y);L.rot(-S.rotation),L.add(new Le(S.props.w/2-A/2,S.props.h/2-T/2)),L.rot(S.rotation);const j={id:da(),type:"embed",x:L.x,y:L.y,rotation:S.rotation,props:{url:C,w:A,h:T}};k.push(j),y.push(S.id)}t.mark("convert shapes to embed"),t.deleteShapes(y),t.createShapes(k)})))}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect(v){if(!m()||g())return;h("duplicate-shapes",{source:v});const w=t.selectedShapeIds,_=uo.Common(Lo(w.map(y=>t.getShapePageBounds(y)))),k=t.instanceState.canMoveCamera?{x:_.width+10,y:0}:{x:16/t.zoomLevel,y:16/t.zoomLevel};t.mark("duplicate shapes"),t.duplicateShapes(w,k)}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect(v){m()&&(g()||(h("ungroup-shapes",{source:v}),t.mark("ungroup"),t.ungroupShapes(t.selectedShapeIds)))}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect(v){if(!m()||g())return;h("group-shapes",{source:v});const{onlySelectedShape:w}=t;w&&t.isShapeOfType(w,"group")?(t.mark("ungroup"),t.ungroupShapes(t.selectedShapeIds)):(t.mark("group"),t.groupShapes(t.selectedShapeIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect(v){m()&&(g()||(h("align-shapes",{operation:"left",source:v}),t.mark("align left"),t.alignShapes(t.selectedShapeIds,"left")))}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect(v){m()&&(g()||(h("align-shapes",{operation:"center-horizontal",source:v}),t.mark("align center horizontal"),t.alignShapes(t.selectedShapeIds,"center-horizontal")))}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect(v){m()&&(g()||(h("align-shapes",{operation:"right",source:v}),t.mark("align right"),t.alignShapes(t.selectedShapeIds,"right")))}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect(v){m()&&(g()||(h("align-shapes",{operation:"center-vertical",source:v}),t.mark("align center vertical"),t.alignShapes(t.selectedShapeIds,"center-vertical")))}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect(v){m()&&(g()||(h("align-shapes",{operation:"top",source:v}),t.mark("align top"),t.alignShapes(t.selectedShapeIds,"top")))}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect(v){m()&&(g()||(h("align-shapes",{operation:"bottom",source:v}),t.mark("align bottom"),t.alignShapes(t.selectedShapeIds,"bottom")))}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",kbd:"?!h",readonlyOk:!1,onSelect(v){m()&&(g()||(h("distribute-shapes",{operation:"horizontal",source:v}),t.mark("distribute horizontal"),t.distributeShapes(t.selectedShapeIds,"horizontal")))}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",kbd:"?!V",readonlyOk:!1,onSelect(v){m()&&(g()||(h("distribute-shapes",{operation:"vertical",source:v}),t.mark("distribute vertical"),t.distributeShapes(t.selectedShapeIds,"vertical")))}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect(v){m()&&(g()||(h("stretch-shapes",{operation:"horizontal",source:v}),t.mark("stretch horizontal"),t.stretchShapes(t.selectedShapeIds,"horizontal")))}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect(v){m()&&(g()||(h("stretch-shapes",{operation:"vertical",source:v}),t.mark("stretch vertical"),t.stretchShapes(t.selectedShapeIds,"vertical")))}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect(v){m()&&(g()||(h("flip-shapes",{operation:"horizontal",source:v}),t.mark("flip horizontal"),t.flipShapes(t.selectedShapeIds,"horizontal")))}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect(v){m()&&(g()||(h("flip-shapes",{operation:"vertical",source:v}),t.mark("flip vertical"),t.flipShapes(t.selectedShapeIds,"vertical")))}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect(v){m()&&(g()||(h("pack-shapes",{source:v}),t.mark("pack"),t.packShapes(t.selectedShapeIds,16)))}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect(v){m()&&(g()||(h("stack-shapes",{operation:"vertical",source:v}),t.mark("stack-vertical"),t.stackShapes(t.selectedShapeIds,"vertical",16)))}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect(v){m()&&(g()||(h("stack-shapes",{operation:"horizontal",source:v}),t.mark("stack-horizontal"),t.stackShapes(t.selectedShapeIds,"horizontal",16)))}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect(v){m()&&(g()||(h("reorder-shapes",{operation:"toFront",source:v}),t.mark("bring to front"),t.bringToFront(t.selectedShapeIds)))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect(v){m()&&(g()||(h("reorder-shapes",{operation:"forward",source:v}),t.mark("bring forward"),t.bringForward(t.selectedShapeIds)))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect(v){m()&&(g()||(h("reorder-shapes",{operation:"backward",source:v}),t.mark("send backward"),t.sendBackward(t.selectedShapeIds)))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect(v){m()&&(g()||(h("reorder-shapes",{operation:"toBack",source:v}),t.mark("send to back"),t.sendToBack(t.selectedShapeIds)))}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect(v){m()&&(g()||(t.mark("cut"),l(v)))}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect(v){m()&&(g()||d(v))}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect(v){var w;(w=navigator.clipboard)==null||w.read().then(_=>{u(_,v,v==="context-menu"?t.inputs.currentPagePoint:void 0)})}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect(v){t.batch(()=>{g()||(h("select-all-shapes",{source:v}),t.mark("select all kbd"),t.selectAll())})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(v){m()&&(g()||(h("select-none-shapes",{source:v}),t.mark("select none"),t.selectNone()))}},{id:"delete",label:"action.delete",kbd:",del,backspace",icon:"trash",readonlyOk:!1,onSelect(v){m()&&(g()||(h("delete-shapes",{source:v}),t.mark("delete"),t.deleteShapes(t.selectedShapeIds)))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect(v){if(!m()||g())return;h("rotate-cw",{source:v}),t.mark("rotate-cw");const w=t.selectionRotation%(Ri/2),_=Iv(w,0)||Iv(w,Ri/2);t.rotateShapesBy(t.selectedShapeIds,Ri/2-(_?0:w))}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect(v){if(!m()||g())return;h("rotate-ccw",{source:v}),t.mark("rotate-ccw");const w=t.selectionRotation%(Ri/2),_=Iv(w,0);t.rotateShapesBy(t.selectedShapeIds,_?-(Ri/2):-w)}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect(v){h("zoom-in",{source:v}),t.zoomIn(t.viewportScreenCenter,{duration:vh})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect(v){h("zoom-out",{source:v}),t.zoomOut(t.viewportScreenCenter,{duration:vh})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect(v){h("reset-zoom",{source:v}),t.resetZoom(t.viewportScreenCenter,{duration:vh})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect(v){h("zoom-to-fit",{source:v}),t.zoomToFit({duration:vh})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect(v){m()&&(g()||(h("zoom-to-selection",{source:v}),t.zoomToSelection({duration:vh})))}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect(v){h("toggle-snap-mode",{source:v}),t.user.updateUserPreferences({isSnapMode:!t.user.isSnapMode})},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect(v){h("toggle-dark-mode",{source:v}),t.user.updateUserPreferences({isDarkMode:!t.user.isDarkMode})},checkbox:!0},{id:"toggle-reduce-motion",label:"action.toggle-reduce-motion",menuLabel:"action.toggle-reduce-motion.menu",readonlyOk:!0,onSelect(v){h("toggle-reduce-motion",{source:v}),t.user.updateUserPreferences({animationSpeed:t.user.animationSpeed===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect(v){h("toggle-transparent",{source:v}),t.updateInstanceState({exportBackground:!t.instanceState.exportBackground},{ephemeral:!0})},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect(v){h("toggle-tool-lock",{source:v}),t.updateInstanceState({isToolLocked:!t.instanceState.isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",readonlyOk:!1,onSelect(v){h("unlock-all",{source:v});const w=[];for(const _ of t.currentPageShapes)_.isLocked&&w.push({id:_.id,type:_.type,isLocked:!1});w.length>0&&t.updateShapes(w)}},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect(v){requestAnimationFrame(()=>{t.batch(()=>{h("toggle-focus-mode",{source:v}),o(),i(),t.updateInstanceState({isFocusMode:!t.instanceState.isFocusMode})})})}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect(v){h("toggle-grid-mode",{source:v}),t.updateInstanceState({isGridMode:!t.instanceState.isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect(v){h("toggle-debug-mode",{source:v}),t.updateInstanceState({isDebugMode:!t.instanceState.isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect(v){h("print",{source:v}),s()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(v){h("exit-pen-mode",{source:v}),t.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(v){h("stop-following",{source:v}),t.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(v){h("zoom-to-content",{source:v}),t.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",readonlyOk:!1,kbd:"!l",onSelect(v){h("toggle-lock",{source:v}),t.toggleLock(t.selectedShapeIds)}}]);return n?n(t,b,void 0):b},[h,n,t,r,a,f,p,l,d,u,o,i,s]);return K.jsx(VW.Provider,{value:c,children:e})}function yl(){const n=ne.useContext(VW);if(!n)throw new Error("useTools must be used within a ToolProvider");return n}function Iw(n){return n.filter(e=>e!=null&&e!==!1)}function Zo(n,...e){const t=Iw(e);return t.length===0?null:{id:n,type:"group",checkbox:t.every(r=>r.type==="item"&&r.actionItem.checkbox),disabled:t.every(r=>r.disabled),readonlyOk:t.some(r=>r.readonlyOk),children:t}}function xu(n,e,...t){const r=Iw(t);return r.length===0?null:{id:n,type:"submenu",label:e,children:r,disabled:r.every(o=>o.disabled),readonlyOk:r.some(o=>o.readonlyOk)}}function UE(n,e={}){const{readonlyOk:t=!0,disabled:r=!1}=e;return{id:n,type:"custom",disabled:r,readonlyOk:t}}function dn(n,e={}){if(!n)throw Error("No action item provided to menuItem");if(!n.label)throw Error("Trying to create menu item for action item that doesn't have a label");const{checked:t=!1,disabled:r=!1}=e;return{id:n.id,type:"item",actionItem:n,disabled:r,checked:t,readonlyOk:n.readonlyOk}}function KW(n){const{selectedShapeIds:e}=n;return e.map(r=>n.getShape(r)).filter(r=>!(!r||n.isShapeOfType(r,"arrow")&&r.props.start.type==="binding"||n.isShapeOfType(r,"arrow")&&r.props.end.type==="binding"))}const YW=()=>{const n=Dn();return sr("threeStackableItems",()=>KW(n).length>2,[n])},WE=()=>{const n=Dn();return sr("allowGroup",()=>KW(n).length>1,[n])},VE=()=>{const n=Dn();return sr("allowUngroup",()=>n.selectedShapeIds.some(e=>{var t;return((t=n.getShape(e))==null?void 0:t.type)==="group"}),[])},GW=typeof window<"u"&&"navigator"in window&&!!navigator.clipboard&&!!navigator.clipboard.read,cAe=[0,380,420,460,580,640,840,1023],XW=je.createContext(0);function dAe({children:n}){const e=Dn(),t=sr("breakpoint",()=>{const{width:r}=e.viewportScreenBounds,o=cAe;for(let i=0;i<o.length-1;i++)if(r>o[i]&&r<=o[i+1])return i;return o.length},[e]);return K.jsx(XW.Provider,{value:t,children:n})}function vd(){let n=ne.useContext(XW);const e=new URL(window.location.href).searchParams.get("layout");return e==="desktop"?n=7:e==="mobile"&&(n=1),n}function KE(){const n=Dn();return sr("hasLinkShapeSelected",()=>{const{selectedShapes:e}=n;return e.length===1&&"url"in e[0].props&&e[0].type!=="embed"},[n])}const qW=je.createContext({}),uAe=gi(function({overrides:e,children:t}){const r=Dn(),o=yl(),i=r.selectedShapeIds.length,a=i>0,s=i>1,l=i>2,d=YW(),u=WE(),p=VE(),f=KE(),h=vd(),c=r.zoomLevel===1,g=ne.useMemo(()=>{const m=[dn(o["align-left"],{disabled:!s}),dn(o["align-center-horizontal"],{disabled:!s}),dn(o["align-right"],{disabled:!s}),dn(o["stretch-horizontal"],{disabled:!s}),dn(o["align-top"],{disabled:!s}),dn(o["align-center-vertical"],{disabled:!s}),dn(o["align-bottom"],{disabled:!s}),dn(o["stretch-vertical"],{disabled:!s}),dn(o["distribute-horizontal"],{disabled:!l}),dn(o["distribute-vertical"],{disabled:!l}),dn(o["stack-horizontal"],{disabled:!d}),dn(o["stack-vertical"],{disabled:!d}),dn(o["send-to-back"],{disabled:!a}),dn(o["send-backward"],{disabled:!a}),dn(o["bring-forward"],{disabled:!a}),dn(o["bring-to-front"],{disabled:!a}),h<5?dn(o["zoom-to-100"],{disabled:!!c}):dn(o["rotate-ccw"],{disabled:!a}),dn(o["rotate-cw"],{disabled:!a}),dn(o["edit-link"],{disabled:!f}),u?dn(o.group,{disabled:!s}):p?dn(o.ungroup):dn(o.group,{disabled:!s})];return e?e(r,m,{actions:o,oneSelected:a,twoSelected:s,threeSelected:l}):m},[r,c,u,e,o,a,s,l,d,p,f,h]);return K.jsx(qW.Provider,{value:g,children:t})});function hAe(){const n=je.useContext(qW);if(!n)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return n}function fAe(){const n=Dn();return sr("onlyFlippableShape",()=>{const{selectedShapes:e}=n;return e.length===1&&e.every(t=>n.isShapeOfType(t,"group")||n.isShapeOfType(t,"arrow")||n.isShapeOfType(t,"line")||n.isShapeOfType(t,"draw"))},[n])}function JW(){const n=Dn();return sr("showAutoSizeToggle",()=>{const{selectedShapes:e}=n;return e.length===1&&n.isShapeOfType(e[0],"text")&&e[0].props.autoSize===!1},[n])}const QW=je.createContext({}),pAe=gi(function({overrides:e,children:t}){var k;const r=Dn(),o=yl(),i=JW(),a=fAe(),s=r.selectedShapeIds.length,l=s>0,d=s>1,u=s>2,p=YW(),f=sr("atLeastOneShapeOnPage",()=>r.currentPageShapeIds.size>0,[]),h=sr("isTransparentBg",()=>r.instanceState.exportBackground,[]),c=WE(),g=VE(),m=!!((k=window.navigator.clipboard)!=null&&k.write),b=KE(),{onlySelectedShape:v}=r,w=v&&r.isShapeOrAncestorLocked(v),_=ne.useMemo(()=>{let y=Iw([Zo("selection",i&&dn(o["toggle-auto-size"]),b&&!w&&dn(o["edit-link"]),l&&!w&&dn(o.duplicate),c&&!w&&dn(o.group),g&&!w&&dn(o.ungroup),l&&dn(o["toggle-lock"])),Zo("modify",(d||a)&&xu("arrange","context-menu.arrange",d&&Zo("align",dn(o["align-left"]),dn(o["align-center-horizontal"]),dn(o["align-right"]),dn(o["align-top"]),dn(o["align-center-vertical"]),dn(o["align-bottom"])),u&&Zo("distribute",dn(o["distribute-horizontal"]),dn(o["distribute-vertical"])),d&&Zo("stretch",dn(o["stretch-horizontal"]),dn(o["stretch-vertical"])),a&&!w&&Zo("flip",dn(o["flip-horizontal"]),dn(o["flip-vertical"])),d&&Zo("order",dn(o.pack,{disabled:!d}),p&&dn(o["stack-vertical"]),p&&dn(o["stack-horizontal"]))),l&&!w&&xu("reorder","context-menu.reorder",Zo("reorder",dn(o["bring-to-front"]),dn(o["bring-forward"]),dn(o["send-backward"]),dn(o["send-to-back"]))),l&&!w&&UE("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),Zo("clipboard-group",l&&!w&&dn(o.cut),l&&dn(o.copy),GW&&dn(o.paste)),f&&Zo("conversions",xu("copy-as","context-menu.copy-as",Zo("copy-as-group",dn(o["copy-as-svg"]),m&&dn(o["copy-as-png"]),dn(o["copy-as-json"])),Zo("export-bg",dn(o["toggle-transparent"],{checked:!h}))),xu("export-as","context-menu.export-as",Zo("export-as-group",dn(o["export-as-svg"]),dn(o["export-as-png"]),dn(o["export-as-json"])),Zo("export-bg,",dn(o["toggle-transparent"],{checked:!h})))),f&&Zo("set-selection-group",dn(o["select-all"]),l&&dn(o["select-none"])),l&&!w&&Zo("delete-group",dn(o.delete))]);return e&&(y=e(r,y,{actions:o,oneSelected:l,twoSelected:d,threeSelected:u,showAutoSizeToggle:i,showUngroup:g,onlyFlippableShapeSelected:a})),y},[r,e,o,l,d,u,i,a,f,p,c,g,m,b,h,w]);return K.jsx(QW.Provider,{value:_,children:t})});function eV(){const n=je.useContext(QW);if(!n)throw new Error("useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.");return n}const tV=ne.createContext({});function gAe({overrides:n,children:e}){const t=Dn(),r=Jm(),{addDialog:o}=h0(),i=WW(),a=sr(j_.highlighterTool),s=ne.useMemo(()=>{const l=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(u){t.setCurrentTool("select"),r("select-tool",{source:u,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(u){t.setCurrentTool("hand"),r("select-tool",{source:u,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!1,onSelect(u){t.setCurrentTool("eraser"),r("select-tool",{source:u,id:"eraser"})}},{id:"draw",label:"tool.draw",readonlyOk:!1,icon:"tool-pencil",kbd:"d,b,x",onSelect(u){t.setCurrentTool("draw"),r("select-tool",{source:u,id:"draw"})}},...[...Pu.values].map(u=>({id:u,label:`tool.${u}`,readonlyOk:!1,meta:{geo:u},kbd:u==="rectangle"?"r":u==="ellipse"?"o":void 0,icon:"geo-"+u,onSelect(p){t.batch(()=>{t.updateInstanceState({stylesForNextShape:{...t.instanceState.stylesForNextShape,[Pu.id]:u}},{ephemeral:!0}),t.setCurrentTool("geo"),r("select-tool",{source:p,id:`geo-${u}`})})}})),{id:"arrow",label:"tool.arrow",readonlyOk:!1,icon:"tool-arrow",kbd:"a",onSelect(u){t.setCurrentTool("arrow"),r("select-tool",{source:u,id:"arrow"})}},{id:"line",label:"tool.line",readonlyOk:!1,icon:"tool-line",kbd:"l",onSelect(u){t.setCurrentTool("line"),r("select-tool",{source:u,id:"line"})}},{id:"frame",label:"tool.frame",readonlyOk:!1,icon:"tool-frame",kbd:"f",onSelect(u){t.setCurrentTool("frame"),r("select-tool",{source:u,id:"frame"})}},{id:"text",label:"tool.text",readonlyOk:!1,icon:"tool-text",kbd:"t",onSelect(u){t.setCurrentTool("text"),r("select-tool",{source:u,id:"text"})}},{id:"asset",label:"tool.asset",readonlyOk:!1,icon:"tool-media",kbd:"$u",onSelect(u){i(),r("select-tool",{source:u,id:"media"})}},{id:"note",label:"tool.note",readonlyOk:!1,icon:"tool-note",kbd:"n",onSelect(u){t.setCurrentTool("note"),r("select-tool",{source:u,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(u){t.setCurrentTool("laser"),r("select-tool",{source:u,id:"laser"})}},{id:"embed",label:"tool.embed",readonlyOk:!1,icon:"tool-embed",onSelect(u){o({component:$W}),r("select-tool",{source:u,id:"embed"})}}];a&&l.push({id:"highlight",label:"tool.highlight",readonlyOk:!0,icon:"tool-highlight",kbd:"!d",onSelect(u){t.setCurrentTool("highlight"),r("select-tool",{source:u,id:"highlight"})}});const d=Object.fromEntries(l.map(u=>[u.id,u]));return n?n(t,d,{insertMedia:i}):d},[a,n,t,r,i,o]);return K.jsx(tV.Provider,{value:s,children:e})}function YE(){const n=ne.useContext(tV);if(!n)throw new Error("useTools must be used within a ToolProvider");return n}const nV=je.createContext({}),mAe=gi(function({overrides:e,children:t}){const r=Dn(),o=YE(),i=yl(),a=ne.useMemo(()=>{const s=Lo([Zo("shortcuts-dialog.tools",dn(i["toggle-tool-lock"]),dn(o.select),dn(o.draw),dn(o.eraser),dn(o.hand),dn(o.rectangle),dn(o.ellipse),dn(o.arrow),dn(o.line),dn(o.text),dn(o.frame),dn(o.note),dn(o.laser)),Zo("shortcuts-dialog.file",dn(i["insert-media"]),dn(i.print)),Zo("shortcuts-dialog.preferences",dn(i["toggle-dark-mode"]),dn(i["toggle-focus-mode"]),dn(i["toggle-grid"])),Zo("shortcuts-dialog.edit",dn(i.undo),dn(i.redo),dn(i.cut),dn(i.copy),dn(i.paste),dn(i["select-all"]),dn(i.delete),dn(i.duplicate),dn(i["export-as-svg"]),dn(i["export-as-png"])),Zo("shortcuts-dialog.view",dn(i["zoom-in"]),dn(i["zoom-out"]),dn(i["zoom-to-100"]),dn(i["zoom-to-fit"]),dn(i["zoom-to-selection"])),Zo("shortcuts-dialog.transform",dn(i["bring-to-front"]),dn(i["bring-forward"]),dn(i["send-backward"]),dn(i["send-to-back"]),dn(i.group),dn(i.ungroup),dn(i["flip-horizontal"]),dn(i["flip-vertical"]),dn(i["align-top"]),dn(i["align-center-vertical"]),dn(i["align-bottom"]),dn(i["align-left"]),dn(i["align-center-horizontal"]),dn(i["align-right"]))]);return e?e(r,s,{tools:o,actions:i}):s},[r,e,i,o]);return K.jsx(nV.Provider,{value:a,children:t})});function vAe(){const n=je.useContext(nV);if(!n)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return n}const bAe=()=>{const n=ai(),e=md(),t=vAe();function r(o){if(e&&!o.readonlyOk)return null;switch(o.type){case"group":return K.jsxs("div",{className:"tlui-shortcuts-dialog__group",children:[K.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:n(o.id)}),K.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:o.children.filter(i=>i.type==="item"&&i.actionItem.kbd).map(r)})]},o.id);case"item":{const{id:i,label:a,shortcutsLabel:s,kbd:l}=o.actionItem;return K.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair",children:[K.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:n(s??a)}),K.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:K.jsx(gw,{children:l})})]},i)}}}return K.jsxs(K.Fragment,{children:[K.jsxs(mw,{className:"tlui-shortcuts-dialog__header",children:[K.jsx(vw,{children:n("shortcuts-dialog.title")}),K.jsx(bw,{})]}),K.jsx(Sb,{className:"tlui-shortcuts-dialog__body",children:t.map(r)}),K.jsx("div",{className:"tlui-dialog__scrim"})]})};function rV(){const n=Dn();return{languages:mb,currentLanguage:n.user.locale}}const oV=je.createContext({}),yAe=gi(function({overrides:e,children:t}){const r=Dn(),o=yl(),i=r.selectedShapeIds.length,a=i>0,s=i>1,l=i>2,{languages:d,currentLanguage:u}=rV(),{addDialog:p}=h0(),f=ne.useMemo(()=>{const h=Lo([Zo("top",UE("LANGUAGE_MENU",{readonlyOk:!0}),dn({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect(){p({component:bAe})}}))]);return e?e(r,h,{actions:o,currentLanguage:u,languages:d,oneSelected:a,twoSelected:s,threeSelected:l}):h},[r,e,d,o,a,s,l,u,p]);return K.jsx(oV.Provider,{value:f,children:t})});function xAe(){const n=je.useContext(oV);if(!n)throw new Error("useHelpMenuSchema must be used inside of a helpTLUiMenuSchemaProvider.");return n}function iV(){const n=Dn();return sr("useCanRedo",()=>n.canRedo,[n])}function aV(){const n=Dn();return sr("useCanUndo",()=>n.canUndo,[n])}const sV=je.createContext({});function wAe({overrides:n,children:e}){var ee;const t=Dn(),r=yl(),i=vd()<5,a=sr("isDarkMode",()=>t.user.isDarkMode,[t]),s=sr("animationSpeed",()=>t.user.animationSpeed,[t]),l=sr("isGridMode",()=>t.instanceState.isGridMode,[t]),d=sr("isSnapMode",()=>t.user.isSnapMode,[t]),u=sr("isToolLock",()=>t.instanceState.isToolLocked,[t]),p=sr("isFocusMode",()=>t.instanceState.isFocusMode,[t]),f=sr("isDebugMode",()=>t.instanceState.isDebugMode,[t]),h=sr("exportBackground",()=>t.instanceState.exportBackground,[t]),c=sr("emptyPage",()=>t.currentPageShapeIds.size===0,[t]),g=sr("selectedCount",()=>t.selectedShapeIds.length,[t]),m=g===0,b=g>0,v=g>1,w=g>2,_=!!((ee=window.navigator.clipboard)!=null&&ee.write),k=KE(),y=JW(),S=WE(),C=VE(),I=aV(),A=iV(),T=sr("isZoomedTo100",()=>t.zoomLevel===1,[t]),L=sr("oneEmbedSelected",()=>{const{onlySelectedShape:Q}=t;return Q?!!(t.isShapeOfType(Q,"embed")&&Q.props.url&&!t.isShapeOrAncestorLocked(Q)):!1},[]),j=sr("oneEmbeddableBookmarkSelected",()=>{const{onlySelectedShape:Q}=t;return Q?!!(t.isShapeOfType(Q,"bookmark")&&Q.props.url&&bh(Q.props.url)&&!t.isShapeOrAncestorLocked(Q)):!1},[]),$=ne.useMemo(()=>{const Q=Iw([Zo("menu",xu("file","menu.file",Zo("print",dn(r.print,{disabled:c}))),xu("edit","menu.edit",Zo("undo-actions",dn(r.undo,{disabled:!I}),dn(r.redo,{disabled:!A})),Zo("clipboard-actions",dn(r.cut,{disabled:m}),dn(r.copy,{disabled:m}),dn(r.paste,{disabled:!GW})),Zo("conversions",xu("copy-as","menu.copy-as",Zo("copy-as-group",dn(r["copy-as-svg"],{disabled:c}),dn(r["copy-as-png"],{disabled:c||!_}),dn(r["copy-as-json"],{disabled:c})),Zo("export-bg",dn(r["toggle-transparent"],{checked:!h}))),xu("export-as","menu.export-as",Zo("export-as-group",dn(r["export-as-svg"],{disabled:c}),dn(r["export-as-png"],{disabled:c}),dn(r["export-as-json"],{disabled:c})),Zo("export-bg",dn(r["toggle-transparent"],{checked:!h})))),Zo("set-selection-group",dn(r["select-all"],{disabled:c}),dn(r["select-none"],{disabled:!b})),Zo("selection",y&&dn(r["toggle-auto-size"]),k&&dn(r["edit-link"]),dn(r.duplicate,{disabled:!b}),S&&dn(r.group),C&&dn(r.ungroup),dn(r["unlock-all"],{disabled:c})),Zo("delete-group",dn(r.delete,{disabled:!b})),Zo("embeds",L&&dn(r["open-embed-link"]),L&&dn(r["convert-to-bookmark"]),j&&dn(r["convert-to-embed"]))),xu("view","menu.view",Zo("view-actions",dn(r["zoom-in"]),dn(r["zoom-out"]),dn(r["zoom-to-100"],{disabled:T}),dn(r["zoom-to-fit"],{disabled:c}),dn(r["zoom-to-selection"],{disabled:c||!b})))),Zo("extras",dn(r["insert-embed"]),dn(r["insert-media"])),Zo("preferences",xu("preferences","menu.preferences",Zo("preferences-actions",dn(r["toggle-snap-mode"],{checked:d}),dn(r["toggle-tool-lock"],{checked:u}),dn(r["toggle-grid"],{checked:l}),dn(r["toggle-dark-mode"],{checked:a}),dn(r["toggle-focus-mode"],{checked:p}),dn(r["toggle-reduce-motion"],{checked:s===0}),dn(r["toggle-debug-mode"],{checked:f}))),i&&UE("LANGUAGE_MENU",{readonlyOk:!0}))]);return n?n(t,Q,{actions:r,noneSelected:m,oneSelected:b,twoSelected:v,threeSelected:w}):Q},[t,n,r,b,v,w,c,i,S,C,k,_,y,m,I,A,s,a,l,d,u,p,h,f,T,j,L]);return K.jsx(sV.Provider,{value:$,children:e})}function CAe(){const n=je.useContext(sV);if(!n)throw new Error("useMenuSchema must be used inside of a TLUiMenuSchemaProvider.");return n}function Gi(n){return{id:n.id,type:"item",readonlyOk:n.readonlyOk,toolItem:n}}const lV=je.createContext([]);function SAe({overrides:n,children:e}){const t=Dn(),r=YE(),o=sr(j_.highlighterTool),i=je.useMemo(()=>{const a=Lo([Gi(r.select),Gi(r.hand),Gi(r.draw),Gi(r.eraser),Gi(r.arrow),Gi(r.text),Gi(r.note),Gi(r.asset),Gi(r.rectangle),Gi(r.ellipse),Gi(r.diamond),Gi(r.triangle),Gi(r.trapezoid),Gi(r.rhombus),Gi(r.hexagon),Gi(r.cloud),Gi(r.star),Gi(r.oval),Gi(r["x-box"]),Gi(r["check-box"]),Gi(r["arrow-left"]),Gi(r["arrow-up"]),Gi(r["arrow-down"]),Gi(r["arrow-right"]),Gi(r.frame),Gi(r.line),o?Gi(r.highlight):null,Gi(r.laser)]);return n?n(t,a,{tools:r}):a},[t,o,n,r]);return K.jsx(lV.Provider,{value:i,children:e})}function kAe(){const n=je.useContext(lV);if(!n)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return n}function _Ae(){const{addToast:n,removeToast:e,clearToasts:t}=Vu(),{addDialog:r,clearDialogs:o,removeDialog:i,updateDialog:a}=h0(),l=vd()<5,d=ai();return ne.useMemo(()=>({addToast:n,removeToast:e,clearToasts:t,addDialog:r,clearDialogs:o,removeDialog:i,updateDialog:a,msg:d,isMobile:l}),[r,n,o,t,d,i,e,a,l])}function EAe(n,e){const t={};for(const r of n)if(r.translations)for(const[o,i]of kh(r.translations)){let a=t[o];a||(a=t[o]={}),Object.assign(a,i)}return{actionsMenu:(r,o,i)=>{for(const a of n)a.actionsMenu&&(o=a.actionsMenu(r,o,{...e,...i}));return o},actions:(r,o)=>{for(const i of n)i.actions&&(o=i.actions(r,o,e));return o},contextMenu:(r,o,i)=>{for(const a of n)a.contextMenu&&(o=a.contextMenu(r,o,{...e,...i}));return o},helpMenu:(r,o,i)=>{for(const a of n)a.helpMenu&&(o=a.helpMenu(r,o,{...e,...i}));return o},menu:(r,o,i)=>{for(const a of n)a.menu&&(o=a.menu(r,o,{...e,...i}));return o},toolbar:(r,o,i)=>{for(const a of n)a.toolbar&&(o=a.toolbar(r,o,{...e,...i}));return o},keyboardShortcutsMenu:(r,o,i)=>{for(const a of n)a.keyboardShortcutsMenu&&(o=a.keyboardShortcutsMenu(r,o,{...e,...i}));return o},tools:(r,o,i)=>{for(const a of n)a.tools&&(o=a.tools(r,o,{...e,...i}));return o},translations:t}}function cV(n){return ne.useMemo(()=>n,n)}function PAe(n){const e=cV(n==null?[]:Array.isArray(n)?n:[n]);return ne.useMemo(()=>{const t={};for(const r of e)if(r.translations)for(const[o,i]of kh(r.translations)){let a=t[o];a||(a=t[o]={}),Object.assign(a,i)}return t},[e])}function MAe(n){const e=_Ae(),t=cV(n==null?[]:Array.isArray(n)?n:[n]);return ne.useMemo(()=>EAe(t,e),[t,e])}function IAe({overrides:n,assetUrls:e,onUiEvent:t,children:r}){return K.jsx(mEe,{assetUrls:vOe(e),children:K.jsx(yEe,{overrides:PAe(n),children:K.jsx(jMe,{onEvent:t,children:K.jsx(eAe,{children:K.jsx(oAe,{children:K.jsx(dAe,{children:K.jsx(TAe,{overrides:n,children:r})})})})})})})}function TAe({overrides:n,children:e}){const t=MAe(n);return K.jsx(lAe,{overrides:t.actions,children:K.jsx(gAe,{overrides:t.tools,children:K.jsx(SAe,{overrides:t.toolbar,children:K.jsx(uAe,{overrides:t.actionsMenu,children:K.jsx(mAe,{overrides:t.keyboardShortcutsMenu,children:K.jsx(pAe,{overrides:t.contextMenu,children:K.jsx(yAe,{overrides:t.helpMenu,children:K.jsx(wAe,{overrides:t.menu,children:e})})})})})})})})}function OAe(){const n=Dn(),t=yl()["back-to-content"],[r,o]=ne.useState(!1);return ne.useEffect(()=>{let i=!1;const a=setInterval(()=>{const{renderingShapes:s,renderingBounds:l}=n,u=s.filter(p=>p.maskedPageBounds&&l.includes(p.maskedPageBounds)).length===0&&n.currentPageShapes.length>0;i!==u&&(o(u),i=u)},1e3);return()=>{clearInterval(a)}},[n]),r?K.jsx(io,{iconLeft:t.icon,label:t.label,onClick:()=>{t.onSelect("helper-buttons"),o(!1)}}):null}let sj=0;function AAe(n,e){const t=Array(e),r=Math.floor(Math.sqrt(e));for(let o=0;o<e;o++)sj++,t[o]={id:da("box"+sj),type:"geo",x:o%r*132,y:Math.floor(o/r)*132};n.batch(()=>{n.createShapes(t).setSelectedShapes(t.map(o=>o.id))})}const LAe=ne.memo(function({renderDebugMenuItems:e}){const t=ai();return K.jsxs("div",{className:"tlui-debug-panel",children:[K.jsx($Ae,{}),K.jsx(jAe,{}),K.jsxs(ap,{id:"debug",children:[K.jsx(ky,{children:K.jsx(io,{icon:"dots-horizontal",title:t("debug-panel.more")})}),K.jsx(sp,{side:"top",align:"end",alignOffset:0,children:K.jsx(RAe,{renderDebugMenuItems:e})})]})]})}),$Ae=gi(function(){const e=Dn();return K.jsx("div",{className:"tlui-debug-panel__current-state",children:e.root.path.value})}),jAe=function(){const e=Dn(),t=sr("rendering shapes count",()=>e.renderingShapes.length,[e]);return K.jsxs("div",{children:[t," Shapes"]})},RAe=gi(function({renderDebugMenuItems:e}){const t=Dn(),{addToast:r}=Vu(),{addDialog:o}=h0(),[i,a]=ne.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsxs(_h,{children:[K.jsx(yc,{onClick:()=>{r({id:ba(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:K.jsx("span",{children:"Show toast"})}),K.jsx(yc,{onClick:()=>{o({component:({onClose:s})=>K.jsx(zAe,{displayDontShowAgain:!0,onCancel:()=>{s()},onContinue:()=>{s()}}),onClose:()=>{}})},children:K.jsx("span",{children:"Show dialog"})}),K.jsx(yc,{onClick:()=>AAe(t,100),children:K.jsx("span",{children:"Create 100 shapes"})}),K.jsx(yc,{onClick:()=>{function s({children:f}){let h=0;if(!f.length)return 0;for(const c of[...f])h++,h+=s(c);return h}const{selectedShapes:l}=t,d=l.length===0?t.renderingShapes:l,u=d.map(f=>document.getElementById(f.id).parentElement);let p=u.length;for(const f of u)p+=s(f);window.alert(`Shapes ${d.length}, DOM nodes:${p}`)},children:K.jsx("span",{children:"Count shapes and nodes"})}),(()=>{if(i)throw Error("oh no!")})(),K.jsx(yc,{onClick:()=>{a(!0)},children:K.jsx("span",{children:"Throw error"})}),K.jsx(yc,{onClick:()=>{zH()},children:K.jsx("span",{children:"Hard reset"})})]}),K.jsxs(_h,{children:[K.jsx(av,{flag:es.debugSvg}),K.jsx(av,{flag:es.forceSrgb}),K.jsx(av,{flag:es.debugGeometry}),K.jsx(av,{flag:es.debugCursors,onChange:s=>{if(s){const d=NAe.map((u,p)=>({id:da(),type:"geo",x:p%5*175,y:Math.floor(p/5)*175,props:{text:u,w:150,h:150,fill:"semi"}}));t.createShapes(d)}}})]}),K.jsx(_h,{children:Object.values(j_).map(s=>K.jsx(av,{flag:s},s.name))}),e==null?void 0:e()]})});function DAe({label:n,value:e,onChange:t}){return K.jsx(OU,{title:n,checked:e,onSelect:()=>t(!e),children:n})}const av=gi(function({flag:e,onChange:t}){return K.jsx(DAe,{label:e.name.replace(/([a-z0-9])([A-Z])/g,r=>`${r[0]} ${r[1].toLowerCase()}`).replace(/^[a-z]/,r=>r.toUpperCase()),value:e.value,onChange:r=>{e.set(r),t==null||t(r)}})}),NAe=["none","default","pointer","cross","move","grab","grabbing","text","ew-resize","ns-resize","nesw-resize","nwse-resize","nwse-rotate","nesw-rotate","senw-rotate","swne-rotate","zoom-in","zoom-out"];function zAe({title:n="title",body:e="hello hello hello",cancel:t="Cancel",confirm:r="Continue",displayDontShowAgain:o=!1,onCancel:i,onContinue:a}){const[s,l]=ne.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsxs(mw,{children:[K.jsx(vw,{children:n}),K.jsx(bw,{})]}),K.jsx(Sb,{style:{maxWidth:350},children:e}),K.jsxs(mE,{className:"tlui-dialog__footer__actions",children:[o&&K.jsx(io,{onClick:()=>l(!s),iconLeft:s?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),K.jsx(io,{onClick:i,children:t}),K.jsx(io,{type:"primary",onClick:async()=>a(),children:r})]})]})}const BAe=({id:n,component:e,onClose:t})=>{const{removeDialog:r}=h0(),o=vl(),i=ne.useCallback(a=>{if(!a){if(t)try{t()}catch(s){console.warn(s)}r(n)}},[n,t,r]);return K.jsx(lbe,{onOpenChange:i,defaultOpen:!0,children:K.jsx(cbe,{container:o,children:K.jsx(dbe,{dir:"ltr",className:"tlui-dialog__overlay",children:K.jsx(ube,{dir:"ltr",className:"tlui-dialog__content",children:K.jsx(e,{onClose:()=>i(!1)})})})})})};function HAe(){const{dialogs:n}=h0();return K.jsx(K.Fragment,{children:n.map(e=>K.jsx(BAe,{...e},e.id))})}const FAe=je.memo(HAe);function ZAe(){const n=Dn(),e=sr("follow",()=>n.instanceState.followingUserId,[n]);return e?K.jsx(UAe,{userId:e}):null}function UAe({userId:n}){const e=aF(n);return e?K.jsx("div",{className:"tlui-following",style:{borderColor:e.color}}):null}function dV(){const n=Dn(),{languages:e,currentLanguage:t}=rV(),r=ne.useCallback(o=>n.user.updateUserPreferences({locale:o}),[n]);return K.jsxs(ME,{id:"help menu language",children:[K.jsx(IE,{label:"menu.language","data-direction":"left"}),K.jsx(TE,{sideOffset:-4,children:K.jsx(_h,{children:e.map(({locale:o,label:i})=>K.jsx(RMe,{title:o,checked:o===t,onSelect:()=>r(o),children:K.jsx("span",{children:i})},o))})})]})}const WAe=ne.memo(function(){const e=vl(),t=ai(),[r,o]=u0("help menu");return K.jsx("div",{className:"tlui-help-menu",children:K.jsxs(EU,{dir:"ltr",open:r,onOpenChange:o,modal:!1,children:[K.jsx(Mb,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:t("help-menu.title"),children:K.jsx(Vl,{icon:"question-mark"})}),K.jsx(PE,{container:e,dir:"ltr",children:K.jsx(PU,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:K.jsx(VAe,{})})})]})})});function VAe(){const n=xAe(),e=md();function t(r){if(e&&!r.readonlyOk)return null;switch(r.type){case"custom":{if(r.id==="LANGUAGE_MENU")return K.jsx(dV,{},"item");break}case"group":return K.jsx(_h,{size:"small",children:r.children.map(t)},r.id);case"submenu":return K.jsxs(ME,{id:`help menu ${r.id}`,children:[K.jsx(IE,{label:r.label}),K.jsx(TE,{children:r.children.map(t)})]},r.id);case"item":{const{id:o,kbd:i,label:a,onSelect:s,icon:l}=r.actionItem;return K.jsx(yc,{kbd:i,label:a,onClick:()=>s("help-menu"),iconLeft:l},o)}}}return K.jsx(K.Fragment,{children:n.map(t)})}function y1(n,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(n==null||n(o),t===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function KAe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function uV(...n){return e=>n.forEach(t=>KAe(t,e))}function f0(...n){return ne.useCallback(uV(...n),n)}function hV(n,e=[]){let t=[];function r(i,a){const s=ne.createContext(a),l=t.length;t=[...t,a];function d(p){const{scope:f,children:h,...c}=p,g=(f==null?void 0:f[n][l])||s,m=ne.useMemo(()=>c,Object.values(c));return ne.createElement(g.Provider,{value:m},h)}function u(p,f){const h=(f==null?void 0:f[n][l])||s,c=ne.useContext(h);if(c)return c;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const o=()=>{const i=t.map(a=>ne.createContext(a));return function(s){const l=(s==null?void 0:s[n])||i;return ne.useMemo(()=>({[`__scope${n}`]:{...s,[n]:l}}),[s,l])}};return o.scopeName=n,[r,YAe(o,...e)]}function YAe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const a=r.reduce((s,{useScope:l,scopeName:d})=>{const p=l(i)[`__scope${d}`];return{...s,...p}},{});return ne.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}const GE=ne.forwardRef((n,e)=>{const{children:t,...r}=n,o=ne.Children.toArray(t),i=o.find(XAe);if(i){const a=i.props.children,s=o.map(l=>l===i?ne.Children.count(a)>1?ne.Children.only(null):ne.isValidElement(a)?a.props.children:null:l);return ne.createElement(zS,ur({},r,{ref:e}),ne.isValidElement(a)?ne.cloneElement(a,void 0,s):null)}return ne.createElement(zS,ur({},r,{ref:e}),t)});GE.displayName="Slot";const zS=ne.forwardRef((n,e)=>{const{children:t,...r}=n;return ne.isValidElement(t)?ne.cloneElement(t,{...qAe(r,t.props),ref:uV(e,t.ref)}):ne.Children.count(t)>1?ne.Children.only(null):null});zS.displayName="SlotClone";const GAe=({children:n})=>ne.createElement(ne.Fragment,null,n);function XAe(n){return ne.isValidElement(n)&&n.type===GAe}function qAe(n,e){const t={...e};for(const r in e){const o=n[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?t[r]=(...s)=>{i(...s),o(...s)}:o&&(t[r]=o):r==="style"?t[r]={...o,...i}:r==="className"&&(t[r]=[o,i].filter(Boolean).join(" "))}return{...n,...t}}const JAe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],V1=JAe.reduce((n,e)=>{const t=ne.forwardRef((r,o)=>{const{asChild:i,...a}=r,s=i?GE:e;return ne.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),ne.createElement(s,ur({},a,{ref:o}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function QAe(n,e){n&&up.flushSync(()=>n.dispatchEvent(e))}function lp(n){const e=ne.useRef(n);return ne.useEffect(()=>{e.current=n}),ne.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function eLe(n,e=globalThis==null?void 0:globalThis.document){const t=lp(n);ne.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const BS="dismissableLayer.update",tLe="dismissableLayer.pointerDownOutside",nLe="dismissableLayer.focusOutside";let lj;const rLe=ne.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oLe=ne.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:l,...d}=n,u=ne.useContext(rLe),[p,f]=ne.useState(null),h=(t=p==null?void 0:p.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,c]=ne.useState({}),g=f0(e,C=>f(C)),m=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(b),w=p?m.indexOf(p):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,k=w>=v,y=iLe(C=>{const I=C.target,A=[...u.branches].some(T=>T.contains(I));!k||A||(i==null||i(C),s==null||s(C),C.defaultPrevented||l==null||l())},h),S=aLe(C=>{const I=C.target;[...u.branches].some(T=>T.contains(I))||(a==null||a(C),s==null||s(C),C.defaultPrevented||l==null||l())},h);return eLe(C=>{w===u.layers.size-1&&(o==null||o(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),ne.useEffect(()=>{if(p)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lj=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(p)),u.layers.add(p),cj(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=lj)}},[p,h,r,u]),ne.useEffect(()=>()=>{p&&(u.layers.delete(p),u.layersWithOutsidePointerEventsDisabled.delete(p),cj())},[p,u]),ne.useEffect(()=>{const C=()=>c({});return document.addEventListener(BS,C),()=>document.removeEventListener(BS,C)},[]),ne.createElement(V1.div,ur({},d,{ref:g,style:{pointerEvents:_?k?"auto":"none":void 0,...n.style},onFocusCapture:y1(n.onFocusCapture,S.onFocusCapture),onBlurCapture:y1(n.onBlurCapture,S.onBlurCapture),onPointerDownCapture:y1(n.onPointerDownCapture,y.onPointerDownCapture)}))});function iLe(n,e=globalThis==null?void 0:globalThis.document){const t=lp(n),r=ne.useRef(!1),o=ne.useRef(()=>{});return ne.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let d=function(){fV(tLe,t,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=d,e.addEventListener("click",o.current,{once:!0})):d()}r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function aLe(n,e=globalThis==null?void 0:globalThis.document){const t=lp(n),r=ne.useRef(!1);return ne.useEffect(()=>{const o=i=>{i.target&&!r.current&&fV(nLe,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cj(){const n=new CustomEvent(BS);document.dispatchEvent(n)}function fV(n,e,t,{discrete:r}){const o=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?QAe(o,i):o.dispatchEvent(i)}let x9=0;function sLe(){ne.useEffect(()=>{var n,e;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(n=t[0])!==null&&n!==void 0?n:dj()),document.body.insertAdjacentElement("beforeend",(e=t[1])!==null&&e!==void 0?e:dj()),x9++,()=>{x9===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),x9--}},[])}function dj(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}const w9="focusScope.autoFocusOnMount",C9="focusScope.autoFocusOnUnmount",uj={bubbles:!1,cancelable:!0},lLe=ne.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...a}=n,[s,l]=ne.useState(null),d=lp(o),u=lp(i),p=ne.useRef(null),f=f0(e,g=>l(g)),h=ne.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ne.useEffect(()=>{if(r){let g=function(b){if(h.paused||!s)return;const v=b.target;s.contains(v)?p.current=v:qp(p.current,{select:!0})},m=function(b){h.paused||!s||s.contains(b.relatedTarget)||qp(p.current,{select:!0})};return document.addEventListener("focusin",g),document.addEventListener("focusout",m),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",m)}}},[r,s,h.paused]),ne.useEffect(()=>{if(s){fj.add(h);const g=document.activeElement;if(!s.contains(g)){const b=new CustomEvent(w9,uj);s.addEventListener(w9,d),s.dispatchEvent(b),b.defaultPrevented||(cLe(pLe(pV(s)),{select:!0}),document.activeElement===g&&qp(s))}return()=>{s.removeEventListener(w9,d),setTimeout(()=>{const b=new CustomEvent(C9,uj);s.addEventListener(C9,u),s.dispatchEvent(b),b.defaultPrevented||qp(g??document.body,{select:!0}),s.removeEventListener(C9,u),fj.remove(h)},0)}}},[s,d,u,h]);const c=ne.useCallback(g=>{if(!t&&!r||h.paused)return;const m=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(m&&b){const v=g.currentTarget,[w,_]=dLe(v);w&&_?!g.shiftKey&&b===_?(g.preventDefault(),t&&qp(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),t&&qp(_,{select:!0})):b===v&&g.preventDefault()}},[t,r,h.paused]);return ne.createElement(V1.div,ur({tabIndex:-1},a,{ref:f,onKeyDown:c}))});function cLe(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(qp(r,{select:e}),document.activeElement!==t)return}function dLe(n){const e=pV(n),t=hj(e,n),r=hj(e.reverse(),n);return[t,r]}function pV(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function hj(n,e){for(const t of n)if(!uLe(t,{upTo:e}))return t}function uLe(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function hLe(n){return n instanceof HTMLInputElement&&"select"in n}function qp(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&hLe(n)&&e&&n.select()}}const fj=fLe();function fLe(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=pj(n,e),n.unshift(e)},remove(e){var t;n=pj(n,e),(t=n[0])===null||t===void 0||t.resume()}}}function pj(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function pLe(n){return n.filter(e=>e.tagName!=="A")}const Nf=globalThis!=null&&globalThis.document?ne.useLayoutEffect:()=>{},gLe=qj.useId||(()=>{});let mLe=0;function vLe(n){const[e,t]=ne.useState(gLe());return Nf(()=>{n||t(r=>r??String(mLe++))},[n]),n||(e?`radix-${e}`:"")}function p0(n){return n.split("-")[0]}function My(n){return n.split("-")[1]}function Qm(n){return["top","bottom"].includes(p0(n))?"x":"y"}function XE(n){return n==="y"?"height":"width"}function gj(n,e,t){let{reference:r,floating:o}=n;const i=r.x+r.width/2-o.width/2,a=r.y+r.height/2-o.height/2,s=Qm(e),l=XE(s),d=r[l]/2-o[l]/2,u=s==="x";let p;switch(p0(e)){case"top":p={x:i,y:r.y-o.height};break;case"bottom":p={x:i,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:a};break;case"left":p={x:r.x-o.width,y:a};break;default:p={x:r.x,y:r.y}}switch(My(e)){case"start":p[s]-=d*(t&&u?-1:1);break;case"end":p[s]+=d*(t&&u?-1:1)}return p}const bLe=async(n,e,t)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=t,s=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:n,floating:e,strategy:o}),{x:d,y:u}=gj(l,r,s),p=r,f={},h=0;for(let c=0;c<i.length;c++){const{name:g,fn:m}=i[c],{x:b,y:v,data:w,reset:_}=await m({x:d,y:u,initialPlacement:r,placement:p,strategy:o,middlewareData:f,rects:l,platform:a,elements:{reference:n,floating:e}});d=b??d,u=v??u,f={...f,[g]:{...f[g],...w}},_&&h<=50&&(h++,typeof _=="object"&&(_.placement&&(p=_.placement),_.rects&&(l=_.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:o}):_.rects),{x:d,y:u}=gj(l,p,s)),c=-1)}return{x:d,y:u,placement:p,strategy:o,middlewareData:f}};function gV(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function Q4(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function Ab(n,e){var t;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=n,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:p="floating",altBoundary:f=!1,padding:h=0}=e,c=gV(h),g=s[f?p==="floating"?"reference":"floating":p],m=Q4(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(g)))==null||t?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:d,rootBoundary:u,strategy:l})),b=Q4(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:p==="floating"?{...a.floating,x:r,y:o}:a.reference,offsetParent:await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),strategy:l}):a[p]);return{top:m.top-b.top+c.top,bottom:b.bottom-m.bottom+c.bottom,left:m.left-b.left+c.left,right:b.right-m.right+c.right}}const yLe=Math.min,Jp=Math.max;function HS(n,e,t){return Jp(n,yLe(e,t))}const mj=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:r=0}=n??{},{x:o,y:i,placement:a,rects:s,platform:l}=e;if(t==null)return{};const d=gV(r),u={x:o,y:i},p=Qm(a),f=My(a),h=XE(p),c=await l.getDimensions(t),g=p==="y"?"top":"left",m=p==="y"?"bottom":"right",b=s.reference[h]+s.reference[p]-u[p]-s.floating[h],v=u[p]-s.reference[p],w=await(l.getOffsetParent==null?void 0:l.getOffsetParent(t));let _=w?p==="y"?w.clientHeight||0:w.clientWidth||0:0;_===0&&(_=s.floating[h]);const k=b/2-v/2,y=d[g],S=_-c[h]-d[m],C=_/2-c[h]/2+k,I=HS(y,C,S),A=(f==="start"?d[g]:d[m])>0&&C!==I&&s.reference[h]<=s.floating[h];return{[p]:u[p]-(A?C<y?y-C:S-C:0),data:{[p]:I,centerOffset:C-I}}}}),xLe={left:"right",right:"left",bottom:"top",top:"bottom"};function ex(n){return n.replace(/left|right|bottom|top/g,e=>xLe[e])}function wLe(n,e,t){t===void 0&&(t=!1);const r=My(n),o=Qm(n),i=XE(o);let a=o==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=ex(a)),{main:a,cross:ex(a)}}const CLe={start:"end",end:"start"};function vj(n){return n.replace(/start|end/g,e=>CLe[e])}const mV=["top","right","bottom","left"];mV.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const SLe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:o,rects:i,initialPlacement:a,platform:s,elements:l}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",flipAlignment:h=!0,...c}=n,g=p0(r),m=p||(g===a||!h?[ex(a)]:function(C){const I=ex(C);return[vj(C),I,vj(I)]}(a)),b=[a,...m],v=await Ab(e,c),w=[];let _=((t=o.flip)==null?void 0:t.overflows)||[];if(d&&w.push(v[g]),u){const{main:C,cross:I}=wLe(r,i,await(s.isRTL==null?void 0:s.isRTL(l.floating)));w.push(v[C],v[I])}if(_=[..._,{placement:r,overflows:w}],!w.every(C=>C<=0)){var k,y;const C=((k=(y=o.flip)==null?void 0:y.index)!=null?k:0)+1,I=b[C];if(I)return{data:{index:C,overflows:_},reset:{placement:I}};let A="bottom";switch(f){case"bestFit":{var S;const T=(S=_.map(L=>[L,L.overflows.filter(j=>j>0).reduce((j,$)=>j+$,0)]).sort((L,j)=>L[1]-j[1])[0])==null?void 0:S[0].placement;T&&(A=T);break}case"initialPlacement":A=a}if(r!==A)return{reset:{placement:A}}}return{}}}};function bj(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function yj(n){return mV.some(e=>n[e]>=0)}const kLe=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(r){const{rects:o}=r;switch(e){case"referenceHidden":{const i=bj(await Ab(r,{...t,elementContext:"reference"}),o.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:yj(i)}}}case"escaped":{const i=bj(await Ab(r,{...t,altBoundary:!0}),o.floating);return{data:{escapedOffsets:i,escaped:yj(i)}}}default:return{}}}}},_Le=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,o=await async function(i,a){const{placement:s,platform:l,elements:d}=i,u=await(l.isRTL==null?void 0:l.isRTL(d.floating)),p=p0(s),f=My(s),h=Qm(s)==="x",c=["left","top"].includes(p)?-1:1,g=u&&h?-1:1,m=typeof a=="function"?a(i):a;let{mainAxis:b,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return f&&typeof w=="number"&&(v=f==="end"?-1*w:w),h?{x:v*g,y:b*c}:{x:b*c,y:v*g}}(e,n);return{x:t+o.x,y:r+o.y,data:o}}}};function vV(n){return n==="x"?"y":"x"}const ELe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x:b,y:v}=m;return{x:b,y:v}}},...l}=n,d={x:t,y:r},u=await Ab(e,l),p=Qm(p0(o)),f=vV(p);let h=d[p],c=d[f];if(i){const m=p==="y"?"bottom":"right";h=HS(h+u[p==="y"?"top":"left"],h,h-u[m])}if(a){const m=f==="y"?"bottom":"right";c=HS(c+u[f==="y"?"top":"left"],c,c-u[m])}const g=s.fn({...e,[p]:h,[f]:c});return{...g,data:{x:g.x-t,y:g.y-r}}}}},PLe=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:o,rects:i,middlewareData:a}=e,{offset:s=0,mainAxis:l=!0,crossAxis:d=!0}=n,u={x:t,y:r},p=Qm(o),f=vV(p);let h=u[p],c=u[f];const g=typeof s=="function"?s({...i,placement:o}):s,m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const k=p==="y"?"height":"width",y=i.reference[p]-i.floating[k]+m.mainAxis,S=i.reference[p]+i.reference[k]-m.mainAxis;h<y?h=y:h>S&&(h=S)}if(d){var b,v,w,_;const k=p==="y"?"width":"height",y=["top","left"].includes(p0(o)),S=i.reference[f]-i.floating[k]+(y&&(b=(v=a.offset)==null?void 0:v[f])!=null?b:0)+(y?0:m.crossAxis),C=i.reference[f]+i.reference[k]+(y?0:(w=(_=a.offset)==null?void 0:_[f])!=null?w:0)-(y?m.crossAxis:0);c<S?c=S:c>C&&(c=C)}return{[p]:h,[f]:c}}}},MLe=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:o,elements:i}=e,{apply:a,...s}=n,l=await Ab(e,s),d=p0(t),u=My(t);let p,f;d==="top"||d==="bottom"?(p=d,f=u===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(f=d,p=u==="end"?"top":"bottom");const h=Jp(l.left,0),c=Jp(l.right,0),g=Jp(l.top,0),m=Jp(l.bottom,0),b={availableHeight:r.floating.height-(["left","right"].includes(t)?2*(g!==0||m!==0?g+m:Jp(l.top,l.bottom)):l[p]),availableWidth:r.floating.width-(["top","bottom"].includes(t)?2*(h!==0||c!==0?h+c:Jp(l.left,l.right)):l[f])},v=await o.getDimensions(i.floating);a==null||a({...e,...b});const w=await o.getDimensions(i.floating);return v.width!==w.width||v.height!==w.height?{reset:{rects:!0}}:{}}}};function bV(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function ef(n){if(n==null)return window;if(!bV(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function Iy(n){return ef(n).getComputedStyle(n)}function Ph(n){return bV(n)?"":n?(n.nodeName||"").toLowerCase():""}function yV(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Bu(n){return n instanceof ef(n).HTMLElement}function cp(n){return n instanceof ef(n).Element}function qE(n){return typeof ShadowRoot>"u"?!1:n instanceof ef(n).ShadowRoot||n instanceof ShadowRoot}function Tw(n){const{overflow:e,overflowX:t,overflowY:r}=Iy(n);return/auto|scroll|overlay|hidden/.test(e+r+t)}function ILe(n){return["table","td","th"].includes(Ph(n))}function xj(n){const e=/firefox/i.test(yV()),t=Iy(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function xV(){return!/^((?!chrome|android).)*safari/i.test(yV())}const wj=Math.min,$v=Math.max,tx=Math.round;function Mh(n,e,t){var r,o,i,a;e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect();let l=1,d=1;e&&Bu(n)&&(l=n.offsetWidth>0&&tx(s.width)/n.offsetWidth||1,d=n.offsetHeight>0&&tx(s.height)/n.offsetHeight||1);const u=cp(n)?ef(n):window,p=!xV()&&t,f=(s.left+(p&&(r=(o=u.visualViewport)==null?void 0:o.offsetLeft)!=null?r:0))/l,h=(s.top+(p&&(i=(a=u.visualViewport)==null?void 0:a.offsetTop)!=null?i:0))/d,c=s.width/l,g=s.height/d;return{width:c,height:g,top:h,right:f+c,bottom:h+g,left:f,x:f,y:h}}function Zf(n){return(e=n,(e instanceof ef(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function Ow(n){return cp(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function wV(n){return Mh(Zf(n)).left+Ow(n).scrollLeft}function TLe(n,e,t){const r=Bu(e),o=Zf(e),i=Mh(n,r&&function(l){const d=Mh(l);return tx(d.width)!==l.offsetWidth||tx(d.height)!==l.offsetHeight}(e),t==="fixed");let a={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(r||!r&&t!=="fixed")if((Ph(e)!=="body"||Tw(o))&&(a=Ow(e)),Bu(e)){const l=Mh(e,!0);s.x=l.x+e.clientLeft,s.y=l.y+e.clientTop}else o&&(s.x=wV(o));return{x:i.left+a.scrollLeft-s.x,y:i.top+a.scrollTop-s.y,width:i.width,height:i.height}}function CV(n){return Ph(n)==="html"?n:n.assignedSlot||n.parentNode||(qE(n)?n.host:null)||Zf(n)}function Cj(n){return Bu(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function FS(n){const e=ef(n);let t=Cj(n);for(;t&&ILe(t)&&getComputedStyle(t).position==="static";)t=Cj(t);return t&&(Ph(t)==="html"||Ph(t)==="body"&&getComputedStyle(t).position==="static"&&!xj(t))?e:t||function(r){let o=CV(r);for(qE(o)&&(o=o.host);Bu(o)&&!["html","body"].includes(Ph(o));){if(xj(o))return o;o=o.parentNode}return null}(n)||e}function Sj(n){if(Bu(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=Mh(n);return{width:e.width,height:e.height}}function SV(n){const e=CV(n);return["html","body","#document"].includes(Ph(e))?n.ownerDocument.body:Bu(e)&&Tw(e)?e:SV(e)}function nx(n,e){var t;e===void 0&&(e=[]);const r=SV(n),o=r===((t=n.ownerDocument)==null?void 0:t.body),i=ef(r),a=o?[i].concat(i.visualViewport||[],Tw(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(nx(a))}function kj(n,e,t){return e==="viewport"?Q4(function(r,o){const i=ef(r),a=Zf(r),s=i.visualViewport;let l=a.clientWidth,d=a.clientHeight,u=0,p=0;if(s){l=s.width,d=s.height;const f=xV();(f||!f&&o==="fixed")&&(u=s.offsetLeft,p=s.offsetTop)}return{width:l,height:d,x:u,y:p}}(n,t)):cp(e)?function(r,o){const i=Mh(r,!1,o==="fixed"),a=i.top+r.clientTop,s=i.left+r.clientLeft;return{top:a,left:s,x:s,y:a,right:s+r.clientWidth,bottom:a+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,t):Q4(function(r){var o;const i=Zf(r),a=Ow(r),s=(o=r.ownerDocument)==null?void 0:o.body,l=$v(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),d=$v(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let u=-a.scrollLeft+wV(r);const p=-a.scrollTop;return Iy(s||i).direction==="rtl"&&(u+=$v(i.clientWidth,s?s.clientWidth:0)-l),{width:l,height:d,x:u,y:p}}(Zf(n)))}function OLe(n){const e=nx(n),t=["absolute","fixed"].includes(Iy(n).position)&&Bu(n)?FS(n):n;return cp(t)?e.filter(r=>cp(r)&&function(o,i){const a=i.getRootNode==null?void 0:i.getRootNode();if(o.contains(i))return!0;if(a&&qE(a)){let s=i;do{if(s&&o===s)return!0;s=s.parentNode||s.host}while(s)}return!1}(r,t)&&Ph(r)!=="body"):[]}const ALe={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:r,strategy:o}=n;const i=[...t==="clippingAncestors"?OLe(e):[].concat(t),r],a=i[0],s=i.reduce((l,d)=>{const u=kj(e,d,o);return l.top=$v(u.top,l.top),l.right=wj(u.right,l.right),l.bottom=wj(u.bottom,l.bottom),l.left=$v(u.left,l.left),l},kj(e,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:r}=n;const o=Bu(t),i=Zf(t);if(t===i)return e;let a={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((o||!o&&r!=="fixed")&&((Ph(t)!=="body"||Tw(i))&&(a=Ow(t)),Bu(t))){const l=Mh(t,!0);s.x=l.x+t.clientLeft,s.y=l.y+t.clientTop}return{...e,x:e.x-a.scrollLeft+s.x,y:e.y-a.scrollTop+s.y}},isElement:cp,getDimensions:Sj,getOffsetParent:FS,getDocumentElement:Zf,getElementRects:n=>{let{reference:e,floating:t,strategy:r}=n;return{reference:TLe(e,FS(t),r),floating:{...Sj(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>Iy(n).direction==="rtl"};function LLe(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=!0,animationFrame:s=!1}=r,l=o&&!s,d=i&&!s,u=l||d?[...cp(n)?nx(n):[],...nx(e)]:[];u.forEach(c=>{l&&c.addEventListener("scroll",t,{passive:!0}),d&&c.addEventListener("resize",t)});let p,f=null;if(a){let c=!0;f=new ResizeObserver(()=>{c||t(),c=!1}),cp(n)&&!s&&f.observe(n),f.observe(e)}let h=s?Mh(n):null;return s&&function c(){const g=Mh(n);!h||g.x===h.x&&g.y===h.y&&g.width===h.width&&g.height===h.height||t(),h=g,p=requestAnimationFrame(c)}(),t(),()=>{var c;u.forEach(g=>{l&&g.removeEventListener("scroll",t),d&&g.removeEventListener("resize",t)}),(c=f)==null||c.disconnect(),f=null,s&&cancelAnimationFrame(p)}}const $Le=(n,e,t)=>bLe(n,e,{platform:ALe,...t});var ZS=typeof document<"u"?ne.useLayoutEffect:ne.useEffect;function US(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,o;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!US(n[r],e[r]))return!1;return!0}if(o=Object.keys(n),t=o.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=t;r--!==0;){const i=o[r];if(!(i==="_owner"&&n.$$typeof)&&!US(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function jLe(n){const e=ne.useRef(n);return ZS(()=>{e.current=n}),e}function RLe(n){let{middleware:e,placement:t="bottom",strategy:r="absolute",whileElementsMounted:o}=n===void 0?{}:n;const i=ne.useRef(null),a=ne.useRef(null),s=jLe(o),l=ne.useRef(null),[d,u]=ne.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{}}),[p,f]=ne.useState(e);US(p==null?void 0:p.map(w=>{let{options:_}=w;return _}),e==null?void 0:e.map(w=>{let{options:_}=w;return _}))||f(e);const h=ne.useCallback(()=>{!i.current||!a.current||$Le(i.current,a.current,{middleware:p,placement:t,strategy:r}).then(w=>{c.current&&up.flushSync(()=>{u(w)})})},[p,t,r]);ZS(()=>{c.current&&h()},[h]);const c=ne.useRef(!1);ZS(()=>(c.current=!0,()=>{c.current=!1}),[]);const g=ne.useCallback(()=>{if(typeof l.current=="function"&&(l.current(),l.current=null),i.current&&a.current)if(s.current){const w=s.current(i.current,a.current,h);l.current=w}else h()},[h,s]),m=ne.useCallback(w=>{i.current=w,g()},[g]),b=ne.useCallback(w=>{a.current=w,g()},[g]),v=ne.useMemo(()=>({reference:i,floating:a}),[]);return ne.useMemo(()=>({...d,update:h,refs:v,reference:m,floating:b}),[d,h,v,m,b])}const DLe=n=>{const{element:e,padding:t}=n;function r(o){return Object.prototype.hasOwnProperty.call(o,"current")}return{name:"arrow",options:n,fn(o){return r(e)?e.current!=null?mj({element:e.current,padding:t}).fn(o):{}:e?mj({element:e,padding:t}).fn(o):{}}}};function NLe(n){const[e,t]=ne.useState(void 0);return Nf(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let a,s;if("borderBoxSize"in i){const l=i.borderBoxSize,d=Array.isArray(l)?l[0]:l;a=d.inlineSize,s=d.blockSize}else a=n.offsetWidth,s=n.offsetHeight;t({width:a,height:s})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const kV="Popper",[JE,_V]=hV(kV),[zLe,EV]=JE(kV),BLe=n=>{const{__scopePopper:e,children:t}=n,[r,o]=ne.useState(null);return ne.createElement(zLe,{scope:e,anchor:r,onAnchorChange:o},t)},HLe="PopperAnchor",FLe=ne.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...o}=n,i=EV(HLe,t),a=ne.useRef(null),s=f0(e,a);return ne.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:ne.createElement(V1.div,ur({},o,{ref:s}))}),rx="PopperContent",[ZLe,bNe]=JE(rx),[ULe,WLe]=JE(rx,{hasParent:!1,positionUpdateFns:new Set}),VLe=ne.forwardRef((n,e)=>{var t,r,o,i,a,s,l,d;const{__scopePopper:u,side:p="bottom",sideOffset:f=0,align:h="center",alignOffset:c=0,arrowPadding:g=0,collisionBoundary:m=[],collisionPadding:b=0,sticky:v="partial",hideWhenDetached:w=!1,avoidCollisions:_=!0,onPlaced:k,...y}=n,S=EV(rx,u),[C,I]=ne.useState(null),A=f0(e,ge=>I(ge)),[T,L]=ne.useState(null),j=NLe(T),$=(t=j==null?void 0:j.width)!==null&&t!==void 0?t:0,ee=(r=j==null?void 0:j.height)!==null&&r!==void 0?r:0,Q=p+(h!=="center"?"-"+h:""),pe=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},ie=Array.isArray(m)?m:[m],te=ie.length>0,Z={padding:pe,boundary:ie.filter(YLe),altBoundary:te},{reference:D,floating:B,strategy:H,x:V,y:R,placement:Y,middlewareData:E,update:W}=RLe({strategy:"fixed",placement:Q,whileElementsMounted:LLe,middleware:[_Le({mainAxis:f+ee,alignmentAxis:c}),_?ELe({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?PLe():void 0,...Z}):void 0,_?SLe({...Z}):void 0,MLe({...Z,apply:({elements:ge,rects:X,availableWidth:we,availableHeight:be})=>{const{width:le,height:ye}=X.reference,ue=ge.floating.style;ue.setProperty("--radix-popper-available-width",`${we}px`),ue.setProperty("--radix-popper-available-height",`${be}px`),ue.setProperty("--radix-popper-anchor-width",`${le}px`),ue.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),T?DLe({element:T,padding:g}):void 0,GLe({arrowWidth:$,arrowHeight:ee}),w?kLe({strategy:"referenceHidden"}):void 0].filter(KLe)});Nf(()=>{D(S.anchor)},[D,S.anchor]);const F=V!==null&&R!==null,[z,q]=PV(Y),fe=lp(k);Nf(()=>{F&&(fe==null||fe())},[F,fe]);const ce=(o=E.arrow)===null||o===void 0?void 0:o.x,U=(i=E.arrow)===null||i===void 0?void 0:i.y,ve=((a=E.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[oe,re]=ne.useState();Nf(()=>{C&&re(window.getComputedStyle(C).zIndex)},[C]);const{hasParent:ae,positionUpdateFns:me}=WLe(rx,u),he=!ae;ne.useLayoutEffect(()=>{if(!he)return me.add(W),()=>{me.delete(W)}},[he,me,W]),Nf(()=>{he&&F&&Array.from(me).reverse().forEach(ge=>requestAnimationFrame(ge))},[he,F,me]);const se={"data-side":z,"data-align":q,...y,ref:A,style:{...y.style,animation:F?void 0:"none",opacity:(s=E.hide)!==null&&s!==void 0&&s.referenceHidden?0:void 0}};return ne.createElement("div",{ref:B,"data-radix-popper-content-wrapper":"",style:{position:H,left:0,top:0,transform:F?`translate3d(${Math.round(V)}px, ${Math.round(R)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(l=E.transformOrigin)===null||l===void 0?void 0:l.x,(d=E.transformOrigin)===null||d===void 0?void 0:d.y].join(" ")},dir:n.dir},ne.createElement(ZLe,{scope:u,placedSide:z,onArrowChange:L,arrowX:ce,arrowY:U,shouldHideArrow:ve},he?ne.createElement(ULe,{scope:u,hasParent:!0,positionUpdateFns:me},ne.createElement(V1.div,se)):ne.createElement(V1.div,se)))});function KLe(n){return n!==void 0}function YLe(n){return n!==null}const GLe=n=>({name:"transformOrigin",options:n,fn(e){var t,r,o,i,a;const{placement:s,rects:l,middlewareData:d}=e,p=((t=d.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,f=p?0:n.arrowWidth,h=p?0:n.arrowHeight,[c,g]=PV(s),m={start:"0%",center:"50%",end:"100%"}[g],b=((r=(o=d.arrow)===null||o===void 0?void 0:o.x)!==null&&r!==void 0?r:0)+f/2,v=((i=(a=d.arrow)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0)+h/2;let w="",_="";return c==="bottom"?(w=p?m:`${b}px`,_=`${-h}px`):c==="top"?(w=p?m:`${b}px`,_=`${l.floating.height+h}px`):c==="right"?(w=`${-h}px`,_=p?m:`${v}px`):c==="left"&&(w=`${l.floating.width+h}px`,_=p?m:`${v}px`),{data:{x:w,y:_}}}});function PV(n){const[e,t="center"]=n.split("-");return[e,t]}const XLe=BLe,qLe=FLe,JLe=VLe,QLe=ne.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...o}=n;return r?Jj.createPortal(ne.createElement(V1.div,ur({},o,{ref:e})),r):null});function e$e(n,e){return ne.useReducer((t,r)=>{const o=e[t][r];return o??t},n)}const QE=n=>{const{present:e,children:t}=n,r=t$e(e),o=typeof t=="function"?t({present:r.isPresent}):ne.Children.only(t),i=f0(r.ref,o.ref);return typeof t=="function"||r.isPresent?ne.cloneElement(o,{ref:i}):null};QE.displayName="Presence";function t$e(n){const[e,t]=ne.useState(),r=ne.useRef({}),o=ne.useRef(n),i=ne.useRef("none"),a=n?"mounted":"unmounted",[s,l]=e$e(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne.useEffect(()=>{const d=m3(r.current);i.current=s==="mounted"?d:"none"},[s]),Nf(()=>{const d=r.current,u=o.current;if(u!==n){const f=i.current,h=m3(d);n?l("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,l]),Nf(()=>{if(e){const d=p=>{const h=m3(r.current).includes(p.animationName);p.target===e&&h&&up.flushSync(()=>l("ANIMATION_END"))},u=p=>{p.target===e&&(i.current=m3(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:ne.useCallback(d=>{d&&(r.current=getComputedStyle(d)),t(d)},[])}}function m3(n){return(n==null?void 0:n.animationName)||"none"}function n$e({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,o]=r$e({defaultProp:e,onChange:t}),i=n!==void 0,a=i?n:r,s=lp(t),l=ne.useCallback(d=>{if(i){const p=typeof d=="function"?d(n):d;p!==n&&s(p)}else o(d)},[i,n,o,s]);return[a,l]}function r$e({defaultProp:n,onChange:e}){const t=ne.useState(n),[r]=t,o=ne.useRef(r),i=lp(e);return ne.useEffect(()=>{o.current!==r&&(i(r),o.current=r)},[r,o,i]),t}const MV="Popover",[IV,yNe]=hV(MV,[_V]),eP=_V(),[o$e,e2]=IV(MV),i$e=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:o,onOpenChange:i,modal:a=!1}=n,s=eP(e),l=ne.useRef(null),[d,u]=ne.useState(!1),[p=!1,f]=n$e({prop:r,defaultProp:o,onChange:i});return ne.createElement(XLe,s,ne.createElement(o$e,{scope:e,contentId:vLe(),triggerRef:l,open:p,onOpenChange:f,onOpenToggle:ne.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:d,onCustomAnchorAdd:ne.useCallback(()=>u(!0),[]),onCustomAnchorRemove:ne.useCallback(()=>u(!1),[]),modal:a},t))},a$e="PopoverTrigger",s$e=ne.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,o=e2(a$e,t),i=eP(t),a=f0(e,o.triggerRef),s=ne.createElement(V1.button,ur({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":AV(o.open)},r,{ref:a,onClick:y1(n.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?s:ne.createElement(qLe,ur({asChild:!0},i),s)}),TV="PopoverPortal",[l$e,c$e]=IV(TV,{forceMount:void 0}),d$e=n=>{const{__scopePopover:e,forceMount:t,children:r,container:o}=n,i=e2(TV,e);return ne.createElement(l$e,{scope:e,forceMount:t},ne.createElement(QE,{present:t||i.open},ne.createElement(QLe,{asChild:!0,container:o},r)))},Lb="PopoverContent",u$e=ne.forwardRef((n,e)=>{const t=c$e(Lb,n.__scopePopover),{forceMount:r=t.forceMount,...o}=n,i=e2(Lb,n.__scopePopover);return ne.createElement(QE,{present:r||i.open},i.modal?ne.createElement(h$e,ur({},o,{ref:e})):ne.createElement(f$e,ur({},o,{ref:e})))}),h$e=ne.forwardRef((n,e)=>{const t=e2(Lb,n.__scopePopover),r=ne.useRef(null),o=f0(e,r),i=ne.useRef(!1);return ne.useEffect(()=>{const a=r.current;if(a)return x_(a)},[]),ne.createElement(y_,{as:GE,allowPinchZoom:!0},ne.createElement(OV,ur({},n,{ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y1(n.onCloseAutoFocus,a=>{var s;a.preventDefault(),i.current||(s=t.triggerRef.current)===null||s===void 0||s.focus()}),onPointerDownOutside:y1(n.onPointerDownOutside,a=>{const s=a.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,d=s.button===2||l;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:y1(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})))}),f$e=ne.forwardRef((n,e)=>{const t=e2(Lb,n.__scopePopover),r=ne.useRef(!1),o=ne.useRef(!1);return ne.createElement(OV,ur({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a;if((a=n.onCloseAutoFocus)===null||a===void 0||a.call(n,i),!i.defaultPrevented){var s;r.current||(s=t.triggerRef.current)===null||s===void 0||s.focus(),i.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:i=>{var a,s;(a=n.onInteractOutside)===null||a===void 0||a.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=i.target;((s=t.triggerRef.current)===null||s===void 0?void 0:s.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}}))}),OV=ne.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...p}=n,f=e2(Lb,t),h=eP(t);return sLe(),ne.createElement(lLe,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i},ne.createElement(oLe,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1)},ne.createElement(JLe,ur({"data-state":AV(f.open),role:"dialog",id:f.contentId},h,p,{ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function AV(n){return n?"open":"closed"}const p$e=i$e,g$e=s$e,LV=d$e,$V=u$e,tP=({id:n,children:e,onOpenChange:t})=>{const[r,o]=u0(n,t);return K.jsx(p$e,{onOpenChange:o,open:r,children:K.jsx("div",{className:"tlui-popover",children:e})})},nP=({children:n,disabled:e,"data-testid":t})=>K.jsx(g$e,{"data-testid":t,disabled:e,asChild:!0,dir:"ltr",children:n}),jV=({side:n,children:e,align:t="center",sideOffset:r=8,alignOffset:o=0})=>{const i=vl();return K.jsx(LV,{dir:"ltr",container:i,children:K.jsx($V,{className:"tlui-popover__content",side:n,sideOffset:r,align:t,alignOffset:o,dir:"ltr",children:e})})},RV=ne.memo(function(){const e=ai(),t=vl(),r=hAe(),o=md();function i(a){if(o&&!a.readonlyOk)return null;switch(a.type){case"item":{const{id:s,icon:l,label:d,kbd:u,onSelect:p}=a.actionItem;return K.jsx(io,{className:"tlui-button-grid__button","data-testid":`menu-item.${a.id}`,icon:l,title:d?u?`${e(d)} ${Nu(u)}`:`${e(d)}`:u?`${Nu(u)}`:"",onClick:()=>p("actions-menu"),disabled:a.disabled},s)}}}return K.jsxs(tP,{id:"actions menu",children:[K.jsx(nP,{children:K.jsx(io,{className:"tlui-menu__trigger","data-testid":"main.action-menu",icon:"dots-vertical",title:e("actions-menu.title"),smallIcon:!0})}),K.jsx(LV,{dir:"ltr",container:t,children:K.jsx($V,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:K.jsx("div",{className:"tlui-actions-menu tlui-button-grid__four",children:r.map(i)})})})]})}),DV=gi(function(){const e=Dn(),t=yl(),r=ai(),o=t.duplicate;return K.jsx(io,{icon:o.icon,onClick:()=>o.onSelect("quick-actions"),disabled:!(e.isIn("select")&&e.selectedShapeIds.length>0),title:`${r(o.label)} ${Nu(o.kbd)}`,smallIcon:!0})}),m$e=ne.memo(function(){const e=ai();return K.jsxs(ap,{id:"main menu",children:[K.jsx(ky,{children:K.jsx(io,{className:"tlui-menu__trigger","data-testid":"main.menu",title:e("menu.title"),icon:"menu"})}),K.jsx(sp,{alignOffset:0,sideOffset:6,children:K.jsx(v$e,{})})]})});function v$e(){const n=Dn(),e=ai(),t=CAe(),r=vd(),o=md();function i(a,s,l,d){switch(s.type){case"custom":return o&&!s.readonlyOk?null:s.id==="LANGUAGE_MENU"?K.jsx(dV,{},"item"):null;case"group":return o&&!s.readonlyOk?null:K.jsx(_h,{size:d<=1?"medium":r<3||(l==null?void 0:l.type)==="submenu"&&d>2?"tiny":"medium",children:s.children.map(u=>i(a,u,s,d+1))},s.id);case"submenu":return o&&!s.readonlyOk?null:K.jsxs(ME,{id:`main menu ${l?l.id+" ":""}${s.id}`,children:[K.jsx(IE,{label:s.label,"data-testid":`menu-item.${s.id}`}),K.jsx(TE,{sideOffset:-4,alignOffset:-1,children:s.children.map(u=>i(a,u,s,d+1))})]},s.id);case"item":{if(o&&!s.readonlyOk)return null;const{id:u,checkbox:p,menuLabel:f,label:h,onSelect:c,kbd:g}=s.actionItem,m=f??h,b=m?e(m):void 0;return p?K.jsxs(OU,{onSelect:()=>c("menu"),title:b||"",checked:s.checked,disabled:s.disabled,children:[b&&K.jsx("span",{children:b}),g&&K.jsx(gw,{children:g})]},u):K.jsx(yc,{"data-testid":`menu-item.${s.id}`,kbd:g,label:m,onClick:()=>c("menu"),disabled:s.disabled},u)}}}return K.jsx(K.Fragment,{children:t.map(a=>i(n,a,null,0))})}const b$e=function({name:e,id:t,isCurrentPage:r}){const o=Dn(),i=ne.useRef(null),a=ne.useCallback(l=>{o.renamePage(t,l||"New Page",{ephemeral:!0})},[o,t]),s=ne.useCallback(l=>{o.mark("rename page"),o.renamePage(t,l||"New Page",{ephemeral:!1})},[o,t]);return K.jsx(HE,{className:"tlui-page-menu__item__input",ref:l=>i.current=l,defaultValue:e,onValueChange:a,onComplete:s,onCancel:s,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:r,autoselect:!0})},WS=(n,e,t,r)=>{let o;const i=n.pages,a=t>r?i[r-1]:i[r],s=t>r?i[r]:i[r+1];a&&!s?o=gh(a.index):!a&&s?o=Oxe(i[0].index):o=Tv(a.index,s.index),o!==i[t].index&&(n.mark("moving page"),n.updatePage({id:e,index:o}))},_j=gi(function({index:e,listSize:t,item:r,onRename:o}){const i=Dn(),a=ai(),s=i.pages,l=ne.useCallback(()=>{i.mark("creating page");const f=zh.createId();i.duplicatePage(r.id,f)},[i,r]),d=ne.useCallback(()=>{WS(i,r.id,e,e-1)},[i,r,e]),u=ne.useCallback(()=>{WS(i,r.id,e,e+1)},[i,r,e]),p=ne.useCallback(()=>{i.mark("deleting page"),i.deletePage(r.id)},[i,r]);return K.jsxs(ap,{id:`page item submenu ${e}`,children:[K.jsx(ky,{children:K.jsx(io,{title:a("page-menu.submenu.title"),icon:"dots-vertical"})}),K.jsxs(sp,{alignOffset:0,children:[K.jsxs(_h,{children:[o&&K.jsx(pg,{dir:"ltr",onSelect:o,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),K.jsx(pg,{dir:"ltr",onSelect:l,disabled:s.length>=O4,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),e>0&&K.jsx(pg,{dir:"ltr",onSelect:d,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),e<t-1&&K.jsx(pg,{dir:"ltr",onSelect:u,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),t>1&&K.jsx(_h,{children:K.jsx(pg,{dir:"ltr",onSelect:p,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})}),y$e=function(){const e=Dn(),t=ai(),r=vd(),o=ne.useCallback(()=>m(!1),[]),[i,a]=u0("page-menu",o),s=r<5?36:40,l=ne.useRef(null),d=sr("pages",()=>e.pages,[e]),u=sr("currentPage",()=>e.currentPage,[e]),p=sr("currentPageId",()=>e.currentPageId,[e]),f=md(),h=sr("maxPageCountReached",()=>e.pages.length>=O4,[e]),c=sr("isCoarsePointer",()=>e.instanceState.isCoarsePointer,[e]),[g,m]=ne.useState(!1),b=ne.useCallback(()=>{f||m(A=>!A)},[f]),v=ne.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[w,_]=ne.useState(Object.fromEntries(d.map((A,T)=>[A.id,{y:T*s,offsetY:0,isSelected:!1}])));ne.useLayoutEffect(()=>{_(Object.fromEntries(d.map((A,T)=>[A.id,{y:T*s,offsetY:0,isSelected:!1}])))},[s,d]),ne.useEffect(()=>{i&&requestAnimationFrame(()=>{const A=document.querySelector(`[data-testid="page-menu-item-${p}"]`);if(A){const T=l.current;if(!T)return;const L=A.offsetTop,j=T.scrollTop;L<j&&T.scrollTo({top:L});const $=L+s,ee=T.scrollTop+T.offsetHeight;$>ee&&T.scrollTo({top:$-T.offsetHeight})}})},[s,p,i]);const k=ne.useCallback(A=>{const{clientY:T,currentTarget:L}=A,{dataset:{id:j,index:$}}=L;if(!j||!$)return;const ee=v.current;hy(A.currentTarget,A),ee.status="pointing",ee.pointing={id:j,index:+$};const pe=w[j].y;ee.startY=T,ee.startIndex=Math.max(0,Math.min(Math.round(pe/s),d.length-1))},[s,d.length,w]),y=ne.useCallback(A=>{const T=v.current;if(T.status==="pointing"){const{clientY:L}=A,j=L-T.startY;Math.abs(j)>5&&(T.status="dragging")}if(T.status==="dragging"){const{clientY:L}=A,j=L-T.startY,$=w[T.pointing.id],{startIndex:ee,pointing:Q}=T,pe=$.y+j,ie=Math.max(0,Math.min(Math.round(pe/s),d.length-1)),te={...w};if(te[Q.id]={y:$.y,offsetY:j,isSelected:!0},ie!==T.dragIndex){T.dragIndex=ie;for(let Z=0;Z<d.length;Z++){const D=d[Z];if(D.id===T.pointing.id)continue;let{y:B}=te[D.id];ie===ee?B=Z*s:ie<ee?ie<=Z&&Z<ee?B=(Z+1)*s:B=Z*s:ie>ee&&(ie>=Z&&Z>ee?B=(Z-1)*s:B=Z*s),B!==te[D.id].y&&(te[D.id]={y:B,offsetY:0,isSelected:!0})}}_(te)}},[s,d,w]),S=ne.useCallback(A=>{const T=v.current;if(T.status==="dragging"){const{id:L,index:j}=T.pointing;WS(e,L,j,T.dragIndex)}tw(A.currentTarget,A),T.status="idle"},[e]),C=ne.useCallback(A=>{const T=v.current;A.key==="Escape"&&(T.status==="dragging"&&_(Object.fromEntries(d.map((L,j)=>[L.id,{y:j*s,offsetY:0,isSelected:!1}]))),T.status="idle")},[s,d]),I=ne.useCallback(()=>{f||e.batch(()=>{e.mark("creating page");const A=zh.createId();e.createPage({name:t("page-menu.new-page-initial-name"),id:A}),e.setCurrentPage(A),m(!0)})},[e,t,f]);return K.jsxs(tP,{id:"page menu",onOpenChange:a,open:i,children:[K.jsx(nP,{children:K.jsx(io,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-testid":"main.page-menu",icon:"chevron-down",title:u.name,children:K.jsx("div",{className:"tlui-page-menu__name",children:u.name})})}),K.jsx(jV,{side:"bottom",align:"start",sideOffset:6,children:K.jsxs("div",{className:"tlui-page-menu__wrapper",children:[K.jsxs("div",{className:"tlui-page-menu__header",children:[K.jsx("div",{className:"tlui-page-menu__header__title",children:t("page-menu.title")}),!f&&K.jsxs(K.Fragment,{children:[K.jsx(io,{"data-testid":"page-menu.edit",title:t(g?"page-menu.edit-done":"page-menu.edit-start"),icon:g?"check":"edit",onClick:b}),K.jsx(io,{"data-testid":"page-menu.create",icon:"plus",title:t(h?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:h,onClick:I})]})]}),K.jsx("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:s*d.length+4},ref:l,children:d.map((A,T)=>{const L=w[A.id]??{position:T*40,offsetY:0};return g?K.jsxs("div",{"data-testid":`page-menu-item-${A.id}`,className:"tlui-page_menu__item__sortable",style:{zIndex:A.id===u.id?888:T,transform:`translate(0px, ${L.y+L.offsetY}px)`},children:[K.jsx(io,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:k,onPointerUp:S,onPointerMove:y,onKeyDown:C,"data-id":A.id,"data-index":T}),r<5&&c?K.jsx(io,{className:"tlui-page-menu__item__button",onClick:()=>{const j=window.prompt("Rename page",A.name);j&&j!==A.name&&e.renamePage(A.id,j)},onDoubleClick:b,isChecked:A.id===u.id,children:K.jsx("span",{children:A.name})}):K.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:s},children:K.jsx(b$e,{id:A.id,name:A.name,isCurrentPage:A.id===u.id})}),!f&&K.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":g,children:K.jsx(_j,{index:T,item:A,listSize:d.length})})]},A.id+"_editing"):K.jsxs("div",{"data-testid":`page-menu-item-${A.id}`,className:"tlui-page-menu__item",children:[K.jsxs(io,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:()=>e.setCurrentPage(A.id),onDoubleClick:b,isChecked:A.id===u.id,title:t("page-menu.go-to-page"),children:[K.jsx("div",{className:"tlui-page-menu__item__button__check",children:A.id===u.id&&K.jsx(Vl,{icon:"check"})}),K.jsx("span",{children:A.name})]}),!f&&K.jsx("div",{className:"tlui-page_menu__item__submenu",children:K.jsx(_j,{index:T,item:A,listSize:d.length,onRename:()=>{if(e.environment.isIos){const j=window.prompt("Rename page",A.name);j&&j!==A.name&&e.renamePage(A.id,j)}else e.batch(()=>{m(!0),e.setCurrentPage(A.id)})}})})]},A.id)})})]})})]})},NV=ne.memo(function(){const e=ai(),t=iV(),o=yl().redo;return K.jsx(io,{"data-testid":"main.redo",icon:o.icon,title:`${e(o.label)} ${Nu(o.kbd)}`,disabled:!t,onClick:()=>o.onSelect("quick-actions"),smallIcon:!0})}),zV=gi(function(){const e=Dn(),t=yl(),r=ai(),o=t.delete;return md()?null:K.jsx(io,{icon:o.icon,onClick:()=>o.onSelect("quick-actions"),disabled:!(e.isIn("select")&&e.selectedShapeIds.length>0),title:`${r(o.label)} ${Nu(o.kbd)}`,smallIcon:!0})}),BV=ne.memo(function(){const e=ai(),t=aV(),o=yl().undo;return K.jsx(io,{"data-testid":"main.undo",icon:o.icon,title:`${e(o.label)} ${Nu(o.kbd)}`,disabled:!t,onClick:()=>o.onSelect("quick-actions"),smallIcon:!0})}),x$e=gi(function(){const e=Dn(),t=vd(),r=md();return K.jsx("div",{className:"tlui-menu-zone",children:K.jsxs("div",{className:"tlui-menu-zone__controls",children:[K.jsx(m$e,{}),K.jsx("div",{className:"tlui-menu-zone__divider"}),K.jsx(y$e,{}),t>=6&&!r&&!e.isInAny("hand","zoom")&&K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"tlui-menu-zone__divider"}),K.jsx(BV,{}),K.jsx(NV,{}),K.jsx(zV,{}),K.jsx(DV,{}),K.jsx(RV,{})]})]})})});function w$e(n,e){const[t,r]=je.useState(e);je.useLayoutEffect(()=>{const i=localStorage.getItem(n);if(i)try{r(JSON.parse(i))}catch{console.error(`Could not restore value ${n} from local storage.`)}},[n]);const o=je.useCallback(i=>{r(a=>{const s=typeof i=="function"?i(a):i;return localStorage.setItem(n,JSON.stringify(s)),s})},[n]);return[t,o]}class jv{constructor(e){J(this,"dpr",1);J(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"});J(this,"id",ba());J(this,"cvs",null);J(this,"pageBounds",[]);J(this,"collaborators",[]);J(this,"canvasScreenBounds",new uo);J(this,"canvasPageBounds",new uo);J(this,"contentPageBounds",new uo);J(this,"contentScreenBounds",new uo);J(this,"originPagePoint",new Le);J(this,"originPageCenter",new Le);J(this,"isInViewport",!1);J(this,"debug",!1);J(this,"updateContentScreenBounds",()=>{const{contentScreenBounds:e,contentPageBounds:t,canvasScreenBounds:r}=this;let{x:o,y:i,w:a,h:s}=e;if(t.w>t.h){const l=r.w/(t.w/t.h);l>r.h?(o=(r.w-r.w*(r.h/l))/2,i=0,a=r.w*(r.h/l),s=r.h):(o=0,i=(r.h-l)/2,a=r.w,s=l)}else if(t.w<t.h){const l=r.h/(t.h/t.w);o=(r.w-l)/2,i=0,a=l,s=r.h}else o=r.h/2,i=0,a=r.h,s=r.h;e.set(o,i,a,s)});J(this,"updateCanvasPageBounds",()=>{const{canvasPageBounds:e,canvasScreenBounds:t,contentPageBounds:r,contentScreenBounds:o}=this;e.set(0,0,r.width/(o.width/t.width),r.height/(o.height/t.height)),e.center=r.center});J(this,"getScreenPoint",(e,t)=>{const{canvasScreenBounds:r}=this,o=(e-r.minX)*this.dpr,i=(t-r.minY)*this.dpr;return{x:o,y:i}});J(this,"getPagePoint",(e,t)=>{const{contentPageBounds:r,contentScreenBounds:o,canvasPageBounds:i}=this,{x:a,y:s}=this.getScreenPoint(e,t);return new Le(i.minX+a*r.width/o.width,i.minY+s*r.height/o.height,1)});J(this,"minimapScreenPointToPagePoint",(e,t,r=!1,o=!1)=>{const{editor:i}=this,{viewportPageBounds:a}=i;let{x:s,y:l}=this.getPagePoint(e,t);if(o){const d=this.editor.currentPageBounds,u=a,p=((d==null?void 0:d.minX)??0)-u.width/2,f=((d==null?void 0:d.maxX)??0)+u.width/2,h=((d==null?void 0:d.minY)??0)-u.height/2,c=((d==null?void 0:d.maxY)??0)+u.height/2,g=Math.max(0,p+u.width-s),m=Math.max(0,-(f-u.width-s)),b=Math.max(0,h+u.height-l),v=Math.max(0,-(c-u.height-l)),w=Math.max(0,g-m),_=Math.max(0,m-g),k=Math.max(0,b-v),y=Math.max(0,v-b);w&&w>_?s+=w/2:_&&(s-=_/2),k&&k>y?l+=k/2:y&&(l-=y/2),s=Rd(s,p,f),l=Rd(l,h,c)}if(r){const{originPagePoint:d}=this,u=Math.abs(s-d.x),p=Math.abs(l-d.y);u>p?l=d.y:s=d.x}return new Le(s,l)});J(this,"render",()=>{const{cvs:e,pageBounds:t}=this;this.updateCanvasPageBounds();const{editor:r,canvasScreenBounds:o,canvasPageBounds:i,contentPageBounds:a,contentScreenBounds:s}=this,{width:l,height:d}=o,{viewportPageBounds:u,selectedShapeIds:p}=r;if(!e||!t)return;const f=e.getContext("2d");if(!f)throw new Error("Minimap (shapes): Could not get context");f.resetTransform(),f.globalAlpha=1,f.clearRect(0,0,l,d);const h=s.width/a.width,c=s.height/a.height;f.translate((l-s.width)/2,(d-s.height)/2),f.scale(h,c),f.translate(-a.minX,-a.minY);const g=8/h,m=8/h,b=1/h,v=1/h,w=g/4,_=m/4,k=new Path2D,y=new Path2D,{shapeFill:S,selectFill:C,viewportFill:I}=this.colors;let A;for(let ee=0,Q=t.length;ee<Q;ee++)A=t[ee],jv.roundedRect(p.includes(A.id)?y:k,A.minX,A.minY,A.width,A.height,Rd(g,b,A.width/w),Rd(m,v,A.height/_));if(f.fillStyle=S,f.fill(k),f.fillStyle=C,f.fill(y),this.debug){const ee=uo.Common(t),{minX:Q,minY:pe,width:ie,height:te}=ee;f.strokeStyle="green",f.lineWidth=2/h,f.strokeRect(Q+1/h,pe+1/c,ie-2/h,te-2/c)}{const{brush:ee}=r.instanceState;if(ee){const{x:Q,y:pe,w:ie,h:te}=ee;f.beginPath(),jv.sharpRect(f,Q,pe,ie,te),f.closePath(),f.fillStyle=I,f.fill()}}{const{minX:ee,minY:Q,width:pe,height:ie}=u;f.beginPath();const te=12/h,Z=12/h;jv.roundedRect(f,ee,Q,pe,ie,Math.min(pe/4,te),Math.min(ie/4,Z)),f.closePath(),f.fillStyle=I,f.fill(),this.debug&&(f.strokeStyle="orange",f.strokeRect(ee+1/h,Q+1/c,pe-2/h,ie-2/c))}const T=2.5/h,L=2.5/c,{currentPageId:j}=r;let $;for(let ee=0;ee<this.collaborators.length;ee++)$=this.collaborators[ee],$.currentPageId===j&&(f.beginPath(),f.ellipse(Rd($.cursor.x,i.minX+T,i.maxX-T),Rd($.cursor.y,i.minY+L,i.maxY-L),5/h,5/c,0,0,Ni),f.fillStyle=$.color,f.fill());if(this.debug){f.lineWidth=2/h;{const{minX:ee,minY:Q,width:pe,height:ie}=a;f.strokeStyle="red",f.strokeRect(ee+1/h,Q+1/c,pe-2/h,ie-2/c)}{const{minX:ee,minY:Q,width:pe,height:ie}=i;f.strokeStyle="blue",f.strokeRect(ee+1/h,Q+1/c,pe-2/h,ie-2/c)}}});this.editor=e}setDpr(e){this.dpr=+e.toFixed(2)}static roundedRect(e,t,r,o,i,a,s){if(a<1&&s<1){e.rect(t,r,o,i);return}e.moveTo(t+a,r),e.lineTo(t+o-a,r),e.quadraticCurveTo(t+o,r,t+o,r+s),e.lineTo(t+o,r+i-s),e.quadraticCurveTo(t+o,r+i,t+o-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s),e.lineTo(t,r+s),e.quadraticCurveTo(t,r,t+a,r)}static sharpRect(e,t,r,o,i,a,s){e.rect(t,r,o,i)}}function C$e({shapeFill:n,selectFill:e,viewportFill:t}){const r=Dn(),o=ne.useRef(null),i=ne.useRef(!1),a=iw(),s=bH("dpr",()=>r.instanceState.devicePixelRatio,[r]),l=ne.useMemo(()=>r.store.query.records("instance_presence"),[r]),d=ne.useMemo(()=>new jv(r),[r]);ne.useEffect(()=>{const g=requestAnimationFrame(()=>{const m=getComputedStyle(r.getContainer());d.colors={shapeFill:m.getPropertyValue(n).trim(),selectFill:m.getPropertyValue(e).trim(),viewportFill:m.getPropertyValue(t).trim()},d.render()});return()=>{cancelAnimationFrame(g)}},[r,e,n,t,d,a]);const u=ne.useCallback(g=>{if(!r.currentPageShapeIds.size)return;const m=d.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!1),b=d.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!0);d.originPagePoint.setTo(b),d.originPageCenter.setTo(r.viewportPageBounds.center),r.centerOnPoint(m,{duration:vh})},[r,d]),p=ne.useCallback(g=>{if(hy(g.currentTarget,g),!r.currentPageShapeIds.size)return;i.current=!0,d.isInViewport=!1;const m=d.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!1),b=d.minimapScreenPointToPagePoint(g.clientX,g.clientY,!1,!0),v=r.viewportPageBounds;d.originPagePoint.setTo(b),d.originPageCenter.setTo(v.center),d.isInViewport=v.containsPoint(b),d.isInViewport||r.centerOnPoint(m,{duration:vh})},[r,d]),f=ne.useCallback(g=>{if(i.current){const w=d.minimapScreenPointToPagePoint(g.clientX,g.clientY,g.shiftKey,!0);if(d.isInViewport){const _=w.clone().sub(d.originPagePoint).add(d.originPageCenter),k=Le.Add(d.originPageCenter,_);r.centerOnPoint(k);return}r.centerOnPoint(w)}const m=d.getPagePoint(g.clientX,g.clientY),b=r.pageToScreen(m),v={type:"pointer",target:"canvas",name:"pointer_move",...Sc(g),point:b,isPen:r.instanceState.isPenMode};r.dispatch(v)},[r,d]),h=ne.useCallback(g=>{i.current=!1},[]),c=ne.useCallback(g=>{const m=eF(g);r.dispatch({type:"wheel",name:"wheel",delta:m,shiftKey:g.shiftKey,altKey:g.altKey,ctrlKey:g.metaKey||g.ctrlKey})},[r]);return g1("update when dpr changes",()=>{const g=s.value;d.setDpr(g);const m=o.current,b=m.getBoundingClientRect(),v=b.width*g,w=b.height*g;m.width=v,m.height=w,d.canvasScreenBounds.set(b.x,b.y,v,w),d.cvs=o.current},[s,d]),g1("minimap render when pagebounds or collaborators changes",()=>{const{currentPageShapeIds:g,viewportPageBounds:m,currentPageBounds:b}=r;s.value,d.contentPageBounds=b?uo.Expand(b,m):m,d.updateContentScreenBounds();const v=[];g.forEach(w=>{let _=r.getShapePageBounds(w);if(!_)return;const k=r.getShapeMask(w);if(k){const y=sS(k,_.corners);if(!y)return;_=uo.FromPoints(y)}_&&(_.id=w,v.push(_))}),d.pageBounds=v,d.collaborators=l.value,d.render()},[r,d]),K.jsx("div",{className:"tlui-minimap",children:K.jsx("canvas",{ref:o,className:"tlui-minimap__canvas",onDoubleClick:u,onPointerMove:f,onPointerDown:p,onPointerUp:h,onWheel:c})})}const S9=gi(function(){const e=Dn(),t=ai(),r=vd(),o=e.zoomLevel,i=e.currentPageShapeIds.size>0,a=e.selectedShapeIds.length>0,s=e.zoomLevel===1,l=ne.useCallback(()=>{e.resetZoom(e.viewportScreenCenter,{duration:vh})},[e]);return K.jsxs(ap,{id:"zoom",children:[K.jsx(ky,{children:K.jsx(io,{title:`${t("navigation-zone.zoom")}`,"data-testid":"minimap.zoom-menu",className:r<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:l,icon:r<4?"zoom-in":void 0,children:r<4?null:K.jsxs("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(o*100),"%"]})})}),K.jsx(sp,{side:"top",align:"start",alignOffset:0,children:K.jsxs(_h,{children:[K.jsx(sv,{action:"zoom-in","data-testid":"minimap.zoom-menu.zoom-in",noClose:!0}),K.jsx(sv,{action:"zoom-out","data-testid":"minimap.zoom-menu.zoom-out",noClose:!0}),K.jsx(sv,{action:"zoom-to-100","data-testid":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:s}),K.jsx(sv,{action:"zoom-to-fit",disabled:!i,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),K.jsx(sv,{action:"zoom-to-selection",disabled:!a,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})});function sv(n){const{action:e,disabled:t=!1,noClose:r=!1}=n,o=yl();return K.jsx(yc,{label:o[e].label,kbd:o[e].kbd,"data-testid":n["data-testid"],onClick:()=>o[e].onSelect("zoom-menu"),noClose:r,disabled:t})}const S$e=ne.memo(function(){const e=yl(),t=ai(),r=vd(),[o,i]=w$e("minimap",!0),a=ne.useCallback(()=>{i(s=>!s)},[i]);return r<4?null:K.jsxs("div",{className:"tlui-navigation-zone",children:[K.jsx("div",{className:"tlui-navigation-zone__controls",children:r<6?K.jsx(S9,{}):o?K.jsxs(K.Fragment,{children:[K.jsx(S9,{}),K.jsx(io,{title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-testid":"minimap.toggle",onClick:a,icon:o?"chevrons-ne":"chevrons-sw"})]}):K.jsxs(K.Fragment,{children:[K.jsx(io,{icon:"minus","data-testid":"minimap.zoom-out",title:`${t(e["zoom-out"].label)} ${Nu(e["zoom-out"].kbd)}`,onClick:()=>e["zoom-out"].onSelect("navigation-zone")}),K.jsx(S9,{}),K.jsx(io,{icon:"plus","data-testid":"minimap.zoom-in",title:`${t(e["zoom-in"].label)} ${Nu(e["zoom-in"].kbd)}`,onClick:()=>e["zoom-in"].onSelect("navigation-zone")}),K.jsx(io,{title:t("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:a,icon:o?"chevrons-ne":"chevrons-sw"})]})}),r>=6&&!o&&K.jsx(C$e,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})}),k$e=gi(function(){const t=Dn().instanceState.isPenMode,r=yl();if(!t)return null;const o=r["exit-pen-mode"];return K.jsx(io,{label:o.label,iconLeft:o.icon,onClick:()=>o.onSelect("helper-buttons")})}),_$e=gi(function(){const e=Dn(),t=yl();if(!e.instanceState.followingUserId)return null;const r=t["stop-following"];return K.jsx(io,{label:r.label,iconLeft:r.icon,onClick:()=>r.onSelect("people-menu")})});function E$e(n){const{uiType:e,items:t,title:r,style:o,value:i,columns:a=Rd(t.length,2,4),onValueChange:s}=n,l=Dn(),d=ai(),u=ne.useRef(!1),{handleButtonClick:p,handleButtonPointerDown:f,handleButtonPointerEnter:h,handleButtonPointerUp:c}=ne.useMemo(()=>{const m=()=>{u.current=!1,window.removeEventListener("pointerup",m)};return{handleButtonClick:k=>{const{id:y}=k.currentTarget.dataset;i.type==="shared"&&i.value===y||(l.mark("point picker item"),s(o,y,!1))},handleButtonPointerDown:k=>{const{id:y}=k.currentTarget.dataset;l.mark("point picker item"),s(o,y,!0),u.current=!0,window.addEventListener("pointerup",m)},handleButtonPointerEnter:k=>{if(!u.current)return;const{id:y}=k.currentTarget.dataset;s(o,y,!0)},handleButtonPointerUp:k=>{const{id:y}=k.currentTarget.dataset;s(o,y,!1)}}},[i,l,s,o]),g=sr("theme",()=>Xl({isDarkMode:l.user.isDarkMode}),[l]);return K.jsx("div",{className:vo("tlui-button-grid",{"tlui-button-grid__two":a===2,"tlui-button-grid__three":a===3,"tlui-button-grid__four":a===4}),children:t.map(m=>K.jsx(io,{"data-id":m.value,"data-testid":`style.${e}.${m.value}`,"aria-label":m.value,"data-state":i.type==="shared"&&i.value===m.value?"hinted":void 0,title:r+"  "+d(`${e}-style.${m.value}`),className:vo("tlui-button-grid__button"),style:o===dd?{color:g[m.value].solid}:void 0,onPointerEnter:h,onPointerDown:f,onPointerUp:c,onClick:p,icon:m.icon},m.value))})}const Eg=ne.memo(E$e);function HV(n,[e,t]){return Math.min(t,Math.max(e,n))}function P$e(n){const e=ne.useRef({value:n,previous:n});return ne.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}const FV=["PageUp","PageDown"],ZV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],UV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ty="Slider",[VS,M$e,I$e]=yw(Ty),[WV,xNe]=Wh(Ty,[I$e]),[T$e,Aw]=WV(Ty),O$e=ne.forwardRef((n,e)=>{const{name:t,min:r=0,max:o=100,step:i=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:d=[r],value:u,onValueChange:p=()=>{},onValueCommit:f=()=>{},inverted:h=!1,...c}=n,[g,m]=ne.useState(null),b=Ma(e,$=>m($)),v=ne.useRef(new Set),w=ne.useRef(0),_=a==="horizontal",k=g?!!g.closest("form"):!0,y=_?A$e:L$e,[S=[],C]=r0({prop:u,defaultProp:d,onChange:$=>{var ee;(ee=[...v.current][w.current])===null||ee===void 0||ee.focus(),p($)}}),I=ne.useRef(S);function A($){const ee=F$e(S,$);j($,ee)}function T($){j($,w.current)}function L(){const $=I.current[w.current];S[w.current]!==$&&f(S)}function j($,ee,{commit:Q}={commit:!1}){const pe=V$e(i),ie=K$e(Math.round(($-r)/i)*i+r,pe),te=HV(ie,[r,o]);C((Z=[])=>{const D=B$e(Z,te,ee);if(W$e(D,l*i)){w.current=D.indexOf(te);const B=String(D)!==String(Z);return B&&Q&&f(D),B?D:Z}else return Z})}return ne.createElement(T$e,{scope:n.__scopeSlider,disabled:s,min:r,max:o,valueIndexToChangeRef:w,thumbs:v.current,values:S,orientation:a},ne.createElement(VS.Provider,{scope:n.__scopeSlider},ne.createElement(VS.Slot,{scope:n.__scopeSlider},ne.createElement(y,ur({"aria-disabled":s,"data-disabled":s?"":void 0},c,{ref:b,onPointerDown:ao(c.onPointerDown,()=>{s||(I.current=S)}),min:r,max:o,inverted:h,onSlideStart:s?void 0:A,onSlideMove:s?void 0:T,onSlideEnd:s?void 0:L,onHomeKeyDown:()=>!s&&j(r,0,{commit:!0}),onEndKeyDown:()=>!s&&j(o,S.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:ee})=>{if(!s){const ie=FV.includes($.key)||$.shiftKey&&ZV.includes($.key)?10:1,te=w.current,Z=S[te],D=i*ie*ee;j(Z+D,te,{commit:!0})}}})))),k&&S.map(($,ee)=>ne.createElement(z$e,{key:ee,name:t?t+(S.length>1?"[]":""):void 0,value:$})))}),[VV,KV]=WV(Ty,{startEdge:"left",endEdge:"right",size:"width",direction:1}),A$e=ne.forwardRef((n,e)=>{const{min:t,max:r,dir:o,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:l,onStepKeyDown:d,...u}=n,[p,f]=ne.useState(null),h=Ma(e,w=>f(w)),c=ne.useRef(),g=vE(o),m=g==="ltr",b=m&&!i||!m&&i;function v(w){const _=c.current||p.getBoundingClientRect(),k=[0,_.width],S=rP(k,b?[t,r]:[r,t]);return c.current=_,S(w-_.left)}return ne.createElement(VV,{scope:n.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width"},ne.createElement(YV,ur({dir:g,"data-orientation":"horizontal"},u,{ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=v(w.clientX);a==null||a(_)},onSlideMove:w=>{const _=v(w.clientX);s==null||s(_)},onSlideEnd:()=>{c.current=void 0,l==null||l()},onStepKeyDown:w=>{const k=UV[b?"from-left":"from-right"].includes(w.key);d==null||d({event:w,direction:k?-1:1})}})))}),L$e=ne.forwardRef((n,e)=>{const{min:t,max:r,inverted:o,onSlideStart:i,onSlideMove:a,onSlideEnd:s,onStepKeyDown:l,...d}=n,u=ne.useRef(null),p=Ma(e,u),f=ne.useRef(),h=!o;function c(g){const m=f.current||u.current.getBoundingClientRect(),b=[0,m.height],w=rP(b,h?[r,t]:[t,r]);return f.current=m,w(g-m.top)}return ne.createElement(VV,{scope:n.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},ne.createElement(YV,ur({"data-orientation":"vertical"},d,{ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const m=c(g.clientY);i==null||i(m)},onSlideMove:g=>{const m=c(g.clientY);a==null||a(m)},onSlideEnd:()=>{f.current=void 0,s==null||s()},onStepKeyDown:g=>{const b=UV[h?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:b?-1:1})}})))}),YV=ne.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:l,...d}=n,u=Aw(Ty,t);return ne.createElement(oa.span,ur({},d,{ref:e,onKeyDown:ao(n.onKeyDown,p=>{p.key==="Home"?(a(p),p.preventDefault()):p.key==="End"?(s(p),p.preventDefault()):FV.concat(ZV).includes(p.key)&&(l(p),p.preventDefault())}),onPointerDown:ao(n.onPointerDown,p=>{const f=p.target;f.setPointerCapture(p.pointerId),p.preventDefault(),u.thumbs.has(f)?f.focus():r(p)}),onPointerMove:ao(n.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&o(p)}),onPointerUp:ao(n.onPointerUp,p=>{const f=p.target;f.hasPointerCapture(p.pointerId)&&(f.releasePointerCapture(p.pointerId),i(p))})}))}),$$e="SliderTrack",j$e=ne.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,o=Aw($$e,t);return ne.createElement(oa.span,ur({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},r,{ref:e}))}),Ej="SliderRange",R$e=ne.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,o=Aw(Ej,t),i=KV(Ej,t),a=ne.useRef(null),s=Ma(e,a),l=o.values.length,d=o.values.map(f=>GV(f,o.min,o.max)),u=l>1?Math.min(...d):0,p=100-Math.max(...d);return ne.createElement(oa.span,ur({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},r,{ref:s,style:{...n.style,[i.startEdge]:u+"%",[i.endEdge]:p+"%"}}))}),Pj="SliderThumb",D$e=ne.forwardRef((n,e)=>{const t=M$e(n.__scopeSlider),[r,o]=ne.useState(null),i=Ma(e,s=>o(s)),a=ne.useMemo(()=>r?t().findIndex(s=>s.ref.current===r):-1,[t,r]);return ne.createElement(N$e,ur({},n,{ref:i,index:a}))}),N$e=ne.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,...o}=n,i=Aw(Pj,t),a=KV(Pj,t),[s,l]=ne.useState(null),d=Ma(e,m=>l(m)),u=UZ(s),p=i.values[r],f=p===void 0?0:GV(p,i.min,i.max),h=H$e(r,i.values.length),c=u==null?void 0:u[a.size],g=c?Z$e(c,f,a.direction):0;return ne.useEffect(()=>{if(s)return i.thumbs.add(s),()=>{i.thumbs.delete(s)}},[s,i.thumbs]),ne.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${f}% + ${g}px)`}},ne.createElement(VS.ItemSlot,{scope:n.__scopeSlider},ne.createElement(oa.span,ur({role:"slider","aria-label":n["aria-label"]||h,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},o,{ref:d,style:p===void 0?{display:"none"}:n.style,onFocus:ao(n.onFocus,()=>{i.valueIndexToChangeRef.current=r})}))))}),z$e=n=>{const{value:e,...t}=n,r=ne.useRef(null),o=P$e(e);return ne.useEffect(()=>{const i=r.current,a=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(a,"value").set;if(o!==e&&l){const d=new Event("input",{bubbles:!0});l.call(i,e),i.dispatchEvent(d)}},[o,e]),ne.createElement("input",ur({style:{display:"none"}},t,{ref:r,defaultValue:e}))};function B$e(n=[],e,t){const r=[...n];return r[t]=e,r.sort((o,i)=>o-i)}function GV(n,e,t){const i=100/(t-e)*(n-e);return HV(i,[0,100])}function H$e(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function F$e(n,e){if(n.length===1)return 0;const t=n.map(o=>Math.abs(o-e)),r=Math.min(...t);return t.indexOf(r)}function Z$e(n,e,t){const r=n/2,i=rP([0,50],[0,r]);return(r-i(e)*t)*t}function U$e(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function W$e(n,e){if(e>0){const t=U$e(n);return Math.min(...t)>=e}return!0}function rP(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function V$e(n){return(String(n).split(".")[1]||"").length}function K$e(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}const Y$e=O$e,G$e=j$e,X$e=R$e,q$e=D$e,J$e=ne.memo(function(e){const{title:t,steps:r,value:o,label:i,onValueChange:a}=e,s=Dn(),l=ai(),d=ne.useCallback(f=>{a(f[0],!0)},[a]),u=ne.useCallback(()=>{s.mark("click slider")},[s]),p=ne.useCallback(()=>{o&&a(o,!1)},[o,a]);return K.jsx("div",{className:"tlui-slider__container",children:K.jsxs(Y$e,{"data-testid":e["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:o?[o]:void 0,onPointerDown:u,onValueChange:d,onPointerUp:p,title:t+"  "+l(i),children:[K.jsx(G$e,{className:"tlui-slider__track",dir:"ltr",children:o!==null&&K.jsx(X$e,{className:"tlui-slider__range",dir:"ltr"})}),o!==null&&K.jsx(q$e,{className:"tlui-slider__thumb",dir:"ltr"})]})})}),Q$e=ne.memo(function({label:e,uiTypeA:t,uiTypeB:r,labelA:o,labelB:i,itemsA:a,itemsB:s,styleA:l,styleB:d,valueA:u,valueB:p,onValueChange:f}){const h=ai(),c=ne.useMemo(()=>{var m;return((m=a.find(b=>u.type==="shared"&&u.value===b.value))==null?void 0:m.icon)??"mixed"},[a,u]),g=ne.useMemo(()=>{var m;return((m=s.find(b=>p.type==="shared"&&p.value===b.value))==null?void 0:m.icon)??"mixed"},[s,p]);return u===void 0&&p===void 0?null:K.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[K.jsx("div",{title:h(e),className:"tlui-style-panel__double-select-picker-label",children:h(e)}),K.jsxs(ap,{id:`style panel ${t} A`,children:[K.jsx(Mb,{asChild:!0,children:K.jsx(io,{"data-testid":`style.${t}`,title:h(o)+"  "+h(u===null?"style-panel.mixed":`${t}-style.${u}`),icon:c,invertIcon:!0,smallIcon:!0})}),K.jsx(sp,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:K.jsx("div",{className:vo("tlui-button-grid",{"tlui-button-grid__two":a.length<4,"tlui-button-grid__four":a.length>=4}),children:a.map(m=>K.jsx(yc,{className:"tlui-button-grid__button",title:h(o)+"  "+h(`${t}-style.${m.value}`),"data-testid":`style.${t}.${m.value}`,icon:m.icon,onClick:()=>f(l,m.value,!1),invertIcon:!0},m.value))})})]}),K.jsxs(ap,{id:`style panel ${r}`,children:[K.jsx(Mb,{asChild:!0,children:K.jsx(io,{"data-testid":`style.${r}`,title:h(i)+"  "+h(p===null?"style-panel.mixed":`${r}-style.${p}`),icon:g,smallIcon:!0})}),K.jsx(sp,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:K.jsx("div",{className:vo("tlui-button-grid",{"tlui-button-grid__two":a.length<4,"tlui-button-grid__four":a.length>=4}),children:s.map(m=>K.jsx(yc,{className:"tlui-button-grid__button",title:h(i)+"  "+h(`${r}-style.${m.value}`),"data-testid":`style.${r}.${m.value}`,icon:m.icon,onClick:()=>f(d,m.value,!1)},m.value))})})]})]})}),oP=ne.memo(function({id:e,label:t,uiType:r,style:o,items:i,value:a,onValueChange:s}){const l=ai(),d=ne.useMemo(()=>{var u;return(u=i.find(p=>a.type==="shared"&&p.value===a.value))==null?void 0:u.icon},[i,a]);return K.jsxs(ap,{id:`style panel ${e}`,children:[K.jsx(Mb,{asChild:!0,children:K.jsx(io,{"data-testid":`style.${r}`,title:a.type==="mixed"?l("style-panel.mixed"):l(`${r}-style.${a.value}`),label:t,icon:d??"mixed"})}),K.jsx(sp,{side:"left",align:"center",alignOffset:0,children:K.jsx("div",{className:vo("tlui-button-grid",{"tlui-button-grid__two":i.length<3,"tlui-button-grid__three":i.length==3,"tlui-button-grid__four":i.length>=4}),children:i.map(u=>K.jsx(yc,{className:"tlui-button-grid__button","data-testid":`style.${r}.${u.value}`,title:l(`${r}-style.${u.value}`),icon:u.icon,onClick:()=>s(o,u.value,!1)},u.value))})})]})}),Hd={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"cloud",icon:"geo-cloud"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},eje=[dd,Z1,lm,Ru];function tje(n){var r;const e=new lS(n.sharedStyles),t=n.selectedShapeIds.length>0||!!((r=n.root.current.value)!=null&&r.shapeType);if(e.size===0&&n.isIn("select")&&n.selectedShapeIds.length===0)for(const o of eje)e.applyValue(o,n.getStyleForNextShape(o));return e.size===0&&!t?null:{styles:e,opacity:n.sharedOpacity}}const XV=function({isMobile:e}){const t=Dn(),r=sr("getRelevantStyles",()=>tje(t),[t]),o=ne.useCallback(()=>{e||t.updateInstanceState({isChangingStyle:!1})},[t,e]);if(!r)return null;const{styles:i,opacity:a}=r,s=i.get(Pu),l=i.get(_4),d=i.get(k4),u=i.get(P4),p=i.get(ju),f=s===void 0,h=l===void 0&&d===void 0,c=u===void 0,g=p===void 0;return K.jsxs("div",{className:"tlui-style-panel","data-ismobile":e,onPointerLeave:o,children:[K.jsx(nje,{styles:i,opacity:a}),!g&&K.jsx(rje,{styles:i}),!(f&&h&&c)&&K.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[K.jsx(oje,{styles:i}),K.jsx(aje,{styles:i}),K.jsx(ije,{styles:i})]})]})};function Oy(){const n=Dn();return je.useMemo(()=>function(t,r,o){n.batch(()=>{n.isIn("select")&&n.setStyleForSelectedShapes(t,r,{squashing:o}),n.setStyleForNextShapes(t,r,{squashing:o}),n.updateInstanceState({isChangingStyle:!0})})},[n])}const lv=[.1,.25,.5,.75,1];function nje({styles:n,opacity:e}){const t=Dn(),r=ai(),o=Oy(),i=je.useCallback((f,h)=>{const c=lv[f];t.batch(()=>{t.isIn("select")&&t.setOpacityForSelectedShapes(c,{ephemeral:h}),t.setOpacityForNextShapes(c,{ephemeral:h}),t.updateInstanceState({isChangingStyle:!0})})},[t]),a=n.get(dd),s=n.get(lm),l=n.get(Z1),d=n.get(Ru),u=s!==void 0||l!==void 0||d!==void 0,p=e.type==="mixed"?-1:lv.indexOf(wbe(lv,f=>Math.abs(f-e.value)));return K.jsxs(K.Fragment,{children:[K.jsxs("div",{tabIndex:-1,className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[a===void 0?null:K.jsx(Eg,{title:r("style-panel.color"),uiType:"color",style:dd,items:Hd.color,value:a,onValueChange:o}),e===void 0?null:K.jsx(J$e,{"data-testid":"style.opacity",value:p>=0?p:lv.length-1,label:e.type==="mixed"?"style-panel.mixed":`opacity-style.${e}`,onValueChange:i,steps:lv.length-1,title:r("style-panel.opacity")})]}),u&&K.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[s===void 0?null:K.jsx(Eg,{title:r("style-panel.fill"),uiType:"fill",style:lm,items:Hd.fill,value:s,onValueChange:o}),l===void 0?null:K.jsx(Eg,{title:r("style-panel.dash"),uiType:"dash",style:Z1,items:Hd.dash,value:l,onValueChange:o}),d===void 0?null:K.jsx(Eg,{title:r("style-panel.size"),uiType:"size",style:Ru,items:Hd.size,value:d,onValueChange:o})]})]})}function rje({styles:n}){const e=ai(),t=Oy(),r=n.get(ju),o=n.get(gb),i=n.get(E4);return r===void 0&&o===void 0?null:K.jsxs("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[r===void 0?null:K.jsx(Eg,{title:e("style-panel.font"),uiType:"font",style:ju,items:Hd.font,value:r,onValueChange:t}),o===void 0?null:K.jsxs("div",{className:"tlui-style-panel__row",children:[K.jsx(Eg,{title:e("style-panel.align"),uiType:"align",style:gb,items:Hd.horizontalAlign,value:o,onValueChange:t}),i===void 0?K.jsx(io,{title:e("style-panel.vertical-align"),"data-testid":"vertical-align",icon:"vertical-align-center",disabled:!0}):K.jsx(oP,{id:"geo-vertical-alignment",uiType:"verticalAlign",style:E4,items:Hd.verticalAlign,value:i,onValueChange:t})]})]})}function oje({styles:n}){const e=Oy(),t=n.get(Pu);return t===void 0?null:K.jsx(oP,{id:"geo",label:"style-panel.geo",uiType:"geo",style:Pu,items:Hd.geo,value:t,onValueChange:e})}function ije({styles:n}){const e=Oy(),t=n.get(P4);return t===void 0?null:K.jsx(oP,{id:"spline",label:"style-panel.spline",uiType:"spline",style:P4,items:Hd.spline,value:t,onValueChange:e})}function aje({styles:n}){const e=Oy(),t=n.get(_4),r=n.get(k4);return!t||!r?null:K.jsx(Q$e,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:k4,itemsA:Hd.arrowheadStart,valueA:r,uiTypeB:"arrowheadEnd",styleB:_4,itemsB:Hd.arrowheadEnd,valueB:t,onValueChange:e,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}function sje({toast:n}){const{removeToast:e}=Vu(),t=ai(),r=i=>{i||e(n.id)},o=n.actions&&n.actions.length>0;return K.jsxs(uOe,{onOpenChange:r,className:"tlui-toast__container",duration:n.keepOpen?1/0:5e3,children:[n.icon&&K.jsx("div",{className:"tlui-toast__icon",children:K.jsx(Vl,{icon:n.icon})}),K.jsxs("div",{className:"tlui-toast__main",children:[K.jsxs("div",{className:"tlui-toast__content",children:[K.jsx(hOe,{className:"tlui-toast__title",children:n.title}),K.jsx(fOe,{className:"tlui-toast__description",children:n.description})]}),n.actions&&K.jsxs("div",{className:"tlui-toast__actions",children:[n.actions.map((i,a)=>K.jsx(pOe,{altText:i.label,asChild:!0,onClick:i.onClick,children:K.jsx(io,{className:i.type==="warn"?"tlui-button__warning":"tlui-button__primary",children:i.label})},a)),o&&K.jsx(ej,{asChild:!0,children:K.jsx(io,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:n.closeLabel??t("toast.close")})})]})]}),!o&&K.jsx(ej,{asChild:!0,children:K.jsx(io,{className:"tlui-toast__close",children:n.closeLabel??t("toast.close")})})]})}function lje(){const{toasts:n}=Vu();return K.jsx(K.Fragment,{children:n.map(e=>K.jsx(sje,{toast:e},e.id))})}const cje=ne.memo(lje);function dje(){const{toasts:n}=Vu(),[e,t]=ne.useState(!1);return ne.useEffect(()=>{let r=!1;return n.length?t(!0):setTimeout(()=>{r||t(!1)},1e3),()=>{r=!0}},[n.length,t]),e?K.jsx(YTe,{className:"tlui-toast__viewport"}):null}function uje(){const n=Dn(),e=ai(),t=sr("current color",()=>{const i=n.sharedStyles.get(dd);return i?i.type==="mixed"?null:Xl({isDarkMode:n.user.isDarkMode})[i.value].solid:"var(--color-muted-1)"},[n]),r=sr("isHandOrEraserToolActive",()=>n.isInAny("hand","zoom","eraser","laser"),[n]),o=ne.useCallback(i=>{i||n.updateInstanceState({isChangingStyle:!1})},[n]);return K.jsxs(tP,{id:"style menu",onOpenChange:o,children:[K.jsx(nP,{disabled:r,children:K.jsx(io,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button","data-testid":"mobile.styles",style:{color:t??"var(--color-text)"},title:e("style-panel.title"),children:K.jsx(Vl,{icon:t?"blob":"mixed"})})}),K.jsx(jV,{side:"top",align:"end",children:K.jsx(XV,{isMobile:!0})})]})}const hje=["select","hand","draw","eraser","text","zoom","laser","highlight"];function fje({activeToolId:n}){const e=Dn(),t=vd(),r=ai(),o=sr("is tool locked",()=>e.instanceState.isToolLocked,[e]);return!n||hje.includes(n)?null:K.jsx(io,{title:r("action.toggle-tool-lock"),className:vo("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":t<5}),icon:o?"lock":"unlock",onClick:()=>e.updateInstanceState({isToolLocked:!o}),smallIcon:!0})}const pje=ne.memo(function(){const e=Dn(),t=ai(),r=vd(),o=je.useRef(void 0),i=md(),a=kAe(),s=a.find(v=>v.toolItem.id==="laser"),l=sr("current tool id",()=>e.currentToolId,[e]),d=l==="hand",u=sr("geo",()=>e.sharedStyles.getAsKnownValue(Pu),[e]),p=!i,f=!(i||d),h=v=>v.label?`${t(v.label)} ${v.kbd?Nu(v.kbd):""}`:"",c=a.find(v=>dg(v.toolItem,l,u)),{itemsInPanel:g,itemsInDropdown:m,dropdownFirstItem:b}=je.useMemo(()=>{const v=[],w=[];let _;const k=Math.min(8,5+r);for(let y=4;y<a.length;y++){const S=a[y];y<k?v.push(S):(S===c&&(_=S),w.push(S))}return _||(o.current||(o.current=w[0]),_=o.current,w.includes(_)||(_=w[0])),o.current=_,w.length<=2&&(v.push(...w),w.length=0),{itemsInPanel:v,itemsInDropdown:w,dropdownFirstItem:_}},[a,c,r]);return K.jsx("div",{className:"tlui-toolbar",children:K.jsxs("div",{className:"tlui-toolbar__inner",children:[K.jsxs("div",{className:"tlui-toolbar__left",children:[!i&&r<6&&!e.isInAny("hand","zoom")&&K.jsxs("div",{className:vo("tlui-toolbar__extras",{"tlui-toolbar__extras__hidden":!f}),children:[K.jsxs("div",{className:"tlui-toolbar__extras__controls",children:[K.jsx(BV,{}),K.jsx(NV,{}),K.jsx(zV,{}),K.jsx(DV,{}),K.jsx(RV,{})]}),K.jsx(fje,{activeToolId:l})]}),K.jsxs("div",{className:vo("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<5}),children:[a.slice(0,2).map(({toolItem:v})=>K.jsx(cv,{item:v,title:h(v),isSelected:dg(v,l,u)},v.id)),i&&s&&K.jsx(cv,{item:s.toolItem,title:h(s.toolItem),isSelected:dg(s.toolItem,l,u)},s.toolItem.id),p&&K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"tlui-toolbar__divider"}),a.slice(2,4).map(({toolItem:v})=>K.jsx(cv,{item:v,title:h(v),isSelected:dg(v,l,u)},v.id)),K.jsx("div",{className:"tlui-toolbar__divider"}),g.map(({toolItem:v})=>K.jsx(cv,{item:v,title:h(v),isSelected:dg(v,l,u)},v.id)),m.length?K.jsxs(K.Fragment,{children:[K.jsx(cv,{item:b.toolItem,title:h(b.toolItem),isSelected:dg(b.toolItem,l,u)},b.toolItem.id),K.jsxs(ap,{id:"toolbar overflow",modal:!1,children:[K.jsx(ky,{children:K.jsx(io,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-testid":"tools.more",title:t("tool-panel.more")})}),K.jsx(sp,{side:"top",align:"center",children:K.jsx(gje,{toolbarItems:m})})]})]}):null]})]})]}),r<5&&!i&&K.jsx("div",{className:"tlui-toolbar__tools",children:K.jsx(uje,{})})]})})}),gje=gi(function({toolbarItems:e}){const t=ai();return K.jsx("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:e.map(({toolItem:{id:r,meta:o,kbd:i,label:a,onSelect:s,icon:l}})=>K.jsx(yc,{className:"tlui-button-grid__button","data-testid":`tools.${r}`,"data-tool":r,"data-geo":(o==null?void 0:o.geo)??"","aria-label":a,onClick:()=>s("toolbar"),title:a?`${t(a)} ${i?Nu(i):""}`:"",icon:l},r))})});function cv({item:n,title:e,isSelected:t}){var r;return K.jsx(io,{className:"tlui-toolbar__tools__button","data-testid":`tools.${n.id}`,"data-tool":n.id,"data-geo":((r=n.meta)==null?void 0:r.geo)??"","aria-label":n.label,title:e,icon:n.icon,"data-state":t?"selected":void 0,onClick:()=>n.onSelect("toolbar"),onTouchStart:o=>{Zi(o),n.onSelect("toolbar")}})}const dg=(n,e,t)=>{var r,o;return(r=n.meta)!=null&&r.geo?e==="geo"&&t===((o=n.meta)==null?void 0:o.geo):e===n.id};function mje(){const n=Dn(),{addToast:e}=Vu();ne.useEffect(()=>{function t({name:r,count:o}){e({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${r} (${o}). Please delete some shapes or move to a different page to continue.`})}return n.addListener("max-shapes",t),()=>{n.removeListener("max-shapes",t)}},[n,e])}const Mj=["copy","cut","paste","asset"];function vje(){const n=Dn(),e=md(),t=yl(),r=YE(),o=sr("is focused",()=>n.instanceState.isFocused,[n]);ne.useEffect(()=>{if(!o)return;const i=n.getContainer();Cc.setScope(n.store.id);const a=(l,d)=>{Cc(l,{element:i,scope:n.store.id},d)},s=()=>n.isMenuOpen||n.editingShapeId!==null||n.crashingError;for(const l of Object.values(t))l.kbd&&(e&&!l.readonlyOk||Mj.includes(l.id)||a(Ij(l.kbd),d=>{s()||(Zi(d),l.onSelect("kbd"))}));for(const l of Object.values(r))!l.kbd||!l.readonlyOk&&n.instanceState.isReadonly||Mj.includes(l.id)||a(Ij(l.kbd),d=>{s()||(Zi(d),l.onSelect("kbd"))});return()=>{Cc.deleteScope(n.store.id)}},[t,r,e,n,o])}function Ij(n){return bje(n).map(e=>{let t="";const r=e.split("");return r.length===1?t=r[0]:r[0]==="!"?t=`shift+${r[1]}`:r[0]==="?"?t=`alt+${r[1]}`:r[0]==="$"?r[1]==="!"?t=`cmd+shift+${r[2]},ctrl+shift+${r[2]}`:r[1]==="?"?t=`cmd++${r[2]},ctrl+alt+${r[2]}`:t=`cmd+${r[1]},ctrl+${r[1]}`:t=e,t}).join(",")}function bje(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}const yje=je.memo(function({shareZone:e,topZone:t,renderDebugMenuItems:r,children:o,hideUi:i,...a}){return K.jsx(IAe,{...a,children:K.jsx(xje,{hideUi:i,shareZone:e,topZone:t,renderDebugMenuItems:r,children:o})})}),xje=je.memo(function({children:e,hideUi:t,...r}){return K.jsxs(K.Fragment,{children:[e,t?null:K.jsx(wje,{...r})]})}),wje=je.memo(function({shareZone:e,topZone:t,renderDebugMenuItems:r}){const o=Dn(),i=ai(),a=vd(),s=sr("isReadonlyMode",()=>o.instanceState.isReadonly,[o]),l=sr("focus",()=>o.instanceState.isFocusMode,[o]),d=sr("debug",()=>o.instanceState.isDebugMode,[o]);vje(),NOe(),mje();const{"toggle-focus-mode":u}=yl();return K.jsx(MW,{children:K.jsxs("main",{className:vo("tlui-layout",{"tlui-layout__mobile":a<5}),children:[l?K.jsx("div",{className:"tlui-layout__top",children:K.jsx(io,{className:"tlui-focus-button",title:`${i("focus-mode.toggle-focus-mode")}`,icon:"dot",onClick:()=>u.onSelect("menu")})}):K.jsxs(K.Fragment,{children:[K.jsxs("div",{className:"tlui-layout__top",children:[K.jsxs("div",{className:"tlui-layout__top__left",children:[K.jsx(x$e,{}),K.jsxs("div",{className:"tlui-helper-buttons",children:[K.jsx(k$e,{}),K.jsx(OAe,{}),K.jsx(_$e,{})]})]}),K.jsx("div",{className:"tlui-layout__top__center",children:t}),K.jsxs("div",{className:"tlui-layout__top__right",children:[e,a>=5&&!s&&K.jsx("div",{className:"tlui-style-panel__wrapper",children:K.jsx(XV,{})})]})]}),K.jsxs("div",{className:"tlui-layout__bottom",children:[K.jsxs("div",{className:"tlui-layout__bottom__main",children:[K.jsx(S$e,{}),K.jsx(pje,{}),a>=4&&K.jsx(WAe,{})]}),d&&K.jsx(LAe,{renderDebugMenuItems:r??null})]})]}),K.jsx(cje,{}),K.jsx(FAe,{}),K.jsx(dje,{}),K.jsx(ZAe,{})]})})}),qV="ContextMenu",[Cje,wNe]=Wh(qV,[Sw]),Ku=Sw(),[Sje,JV]=Cje(qV),kje=n=>{const{__scopeContextMenu:e,children:t,onOpenChange:r,dir:o,modal:i=!0}=n,[a,s]=ne.useState(!1),l=Ku(e),d=pl(r),u=ne.useCallback(p=>{s(p),d(p)},[d]);return ne.createElement(Sje,{scope:e,open:a,onOpenChange:u,modal:i},ne.createElement(pU,ur({},l,{dir:o,open:a,onOpenChange:u,modal:i}),t))},_je="ContextMenuTrigger",Eje=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,disabled:r=!1,...o}=n,i=JV(_je,t),a=Ku(t),s=ne.useRef({x:0,y:0}),l=ne.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),d=ne.useRef(0),u=ne.useCallback(()=>window.clearTimeout(d.current),[]),p=f=>{s.current={x:f.clientX,y:f.clientY},i.onOpenChange(!0)};return ne.useEffect(()=>u,[u]),ne.useEffect(()=>void(r&&u()),[r,u]),ne.createElement(ne.Fragment,null,ne.createElement(gU,ur({},a,{virtualRef:l})),ne.createElement(oa.span,ur({"data-state":i.open?"open":"closed","data-disabled":r?"":void 0},o,{ref:e,style:{WebkitTouchCallout:"none",...n.style},onContextMenu:r?n.onContextMenu:ao(n.onContextMenu,f=>{u(),p(f),f.preventDefault()}),onPointerDown:r?n.onPointerDown:ao(n.onPointerDown,v3(f=>{u(),d.current=window.setTimeout(()=>p(f),700)})),onPointerMove:r?n.onPointerMove:ao(n.onPointerMove,v3(u)),onPointerCancel:r?n.onPointerCancel:ao(n.onPointerCancel,v3(u)),onPointerUp:r?n.onPointerUp:ao(n.onPointerUp,v3(u))})))}),Pje=n=>{const{__scopeContextMenu:e,...t}=n,r=Ku(e);return ne.createElement(mU,ur({},r,t))},Mje="ContextMenuContent",Ije=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,o=JV(Mje,t),i=Ku(t),a=ne.useRef(!1);return ne.createElement(vU,ur({},i,r,{ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var l;(l=n.onCloseAutoFocus)===null||l===void 0||l.call(n,s),!s.defaultPrevented&&a.current&&s.preventDefault(),a.current=!1},onInteractOutside:s=>{var l;(l=n.onInteractOutside)===null||l===void 0||l.call(n,s),!s.defaultPrevented&&!o.modal&&(a.current=!0)},style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),Tje=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,o=Ku(t);return ne.createElement(bU,ur({},o,r,{ref:e}))}),Oje=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,o=Ku(t);return ne.createElement(yU,ur({},o,r,{ref:e}))}),Aje=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,o=Ku(t);return ne.createElement(xU,ur({},o,r,{ref:e}))}),Lje=n=>{const{__scopeContextMenu:e,children:t,onOpenChange:r,open:o,defaultOpen:i}=n,a=Ku(e),[s,l]=r0({prop:o,defaultProp:i,onChange:r});return ne.createElement(wU,ur({},a,{open:s,onOpenChange:l}),t)},$je=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,o=Ku(t);return ne.createElement(CU,ur({},o,r,{ref:e}))}),jje=ne.forwardRef((n,e)=>{const{__scopeContextMenu:t,...r}=n,o=Ku(t);return ne.createElement(SU,ur({},o,r,{ref:e,style:{...n.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))});function v3(n){return e=>e.pointerType!=="mouse"?n(e):void 0}const Rje=kje,Dje=Eje,KS=Pje,Nje=Ije,YS=Tje,GS=Oje,zje=Aje,QV=Lje,eK=$je,tK=jje,Bje=gi(function(){const e=Dn(),t=vl(),r=e.pages,o=e.currentPageId,i=ai(),{addToast:a}=Vu();return K.jsxs(QV,{children:[K.jsx(eK,{dir:"ltr",asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-testid":"menu-item.move-to-page",icon:"chevron-right"})}),K.jsx(KS,{container:t,dir:"ltr",children:K.jsxs(tK,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[K.jsx(YS,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.pages",children:r.map(s=>K.jsx(GS,{disabled:o===s.id,onSelect:()=>{e.mark("move_shapes_to_page"),e.moveShapesToPage(e.selectedShapeIds,s.id);const l=e.getPage(s.id);l&&a({title:"Changed Page",description:`Moved to ${l.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{e.mark("change-page"),e.setCurrentPage(o)}}]})},asChild:!0,children:K.jsx(io,{title:s.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:K.jsx("span",{children:s.name})})},s.id))},"pages"),K.jsx(YS,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.new-page",children:K.jsx(GS,{onSelect:()=>{const s=zh.createId(),l=e.selectedShapeIds;e.batch(()=>{e.mark("move_shapes_to_page"),e.createPage({name:"Page",id:s}),e.moveShapesToPage(l,s)})},asChild:!0,children:K.jsx(io,{title:i("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:i("context.pages.new-page")})},"new-page")},"new-page")]})})]})}),Hje=function({children:e}){const t=Dn(),r=eV(),o=ne.useCallback(p=>{if(p){if(t.instanceState.isCoarsePointer){const{selectedShapes:f,inputs:{currentPagePoint:h}}=t,c=t.getShapesAtPoint(h);if(!t.selectedShapes.length||!c.some(g=>f.includes(g))){const g=c.filter(m=>t.isShapeOrAncestorLocked(m));g.length&&t.select(...g.map(m=>m.id))}}}else{const{onlySelectedShape:f}=t;f&&t.isShapeOrAncestorLocked(f)&&t.setSelectedShapes([])}},[t]),[i,a]=u0("context menu",o),s=md(),l=r.length===0||s&&r.every(p=>!p.readonlyOk),u=!sr("isSelectToolActive",()=>t.currentToolId==="select",[t])||l;return K.jsxs(Rje,{dir:"ltr",onOpenChange:a,children:[K.jsx(Dje,{onContextMenu:u?Zi:void 0,dir:"ltr",disabled:u,children:e}),K.jsx(Fje,{})]})};function Fje(){const n=Dn(),e=ai(),t=eV(),[r,o]=u0("context menu sub"),i=md(),a=vd(),s=vl(),[l,d]=ne.useState(!1);function u(p,f,h,c){if(i&&!f.readonlyOk)return null;switch(f.type){case"custom":{switch(f.id){case"MOVE_TO_PAGE_MENU":return K.jsx(Bje,{},f.id)}break}case"group":return K.jsx(YS,{dir:"ltr",className:vo("tlui-menu__group",{"tlui-menu__group__small":(h==null?void 0:h.type)==="submenu"}),"data-testid":`menu-item.${f.id}`,children:f.children.map(g=>u(p,g,f,c+1))},f.id);case"submenu":return K.jsxs(QV,{onOpenChange:o,children:[K.jsx(eK,{dir:"ltr",disabled:f.disabled,asChild:!0,children:K.jsx(io,{className:"tlui-menu__button",label:f.label,"data-testid":`menu-item.${f.id}`,icon:"chevron-right"})}),K.jsx(KS,{container:s,dir:"ltr",children:K.jsx(tK,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:f.children.map(g=>u(p,g,f,c+1))})})]},f.id);case"item":{if(i&&!f.readonlyOk)return null;const{id:g,checkbox:m,contextMenuLabel:b,label:v,onSelect:w,kbd:_,icon:k}=f.actionItem,y=b??v,S=y?e(y):void 0;return m?K.jsxs(zje,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:f.disabled,onSelect:C=>{w("context-menu"),Zi(C)},title:S||void 0,checked:f.checked,children:[K.jsx("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:`scale(${f.checked?1:.5})`,opacity:f.checked?1:.5},children:K.jsx(Vl,{small:!0,icon:f.checked?"check":"checkbox-empty"})}),S&&K.jsx("span",{children:S}),_&&K.jsx(gw,{children:_})]},g):K.jsx(GS,{dir:"ltr",asChild:!0,children:K.jsx(io,{className:"tlui-menu__button","data-testid":`menu-item.${g}`,kbd:_,label:y,disabled:f.disabled,iconLeft:a<3&&c>2?k:void 0,onClick:()=>{l?d(!1):w("context-menu")}})},g)}}}return K.jsx(KS,{dir:"ltr",container:s,children:K.jsx(Nje,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:Zi,children:t.map(p=>u(n,p,null,0))})})}const b3=(n,e)=>{const[t,r]=ne.useState(2);return ne.useEffect(()=>{const{url:o,style:i="normal",weight:a="500",display:s,featureSettings:l,stretch:d,unicodeRange:u,variant:p}=e;let f=!1;r(2);const h={style:i,weight:a,display:s,featureSettings:l,stretch:d,unicodeRange:u,variant:p},c=new FontFace(n,`url(${o})`,h);return c.load().then(()=>{f||(document.fonts.add(c),r(0))}).catch(g=>{f||(console.error(g),r(1))}),c.$$_url=o,c.$$_fontface=`
@font-face {
	font-family: ${c.family};
	font-stretch: ${c.stretch};
	font-weight: ${c.weight};
	font-style: ${c.style};
	src: url("${o}") format("woff2")
}`,()=>{document.fonts.delete(c),f=!0}},[n,e]),t};function Zje(n){return{draw:{url:n.fonts.draw},serif:{url:n.fonts.serif},sansSerif:{url:n.fonts.sansSerif},monospace:{url:n.fonts.monospace}}}function Uje(n){const e=ne.useMemo(()=>Zje(n),[n]),t=[b3("tldraw_draw",e.draw),b3("tldraw_serif",e.serif),b3("tldraw_sans",e.sansSerif),b3("tldraw_mono",e.monospace)];return{error:t.some(r=>r===1),done:!t.some(r=>r===2)}}function Wje(n){const{children:e,maxImageDimension:t,maxAssetSize:r,acceptedImageMimeTypes:o,acceptedVideoMimeTypes:i,onMount:a,...s}=n,l={initialState:"select",...s,components:ne.useMemo(()=>({Scribble:_$,CollaboratorScribble:_$,SelectionForeground:VMe,SelectionBackground:ZMe,Handles:DMe,HoveredShapeIndicator:NMe,...s.components}),[s.components]),shapeUtils:ne.useMemo(()=>[...eW,...s.shapeUtils??[]],[s.shapeUtils]),tools:ne.useMemo(()=>[...FTe,...wIe,...s.tools??[]],[s.tools])},d=gOe(s.assetUrls),{done:u,error:p}=Uje(d);return p?K.jsx(o7e,{children:"Could not load assets. Please refresh the page."}):u?K.jsx(e7e,{...l,children:K.jsxs(yje,{...l,children:[K.jsx(Hje,{children:K.jsx(Z_,{})}),K.jsx(Vje,{maxImageDimension:t,maxAssetSize:r,acceptedImageMimeTypes:o,acceptedVideoMimeTypes:i,onMount:a}),e]})}):K.jsx(OF,{children:"Loading assets..."})}function Vje({maxImageDimension:n=1e3,maxAssetSize:e=10*1024*1024,acceptedImageMimeTypes:t=["image/jpeg","image/png","image/gif","image/svg+xml"],acceptedVideoMimeTypes:r=["video/mp4","video/quicktime"],onMount:o}){const i=Dn(),a=Kje(s=>{const l=[];return l.push(MTe(s)),dIe(s,{maxImageDimension:n,maxAssetSize:e,acceptedImageMimeTypes:t,acceptedVideoMimeTypes:r}),l.push(o==null?void 0:o(s)),()=>{l.forEach(d=>d==null?void 0:d())}});return ne.useLayoutEffect(()=>{if(i)return a==null?void 0:a(i)},[i,a]),null}function Kje(n){const e=ne.useRef();return ne.useLayoutEffect(()=>{e.current=n}),ne.useDebugValue(n),ne.useCallback((...t)=>{const r=e.current;return qx(r,"fn does not exist"),r(...t)},[])}di({tldrawFileFormatVersion:Wbe,schema:di({schemaVersion:Z5,storeVersion:Z5,recordVersions:tS(Po,di({version:Z5,subTypeVersions:tS(Po,Z5).optional(),subTypeKey:Po.optional()}))}),records:Ec(di({id:Po,typeName:Po}).allowUnknownProperties())});const Yje="instance:instance";function Gje(n){const{file:e}=n,[t,r]=ne.useState(),{fileTree:o}=Xj(),[i,a]=ne.useState(),[s]=ne.useState(()=>cS({shapeUtils:eW})),l=async()=>{const p=await sI.getTldraw(e.id);p&&(a(p.instanceState),s.loadSnapshot(p))},d=ne.useCallback((p,f)=>{if(!p)return;const h=p.store.getSnapshot(),c=p.store.get(Yje);console.log("--- onChangeFn instanceState ---",c),sI.updateTldraw(e.id,{...h,instanceState:c},f);const g=JSON.stringify(h);_q(e.id,g,f)},[]),{run:u}=SB(d,{wait:200});return ne.useLayoutEffect(()=>{l()},[s]),ne.useEffect(()=>{t&&i&&t.updateInstanceState(i)},[t,i]),ne.useEffect(()=>{var p;(p=t==null?void 0:t.store)==null||p.listen(()=>{u(t,o)})},[t,o]),K.jsx("div",{className:"tldraw-editor-container w-full h-full",children:K.jsx(Wje,{store:s,autoFocus:!0,onUiEvent:(p,f)=>{console.log(p,f)},onMount:p=>{r(p)}})})}function CNe(){const{tabJsonModel:n,deleteTab:e,getTabList:t}=Gj(),[r,o]=w6(Aq),{updateCurrentFile:i}=Yj(),[a]=w6(Lq);ne.useEffect(()=>{if(!n)return;try{if(t(n.layout).length===0){const m=n.layout.children[0];m.children.push(Eq),m.selected=0}}catch(g){console.warn(g)}const c=lI.Model.fromJson(n);o(c)},[n]);const s=ne.useCallback(c=>{switch(c==null?void 0:c.type){case"note":return K.jsx(jue,{file:c});case"board":return K.jsx(wge,{file:c});case"tldraw":return K.jsx(Gje,{file:c});case"mindmap":return K.jsx(F2e,{});default:return K.jsx(Sge,{})}},[]),l=ne.useCallback(c=>{const g=c.getConfig();return K.jsx("div",{className:"tab_content",children:s(g)})},[]),d=ne.useCallback((c,g)=>{e(c,g)},[]),u=ne.useCallback(async(c,g)=>{if(!g)return;const m=c?await Pq.getFile(c):void 0;i(m),(m==null?void 0:m.type)!=="note"&&ca.setActive(void 0)},[]),p=ne.useCallback(c=>{if(r){switch(c.type){case"FlexLayout_DeleteTab":d(c.data.tabNode,r);break;case"FlexLayout_SelectTab":u(c.data.tabNode,r);break}return c}},[r]),f=ne.useCallback(c=>{var m;switch((m=c.getConfig())==null?void 0:m.type){case"note":return K.jsx(Tq,{className:"w-4 h-4"});case"board":return K.jsx(Iq,{className:"w-4 h-4"});case"tldraw":return K.jsx(Mq,{className:"w-3 h-3"});case"welcome":return K.jsx($q,{className:"w-4 h-4"});default:return null}},[]),h=ne.useCallback(()=>{Oq(JSON.stringify(r==null?void 0:r.toJson()))},[r]);return r?K.jsx("div",{className:`revezone-layout-wrapper h-full ${a?"revezone-siderbar-collapsed":""}`,children:K.jsx(lI.Layout,{model:r,factory:l,onAction:p,iconFactory:f,onModelChange:h})}):null}export{CNe as default};
