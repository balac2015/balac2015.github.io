<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>将 React 应用迁移至 Vite</title><meta name="robots" content="follow, index"/><meta name="description" content="Vite 充分利用了浏览器的加载机制和缓存机制等，大大提示了研发效率，vite 虽然快，但不是所有的项目react 项目都可以迁移成功"/><meta property="og:url" content="https://github.com/balac2015/blog/cra-to-vite"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Coding 工坊 | 随风"/><meta property="og:description" content="Vite 充分利用了浏览器的加载机制和缓存机制等，大大提示了研发效率，vite 虽然快，但不是所有的项目react 项目都可以迁移成功"/><meta property="og:title" content="将 React 应用迁移至 Vite"/><meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32e60817bbb543069ceddb0c99062d39~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="将 React 应用迁移至 Vite"/><meta name="twitter:description" content="Vite 充分利用了浏览器的加载机制和缓存机制等，大大提示了研发效率，vite 虽然快，但不是所有的项目react 项目都可以迁移成功"/><meta name="twitter:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32e60817bbb543069ceddb0c99062d39~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"/><meta property="article:published_time" content="2022-06-24T16:00:00.000Z"/><meta property="article:modified_time" content="2022-06-24T16:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://github.com/balac2015/blog/cra-to-vite"
  },
  "headline": "将 React 应用迁移至 Vite",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32e60817bbb543069ceddb0c99062d39~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"
    }
  ],
  "datePublished": "2022-06-24T16:00:00.000Z",
  "dateModified": "2022-06-24T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "随风"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "随风",
    "logo": {
      "@type": "ImageObject",
      "url": "https://github.com/balac2015/static/images/logo.png"
    }
  },
  "description": "Vite 充分利用了浏览器的加载机制和缓存机制等，大大提示了研发效率，vite 虽然快，但不是所有的项目react 项目都可以迁移成功"
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><meta name="referrer" content="no-referrer"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/abb8fa3e48c59e29.css" as="style"/><link rel="stylesheet" href="/_next/static/css/abb8fa3e48c59e29.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-1690aa2475cf3a90.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-b4cdd9636ac3694c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b326530c3f1b0167.js" defer=""></script><script src="/_next/static/chunks/410-dc08c716b48ef576.js" defer=""></script><script src="/_next/static/chunks/606-dfa1dde35c330eb8.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-a12f8dbad1f7fc24.js" defer=""></script><script src="/_next/static/xRVIygn0gkexXE3qpo3Pp/_buildManifest.js" defer=""></script><script src="/_next/static/xRVIygn0gkexXE3qpo3Pp/_ssgManifest.js" defer=""></script><script src="/_next/static/xRVIygn0gkexXE3qpo3Pp/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><h1><a aria-label="随风小站" href="/"><div class="flex items-center justify-between"><span><svg width="52" height="26" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" height="26" width="40"></image><image href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" height="26" width="40" x="15"></image></svg></span><div class="hidden text-2xl font-semibold sm:block">随风小站</div></div></a></h1><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">文章</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">标签</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">项目</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/boilerplate">模板</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">关于</a></div><div class="ml-1 mr-1 flex items-center sm:ml-4"><a class="block p-1" title="RSS" href="/feed.xml"><svg fill="currentColor" class="h-5 w-5" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3.75 3a.75.75 0 00-.75.75v.5c0 .414.336.75.75.75H4c6.075 0 11 4.925 11 11v.25c0 .414.336.75.75.75h.5a.75.75 0 00.75-.75V16C17 8.82 11.18 3 4 3h-.25z"></path><path d="M3 8.75A.75.75 0 013.75 8H4a8 8 0 018 8v.25a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75V16a6 6 0 00-6-6h-.25A.75.75 0 013 9.25v-.5zM7 15a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></a><button aria-label="Toggle Dark Mode" type="button" class="h-7 w-7 rounded p-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button></div><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-50 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">文章</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">标签</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">项目</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/boilerplate">模板</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">关于</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div style="transform:translateX(-100%)" class="fixed top-0 left-0 h-1 w-full bg-primary-500 backdrop-blur-3xl transition-transform duration-150"></div><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-06-24T16:00:00.000Z">2022年6月25日星期六</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">将 React 应用迁移至 Vite</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><div class=""><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img alt="avatar" src="/static/images/avatar.jpeg" width="38px" height="38px" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">作者</dt><dd class="text-gray-900 dark:text-gray-100">随风</dd></dl></li></ul></dd></dl><h2 class="pt-6 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400">目录</h2><ul class="py-4 text-sm font-medium leading-relaxed xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><li class="false"><a class="text-primary-500" href="#前言">前言</a></li><li class="false"><a class="text-primary-500" href="#如何提升构建速度">如何提升构建速度？</a></li><li class="false"><a class="text-primary-500" href="#vite-的亮点">Vite 的亮点</a></li><li class="false"><a class="text-primary-500" href="#创建-vite-新项目">创建 vite 新项目</a></li><li class="false"><a class="text-primary-500" href="#cra-为什么慢">CRA 为什么慢？</a></li><li class="false"><a class="text-primary-500" href="#vite-为什么快">Vite 为什么快？</a></li><li class="false"><a class="text-primary-500" href="#依赖预构建">依赖预构建</a></li><li class="false"><a class="text-primary-500" href="#按需加载">按需加载</a></li><li class="false"><a class="text-primary-500" href="#缓存优化">缓存优化</a></li><li class="false"><a class="text-primary-500" href="#时间对比">时间对比</a></li><li class="false"><a class="text-primary-500" href="#从-cra-迁移到-vite">从 CRA 迁移到 Vite</a></li><li class="false"><a class="text-primary-500" href="#遇到问题">遇到问题</a></li><li class="ml-6"><a class="text-primary-500" href="#decorators-not-support">decorators not support</a></li><li class="ml-6"><a class="text-primary-500" href="#无法按需加载样式文件">无法按需加载样式文件</a></li><li class="ml-6"><a class="text-primary-500" href="#default-is-not-exported">&#x27;default&#x27; is not exported</a></li><li class="false"><a class="text-primary-500" href="#小结">小结</a></li></ul></div><div class="xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="mt-6"><img alt="将 React 应用迁移至 Vite" class="w-full rounded object-cover shadow-lg" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32e60817bbb543069ceddb0c99062d39~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"/></div><div class="prose max-w-none break-words pt-10 pb-8 dark:prose-dark"><h2 id="前言"><a href="#前言" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>前言</h2><p>当下，在项目开发的过程中，对于大多数人来说，会使用 create react app 来创建 react 应用，它开箱即用，零配置，但随着项目中代码量的增加，你的项目构建时间也会随之增加，开发服务启动时间变得缓慢，代码更改后热更新也会变慢，可能会需要 2-5s 才会在页面上体现，那么能否提高构建速度，减少开发者等待的时间呢？</p><h2 id="如何提升构建速度"><a href="#如何提升构建速度" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>如何提升构建速度？</h2><p>我们可以将构建工具迁移到 <a target="_blank" rel="noopener noreferrer" href="https://vitejs.dev/" title="https://vitejs.dev/">Vite</a>。</p><p>Vite 是下一代前端构建工具，可以更快地构建应用程序。</p><h2 id="vite-的亮点"><a href="#vite-的亮点" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Vite 的亮点</h2><ul><li>极速的服务启动，使用原生 ESM 文件，无需打包!</li><li>轻量快速的热重载，无论应用程序大小如何，都始终极快的模块热重载（HMR）</li><li>开箱即用，对 TypeScript、JSX、CSS 等支持开箱即用。</li><li>Rollup 构建，可选 “多页应用” 或 “库” 模式的预配置</li><li>通用的插件，在开发和构建之间共享 Rollup-superset 插件接口。</li><li>灵活的 API 和完整的 TypeScript 类型。</li><li>支持 React, <a target="_blank" rel="noopener noreferrer" href="https://vite.new/vue" title="https://vite.new/vue">Vue</a>, <a target="_blank" rel="noopener noreferrer" href="https://vite.new/preact" title="https://vite.new/preact">Preact</a>, <a target="_blank" rel="noopener noreferrer" href="https://vite.new/svelte" title="https://vite.new/svelte">Svelte</a>.</li></ul><h2 id="创建-vite-新项目"><a href="#创建-vite-新项目" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>创建 vite 新项目</h2><p>使用以下命令创建全新的 react 应用程序。</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token function">yarn</span> create vite my-react-app --template react
</span></code></pre></div><h2 id="cra-为什么慢"><a href="#cra-为什么慢" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>CRA 为什么慢？</h2><p>Create react app 使用 wabpack 来打包。</p><p><img alt="webpack 打包图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e581027c1ee3498db6f9c43fd8ab8a42~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"/> 如上图所示，它将整个项目的代码打包在一起，然后才能启动服务。</p><h2 id="vite-为什么快"><a href="#vite-为什么快" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Vite 为什么快？</h2><p>Vite 将会使用 <a target="_blank" rel="noopener noreferrer" href="https://esbuild.github.io/" title="https://esbuild.github.io/">esbuild</a> <a target="_blank" rel="noopener noreferrer" href="https://cn.vitejs.dev/guide/dep-pre-bundling.html" title="https://cn.vitejs.dev/guide/dep-pre-bundling.html">预构建依赖</a>。esbuild 使用 Go 编写，并且相比 JavaScript 编写的 babel 打包器预构建依赖快 10-100 倍。</p><h2 id="依赖预构建"><a href="#依赖预构建" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>依赖预构建</h2><p>当你首次启动 <code>vite</code> 时，你可能会注意到打印出了以下信息：</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">Pre-bundling dependencies: （正在预构建依赖：）
</span><span class="code-line">  react,
</span><span class="code-line">  react-dom
</span><span class="code-line"><span class="token punctuation">(</span>this will be run only when your dependencies or config have changed<span class="token punctuation">)</span>（这将只会在你的依赖或配置发生变化时执行）
</span></code></pre></div><p><strong>依赖预构建的目的:</strong></p><ol><li>Vite 必须先将作为 CommonJS 或 UMD 发布的依赖项转换为 ESM。</li><li><strong>性能：</strong> Vite 将有许多内部模块的 ESM 依赖关系转换为单个模块，例如，<a target="_blank" rel="noopener noreferrer" href="https://unpkg.com/browse/lodash-es/" title="https://unpkg.com/browse/lodash-es/"><code>lodash-es</code> 有超过 600 个内置模块</a>！通过预构建 <code>lodash-es</code> 成为一个模块，我们就只需要一个 HTTP 请求了！</li></ol><h2 id="按需加载"><a href="#按需加载" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>按需加载</h2><p>Vite 通过在一开始将应用中代码区分为 <strong>依赖</strong> 和 <strong>源码</strong> 两类，改进了开发服务器启动时间。</p><ul><li><strong>依赖</strong> 一般是那种在开发中不会改变的 JavaScript，比如组件库，或者一些较大的依赖（可能有上百个模块的库），这一部分使用 esbuild 来进行预构建依赖</li><li><strong>源码</strong> 是我们开发的 JSX，CSS 或者 Vue/Svelte 组件，需要编译后才可以执行。同时，并不是所有的源码都需要同时被加载（例如基于路由拆分的代码模块）。 <img alt="vite 打包图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ccaec56dc33441391de7cf01ad573cc~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"/></li></ul><p>如上图所示，当浏览器请求时，Vite 只需要按需编译当前屏幕使用的代码。</p><h2 id="缓存优化"><a href="#缓存优化" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>缓存优化</h2><p>Vite 是直接把转换后的 ES module 的 JavaScript 代码，给支持 ES module 的浏览器，让浏览器自己去加载依赖，也就是把压力丢给了浏览器，从而达到了项目启动速度快的效果。 在我们修改其中一个代码模块的时候，Vite 热更新非常快，源码中模块的请求会根据 <code>304 Not Modified</code> 进行协商缓存，而依赖模块请求则会通过 <code>Cache-Control: max-age=31536000,immutable</code> 进行强缓存，因此一旦被缓存它们将不需要再次请求。</p><h2 id="时间对比"><a href="#时间对比" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>时间对比</h2><p>我拿一个 create react app 项目， 该项目包含 3 个路由页面，14 个组件，迁移到 vite，也就是大家常说的 cra 来测试过，我们一起来对比下时间:</p><p><img alt="开发模式" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f87eb865bffc4a91bbe6684199d90197~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"/> CRA 12 s，vite 298 ms。 Vite 开发环境是懒编译模式， 298ms 只是启动 devServer 的时间，不包含资源编译，只有你用浏览器去请求页面了，它才会进行编译，但是 CRA 是一次性把所有资源都编译、打包了</p><p><img alt="打包模式" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bb088f5fce9480f8bc018fd939de9a3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"/> CRA 15.66 s，vite 9.11 s</p><h2 id="从-cra-迁移到-vite"><a href="#从-cra-迁移到-vite" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>从 CRA 迁移到 Vite</h2><p>那么我是如何从老项目迁移到 vite 的呢？</p><ul><li>首先从 <strong>package.json</strong> 删除依赖 <code>react-scripts</code>.</li><li>在 <code>dependencies</code> 安装以下依赖</li></ul><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;@vitejs/plugin-react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.7.0&quot;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></code></pre></div><ul><li>修改 package.json 中 scripts 命令</li></ul><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 开发阶段启动 Vite Dev Server</span>
</span><span class="code-line">  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// 生产环境打包</span>
</span><span class="code-line">  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc &amp;&amp; vite build&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token comment">// 生产环境打包完预览产物</span>
</span><span class="code-line">  <span class="token property">&quot;preview&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite preview&quot;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></code></pre></div><ul><li>创建一个 <strong>vite.config.js 输入以下代码</strong></li></ul><div class="relative"><pre><code class="code-highlight language-jsx"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;vite&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">react</span> <span class="token keyword module">from</span> <span class="token string">&#x27;@vitejs/plugin-react&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> mode <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property literal-property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property literal-property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property string-property">&#x27;process.env.NODE_ENV&#x27;</span><span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>mode<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">&quot;</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>可以看到配置文件中默认在 plugins 数组中配置了官方的 react 插件，来提供 React 项目编译和热更新的功能。</p><ul><li><p>配置别名</p><p>如果你的项目中使用到了别名，则需要做出相应修改。</p></li></ul><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;vite&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">react</span> <span class="token keyword module">from</span> <span class="token string">&#x27;@vitejs/plugin-react&#x27;</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// https://vitejs.dev/config/</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property literal-property">base</span><span class="token operator">:</span> <span class="token string">&#x27;./&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property literal-property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property literal-property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property string-property">&#x27;@components&#x27;</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;components&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property string-property">&#x27;@utils&#x27;</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;utils&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property string-property">&#x27;@config&#x27;</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#x27;src&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;config&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property literal-property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><ul><li>将 <strong>index.html 移动到 public 文件夹外面</strong></li><li>在 index.html 删除 <code>%PUBLIC_URL%</code></li></ul><div class="relative"><pre><code class="code-highlight language-html"><span class="code-line">//修改前
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>%PUBLIC_URL%/favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">//修改后
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code></pre></div><ul><li>在 <strong>index.html 引入入口 js 脚本</strong></li></ul><div class="relative"><pre><code class="code-highlight language-html"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/index.jsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</span></code></pre></div><ul><li>修改 <strong>REACT_APP 开头的 env 环境变量</strong></li></ul><p><code>REACT_APP_XXX</code>  的环境变量，则切换为  <code>VITE_XXX</code>，假如有一个  <code>.env</code>  文件：</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">// 修改前
</span><span class="code-line">REACT_APP_ENV <span class="token operator">=</span> <span class="token class-name builtin">local</span>
</span><span class="code-line">// 修改后
</span><span class="code-line">VITE_ENV <span class="token operator">=</span> <span class="token class-name builtin">local</span>
</span></code></pre></div><ul><li>SASS</li></ul><p>如果项目使用了 sass，则需要执行命令进行安装：</p><div class="relative"><pre><code class="code-highlight language-auto"><span class="code-line">$ yarn add -D sass
</span></code></pre></div><p>如果 scss 文件里面引入了一些 node_modules 的 css 是使用 <code>~</code> 符号的，可以做出调整：</p><div class="relative"><pre><code class="code-highlight language-auto"><span class="code-line">@import &#x27;~antd/dist/antd.css&#x27;;
</span><span class="code-line">
</span><span class="code-line">调整为
</span><span class="code-line">
</span><span class="code-line">@import &#x27;antd/dist/antd.css&#x27;;
</span></code></pre></div><p>可以参考 <a target="_blank" rel="noopener noreferrer" href="https://github.com/vitejs/vite/issues/382" title="https://github.com/vitejs/vite/issues/382">issue - Cannot import CSS from node_modules using &quot;~&quot; pattern</a></p><ul><li>重新执行 yarn 命令，安装依赖</li><li>执行 <code>yarn start</code> 启动</li></ul><p>若能够成功启动，那么恭喜你，项目迁移成功了，若不能启动，我们可以根据命令行中的提示，参照 <a target="_blank" rel="noopener noreferrer" href="https://cn.vitejs.dev/guide/dep-pre-bundling.html" title="https://cn.vitejs.dev/guide/dep-pre-bundling.html">Vite</a> 文档修改。</p><h2 id="遇到问题"><a href="#遇到问题" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>遇到问题</h2><h3 id="decorators-not-support"><a href="#decorators-not-support" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>decorators not support</h3><p>项目代码中如果使用了装饰器，比如 redux 提供的 connect 来绑定状态，形如：</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line">@<span class="token function">connect</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">&amp;</span>gt<span class="token punctuation">;</span> state<span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token operator spread">...</span><span class="token punctuation">.</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>但是 decorators 语法居然不被 vite 支持，关于这个问题，也有一个<a target="_blank" rel="noopener noreferrer" href="https://github.com/vitejs/vite/issues/2349" title="https://github.com/vitejs/vite/issues/2349">issus</a>，目前没有一个好的解决办法，只好去掉 decorators，改用常规的函数绑定了。</p><h3 id="无法按需加载样式文件"><a href="#无法按需加载样式文件" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>无法按需加载样式文件</h3><p>如果项目组使用了 antd 组件库，本来会使用 babel-plugin-import 来自动导入组件和样式， vite 对 babel-plugin-import 支持不那么好，那么就要手动修改代码。</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token comment">// 修改前</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Button</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;antd&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 修改后</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Button</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;antd/lib/button&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token string">&#x27;antd/lib/button/style/index.css&#x27;</span>
</span></code></pre></div><p>也可以使用 <a target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/vite-plugin-imp" title="https://www.npmjs.com/package/vite-plugin-imp">vite-plugin-imp</a></p><h3 id="default-is-not-exported"><a href="#default-is-not-exported" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>&#x27;default&#x27; is not exported</h3><p>有时候三方依赖项加载会出错，例如&#x27;default&#x27; is not exported 等，这里可以参考 <a target="_blank" rel="noopener noreferrer" href="https://github.com/vitejs/vite/issues/2679" title="https://github.com/vitejs/vite/issues/2679">issues</a></p><p>在实际迁移过程中，还是难免遇到一些奇怪的问题，这都是尝鲜的代价。</p><h2 id="小结"><a href="#小结" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>小结</h2><p>Vite 充分利用了浏览器的加载机制和缓存机制等，大大提示了研发效率，vite 虽然快，但不是所有的项目 react 项目都可以迁移成功，若有些项目的中的 npm 包并不遵循 CommonJS 的规范，那就可能迁移失败，或者需要写一些自定义插件来适配，所以笔者认为不要激进地直接重构一些已有的大型项目，打包不是目的，运行才是，若有些项目 webpack 配置特别复杂，那么我们可以升级到 webpack5，或者<a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/post/7090372816784064526" title="https://juejin.cn/post/7090372816784064526">开启 webpack5 懒编译模式</a>等， 这样既能提升部分构建效率，也可以保证项目能够稳定运行。</p><p>以上就是本文全部内容，希望这篇文章对大家有所帮助，也可以参考我往期的文章或者在评论区交流你的想法和心得，欢迎一起探索前端。</p></div><div class="border-t border-gray-200 pt-6 pb-6 text-sm text-gray-700 dark:border-gray-700 dark:text-gray-300"><div class="mb-3"><img alt="runjs-cool" width="384" height="140" src="/static/images/runjs-cool.webp"/></div><span>关注微信公众号，获取最新原创文章（首发）</span><a target="_blank" rel="noopener noreferrer" href="https://github.com/balac2015/blob/main/data/blog/cra-to-vite.md">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">标签</h2><div class="mt-3 flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/reactjs">React.js</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/vite">Vite</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">上一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/how-to-share-technology">如何快速在团队内做一次技术分享？</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">下一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/wechat-minprogram-deployment-tutorial">《成语小秀才》部署教程</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← 返回文章列表</a></div></footer></div></div></article></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var p=Object.create;var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var t=a=\u003ei(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),g=(a,s)=\u003e{for(var c in s)i(a,c,{get:s[c],enumerable:!0})},r=(a,s,c,n)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let l of m(s))!N.call(a,l)\u0026\u0026(c||l!==\"default\")\u0026\u0026i(a,l,{get:()=\u003es[l],enumerable:!(n=h(s,l))||n.enumerable});return a},f=(a,s)=\u003er(t(i(a!=null?p(u(a)):{},\"default\",!s\u0026\u0026a\u0026\u0026a.__esModule?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a),v=(a=\u003e(s,c)=\u003ea\u0026\u0026a.get(s)||(c=r(t({}),s,1),a\u0026\u0026a.set(s,c),c))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var d=k((S,o)=\u003e{o.exports=_jsx_runtime});var w={};g(w,{default:()=\u003ej,frontmatter:()=\u003eb});var e=f(d()),b={title:\"\\u5C06 React \\u5E94\\u7528\\u8FC1\\u79FB\\u81F3 Vite\",date:\"2022/6/25\",lastmod:\"2022/6/25\",tags:[\"React.js\",\"Vite\"],draft:!1,summary:\"Vite \\u5145\\u5206\\u5229\\u7528\\u4E86\\u6D4F\\u89C8\\u5668\\u7684\\u52A0\\u8F7D\\u673A\\u5236\\u548C\\u7F13\\u5B58\\u673A\\u5236\\u7B49\\uFF0C\\u5927\\u5927\\u63D0\\u793A\\u4E86\\u7814\\u53D1\\u6548\\u7387\\uFF0Cvite \\u867D\\u7136\\u5FEB\\uFF0C\\u4F46\\u4E0D\\u662F\\u6240\\u6709\\u7684\\u9879\\u76EEreact \\u9879\\u76EE\\u90FD\\u53EF\\u4EE5\\u8FC1\\u79FB\\u6210\\u529F\",images:[\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32e60817bbb543069ceddb0c99062d39~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?\"],authors:[\"default\"],layout:\"PostLayout\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\",img:\"img\",strong:\"strong\",ol:\"ol\",h3:\"h3\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\u524D\\u8A00\",children:[(0,e.jsx)(n.a,{href:\"#\\u524D\\u8A00\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u524D\\u8A00\"]}),(0,e.jsx)(n.p,{children:\"\\u5F53\\u4E0B\\uFF0C\\u5728\\u9879\\u76EE\\u5F00\\u53D1\\u7684\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u5BF9\\u4E8E\\u5927\\u591A\\u6570\\u4EBA\\u6765\\u8BF4\\uFF0C\\u4F1A\\u4F7F\\u7528 create react app \\u6765\\u521B\\u5EFA react \\u5E94\\u7528\\uFF0C\\u5B83\\u5F00\\u7BB1\\u5373\\u7528\\uFF0C\\u96F6\\u914D\\u7F6E\\uFF0C\\u4F46\\u968F\\u7740\\u9879\\u76EE\\u4E2D\\u4EE3\\u7801\\u91CF\\u7684\\u589E\\u52A0\\uFF0C\\u4F60\\u7684\\u9879\\u76EE\\u6784\\u5EFA\\u65F6\\u95F4\\u4E5F\\u4F1A\\u968F\\u4E4B\\u589E\\u52A0\\uFF0C\\u5F00\\u53D1\\u670D\\u52A1\\u542F\\u52A8\\u65F6\\u95F4\\u53D8\\u5F97\\u7F13\\u6162\\uFF0C\\u4EE3\\u7801\\u66F4\\u6539\\u540E\\u70ED\\u66F4\\u65B0\\u4E5F\\u4F1A\\u53D8\\u6162\\uFF0C\\u53EF\\u80FD\\u4F1A\\u9700\\u8981 2-5s \\u624D\\u4F1A\\u5728\\u9875\\u9762\\u4E0A\\u4F53\\u73B0\\uFF0C\\u90A3\\u4E48\\u80FD\\u5426\\u63D0\\u9AD8\\u6784\\u5EFA\\u901F\\u5EA6\\uFF0C\\u51CF\\u5C11\\u5F00\\u53D1\\u8005\\u7B49\\u5F85\\u7684\\u65F6\\u95F4\\u5462\\uFF1F\"}),(0,e.jsxs)(n.h2,{id:\"\\u5982\\u4F55\\u63D0\\u5347\\u6784\\u5EFA\\u901F\\u5EA6\",children:[(0,e.jsx)(n.a,{href:\"#\\u5982\\u4F55\\u63D0\\u5347\\u6784\\u5EFA\\u901F\\u5EA6\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5982\\u4F55\\u63D0\\u5347\\u6784\\u5EFA\\u901F\\u5EA6\\uFF1F\"]}),(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u53EF\\u4EE5\\u5C06\\u6784\\u5EFA\\u5DE5\\u5177\\u8FC1\\u79FB\\u5230 \",(0,e.jsx)(n.a,{href:\"https://vitejs.dev/\",title:\"https://vitejs.dev/\",children:\"Vite\"}),\"\\u3002\"]}),(0,e.jsx)(n.p,{children:\"Vite \\u662F\\u4E0B\\u4E00\\u4EE3\\u524D\\u7AEF\\u6784\\u5EFA\\u5DE5\\u5177\\uFF0C\\u53EF\\u4EE5\\u66F4\\u5FEB\\u5730\\u6784\\u5EFA\\u5E94\\u7528\\u7A0B\\u5E8F\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"vite-\\u7684\\u4EAE\\u70B9\",children:[(0,e.jsx)(n.a,{href:\"#vite-\\u7684\\u4EAE\\u70B9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Vite \\u7684\\u4EAE\\u70B9\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u6781\\u901F\\u7684\\u670D\\u52A1\\u542F\\u52A8\\uFF0C\\u4F7F\\u7528\\u539F\\u751F ESM \\u6587\\u4EF6\\uFF0C\\u65E0\\u9700\\u6253\\u5305!\"}),(0,e.jsx)(n.li,{children:\"\\u8F7B\\u91CF\\u5FEB\\u901F\\u7684\\u70ED\\u91CD\\u8F7D\\uFF0C\\u65E0\\u8BBA\\u5E94\\u7528\\u7A0B\\u5E8F\\u5927\\u5C0F\\u5982\\u4F55\\uFF0C\\u90FD\\u59CB\\u7EC8\\u6781\\u5FEB\\u7684\\u6A21\\u5757\\u70ED\\u91CD\\u8F7D\\uFF08HMR\\uFF09\"}),(0,e.jsx)(n.li,{children:\"\\u5F00\\u7BB1\\u5373\\u7528\\uFF0C\\u5BF9 TypeScript\\u3001JSX\\u3001CSS \\u7B49\\u652F\\u6301\\u5F00\\u7BB1\\u5373\\u7528\\u3002\"}),(0,e.jsx)(n.li,{children:\"Rollup \\u6784\\u5EFA\\uFF0C\\u53EF\\u9009 \\u201C\\u591A\\u9875\\u5E94\\u7528\\u201D \\u6216 \\u201C\\u5E93\\u201D \\u6A21\\u5F0F\\u7684\\u9884\\u914D\\u7F6E\"}),(0,e.jsx)(n.li,{children:\"\\u901A\\u7528\\u7684\\u63D2\\u4EF6\\uFF0C\\u5728\\u5F00\\u53D1\\u548C\\u6784\\u5EFA\\u4E4B\\u95F4\\u5171\\u4EAB Rollup-superset \\u63D2\\u4EF6\\u63A5\\u53E3\\u3002\"}),(0,e.jsx)(n.li,{children:\"\\u7075\\u6D3B\\u7684 API \\u548C\\u5B8C\\u6574\\u7684 TypeScript \\u7C7B\\u578B\\u3002\"}),(0,e.jsxs)(n.li,{children:[\"\\u652F\\u6301 React, \",(0,e.jsx)(n.a,{href:\"https://vite.new/vue\",title:\"https://vite.new/vue\",children:\"Vue\"}),\", \",(0,e.jsx)(n.a,{href:\"https://vite.new/preact\",title:\"https://vite.new/preact\",children:\"Preact\"}),\", \",(0,e.jsx)(n.a,{href:\"https://vite.new/svelte\",title:\"https://vite.new/svelte\",children:\"Svelte\"}),\".\"]})]}),(0,e.jsxs)(n.h2,{id:\"\\u521B\\u5EFA-vite-\\u65B0\\u9879\\u76EE\",children:[(0,e.jsx)(n.a,{href:\"#\\u521B\\u5EFA-vite-\\u65B0\\u9879\\u76EE\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u521B\\u5EFA vite \\u65B0\\u9879\\u76EE\"]}),(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528\\u4EE5\\u4E0B\\u547D\\u4EE4\\u521B\\u5EFA\\u5168\\u65B0\\u7684 react \\u5E94\\u7528\\u7A0B\\u5E8F\\u3002\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"yarn\"}),` create vite my-react-app --template react\n`]})})}),(0,e.jsxs)(n.h2,{id:\"cra-\\u4E3A\\u4EC0\\u4E48\\u6162\",children:[(0,e.jsx)(n.a,{href:\"#cra-\\u4E3A\\u4EC0\\u4E48\\u6162\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"CRA \\u4E3A\\u4EC0\\u4E48\\u6162\\uFF1F\"]}),(0,e.jsx)(n.p,{children:\"Create react app \\u4F7F\\u7528 wabpack \\u6765\\u6253\\u5305\\u3002\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.img,{alt:\"webpack \\u6253\\u5305\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e581027c1ee3498db6f9c43fd8ab8a42~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp\"}),\" \\u5982\\u4E0A\\u56FE\\u6240\\u793A\\uFF0C\\u5B83\\u5C06\\u6574\\u4E2A\\u9879\\u76EE\\u7684\\u4EE3\\u7801\\u6253\\u5305\\u5728\\u4E00\\u8D77\\uFF0C\\u7136\\u540E\\u624D\\u80FD\\u542F\\u52A8\\u670D\\u52A1\\u3002\"]}),(0,e.jsxs)(n.h2,{id:\"vite-\\u4E3A\\u4EC0\\u4E48\\u5FEB\",children:[(0,e.jsx)(n.a,{href:\"#vite-\\u4E3A\\u4EC0\\u4E48\\u5FEB\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Vite \\u4E3A\\u4EC0\\u4E48\\u5FEB\\uFF1F\"]}),(0,e.jsxs)(n.p,{children:[\"Vite \\u5C06\\u4F1A\\u4F7F\\u7528 \",(0,e.jsx)(n.a,{href:\"https://esbuild.github.io/\",title:\"https://esbuild.github.io/\",children:\"esbuild\"}),\" \",(0,e.jsx)(n.a,{href:\"https://cn.vitejs.dev/guide/dep-pre-bundling.html\",title:\"https://cn.vitejs.dev/guide/dep-pre-bundling.html\",children:\"\\u9884\\u6784\\u5EFA\\u4F9D\\u8D56\"}),\"\\u3002esbuild \\u4F7F\\u7528 Go \\u7F16\\u5199\\uFF0C\\u5E76\\u4E14\\u76F8\\u6BD4 JavaScript \\u7F16\\u5199\\u7684 babel \\u6253\\u5305\\u5668\\u9884\\u6784\\u5EFA\\u4F9D\\u8D56\\u5FEB 10-100 \\u500D\\u3002\"]}),(0,e.jsxs)(n.h2,{id:\"\\u4F9D\\u8D56\\u9884\\u6784\\u5EFA\",children:[(0,e.jsx)(n.a,{href:\"#\\u4F9D\\u8D56\\u9884\\u6784\\u5EFA\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4F9D\\u8D56\\u9884\\u6784\\u5EFA\"]}),(0,e.jsxs)(n.p,{children:[\"\\u5F53\\u4F60\\u9996\\u6B21\\u542F\\u52A8 \",(0,e.jsx)(n.code,{children:\"vite\"}),\" \\u65F6\\uFF0C\\u4F60\\u53EF\\u80FD\\u4F1A\\u6CE8\\u610F\\u5230\\u6253\\u5370\\u51FA\\u4E86\\u4EE5\\u4E0B\\u4FE1\\u606F\\uFF1A\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`Pre-bundling dependencies: \\uFF08\\u6B63\\u5728\\u9884\\u6784\\u5EFA\\u4F9D\\u8D56\\uFF1A\\uFF09\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  react,\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  react-dom\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"this will be run only when your dependencies or config have changed\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\\uFF08\\u8FD9\\u5C06\\u53EA\\u4F1A\\u5728\\u4F60\\u7684\\u4F9D\\u8D56\\u6216\\u914D\\u7F6E\\u53D1\\u751F\\u53D8\\u5316\\u65F6\\u6267\\u884C\\uFF09\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u4F9D\\u8D56\\u9884\\u6784\\u5EFA\\u7684\\u76EE\\u7684:\"})}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"Vite \\u5FC5\\u987B\\u5148\\u5C06\\u4F5C\\u4E3A CommonJS \\u6216 UMD \\u53D1\\u5E03\\u7684\\u4F9D\\u8D56\\u9879\\u8F6C\\u6362\\u4E3A ESM\\u3002\"}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6027\\u80FD\\uFF1A\"}),\" Vite \\u5C06\\u6709\\u8BB8\\u591A\\u5185\\u90E8\\u6A21\\u5757\\u7684 ESM \\u4F9D\\u8D56\\u5173\\u7CFB\\u8F6C\\u6362\\u4E3A\\u5355\\u4E2A\\u6A21\\u5757\\uFF0C\\u4F8B\\u5982\\uFF0C\",(0,e.jsxs)(n.a,{href:\"https://unpkg.com/browse/lodash-es/\",title:\"https://unpkg.com/browse/lodash-es/\",children:[(0,e.jsx)(n.code,{children:\"lodash-es\"}),\" \\u6709\\u8D85\\u8FC7 600 \\u4E2A\\u5185\\u7F6E\\u6A21\\u5757\"]}),\"\\uFF01\\u901A\\u8FC7\\u9884\\u6784\\u5EFA \",(0,e.jsx)(n.code,{children:\"lodash-es\"}),\" \\u6210\\u4E3A\\u4E00\\u4E2A\\u6A21\\u5757\\uFF0C\\u6211\\u4EEC\\u5C31\\u53EA\\u9700\\u8981\\u4E00\\u4E2A HTTP \\u8BF7\\u6C42\\u4E86\\uFF01\"]})]}),(0,e.jsxs)(n.h2,{id:\"\\u6309\\u9700\\u52A0\\u8F7D\",children:[(0,e.jsx)(n.a,{href:\"#\\u6309\\u9700\\u52A0\\u8F7D\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6309\\u9700\\u52A0\\u8F7D\"]}),(0,e.jsxs)(n.p,{children:[\"Vite \\u901A\\u8FC7\\u5728\\u4E00\\u5F00\\u59CB\\u5C06\\u5E94\\u7528\\u4E2D\\u4EE3\\u7801\\u533A\\u5206\\u4E3A \",(0,e.jsx)(n.strong,{children:\"\\u4F9D\\u8D56\"}),\" \\u548C \",(0,e.jsx)(n.strong,{children:\"\\u6E90\\u7801\"}),\" \\u4E24\\u7C7B\\uFF0C\\u6539\\u8FDB\\u4E86\\u5F00\\u53D1\\u670D\\u52A1\\u5668\\u542F\\u52A8\\u65F6\\u95F4\\u3002\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u4F9D\\u8D56\"}),\" \\u4E00\\u822C\\u662F\\u90A3\\u79CD\\u5728\\u5F00\\u53D1\\u4E2D\\u4E0D\\u4F1A\\u6539\\u53D8\\u7684 JavaScript\\uFF0C\\u6BD4\\u5982\\u7EC4\\u4EF6\\u5E93\\uFF0C\\u6216\\u8005\\u4E00\\u4E9B\\u8F83\\u5927\\u7684\\u4F9D\\u8D56\\uFF08\\u53EF\\u80FD\\u6709\\u4E0A\\u767E\\u4E2A\\u6A21\\u5757\\u7684\\u5E93\\uFF09\\uFF0C\\u8FD9\\u4E00\\u90E8\\u5206\\u4F7F\\u7528 esbuild \\u6765\\u8FDB\\u884C\\u9884\\u6784\\u5EFA\\u4F9D\\u8D56\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\u6E90\\u7801\"}),\" \\u662F\\u6211\\u4EEC\\u5F00\\u53D1\\u7684 JSX\\uFF0CCSS \\u6216\\u8005 Vue/Svelte \\u7EC4\\u4EF6\\uFF0C\\u9700\\u8981\\u7F16\\u8BD1\\u540E\\u624D\\u53EF\\u4EE5\\u6267\\u884C\\u3002\\u540C\\u65F6\\uFF0C\\u5E76\\u4E0D\\u662F\\u6240\\u6709\\u7684\\u6E90\\u7801\\u90FD\\u9700\\u8981\\u540C\\u65F6\\u88AB\\u52A0\\u8F7D\\uFF08\\u4F8B\\u5982\\u57FA\\u4E8E\\u8DEF\\u7531\\u62C6\\u5206\\u7684\\u4EE3\\u7801\\u6A21\\u5757\\uFF09\\u3002 \",(0,e.jsx)(n.img,{alt:\"vite \\u6253\\u5305\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ccaec56dc33441391de7cf01ad573cc~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp\"})]})]}),(0,e.jsx)(n.p,{children:\"\\u5982\\u4E0A\\u56FE\\u6240\\u793A\\uFF0C\\u5F53\\u6D4F\\u89C8\\u5668\\u8BF7\\u6C42\\u65F6\\uFF0CVite \\u53EA\\u9700\\u8981\\u6309\\u9700\\u7F16\\u8BD1\\u5F53\\u524D\\u5C4F\\u5E55\\u4F7F\\u7528\\u7684\\u4EE3\\u7801\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"\\u7F13\\u5B58\\u4F18\\u5316\",children:[(0,e.jsx)(n.a,{href:\"#\\u7F13\\u5B58\\u4F18\\u5316\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u7F13\\u5B58\\u4F18\\u5316\"]}),(0,e.jsxs)(n.p,{children:[\"Vite \\u662F\\u76F4\\u63A5\\u628A\\u8F6C\\u6362\\u540E\\u7684 ES module \\u7684 JavaScript \\u4EE3\\u7801\\uFF0C\\u7ED9\\u652F\\u6301 ES module \\u7684\\u6D4F\\u89C8\\u5668\\uFF0C\\u8BA9\\u6D4F\\u89C8\\u5668\\u81EA\\u5DF1\\u53BB\\u52A0\\u8F7D\\u4F9D\\u8D56\\uFF0C\\u4E5F\\u5C31\\u662F\\u628A\\u538B\\u529B\\u4E22\\u7ED9\\u4E86\\u6D4F\\u89C8\\u5668\\uFF0C\\u4ECE\\u800C\\u8FBE\\u5230\\u4E86\\u9879\\u76EE\\u542F\\u52A8\\u901F\\u5EA6\\u5FEB\\u7684\\u6548\\u679C\\u3002 \\u5728\\u6211\\u4EEC\\u4FEE\\u6539\\u5176\\u4E2D\\u4E00\\u4E2A\\u4EE3\\u7801\\u6A21\\u5757\\u7684\\u65F6\\u5019\\uFF0CVite \\u70ED\\u66F4\\u65B0\\u975E\\u5E38\\u5FEB\\uFF0C\\u6E90\\u7801\\u4E2D\\u6A21\\u5757\\u7684\\u8BF7\\u6C42\\u4F1A\\u6839\\u636E \",(0,e.jsx)(n.code,{children:\"304 Not Modified\"}),\" \\u8FDB\\u884C\\u534F\\u5546\\u7F13\\u5B58\\uFF0C\\u800C\\u4F9D\\u8D56\\u6A21\\u5757\\u8BF7\\u6C42\\u5219\\u4F1A\\u901A\\u8FC7 \",(0,e.jsx)(n.code,{children:\"Cache-Control: max-age=31536000,immutable\"}),\" \\u8FDB\\u884C\\u5F3A\\u7F13\\u5B58\\uFF0C\\u56E0\\u6B64\\u4E00\\u65E6\\u88AB\\u7F13\\u5B58\\u5B83\\u4EEC\\u5C06\\u4E0D\\u9700\\u8981\\u518D\\u6B21\\u8BF7\\u6C42\\u3002\"]}),(0,e.jsxs)(n.h2,{id:\"\\u65F6\\u95F4\\u5BF9\\u6BD4\",children:[(0,e.jsx)(n.a,{href:\"#\\u65F6\\u95F4\\u5BF9\\u6BD4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u65F6\\u95F4\\u5BF9\\u6BD4\"]}),(0,e.jsx)(n.p,{children:\"\\u6211\\u62FF\\u4E00\\u4E2A create react app \\u9879\\u76EE\\uFF0C \\u8BE5\\u9879\\u76EE\\u5305\\u542B 3 \\u4E2A\\u8DEF\\u7531\\u9875\\u9762\\uFF0C14 \\u4E2A\\u7EC4\\u4EF6\\uFF0C\\u8FC1\\u79FB\\u5230 vite\\uFF0C\\u4E5F\\u5C31\\u662F\\u5927\\u5BB6\\u5E38\\u8BF4\\u7684 cra \\u6765\\u6D4B\\u8BD5\\u8FC7\\uFF0C\\u6211\\u4EEC\\u4E00\\u8D77\\u6765\\u5BF9\\u6BD4\\u4E0B\\u65F6\\u95F4:\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.img,{alt:\"\\u5F00\\u53D1\\u6A21\\u5F0F\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f87eb865bffc4a91bbe6684199d90197~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp\"}),\" CRA 12 s\\uFF0Cvite 298 ms\\u3002 Vite \\u5F00\\u53D1\\u73AF\\u5883\\u662F\\u61D2\\u7F16\\u8BD1\\u6A21\\u5F0F\\uFF0C 298ms \\u53EA\\u662F\\u542F\\u52A8 devServer \\u7684\\u65F6\\u95F4\\uFF0C\\u4E0D\\u5305\\u542B\\u8D44\\u6E90\\u7F16\\u8BD1\\uFF0C\\u53EA\\u6709\\u4F60\\u7528\\u6D4F\\u89C8\\u5668\\u53BB\\u8BF7\\u6C42\\u9875\\u9762\\u4E86\\uFF0C\\u5B83\\u624D\\u4F1A\\u8FDB\\u884C\\u7F16\\u8BD1\\uFF0C\\u4F46\\u662F CRA \\u662F\\u4E00\\u6B21\\u6027\\u628A\\u6240\\u6709\\u8D44\\u6E90\\u90FD\\u7F16\\u8BD1\\u3001\\u6253\\u5305\\u4E86\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.img,{alt:\"\\u6253\\u5305\\u6A21\\u5F0F\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bb088f5fce9480f8bc018fd939de9a3~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp\"}),\" CRA 15.66 s\\uFF0Cvite 9.11 s\"]}),(0,e.jsxs)(n.h2,{id:\"\\u4ECE-cra-\\u8FC1\\u79FB\\u5230-vite\",children:[(0,e.jsx)(n.a,{href:\"#\\u4ECE-cra-\\u8FC1\\u79FB\\u5230-vite\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4ECE CRA \\u8FC1\\u79FB\\u5230 Vite\"]}),(0,e.jsx)(n.p,{children:\"\\u90A3\\u4E48\\u6211\\u662F\\u5982\\u4F55\\u4ECE\\u8001\\u9879\\u76EE\\u8FC1\\u79FB\\u5230 vite \\u7684\\u5462\\uFF1F\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"\\u9996\\u5148\\u4ECE \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" \\u5220\\u9664\\u4F9D\\u8D56 \",(0,e.jsx)(n.code,{children:\"react-scripts\"}),\".\"]}),(0,e.jsxs)(n.li,{children:[\"\\u5728 \",(0,e.jsx)(n.code,{children:\"dependencies\"}),\" \\u5B89\\u88C5\\u4EE5\\u4E0B\\u4F9D\\u8D56\"]})]}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:'\"devDependencies\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"@vitejs/plugin-react\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"1.1.1\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"vite\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"2.7.0\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:\"\\u4FEE\\u6539 package.json \\u4E2D scripts \\u547D\\u4EE4\"})}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:'\"scripts\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u5F00\\u53D1\\u9636\\u6BB5\\u542F\\u52A8 Vite Dev Server\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"dev\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"vite\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u751F\\u4EA7\\u73AF\\u5883\\u6253\\u5305\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"build\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"tsc \u0026\u0026 vite build\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u751F\\u4EA7\\u73AF\\u5883\\u6253\\u5305\\u5B8C\\u9884\\u89C8\\u4EA7\\u7269\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"preview\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"vite preview\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"\\u521B\\u5EFA\\u4E00\\u4E2A \",(0,e.jsx)(n.strong,{children:\"vite.config.js \\u8F93\\u5165\\u4EE5\\u4E0B\\u4EE3\\u7801\"})]})}),(0,e.jsx)(n.pre,{className:\"language-jsx\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-jsx\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" defineConfig \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'vite'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:\"react\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'@vitejs/plugin-react'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" mode \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"defineConfig\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"plugins\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"react\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"define\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property string-property\",children:\"'process.env.NODE_ENV'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"'}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"mode\",(0,e.jsx)(n.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"'}),(0,e.jsx)(n.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u53EF\\u4EE5\\u770B\\u5230\\u914D\\u7F6E\\u6587\\u4EF6\\u4E2D\\u9ED8\\u8BA4\\u5728 plugins \\u6570\\u7EC4\\u4E2D\\u914D\\u7F6E\\u4E86\\u5B98\\u65B9\\u7684 react \\u63D2\\u4EF6\\uFF0C\\u6765\\u63D0\\u4F9B React \\u9879\\u76EE\\u7F16\\u8BD1\\u548C\\u70ED\\u66F4\\u65B0\\u7684\\u529F\\u80FD\\u3002\"}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.p,{children:\"\\u914D\\u7F6E\\u522B\\u540D\"}),(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u4F60\\u7684\\u9879\\u76EE\\u4E2D\\u4F7F\\u7528\\u5230\\u4E86\\u522B\\u540D\\uFF0C\\u5219\\u9700\\u8981\\u505A\\u51FA\\u76F8\\u5E94\\u4FEE\\u6539\\u3002\"})]})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-js\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" defineConfig \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'vite'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:\"react\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'@vitejs/plugin-react'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" resolve \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'path'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// https://vitejs.dev/config/\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"defineConfig\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"base\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"resolve\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"alias\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property string-property\",children:\"'@components'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"resolve\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"__dirname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'src'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'components'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property string-property\",children:\"'@utils'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"resolve\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"__dirname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'src'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'utils'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property string-property\",children:\"'@config'\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"resolve\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"__dirname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'src'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'config'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"plugins\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"react\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"\\u5C06 \",(0,e.jsx)(n.strong,{children:\"index.html \\u79FB\\u52A8\\u5230 public \\u6587\\u4EF6\\u5939\\u5916\\u9762\"})]}),(0,e.jsxs)(n.li,{children:[\"\\u5728 index.html \\u5220\\u9664 \",(0,e.jsx)(n.code,{children:\"%PUBLIC_URL%\"})]})]}),(0,e.jsx)(n.pre,{className:\"language-html\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-html\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`//\\u4FEE\\u6539\\u524D\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"link\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"rel\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"icon\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"href\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"%PUBLIC_URL%/favicon.ico\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`//\\u4FEE\\u6539\\u540E\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"link\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"rel\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"icon\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"href\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"/favicon.ico\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"\\u5728 \",(0,e.jsx)(n.strong,{children:\"index.html \\u5F15\\u5165\\u5165\\u53E3 js \\u811A\\u672C\"})]})}),(0,e.jsx)(n.pre,{className:\"language-html\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-html\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"id\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"root\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"script\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"type\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"src\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"/src/index.jsx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token script\"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"script\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"\\u4FEE\\u6539 \",(0,e.jsx)(n.strong,{children:\"REACT_APP \\u5F00\\u5934\\u7684 env \\u73AF\\u5883\\u53D8\\u91CF\"})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"REACT_APP_XXX\"}),\"\\xA0 \\u7684\\u73AF\\u5883\\u53D8\\u91CF\\uFF0C\\u5219\\u5207\\u6362\\u4E3A \\xA0\",(0,e.jsx)(n.code,{children:\"VITE_XXX\"}),\"\\uFF0C\\u5047\\u5982\\u6709\\u4E00\\u4E2A \\xA0\",(0,e.jsx)(n.code,{children:\".env\"}),\"\\xA0 \\u6587\\u4EF6\\uFF1A\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`// \\u4FEE\\u6539\\u524D\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"REACT_APP_ENV \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\"local\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`// \\u4FEE\\u6539\\u540E\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"VITE_ENV \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\"local\"}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:\"SASS\"})}),(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u9879\\u76EE\\u4F7F\\u7528\\u4E86 sass\\uFF0C\\u5219\\u9700\\u8981\\u6267\\u884C\\u547D\\u4EE4\\u8FDB\\u884C\\u5B89\\u88C5\\uFF1A\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight language-auto\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`$ yarn add -D sass\n`})})}),(0,e.jsxs)(n.p,{children:[\"\\u5982\\u679C scss \\u6587\\u4EF6\\u91CC\\u9762\\u5F15\\u5165\\u4E86\\u4E00\\u4E9B node_modules \\u7684 css \\u662F\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"~\"}),\" \\u7B26\\u53F7\\u7684\\uFF0C\\u53EF\\u4EE5\\u505A\\u51FA\\u8C03\\u6574\\uFF1A\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight language-auto\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`@import '~antd/dist/antd.css';\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u8C03\\u6574\\u4E3A\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`@import 'antd/dist/antd.css';\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\u53EF\\u4EE5\\u53C2\\u8003 \",(0,e.jsx)(n.a,{href:\"https://github.com/vitejs/vite/issues/382\",title:\"https://github.com/vitejs/vite/issues/382\",children:'issue - Cannot import CSS from node_modules using \"~\" pattern'})]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u91CD\\u65B0\\u6267\\u884C yarn \\u547D\\u4EE4\\uFF0C\\u5B89\\u88C5\\u4F9D\\u8D56\"}),(0,e.jsxs)(n.li,{children:[\"\\u6267\\u884C \",(0,e.jsx)(n.code,{children:\"yarn start\"}),\" \\u542F\\u52A8\"]})]}),(0,e.jsxs)(n.p,{children:[\"\\u82E5\\u80FD\\u591F\\u6210\\u529F\\u542F\\u52A8\\uFF0C\\u90A3\\u4E48\\u606D\\u559C\\u4F60\\uFF0C\\u9879\\u76EE\\u8FC1\\u79FB\\u6210\\u529F\\u4E86\\uFF0C\\u82E5\\u4E0D\\u80FD\\u542F\\u52A8\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u6839\\u636E\\u547D\\u4EE4\\u884C\\u4E2D\\u7684\\u63D0\\u793A\\uFF0C\\u53C2\\u7167 \",(0,e.jsx)(n.a,{href:\"https://cn.vitejs.dev/guide/dep-pre-bundling.html\",title:\"https://cn.vitejs.dev/guide/dep-pre-bundling.html\",children:\"Vite\"}),\" \\u6587\\u6863\\u4FEE\\u6539\\u3002\"]}),(0,e.jsxs)(n.h2,{id:\"\\u9047\\u5230\\u95EE\\u9898\",children:[(0,e.jsx)(n.a,{href:\"#\\u9047\\u5230\\u95EE\\u9898\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u9047\\u5230\\u95EE\\u9898\"]}),(0,e.jsxs)(n.h3,{id:\"decorators-not-support\",children:[(0,e.jsx)(n.a,{href:\"#decorators-not-support\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"decorators not support\"]}),(0,e.jsx)(n.p,{children:\"\\u9879\\u76EE\\u4EE3\\u7801\\u4E2D\\u5982\\u679C\\u4F7F\\u7528\\u4E86\\u88C5\\u9970\\u5668\\uFF0C\\u6BD4\\u5982 redux \\u63D0\\u4F9B\\u7684 connect \\u6765\\u7ED1\\u5B9A\\u72B6\\u6001\\uFF0C\\u5F62\\u5982\\uFF1A\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-js\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"@\",(0,e.jsx)(n.span,{className:\"token function\",children:\"connect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"state \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\"}),\"gt\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" state\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"foo\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Foo\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"React\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"PureComponent\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token operator spread\",children:\"...\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\u4F46\\u662F decorators \\u8BED\\u6CD5\\u5C45\\u7136\\u4E0D\\u88AB vite \\u652F\\u6301\\uFF0C\\u5173\\u4E8E\\u8FD9\\u4E2A\\u95EE\\u9898\\uFF0C\\u4E5F\\u6709\\u4E00\\u4E2A\",(0,e.jsx)(n.a,{href:\"https://github.com/vitejs/vite/issues/2349\",title:\"https://github.com/vitejs/vite/issues/2349\",children:\"issus\"}),\"\\uFF0C\\u76EE\\u524D\\u6CA1\\u6709\\u4E00\\u4E2A\\u597D\\u7684\\u89E3\\u51B3\\u529E\\u6CD5\\uFF0C\\u53EA\\u597D\\u53BB\\u6389 decorators\\uFF0C\\u6539\\u7528\\u5E38\\u89C4\\u7684\\u51FD\\u6570\\u7ED1\\u5B9A\\u4E86\\u3002\"]}),(0,e.jsxs)(n.h3,{id:\"\\u65E0\\u6CD5\\u6309\\u9700\\u52A0\\u8F7D\\u6837\\u5F0F\\u6587\\u4EF6\",children:[(0,e.jsx)(n.a,{href:\"#\\u65E0\\u6CD5\\u6309\\u9700\\u52A0\\u8F7D\\u6837\\u5F0F\\u6587\\u4EF6\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u65E0\\u6CD5\\u6309\\u9700\\u52A0\\u8F7D\\u6837\\u5F0F\\u6587\\u4EF6\"]}),(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u9879\\u76EE\\u7EC4\\u4F7F\\u7528\\u4E86 antd \\u7EC4\\u4EF6\\u5E93\\uFF0C\\u672C\\u6765\\u4F1A\\u4F7F\\u7528 babel-plugin-import \\u6765\\u81EA\\u52A8\\u5BFC\\u5165\\u7EC4\\u4EF6\\u548C\\u6837\\u5F0F\\uFF0C vite \\u5BF9 babel-plugin-import \\u652F\\u6301\\u4E0D\\u90A3\\u4E48\\u597D\\uFF0C\\u90A3\\u4E48\\u5C31\\u8981\\u624B\\u52A8\\u4FEE\\u6539\\u4EE3\\u7801\\u3002\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-js\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u4FEE\\u6539\\u524D\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Button\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'antd'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u4FEE\\u6539\\u540E\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Button\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'antd/lib/button'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'antd/lib/button/style/index.css'\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\u4E5F\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/vite-plugin-imp\",title:\"https://www.npmjs.com/package/vite-plugin-imp\",children:\"vite-plugin-imp\"})]}),(0,e.jsxs)(n.h3,{id:\"default-is-not-exported\",children:[(0,e.jsx)(n.a,{href:\"#default-is-not-exported\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"'default' is not exported\"]}),(0,e.jsxs)(n.p,{children:[\"\\u6709\\u65F6\\u5019\\u4E09\\u65B9\\u4F9D\\u8D56\\u9879\\u52A0\\u8F7D\\u4F1A\\u51FA\\u9519\\uFF0C\\u4F8B\\u5982'default' is not exported \\u7B49\\uFF0C\\u8FD9\\u91CC\\u53EF\\u4EE5\\u53C2\\u8003 \",(0,e.jsx)(n.a,{href:\"https://github.com/vitejs/vite/issues/2679\",title:\"https://github.com/vitejs/vite/issues/2679\",children:\"issues\"})]}),(0,e.jsx)(n.p,{children:\"\\u5728\\u5B9E\\u9645\\u8FC1\\u79FB\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u8FD8\\u662F\\u96BE\\u514D\\u9047\\u5230\\u4E00\\u4E9B\\u5947\\u602A\\u7684\\u95EE\\u9898\\uFF0C\\u8FD9\\u90FD\\u662F\\u5C1D\\u9C9C\\u7684\\u4EE3\\u4EF7\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"\\u5C0F\\u7ED3\",children:[(0,e.jsx)(n.a,{href:\"#\\u5C0F\\u7ED3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5C0F\\u7ED3\"]}),(0,e.jsxs)(n.p,{children:[\"Vite \\u5145\\u5206\\u5229\\u7528\\u4E86\\u6D4F\\u89C8\\u5668\\u7684\\u52A0\\u8F7D\\u673A\\u5236\\u548C\\u7F13\\u5B58\\u673A\\u5236\\u7B49\\uFF0C\\u5927\\u5927\\u63D0\\u793A\\u4E86\\u7814\\u53D1\\u6548\\u7387\\uFF0Cvite \\u867D\\u7136\\u5FEB\\uFF0C\\u4F46\\u4E0D\\u662F\\u6240\\u6709\\u7684\\u9879\\u76EE react \\u9879\\u76EE\\u90FD\\u53EF\\u4EE5\\u8FC1\\u79FB\\u6210\\u529F\\uFF0C\\u82E5\\u6709\\u4E9B\\u9879\\u76EE\\u7684\\u4E2D\\u7684 npm \\u5305\\u5E76\\u4E0D\\u9075\\u5FAA CommonJS \\u7684\\u89C4\\u8303\\uFF0C\\u90A3\\u5C31\\u53EF\\u80FD\\u8FC1\\u79FB\\u5931\\u8D25\\uFF0C\\u6216\\u8005\\u9700\\u8981\\u5199\\u4E00\\u4E9B\\u81EA\\u5B9A\\u4E49\\u63D2\\u4EF6\\u6765\\u9002\\u914D\\uFF0C\\u6240\\u4EE5\\u7B14\\u8005\\u8BA4\\u4E3A\\u4E0D\\u8981\\u6FC0\\u8FDB\\u5730\\u76F4\\u63A5\\u91CD\\u6784\\u4E00\\u4E9B\\u5DF2\\u6709\\u7684\\u5927\\u578B\\u9879\\u76EE\\uFF0C\\u6253\\u5305\\u4E0D\\u662F\\u76EE\\u7684\\uFF0C\\u8FD0\\u884C\\u624D\\u662F\\uFF0C\\u82E5\\u6709\\u4E9B\\u9879\\u76EE webpack \\u914D\\u7F6E\\u7279\\u522B\\u590D\\u6742\\uFF0C\\u90A3\\u4E48\\u6211\\u4EEC\\u53EF\\u4EE5\\u5347\\u7EA7\\u5230 webpack5\\uFF0C\\u6216\\u8005\",(0,e.jsx)(n.a,{href:\"https://juejin.cn/post/7090372816784064526\",title:\"https://juejin.cn/post/7090372816784064526\",children:\"\\u5F00\\u542F webpack5 \\u61D2\\u7F16\\u8BD1\\u6A21\\u5F0F\"}),\"\\u7B49\\uFF0C \\u8FD9\\u6837\\u65E2\\u80FD\\u63D0\\u5347\\u90E8\\u5206\\u6784\\u5EFA\\u6548\\u7387\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u4FDD\\u8BC1\\u9879\\u76EE\\u80FD\\u591F\\u7A33\\u5B9A\\u8FD0\\u884C\\u3002\"]}),(0,e.jsx)(n.p,{children:\"\\u4EE5\\u4E0A\\u5C31\\u662F\\u672C\\u6587\\u5168\\u90E8\\u5185\\u5BB9\\uFF0C\\u5E0C\\u671B\\u8FD9\\u7BC7\\u6587\\u7AE0\\u5BF9\\u5927\\u5BB6\\u6709\\u6240\\u5E2E\\u52A9\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u53C2\\u8003\\u6211\\u5F80\\u671F\\u7684\\u6587\\u7AE0\\u6216\\u8005\\u5728\\u8BC4\\u8BBA\\u533A\\u4EA4\\u6D41\\u4F60\\u7684\\u60F3\\u6CD5\\u548C\\u5FC3\\u5F97\\uFF0C\\u6B22\\u8FCE\\u4E00\\u8D77\\u63A2\\u7D22\\u524D\\u7AEF\\u3002\"})]})}}var j=y;return v(w);})();\n;return Component;","toc":[{"value":"前言","url":"#前言","depth":2},{"value":"如何提升构建速度？","url":"#如何提升构建速度","depth":2},{"value":"Vite 的亮点","url":"#vite-的亮点","depth":2},{"value":"创建 vite 新项目","url":"#创建-vite-新项目","depth":2},{"value":"CRA 为什么慢？","url":"#cra-为什么慢","depth":2},{"value":"Vite 为什么快？","url":"#vite-为什么快","depth":2},{"value":"依赖预构建","url":"#依赖预构建","depth":2},{"value":"按需加载","url":"#按需加载","depth":2},{"value":"缓存优化","url":"#缓存优化","depth":2},{"value":"时间对比","url":"#时间对比","depth":2},{"value":"从 CRA 迁移到 Vite","url":"#从-cra-迁移到-vite","depth":2},{"value":"遇到问题","url":"#遇到问题","depth":2},{"value":"decorators not support","url":"#decorators-not-support","depth":3},{"value":"无法按需加载样式文件","url":"#无法按需加载样式文件","depth":3},{"value":"'default' is not exported","url":"#default-is-not-exported","depth":3},{"value":"小结","url":"#小结","depth":2}],"frontMatter":{"readingTime":{"text":"5 min read","minutes":4.155,"time":249300,"words":831},"slug":"cra-to-vite","fileName":"cra-to-vite.md","title":"将 React 应用迁移至 Vite","date":"2022-06-24T16:00:00.000Z","lastmod":"2022/6/25","tags":["React.js","Vite"],"draft":false,"summary":"Vite 充分利用了浏览器的加载机制和缓存机制等，大大提示了研发效率，vite 虽然快，但不是所有的项目react 项目都可以迁移成功","images":["https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32e60817bbb543069ceddb0c99062d39~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"],"authors":["default"],"layout":"PostLayout"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.19,"time":11400,"words":38},"slug":["default"],"fileName":"default.md","name":"随风","avatar":"/static/images/avatar.jpeg","occupation":"前端工程师","company":"分享 JavaScript 热门框架，记录前端工程师学习成长历程。","email":"tianping888@163.com","juejin":"https://juejin.cn","zhihu":"https://www.zhihu.com","github":"https://github.com/balac2015","date":null}],"prev":{"title":"如何快速在团队内做一次技术分享？","date":"2022-06-24T16:00:00.000Z","lastmod":"2022/6/25","tags":["前端","程序员","markdown"],"draft":false,"summary":"本文讲述了我在准备团队内容分享的小技巧，我认为最重要的就是结合公司实际来做分享修改，无论主题也好文章内容也罢，虽然文章是别人写的，但要经过自己的思考和消化，变成自己的知识，这样我们才可以快速成长！","images":["https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34f290e9620741c0800479815b859b91~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"],"authors":["default"],"layout":"PostLayout","slug":"how-to-share-technology"},"next":{"title":"《成语小秀才》部署教程","date":"2022-07-21T16:00:00.000Z","lastmod":"2022/2/25","tags":["微信小程序"],"draft":false,"summary":"相信很多朋友都玩过这款小游戏，叫成语秀才，这款小游戏开发起来还是比较困难的，首先要有一份海量的题库。。。文末有源码。","images":["https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94c64aad55704ccabdc658df03fe0e2e~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"],"authors":["default"],"layout":"PostLayout","slug":"wechat-minprogram-deployment-tutorial"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["cra-to-vite"]},"buildId":"xRVIygn0gkexXE3qpo3Pp","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>