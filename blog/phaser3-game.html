<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>使用 phaser3 从零实现一个战疫小游戏</title><meta name="robots" content="follow, index"/><meta name="description" content=""/><meta property="og:url" content="https://github.com/balac2015/blog/phaser3-game"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Coding 工坊 | 随风"/><meta property="og:description" content=""/><meta property="og:title" content="使用 phaser3 从零实现一个战疫小游戏"/><meta property="og:image" content="https://github.com/balac2015/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="使用 phaser3 从零实现一个战疫小游戏"/><meta name="twitter:description" content=""/><meta name="twitter:image" content="https://github.com/balac2015/static/images/twitter-card.png"/><meta property="article:published_time" content="2022-04-13T16:00:00.000Z"/><meta property="article:modified_time" content="2022-04-13T16:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://github.com/balac2015/blog/phaser3-game"
  },
  "headline": "使用 phaser3 从零实现一个战疫小游戏",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://github.com/balac2015/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2022-04-13T16:00:00.000Z",
  "dateModified": "2022-04-13T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "随风"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "随风",
    "logo": {
      "@type": "ImageObject",
      "url": "https://github.com/balac2015/static/images/logo.png"
    }
  },
  "description": ""
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><meta name="referrer" content="no-referrer"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/build/static/css/143263672f95f733.css" as="style"/><link rel="stylesheet" href="/build/static/css/143263672f95f733.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/build/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/build/static/chunks/webpack-d162ed0bea313f71.js" defer=""></script><script src="/build/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/build/static/chunks/main-b4cdd9636ac3694c.js" defer=""></script><script src="/build/static/chunks/pages/_app-adb504928e1e223a.js" defer=""></script><script src="/build/static/chunks/410-dc08c716b48ef576.js" defer=""></script><script src="/build/static/chunks/606-bcfce32a938ad92d.js" defer=""></script><script src="/build/static/chunks/pages/blog/%5B...slug%5D-a12f8dbad1f7fc24.js" defer=""></script><script src="/build/static/1YpokCm8LeHo6uVUXlBkJ/_buildManifest.js" defer=""></script><script src="/build/static/1YpokCm8LeHo6uVUXlBkJ/_ssgManifest.js" defer=""></script><script src="/build/static/1YpokCm8LeHo6uVUXlBkJ/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><h1><a aria-label="随风小站" href="/"><div class="flex items-center justify-between"><span><svg width="52" height="26" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" height="26" width="40"></image><image href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" height="26" width="40" x="15"></image></svg></span><div class="hidden text-2xl font-semibold sm:block">随风小站</div></div></a></h1><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">文章</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">标签</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">项目</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tool">工具</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/boilerplate">模板</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">关于</a></div><div class="ml-1 mr-1 flex items-center sm:ml-4"><a class="block p-1" title="RSS" href="/feed.xml"><svg fill="currentColor" class="h-5 w-5" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3.75 3a.75.75 0 00-.75.75v.5c0 .414.336.75.75.75H4c6.075 0 11 4.925 11 11v.25c0 .414.336.75.75.75h.5a.75.75 0 00.75-.75V16C17 8.82 11.18 3 4 3h-.25z"></path><path d="M3 8.75A.75.75 0 013.75 8H4a8 8 0 018 8v.25a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75V16a6 6 0 00-6-6h-.25A.75.75 0 013 9.25v-.5zM7 15a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></a><button aria-label="Toggle Dark Mode" type="button" class="h-7 w-7 rounded p-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button></div><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-50 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">文章</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">标签</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">项目</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tool">工具</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/boilerplate">模板</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">关于</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div style="transform:translateX(-100%)" class="fixed top-0 left-0 h-1 w-full bg-primary-500 backdrop-blur-3xl transition-transform duration-150"></div><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-04-13T16:00:00.000Z">2022年4月14日星期四</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">使用 phaser3 从零实现一个战疫小游戏</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><div class=""><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img alt="avatar" src="/static/images/avatar.jpeg" width="38px" height="38px" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">作者</dt><dd class="text-gray-900 dark:text-gray-100">随风</dd></dl></li></ul></dd></dl><h2 class="pt-6 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400">目录</h2><ul class="py-4 text-sm font-medium leading-relaxed xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><li class="false"><a class="text-primary-500" href="#前言">前言</a></li><li class="false"><a class="text-primary-500" href="#使用技术栈">使用技术栈</a></li><li class="false"><a class="text-primary-500" href="#phaser-简介">Phaser 简介</a></li><li class="false"><a class="text-primary-500" href="#初始化工程">初始化工程</a></li><li class="false"><a class="text-primary-500" href="#初始化游戏">初始化游戏</a></li><li class="false"><a class="text-primary-500" href="#新建一个场景">新建一个场景</a></li><li class="false"><a class="text-primary-500" href="#创建角色">创建角色</a></li><li class="false"><a class="text-primary-500" href="#使用-tiled-画出瓦片地图">使用 Tiled 画出瓦片地图</a></li><li class="false"><a class="text-primary-500" href="#加载瓦片地图">加载瓦片地图</a></li><li class="false"><a class="text-primary-500" href="#碰撞检测">碰撞检测</a></li><li class="false"><a class="text-primary-500" href="#使用精灵图创建逐帧动画">使用精灵图创建逐帧动画</a></li><li class="false"><a class="text-primary-500" href="#创建怪物">创建怪物</a></li><li class="false"><a class="text-primary-500" href="#根据锚点渲染怪物">根据锚点渲染怪物</a></li><li class="false"><a class="text-primary-500" href="#事件通知">事件通知</a></li><li class="false"><a class="text-primary-500" href="#根据锚点显示食物">根据锚点显示食物</a></li><li class="false"><a class="text-primary-500" href="#文本显示">文本显示</a></li><li class="false"><a class="text-primary-500" href="#ui-显示">UI 显示</a></li><li class="false"><a class="text-primary-500" href="#部署">部署</a></li><li class="false"><a class="text-primary-500" href="#小结">小结</a></li><li class="false"><a class="text-primary-500" href="#最后">最后</a></li></ul></div><div class="xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none break-words pt-10 pb-8 dark:prose-dark"><h2 id="前言"><a href="#前言" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>前言</h2><p>在本文中，我将从零开发一个 H5 游戏，主要使用 phaser3 来制作的游戏。结合当下疫情的严峻形式，我也将一些元素融入到这款游戏中，同时希望疫情早日结束，早点摘下口罩，可以看到彼此脸上洋溢的笑容。</p><ul><li>元素一：出门要戴口罩</li><li>元素二：为生活打拼，是收集粮食</li><li>元素三：奋勇平博，要打死恶魔怪物，与各种黑势力做斗争</li></ul><p>单纯从这款游戏看，认为不是很好玩，因为我并没有设计过多的关卡，但看这篇文章，绝对是一篇很好的教程，通过阅读本篇文章，你可以掌握 H5 游戏开发的整体流程，从而也能够快速开发出一款类似的 RPC 游戏。让我们先来看下效果吧！</p><iframe src="https://game.runjs.cool/" width="100%" height="400"></iframe><p>演示地址：<a target="_blank" rel="noopener noreferrer" href="https://game.runjs.cool/">https://game.runjs.cool/</a></p><p>代码仓库：<a target="_blank" rel="noopener noreferrer" href="https://github.com/maqi1520/phaser3-game">https://github.com/maqi1520/phaser3-game</a></p><h2 id="使用技术栈"><a href="#使用技术栈" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用技术栈</h2><ul><li>Phaser: 游戏引擎</li><li>Vite: 项目脚手架，可快速启动 web 开发服务器，可以快速热更新</li><li>Typescript: 使用 ts 可以有非常强大类型提示功能，可以减少我们查 api 文档的次数</li></ul><h2 id="phaser-简介"><a href="#phaser-简介" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Phaser 简介</h2><p>Phaser 是一个开源的 JavaScript 2D 游戏开发框架。它使用了 Canvas 和 WebGL 来渲染我们的游戏，同时我们又不必直接使用 canvas 和 WebGL 的 api，它封装了大量时候游戏开发的类和方法，非常易于入门，对于那些希望使用 JS 来开发游戏的人来说，是一个很好的选择。</p><h2 id="初始化工程"><a href="#初始化工程" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>初始化工程</h2><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token function">yarn</span> create vite@latest game-phaser3 --template vanilla-ts
</span><span class="code-line">
</span><span class="code-line"><span class="token function">yarn</span> <span class="token function">add</span> phaser
</span><span class="code-line">
</span><span class="code-line"><span class="token class-name builtin">cd</span> game-phaser3
</span><span class="code-line">
</span><span class="code-line"><span class="token function">mkdir</span> public/assets src src/classes src/scenes
</span></code></pre></div><p>使用 <code>vite</code> 创建一个原生的 <code>typescript</code> 模板，并且安装<code>phaser</code>,</p><ul><li><code>assets</code> — 用于存放游戏素材，关于游戏素材，我们可以在游戏共享网站，如：<a target="_blank" rel="noopener noreferrer" href="https://itch.io/">itch.io</a> 上面下载。</li><li><code>classes</code> — 用于存放游戏角色怪物等单独的类</li><li><code>scenes</code> — 用于存放游戏场景</li></ul><h2 id="初始化游戏"><a href="#初始化游戏" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>初始化游戏</h2><p>接下来我们需要在 <code>src/index.ts</code> 中初始化一个游戏对象</p><div class="relative"><pre><code class="code-highlight language-typescript"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Game<span class="token punctuation">,</span> Types<span class="token punctuation">,</span> <span class="token constant">WEBGL</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;phaser&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> LoadingScene <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./scenes&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> gameConfig<span class="token operator">:</span> Types<span class="token punctuation">.</span>Core<span class="token punctuation">.</span>GameConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  type<span class="token operator">:</span> <span class="token constant">WEBGL</span><span class="token punctuation">,</span>
</span><span class="code-line">  parent<span class="token operator">:</span> <span class="token string">&#x27;app&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  backgroundColor<span class="token operator">:</span> <span class="token string">&#x27;#9bd4c3&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  scale<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    mode<span class="token operator">:</span> Scale<span class="token punctuation">.</span>ScaleModes<span class="token punctuation">.</span><span class="token constant">NONE</span><span class="token punctuation">,</span>
</span><span class="code-line">    width<span class="token operator">:</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span>
</span><span class="code-line">    height<span class="token operator">:</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  physics<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#x27;arcade&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    arcade<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      debug<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  render<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    antialiasGL<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    pixelArt<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  callbacks<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function function-variable">postBoot</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">sizeChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  canvasStyle<span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">display: block; width: 100%; height: 100%;</span><span class="token string template-punctuation">`</span></span><span class="token punctuation">,</span>
</span><span class="code-line">  autoFocus<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">  audio<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    disableWebAudio<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  scene<span class="token operator">:</span> <span class="token punctuation">[</span>LoadingScene<span class="token punctuation">,</span> GameScene<span class="token punctuation">,</span> UIScene<span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">window<span class="token punctuation">.</span>game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Game</span><span class="token punctuation">(</span>gameConfig<span class="token punctuation">)</span>
</span></code></pre></div><ul><li><p><code>type</code>： 游戏渲染类型，可以是 <code>CANVAS</code>、 <code>WEBGL</code> 或 <code>AUTO</code>，许多效果可能在 <code>CANVAS</code> 模式下不支持， 所以我们使用 <code>WEBGL</code></p></li><li><p><code>parent</code>: 游戏渲染 canvas 元素的父级 DOM ID</p></li><li><p><code>backgroundColor</code>：canvas 的背景颜色</p></li><li><p><code>scale</code>： 调整游戏画布大小的比例。</p></li><li><p><code>physics</code>：设定游戏物理引擎</p></li><li><p><code>render</code>：游戏渲染的附加属性</p></li><li><p><code>callbacks</code>：将在游戏初始化之前(preBoot)或之后(postBoot)触发的回调</p></li><li><p><code>canvasStyle</code>：canvas 元素的 CSS 样式</p></li><li><p><code>autoFocus</code>：游戏画布上的自动对焦</p></li><li><p><code>audio</code>： 游戏音频设置</p></li><li><p><code>scene</code>：游戏中要加载的场景列表。</p></li></ul><p>window 没有 game 对象，需要在 <code>vite-env.d.ts</code> 中扩展 window 对象</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">Window</span> <span class="token punctuation">{</span>
</span><span class="code-line">  game<span class="token operator">:</span> Phaser<span class="token punctuation">.</span>Game
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>添加一个方法，让浏览器缩放的时候可以自适应</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">sizeChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>game<span class="token punctuation">.</span>isBooted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      window<span class="token punctuation">.</span>game<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">      window<span class="token punctuation">.</span>game<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token string">&#x27;style&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">display: block; width: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">px; height: </span><span class="token interpolation"><span class="token punctuation interpolation-punctuation">${</span>window<span class="token punctuation">.</span>innerHeight<span class="token punctuation interpolation-punctuation">}</span></span><span class="token string">px;</span><span class="token string template-punctuation">`</span></span>
</span><span class="code-line">      <span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">window<span class="token punctuation">.</span><span class="token function function-variable">onresize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">sizeChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code></pre></div><h2 id="新建一个场景"><a href="#新建一个场景" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>新建一个场景</h2><p>游戏是有许多场景组成的，一款游戏至少添加一个场景，通常会把游戏场景分为三个 loading、game 和 UI</p><ul><li>loading 场景用于加载游戏资源</li><li>game 场景是游戏的主要部分，可以分为多个</li><li>UI 场景用于页面 UI 元素，文字提示等</li></ul><p>下面代码是以简单的场景实例</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Scene <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;phaser&#x27;</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">LoadingScene</span> <span class="token keyword">extends</span> <span class="token class-name">Scene</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#x27;loading-scene&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">init</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&#x27;assets/&#x27;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token string">&#x27;king&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;sprites/king.png&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">create</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&#x27;king&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">update</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> delta<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>场景也有生命周期函数</p><ul><li>init： 场景初始化执行</li><li>preload： 在场景加载前，需要加载什么资源</li><li>create： 场景被创建的时候触发</li><li>update：场景每个渲染帧更新时触发（大约每秒 60 帧）</li></ul><p>运行 <code>yarn dev</code> 启动，至此，你应该可以在浏览器看到如下效果</p><p><img alt="第一个场景" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/938534cf6faf412d8ec3ae1457e667a1~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="创建角色"><a href="#创建角色" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>创建角色</h2><p>场景搭建好了，接下来英雄就该出场了，建立 <code>src/classes/player.ts</code>文件</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Physics <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;phaser&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token keyword">extends</span> <span class="token class-name">Physics</span><span class="token punctuation">.</span>Arcade<span class="token punctuation">.</span>Sprite <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">private</span> cursors<span class="token operator">:</span> Phaser<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>Input<span class="token punctuation">.</span>Keyboard<span class="token punctuation">.</span>CursorKeys
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span>scene<span class="token operator">:</span> Phaser<span class="token punctuation">.</span>Scene<span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&#x27;king&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">    scene<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line">    scene<span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>cursors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>input<span class="token punctuation">.</span>keyboard<span class="token punctuation">.</span><span class="token function">createCursorKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">protected</span> <span class="token function">checkFlip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>scaleX <span class="token operator">=</span> <span class="token number">1</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setVelocity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>up<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">110</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>left<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">110</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkFlip</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>down<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">110</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>right<span class="token punctuation">.</span>isDown<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">.</span>velocity<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">110</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkFlip</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setOffset</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p><strong>键盘事件</strong></p><p>Player 继承<code>Physics.Arcade.Sprite</code>类，在实例化中传入坐标 x、 y 和资源 ID， 通过 <code>this.scene.input.keyboard.createCursorKeys</code> 获得键盘方向键，当方向键被按下时，改变 Player x 、y 方向上的速度。</p><p>在添加一个场景 game <code>src/scenes/game.ts</code></p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Scene <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;phaser&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Player <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../../classes/Player&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">GameScene</span> <span class="token keyword">extends</span> <span class="token class-name">Scene</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">private</span> player<span class="token operator">!</span><span class="token operator">:</span> Player
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#x27;game-scene&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>初始化一个英雄 PLayer，在 update 函数中调用 player 的 update 方法。</p><p>然后修改 loading 场景中的 create 方法，从 loading 场景过度到 game 场景。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;game-scene&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>至此，我们就可以通过键盘方向控制英雄了。 <img alt="2022-04-13 13-41-22.2022-04-13 13_42_23.gif" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/954dabb3ca2541d6b734133c5c675b7d~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="使用-tiled-画出瓦片地图"><a href="#使用-tiled-画出瓦片地图" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用 Tiled 画出瓦片地图</h2><p>接下来就是地图了， 我们先需要下载 Tiled （免费），来创建游戏地图</p><p><img alt="Tiled 创建地图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/159ad908f7a74adabbed1b0725f3bbd2~tplv-k3u1fbpfcp-watermark.image?"/></p><p>首先新建项目，图库层必须选择 CSV ，不然 phaser3 无法解析。</p><p><img alt="Tiled 创建地图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a54e588c961f4bae9a7ec2e82b83b92d~tplv-k3u1fbpfcp-watermark.image?"/></p><p>接下来建立图块集，注意必须要选择嵌入地图，不然也无法解析。</p><p><img alt="Tiled 创建地图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27b44b1b6ebb4ea88d59e38aa0b53def~tplv-k3u1fbpfcp-watermark.image?"/></p><p>Tiled 分为属性区，图层区和图块区， 可以先<code>commond+A</code>选择图块，然后通过图章工具和矩形工具等自由的设计游戏地图，</p><p>为了不让角色移动到地图外部，将图层分为<code>Ground</code>和 <code>Walls</code>。</p><p><img alt="Tiled 创建地图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93ed21f8658f45a4856eb90b9a21d075~tplv-k3u1fbpfcp-watermark.image?"/> 为了不让角色怪物等运动对象离开地图，我们徐要编辑图块属性。</p><p><img alt="Tiled 创建地图" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96327765339a4357a815ef609f27db2d~tplv-k3u1fbpfcp-watermark.image?"/> 在一些图块上设置自定义属性 <code>collides</code> 为 <code>true</code>，后面代码可以这个属性开启碰撞检测。</p><p><strong>添加怪物和食物的锚点</strong></p><p><img alt="Tiled 创建地图" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/684dcd2b31614cb7b3cda0fbc966c63c~tplv-k3u1fbpfcp-watermark.image?"/></p><p>右键新建对象层重命名成 <code>Enimes</code> 添加一些锚点，这些锚点位置可以在游戏中渲染成怪物的点，同理也需要添加一些食物的点。</p><p><img alt="Tiled 创建地图" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38b6148e346d4760a6c10ba4b33a7a6f~tplv-k3u1fbpfcp-watermark.image?"/></p><p>选择对象层，锚点可以修改名称，根据名称，我们可以渲染出不同的对象。</p><p>最后一步将文件导出成 JSON， 到我们的 assets 文件夹下，. <strong>文件 -&gt; 导出为 … -&gt; format .json.</strong> ，至此游戏题图创建成功！</p><h2 id="加载瓦片地图"><a href="#加载瓦片地图" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>加载瓦片地图</h2><p>地图设计好了，接下来就需要在游戏中渲染我们的地图。</p><p>首先在 loading 场景中 preload 方法中加载资源。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  key<span class="token operator">:</span> <span class="token string">&#x27;Grass&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">  url<span class="token operator">:</span> <span class="token string">&#x27;tilemaps/json/Grass.png&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">tilemapTiledJSON</span><span class="token punctuation">(</span><span class="token string">&#x27;tilemapGrass&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;tilemaps/json/Grass.json&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>load<span class="token punctuation">.</span><span class="token function">spritesheet</span><span class="token punctuation">(</span><span class="token string">&#x27;water&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;spritesheets/Water.png&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  frameWidth<span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
</span><span class="code-line">  frameHeight<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><p>然后在 game 中添加一个 <code>initMap</code> 方法，用于初始化地图</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">private</span> <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">   <span class="token comment">//添加水作为背景</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">tileSprite</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token string">&quot;water&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>map <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>make<span class="token punctuation">.</span><span class="token function">tilemap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">     key<span class="token operator">:</span> <span class="token string">&quot;tilemapGrass&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">     tileWidth<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
</span><span class="code-line">     tileHeight<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
</span><span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>tileset <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">addTilesetImage</span><span class="token punctuation">(</span><span class="token string">&quot;Grass&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Grass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 第一个参数是图块名称，第二个参数是图片的 key</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>groundLayer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">createLayer</span><span class="token punctuation">(</span><span class="token string">&quot;Ground&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tileset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>wallsLayer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">createLayer</span><span class="token punctuation">(</span><span class="token string">&quot;Walls&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tileset<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">   <span class="token comment">// 通过图块属性设置墙，碰撞属性开启</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>wallsLayer<span class="token punctuation">.</span><span class="token function">setCollisionByProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span> collides<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">   <span class="token comment">// 设置世界的边缘</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>world<span class="token punctuation">.</span><span class="token function">setBounds</span><span class="token punctuation">(</span>
</span><span class="code-line">     <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token keyword">this</span><span class="token punctuation">.</span>wallsLayer<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token keyword">this</span><span class="token punctuation">.</span>wallsLayer<span class="token punctuation">.</span>height
</span><span class="code-line">   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token punctuation">}</span>
</span></code></pre></div><p><strong>注意</strong>这里 <code>addTilesetImage</code> 的第一个名称必须是和设计时的图块名称相同。</p><p>然后在 create 方法中初始化地图。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>在 phaser 中,函数执行也有先后顺序，先执行的方法优先渲染，在底部。所以这里要先加载地图， 再初始化 Player 对象。</p><p>至此你可以看到一个英雄在游戏场景中了。</p><p><img alt="phaser 游戏效果" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e536822e221a4d2ba3c14d7275c67f91~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="碰撞检测"><a href="#碰撞检测" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>碰撞检测</h2><p>但是移动角色，角色会走到水中，因此我们就需要开启碰撞检测，</p><p>在 create 方法中，添加如下代码开启碰撞检测，这样英雄就无法通过键盘走出到水中。</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">physics</span><span class="token punctuation">.</span><span class="token property-access">add</span><span class="token punctuation">.</span><span class="token function property-access method">collider</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">player</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">wallsLayer</span><span class="token punctuation">)</span>
</span></code></pre></div><p>为了防止在设计地图时候，一些图块遗留设置 <code>collides</code> 属性，我们可以将碰撞的墙设置为高亮，这样可以方便调试.</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">private</span> <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token operator">...</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showDebugWalls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line"><span class="token keyword">private</span> <span class="token function">showDebugWalls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> debugGraphics <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAlpha</span><span class="token punctuation">(</span><span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>wallsLayer<span class="token punctuation">.</span><span class="token function">renderDebug</span><span class="token punctuation">(</span>debugGraphics<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">    tileColor<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    collidingTileColor<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Phaser</span><span class="token punctuation">.</span>Display<span class="token punctuation">.</span><span class="token function">Color</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">234</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>效果如下:</p><p><img alt="phaser 游戏效果" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ae89c2265524326a2f662905646b222~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="使用精灵图创建逐帧动画"><a href="#使用精灵图创建逐帧动画" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用精灵图创建逐帧动画</h2><p>当前我们的英雄是静态的，想让我们的英雄移动的时候跑起来，我们可以使用精灵图，先来看下我们的精灵图，特意给精灵图加上了<strong>口罩</strong>。</p><p><img alt="phaser 游戏效果" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76108f2f7a6348fcb488165f7f6f4a3e~tplv-k3u1fbpfcp-watermark.image?"/></p><p>还需要加载一个描述精灵图的 json ，我们一起来看下 json 的数据结构</p><p><img alt="phaser 游戏效果" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f9b3926ac3447dbaa3be8ed844d2ee2~tplv-k3u1fbpfcp-watermark.image?"/></p><p>JSON 描述了精灵图每一帧的位置和中心点，当然这个 JSON 不是手写的，我们可以借助 <code>Texture Packer</code> 这个工具打包生成。</p><p>在 preload 中加载精灵图和 json</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line">···
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">load</span><span class="token punctuation">.</span><span class="token function property-access method">atlas</span><span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token string">&quot;a-king&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token string">&quot;spritesheets/a-king_withmask.png&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token string">&quot;spritesheets/a-king_atlas.json&quot;</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">···
</span></code></pre></div><p>然后在 player.js 中加载初始化动画</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token function">constructor</span><span class="token punctuation">(</span>scene<span class="token operator">:</span> Phaser<span class="token punctuation">.</span>Scene<span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token operator">...</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initAnimations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"> <span class="token keyword">private</span> <span class="token function">initAnimations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">     key<span class="token operator">:</span> <span class="token string">&quot;run&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">     frames<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">generateFrameNames</span><span class="token punctuation">(</span><span class="token string">&quot;a-king&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">       prefix<span class="token operator">:</span> <span class="token string">&quot;run-&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">       end<span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">     frameRate<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
</span><span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">   <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">     key<span class="token operator">:</span> <span class="token string">&quot;attack&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">     frames<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>anims<span class="token punctuation">.</span><span class="token function">generateFrameNames</span><span class="token punctuation">(</span><span class="token string">&quot;a-king&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">       prefix<span class="token operator">:</span> <span class="token string">&quot;attack-&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">       end<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">     frameRate<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
</span><span class="code-line">   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token punctuation">}</span>
</span></code></pre></div><p>最后在 update 函数中，待方向键按下就调用动画。</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function property-access method">setVelocity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cursors</span><span class="token punctuation">.</span><span class="token property-access">up</span><span class="token punctuation">.</span><span class="token property-access">isDown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token property-access">velocity</span><span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">110</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">anims</span><span class="token punctuation">.</span><span class="token property-access">isPlaying</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">anims</span><span class="token punctuation">.</span><span class="token function property-access method">play</span><span class="token punctuation">(</span><span class="token string">&quot;run&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator spread">...</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cursors</span><span class="token punctuation">.</span><span class="token property-access">space</span><span class="token punctuation">.</span><span class="token property-access">isDown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">anims</span><span class="token punctuation">.</span><span class="token function property-access method">play</span><span class="token punctuation">(</span><span class="token string">&quot;attack&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>至此角色的动画成功！</p><p><img alt="2022-04-13 16-49-25.2022-04-13 16_50_09.gif" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/440921ce4218453c977264f94fa77f87~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="创建怪物"><a href="#创建怪物" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>创建怪物</h2><p>如同 Player 一样，我们可以创建一个相同的类，命名成 Enemy，用来写怪物的逻辑。只不过需要加载不同的精灵图资源。 还有一点不同的是，怪物的行动不是由键盘控制的，而是自动的。所以我们需要实现下怪物自动跑的逻辑。</p><p>怪物自动运动主要有以下两点：</p><ul><li>怪物未发现角色的时候，会在原地走来走去。</li><li>发现英雄的时候怪会追英雄，其<strong>原理</strong>就是判断怪物和玩家的距离，小于一定值，就设置下怪物的移动速度。</li></ul><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token constant">UP</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token constant">DOWN</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token constant">LEFT</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token constant">RIGHT</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token comment">//  随机生成不同的方向</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable">randomDirection</span> <span class="token operator">=</span> <span class="token punctuation">(</span>exclude<span class="token operator">:</span> Direction<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">let</span> newDirection <span class="token operator">=</span> Phaser<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">while</span> <span class="token punctuation">(</span>newDirection <span class="token operator">===</span> exclude<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    newDirection <span class="token operator">=</span> Phaser<span class="token punctuation">.</span>Math<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> newDirection<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token operator">...</span>
</span><span class="code-line"><span class="token comment">// 每隔2秒改变怪物行走的方向</span>
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>moveEvent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>time<span class="token punctuation">.</span><span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">      delay<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token function function-variable">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>direction <span class="token operator">=</span> <span class="token function">randomDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>direction<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      loop<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token operator">...</span>
</span></code></pre></div><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">private</span> <span class="token constant">AGRESSOR_RADIUS</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">preUpdate</span><span class="token punctuation">(</span>t<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> dt<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">preUpdate</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> dt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 距离小于100 ，设置一个速度</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>
</span><span class="code-line">      Math<span class="token punctuation">.</span>Distance<span class="token punctuation">.</span><span class="token function">BetweenPoints</span><span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>y <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">AGRESSOR_RADIUS</span>
</span><span class="code-line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setVelocityX</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setVelocityY</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">       <span class="token comment">// 大于100 在上下左右随机走到</span>
</span><span class="code-line">      <span class="token keyword">const</span> speed <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>direction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">case</span> Direction<span class="token punctuation">.</span><span class="token constant">UP</span><span class="token operator">:</span>
</span><span class="code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setVelocity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">          <span class="token keyword">break</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token keyword">case</span> Direction<span class="token punctuation">.</span><span class="token constant">DOWN</span><span class="token operator">:</span>
</span><span class="code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setVelocity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> speed<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">          <span class="token keyword">break</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token keyword">case</span> Direction<span class="token punctuation">.</span><span class="token constant">LEFT</span><span class="token operator">:</span>
</span><span class="code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setVelocity</span><span class="token punctuation">(</span><span class="token operator">-</span>speed<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">          <span class="token keyword">break</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token keyword">case</span> Direction<span class="token punctuation">.</span><span class="token constant">RIGHT</span><span class="token operator">:</span>
</span><span class="code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setVelocity</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">          <span class="token keyword">break</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span></code></pre></div><p>在 <code>preUpdate</code> 函数中设置怪物自动走动的逻辑，距离小于 100 ，设置朝英雄一个速度，大于 100，随机 4 个方向自动走动。</p><h2 id="根据锚点渲染怪物"><a href="#根据锚点渲染怪物" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>根据锚点渲染怪物</h2><p>接下来我们需要根据地图上创建的锚点实例化怪物。在 Game 场景中添加一个 <code>initEnemies</code> 方法用于初始化怪物。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">private</span> <span class="token function">initEnemies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line"><span class="token comment">//  过去地图上的 EnemyPoint 点</span>
</span><span class="code-line">    <span class="token keyword">const</span> enemiesPoints <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">filterObjects</span><span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token string">&quot;Enemies&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;EnemyPoint&quot;</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 实例化怪物</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>enemies <span class="token operator">=</span> enemiesPoints<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token punctuation">(</span>enemyPoint<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
</span><span class="code-line">        <span class="token keyword">new</span> <span class="token class-name">Enemy</span><span class="token punctuation">(</span>
</span><span class="code-line">          <span class="token keyword">this</span><span class="token punctuation">,</span>
</span><span class="code-line">          enemyPoint<span class="token punctuation">.</span>x <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">          enemyPoint<span class="token punctuation">.</span>y <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token string">&quot;lizard&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span>player
</span><span class="code-line">        <span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">//  怪物和墙增加碰撞检查</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">collider</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>enemies<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wallsLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 怪物和怪物增加碰撞检查</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">collider</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>enemies<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>enemies<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 怪物和角色增加碰撞检查</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">collider</span><span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>enemies<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token comment">//碰撞后的回调，角色收到伤害 -1</span>
</span><span class="code-line">        <span class="token punctuation">(</span>obj1 <span class="token keyword">as</span> Player<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDamage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token keyword">this</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre></div><p>这里需要注意碰撞检查和碰撞后的回调 到此，我们可以在地图上创建角色和怪物，并且怪物可以攻击英雄了，但我们的英雄攻击怪物，却打不死。</p><p><img alt="2022-04-13 17-54-50.2022-04-13 17_55_52.gif" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c9d1c44d003b4693bad6a05d9fba5f13~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="事件通知"><a href="#事件通知" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>事件通知</h2><p>因此我们需要给怪物添加事件监听，当怪物和角色的距离小于角色的宽度，说明击中</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function function-variable">attackHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>
</span><span class="code-line">    Math<span class="token punctuation">.</span>Distance<span class="token punctuation">.</span><span class="token function">BetweenPoints</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span>width
</span><span class="code-line">  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">disableBody</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// 停止怪物对象主体，但不消失</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>time<span class="token punctuation">.</span><span class="token function">delayedCall</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 300 毫秒后消失</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// EVENTS</span>
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>attack<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>attackHandler<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">//销毁后取消监听</span>
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#x27;destroy&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>attack<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>attackHandler<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><p>当按需键盘空格键，就播放 Player 的工具动画，并且发送一个全局事件</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cursors</span><span class="token punctuation">.</span><span class="token property-access">space</span><span class="token punctuation">.</span><span class="token property-access">isDown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">anims</span><span class="token punctuation">.</span><span class="token function property-access method">play</span><span class="token punctuation">(</span><span class="token string">&#x27;attack&#x27;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">scene</span><span class="token punctuation">.</span><span class="token property-access">game</span><span class="token punctuation">.</span><span class="token property-access">events</span><span class="token punctuation">.</span><span class="token function property-access method">emit</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span><span class="token property-access">attack</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="根据锚点显示食物"><a href="#根据锚点显示食物" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>根据锚点显示食物</h2><p>与渲染怪物类似，我们可以在地图上渲染一些食物。</p><p><img alt="phaser 游戏效果" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d12bfc4927b84e739ab3d93f85c66b6b~tplv-k3u1fbpfcp-watermark.image?"/></p><p>这些素材是通过 iconfont 上下载的，下载后通过 figma 拼接成精灵图。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">private</span> <span class="token function">initChests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> chestPoints <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">filterObjects</span><span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token string">&quot;Chests&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;ChestPoint&quot;</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>chests <span class="token operator">=</span> chestPoints<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>chestPoint<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">sprite</span><span class="token punctuation">(</span>
</span><span class="code-line">          chestPoint<span class="token punctuation">.</span>x <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">          chestPoint<span class="token punctuation">.</span>y <span class="token keyword">as</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token string">&quot;food&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>chests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>chest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>physics<span class="token punctuation">.</span>add<span class="token punctuation">.</span><span class="token function">overlap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>player<span class="token punctuation">,</span> chest<span class="token punctuation">,</span> <span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>chestLoot<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        obj2<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre></div><p>同怪物一样根据锚点先渲染出食物，不同的是当英雄和食物碰撞检测的回调不同，当英雄与食物重合，玩家可以获得 10 分</p><h2 id="文本显示"><a href="#文本显示" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>文本显示</h2><p>现在让我们在角色头部上方显示一个 HP 值。</p><div class="relative"><pre><code class="code-highlight language-js"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Text</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;./text&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token operator spread">...</span>
</span><span class="code-line"><span class="token keyword">private</span> <span class="token literal-property property">hpValue</span><span class="token operator">:</span> <span class="token maybe-class-name">Text</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token operator spread">...</span>
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hpValue</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">scene</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">height</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hp</span><span class="token punctuation">.</span><span class="token function property-access method">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token function property-access method">setFontSize</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">.</span><span class="token function property-access method">setOrigin</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token operator spread">...</span>
</span><span class="code-line"><span class="token function property-access method">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token operator spread">...</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hpValue</span><span class="token punctuation">.</span><span class="token function property-access method">setPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">y</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">height</span> <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hpValue</span><span class="token punctuation">.</span><span class="token function property-access method">setOrigin</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token operator spread">...</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token function">getDamage</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function property-access method">getDamage</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hpValue</span><span class="token punctuation">.</span><span class="token function property-access method">setText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">hp</span><span class="token punctuation">.</span><span class="token function property-access method">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>现在 HP 值将显示在游戏角色的上方，在 update 方法中，我们更新了 HP 文本值的位置，这样即使 PLayer 移动也不会有问题。</p><p><img alt="phaser 游戏效果" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c0302c22626401ba54c45237186af6e~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="ui-显示"><a href="#ui-显示" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>UI 显示</h2><p>最后我们来添加一个 UI 场景，用于显示系统提示。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Scene <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;phaser&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">EVENTS_NAME</span><span class="token punctuation">,</span> GameStatus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../../consts&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Score<span class="token punctuation">,</span> ScoreOperations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../../classes/score&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Text <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../../classes/text&#x27;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> gameConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../../&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UIScene</span> <span class="token keyword">extends</span> <span class="token class-name">Scene</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">private</span> score<span class="token operator">!</span><span class="token operator">:</span> Score
</span><span class="code-line">  <span class="token keyword">private</span> gameEndPhrase<span class="token operator">!</span><span class="token operator">:</span> Text
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">private</span> <span class="token function function-variable">chestLootHandler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
</span><span class="code-line">  <span class="token keyword">private</span> <span class="token function function-variable">gameEndHandler</span><span class="token operator">:</span> <span class="token punctuation">(</span>status<span class="token operator">:</span> GameStatus<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#x27;ui-scene&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function function-variable">chestLootHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token punctuation">.</span><span class="token function">changeValue</span><span class="token punctuation">(</span>ScoreOperations<span class="token punctuation">.</span><span class="token constant">INCREASE</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> gameConfig<span class="token punctuation">.</span>winScore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>gameEnd<span class="token punctuation">,</span> <span class="token string">&#x27;win&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function function-variable">gameEndHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>cameras<span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token string">&#x27;rgba(0,0,0,0.6)&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token string">&#x27;game-scene&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>gameEndPhrase <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">,</span>
</span><span class="code-line">        status <span class="token operator">===</span> GameStatus<span class="token punctuation">.</span><span class="token constant">LOSE</span> <span class="token operator">?</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">失败!\n\n点击屏幕重新开始</span><span class="token string template-punctuation">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token string template-punctuation">`</span><span class="token string">胜利!\n\n点击屏幕重新开始</span><span class="token string template-punctuation">`</span></span>
</span><span class="code-line">      <span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">setAlign</span><span class="token punctuation">(</span><span class="token string">&#x27;center&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>status <span class="token operator">===</span> GameStatus<span class="token punctuation">.</span><span class="token constant">LOSE</span> <span class="token operator">?</span> <span class="token string">&#x27;#ff0000&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;#ffffff&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>gameEndPhrase<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameEndPhrase<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.4</span>
</span><span class="code-line">      <span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#x27;pointerdown&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>chestLoot<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>chestLootHandler<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>gameEnd<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameEndHandler<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#x27;game-scene&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Score</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">private</span> <span class="token function">initListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>chestLoot<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>chestLootHandler<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token constant">EVENTS_NAME</span><span class="token punctuation">.</span>gameEnd<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gameEndHandler<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>在 loading 场景中和 game 场景一起加载。</p><div class="relative"><pre><code class="language-ts code-highlight"><span class="code-line">···
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;game-scene&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;ui-scene&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">···
</span></code></pre></div><p>这样等英雄的 HP 只为 0 时候，屏幕会显示“失败”</p><p><img alt="phaser 游戏效果" src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ddc35de0dc043d8a664f9aaf56c3763~tplv-k3u1fbpfcp-watermark.image?"/></p><h2 id="部署"><a href="#部署" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>部署</h2><p>我使用 vercel 部署，只需要上传 github，vercel 就会自动部署，然后域名 CNAME 到 cname.vercel-dns.com 就可以了。</p><p>演示地址：<a target="_blank" rel="noopener noreferrer" href="https://game.runjs.cool/">https://game.runjs.cool/</a></p><p>代码仓库：<a target="_blank" rel="noopener noreferrer" href="https://github.com/maqi1520/phaser3-game">https://github.com/maqi1520/phaser3-game</a></p><p>同理我还部署了以下应用</p><p><a target="_blank" rel="noopener noreferrer" href="https://editor.runjs.cool/">https://editor.runjs.cool/</a> MDX 排版编辑器 <a target="_blank" rel="noopener noreferrer" href="https://cv.runjs.cool/">https://cv.runjs.cool/</a> 在线简历生成器 <a target="_blank" rel="noopener noreferrer" href="https://low-code.runjs.cool/">https://low-code.runjs.cool/</a> 简易版低代码平台 并且都是开源的，若对你有帮助记得点个 star，感谢！</p><h2 id="小结"><a href="#小结" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>小结</h2><p>至此 Phaser 3 小游戏开发完成了 90%， 剩下的 10 % 需要我们继续打磨和优化，这样才可以让游戏更好玩，还需要设计更多的关卡，通过关卡了来让用户更有成就感。通过本文，我们从零实现了一个 Phaser.js 开发 H5 游戏。包括精灵图，精灵表，设计地图，动画、碰撞检查、事件通知等。</p><p>相信通过以上的学习，在以后的工作中，对类似的 H5 游戏，有一定认知，并且能够快速开发出一款小游戏。</p><h2 id="最后"><a href="#最后" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>最后</h2><p>感谢<a target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/2955079655898093/posts" title="https://juejin.cn/user/2955079655898093/posts">@大帅老猿</a>帮忙设计的口罩精灵图， 大帅还创建了“猿创营”，群里有很多开发大佬可以互相帮忙答疑和交流技术，同时大帅还会分享做外包，搞副业等，感兴趣的小伙伴可以留言“入群”。</p><p>以上就是本文全部内容，希望这篇文章对大家有所帮助，也可以参考我往期的文章或者在评论区交流你的想法和心得，欢迎一起探索前端。</p><p>本文首发掘金平台，来源<a target="_blank" rel="noopener noreferrer" href="https://maqib.cn/blog/phaser3-game">小马博客</a></p></div><div class="border-t border-gray-200 pt-6 pb-6 text-sm text-gray-700 dark:border-gray-700 dark:text-gray-300"><div class="mb-3"><img alt="runjs-cool" width="384" height="140" src="/static/images/runjs-cool.webp"/></div><span>关注微信公众号，获取最新原创文章（首发）</span><a target="_blank" rel="noopener noreferrer" href="https://github.com/balac2015/blob/main/data/blog/phaser3-game.md">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">标签</h2><div class="mt-3 flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/%E6%B8%B8%E6%88%8F">游戏</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">上一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/node-reptile">我用 nodejs 爬了一万多张小姐姐壁纸</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">下一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/svg-404">SVG + 动画 实现一个有个性的404页面</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← 返回文章列表</a></div></footer></div></div></article></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var i=a=\u003et(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),y=(a,s)=\u003e{for(var c in s)t(a,c,{get:s[c],enumerable:!0})},o=(a,s,c,e)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let l of m(s))!N.call(a,l)\u0026\u0026(c||l!==\"default\")\u0026\u0026t(a,l,{get:()=\u003es[l],enumerable:!(e=h(s,l))||e.enumerable});return a},g=(a,s)=\u003eo(i(t(a!=null?d(u(a)):{},\"default\",!s\u0026\u0026a\u0026\u0026a.__esModule?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a),w=(a=\u003e(s,c)=\u003ea\u0026\u0026a.get(s)||(c=o(i({}),s,1),a\u0026\u0026a.set(s,c),c))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var r=k((E,p)=\u003e{p.exports=_jsx_runtime});var j={};y(j,{default:()=\u003ev,frontmatter:()=\u003ef});var n=g(r()),f={title:\"\\u4F7F\\u7528 phaser3 \\u4ECE\\u96F6\\u5B9E\\u73B0\\u4E00\\u4E2A\\u6218\\u75AB\\u5C0F\\u6E38\\u620F\",date:\"2022/4/14\",lastmod:\"2022/4/14\",tags:[\"\\u6E38\\u620F\"],draft:!1,summary:\"\",images:[],authors:[\"default\"],layout:\"PostLayout\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\",img:\"img\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"\\u524D\\u8A00\",children:[(0,n.jsx)(e.a,{href:\"#\\u524D\\u8A00\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u524D\\u8A00\"]}),(0,n.jsx)(e.p,{children:\"\\u5728\\u672C\\u6587\\u4E2D\\uFF0C\\u6211\\u5C06\\u4ECE\\u96F6\\u5F00\\u53D1\\u4E00\\u4E2A H5 \\u6E38\\u620F\\uFF0C\\u4E3B\\u8981\\u4F7F\\u7528 phaser3 \\u6765\\u5236\\u4F5C\\u7684\\u6E38\\u620F\\u3002\\u7ED3\\u5408\\u5F53\\u4E0B\\u75AB\\u60C5\\u7684\\u4E25\\u5CFB\\u5F62\\u5F0F\\uFF0C\\u6211\\u4E5F\\u5C06\\u4E00\\u4E9B\\u5143\\u7D20\\u878D\\u5165\\u5230\\u8FD9\\u6B3E\\u6E38\\u620F\\u4E2D\\uFF0C\\u540C\\u65F6\\u5E0C\\u671B\\u75AB\\u60C5\\u65E9\\u65E5\\u7ED3\\u675F\\uFF0C\\u65E9\\u70B9\\u6458\\u4E0B\\u53E3\\u7F69\\uFF0C\\u53EF\\u4EE5\\u770B\\u5230\\u5F7C\\u6B64\\u8138\\u4E0A\\u6D0B\\u6EA2\\u7684\\u7B11\\u5BB9\\u3002\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"\\u5143\\u7D20\\u4E00\\uFF1A\\u51FA\\u95E8\\u8981\\u6234\\u53E3\\u7F69\"}),(0,n.jsx)(e.li,{children:\"\\u5143\\u7D20\\u4E8C\\uFF1A\\u4E3A\\u751F\\u6D3B\\u6253\\u62FC\\uFF0C\\u662F\\u6536\\u96C6\\u7CAE\\u98DF\"}),(0,n.jsx)(e.li,{children:\"\\u5143\\u7D20\\u4E09\\uFF1A\\u594B\\u52C7\\u5E73\\u535A\\uFF0C\\u8981\\u6253\\u6B7B\\u6076\\u9B54\\u602A\\u7269\\uFF0C\\u4E0E\\u5404\\u79CD\\u9ED1\\u52BF\\u529B\\u505A\\u6597\\u4E89\"})]}),(0,n.jsx)(e.p,{children:\"\\u5355\\u7EAF\\u4ECE\\u8FD9\\u6B3E\\u6E38\\u620F\\u770B\\uFF0C\\u8BA4\\u4E3A\\u4E0D\\u662F\\u5F88\\u597D\\u73A9\\uFF0C\\u56E0\\u4E3A\\u6211\\u5E76\\u6CA1\\u6709\\u8BBE\\u8BA1\\u8FC7\\u591A\\u7684\\u5173\\u5361\\uFF0C\\u4F46\\u770B\\u8FD9\\u7BC7\\u6587\\u7AE0\\uFF0C\\u7EDD\\u5BF9\\u662F\\u4E00\\u7BC7\\u5F88\\u597D\\u7684\\u6559\\u7A0B\\uFF0C\\u901A\\u8FC7\\u9605\\u8BFB\\u672C\\u7BC7\\u6587\\u7AE0\\uFF0C\\u4F60\\u53EF\\u4EE5\\u638C\\u63E1 H5 \\u6E38\\u620F\\u5F00\\u53D1\\u7684\\u6574\\u4F53\\u6D41\\u7A0B\\uFF0C\\u4ECE\\u800C\\u4E5F\\u80FD\\u591F\\u5FEB\\u901F\\u5F00\\u53D1\\u51FA\\u4E00\\u6B3E\\u7C7B\\u4F3C\\u7684 RPC \\u6E38\\u620F\\u3002\\u8BA9\\u6211\\u4EEC\\u5148\\u6765\\u770B\\u4E0B\\u6548\\u679C\\u5427\\uFF01\"}),(0,n.jsx)(\"iframe\",{src:\"https://game.runjs.cool/\",width:\"100%\",height:\"400\"}),(0,n.jsxs)(e.p,{children:[\"\\u6F14\\u793A\\u5730\\u5740\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://game.runjs.cool/\",children:\"https://game.runjs.cool/\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u4EE3\\u7801\\u4ED3\\u5E93\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://github.com/maqi1520/phaser3-game\",children:\"https://github.com/maqi1520/phaser3-game\"})]}),(0,n.jsxs)(e.h2,{id:\"\\u4F7F\\u7528\\u6280\\u672F\\u6808\",children:[(0,n.jsx)(e.a,{href:\"#\\u4F7F\\u7528\\u6280\\u672F\\u6808\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528\\u6280\\u672F\\u6808\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"Phaser: \\u6E38\\u620F\\u5F15\\u64CE\"}),(0,n.jsx)(e.li,{children:\"Vite: \\u9879\\u76EE\\u811A\\u624B\\u67B6\\uFF0C\\u53EF\\u5FEB\\u901F\\u542F\\u52A8 web \\u5F00\\u53D1\\u670D\\u52A1\\u5668\\uFF0C\\u53EF\\u4EE5\\u5FEB\\u901F\\u70ED\\u66F4\\u65B0\"}),(0,n.jsx)(e.li,{children:\"Typescript: \\u4F7F\\u7528 ts \\u53EF\\u4EE5\\u6709\\u975E\\u5E38\\u5F3A\\u5927\\u7C7B\\u578B\\u63D0\\u793A\\u529F\\u80FD\\uFF0C\\u53EF\\u4EE5\\u51CF\\u5C11\\u6211\\u4EEC\\u67E5 api \\u6587\\u6863\\u7684\\u6B21\\u6570\"})]}),(0,n.jsxs)(e.h2,{id:\"phaser-\\u7B80\\u4ECB\",children:[(0,n.jsx)(e.a,{href:\"#phaser-\\u7B80\\u4ECB\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Phaser \\u7B80\\u4ECB\"]}),(0,n.jsx)(e.p,{children:\"Phaser \\u662F\\u4E00\\u4E2A\\u5F00\\u6E90\\u7684 JavaScript 2D \\u6E38\\u620F\\u5F00\\u53D1\\u6846\\u67B6\\u3002\\u5B83\\u4F7F\\u7528\\u4E86 Canvas \\u548C WebGL \\u6765\\u6E32\\u67D3\\u6211\\u4EEC\\u7684\\u6E38\\u620F\\uFF0C\\u540C\\u65F6\\u6211\\u4EEC\\u53C8\\u4E0D\\u5FC5\\u76F4\\u63A5\\u4F7F\\u7528 canvas \\u548C WebGL \\u7684 api\\uFF0C\\u5B83\\u5C01\\u88C5\\u4E86\\u5927\\u91CF\\u65F6\\u5019\\u6E38\\u620F\\u5F00\\u53D1\\u7684\\u7C7B\\u548C\\u65B9\\u6CD5\\uFF0C\\u975E\\u5E38\\u6613\\u4E8E\\u5165\\u95E8\\uFF0C\\u5BF9\\u4E8E\\u90A3\\u4E9B\\u5E0C\\u671B\\u4F7F\\u7528 JS \\u6765\\u5F00\\u53D1\\u6E38\\u620F\\u7684\\u4EBA\\u6765\\u8BF4\\uFF0C\\u662F\\u4E00\\u4E2A\\u5F88\\u597D\\u7684\\u9009\\u62E9\\u3002\"}),(0,n.jsxs)(e.h2,{id:\"\\u521D\\u59CB\\u5316\\u5DE5\\u7A0B\",children:[(0,n.jsx)(e.a,{href:\"#\\u521D\\u59CB\\u5316\\u5DE5\\u7A0B\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u521D\\u59CB\\u5316\\u5DE5\\u7A0B\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"yarn\"}),` create vite@latest game-phaser3 --template vanilla-ts\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"yarn\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"add\"}),` phaser\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token class-name builtin\",children:\"cd\"}),` game-phaser3\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"mkdir\"}),` public/assets src src/classes src/scenes\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"vite\"}),\" \\u521B\\u5EFA\\u4E00\\u4E2A\\u539F\\u751F\\u7684 \",(0,n.jsx)(e.code,{children:\"typescript\"}),\" \\u6A21\\u677F\\uFF0C\\u5E76\\u4E14\\u5B89\\u88C5\",(0,n.jsx)(e.code,{children:\"phaser\"}),\",\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"assets\"}),\"\\xA0\\u2014 \\u7528\\u4E8E\\u5B58\\u653E\\u6E38\\u620F\\u7D20\\u6750\\uFF0C\\u5173\\u4E8E\\u6E38\\u620F\\u7D20\\u6750\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u6E38\\u620F\\u5171\\u4EAB\\u7F51\\u7AD9\\uFF0C\\u5982\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://itch.io/\",children:\"itch.io\"}),\" \\u4E0A\\u9762\\u4E0B\\u8F7D\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"classes\"}),\"\\xA0\\u2014 \\u7528\\u4E8E\\u5B58\\u653E\\u6E38\\u620F\\u89D2\\u8272\\u602A\\u7269\\u7B49\\u5355\\u72EC\\u7684\\u7C7B\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"scenes\"}),\"\\xA0\\u2014 \\u7528\\u4E8E\\u5B58\\u653E\\u6E38\\u620F\\u573A\\u666F\"]})]}),(0,n.jsxs)(e.h2,{id:\"\\u521D\\u59CB\\u5316\\u6E38\\u620F\",children:[(0,n.jsx)(e.a,{href:\"#\\u521D\\u59CB\\u5316\\u6E38\\u620F\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u521D\\u59CB\\u5316\\u6E38\\u620F\"]}),(0,n.jsxs)(e.p,{children:[\"\\u63A5\\u4E0B\\u6765\\u6211\\u4EEC\\u9700\\u8981\\u5728 \",(0,n.jsx)(e.code,{children:\"src/index.ts\"}),\" \\u4E2D\\u521D\\u59CB\\u5316\\u4E00\\u4E2A\\u6E38\\u620F\\u5BF9\\u8C61\"]}),(0,n.jsx)(e.pre,{className:\"language-typescript\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-typescript\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" Types\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"WEBGL\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'phaser'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" LoadingScene \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./scenes'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" gameConfig\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Types\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Core\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"GameConfig \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  type\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"WEBGL\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  parent\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'app'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  backgroundColor\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'#9bd4c3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  scale\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    mode\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Scale\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ScaleModes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"NONE\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    width\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerWidth\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    height\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerHeight\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  physics\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'arcade'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    arcade\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      debug\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  render\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    antialiasGL\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    pixelArt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  callbacks\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"postBoot\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"sizeChanged\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  canvasStyle\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"display: block; width: 100%; height: 100%;\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  autoFocus\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  audio\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    disableWebAudio\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  scene\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"LoadingScene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" GameScene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" UIScene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Game\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"gameConfig\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"type\"}),\"\\uFF1A \\u6E38\\u620F\\u6E32\\u67D3\\u7C7B\\u578B\\uFF0C\\u53EF\\u4EE5\\u662F \",(0,n.jsx)(e.code,{children:\"CANVAS\"}),\"\\u3001 \",(0,n.jsx)(e.code,{children:\"WEBGL\"}),\" \\u6216 \",(0,n.jsx)(e.code,{children:\"AUTO\"}),\"\\uFF0C\\u8BB8\\u591A\\u6548\\u679C\\u53EF\\u80FD\\u5728 \",(0,n.jsx)(e.code,{children:\"CANVAS\"}),\" \\u6A21\\u5F0F\\u4E0B\\u4E0D\\u652F\\u6301\\uFF0C \\u6240\\u4EE5\\u6211\\u4EEC\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"WEBGL\"})]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"parent\"}),\": \\u6E38\\u620F\\u6E32\\u67D3 canvas \\u5143\\u7D20\\u7684\\u7236\\u7EA7 DOM ID\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"backgroundColor\"}),\"\\uFF1Acanvas \\u7684\\u80CC\\u666F\\u989C\\u8272\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"scale\"}),\"\\uFF1A \\u8C03\\u6574\\u6E38\\u620F\\u753B\\u5E03\\u5927\\u5C0F\\u7684\\u6BD4\\u4F8B\\u3002\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"physics\"}),\"\\uFF1A\\u8BBE\\u5B9A\\u6E38\\u620F\\u7269\\u7406\\u5F15\\u64CE\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"render\"}),\"\\uFF1A\\u6E38\\u620F\\u6E32\\u67D3\\u7684\\u9644\\u52A0\\u5C5E\\u6027\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"callbacks\"}),\"\\uFF1A\\u5C06\\u5728\\u6E38\\u620F\\u521D\\u59CB\\u5316\\u4E4B\\u524D(preBoot)\\u6216\\u4E4B\\u540E(postBoot)\\u89E6\\u53D1\\u7684\\u56DE\\u8C03\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"canvasStyle\"}),\"\\uFF1Acanvas \\u5143\\u7D20\\u7684 CSS \\u6837\\u5F0F\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"autoFocus\"}),\"\\uFF1A\\u6E38\\u620F\\u753B\\u5E03\\u4E0A\\u7684\\u81EA\\u52A8\\u5BF9\\u7126\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"audio\"}),\"\\uFF1A \\u6E38\\u620F\\u97F3\\u9891\\u8BBE\\u7F6E\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"scene\"}),\"\\uFF1A\\u6E38\\u620F\\u4E2D\\u8981\\u52A0\\u8F7D\\u7684\\u573A\\u666F\\u5217\\u8868\\u3002\"]})})]}),(0,n.jsxs)(e.p,{children:[\"window \\u6CA1\\u6709 game \\u5BF9\\u8C61\\uFF0C\\u9700\\u8981\\u5728 \",(0,n.jsx)(e.code,{children:\"vite-env.d.ts\"}),\" \\u4E2D\\u6269\\u5C55 window \\u5BF9\\u8C61\"]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Window\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  game\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Phaser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`Game\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u6DFB\\u52A0\\u4E00\\u4E2A\\u65B9\\u6CD5\\uFF0C\\u8BA9\\u6D4F\\u89C8\\u5668\\u7F29\\u653E\\u7684\\u65F6\\u5019\\u53EF\\u4EE5\\u81EA\\u9002\\u5E94\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"sizeChanged\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"isBooted\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setTimeout\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scale\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"resize\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerWidth\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerHeight\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"canvas\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'style'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"display: block; width: \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerWidth\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\"px; height: \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerHeight\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\"px;\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"onresize\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"sizeChanged\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\u65B0\\u5EFA\\u4E00\\u4E2A\\u573A\\u666F\",children:[(0,n.jsx)(e.a,{href:\"#\\u65B0\\u5EFA\\u4E00\\u4E2A\\u573A\\u666F\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u65B0\\u5EFA\\u4E00\\u4E2A\\u573A\\u666F\"]}),(0,n.jsx)(e.p,{children:\"\\u6E38\\u620F\\u662F\\u6709\\u8BB8\\u591A\\u573A\\u666F\\u7EC4\\u6210\\u7684\\uFF0C\\u4E00\\u6B3E\\u6E38\\u620F\\u81F3\\u5C11\\u6DFB\\u52A0\\u4E00\\u4E2A\\u573A\\u666F\\uFF0C\\u901A\\u5E38\\u4F1A\\u628A\\u6E38\\u620F\\u573A\\u666F\\u5206\\u4E3A\\u4E09\\u4E2A loading\\u3001game \\u548C UI\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"loading \\u573A\\u666F\\u7528\\u4E8E\\u52A0\\u8F7D\\u6E38\\u620F\\u8D44\\u6E90\"}),(0,n.jsx)(e.li,{children:\"game \\u573A\\u666F\\u662F\\u6E38\\u620F\\u7684\\u4E3B\\u8981\\u90E8\\u5206\\uFF0C\\u53EF\\u4EE5\\u5206\\u4E3A\\u591A\\u4E2A\"}),(0,n.jsx)(e.li,{children:\"UI \\u573A\\u666F\\u7528\\u4E8E\\u9875\\u9762 UI \\u5143\\u7D20\\uFF0C\\u6587\\u5B57\\u63D0\\u793A\\u7B49\"})]}),(0,n.jsx)(e.p,{children:\"\\u4E0B\\u9762\\u4EE3\\u7801\\u662F\\u4EE5\\u7B80\\u5355\\u7684\\u573A\\u666F\\u5B9E\\u4F8B\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Scene \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'phaser'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoadingScene\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Scene\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'loading-scene'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"init\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"preload\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"load\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"baseURL \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'assets/'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"load\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"image\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'king'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'sprites/king.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"sprite\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'king'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"time\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" delta\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u573A\\u666F\\u4E5F\\u6709\\u751F\\u547D\\u5468\\u671F\\u51FD\\u6570\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"init\\uFF1A \\u573A\\u666F\\u521D\\u59CB\\u5316\\u6267\\u884C\"}),(0,n.jsx)(e.li,{children:\"preload\\uFF1A \\u5728\\u573A\\u666F\\u52A0\\u8F7D\\u524D\\uFF0C\\u9700\\u8981\\u52A0\\u8F7D\\u4EC0\\u4E48\\u8D44\\u6E90\"}),(0,n.jsx)(e.li,{children:\"create\\uFF1A \\u573A\\u666F\\u88AB\\u521B\\u5EFA\\u7684\\u65F6\\u5019\\u89E6\\u53D1\"}),(0,n.jsx)(e.li,{children:\"update\\uFF1A\\u573A\\u666F\\u6BCF\\u4E2A\\u6E32\\u67D3\\u5E27\\u66F4\\u65B0\\u65F6\\u89E6\\u53D1\\uFF08\\u5927\\u7EA6\\u6BCF\\u79D2 60 \\u5E27\\uFF09\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u8FD0\\u884C \",(0,n.jsx)(e.code,{children:\"yarn dev\"}),\" \\u542F\\u52A8\\uFF0C\\u81F3\\u6B64\\uFF0C\\u4F60\\u5E94\\u8BE5\\u53EF\\u4EE5\\u5728\\u6D4F\\u89C8\\u5668\\u770B\\u5230\\u5982\\u4E0B\\u6548\\u679C\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"\\u7B2C\\u4E00\\u4E2A\\u573A\\u666F\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/938534cf6faf412d8ec3ae1457e667a1~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"\\u521B\\u5EFA\\u89D2\\u8272\",children:[(0,n.jsx)(e.a,{href:\"#\\u521B\\u5EFA\\u89D2\\u8272\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u521B\\u5EFA\\u89D2\\u8272\"]}),(0,n.jsxs)(e.p,{children:[\"\\u573A\\u666F\\u642D\\u5EFA\\u597D\\u4E86\\uFF0C\\u63A5\\u4E0B\\u6765\\u82F1\\u96C4\\u5C31\\u8BE5\\u51FA\\u573A\\u4E86\\uFF0C\\u5EFA\\u7ACB \",(0,n.jsx)(e.code,{children:\"src/classes/player.ts\"}),\"\\u6587\\u4EF6\"]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Physics \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'phaser'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Player\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Physics\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Arcade\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Sprite \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" cursors\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Phaser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Types\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Input\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Keyboard\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`CursorKeys\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Phaser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" x\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'king'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"existing\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"existing\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setSize\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"30\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"30\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setOffset\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"cursors \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"input\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"keyboard\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"createCursorKeys\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"protected\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"checkFlip\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"velocity\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scaleX \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scaleX \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"cursors\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"up\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"isDown\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"velocity\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"110\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"cursors\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"left\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"isDown\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"velocity\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"110\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"checkFlip\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setOffset\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"48\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"15\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"cursors\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"down\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"isDown\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"velocity\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"110\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"cursors\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"right\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"isDown\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"velocity\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"110\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"checkFlip\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setOffset\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"15\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"15\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u952E\\u76D8\\u4E8B\\u4EF6\"})}),(0,n.jsxs)(e.p,{children:[\"Player \\u7EE7\\u627F\",(0,n.jsx)(e.code,{children:\"Physics.Arcade.Sprite\"}),\"\\u7C7B\\uFF0C\\u5728\\u5B9E\\u4F8B\\u5316\\u4E2D\\u4F20\\u5165\\u5750\\u6807 x\\u3001 y \\u548C\\u8D44\\u6E90 ID\\uFF0C \\u901A\\u8FC7 \",(0,n.jsx)(e.code,{children:\"this.scene.input.keyboard.createCursorKeys\"}),\" \\u83B7\\u5F97\\u952E\\u76D8\\u65B9\\u5411\\u952E\\uFF0C\\u5F53\\u65B9\\u5411\\u952E\\u88AB\\u6309\\u4E0B\\u65F6\\uFF0C\\u6539\\u53D8 Player x \\u3001y \\u65B9\\u5411\\u4E0A\\u7684\\u901F\\u5EA6\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6DFB\\u52A0\\u4E00\\u4E2A\\u573A\\u666F game \",(0,n.jsx)(e.code,{children:\"src/scenes/game.ts\"})]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Scene \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'phaser'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Player \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../classes/Player'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"GameScene\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Scene\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" player\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),` Player\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'game-scene'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"player \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Player\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"player\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u521D\\u59CB\\u5316\\u4E00\\u4E2A\\u82F1\\u96C4 PLayer\\uFF0C\\u5728 update \\u51FD\\u6570\\u4E2D\\u8C03\\u7528 player \\u7684 update \\u65B9\\u6CD5\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u7136\\u540E\\u4FEE\\u6539 loading \\u573A\\u666F\\u4E2D\\u7684 create \\u65B9\\u6CD5\\uFF0C\\u4ECE loading \\u573A\\u666F\\u8FC7\\u5EA6\\u5230 game \\u573A\\u666F\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"game-scene\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u81F3\\u6B64\\uFF0C\\u6211\\u4EEC\\u5C31\\u53EF\\u4EE5\\u901A\\u8FC7\\u952E\\u76D8\\u65B9\\u5411\\u63A7\\u5236\\u82F1\\u96C4\\u4E86\\u3002 \",(0,n.jsx)(e.img,{alt:\"2022-04-13 13-41-22.2022-04-13 13_42_23.gif\",src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/954dabb3ca2541d6b734133c5c675b7d~tplv-k3u1fbpfcp-watermark.image?\"})]}),(0,n.jsxs)(e.h2,{id:\"\\u4F7F\\u7528-tiled-\\u753B\\u51FA\\u74E6\\u7247\\u5730\\u56FE\",children:[(0,n.jsx)(e.a,{href:\"#\\u4F7F\\u7528-tiled-\\u753B\\u51FA\\u74E6\\u7247\\u5730\\u56FE\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528 Tiled \\u753B\\u51FA\\u74E6\\u7247\\u5730\\u56FE\"]}),(0,n.jsx)(e.p,{children:\"\\u63A5\\u4E0B\\u6765\\u5C31\\u662F\\u5730\\u56FE\\u4E86\\uFF0C \\u6211\\u4EEC\\u5148\\u9700\\u8981\\u4E0B\\u8F7D Tiled \\uFF08\\u514D\\u8D39\\uFF09\\uFF0C\\u6765\\u521B\\u5EFA\\u6E38\\u620F\\u5730\\u56FE\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/159ad908f7a74adabbed1b0725f3bbd2~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:\"\\u9996\\u5148\\u65B0\\u5EFA\\u9879\\u76EE\\uFF0C\\u56FE\\u5E93\\u5C42\\u5FC5\\u987B\\u9009\\u62E9 CSV \\uFF0C\\u4E0D\\u7136 phaser3 \\u65E0\\u6CD5\\u89E3\\u6790\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a54e588c961f4bae9a7ec2e82b83b92d~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:\"\\u63A5\\u4E0B\\u6765\\u5EFA\\u7ACB\\u56FE\\u5757\\u96C6\\uFF0C\\u6CE8\\u610F\\u5FC5\\u987B\\u8981\\u9009\\u62E9\\u5D4C\\u5165\\u5730\\u56FE\\uFF0C\\u4E0D\\u7136\\u4E5F\\u65E0\\u6CD5\\u89E3\\u6790\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27b44b1b6ebb4ea88d59e38aa0b53def~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.p,{children:[\"Tiled \\u5206\\u4E3A\\u5C5E\\u6027\\u533A\\uFF0C\\u56FE\\u5C42\\u533A\\u548C\\u56FE\\u5757\\u533A\\uFF0C \\u53EF\\u4EE5\\u5148\",(0,n.jsx)(e.code,{children:\"commond+A\"}),\"\\u9009\\u62E9\\u56FE\\u5757\\uFF0C\\u7136\\u540E\\u901A\\u8FC7\\u56FE\\u7AE0\\u5DE5\\u5177\\u548C\\u77E9\\u5F62\\u5DE5\\u5177\\u7B49\\u81EA\\u7531\\u7684\\u8BBE\\u8BA1\\u6E38\\u620F\\u5730\\u56FE\\uFF0C\"]}),(0,n.jsxs)(e.p,{children:[\"\\u4E3A\\u4E86\\u4E0D\\u8BA9\\u89D2\\u8272\\u79FB\\u52A8\\u5230\\u5730\\u56FE\\u5916\\u90E8\\uFF0C\\u5C06\\u56FE\\u5C42\\u5206\\u4E3A\",(0,n.jsx)(e.code,{children:\"Ground\"}),\"\\u548C \",(0,n.jsx)(e.code,{children:\"Walls\"}),\"\\u3002\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93ed21f8658f45a4856eb90b9a21d075~tplv-k3u1fbpfcp-watermark.image?\"}),\" \\u4E3A\\u4E86\\u4E0D\\u8BA9\\u89D2\\u8272\\u602A\\u7269\\u7B49\\u8FD0\\u52A8\\u5BF9\\u8C61\\u79BB\\u5F00\\u5730\\u56FE\\uFF0C\\u6211\\u4EEC\\u5F90\\u8981\\u7F16\\u8F91\\u56FE\\u5757\\u5C5E\\u6027\\u3002\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96327765339a4357a815ef609f27db2d~tplv-k3u1fbpfcp-watermark.image?\"}),\" \\u5728\\u4E00\\u4E9B\\u56FE\\u5757\\u4E0A\\u8BBE\\u7F6E\\u81EA\\u5B9A\\u4E49\\u5C5E\\u6027 \",(0,n.jsx)(e.code,{children:\"collides\"}),\" \\u4E3A \",(0,n.jsx)(e.code,{children:\"true\"}),\"\\uFF0C\\u540E\\u9762\\u4EE3\\u7801\\u53EF\\u4EE5\\u8FD9\\u4E2A\\u5C5E\\u6027\\u5F00\\u542F\\u78B0\\u649E\\u68C0\\u6D4B\\u3002\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u6DFB\\u52A0\\u602A\\u7269\\u548C\\u98DF\\u7269\\u7684\\u951A\\u70B9\"})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/684dcd2b31614cb7b3cda0fbc966c63c~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.p,{children:[\"\\u53F3\\u952E\\u65B0\\u5EFA\\u5BF9\\u8C61\\u5C42\\u91CD\\u547D\\u540D\\u6210 \",(0,n.jsx)(e.code,{children:\"Enimes\"}),\" \\u6DFB\\u52A0\\u4E00\\u4E9B\\u951A\\u70B9\\uFF0C\\u8FD9\\u4E9B\\u951A\\u70B9\\u4F4D\\u7F6E\\u53EF\\u4EE5\\u5728\\u6E38\\u620F\\u4E2D\\u6E32\\u67D3\\u6210\\u602A\\u7269\\u7684\\u70B9\\uFF0C\\u540C\\u7406\\u4E5F\\u9700\\u8981\\u6DFB\\u52A0\\u4E00\\u4E9B\\u98DF\\u7269\\u7684\\u70B9\\u3002\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"Tiled \\u521B\\u5EFA\\u5730\\u56FE\",src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38b6148e346d4760a6c10ba4b33a7a6f~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:\"\\u9009\\u62E9\\u5BF9\\u8C61\\u5C42\\uFF0C\\u951A\\u70B9\\u53EF\\u4EE5\\u4FEE\\u6539\\u540D\\u79F0\\uFF0C\\u6839\\u636E\\u540D\\u79F0\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u6E32\\u67D3\\u51FA\\u4E0D\\u540C\\u7684\\u5BF9\\u8C61\\u3002\"}),(0,n.jsxs)(e.p,{children:[\"\\u6700\\u540E\\u4E00\\u6B65\\u5C06\\u6587\\u4EF6\\u5BFC\\u51FA\\u6210 JSON\\uFF0C \\u5230\\u6211\\u4EEC\\u7684 assets \\u6587\\u4EF6\\u5939\\u4E0B\\uFF0C.\\xA0\",(0,n.jsx)(e.strong,{children:\"\\u6587\\u4EF6 -\u003e \\u5BFC\\u51FA\\u4E3A \\u2026 -\u003e format .json.\"}),\" \\uFF0C\\u81F3\\u6B64\\u6E38\\u620F\\u9898\\u56FE\\u521B\\u5EFA\\u6210\\u529F\\uFF01\"]}),(0,n.jsxs)(e.h2,{id:\"\\u52A0\\u8F7D\\u74E6\\u7247\\u5730\\u56FE\",children:[(0,n.jsx)(e.a,{href:\"#\\u52A0\\u8F7D\\u74E6\\u7247\\u5730\\u56FE\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u52A0\\u8F7D\\u74E6\\u7247\\u5730\\u56FE\"]}),(0,n.jsx)(e.p,{children:\"\\u5730\\u56FE\\u8BBE\\u8BA1\\u597D\\u4E86\\uFF0C\\u63A5\\u4E0B\\u6765\\u5C31\\u9700\\u8981\\u5728\\u6E38\\u620F\\u4E2D\\u6E32\\u67D3\\u6211\\u4EEC\\u7684\\u5730\\u56FE\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u9996\\u5148\\u5728 loading \\u573A\\u666F\\u4E2D preload \\u65B9\\u6CD5\\u4E2D\\u52A0\\u8F7D\\u8D44\\u6E90\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"load\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"image\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  key\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Grass'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  url\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'tilemaps/json/Grass.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"load\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"tilemapTiledJSON\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'tilemapGrass'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'tilemaps/json/Grass.json'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"load\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"spritesheet\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'water'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'spritesheets/Water.png'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  frameWidth\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"64\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  frameHeight\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"16\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u5728 game \\u4E2D\\u6DFB\\u52A0\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"initMap\"}),\" \\u65B9\\u6CD5\\uFF0C\\u7528\\u4E8E\\u521D\\u59CB\\u5316\\u5730\\u56FE\"]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"initMap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u6DFB\\u52A0\\u6C34\\u4F5C\\u4E3A\\u80CC\\u666F\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"tileSprite\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerWidth\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" window\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"innerHeight\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"water\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"map \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"make\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"tilemap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     key\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"tilemapGrass\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     tileWidth\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"16\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     tileHeight\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"16\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"tileset \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"addTilesetImage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Grass\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Grass\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\u662F\\u56FE\\u5757\\u540D\\u79F0\\uFF0C\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\u662F\\u56FE\\u7247\\u7684 key\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"groundLayer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"createLayer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Ground\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"tileset\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"wallsLayer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"createLayer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Walls\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"tileset\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u901A\\u8FC7\\u56FE\\u5757\\u5C5E\\u6027\\u8BBE\\u7F6E\\u5899\\uFF0C\\u78B0\\u649E\\u5C5E\\u6027\\u5F00\\u542F\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"wallsLayer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setCollisionByProperty\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" collides\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u8BBE\\u7F6E\\u4E16\\u754C\\u7684\\u8FB9\\u7F18\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"world\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setBounds\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"wallsLayer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"width\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"wallsLayer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`height\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u6CE8\\u610F\"}),\"\\u8FD9\\u91CC \",(0,n.jsx)(e.code,{children:\"addTilesetImage\"}),\" \\u7684\\u7B2C\\u4E00\\u4E2A\\u540D\\u79F0\\u5FC5\\u987B\\u662F\\u548C\\u8BBE\\u8BA1\\u65F6\\u7684\\u56FE\\u5757\\u540D\\u79F0\\u76F8\\u540C\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u7136\\u540E\\u5728 create \\u65B9\\u6CD5\\u4E2D\\u521D\\u59CB\\u5316\\u5730\\u56FE\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"initMap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"player \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Player\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u5728 phaser \\u4E2D,\\u51FD\\u6570\\u6267\\u884C\\u4E5F\\u6709\\u5148\\u540E\\u987A\\u5E8F\\uFF0C\\u5148\\u6267\\u884C\\u7684\\u65B9\\u6CD5\\u4F18\\u5148\\u6E32\\u67D3\\uFF0C\\u5728\\u5E95\\u90E8\\u3002\\u6240\\u4EE5\\u8FD9\\u91CC\\u8981\\u5148\\u52A0\\u8F7D\\u5730\\u56FE\\uFF0C \\u518D\\u521D\\u59CB\\u5316 Player \\u5BF9\\u8C61\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u81F3\\u6B64\\u4F60\\u53EF\\u4EE5\\u770B\\u5230\\u4E00\\u4E2A\\u82F1\\u96C4\\u5728\\u6E38\\u620F\\u573A\\u666F\\u4E2D\\u4E86\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e536822e221a4d2ba3c14d7275c67f91~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"\\u78B0\\u649E\\u68C0\\u6D4B\",children:[(0,n.jsx)(e.a,{href:\"#\\u78B0\\u649E\\u68C0\\u6D4B\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u78B0\\u649E\\u68C0\\u6D4B\"]}),(0,n.jsx)(e.p,{children:\"\\u4F46\\u662F\\u79FB\\u52A8\\u89D2\\u8272\\uFF0C\\u89D2\\u8272\\u4F1A\\u8D70\\u5230\\u6C34\\u4E2D\\uFF0C\\u56E0\\u6B64\\u6211\\u4EEC\\u5C31\\u9700\\u8981\\u5F00\\u542F\\u78B0\\u649E\\u68C0\\u6D4B\\uFF0C\"}),(0,n.jsx)(e.p,{children:\"\\u5728 create \\u65B9\\u6CD5\\u4E2D\\uFF0C\\u6DFB\\u52A0\\u5982\\u4E0B\\u4EE3\\u7801\\u5F00\\u542F\\u78B0\\u649E\\u68C0\\u6D4B\\uFF0C\\u8FD9\\u6837\\u82F1\\u96C4\\u5C31\\u65E0\\u6CD5\\u901A\\u8FC7\\u952E\\u76D8\\u8D70\\u51FA\\u5230\\u6C34\\u4E2D\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-js\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"physics\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"add\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"collider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"player\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"wallsLayer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[\"\\u4E3A\\u4E86\\u9632\\u6B62\\u5728\\u8BBE\\u8BA1\\u5730\\u56FE\\u65F6\\u5019\\uFF0C\\u4E00\\u4E9B\\u56FE\\u5757\\u9057\\u7559\\u8BBE\\u7F6E \",(0,n.jsx)(e.code,{children:\"collides\"}),\" \\u5C5E\\u6027\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5C06\\u78B0\\u649E\\u7684\\u5899\\u8BBE\\u7F6E\\u4E3A\\u9AD8\\u4EAE\\uFF0C\\u8FD9\\u6837\\u53EF\\u4EE5\\u65B9\\u4FBF\\u8C03\\u8BD5.\"]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"initMap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"showDebugWalls\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"showDebugWalls\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" debugGraphics \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"graphics\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setAlpha\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0.7\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"wallsLayer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderDebug\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"debugGraphics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    tileColor\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    collidingTileColor\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Phaser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Display\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Color\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"24\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"234\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"48\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"255\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u6548\\u679C\\u5982\\u4E0B:\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ae89c2265524326a2f662905646b222~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"\\u4F7F\\u7528\\u7CBE\\u7075\\u56FE\\u521B\\u5EFA\\u9010\\u5E27\\u52A8\\u753B\",children:[(0,n.jsx)(e.a,{href:\"#\\u4F7F\\u7528\\u7CBE\\u7075\\u56FE\\u521B\\u5EFA\\u9010\\u5E27\\u52A8\\u753B\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528\\u7CBE\\u7075\\u56FE\\u521B\\u5EFA\\u9010\\u5E27\\u52A8\\u753B\"]}),(0,n.jsxs)(e.p,{children:[\"\\u5F53\\u524D\\u6211\\u4EEC\\u7684\\u82F1\\u96C4\\u662F\\u9759\\u6001\\u7684\\uFF0C\\u60F3\\u8BA9\\u6211\\u4EEC\\u7684\\u82F1\\u96C4\\u79FB\\u52A8\\u7684\\u65F6\\u5019\\u8DD1\\u8D77\\u6765\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528\\u7CBE\\u7075\\u56FE\\uFF0C\\u5148\\u6765\\u770B\\u4E0B\\u6211\\u4EEC\\u7684\\u7CBE\\u7075\\u56FE\\uFF0C\\u7279\\u610F\\u7ED9\\u7CBE\\u7075\\u56FE\\u52A0\\u4E0A\\u4E86\",(0,n.jsx)(e.strong,{children:\"\\u53E3\\u7F69\"}),\"\\u3002\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76108f2f7a6348fcb488165f7f6f4a3e~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:\"\\u8FD8\\u9700\\u8981\\u52A0\\u8F7D\\u4E00\\u4E2A\\u63CF\\u8FF0\\u7CBE\\u7075\\u56FE\\u7684 json \\uFF0C\\u6211\\u4EEC\\u4E00\\u8D77\\u6765\\u770B\\u4E0B json \\u7684\\u6570\\u636E\\u7ED3\\u6784\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f9b3926ac3447dbaa3be8ed844d2ee2~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.p,{children:[\"JSON \\u63CF\\u8FF0\\u4E86\\u7CBE\\u7075\\u56FE\\u6BCF\\u4E00\\u5E27\\u7684\\u4F4D\\u7F6E\\u548C\\u4E2D\\u5FC3\\u70B9\\uFF0C\\u5F53\\u7136\\u8FD9\\u4E2A JSON \\u4E0D\\u662F\\u624B\\u5199\\u7684\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u501F\\u52A9 \",(0,n.jsx)(e.code,{children:\"Texture Packer\"}),\" \\u8FD9\\u4E2A\\u5DE5\\u5177\\u6253\\u5305\\u751F\\u6210\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u5728 preload \\u4E2D\\u52A0\\u8F7D\\u7CBE\\u7075\\u56FE\\u548C json\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-js\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`\\xB7\\xB7\\xB7\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"load\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"atlas\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"a-king\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"spritesheets/a-king_withmask.png\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"spritesheets/a-king_atlas.json\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\xB7\\xB7\\xB7\n`})]})}),(0,n.jsx)(e.p,{children:\"\\u7136\\u540E\\u5728 player.js \\u4E2D\\u52A0\\u8F7D\\u521D\\u59CB\\u5316\\u52A8\\u753B\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Phaser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" x\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"initAnimations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"initAnimations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"anims\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     key\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"run\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     frames\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"anims\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"generateFrameNames\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"a-king\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"       prefix\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"run-\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"       end\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"7\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     frameRate\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"anims\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     key\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"attack\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     frames\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"anims\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"generateFrameNames\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"a-king\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"       prefix\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"attack-\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"       end\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     frameRate\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u6700\\u540E\\u5728 update \\u51FD\\u6570\\u4E2D\\uFF0C\\u5F85\\u65B9\\u5411\\u952E\\u6309\\u4E0B\\u5C31\\u8C03\\u7528\\u52A8\\u753B\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-js\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"setVelocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"cursors\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"up\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"isDown\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"velocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"y\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"110\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"anims\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"isPlaying\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"anims\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"play\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"run\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"cursors\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"space\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"isDown\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"anims\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"play\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"attack\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u81F3\\u6B64\\u89D2\\u8272\\u7684\\u52A8\\u753B\\u6210\\u529F\\uFF01\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"2022-04-13 16-49-25.2022-04-13 16_50_09.gif\",src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/440921ce4218453c977264f94fa77f87~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"\\u521B\\u5EFA\\u602A\\u7269\",children:[(0,n.jsx)(e.a,{href:\"#\\u521B\\u5EFA\\u602A\\u7269\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u521B\\u5EFA\\u602A\\u7269\"]}),(0,n.jsx)(e.p,{children:\"\\u5982\\u540C Player \\u4E00\\u6837\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u521B\\u5EFA\\u4E00\\u4E2A\\u76F8\\u540C\\u7684\\u7C7B\\uFF0C\\u547D\\u540D\\u6210 Enemy\\uFF0C\\u7528\\u6765\\u5199\\u602A\\u7269\\u7684\\u903B\\u8F91\\u3002\\u53EA\\u4E0D\\u8FC7\\u9700\\u8981\\u52A0\\u8F7D\\u4E0D\\u540C\\u7684\\u7CBE\\u7075\\u56FE\\u8D44\\u6E90\\u3002 \\u8FD8\\u6709\\u4E00\\u70B9\\u4E0D\\u540C\\u7684\\u662F\\uFF0C\\u602A\\u7269\\u7684\\u884C\\u52A8\\u4E0D\\u662F\\u7531\\u952E\\u76D8\\u63A7\\u5236\\u7684\\uFF0C\\u800C\\u662F\\u81EA\\u52A8\\u7684\\u3002\\u6240\\u4EE5\\u6211\\u4EEC\\u9700\\u8981\\u5B9E\\u73B0\\u4E0B\\u602A\\u7269\\u81EA\\u52A8\\u8DD1\\u7684\\u903B\\u8F91\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u602A\\u7269\\u81EA\\u52A8\\u8FD0\\u52A8\\u4E3B\\u8981\\u6709\\u4EE5\\u4E0B\\u4E24\\u70B9\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"\\u602A\\u7269\\u672A\\u53D1\\u73B0\\u89D2\\u8272\\u7684\\u65F6\\u5019\\uFF0C\\u4F1A\\u5728\\u539F\\u5730\\u8D70\\u6765\\u8D70\\u53BB\\u3002\"}),(0,n.jsxs)(e.li,{children:[\"\\u53D1\\u73B0\\u82F1\\u96C4\\u7684\\u65F6\\u5019\\u602A\\u4F1A\\u8FFD\\u82F1\\u96C4\\uFF0C\\u5176\",(0,n.jsx)(e.strong,{children:\"\\u539F\\u7406\"}),\"\\u5C31\\u662F\\u5224\\u65AD\\u602A\\u7269\\u548C\\u73A9\\u5BB6\\u7684\\u8DDD\\u79BB\\uFF0C\\u5C0F\\u4E8E\\u4E00\\u5B9A\\u503C\\uFF0C\\u5C31\\u8BBE\\u7F6E\\u4E0B\\u602A\\u7269\\u7684\\u79FB\\u52A8\\u901F\\u5EA6\\u3002\"]})]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"enum\"}),\" Direction \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"UP\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"DOWN\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"LEFT\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"RIGHT\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//  \\u968F\\u673A\\u751F\\u6210\\u4E0D\\u540C\\u7684\\u65B9\\u5411\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"randomDirection\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"exclude\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" newDirection \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Phaser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Math\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Between\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"while\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"newDirection \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" exclude\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    newDirection \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" Phaser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Math\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Between\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" newDirection\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u6BCF\\u96942\\u79D2\\u6539\\u53D8\\u602A\\u7269\\u884C\\u8D70\\u7684\\u65B9\\u5411\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"moveEvent \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"time\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"addEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      delay\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2000\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"callback\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"direction \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"randomDirection\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      loop\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"AGRESSOR_RADIUS\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"preUpdate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"t\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" dt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"preUpdate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" dt\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u8DDD\\u79BB\\u5C0F\\u4E8E100 \\uFF0C\\u8BBE\\u7F6E\\u4E00\\u4E2A\\u901F\\u5EA6\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      Math\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Distance\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"BetweenPoints\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"AGRESSOR_RADIUS\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocityX\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocityY\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"       \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u5927\\u4E8E100 \\u5728\\u4E0A\\u4E0B\\u5DE6\\u53F3\\u968F\\u673A\\u8D70\\u5230\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" speed \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"50\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"switch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" Direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"UP\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\"speed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"break\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" Direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"DOWN\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" speed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"break\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" Direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"LEFT\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\"speed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"break\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" Direction\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"RIGHT\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setVelocity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"speed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"break\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5728 \",(0,n.jsx)(e.code,{children:\"preUpdate\"}),\" \\u51FD\\u6570\\u4E2D\\u8BBE\\u7F6E\\u602A\\u7269\\u81EA\\u52A8\\u8D70\\u52A8\\u7684\\u903B\\u8F91\\uFF0C\\u8DDD\\u79BB\\u5C0F\\u4E8E 100 \\uFF0C\\u8BBE\\u7F6E\\u671D\\u82F1\\u96C4\\u4E00\\u4E2A\\u901F\\u5EA6\\uFF0C\\u5927\\u4E8E 100\\uFF0C\\u968F\\u673A 4 \\u4E2A\\u65B9\\u5411\\u81EA\\u52A8\\u8D70\\u52A8\\u3002\"]}),(0,n.jsxs)(e.h2,{id:\"\\u6839\\u636E\\u951A\\u70B9\\u6E32\\u67D3\\u602A\\u7269\",children:[(0,n.jsx)(e.a,{href:\"#\\u6839\\u636E\\u951A\\u70B9\\u6E32\\u67D3\\u602A\\u7269\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6839\\u636E\\u951A\\u70B9\\u6E32\\u67D3\\u602A\\u7269\"]}),(0,n.jsxs)(e.p,{children:[\"\\u63A5\\u4E0B\\u6765\\u6211\\u4EEC\\u9700\\u8981\\u6839\\u636E\\u5730\\u56FE\\u4E0A\\u521B\\u5EFA\\u7684\\u951A\\u70B9\\u5B9E\\u4F8B\\u5316\\u602A\\u7269\\u3002\\u5728 Game \\u573A\\u666F\\u4E2D\\u6DFB\\u52A0\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"initEnemies\"}),\" \\u65B9\\u6CD5\\u7528\\u4E8E\\u521D\\u59CB\\u5316\\u602A\\u7269\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"initEnemies\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//  \\u8FC7\\u53BB\\u5730\\u56FE\\u4E0A\\u7684 EnemyPoint \\u70B9\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" enemiesPoints \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"filterObjects\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Enemies\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" obj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"EnemyPoint\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u5B9E\\u4F8B\\u5316\\u602A\\u7269\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"enemies \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" enemiesPoints\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"enemyPoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Enemy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          enemyPoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          enemyPoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"lizard\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`player\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//  \\u602A\\u7269\\u548C\\u5899\\u589E\\u52A0\\u78B0\\u649E\\u68C0\\u67E5\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"collider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"enemies\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"wallsLayer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u602A\\u7269\\u548C\\u602A\\u7269\\u589E\\u52A0\\u78B0\\u649E\\u68C0\\u67E5\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"collider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"enemies\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"enemies\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u602A\\u7269\\u548C\\u89D2\\u8272\\u589E\\u52A0\\u78B0\\u649E\\u68C0\\u67E5\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"collider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"player\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"enemies\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj1\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" obj2\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u78B0\\u649E\\u540E\\u7684\\u56DE\\u8C03\\uFF0C\\u89D2\\u8272\\u6536\\u5230\\u4F24\\u5BB3 -1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj1 \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" Player\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getDamage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u8FD9\\u91CC\\u9700\\u8981\\u6CE8\\u610F\\u78B0\\u649E\\u68C0\\u67E5\\u548C\\u78B0\\u649E\\u540E\\u7684\\u56DE\\u8C03 \\u5230\\u6B64\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u5730\\u56FE\\u4E0A\\u521B\\u5EFA\\u89D2\\u8272\\u548C\\u602A\\u7269\\uFF0C\\u5E76\\u4E14\\u602A\\u7269\\u53EF\\u4EE5\\u653B\\u51FB\\u82F1\\u96C4\\u4E86\\uFF0C\\u4F46\\u6211\\u4EEC\\u7684\\u82F1\\u96C4\\u653B\\u51FB\\u602A\\u7269\\uFF0C\\u5374\\u6253\\u4E0D\\u6B7B\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"2022-04-13 17-54-50.2022-04-13 17_55_52.gif\",src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c9d1c44d003b4693bad6a05d9fba5f13~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"\\u4E8B\\u4EF6\\u901A\\u77E5\",children:[(0,n.jsx)(e.a,{href:\"#\\u4E8B\\u4EF6\\u901A\\u77E5\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4E8B\\u4EF6\\u901A\\u77E5\"]}),(0,n.jsx)(e.p,{children:\"\\u56E0\\u6B64\\u6211\\u4EEC\\u9700\\u8981\\u7ED9\\u602A\\u7269\\u6DFB\\u52A0\\u4E8B\\u4EF6\\u76D1\\u542C\\uFF0C\\u5F53\\u602A\\u7269\\u548C\\u89D2\\u8272\\u7684\\u8DDD\\u79BB\\u5C0F\\u4E8E\\u89D2\\u8272\\u7684\\u5BBD\\u5EA6\\uFF0C\\u8BF4\\u660E\\u51FB\\u4E2D\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"attackHandler\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    Math\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Distance\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"BetweenPoints\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"target\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`width\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getDamage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"disableBody\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u505C\\u6B62\\u602A\\u7269\\u5BF9\\u8C61\\u4E3B\\u4F53\\uFF0C\\u4F46\\u4E0D\\u6D88\\u5931\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"time\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"delayedCall\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"300\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"destroy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// 300 \\u6BEB\\u79D2\\u540E\\u6D88\\u5931\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// EVENTS\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"on\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"attack\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"attackHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//\\u9500\\u6BC1\\u540E\\u53D6\\u6D88\\u76D1\\u542C\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"on\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'destroy'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"removeListener\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"attack\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"attackHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u5F53\\u6309\\u9700\\u952E\\u76D8\\u7A7A\\u683C\\u952E\\uFF0C\\u5C31\\u64AD\\u653E Player \\u7684\\u5DE5\\u5177\\u52A8\\u753B\\uFF0C\\u5E76\\u4E14\\u53D1\\u9001\\u4E00\\u4E2A\\u5168\\u5C40\\u4E8B\\u4EF6\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-js\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"cursors\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"space\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"isDown\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"anims\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"play\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'attack'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"scene\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"game\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"events\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"emit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"attack\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\u6839\\u636E\\u951A\\u70B9\\u663E\\u793A\\u98DF\\u7269\",children:[(0,n.jsx)(e.a,{href:\"#\\u6839\\u636E\\u951A\\u70B9\\u663E\\u793A\\u98DF\\u7269\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6839\\u636E\\u951A\\u70B9\\u663E\\u793A\\u98DF\\u7269\"]}),(0,n.jsx)(e.p,{children:\"\\u4E0E\\u6E32\\u67D3\\u602A\\u7269\\u7C7B\\u4F3C\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u5730\\u56FE\\u4E0A\\u6E32\\u67D3\\u4E00\\u4E9B\\u98DF\\u7269\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d12bfc4927b84e739ab3d93f85c66b6b~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:\"\\u8FD9\\u4E9B\\u7D20\\u6750\\u662F\\u901A\\u8FC7 iconfont \\u4E0A\\u4E0B\\u8F7D\\u7684\\uFF0C\\u4E0B\\u8F7D\\u540E\\u901A\\u8FC7 figma \\u62FC\\u63A5\\u6210\\u7CBE\\u7075\\u56FE\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"initChests\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" chestPoints \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"filterObjects\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Chests\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" obj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"ChestPoint\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chests \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" chestPoints\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"chestPoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`add\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"sprite\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          chestPoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"x \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          chestPoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"y \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"number\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"food\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          Math\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"floor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"Math\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"random\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setScale\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0.5\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chests\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"chest\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"physics\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"add\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"overlap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"player\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" chest\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj1\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" obj2\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"emit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chestLoot\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        obj2\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"destroy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u540C\\u602A\\u7269\\u4E00\\u6837\\u6839\\u636E\\u951A\\u70B9\\u5148\\u6E32\\u67D3\\u51FA\\u98DF\\u7269\\uFF0C\\u4E0D\\u540C\\u7684\\u662F\\u5F53\\u82F1\\u96C4\\u548C\\u98DF\\u7269\\u78B0\\u649E\\u68C0\\u6D4B\\u7684\\u56DE\\u8C03\\u4E0D\\u540C\\uFF0C\\u5F53\\u82F1\\u96C4\\u4E0E\\u98DF\\u7269\\u91CD\\u5408\\uFF0C\\u73A9\\u5BB6\\u53EF\\u4EE5\\u83B7\\u5F97 10 \\u5206\"}),(0,n.jsxs)(e.h2,{id:\"\\u6587\\u672C\\u663E\\u793A\",children:[(0,n.jsx)(e.a,{href:\"#\\u6587\\u672C\\u663E\\u793A\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6587\\u672C\\u663E\\u793A\"]}),(0,n.jsx)(e.p,{children:\"\\u73B0\\u5728\\u8BA9\\u6211\\u4EEC\\u5728\\u89D2\\u8272\\u5934\\u90E8\\u4E0A\\u65B9\\u663E\\u793A\\u4E00\\u4E2A HP \\u503C\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-js\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Text\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./text'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"hpValue\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hpValue\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"scene\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"x\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"y\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"height\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"setFontSize\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"12\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"setOrigin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0.8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.5\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hpValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"setPosition\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"x\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"y\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"height\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.4\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hpValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"setOrigin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0.8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.5\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"public\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getDamage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" number\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"getDamage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hpValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"setText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hp\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function property-access method\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u73B0\\u5728 HP \\u503C\\u5C06\\u663E\\u793A\\u5728\\u6E38\\u620F\\u89D2\\u8272\\u7684\\u4E0A\\u65B9\\uFF0C\\u5728 update \\u65B9\\u6CD5\\u4E2D\\uFF0C\\u6211\\u4EEC\\u66F4\\u65B0\\u4E86 HP \\u6587\\u672C\\u503C\\u7684\\u4F4D\\u7F6E\\uFF0C\\u8FD9\\u6837\\u5373\\u4F7F PLayer \\u79FB\\u52A8\\u4E5F\\u4E0D\\u4F1A\\u6709\\u95EE\\u9898\\u3002\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c0302c22626401ba54c45237186af6e~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"ui-\\u663E\\u793A\",children:[(0,n.jsx)(e.a,{href:\"#ui-\\u663E\\u793A\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"UI \\u663E\\u793A\"]}),(0,n.jsx)(e.p,{children:\"\\u6700\\u540E\\u6211\\u4EEC\\u6765\\u6DFB\\u52A0\\u4E00\\u4E2A UI \\u573A\\u666F\\uFF0C\\u7528\\u4E8E\\u663E\\u793A\\u7CFB\\u7EDF\\u63D0\\u793A\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Scene \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'phaser'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" GameStatus \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../consts'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Score\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ScoreOperations \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../classes/score'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Text \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../classes/text'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" gameConfig \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UIScene\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Scene\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" score\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),` Score\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" gameEndPhrase\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),` Text\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"chestLootHandler\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"gameEndHandler\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"status\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" GameStatus\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'ui-scene'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"chestLootHandler\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"score\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"changeValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ScoreOperations\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"INCREASE\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"score\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" gameConfig\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"winScore\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"emit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEnd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'win'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"gameEndHandler\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"status\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"cameras\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"main\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setBackgroundColor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'rgba(0,0,0,0.6)'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"pause\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'game-scene'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEndPhrase \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scale\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"width \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scale\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"height \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.4\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        status \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" GameStatus\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"LOSE\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"\\u5931\\u8D25!\\\\n\\\\n\\u70B9\\u51FB\\u5C4F\\u5E55\\u91CD\\u65B0\\u5F00\\u59CB\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"\\u80DC\\u5229!\\\\n\\\\n\\u70B9\\u51FB\\u5C4F\\u5E55\\u91CD\\u65B0\\u5F00\\u59CB\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setAlign\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'center'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setColor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"status \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" GameStatus\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"LOSE\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'#ff0000'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'#ffffff'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEndPhrase\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setPosition\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scale\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"width \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEndPhrase\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"width \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scale\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"height \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.4\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"input\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"on\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'pointerdown'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"off\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chestLoot\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chestLootHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"off\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEnd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEndHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"get\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'game-scene'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"restart\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"restart\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"score \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Score\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"20\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"20\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"initListeners\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"initListeners\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"on\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chestLoot\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"chestLootHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"game\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"once\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"EVENTS_NAME\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEnd\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"gameEndHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u5728 loading \\u573A\\u666F\\u4E2D\\u548C game \\u573A\\u666F\\u4E00\\u8D77\\u52A0\\u8F7D\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`\\xB7\\xB7\\xB7\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"game-scene\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"scene\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"ui-scene\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\xB7\\xB7\\xB7\n`})]})}),(0,n.jsx)(e.p,{children:\"\\u8FD9\\u6837\\u7B49\\u82F1\\u96C4\\u7684 HP \\u53EA\\u4E3A 0 \\u65F6\\u5019\\uFF0C\\u5C4F\\u5E55\\u4F1A\\u663E\\u793A\\u201C\\u5931\\u8D25\\u201D\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"phaser \\u6E38\\u620F\\u6548\\u679C\",src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ddc35de0dc043d8a664f9aaf56c3763~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.h2,{id:\"\\u90E8\\u7F72\",children:[(0,n.jsx)(e.a,{href:\"#\\u90E8\\u7F72\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u90E8\\u7F72\"]}),(0,n.jsx)(e.p,{children:\"\\u6211\\u4F7F\\u7528 vercel \\u90E8\\u7F72\\uFF0C\\u53EA\\u9700\\u8981\\u4E0A\\u4F20 github\\uFF0Cvercel \\u5C31\\u4F1A\\u81EA\\u52A8\\u90E8\\u7F72\\uFF0C\\u7136\\u540E\\u57DF\\u540D CNAME \\u5230 cname.vercel-dns.com \\u5C31\\u53EF\\u4EE5\\u4E86\\u3002\"}),(0,n.jsxs)(e.p,{children:[\"\\u6F14\\u793A\\u5730\\u5740\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://game.runjs.cool/\",children:\"https://game.runjs.cool/\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u4EE3\\u7801\\u4ED3\\u5E93\\uFF1A\",(0,n.jsx)(e.a,{href:\"https://github.com/maqi1520/phaser3-game\",children:\"https://github.com/maqi1520/phaser3-game\"})]}),(0,n.jsx)(e.p,{children:\"\\u540C\\u7406\\u6211\\u8FD8\\u90E8\\u7F72\\u4E86\\u4EE5\\u4E0B\\u5E94\\u7528\"}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://editor.runjs.cool/\",children:\"https://editor.runjs.cool/\"}),\" MDX \\u6392\\u7248\\u7F16\\u8F91\\u5668 \",(0,n.jsx)(e.a,{href:\"https://cv.runjs.cool/\",children:\"https://cv.runjs.cool/\"}),\" \\u5728\\u7EBF\\u7B80\\u5386\\u751F\\u6210\\u5668 \",(0,n.jsx)(e.a,{href:\"https://low-code.runjs.cool/\",children:\"https://low-code.runjs.cool/\"}),\" \\u7B80\\u6613\\u7248\\u4F4E\\u4EE3\\u7801\\u5E73\\u53F0 \\u5E76\\u4E14\\u90FD\\u662F\\u5F00\\u6E90\\u7684\\uFF0C\\u82E5\\u5BF9\\u4F60\\u6709\\u5E2E\\u52A9\\u8BB0\\u5F97\\u70B9\\u4E2A star\\uFF0C\\u611F\\u8C22\\uFF01\"]}),(0,n.jsxs)(e.h2,{id:\"\\u5C0F\\u7ED3\",children:[(0,n.jsx)(e.a,{href:\"#\\u5C0F\\u7ED3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5C0F\\u7ED3\"]}),(0,n.jsx)(e.p,{children:\"\\u81F3\\u6B64 Phaser 3 \\u5C0F\\u6E38\\u620F\\u5F00\\u53D1\\u5B8C\\u6210\\u4E86 90%\\uFF0C \\u5269\\u4E0B\\u7684 10 % \\u9700\\u8981\\u6211\\u4EEC\\u7EE7\\u7EED\\u6253\\u78E8\\u548C\\u4F18\\u5316\\uFF0C\\u8FD9\\u6837\\u624D\\u53EF\\u4EE5\\u8BA9\\u6E38\\u620F\\u66F4\\u597D\\u73A9\\uFF0C\\u8FD8\\u9700\\u8981\\u8BBE\\u8BA1\\u66F4\\u591A\\u7684\\u5173\\u5361\\uFF0C\\u901A\\u8FC7\\u5173\\u5361\\u4E86\\u6765\\u8BA9\\u7528\\u6237\\u66F4\\u6709\\u6210\\u5C31\\u611F\\u3002\\u901A\\u8FC7\\u672C\\u6587\\uFF0C\\u6211\\u4EEC\\u4ECE\\u96F6\\u5B9E\\u73B0\\u4E86\\u4E00\\u4E2A Phaser.js \\u5F00\\u53D1 H5 \\u6E38\\u620F\\u3002\\u5305\\u62EC\\u7CBE\\u7075\\u56FE\\uFF0C\\u7CBE\\u7075\\u8868\\uFF0C\\u8BBE\\u8BA1\\u5730\\u56FE\\uFF0C\\u52A8\\u753B\\u3001\\u78B0\\u649E\\u68C0\\u67E5\\u3001\\u4E8B\\u4EF6\\u901A\\u77E5\\u7B49\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u76F8\\u4FE1\\u901A\\u8FC7\\u4EE5\\u4E0A\\u7684\\u5B66\\u4E60\\uFF0C\\u5728\\u4EE5\\u540E\\u7684\\u5DE5\\u4F5C\\u4E2D\\uFF0C\\u5BF9\\u7C7B\\u4F3C\\u7684 H5 \\u6E38\\u620F\\uFF0C\\u6709\\u4E00\\u5B9A\\u8BA4\\u77E5\\uFF0C\\u5E76\\u4E14\\u80FD\\u591F\\u5FEB\\u901F\\u5F00\\u53D1\\u51FA\\u4E00\\u6B3E\\u5C0F\\u6E38\\u620F\\u3002\"}),(0,n.jsxs)(e.h2,{id:\"\\u6700\\u540E\",children:[(0,n.jsx)(e.a,{href:\"#\\u6700\\u540E\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u6700\\u540E\"]}),(0,n.jsxs)(e.p,{children:[\"\\u611F\\u8C22\",(0,n.jsx)(e.a,{href:\"https://juejin.cn/user/2955079655898093/posts\",title:\"https://juejin.cn/user/2955079655898093/posts\",children:\"@\\u5927\\u5E05\\u8001\\u733F\"}),\"\\u5E2E\\u5FD9\\u8BBE\\u8BA1\\u7684\\u53E3\\u7F69\\u7CBE\\u7075\\u56FE\\uFF0C \\u5927\\u5E05\\u8FD8\\u521B\\u5EFA\\u4E86\\u201C\\u733F\\u521B\\u8425\\u201D\\uFF0C\\u7FA4\\u91CC\\u6709\\u5F88\\u591A\\u5F00\\u53D1\\u5927\\u4F6C\\u53EF\\u4EE5\\u4E92\\u76F8\\u5E2E\\u5FD9\\u7B54\\u7591\\u548C\\u4EA4\\u6D41\\u6280\\u672F\\uFF0C\\u540C\\u65F6\\u5927\\u5E05\\u8FD8\\u4F1A\\u5206\\u4EAB\\u505A\\u5916\\u5305\\uFF0C\\u641E\\u526F\\u4E1A\\u7B49\\uFF0C\\u611F\\u5174\\u8DA3\\u7684\\u5C0F\\u4F19\\u4F34\\u53EF\\u4EE5\\u7559\\u8A00\\u201C\\u5165\\u7FA4\\u201D\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u4EE5\\u4E0A\\u5C31\\u662F\\u672C\\u6587\\u5168\\u90E8\\u5185\\u5BB9\\uFF0C\\u5E0C\\u671B\\u8FD9\\u7BC7\\u6587\\u7AE0\\u5BF9\\u5927\\u5BB6\\u6709\\u6240\\u5E2E\\u52A9\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u53C2\\u8003\\u6211\\u5F80\\u671F\\u7684\\u6587\\u7AE0\\u6216\\u8005\\u5728\\u8BC4\\u8BBA\\u533A\\u4EA4\\u6D41\\u4F60\\u7684\\u60F3\\u6CD5\\u548C\\u5FC3\\u5F97\\uFF0C\\u6B22\\u8FCE\\u4E00\\u8D77\\u63A2\\u7D22\\u524D\\u7AEF\\u3002\"}),(0,n.jsxs)(e.p,{children:[\"\\u672C\\u6587\\u9996\\u53D1\\u6398\\u91D1\\u5E73\\u53F0\\uFF0C\\u6765\\u6E90\",(0,n.jsx)(e.a,{href:\"https://maqib.cn/blog/phaser3-game\",children:\"\\u5C0F\\u9A6C\\u535A\\u5BA2\"})]})]})}}var v=b;return w(j);})();\n;return Component;","toc":[{"value":"前言","url":"#前言","depth":2},{"value":"使用技术栈","url":"#使用技术栈","depth":2},{"value":"Phaser 简介","url":"#phaser-简介","depth":2},{"value":"初始化工程","url":"#初始化工程","depth":2},{"value":"初始化游戏","url":"#初始化游戏","depth":2},{"value":"新建一个场景","url":"#新建一个场景","depth":2},{"value":"创建角色","url":"#创建角色","depth":2},{"value":"使用 Tiled 画出瓦片地图","url":"#使用-tiled-画出瓦片地图","depth":2},{"value":"加载瓦片地图","url":"#加载瓦片地图","depth":2},{"value":"碰撞检测","url":"#碰撞检测","depth":2},{"value":"使用精灵图创建逐帧动画","url":"#使用精灵图创建逐帧动画","depth":2},{"value":"创建怪物","url":"#创建怪物","depth":2},{"value":"根据锚点渲染怪物","url":"#根据锚点渲染怪物","depth":2},{"value":"事件通知","url":"#事件通知","depth":2},{"value":"根据锚点显示食物","url":"#根据锚点显示食物","depth":2},{"value":"文本显示","url":"#文本显示","depth":2},{"value":"UI 显示","url":"#ui-显示","depth":2},{"value":"部署","url":"#部署","depth":2},{"value":"小结","url":"#小结","depth":2},{"value":"最后","url":"#最后","depth":2}],"frontMatter":{"readingTime":{"text":"20 min read","minutes":19.73,"time":1183800,"words":3946},"slug":"phaser3-game","fileName":"phaser3-game.md","title":"使用 phaser3 从零实现一个战疫小游戏","date":"2022-04-13T16:00:00.000Z","lastmod":"2022/4/14","tags":["游戏"],"draft":false,"summary":"","images":[],"authors":["default"],"layout":"PostLayout"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.19,"time":11400,"words":38},"slug":["default"],"fileName":"default.md","name":"随风","avatar":"/static/images/avatar.jpeg","occupation":"前端工程师","company":"分享 JavaScript 热门框架，记录前端工程师学习成长历程。","email":"tianping888@163.com","juejin":"https://juejin.cn","zhihu":"https://www.zhihu.com","github":"https://github.com/balac2015","date":null}],"prev":{"title":"我用 nodejs 爬了一万多张小姐姐壁纸","date":"2022-03-22T16:00:00.000Z","lastmod":"2022/3/23","tags":["Node.js"],"draft":false,"summary":"本文主要讲述如何使用 nodejs 爬虫，以及如何用nodejs 下载图片。为什么要下载这么多图片呢？ 前几天使用 uniapp + uniCloud 免费部署了一个壁纸小程序。","layout":"PostLayout","slug":"node-reptile"},"next":{"title":"SVG + 动画 实现一个有个性的404页面","date":"2022-04-18T16:00:00.000Z","lastmod":"2022/4/19","tags":["CSS"],"draft":false,"summary":"我们的博客网站有时候 404 页面比较普通，我们可以通过SVG 加动画来实现一个有个性的页面。","images":["https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e7b90cf755a4775a091936906e8055f~tplv-k3u1fbpfcp-zoom-crop-mark:1304:1304:1304:734.awebp?"],"authors":["default"],"layout":"PostLayout","slug":"svg-404"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["phaser3-game"]},"buildId":"1YpokCm8LeHo6uVUXlBkJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>