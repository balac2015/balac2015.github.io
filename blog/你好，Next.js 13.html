<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>你好，Next.js 13</title><meta name="robots" content="follow, index"/><meta name="description" content="上周发布了 Next.js 的一个全新的版本 13，它带来了全新的理念（server component），作为一名 Next.js 的爱好者，我们有必要重新学习和认识下它。"/><meta property="og:url" content="https://github.com/balac2015/blog/%E4%BD%A0%E5%A5%BD%EF%BC%8CNext.js%2013"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Coding 工坊 | 随风"/><meta property="og:description" content="上周发布了 Next.js 的一个全新的版本 13，它带来了全新的理念（server component），作为一名 Next.js 的爱好者，我们有必要重新学习和认识下它。"/><meta property="og:title" content="你好，Next.js 13"/><meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a99af6f1111845878f6401b0d6abeed8~tplv-k3u1fbpfcp-watermark.image?"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="你好，Next.js 13"/><meta name="twitter:description" content="上周发布了 Next.js 的一个全新的版本 13，它带来了全新的理念（server component），作为一名 Next.js 的爱好者，我们有必要重新学习和认识下它。"/><meta name="twitter:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a99af6f1111845878f6401b0d6abeed8~tplv-k3u1fbpfcp-watermark.image?"/><meta property="article:published_time" content="2022-10-29T23:48:04.000Z"/><meta property="article:modified_time" content="2023-01-25T03:42:52.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://github.com/balac2015/blog/你好，Next.js 13"
  },
  "headline": "你好，Next.js 13",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a99af6f1111845878f6401b0d6abeed8~tplv-k3u1fbpfcp-watermark.image?"
    }
  ],
  "datePublished": "2022-10-29T23:48:04.000Z",
  "dateModified": "2023-01-25T03:42:52.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "随风"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "随风",
    "logo": {
      "@type": "ImageObject",
      "url": "https://github.com/balac2015/static/images/logo.png"
    }
  },
  "description": "上周发布了 Next.js 的一个全新的版本 13，它带来了全新的理念（server component），作为一名 Next.js 的爱好者，我们有必要重新学习和认识下它。"
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><meta name="referrer" content="no-referrer"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/abb8fa3e48c59e29.css" as="style"/><link rel="stylesheet" href="/_next/static/css/abb8fa3e48c59e29.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-1690aa2475cf3a90.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-b4cdd9636ac3694c.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b326530c3f1b0167.js" defer=""></script><script src="/_next/static/chunks/410-dc08c716b48ef576.js" defer=""></script><script src="/_next/static/chunks/606-dfa1dde35c330eb8.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-a12f8dbad1f7fc24.js" defer=""></script><script src="/_next/static/xRVIygn0gkexXE3qpo3Pp/_buildManifest.js" defer=""></script><script src="/_next/static/xRVIygn0gkexXE3qpo3Pp/_ssgManifest.js" defer=""></script><script src="/_next/static/xRVIygn0gkexXE3qpo3Pp/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><h1><a aria-label="随风小站" href="/"><div class="flex items-center justify-between"><span><svg width="52" height="26" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" height="26" width="40"></image><image href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAaCAYAAADFTB7LAAAAAXNSR0IArs4c6QAAAHplWElmTU0AKgAAAAgAAwESAAMAAAABAAEAAAExAAIAAAAeAAAAModpAAQAAAABAAAAUAAAAABBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAGgAAAACQIupnAAAEEWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ2RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQ1RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdFNDI1QUQzRkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjdFNDI1QUQ0RkQxNzExRTg5RUUyRDA2RDA3NDUyMUM1PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo0psFQAAACSElEQVRYCc2WMUhVURjH79VQEISKDAfFAqVBbHDOLcFNB0scinJrkrbarMFBEAxSQXCJWuQNurgIEoJTOBRSrdFghqZgaIWv5+8v56qvd73vnKM37gc/znnnfN//+99z73v3BYFFFAqFengB67ALc9BsUZpuCiYuwjD8hH9jk4Vb6TpIUKf5Q9g44SrPfBam4a9Z32O8myCTzhZNnxsDGvbhDbRG3Zg/gD+gkPHBaC/1kWY9EJ3QW+YtcU1Z74IdiGKESRiXe25rNLgOW6ajvghVSeLst8OaydfwCi4k1XjvIVwF70CxAjU2YuRdg48QRY5JpU2tUw6io6bDV8YGl2LyL8Oyqdcw4lJfNhdBPU967rahrWxBTAJ1NaBnViGtzpg09yWE6kDPkb6tt90VjiuM1hdGhcba413PGSIvpUY88pQoKkOnA3SxiomiTZ8PiOj0Fn1qT6tBbwgUutUdp+VZrSOgq31mlWyZhF4lLIHiM1RblpakVbDyA/ZKds6wEIZhnvJ7sAU34Cn4hbnCJ37VyVVo94LiF8S+kZIVgkAnqKtMJTjJHMJToFs87tNEBjd9Ch1qHpP7CTo5xTsOdYepMrjhWuSSzynukt8Pv2EMk00u9f/jBANMvsfUfbgCeiVavxAigwWXq/LJxeQMdfpNXIcFTM5DH1xN0gtJGCChGoHJpMTz2qOf/jPKaDfchEvwHVbhAz5eMx6F/rtps/FoJeUJBnS3lgxlu+kW68gzGzK4lll3GJPBb5DPqskKnol9YzKTHg8A2r/9Qs/XFFsAAAAASUVORK5CYII=" height="26" width="40" x="15"></image></svg></span><div class="hidden text-2xl font-semibold sm:block">随风小站</div></div></a></h1><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">文章</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">标签</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">项目</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/boilerplate">模板</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">关于</a></div><div class="ml-1 mr-1 flex items-center sm:ml-4"><a class="block p-1" title="RSS" href="/feed.xml"><svg fill="currentColor" class="h-5 w-5" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3.75 3a.75.75 0 00-.75.75v.5c0 .414.336.75.75.75H4c6.075 0 11 4.925 11 11v.25c0 .414.336.75.75.75h.5a.75.75 0 00.75-.75V16C17 8.82 11.18 3 4 3h-.25z"></path><path d="M3 8.75A.75.75 0 013.75 8H4a8 8 0 018 8v.25a.75.75 0 01-.75.75h-.5a.75.75 0 01-.75-.75V16a6 6 0 00-6-6h-.25A.75.75 0 013 9.25v-.5zM7 15a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></a><button aria-label="Toggle Dark Mode" type="button" class="h-7 w-7 rounded p-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button></div><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-50 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">文章</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">标签</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">项目</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/boilerplate">模板</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">关于</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div style="transform:translateX(-100%)" class="fixed top-0 left-0 h-1 w-full bg-primary-500 backdrop-blur-3xl transition-transform duration-150"></div><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-10-29T23:48:04.000Z">2022年10月30日星期日</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">你好，Next.js 13</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><div class=""><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img alt="avatar" src="/static/images/avatar.jpeg" width="38px" height="38px" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">作者</dt><dd class="text-gray-900 dark:text-gray-100">随风</dd></dl></li></ul></dd></dl><h2 class="pt-6 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400">目录</h2><ul class="py-4 text-sm font-medium leading-relaxed xl:border-b xl:border-gray-200 xl:dark:border-gray-700"><li class="false"><a class="text-primary-500" href="#前言">前言</a></li><li class="false"><a class="text-primary-500" href="#turbopack">Turbopack</a></li><li class="ml-6"><a class="text-primary-500" href="#turbopack-特点">Turbopack 特点</a></li><li class="ml-6"><a class="text-primary-500" href="#为什么不选择-vite-和-esbuild">为什么不选择 Vite 和 Esbuild？</a></li><li class="false"><a class="text-primary-500" href="#为什么要改基于文件的路由系统">为什么要改基于文件的路由系统</a></li><li class="false"><a class="text-primary-500" href="#nextjs-12-中-layout-实现方式">Next.js 12 中 Layout 实现方式</a></li><li class="false"><a class="text-primary-500" href="#app-文件夹下的约定式路由">app 文件夹下的约定式路由</a></li><li class="ml-6"><a class="text-primary-500" href="#路由分组">路由分组</a></li><li class="false"><a class="text-primary-500" href="#react-server-components">React Server Components</a></li><li class="false"><a class="text-primary-500" href="#实现流渲染">实现流渲染</a></li><li class="false"><a class="text-primary-500" href="#服务端组件和客户端组件">服务端组件和客户端组件</a></li><li class="ml-6"><a class="text-primary-500" href="#next12-区分">Next12 区分</a></li><li class="ml-6"><a class="text-primary-500" href="#next13-区分">Next13 区分</a></li><li class="false"><a class="text-primary-500" href="#数据请求">数据请求</a></li><li class="false"><a class="text-primary-500" href="#新的-nextimage">新的 next/image</a></li><li class="false"><a class="text-primary-500" href="#nextfont">@next/font</a></li><li class="false"><a class="text-primary-500" href="#nextlink">next/link</a></li><li class="false"><a class="text-primary-500" href="#小结">小结</a></li></ul></div><div class="xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="mt-6"><img alt="你好，Next.js 13" class="w-full rounded object-cover shadow-lg" src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a99af6f1111845878f6401b0d6abeed8~tplv-k3u1fbpfcp-watermark.image?"/></div><div class="prose max-w-none break-words pt-10 pb-8 dark:prose-dark"><hr/><p>theme: vuepress highlight: monokai</p><hr/><blockquote><p>文章为稀土掘金技术社区首发签约文章，14 天内禁止转载，14 天后未获授权禁止转载，侵权必究！</p></blockquote><h2 id="前言"><a href="#前言" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>前言</h2><p>上周发布了 Next.js 的一个全新的版本 13，它带来了全新的理念（server component），作为一名 Next.js 的爱好者，我们有必要重新学习和认识下它。</p><h2 id="turbopack"><a href="#turbopack" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Turbopack</h2><p>首先是最引入注目的，在 Next13 中加入了全新的打包工具 Turbopack， 它是出自 Webpack 作者 TobiasKoppers 之手，官方描述是：开发时更新速度比 Webpack 快 700 倍、比 Vite 快 10 倍，是不是有点迫不及待，想要熟手体验了呢？我们直接使用官方提供的 cli 创建一个 Next.js 工程。</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">npx create-next-app --example with-turbopack
</span></code></pre></div><p><img alt="Next13 playground" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3645e2f3424944bf8d1f884dea4536c0~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>这是启动后的界面，这个 demo 不是一个简单的页面，而是一个包含了深度嵌套路由的例子。</p><p>下图我开发时的截图，Turbopack 直接在命令行中打印出了构建时间，我们看到启动时间只需要 2.3ms</p><p><img alt="更新速度" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d64b6e42bd44bcf8e72aa5c01dae683~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>试着修改代码，程序会自动热更新，绝大多数次数更新时间都很快，但偶尔有几次更新时间却很长，图片中有一处需要 16s（我使用的是 Mac M1)，这其中的原因就不得而知了，尤大也发布了<a target="_blank" rel="noopener noreferrer" href="https://github.com/yyx990803/vite-vs-next-turbo-hmr" title="vite 对比 next turbo 热更新">测评</a>，使用 1000 个节点来对比更新速度，数据显示：根组件与 vite 时间几乎相同，叶子节点比 vite 快 68%，与官方称比 vite 快 10 倍相差甚远。当然目前 Turbopack 还处于 alpha 阶段，期待 Turbopack 能够尽快推出正式版。</p><h3 id="turbopack-特点"><a href="#turbopack-特点" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Turbopack 特点</h3><ul><li>开箱即用 TypeScript, JSX, CSS, CSS Modules, WebAssembly 等</li><li>增量计算： Turbopack 是建立在 Turbo 之上的，Turbo 是基于 Rust 的开源、增量记忆化框架，除了可以缓存代码，还可以缓存函数运行结果。</li><li>懒编译：例如，如果访问 localhost:3000，它将仅打包 <code>pages/index.jsx</code>，以及导入的模块。</li></ul><h3 id="为什么不选择-vite-和-esbuild"><a href="#为什么不选择-vite-和-esbuild" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>为什么不选择 Vite 和 Esbuild？</h3><p>Vite 依赖于浏览器的原生 ES Modules 系统，不需要打包代码，这种方法只需要转换单个 JS 文件，响应更新很快，但是如果文件过多，这种方式会导致浏览器大量级联网络请求，会导致启动时间相对较慢。所以作者选择同 webpack 一样方式，打包，但是使用了 Turbo 构建引擎，一个增量记忆化框架，永远不会重复相同的工作。</p><p>Esbuild 是一个非常快速的打包工具，但它并没有做太多的缓存，也没有 HMR（热更新），所以在开发环境下不适用。</p><h2 id="为什么要改基于文件的路由系统"><a href="#为什么要改基于文件的路由系统" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>为什么要改基于文件的路由系统</h2><p>Next 13 另一个比较大的改动是基于文件的路由系统，增加了一个 <code>app</code> 目录，每一层路由必须建一个文件夹，在该文件夹中建立 <code>page.tsx</code> 作为该路由主页面</p><p><img alt="App目录路由系统" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9741de1ba84b4b478863c0a8155cc6a6~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>而在 Next.js 12（以及以下）对应的路由系统，是所有路由文件都写在 <code>pages</code> 目录下，每个文件都会生成一个路由，很明显是这种方式更加简洁。</p><p><img alt="pages 目录路由吸引" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ce5b803507740939189f51628f58bb0~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>那么，Next.js 为什么要改基于文件的路由系统呢？</p><p>主要有以下 3 点原因:</p><ol><li>实现嵌套路由和持久化缓存</li><li>支持 React 18 中的 React server Component，实现 Streaming（流渲染）</li><li>实现代码目录分组，将当前路由下的测试文件、组件、样式文件友好地放在一起，避免全局查找</li></ol><h2 id="nextjs-12-中-layout-实现方式"><a href="#nextjs-12-中-layout-实现方式" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Next.js 12 中 Layout 实现方式</h2><p>Tailwindcss 的作者 Adam Wathan 早在 2019 年就写过一篇博客，关于 <a target="_blank" rel="noopener noreferrer" href="https://adamwathan.me/2019/10/17/persistent-layout-patterns-in-nextjs/" title="Next.js 如何实现持久化缓存">Next.js 如何实现持久化缓存</a></p><p>其中有个<a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/0-no-persistent-layout-elements-o13dt?from-embed" title="next 整个页面刷新例子">demo</a>能够很好的说明 next.js 不能实现持久化缓存，大家可以在 codesandbox 中体验。</p><p><img alt="切换导航，整个页面刷新" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bdd9894bbd340bd9cae762a06bbff88~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>实现方式是每个 page 页面直接引用 components 文件下的导航组件，当点击横向滚动条后面的导航页面，会导致整个页面都刷新，从而没有记录滚条的位置。</p><p>他解决办法是，需要通过往 Page 页面函数上添加静态方法<code>getLayout</code>来实现，详情代码可以看这个<a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/5-getlayout-function-on-page-and-layout-components-7e1bg?from-embed" title="getlayout 实现导航不刷新">例子</a>。</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// /pages/account-settings/basic-information.js</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">SiteLayout</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;../../components/SiteLayout&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getLayout <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;../../components/AccountSettingsLayout&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function function-variable"><span class="token maybe-class-name">AccountSettingsBasicInformation</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token maybe-class-name">AccountSettingsBasicInformation</span><span class="token punctuation">.</span><span class="token property-access">getLayout</span> <span class="token operator">=</span> getLayout
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">AccountSettingsBasicInformation</span>
</span></code></pre></div><p>比如上面例子中的<code>账户设置—-&gt;基本信息</code>页面代码，是在 Page 页面中绑定 <code>getLayout</code> 静态方法，<code>getLayout</code> 返回页面的公共导航组件。</p><p>在 <code>_app.tsx</code> 中调用 <code>getLayout</code> 方法，从而区别各个页面的 <code>layout</code> 布局不同。</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">React</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">App</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;next/app&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token maybe-class-name">Component</span><span class="token punctuation">,</span> pageProps<span class="token punctuation">,</span> router <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span>
</span><span class="code-line">    <span class="token keyword">const</span> getLayout <span class="token operator">=</span> <span class="token maybe-class-name">Component</span><span class="token punctuation">.</span><span class="token property-access">getLayout</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> page<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token function">getLayout</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Component</span> <span class="token punctuation">{</span><span class="token operator spread">...</span>pageProps<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Component</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">MyApp</span>
</span></code></pre></div><p>如果你也有之前的 Next 项目，也需要实现持久化缓存，可以参考这个例子。</p><h2 id="app-文件夹下的约定式路由"><a href="#app-文件夹下的约定式路由" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>app 文件夹下的约定式路由</h2><p>Next13 新增了 <code>app 文件夹</code> 来实现<strong>约定式路由</strong>，完美地实现了持久化缓存，以下是官方 <code>with-turbopack</code> 项目下部分页面结构</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">./app
</span><span class="code-line">├── GlobalNav.tsx
</span><span class="code-line">├── layout.tsx
</span><span class="code-line">├── page.tsx
</span><span class="code-line">├── layouts
</span><span class="code-line">│   ├── CategoryNav.tsx
</span><span class="code-line">│   ├── [categorySlug]
</span><span class="code-line">│   │   ├── SubCategoryNav.tsx
</span><span class="code-line">│   │   ├── [subCategorySlug]
</span><span class="code-line">│   │   │   └── page.tsx
</span><span class="code-line">│   │   ├── layout.tsx
</span><span class="code-line">│   │   ├── page.tsx
</span><span class="code-line">│   │   └── template.tsx
</span><span class="code-line">│   ├── layout.tsx
</span><span class="code-line">│   ├── page.tsx
</span><span class="code-line">│   └── template.tsx
</span></code></pre></div><p>对应的页面效果如下图</p><p><img alt="next playground 嵌套路由" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a650b7ba8e2430286fcb1214ce084a4~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>我们看到每个文件下都有 3 个文件 <code>layout.tsx</code>、<code>page.tsx</code> 、<code>template.tsx</code>、</p><ul><li><code>layout.tsx</code> 该路由下的公共导航，切换路由时，不会刷新，我们可以看箭头处的 Count 组件，并没有刷新</li><li><code>template.tsx</code> 该路由下的公共部分，切换路由时，会刷新</li><li><code>page.tsx</code> 该路由的主页面</li></ul><p>当我们点击导航时候，页面上刷新部分边框会高亮闪烁，我们可以很好地理解代码目录结构组织与页面呈现的路由和渲染。</p><p>在 app 目录下每个文件夹下，还可以有 <code>loading.tsx</code>、<code>error.tsx</code></p><ul><li><code>loading.tsx</code> 该路由的主页面在异步渲染中，会显示的 loading 组件的内容；例如我们可以用它来写骨架屏（Skeleton）</li><li><code>error.tsx</code> 该路由的页面渲染出错，会显示该页面，也就是封装了 React 的 ErrorBoundary。</li></ul><p>以上除了 <code>page.tsx</code> 其他文件都是可选的，除了这些约定名称的文件外，我们可以建立任意文件，比如 <code>components.tsx</code>、 <code>test.tsx</code> 等自定义文件。app 目录可以很好地将页面、组件、测试文件放在一起，管理代码目录，避免开发时全局查找。</p><h3 id="路由分组"><a href="#路由分组" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>路由分组</h3><p>app 同层级目录下还支持多个 <code>layout</code>， 使用 <code>（文件夹）</code>区分，<code>（文件夹）</code>不会体现在路由上，只是单纯用来做代码分组。</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">./app
</span><span class="code-line">├── (checkout)
</span><span class="code-line">│   ├── checkout
</span><span class="code-line">│   │   └── page.tsx
</span><span class="code-line">│   ├── layout.tsx
</span><span class="code-line">│   └── template.tsx
</span><span class="code-line">├── (main)
</span><span class="code-line">│   ├── layout.tsx
</span><span class="code-line">│   ├── page.tsx
</span><span class="code-line">│   └── template.tsx
</span></code></pre></div><p>比如官方 playground 中关于电子商务的例子，<code>main</code> 和 <code>checkout</code> 的 layout 是不同的，可以根据实现功能自定义分组代码目录。</p><p><img alt="playground 路由分组场景" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2370250c45f4eecb9f3725af5619af7~tplv-k3u1fbpfcp-zoom-1.image"/></p><h2 id="react-server-components"><a href="#react-server-components" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>React Server Components</h2><p><strong>在 app 目录下的组件默认都是 React Server Components</strong>，那么 React Server Components 有什么优势呢？</p><p>这里有几个概念</p><ul><li><p>CSR:所有前端打包到前端，通常会引起浏览器加载 JavaScript 过大，从而导致首屏白屏时间过长</p></li><li><p>SSR：数据在服务端请求，通过 <code>renderToString</code> 方法将字符串 DOM 结构输出给浏览器，此时浏览器还不能交互，React 不能管理已经存在的 DOM，需要重新执行一遍，这个过程叫“注水”（Hydrate）。Next12 <code>getServerSideProps</code> 的渲染方式也就是 SSR。</p></li></ul><p>SSR 解决了白屏时间过长的问题和 SEO 的问题，但也并不是完美的，过多的请求会导致服务端响应时间变长，“注水”（Hydrate）的过程也会导致客户端代码量的增加。</p><p><img alt="博客页面" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02ffd647cc324fd9a750620fe7a024a0~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>比如一个传统的博客页面采用 Next12 的方式使用<code>getServerSideProps</code> 的方式渲染，那么就需要等 3 个接口全部返回才可以看到页面。</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 每次请求执行</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getServerSideProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getBlogList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> detail <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getBlogDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// Pass data to the page via props</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> detail<span class="token punctuation">,</span> comments <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><ul><li>React Server Components ( <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/37" title="react-18 discussions">RFC</a> ) 与传统的 SSR 不同，优点是拥有<strong>流式 HTML 和选择性注水</strong></li></ul><p>React <code>Suspense</code> API 解锁了 React 18 中的两个主要 SSR 功能：</p><ul><li><p>在服务器上流式传输 HTML。</p><p>要实现这个功能，需要从原来的方法切换<code>renderToString</code>切换到新<code>renderToPipeableStream</code>方法。</p></li><li><p>客户端的选择性注水作用。</p><p>使用 <code>hydrateRoot</code> 代替 <code>createRoot</code> 方法。</p></li></ul><p>比如上面的博客实例，评论接口查询速度较慢，就可以使用 <code>Suspense</code> 实现流渲染。</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> lazy <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token maybe-class-name">Comments</span> <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./Comments.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token comment">//...</span>
</span><span class="code-line"><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">  <span class="token operator">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token maybe-class-name">NavBar</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token maybe-class-name">Sidebar</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token maybe-class-name">RightPane</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span><span class="token maybe-class-name">Post</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span><span class="token maybe-class-name">Suspense</span> fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Spinner</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</span><span class="code-line">        <span class="token operator">&lt;</span><span class="token maybe-class-name">Comments</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">RightPane</span><span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Layout</span><span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code></pre></div><p><img alt="react server component 流渲染" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a8a0ce34e2748cb99cdfc7be6bfc21f~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>如图所示</p><ul><li>灰色部分代表 HTML 字符串返回</li><li>loading 状态表示当前部分还在请求</li><li>绿色部分代表注水成功，页面可以交互</li></ul><p>所谓的流就是通过 script 动态返回最小 html，并且插入到正确的位置，页面中如果有多个 Suspense，是没有先后顺序的，React Server Components 是并行的。</p><p>以上内容在<a target="_blank" rel="noopener noreferrer" href="https://github.com/reactwg/react-18/discussions/37">《New Suspense SSR Architecture in React 18》</a> 中可以找到，而要搭建 react 流渲染的架构相对比较复杂，大家可以看 gaearon dan 的 <a target="_blank" rel="noopener noreferrer" href="https://codesandbox.io/s/kind-sammet-j56ro?file=/src/App.js" title="gaearon dan 的示例">demo</a>，而 Next.js 13 只需要在 app 目录下，按照约定的文件名称写，就可以自动实现 React Server Components。</p><h2 id="实现流渲染"><a href="#实现流渲染" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>实现流渲染</h2><p><img alt="server component 流渲染" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c136ba32d1eb4ae5a049839506a2f000~tplv-k3u1fbpfcp-zoom-1.image"/></p><p>除了 app 目录下嵌套路由部分 next.js 会帮我们默认采用 React Server Components，我们在 page 页面中，也可以实现。</p><p>实现方式也很简单，组件外层使用 <code>Suspense</code></p><div class="relative"><pre><code class="code-highlight language-jsx"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">SkeletonCard</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;@/ui/SkeletonCard&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Suspense</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Description</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;./description&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Posts</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span>
</span></span><span class="code-line"><span class="token tag">        <span class="token attr-name">fallback</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token language-javascript script">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h-40 w-full <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span></span></span><span class="code-line"><span class="token tag"><span class="token language-javascript script"><span class="token plain-text">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SkeletonCard</span></span> <span class="token attr-name">isLoading</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span></span></span><span class="code-line"><span class="token tag"><span class="token language-javascript script"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token tag"><span class="token language-javascript script">        <span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Description</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>组件数据请求使用 <code>use</code> API，就可以实现流渲染了。</p><div class="relative"><pre><code class="code-highlight language-tsx"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> use <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name known-class-name">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;http://www.example.com/api/data&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function property-access method">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> res<span class="token punctuation">.</span><span class="token function property-access method">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Description</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token function">fetchDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p><strong>使用场景</strong></p><p>从官方的 playground 中看，在一些请求较慢的接口，比如电商网站中的价格计算，若要使用服务端渲染，就可以使用 server Component。 <img alt="价格计算使用场景" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81c7d33b32b240e299e2d82c0dbda382~tplv-k3u1fbpfcp-zoom-1.image"/></p><h2 id="服务端组件和客户端组件"><a href="#服务端组件和客户端组件" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>服务端组件和客户端组件</h2><p>Next.js 最大的优势就是我们只需要一个工程，就可以搞定前端工程和后端工程，哪些是前端代码和哪些是后端代码，Next.js 在打包的时候就会帮我们自动区分，这需要开发者清楚地理解，自己写的代码哪些是在服务端执行，哪些是在客户端执行。</p><h3 id="next12-区分"><a href="#next12-区分" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Next12 区分</h3><p>我们知道 Page 函数都是在服务端执行的，包括 <code>getServerSideProps</code>、<code>getStaticPaths</code>、<code>getStaticProps</code>，那么如果需要在客户端执行有以下 2 种方式；</p><ul><li>在 <code>useEffect</code>、 <code>onChange</code> 等回调函数中使用，比如下面例子，动态加载了 <code>fuse.js</code>，实现模糊搜索。</li></ul><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;Tim&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Joe&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bel&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Lee&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>results<span class="token punctuation">,</span> setResults<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>input
</span><span class="code-line">        type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
</span><span class="code-line">        placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
</span><span class="code-line">        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token keyword">const</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">currentTarget</span>
</span><span class="code-line">          <span class="token comment">// Dynamically load fuse.js</span>
</span><span class="code-line">          <span class="token keyword">const</span> <span class="token maybe-class-name">Fuse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">&#x27;fuse.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword module">default</span>
</span><span class="code-line">          <span class="token keyword">const</span> fuse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fuse</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">          <span class="token function">setResults</span><span class="token punctuation">(</span>fuse<span class="token punctuation">.</span><span class="token function property-access method">search</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>pre<span class="token operator">&gt;</span><span class="token maybe-class-name">Results</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token class-name known-class-name">JSON</span><span class="token punctuation">.</span><span class="token function property-access method">stringify</span><span class="token punctuation">(</span>results<span class="token punctuation">,</span> <span class="token keyword nil null">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pre<span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><ul><li>如果依赖了外部组件，或者 window 对象，可以使用 <code>next/dynamic</code> 并且设置 <code>ssr</code> 为 <code>false</code></li></ul><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">dynamic</span> <span class="token keyword module">from</span> <span class="token string">&#x27;next/dynamic&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token maybe-class-name">DynamicHeader</span> <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">&#x27;../components/header&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">ssr</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><h3 id="next13-区分"><a href="#next13-区分" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Next13 区分</h3><p>在 Next13 中 ， 在 app 目录下，如要使用 <code>useState</code> 等状态管理的 hook，那么该组件只在客户端执行，需要在首行加入 <code>&#x27;use client&#x27;</code> 指令。</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token string">&#x27;use client&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Counter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token maybe-class-name">You</span> clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator arrow">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Click</span> me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p><strong>该区分服务端组件和客户端组件</strong>，下表列出了常用使用场景</p><table><thead><tr><th>使用场景</th><th>服务端组件</th><th>客户端组件</th></tr></thead><tbody><tr><td>fetch 请求数据。</td><td>✅</td><td>[⚠️]</td></tr><tr><td>访问后端资源（直接）</td><td>✅</td><td>❌</td></tr><tr><td>在服务器上保留敏感信息（访问令牌、API 密钥等）</td><td>✅</td><td>❌</td></tr><tr><td>保持对服务器的大量依赖/减少客户端 JavaScript</td><td>✅</td><td>❌</td></tr><tr><td>添加交互和事件侦听器（<code>onClick()</code>,<code>onChange()</code>等）</td><td>❌</td><td>✅</td></tr><tr><td>使用状态和生命周期效果（<code>useState()</code>, <code>useReducer()</code>, <code>useEffect()</code>, 等）</td><td>❌</td><td>✅</td></tr><tr><td>使用仅限浏览器的 API(window)</td><td>❌</td><td>✅</td></tr><tr><td>使用依赖于状态、效果或仅浏览器 API 的自定义 hooks</td><td>❌</td><td>✅</td></tr><tr><td>使用<code>React 类组件</code></td><td>❌</td><td>✅</td></tr></tbody></table><h2 id="数据请求"><a href="#数据请求" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>数据请求</h2><p>使用 react 的 use 函数加 fetch API 来实现：静态站点生成（SSG）、服务器端渲染（SSR）和增量静态再生（ISR）</p><p>在 Page 页面使用 fetch：</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> use <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;...&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token literal-property property">name</span><span class="token operator">:</span> string <span class="token operator">=</span> <span class="token keyword control-flow">await</span> res<span class="token punctuation">.</span><span class="token function property-access method">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> name
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Page</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 支持的全类型的数据格式</span>
</span><span class="code-line">  <span class="token comment">// 可以返回不用序列化的格式数据</span>
</span><span class="code-line">  <span class="token comment">// 因此可以返回 Date, Map, Set, 等.</span>
</span><span class="code-line">  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token string">&#x27;...&#x27;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>fetch 的缓存策略</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 请求被缓存</span>
</span><span class="code-line"><span class="token comment">// 相当于 `getStaticProps`.</span>
</span><span class="code-line"><span class="token comment">// `force-cache` 是默认值，可以省略</span>
</span><span class="code-line"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token string">&#x27;force-cache&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 每次刷新都会重新请求.</span>
</span><span class="code-line"><span class="token comment">// 相当于 `getServerSideProps`.</span>
</span><span class="code-line"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token string">&#x27;no-store&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 请求被缓存10s，10s 重新生成</span>
</span><span class="code-line"><span class="token comment">// 相当于 `getStaticProps` 加上 `revalidate` 参数.</span>
</span><span class="code-line"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">revalidate</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code></pre></div><p>使用这种方式的优点是，当请求数据的增加，打包后前端 JavaScript 的大小不会增加。</p><h2 id="新的-nextimage"><a href="#新的-nextimage" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>新的 next/image</h2><p>我们知道在 Next.js 12 之前，使用 <code>&lt;img&gt;</code>标签，eslint 会有一个警告，提示我们必须使用 <code>next/image</code> 组件， 因为 <code>next/image</code> 帮我们做了几点优化</p><ul><li>自动优化图片格式</li><li>自动缩放图片大小</li><li>使用<code>Intersection Observer API</code> 实现懒加载</li></ul><p>所以 image 必须加上 <code>width</code> 和 <code>height</code> 参数</p><p>新的 Next/image 使用了浏览器的 <a target="_blank" rel="noopener noreferrer" href="https://web.dev/browser-level-image-lazy-loading/" title="image-lazy-loading">lazy-loading</a> 代替了 <code>Intersection Observer API</code> 默认情况下需要 alt 标记，因此减少了客户端 JavaScript 代码，当然这个属性对浏览器要求较高，要求 chrome 77+。</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Image</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;next/image&#x27;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">avatar</span> <span class="token keyword module">from</span> <span class="token string">&#x27;./lee.png&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Home</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 为了提高可访问性 &quot;alt&quot; 属性是必须的</span>
</span><span class="code-line">  <span class="token comment">// 图片可以使用放在 `app/`  目录下</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token operator">&lt;</span><span class="token maybe-class-name">Image</span> alt<span class="token operator">=</span><span class="token string">&quot;leeerob&quot;</span> src<span class="token operator">=</span><span class="token punctuation">{</span>avatar<span class="token punctuation">}</span> placeholder<span class="token operator">=</span><span class="token string">&quot;blur&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="nextfont"><a href="#nextfont" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>@next/font</h2><p>加入了一个新的包，可以在构建时直接引用 google 字体和本地字体，实现字体的托管和预加载，这点对英文网站很有用，中文网站一般不加载字体，图标建议使用 svg。</p><p>加载谷歌字体</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Inter</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;@next/font/google&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> inter <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">Inter</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token operator">&lt;</span>html className<span class="token operator">=</span><span class="token punctuation">{</span>inter<span class="token punctuation">.</span><span class="token property-access">className</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</span></code></pre></div><p>加载本地字体</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports">localFont</span> <span class="token keyword module">from</span> <span class="token string">&#x27;@next/font/local&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> myFont <span class="token operator">=</span> <span class="token function">localFont</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&#x27;./my-font.woff2&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token operator">&lt;</span>html className<span class="token operator">=</span><span class="token punctuation">{</span>myFont<span class="token punctuation">.</span><span class="token property-access">className</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</span></code></pre></div><h2 id="nextlink"><a href="#nextlink" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>next/link</h2><p>自动加上 <code>&lt;a&gt;</code>标签。</p><p>Next.js 12: 需要<code>&lt;a&gt;</code> 包裹</p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Link</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;next/link&#x27;</span>
</span><span class="code-line"><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token maybe-class-name">About</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">&gt;</span>
</span></code></pre></div><p>Next.js 13: <code>&lt;Link&gt;</code> 不需要 <code>&lt;a&gt;</code></p><div class="relative"><pre><code class="language-js code-highlight"><span class="code-line"><span class="token operator">&lt;</span><span class="token maybe-class-name">Link</span> href<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">About</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">&gt;</span>
</span></code></pre></div><h2 id="小结"><a href="#小结" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>小结</h2><p>本文主要结合了 <a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/blog/next-13">Next13 官网博客</a> 摘取了部分内容，结合笔者对 Next.js 的理解和分析，介绍了其变动、使用方法，以及其改动原因， Next13 这次更新主要与 React server component 深度结合，在&quot;用户体验、可维护性、性能&quot;这几个方面都带来了巨大的提升，本以为 React 的 Server component 还遥不可及，但 Next13 却让我们触手可及， Next13 也将成为升级 React18 的首选框架，未来前后端并行的开发模式或许能够成为主流，这也将是对前端开发者的一个挑战。</p><p>以上就是本文的全部内容，关于 Next13 你学会了吗？欢迎在评论区留言讨论，文中若有不正之处，万望告知。</p></div><div class="border-t border-gray-200 pt-6 pb-6 text-sm text-gray-700 dark:border-gray-700 dark:text-gray-300"><div class="mb-3"><img alt="runjs-cool" width="384" height="140" src="/static/images/runjs-cool.webp"/></div><span>关注微信公众号，获取最新原创文章（首发）</span><a target="_blank" rel="noopener noreferrer" href="https://github.com/balac2015/blob/main/data/blog/你好，Next.js 13.md">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">标签</h2><div class="mt-3 flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/turbopack">Turbopack</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/reactjs">React.js</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">上一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/%E4%BD%BF%E7%94%A8%20Vitest%20%E5%92%8C%20React%20Testing%20Library%20%E7%BB%99%20Next.js%20%E5%BA%94%E7%94%A8%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">使用 Vitest 和 React Testing Library 给 Next.js 应用单元测试</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">下一篇 文章</h2><div class="mt-3 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/%E7%90%86%E8%A7%A3%20Next.js%20%E4%B8%AD%E7%9A%84%20CSR%E3%80%81SSR%E3%80%81SSG%E3%80%81ISR%20%E4%BB%A5%E5%8F%8A%20Streaming">理解 Next.js 中的 CSR、SSR、SSG、ISR 以及 Streaming</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← 返回文章列表</a></div></footer></div></div></article></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var p=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var o=a=\u003et(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),g=(a,s)=\u003e{for(var c in s)t(a,c,{get:s[c],enumerable:!0})},i=(a,s,c,n)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let l of m(s))!k.call(a,l)\u0026\u0026(c||l!==\"default\")\u0026\u0026t(a,l,{get:()=\u003es[l],enumerable:!(n=h(s,l))||n.enumerable});return a},y=(a,s)=\u003ei(o(t(a!=null?p(N(a)):{},\"default\",!s\u0026\u0026a\u0026\u0026a.__esModule?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a),f=(a=\u003e(s,c)=\u003ea\u0026\u0026a.get(s)||(c=i(o({}),s,1),a\u0026\u0026a.set(s,c),c))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var d=u((v,r)=\u003e{r.exports=_jsx_runtime});var j={};g(j,{default:()=\u003ew,frontmatter:()=\u003eb});var e=y(d()),b={title:\"\\u4F60\\u597D\\uFF0CNext.js 13\",date:\"2022/10/30 07:48:04\",lastmod:\"2023/1/25 11:42:52\",tags:[\"Turbopack\",\"React.js\"],draft:!1,summary:\"\\u4E0A\\u5468\\u53D1\\u5E03\\u4E86 Next.js \\u7684\\u4E00\\u4E2A\\u5168\\u65B0\\u7684\\u7248\\u672C 13\\uFF0C\\u5B83\\u5E26\\u6765\\u4E86\\u5168\\u65B0\\u7684\\u7406\\u5FF5\\uFF08server component\\uFF09\\uFF0C\\u4F5C\\u4E3A\\u4E00\\u540D Next.js \\u7684\\u7231\\u597D\\u8005\\uFF0C\\u6211\\u4EEC\\u6709\\u5FC5\\u8981\\u91CD\\u65B0\\u5B66\\u4E60\\u548C\\u8BA4\\u8BC6\\u4E0B\\u5B83\\u3002\",images:\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a99af6f1111845878f6401b0d6abeed8~tplv-k3u1fbpfcp-watermark.image?\",authors:[\"default\"],layout:\"PostLayout\"};function x(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({hr:\"hr\",p:\"p\",blockquote:\"blockquote\",h2:\"h2\",a:\"a\",span:\"span\",pre:\"pre\",code:\"code\",img:\"img\",h3:\"h3\",ul:\"ul\",li:\"li\",ol:\"ol\",strong:\"strong\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.hr,{}),(0,e.jsx)(n.p,{children:\"theme: vuepress highlight: monokai\"}),(0,e.jsx)(n.hr,{}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"\\u6587\\u7AE0\\u4E3A\\u7A00\\u571F\\u6398\\u91D1\\u6280\\u672F\\u793E\\u533A\\u9996\\u53D1\\u7B7E\\u7EA6\\u6587\\u7AE0\\uFF0C14 \\u5929\\u5185\\u7981\\u6B62\\u8F6C\\u8F7D\\uFF0C14 \\u5929\\u540E\\u672A\\u83B7\\u6388\\u6743\\u7981\\u6B62\\u8F6C\\u8F7D\\uFF0C\\u4FB5\\u6743\\u5FC5\\u7A76\\uFF01\"})}),(0,e.jsxs)(n.h2,{id:\"\\u524D\\u8A00\",children:[(0,e.jsx)(n.a,{href:\"#\\u524D\\u8A00\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u524D\\u8A00\"]}),(0,e.jsx)(n.p,{children:\"\\u4E0A\\u5468\\u53D1\\u5E03\\u4E86 Next.js \\u7684\\u4E00\\u4E2A\\u5168\\u65B0\\u7684\\u7248\\u672C 13\\uFF0C\\u5B83\\u5E26\\u6765\\u4E86\\u5168\\u65B0\\u7684\\u7406\\u5FF5\\uFF08server component\\uFF09\\uFF0C\\u4F5C\\u4E3A\\u4E00\\u540D Next.js \\u7684\\u7231\\u597D\\u8005\\uFF0C\\u6211\\u4EEC\\u6709\\u5FC5\\u8981\\u91CD\\u65B0\\u5B66\\u4E60\\u548C\\u8BA4\\u8BC6\\u4E0B\\u5B83\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"turbopack\",children:[(0,e.jsx)(n.a,{href:\"#turbopack\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Turbopack\"]}),(0,e.jsx)(n.p,{children:\"\\u9996\\u5148\\u662F\\u6700\\u5F15\\u5165\\u6CE8\\u76EE\\u7684\\uFF0C\\u5728 Next13 \\u4E2D\\u52A0\\u5165\\u4E86\\u5168\\u65B0\\u7684\\u6253\\u5305\\u5DE5\\u5177 Turbopack\\uFF0C \\u5B83\\u662F\\u51FA\\u81EA Webpack \\u4F5C\\u8005 TobiasKoppers \\u4E4B\\u624B\\uFF0C\\u5B98\\u65B9\\u63CF\\u8FF0\\u662F\\uFF1A\\u5F00\\u53D1\\u65F6\\u66F4\\u65B0\\u901F\\u5EA6\\u6BD4 Webpack \\u5FEB 700 \\u500D\\u3001\\u6BD4 Vite \\u5FEB 10 \\u500D\\uFF0C\\u662F\\u4E0D\\u662F\\u6709\\u70B9\\u8FEB\\u4E0D\\u53CA\\u5F85\\uFF0C\\u60F3\\u8981\\u719F\\u624B\\u4F53\\u9A8C\\u4E86\\u5462\\uFF1F\\u6211\\u4EEC\\u76F4\\u63A5\\u4F7F\\u7528\\u5B98\\u65B9\\u63D0\\u4F9B\\u7684 cli \\u521B\\u5EFA\\u4E00\\u4E2A Next.js \\u5DE5\\u7A0B\\u3002\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`npx create-next-app --example with-turbopack\n`})})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"Next13 playground\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3645e2f3424944bf8d1f884dea4536c0~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsx)(n.p,{children:\"\\u8FD9\\u662F\\u542F\\u52A8\\u540E\\u7684\\u754C\\u9762\\uFF0C\\u8FD9\\u4E2A demo \\u4E0D\\u662F\\u4E00\\u4E2A\\u7B80\\u5355\\u7684\\u9875\\u9762\\uFF0C\\u800C\\u662F\\u4E00\\u4E2A\\u5305\\u542B\\u4E86\\u6DF1\\u5EA6\\u5D4C\\u5957\\u8DEF\\u7531\\u7684\\u4F8B\\u5B50\\u3002\"}),(0,e.jsx)(n.p,{children:\"\\u4E0B\\u56FE\\u6211\\u5F00\\u53D1\\u65F6\\u7684\\u622A\\u56FE\\uFF0CTurbopack \\u76F4\\u63A5\\u5728\\u547D\\u4EE4\\u884C\\u4E2D\\u6253\\u5370\\u51FA\\u4E86\\u6784\\u5EFA\\u65F6\\u95F4\\uFF0C\\u6211\\u4EEC\\u770B\\u5230\\u542F\\u52A8\\u65F6\\u95F4\\u53EA\\u9700\\u8981 2.3ms\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"\\u66F4\\u65B0\\u901F\\u5EA6\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d64b6e42bd44bcf8e72aa5c01dae683~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsxs)(n.p,{children:[\"\\u8BD5\\u7740\\u4FEE\\u6539\\u4EE3\\u7801\\uFF0C\\u7A0B\\u5E8F\\u4F1A\\u81EA\\u52A8\\u70ED\\u66F4\\u65B0\\uFF0C\\u7EDD\\u5927\\u591A\\u6570\\u6B21\\u6570\\u66F4\\u65B0\\u65F6\\u95F4\\u90FD\\u5F88\\u5FEB\\uFF0C\\u4F46\\u5076\\u5C14\\u6709\\u51E0\\u6B21\\u66F4\\u65B0\\u65F6\\u95F4\\u5374\\u5F88\\u957F\\uFF0C\\u56FE\\u7247\\u4E2D\\u6709\\u4E00\\u5904\\u9700\\u8981 16s\\uFF08\\u6211\\u4F7F\\u7528\\u7684\\u662F Mac M1)\\uFF0C\\u8FD9\\u5176\\u4E2D\\u7684\\u539F\\u56E0\\u5C31\\u4E0D\\u5F97\\u800C\\u77E5\\u4E86\\uFF0C\\u5C24\\u5927\\u4E5F\\u53D1\\u5E03\\u4E86\",(0,e.jsx)(n.a,{href:\"https://github.com/yyx990803/vite-vs-next-turbo-hmr\",title:\"vite \\u5BF9\\u6BD4 next turbo \\u70ED\\u66F4\\u65B0\",children:\"\\u6D4B\\u8BC4\"}),\"\\uFF0C\\u4F7F\\u7528 1000 \\u4E2A\\u8282\\u70B9\\u6765\\u5BF9\\u6BD4\\u66F4\\u65B0\\u901F\\u5EA6\\uFF0C\\u6570\\u636E\\u663E\\u793A\\uFF1A\\u6839\\u7EC4\\u4EF6\\u4E0E vite \\u65F6\\u95F4\\u51E0\\u4E4E\\u76F8\\u540C\\uFF0C\\u53F6\\u5B50\\u8282\\u70B9\\u6BD4 vite \\u5FEB 68%\\uFF0C\\u4E0E\\u5B98\\u65B9\\u79F0\\u6BD4 vite \\u5FEB 10 \\u500D\\u76F8\\u5DEE\\u751A\\u8FDC\\u3002\\u5F53\\u7136\\u76EE\\u524D Turbopack \\u8FD8\\u5904\\u4E8E alpha \\u9636\\u6BB5\\uFF0C\\u671F\\u5F85 Turbopack \\u80FD\\u591F\\u5C3D\\u5FEB\\u63A8\\u51FA\\u6B63\\u5F0F\\u7248\\u3002\"]}),(0,e.jsxs)(n.h3,{id:\"turbopack-\\u7279\\u70B9\",children:[(0,e.jsx)(n.a,{href:\"#turbopack-\\u7279\\u70B9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Turbopack \\u7279\\u70B9\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u5F00\\u7BB1\\u5373\\u7528 TypeScript, JSX, CSS, CSS Modules, WebAssembly \\u7B49\"}),(0,e.jsx)(n.li,{children:\"\\u589E\\u91CF\\u8BA1\\u7B97\\uFF1A Turbopack \\u662F\\u5EFA\\u7ACB\\u5728 Turbo \\u4E4B\\u4E0A\\u7684\\uFF0CTurbo \\u662F\\u57FA\\u4E8E Rust \\u7684\\u5F00\\u6E90\\u3001\\u589E\\u91CF\\u8BB0\\u5FC6\\u5316\\u6846\\u67B6\\uFF0C\\u9664\\u4E86\\u53EF\\u4EE5\\u7F13\\u5B58\\u4EE3\\u7801\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u7F13\\u5B58\\u51FD\\u6570\\u8FD0\\u884C\\u7ED3\\u679C\\u3002\"}),(0,e.jsxs)(n.li,{children:[\"\\u61D2\\u7F16\\u8BD1\\uFF1A\\u4F8B\\u5982\\uFF0C\\u5982\\u679C\\u8BBF\\u95EE localhost:3000\\uFF0C\\u5B83\\u5C06\\u4EC5\\u6253\\u5305 \",(0,e.jsx)(n.code,{children:\"pages/index.jsx\"}),\"\\uFF0C\\u4EE5\\u53CA\\u5BFC\\u5165\\u7684\\u6A21\\u5757\\u3002\"]})]}),(0,e.jsxs)(n.h3,{id:\"\\u4E3A\\u4EC0\\u4E48\\u4E0D\\u9009\\u62E9-vite-\\u548C-esbuild\",children:[(0,e.jsx)(n.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u4E0D\\u9009\\u62E9-vite-\\u548C-esbuild\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u4E0D\\u9009\\u62E9 Vite \\u548C Esbuild\\uFF1F\"]}),(0,e.jsx)(n.p,{children:\"Vite \\u4F9D\\u8D56\\u4E8E\\u6D4F\\u89C8\\u5668\\u7684\\u539F\\u751F ES Modules \\u7CFB\\u7EDF\\uFF0C\\u4E0D\\u9700\\u8981\\u6253\\u5305\\u4EE3\\u7801\\uFF0C\\u8FD9\\u79CD\\u65B9\\u6CD5\\u53EA\\u9700\\u8981\\u8F6C\\u6362\\u5355\\u4E2A JS \\u6587\\u4EF6\\uFF0C\\u54CD\\u5E94\\u66F4\\u65B0\\u5F88\\u5FEB\\uFF0C\\u4F46\\u662F\\u5982\\u679C\\u6587\\u4EF6\\u8FC7\\u591A\\uFF0C\\u8FD9\\u79CD\\u65B9\\u5F0F\\u4F1A\\u5BFC\\u81F4\\u6D4F\\u89C8\\u5668\\u5927\\u91CF\\u7EA7\\u8054\\u7F51\\u7EDC\\u8BF7\\u6C42\\uFF0C\\u4F1A\\u5BFC\\u81F4\\u542F\\u52A8\\u65F6\\u95F4\\u76F8\\u5BF9\\u8F83\\u6162\\u3002\\u6240\\u4EE5\\u4F5C\\u8005\\u9009\\u62E9\\u540C webpack \\u4E00\\u6837\\u65B9\\u5F0F\\uFF0C\\u6253\\u5305\\uFF0C\\u4F46\\u662F\\u4F7F\\u7528\\u4E86 Turbo \\u6784\\u5EFA\\u5F15\\u64CE\\uFF0C\\u4E00\\u4E2A\\u589E\\u91CF\\u8BB0\\u5FC6\\u5316\\u6846\\u67B6\\uFF0C\\u6C38\\u8FDC\\u4E0D\\u4F1A\\u91CD\\u590D\\u76F8\\u540C\\u7684\\u5DE5\\u4F5C\\u3002\"}),(0,e.jsx)(n.p,{children:\"Esbuild \\u662F\\u4E00\\u4E2A\\u975E\\u5E38\\u5FEB\\u901F\\u7684\\u6253\\u5305\\u5DE5\\u5177\\uFF0C\\u4F46\\u5B83\\u5E76\\u6CA1\\u6709\\u505A\\u592A\\u591A\\u7684\\u7F13\\u5B58\\uFF0C\\u4E5F\\u6CA1\\u6709 HMR\\uFF08\\u70ED\\u66F4\\u65B0\\uFF09\\uFF0C\\u6240\\u4EE5\\u5728\\u5F00\\u53D1\\u73AF\\u5883\\u4E0B\\u4E0D\\u9002\\u7528\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"\\u4E3A\\u4EC0\\u4E48\\u8981\\u6539\\u57FA\\u4E8E\\u6587\\u4EF6\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\",children:[(0,e.jsx)(n.a,{href:\"#\\u4E3A\\u4EC0\\u4E48\\u8981\\u6539\\u57FA\\u4E8E\\u6587\\u4EF6\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u4E3A\\u4EC0\\u4E48\\u8981\\u6539\\u57FA\\u4E8E\\u6587\\u4EF6\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\"]}),(0,e.jsxs)(n.p,{children:[\"Next 13 \\u53E6\\u4E00\\u4E2A\\u6BD4\\u8F83\\u5927\\u7684\\u6539\\u52A8\\u662F\\u57FA\\u4E8E\\u6587\\u4EF6\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\\uFF0C\\u589E\\u52A0\\u4E86\\u4E00\\u4E2A \",(0,e.jsx)(n.code,{children:\"app\"}),\" \\u76EE\\u5F55\\uFF0C\\u6BCF\\u4E00\\u5C42\\u8DEF\\u7531\\u5FC5\\u987B\\u5EFA\\u4E00\\u4E2A\\u6587\\u4EF6\\u5939\\uFF0C\\u5728\\u8BE5\\u6587\\u4EF6\\u5939\\u4E2D\\u5EFA\\u7ACB \",(0,e.jsx)(n.code,{children:\"page.tsx\"}),\" \\u4F5C\\u4E3A\\u8BE5\\u8DEF\\u7531\\u4E3B\\u9875\\u9762\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"App\\u76EE\\u5F55\\u8DEF\\u7531\\u7CFB\\u7EDF\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9741de1ba84b4b478863c0a8155cc6a6~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsxs)(n.p,{children:[\"\\u800C\\u5728 Next.js 12\\uFF08\\u4EE5\\u53CA\\u4EE5\\u4E0B\\uFF09\\u5BF9\\u5E94\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\\uFF0C\\u662F\\u6240\\u6709\\u8DEF\\u7531\\u6587\\u4EF6\\u90FD\\u5199\\u5728 \",(0,e.jsx)(n.code,{children:\"pages\"}),\" \\u76EE\\u5F55\\u4E0B\\uFF0C\\u6BCF\\u4E2A\\u6587\\u4EF6\\u90FD\\u4F1A\\u751F\\u6210\\u4E00\\u4E2A\\u8DEF\\u7531\\uFF0C\\u5F88\\u660E\\u663E\\u662F\\u8FD9\\u79CD\\u65B9\\u5F0F\\u66F4\\u52A0\\u7B80\\u6D01\\u3002\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"pages \\u76EE\\u5F55\\u8DEF\\u7531\\u5438\\u5F15\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ce5b803507740939189f51628f58bb0~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsx)(n.p,{children:\"\\u90A3\\u4E48\\uFF0CNext.js \\u4E3A\\u4EC0\\u4E48\\u8981\\u6539\\u57FA\\u4E8E\\u6587\\u4EF6\\u7684\\u8DEF\\u7531\\u7CFB\\u7EDF\\u5462\\uFF1F\"}),(0,e.jsx)(n.p,{children:\"\\u4E3B\\u8981\\u6709\\u4EE5\\u4E0B 3 \\u70B9\\u539F\\u56E0:\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\u5B9E\\u73B0\\u5D4C\\u5957\\u8DEF\\u7531\\u548C\\u6301\\u4E45\\u5316\\u7F13\\u5B58\"}),(0,e.jsx)(n.li,{children:\"\\u652F\\u6301 React 18 \\u4E2D\\u7684 React server Component\\uFF0C\\u5B9E\\u73B0 Streaming\\uFF08\\u6D41\\u6E32\\u67D3\\uFF09\"}),(0,e.jsx)(n.li,{children:\"\\u5B9E\\u73B0\\u4EE3\\u7801\\u76EE\\u5F55\\u5206\\u7EC4\\uFF0C\\u5C06\\u5F53\\u524D\\u8DEF\\u7531\\u4E0B\\u7684\\u6D4B\\u8BD5\\u6587\\u4EF6\\u3001\\u7EC4\\u4EF6\\u3001\\u6837\\u5F0F\\u6587\\u4EF6\\u53CB\\u597D\\u5730\\u653E\\u5728\\u4E00\\u8D77\\uFF0C\\u907F\\u514D\\u5168\\u5C40\\u67E5\\u627E\"})]}),(0,e.jsxs)(n.h2,{id:\"nextjs-12-\\u4E2D-layout-\\u5B9E\\u73B0\\u65B9\\u5F0F\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-12-\\u4E2D-layout-\\u5B9E\\u73B0\\u65B9\\u5F0F\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Next.js 12 \\u4E2D Layout \\u5B9E\\u73B0\\u65B9\\u5F0F\"]}),(0,e.jsxs)(n.p,{children:[\"Tailwindcss \\u7684\\u4F5C\\u8005 Adam Wathan \\u65E9\\u5728 2019 \\u5E74\\u5C31\\u5199\\u8FC7\\u4E00\\u7BC7\\u535A\\u5BA2\\uFF0C\\u5173\\u4E8E \",(0,e.jsx)(n.a,{href:\"https://adamwathan.me/2019/10/17/persistent-layout-patterns-in-nextjs/\",title:\"Next.js \\u5982\\u4F55\\u5B9E\\u73B0\\u6301\\u4E45\\u5316\\u7F13\\u5B58\",children:\"Next.js \\u5982\\u4F55\\u5B9E\\u73B0\\u6301\\u4E45\\u5316\\u7F13\\u5B58\"})]}),(0,e.jsxs)(n.p,{children:[\"\\u5176\\u4E2D\\u6709\\u4E2A\",(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/0-no-persistent-layout-elements-o13dt?from-embed\",title:\"next \\u6574\\u4E2A\\u9875\\u9762\\u5237\\u65B0\\u4F8B\\u5B50\",children:\"demo\"}),\"\\u80FD\\u591F\\u5F88\\u597D\\u7684\\u8BF4\\u660E next.js \\u4E0D\\u80FD\\u5B9E\\u73B0\\u6301\\u4E45\\u5316\\u7F13\\u5B58\\uFF0C\\u5927\\u5BB6\\u53EF\\u4EE5\\u5728 codesandbox \\u4E2D\\u4F53\\u9A8C\\u3002\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"\\u5207\\u6362\\u5BFC\\u822A\\uFF0C\\u6574\\u4E2A\\u9875\\u9762\\u5237\\u65B0\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bdd9894bbd340bd9cae762a06bbff88~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsx)(n.p,{children:\"\\u5B9E\\u73B0\\u65B9\\u5F0F\\u662F\\u6BCF\\u4E2A page \\u9875\\u9762\\u76F4\\u63A5\\u5F15\\u7528 components \\u6587\\u4EF6\\u4E0B\\u7684\\u5BFC\\u822A\\u7EC4\\u4EF6\\uFF0C\\u5F53\\u70B9\\u51FB\\u6A2A\\u5411\\u6EDA\\u52A8\\u6761\\u540E\\u9762\\u7684\\u5BFC\\u822A\\u9875\\u9762\\uFF0C\\u4F1A\\u5BFC\\u81F4\\u6574\\u4E2A\\u9875\\u9762\\u90FD\\u5237\\u65B0\\uFF0C\\u4ECE\\u800C\\u6CA1\\u6709\\u8BB0\\u5F55\\u6EDA\\u6761\\u7684\\u4F4D\\u7F6E\\u3002\"}),(0,e.jsxs)(n.p,{children:[\"\\u4ED6\\u89E3\\u51B3\\u529E\\u6CD5\\u662F\\uFF0C\\u9700\\u8981\\u901A\\u8FC7\\u5F80 Page \\u9875\\u9762\\u51FD\\u6570\\u4E0A\\u6DFB\\u52A0\\u9759\\u6001\\u65B9\\u6CD5\",(0,e.jsx)(n.code,{children:\"getLayout\"}),\"\\u6765\\u5B9E\\u73B0\\uFF0C\\u8BE6\\u60C5\\u4EE3\\u7801\\u53EF\\u4EE5\\u770B\\u8FD9\\u4E2A\",(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/5-getlayout-function-on-page-and-layout-components-7e1bg?from-embed\",title:\"getlayout \\u5B9E\\u73B0\\u5BFC\\u822A\\u4E0D\\u5237\\u65B0\",children:\"\\u4F8B\\u5B50\"}),\"\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// /pages/account-settings/basic-information.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"SiteLayout\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../../components/SiteLayout'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" getLayout \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'../../components/AccountSettingsLayout'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token function function-variable\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"AccountSettingsBasicInformation\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token comment\",children:\"/* ... */\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"AccountSettingsBasicInformation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"getLayout\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` getLayout\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"AccountSettingsBasicInformation\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\u6BD4\\u5982\\u4E0A\\u9762\\u4F8B\\u5B50\\u4E2D\\u7684\",(0,e.jsx)(n.code,{children:\"\\u8D26\\u6237\\u8BBE\\u7F6E\\u2014-\u003e\\u57FA\\u672C\\u4FE1\\u606F\"}),\"\\u9875\\u9762\\u4EE3\\u7801\\uFF0C\\u662F\\u5728 Page \\u9875\\u9762\\u4E2D\\u7ED1\\u5B9A \",(0,e.jsx)(n.code,{children:\"getLayout\"}),\" \\u9759\\u6001\\u65B9\\u6CD5\\uFF0C\",(0,e.jsx)(n.code,{children:\"getLayout\"}),\" \\u8FD4\\u56DE\\u9875\\u9762\\u7684\\u516C\\u5171\\u5BFC\\u822A\\u7EC4\\u4EF6\\u3002\"]}),(0,e.jsxs)(n.p,{children:[\"\\u5728 \",(0,e.jsx)(n.code,{children:\"_app.tsx\"}),\" \\u4E2D\\u8C03\\u7528 \",(0,e.jsx)(n.code,{children:\"getLayout\"}),\" \\u65B9\\u6CD5\\uFF0C\\u4ECE\\u800C\\u533A\\u522B\\u5404\\u4E2A\\u9875\\u9762\\u7684 \",(0,e.jsx)(n.code,{children:\"layout\"}),\" \\u5E03\\u5C40\\u4E0D\\u540C\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"App\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'next/app'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"MyApp\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"App\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"render\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" pageProps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" router \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"props\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" getLayout \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"getLayout\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"page\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" page\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getLayout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Component\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator spread\",children:\"...\"}),\"pageProps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Component\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"MyApp\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u5982\\u679C\\u4F60\\u4E5F\\u6709\\u4E4B\\u524D\\u7684 Next \\u9879\\u76EE\\uFF0C\\u4E5F\\u9700\\u8981\\u5B9E\\u73B0\\u6301\\u4E45\\u5316\\u7F13\\u5B58\\uFF0C\\u53EF\\u4EE5\\u53C2\\u8003\\u8FD9\\u4E2A\\u4F8B\\u5B50\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"app-\\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u7EA6\\u5B9A\\u5F0F\\u8DEF\\u7531\",children:[(0,e.jsx)(n.a,{href:\"#app-\\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u7EA6\\u5B9A\\u5F0F\\u8DEF\\u7531\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"app \\u6587\\u4EF6\\u5939\\u4E0B\\u7684\\u7EA6\\u5B9A\\u5F0F\\u8DEF\\u7531\"]}),(0,e.jsxs)(n.p,{children:[\"Next13 \\u65B0\\u589E\\u4E86 \",(0,e.jsx)(n.code,{children:\"app \\u6587\\u4EF6\\u5939\"}),\" \\u6765\\u5B9E\\u73B0\",(0,e.jsx)(n.strong,{children:\"\\u7EA6\\u5B9A\\u5F0F\\u8DEF\\u7531\"}),\"\\uFF0C\\u5B8C\\u7F8E\\u5730\\u5B9E\\u73B0\\u4E86\\u6301\\u4E45\\u5316\\u7F13\\u5B58\\uFF0C\\u4EE5\\u4E0B\\u662F\\u5B98\\u65B9 \",(0,e.jsx)(n.code,{children:\"with-turbopack\"}),\" \\u9879\\u76EE\\u4E0B\\u90E8\\u5206\\u9875\\u9762\\u7ED3\\u6784\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`./app\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 GlobalNav.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 layout.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 page.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 layouts\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 CategoryNav.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 [categorySlug]\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u251C\\u2500\\u2500 SubCategoryNav.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u251C\\u2500\\u2500 [subCategorySlug]\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u2502   \\u2514\\u2500\\u2500 page.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u251C\\u2500\\u2500 layout.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u251C\\u2500\\u2500 page.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u2514\\u2500\\u2500 template.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 layout.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 page.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2514\\u2500\\u2500 template.tsx\n`})]})}),(0,e.jsx)(n.p,{children:\"\\u5BF9\\u5E94\\u7684\\u9875\\u9762\\u6548\\u679C\\u5982\\u4E0B\\u56FE\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"next playground \\u5D4C\\u5957\\u8DEF\\u7531\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a650b7ba8e2430286fcb1214ce084a4~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u770B\\u5230\\u6BCF\\u4E2A\\u6587\\u4EF6\\u4E0B\\u90FD\\u6709 3 \\u4E2A\\u6587\\u4EF6 \",(0,e.jsx)(n.code,{children:\"layout.tsx\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"page.tsx\"}),\" \\u3001\",(0,e.jsx)(n.code,{children:\"template.tsx\"}),\"\\u3001\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"layout.tsx\"}),\" \\u8BE5\\u8DEF\\u7531\\u4E0B\\u7684\\u516C\\u5171\\u5BFC\\u822A\\uFF0C\\u5207\\u6362\\u8DEF\\u7531\\u65F6\\uFF0C\\u4E0D\\u4F1A\\u5237\\u65B0\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u770B\\u7BAD\\u5934\\u5904\\u7684 Count \\u7EC4\\u4EF6\\uFF0C\\u5E76\\u6CA1\\u6709\\u5237\\u65B0\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"template.tsx\"}),\" \\u8BE5\\u8DEF\\u7531\\u4E0B\\u7684\\u516C\\u5171\\u90E8\\u5206\\uFF0C\\u5207\\u6362\\u8DEF\\u7531\\u65F6\\uFF0C\\u4F1A\\u5237\\u65B0\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"page.tsx\"}),\" \\u8BE5\\u8DEF\\u7531\\u7684\\u4E3B\\u9875\\u9762\"]})]}),(0,e.jsx)(n.p,{children:\"\\u5F53\\u6211\\u4EEC\\u70B9\\u51FB\\u5BFC\\u822A\\u65F6\\u5019\\uFF0C\\u9875\\u9762\\u4E0A\\u5237\\u65B0\\u90E8\\u5206\\u8FB9\\u6846\\u4F1A\\u9AD8\\u4EAE\\u95EA\\u70C1\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5F88\\u597D\\u5730\\u7406\\u89E3\\u4EE3\\u7801\\u76EE\\u5F55\\u7ED3\\u6784\\u7EC4\\u7EC7\\u4E0E\\u9875\\u9762\\u5448\\u73B0\\u7684\\u8DEF\\u7531\\u548C\\u6E32\\u67D3\\u3002\"}),(0,e.jsxs)(n.p,{children:[\"\\u5728 app \\u76EE\\u5F55\\u4E0B\\u6BCF\\u4E2A\\u6587\\u4EF6\\u5939\\u4E0B\\uFF0C\\u8FD8\\u53EF\\u4EE5\\u6709 \",(0,e.jsx)(n.code,{children:\"loading.tsx\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"error.tsx\"})]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"loading.tsx\"}),\" \\u8BE5\\u8DEF\\u7531\\u7684\\u4E3B\\u9875\\u9762\\u5728\\u5F02\\u6B65\\u6E32\\u67D3\\u4E2D\\uFF0C\\u4F1A\\u663E\\u793A\\u7684 loading \\u7EC4\\u4EF6\\u7684\\u5185\\u5BB9\\uFF1B\\u4F8B\\u5982\\u6211\\u4EEC\\u53EF\\u4EE5\\u7528\\u5B83\\u6765\\u5199\\u9AA8\\u67B6\\u5C4F\\uFF08Skeleton\\uFF09\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"error.tsx\"}),\" \\u8BE5\\u8DEF\\u7531\\u7684\\u9875\\u9762\\u6E32\\u67D3\\u51FA\\u9519\\uFF0C\\u4F1A\\u663E\\u793A\\u8BE5\\u9875\\u9762\\uFF0C\\u4E5F\\u5C31\\u662F\\u5C01\\u88C5\\u4E86 React \\u7684 ErrorBoundary\\u3002\"]})]}),(0,e.jsxs)(n.p,{children:[\"\\u4EE5\\u4E0A\\u9664\\u4E86 \",(0,e.jsx)(n.code,{children:\"page.tsx\"}),\" \\u5176\\u4ED6\\u6587\\u4EF6\\u90FD\\u662F\\u53EF\\u9009\\u7684\\uFF0C\\u9664\\u4E86\\u8FD9\\u4E9B\\u7EA6\\u5B9A\\u540D\\u79F0\\u7684\\u6587\\u4EF6\\u5916\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5EFA\\u7ACB\\u4EFB\\u610F\\u6587\\u4EF6\\uFF0C\\u6BD4\\u5982 \",(0,e.jsx)(n.code,{children:\"components.tsx\"}),\"\\u3001 \",(0,e.jsx)(n.code,{children:\"test.tsx\"}),\" \\u7B49\\u81EA\\u5B9A\\u4E49\\u6587\\u4EF6\\u3002app \\u76EE\\u5F55\\u53EF\\u4EE5\\u5F88\\u597D\\u5730\\u5C06\\u9875\\u9762\\u3001\\u7EC4\\u4EF6\\u3001\\u6D4B\\u8BD5\\u6587\\u4EF6\\u653E\\u5728\\u4E00\\u8D77\\uFF0C\\u7BA1\\u7406\\u4EE3\\u7801\\u76EE\\u5F55\\uFF0C\\u907F\\u514D\\u5F00\\u53D1\\u65F6\\u5168\\u5C40\\u67E5\\u627E\\u3002\"]}),(0,e.jsxs)(n.h3,{id:\"\\u8DEF\\u7531\\u5206\\u7EC4\",children:[(0,e.jsx)(n.a,{href:\"#\\u8DEF\\u7531\\u5206\\u7EC4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u8DEF\\u7531\\u5206\\u7EC4\"]}),(0,e.jsxs)(n.p,{children:[\"app \\u540C\\u5C42\\u7EA7\\u76EE\\u5F55\\u4E0B\\u8FD8\\u652F\\u6301\\u591A\\u4E2A \",(0,e.jsx)(n.code,{children:\"layout\"}),\"\\uFF0C \\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"\\uFF08\\u6587\\u4EF6\\u5939\\uFF09\"}),\"\\u533A\\u5206\\uFF0C\",(0,e.jsx)(n.code,{children:\"\\uFF08\\u6587\\u4EF6\\u5939\\uFF09\"}),\"\\u4E0D\\u4F1A\\u4F53\\u73B0\\u5728\\u8DEF\\u7531\\u4E0A\\uFF0C\\u53EA\\u662F\\u5355\\u7EAF\\u7528\\u6765\\u505A\\u4EE3\\u7801\\u5206\\u7EC4\\u3002\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`./app\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 (checkout)\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 checkout\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2502   \\u2514\\u2500\\u2500 page.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 layout.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2514\\u2500\\u2500 template.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 (main)\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 layout.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u251C\\u2500\\u2500 page.tsx\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\\u2502   \\u2514\\u2500\\u2500 template.tsx\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\u6BD4\\u5982\\u5B98\\u65B9 playground \\u4E2D\\u5173\\u4E8E\\u7535\\u5B50\\u5546\\u52A1\\u7684\\u4F8B\\u5B50\\uFF0C\",(0,e.jsx)(n.code,{children:\"main\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"checkout\"}),\" \\u7684 layout \\u662F\\u4E0D\\u540C\\u7684\\uFF0C\\u53EF\\u4EE5\\u6839\\u636E\\u5B9E\\u73B0\\u529F\\u80FD\\u81EA\\u5B9A\\u4E49\\u5206\\u7EC4\\u4EE3\\u7801\\u76EE\\u5F55\\u3002\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"playground \\u8DEF\\u7531\\u5206\\u7EC4\\u573A\\u666F\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2370250c45f4eecb9f3725af5619af7~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsxs)(n.h2,{id:\"react-server-components\",children:[(0,e.jsx)(n.a,{href:\"#react-server-components\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"React Server Components\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u5728 app \\u76EE\\u5F55\\u4E0B\\u7684\\u7EC4\\u4EF6\\u9ED8\\u8BA4\\u90FD\\u662F React Server Components\"}),\"\\uFF0C\\u90A3\\u4E48 React Server Components \\u6709\\u4EC0\\u4E48\\u4F18\\u52BF\\u5462\\uFF1F\"]}),(0,e.jsx)(n.p,{children:\"\\u8FD9\\u91CC\\u6709\\u51E0\\u4E2A\\u6982\\u5FF5\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"CSR:\\u6240\\u6709\\u524D\\u7AEF\\u6253\\u5305\\u5230\\u524D\\u7AEF\\uFF0C\\u901A\\u5E38\\u4F1A\\u5F15\\u8D77\\u6D4F\\u89C8\\u5668\\u52A0\\u8F7D JavaScript \\u8FC7\\u5927\\uFF0C\\u4ECE\\u800C\\u5BFC\\u81F4\\u9996\\u5C4F\\u767D\\u5C4F\\u65F6\\u95F4\\u8FC7\\u957F\"})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"SSR\\uFF1A\\u6570\\u636E\\u5728\\u670D\\u52A1\\u7AEF\\u8BF7\\u6C42\\uFF0C\\u901A\\u8FC7 \",(0,e.jsx)(n.code,{children:\"renderToString\"}),\" \\u65B9\\u6CD5\\u5C06\\u5B57\\u7B26\\u4E32 DOM \\u7ED3\\u6784\\u8F93\\u51FA\\u7ED9\\u6D4F\\u89C8\\u5668\\uFF0C\\u6B64\\u65F6\\u6D4F\\u89C8\\u5668\\u8FD8\\u4E0D\\u80FD\\u4EA4\\u4E92\\uFF0CReact \\u4E0D\\u80FD\\u7BA1\\u7406\\u5DF2\\u7ECF\\u5B58\\u5728\\u7684 DOM\\uFF0C\\u9700\\u8981\\u91CD\\u65B0\\u6267\\u884C\\u4E00\\u904D\\uFF0C\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u53EB\\u201C\\u6CE8\\u6C34\\u201D\\uFF08Hydrate\\uFF09\\u3002Next12 \",(0,e.jsx)(n.code,{children:\"getServerSideProps\"}),\" \\u7684\\u6E32\\u67D3\\u65B9\\u5F0F\\u4E5F\\u5C31\\u662F SSR\\u3002\"]})})]}),(0,e.jsx)(n.p,{children:\"SSR \\u89E3\\u51B3\\u4E86\\u767D\\u5C4F\\u65F6\\u95F4\\u8FC7\\u957F\\u7684\\u95EE\\u9898\\u548C SEO \\u7684\\u95EE\\u9898\\uFF0C\\u4F46\\u4E5F\\u5E76\\u4E0D\\u662F\\u5B8C\\u7F8E\\u7684\\uFF0C\\u8FC7\\u591A\\u7684\\u8BF7\\u6C42\\u4F1A\\u5BFC\\u81F4\\u670D\\u52A1\\u7AEF\\u54CD\\u5E94\\u65F6\\u95F4\\u53D8\\u957F\\uFF0C\\u201C\\u6CE8\\u6C34\\u201D\\uFF08Hydrate\\uFF09\\u7684\\u8FC7\\u7A0B\\u4E5F\\u4F1A\\u5BFC\\u81F4\\u5BA2\\u6237\\u7AEF\\u4EE3\\u7801\\u91CF\\u7684\\u589E\\u52A0\\u3002\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"\\u535A\\u5BA2\\u9875\\u9762\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02ffd647cc324fd9a750620fe7a024a0~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsxs)(n.p,{children:[\"\\u6BD4\\u5982\\u4E00\\u4E2A\\u4F20\\u7EDF\\u7684\\u535A\\u5BA2\\u9875\\u9762\\u91C7\\u7528 Next12 \\u7684\\u65B9\\u5F0F\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"getServerSideProps\"}),\" \\u7684\\u65B9\\u5F0F\\u6E32\\u67D3\\uFF0C\\u90A3\\u4E48\\u5C31\\u9700\\u8981\\u7B49 3 \\u4E2A\\u63A5\\u53E3\\u5168\\u90E8\\u8FD4\\u56DE\\u624D\\u53EF\\u4EE5\\u770B\\u5230\\u9875\\u9762\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u6BCF\\u6B21\\u8BF7\\u6C42\\u6267\\u884C\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getServerSideProps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" list \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getBlogList\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" detail \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getBlogDetail\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" comments \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getComments\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Pass data to the page via props\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"props\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" list\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" detail\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" comments \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"React Server Components ( \",(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/37\",title:\"react-18 discussions\",children:\"RFC\"}),\" ) \\u4E0E\\u4F20\\u7EDF\\u7684 SSR \\u4E0D\\u540C\\uFF0C\\u4F18\\u70B9\\u662F\\u62E5\\u6709\",(0,e.jsx)(n.strong,{children:\"\\u6D41\\u5F0F HTML \\u548C\\u9009\\u62E9\\u6027\\u6CE8\\u6C34\"})]})}),(0,e.jsxs)(n.p,{children:[\"React \",(0,e.jsx)(n.code,{children:\"Suspense\"}),\" API \\u89E3\\u9501\\u4E86 React 18 \\u4E2D\\u7684\\u4E24\\u4E2A\\u4E3B\\u8981 SSR \\u529F\\u80FD\\uFF1A\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.p,{children:\"\\u5728\\u670D\\u52A1\\u5668\\u4E0A\\u6D41\\u5F0F\\u4F20\\u8F93 HTML\\u3002\"}),(0,e.jsxs)(n.p,{children:[\"\\u8981\\u5B9E\\u73B0\\u8FD9\\u4E2A\\u529F\\u80FD\\uFF0C\\u9700\\u8981\\u4ECE\\u539F\\u6765\\u7684\\u65B9\\u6CD5\\u5207\\u6362\",(0,e.jsx)(n.code,{children:\"renderToString\"}),\"\\u5207\\u6362\\u5230\\u65B0\",(0,e.jsx)(n.code,{children:\"renderToPipeableStream\"}),\"\\u65B9\\u6CD5\\u3002\"]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u7684\\u9009\\u62E9\\u6027\\u6CE8\\u6C34\\u4F5C\\u7528\\u3002\"}),(0,e.jsxs)(n.p,{children:[\"\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"hydrateRoot\"}),\" \\u4EE3\\u66FF \",(0,e.jsx)(n.code,{children:\"createRoot\"}),\" \\u65B9\\u6CD5\\u3002\"]})]})]}),(0,e.jsxs)(n.p,{children:[\"\\u6BD4\\u5982\\u4E0A\\u9762\\u7684\\u535A\\u5BA2\\u5B9E\\u4F8B\\uFF0C\\u8BC4\\u8BBA\\u63A5\\u53E3\\u67E5\\u8BE2\\u901F\\u5EA6\\u8F83\\u6162\\uFF0C\\u5C31\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"Suspense\"}),\" \\u5B9E\\u73B0\\u6D41\\u6E32\\u67D3\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" lazy \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Comments\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"lazy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./Comments.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Layout\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"NavBar\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Sidebar\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"RightPane\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Post\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Suspense\"}),\" fallback\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Spinner\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Comments\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Suspense\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"RightPane\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Layout\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"react server component \\u6D41\\u6E32\\u67D3\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a8a0ce34e2748cb99cdfc7be6bfc21f~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsx)(n.p,{children:\"\\u5982\\u56FE\\u6240\\u793A\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u7070\\u8272\\u90E8\\u5206\\u4EE3\\u8868 HTML \\u5B57\\u7B26\\u4E32\\u8FD4\\u56DE\"}),(0,e.jsx)(n.li,{children:\"loading \\u72B6\\u6001\\u8868\\u793A\\u5F53\\u524D\\u90E8\\u5206\\u8FD8\\u5728\\u8BF7\\u6C42\"}),(0,e.jsx)(n.li,{children:\"\\u7EFF\\u8272\\u90E8\\u5206\\u4EE3\\u8868\\u6CE8\\u6C34\\u6210\\u529F\\uFF0C\\u9875\\u9762\\u53EF\\u4EE5\\u4EA4\\u4E92\"})]}),(0,e.jsx)(n.p,{children:\"\\u6240\\u8C13\\u7684\\u6D41\\u5C31\\u662F\\u901A\\u8FC7 script \\u52A8\\u6001\\u8FD4\\u56DE\\u6700\\u5C0F html\\uFF0C\\u5E76\\u4E14\\u63D2\\u5165\\u5230\\u6B63\\u786E\\u7684\\u4F4D\\u7F6E\\uFF0C\\u9875\\u9762\\u4E2D\\u5982\\u679C\\u6709\\u591A\\u4E2A Suspense\\uFF0C\\u662F\\u6CA1\\u6709\\u5148\\u540E\\u987A\\u5E8F\\u7684\\uFF0CReact Server Components \\u662F\\u5E76\\u884C\\u7684\\u3002\"}),(0,e.jsxs)(n.p,{children:[\"\\u4EE5\\u4E0A\\u5185\\u5BB9\\u5728\",(0,e.jsx)(n.a,{href:\"https://github.com/reactwg/react-18/discussions/37\",children:\"\\u300ANew Suspense SSR Architecture in React 18\\u300B\"}),\" \\u4E2D\\u53EF\\u4EE5\\u627E\\u5230\\uFF0C\\u800C\\u8981\\u642D\\u5EFA react \\u6D41\\u6E32\\u67D3\\u7684\\u67B6\\u6784\\u76F8\\u5BF9\\u6BD4\\u8F83\\u590D\\u6742\\uFF0C\\u5927\\u5BB6\\u53EF\\u4EE5\\u770B gaearon dan \\u7684 \",(0,e.jsx)(n.a,{href:\"https://codesandbox.io/s/kind-sammet-j56ro?file=/src/App.js\",title:\"gaearon dan \\u7684\\u793A\\u4F8B\",children:\"demo\"}),\"\\uFF0C\\u800C Next.js 13 \\u53EA\\u9700\\u8981\\u5728 app \\u76EE\\u5F55\\u4E0B\\uFF0C\\u6309\\u7167\\u7EA6\\u5B9A\\u7684\\u6587\\u4EF6\\u540D\\u79F0\\u5199\\uFF0C\\u5C31\\u53EF\\u4EE5\\u81EA\\u52A8\\u5B9E\\u73B0 React Server Components\\u3002\"]}),(0,e.jsxs)(n.h2,{id:\"\\u5B9E\\u73B0\\u6D41\\u6E32\\u67D3\",children:[(0,e.jsx)(n.a,{href:\"#\\u5B9E\\u73B0\\u6D41\\u6E32\\u67D3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5B9E\\u73B0\\u6D41\\u6E32\\u67D3\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"server component \\u6D41\\u6E32\\u67D3\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c136ba32d1eb4ae5a049839506a2f000~tplv-k3u1fbpfcp-zoom-1.image\"})}),(0,e.jsx)(n.p,{children:\"\\u9664\\u4E86 app \\u76EE\\u5F55\\u4E0B\\u5D4C\\u5957\\u8DEF\\u7531\\u90E8\\u5206 next.js \\u4F1A\\u5E2E\\u6211\\u4EEC\\u9ED8\\u8BA4\\u91C7\\u7528 React Server Components\\uFF0C\\u6211\\u4EEC\\u5728 page \\u9875\\u9762\\u4E2D\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u5B9E\\u73B0\\u3002\"}),(0,e.jsxs)(n.p,{children:[\"\\u5B9E\\u73B0\\u65B9\\u5F0F\\u4E5F\\u5F88\\u7B80\\u5355\\uFF0C\\u7EC4\\u4EF6\\u5916\\u5C42\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"Suspense\"})]}),(0,e.jsx)(n.pre,{className:\"language-jsx\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-jsx\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"SkeletonCard\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'@/ui/SkeletonCard'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Suspense\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Description\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./description'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Posts\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"section\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"      \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Suspense\"})]}),`\n`]})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"fallback\"}),(0,e.jsxs)(n.span,{className:\"token language-javascript script\",children:[(0,e.jsx)(n.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token language-javascript script\",children:[\"          \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"className\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"h-40 w-full \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token language-javascript script\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"            \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"SkeletonCard\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"isLoading\"}),(0,e.jsxs)(n.span,{className:\"token language-javascript script\",children:[(0,e.jsx)(n.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token tag\",children:(0,e.jsxs)(n.span,{className:\"token language-javascript script\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"          \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token language-javascript script\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"        \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Description\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"      \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Suspense\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"    \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"section\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\u7EC4\\u4EF6\\u6570\\u636E\\u8BF7\\u6C42\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"use\"}),\" API\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5B9E\\u73B0\\u6D41\\u6E32\\u67D3\\u4E86\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-tsx\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-tsx\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" use \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fetchDescription\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name known-class-name\",children:\"Promise\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token builtin\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'http://www.example.com/api/data'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"Description\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" msg \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"use\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"fetchDescription\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"section\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"      \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c\"}),\"div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"msg\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,e.jsx)(n.span,{className:\"token plain-text\",children:`\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token plain-text\",children:\"    \"}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"section\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u4F7F\\u7528\\u573A\\u666F\"})}),(0,e.jsxs)(n.p,{children:[\"\\u4ECE\\u5B98\\u65B9\\u7684 playground \\u4E2D\\u770B\\uFF0C\\u5728\\u4E00\\u4E9B\\u8BF7\\u6C42\\u8F83\\u6162\\u7684\\u63A5\\u53E3\\uFF0C\\u6BD4\\u5982\\u7535\\u5546\\u7F51\\u7AD9\\u4E2D\\u7684\\u4EF7\\u683C\\u8BA1\\u7B97\\uFF0C\\u82E5\\u8981\\u4F7F\\u7528\\u670D\\u52A1\\u7AEF\\u6E32\\u67D3\\uFF0C\\u5C31\\u53EF\\u4EE5\\u4F7F\\u7528 server Component\\u3002 \",(0,e.jsx)(n.img,{alt:\"\\u4EF7\\u683C\\u8BA1\\u7B97\\u4F7F\\u7528\\u573A\\u666F\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81c7d33b32b240e299e2d82c0dbda382~tplv-k3u1fbpfcp-zoom-1.image\"})]}),(0,e.jsxs)(n.h2,{id:\"\\u670D\\u52A1\\u7AEF\\u7EC4\\u4EF6\\u548C\\u5BA2\\u6237\\u7AEF\\u7EC4\\u4EF6\",children:[(0,e.jsx)(n.a,{href:\"#\\u670D\\u52A1\\u7AEF\\u7EC4\\u4EF6\\u548C\\u5BA2\\u6237\\u7AEF\\u7EC4\\u4EF6\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u670D\\u52A1\\u7AEF\\u7EC4\\u4EF6\\u548C\\u5BA2\\u6237\\u7AEF\\u7EC4\\u4EF6\"]}),(0,e.jsx)(n.p,{children:\"Next.js \\u6700\\u5927\\u7684\\u4F18\\u52BF\\u5C31\\u662F\\u6211\\u4EEC\\u53EA\\u9700\\u8981\\u4E00\\u4E2A\\u5DE5\\u7A0B\\uFF0C\\u5C31\\u53EF\\u4EE5\\u641E\\u5B9A\\u524D\\u7AEF\\u5DE5\\u7A0B\\u548C\\u540E\\u7AEF\\u5DE5\\u7A0B\\uFF0C\\u54EA\\u4E9B\\u662F\\u524D\\u7AEF\\u4EE3\\u7801\\u548C\\u54EA\\u4E9B\\u662F\\u540E\\u7AEF\\u4EE3\\u7801\\uFF0CNext.js \\u5728\\u6253\\u5305\\u7684\\u65F6\\u5019\\u5C31\\u4F1A\\u5E2E\\u6211\\u4EEC\\u81EA\\u52A8\\u533A\\u5206\\uFF0C\\u8FD9\\u9700\\u8981\\u5F00\\u53D1\\u8005\\u6E05\\u695A\\u5730\\u7406\\u89E3\\uFF0C\\u81EA\\u5DF1\\u5199\\u7684\\u4EE3\\u7801\\u54EA\\u4E9B\\u662F\\u5728\\u670D\\u52A1\\u7AEF\\u6267\\u884C\\uFF0C\\u54EA\\u4E9B\\u662F\\u5728\\u5BA2\\u6237\\u7AEF\\u6267\\u884C\\u3002\"}),(0,e.jsxs)(n.h3,{id:\"next12-\\u533A\\u5206\",children:[(0,e.jsx)(n.a,{href:\"#next12-\\u533A\\u5206\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Next12 \\u533A\\u5206\"]}),(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u77E5\\u9053 Page \\u51FD\\u6570\\u90FD\\u662F\\u5728\\u670D\\u52A1\\u7AEF\\u6267\\u884C\\u7684\\uFF0C\\u5305\\u62EC \",(0,e.jsx)(n.code,{children:\"getServerSideProps\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"getStaticPaths\"}),\"\\u3001\",(0,e.jsx)(n.code,{children:\"getStaticProps\"}),\"\\uFF0C\\u90A3\\u4E48\\u5982\\u679C\\u9700\\u8981\\u5728\\u5BA2\\u6237\\u7AEF\\u6267\\u884C\\u6709\\u4EE5\\u4E0B 2 \\u79CD\\u65B9\\u5F0F\\uFF1B\"]}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"\\u5728 \",(0,e.jsx)(n.code,{children:\"useEffect\"}),\"\\u3001 \",(0,e.jsx)(n.code,{children:\"onChange\"}),\" \\u7B49\\u56DE\\u8C03\\u51FD\\u6570\\u4E2D\\u4F7F\\u7528\\uFF0C\\u6BD4\\u5982\\u4E0B\\u9762\\u4F8B\\u5B50\\uFF0C\\u52A8\\u6001\\u52A0\\u8F7D\\u4E86 \",(0,e.jsx)(n.code,{children:\"fuse.js\"}),\"\\uFF0C\\u5B9E\\u73B0\\u6A21\\u7CCA\\u641C\\u7D22\\u3002\"]})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" useState \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" names \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Tim'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Joe'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Bel'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Lee'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Page\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"results\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setResults\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),`input\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        type\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"text\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        placeholder\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"Search\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        onChange\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" value \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" e\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"currentTarget\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Dynamically load fuse.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Fuse\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'fuse.js'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" fuse \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"Fuse\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"names\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"fuse\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"search\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"pre\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Results\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token class-name known-class-name\",children:\"JSON\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"stringify\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"results\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword nil null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"pre\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.ul,{children:(0,e.jsxs)(n.li,{children:[\"\\u5982\\u679C\\u4F9D\\u8D56\\u4E86\\u5916\\u90E8\\u7EC4\\u4EF6\\uFF0C\\u6216\\u8005 window \\u5BF9\\u8C61\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"next/dynamic\"}),\" \\u5E76\\u4E14\\u8BBE\\u7F6E \",(0,e.jsx)(n.code,{children:\"ssr\"}),\" \\u4E3A \",(0,e.jsx)(n.code,{children:\"false\"})]})}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:\"dynamic\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'next/dynamic'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"DynamicHeader\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"dynamic\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'../components/header'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"ssr\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"next13-\\u533A\\u5206\",children:[(0,e.jsx)(n.a,{href:\"#next13-\\u533A\\u5206\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Next13 \\u533A\\u5206\"]}),(0,e.jsxs)(n.p,{children:[\"\\u5728 Next13 \\u4E2D \\uFF0C \\u5728 app \\u76EE\\u5F55\\u4E0B\\uFF0C\\u5982\\u8981\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"useState\"}),\" \\u7B49\\u72B6\\u6001\\u7BA1\\u7406\\u7684 hook\\uFF0C\\u90A3\\u4E48\\u8BE5\\u7EC4\\u4EF6\\u53EA\\u5728\\u5BA2\\u6237\\u7AEF\\u6267\\u884C\\uFF0C\\u9700\\u8981\\u5728\\u9996\\u884C\\u52A0\\u5165 \",(0,e.jsx)(n.code,{children:\"'use client'\"}),\" \\u6307\\u4EE4\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"'use client'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" useState \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Counter\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" setCount\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"useState\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"p\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"You\"}),\" clicked \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"count\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" times\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"p\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"button onClick\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator arrow\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setCount\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"count \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Click\"}),\" me\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"button\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\u8BE5\\u533A\\u5206\\u670D\\u52A1\\u7AEF\\u7EC4\\u4EF6\\u548C\\u5BA2\\u6237\\u7AEF\\u7EC4\\u4EF6\"}),\"\\uFF0C\\u4E0B\\u8868\\u5217\\u51FA\\u4E86\\u5E38\\u7528\\u4F7F\\u7528\\u573A\\u666F\"]}),(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"\\u4F7F\\u7528\\u573A\\u666F\"}),(0,e.jsx)(n.th,{children:\"\\u670D\\u52A1\\u7AEF\\u7EC4\\u4EF6\"}),(0,e.jsx)(n.th,{children:\"\\u5BA2\\u6237\\u7AEF\\u7EC4\\u4EF6\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"fetch \\u8BF7\\u6C42\\u6570\\u636E\\u3002\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"}),(0,e.jsx)(n.td,{children:\"[\\u26A0\\uFE0F]\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u8BBF\\u95EE\\u540E\\u7AEF\\u8D44\\u6E90\\uFF08\\u76F4\\u63A5\\uFF09\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"}),(0,e.jsx)(n.td,{children:\"\\u274C\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u5728\\u670D\\u52A1\\u5668\\u4E0A\\u4FDD\\u7559\\u654F\\u611F\\u4FE1\\u606F\\uFF08\\u8BBF\\u95EE\\u4EE4\\u724C\\u3001API \\u5BC6\\u94A5\\u7B49\\uFF09\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"}),(0,e.jsx)(n.td,{children:\"\\u274C\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u4FDD\\u6301\\u5BF9\\u670D\\u52A1\\u5668\\u7684\\u5927\\u91CF\\u4F9D\\u8D56/\\u51CF\\u5C11\\u5BA2\\u6237\\u7AEF JavaScript\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"}),(0,e.jsx)(n.td,{children:\"\\u274C\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsxs)(n.td,{children:[\"\\u6DFB\\u52A0\\u4EA4\\u4E92\\u548C\\u4E8B\\u4EF6\\u4FA6\\u542C\\u5668\\uFF08\",(0,e.jsx)(n.code,{children:\"onClick()\"}),\",\",(0,e.jsx)(n.code,{children:\"onChange()\"}),\"\\u7B49\\uFF09\"]}),(0,e.jsx)(n.td,{children:\"\\u274C\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsxs)(n.td,{children:[\"\\u4F7F\\u7528\\u72B6\\u6001\\u548C\\u751F\\u547D\\u5468\\u671F\\u6548\\u679C\\uFF08\",(0,e.jsx)(n.code,{children:\"useState()\"}),\",\\xA0\",(0,e.jsx)(n.code,{children:\"useReducer()\"}),\",\\xA0\",(0,e.jsx)(n.code,{children:\"useEffect()\"}),\", \\u7B49\\uFF09\"]}),(0,e.jsx)(n.td,{children:\"\\u274C\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u4F7F\\u7528\\u4EC5\\u9650\\u6D4F\\u89C8\\u5668\\u7684 API(window)\"}),(0,e.jsx)(n.td,{children:\"\\u274C\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"\\u4F7F\\u7528\\u4F9D\\u8D56\\u4E8E\\u72B6\\u6001\\u3001\\u6548\\u679C\\u6216\\u4EC5\\u6D4F\\u89C8\\u5668 API \\u7684\\u81EA\\u5B9A\\u4E49 hooks\"}),(0,e.jsx)(n.td,{children:\"\\u274C\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsxs)(n.td,{children:[\"\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"React \\u7C7B\\u7EC4\\u4EF6\"})]}),(0,e.jsx)(n.td,{children:\"\\u274C\"}),(0,e.jsx)(n.td,{children:\"\\u2705\"})]})]})]}),(0,e.jsxs)(n.h2,{id:\"\\u6570\\u636E\\u8BF7\\u6C42\",children:[(0,e.jsx)(n.a,{href:\"#\\u6570\\u636E\\u8BF7\\u6C42\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u6570\\u636E\\u8BF7\\u6C42\"]}),(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528 react \\u7684 use \\u51FD\\u6570\\u52A0 fetch API \\u6765\\u5B9E\\u73B0\\uFF1A\\u9759\\u6001\\u7AD9\\u70B9\\u751F\\u6210\\uFF08SSG\\uFF09\\u3001\\u670D\\u52A1\\u5668\\u7AEF\\u6E32\\u67D3\\uFF08SSR\\uFF09\\u548C\\u589E\\u91CF\\u9759\\u6001\\u518D\\u751F\\uFF08ISR\\uFF09\"}),(0,e.jsx)(n.p,{children:\"\\u5728 Page \\u9875\\u9762\\u4F7F\\u7528 fetch\\uFF1A\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" use \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getData\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" res \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" string \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"await\"}),\" res\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),` name\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Page\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u652F\\u6301\\u7684\\u5168\\u7C7B\\u578B\\u7684\\u6570\\u636E\\u683C\\u5F0F\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u53EF\\u4EE5\\u8FD4\\u56DE\\u4E0D\\u7528\\u5E8F\\u5217\\u5316\\u7684\\u683C\\u5F0F\\u6570\\u636E\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u56E0\\u6B64\\u53EF\\u4EE5\\u8FD4\\u56DE Date, Map, Set, \\u7B49.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" name \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"use\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getData\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'...'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"fetch \\u7684\\u7F13\\u5B58\\u7B56\\u7565\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8BF7\\u6C42\\u88AB\\u7F13\\u5B58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u76F8\\u5F53\\u4E8E `getStaticProps`.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// `force-cache` \\u662F\\u9ED8\\u8BA4\\u503C\\uFF0C\\u53EF\\u4EE5\\u7701\\u7565\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"URL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"cache\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'force-cache'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u6BCF\\u6B21\\u5237\\u65B0\\u90FD\\u4F1A\\u91CD\\u65B0\\u8BF7\\u6C42.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u76F8\\u5F53\\u4E8E `getServerSideProps`.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"URL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"cache\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'no-store'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u8BF7\\u6C42\\u88AB\\u7F13\\u5B5810s\\uFF0C10s \\u91CD\\u65B0\\u751F\\u6210\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u76F8\\u5F53\\u4E8E `getStaticProps` \\u52A0\\u4E0A `revalidate` \\u53C2\\u6570.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"fetch\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"URL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"next\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"revalidate\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u4F7F\\u7528\\u8FD9\\u79CD\\u65B9\\u5F0F\\u7684\\u4F18\\u70B9\\u662F\\uFF0C\\u5F53\\u8BF7\\u6C42\\u6570\\u636E\\u7684\\u589E\\u52A0\\uFF0C\\u6253\\u5305\\u540E\\u524D\\u7AEF JavaScript \\u7684\\u5927\\u5C0F\\u4E0D\\u4F1A\\u589E\\u52A0\\u3002\"}),(0,e.jsxs)(n.h2,{id:\"\\u65B0\\u7684-nextimage\",children:[(0,e.jsx)(n.a,{href:\"#\\u65B0\\u7684-nextimage\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u65B0\\u7684 next/image\"]}),(0,e.jsxs)(n.p,{children:[\"\\u6211\\u4EEC\\u77E5\\u9053\\u5728 Next.js 12 \\u4E4B\\u524D\\uFF0C\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"\u003cimg\u003e\"}),\"\\u6807\\u7B7E\\uFF0Ceslint \\u4F1A\\u6709\\u4E00\\u4E2A\\u8B66\\u544A\\uFF0C\\u63D0\\u793A\\u6211\\u4EEC\\u5FC5\\u987B\\u4F7F\\u7528 \",(0,e.jsx)(n.code,{children:\"next/image\"}),\" \\u7EC4\\u4EF6\\uFF0C \\u56E0\\u4E3A \",(0,e.jsx)(n.code,{children:\"next/image\"}),\" \\u5E2E\\u6211\\u4EEC\\u505A\\u4E86\\u51E0\\u70B9\\u4F18\\u5316\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\u81EA\\u52A8\\u4F18\\u5316\\u56FE\\u7247\\u683C\\u5F0F\"}),(0,e.jsx)(n.li,{children:\"\\u81EA\\u52A8\\u7F29\\u653E\\u56FE\\u7247\\u5927\\u5C0F\"}),(0,e.jsxs)(n.li,{children:[\"\\u4F7F\\u7528\",(0,e.jsx)(n.code,{children:\"Intersection Observer API\"}),\" \\u5B9E\\u73B0\\u61D2\\u52A0\\u8F7D\"]})]}),(0,e.jsxs)(n.p,{children:[\"\\u6240\\u4EE5 image \\u5FC5\\u987B\\u52A0\\u4E0A \",(0,e.jsx)(n.code,{children:\"width\"}),\" \\u548C \",(0,e.jsx)(n.code,{children:\"height\"}),\" \\u53C2\\u6570\"]}),(0,e.jsxs)(n.p,{children:[\"\\u65B0\\u7684 Next/image \\u4F7F\\u7528\\u4E86\\u6D4F\\u89C8\\u5668\\u7684 \",(0,e.jsx)(n.a,{href:\"https://web.dev/browser-level-image-lazy-loading/\",title:\"image-lazy-loading\",children:\"lazy-loading\"}),\" \\u4EE3\\u66FF\\u4E86 \",(0,e.jsx)(n.code,{children:\"Intersection Observer API\"}),\" \\u9ED8\\u8BA4\\u60C5\\u51B5\\u4E0B\\u9700\\u8981 alt \\u6807\\u8BB0\\uFF0C\\u56E0\\u6B64\\u51CF\\u5C11\\u4E86\\u5BA2\\u6237\\u7AEF JavaScript \\u4EE3\\u7801\\uFF0C\\u5F53\\u7136\\u8FD9\\u4E2A\\u5C5E\\u6027\\u5BF9\\u6D4F\\u89C8\\u5668\\u8981\\u6C42\\u8F83\\u9AD8\\uFF0C\\u8981\\u6C42 chrome 77+\\u3002\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Image\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'next/image'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:\"avatar\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./lee.png'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Home\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:'// \\u4E3A\\u4E86\\u63D0\\u9AD8\\u53EF\\u8BBF\\u95EE\\u6027 \"alt\" \\u5C5E\\u6027\\u662F\\u5FC5\\u987B\\u7684'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\u56FE\\u7247\\u53EF\\u4EE5\\u4F7F\\u7528\\u653E\\u5728 `app/`  \\u76EE\\u5F55\\u4E0B\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Image\"}),\" alt\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"leeerob\"'}),\" src\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"avatar\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" placeholder\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"blur\"'}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"nextfont\",children:[(0,e.jsx)(n.a,{href:\"#nextfont\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"@next/font\"]}),(0,e.jsx)(n.p,{children:\"\\u52A0\\u5165\\u4E86\\u4E00\\u4E2A\\u65B0\\u7684\\u5305\\uFF0C\\u53EF\\u4EE5\\u5728\\u6784\\u5EFA\\u65F6\\u76F4\\u63A5\\u5F15\\u7528 google \\u5B57\\u4F53\\u548C\\u672C\\u5730\\u5B57\\u4F53\\uFF0C\\u5B9E\\u73B0\\u5B57\\u4F53\\u7684\\u6258\\u7BA1\\u548C\\u9884\\u52A0\\u8F7D\\uFF0C\\u8FD9\\u70B9\\u5BF9\\u82F1\\u6587\\u7F51\\u7AD9\\u5F88\\u6709\\u7528\\uFF0C\\u4E2D\\u6587\\u7F51\\u7AD9\\u4E00\\u822C\\u4E0D\\u52A0\\u8F7D\\u5B57\\u4F53\\uFF0C\\u56FE\\u6807\\u5EFA\\u8BAE\\u4F7F\\u7528 svg\\u3002\"}),(0,e.jsx)(n.p,{children:\"\\u52A0\\u8F7D\\u8C37\\u6B4C\\u5B57\\u4F53\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsxs)(n.span,{className:\"token imports\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Inter\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'@next/font/google'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inter \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Inter\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"html className\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"inter\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"className\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\u52A0\\u8F7D\\u672C\\u5730\\u5B57\\u4F53\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:\"localFont\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'@next/font/local'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" myFont \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"localFont\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"src\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'./my-font.woff2'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"html className\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"myFont\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"className\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"nextlink\",children:[(0,e.jsx)(n.a,{href:\"#nextlink\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"next/link\"]}),(0,e.jsxs)(n.p,{children:[\"\\u81EA\\u52A8\\u52A0\\u4E0A \",(0,e.jsx)(n.code,{children:\"\u003ca\u003e\"}),\"\\u6807\\u7B7E\\u3002\"]}),(0,e.jsxs)(n.p,{children:[\"Next.js 12: \\u9700\\u8981\",(0,e.jsx)(n.code,{children:\"\u003ca\u003e\"}),\" \\u5305\\u88F9\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,e.jsx)(n.span,{className:\"token imports\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Link\"})}),\" \",(0,e.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'next/link'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Link\"}),\" href\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"/about\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"a\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"About\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"a\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Link\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Next.js 13: \",(0,e.jsx)(n.code,{children:\"\u003cLink\u003e\"}),\" \\u4E0D\\u9700\\u8981 \",(0,e.jsx)(n.code,{children:\"\u003ca\u003e\"})]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsx)(n.code,{className:\"language-js code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Link\"}),\" href\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"/about\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"About\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Link\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})}),(0,e.jsxs)(n.h2,{id:\"\\u5C0F\\u7ED3\",children:[(0,e.jsx)(n.a,{href:\"#\\u5C0F\\u7ED3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\u5C0F\\u7ED3\"]}),(0,e.jsxs)(n.p,{children:[\"\\u672C\\u6587\\u4E3B\\u8981\\u7ED3\\u5408\\u4E86 \",(0,e.jsx)(n.a,{href:\"https://nextjs.org/blog/next-13\",children:\"Next13 \\u5B98\\u7F51\\u535A\\u5BA2\"}),' \\u6458\\u53D6\\u4E86\\u90E8\\u5206\\u5185\\u5BB9\\uFF0C\\u7ED3\\u5408\\u7B14\\u8005\\u5BF9 Next.js \\u7684\\u7406\\u89E3\\u548C\\u5206\\u6790\\uFF0C\\u4ECB\\u7ECD\\u4E86\\u5176\\u53D8\\u52A8\\u3001\\u4F7F\\u7528\\u65B9\\u6CD5\\uFF0C\\u4EE5\\u53CA\\u5176\\u6539\\u52A8\\u539F\\u56E0\\uFF0C Next13 \\u8FD9\\u6B21\\u66F4\\u65B0\\u4E3B\\u8981\\u4E0E React server component \\u6DF1\\u5EA6\\u7ED3\\u5408\\uFF0C\\u5728\"\\u7528\\u6237\\u4F53\\u9A8C\\u3001\\u53EF\\u7EF4\\u62A4\\u6027\\u3001\\u6027\\u80FD\"\\u8FD9\\u51E0\\u4E2A\\u65B9\\u9762\\u90FD\\u5E26\\u6765\\u4E86\\u5DE8\\u5927\\u7684\\u63D0\\u5347\\uFF0C\\u672C\\u4EE5\\u4E3A React \\u7684 Server component \\u8FD8\\u9065\\u4E0D\\u53EF\\u53CA\\uFF0C\\u4F46 Next13 \\u5374\\u8BA9\\u6211\\u4EEC\\u89E6\\u624B\\u53EF\\u53CA\\uFF0C Next13 \\u4E5F\\u5C06\\u6210\\u4E3A\\u5347\\u7EA7 React18 \\u7684\\u9996\\u9009\\u6846\\u67B6\\uFF0C\\u672A\\u6765\\u524D\\u540E\\u7AEF\\u5E76\\u884C\\u7684\\u5F00\\u53D1\\u6A21\\u5F0F\\u6216\\u8BB8\\u80FD\\u591F\\u6210\\u4E3A\\u4E3B\\u6D41\\uFF0C\\u8FD9\\u4E5F\\u5C06\\u662F\\u5BF9\\u524D\\u7AEF\\u5F00\\u53D1\\u8005\\u7684\\u4E00\\u4E2A\\u6311\\u6218\\u3002']}),(0,e.jsx)(n.p,{children:\"\\u4EE5\\u4E0A\\u5C31\\u662F\\u672C\\u6587\\u7684\\u5168\\u90E8\\u5185\\u5BB9\\uFF0C\\u5173\\u4E8E Next13 \\u4F60\\u5B66\\u4F1A\\u4E86\\u5417\\uFF1F\\u6B22\\u8FCE\\u5728\\u8BC4\\u8BBA\\u533A\\u7559\\u8A00\\u8BA8\\u8BBA\\uFF0C\\u6587\\u4E2D\\u82E5\\u6709\\u4E0D\\u6B63\\u4E4B\\u5904\\uFF0C\\u4E07\\u671B\\u544A\\u77E5\\u3002\"})]})}}var w=x;return f(j);})();\n;return Component;","toc":[{"value":"前言","url":"#前言","depth":2},{"value":"Turbopack","url":"#turbopack","depth":2},{"value":"Turbopack 特点","url":"#turbopack-特点","depth":3},{"value":"为什么不选择 Vite 和 Esbuild？","url":"#为什么不选择-vite-和-esbuild","depth":3},{"value":"为什么要改基于文件的路由系统","url":"#为什么要改基于文件的路由系统","depth":2},{"value":"Next.js 12 中 Layout 实现方式","url":"#nextjs-12-中-layout-实现方式","depth":2},{"value":"app 文件夹下的约定式路由","url":"#app-文件夹下的约定式路由","depth":2},{"value":"路由分组","url":"#路由分组","depth":3},{"value":"React Server Components","url":"#react-server-components","depth":2},{"value":"实现流渲染","url":"#实现流渲染","depth":2},{"value":"服务端组件和客户端组件","url":"#服务端组件和客户端组件","depth":2},{"value":"Next12 区分","url":"#next12-区分","depth":3},{"value":"Next13 区分","url":"#next13-区分","depth":3},{"value":"数据请求","url":"#数据请求","depth":2},{"value":"新的 next/image","url":"#新的-nextimage","depth":2},{"value":"@next/font","url":"#nextfont","depth":2},{"value":"next/link","url":"#nextlink","depth":2},{"value":"小结","url":"#小结","depth":2}],"frontMatter":{"readingTime":{"text":"11 min read","minutes":10.15,"time":609000,"words":2030},"slug":"你好，Next.js 13","fileName":"你好，Next.js 13.md","title":"你好，Next.js 13","date":"2022-10-29T23:48:04.000Z","lastmod":"2023/1/25 11:42:52","tags":["Turbopack","React.js"],"draft":false,"summary":"上周发布了 Next.js 的一个全新的版本 13，它带来了全新的理念（server component），作为一名 Next.js 的爱好者，我们有必要重新学习和认识下它。","images":"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a99af6f1111845878f6401b0d6abeed8~tplv-k3u1fbpfcp-watermark.image?","authors":["default"],"layout":"PostLayout"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.19,"time":11400,"words":38},"slug":["default"],"fileName":"default.md","name":"随风","avatar":"/static/images/avatar.jpeg","occupation":"前端工程师","company":"分享 JavaScript 热门框架，记录前端工程师学习成长历程。","email":"tianping888@163.com","juejin":"https://juejin.cn","zhihu":"https://www.zhihu.com","github":"https://github.com/balac2015","date":null}],"prev":{"title":"使用 Vitest 和 React Testing Library 给 Next.js 应用单元测试","date":"2022-10-25T15:51:35.000Z","lastmod":"2023/1/25 11:42:53","tags":["前端","React.js"],"draft":false,"summary":"在本文中我们给 Next.js 应用配置了 vitest 和 React-testing-library 测试环境，这套配置同样适用于其他 react 项目，只需要依照步骤配置即可。","images":"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d17f81bec9424f6bbf2e808cebff6706~tplv-k3u1fbpfcp-watermark.image?","authors":["default"],"layout":"PostLayout","slug":"使用 Vitest 和 React Testing Library 给 Next.js 应用单元测试"},"next":{"title":"理解 Next.js 中的 CSR、SSR、SSG、ISR 以及 Streaming","date":"2022-11-06T05:51:14.000Z","lastmod":"2023/1/25 11:42:31","tags":["React.js"],"draft":false,"summary":"Next.js 提供了 CSR、SSR、SSG、ISR、 Streaming 这么多渲染方式，本文就从渲染方式方面来讲解，让我们可以更好地理解 Next.js 以及使用 Next.js。","images":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12e21e255cc44345a47656fb5ac37f3b~tplv-k3u1fbpfcp-watermark.image?","authors":["default"],"layout":"PostLayout","slug":"理解 Next.js 中的 CSR、SSR、SSG、ISR 以及 Streaming"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["你好，Next.js 13"]},"buildId":"xRVIygn0gkexXE3qpo3Pp","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>