{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var o=a=>t(a,\"__esModule\",{value:!0});var k=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),g=(a,s)=>{for(var c in s)t(a,c,{get:s[c],enumerable:!0})},i=(a,s,c,e)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let l of m(s))!N.call(a,l)&&(c||l!==\"default\")&&t(a,l,{get:()=>s[l],enumerable:!(e=h(s,l))||e.enumerable});return a},f=(a,s)=>i(o(t(a!=null?p(u(a)):{},\"default\",!s&&a&&a.__esModule?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a),b=(a=>(s,c)=>a&&a.get(s)||(c=i(o({}),s,1),a&&a.set(s,c),c))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var d=k((v,r)=>{r.exports=_jsx_runtime});var x={};g(x,{default:()=>w,frontmatter:()=>y});var n=f(d()),y={title:\"\\u5982\\u4F55\\u907F\\u514D React hooks \\u95ED\\u5305\\u9677\\u9631\\uFF1F\",date:\"2022/11/28 07:57:37\",lastmod:\"2023/1/25 11:42:16\",tags:[\"React.js\",\"\\u6398\\u91D1\\xB7\\u91D1\\u77F3\\u8BA1\\u5212\"],draft:!1,summary:\"\\u6709\\u65F6\\u5019\\u6211\\u4EEC\\u4F7F\\u7528\\u4E86useMemo useCallback \\u6765\\u4F18\\u5316\\u6027\\u80FD\\uFF0C\\u8FD9\\u4E9B\\u51FD\\u6570\\u4E0E\\u5916\\u56F4\\u7684 state \\u5F62\\u6210\\u95ED\\u5305\\uFF0C\\u5BFC\\u81F4\\u7F13\\u5B58\\u51FD\\u6570\\u4E2D\\u83B7\\u53D6\\u5230\\u7684 state \\u4E0D\\u662F\\u6700\\u65B0\\u7684\\u503C\\uFF0C\\u8FD9\\u5C31\\u662F\\u95ED\\u5305\\u9677\\u9631\\u3002\",images:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc9a2de7e4874d37ba6010fac897d212~tplv-k3u1fbpfcp-watermark.image?\",authors:[\"default\"],layout:\"PostLayout\"};function C(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",pre:\"pre\",strong:\"strong\",img:\"img\",ol:\"ol\",li:\"li\",blockquote:\"blockquote\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"\\u4EC0\\u4E48\\u662F-react-hooks-\\u95ED\\u5305\\u9677\\u9631\",children:[(0,n.jsx)(e.a,{href:\"#\\u4EC0\\u4E48\\u662F-react-hooks-\\u95ED\\u5305\\u9677\\u9631\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4EC0\\u4E48\\u662F React hooks \\u95ED\\u5305\\u9677\\u9631\\uFF1F\"]}),(0,n.jsxs)(e.p,{children:[\"\\u5728 react \\u4E2D \\u63D0\\u4F9B\\u4E86\\u4E00\\u4E9B\\u6027\\u80FD\\u4F18\\u5316\\u51FD\\u6570 \",(0,n.jsx)(e.code,{children:\"react.memo\"}),\" \\u3001\",(0,n.jsx)(e.code,{children:\"useMemo\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"useCallback\"}),\"\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-js\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" cachedValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useMemo\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" calculateValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" dependencies\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"useMemo\"}),\"\\uFF1Amemoized \\u503C\\uFF0C\\u53EA\\u6709\\u4F9D\\u8D56\\u9879\\u53D8\\u66F4\\u7684\\u65F6\\u5019\\u624D\\u4F1A\\u91CD\\u65B0\\u8BA1\\u7B97\"]}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-js\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" cachedFn \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useCallback\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"fn\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" dependencies\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"useCallback\"}),\"\\uFF1Amemoized \\u51FD\\u6570\\uFF0C\\u53EA\\u6709\\u4F9D\\u8D56\\u9879\\u53D8\\u66F4\\u7684\\u65F6\\u5019\\u624D\\u4F1A\\u91CD\\u65B0\\u66F4\\u65B0\"]}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-js\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoizedComponent\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"memo\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SomeComponent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" arePropsEqual\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"memo\"}),\"\\uFF1A\\u7F13\\u5B58\\u7EC4\\u4EF6\\uFF0C\\u5F53 props \\u6CA1\\u53D8\\u5316\\u7684\\u65F6\\u5019\\uFF0C\\u4E0D\\u4F1A\\u6267\\u884C render\\u3002\",(0,n.jsx)(e.code,{children:\"arePropsEqual\"}),\" \\u662F\\u4E00\\u4E2A\\u53EF\\u9009\\u51FD\\u6570\\uFF0C\\u53EF\\u4EE5\\u81EA\\u5B9A\\u4E49\\u5BF9\\u6BD4\\u65B0\\u65E7\\u7684 \",(0,n.jsx)(e.code,{children:\"props\"}),\", \\u8FD4\\u56DE \",(0,n.jsx)(e.code,{children:\"true\"}),\" \\u5C31\\u4F1A\\u7F13\\u5B58\\uFF0C\\u8FD4\\u56DE \",(0,n.jsx)(e.code,{children:\"false\"}),\"\\uFF0C\\u5C31\\u4E0D\\u4F1A\\u7F13\\u5B58\\u3002\"]}),(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`const arePropsEqual=(oldProps: Props, newProps: Props) => boolean\n`})})}),(0,n.jsx)(e.p,{children:\"\\u6709\\u65F6\\u5019\\u6211\\u4EEC\\u4F7F\\u7528\\u4E86\\u8FD9\\u4E9B\\u51FD\\u6570\\u6765\\u4F18\\u5316\\u6027\\u80FD\\uFF0C\\u8FD9\\u4E9B\\u51FD\\u6570\\u4E0E\\u5916\\u56F4\\u7684 state \\u5F62\\u6210\\u95ED\\u5305\\uFF0C\\u5BFC\\u81F4\\u7F13\\u5B58\\u51FD\\u6570\\u4E2D\\u83B7\\u53D6\\u5230\\u7684 state \\u4E0D\\u662F\\u6700\\u65B0\\u7684\\u503C\\uFF0C\\u8FD9\\u5C31\\u662F\\u95ED\\u5305\\u9677\\u9631\\u3002\"}),(0,n.jsxs)(e.h2,{id:\"\\u5B9E\\u4F8B\\u6F14\\u793A\",children:[(0,n.jsx)(e.a,{href:\"#\\u5B9E\\u4F8B\\u6F14\\u793A\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5B9E\\u4F8B\\u6F14\\u793A\"]}),(0,n.jsxs)(e.p,{children:[\"\\u6BD4\\u5982\\u4E0B\\u9762\\u4EE3\\u7801\\uFF0C\\u5728\\u9879\\u76EE\\u4E2D\\u6709\\u4E00\\u4E2A\\u8BA1\\u65F6\\u5668\\u7EC4\\u4EF6\\uFF0C\\u8FD8\\u6709\\u4E00\\u4E2A \",(0,n.jsx)(e.code,{children:\"Child\"}),\" \\u7EC4\\u4EF6, \\u70B9\\u51FB \",(0,n.jsx)(e.code,{children:\"Child\"}),\" \\u7EC4\\u4EF6\\u9700\\u8981\\u8FD4\\u56DE App \\u7EC4\\u4EF6\\u4E2D\\u7684\\u6700\\u65B0 \",(0,n.jsx)(e.code,{children:\"state\"}),\" \\u503C\\uFF1B\"]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-tsx\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" useCallback\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useEffect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useLayoutEffect \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'antd/dist/antd.css'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Button\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ButtonProps\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'antd'\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"Child\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" onClick \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ButtonProps\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'render'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Button\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"onClick\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"onClick\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"type\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"primary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`      Button\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Button\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"App\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access function-variable method-variable\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"FC\"})}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setCount\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useEffect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" time \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setInterval\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"setCount\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" count \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1000\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"clearInterval\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"time\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"handleClick\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"h2\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"h2\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Child\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"onClick\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"handleClick\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/>\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token tag\",children:(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"})}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"App\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u6837\\u6CA1\\u4EC0\\u4E48\\u95EE\\u9898\\uFF0C\\u4F46\\u662F\\u6BCF\\u6B21\\u6E32\\u67D3\\u7684\\u65F6\\u5019 \",(0,n.jsx)(e.code,{children:\"Child\"}),\" \\u7EC4\\u4EF6\\u90FD\\u4F1A\\u6267\\u884C render\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"image.png\",src:\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ffc82d64fd84254b2a988cb0f340bdd~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsxs)(e.p,{children:[\"\\u4E3A\\u4E86\\u9632\\u6B62 App \\u7EC4\\u4EF6\\u5728\\u66F4\\u65B0\\u7684\\u65F6\\u5019\\uFF0C\\u4E0D\\u91CD\\u590D\\u6E32\\u67D3\\uFF08render\\uFF09\\u5B50\\u7EC4\\u4EF6\\uFF0C\\u6211\\u4EEC\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"React.memo\"}),\" \\u5305\\u88F9\\u4E0B \",(0,n.jsx)(e.code,{children:\"Child\"}),\" \\u7EC4\\u4EF6\\uFF0C \",(0,n.jsx)(e.code,{children:\"handleClick\"}),\" \\u4E5F\\u9700\\u8981\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useCallback\"}),\" \\u5305\\u88F9\\uFF0C\\u8FD9\\u6837 \",(0,n.jsx)(e.code,{children:\"Child\"}),\" \\u7EC4\\u4EF6\\u53EA\\u4F1A render \\u4E00\\u6B21\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-tsx\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Child\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"React\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access\",children:\"memo\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" onClick \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ButtonProps\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'render'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Button\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"onClick\"}),(0,n.jsxs)(e.span,{className:\"token language-javascript script\",children:[(0,n.jsx)(e.span,{className:\"token punctuation script-punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"onClick\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"type\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"primary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token plain-text\",children:`      Button\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Button\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const handleClick = useCallback(() => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    console.log(count);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  }, []);\n`})]})}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u6837\\u4E00\\u6765 \",(0,n.jsx)(e.code,{children:\"useCallback\"}),\" \\u548C state \\u5C31\\u5F62\\u6210\\u4E86\\u4E00\\u4E2A\\u95ED\\u5305\\uFF0C\\u6BCF\\u6B21\\u6253\\u5370\\u7684 state \\u5C31\\u662F\\u521D\\u59CB\\u5316\\u7684 state\\u3002\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"image.png\",src:\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d18a20ad358d44a29ef944ca483489da~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:\"\\u4E3A\\u4E86\\u83B7\\u5F97\\u6700\\u65B0\\u7684 state \\u503C\\uFF0C\\u5FC5\\u987B\\u5C06 count \\u53C2\\u6570\\u5199\\u8FDB useCallback \\u7684\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-js\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" handleClick \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useCallback\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function method property-access\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u4F46\\u8FD9\\u6837\\uFF0C\\u53C8\\u4F1A\\u5BFC\\u81F4 \",(0,n.jsx)(e.code,{children:\"Child\"}),\" \\u7EC4\\u4EF6\\u66F4\\u65B0\\u3002\\u90A3\\u4E48\\u6709\\u4EC0\\u4E48\\u597D\\u7684\\u89E3\\u51B3\\u529E\\u6CD5\\u5462\\uFF1F\\u65E2\\u80FD\\u9632\\u6B62\\u5B50\\u7EC4\\u4EF6\\u7684\\u66F4\\u65B0\\uFF0C\\u53C8\\u53EF\\u4EE5\\u83B7\\u53D6\\u5230\\u6700\\u65B0\\u7684 \",(0,n.jsx)(e.code,{children:\"state\"}),\" \\u503C\\u5462\\uFF1F\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"\\u65B9\\u6CD5\\uFF1A\"})}),(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u53EF\\u4EE5\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useRef\"}),\" \\u6765\\u5B58\\u4E00\\u4E2A\\u51FD\\u6570\\uFF0C\\u6BCF\\u6B21\\u66F4\\u65B0\\u7684\\u65F6\\u5019\\u8BBE\\u7F6E \",(0,n.jsx)(e.code,{children:\"ref.current\"}),\" \\u7684\\u503C\\uFF0C\\u901A\\u8FC7\\u51FD\\u6570\\u6765\\u83B7\\u53D6\\u6700\\u65B0\\u7684 \",(0,n.jsx)(e.code,{children:\"state\"}),\" \\u503C\\u3002\"]}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const App: React.FC = () => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  const [count, setCount] = React.useState(0);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  const ref = React.useRef<VoidFunction>();\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  useEffect(() => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    const time = setInterval(() => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      setCount((count) => count + 1);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    }, 1000);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    return () => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      clearInterval(time);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    };\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  }, []);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  const fn = () => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    console.log(count);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  };\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  ref.current = fn;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  const handleClick = useCallback(() => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    ref.current();\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  }, []);\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  return (\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    <>\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      <h2>{count}</h2>\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      <Child onClick={handleClick} />\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    </>\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  );\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`};\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"image.png\",src:\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36531d7c4f1f4c6d987991568df7a2dc~tplv-k3u1fbpfcp-watermark.image?\"})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://codesandbox.io/s/an-niu-lei-xing-antd-4-24-2-forked-wv1w0q?file=/demo.tsx\",children:\"codesandbox \\u6F14\\u793A\\u5730\\u5740\"})}),(0,n.jsxs)(e.h2,{id:\"\\u5C0F\\u7ED3\",children:[(0,n.jsx)(e.a,{href:\"#\\u5C0F\\u7ED3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5C0F\\u7ED3\"]}),(0,n.jsx)(e.p,{children:\"\\u89E3\\u51B3\\u95ED\\u5305\\u9677\\u9631\\u7684\\u65B9\\u6CD5\"}),(0,n.jsxs)(e.ol,{children:[(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[\"\\u5F53\\u9875\\u9762\\u66F4\\u65B0\\u4E0D\\u9891\\u7E41\\u7684\\u65F6\\u5019\\uFF0C\\u4E0D\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useMemo\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"useCallback\"}),\" \\u7F13\\u5B58\\u51FD\\u6570\\u6765\\u4F18\\u5316\\u9875\\u9762\\uFF1B\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[\"\\u5C06\\u66F4\\u65B0\\u4F9D\\u8D56\\u7684\\u53C2\\u6570\\u5199\\u8FDB \",(0,n.jsx)(e.code,{children:\"useCallback\"}),\" \\u7684\\u7B2C\\u4E8C\\u4E2A\\u53C2\\u6570\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.code,{children:\"useRef\"}),\" \\u6765\\u5B58\\u5728\\u4E00\\u4E2A\\u51FD\\u6570\\uFF0C\\u7528\\u4E00\\u4E2A\\u51FD\\u6570\\u5B9E\\u65F6\\u83B7\\u53D6\\u6700\\u65B0\\u7684 \",(0,n.jsx)(e.code,{children:\"state\"}),\" \\u503C\"]})})]}),(0,n.jsx)(e.p,{children:\"\\u4EE5\\u4E0A\\u5C31\\u662F\\u672C\\u6587\\u5168\\u90E8\\u5185\\u5BB9\\uFF0C\\u5982\\u679C\\u5BF9\\u4F60\\u6709\\u5E2E\\u52A9\\uFF0C\\u53EF\\u4EE5\\u968F\\u624B\\u70B9\\u4E2A\\u8D5E\\uFF0C\\u8FD9\\u5BF9\\u6211\\u771F\\u7684\\u5F88\\u91CD\\u8981\\uFF0C\\u5E0C\\u671B\\u8FD9\\u7BC7\\u6587\\u7AE0\\u5BF9\\u5927\\u5BB6\\u6709\\u6240\\u5E2E\\u52A9\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u53C2\\u8003\\u6211\\u5F80\\u671F\\u7684\\u6587\\u7AE0\\u6216\\u8005\\u5728\\u8BC4\\u8BBA\\u533A\\u4EA4\\u6D41\\u4F60\\u7684\\u60F3\\u6CD5\\u548C\\u5FC3\\u5F97\\uFF0C\\u6B22\\u8FCE\\u4E00\\u8D77\\u63A2\\u7D22\\u524D\\u7AEF\\u3002\"}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"\\u672C\\u6587\\u6B63\\u5728\\u53C2\\u52A0\",(0,n.jsx)(e.a,{href:\"https://juejin.cn/post/7162096952883019783\",title:\"https://juejin.cn/post/7162096952883019783\",children:\"\\u300C\\u91D1\\u77F3\\u8BA1\\u5212 . \\u74DC\\u5206 6 \\u4E07\\u73B0\\u91D1\\u5927\\u5956\\u300D\"})]})})]})}}var w=C;return b(x);})();\n;return Component;","toc":[{"value":"什么是 React hooks 闭包陷阱？","url":"#什么是-react-hooks-闭包陷阱","depth":2},{"value":"实例演示","url":"#实例演示","depth":2},{"value":"小结","url":"#小结","depth":2}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.715,"time":222900,"words":743},"slug":"如何避免 React hooks 闭包陷阱？","fileName":"如何避免 React hooks 闭包陷阱？.md","title":"如何避免 React hooks 闭包陷阱？","date":"2022-11-27T23:57:37.000Z","lastmod":"2023/1/25 11:42:16","tags":["React.js","掘金·金石计划"],"draft":false,"summary":"有时候我们使用了useMemo useCallback 来优化性能，这些函数与外围的 state 形成闭包，导致缓存函数中获取到的 state 不是最新的值，这就是闭包陷阱。","images":"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc9a2de7e4874d37ba6010fac897d212~tplv-k3u1fbpfcp-watermark.image?","authors":["default"],"layout":"PostLayout"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.19,"time":11400,"words":38},"slug":["default"],"fileName":"default.md","name":"随风","avatar":"/static/images/avatar.jpeg","occupation":"前端工程师","company":"分享 JavaScript 热门框架，记录前端工程师学习成长历程。","email":"tianping888@163.com","juejin":"https://juejin.cn","zhihu":"https://www.zhihu.com","github":"https://github.com/balac2015","date":null}],"prev":{"title":"我在工作中使用 git 的几个技巧","date":"2022-11-23T04:32:22.000Z","lastmod":"2023/1/25 11:42:17","tags":["Git","掘金·金石计划"],"draft":false,"summary":"Git 是每个程序员的必备技能，良好的 Git 提交习惯，不但可以让代码阅读更清晰，还可以提高我们的我们的工作效率，接下来我将分享我在工作中关于 Git 的使用经验，或许对你有帮助。","images":"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fce639f5d1b4e0794b26f21326ed3f3~tplv-k3u1fbpfcp-watermark.image?","authors":["default"],"layout":"PostLayout","slug":"我在工作中使用 git 的几个技巧"},"next":{"title":"Next.js 全栈开发微信公众号 Markdown 排版编辑器","date":"2022-11-29T16:42:25.000Z","lastmod":"2023/1/25 11:42:14","tags":["React.js","前端","Markdown"],"draft":false,"summary":"阅读本文，你将收获： 学会使用 Monaco Editor 开发多文件编辑器；学会使用 mdx 在线编译 ；实现剪切板的劫持；学会使用云函数和云数据写接口；","images":"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/722aa1c1cef346aba9cc4db65319fb69~tplv-k3u1fbpfcp-watermark.image?","authors":["default"],"layout":"PostLayout","slug":"Next.js 全栈开发微信公众号 Markdown 排版编辑器"}},"__N_SSG":true}